(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const f0=!1;var eg=Array.isArray,RC=Array.prototype.indexOf,jm=Array.from,Gy=Object.defineProperty,vA=Object.getOwnPropertyDescriptor,Wy=Object.getOwnPropertyDescriptors,qC=Object.prototype,KC=Array.prototype,Rm=Object.getPrototypeOf;function Zc(n){return typeof n=="function"}const sc=()=>{};function $C(n){return n()}function p0(n){for(var e=0;e<n.length;e++)n[e]()}const Mi=2,Xy=4,sh=8,qm=16,qa=32,zc=64,pp=128,Da=256,gp=512,Fs=1024,SA=2048,ad=4096,mA=8192,tg=16384,VC=32768,ih=65536,Yy=1<<17,GC=1<<19,Jy=1<<20,La=Symbol("$state"),Zy=Symbol("legacy props"),g0=Symbol("");function e_(n){return n===this.v}function Km(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function WC(n,e){return n!==e}function $m(n){return!Km(n,this.v)}function XC(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function YC(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function JC(n){throw new Error("https://svelte.dev/e/effect_orphan")}function ZC(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function e4(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function t4(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function r4(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function n4(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function o4(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function s4(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Cc=!1,i4=!1;function a4(){Cc=!0}const Vm=1,Gm=2,t_=4,A4=8,l4=16,d4=1,c4=2,r_=4,u4=8,h4=16,n_=1,f4=2,Ps=Symbol(),o_="http://www.w3.org/2000/svg";function rg(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let zn=null;function M2(n){zn=n}function an(n,e=!1,t){zn={p:zn,c:null,e:null,m:!1,s:n,x:null,l:null},Cc&&!e&&(zn.l={s:null,u:null,r1:[],r2:bi(!1)})}function An(n){const e=zn;if(e!==null){n!==void 0&&(e.x=n);const i=e.e;if(i!==null){var t=Cn,r=Nn;e.e=null;try{for(var o=0;o<i.length;o++){var s=i[o];Ma(s.effect),cl(s.reaction),Ah(s.fn)}}finally{Ma(t),cl(r)}}zn=e.p,e.m=!0}return n||{}}function Sc(){return!Cc||zn!==null&&zn.l===null}function bi(n,e){var t={f:0,v:n,reactions:null,equals:e_,rv:0,wv:0};return t}function ng(n,e=!1){var r;const t=bi(n);return e||(t.equals=$m),Cc&&zn!==null&&zn.l!==null&&((r=zn.l).s??(r.s=[])).push(t),t}function ze(n,e=!1){return p4(ng(n,e))}function p4(n){return Nn!==null&&!wA&&Nn.f&Mi&&(Pa===null?S4([n]):Pa.push(n)),n}function zr(n,e){return y(n,ct(()=>l(n))),e}function y(n,e){return Nn!==null&&!wA&&Sc()&&Nn.f&(Mi|qm)&&(Pa===null||!Pa.includes(n))&&s4(),Ou(n,e)}function Ou(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=w_(),s_(n,SA),Sc()&&Cn!==null&&Cn.f&Fs&&!(Cn.f&(qa|zc))&&(uA===null?E4([n]):uA.push(n))),e}function Ia(n,e=1){var t=l(n),r=e===1?t++:t--;return y(n,t),r}function s_(n,e){var t=n.reactions;if(t!==null)for(var r=Sc(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;a&SA||!r&&i===Cn||(Aa(i,e),a&(Fs|Da)&&(a&Mi?s_(i,ad):Ag(i)))}}let Wm=!1;function $d(n,e=null,t){if(typeof n!="object"||n===null||La in n)return n;const r=Rm(n);if(r!==qC&&r!==KC)return n;var o=new Map,s=eg(n),i=bi(0);s&&o.set("length",bi(n.length));var a;return new Proxy(n,{defineProperty(A,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&r4();var u=o.get(d);return u===void 0?(u=bi(c.value),o.set(d,u)):y(u,$d(c.value,a)),!0},deleteProperty(A,d){var c=o.get(d);if(c===void 0)d in A&&o.set(d,bi(Ps));else{if(s&&typeof d=="string"){var u=o.get("length"),h=Number(d);Number.isInteger(h)&&h<u.v&&y(u,h)}y(c,Ps),H2(i)}return!0},get(A,d,c){var v;if(d===La)return n;var u=o.get(d),h=d in A;if(u===void 0&&(!h||(v=vA(A,d))!=null&&v.writable)&&(u=bi($d(h?A[d]:Ps,a)),o.set(d,u)),u!==void 0){var p=l(u);return p===Ps?void 0:p}return Reflect.get(A,d,c)},getOwnPropertyDescriptor(A,d){var c=Reflect.getOwnPropertyDescriptor(A,d);if(c&&"value"in c){var u=o.get(d);u&&(c.value=l(u))}else if(c===void 0){var h=o.get(d),p=h==null?void 0:h.v;if(h!==void 0&&p!==Ps)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(A,d){var p;if(d===La)return!0;var c=o.get(d),u=c!==void 0&&c.v!==Ps||Reflect.has(A,d);if(c!==void 0||Cn!==null&&(!u||(p=vA(A,d))!=null&&p.writable)){c===void 0&&(c=bi(u?$d(A[d],a):Ps),o.set(d,c));var h=l(c);if(h===Ps)return!1}return u},set(A,d,c,u){var I;var h=o.get(d),p=d in A;if(s&&d==="length")for(var v=c;v<h.v;v+=1){var w=o.get(v+"");w!==void 0?y(w,Ps):v in A&&(w=bi(Ps),o.set(v+"",w))}h===void 0?(!p||(I=vA(A,d))!=null&&I.writable)&&(h=bi(void 0),y(h,$d(c,a)),o.set(d,h)):(p=h.v!==Ps,y(h,$d(c,a)));var b=Reflect.getOwnPropertyDescriptor(A,d);if(b!=null&&b.set&&b.set.call(u,c),!p){if(s&&typeof d=="string"){var x=o.get("length"),S=Number(d);Number.isInteger(S)&&S>=x.v&&y(x,S+1)}H2(i)}return!0},ownKeys(A){l(i);var d=Reflect.ownKeys(A).filter(h=>{var p=o.get(h);return p===void 0||p.v!==Ps});for(var[c,u]of o)u.v!==Ps&&!(c in A)&&d.push(c);return d},setPrototypeOf(){n4()}})}function H2(n,e=1){y(n,n.v+e)}function j2(n){return n!==null&&typeof n=="object"&&La in n?n[La]:n}function g4(n,e){return Object.is(j2(n),j2(e))}var R2,i_,a_;function v4(){if(R2===void 0){R2=window;var n=Element.prototype,e=Node.prototype;i_=vA(e,"firstChild").get,a_=vA(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function ah(n=""){return document.createTextNode(n)}function yi(n){return i_.call(n)}function og(n){return a_.call(n)}function g(n,e){return yi(n)}function lt(n,e){{var t=yi(n);return t instanceof Comment&&t.data===""?og(t):t}}function B(n,e=1,t=!1){let r=n;for(;e--;)r=og(r);return r}function m4(n){n.textContent=""}function bc(n){var e=Mi|SA,t=Nn!==null&&Nn.f&Mi?Nn:null;return Cn===null||t!==null&&t.f&Da?e|=Da:Cn.f|=Jy,{ctx:zn,deps:null,effects:null,equals:e_,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??Cn}}function At(n){const e=bc(n);return e.equals=$m,e}function A_(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Na(e[t])}}function w4(n){for(var e=n.parent;e!==null;){if(!(e.f&Mi))return e;e=e.parent}return null}function b4(n){var e,t=Cn;Ma(w4(n));try{A_(n),e=y_(n)}finally{Ma(t)}return e}function l_(n){var e=b4(n),t=(ol||n.f&Da)&&n.deps!==null?ad:Fs;Aa(n,t),n.equals(e)||(n.v=e,n.wv=w_())}function d_(n){Cn===null&&Nn===null&&JC(),Nn!==null&&Nn.f&Da&&Cn===null&&YC(),Jm&&XC()}function y4(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Ec(n,e,t,r=!0){var o=(n&zc)!==0,s=Cn,i={ctx:zn,deps:null,nodes_start:null,nodes_end:null,f:n|SA,first:null,fn:e,last:null,next:null,parent:o?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var a=ic;try{q2(!0),ag(i),i.f|=VC}catch(c){throw Na(i),c}finally{q2(a)}}else e!==null&&Ag(i);var A=t&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(Jy|pp))===0;if(!A&&!o&&r&&(s!==null&&y4(i,s),Nn!==null&&Nn.f&Mi)){var d=Nn;(d.effects??(d.effects=[])).push(i)}return i}function Xm(n){const e=Ec(sh,null,!1);return Aa(e,Fs),e.teardown=n,e}function v0(n){d_();var e=Cn!==null&&(Cn.f&qa)!==0&&zn!==null&&!zn.m;if(e){var t=zn;(t.e??(t.e=[])).push({fn:n,effect:Cn,reaction:Nn})}else{var r=Ah(n);return r}}function _4(n){return d_(),Fc(n)}function x4(n){const e=Ec(zc,n,!0);return(t={})=>new Promise(r=>{t.outro?td(e,()=>{Na(e),r(void 0)}):(Na(e),r(void 0))})}function Ah(n){return Ec(Xy,n,!1)}function Zt(n,e){var t=zn,r={effect:null,ran:!1};t.l.r1.push(r),r.effect=Fc(()=>{n(),!r.ran&&(r.ran=!0,y(t.l.r2,!0),ct(e))})}function Fo(){var n=zn;Fc(()=>{if(l(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&Fs&&Aa(t,ad),Ic(t)&&ag(t),e.ran=!1}n.l.r2.v=!1}})}function Fc(n){return Ec(sh,n,!0)}function De(n,e=[],t=bc){const r=e.map(t);return Ad(()=>n(...r.map(l)))}function Ad(n,e=0){return Ec(sh|qm|e,n,!0)}function _A(n,e=!0){return Ec(sh|qa,n,!0,e)}function c_(n){var e=n.teardown;if(e!==null){const t=Jm,r=Nn;K2(!0),cl(null);try{e.call(null)}finally{K2(t),cl(r)}}}function u_(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;Na(t,e),t=r}}function B4(n){for(var e=n.first;e!==null;){var t=e.next;e.f&qa||Na(e),e=t}}function Na(n,e=!0){var t=!1;if((e||n.f&GC)&&n.nodes_start!==null){for(var r=n.nodes_start,o=n.nodes_end;r!==null;){var s=r===o?null:og(r);r.remove(),r=s}t=!0}u_(n,e&&!t),wp(n,0),Aa(n,tg);var i=n.transitions;if(i!==null)for(const A of i)A.stop();c_(n);var a=n.parent;a!==null&&a.first!==null&&h_(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function h_(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function td(n,e){var t=[];Ym(n,t,!0),f_(t,()=>{Na(n),e&&e()})}function f_(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function Ym(n,e,t){if(!(n.f&mA)){if(n.f^=mA,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&ih)!==0||(r.f&qa)!==0;Ym(r,e,s?t:!1),r=o}}}function Du(n){p_(n,!0)}function p_(n,e){if(n.f&mA){n.f^=mA,n.f&Fs||(n.f^=Fs),Ic(n)&&(Aa(n,SA),Ag(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&ih)!==0||(t.f&qa)!==0;p_(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let vp=!1,m0=[];function g_(){vp=!1;const n=m0.slice();m0=[],p0(n)}function sg(n){vp||(vp=!0,queueMicrotask(g_)),m0.push(n)}function z4(){vp&&g_()}const v_=0,C4=1;let Vf=!1,Gf=v_,Nu=!1,Mu=null,ic=!1,Jm=!1;function q2(n){ic=n}function K2(n){Jm=n}let Hl=[],ac=0;let Nn=null,wA=!1;function cl(n){Nn=n}let Cn=null;function Ma(n){Cn=n}let Pa=null;function S4(n){Pa=n}let Ds=null,mi=0,uA=null;function E4(n){uA=n}let m_=1,mp=0,ol=!1,rl=null;function w_(){return++m_}function Ic(n){var d;var e=n.f;if(e&SA)return!0;if(e&ad){var t=n.deps,r=(e&Da)!==0;if(t!==null){var o,s,i=(e&gp)!==0,a=r&&Cn!==null&&!ol,A=t.length;if(i||a){for(o=0;o<A;o++)s=t[o],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);i&&(n.f^=gp)}for(o=0;o<A;o++)if(s=t[o],Ic(s)&&l_(s),s.wv>n.wv)return!0}(!r||Cn!==null&&!ol)&&Aa(n,Fs)}return!1}function F4(n,e){for(var t=e;t!==null;){if(t.f&pp)try{t.fn(n);return}catch{t.f^=pp}t=t.parent}throw Vf=!1,n}function I4(n){return(n.f&tg)===0&&(n.parent===null||(n.parent.f&pp)===0)}function ig(n,e,t,r){if(Vf){if(t===null&&(Vf=!1),I4(e))throw n;return}t!==null&&(Vf=!0);{F4(n,e);return}}function b_(n,e,t=0){var r=n.reactions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];s.f&Mi?b_(s,e,t+1):e===s&&(t===0?Aa(s,SA):s.f&Fs&&Aa(s,ad),Ag(s))}}function y_(n){var p;var e=Ds,t=mi,r=uA,o=Nn,s=ol,i=Pa,a=zn,A=wA,d=n.f;Ds=null,mi=0,uA=null,Nn=d&(qa|zc)?null:n,ol=(d&Da)!==0&&(!ic||o===null||A),Pa=null,M2(n.ctx),wA=!1,mp++;try{var c=(0,n.fn)(),u=n.deps;if(Ds!==null){var h;if(wp(n,mi),u!==null&&mi>0)for(u.length=mi+Ds.length,h=0;h<Ds.length;h++)u[mi+h]=Ds[h];else n.deps=u=Ds;if(!ol)for(h=mi;h<u.length;h++)((p=u[h]).reactions??(p.reactions=[])).push(n)}else u!==null&&mi<u.length&&(wp(n,mi),u.length=mi);if(Sc()&&uA!==null&&!(n.f&(Mi|ad|SA)))for(h=0;h<uA.length;h++)b_(uA[h],n);return o!==null&&mp++,c}finally{Ds=e,mi=t,uA=r,Nn=o,ol=s,Pa=i,M2(a),wA=A}}function U4(n,e){let t=e.reactions;if(t!==null){var r=RC.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&Mi&&(Ds===null||!Ds.includes(e))&&(Aa(e,ad),e.f&(Da|gp)||(e.f^=gp),A_(e),wp(e,0))}function wp(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)U4(n,t[r])}function ag(n){var e=n.f;if(!(e&tg)){Aa(n,Fs);var t=Cn,r=zn;Cn=n;try{e&qm?B4(n):u_(n),c_(n);var o=y_(n);n.teardown=typeof o=="function"?o:null,n.wv=m_;var s=n.deps,i;f0&&i4&&n.f&SA}catch(a){ig(a,n,t,r||n.ctx)}finally{Cn=t}}}function __(){if(ac>1e3){ac=0;try{ZC()}catch(n){if(Mu!==null)ig(n,Mu,null);else throw n}}ac++}function x_(n){var e=n.length;if(e!==0){__();var t=ic;ic=!0;try{for(var r=0;r<e;r++){var o=n[r];o.f&Fs||(o.f^=Fs);var s=[];B_(o,s),Q4(s)}}finally{ic=t}}}function Q4(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(tg|mA)))try{Ic(r)&&(ag(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?h_(r):r.fn=null))}catch(o){ig(o,r,null,r.ctx)}}}function T4(){if(Nu=!1,ac>1001)return;const n=Hl;Hl=[],x_(n),Nu||(ac=0,Mu=null)}function Ag(n){Gf===v_&&(Nu||(Nu=!0,queueMicrotask(T4))),Mu=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(zc|qa)){if(!(t&Fs))return;e.f^=Fs}}Hl.push(e)}function B_(n,e){var t=n.first,r=[];e:for(;t!==null;){var o=t.f,s=(o&qa)!==0,i=s&&(o&Fs)!==0,a=t.next;if(!i&&!(o&mA))if(o&sh){if(s)t.f^=Fs;else{var A=Nn;try{Nn=t,Ic(t)&&ag(t)}catch(h){ig(h,t,null,t.ctx)}finally{Nn=A}}var d=t.first;if(d!==null){t=d;continue}}else o&Xy&&r.push(t);if(a===null){let h=t.parent;for(;h!==null;){if(n===h)break e;var c=h.next;if(c!==null){t=c;continue e}h=h.parent}}t=a}for(var u=0;u<r.length;u++)d=r[u],e.push(d),B_(d,e)}function z_(n){var e=Gf,t=Hl;try{__();const o=[];Gf=C4,Hl=o,Nu=!1,x_(t);var r=n==null?void 0:n();return z4(),(Hl.length>0||o.length>0)&&z_(),ac=0,Mu=null,r}finally{Gf=e,Hl=t}}async function ra(){await Promise.resolve(),z_()}function l(n){var e=n.f,t=(e&Mi)!==0;if(rl!==null&&rl.add(n),Nn!==null&&!wA){Pa!==null&&Pa.includes(n)&&o4();var r=Nn.deps;n.rv<mp&&(n.rv=mp,Ds===null&&r!==null&&r[mi]===n?mi++:Ds===null?Ds=[n]:(!ol||!Ds.includes(n))&&Ds.push(n))}else if(t&&n.deps===null&&n.effects===null){var o=n,s=o.parent;s!==null&&!(s.f&Da)&&(o.f^=Da)}return t&&(o=n,Ic(o)&&l_(o)),n.v}function L4(n){var e=rl;rl=new Set;var t=rl,r;try{if(ct(n),e!==null)for(r of rl)e.add(r)}finally{rl=e}return t}function Hu(n){var e=L4(()=>ct(n));for(var t of e)if(t.f&Yy)for(const r of t.deps||[])r.f&Mi||Ou(r,r.v);else Ou(t,t.v)}function ct(n){var e=wA;try{return wA=!0,n()}finally{wA=e}}const P4=-7169;function Aa(n,e){n.f=n.f&P4|e}function no(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(La in n)w0(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&La in t&&w0(t)}}}function w0(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{w0(n[r],e)}catch{}const t=Rm(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Wy(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function k4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const O4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function D4(n){return O4.includes(n)}const N4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function M4(n){return n=n.toLowerCase(),N4[n]??n}const H4=["touchstart","touchmove"];function j4(n){return H4.includes(n)}function R4(n,e){if(e){const t=document.body;n.autofocus=!0,sg(()=>{document.activeElement===t&&n.focus()})}}let $2=!1;function q4(){$2||($2=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function C_(n){var e=Nn,t=Cn;cl(null),Ma(null);try{return n()}finally{cl(e),Ma(t)}}function Zm(n,e,t,r=t){n.addEventListener(e,()=>C_(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),q4()}const S_=new Set,b0=new Set;function E_(n,e,t,r={}){function o(s){if(r.capture||hu.call(e,s),!s.cancelBubble)return C_(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?sg(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function it(n,e,t,r,o){var s={capture:r,passive:o},i=E_(n,e,t,s);(e===document.body||e===window||e===document)&&Xm(()=>{e.removeEventListener(n,i,s)})}function F_(n){for(var e=0;e<n.length;e++)S_.add(n[e]);for(var t of b0)t(n)}function hu(n){var S;var e=this,t=e.ownerDocument,r=n.type,o=((S=n.composedPath)==null?void 0:S.call(n))||[],s=o[0]||n.target,i=0,a=n.__root;if(a){var A=o.indexOf(a);if(A!==-1&&(e===document||e===window)){n.__root=e;return}var d=o.indexOf(e);if(d===-1)return;A<=d&&(i=A)}if(s=o[i]||n.target,s!==e){Gy(n,"currentTarget",{configurable:!0,get(){return s||t}});var c=Nn,u=Cn;cl(null),Ma(null);try{for(var h,p=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!==void 0&&!s.disabled)if(eg(w)){var[b,...x]=w;b.apply(s,[n,...x])}else w.call(s,n)}catch(I){h?p.push(I):h=I}if(n.cancelBubble||v===e||v===null)break;s=v}if(h){for(let I of p)queueMicrotask(()=>{throw I});throw h}}finally{n.__root=e,delete n.currentTarget,cl(c),Ma(u)}}}function e1(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function ul(n,e){var t=Cn;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function G(n,e){var t=(e&n_)!==0,r=(e&f4)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=e1(s?n:"<!>"+n),t||(o=yi(o)));var i=r?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=yi(i),A=i.lastChild;ul(a,A)}else ul(i,i);return i}}function lg(n,e,t="svg"){var r=!n.startsWith("<!>"),o=(e&n_)!==0,s=`<${t}>${r?n:"<!>"+n}</${t}>`,i;return()=>{if(!i){var a=e1(s),A=yi(a);if(o)for(i=document.createDocumentFragment();yi(A);)i.appendChild(yi(A));else i=yi(A)}var d=i.cloneNode(!0);if(o){var c=yi(d),u=d.lastChild;ul(c,u)}else ul(d,d);return d}}function xn(n=""){{var e=ah(n+"");return ul(e,e),e}}function Tt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=ah();return n.append(e,t),ul(e,t),n}function U(n,e){n!==null&&n.before(e)}function Qe(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function Sa(n,e){return K4(n,e)}const zd=new Map;function K4(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){v4();var a=new Set,A=u=>{for(var h=0;h<u.length;h++){var p=u[h];if(!a.has(p)){a.add(p);var v=j4(p);e.addEventListener(p,hu,{passive:v});var w=zd.get(p);w===void 0?(document.addEventListener(p,hu,{passive:v}),zd.set(p,1)):zd.set(p,w+1)}}};A(jm(S_)),b0.add(A);var d=void 0,c=x4(()=>{var u=t??e.appendChild(ah());return _A(()=>{if(s){an({});var h=zn;h.c=s}o&&(r.$$events=o),d=n(u,r)||{},s&&An()}),()=>{var v;for(var h of a){e.removeEventListener(h,hu);var p=zd.get(h);--p===0?(document.removeEventListener(h,hu),zd.delete(h)):zd.set(h,p)}b0.delete(A),u!==t&&((v=u.parentNode)==null||v.removeChild(u))}});return y0.set(d,c),d}let y0=new WeakMap;function uv(n,e){const t=y0.get(n);return t?(y0.delete(n),t(e)):Promise.resolve()}function be(n,e,t=!1){var r=n,o=null,s=null,i=Ps,a=t?ih:0,A=!1;const d=(u,h=!0)=>{A=!0,c(h,u)},c=(u,h)=>{i!==(i=u)&&(i?(o?Du(o):h&&(o=_A(()=>h(r))),s&&td(s,()=>{s=null})):(s?Du(s):h&&(s=_A(()=>h(r))),o&&td(o,()=>{o=null})))};Ad(()=>{A=!1,e(d),A||c(null,null)},a)}function $4(n,e,t){var r=n,o=Ps,s,i=Sc()?WC:Km;Ad(()=>{i(o,o=e())&&(s&&td(s),s=_A(()=>t(r)))})}function vr(n,e){return e}function V4(n,e,t,r){for(var o=[],s=e.length,i=0;i<s;i++)Ym(e[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var A=t.parentNode;m4(A),A.append(t),r.clear(),ZA(n,e[0].prev,e[s-1].next)}f_(o,()=>{for(var d=0;d<s;d++){var c=e[d];a||(r.delete(c.k),ZA(n,c.prev,c.next)),Na(c.e,!a)}})}function sr(n,e,t,r,o,s=null){var i=n,a={items:new Map,first:null},A=(e&t_)!==0;if(A){var d=n;i=d.appendChild(ah())}var c=null,u=!1,h=At(()=>{var p=t();return eg(p)?p:p==null?[]:jm(p)});Ad(()=>{var p=l(h),v=p.length;u&&v===0||(u=v===0,G4(p,a,i,o,e,r,t),s!==null&&(v===0?c?Du(c):c=_A(()=>s(i)):c!==null&&td(c,()=>{c=null})),l(h))})}function G4(n,e,t,r,o,s,i){var se,ve,ie,ge;var a=(o&A4)!==0,A=(o&(Vm|Gm))!==0,d=n.length,c=e.items,u=e.first,h=u,p,v=null,w,b=[],x=[],S,I,P,N;if(a)for(N=0;N<d;N+=1)S=n[N],I=s(S,N),P=c.get(I),P!==void 0&&((se=P.a)==null||se.measure(),(w??(w=new Set)).add(P));for(N=0;N<d;N+=1){if(S=n[N],I=s(S,N),P=c.get(I),P===void 0){var ee=h?h.e.nodes_start:t;v=X4(ee,e,v,v===null?e.first:v.next,S,I,N,r,o,i),c.set(I,v),b=[],x=[],h=v.next;continue}if(A&&W4(P,S,N,o),P.e.f&mA&&(Du(P.e),a&&((ve=P.a)==null||ve.unfix(),(w??(w=new Set)).delete(P))),P!==h){if(p!==void 0&&p.has(P)){if(b.length<x.length){var j=x[0],D;v=j.prev;var ne=b[0],xe=b[b.length-1];for(D=0;D<b.length;D+=1)V2(b[D],j,t);for(D=0;D<x.length;D+=1)p.delete(x[D]);ZA(e,ne.prev,xe.next),ZA(e,v,ne),ZA(e,xe,j),h=j,v=xe,N-=1,b=[],x=[]}else p.delete(P),V2(P,h,t),ZA(e,P.prev,P.next),ZA(e,P,v===null?e.first:v.next),ZA(e,v,P),v=P;continue}for(b=[],x=[];h!==null&&h.k!==I;)h.e.f&mA||(p??(p=new Set)).add(h),x.push(h),h=h.next;if(h===null)continue;P=h}b.push(P),v=P,h=P.next}if(h!==null||p!==void 0){for(var L=p===void 0?[]:jm(p);h!==null;)h.e.f&mA||L.push(h),h=h.next;var q=L.length;if(q>0){var V=o&t_&&d===0?t:null;if(a){for(N=0;N<q;N+=1)(ie=L[N].a)==null||ie.measure();for(N=0;N<q;N+=1)(ge=L[N].a)==null||ge.fix()}V4(e,L,V,c)}}a&&sg(()=>{var re;if(w!==void 0)for(P of w)(re=P.a)==null||re.apply()}),Cn.first=e.first&&e.first.e,Cn.last=v&&v.e}function W4(n,e,t,r){r&Vm&&Ou(n.v,e),r&Gm?Ou(n.i,t):n.i=t}function X4(n,e,t,r,o,s,i,a,A,d){var c=(A&Vm)!==0,u=(A&l4)===0,h=c?u?ng(o):bi(o):o,p=A&Gm?bi(i):i,v={i:p,v:h,k:s,a:null,e:null,prev:t,next:r};try{return v.e=_A(()=>a(n,h,p,d),Wm),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function V2(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var i=og(s);o.before(s),s=i}}function ZA(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function _0(n,e,t,r,o){var s=n,i="",a;Ad(()=>{i!==(i=e()??"")&&(a!==void 0&&(Na(a),a=void 0),i!==""&&(a=_A(()=>{var A=i+"";t&&(A=`<svg>${A}</svg>`);var d=e1(A);if((t||r)&&(d=yi(d)),ul(yi(d),d.lastChild),t||r)for(;yi(d);)s.before(yi(d));else s.before(d)})))})}function dn(n,e,t,r,o){var a;var s=(a=e.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=e.children,i=!0),s===void 0||s(n,i?()=>r:r)}function I_(n,e,t){var r=n,o,s;Ad(()=>{o!==(o=e())&&(s&&(td(s),s=null),o&&(s=_A(()=>t(r,o))))},ih)}function Y4(n,e,t,r,o,s){var i,a,A=null,d=n,c;Ad(()=>{const u=e()||null;var h=o_;u!==i&&(c&&(u===null?td(c,()=>{c=null,a=null}):u===a?Du(c):Na(c)),u&&u!==a&&(c=_A(()=>{if(A=document.createElementNS(h,u),ul(A,A),r){var p=A.appendChild(ah());r(A,p)}Cn.nodes_end=A,d.before(A)})),i=u,i&&(a=i))},ih)}function U_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=U_(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function J4(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=U_(n))&&(r&&(r+=" "),r+=e);return r}function x0(n){return typeof n=="object"?J4(n):n??""}function t1(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function ju(n,e){var t=n.__attributes??(n.__attributes={});t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function Z4(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function cr(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[g0]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Q_(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function G2(n,e,t,r,o=!1,s=!1,i=!1){var a=e||{},A=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class&&(t.class=x0(t.class));var c=Q_(n),u=n.__attributes??(n.__attributes={});for(const x in t){let S=t[x];if(A&&x==="value"&&S==null){n.value=n.__value="",a[x]=S;continue}var h=a[x];if(S!==h){a[x]=S;var p=x[0]+x[1];if(p!=="$$"){if(p==="on"){const I={},P="$$"+x;let N=x.slice(2);var v=D4(N);if(k4(N)&&(N=N.slice(0,-7),I.capture=!0),!v&&h){if(S!=null)continue;n.removeEventListener(N,a[P],I),a[P]=null}if(S!=null)if(v)n[`__${N}`]=S,F_([N]);else{let ee=function(j){a[x].call(this,j)};a[P]=E_(N,n,ee,I)}else v&&(n[`__${N}`]=void 0)}else if(x==="style"&&S!=null)n.style.cssText=S+"";else if(x==="autofocus")R4(n,!!S);else if(!s&&(x==="__value"||x==="value"&&S!=null))n.value=n.__value=S;else if(x==="selected"&&A)Z4(n,S);else{var w=x;o||(w=M4(w));var b=w==="defaultValue"||w==="defaultChecked";if(S==null&&!s&&!b)if(u[x]=null,w==="value"||w==="checked"){let I=n;if(w==="value"){let P=I.defaultValue;I.removeAttribute(w),I.defaultValue=P}else{let P=I.defaultChecked;I.removeAttribute(w),I.defaultChecked=P}}else n.removeAttribute(x);else b||c.includes(w)&&(s||typeof S!="string")?n[w]=S:typeof S!="function"&&cr(n,w,S)}x==="style"&&"__styles"in n&&(n.__styles={})}}}return a}var W2=new Map;function Q_(n){var e=W2.get(n.nodeName);if(e)return e;W2.set(n.nodeName,e=[]);for(var t,r=n,o=Element.prototype;o!==r;){t=Wy(r);for(var s in t)t[s].set&&e.push(s);r=Rm(r)}return e}function T_(n){if(n.loading==="lazy"){var e=n.src;n[g0]=null,n.loading="eager",n.removeAttribute("src"),requestAnimationFrame(()=>{n[g0]!=="eager"&&(n.loading="lazy"),n.src=e})}}function eS(n,e,t){var r=n.__className,o=L_(e);(r!==o||Wm)&&(o===""?n.removeAttribute("class"):n.setAttribute("class",o),n.__className=o)}function Pr(n,e,t){var r=n.__className,o=L_(e);(r!==o||Wm)&&(e==null?n.removeAttribute("class"):n.className=o,n.__className=o)}function L_(n,e){return(n??"")+""}function zs(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function Fr(n,e,t=e){var r=Sc();Zm(n,"input",o=>{var s=o?n.defaultValue:n.value;if(s=hv(n)?fv(s):s,t(s),r&&s!==(s=e())){var i=n.selectionStart,a=n.selectionEnd;n.value=s??"",a!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(a,n.value.length))}}),ct(e)==null&&n.value&&t(hv(n)?fv(n.value):n.value),Fc(()=>{var o=e();hv(n)&&o===fv(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function B0(n,e,t=e){Zm(n,"change",r=>{var o=r?n.defaultChecked:n.checked;t(o)}),ct(e)==null&&t(n.checked),Fc(()=>{var r=e();n.checked=!!r})}function hv(n){var e=n.type;return e==="number"||e==="range"}function fv(n){return n===""?null:+n}function P_(n,e,t){var r=vA(n,e);r&&r.set&&(n[e]=t,Xm(()=>{n[e]=null}))}function k_(n,e,t){if(n.multiple)return rS(n,e);for(var r of n.options){var o=xu(r);if(g4(o,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function tS(n,e){Ah(()=>{var t=new MutationObserver(()=>{var r=n.__value;k_(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Ru(n,e,t=e){var r=!0;Zm(n,"change",o=>{var s=o?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(s),xu);else{var a=n.querySelector(s)??n.querySelector("option:not([disabled])");i=a&&xu(a)}t(i)}),Ah(()=>{var o=e();if(k_(n,o,r),r&&o===void 0){var s=n.querySelector(":checked");s!==null&&(o=xu(s),t(o))}n.__value=o,r=!1}),tS(n)}function rS(n,e){for(var t of n.options)t.selected=~e.indexOf(xu(t))}function xu(n){return"__value"in n?n.__value:n.value}function X2(n,e){return n===e||(n==null?void 0:n[La])===e}function hs(n={},e,t,r){return Ah(()=>{var o,s;return Fc(()=>{o=s,s=[],ct(()=>{n!==t(...s)&&(e(n,...s),o&&X2(t(...o),n)&&e(null,...o))})}),()=>{sg(()=>{s&&X2(t(...s),n)&&e(null,...s)})}}),n}function O_(n){return function(...e){var t=e[0];t.target===this&&(n==null||n.apply(this,e))}}function pv(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function cn(n=!1){const e=zn,t=e.l.u;if(!t)return;let r=()=>no(e.s);if(n){let o=0,s={};const i=bc(()=>{let a=!1;const A=e.s;for(const d in A)A[d]!==s[d]&&(s[d]=A[d],a=!0);return a&&o++,o});r=()=>l(i)}t.b.length&&_4(()=>{Y2(e,r),p0(t.b)}),v0(()=>{const o=ct(()=>t.m.map($C));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&v0(()=>{Y2(e,r),p0(t.a)})}function Y2(n,e){if(n.l.s)for(const t of n.l.s)l(t);e()}function D_(n,e,t){if(n==null)return e(void 0),sc;const r=ct(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const Cd=[];function ld(n,e=sc){let t=null;const r=new Set;function o(a){if(Km(n,a)&&(n=a,t)){const A=!Cd.length;for(const d of r)d[1](),Cd.push(d,n);if(A){for(let d=0;d<Cd.length;d+=2)Cd[d][0](Cd[d+1]);Cd.length=0}}}function s(a){o(a(n))}function i(a,A=sc){const d=[a,A];return r.add(d),r.size===1&&(t=e(o,s)||sc),a(n),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function Ur(n){let e;return D_(n,t=>e=t)(),e}let Hh=!1,z0=Symbol();function on(n,e,t){const r=t[e]??(t[e]={store:null,source:ng(void 0),unsubscribe:sc});if(r.store!==n&&!(z0 in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=sc;else{var o=!0;r.unsubscribe=D_(n,s=>{o?r.source.v=s:y(r.source,s)}),o=!1}return n&&z0 in t?Ur(n):l(r.source)}function N_(n,e){return n.set(e),e}function Ko(){const n={};function e(){Xm(()=>{for(var t in n)n[t].unsubscribe();Gy(n,z0,{enumerable:!1,value:!0})})}return[n,e]}function nr(n,e,t){return n.set(t),e}function nS(n){var e=Hh;try{return Hh=!1,[n(),Hh]}finally{Hh=e}}const oS={get(n,e){if(!n.exclude.includes(e))return l(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){return e in n.special||(n.special[e]=gt({get[e](){return n.props[e]}},e,r_)),n.special[e](t),Ia(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),Ia(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function sn(n,e){return new Proxy({props:n,exclude:e,special:{},version:bi(0)},oS)}const sS={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Zc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let o=n.props[r];Zc(o)&&(o=o());const s=vA(o,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Zc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=vA(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(n,e){if(e===La||e===Zy)return!1;for(let t of n.props)if(Zc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Zc(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function pn(...n){return new Proxy({props:n},sS)}function J2(n){for(var e=Cn,t=Cn;e!==null&&!(e.f&(qa|zc));)e=e.parent;try{return Ma(e),n()}finally{Ma(t)}}function gt(n,e,t,r){var j;var o=(t&d4)!==0,s=!Cc||(t&c4)!==0,i=(t&u4)!==0,a=(t&h4)!==0,A=!1,d;i?[d,A]=nS(()=>n[e]):d=n[e];var c=La in n||Zy in n,u=i&&(((j=vA(n,e))==null?void 0:j.set)??(c&&e in n&&(D=>n[e]=D)))||void 0,h=r,p=!0,v=!1,w=()=>(v=!0,p&&(p=!1,a?h=ct(r):h=r),h);d===void 0&&r!==void 0&&(u&&s&&t4(),d=w(),u&&u(d));var b;if(s)b=()=>{var D=n[e];return D===void 0?w():(p=!0,v=!1,D)};else{var x=J2(()=>(o?bc:At)(()=>n[e]));x.f|=Yy,b=()=>{var D=l(x);return D!==void 0&&(h=void 0),D===void 0?h:D}}if(!(t&r_))return b;if(u){var S=n.$$legacy;return function(D,ne){return arguments.length>0?((!s||!ne||S||A)&&u(ne?b():D),D):b()}}var I=!1,P=!1,N=ng(d),ee=J2(()=>bc(()=>{var D=b(),ne=l(N);return I?(I=!1,P=!0,ne):(P=!1,N.v=D)}));return o||(ee.equals=$m),function(D,ne){if(rl!==null&&(I=P,b(),l(N)),arguments.length>0){const xe=ne?l(ee):s&&i?$d(D):D;return ee.equals(xe)||(I=!0,y(N,xe),v&&h!==void 0&&(h=xe),ct(()=>l(ee))),D}return l(ee)}}function Zn(n){zn===null&&rg(),Cc&&zn.l!==null?M_(zn).m.push(n):v0(()=>{const e=ct(n);if(typeof e=="function")return e})}function ps(n){zn===null&&rg(),Zn(()=>()=>ct(n))}function iS(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function dg(){const n=zn;return n===null&&rg(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=eg(o)?o.slice():[o],a=iS(e,t,r);for(const A of i)A.call(n.x,a);return!a.defaultPrevented}return!0}}function aS(n){zn===null&&rg(),zn.l===null&&e4(),M_(zn).a.push(n)}function M_(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const AS="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(AS);a4();const lS="modulepreload",dS=function(n){return"/"+n},Z2={},Hs=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(t.map(A=>{if(A=dS(A),A in Z2)return;Z2[A]=!0;const d=A.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":lS,d||(u.as="script"),u.crossOrigin="",u.href=A,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((h,p)=>{u.addEventListener("load",h),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},cS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Uc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class r1 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class uS extends r1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hS extends r1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fS extends r1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var C0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(C0||(C0={}));var pS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class gS{constructor(e,{headers:t={},customFetch:r,region:o=C0.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=cS(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return pS(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=t;let a={},{region:A}=t;A||(A=this.region),A&&A!=="any"&&(a["x-region"]=A);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(v=>{throw new uS(v)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new hS(c);if(!c.ok)throw new fS(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield c.json():h==="application/octet-stream"?p=yield c.blob():h==="text/event-stream"?p=c:h==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(o){return{data:null,error:o}}})}}var C$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function mS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var Zo={},Sd={},Ed={},Fd={},Id={},Ud={},wS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yc=wS();const bS=yc.fetch,H_=yc.fetch.bind(yc),j_=yc.Headers,yS=yc.Request,_S=yc.Response,Uc=Object.freeze(Object.defineProperty({__proto__:null,Headers:j_,Request:yS,Response:_S,default:H_,fetch:bS},Symbol.toStringTag,{value:"Module"})),xS=mS(Uc);var jh={},ew;function R_(){if(ew)return jh;ew=1,Object.defineProperty(jh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return jh.default=n,jh}var tw;function q_(){if(tw)return Ud;tw=1;var n=Ud&&Ud.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ud,"__esModule",{value:!0});const e=n(xS),t=n(R_());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let A=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,h;let p=null,v=null,w=null,b=d.status,x=d.statusText;if(d.ok){if(this.method!=="HEAD"){const N=await d.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=N:v=JSON.parse(N))}const I=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),P=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");I&&P&&P.length>1&&(w=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,b=406,x="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const I=await d.text();try{p=JSON.parse(I),Array.isArray(p)&&d.status===404&&(v=[],p=null,b=200,x="OK")}catch{d.status===404&&I===""?(b=204,x="No Content"):p={message:I}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,b=200,x="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:v,count:w,status:b,statusText:x}});return this.shouldThrowOnError||(A=A.catch(d=>{var c,u,h;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),A.then(s,i)}}return Ud.default=r,Ud}var rw;function K_(){if(rw)return Id;rw=1;var n=Id&&Id.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Id,"__esModule",{value:!0});const e=n(q_());class t extends e.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:A=a}={}){const d=A?`${A}.order`:"order",c=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${c?`${c},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const A=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(A,`${o}`),this.url.searchParams.set(d,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:A=!1,format:d="text"}={}){var c;const u=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,A?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${u};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Id.default=t,Id}var nw;function n1(){if(nw)return Fd;nw=1;var n=Fd&&Fd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fd,"__esModule",{value:!0});const e=n(K_());class t extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let A="";a==="plain"?A="pl":a==="phrase"?A="ph":a==="websearch"&&(A="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${A}fts${d}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return Fd.default=t,Fd}var ow;function $_(){if(ow)return Ed;ow=1;var n=Ed&&Ed.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ed,"__esModule",{value:!0});const e=n(n1());class t{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let A=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!A?"":(c==='"'&&(A=!A),c)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",A=[];if(this.headers.Prefer&&A.push(this.headers.Prefer),s&&A.push(`count=${s}`),i||A.push("missing=default"),this.headers.Prefer=A.join(","),Array.isArray(o)){const d=o.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:A=!0}={}){const d="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),A||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(o)){const u=o.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ed.default=t,Ed}var eu={},tu={},sw;function BS(){return sw||(sw=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.version=void 0,tu.version="0.0.0-automated"),tu}var iw;function zS(){if(iw)return eu;iw=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.DEFAULT_HEADERS=void 0;const n=BS();return eu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},eu}var aw;function CS(){if(aw)return Sd;aw=1;var n=Sd&&Sd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sd,"__esModule",{value:!0});const e=n($_()),t=n(n1()),r=zS();class o{constructor(i,{headers:a={},schema:A,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=A,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:A=!1,get:d=!1,count:c}={}){let u;const h=new URL(`${this.url}/rpc/${i}`);let p;A||d?(u=A?"HEAD":"GET",Object.entries(a).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{h.searchParams.append(w,b)})):(u="POST",p=a);const v=Object.assign({},this.headers);return c&&(v.Prefer=`count=${c}`),new t.default({method:u,url:h,headers:v,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return Sd.default=o,Sd}var Aw;function SS(){if(Aw)return Zo;Aw=1;var n=Zo&&Zo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.PostgrestError=Zo.PostgrestBuilder=Zo.PostgrestTransformBuilder=Zo.PostgrestFilterBuilder=Zo.PostgrestQueryBuilder=Zo.PostgrestClient=void 0;const e=n(CS());Zo.PostgrestClient=e.default;const t=n($_());Zo.PostgrestQueryBuilder=t.default;const r=n(n1());Zo.PostgrestFilterBuilder=r.default;const o=n(K_());Zo.PostgrestTransformBuilder=o.default;const s=n(q_());Zo.PostgrestBuilder=s.default;const i=n(R_());return Zo.PostgrestError=i.default,Zo.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},Zo}var ES=SS();const FS=vS(ES),{PostgrestClient:IS,PostgrestQueryBuilder:S$,PostgrestFilterBuilder:E$,PostgrestTransformBuilder:F$,PostgrestBuilder:I$,PostgrestError:U$}=FS,US="2.11.2",QS={"X-Client-Info":`realtime-js/${US}`},TS="1.0.0",V_=1e4,LS=1e3;var Ac;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ac||(Ac={}));var wi;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(wi||(wi={}));var ea;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ea||(ea={}));var S0;(function(n){n.websocket="websocket"})(S0||(S0={}));var Tl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Tl||(Tl={}));class PS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const A=r.decode(e.slice(i,i+s));i=i+s;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:A,payload:d}}}class G_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Vn||(Vn={}));const lw=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=kS(i,n,e,o),s),{})},kS=(n,e,t,r)=>{const o=e.find(a=>a.name===n),s=o==null?void 0:o.type,i=t[n];return s&&!r.includes(s)?W_(s,i):E0(i)},W_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return MS(e,t)}switch(n){case Vn.bool:return OS(e);case Vn.float4:case Vn.float8:case Vn.int2:case Vn.int4:case Vn.int8:case Vn.numeric:case Vn.oid:return DS(e);case Vn.json:case Vn.jsonb:return NS(e);case Vn.timestamp:return HS(e);case Vn.abstime:case Vn.date:case Vn.daterange:case Vn.int4range:case Vn.int8range:case Vn.money:case Vn.reltime:case Vn.text:case Vn.time:case Vn.timestamptz:case Vn.timetz:case Vn.tsrange:case Vn.tstzrange:return E0(e);default:return E0(e)}},E0=n=>n,OS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},DS=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},NS=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},MS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const i=n.slice(1,t);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>W_(e,a))}return n},HS=n=>typeof n=="string"?n.replace(" ","T"):n,X_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gv{constructor(e,t,r={},o=V_){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(dw||(dw={}));class Bu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bu.syncState(this.state,o,s,i),this.pendingDiffs.forEach(A=>{this.state=Bu.syncDiff(this.state,A,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Bu.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const s=this.cloneDeep(e),i=this.transformState(t),a={},A={};return this.map(s,(d,c)=>{i[d]||(A[d]=c)}),this.map(i,(d,c)=>{const u=s[d];if(u){const h=c.map(b=>b.presence_ref),p=u.map(b=>b.presence_ref),v=c.filter(b=>p.indexOf(b.presence_ref)<0),w=u.filter(b=>h.indexOf(b.presence_ref)<0);v.length>0&&(a[d]=v),w.length>0&&(A[d]=w)}else a[d]=c}),this.syncDiff(s,{joins:a,leaves:A},r,o)}static syncDiff(e,t,r,o){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,A)=>{var d;const c=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(A),c.length>0){const u=e[a].map(p=>p.presence_ref),h=c.filter(p=>u.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,c,A)}),this.map(i,(a,A)=>{let d=e[a];if(!d)return;const c=A.map(u=>u.presence_ref);d=d.filter(u=>c.indexOf(u.presence_ref)<0),e[a]=d,o(a,d,A),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(cw||(cw={}));var uw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(uw||(uw={}));var cA;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(cA||(cA={}));class o1{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=wi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new gv(this,ea.join,this.params,this.timeout),this.rejoinTimer=new G_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ea.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Bu(this),this.broadcastEndpointURL=X_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(c=>e==null?void 0:e(cA.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(cA.CLOSED));const A={},d={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},A)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var u;if(this.socket.setAuth(),c===void 0){e==null||e(cA.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,v=[];for(let w=0;w<p;w++){const b=h[w],{filter:{event:x,schema:S,table:I,filter:P}}=b,N=c&&c[w];if(N&&N.event===x&&N.schema===S&&N.table===I&&N.filter===P)v.push(Object.assign(Object.assign({},b),{id:N.id}));else{this.unsubscribe(),e==null||e(cA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(cA.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(cA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,A;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||A===void 0)&&A.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wi.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ea.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new gv(this,ea.leave,{},e);o.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new gv(this,e,t,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:A,leave:d,join:c}=ea;if(r&&[a,A,d,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(p=>{var v,w,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(p=>p.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(p=>{var v,w,b,x,S,I;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const P=p.id,N=(v=p.filter)===null||v===void 0?void 0:v.event;return P&&((w=t.ids)===null||w===void 0?void 0:w.includes(P))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const P=(S=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return P==="*"||P===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:w,table:b,commit_timestamp:x,type:S,errors:I}=v;h=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:x,eventType:S,new:{},old:{},errors:I}),this._getPayloadRecords(v))}p.callback(h,r)})}_isClosed(){return this.state===wi.closed}_isJoined(){return this.state===wi.joined}_isJoining(){return this.state===wi.joining}_isLeaving(){return this.state===wi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),s={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&o1.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ea.close,{},e)}_onError(e){this._on(ea.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=lw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=lw(e.columns,e.old_record)),t}}const jS=()=>{},RS=typeof WebSocket<"u",qS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KS{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=QS,this.params={},this.timeout=V_,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=jS,this.conn=null,this.sendBuffer=[],this.serializer=new PS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Hs(async()=>{const{default:A}=await Promise.resolve().then(()=>Uc);return{default:A}},void 0).then(({default:A})=>A(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${S0.websocket}`,this.httpEndpoint=X_(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,i)=>i(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new G_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(RS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new $S(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Hs(async()=>{const{default:e}=await import("./browser.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:TS}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ac.connecting:return Tl.Connecting;case Ac.open:return Tl.Open;case Ac.closing:return Tl.Closing;default:return Tl.Closed}}isConnected(){return this.connectionState()===Tl.Open}channel(e,t={config:{}}){const r=new o1(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var A;(A=this.conn)===null||A===void 0||A.send(a)})};this.log("push",`${t} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(ea.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(LS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:o,payload:s,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ea.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([qS],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class $S{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ac.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class s1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ts(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class VS extends s1{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class F0 extends s1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var GS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const Y_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Uc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},WS=()=>GS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hs(()=>Promise.resolve().then(()=>Uc),void 0)).Response:Response}),I0=n=>{if(Array.isArray(n))return n.map(t=>I0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=I0(r)}),e};var dd=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const vv=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),XS=(n,e,t)=>dd(void 0,void 0,void 0,function*(){const r=yield WS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{e(new VS(vv(o),n.status||500))}).catch(o=>{e(new F0(vv(o),o))}):e(new F0(vv(n),n))}),YS=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),t))};function lh(n,e,t,r,o,s){return dd(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,YS(e,r,o,s)).then(A=>{if(!A.ok)throw A;return r!=null&&r.noResolveJson?A:A.json()}).then(A=>i(A)).catch(A=>XS(A,a,r))})})}function bp(n,e,t,r){return dd(this,void 0,void 0,function*(){return lh(n,"GET",e,t,r)})}function el(n,e,t,r,o){return dd(this,void 0,void 0,function*(){return lh(n,"POST",e,r,o,t)})}function JS(n,e,t,r,o){return dd(this,void 0,void 0,function*(){return lh(n,"PUT",e,r,o,t)})}function ZS(n,e,t,r){return dd(this,void 0,void 0,function*(){return lh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function J_(n,e,t,r,o){return dd(this,void 0,void 0,function*(){return lh(n,"DELETE",e,r,o,t)})}var Ws=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const e3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class t3{constructor(e,t={},r,o){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Y_(o)}uploadOrUpdate(e,t,r,o){return Ws(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},hw),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const A=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,A&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const d=this._removeEmptyFolders(t),c=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(ts(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return Ws(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let A;const d=Object.assign({upsert:hw.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",d.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",d.cacheControl)):(A=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:A,headers:c}),h=yield u.json();return u.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(A){if(ts(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,t){return Ws(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const s=yield el(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new s1("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ws(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}copy(e,t,r){return Ws(this,void 0,void 0,function*(){try{return{data:{path:(yield el(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return Ws(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield el(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return Ws(this,void 0,void 0,function*(){try{const o=yield el(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}download(e,t){return Ws(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield bp(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ts(a))return{data:null,error:a};throw a}})}info(e){return Ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield bp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:I0(r),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}exists(e){return Ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ZS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ts(r)&&r instanceof F0){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&o.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});A!==""&&o.push(A);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return Ws(this,void 0,void 0,function*(){try{return{data:yield J_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ws(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},e3),t),{prefix:e||""});return{data:yield el(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(ts(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const r3="2.7.1",n3={"X-Client-Info":`storage-js/${r3}`};var Qd=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class o3{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},n3),t),this.fetch=Y_(r)}listBuckets(){return Qd(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ts(e))return{data:null,error:e};throw e}})}getBucket(e){return Qd(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qd(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Qd(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ts(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Qd(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qd(this,void 0,void 0,function*(){try{return{data:yield J_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}}class s3 extends o3{constructor(e,t={},r){super(e,t,r)}from(e){return new t3(this.url,this.headers,e,this.fetch)}}const i3="2.48.1";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const a3={"X-Client-Info":`supabase-js-${fu}/${i3}`},A3={headers:a3},l3={schema:"public"},d3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c3={};var u3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const h3=n=>{let e;return n?e=n:typeof fetch>"u"?e=H_:e=fetch,(...t)=>e(...t)},f3=()=>typeof Headers>"u"?j_:Headers,p3=(n,e,t)=>{const r=h3(t),o=f3();return(s,i)=>u3(void 0,void 0,void 0,function*(){var a;const A=(a=yield e())!==null&&a!==void 0?a:n;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${A}`),r(s,Object.assign(Object.assign({},i),{headers:d}))})};var g3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};function v3(n){return n.replace(/\/$/,"")}function m3(n,e){const{db:t,auth:r,realtime:o,global:s}=n,{db:i,auth:a,realtime:A,global:d}=e,c={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},A),o),global:Object.assign(Object.assign({},d),s),accessToken:()=>g3(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const Z_="2.67.3",w3="http://localhost:9999",b3="supabase.auth.token",y3={"X-Client-Info":`gotrue-js/${Z_}`},fw=10,U0="X-Supabase-Api-Version",e5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function _3(n){return Math.round(Date.now()/1e3)+n}function x3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ea=()=>typeof window<"u"&&typeof document<"u",Fl={tested:!1,writable:!1},zu=()=>{if(!Ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fl.tested)return Fl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Fl.tested=!0,Fl.writable=!0}catch{Fl.tested=!0,Fl.writable=!1}return Fl.writable};function B3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const t5=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Uc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},z3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",r5=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Rh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},qh=async(n,e)=>{await n.removeItem(e)};function C3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,o,s,i,a,A,d,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)i=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),A=e.indexOf(n.charAt(c++)),d=e.indexOf(n.charAt(c++)),r=i<<2|a>>4,o=(a&15)<<4|A>>2,s=(A&3)<<6|d,t=t+String.fromCharCode(r),A!=64&&o!=0&&(t=t+String.fromCharCode(o)),d!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class cg{constructor(){this.promise=new cg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cg.promiseConstructor=Promise;function pw(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(C3(r))}async function S3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function E3(n,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await n(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function F3(n){return("0"+n.toString(16)).substr(-2)}function I3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let s=0;s<56;s++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,F3).join("")}async function U3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}function Q3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function T3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await U3(n);return Q3(t)}async function Td(n,e,t=!1){const r=I3();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await r5(n,`${e}-code-verifier`,o);const s=await T3(r);return[s,r===s?"plain":"s256"]}const L3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function P3(n){const e=n.headers.get(U0);if(!e||!e.match(L3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class i1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Rr(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class k3 extends i1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function O3(n){return Rr(n)&&n.name==="AuthApiError"}class n5 extends i1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cd extends i1{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class WA extends cd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function D3(n){return Rr(n)&&n.name==="AuthSessionMissingError"}class mv extends cd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kh extends cd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $h extends cd{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function N3(n){return Rr(n)&&n.name==="AuthImplicitGrantRedirectError"}class gw extends cd{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q0 extends cd{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function wv(n){return Rr(n)&&n.name==="AuthRetryableFetchError"}class vw extends cd{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var M3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};const Ul=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),H3=[502,503,504];async function mw(n){var e;if(!z3(n))throw new Q0(Ul(n),0);if(H3.includes(n.status))throw new Q0(Ul(n),n.status);let t;try{t=await n.json()}catch(s){throw new n5(Ul(s),s)}let r;const o=P3(n);if(o&&o.getTime()>=e5["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new vw(Ul(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new WA}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new vw(Ul(t),n.status,t.weak_password.reasons);throw new k3(Ul(t),n.status||500,r)}const j3=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function rn(n,e,t,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[U0]||(s[U0]=e5["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",A=await R3(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(A):{data:Object.assign({},A),error:null}}async function R3(n,e,t,r,o,s){const i=j3(e,r,o,s);let a;try{a=await n(t,Object.assign({},i))}catch(A){throw console.error(A),new Q0(Ul(A),0)}if(a.ok||await mw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(A){await mw(A)}}function XA(n){var e;let t=null;V3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=_3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ww(n){const e=XA(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function nl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function q3(n){return{data:n,error:null}}function K3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s}=n,i=M3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s},A=Object.assign({},i);return{data:{properties:a,user:A},error:null}}function $3(n){return n}function V3(n){return n.access_token&&n.refresh_token&&n.expires_in}var G3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};class W3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=t5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await rn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await rn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:nl})}catch(r){if(Rr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=G3(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await rn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:K3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Rr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await rn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:nl})}catch(t){if(Rr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,s,i,a,A;try{const d={nextPage:null,lastPage:0,total:0},c=await rn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:$3});if(c.error)throw c.error;const u=await c.json(),h=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(A=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&A!==void 0?A:[];return p.length>0&&(p.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=w}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Rr(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await rn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:nl})}catch(t){if(Rr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await rn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:nl})}catch(r){if(Rr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:nl})}catch(r){if(Rr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await rn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(Rr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Rr(t))return{data:null,error:t};throw t}}}const X3={getItem:n=>zu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{zu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{zu()&&globalThis.localStorage.removeItem(n)}};function bw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Y3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ld={debug:!!(globalThis&&zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class o5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class J3 extends o5{}async function Z3(n,e,t){Ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ld.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new J3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ld.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Y3();const eE={url:w3,storageKey:b3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:y3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ru=30*1e3,yw=3;async function _w(n,e,t){return await t()}class qu{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qu.nextInstanceID,qu.nextInstanceID+=1,this.instanceID>0&&Ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},eE),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new W3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=t5(o.fetch),this.lock=o.lock||_w,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Ea()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Z3:this.lock=_w,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:zu()?this.storage=X3:(this.memoryStorage={},this.storage=bw(this.memoryStorage)):(this.memoryStorage={},this.storage=bw(this.memoryStorage)),Ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Z_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=B3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ea()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),N3(s)){const A=(e=s.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Rr(t)?{error:t}:{error:new n5("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:XA}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Rr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,o;try{let s;if("email"in e){const{email:c,password:u,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Td(this.storage,this.storageKey)),s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:XA})}else if("phone"in e){const{phone:c,password:u,options:h}=e;s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:XA})}else throw new Kh("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Rr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:i,options:a}=e;t=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ww})}else if("phone"in e){const{phone:s,password:i,options:a}=e;t=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ww})}else throw new Kh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(Rr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Rh(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{const{data:s,error:i}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:XA});if(await qh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new mv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Rr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:s,nonce:i}=e,a=await rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:XA}),{data:A,error:d}=a;return d?{data:{user:null,session:null},error:d}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new mv}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:d})}catch(t){if(Rr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,s,i;try{if("email"in e){const{email:a,options:A}=e;let d=null,c=null;this.flowType==="pkce"&&([d,c]=await Td(this.storage,this.storageKey));const{error:u}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},create_user:(r=A==null?void 0:A.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:d,code_challenge_method:c},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:A}=e,{data:d,error:c}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:c}}throw new Kh("You must provide either an email or phone number.")}catch(a){if(Rr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let o,s;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await rn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:XA});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const A=i.session,d=i.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(o){if(Rr(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await Td(this.storage,this.storageKey)),await rn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:q3})}catch(s){if(Rr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new WA;const{error:o}=await rn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Rr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Kh("You must provide either an email or phone number and a type")}catch(t){if(Rr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,d,c)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,d,c))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:nl}):await this._useSession(async t=>{var r,o,s;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new WA}:await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:nl})})}catch(t){if(Rr(t))return D3(t)&&(await this._removeSession(),await qh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new WA;const i=o.session;let a=null,A=null;this.flowType==="pkce"&&e.email!=null&&([a,A]=await Td(this.storage,this.storageKey));const{data:d,error:c}=await rn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:A}),jwt:i.access_token,xform:nl});if(c)throw c;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Rr(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return pw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new WA;const t=Date.now()/1e3;let r=t,o=!0,s=null;const i=pw(e.access_token);if(i.exp&&(r=i.exp,o=r<=t),o){const{session:a,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:A}=await this._getUser(e.access_token);if(A)throw A;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Rr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new WA;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Rr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ea())throw new $h("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $h(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new gw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $h("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gw("No code detected.");const{data:S,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:A,token_type:d}=e;if(!s||!a||!i||!d)throw new $h("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;A&&(h=parseInt(A));const p=h-c;p*1e3<=ru&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`);const v=h-u;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,c);const{data:w,error:b}=await this._getUser(s);if(b)throw b;const x={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Rr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(O3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await qh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=x3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:s},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Td(this.storage,this.storageKey,!0));try{return await rn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Rr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Rr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,A,d,c;const{data:u,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await rn(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0})});if(o)throw o;return Ea()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Rr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)throw i;return await rn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(Rr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await E3(async o=>(o>0&&await S3(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await rn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:XA})),(o,s)=>{const i=200*Math.pow(2,o);return s&&wv(s)&&Date.now()+i-r<ru})}catch(r){if(this._debug(t,"error",r),Rr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ea()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Rh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+fw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${fw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),wv(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new WA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new cg;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new WA;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),Rr(s)){const i={session:null,error:s};return wv(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(A){s.push(A)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await r5(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ea()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ru);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/ru);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ru}ms, refresh threshold is ${yw} ticks`),o<=yw&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof o5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ea()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await Td(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await rn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Rr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:A,error:d}=await rn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=A==null?void 0:A.totp)===null||o===void 0)&&o.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(t){if(Rr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(Rr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Rr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let a=null;i.aal&&(a=i.aal);let A=a;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:A,currentAuthenticationMethods:c},error:null}}))}}qu.nextInstanceID=0;const tE=qu;class rE extends tE{constructor(e){super(e)}}var nE=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class oE{constructor(e,t,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=v3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const A=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:l3,realtime:c3,auth:Object.assign(Object.assign({},d3),{storageKey:A}),global:A3},c=m3(r??{},d);this.storageKey=(o=c.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=p3(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new IS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new gS(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new s3(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:A},d,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rE({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:A,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new KS(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sE=(n,e,t)=>new oE(n,e,t),iE="https://mprzyonufqescpcpusno.supabase.co",aE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wcnp5b251ZnFlc2NwY3B1c25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk3NjAwMzIsImV4cCI6MjA0NTMzNjAzMn0._EwKZZ9Yk-C6t96up66bvHDv_pLcE5HDD1TNpi2dWy4",vt=sE(iE,aE);async function dh(n,e){const{data:t,error:r}=await vt.from("products").select(`
            *,
            variants:product_variants(
                *,
                prices(*),
                option_values:product_variant_option_values(
                    option_value:product_option_values(
                        *,
                        option:product_options(*)
                    )
                )
            ),
            categories:categories(*),
            options:product_options(
                *,
                values:product_option_values(*)
            ),
            process:processes(*)
        `).eq("id",n).eq("shop",e).single();if(r)throw r;return t}async function hl(n){const{data:e,error:t}=await vt.from("product_variants").select(" *, prices(*)").eq("id",n).single();if(t)throw t;return e}async function s5(){const{data:n,error:e}=await vt.from("categories").select("*").order("name");if(e)throw e;const t=n||[],r=new Map,o=[];return t.forEach(s=>{r.set(s.id,{...s,children:[]})}),t.forEach(s=>{const i=r.get(s.id);if(i)if(s.parent_category_id){const a=r.get(s.parent_category_id);a&&(a.children=a.children||[],a.children.push(i))}else o.push(i)}),o}async function Wf(n,e,t=1,r=12,o,s=!1){const i=(t-1)*r,a=i+r-1;let A=vt.from("products").select(`
      *,
      variants:product_variants(
        *,
        prices(*)
      )
    `,{count:"exact"}).ilike("title",`%${n}%`).range(i,a).order("created_at",{ascending:!1});if(o==="godo"&&(A=A.not("godo_product","is",null)),s&&(A=A.not("process_id","is",null)),e){const{data:h}=await vt.from("product_categories").select("product_id").eq("category_id",e),p=(h==null?void 0:h.map(v=>v.product_id))||[];A=A.in("id",p)}const{data:d,error:c,count:u}=await A;if(c)throw c;return{products:d||[],total:u||0}}async function Xf(n,e){if(!n||!e)return console.warn("getProductByMallInfo: mallType or mallProductNo is missing."),null;const{data:t,error:r}=await vt.from("products").select("*").eq("mall_type",n).eq("mall_product_id",e).maybeSingle();if(r)throw console.error("Error fetching product by mall info:",r),r;return t||console.log("Product not found for given mall info."),t}async function ch(n){const{data:e,error:t}=await vt.from("product_addons").select("*").eq("product_id",n).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching product addons:",t),t;if(!e||e.length===0)return[];const r=[];for(const o of e){const{data:s,error:i}=await vt.from("product_addon_items").select(`
        *,
        addon_product:products(
          *,
          variants:product_variants(
            *,
            prices(*)
          )
        )
      `).eq("addon_id",o.id);if(i){console.error("Error fetching addon items:",i);continue}r.push({...o,items:s||[]})}return r}const AE=Object.freeze(Object.defineProperty({__proto__:null,getCategories:s5,getProductAddons:ch,getProductById:dh,getProductByMallInfo:Xf,getProductVariant:hl,searchProducts:Wf},Symbol.toStringTag,{value:"Module"}));function ia(n,e,t){if(!t||t.length===0)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};const r=t.find(i=>n>=i.min_quantity&&n<=i.max_quantity);if(!r)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};let o=e,s=0;if(r.type==="amount")r.direction==="minus"?(o=Math.max(0,e-r.value),s=e-o):(o=e+r.value,s=-r.value);else if(r.type==="percentage"){const i=r.value/100;r.direction==="minus"?(s=e*i,o=e-s):(s=-(e*i),o=e+Math.abs(s))}return{originalPrice:e,discountedPrice:o,discountAmount:s,discountInfo:r,hasDiscount:s!==0}}const lE={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1};function dE(){const{subscribe:n,set:e,update:t}=ld(lE);return{subscribe:n,set:e,update:t,async loadIntegratedProductData(r,o){var i;const s=Ur({subscribe:n});if((i=s.productDataCache[r])!=null&&i.isLoaded)return s.productDataCache[r];if(s.loadingProducts.has(r))return new Promise((a,A)=>{const d=setInterval(()=>{var u;const c=Ur({subscribe:n});c.loadingProducts.has(r)||(clearInterval(d),(u=c.productDataCache[r])!=null&&u.isLoaded?a(c.productDataCache[r]):A(new Error("   ")))},100)});t(a=>({...a,loadingProducts:new Set([...a.loadingProducts,r]),isGlobalLoading:!0,productDataCache:{...a.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0}}}));try{const[a,A]=await Promise.all([dh(r,o),ch(r)]);if(!a)throw new Error("   ");const d={};A.forEach(u=>{u.items.forEach(h=>{h.addon_product.variants&&h.addon_product.variants.length>0&&(d[h.addon_product.id]={price:h.addon_product.variants[0].prices[0].amount,title:h.addon_product.title,variants:h.addon_product.variants,description:h.addon_product.description,thumbnail:h.addon_product.thumbnail})})});const c={id:r,product:a,addons:A,process:a.process,addonProductsMap:d,isLoaded:!0,isLoading:!1};return t(u=>{const h=new Set(u.loadingProducts);return h.delete(r),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[r]:c}}}),c}catch(a){throw console.error("   :",a),t(A=>{const d=new Set(A.loadingProducts);return d.delete(r),{...A,loadingProducts:d,isGlobalLoading:d.size>0,productDataCache:{...A.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:a instanceof Error?a.message:"   "}}}}),a}},async loadMultipleProductData(r,o){t(s=>({...s,isGlobalLoading:!0}));try{const s=r.map(a=>this.loadIntegratedProductData(a,o)),i=await Promise.all(s);return t(a=>({...a,isGlobalLoading:!1})),i}catch(s){throw t(i=>({...i,isGlobalLoading:!1})),s}},getProductData(r){return Ur({subscribe:n}).productDataCache[r]||null},clearProductData(r){t(r?o=>{const s={...o.productDataCache};return delete s[r],{...o,productDataCache:s}}:o=>({...o,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1}))},isProductLoading(r){return Ur({subscribe:n}).loadingProducts.has(r)},isGlobalLoading(){return Ur({subscribe:n}).isGlobalLoading},isCached(r){var s;return((s=Ur({subscribe:n}).productDataCache[r])==null?void 0:s.isLoaded)===!0}}}const Jd=dE(),ni=ld(null);function cE(){const n={},e={products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null},{subscribe:t,set:r,update:o}=ld(e),s=i=>{const a=i.products.map(h=>{var ne;let p=0,v={originalAmount:0,discountAmount:0,hasDiscount:!1,discountDetails:void 0};const w=(h.variants||[]).reduce((xe,L)=>xe+(L.quantity||0),0),b=(h.variants||[]).map(xe=>{const L=xe.quantity||0,q=xe.prices[0].amount;if(L>0){if(xe.isDiscountedPrice)return{originalAmount:q*L,discountedAmount:q*L,discountAmount:0,discountDetails:void 0,hasDiscount:!1};const V=ia(w,q,h.product.quantity_discounts);return{originalAmount:q*L,discountedAmount:V.discountedPrice*L,discountAmount:V.discountAmount*L,discountDetails:V.discountInfo,hasDiscount:V.hasDiscount}}else return{originalAmount:q*L,discountedAmount:q*L,discountAmount:0,discountDetails:void 0,hasDiscount:!1}});p=b.reduce((xe,L)=>xe+L.discountedAmount,0);const x=b.some(xe=>xe.hasDiscount),S=(ne=b.find(xe=>xe.hasDiscount))==null?void 0:ne.discountDetails;v={originalAmount:b.reduce((xe,L)=>xe+L.originalAmount,0),discountAmount:b.reduce((xe,L)=>xe+L.discountAmount,0),hasDiscount:x,discountDetails:S};let I=0;const P=h.prints&&h.prints.length>0,N=h.simplePrints&&h.simplePrints.length>0,ee=h.print_type==="simple"&&N||N&&!P;P&&!ee&&(I=(h.prints||[]).reduce((xe,L)=>xe+(L.price||0),0));let j=0;if(h.addons&&Object.keys(h.addons).length>0){const xe=h.quantity||0;j=Object.values(h.addons).reduce((L,q)=>{if(q.price!==void 0){const V=q.quantity||1;return L+q.price*V}if(h.addonProductsMap){const V=h.addonProductsMap[q.productId];if(V&&q.variantId){const se=V.variants.find(ve=>ve.id===q.variantId);if(se&&se.prices&&se.prices.length>0)return L+se.prices[0].amount*xe}}return L},0)}const D=p+I+j;return{...h,productAmount:p,printAmount:I,addonAmount:j,totalAmount:D,discountInfo:v}}),A=a.reduce((h,p)=>h+p.quantity,0),d=a.reduce((h,p)=>h+(p.productAmount||0),0),c=a.reduce((h,p)=>h+(p.printAmount||0),0),u=a.reduce((h,p)=>h+(p.addonAmount||0),0);return{products:a,totalQuantity:A,totalProductAmount:d,totalPrintAmount:c,totalAddonAmount:u,totalAmount:d+c+u+(i.totalAdditionalAmount||0)}};return{subscribe:t,set:r,update:o,async addProductWithIntegratedData(i,a){try{const A=await Jd.loadIntegratedProductData(i,a),d={product:A.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:A.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};o(c=>({...c,products:[...c.products,d],index:c.products.length}))}catch(A){throw console.error("  :",A),A}},async preloadProductsForFixedMode(i,a){try{const d=(await Jd.loadMultipleProductData(i,a)).map(c=>({product:c.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:c.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0}));o(c=>({...c,products:d,index:0}))}catch(A){throw console.error("   :",A),A}},async refreshProductData(i,a){const d=Ur({subscribe:t}).products[i];if(!d)throw new Error("   ");try{Jd.clearProductData(d.product.id);const c=await Jd.loadIntegratedProductData(d.product.id,a);o(u=>({...u,products:u.products.map((h,p)=>p===i?{...h,product:c.product,addonProductsMap:c.addonProductsMap,isLoaded:!0}:h)}))}catch(c){throw console.error("   :",c),c}},reset:()=>{r({products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null})},calculatePrintPrice:async(i,a=!1)=>{const A=Ur(wt),d=A.products[i];if(console.log({product:d}),d.prints&&d.prints.length>0)for(const c of d.prints){console.log({print:c});let u=0,h=0;if(c.colors&&c.template.templateProduct){const p=c.template.templateProduct.template_product_variants.find(v=>v.color_count===c.colors.length);if(console.log({selectedVariant:p}),p){if(n[p.variant_id])u=n[p.variant_id].prices[0].amount;else{const v=await hl(p.variant_id);v&&(n[p.variant_id]=v,u=v.prices[0].amount)}if(c.variant_id=p.variant_id,p.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const v=ia(d.quantity,u,c.template.templateProduct.product.quantity_discounts);v.hasDiscount?(c.price=v.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-v.discountedPrice*d.quantity,discountDetails:v.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=p.plate_price,c.discountInfo={originalPrice:p.plate_price,discountAmount:0,hasDiscount:!1}}}else if(c.template.templateProduct){const p=c.template.templateProduct.template_product_variants[0];if(p){if(n[p.variant_id])u=n[p.variant_id].prices[0].amount;else{const v=await hl(p.variant_id);v&&(n[p.variant_id]=v,u=v.prices[0].amount)}if(c.variant_id=p.variant_id,p.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const v=ia(d.quantity,u,c.template.templateProduct.product.quantity_discounts);v.hasDiscount?(c.price=v.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-v.discountedPrice*d.quantity,discountDetails:v.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=p.plate_price,c.discountInfo={originalPrice:p.plate_price,discountAmount:0,hasDiscount:!1}}}}if(!a){const c=s(A);r({...A,...c,totalAdditionalAmount:A.totalAdditionalAmount})}},updateTotalAmounts:()=>{o(i=>{const a=s(i);return{...i,...a,totalAdditionalAmount:i.totalAdditionalAmount}})},cancelPrint:(i,a,A)=>{o(d=>{const c=d.products[i].prints;c&&(a?d.products[i].prints=c.filter(h=>h.id!==a):A&&(d.products[i].prints=c.filter(h=>h.objectId!==A)));const u=s(d);return{...d,...u,totalAdditionalAmount:d.totalAdditionalAmount}})},updateSimplePrint:(i,a,A)=>{o(d=>{d.products[i].prints||(d.products[i].prints=[]);const c=d.products[i].prints.findIndex(u=>u.objectId===a);return c>=0?d.products[i].prints[c]={...d.products[i].prints[c],...A}:d.products[i].prints.push(A),d})},saveSimplePrintState:(i,a)=>{console.log("Store: saveSimplePrintState ",{productIndex:i,selectedAreasCount:a.length,selectedAreas:a}),o(A=>A.products[i]?(A.products[i].simplePrintState=a,console.log("Store: saveSimplePrintState ",{productIndex:i,savedState:A.products[i].simplePrintState}),A):(console.warn("Store: saveSimplePrintState -   :",i),A))},getSimplePrintState:i=>{var d;const a=Ur(wt),A=((d=a.products[i])==null?void 0:d.simplePrintState)||[];return console.log("Store: getSimplePrintState ",{productIndex:i,hasProduct:!!a.products[i],result:A,resultType:typeof A,resultLength:Array.isArray(A)?A.length:"not array"}),A},updateProductPrintType:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateProductPrintType ",{idx:i,printType:a,previousPrintType:A.products[i].print_type}),A.products[i].print_type=a,(a==="simple"||a==="none")&&(A.products[i].prints=[],A.products[i].printAmount=0);const d=s(A);return{...A,totalProductAmount:d.totalProductAmount,totalPrintAmount:d.totalPrintAmount,totalAddonAmount:d.totalAddonAmount,totalAdditionalCostAmount:d.totalAdditionalCostAmount,totalAmount:d.totalAmount}}return A})},updateSimplePrints:(i,a)=>{o(A=>A.products[i]?(console.log("Store: updateSimplePrints ",{idx:i,simplePrintsCount:a.length}),A.products[i].simplePrints=a,A.products[i].simplePrintState=a,{...A}):A)},updateDetailedPrints:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateDetailedPrints ",{idx:i,printsCount:a.length}),A.products[i].prints=a;const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}}return A})},clearSimplePrints:i=>{o(a=>a.products[i]?(console.log("Store: clearSimplePrints ",{idx:i}),a.products[i].simplePrints=[],a.products[i].simplePrintState=[],{...a}):a)},clearDetailedPrints:i=>{o(a=>{if(a.products[i]){console.log("Store: clearDetailedPrints ",{idx:i}),a.products[i].prints=[],a.products[i].printAmount=0;const A=s(a);return{...a,...A,totalAdditionalAmount:a.totalAdditionalAmount}}return a})},updateProductAtIndex:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateProductAtIndex ",{idx:i,dataKeys:Object.keys(a)}),A.products[i]={...A.products[i],...a};const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}}return A})}}}const wt=cE();function uE(){const n={name:"",phone:"",address1:"",address2:"",postcode:""},{subscribe:e,set:t,update:r}=ld(n);return{subscribe:e,set:t,update:r,reset:()=>{console.log(" Customer Store "),t(n)}}}const Gl=uE(),Er=n=>n.toLocaleString("ko-KR");/**
* @license lucide-svelte v0.475.0 - ISC
*
* ISC License
* 
* Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
* 
* Permission to use, copy, modify, and/or distribute this software for any
* purpose with or without fee is hereby granted, provided that the above
* copyright notice and this permission notice appear in all copies.
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
* WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
* ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
* WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
* ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
* OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*/const hE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var fE=lg("<svg><!><!></svg>");function gn(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]),r=sn(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);an(e,!1);let o=gt(e,"name",8,void 0),s=gt(e,"color",8,"currentColor"),i=gt(e,"size",8,24),a=gt(e,"strokeWidth",8,2),A=gt(e,"absoluteStrokeWidth",8,!1),d=gt(e,"iconNode",24,()=>[]);const c=(...w)=>w.filter((b,x,S)=>!!b&&S.indexOf(b)===x).join(" ");cn();var u=fE();let h;var p=g(u);sr(p,1,d,vr,(w,b)=>{let x=()=>l(b)[0],S=()=>l(b)[1];var I=Tt(),P=lt(I);Y4(P,x,!0,(N,ee)=>{let j;De(()=>j=G2(N,j,{...S()},void 0,N.namespaceURI===o_,N.nodeName.includes("-")))}),U(w,I)});var v=B(p);dn(v,e,"default",{}),De((w,b)=>h=G2(u,h,{...hE,...r,width:i(),height:i(),stroke:s(),"stroke-width":w,class:b},void 0,!0),[()=>A()?Number(a())*24/Number(i()):a(),()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],At),U(n,u),An()}function qA(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"asterisk"},()=>t,{iconNode:[["path",{d:"M12 6v12"}],["path",{d:"M17.196 9 6.804 15"}],["path",{d:"m6.804 9 10.392 6"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function xw(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"book-text"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["path",{d:"M8 11h8"}],["path",{d:"M8 7h6"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function pE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"bot"},()=>t,{iconNode:[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Bw(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"building-2"},()=>t,{iconNode:[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}],["path",{d:"M10 6h4"}],["path",{d:"M10 10h4"}],["path",{d:"M10 14h4"}],["path",{d:"M10 18h4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function gE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function a1(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function nu(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"circle-check"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Ku(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"circle-x"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function yp(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"clock"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function i5(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"eye"},()=>t,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Zd(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"file-text"},()=>t,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function vE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"filter"},()=>t,{iconNode:[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function mE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"key"},()=>t,{iconNode:[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function lc(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"loader-circle"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function A1(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function wE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"mail"},()=>t,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function a5(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"message-square"},()=>t,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function $u(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"package"},()=>t,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function A5(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function T0(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"phone"},()=>t,{iconNode:[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Vu(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function bE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"printer"},()=>t,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function yE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"refresh-cw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function zw(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"rotate-ccw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function _E(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function _p(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function xE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"send"},()=>t,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function L0(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"shopping-bag"},()=>t,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function BE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"shopping-cart"},()=>t,{iconNode:[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function l1(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"trash-2"},()=>t,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function zE(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"user-cog"},()=>t,{iconNode:[["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m21.7 16.4-.9-.3"}],["path",{d:"m15.2 13.9-.9-.3"}],["path",{d:"m16.6 18.7.3-.9"}],["path",{d:"m19.1 12.2.3-.9"}],["path",{d:"m19.6 18.7-.4-1"}],["path",{d:"m16.8 12.3-.4-1"}],["path",{d:"m14.3 16.6 1-.4"}],["path",{d:"m20.7 13.8 1-.4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Wl(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"user"},()=>t,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function xA(n,e){const t=sn(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,s)=>{var i=Tt(),a=lt(i);dn(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}async function CE(n,e,t,r,o){let s=vt.from("estimates").select("*").eq("is_delete",!1).neq("status","temp").order("created_at",{ascending:!1});t&&(s=s.eq("shop_id",t)),e?s=s.eq("customer_id",e):n&&(s=s.eq("sess",n)),r&&(s=s.gte("created_at",`${r}T00:00:00`)),o&&(s=s.lte("created_at",`${o}T23:59:59`));const{data:i,error:a}=await s;if(a)throw a;return i||[]}async function d1(n,e,t){if(n&&e){const{data:r,error:o}=await vt.from("estimates").select("*").eq("status","temp").eq("mall_type",n).eq("customer_id",e).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}if(t){const{data:r,error:o}=await vt.from("estimates").select("*").eq("status","temp").eq("sess",t).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}return null}async function rd(n){const{data:e,error:t}=await vt.from("estimates").select("*").eq("id",n).eq("is_delete",!1).single();if(t)throw t;return e}function nd(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${e}${t}${r}${o}${s}${i}`}async function c1(n){const e={...n,estimate_no:nd(),customer_id:n.customer_id===""?null:n.customer_id,sess:n.sess===""?null:n.sess},{data:t,error:r}=await vt.from("estimates").insert(e).select().single();if(r)throw r;return t}async function _c(n,e){const{data:t,error:r}=await vt.from("estimates").select("estimate_no, customer_id, sess").eq("id",n).single();if(r)throw r;const o={...e};(e.customer_id===""||e.customer_id===void 0)&&((t==null?void 0:t.customer_id)===null?o.customer_id=null:e.customer_id===""&&delete o.customer_id),(e.sess===""||e.sess===void 0)&&(t!=null&&t.sess?delete o.sess:e.sess===""&&(o.sess=null)),t!=null&&t.estimate_no||(o.estimate_no=nd());const{error:s}=await vt.from("estimates").update(o).eq("id",n);if(s)throw s;const{data:i,error:a}=await vt.from("estimates").select("*").eq("id",n).single();if(a)throw a;if(!i)throw new Error("   .");return i}async function Gu(n){const{data:e,error:t}=await vt.from("estimate_items").select(`
      *,
      product:products(*),
      variant:product_variants(id, title, thumbnail)
    `).eq("estimate_id",n);if(t)throw t;return(e||[]).map(r=>{var o;return{...r,variant_title:((o=r.variant)==null?void 0:o.title)||null}})}async function u1(n){const{data:e,error:t}=await vt.from("estimate_items").insert(n).select().single();if(t)throw t;return e}async function l5(n){const{error:e}=await vt.from("estimate_items").delete().eq("id",n);if(e)throw e}async function xc(n){const{data:e,error:t}=await vt.from("estimate_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function h1(n){const{data:e,error:t}=await vt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function f1(n){const{data:e,error:t}=await vt.from("estimate_prints").insert(n).select().single();if(t)throw t;return e}async function d5(n){const{error:e}=await vt.from("estimate_prints").delete().eq("id",n);if(e)throw e}async function P0(n){const{data:e,error:t}=await vt.from("estimate_simple_prints").insert(n).select().single();if(t)throw t;return e}async function c5(n,e){const{data:t,error:r}=await vt.from("estimates").update({status:e}).eq("id",n).select().single();if(r)throw r;return t}function ug(n,e){return vt.channel(`estimate-${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"estimates",filter:`id=eq.${n}`},t=>{e(t.new)}).subscribe()}function k0(n,e,t,r){const o=r?`estimate-list-${e}-${r}`:`estimate-list-${n}-${e}`;let s=`shop_id=eq.${e}`;return r?s=`customer_id=eq.${r}`:n&&(s=`sess=eq.${n}`),vt.channel(o).on("postgres_changes",{event:"*",schema:"public",table:"estimates",filter:s},i=>{t({...i,eventType:i.eventType})}).subscribe()}function dc(n){return n===void 0||n==="temp"||n==="pending"}async function p1(n){try{const e=rd(n),t=Gu(n),r=xc(n),[o,s,i]=await Promise.all([e,t,r]);return{estimate:o,items:s||[],prints:i||[]}}catch(e){throw e}}async function u5(n){const{data:e,error:t}=await vt.from("estimate_comments").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function Yf(n){const{data:e,error:t}=await vt.from("estimate_comments").insert(n).select().single();if(t)throw t;return e}function g1(n,e){return vt.channel(`estimate-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_comments",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}async function h5(){var n,e;try{const t=document.getElementById("odiz-customer-id"),r=document.getElementById("odiz-sess"),o=(n=t==null?void 0:t.value)==null?void 0:n.trim(),s=(e=r==null?void 0:r.value)==null?void 0:e.trim();if(!o||!s)return 0;const{data:i,error:a}=await vt.from("estimates").select("id").eq("sess",s).is("customer_id",null);if(a)throw a;if(!i||i.length===0)return 0;const{data:A,error:d}=await vt.from("estimates").update({customer_id:o}).eq("sess",s).is("customer_id",null).select();if(d)throw d;return(A==null?void 0:A.length)||0}catch{return 0}}function v1(n,e){return vt.channel(`estimate-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}function f5(n,e){return vt.channel(`estimate-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateItems  :",r)})}function p5(n,e){return vt.channel(`estimate-simple-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_simple_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateSimplePrints  :",r)})}function g5(n,e){return vt.channel(`estimate-addon-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_addon_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAddonItems  :",r)})}function v5(n,e){return vt.channel(`estimate-additional-costs-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_additional_costs",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAdditionalCosts  :",r)})}async function m5(n,e,t,r,o){const s=t?t.replace(/[\s\-\(\)\.]/g,""):"";let i=vt.from("estimates").select("*").eq("shop_id",n).or("customer_id.is.null,customer_id.eq.").neq("status","temp").order("created_at",{ascending:!1});r&&!e&&!s?i=i.eq("sess",r):(e&&(i=i.ilike("order_name",`%${e}%`)),s&&(i=i.filter("order_phone","ilike",`%${s}%`))),o&&(i=i.eq("mall_type",o));const{data:a,error:A}=await i;if(A)throw A;return a||[]}async function w5(n){try{const{data:e,error:t}=await vt.from("estimate_items").select(`
        *,
        product:products(*)
      `).eq("estimate_id",n).order("idx");if(t)throw t;const{data:r,error:o}=await vt.from("estimate_prints").select("*").eq("estimate_id",n).order("idx");if(o)throw o;const s={};return(e||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,product:i.product,items:[],prints:[]}),s[a].items.push(i)}),(r||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,items:[],prints:[]}),s[a].prints.push(i)}),Object.values(s)}catch(e){throw e}}async function hg(n){const{data:e,error:t}=await vt.from("estimate_addon_items").select("*").eq("estimate_id",n).order("idx");if(t)throw t;return e||[]}async function b5(n){const{data:e,error:t}=await vt.from("estimate_additional_costs").select("*").eq("id",n).single();if(t)throw t;return e||null}async function m1(n){const e={...n,selected_variant_id:n.selected_variant_id&&n.selected_variant_id.trim()!==""?n.selected_variant_id:null},{data:t,error:r}=await vt.from("estimate_addon_items").insert(e).select().single();if(r)throw r;return t}async function y5(n,e){const{error:t}=await vt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t}async function w1(n){const{data:e,error:t}=await vt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function _5(n){try{const{data:e,error:t}=await vt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at");if(t)throw t;return(e||[]).map((o,s)=>({id:o.id,product:{name:o.name,title:o.name,mall_type:o.mall_type||null,mall_product_id:o.mall_product_id||null},items:[{estimate_id:n,quantity:1,price:o.amount}],additionalCosts:[o],isAdditionalCost:!0}))}catch(e){throw e}}async function x5(n){const{data:e,error:t}=await vt.from("estimate_items").select("idx").eq("estimate_id",n).order("idx",{ascending:!1}).limit(1).single();return t||!e?-1:e.idx}async function B5(n,e,t,r){try{const o=await d1(e,t,r);let s,i,a=!1,A=0;if(o&&o.id)s=o.id,i=o.estimate_no||nd(),await _c(s,{...n.estimate,estimate_no:i}),A=await x5(s)+1;else{const v={...n.estimate,estimate_no:nd(),status:"temp",customer_id:n.estimate.customer_id===""?null:n.estimate.customer_id,sess:n.estimate.sess===""?null:n.estimate.sess},{data:w,error:b}=await vt.from("estimates").insert(v).select().single();if(b)throw new Error(`  : ${b.message}`);s=w.id,i=w.estimate_no,a=!0}let d=0;if(n.estimate_items&&n.estimate_items.length>0){const v=n.estimate_items.map(x=>({...x,estimate_id:s,idx:A})),{data:w,error:b}=await vt.from("estimate_items").insert(v).select();if(b)throw new Error(`   : ${b.message}`);d=(w==null?void 0:w.length)||0}let c=0;if(n.estimate_simple_prints&&n.estimate_simple_prints.length>0){const v=n.estimate_simple_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:b}=await vt.from("estimate_simple_prints").insert(v).select();if(b)throw new Error(`   : ${b.message}`);c=(w==null?void 0:w.length)||0}let u=0;if(n.estimate_prints&&n.estimate_prints.length>0){const v=n.estimate_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:b}=await vt.from("estimate_prints").insert(v).select();if(b)throw new Error(`    : ${b.message}`);if(u=(w==null?void 0:w.length)||0,u>0){const{error:x}=await vt.from("estimate_items").update({print_type:"detailed"}).eq("estimate_id",s).eq("idx",A)}}let h=0;if(n.estimate_addon_items&&n.estimate_addon_items.length>0){const v=n.estimate_addon_items.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A,selected_variant_id:x.selected_variant_id&&x.selected_variant_id.trim()!==""?x.selected_variant_id:null})),{data:w,error:b}=await vt.from("estimate_addon_items").insert(v).select();if(b)throw new Error(`   : ${b.message}`);h=(w==null?void 0:w.length)||0}const p={success:!0,estimateId:s,details:{estimateCount:a?1:0,itemsCount:d,simplePrintsCount:c,detailedPrintsCount:u,addonItemsCount:h}};return await b1(s),p}catch(o){return{success:!1,error:o instanceof Error?o.message:"    ."}}}async function O0(n,e){try{const{error:t}=await vt.from("estimate_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t;const{error:r}=await vt.from("estimate_prints").delete().eq("estimate_id",n).eq("idx",e);if(r)throw r;const{error:o}=await vt.from("estimate_simple_prints").delete().eq("estimate_id",n).eq("idx",e);if(o)throw o;const{error:s}=await vt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(s)throw s}catch(t){throw t}}async function z5(n,e){try{const{data:t,error:r}=await vt.from("estimate_items").select(`
        *,
        product:products(
          *,
          options:product_options(
            *,
            values:product_option_values(*)
          ),
          variants:product_variants(*)
        )
      `).eq("estimate_id",n).eq("idx",e);if(r)throw r;if(t&&t.length>0)for(const h of t)if(h.variant_id)try{const{data:p,error:v}=await vt.from("product_variants").select("*").eq("id",h.variant_id).single();if(v)h.variant=null;else{h.variant=p;try{const{data:w,error:b}=await vt.from("prices").select("*").eq("variant_id",h.variant_id);b?h.variant.prices=[]:h.variant.prices=w||[]}catch{h.variant.prices=[]}try{const{data:w,error:b}=await vt.from("product_variant_option_values").select("option_value_id").eq("variant_id",h.variant_id);if(b||!w||w.length===0)h.variant.option_values=[];else{const x=w.map(I=>I.option_value_id).filter(Boolean),S=[];for(const I of x)try{const{data:P,error:N}=await vt.from("product_option_values").select("id, value, option_id").eq("id",I).single();if(N||!P)continue;let ee=null;if(P.option_id){const{data:j,error:D}=await vt.from("product_options").select("*").eq("id",P.option_id).single();!D&&j&&(ee={id:j.id,name:j.title})}S.push({option_value:{id:P.id,value:P.value,option_id:P.option_id,option:ee}})}catch{}h.variant.option_values=S}}catch{h.variant.option_values=[]}}}catch{h.variant=null}else h.variant=null;const{data:o,error:s}=await vt.from("estimate_prints").select("*").eq("estimate_id",n).eq("idx",e);if(s)throw s;if(o&&o.length>0){const{getParentTemplates:h}=await Hs(async()=>{const{getParentTemplates:p}=await Promise.resolve().then(()=>SE);return{getParentTemplates:p}},void 0);for(const p of o)if(p.template_id)try{const v=await h(p.template_id);p.parentTemplates=v}catch{p.parentTemplates=[]}else p.parentTemplates=[]}const{data:i,error:a}=await vt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("idx",e);if(a)throw a;const{data:A,error:d}=await vt.from("estimate_addon_items").select("*").eq("estimate_id",n).eq("idx",e);if(d)throw d;const c=t&&t.length>0?t[0].product_id:null;let u=[];if(c)try{const{getProductAddons:h}=await Hs(async()=>{const{getProductAddons:p}=await Promise.resolve().then(()=>AE);return{getProductAddons:p}},void 0);u=await h(c)}catch{u=[]}return{items:t||[],prints:o||[],simplePrints:i||[],addonItems:A||[],addons:u||[]}}catch(t){throw t}}function C5(n){const e={};return n.forEach((t,r)=>{if(!t.variant)return;const o=t.variant;let s="";if(o.option_values&&Array.isArray(o.option_values)&&o.option_values.length>0)try{const a=o.option_values.find(A=>{var c;if(!A||!A.option_value)return!1;const d=(c=A.option_value.option)==null?void 0:c.name;return d===""||d===""||d==="color"||d==="Color"});a&&a.option_value&&(s=a.option_value.value||"")}catch{}if(!s&&o.title){const a=o.title.split("/").map(A=>A.trim());a.length>0&&(s=a[0])}s||(s=""),e[s]||(e[s]=[]),e[s].some(a=>a.id===o.id)||e[s].push({id:o.id,title:o.title,thumbnail:o.thumbnail,product_id:o.product_id,prices:t.variant.prices||[],option_values:o.option_values||[]})}),e}function S5(n,e){var b,x,S;if(!n.items||n.items.length===0)throw new Error("estimate_items  ");const t=(b=n.items[0])==null?void 0:b.product_id;if(!t)throw new Error("Product ID   ");let r;r=C5(n.items),Object.keys(r).length;const o={},s={},i=new Set;let a=0;n.items.forEach((I,P)=>{const N=I.variant_id,ee=I.quantity||0;a+=ee;let j="";for(const[D,ne]of Object.entries(r))if(ne.some(xe=>xe.id===N)){j=D,i.add(D);break}j&&(o[j]||(o[j]={}),o[j][N]=ee),(I.discount_amount>0||I.discount_value>0)&&(s[N]={hasDiscount:!0,discountedPrice:I.price,discountAmount:I.discount_amount,discountInfo:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}})});const A={productId:t,product:(x=n.items[0])==null?void 0:x.product,addons:n.addons||[],addonItems:n.addonItems||[],selectedColors:Array.from(i),quantityByVariant:o,variantsByColor:r,variantDiscounts:s,totalQuantity:a,isCompleted:!0,lastUpdated:Date.now()},d=(n.simplePrints||[]).map(I=>({objectId:I.object_id,title:I.title,printMethod:I.print_method,uploadedFiles:I.uploaded_files,savedFileInfo:I.file_metadata,price:I.price})),c=n.prints.map((I,P)=>({template:{id:I.template_id},template_id:I.template_id,variant_id:I.variant_id,colors:I.colors,uploads:I.uploads,nameSheet:I.name_sheet,name_sheet:I.name_sheet,objectId:I.object_id,object_id:I.object_id,price:I.price,original_price:I.original_price,discount_amount:I.discount_amount,discount_type:I.discount_type,discount_value:I.discount_value,discount_direction:I.discount_direction,discount_min_quantity:I.discount_min_quantity,discount_max_quantity:I.discount_max_quantity,parentTemplates:I.parentTemplates||[],discountInfo:{originalPrice:I.original_price,discountAmount:I.discount_amount,discountDetails:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}}})),u={};n.addonItems.forEach(I=>{u[I.addon_id]={productId:I.selected_product_id,variantId:I.selected_variant_id}});const h={productId:t,selectedAddons:u,isCompleted:!0,lastUpdated:Date.now()};let p="none";const v=(S=n.items[0])==null?void 0:S.print_type;v&&["simple","detailed","self-design","none"].includes(v)?p=v:(p="selection",(d.length>0||c.length>0)&&console.warn("    print_type .    ."));const w={productId:t,currentMethod:p,isCompleted:!0,lastUpdated:Date.now()};return{productId:t,fixedEstimateData:{productId:t,productSelection:A,printSelection:w,addonSelection:h,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:Date.now().toString(36)+Math.random().toString(36).substr(2)},sessionStorageData:{fixedEstimateKey:`fixedEstimate_${t}`,simplePrintKey:`simplePrint_${t}`,detailedPrintKey:`detailedPrint_${t}`,printMethod:p,simplePrintState:d,detailedPrintState:c}}}async function E5(n){const{data:e,error:t}=await vt.from("estimate_items").select("quantity, price, print_type").eq("estimate_id",n);if(t)throw t;let r=0,o=0,s=!1;(e||[]).forEach(v=>{const w=v.quantity||0,b=v.price||0;r+=w*b,o+=w,v.print_type==="detailed"&&(s=!0)});let i=0;if(s){const{data:v,error:w}=await vt.from("estimate_prints").select("price").eq("estimate_id",n);if(w)throw w;i=(v||[]).reduce((b,x)=>b+(x.price||0),0)}const{data:a,error:A}=await vt.from("estimate_addon_items").select("price, quantity").eq("estimate_id",n);if(A)throw A;let d=0;(a||[]).forEach(v=>{const w=v.price||0,b=v.quantity||1;d+=w*b});const{data:c,error:u}=await vt.from("estimate_additional_costs").select("amount").eq("estimate_id",n);if(u)throw u;const h=(c||[]).reduce((v,w)=>v+(w.amount||0),0),p=r+i+d+h;return{product_amount:r,print_amount:i,addon_amount:d,additional_amount:h,total_quantity:o,total_amount:p}}async function b1(n){const e=await E5(n),{error:t}=await vt.from("estimates").update(e).eq("id",n);if(t)throw new Error(`Failed to update estimate summary: ${t.message}`)}async function F5(n,e,t,r,o){try{const s=await rd(n);if(!s)throw new Error("    ");const i=new Date().toISOString(),a=nd(),A={shop_id:s.shop_id||e,name:s.name,organization_name:s.organization_name,order_name:s.order_name,order_phone:s.order_phone,postcode:s.postcode,address1:s.address1,address2:s.address2,comment:s.comment,shipping_method:s.shipping_method,pref_delivery_date:s.pref_delivery_date,upload_memo:s.upload_memo,product_amount:s.product_amount,print_amount:s.print_amount,addon_amount:s.addon_amount,additional_amount:s.additional_amount,total_quantity:s.total_quantity,total_amount:s.total_amount,delivery_fee:s.delivery_fee,memo:s.memo,use_reorder:s.use_reorder,sess:t||null,customer_id:r||null,mall_type:o||s.mall_type,estimate_no:a,status:"temp",design_confirm:"none",source_estimate_id:n,is_delete:!1,created_at:i,updated_at:i},{data:d,error:c}=await vt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);const u=d.id;return await U5(n,u),await Q5(n,u),await T5(n,u),await L5(n,u),await P5(n,u),console.log(`[copyEstimateForUser]   : ${n}  ${u}`),{success:!0,newEstimateId:u,newEstimateNo:a}}catch(s){return console.error("[copyEstimateForUser] :",s),{success:!1,newEstimateId:null,newEstimateNo:null,error:s instanceof Error?s.message:"    ."}}}async function I5(n){try{const e=await rd(n);if(!e)throw new Error("    ");const t=new Date().toISOString(),r=nd(),o={shop_id:e.shop_id,customer_id:e.customer_id||null,sess:e.sess||null,mall_type:e.mall_type,name:e.name,organization_name:e.organization_name,order_name:e.order_name,order_phone:e.order_phone,phone:e.phone,email:e.email,postcode:e.postcode,address1:e.address1,address2:e.address2,comment:e.comment,shipping_method:e.shipping_method,pref_delivery_date:e.pref_delivery_date,upload_memo:e.upload_memo,memo:e.memo,use_reorder:e.use_reorder,delivery_fee:e.delivery_fee,product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,estimate_no:r,status:"pending",design_confirm:"none",is_payment:!1,source_estimate_id:n,design_uploads:null,is_delete:!1,created_at:t,updated_at:t},{data:s,error:i}=await vt.from("estimates").insert(o).select().single();if(i)throw new Error(`  : ${i.message}`);const a=s.id;return await U5(n,a),await Q5(n,a),await T5(n,a),await L5(n,a),await P5(n,a),console.log(`[reorderEstimate]    : ${n}  ${a}`),{success:!0,newEstimateId:a,newEstimateNo:r}}catch(e){return console.error("[reorderEstimate] :",e),{success:!1,newEstimateId:null,newEstimateNo:null,error:e instanceof Error?e.message:"    ."}}}async function U5(n,e){const{data:t,error:r}=await vt.from("estimate_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await vt.from("estimate_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function Q5(n,e){const{data:t,error:r}=await vt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await vt.from("estimate_simple_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function T5(n,e){const{data:t,error:r}=await vt.from("estimate_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await vt.from("estimate_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function L5(n,e){const{data:t,error:r}=await vt.from("estimate_addon_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await vt.from("estimate_addon_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function P5(n,e){const{data:t,error:r}=await vt.from("estimate_additional_costs").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await vt.from("estimate_additional_costs").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function k5(n,e,t){try{const r=new Date().toISOString(),o=nd();let s=null;n.estimateGoods&&n.estimateGoods.length>0&&(s=n.estimateGoods.map(u=>({sno:u.sno,goodsNm:u.goodsNm||"",url:`http://dantee771.godomall.com/estimate/estimate_goods_design.php?estimateGoodsSno=${u.sno}`})));const i=e&&e.trim()!==""?e:null,a=t&&t.trim()!==""?t:null;if(!i)throw new Error("shop_id .");console.log("[reorderFromLegacyEstimate] shopId:",i,"customerId:",a);const A={shop_id:i,customer_id:a,estimate_no:o,name:n.estimateNm||` - ${n.estimateNo}`,organization_name:n.ex1||null,order_name:n.receiverName||n.memNm||null,order_phone:n.receiverCellPhone||null,legacy_estimate_no:String(n.estimateNo),legacy_design_urls:s,status:"pending",design_confirm:"none",is_payment:!1,is_delete:!1,product_amount:0,print_amount:0,addon_amount:0,additional_amount:0,total_quantity:0,total_amount:0,created_at:r,updated_at:r},{data:d,error:c}=await vt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);return{success:!0,newEstimateId:d.id,newEstimateNo:o}}catch(r){return console.error("[reorderFromLegacyEstimate] :",r),{success:!1,newEstimateId:null,newEstimateNo:null,error:r instanceof Error?r.message:"    ."}}}function O5(n){return n?!n.sess&&!n.customer_id:!1}const Vh=Object.freeze(Object.defineProperty({__proto__:null,addEstimateAddonItem:m1,addEstimateComment:Yf,addEstimateItem:u1,addEstimatePrint:f1,addEstimateSimplePrint:P0,buildVariantsByColorFromDB:C5,calculateEstimateSummary:E5,canEditEstimate:dc,convertDBDataToSessionStorage:S5,copyEstimateForUser:F5,createEstimate:c1,deleteEstimateAddonItemsByIdx:y5,deleteEstimateItem:l5,deleteEstimatePrint:d5,deleteEstimateProductByIdx:O0,getAdditionalItems:_5,getEstimateAdditionalCost:b5,getEstimateAdditionalCosts:w1,getEstimateAddonItems:hg,getEstimateById:rd,getEstimateComments:u5,getEstimateItems:Gu,getEstimateItemsGroupedByIdx:w5,getEstimatePrints:xc,getEstimateSimplePrints:h1,getEstimatesWithDateFilter:CE,getFullEstimateDetails:p1,getGuestEstimates:m5,getMaxEstimateItemIdx:x5,getTempEstimate:d1,isAdminCreatedEstimate:O5,loadEstimateItemDataByIdx:z5,migrateSessionEstimatesToCustomer:h5,reorderEstimate:I5,reorderFromLegacyEstimate:k5,saveCompleteEstimateData:B5,subscribeToEstimateAdditionalCostsChanges:v5,subscribeToEstimateAddonItemsChanges:g5,subscribeToEstimateChanges:ug,subscribeToEstimateCommentChanges:g1,subscribeToEstimateItemsChanges:f5,subscribeToEstimateListChanges:k0,subscribeToEstimatePrintChanges:v1,subscribeToEstimateSimplePrintsChanges:p5,updateEstimate:_c,updateEstimateStatus:c5,updateEstimateSummary:b1},Symbol.toStringTag,{value:"Module"}));async function D5(n){const{data:e,error:t}=await vt.from("templates").select("*").eq("id",n).single();if(t)throw t;return e}async function N5(n){const{data:e,error:t}=await vt.from("templates").select("*").eq("parent_id",n).order("sort");if(t)throw t;return e||[]}async function xp(n){const{data:e,error:t}=await vt.from("process_print_areas").select(`
            id,
            title,
            process_print_area_templates!inner (
                id,
                print_area_id,
                template_id,
                group_cd,
                created_at,
                updated_at,
                template:templates (*)
            )
        `).eq("object_id",n).single();if(t)throw t;return e!=null&&e.process_print_area_templates&&e.process_print_area_templates.sort((r,o)=>{var a,A;const s=((a=r.template)==null?void 0:a.sort)??Number.MAX_SAFE_INTEGER,i=((A=o.template)==null?void 0:A.sort)??Number.MAX_SAFE_INTEGER;return s-i}),e}async function uh(n){const e=[],{data:t,error:r}=await vt.from("templates").select(" * ").eq("id",n).single();if(r)return console.error("   :",r),e;if(!t)return e;e.push(t);let o=t.parent_id;for(;o;){const{data:s,error:i}=await vt.from("templates").select(" * ").eq("id",o).single();if(i){console.error("   :",i);break}if(!s)break;e.push(s),o=s.parent_id}return e.reverse()}async function Qc(n){const{data:e,error:t}=await vt.from("template_products").select(`
            *,
            product:products (*),
            template_product_variants (
                id,
                variant_id,
                color_count,
                min_quantity,
                plate_price
            )
        `).eq("template_id",n).single();if(t)throw t;return e}async function y1(n){const{data:e,error:t}=await vt.from("process_print_areas").select("*").eq("object_id",n).single();return t?(console.error("  :",t),null):e}const SE=Object.freeze(Object.defineProperty({__proto__:null,getChildTemplates:N5,getParentTemplates:uh,getPrintAreaByObjectId:y1,getTemplate:D5,getTemplateProduct:Qc,getTemplatesByObjectId:xp},Symbol.toStringTag,{value:"Module"})),Pd={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1,currentSessionId:`session-${Date.now()}-${Math.random().toString(36).substring(2)}`,sessionStorageKey:"extended-product-data-cache"};function EE(){const{subscribe:n,set:e,update:t}=ld(Pd),r={save(o,s){if(!(typeof window>"u"))try{const i=`${Pd.sessionStorageKey}-${o}`,a={...s,lastSavedToSession:Date.now()};window.sessionStorage.setItem(i,JSON.stringify(a))}catch(i){console.warn("   :",i)}},restore(o){if(typeof window>"u")return null;try{const s=`${Pd.sessionStorageKey}-${o}`,i=window.sessionStorage.getItem(s);if(i)return JSON.parse(i)}catch(s){console.warn("   :",s)}return null},clear(o){if(!(typeof window>"u"))if(o){const s=`${Pd.sessionStorageKey}-${o}`;window.sessionStorage.removeItem(s)}else Object.keys(window.sessionStorage).forEach(s=>{s.startsWith(Pd.sessionStorageKey)&&window.sessionStorage.removeItem(s)})}};return{subscribe:n,set:e,update:t,async loadIntegratedProductData(o,s){var d;const i={subscribe:n},a=Ur(i),A=r.restore(o);if((d=a.productDataCache[o])!=null&&d.isLoaded||A!=null&&A.isLoaded){const c=A||a.productDataCache[o];return A&&t(u=>({...u,productDataCache:{...u.productDataCache,[o]:c}})),c}if(a.loadingProducts.has(o))return new Promise((c,u)=>{const h=setInterval(()=>{var v;const p=Ur(i);p.loadingProducts.has(o)||(clearInterval(h),(v=p.productDataCache[o])!=null&&v.isLoaded?c(p.productDataCache[o]):u(new Error("   ")))},100)});t(c=>({...c,loadingProducts:new Set([...c.loadingProducts,o]),isGlobalLoading:!0,productDataCache:{...c.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0,sessionId:c.currentSessionId}}}));try{const[c,u]=await Promise.all([dh(o,s),ch(o)]);if(!c)throw new Error("   ");const h={};u.forEach(v=>{v.items.forEach(w=>{w.addon_product.variants&&w.addon_product.variants.length>0&&(h[w.addon_product.id]={price:w.addon_product.variants[0].prices[0].amount,title:w.addon_product.title,variants:w.addon_product.variants,description:w.addon_product.description,thumbnail:w.addon_product.thumbnail})})});const p={id:o,product:c,addons:u,process:c.process,addonProductsMap:h,productSelection:A==null?void 0:A.productSelection,printSelection:A==null?void 0:A.printSelection,addonSelection:A==null?void 0:A.addonSelection,isLoaded:!0,isLoading:!1,sessionId:a.currentSessionId};return t(v=>{const w=new Set(v.loadingProducts);return w.delete(o),{...v,loadingProducts:w,isGlobalLoading:w.size>0,productDataCache:{...v.productDataCache,[o]:p}}}),r.save(o,p),p}catch(c){throw console.error("   :",c),t(u=>{const h=new Set(u.loadingProducts);return h.delete(o),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:c instanceof Error?c.message:"   ",sessionId:u.currentSessionId}}}}),c}},updateProductSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedColors:[],quantityByVariant:{},variantsByColor:{},totalQuantity:0,isCompleted:!1,...a.productSelection,...s,lastUpdated:A},c={...a,productSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},updatePrintSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,currentMethod:"selection",isCompleted:!1,...a.printSelection,...s,lastUpdated:A},c={...a,printSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},selectPrintMethod(o,s){this.updatePrintSelection(o,{currentMethod:s,lastUpdated:Date.now()})},completePrintSelection(o){this.updatePrintSelection(o,{isCompleted:!0,lastUpdated:Date.now()})},updateAddonSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedAddons:{},isCompleted:!1,...a.addonSelection,...s,lastUpdated:A},c={...a,addonSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},getProductData(o){return Ur({subscribe:n}).productDataCache[o]||null},restoreFromSession(o){const s=r.restore(o);return s&&t(i=>({...i,productDataCache:{...i.productDataCache,[o]:s}})),s},saveToSession(o){const a=Ur({subscribe:n}).productDataCache[o];a&&r.save(o,a)},clearProductData(o){o?(r.clear(o),t(s=>{const i={...s.productDataCache};return delete i[o],{...s,productDataCache:i}})):(r.clear(),t(s=>({...s,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1})))},updateProduct(o,s){t(i=>{const A={...i.productDataCache[o]||{id:o,product:s.product,addons:s.addons,addonProductsMap:{},isLoaded:!0,isLoading:!1,sessionId:i.currentSessionId},product:s.product,addons:s.addons,isLoaded:!0,isLoading:!1};return r.save(o,A),{...i,productDataCache:{...i.productDataCache,[o]:A}}})},hasProductSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.productSelection)!=null&&i.isCompleted)},hasPrintSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.printSelection)!=null&&i.isCompleted)},hasAddonSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.addonSelection)!=null&&i.isCompleted)},reset(){console.log(" Extended Product Data Store  "),r.clear(),e(Pd),console.log(" Extended Product Data Store  ")}}}const Gn=EE();function FE(){if(typeof window>"u")return;const n=[];for(let e=0;e<window.sessionStorage.length;e++){const t=window.sessionStorage.key(e);if(!t)continue;(t.startsWith("fixedEstimate_")||t.startsWith("detailedPrint_")||t.startsWith("simplePrint_")||t.startsWith("extended-product-data-cache-"))&&n.push(t)}n.forEach(e=>window.sessionStorage.removeItem(e)),console.log(` Edit mode: Cleared ${n.length} sessionStorage keys`,n)}var IE=G('<div class="odz-gap-2 odz-mt-3 odz-flex odz-flex-col"><button class="odz-btn odz-btn-sm odz-btn-secondary"></button> <button class="odz-btn odz-btn-sm odz-btn-primary"></button></div>'),UE=G('<img class="odz-w-8 odz-h-8 odz-object-cover odz-rounded">'),QE=G('<div class="odz-flex odz-items-center odz-gap-2 odz-border odz-rounded-lg odz-p-2"><!> <div class="odz-text-xs"><span> </span> <span class="odz-ml-2 odz-font-semibold"> </span></div></div>'),TE=G('<div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><span class="odz-text-gray-600 odz-font-bold"> </span> <span class="odz-text-xs"> </span></div>'),LE=G('<div class="odz-mt-3"></div>'),PE=G('<span class="odz-text-gray-600"> </span> <span class="odz-text-primary odz-font-semibold odz-ml-auto"> </span>',1),kE=G('<div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-bg-gray-50 odz-p-2 odz-rounded odz-mb-1"><span class="odz-font-medium"> </span> <!></div>'),OE=G('<div class="odz-mt-3"><div class="odz-text-sm odz-font-bold odz-text-gray-600 odz-mb-2"> </div> <!></div>'),DE=G('<span class="odz-text-sm odz-font-bold odz-text-gray-500"></span>'),NE=G('<span class="odz-text-sm odz-font-bold"> </span>'),ME=G('<div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div>'),HE=G('<div class="odz-flex odz-flex-col odz-gap-1"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div> <div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <!></div> <!></div> <div class="odz-flex odz-flex-col odz-items-end"><span class="odz-font-bold"> </span> <span class="odz-font-bold odz-text-lg"> </span></div>',1),jE=G('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border"><div class="odz-card-body odz-p-3"><div class="odz-flex odz-gap-4"><div class="odz-flex odz-flex-col odz-justify-between"><img class="odz-w-24 odz-h-24 odz-object-cover odz-rounded"> <!></div> <div class="odz-flex-1"><h2 class="odz-text-lg odz-font-bold"> </h2> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"></div> <!> <!> <div class="odz-flex odz-justify-between odz-items-center odz-mt-4 odz-pt-3 odz-border-t"></div></div></div></div></div>'),RE=G('<div class="odz-text-center odz-py-8 odz-text-gray-500">  .</div>'),qE=G('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50"><div class="odz-bg-white odz-rounded-lg odz-shadow-xl odz-max-w-md odz-w-full odz-mx-4"><div class="odz-px-6 odz-py-4 odz-border-b odz-border-gray-200"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-900">  </h3></div> <div class="odz-px-6 odz-py-4"><p class="odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-gray-900"> </span>() ?</p> <p class="odz-text-xs odz-text-gray-500 odz-mt-2">    .</p></div> <div class="odz-px-6 odz-py-4 odz-border-t odz-border-gray-200 odz-flex odz-gap-3 odz-justify-end"><button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-gray-700 odz-bg-white odz-border odz-border-gray-300 odz-rounded-lg hover:odz-bg-gray-50 odz-transition-colors"></button> <button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-white odz-bg-red-500 odz-rounded-lg hover:odz-bg-red-600 odz-transition-colors"></button></div></div></div>'),KE=G('<div class="odz-flex odz-flex-col odz-gap-4"><!></div> <!>',1);function M5(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t);let s=gt(e,"onSelectProduct",8),i=gt(e,"onDeleteProduct",8,void 0),a=gt(e,"isEditable",8,!1),A=ze(!1),d=null,c=ze("");function u(j){return j.title?j.title:!j.option_values||!Array.isArray(j.option_values)?j.id||"":j.option_values.map(D=>{var ne;return((ne=D.option_value)==null?void 0:ne.value)||""}).join(" / ")}function h(j){const D=[];return j.parentTemplates&&D.push(j.parentTemplates.map(ne=>ne.name).join(" > ")),j.colors&&D.push(`${j.colors.length}`),D.join(" - ")}function p(j){var D,ne;d=j,y(c,((ne=(D=o().products[j])==null?void 0:D.product)==null?void 0:ne.title)||" "),y(A,!0)}async function v(){if(d===null)return;const j=d;y(A,!1),d=null,y(c,""),i()?await i()(j):nr(wt,ct(o).products=o().products.filter((D,ne)=>ne!==j),ct(o))}function w(){y(A,!1),d=null,y(c,"")}cn();var b=KE(),x=lt(b),S=g(x);{var I=j=>{var D=Tt(),ne=lt(D);sr(ne,1,()=>o().products,vr,(xe,L,q)=>{var V=jE(),se=g(V),ve=g(se),ie=g(ve),ge=g(ie),re=B(ge,2);{var ue=K=>{var R=IE(),de=g(R),Be=B(de,2);it("click",de,()=>s()(q)),it("click",Be,()=>p(q)),U(K,R)};be(re,K=>{a()&&K(ue)})}var Z=B(ie,2),_e=g(Z),z=g(_e),E=B(_e,2);sr(E,5,()=>l(L).variants,vr,(K,R)=>{var de=QE(),Be=g(de);{var Pe=he=>{var we=UE();De(ye=>{cr(we,"src",l(R).thumbnail),cr(we,"alt",ye)},[()=>u(l(R))],At),U(he,we)};be(Be,he=>{l(R).thumbnail&&he(Pe)})}var He=B(Be,2),W=g(He),H=g(W),te=B(W,2),Ae=g(te);De(he=>{Qe(H,he),Qe(Ae,`${l(R).quantity??""}`)},[()=>u(l(R))],At),U(K,de)});var F=B(E,2);{var Q=K=>{var R=LE();sr(R,5,()=>l(L).prints,vr,(de,Be)=>{var Pe=TE(),He=g(Pe),W=g(He),H=B(He,2),te=g(H);De(Ae=>{Qe(W,l(Be).title),Qe(te,Ae)},[()=>h(l(Be))],At),U(de,Pe)}),U(K,R)};be(F,K=>{l(L).prints&&l(L).prints.length>0&&K(Q)})}var M=B(F,2);{var k=K=>{var R=OE(),de=B(g(R),2);sr(de,1,()=>Object.entries(l(L).addons),vr,(Be,Pe)=>{let He=()=>l(Pe)[1];var W=Tt();const H=At(()=>l(L).addonProductsMap[He().productId]);var te=lt(W);{var Ae=he=>{var we=kE();const ye=At(()=>l(H).variants.find(Me=>Me.id===He().variantId));var Ie=g(we),le=g(Ie),Te=B(Ie,2);{var Fe=Me=>{var Ne=PE(),fe=lt(Ne),J=g(fe),Se=B(fe,2),$=g(Se);De(Ce=>{Qe(J,`- ${l(ye).title||" "}`),Qe($,` ${Ce??""}`)},[()=>Er(l(ye).prices[0].amount)],At),U(Me,Ne)};be(Te,Me=>{l(ye)&&Me(Fe)})}De(()=>Qe(le,l(H).title)),U(he,we)};be(te,he=>{l(H)&&he(Ae)})}U(Be,W)}),U(K,R)};be(M,K=>{l(L).addons&&Object.keys(l(L).addons).length>0&&l(L).addonProductsMap&&K(k)})}var O=B(M,2);sr(O,5,()=>[l(L)],vr,(K,R)=>{var de=HE();const Be=At(()=>l(R).productAmount||(l(R).variants||[]).reduce((Ee,Oe)=>Ee+Oe.prices[0].amount*Oe.quantity,0)),Pe=At(()=>l(R).printAmount||(l(R).prints||[]).reduce((Ee,Oe)=>Ee+(Oe.price||0),0)),He=At(()=>l(R).addonAmount||0),W=At(()=>l(R).totalAmount||l(Be)+l(Pe)+l(He)),H=At(()=>l(R).prints&&l(R).prints.length>0),te=At(()=>l(R).simplePrints&&l(R).simplePrints.length>0),Ae=At(()=>l(R).print_type==="simple"&&l(te)||l(te)&&!l(H)),he=At(()=>!l(H)&&!l(te));var we=lt(de),ye=g(we),Ie=B(g(ye),2),le=g(Ie),Te=B(ye,2),Fe=B(g(Te),2);{var Me=Ee=>{var Oe=DE();U(Ee,Oe)},Ne=Ee=>{var Oe=NE(),je=g(Oe);De(ke=>Qe(je,`${ke??""}`),[()=>Er(l(Pe))],At),U(Ee,Oe)};be(Fe,Ee=>{l(Ae)||l(he)?Ee(Me):Ee(Ne,!1)})}var fe=B(Te,2);{var J=Ee=>{var Oe=ME(),je=B(g(Oe),2),ke=g(je);De(pe=>Qe(ke,`${pe??""}`),[()=>Er(l(He))],At),U(Ee,Oe)};be(fe,Ee=>{l(He)>0&&Ee(J)})}var Se=B(we,2),$=B(g(Se),2),Ce=g($);De((Ee,Oe)=>{Qe(le,`${Ee??""}`),Qe(Ce,`${Oe??""}`)},[()=>Er(l(Be)),()=>Er(l(W))],At),U(K,de)}),De(()=>{cr(ge,"src",l(L).product.thumbnail),cr(ge,"alt",l(L).product.title),Qe(z,l(L).product.title)}),U(xe,V)}),U(j,D)},P=j=>{var D=RE();U(j,D)};be(S,j=>{o().products&&o().products.length>0?j(I):j(P,!1)})}var N=B(x,2);{var ee=j=>{var D=qE(),ne=g(D),xe=B(g(ne),2),L=g(xe),q=g(L),V=g(q),se=B(xe,2),ve=g(se),ie=B(ve,2);De(()=>Qe(V,l(c))),it("click",ve,w),it("click",ie,v),U(j,D)};be(N,j=>{l(A)&&j(ee)})}U(n,b),An(),r()}var $E=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><form method="dialog"><button class="odz-btn"></button></form></div></div></dialog>');function Tc(n,e){an(e,!1);let t=gt(e,"isOpen",12),r=gt(e,"message",12),o=gt(e,"title",8,""),s=gt(e,"onClose",8,void 0);function i(){t(!1),r(""),s()&&s()()}cn();var a=Tt(),A=lt(a);{var d=c=>{var u=$E(),h=g(u),p=g(h),v=g(p),w=B(p,2),b=g(w),x=B(w,2),S=g(x),I=g(S);De(()=>{Qe(v,o()),Qe(b,r())}),it("click",I,i),U(c,u)};be(A,c=>{t()&&c(d)})}U(n,a),An()}var VE=G('<div class="odz-fixed odz-inset-0 odz-bg-base-100 odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-rounded-lg odz-p-8 odz-flex odz-flex-col odz-items-center odz-gap-4"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></span> <p class="odz-text-base-content odz-font-medium"> </p></div></div>');function Lc(n,e){let t=gt(e,"isLoading",8,!1),r=gt(e,"message",8,"...");var o=Tt(),s=lt(o);{var i=a=>{var A=VE(),d=g(A),c=B(g(d),2),u=g(c);De(()=>Qe(u,r())),U(a,A)};be(s,a=>{t()&&a(i)})}U(n,o)}var GE=G("<span> <span></span></span>"),WE=G('<div class="odz-flex odz-items-center odz-gap-2 odz-w-full odz-justify-center"><!> <span> <span></span></span> <!></div>');function H5(n,e){an(e,!1);const t=ze();let r=gt(e,"originalPrice",8),o=gt(e,"finalPrice",8),s=gt(e,"hasDiscount",8,!1),i=gt(e,"size",8,"md"),a=gt(e,"showOriginal",8,!0);Zt(()=>no(i()),()=>{y(t,{sm:{original:"odz-text-sm",final:"odz-text-sm odz-font-semibold",currency:"odz-text-xs"},md:{original:"odz-text-base",final:"odz-text-lg odz-font-bold",currency:"odz-text-sm"},lg:{original:"odz-text-lg",final:"odz-text-xl odz-font-bold",currency:"odz-text-base"}}[i()])}),Fo(),cn();var A=WE(),d=g(A);{var c=b=>{var x=GE(),S=g(x),I=B(S);De(P=>{Pr(x,`odz-text-gray-500 odz-line-through ${l(t).original??""}`),Qe(S,P),Pr(I,x0(l(t).currency))},[()=>r().toLocaleString()],At),U(b,x)};be(d,b=>{s()&&a()&&r()!==o()&&b(c)})}var u=B(d,2),h=g(u),p=B(h),v=B(u,2);{var w=b=>{var x=Tt();const S=At(()=>Math.round((r()-o())/r()*100));var I=lt(x);{var P=N=>{};be(I,N=>{l(S)>0&&N(P)})}U(b,x)};be(v,b=>{s()&&r()!==o()&&b(w)})}De(b=>{Pr(u,`odz-text-gray-900 ${l(t).final??""}`),Qe(h,b),Pr(p,x0(l(t).currency))},[()=>o().toLocaleString()],At),U(n,A),An()}var XE=G('<img class="odz-w-8 odz-h-8 odz-object-cover odz-mb-1">'),YE=G('<span class="odz-ml-1"></span>'),JE=G('<span class="odz-ml-1"></span>'),ZE=G("<button><!> <span> </span> <!></button>"),eF=G('<div class="odz-flex odz-flex-col odz-gap-2 mb-4"><h3 class="odz-font-bold odz-text-sm"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),tF=G('<img class="odz-w-10 odz-h-10 odz-rounded odz-object-cover">'),rF=G('<!> <div class="odz-inline-flex odz-items-center odz-justify-center odz-w-5 odz-h-5 odz-bg-red-500 odz-text-white odz-rounded-full odz-text-xs odz-font-bold odz-flex-shrink-0" title=" ">%</div>',1),nF=G('<span class="odz-text-xs"> </span>'),oF=G('<div class="odz-flex odz-flex-col odz-border odz-rounded odz-overflow-hidden"><div class="odz-bg-gray-50 odz-px-3 odz-py-2 odz-border-b"><span class="odz-text-xs odz-font-medium odz-text-center odz-block"> </span></div> <div class="odz-flex odz-flex-col odz-p-3 odz-gap-2"><div class="odz-text-center"><div class="odz-flex odz-items-center odz-justify-center odz-gap-1"><!></div></div> <div class="odz-flex odz-items-center odz-border odz-rounded odz-mt-1"><button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">-</button> <input type="number" class="odz-input odz-input-sm odz-w-full odz-text-center odz-border-x-0 odz-border-y focus:odz-outline-none focus:odz-ring-0 focus:odz-border-x-0 focus:odz-border-y" min="0"> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">+</button></div></div></div>'),sF=G('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),iF=G(`<p class="odz-text-sm odz-text-gray-500">    ( )
                                .</p>`),aF=G('<div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-bg-gray-100 odz-p-2 odz-rounded"><!> <h3 class="odz-font-semibold odz-text-base"> </h3></div> <!></div>'),AF=G('<div class="odz-flex odz-flex-col odz-gap-6 mt-4"></div>'),lF=G('<img class="odz-w-16 odz-h-16 odz-object-cover odz-rounded">'),dF=G('<p class="odz-text-sm odz-text-gray-600 odz-mt-1"> </p>'),cF=G('<div class="odz-text-sm odz-font-semibold odz-text-primary"> </div>'),uF=G('<div role="button" tabindex="0"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><input type="radio" class="odz-radio odz-radio-primary odz-radio-sm"> <span class="odz-text-sm odz-font-medium"> </span></div> <!></div>'),hF=G('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 odz-gap-3"></div>'),fF=G('<div class="odz-border odz-rounded-lg odz-p-4 odz-bg-base-100"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-3"><!> <div><h5 class="odz-font-medium odz-text-base"> </h5> <!></div></div> <!></div>'),pF=G('<div class="odz-flex odz-flex-col odz-gap-4"><h4 class="odz-font-semibold odz-text-base odz-text-gray-700"> </h4> <!></div>'),gF=G('<div class="odz-flex odz-flex-col odz-gap-6 odz-mt-8"><h3 class="odz-font-bold odz-text-lg odz-border-b odz-pb-2"> </h3> <!></div>'),vF=G('<div class="odz-flex odz-justify-end odz-mt-6"><button class="odz-btn odz-btn-accent odz-w-full"></button></div>'),mF=G('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <div class="odz-card-actions odz-justify-end"></div></div></div> <!> <!> <!> <!>',1),wF=G('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!> <!>',1);function bF(n,e){var _e;an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=()=>on(ni,"$shopStore",t);let i=gt(e,"step",12,0),a=gt(e,"productId",8),A=ze(null),d=ze(!1),c=ze(""),u=ze(""),h=ze(!1),p=ze([]),v=ze({}),w=ze({}),b=ze(((_e=o().products[o().index])==null?void 0:_e.variants.map(z=>({...z})))||[]),x=ze({}),S=null,I=ze({}),P=ze([]),N=ze({});function ee(z,E){console.log(" togglePenultimateSelection :",{optionId:z,value:E,penultimateOptionId:S}),!S&&l(A)&&l(A).options.length>=2&&(S=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",S)),z!==S&&console.log(" optionId :",{optionId:z,penultimateOptionId:S}),zr(x,l(x)[z]=E),y(x,{...l(x)});const F=l(P).indexOf(E);if(console.log("  expandedPenultimateValues:",l(P),"index:",F),F===-1)if(y(P,[...l(P),E]),console.log("    expandedPenultimateValues:",l(P)),!l(N)[E]||l(N)[E].length===0){console.log(" variants  :",{value:E,optionId:z,penultimateOptionId:S});const Q=l(A).variants.filter(M=>M.option_values?M.option_values.some(O=>{if(O.option_id&&O.value){const K=O.option_id===z&&O.value===E;return K&&console.log("   :",{variantId:M.id,ov:O}),K}else if(O.option_value&&O.option_value.option_id){const K=O.option_value.option_id===z&&O.option_value.value===E;return K&&console.log("   :",{variantId:M.id,ov:O}),K}return!1}):(console.log(" variant.option_values :",M.id),!1));console.log("  variants:",{value:E,count:Q.length,variants:Q.map(M=>({id:M.id,title:M.title}))}),zr(N,l(N)[E]=Q),y(N,{...l(N)}),Q.forEach(M=>{l(b).some(k=>k.id===M.id)||y(b,[...l(b),{...M,quantity:0}])})}else console.log("  variants :",{value:E,count:l(N)[E].length});else y(P,l(P).filter(Q=>Q!==E)),console.log("    expandedPenultimateValues:",l(P));y(P,[...l(P)]),y(N,{...l(N)}),console.log(" togglePenultimateSelection :",{expandedPenultimateValues:l(P),variantsByGroup:Object.keys(l(N)),hasExpanded:l(P).length>0}),setTimeout(()=>{console.log(" 1   :",{expandedPenultimateValues:l(P).length,variantsByGroupKeys:Object.keys(l(N))})},1e3)}function j(z,E){var Q;const F=((Q=l(A))==null?void 0:Q.options.findIndex(M=>M.id===z))??-1;if(!(!l(A)||F===-1||F>=l(A).options.length-1)){for(let M=F+1;M<l(A).options.length;M++)delete l(x)[l(A).options[M].id];zr(x,l(x)[z]=E),y(x,{...l(x)}),y(P,[]),y(N,{}),S&&y(b,l(b).filter(M=>!M.option_values.some(k=>k.option_value.option_id===S)||(M.quantity||0)>0))}}function D(z){y(b,l(b).map(E=>E.id===z?{...E,quantity:(E.quantity||0)+1}:E))}function ne(z){y(b,l(b).map(E=>E.id===z&&(E.quantity||0)>0?{...E,quantity:(E.quantity||0)-1}:E))}function xe(){const z=l(b).filter(F=>(F.quantity||0)>0);if(z.length===0){y(d,!0),y(c," "),y(u,"1    .");return}const E=o().products[o().index];E&&(nr(wt,ct(o).products[o().index]={...E,variants:z,quantity:z.reduce((F,Q)=>F+(Q.quantity||0),0)},ct(o)),wt.updateTotalAmounts()),i(2)}async function L(){var Q,M;if(!((Q=l(A))!=null&&Q.quantity_discounts)){y(I,{});return}const z=l(b).reduce((k,O)=>k+(O.quantity||0),0);let E=null;if(z>0){const k=((M=l(b).find(O=>(O.quantity||0)>0))==null?void 0:M.prices[0].amount)||0;E=ia(z,k,l(A).quantity_discounts)}const F={};for(const k of l(b))(k.quantity||0)>0&&(E!=null&&E.hasDiscount)&&(F[k.id]=E);y(I,F)}let q=ze(null);Zn(async()=>{var z;y(h,!0);try{if(y(A,await dh(a(),s().id)),l(A)&&(y(p,await ch(l(A).id)),y(w,{}),l(p).forEach(E=>{E.items.forEach(F=>{F.addon_product.variants&&F.addon_product.variants.length>0&&zr(w,l(w)[F.addon_product.id]={price:F.addon_product.variants[0].prices[0].amount,title:F.addon_product.title,variants:F.addon_product.variants})})}),(z=o().products[o().index])!=null&&z.addons)){const E=o().products[o().index].addons;y(v,{}),Object.entries(E).forEach(([F,Q])=>{typeof Q=="object"&&Q.productId&&Q.variantId?zr(v,l(v)[F]={productId:Q.productId,variantId:Q.variantId}):typeof Q=="string"&&zr(v,l(v)[F]={productId:Q,variantId:""})}),y(v,{...l(v)})}if(l(A)&&l(A).options.length>0&&(l(A).options.length>=2?(S=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",{penultimateOptionId:S,optionCount:l(A).options.length,allOptions:l(A).options.map(E=>({id:E.id,title:E.title}))})):console.log("  2 :",l(A).options.length)),o().products[o().index]&&o().products[o().index].variants.length>0){nr(wt,ct(o).products[o().index].product=l(A),ct(o)),y(b,o().products[o().index].variants.map(F=>({...F})));const E=o().products[o().index].addons||{};if(y(v,{}),Object.entries(E).forEach(([F,Q])=>{typeof Q=="object"&&Q.productId&&Q.variantId?zr(v,l(v)[F]={productId:Q.productId,variantId:Q.variantId}):typeof Q=="string"&&zr(v,l(v)[F]={productId:Q,variantId:""})}),l(A)&&l(A).options.length>0){const F=l(b).filter(Q=>(Q.quantity||0)>0);if(F.length>0){const Q=l(A).options.map(M=>M.id);if(l(A).options.length>=2){S=l(A).options[l(A).options.length-2].id;const M=[];if(F.forEach(k=>{if(k.title){const O=k.title.split(" / ");if(O.length>0){const K=O[0];M.includes(K)||M.push(K)}}k.option_values&&k.option_values.forEach(O=>{O.option_id&&O.value?O.option_id===S&&(M.includes(O.value)||M.push(O.value)):O.option_value&&O.option_value.option_id&&O.option_value.option_id===S&&(M.includes(O.option_value.value)||M.push(O.option_value.value))})}),M.length>0)M.forEach(k=>{ee(S,k)});else{const k=[];F.forEach(O=>{if(O.title){const K=O.title.split(" / ");if(K.length>0){const R=K[0].trim();k.includes(R)||k.push(R)}}}),k.length>0?k.forEach(O=>{const K=l(A).options[l(A).options.length-2].values.find(R=>R.value.toLowerCase()===O.toLowerCase());if(K)ee(S,K.value);else{const R=l(A).options[l(A).options.length-2].values.filter(de=>de.value.toLowerCase().includes(O.toLowerCase())||O.toLowerCase().includes(de.value.toLowerCase()));R.length>0&&R.forEach(de=>{ee(S,de.value)})}}):l(A).options[l(A).options.length-2].values.forEach(O=>{ee(S,O.value)})}}else l(A).options.length}}}else l(A)&&nr(wt,ct(o).products=[...o().products,{product:l(A),variants:[],quantity:0,prints:[],addons:{},addonProductsMap:l(w)}],ct(o));setTimeout(()=>{wt.updateTotalAmounts()},100)}catch(E){console.error("Product component  :",E)}finally{y(h,!1)}});function V(z,E,F){if(!F||F.trim()===""){console.error("Invalid variantId provided:",F);return}zr(v,l(v)[z]={productId:E,variantId:F}),y(v,{...l(v)});const Q=o().products[o().index];Q&&(nr(wt,ct(o).products[o().index]={...Q,addons:l(v),addonProductsMap:l(w)},ct(o)),wt.updateTotalAmounts())}function se(z){return z?z.replace(/<[^>]*>/g,"").trim():""}Zt(()=>(o(),l(v)),()=>{var z;if((z=o().products[o().index])!=null&&z.addons&&Object.keys(o().products[o().index].addons).length>0&&Object.keys(l(v)).length===0){const E=o().products[o().index].addons;Object.entries(E).forEach(([F,Q])=>{typeof Q=="object"&&Q.productId&&Q.variantId&&zr(v,l(v)[F]={productId:Q.productId,variantId:Q.variantId})}),y(v,{...l(v)})}}),Zt(()=>(l(b),l(A),l(q),o(),l(v),l(w),wt),()=>{l(b)&&l(A)&&(l(q)&&clearTimeout(l(q)),y(q,setTimeout(()=>{const z=o().products[o().index];if(z){const E=l(b).reduce((M,k)=>M+(k.quantity||0),0),F=z.quantity||0,Q=l(b).filter(M=>(M.quantity||0)>0);nr(wt,ct(o).products[o().index]={...z,variants:Q,quantity:E,addons:l(v),addonProductsMap:l(w)},ct(o)),L(),E!==F&&z.prints&&z.prints.length>0&&wt.calculatePrintPrice(o().index),wt.updateTotalAmounts()}},100)))}),Fo(),cn();var ve=wF(),ie=lt(ve),ge=g(ie);{var re=z=>{var E=mF(),F=lt(E),Q=g(F),M=g(Q),k=B(Q,2),O=g(k),K=g(O),R=B(F,2);sr(R,1,()=>l(A).options,vr,(te,Ae,he)=>{var we=Tt(),ye=lt(we);{var Ie=le=>{var Te=eF(),Fe=g(Te),Me=g(Fe),Ne=B(Fe,2);sr(Ne,5,()=>l(Ae).values,vr,(fe,J)=>{var Se=ZE();const $=At(()=>he===l(A).options.length-2),Ce=At(()=>l($)&&l(P).includes(l(J).value)),Ee=At(()=>l($)?l(Ce):l(x)[l(Ae).id]===l(J).value);var Oe=g(Se);{var je=rt=>{var Ke=XE();De(()=>{cr(Ke,"src",l(J).image),cr(Ke,"alt",l(J).value)}),U(rt,Ke)};be(Oe,rt=>{l(J).image&&rt(je)})}var ke=B(Oe,2),pe=g(ke),Re=B(ke,2);{var et=rt=>{var Ke=YE();U(rt,Ke)},Je=rt=>{var Ke=Tt(),nt=lt(Ke);{var st=pt=>{var It=JE();U(pt,It)};be(nt,pt=>{l($)&&pt(st)},!0)}U(rt,Ke)};be(Re,rt=>{l($)&&l(Ce)?rt(et):rt(Je,!1)})}De(()=>{Pr(Se,`odz-btn odz-btn-outline odz-h-auto odz-min-h-10 odz-border-gray-300 odz-w-44 odz-p-2 odz-text-xs ${(l(Ee)?"odz-border-2 odz-border-gray-800":"")??""}`),Qe(pe,l(J).value)}),it("click",Se,()=>{var rt;console.log("   :",{optionTitle:l(Ae).title,optionId:l(Ae).id,value:l(J).value,isPenultimateOption:l($),index:he,totalOptions:(rt=l(A))==null?void 0:rt.options.length}),l($)?ee(l(Ae).id,l(J).value):j(l(Ae).id,l(J).value)}),U(fe,Se)}),De(()=>Qe(Me,l(Ae).title)),U(le,Te)};be(ye,le=>{he<l(A).options.length-1&&le(Ie)})}U(te,we)});var de=B(R,2);{var Be=te=>{var Ae=AF();sr(Ae,5,()=>l(P),he=>he,(he,we)=>{var ye=aF();const Ie=At(()=>l(N)[l(we)]||[]),le=At(()=>{var Ce;return(Ce=l(A).options[l(A).options.length-2])==null?void 0:Ce.values.find(Ee=>Ee.value===l(we))});var Te=g(ye),Fe=g(Te);{var Me=Ce=>{var Ee=tF();De(()=>{cr(Ee,"src",l(le).image),cr(Ee,"alt",l(we))}),U(Ce,Ee)};be(Fe,Ce=>{var Ee;(Ee=l(le))!=null&&Ee.image&&Ce(Me)})}var Ne=B(Fe,2),fe=g(Ne),J=B(Te,2);{var Se=Ce=>{var Ee=sF();sr(Ee,5,()=>l(Ie),Oe=>Oe.id,(Oe,je)=>{var ke=oF();const pe=At(()=>l(b).find($e=>$e.id===l(je).id)),Re=At(()=>{var $e;return(($e=l(pe))==null?void 0:$e.quantity)||0}),et=At(()=>{var $e;return(($e=l(je).option_values.find(dt=>dt.option_value.option_id===l(A).options[l(A).options.length-1].id))==null?void 0:$e.option_value.value)||"N/A"}),Je=At(()=>l(I)[l(je).id]);var rt=g(ke),Ke=g(rt),nt=g(Ke),st=B(rt,2),pt=g(st),It=g(pt),Pt=g(It);{var St=$e=>{var dt=rF(),at=lt(dt);H5(at,{get originalPrice(){return l(je).prices[0].amount},get finalPrice(){return l(Je).discountedPrice},hasDiscount:!0,size:"sm"}),U($e,dt)},bt=$e=>{var dt=nF(),at=g(dt);De(Vt=>Qe(at,`${Vt??""}`),[()=>Er(l(je).prices[0].amount)],At),U($e,dt)};be(Pt,$e=>{var dt;(dt=l(Je))!=null&&dt.hasDiscount&&l(Re)>0?$e(St):$e(bt,!1)})}var ft=B(pt,2),jt=g(ft),Lt=B(jt,2),Et=B(Lt,2);De(()=>{Qe(nt,l(et)),jt.disabled=l(Re)<=0,t1(Lt,l(Re))}),it("click",jt,()=>ne(l(je).id)),it("input",Lt,$e=>{const dt=parseInt($e.target.value)||0;y(b,l(b).map(at=>at.id===l(je).id?{...at,quantity:dt>=0?dt:0}:at))}),it("click",Et,()=>D(l(je).id)),U(Oe,ke)}),U(Ce,Ee)},$=Ce=>{var Ee=iF();U(Ce,Ee)};be(J,Ce=>{l(Ie).length>0?Ce(Se):Ce($,!1)})}De(()=>Qe(fe,l(we))),U(he,ye)}),U(te,Ae)};be(de,te=>{l(P).length>0&&te(Be)})}var Pe=B(de,2);{var He=te=>{var Ae=gF(),he=B(g(Ae),2);sr(he,1,()=>l(p),we=>we.id,(we,ye)=>{var Ie=pF(),le=g(Ie),Te=g(le),Fe=B(le,2);sr(Fe,1,()=>l(ye).items,Me=>Me.id,(Me,Ne)=>{var fe=fF(),J=g(fe),Se=g(J);{var $=et=>{var Je=lF();De(()=>{cr(Je,"src",l(Ne).addon_product.thumbnail),cr(Je,"alt",l(Ne).addon_product.title)}),U(et,Je)};be(Se,et=>{l(Ne).addon_product.thumbnail&&et($)})}var Ce=B(Se,2),Ee=g(Ce),Oe=g(Ee),je=B(Ee,2);{var ke=et=>{var Je=dF(),rt=g(Je);De(Ke=>Qe(rt,Ke),[()=>se(l(Ne).addon_product.description)],At),U(et,Je)};be(je,et=>{l(Ne).addon_product.description&&et(ke)})}var pe=B(J,2);{var Re=et=>{var Je=hF();sr(Je,5,()=>l(Ne).addon_product.variants,rt=>rt.id,(rt,Ke)=>{var nt=uF();const st=At(()=>l(v)[l(ye).id]),pt=At(()=>{var Lt,Et;return((Lt=l(st))==null?void 0:Lt.productId)===l(Ne).addon_product.id&&((Et=l(st))==null?void 0:Et.variantId)===l(Ke).id});var It=g(nt),Pt=g(It),St=B(Pt,2),bt=g(St),ft=B(It,2);{var jt=Lt=>{var Et=cF(),$e=g(Et);De(dt=>Qe($e,` ${dt??""}`),[()=>Er(l(Ke).prices[0].amount)],At),U(Lt,Et)};be(ft,Lt=>{l(Ke).prices&&l(Ke).prices.length>0&&Lt(jt)})}De(Lt=>{Pr(nt,`odz-border odz-rounded odz-p-3 odz-cursor-pointer odz-transition-all odz-duration-200 ${(l(pt)?"odz-border-primary odz-bg-primary/5":"odz-border-gray-300 hover:odz-border-gray-400")??""}`),cr(Pt,"name",`addon-${l(ye).id??""}`),ju(Pt,l(pt)),Qe(bt,Lt)},[()=>l(Ke).title||` ${l(Ke).id.substring(0,4)}`],At),it("change",Pt,()=>V(l(ye).id,l(Ne).addon_product.id,l(Ke).id)),it("click",nt,()=>V(l(ye).id,l(Ne).addon_product.id,l(Ke).id)),it("keydown",nt,Lt=>Lt.key==="Enter"&&V(l(ye).id,l(Ne).addon_product.id,l(Ke).id)),U(rt,nt)}),U(et,Je)};be(pe,et=>{l(Ne).addon_product.variants&&l(Ne).addon_product.variants.length>0&&et(Re)})}De(()=>Qe(Oe,l(Ne).addon_product.title)),U(Me,fe)}),De(()=>Qe(Te,l(ye).name)),U(we,Ie)}),U(te,Ae)};be(Pe,te=>{l(p).length>0&&te(He)})}var W=B(Pe,2);{var H=te=>{var Ae=vF(),he=g(Ae);it("click",he,()=>xe()),U(te,Ae)};be(W,te=>{l(b).filter(Ae=>(Ae.quantity||0)>0).length>0&&te(H)})}De(()=>{cr(M,"src",l(A).thumbnail),cr(M,"alt",l(A).title),Qe(K,l(A).title)}),U(z,E)};be(ge,z=>{l(A)&&z(re)})}var ue=B(ie,2);Tc(ue,{get isOpen(){return l(d)},set isOpen(z){y(d,z)},get title(){return l(c)},set title(z){y(c,z)},get message(){return l(u)},set message(z){y(u,z)},$$legacy:!0});var Z=B(ue,2);Lc(Z,{get isLoading(){return l(h)},set isLoading(z){y(h,z)},$$legacy:!0}),U(n,ve),An(),r()}class yF{constructor(e){this.isEnabled=!0,this.sessionId=e}log(e,t,r){if(!this.isEnabled)return;const o=new Date().toISOString();`${this.sessionId}${o}`}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}function _F(n){const e=Date.now().toString(36)+Math.random().toString(36).substr(2);return{productId:n,productSelection:null,printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:e}}function xF(){const{subscribe:n,set:e,update:t}=ld(null);let r=null;return{subscribe:n,set:e,update:t,initialize(o,s,i){const a={..._F(o),estimateId:s,idx:i};r=new yF(a.sessionId),e(a),r.info("Fixed Estimate Store  ",{productId:o,estimateId:s,idx:i,sessionId:a.sessionId})},reset(){r==null||r.info("Fixed Estimate Store "),e(null),r=null},setCurrentStep(o){t(s=>s&&(r==null||r.info(" ",{from:s.currentStep,to:o}),{...s,currentStep:o}))},updateProductSelection(o){t(s=>{if(!s)return s;const i=Date.now(),a=s.productSelection,A={productId:s.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,...a,...o,lastUpdated:i};return r==null||r.info("   ",{productId:s.productId,changes:o,totalQuantity:A.totalQuantity,selectedColors:A.selectedColors.length}),{...s,productSelection:A}})},toggleColorSelection(o,s){t(i=>{var p;if(!i)return i;if(!i.productSelection){const v={productId:i.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,lastUpdated:Date.now()};i={...i,productSelection:v}}const a=[...i.productSelection.selectedColors],A={...i.productSelection.quantityByVariant},d={...i.productSelection.variantsByColor},c=a.indexOf(o);c===-1?(a.push(o),d[o]=s[o]||[],A[o]=A[o]||{},r==null||r.info("  ",{color:o,totalColors:a.length,variantCount:((p=s[o])==null?void 0:p.length)||0})):(a.splice(c,1),delete d[o],delete A[o],r==null||r.info("  ",{color:o,remainingColors:a.length}));const u=Object.values(A).reduce((v,w)=>v+Object.values(w).reduce((b,x)=>b+x,0),0);return{...i,productSelection:{...i.productSelection,selectedColors:a,quantityByVariant:A,variantsByColor:d,totalQuantity:u,lastUpdated:Date.now()}}})},updateQuantity(o,s,i){t(a=>{if(!a||!a.productSelection)return a;const A={...a.productSelection.quantityByVariant};A[o]||(A[o]={});const d=A[o][s]||0;A[o][s]=Math.max(0,i);const c=Object.values(A).reduce((u,h)=>u+Object.values(h).reduce((p,v)=>p+v,0),0);return r==null||r.info(" ",{color:o,variantId:s,oldQuantity:d,newQuantity:A[o][s],totalQuantity:c,triggerDiscountUpdate:!0}),{...a,productSelection:{...a.productSelection,quantityByVariant:A,totalQuantity:c,lastUpdated:Date.now(),needsDiscountRecalculation:!0}}})},updateVariantDiscounts(o){t(s=>{if(!s||!s.productSelection)return s;const i=s.productSelection.variantDiscounts||{},a=Object.keys(i).sort(),A=Object.keys(o).sort();return JSON.stringify(a)!==JSON.stringify(A)||Object.keys(o).some(c=>JSON.stringify(i[c])!==JSON.stringify(o[c]))?(r==null||r.info("  ",{productId:s.productId,discountCount:Object.keys(o).length,changedVariants:Object.keys(o)}),{...s,productSelection:{...s.productSelection,variantDiscounts:{...o},needsDiscountRecalculation:!1,lastUpdated:Date.now()}}):s})},completeProductSelection(){t(o=>!o||!o.productSelection?o:(r==null||r.info("  ",{totalQuantity:o.productSelection.totalQuantity,selectedColors:o.productSelection.selectedColors.length}),{...o,productSelection:{...o.productSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"print"}))},updatePrintSelection(o){t(s=>{if(!s)return s;const i=Date.now(),a=s.printSelection,A={productId:s.productId,currentMethod:"selection",isCompleted:!1,...a,...o,lastUpdated:i};return r==null||r.info("   ",{productId:s.productId,changes:o,currentMethod:A.currentMethod}),{...s,printSelection:A}})},selectPrintMethod(o){t(s=>{if(!s)return s;r==null||r.info("  ",{method:o,productId:s.productId});const i={...s.printSelection,productId:s.productId,currentMethod:o,isCompleted:!1,lastUpdated:Date.now()};return{...s,printSelection:i}})},completePrintSelection(){t(o=>!o||!o.printSelection?o:(r==null||r.info("  ",{method:o.printSelection.currentMethod}),{...o,printSelection:{...o.printSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"addon"}))},updateAddonSelection(o){t(s=>{if(!s)return s;const i=Date.now(),a=s.addonSelection,A={productId:s.productId,selectedAddons:{},isCompleted:!1,...a,...o,lastUpdated:i};return r==null||r.info("   ",{productId:s.productId,changes:o,addonCount:Object.keys(A.selectedAddons).length}),{...s,addonSelection:A}})},toggleAddonSelection(o,s,i){t(a=>{var u,h,p;if(!a)return a;const A={...((u=a.addonSelection)==null?void 0:u.selectedAddons)||{}};((h=A[o])==null?void 0:h.productId)===s&&((p=A[o])==null?void 0:p.variantId)===i?(delete A[o],r==null||r.info("  ",{addonId:o,productId:s,variantId:i,remainingAddons:Object.keys(A).length})):(A[o]={productId:s,variantId:i},r==null||r.info(" ",{addonId:o,productId:s,variantId:i,totalAddons:Object.keys(A).length}));const c={...a.addonSelection??{productId:a.productId,selectedAddons:{},isCompleted:!1,lastUpdated:Date.now()},productId:a.productId,selectedAddons:A,isCompleted:!1,lastUpdated:Date.now()};return{...a,addonSelection:c}})},completeAddonSelection(){t(o=>{var i;if(!o)return o;const s=Object.keys(((i=o.addonSelection)==null?void 0:i.selectedAddons)||{}).length;return r==null||r.info("  ",{addonCount:s}),{...o,addonSelection:{...o.addonSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"additional"}})},updateAdditionalInfo(o){t(s=>{if(!s)return s;const i=Date.now(),A={customerName:"",customerPhone:"",customerEmail:"",organizationName:"",postcode:"",address1:"",address2:"",shippingMethod:"standard",prefDeliveryDate:"",comment:"",designRequirement:"",isCompleted:!1,...s.additionalInfo,...o,lastUpdated:i};return r==null||r.info("  ",{changes:o,hasCustomerInfo:!!(A.customerName&&A.customerPhone),hasAddressInfo:!!A.address1}),{...s,additionalInfo:A}})},completeAdditionalInfo(){t(o=>!o||!o.additionalInfo?o:(r==null||r.info("  ",{customerName:o.additionalInfo.customerName,hasAddress:!!o.additionalInfo.address1}),{...o,additionalInfo:{...o.additionalInfo,isCompleted:!0,lastUpdated:Date.now()}}))},toggleDebugMode(){t(o=>{if(!o)return o;const s=!o.isDebugMode;return r&&(s?(r.enable(),r.info("  ")):(r.info("  "),r.disable())),{...o,isDebugMode:s}})},getSelectionSummary(){var i,a,A,d,c,u,h,p,v,w;const o=Ur({subscribe:n});if(!o)return null;const s={productId:o.productId,sessionId:o.sessionId,currentStep:o.currentStep,completedSteps:{product:((i=o.productSelection)==null?void 0:i.isCompleted)||!1,print:((a=o.printSelection)==null?void 0:a.isCompleted)||!1,addon:((A=o.addonSelection)==null?void 0:A.isCompleted)||!1,additional:((d=o.additionalInfo)==null?void 0:d.isCompleted)||!1},statistics:{totalQuantity:((c=o.productSelection)==null?void 0:c.totalQuantity)||0,selectedColors:((u=o.productSelection)==null?void 0:u.selectedColors.length)||0,printMethod:((h=o.printSelection)==null?void 0:h.currentMethod)||"none",addonCount:Object.keys(((p=o.addonSelection)==null?void 0:p.selectedAddons)||{}).length,hasCustomerInfo:!!((v=o.additionalInfo)!=null&&v.customerName&&((w=o.additionalInfo)!=null&&w.customerPhone))}};return r==null||r.info("  ",s),s},toEstimateStoreFormat(){const o=Ur({subscribe:n});if(!o)return null;r==null||r.info("EstimateStore   ");const s={productSelection:o.productSelection,printSelection:o.printSelection,addonSelection:o.addonSelection,additionalInfo:o.additionalInfo,metadata:{sessionId:o.sessionId,lastUpdated:Date.now()}};return r==null||r.info("EstimateStore   ",{hasProductSelection:!!o.productSelection,hasPrintSelection:!!o.printSelection,hasAddonSelection:!!o.addonSelection,hasAdditionalInfo:!!o.additionalInfo}),s},toDBFormat(o){const s=Ur({subscribe:n});if(!s)return null;try{const{FixedEstimateDBConverter:i}=require("../types/fixedEstimateTypes"),a=o||`EST_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r==null||r.info("DB   ",{estimateId:a});const A=i.toDBFormat(s,a);return r==null||r.info("DB   ",{estimateId:a,hasProductSelection:!!A.productSelection,hasPrintSelection:!!A.printSelection,addonSelectionsCount:A.addonSelections.length,hasAdditionalInfo:!!A.additionalInfo}),A}catch(i){return r==null||r.error("DB   ",i),null}},fromDBFormat(o){try{const{FixedEstimateDBConverter:s}=require("../types/fixedEstimateTypes");r==null||r.info("DB    ");const i=s.fromDBFormat(o);return e(i),r==null||r.info("DB   ",{productId:i.productId,sessionId:i.sessionId,currentStep:i.currentStep}),!0}catch(s){return r==null||r.error("DB   ",s),!1}},validate(){const o=Ur({subscribe:n});if(!o)return{isValid:!1,errors:["Store  ."]};try{const{FixedEstimateDBConverter:s}=require("../types/fixedEstimateTypes"),i=s.validateForDB(o);return r==null||r.info("  ",{isValid:i.isValid,errorCount:i.errors.length}),i.isValid||r==null||r.warn("  ",{errors:i.errors}),i}catch(s){return r==null||r.error("  ",s),{isValid:!1,errors:["    ."]}}},backup(){const o=Ur({subscribe:n});if(!o)return null;const s={...o,backupTimestamp:Date.now()};return r==null||r.info("  ",{sessionId:o.sessionId,backupTimestamp:s.backupTimestamp}),s},restore(o){if(!o||!o.sessionId)return r==null||r.error("  "),!1;try{const{backupTimestamp:s,...i}=o;return e(i),r==null||r.info("    ",{sessionId:i.sessionId,backupTimestamp:s}),!0}catch(s){return r==null||r.error("  ",s),!1}}}}const pr=xF();async function j5(n,e){const{data:t,error:r}=await vt.from("products").select("process:processes( id, shop_id, name, description, image_url, created_at, updated_at, canvas_json)").eq("id",n).eq("shop",e).single();if(r)throw r;return t!=null&&t.process?t.process:null}async function R5(n){const{data:e,error:t}=await vt.from("process_print_areas").select("*").eq("process_id",n);if(t)throw t;return e||[]}function Xe(n,e,t){return(e=function(r){var o=function(s,i){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var A=a.call(s,i);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}(r,"string");return typeof o=="symbol"?o:o+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Ye(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cw(Object(t),!0).forEach(function(r){Xe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oo(n,e){if(n==null)return{};var t,r,o=function(i,a){if(i==null)return{};var A={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(a.indexOf(d)>=0)continue;A[d]=i[d]}return A}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function wl(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let Sw=class{constructor(){Xe(this,"browserShadowBlurConstant",1),Xe(this,"DPI",96),Xe(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Xe(this,"perfLimitSizeTotal",2097152),Xe(this,"maxCacheSideLimit",4096),Xe(this,"minCacheSideLimit",256),Xe(this,"disableStyleCopyPaste",!1),Xe(this,"enableGLFiltering",!0),Xe(this,"textureSize",4096),Xe(this,"forceGLPutImageData",!1),Xe(this,"cachesBoundsOfCurve",!1),Xe(this,"fontPaths",{}),Xe(this,"NUM_FRACTION_DIGITS",4)}};const fn=new class extends Sw{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Ye(Ye({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Sw,t=(n==null?void 0:n.reduce((r,o)=>(r[o]=e[o],r),{}))||e;this.configure(t)}},fl=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Qa=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},BF=class extends Qa{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},zF=class{},CF=class extends zF{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),o=e.createShader(e.FRAGMENT_SHADER);return!!o&&(e.shaderSource(o,r),e.compileShader(o),!!e.getShaderParameter(o,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),fl("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const SF={};let Ew;const Ha=()=>Ew||(Ew={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new CF,dispose(){},copyPasteData:SF}),Pc=()=>Ha().document,_1=()=>Ha().window,q5=()=>{var n;return Math.max((n=fn.devicePixelRatio)!==null&&n!==void 0?n:_1().devicePixelRatio,1)},Cu=new class{constructor(){Xe(this,"charWidthsCache",{}),Xe(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return o[s]||(o[s]={}),o[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=fn,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},D0="6.5.4";function Jf(){}const hh=Math.PI/2,Bp=2*Math.PI,x1=Math.PI/180,js=Object.freeze([1,0,0,1,0,0]),B1=16,KA=.4477152502,Kr="center",Bn="left",Js="top",N0="bottom",Bo="right",Zs="none",z1=/\r?\n/,K5="moving",fg="scaling",$5="rotating",C1="rotate",V5="skewing",Wu="resizing",EF="modifyPoly",FF="modifyPath",zp="changed",pg="scale",oi="scaleX",Hi="scaleY",kc="skewX",Oc="skewY",Ro="fill",ei="stroke",Cp="modified",kd="json",bv="svg",Ar=new class{constructor(){this[kd]=new Map,this[bv]=new Map}has(n){return this[kd].has(n)}getClass(n){const e=this[kd].get(n);if(!e)throw new Qa("No class registered for ".concat(n));return e}setClass(n,e){e?this[kd].set(e,n):(this[kd].set(n.type,n),this[kd].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[bv].get(n)}setSVGClass(n,e){this[bv].set(e??n.type.toLowerCase(),n)}},Sp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let IF=class{constructor(){Xe(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[o,s]=r;this.on(o,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(o=>{let[s,i]=o;r.push(this.once(s,i))}),()=>r.forEach(o=>o())}if(t){const r=this.on(e,function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[o,s]=r;this._removeEventListener(o,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const o=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(o)for(let s=0;s<o.length;s++)o[s].call(this,t||{})}};const Vd=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},BA=n=>{if(n===0)return 1;switch(Math.abs(n)/hh){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},zA=n=>{if(n===0)return 0;const e=n/hh,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let zt=class Ts{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Ts(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Ts(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Ts(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Ts(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Ts(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Ts(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Ts(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Ts(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Ts(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Ts(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Ts(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Ts(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const r=zA(e),o=BA(e),s=this.subtract(t);return new Ts(s.x*o-s.y*r,s.x*r+s.y*o).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Ts(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const S1=new zt(0,0),Zf=n=>!!n&&Array.isArray(n._objects);function G5(n){class e extends n{constructor(){super(...arguments),Xe(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const i=this._objects.push(...o);return o.forEach(a=>this._onObjectAdded(a)),i}insertAt(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,o=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.forEach(A=>{const d=r.indexOf(A);d!==-1&&(r.splice(d,1),o.push(A),this._onObjectRemoved(A))}),o}forEachObject(r){this.getObjects().forEach((o,s,i)=>r(o,s,i))}getObjects(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length===0?[...this._objects]:this._objects.filter(i=>i.isType(...o))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,o){return!!this._objects.includes(r)||!!o&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,o)=>r+=o.complexity?o.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Vd(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Vd(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const i=this.findNewLowerIndex(r,s,o);return Vd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const i=this.findNewUpperIndex(r,s,o);return Vd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,o){return r!==this._objects[o]&&(Vd(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,o,s){let i;if(s){i=o;for(let a=o-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o-1;return i}findNewUpperIndex(r,o,s){let i;if(s){i=o;for(let a=o+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o+1;return i}collectObjects(r){let{left:o,top:s,width:i,height:a}=r,{includeIntersecting:A=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],c=new zt(o,s),u=c.add(new zt(i,a));for(let h=this._objects.length-1;h>=0;h--){const p=this._objects[h];p.selectable&&p.visible&&(A&&p.intersectsWithRect(c,u)||p.isContainedWithinRect(c,u)||A&&p.containsPoint(c)||A&&p.containsPoint(u))&&d.push(p)}return d}}return e}let W5=class extends IF{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function ep(n){return _1().requestAnimationFrame(n)}function UF(n){return _1().cancelAnimationFrame(n)}let QF=0;const pl=()=>QF++,la=()=>{const n=Pc().createElement("canvas");if(!n||n.getContext===void 0)throw new Qa("Failed to create `canvas` element");return n},TF=()=>Pc().createElement("img"),ja=n=>{const e=la();return e.width=n.width,e.height=n.height,e},X5=(n,e,t)=>n.toDataURL("image/".concat(e),t),Eo=n=>n*x1,od=n=>n/x1,LF=n=>n.every((e,t)=>e===js[t]),Xs=(n,e,t)=>new zt(n).transform(e,t),sa=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:o}=new zt(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-o,t},cs=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],E1=(n,e)=>n.reduceRight((t,r)=>r&&t?cs(r,t,e):r||t,void 0)||js.concat(),Y5=n=>{let[e,t]=n;return Math.atan2(t,e)},Ep=n=>{const e=Y5(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),o=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:od(e),scaleX:r,scaleY:o,skewX:od(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},fh=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function ph(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Eo(n),o=BA(r),s=zA(r);return[o,s,-s,o,e?e-(o*e-s*t):0,t?t-(s*e+o*t):0]}const F1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},J5=n=>Math.tan(Eo(n)),Z5=n=>[1,0,J5(n),1,0,0],ex=n=>[1,J5(n),0,1,0,0],gg=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:o=!1,skewX:s=0,skewY:i=0}=n,a=F1(r?-e:e,o?-t:t);return s&&(a=cs(a,Z5(s),!0)),i&&(a=cs(a,ex(i),!0)),a},PF=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let o=fh(e,t);r&&(o=cs(o,ph({angle:r})));const s=gg(n);return LF(s)||(o=cs(o,s)),o},tp=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,o){if(e&&e.aborted)return o(new BF("loadImage"));const s=TF();let i;e&&(i=function(A){s.src="",o(A)},e.addEventListener("abort",i,{once:!0}));const a=function(){s.onload=s.onerror=null,i&&(e==null||e.removeEventListener("abort",i)),r(s)};n?(s.onload=a,s.onerror=function(){i&&(e==null||e.removeEventListener("abort",i)),o(new Qa("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},Xu=function(n){let{signal:e,reviver:t=Jf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,o)=>{const s=[];e&&e.addEventListener("abort",o,{once:!0}),Promise.all(n.map(i=>Ar.getClass(i.type).fromObject(i,{signal:e}).then(a=>(t(i,a),s.push(a),a)))).then(r).catch(i=>{s.forEach(a=>{a.dispose&&a.dispose()}),o(i)}).finally(()=>{e&&e.removeEventListener("abort",o)})})},vg=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&Ar.has(a.type)?Xu([a],{signal:e}).then(A=>{let[d]=A;return o.push(d),d}):a),i=Object.keys(n);Promise.all(s).then(a=>a.reduce((A,d,c)=>(A[i[c]]=d,A),{})).then(t).catch(a=>{o.forEach(A=>{A.dispose&&A.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Dc=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},I1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Fw={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},yv=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Iw=(n,e,t,r)=>{n/=255,e/=255,t/=255;const o=Math.max(n,e,t),s=Math.min(n,e,t);let i,a;const A=(o+s)/2;if(o===s)i=a=0;else{const d=o-s;switch(a=A>.5?d/(2-o-s):d/(o+s),o){case n:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-n)/d+2;break;case t:i=(n-e)/d+4}i/=6}return[Math.round(360*i),Math.round(100*a),Math.round(100*A),r]},Uw=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Gh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Qw=n=>{let[e,t,r,o=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,o]};let xi=class xs{constructor(e){if(Xe(this,"isUnrecognised",!1),e)if(e instanceof xs)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,o,s=1]=e;this.setSource([t,r,o,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Fw&&(e=Fw[e]),e==="transparent"?[255,255,255,0]:xs.sourceFromHex(e)||xs.sourceFromRgb(e)||xs.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Iw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,o]=Iw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(o,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,o]=this.getSource();return"".concat(Gh(e)).concat(Gh(t)).concat(Gh(r)).concat(Gh(Math.round(255*o)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Qw(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Qw(this.getSource()),o=t<(e||127)?0:255;return this.setSource([o,o,o,r]),this}overlayWith(e){e instanceof xs||(e=new xs(e));const t=this.getSource(),r=e.getSource(),[o,s,i]=t.map((a,A)=>Math.round(.5*a+.5*r[A]));return this.setSource([o,s,i,t[3]]),this}static fromRgb(e){return xs.fromRgba(e)}static fromRgba(e){return new xs(xs.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,o,s]=t.slice(1,4).map(i=>{const a=parseFloat(i);return i.endsWith("%")?Math.round(2.55*a):a});return[r,o,s,Uw(t[4])]}}static fromHsl(e){return xs.fromHsla(e)}static fromHsla(e){return new xs(xs.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(xs.parseAngletoDegrees(t[1])%360+360)%360/360,o=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,a,A;if(o===0)i=a=A=s;else{const d=s<=.5?s*(o+1):s+o-s*o,c=2*s-d;i=yv(c,d,r+1/3),a=yv(c,d,r),A=yv(c,d,r-1/3)}return[Math.round(255*i),Math.round(255*a),Math.round(255*A),Uw(t[4])]}static fromHex(e){return new xs(xs.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(A=>A+A):t.match(/.{2}/g);const[o,s,i,a=255]=r.map(A=>parseInt(A,16));return[o,s,i,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?od(r):t.includes("turn")?360*r:r}};const co=(n,e)=>parseFloat(Number(n).toFixed(e)),cc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),o=fn.DPI;switch(t==null?void 0:t[0]){case"mm":return r*o/25.4;case"cm":return r*o/2.54;case"in":return r*o;case"pt":return r*o/72;case"pc":return r*o/72*12;case"em":return r*e;default:return r}},kF=n=>{const[e,t]=n.trim().split(" "),[r,o]=(s=e)&&s!==Zs?[s.slice(1,4),s.slice(5,8)]:s===Zs?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:o}},Fp=n=>"matrix("+n.map(e=>co(e,fn.NUM_FRACTION_DIGITS)).join(" ")+")",Yu=function(n,e){let t,r,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new xi(e),i=s.getAlpha();t=s.toRgb(),i!==1&&(r=i.toString())}else t="none";return o?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},Oi=n=>!!n&&n.toLive!==void 0,Tw=n=>!!n&&typeof n.toObject=="function",Lw=n=>!!n&&n.offsetX!==void 0&&"source"in n,Ll=n=>!!n&&"multiSelectionStacking"in n;function tx(n){const e=n&&oa(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let o=n;const s=e.documentElement,i=e.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===e?(t=i.scrollLeft||s.scrollLeft||0,r=i.scrollTop||s.scrollTop||0):(t+=o.scrollLeft||0,r+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:t,top:r}}const oa=n=>n.ownerDocument||null,rx=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},nx=function(n,e,t){let{width:r,height:o}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=o,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(o*s).toString()),e.scale(s,s))},M0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Pw(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Zs,n}let ox=class{constructor(e){Xe(this,"_originalCanvasStyle",void 0),Xe(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Pc().getElementById(e)||la();var r;if(t.hasAttribute("data-fabric"))throw new Qa("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(r)),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:o}=this.lower;nx(r,o,e,t)}setCSSDimensions(e){M0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&oa(e),o={left:0,top:0};if(!r)return o;const s=((t=rx(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};o.left+=parseInt(s.borderLeftWidth,10)||0,o.top+=parseInt(s.borderTopWidth,10)||0,o.left+=parseInt(s.paddingLeft,10)||0,o.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(i=e.getBoundingClientRect());const A=tx(e);return{left:i.left+A.left-(a.clientLeft||0)+o.left,top:i.top+A.top-(a.clientTop||0)+o.top}}(this.lower.el)}dispose(){Ha().dispose(this.lower.el),delete this.lower}};const OF={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...js]};let U1=class sx extends G5(W5){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return sx.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new ox(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(fl("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?q5():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const o=Ye({width:this.width,height:this.height},e);this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,o=[...this.viewportTransform],s=Xs(e,sa(o));o[0]=t,o[3]=t;const i=Xs(s,o);o[4]+=r.x-i.x,o[5]+=r.y-i.y,this.setViewportTransform(o)}setZoom(e){this.zoomToPoint(new zt(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new zt(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ep(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=sa(this.viewportTransform),o=Xs({x:0,y:0},r),s=Xs({x:e,y:t},r),i=o.min(s),a=o.max(s);return this.vptCoords={tl:i,tr:new zt(a.x,i.y),bl:new zt(i.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(UF(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,o)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,o=t.length;r<o;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],o=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!o)return;const a=Oi(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,i&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const A=r.gradientTransform||r.patternTransform;A&&e.transform(...A)}e.fill(),e.restore()}if(o){e.save();const{skipOffscreen:A}=this;this.skipOffscreen=i,i&&e.transform(...s),o.render(e),this.skipOffscreen=A,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new zt(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new zt(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new zt(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new zt(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new zt(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Xs(this.getCenterPoint(),sa(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Kr,Kr),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,o=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Ye(Ye(Ye({version:D0},Dc(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),o?{clipPath:o}:null)}_toObject(e,t,r){let o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!o),s}__serializeBgOverlay(e,t){const r={},o=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,a=this.overlayColor;return Oi(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),Oi(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),o=t.height||"".concat(this.height),s=fn.NUM_FRACTION_DIGITS,i=t.viewBox;let a;if(i)a='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const A=this.viewportTransform;a='viewBox="'.concat(co(-A[4]/A[0],s)," ").concat(co(-A[5]/A[3],s)," ").concat(co(this.width/A[0],s)," ").concat(co(this.height/A[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",D0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(pl()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Oi(t)){const r=this["".concat(e,"Vpt")],o=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?o[0]:1),height:this.height/(r?o[3]:1)};return t.toSVG(s,{additionalTransform:r?Fp(o):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=fn.fontPaths;this._objects.forEach(function s(i){e.push(i),Zf(i)&&i._objects.forEach(s)}),e.forEach(s=>{if(!(i=s)||typeof i._renderText!="function")return;var i;const{styles:a,fontFamily:A}=s;!t[A]&&r[A]&&(t[A]=!0,a&&Object.values(a).forEach(d=>{Object.values(d).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const o=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return o?`	<style type="text/css"><![CDATA[
`.concat(o,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const o=this[t];o&&!o.excludeFromExport&&o.toSVG&&e.push(o.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Oi(r)){const o=r.repeat||"",s=this.width,i=this.height,a=this["".concat(t,"Vpt")]?Fp(sa(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat(o!=="repeat-y"&&o!=="no-repeat"||!Lw(r)?s:r.source.width,'" height="').concat(o!=="repeat-x"&&o!=="no-repeat"||!Lw(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Qa("`json` is undefined"));const o=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:a,overlayImage:A,overlay:d,clipPath:c}=o,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Xu(s,{reviver:t,signal:r}),vg({backgroundImage:i,backgroundColor:a,overlayImage:A,overlayColor:d,clipPath:c},{signal:r})]).then(h=>{let[p,v]=h;return this.clear(),this.add(...p),this.set(o),this.set(v),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ja(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:o=1,enableRetinaScaling:s=!1}=e,i=o*(s?this.getRetinaScaling():1);return X5(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:o,top:s,filter:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,A=(r||this.height)*e,d=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,p=d*e,v=this.viewportTransform,w=[p,0,0,p,(v[4]-(o||0))*e,(v[5]-(s||0))*e],b=this.enableRetinaScaling,x=ja({width:a,height:A}),S=i?this._objects.filter(I=>i(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=a,this.height=A,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),S),this.viewportTransform=v,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=b,this.skipControlsDrawing=h,x}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Sp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};Xe(U1,"ownDefaults",OF);const DF=["touchstart","touchmove","touchend"],NF=n=>{const e=tx(n.target),t=function(r){const o=r.changedTouches;return o&&o[0]?o[0]:r}(n);return new zt(t.clientX+e.left,t.clientY+e.top)},H0=n=>DF.includes(n.type)||n.pointerType==="touch",j0=n=>{n.preventDefault(),n.stopPropagation()},bA=n=>{let e=0,t=0,r=0,o=0;for(let s=0,i=n.length;s<i;s++){const{x:a,y:A}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(A>o||!s)&&(o=A),(A<t||!s)&&(t=A)}return{left:e,top:t,width:r-e,height:o-t}},MF=["translateX","translateY","scaleX","scaleY"],HF=(n,e)=>Ip(n,cs(e,n.calcOwnMatrix())),Ip=(n,e)=>{const t=Ep(e),{translateX:r,translateY:o,scaleX:s,scaleY:i}=t,a=oo(t,MF),A=new zt(r,o);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:i}),n.setPositionByOrigin(A,Kr,Kr)},jF=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},ix=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Q1=(n,e,t)=>{const r=n/2,o=e/2,s=[new zt(-r,-o),new zt(r,-o),new zt(-r,o),new zt(r,o)].map(a=>a.transform(t)),i=bA(s);return new zt(i.width,i.height)},mg=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:js;return cs(sa(arguments.length>1&&arguments[1]!==void 0?arguments[1]:js),n)},uc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:js,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return n.transform(mg(e,t))},RF=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:js,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;return n.transform(mg(e,t),!0)},qF=(n,e,t)=>{const r=mg(e,t);return Ip(n,cs(r,n.calcOwnMatrix())),r},ax=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Ye(Ye({},e),{},{target:r})),r.fire(n,e)},KF={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ko=n=>typeof n=="string"?KF[n]:n-.5,Up="not-allowed";function Ax(n){return ko(n.originX)===ko(Kr)&&ko(n.originY)===ko(Kr)}function kw(n){return .5-ko(n)}const aa=(n,e)=>n[e],lx=(n,e,t,r)=>({e:n,transform:e,pointer:new zt(t,r)});function dx(n,e){const t=n.getTotalAngle()+od(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function T1(n,e,t,r,o){var s;let{target:i,corner:a}=n;const A=i.controls[a],d=((s=i.canvas)===null||s===void 0?void 0:s.getZoom())||1,c=i.padding/d,u=function(h,p,v,w){const b=h.getRelativeCenterPoint(),x=v!==void 0&&w!==void 0?h.translateToGivenOrigin(b,Kr,Kr,v,w):new zt(h.left,h.top);return(h.angle?p.rotate(-Eo(h.angle),b):p).subtract(x)}(i,new zt(r,o),e,t);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=A.offsetX,u.y-=A.offsetY,u}const $F=(n,e,t,r)=>{const{target:o,offsetX:s,offsetY:i}=e,a=t-s,A=r-i,d=!aa(o,"lockMovementX")&&o.left!==a,c=!aa(o,"lockMovementY")&&o.top!==A;return d&&o.set(Bn,a),c&&o.set(Js,A),(d||c)&&ax(K5,lx(n,e,t,r)),d||c};class cx{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):Zs,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=Yu(Ro,this.fill);return[Yu(ei,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",h,"fill-rule: ",t,"; ","opacity: ",d,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'.concat(Fp(r));return"".concat(o).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=o,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:o,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",A=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=A&&A.absolutePositioned,u=this.stroke,h=this.fill,p=this.shadow,v=[],w=e.indexOf("COMMON_PARTS");let b;A&&(A.clipPathId="CLIPPATH_".concat(pl()),b='<clipPath id="'.concat(A.clipPathId,`" >
`).concat(A.toClipPathSVG(r),`</clipPath>
`)),c&&v.push("<g ",a,this.getSvgCommons(),` >
`),v.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons(),` >
`);const x=[i,d,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[w]=x,Oi(h)&&v.push(h.toSVG(this)),Oi(u)&&v.push(u.toSVG(this)),p&&v.push(p.toSVG(this)),A&&v.push(b),v.push(e.join("")),v.push(`</g>
`),c&&v.push(`</g>
`),r?r(v.join("")):v.join("")}addPaintOrder(){return this.paintFirst!==Ro?' paint-order="'.concat(this.paintFirst,'" '):""}}function wg(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Ow;const sd=String.raw(Ow||(Ow=wl(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),VF=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+sd+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+sd+"))?\\s+(.*)"),GF={cx:Bn,x:Bn,r:"radius",cy:Js,y:Js,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_v="font-size",xv="clip-path";wg(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);wg(["symbol","image","marker","pattern","view","svg"]);const Dw=wg(["symbol","g","a","svg","clipPath","defs"]),WF=new zt(1,0),ux=new zt,hx=(n,e)=>n.rotate(e),R0=(n,e)=>new zt(e).subtract(n),q0=n=>n.distanceFrom(ux),K0=(n,e)=>Math.atan2(Su(n,e),YF(n,e)),XF=n=>K0(WF,n),L1=n=>n.eq(ux)?n:n.scalarDivide(q0(n)),fx=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return L1(new zt(-n.y,n.x).scalarMultiply(e?1:-1))},Su=(n,e)=>n.x*e.y-n.y*e.x,YF=(n,e)=>n.x*e.x+n.y*e.y,Nw=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Su(e,t),o=Su(e,n),s=Su(t,n);return r>=0?o>=0&&s<=0:!(o<=0&&s>=0)},Mw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Hw=new RegExp("(?:\\s|^)"+Mw+Mw+"("+sd+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class yA{constructor(e){const t=typeof e=="string"?yA.parseShadow(e):e;Object.assign(this,yA.ownDefaults,t),this.id=pl()}static parseShadow(e){const t=e.trim(),[,r=0,o=0,s=0]=(Hw.exec(t)||[]).map(i=>parseFloat(i)||0);return{color:(t.replace(Hw,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:o,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=hx(new zt(this.offsetX,this.offsetY),Eo(-e.angle)),r=new xi(this.color);let o=40,s=40;return e.width&&e.height&&(o=100*co((Math.abs(t.x)+this.blur)/e.width,fn.NUM_FRACTION_DIGITS)+20,s=100*co((Math.abs(t.y)+this.blur)/e.height,fn.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(co(this.blur?this.blur/2:0,fn.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(co(t.x,fn.NUM_FRACTION_DIGITS),'" dy="').concat(co(t.y,fn.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=yA.ownDefaults;return this.includeDefaultValues?e:I1(e,(r,o)=>r!==t[o])}static async fromObject(e){return new this(e)}}Xe(yA,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Xe(yA,"type","shadow"),Ar.setClass(yA,"shadow");const Bc=(n,e,t)=>Math.max(n,Math.min(e,t)),JF=[Js,Bn,oi,Hi,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",kc,Oc],EA=[Ro,ei,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],ZF={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Bn,originY:Js,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ro,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},eI=(n,e,t,r)=>-t*Math.cos(n/r*hh)+t+e,tI=()=>!1;class P1{constructor(e){let{startValue:t,byValue:r,duration:o=500,delay:s=0,easing:i=eI,onStart:a=Jf,onChange:A=Jf,onComplete:d=Jf,abort:c=tI,target:u}=e;Xe(this,"_state","pending"),Xe(this,"durationProgress",0),Xe(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=s,this.easing=i,this._onStart=a,this._onChange=A,this._onComplete=d,this._abort=c,this.target=u,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ep(e),this.delay):ep(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:o,valueProgress:s}=this.calculate(r);this.value=Object.freeze(o),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ep(this.tick)))}register(){Sp.push(this)}unregister(){Sp.remove(this)}abort(){this._state="aborted",this.unregister()}}const rI=["startValue","endValue"];class nI extends P1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Ye(Ye({},oo(e,rI)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const oI=["startValue","endValue"];class sI extends P1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Ye(Ye({},oo(e,oI)),{},{startValue:t,byValue:r.map((o,s)=>o-t[s])}))}calculate(e){const t=this.startValue.map((r,o)=>this.easing(e,r,this.byValue[o],this.duration,o));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const iI=["startValue","endValue","easing","onChange","onComplete","abort"],aI=(n,e,t,r)=>e+t*(1-Math.cos(n/r*hh)),Bv=n=>n&&((e,t,r)=>n(new xi(e).toRgba(),t,r));class AI extends P1{constructor(e){let{startValue:t,endValue:r,easing:o=aI,onChange:s,onComplete:i,abort:a}=e,A=oo(e,iI);const d=new xi(t).getSource(),c=new xi(r).getSource();super(Ye(Ye({},A),{},{startValue:d,byValue:c.map((u,h)=>u-d[h]),easing:o,onChange:Bv(s),onComplete:Bv(i),abort:Bv(a)}))}calculate(e){const[t,r,o,s]=this.startValue.map((a,A)=>this.easing(e,a,this.byValue[A],this.duration,A)),i=[...[t,r,o].map(Math.round),Bc(0,s,1)];return{value:i,valueProgress:i.map((a,A)=>this.byValue[A]!==0?Math.abs((a-this.startValue[A])/this.byValue[A]):0).find(a=>a!==0)||0}}}function px(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new sI(n):new nI(n);return e.start(),e}function lI(n){const e=new AI(n);return e.start(),e}class lo{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(o=>!this.includes(o))),this}static isPointContained(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(o||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(o||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=R0(t,r),i=R0(t,e).divide(s);return o?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new zt(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let o=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;o+=+(i.status==="Intersection")}return o%2==1}static intersectLineLine(e,t,r,o){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],i=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,A=t.y-e.y,d=o.x-r.x,c=o.y-r.y,u=e.x-r.x,h=e.y-r.y,p=d*h-c*u,v=a*h-A*u,w=c*a-d*A;if(w!==0){const b=p/w,x=v/w;return(s||0<=b&&b<=1)&&(i||0<=x&&x<=1)?new lo("Intersection").append(new zt(e.x+b*a,e.y+b*A)):new lo}if(p===0||v===0){const b=s||i||lo.isPointContained(e,r,o)||lo.isPointContained(t,r,o)||lo.isPointContained(r,e,t)||lo.isPointContained(o,e,t);return new lo(b?"Coincident":void 0)}return new lo("Parallel")}static intersectSegmentLine(e,t,r,o){return lo.intersectLineLine(e,t,r,o,!1,!0)}static intersectSegmentSegment(e,t,r,o){return lo.intersectLineLine(e,t,r,o,!1,!1)}static intersectLinePolygon(e,t,r){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new lo,i=r.length;for(let a,A,d,c=0;c<i;c++){if(a=r[c],A=r[(c+1)%i],d=lo.intersectLineLine(e,t,a,A,o,!1),d.status==="Coincident")return d;s.append(...d.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return lo.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new lo,o=e.length,s=[];for(let i=0;i<o;i++){const a=e[i],A=e[(i+1)%o],d=lo.intersectSegmentPolygon(a,A,t);d.status==="Coincident"?(s.push(d),r.append(a,A)):r.append(...d.points)}return s.length>0&&s.length===e.length?new lo("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const o=t.min(r),s=t.max(r),i=new zt(s.x,o.y),a=new zt(o.x,s.y);return lo.intersectPolygonPolygon(e,[o,i,s,a])}}class dI extends W5{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Xs(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Xs(e,sa(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new zt(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,o];if(this.group){const i=this.group.calcTransformMatrix();return s.map(a=>Xs(a,i))}return s}intersectsWithRect(e,t){return lo.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=lo.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:o,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&o>=e.y&&o+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return lo.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return bA(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(oi,e),this._set(Hi,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?od(Y5(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||js.concat()}calcACoords(){const e=ph({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),o=fh(t,r),s=cs(o,e),i=this._getTransformedDimensions(),a=i.x/2,A=i.y/2;return{tl:Xs({x:-a,y:-A},s),tr:Xs({x:a,y:-A},s),bl:Xs({x:-a,y:A},s),br:Xs({x:a,y:A},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,ko(this.originX),ko(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),o=this.matrixCache;return o&&o.key.every((s,i)=>s===r[i])?o.value:(this.group&&(t=cs(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=PF(o);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new zt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ye({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let o=r,s=0;this.strokeUniform&&(o=0,s=r);const i=t.width+o,a=t.height+o;let A;return A=t.skewX===0&&t.skewY===0?new zt(i*t.scaleX,a*t.scaleY):Q1(i,a,gg(t)),A.scalarAdd(s)}translateToGivenOrigin(e,t,r,o,s){let i=e.x,a=e.y;const A=ko(o)-ko(t),d=ko(s)-ko(r);if(A||d){const c=this._getTransformedDimensions();i+=A*c.x,a+=d*c.y}return new zt(i,a)}translateToCenterPoint(e,t,r){if(t===Kr&&r===Kr)return e;const o=this.translateToGivenOrigin(e,t,r,Kr,Kr);return this.angle?o.rotate(Eo(this.angle),e):o}translateToOriginPoint(e,t,r){const o=this.translateToGivenOrigin(e,Kr,Kr,t,r);return this.angle?o.rotate(Eo(this.angle),e):o}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Xs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new zt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const o=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Bn,Js)}}const cI=["type"],uI=["extraParam"];let dA=class rp extends dI{static getDefaults(){return rp.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){fl("warn","Setting type has no effect",e)}constructor(e){super(),Xe(this,"_cacheContext",null),Object.assign(this,rp.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=la(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,o=fn.maxCacheSideLimit,s=fn.minCacheSideLimit;if(t<=o&&r<=o&&t*r<=fn.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[a,A]=Cu.limitDimsByArea(i),d=Bc(s,a,o),c=Bc(s,A,o);return t>d&&(e.zoomX/=t/d,e.width=d,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,o=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(o+2),zoomX:e.x,zoomY:e.y,x:r,y:o}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:o,zoomX:s,zoomY:i,x:a,y:A}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=r!==e.width||o!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(d||c){r!==e.width||o!==e.height?(e.width=r,e.height=o):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const u=a/2,h=A/2;return this.cacheTranslationX=Math.round(e.width/2-u)+u,this.cacheTranslationY=Math.round(e.height/2-h)+h,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new zt(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ep(this.calcTransformMatrix());return new zt(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==oi&&e!==Hi||(t=this._constrainScale(t)),e===oi&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof yA||(t=new yA(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s}=this,{width:i,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s,width:i,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ei&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const o=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=o,this.stroke=s}createClipPathLayer(e,t){const r=ja(t),o=r.getContext("2d");if(o.translate(t.cacheTranslationX,t.cacheTranslationY),o.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(o)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=sa(this.calcTransformMatrix());o.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(o),e.drawObject(o,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const o=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,o)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Oi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Oi(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,o=this.getCanvasRetinaScaling(),[s,,,i]=(r==null?void 0:r.viewportTransform)||js,a=s*o,A=i*o,d=t.nonScaling?new zt(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*fn.browserShadowBlurConstant*(a+A)*(d.x+d.y)/4,e.shadowOffsetX=t.offsetX*a*d.x,e.shadowOffsetY=t.offsetY*A*d.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Oi(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,o=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===ei?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=o.x/this.scaleX/s,a=o.y/this.scaleY/s,A=ja({width:Math.ceil(i),height:Math.ceil(a)}),d=A.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(i,0),d.lineTo(i,a),d.lineTo(0,a),d.closePath(),d.translate(i/2,a/2),d.scale(o.zoomX/this.scaleX/s,o.zoomY/this.scaleY/s),this._applyPatternGradientTransform(d,t),d.fillStyle=t.toLive(e),d.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/o.zoomX,s*this.scaleY/o.zoomY),e.strokeStyle=(r=d.createPattern(A,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new zt(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Ar.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=ix(this),r=this.group,o=this.shadow,s=Math.abs,i=e.enableRetinaScaling?q5():1,a=(e.multiplier||1)*i,A=e.canvasProvider||(S=>new U1(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&jF(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&qF(this,this.getViewportTransform()),this.setCoords();const d=la(),c=this.getBoundingRect(),u=this.shadow,h=new zt;if(u){const S=u.blur,I=u.nonScaling?new zt(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+S)*s(I.x),h.y=2*Math.round(s(u.offsetY)+S)*s(I.y)}const p=c.width+h.x,v=c.height+h.y;d.width=Math.ceil(p),d.height=Math.ceil(v);const w=A(d);e.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new zt(w.width/2,w.height/2),Kr,Kr);const b=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const x=w.toCanvasElement(a||1,e);return this.set("canvas",b),this.shadow=o,r&&(this.group=r),this.set(t),this.setCoords(),w._objects=[],w.destroy(),x}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return X5(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:o}=this;if(t){const{x:s,y:i}=this.getRelativeCenterPoint();this.originX=Kr,this.originY=Kr,this.left=s,this.top=i}if(this.set("angle",e),t){const{x:s,y:i}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,o);this.left=s,this.top=i,this.originX=r,this.originY=o}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Sp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Ha().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,o)=>{let[s,i]=o;return r[s]=this._animate(s,i,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.split("."),s=this.constructor.colorProperties.includes(o[o.length-1]),{abort:i,startValue:a,onChange:A,onComplete:d}=r,c=Ye(Ye({},r),{},{target:this,startValue:a??o.reduce((u,h)=>u[h],this),endValue:t,abort:i==null?void 0:i.bind(this),onChange:(u,h,p)=>{o.reduce((v,w,b)=>(b===o.length-1&&(v[w]=u),v[w]),this),A&&A(u,h,p)},onComplete:(u,h,p)=>{this.setCoords(),d&&d(u,h,p)}});return s?lI(c):px(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let o,s=0;s<t.length;s++){if(o=t[s],o===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(o===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const o=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(o),a=r._objects.indexOf(s);return i>-1&&i>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(rp.customProperties,this.constructor.customProperties||[]);let t;const r=fn.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:i,shadow:a,strokeDashArray:A,left:d,top:c,originX:u,originY:h,width:p,height:v,strokeWidth:w,strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:S,strokeUniform:I,strokeMiterLimit:P,scaleX:N,scaleY:ee,angle:j,flipX:D,flipY:ne,opacity:xe,visible:L,backgroundColor:q,fillRule:V,paintFirst:se,globalCompositeOperation:ve,skewX:ie,skewY:ge}=this;o&&!o.excludeFromExport&&(t=o.toObject(e.concat("inverted","absolutePositioned")));const re=Z=>co(Z,r),ue=Ye(Ye({},Dc(this,e)),{},{type:this.constructor.type,version:D0,originX:u,originY:h,left:re(d),top:re(c),width:re(p),height:re(v),fill:Tw(s)?s.toObject():s,stroke:Tw(i)?i.toObject():i,strokeWidth:re(w),strokeDashArray:A&&A.concat(),strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:S,strokeUniform:I,strokeMiterLimit:re(P),scaleX:re(N),scaleY:re(ee),angle:re(j),flipX:D,flipY:ne,opacity:re(xe),shadow:a&&a.toObject(),visible:L,backgroundColor:q,fillRule:V,paintFirst:se,globalCompositeOperation:ve,skewX:re(ie),skewY:re(ge)},t?{clipPath:t}:null);return this.includeDefaultValues?ue:this._removeDefaultValues(ue)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return I1(e,(o,s)=>{if(s===Bn||s===Js||s==="type")return!0;const i=r[s];return o!==i&&!(Array.isArray(o)&&Array.isArray(i)&&o.length===0&&i.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=oo(e,cI),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:o}=r,s=oo(r,uI);return vg(t,s).then(i=>o?(delete i[o],new this(t[o],i)):new this(i))}static fromObject(e,t){return this._fromObject(e,t)}};Xe(dA,"stateProperties",JF),Xe(dA,"cacheProperties",EA),Xe(dA,"ownDefaults",ZF),Xe(dA,"type","FabricObject"),Xe(dA,"colorProperties",[Ro,ei,"backgroundColor"]),Xe(dA,"customProperties",[]),Ar.setClass(dA),Ar.setClass(dA,"object");const Nc=(n,e,t)=>(r,o,s,i)=>{const a=e(r,o,s,i);return a&&ax(n,Ye(Ye({},lx(r,o,s,i)),t)),a};function Mc(n){return(e,t,r,o)=>{const{target:s,originX:i,originY:a}=t,A=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(A,i,a),c=n(e,t,r,o);return s.setPositionByOrigin(d,t.originX,t.originY),c}}const jw=Nc(Wu,Mc((n,e,t,r)=>{const o=T1(e,e.originX,e.originY,t,r);if(ko(e.originX)===ko(Kr)||ko(e.originX)===ko(Bo)&&o.x<0||ko(e.originX)===ko(Bn)&&o.x>0){const{target:s}=e,i=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=Ax(e)?2:1,A=s.width,d=Math.abs(o.x*a/s.scaleX)-i;return s.set("width",Math.max(d,1)),A!==s.width}return!1}));function hI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ei:Ro,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor);let c,u=e,h=t;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",s>i?(c=s,n.scale(1,i/s),h=t*s/i):i>s?(c=i,n.scale(s/i,1),u=e*i/s):c=s,n.beginPath(),n.arc(u,h,c/2,0,Bp,!1),n[A](),d&&n.stroke(),n.restore()}function fI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ei:Ro,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor),c=s/2,u=i/2;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",n.translate(e,t);const h=o.getTotalAngle();n.rotate(Eo(h)),n["".concat(A,"Rect")](-c,-u,s,i),d&&n.strokeRect(-c,-u,s,i),n.restore()}class Ji{constructor(e){Xe(this,"visible",!0),Xe(this,"actionName",pg),Xe(this,"angle",0),Xe(this,"x",0),Xe(this,"y",0),Xe(this,"offsetX",0),Xe(this,"offsetY",0),Xe(this,"sizeX",0),Xe(this,"sizeY",0),Xe(this,"touchSizeX",0),Xe(this,"touchSizeY",0),Xe(this,"cursorStyle","crosshair"),Xe(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,o){var s;let{tl:i,tr:a,br:A,bl:d}=o;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&lo.isPointInPolygon(r,[i,a,A,d])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,o;return(r=(o=e._controlsVisibility)===null||o===void 0?void 0:o[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,o){return new zt(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,o,s,i){const a=E1([fh(r,o),ph({angle:e}),F1((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new zt(-.5,-.5).transform(a),tr:new zt(.5,-.5).transform(a),br:new zt(.5,.5).transform(a),bl:new zt(-.5,.5).transform(a)}}render(e,t,r,o,s){((o=o||{}).cornerStyle||s.cornerStyle)==="circle"?hI.call(this,e,t,r,o,s):fI.call(this,e,t,r,o,s)}}const pI=(n,e,t)=>t.lockRotation?Up:e.cursorStyle,gI=Nc($5,Mc((n,e,t,r)=>{let{target:o,ex:s,ey:i,theta:a,originX:A,originY:d}=e;const c=o.translateToOriginPoint(o.getRelativeCenterPoint(),A,d);if(aa(o,"lockRotation"))return!1;const u=Math.atan2(i-c.y,s-c.x),h=Math.atan2(r-c.y,t-c.x);let p=od(h-u+a);if(o.snapAngle&&o.snapAngle>0){const w=o.snapAngle,b=o.snapThreshold||w,x=Math.ceil(p/w)*w,S=Math.floor(p/w)*w;Math.abs(p-S)<b?p=S:Math.abs(p-x)<b&&(p=x)}p<0&&(p=360+p),p%=360;const v=o.angle!==p;return o.angle=p,v}));function gx(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function vx(n,e,t){const r=aa(n,"lockScalingX"),o=aa(n,"lockScalingY");if(r&&o||!e&&(r||o)&&t||r&&e==="x"||o&&e==="y")return!0;const{width:s,height:i,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||i===0&&a===0&&e!=="x"}const vI=["e","se","s","sw","w","nw","n","ne","e"],pu=(n,e,t)=>{const r=gx(n,t);if(vx(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Up;const o=dx(t,e);return"".concat(vI[o],"-resize")};function k1(n,e,t,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,i=o.by,a=gx(n,s);let A,d,c,u,h,p;if(vx(s,i,a))return!1;if(e.gestureScale)d=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(A=T1(e,e.originX,e.originY,t,r),h=i!=="y"?Math.sign(A.x||e.signX||1):1,p=i!=="x"?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=h),e.signY||(e.signY=p),aa(s,"lockScalingFlip")&&(e.signX!==h||e.signY!==p))return!1;if(u=s._getTransformedDimensions(),a&&!i){const b=Math.abs(A.x)+Math.abs(A.y),{original:x}=e,S=b/(Math.abs(u.x*x.scaleX/s.scaleX)+Math.abs(u.y*x.scaleY/s.scaleY));d=x.scaleX*S,c=x.scaleY*S}else d=Math.abs(A.x*s.scaleX/u.x),c=Math.abs(A.y*s.scaleY/u.y);Ax(e)&&(d*=2,c*=2),e.signX!==h&&i!=="y"&&(e.originX=kw(e.originX),d*=-1,e.signX=h),e.signY!==p&&i!=="x"&&(e.originY=kw(e.originY),c*=-1,e.signY=p)}const v=s.scaleX,w=s.scaleY;return i?(i==="x"&&s.set(oi,d),i==="y"&&s.set(Hi,c)):(!aa(s,"lockScalingX")&&s.set(oi,d),!aa(s,"lockScalingY")&&s.set(Hi,c)),v!==s.scaleX||w!==s.scaleY}const Wh=Nc(fg,Mc((n,e,t,r)=>k1(n,e,t,r))),mI=Nc(fg,Mc((n,e,t,r)=>k1(n,e,t,r,{by:"x"}))),wI=Nc(fg,Mc((n,e,t,r)=>k1(n,e,t,r,{by:"y"}))),bI=["target","ex","ey","skewingSide"],zv={x:{counterAxis:"y",scale:oi,skew:kc,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Hi,skew:Oc,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},yI=["ns","nesw","ew","nwse"],_I=(n,e,t)=>{if(e.x!==0&&aa(t,"lockSkewingY")||e.y!==0&&aa(t,"lockSkewingX"))return Up;const r=dx(t,e)%4;return"".concat(yI[r],"-resize")};function mx(n,e,t,r,o){const{target:s}=t,{counterAxis:i,origin:a,lockSkewing:A,skew:d,flip:c}=zv[n];if(aa(s,A))return!1;const{origin:u,flip:h}=zv[i],p=ko(t[u])*(s[h]?-1:1),v=-Math.sign(p)*(s[c]?-1:1),w=.5*-((s[d]===0&&T1(t,Kr,Kr,r,o)[n]>0||s[d]>0?1:-1)*v)+.5;return Nc(V5,Mc((x,S,I,P)=>function(N,ee,j){let{target:D,ex:ne,ey:xe,skewingSide:L}=ee,q=oo(ee,bI);const{skew:V}=zv[N],se=j.subtract(new zt(ne,xe)).divide(new zt(D.scaleX,D.scaleY))[N],ve=D[V],ie=q[V],ge=Math.tan(Eo(ie)),re=N==="y"?D._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:D._getTransformedDimensions({scaleX:1,scaleY:1}).y,ue=2*se*L/Math.max(re,1)+ge,Z=od(Math.atan(ue));D.set(V,Z);const _e=ve!==D[V];if(_e&&N==="y"){const{skewX:z,scaleX:E}=D,F=D._getTransformedDimensions({skewY:ve}),Q=D._getTransformedDimensions(),M=z!==0?F.x/Q.x:1;M!==1&&D.set(oi,M*E)}return _e}(n,S,new zt(I,P))))(e,Ye(Ye({},t),{},{[a]:w,skewingSide:v}),r,o)}const xI=(n,e,t,r)=>mx("x",n,e,t,r),BI=(n,e,t,r)=>mx("y",n,e,t,r);function bg(n,e){return n[e.canvas.altActionKey]}const Xh=(n,e,t)=>{const r=bg(n,t);return e.x===0?r?kc:Hi:e.y===0?r?Oc:oi:""},ec=(n,e,t)=>bg(n,t)?_I(0,e,t):pu(n,e,t),Rw=(n,e,t,r)=>bg(n,e.target)?BI(n,e,t,r):mI(n,e,t,r),qw=(n,e,t,r)=>bg(n,e.target)?xI(n,e,t,r):wI(n,e,t,r),wx=()=>({ml:new Ji({x:-.5,y:0,cursorStyleHandler:ec,actionHandler:Rw,getActionName:Xh}),mr:new Ji({x:.5,y:0,cursorStyleHandler:ec,actionHandler:Rw,getActionName:Xh}),mb:new Ji({x:0,y:.5,cursorStyleHandler:ec,actionHandler:qw,getActionName:Xh}),mt:new Ji({x:0,y:-.5,cursorStyleHandler:ec,actionHandler:qw,getActionName:Xh}),tl:new Ji({x:-.5,y:-.5,cursorStyleHandler:pu,actionHandler:Wh}),tr:new Ji({x:.5,y:-.5,cursorStyleHandler:pu,actionHandler:Wh}),bl:new Ji({x:-.5,y:.5,cursorStyleHandler:pu,actionHandler:Wh}),br:new Ji({x:.5,y:.5,cursorStyleHandler:pu,actionHandler:Wh}),mtr:new Ji({x:0,y:-.5,actionHandler:gI,cursorStyleHandler:pI,offsetY:-40,withConnection:!0,actionName:C1})}),zI=()=>({mr:new Ji({x:.5,y:0,actionHandler:jw,cursorStyleHandler:ec,actionName:Wu}),ml:new Ji({x:-.5,y:0,actionHandler:jw,cursorStyleHandler:ec,actionName:Wu})}),CI=()=>Ye(Ye({},wx()),zI());class Ju extends dA{static getDefaults(){return Ye(Ye({},super.getDefaults()),Ju.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ju.ownDefaults),this.setOptions(e)}static createControls(){return{controls:wx()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,o=t.action;if(this===r&&o&&o.startsWith(pg))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let o=r.length-1;o>=0;o--){const[s,i]=r[o],a=this.controls[s];if(a.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=fh(t.x,t.y),o=ph({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=cs(r,o),i=cs(e,s),a=cs(i,[1/e[0],0,0,1/e[3],0,0]),A=this.group?Ep(this.calcTransformMatrix()):void 0;A&&(A.scaleX=Math.abs(A.scaleX),A.scaleY=Math.abs(A.scaleY));const d=this._calculateCurrentDimensions(A),c={};return this.forEachControl((u,h)=>{const p=u.positionHandler(d,a,this,u);c[h]=Object.assign(p,this._calcCornerCoords(u,p))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),o=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/o[0],1/o[3]),e.rotate(Eo(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=Ye({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=o.borderColor,this._setLineDash(e,o.borderDashArray),this.strokeBorders(e,t),o.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:o}=this,s=Ye({hasBorders:r,hasControls:o},t),i=this.getViewportTransform(),a=s.hasBorders,A=s.hasControls,d=cs(i,this.calcTransformMatrix()),c=Ep(d);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Eo(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),A&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let o;if(r&&r.forActiveSelection||this.group){const s=Q1(this.width,this.height,gg(t)),i=this.isStrokeAccountedForInDimensions()?S1:(this.strokeUniform?new zt().scalarAdd(this.canvas?this.canvas.getZoom():1):new zt(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);o=s.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,o,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((o,s)=>{o.withConnection&&o.getVisibility(this,s)&&(r=!0,e.moveTo(o.x*t.x,o.y*t.y),e.lineTo(o.x*t.x+o.offsetX,o.y*t.y+o.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:s,cornerColor:i}=this,a=Ye({cornerStrokeColor:o,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((A,d)=>{if(A.getVisibility(this,d)){const c=this.oCoords[d];A.render(e,c.x,c.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,o]=t;return this.setControlVisible(r,o)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const o=this.width+4,s=this.height+4;return t.clearRect(-o/2,-s/2,o,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function bx(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Xe(Ju,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ns extends Ju{}bx(ns,[cx]),Ar.setClass(ns),Ar.setClass(ns,"object");const SI=(n,e,t,r)=>{const o=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,o,o);for(let i=3;i<s.length;i+=4)if(s[i]>0)return!1;return!0};class yx{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new zt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new zt(1/this.options.scaleX,1/this.options.scaleY):new zt(1,1)}createSideVector(e,t){const r=R0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new zt(e);return t.y+=t.x*Math.tan(Eo(this.options.skewY)),t.x+=t.y*Math.tan(Eo(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const EI=new zt;class hc extends yx{static getOrthogonalRotationFactor(e,t){const r=t?K0(e,t):XF(e);return Math.abs(r)<hh?-1:1}constructor(e,t,r,o){super(o),Xe(this,"AB",void 0),Xe(this,"AC",void 0),Xe(this,"alpha",void 0),Xe(this,"bisector",void 0),this.A=new zt(e),this.B=new zt(t),this.C=new zt(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=K0(this.AB,this.AC),this.bisector=L1(hx(this.AB.eq(EI)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t),s=fx(o),i=hc.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%Bp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?q0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return q0(o)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(o))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],o=new zt(hc.getOrthogonalRotationFactor(this.bisector),hc.getOrthogonalRotationFactor(new zt(this.bisector.y,this.bisector.x)));return[new zt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new zt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(s=>{Nw(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:o,skewY:s,scaleX:i,scaleY:a,strokeUniform:A}=this.options,d=new zt(Math.tan(Eo(o)),Math.tan(Eo(s))),c=this.strokeProjectionMagnitude,u=A?c/a/Math.sqrt(1/a**2+1/i**2*d.y**2):c/Math.sqrt(1+d.y**2),h=new zt(Math.sqrt(Math.max(c**2-u**2,0)),u),p=A?c/Math.sqrt(1+d.x**2*(1/a)**2/(1/i+1/i*d.x*d.y)**2):c/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),v=new zt(p,Math.sqrt(Math.max(c**2-p**2,0)));return[v,v.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(w=>this.applySkew(A?w.multiply(this.strokeUniformScalar):w)).forEach(w=>{Nw(w,e,t)&&r.push(this.applySkew(this.A).add(w))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Bp==0,r=this.applySkew(this.A),o=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Su(o,i)>0,A=a?o:s,d=a?s:o;return this.isSkewed()?e.push(...this.projectRoundWithSkew(A,d)):e.push(...this.projectRoundNoSkew(A,d)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Kw extends yx{constructor(e,t,r){super(r),this.A=new zt(e),this.T=new zt(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t);return this.scaleUnitVector(fx(o),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new zt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new hc(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new zt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(L1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(r);e.push(o.add(t),o.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const FI=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const o=n.reduce((s,i)=>(s[s.length-1].eq(i)||s.push(new zt(i)),s),[new zt(n[0])]);if(o.length===1)t=!0;else if(!t){const s=o[0],i=((a,A)=>{for(let d=a.length-1;d>=0;d--)if(A(a[d],d,a))return d;return-1})(o,a=>!a.eq(s));o.splice(i+1)}return o.forEach((s,i,a)=>{let A,d;i===0?(d=a[1],A=t?s:a[a.length-1]):i===a.length-1?(A=a[i-1],d=t?s:a[0]):(A=a[i-1],d=a[i+1]),t&&a.length===1?r.push(...new Kw(s,s,e).project()):!t||i!==0&&i!==a.length-1?r.push(...new hc(s,A,d,e).project()):r.push(...new Kw(s,i===0?d:A,e).project())}),r},O1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Ye({},n[t][r])})}),e},II=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),D1=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=UI(n,r))!==!1&&e.push(t);return e},UI=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(e+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},N1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},QI=(n,e)=>{const t=e.split(`
`),r=[];let o=-1,s={};n=O1(n);for(let i=0;i<t.length;i++){const a=D1(t[i]);if(n[i])for(let A=0;A<a.length;A++){o++;const d=n[i][A];d&&Object.keys(d).length>0&&(N1(s,d,!0)?r.push({start:o,end:o+1,style:d}):r[r.length-1].end++),s=d||{}}else o+=a.length,s={}}return r},TI=(n,e)=>{if(!Array.isArray(n))return O1(n);const t=e.split(z1),r={};let o=-1,s=0;for(let i=0;i<t.length;i++){const a=D1(t[i]);for(let A=0;A<a.length;A++)o++,n[s]&&n[s].start<=o&&o<n[s].end&&(r[i]=r[i]||{},r[i][A]=Ye({},n[s].style),o===n[s].end-1&&s++)}return r},bl=["display","transform",Ro,"fill-opacity","fill-rule","opacity",ei,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function $w(n,e){const t=n.nodeName,r=n.getAttribute("class"),o=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+t,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+s,"i"),e=e.replace(i,"")),r&&e.length){const a=r.split(" ");for(let A=a.length;A--;)i=new RegExp("\\."+a[A]+s,"i"),e=e.replace(i,"")}return e.length===0}function LI(n,e){let t=!0;const r=$w(n,e.pop());return r&&e.length&&(t=function(o,s){let i,a=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&s.length;)a&&(i=s.pop()),a=$w(o=o.parentElement,i);return s.length===0}(n,e)),r&&t&&e.length===0}const PI=n=>{var e;return(e=GF[n])!==null&&e!==void 0?e:n},kI=new RegExp("(".concat(sd,")"),"gi"),OI=n=>n.replace(kI," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Vw,Gw,Ww,Xw,Yw,Jw,Zw;const Ms="(".concat(sd,")"),DI=String.raw(Vw||(Vw=wl(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ms),NI=String.raw(Gw||(Gw=wl(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ms),MI=String.raw(Ww||(Ww=wl(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ms,Ms,Ms),HI=String.raw(Xw||(Xw=wl(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ms,Ms),jI=String.raw(Yw||(Yw=wl(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ms,Ms),RI=String.raw(Jw||(Jw=wl(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ms,Ms,Ms,Ms,Ms,Ms),M1="(?:".concat(RI,"|").concat(jI,"|").concat(MI,"|").concat(HI,"|").concat(DI,"|").concat(NI,")"),qI="(?:".concat(M1,"*)"),KI=String.raw(Zw||(Zw=wl(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),qI),$I=new RegExp(KI),VI=new RegExp(M1),GI=new RegExp(M1,"g");function $0(n){const e=[];if(!(n=OI(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!$I.test(n))return[...js];for(const t of n.matchAll(GI)){const r=VI.exec(t[0]);if(!r)continue;let o=js;const s=r.filter(v=>!!v),[,i,...a]=s,[A,d,c,u,h,p]=a.map(v=>parseFloat(v));switch(i){case"translate":o=fh(A,d);break;case C1:o=ph({angle:A},{x:d,y:c});break;case pg:o=F1(A,d);break;case kc:o=Z5(A);break;case Oc:o=ex(A);break;case"matrix":o=[A,d,c,u,h,p]}e.push(o)}return E1(e)}function WI(n,e,t,r){const o=Array.isArray(e);let s,i=e;if(n!==Ro&&n!==ei||e!==Zs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")i=e===Zs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")i=t&&t.transformMatrix?cs(t.transformMatrix,$0(e)):$0(e);else if(n==="visible")i=e!==Zs&&e!=="hidden",t&&t.visible===!1&&(i=!1);else if(n==="opacity")i=parseFloat(e),t&&t.opacity!==void 0&&(i*=t.opacity);else if(n==="textAnchor")i=e==="start"?Bn:e==="end"?Bo:Kr;else if(n==="charSpacing")s=cc(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Ro),A=e.indexOf(ei);i=Ro,(a>-1&&A>-1&&A<a||a===-1&&A>-1)&&(i=ei)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=o?e.map(cc):cc(e,r)}}else i="";return!o&&isNaN(s)?i:s}function XI(n,e){const t=n.match(VF);if(!t)return;const r=t[1],o=t[3],s=t[4],i=t[5],a=t[6];r&&(e.fontStyle=r),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=cc(s)),a&&(e.fontFamily=a),i&&(e.lineHeight=i==="normal"?1:i)}function YI(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,o]=t.split(":");e[r.trim().toLowerCase()]=o.trim()})}function JI(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?YI(t,e):function(r,o){Object.entries(r).forEach(s=>{let[i,a]=s;a!==void 0&&(o[i.toLowerCase()]=a)})}(t,e)),e}const ZI={stroke:"strokeOpacity",fill:"fillOpacity"};function FA(n,e,t){if(!n)return{};let r,o={},s=B1;n.parentNode&&Dw.test(n.parentNode.nodeName)&&(o=FA(n.parentElement,e,t),o.fontSize&&(r=s=cc(o.fontSize)));const i=Ye(Ye(Ye({},e.reduce((d,c)=>{const u=n.getAttribute(c);return u&&(d[c]=u),d},{})),function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const h in c)LI(d,h.split(" "))&&(u=Ye(Ye({},u),c[h]));return u}(n,t)),JI(n));i[xv]&&n.setAttribute(xv,i[xv]),i[_v]&&(r=cc(i[_v],s),i[_v]="".concat(r));const a={};for(const d in i){const c=PI(d),u=WI(c,i[d],o,r);a[c]=u}a&&a.font&&XI(a.font,a);const A=Ye(Ye({},o),a);return Dw.test(n.nodeName)?A:function(d){const c=ns.getDefaults();return Object.entries(ZI).forEach(u=>{let[h,p]=u;if(d[p]===void 0||d[h]==="")return;if(d[h]===void 0){if(!c[h])return;d[h]=c[h]}if(d[h].indexOf("url(")===0)return;const v=new xi(d[h]);d[h]=v.setAlpha(co(v.getAlpha()*d[p],2)).toRgba()}),d}(A)}const eU=["left","top","width","height","visible"],_x=["rx","ry"];class na extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),na.ownDefaults)}constructor(e){super(),Object.assign(this,na.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,o=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,A=i!==0||a!==0;e.beginPath(),e.moveTo(o+i,s),e.lineTo(o+t-i,s),A&&e.bezierCurveTo(o+t-KA*i,s,o+t,s+KA*a,o+t,s+a),e.lineTo(o+t,s+r-a),A&&e.bezierCurveTo(o+t,s+r-KA*a,o+t-KA*i,s+r,o+t-i,s+r),e.lineTo(o+i,s+r),A&&e.bezierCurveTo(o+KA*i,s+r,o,s+r-KA*a,o,s+r-a),e.lineTo(o,s+a),A&&e.bezierCurveTo(o,s+KA*a,o+KA*i,s,o+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([..._x,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:o}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(o,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const o=FA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:a=0,height:A=0,visible:d=!0}=o,c=oo(o,eU);return new this(Ye(Ye(Ye({},t),c),{},{left:s,top:i,width:a,height:A,visible:!!(d&&a&&A)}))}}Xe(na,"type","Rect"),Xe(na,"cacheProperties",[...EA,..._x]),Xe(na,"ownDefaults",{rx:0,ry:0}),Xe(na,"ATTRIBUTE_NAMES",[...bl,"x","y","rx","ry","width","height"]),Ar.setClass(na),Ar.setSVGClass(na);const pA="initialization",Qp="added",H1="removed",Tp="imperative",xx=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:o,height:s,group:i}=e,a=i&&i!==n?mg(i.calcTransformMatrix(),n.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),d=!e.isStrokeAccountedForInDimensions(),c=t&&d?RF(new zt(r,r),void 0,n.calcTransformMatrix()):S1,u=!t&&d?r:0,h=Q1(o+u,s+u,E1([a,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[A.subtract(h),A.add(h)]};class yg{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:o}=e;return t===pA||t===Tp||!!r&&o!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==pA&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:o}=t;if(r===Tp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:i,width:a,height:A}=bA(e.map(u=>xx(o,u)).reduce((u,h)=>u.concat(h),[])),d=new zt(a,A),c=new zt(s,i).add(d.scalarDivide(2));if(r===pA){const u=this.getInitialSize(t,{size:d,center:c});return{center:c,relativeCorrection:new zt(0,0),size:u}}return{center:c.transform(o.calcOwnMatrix()),size:d}}}Xe(yg,"type","strategy");class V0 extends yg{shouldPerformLayout(e){return!0}}Xe(V0,"type","fit-content"),Ar.setClass(V0);const tU=["strategy"],rU=["target","strategy","bubbles","prevStrategy"],Bx="layoutManager";class Zu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new V0;Xe(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Ye(Ye({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Cp,K5,Wu,$5,fg,V5,zp,EF,FF].map(o=>e.on(o,s=>this.performLayout(o===Cp?{type:"object_modified",trigger:o,e:s,target:r}:{type:"object_modifying",trigger:o,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:o}=t;if(r===pA||r===Qp?this.subscribeTargets(e):r===H1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),o&&o.fire("object:layout:before",{target:t,context:e}),r===Tp&&e.deep){const s=oo(e,tU);t.forEachObject(i=>i.layoutManager&&i.layoutManager.performLayout(Ye(Ye({},s),{},{bubbles:!1,target:i})))}}getLayoutResult(e){const{target:t,strategy:r,type:o}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=o===pA?new zt:t.getRelativeCenterPoint(),{center:a,correction:A=new zt,relativeCorrection:d=new zt}=s,c=i.subtract(a).add(A).transform(o===pA?js:sa(t.calcOwnMatrix()),!0).add(d);return{result:s,prevCenter:i,nextCenter:a,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:o},nextCenter:s}=t;var i,a;r.set({width:o.x,height:o.y}),this.layoutObjects(e,t),e.type===pA?r.set({left:(i=e.x)!==null&&i!==void 0?i:s.x+o.x*ko(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+o.y*ko(r.originY)}):(r.setPositionByOrigin(s,Kr,Kr),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(o=>{o.group===r&&this.layoutObject(e,t,o)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:o}=t;r.set({left:r.left+o.x,top:r.top+o.y})}onAfterLayout(e,t){const{target:r,strategy:o,bubbles:s,prevStrategy:i}=e,a=oo(e,rU),{canvas:A}=r;r.fire("layout:after",{context:e,result:t}),A&&A.fire("object:layout:after",{context:e,result:t,target:r});const d=r.parent;s&&d!=null&&d.layoutManager&&((a.path||(a.path=[])).push(r),d.layoutManager.performLayout(Ye(Ye({},a),{},{target:d}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:Bx,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Ar.setClass(Zu,Bx);const nU=["type","objects","layoutManager"];class oU extends Zu{performLayout(){}}class Xl extends G5(ns){static getDefaults(){return Ye(Ye({},super.getDefaults()),Xl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xe(this,"_activeObjects",[]),Xe(this,"__objectSelectionTracker",void 0),Xe(this,"__objectSelectionDisposer",void 0),Object.assign(this,Xl.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Zu,this.layoutManager.performLayout({type:pA,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(fl("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(fl("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,o)=>this.canEnterGroup(t)&&o.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...o);return this._onAfterObjectsChange(Qp,o),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(Qp,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(H1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(o=>{o._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const o=this._activeObjects;if(e)o.push(r),this._set("dirty",!0);else if(o.length>0){const s=o.indexOf(r);s>-1&&(o.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Ip(e,cs(sa(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Ip(e,cs(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=ns.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var o;const i=this._objects[s];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&i.group!==this?(e.save(),e.transform(...sa(this.calcTransformMatrix())),i.render(e),e.restore()):i.group===this&&i.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Ye({target:this,type:Tp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const s=o.includeDefaultValues;o.includeDefaultValues=r;const i=o[e||"toObject"](t);return o.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Ye(Ye(Ye({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=na.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const o=t.join("");return e?e(o):o}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let o=0;o<this._objects.length;o++)t.push("		",this._objects[o].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let o=0;o<this._objects.length;o++)t.push("	",this._objects[o].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:o=[],layoutManager:s}=e,i=oo(e,nU);return Promise.all([Xu(o,t),vg(i,t)]).then(a=>{let[A,d]=a;const c=new this(A,Ye(Ye(Ye({},i),d),{},{layoutManager:new oU}));if(s){const u=Ar.getClass(s.type),h=Ar.getClass(s.strategy);c.layoutManager=new u(new h)}else c.layoutManager=new Zu;return c.layoutManager.subscribeTargets({type:pA,target:c,targets:c.getObjects()}),c.setCoords(),c})}}Xe(Xl,"type","Group"),Xe(Xl,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Ar.setClass(Xl);const sU=(n,e)=>Math.min(e.width/n.width,e.height/n.height),iU=(n,e)=>Math.max(e.width/n.width,e.height/n.height),G0="\\s*,?\\s*",ou="".concat(G0,"(").concat(sd,")"),aU="".concat(ou).concat(ou).concat(ou).concat(G0,"([01])").concat(G0,"([01])").concat(ou).concat(ou),AU={m:"l",M:"L"},lU=(n,e,t,r,o,s,i,a,A,d,c)=>{const u=BA(n),h=zA(n),p=BA(e),v=zA(e),w=t*o*p-r*s*v+i,b=r*o*p+t*s*v+a;return["C",d+A*(-t*o*h-r*s*u),c+A*(-r*o*h+t*s*u),w+A*(t*o*v+r*s*p),b+A*(r*o*v-t*s*p),w,b]},eb=(n,e,t,r)=>{const o=Math.atan2(e,n),s=Math.atan2(r,t);return s>=o?s-o:2*Math.PI-(o-s)};function tb(n,e,t,r,o,s,i,a){let A;if(fn.cachesBoundsOfCurve&&(A=[...arguments].join(),Cu.boundsOfCurveCache[A]))return Cu.boundsOfCurveCache[A];const d=Math.sqrt,c=Math.abs,u=[],h=[[0,0],[0,0]];let p=6*n-12*t+6*o,v=-3*n+9*t-9*o+3*i,w=3*t-3*n;for(let P=0;P<2;++P){if(P>0&&(p=6*e-12*r+6*s,v=-3*e+9*r-9*s+3*a,w=3*r-3*e),c(v)<1e-12){if(c(p)<1e-12)continue;const ne=-w/p;0<ne&&ne<1&&u.push(ne);continue}const N=p*p-4*w*v;if(N<0)continue;const ee=d(N),j=(-p+ee)/(2*v);0<j&&j<1&&u.push(j);const D=(-p-ee)/(2*v);0<D&&D<1&&u.push(D)}let b=u.length;const x=b,S=zx(n,e,t,r,o,s,i,a);for(;b--;){const{x:P,y:N}=S(u[b]);h[0][b]=P,h[1][b]=N}h[0][x]=n,h[1][x]=e,h[0][x+1]=i,h[1][x+1]=a;const I=[new zt(Math.min(...h[0]),Math.min(...h[1])),new zt(Math.max(...h[0]),Math.max(...h[1]))];return fn.cachesBoundsOfCurve&&(Cu.boundsOfCurveCache[A]=I),I}const dU=(n,e,t)=>{let[r,o,s,i,a,A,d,c]=t;const u=((h,p,v,w,b,x,S)=>{if(v===0||w===0)return[];let I=0,P=0,N=0;const ee=Math.PI,j=S*x1,D=zA(j),ne=BA(j),xe=.5*(-ne*h-D*p),L=.5*(-ne*p+D*h),q=v**2,V=w**2,se=L**2,ve=xe**2,ie=q*V-q*se-V*ve;let ge=Math.abs(v),re=Math.abs(w);if(ie<0){const R=Math.sqrt(1-ie/(q*V));ge*=R,re*=R}else N=(b===x?-1:1)*Math.sqrt(ie/(q*se+V*ve));const ue=N*ge*L/re,Z=-N*re*xe/ge,_e=ne*ue-D*Z+.5*h,z=D*ue+ne*Z+.5*p;let E=eb(1,0,(xe-ue)/ge,(L-Z)/re),F=eb((xe-ue)/ge,(L-Z)/re,(-xe-ue)/ge,(-L-Z)/re);x===0&&F>0?F-=2*ee:x===1&&F<0&&(F+=2*ee);const Q=Math.ceil(Math.abs(F/ee*2)),M=[],k=F/Q,O=8/3*Math.sin(k/4)*Math.sin(k/4)/Math.sin(k/2);let K=E+k;for(let R=0;R<Q;R++)M[R]=lU(E,K,ne,D,ge,re,_e,z,O,I,P),I=M[R][5],P=M[R][6],E=K,K+=k;return M})(d-n,c-e,o,s,a,A,i);for(let h=0,p=u.length;h<p;h++)u[h][1]+=n,u[h][2]+=e,u[h][3]+=n,u[h][4]+=e,u[h][5]+=n,u[h][6]+=e;return u},cU=n=>{let e=0,t=0,r=0,o=0;const s=[];let i,a=0,A=0;for(const d of n){const c=[...d];let u;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],u=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],u=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],u=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],o=c[2],u=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":a=c[3],A=c[4],e=c[5],t=c[6],u=["C",c[1],c[2],a,A,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":i==="C"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[3],t=c[4],u=["C",a,A,c[1],c[2],e,t],a=u[3],A=u[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":a=c[1],A=c[2],e=c[3],t=c[4],u=["Q",a,A,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":i==="Q"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[1],t=c[2],u=["Q",a,A,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":dU(e,t,c).forEach(h=>s.push(h)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=o,u=["Z"]}u?(s.push(u),i=u[0]):i=""}return s},Lp=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),zx=(n,e,t,r,o,s,i,a)=>A=>{const d=A**3,c=(p=>3*p**2*(1-p))(A),u=(p=>3*p*(1-p)**2)(A),h=(p=>(1-p)**3)(A);return new zt(i*d+o*c+t*u+n*h,a*d+s*c+r*u+e*h)},Cx=n=>n**2,Sx=n=>2*n*(1-n),Ex=n=>(1-n)**2,uU=(n,e,t,r,o,s,i,a)=>A=>{const d=Cx(A),c=Sx(A),u=Ex(A),h=3*(u*(t-n)+c*(o-t)+d*(i-o)),p=3*(u*(r-e)+c*(s-r)+d*(a-s));return Math.atan2(p,h)},hU=(n,e,t,r,o,s)=>i=>{const a=Cx(i),A=Sx(i),d=Ex(i);return new zt(o*a+t*A+n*d,s*a+r*A+e*d)},fU=(n,e,t,r,o,s)=>i=>{const a=1-i,A=2*(a*(t-n)+i*(o-t)),d=2*(a*(r-e)+i*(s-r));return Math.atan2(d,A)},rb=(n,e,t)=>{let r=new zt(e,t),o=0;for(let s=1;s<=100;s+=1){const i=n(s/100);o+=Lp(r.x,r.y,i.x,i.y),r=i}return o},pU=(n,e)=>{let t,r=0,o=0,s={x:n.x,y:n.y},i=Ye({},s),a=.01,A=0;const d=n.iterator,c=n.angleFinder;for(;o<e&&a>1e-4;)i=d(r),A=r,t=Lp(s.x,s.y,i.x,i.y),t+o>e?(r-=a,a/=2):(s=i,r+=a,o+=t);return Ye(Ye({},i),{},{angle:c(A)})},Fx=n=>{let e,t,r=0,o=0,s=0,i=0,a=0;const A=[];for(const d of n){const c={x:o,y:s,command:d[0],length:0};switch(d[0]){case"M":t=c,t.x=i=o=d[1],t.y=a=s=d[2];break;case"L":t=c,t.length=Lp(o,s,d[1],d[2]),o=d[1],s=d[2];break;case"C":e=zx(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t=c,t.iterator=e,t.angleFinder=uU(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t.length=rb(e,o,s),o=d[5],s=d[6];break;case"Q":e=hU(o,s,d[1],d[2],d[3],d[4]),t=c,t.iterator=e,t.angleFinder=fU(o,s,d[1],d[2],d[3],d[4]),t.length=rb(e,o,s),o=d[3],s=d[4];break;case"Z":t=c,t.destX=i,t.destY=a,t.length=Lp(o,s,i,a),o=i,s=a}r+=t.length,A.push(t)}return A.push({length:r,x:o,y:s}),A},gU=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fx(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const o=t[r],s=e/o.length,i=n[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return Ye(Ye({},new zt(o.x,o.y).lerp(new zt(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return Ye(Ye({},new zt(o.x,o.y).lerp(new zt(i[1],i[2]),s)),{},{angle:Math.atan2(i[2]-o.y,i[1]-o.x)});case"C":case"Q":return pU(o,e)}},vU=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),nb=new RegExp(aU,"g"),mU=new RegExp(sd,"gi"),wU={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},bU=n=>{var e;const t=[],r=(e=n.match(vU))!==null&&e!==void 0?e:[];for(const o of r){const s=o[0];if(s==="z"||s==="Z"){t.push([s]);continue}const i=wU[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){nb.lastIndex=0;for(let A=null;A=nb.exec(o);)a.push(...A.slice(1))}else a=o.match(mU)||[];for(let A=0;A<a.length;A+=i){const d=new Array(i),c=AU[s];d[0]=A>0&&c?c:s;for(let u=0;u<i;u++)d[u+1]=parseFloat(a[A+u]);t.push(d)}}return t},yU=(n,e)=>n.map(t=>t.map((r,o)=>o===0||e===void 0?r:co(r,e)).join(" ")).join(" ");function W0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[o,s]=r;return t.setProperty(o,s)}))}class _U extends ox{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Xe(this,"upper",void 0),Xe(this,"container",void 0);const{el:o}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),o.parentNode&&o.parentNode.replaceChild(i,o),i.append(o,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=la();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Pc().createElement("div");return e.setAttribute("data-fabric","wrapper"),W0(e,{position:"relative"}),Pw(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:o}=t;W0(e,Ye(Ye({},r),{},{"touch-action":o?"manipulation":Zs})),Pw(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:o}=this.upper;nx(r,o,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),M0(this.upper.el,e),M0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:o}=this.upper;super.cleanupDOM(e),t.removeChild(o),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Ha().dispose(this.upper.el),delete this.upper,delete this.container}}class _g extends U1{constructor(){super(...arguments),Xe(this,"targets",[]),Xe(this,"_hoveredTargets",[]),Xe(this,"_objectsToRender",void 0),Xe(this,"_currentTransform",null),Xe(this,"_groupSelector",null),Xe(this,"contextTopDirty",!1)}static getDefaults(){return Ye(Ye({},super.getDefaults()),_g.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new _U(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const o=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+o,-r+o),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const a=Math.round(o*this.getRetinaScaling());return SI(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),o=this._activeObject;return!!(!t||t&&o&&r.length>1&&r.indexOf(t)===-1&&o!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&o&&o!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let o;return t===pg||t===oi||t===Hi||t===Wu?o=this.centeredScaling||e.centeredScaling:t===C1&&(o=this.centeredRotation||e.centeredRotation),o?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Bo:["mr","tr","br"].includes(t)&&(r.x=Bn),["tl","mt","tr"].includes(t)?r.y=N0:["bl","mb","br"].includes(t)&&(r.y=Js)),r}_setupCurrentTransform(e,t,r){var o;const s=t.group?uc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:a}=t.getActiveControl()||{},A=r&&a?(o=a.getActionHandler(e,t,a))===null||o===void 0?void 0:o.bind(a):$F,d=((p,v,w,b)=>{if(!v||!p)return"drag";const x=b.controls[v];return x.getActionName(w,x,b)})(r,i,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,d,c)?{x:Kr,y:Kr}:this._getOriginFromCorner(t,i),h={target:t,action:d,actionHandler:A,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Eo(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Ye(Ye({},ix(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=h,this.fire("before:transform",{e,transform:h})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new zt(t,r).transform(this.viewportTransform),a=new zt(t+o,r+s).transform(this.viewportTransform),A=this.selectionLineWidth/2;let d=Math.min(i.x,a.x),c=Math.min(i.y,a.y),u=Math.max(i.x,a.x),h=Math.max(i.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,c,u-d,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=A,c+=A,u-=A,h-=A,ns.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,c,u-d,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,o=this.getActiveObjects();if(this.targets=[],r&&o.length>=1){if(r.findControl(t,H0(e))||o.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&i&&i!==r?(this.targets=s,r):i}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const o=this.getZoom(),s=e.padding/o;if(s){const[i,a,A,d]=r,c=Math.atan2(a.y-i.y,a.x-i.x),u=BA(c)*s,h=zA(c)*s,p=u+h,v=u-h;r=[new zt(i.x-v,i.y-p),new zt(a.x+p,a.y-v),new zt(A.x+v,A.y+p),new zt(d.x-p,d.y+v)]}return lo.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,uc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const o=e[r];if(this._checkTarget(o,t)){if(Zf(o)&&o.subTargetCheck){const s=this._searchPossibleTargets(o._objects,t);s&&this.targets.push(s)}return o}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Zf(r)&&r.interactive&&this.targets[0]){const o=this.targets;for(let s=o.length-1;s>0;s--){const i=o[s];if(!Zf(i)||!i.interactive)return i}return o[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,o=r.getBoundingClientRect();let s=NF(e),i=o.width||0,a=o.height||0;i&&a||(Js in o&&N0 in o&&(a=Math.abs(o.top-o.bottom)),Bo in o&&Bn in o&&(i=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=uc(s,void 0,this.viewportTransform));const A=this.getRetinaScaling();A!==1&&(s.x/=A,s.y/=A);const d=i===0||a===0?new zt(1,1):new zt(r.width/i,r.height/a);return s.multiply(d)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=la(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Ll(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,o=!1;const s=this.getActiveObjects(),i=[],a=[];e.forEach(A=>{s.includes(A)||(r=!0,A.fire("deselected",{e:t,target:A}),a.push(A))}),s.forEach(A=>{e.includes(A)||(r=!0,A.fire("selected",{e:t,target:A}),i.push(A))}),e.length>0&&s.length>0?(o=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:a})):s.length>0?(o=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(o=!0,this.fire("selection:cleared",{e:t,deselected:a})),o&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),o=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),o}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Ll(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Ll(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const o=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),o}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,o={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",o),r.fire(Cp,o))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Ll(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const o=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(o),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Ll(t)&&this._activeObject===t){const r=Dc(e,["angle","flipX","flipY",Bn,oi,Hi,kc,Oc,Js]);return HF(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const o=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(o)}}Xe(_g,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class xU{constructor(e){Xe(this,"targets",[]),Xe(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:o}=e.getActiveObject()||{};o&&o.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Vd(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const BU=["target","oldTarget","fireCanvas","e"],gi={passive:!1},Od=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},$A=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Li=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},zU={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class X0 extends _g{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Xe(this,"_isClick",void 0),Xe(this,"textEditingManager",new xU(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove($A,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,o=this._getEventPrefix();e(rx(r),"resize",this._onResize),e(r,o+"down",this._onMouseDown),e(r,"".concat(o,"move"),this._onMouseMove,gi),e(r,"".concat(o,"out"),this._onMouseOut),e(r,"".concat(o,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,gi)}removeListeners(){this.addOrRemove(Li,"remove");const e=this._getEventPrefix(),t=oa(this.upperCanvasEl);Li(t,"".concat(e,"up"),this._onMouseUp),Li(t,"touchend",this._onTouchEnd,gi),Li(t,"".concat(e,"move"),this._onMouseMove,gi),Li(t,"touchmove",this._onMouseMove,gi),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Ye({e},Od(this,e));this.fire("mouse:out",Ye(Ye({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Ye({},r)),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",Ye(Ye({},r),{},{target:o})),o&&o.fire("mouseout",Ye({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Ye({e},Od(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void $A(this.upperCanvasEl,"drag",this._onDragProgress)}j0(e)}_renderDragEffects(e,t,r){let o=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),o=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),o=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),o=!0),i.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Zs,r=t?this._activeObject:void 0,o={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Li(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",o),this._dragSource&&this._dragSource.fire("dragend",o),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:o}=this.findDragTargets(e),s=this._dragSource,i={e,target:r,subTargets:o,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(a=r),r.fire(t,i));for(let A=0;A<o.length;A++){const d=o[A];d.canDrop(e)&&(a=d),d.fire(t,i)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),o={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,o)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),o=this._basicEventHandler("drop:before",Ye({e,target:t,subTargets:r,dragSource:this._dragSource},Od(this,e)));o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],o=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&j0(e),this._basicEventHandler("contextmenu",o),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const o=this.upperCanvasEl,s=this._getEventPrefix(),i=oa(o);$A(i,"touchend",this._onTouchEnd,gi),t&&$A(i,"touchmove",this._onMouseMove,gi),Li(o,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Li(t,"".concat(r,"move"),this._onMouseMove,gi);const o=oa(t);$A(o,"".concat(r,"up"),this._onMouseUp),$A(o,"".concat(r,"move"),this._onMouseMove,gi)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=oa(this.upperCanvasEl);Li(r,"touchend",this._onTouchEnd,gi),Li(r,"touchmove",this._onMouseMove,gi),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{$A(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const o=oa(this.upperCanvasEl);Li(o,"".concat(r,"up"),this._onMouseUp),Li(o,"".concat(r,"move"),this._onMouseMove,gi),$A(t,"".concat(r,"move"),this._onMouseMove,gi)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,o=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,A,d=!1;if(r&&(this._finalizeCurrentTransform(e),d=r.actionPerformed),!o){const c=s===this._activeObject;this.handleSelection(e),d||(d=this._shouldRender(s)||!c&&s===this._activeObject)}if(s){const c=s.findControl(this.getViewportPoint(e),H0(e)),{key:u,control:h}=c||{};if(A=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),d=!0;else if(h){const p=h.getMouseUpHandler(e,s,h);p&&(a=this.getScenePoint(e),p.call(h,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==A)){const c=r.target&&r.target.controls[r.corner],u=c&&c.getMouseUpHandler(e,r.target,c);a=a||this.getScenePoint(e),u&&u.call(c,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),d?this.requestRenderAll():o||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:o=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<o.length;s++)o[s]!==r&&o[s].fire(e,t);return t}_handleEvent(e,t){const r=this._target,o=this.targets||[],s=Ye(Ye({e,target:r,subTargets:o},Od(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let i=0;i<o.length;i++)o[i]!==r&&o[i].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const i=this.getScenePoint(e);this._groupSelector={x:i.x,y:i.y,deltaY:0,deltaX:0}}if(t){const i=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),H0(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,i);const A=a?a.control:void 0,d=this.getScenePoint(e),c=A&&A.getMouseDownHandler(e,t,A);c&&c.call(A,e,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=uc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:o[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("drag",Ye(Ye({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("drag",Ye(Ye({},t),{},{target:s[a],oldTarget:o[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:o,fireCanvas:s,e:i}=t,a=oo(t,BU);const{targetIn:A,targetOut:d,canvasIn:c,canvasOut:u}=zU[e],h=o!==r;if(o&&h){const p=Ye(Ye({},a),{},{e:i,target:o,nextTarget:r},Od(this,i));s&&this.fire(u,p),o.fire(d,p)}if(r&&h){const p=Ye(Ye({},a),{},{e:i,target:r,previousTarget:o},Od(this,i));s&&this.fire(c,p),r.fire(A,p)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,o=r.target,s=o.group?uc(t,void 0,o.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:o,actionHandler:s,target:i}=t,a=!!s&&s(e,t,r.x,r.y);a&&i.setCoords(),o==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const o=Ll(this._activeObject)?this._activeObject:null,s=(!o||t.group!==o)&&t.findControl(this.getViewportPoint(e));if(s){const i=s.control;this.setCursor(i.cursorStyleHandler(e,i,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(i=>{r=i.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,o=Ll(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||o)&&(o||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(o){const s=r.getObjects();if(t===r){const i=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,i)||this.searchPossibleTargets(this._objects,i))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Ar.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new zt(t,r),a=i.add(new zt(o,s)),A=i.min(a),d=i.max(a).subtract(A),c=this.collectObjects({left:A.x,top:A.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(h=>!h.onSelect({e})).reverse():c;if(u.length===1)this.setActiveObject(u[0],e);else if(u.length>1){const h=Ar.getClass("ActiveSelection");this.setActiveObject(new h(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Ix={x1:0,y1:0,x2:0,y2:0},CU=Ye(Ye({},Ix),{},{r1:0,r2:0}),tc=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,SU=/^(\d+\.\d+)%|(\d+)%$/;function Ux(n){return n&&SU.test(n)}function Qx(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Ux(n)?100:1):NaN;return Bc(0,tc(t,e),1)}const EU=/\s*;\s*/,FU=/\s*:\s*/;function IU(n,e){let t,r;const o=n.getAttribute("style");if(o){const i=o.split(EU);i[i.length-1]===""&&i.pop();for(let a=i.length;a--;){const[A,d]=i[a].split(FU).map(c=>c.trim());A==="stop-color"?t=d:A==="stop-opacity"&&(r=d)}}const s=new xi(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Qx(n.getAttribute("offset"),0),color:s.toRgb(),opacity:tc(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function UU(n,e){const t=[],r=n.getElementsByTagName("stop"),o=Qx(e,1);for(let s=r.length;s--;)t.push(IU(r[s],o));return t}function Tx(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Lx(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Vi(n,e){return n.getAttribute(e)}function QU(n,e){return function(t,r){let o,{width:s,height:i,gradientUnits:a}=r;return Object.keys(t).reduce((A,d)=>{const c=t[d];return c==="Infinity"?o=1:c==="-Infinity"?o=0:(o=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&Ux(c)&&(o*=.01,a==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(o*=s),d!=="y1"&&d!=="y2"||(o*=i)))),A[d]=o,A},{})}(Tx(n)==="linear"?function(t){return{x1:Vi(t,"x1")||0,y1:Vi(t,"y1")||0,x2:Vi(t,"x2")||"100%",y2:Vi(t,"y2")||0}}(n):function(t){return{x1:Vi(t,"fx")||Vi(t,"cx")||"50%",y1:Vi(t,"fy")||Vi(t,"cy")||"50%",r1:0,x2:Vi(t,"cx")||"50%",y2:Vi(t,"cy")||"50%",r2:Vi(t,"r")||"50%"}}(n),Ye(Ye({},e),{},{gradientUnits:Lx(n)}))}class Yh{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:o={},colorStops:s=[],offsetX:i=0,offsetY:a=0,gradientTransform:A,id:d}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Ye(Ye({},t==="radial"?CU:Ix),o),colorStops:s,offsetX:i,offsetY:a,gradientTransform:A,id:d?"".concat(d,"_").concat(pl()):pl()})}addColorStop(e){for(const t in e){const r=new xi(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Ye(Ye({},Dc(this,e)),{},{type:this.type,coords:Ye({},this.coords),colorStops:this.colorStops.map(t=>Ye({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],o=this.gradientTransform?this.gradientTransform.concat():js.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(u=>Ye({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,A=-this.offsetY;var d;s==="objectBoundingBox"?(a/=e.width,A/=e.height):(a+=e.width/2,A+=e.height/2),(d=e)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,A-=e.pathOffset.y),o[4]-=a,o[5]-=A;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Fp(o),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:p,y2:v}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',p,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:p,y2:v,r1:w,r2:b}=this.coords,x=w>b;r.push("<radialGradient ",c,' cx="',x?u:p,'" cy="',x?h:v,'" r="',x?w:b,'" fx="',x?p:u,'" fy="',x?v:h,`">
`),x&&(i.reverse(),i.forEach(I=>{I.offset=1-I.offset}));const S=Math.min(w,b);if(S>0){const I=S/Math.max(w,b);i.forEach(P=>{P.offset+=I*(1-P.offset)})}}return i.forEach(u=>{let{color:h,offset:p,opacity:v}=u;r.push("<stop ",'offset="',100*p+"%",'" style="stop-color:',h,v!==void 0?";stop-opacity: "+v:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:o,y2:s,r1:i,r2:a}=this.coords,A=this.type==="linear"?e.createLinearGradient(t,r,o,s):e.createRadialGradient(t,r,i,o,s,a);return this.colorStops.forEach(d=>{let{color:c,opacity:u,offset:h}=d;A.addColorStop(h,u!==void 0?new xi(c).setAlpha(u).toRgba():c)}),A}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Ye(Ye({},e),{},{colorStops:t?t.map(o=>Ye({},o)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const o=Lx(e),s=t._findCenterFromElement();return new this(Ye({id:e.getAttribute("id")||void 0,type:Tx(e),coords:QU(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:UU(e,r.opacity),gradientUnits:o,gradientTransform:$0(e.getAttribute("gradientTransform")||"")},o==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Xe(Yh,"type","Gradient"),Ar.setClass(Yh,"gradient"),Ar.setClass(Yh,"linear"),Ar.setClass(Yh,"radial");const TU=["type","source","patternTransform"];class Cv{get type(){return"pattern"}set type(e){fl("warn","Setting type has no effect",e)}constructor(e){Xe(this,"repeat","repeat"),Xe(this,"offsetX",0),Xe(this,"offsetY",0),Xe(this,"crossOrigin",""),this.id=pl(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Ye(Ye({},Dc(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:co(this.offsetX,fn.NUM_FRACTION_DIGITS),offsetY:co(this.offsetY,fn.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:o,repeat:s,id:i}=this,a=tc(this.offsetX/t,0),A=tc(this.offsetY/r,0),d=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):tc(o.width/t,0),c=s==="repeat-x"||s==="no-repeat"?1+Math.abs(A||0):tc(o.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(a,'" y="').concat(A,'" width="').concat(d,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(o.width,'" height="').concat(o.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:o,patternTransform:s}=e,i=oo(e,TU);const a=await tp(o,Ye(Ye({},t),{},{crossOrigin:i.crossOrigin}));return new this(Ye(Ye({},i),{},{patternTransform:s&&s.slice(0),source:a}))}}Xe(Cv,"type","Pattern"),Ar.setClass(Cv),Ar.setClass(Cv,"pattern");const LU=["path","left","top"],PU=["d"];class Pl extends ns{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:o,top:s}=t,i=oo(t,LU);super(),Object.assign(this,Pl.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),typeof o=="number"&&this.set(Bn,o),typeof s=="number"&&this.set(Js,s)}_setPath(e,t){this.path=cU(Array.isArray(e)?e:bU(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new zt(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const o of this.path)switch(o[0]){case"L":e.lineTo(o[1]+t,o[2]+r);break;case"M":e.moveTo(o[1]+t,o[2]+r);break;case"C":e.bezierCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r,o[5]+t,o[6]+r);break;case"Q":e.quadraticCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye(Ye({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=yU(this.path,fn.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=fn.NUM_FRACTION_DIGITS;return" translate(".concat(co(-this.pathOffset.x,e),", ").concat(co(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:o}=this._calcDimensions();this.set({width:t,height:r,pathOffset:o}),e&&this.setPositionByOrigin(o,Kr,Kr)}_calcBoundsFromPath(){const e=[];let t=0,r=0,o=0,s=0;for(const i of this.path)switch(i[0]){case"L":o=i[1],s=i[2],e.push({x:t,y:r},{x:o,y:s});break;case"M":o=i[1],s=i[2],t=o,r=s;break;case"C":e.push(...tb(o,s,i[1],i[2],i[3],i[4],i[5],i[6])),o=i[5],s=i[6];break;case"Q":e.push(...tb(o,s,i[1],i[2],i[1],i[2],i[3],i[4])),o=i[3],s=i[4];break;case"Z":o=t,s=r}return bA(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Ye(Ye({},e),{},{pathOffset:new zt(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const o=FA(e,this.ATTRIBUTE_NAMES,r),{d:s}=o;return new this(s,Ye(Ye(Ye({},oo(o,PU)),t),{},{left:void 0,top:void 0}))}}Xe(Pl,"type","Path"),Xe(Pl,"cacheProperties",[...EA,"path","fillRule"]),Xe(Pl,"ATTRIBUTE_NAMES",[...bl,"d"]),Ar.setClass(Pl),Ar.setSVGClass(Pl);const kU=["left","top","radius"],Px=["radius","startAngle","endAngle","counterClockwise"];class hA extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),hA.ownDefaults)}constructor(e){super(),Object.assign(this,hA.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Eo(this.startAngle),Eo(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(oi)}getRadiusY(){return this.get("radius")*this.get(Hi)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Px,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Eo(this.startAngle),o=Eo(this.endAngle),s=BA(r)*t,i=zA(r)*t,a=BA(o)*t,A=zA(o)*t,d=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(d," ").concat(c," ").concat(a," ").concat(A,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const o=FA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:a=0}=o;return new this(Ye(Ye({},oo(o,kU)),{},{radius:a,left:s-a,top:i-a}))}static fromObject(e){return super._fromObject(e)}}Xe(hA,"type","Circle"),Xe(hA,"cacheProperties",[...EA,...Px]),Xe(hA,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Xe(hA,"ATTRIBUTE_NAMES",["cx","cy","r",...bl]),Ar.setClass(hA),Ar.setSVGClass(hA);const OU=["x1","y1","x2","y2"],DU=["x1","y1","x2","y2"],Y0=["x1","x2","y1","y2"];class kl extends ns{constructor(){let[e,t,r,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,kl.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=o,this._setWidthHeight();const{left:i,top:a}=s;typeof i=="number"&&this.set(Bn,i),typeof a=="number"&&this.set(Js,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:o}=this;this.width=Math.abs(r-e),this.height=Math.abs(o-t);const{left:s,top:i,width:a,height:A}=bA([{x:e,y:t},{x:r,y:o}]),d=new zt(s+a/2,i+A/2);this.setPositionByOrigin(d,Kr,Kr)}_set(e,t){return super._set(e,t),Y0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var o;Oi(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new zt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye(Ye({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:o,width:s,height:i}=this,a=e<=t?-1:1,A=r<=o?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:A*i/2,y2:A*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(o,`" />
`)]}static async fromElement(e,t,r){const o=FA(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:a=0,y2:A=0}=o;return new this([s,i,a,A],oo(o,OU))}static fromObject(e){let{x1:t,y1:r,x2:o,y2:s}=e,i=oo(e,DU);return this._fromObject(Ye(Ye({},i),{},{points:[t,r,o,s]}),{extraParam:"points"})}}Xe(kl,"type","Line"),Xe(kl,"cacheProperties",[...EA,...Y0]),Xe(kl,"ATTRIBUTE_NAMES",bl.concat(Y0)),Ar.setClass(kl),Ar.setSVGClass(kl);class jl extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),jl.ownDefaults)}constructor(e){super(),Object.assign(this,jl.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Xe(jl,"type","Triangle"),Xe(jl,"ownDefaults",{width:100,height:100}),Ar.setClass(jl),Ar.setSVGClass(jl);const kx=["rx","ry"];class fA extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),fA.ownDefaults)}constructor(e){super(),Object.assign(this,fA.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(oi)}getRy(){return this.get("ry")*this.get(Hi)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...kx,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Bp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const o=FA(e,this.ATTRIBUTE_NAMES,r);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}function NU(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Xe(fA,"type","Ellipse"),Xe(fA,"cacheProperties",[...EA,...kx]),Xe(fA,"ownDefaults",{rx:0,ry:0}),Xe(fA,"ATTRIBUTE_NAMES",[...bl,"cx","cy","rx","ry"]),Ar.setClass(fA),Ar.setSVGClass(fA);const MU=["left","top"],Ox={exactBoundingBox:!1};class ta extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),ta.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xe(this,"strokeDiff",void 0),Object.assign(this,ta.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:o}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Bn,r),typeof o=="number"&&this.set(Js,o)}isOpen(){return!0}_projectStrokeOnPoints(e){return FI(this.points,e,this.isOpen())}_calcDimensions(e){e=Ye({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(d=>d.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new zt,strokeOffset:new zt,strokeDiff:new zt};const r=bA(t),o=gg(Ye(Ye({},e),{},{scaleX:1,scaleY:1})),s=bA(this.points.map(d=>Xs(d,o,!0))),i=new zt(this.scaleX,this.scaleY);let a=r.left+r.width/2,A=r.top+r.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(Eo(this.skewX)),A-=a*Math.tan(Eo(this.skewY))),Ye(Ye({},r),{},{pathOffset:new zt(a,A),strokeOffset:new zt(s.left,s.top).subtract(new zt(r.left,r.top)).multiply(i),strokeDiff:new zt(r.width,r.height).subtract(new zt(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=bA(this.points);return new zt(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}=this._calcDimensions();this.set({width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}),e&&this.setPositionByOrigin(new zt(t+o/2,r+s/2),Kr,Kr)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new zt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:A}=this._calcDimensions(e);i=new zt((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:A)}else{var o,s;i=new zt((o=e.width)!==null&&o!==void 0?o:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return i.multiply(new zt(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,o=super._set(e,t);return this.exactBoundingBox&&r&&((e===oi||e===Hi)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),o}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye(Ye({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:o}=t;return{x:r,y:o}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,o=fn.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push(co(this.points[s].x-t,o),",",co(this.points[s].y-r,o)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(let s=0;s<t;s++){const i=this.points[s];e.lineTo(i.x-r,i.y-o)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(NU(e.getAttribute("points")),Ye(Ye({},oo(FA(e,this.ATTRIBUTE_NAMES,r),MU)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Xe(ta,"ownDefaults",Ox),Xe(ta,"type","Polyline"),Xe(ta,"layoutProperties",[kc,Oc,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Xe(ta,"cacheProperties",[...EA,"points"]),Xe(ta,"ATTRIBUTE_NAMES",[...bl]),Ar.setClass(ta),Ar.setSVGClass(ta);class Jh extends ta{isOpen(){return!1}}Xe(Jh,"ownDefaults",Ox),Xe(Jh,"type","Polygon"),Ar.setClass(Jh),Ar.setSVGClass(Jh);const Dx=["fontSize","fontWeight","fontFamily","fontStyle"],Nx=["underline","overline","linethrough"],Mx=[...Dx,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Hx=[...Mx,...Nx,"textBackgroundColor","direction"],HU=[...Dx,...Nx,ei,"strokeWidth",Ro,"deltaY","textBackgroundColor"],jU={_reNewline:z1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Bn,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Bn,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Ua="justify",Pp="justify-left",Eu="justify-right",Fu="justify-center";class jx extends ns{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const o in t[r])for(const s in t[r][o])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const o in r)for(const s in r[o])if(r[o][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,o,s=0,i=!0,a=0;for(const A in t){r=0;for(const d in t[A]){const c=t[A][d]||{};s++,c[e]!==void 0?(o?c[e]!==o&&(i=!1):o=c[e],c[e]===this[e]&&delete c[e]):i=!1,Object.keys(c).length!==0?r++:delete t[A][d]}r===0&&delete t[A]}for(let A=0;A<this._textLines.length;A++)a+=this._textLines[A].length;i&&s===a&&(this[e]=o,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,o,s;for(o in t){for(s in r=t[o],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[o]}}_extendStyles(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=I1(Ye(Ye({},this._getStyleDeclaration(r,o)),t),i=>i!==void 0);this._setStyleDeclaration(r,o,s)}getSelectionStyles(e,t,r){const o=[];for(let s=e;s<(t||e);s++)o.push(this.getStyleAtPosition(s,r));return o}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,o):this._getStyleDeclaration(r,o)}setSelectionStyles(e,t,r){for(let o=t;o<(r||t);o++)this._extendStyles(o,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const o=this.styles&&this.styles[e];return o&&(r=o[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Ye(Ye({},Dc(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Xe(jx,"_styleProperties",HU);const RU=/  +/g,qU=/"/g;function Sv(n,e,t,r,o){return"		".concat(function(s,i){let{left:a,top:A,width:d,height:c}=i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fn.NUM_FRACTION_DIGITS;const h=Yu(Ro,s,!1),[p,v,w,b]=[a,A,d,c].map(x=>co(x,u));return"<rect ".concat(h,' x="').concat(p,'" y="').concat(v,'" width="').concat(w,'" height="').concat(b,'"></rect>')}(n,{left:e,top:t,width:r,height:o}),`
`)}const KU=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Ev;class Os extends jx{static getDefaults(){return Ye(Ye({},super.getDefaults()),Os.ownDefaults)}constructor(e,t){super(),Xe(this,"__charBounds",[]),Object.assign(this,Os.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Fx(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ua)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,o,s,i,a;for(let A=0,d=this._textLines.length;A<d;A++)if((this.textAlign===Ua||A!==d-1&&!this.isEndOfWrapping(A))&&(o=0,s=this._textLines[A],t=this.getLineWidth(A),t<this.width&&(a=this.textLines[A].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let c=0;c<=s.length;c++)i=this.__charBounds[A][c],this._reSpaceAndTab.test(s[c])?(i.width+=e,i.kernedWidth+=e,i.left+=o,o+=e):i.left+=o}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<r.length;o++){if(e<=r[o].length)return{lineIndex:o,charIndex:e};e-=r[o].length+this.missingNewlineOffset(o,t)}return{lineIndex:o-1,charIndex:r[o-1].length<e?r[o-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ei?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Kr:e.textBaseline="middle";break;case"ascender":e.textBaseline=Js;break;case"descender":e.textBaseline=N0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const o=this.getLineWidth(t);o>e&&(e=o)}return e}_renderTextLine(e,t,r,o,s,i){this._renderChars(e,t,r,o,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let o=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){o+=a;continue}const A=this._textLines[s].length,d=this._getLineLeftOffset(s);let c,u,h=0,p=0,v=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let w=0;w<A;w++){const b=this.__charBounds[s][w];u=this.getValueOfPropertyAt(s,w,"textBackgroundColor"),this.path?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),e.fillStyle=u,u&&e.fillRect(-b.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),b.width,a/this.lineHeight),e.restore()):u!==v?(c=r+d+p,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=v,v&&e.fillRect(c,o,h,a/this.lineHeight),p=b.left,h=b.width,v=u):h+=b.kernedWidth}u&&!this.path&&(c=r+d+p,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=u,e.fillRect(c,o,h,a/this.lineHeight)),o+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,o){const s=Cu.getFontCache(t),i=this._getFontDeclaration(t),a=r+e,A=r&&i===this._getFontDeclaration(o),d=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,p;if(r&&s[r]!==void 0&&(h=s[r]),s[e]!==void 0&&(p=c=s[e]),A&&s[a]!==void 0&&(u=s[a],p=u-h),c===void 0||h===void 0||u===void 0){const v=function(){return Ev||(Ev=ja({width:0,height:0}).getContext("2d")),Ev}();this._setTextStyles(v,t,!0),c===void 0&&(p=c=v.measureText(e).width,s[e]=c),h===void 0&&A&&r&&(h=v.measureText(r).width,s[r]=h),A&&u===void 0&&(u=v.measureText(a).width,s[a]=u,p=u-h)}return{width:c*d,kernedWidth:p*d}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,o=0;const s=this.pathSide===Bo,i=this.path,a=this._textLines[e],A=a.length,d=new Array(A);this.__charBounds[e]=d;for(let c=0;c<A;c++){const u=a[c];r=this._getGraphemeBox(u,e,c,t),d[c]=r,o+=r.kernedWidth,t=u}if(d[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let c=0;const u=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case Bn:c=s?u-o:0;break;case Kr:c=(u-o)/2;break;case Bo:c=s?0:u-o}c+=this.pathStartOffset*(s?-1:1);for(let h=s?A-1:0;s?h>=0:h<A;s?h--:h++)r=d[h],c>u?c%=u:c<0&&(c+=u),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,o=this.path,s=gU(o.path,r,o.segmentsInfo);t.renderLeft=s.x-o.pathOffset.x,t.renderTop=s.y-o.pathOffset.y,t.angle=s.angle+(this.pathSide===Bo?Math.PI:0)}_getGraphemeBox(e,t,r,o,s){const i=this.getCompleteStyleDeclaration(t,r),a=o?this.getCompleteStyleDeclaration(t,r-1):{},A=this._measureChar(e,i,o,a);let d,c=A.kernedWidth,u=A.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),u+=d,c+=d);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const p=this.__charBounds[t][r-1];h.left=p.left+p.width+A.kernedWidth-A.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,o=this._textLines[e].length;r<o;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),t+=r===o-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const o=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const A=this.getHeightOfLine(i),d=A/this.lineHeight,c=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],o+c,s+r+d,i),r+=A}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ro))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,o,s,i){const a=this.getHeightOfLine(i),A=this.textAlign.includes(Ua),d=this.path,c=!A&&this.charSpacing===0&&this.isEmptyStyles(i)&&!d,u=this.direction==="ltr",h=this.direction==="ltr"?1:-1,p=t.direction;let v,w,b,x,S,I="",P=0;if(t.save(),p!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?Bn:Bo),s-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),o,s),void t.restore();for(let N=0,ee=r.length-1;N<=ee;N++)x=N===ee||this.charSpacing||d,I+=r[N],b=this.__charBounds[i][N],P===0?(o+=h*(b.kernedWidth-b.width),P+=b.width):P+=b.kernedWidth,A&&!x&&this._reSpaceAndTab.test(r[N])&&(x=!0),x||(v=v||this.getCompleteStyleDeclaration(i,N),w=this.getCompleteStyleDeclaration(i,N+1),x=N1(v,w,!1)),x&&(d?(t.save(),t.translate(b.renderLeft,b.renderTop),t.rotate(b.angle),this._renderChar(e,t,i,N,I,-P/2,0),t.restore()):(S=o,this._renderChar(e,t,i,N,I,S,s)),I="",v=w,o+=h*P,P=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,o=ja({width:t,height:r}),s=o.getContext("2d");return o.width=t,o.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(o,"no-repeat")}handleFiller(e,t,r){let o,s;return Oi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:o}=t;return e.lineWidth=o,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,o,s,i,a){const A=this._getStyleDeclaration(r,o),d=this.getCompleteStyleDeclaration(r,o),c=e==="fillText"&&d.fill,u=e==="strokeText"&&d.stroke&&d.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(d),A.textBackgroundColor&&this._removeShadow(t),A.deltaY&&(a+=A.deltaY),c){const h=this._setFillStyles(t,d);t.fillText(s,i-h.offsetX,a-h.offsetY)}if(u){const h=this._setStrokeStyles(t,d);t.strokeText(s,i-h.offsetX,a-h.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),i=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,o=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let a=0;return o===Ua||o===Fu&&!i||o===Eu&&!i||o===Pp&&!i?0:(o===Kr&&(a=r/2),o===Bo&&(a=r),o===Fu&&(a=r/2),o===Eu&&(a=r),s==="rtl"&&(o===Bo||o===Ua||o===Eu?a=0:o===Bn||o===Pp?a=-r:o!==Kr&&o!==Fu||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var o;return(o=this._getStyleDeclaration(e,t)[r])!==null&&o!==void 0?o:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const o=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let A=0,d=this._textLines.length;A<d;A++){const c=this.getHeightOfLine(A);if(!this[t]&&!this.styleHas(t,A)){r+=c;continue}const u=this._textLines[A],h=c/this.lineHeight,p=this._getLineLeftOffset(A);let v,w,b=0,x=0,S=this.getValueOfPropertyAt(A,0,t),I=this.getValueOfPropertyAt(A,0,Ro);const P=r+h*(1-this._fontSizeFraction);let N=this.getHeightOfChar(A,0),ee=this.getValueOfPropertyAt(A,0,"deltaY");for(let D=0,ne=u.length;D<ne;D++){const xe=this.__charBounds[A][D];v=this.getValueOfPropertyAt(A,D,t),w=this.getValueOfPropertyAt(A,D,Ro);const L=this.getHeightOfChar(A,D),q=this.getValueOfPropertyAt(A,D,"deltaY");if(s&&v&&w)e.save(),e.fillStyle=I,e.translate(xe.renderLeft,xe.renderTop),e.rotate(xe.angle),e.fillRect(-xe.kernedWidth/2,a*L+q,xe.kernedWidth,this.fontSize/15),e.restore();else if((v!==S||w!==I||L!==N||q!==ee)&&x>0){let V=o+p+b;this.direction==="rtl"&&(V=this.width-V-x),S&&I&&(e.fillStyle=I,e.fillRect(V,P+a*N+ee,x,this.fontSize/15)),b=xe.left,x=xe.width,S=v,I=w,N=L,ee=q}else x+=xe.kernedWidth}let j=o+p+b;this.direction==="rtl"&&(j=this.width-j-x),e.fillStyle=w,v&&w&&e.fillRect(j,P+a*N+ee,x-i,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||Os.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:o,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return D1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),o=[`
`];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],o);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye(Ye({},super.toObject([...Hx,...e])),{},{styles:QI(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let o=!1,s=!1;if(typeof e=="object")for(const i in e)i==="path"&&this.setPathInfo(),o=o||r.includes(i),s=s||i==="path";else o=r.includes(e),s=e==="path";return s&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const o=FA(e,Os.ATTRIBUTE_NAMES,r),s=Ye(Ye({},t),o),{textAnchor:i=Bn,textDecoration:a="",dx:A=0,dy:d=0,top:c=0,left:u=0,fontSize:h=B1,strokeWidth:p=1}=s,v=oo(s,KU),w=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Ye({left:u+A,top:c+d,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:h},v)),b=w.getScaledHeight()/w.height,x=((w.height+w.strokeWidth)*w.lineHeight-w.height)*b,S=w.getScaledHeight()+x;let I=0;return i===Kr&&(I=w.getScaledWidth()/2),i===Bo&&(I=w.getScaledWidth()),w.set({left:w.left-I,top:w.top-(S-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:p}),w}static fromObject(e){return this._fromObject(Ye(Ye({},e),{},{styles:TI(e.styles||{},e.text)}),{extraParam:"text"})}}Xe(Os,"textLayoutProperties",Mx),Xe(Os,"cacheProperties",[...EA,...Hx]),Xe(Os,"ownDefaults",jU),Xe(Os,"type","Text"),Xe(Os,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Xe(Os,"ATTRIBUTE_NAMES",bl.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),bx(Os,[class extends cx{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(qU,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let o,s=n;this.backgroundColor&&r.push(...Sv(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,a=this._textLines.length;i<a;i++)o=this._getLineLeftOffset(i),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,e+o,s),this._setSVGTextLineText(t,i,e+o,s),s+=this.getHeightOfLine(i);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(RU)),s=o?'style="'.concat(o,'"'):"",i=e.deltaY,a=i?' dy="'.concat(co(i,fn.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(co(t,fn.NUM_FRACTION_DIGITS),'" y="').concat(co(r,fn.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(II(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const o=this.getHeightOfLine(e),s=this.textAlign.includes(Ua),i=this._textLines[e];let a,A,d,c,u,h="",p=0;r+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let v=0,w=i.length-1;v<=w;v++)u=v===w||this.charSpacing,h+=i[v],d=this.__charBounds[e][v],p===0?(t+=d.kernedWidth-d.width,p+=d.width):p+=d.kernedWidth,s&&!u&&this._reSpaceAndTab.test(i[v])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(e,v),A=this.getCompleteStyleDeclaration(e,v+1),u=N1(a,A,!0)),u&&(c=this._getStyleDeclaration(e,v),n.push(this._createTextCharSpan(h,c,t,r)),h="",a=A,this.direction==="rtl"?t-=p:t+=p,p=0)}_setSVGTextLineBg(n,e,t,r){const o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let i,a=0,A=0,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<o.length;c++){const{left:u,width:h,kernedWidth:p}=this.__charBounds[e][c];i=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),i!==d?(d&&n.push(...Sv(d,t+A,r,a,s)),A=u,a=h,d=i):a+=p}i&&n.push(...Sv(d,t+A,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:o,fill:s,fontSize:i,fontStyle:a,fontWeight:A,deltaY:d}=n,c=this.getSvgTextDecoration(n);return[o?Yu(ei,o):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",c&&"text-decoration: ".concat(c,"; "),s?Yu(Ro,s):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Ar.setClass(Os),Ar.setSVGClass(Os);class $U{constructor(e){Xe(this,"target",void 0),Xe(this,"__mouseDownInPlace",!1),Xe(this,"__dragStartFired",!1),Xe(this,"__isDraggingOver",!1),Xe(this,"__dragStartSelection",void 0),Xe(this,"__dragImageDisposer",void 0),Xe(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:o,selectionEnd:s}=t;const i=this.target,a=i.canvas,A=new zt(i.flipX?-1:1,i.flipY?-1:1),d=i._getCursorBoundaries(o),c=new zt(d.left+d.leftOffset,d.top+d.topOffset).multiply(A).transform(i.calcTransformMatrix()),u=a.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),p=i.getBoundingRect(),v=c.subtract(new zt(p.left,p.top)),w=a.viewportTransform,b=v.add(u).transform(w,!0),x=i.backgroundColor,S=O1(i.styles);i.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(I,0,o),i.setSelectionStyles(I,s,i.text.length),i.dirty=!0;const P=i.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=x,i.styles=S,i.dirty=!0,W0(P,{position:"fixed",left:"".concat(-P.width,"px"),border:Zs,width:"".concat(P.width/h,"px"),height:"".concat(P.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{P.remove()},oa(e.target||this.target.hiddenTextarea).body.appendChild(P),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(P,b.x,b.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const o=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(o.selectionStart,o.selectionEnd).join(""),i=Ye({text:t.text,value:s},o);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,i)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,o=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!o){const i=this.target,a=i.canvas;let A=i.getSelectionStartFromPointer(r);const{styles:d}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const h=this.__dragStartSelection.selectionStart,p=this.__dragStartSelection.selectionEnd;A>h&&A<=p?A=h:A>p&&(A-=p-h),i.removeChars(h,p),delete this.__dragStartSelection}i._reNewline.test(c)&&(i._reNewline.test(i._text[A])||A===i._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=i,i.insertChars(s,d,A),a.setActiveObject(i),i.enterEditing(r),i.selectionStart=Math.min(A+u,i._text.length),i.selectionEnd=Math.min(i.selectionStart+s.length,i._text.length),i.hiddenTextarea.value=i.text,i._updateTextarea(),i.hiddenTextarea.focus(),i.fire(zp,{index:A+u,action:"drop"}),a.fire("text:changed",{target:i}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const o=this.target,s=this.target.canvas,{selectionStart:i,selectionEnd:a}=this.__dragStartSelection,A=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Zs;A===Zs?(o.selectionStart=i,o.selectionEnd=a,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),A==="move"&&(o.removeChars(i,a),o.selectionStart=o.selectionEnd=i,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(zp,{index:i,action:"dragend"}),s.fire("text:changed",{target:o}),s.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const ob=/[ \n\.,;!\?\-]/;class VU extends Os{constructor(){super(...arguments),Xe(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:o,onComplete:s}=e;return px({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:o,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:i=>{this._currentCursorOpacity=i,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let o=e>0&&this._reSpace.test(r[e])&&(t===-1||!z1.test(r[e-1]))?e-1:e,s=r[o];for(;o>0&&o<r.length&&!ob.test(s);)o+=t,s=r[o];return t===-1&&ob.test(s)&&o++,o}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;oa(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),o=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&o!==s||o!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const o=r.slice(0,e),s=this.graphemeSplit(o).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const o=r.slice(0,e).join("").length;return e===t?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,a=t.leftOffset,A=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,c=d.width/A,u=d.height/A,h=c-i,p=u-i,v=new zt(t.left+a,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new zt(d.clientWidth/c,d.clientHeight/u));return v.x<0&&(v.x=0),v.x>h&&(v.x=h),v.y<0&&(v.y=0),v.y>p&&(v.y=p),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Cp),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=i;a<this._unwrappedTextLines[s].length;a++){const A=this.styles[s][a];A&&(this.styles[r]||(this.styles[r]={}),this.styles[r][o+a-i]=A)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],A=i-o;for(let d=o;d<i;d++)delete a[d];for(const d in this.styles[r]){const c=parseInt(d,10);c>=i&&(a[c-A]=a[d],delete a[d])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const o in this.styles){const s=parseInt(o,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,o){const s={},i=this._unwrappedTextLines[e].length,a=i===t;let A=!1;r||(r=1),this.shiftLineStyles(e,r);const d=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(A=!0,s[h-t]=this.styles[e][u],a&&t===0||delete this.styles[e][u])}let c=!1;for(A&&!a&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)o&&o[r-1]?this.styles[e+r]={0:Ye({},o[r-1])}:d?this.styles[e+r]={0:Ye({},d)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,o){this.styles||(this.styles={});const s=this.styles[e],i=s?Ye({},s):{};r||(r=1);for(const A in i){const d=parseInt(A,10);d>=t&&(s[d+r]=i[d],i[d-r]||delete s[d])}if(this._forceClearCache=!0,o){for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Ye({},o[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=Ye({},a)}insertNewStyleBlock(e,t,r){const o=this.get2DCursorLocation(t,!0),s=[0];let i,a=0;for(let A=0;A<e.length;A++)e[A]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),i=1;i<a;i++)s[i]>0?this.insertCharStyleObject(o.lineIndex+i,0,s[i],r):r&&this.styles[o.lineIndex+i]&&r[0]&&(this.styles[o.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(o.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;o>r&&this.removeStyleFromTo(r,o);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Bn:this._selectionDirection===Bo&&(this._selectionDirection=Bn,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Bo?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Bo:this._selectionDirection===Bn&&(this._selectionDirection=Bo,this.selectionStart=t),this.selectionEnd=r)}}class GU extends VU{initHiddenTextarea(){const e=this.canvas&&oa(this.canvas.getElement())||Pc(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(i=>{let[a,A]=i;return t.setAttribute(a,A)});const{top:r,left:o,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(o,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(i=>{let[a,A]=i;return t.addEventListener(a,this[A].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(zp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,i=o.length,a=this.selectionStart,A=this.selectionEnd,d=a!==A;let c,u,h,p,v=i-s;const w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),b=a>w.selectionStart;d?(u=this._text.slice(a,A),v+=A-a):i<s&&(u=b?this._text.slice(A+v,A):this._text.slice(a,a-v));const x=o.slice(w.selectionEnd-v,w.selectionEnd);if(u&&u.length&&(x.length&&(c=this.getSelectionStyles(a,a+1,!1),c=x.map(()=>c[0])),d?(h=a,p=A):b?(h=A-u.length,p=A):(h=A,p=A+u.length),this.removeStyleFromTo(h,p)),x.length){const{copyPasteData:S}=Ha();t&&x.join("")===S.copiedText&&!fn.disableStyleCopyPaste&&(c=S.copiedTextStyle),this.insertNewStyleBlock(x,a,c)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:o}=t;this.compositionStart=r,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Ha();e.copiedText=this.getSelectedText(),fn.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,o=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],o+=r.left+r.width),o}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(i).length+A+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s-1,a),d=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+A-d.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let o,s,i=this._getLineLeftOffset(e),a=0;for(let A=0,d=r.length;A<d;A++)if(o=this.__charBounds[e][A].width,i+=o,i>t){s=!0;const c=i-o,u=i,h=Math.abs(c-t);a=Math.abs(u-t)<h?A:A-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Bo);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const o=this.text.length;this.selectionStart=Bc(0,this.selectionStart,o),this.selectionEnd=Bc(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Bn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let o;if(e.altKey)o=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;o=this["findLineBoundary".concat(r)](this[t])}return o!==void 0&&this[t]!==o&&(this[t]=o,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Bn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Bo&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Bn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Bn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Bo,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Bo,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Fv=n=>!!n.button;class WU extends GU{constructor(){super(...arguments),Xe(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new $U(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),j0(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Fv(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Fv(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const o=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Fv(t)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(sa(this.calcTransformMatrix())).add(new zt(-this._getLeftOffset(),-this._getTopOffset()));let r=0,o=0,s=0;for(let d=0;d<this._textLines.length&&r<=t.y;d++)r+=this.getHeightOfLine(d),s=d,d>0&&(o+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let i=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,A=this.__charBounds[s];for(let d=0;d<a;d++){const c=i+A[d].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-i)&&o++;break}i=c,o++}return Math.min(this.flipX?a-o:o,this._text.length)}}const Zh="moveCursorUp",ef="moveCursorDown",tf="moveCursorLeft",rf="moveCursorRight",nf="exitEditing",XU=Ye({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:nf,27:nf,33:Zh,34:ef,35:rf,36:tf,37:tf,38:Zh,39:rf,40:ef},keysMapRtl:{9:nf,27:nf,33:Zh,34:ef,35:tf,36:rf,37:rf,38:Zh,39:tf,40:ef},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class gA extends WU{static getDefaults(){return Ye(Ye({},super.getDefaults()),gA.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Ye(Ye({},gA.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof X0&&this.canvas.textEditingManager.remove(this),t instanceof X0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),o=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:o,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:o,lineIndex:s}=this.get2DCursorLocation(e);for(let d=0;d<s;d++)t+=this.getHeightOfLine(d);const i=this._getLineLeftOffset(s),a=this.__charBounds[s][o];a&&(r=a.left),this.charSpacing!==0&&o===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const A={top:t,left:i+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Bo||this.textAlign===Ua||this.textAlign===Eu?A.left*=-1:this.textAlign===Bn||this.textAlign===Pp?A.left=i-(r>0?r:0):this.textAlign!==Kr&&this.textAlign!==Fu||(A.left=i-(r>0?r:0))),A}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(o,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),A=this.cursorWidth/a,d=this.getValueOfPropertyAt(o,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-A/2,top:c+t.top+d,width:A,height:i}}_renderCursor(e,t,r){const{color:o,opacity:s,left:i,top:a,width:A,height:d}=this.getCursorRenderingData(r,t);e.fillStyle=o,e.globalAlpha=s,e.fillRect(i,a,A,d)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const o=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(Ua),a=this.get2DCursorLocation(o),A=this.get2DCursorLocation(s),d=a.lineIndex,c=A.lineIndex,u=a.charIndex<0?0:a.charIndex,h=A.charIndex<0?0:A.charIndex;for(let p=d;p<=c;p++){const v=this._getLineLeftOffset(p)||0;let w=this.getHeightOfLine(p),b=0,x=0,S=0;if(p===d&&(x=this.__charBounds[d][u].left),p>=d&&p<c)S=i&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===c)if(h===0)S=this.__charBounds[c][h].left;else{const j=this._getWidthOfCharSpacing();S=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-j}b=w,(this.lineHeight<1||p===c&&this.lineHeight>1)&&(w/=this.lineHeight);let I=r.left+v+x,P=w,N=0;const ee=S-x;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",P=1,N=w):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Bo||this.textAlign===Ua||this.textAlign===Eu?I=this.width-I-ee:this.textAlign===Bn||this.textAlign===Pp?I=r.left+v-S:this.textAlign!==Kr&&this.textAlign!==Fu||(I=r.left+v-S)),e.fillRect(I,r.top+r.topOffset+N,ee,P),r.topOffset+=b}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ro)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Xe(gA,"ownDefaults",XU),Xe(gA,"type","IText"),Ar.setClass(gA),Ar.setClass(gA,"i-text");class Rl extends gA{static getDefaults(){return Ye(Ye({},super.getDefaults()),Rl.ownDefaults)}constructor(e,t){super(e,Ye(Ye({},Rl.ownDefaults),t))}static createControls(){return{controls:CI()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ua)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,o=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)e.graphemeText[o]===`
`&&i>0?(r=0,o++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&i>0&&(r++,o++),s[i]={line:t,offset:r},o+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,o=e+1,s=!1;const i=this._styleMap[e],a=this._styleMap[e+1];i&&(e=i.line,r=i.offset),a&&(o=a.line,s=o===e,t=a.offset);const A=e===void 0?this.styles:{line:this.styles[e]};for(const d in A)for(const c in A[d]){const u=parseInt(c,10);if(u>=r&&(!s||u<t))for(const h in A[d][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const o=this._styleMap[e];super._setStyleDeclaration(o.line,o.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),o=[];for(let s=0;s<r.wordsData.length;s++)o.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,o}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let o=0;return{wordsData:e.map((s,i)=>{let a=0;const A=t?this.graphemeSplit(s):this.wordSplit(s);return A.length===0?[{word:[],width:0}]:A.map(d=>{const c=t?[d]:this.graphemeSplit(d),u=this._measureWord(c,i,a);return o=Math.max(u,o),a+=c.length+r.length,{word:c,width:u}})}),largestWordWidth:o}}_measureWord(e,t){let r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let i=0,a=e.length;i<a;i++)s+=this._getGraphemeBox(e[i],t,i+o,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:o,wordsData:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),A=this.splitByGrapheme,d=[],c=A?"":" ";let u=0,h=[],p=0,v=0,w=!0;t-=i;const b=Math.max(t,o,this.dynamicMinWidth),x=s[e];let S;for(p=0,S=0;S<x.length;S++){const{word:I,width:P}=x[S];p+=I.length,u+=v+P-a,u>b&&!w?(d.push(h),h=[],u=P,w=!0):u+=a,w||A||h.push(c),h=h.concat(I),v=A?0:this._measureWord([c],e,p),p++,w=!1}return S&&d.push(h),o+i>this.dynamicMinWidth&&(this.dynamicMinWidth=o-a+i),d}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=r[s].join("");return t.lines=o,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const o=this._styleMap[t].line;e.set("".concat(o),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Xe(Rl,"type","Textbox"),Xe(Rl,"textLayoutProperties",[...gA.textLayoutProperties,"width"]),Xe(Rl,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Ar.setClass(Rl);class sb extends yg{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:o,group:s}=r;if(!o||!this.shouldPerformLayout(e))return;const{width:i,height:a}=bA(xx(r,o)),A=new zt(i,a);if(o.absolutePositioned)return{center:uc(o.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:A};{const d=o.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new zt,correction:u=new zt}=this.calcBoundingBox(t,e)||{};return{center:c.add(d),correction:u.subtract(d),size:A}}return{center:r.getRelativeCenterPoint().add(d),size:A}}}}Xe(sb,"type","clip-path"),Ar.setClass(sb);class ib extends yg{getInitialSize(e,t){let{target:r}=e,{size:o}=t;return new zt(r.width||o.x,r.height||o.y)}}Xe(ib,"type","fixed"),Ar.setClass(ib);class YU extends Zu{subscribeTargets(e){const t=e.target;e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((o,s)=>(s.parent&&o.add(s.parent),o),new Set).forEach(o=>{!r.some(s=>s.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[t]})})}}class ql extends Xl{static getDefaults(){return Ye(Ye({},super.getDefaults()),ql.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ql.ownDefaults),this.setOptions(t);const{left:r,top:o,layoutManager:s}=t;this.groupInit(e,{left:r,top:o,layoutManager:s??new YU})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(o=>{const s=this._objects.findIndex(a=>a.isInFrontOf(o)),i=s===-1?this.size():s;this.insertAt(i,o)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(fl("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(o=>{const{parent:s}=o;s&&r.add(s)}),e===H1?r.forEach(o=>{o._onAfterObjectsChange(Qp,t)}):r.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o=Ye(Ye({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,o);super._renderControls(e,t),e.restore()}}Xe(ql,"type","ActiveSelection"),Xe(ql,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Ar.setClass(ql),Ar.setClass(ql,"activeSelection");class JU{constructor(){Xe(this,"resources",{})}applyFilters(e,t,r,o,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,o);const a={sourceWidth:r,sourceHeight:o,imageData:i.getImageData(0,0,r,o),originalEl:t,originalImageData:i.getImageData(0,0,r,o),canvasEl:s,ctx:i,filterBackend:this};e.forEach(d=>{d.applyTo(a)});const{imageData:A}=a;return A.width===r&&A.height===o||(s.width=A.width,s.height=A.height),i.putImageData(A,0,0),a}}class Rx{constructor(){let{tileSize:e=fn.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xe(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Xe(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=ja({width:e,height:t}),o=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)}applyFilters(e,t,r,o,s,i){const a=this.gl,A=s.getContext("2d");if(!a||!A)return;let d;i&&(d=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:a,sourceTexture:this.createTexture(a,r,o,d?void 0:t),targetTexture:this.createTexture(a,r,o),originalTexture:d||this.createTexture(a,r,o,d?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),e.forEach(h=>{h&&h.applyTo(c)}),function(h){const p=h.targetCanvas,v=p.width,w=p.height,b=h.destinationWidth,x=h.destinationHeight;v===b&&w===x||(p.width=b,p.height=x)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(u),A.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,o,s){const{NEAREST:i,TEXTURE_2D:a,RGBA:A,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:p,TEXTURE_WRAP_T:v}=e,w=e.createTexture();return e.bindTexture(a,w),e.texParameteri(a,u,s||i),e.texParameteri(a,h,s||i),e.texParameteri(a,p,c),e.texParameteri(a,v,c),o?e.texImage2D(a,0,A,A,d,o):e.texImage2D(a,0,A,t,r,0,A,d,null),w}getCachedTexture(e,t,r){const{textureCache:o}=this;if(o[e])return o[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(o[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,o=t.targetCanvas,s=o.getContext("2d");if(!s)return;s.translate(0,o.height),s.scale(1,-1);const i=r.height-o.height;s.drawImage(r,0,i,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),o=t.destinationWidth,s=t.destinationHeight,i=o*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,i),A=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,a);const d=new ImageData(A,o,s);r.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(t.renderer=o.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Iv;function ZU(){const{WebGLProbe:n}=Ha();return n.queryWebGL(la()),fn.enableGLFiltering&&n.isSupported(fn.textureSize)?new Rx({tileSize:fn.textureSize}):new JU}function Uv(){return!Iv&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Iv=ZU()),Iv}const eQ=["filters","resizeFilter","src","crossOrigin","type"],qx=["cropX","cropY"];class Ns extends ns{static getDefaults(){return Ye(Ye({},super.getDefaults()),Ns.ownDefaults)}constructor(e,t){super(),Xe(this,"_lastScaleX",1),Xe(this,"_lastScaleY",1),Xe(this,"_filterScalingX",1),Xe(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Ns.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(pl()),this.setElement(typeof e=="string"?(this.canvas&&oa(this.canvas.getElement())||Pc()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Ns.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Uv(!1);t instanceof Rx&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Ha().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Ye(Ye({},super.toObject([...qx,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,o=-this.height/2;let s=[],i=[],a="",A="";if(!t)return[];if(this.hasCrop()){const d=pl();s.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(A=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(o-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(A).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,i=['	<rect x="'.concat(r,'" y="').concat(o,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return s=this.paintFirst!==Ro?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tp(e,{crossOrigin:t,signal:r}).then(o=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(o)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);const a=ja(i),{width:A,height:d}=i;this._element=a,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,Uv().applyFilters([e],i,A,d,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=ja({width:r,height:o});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1);Uv().applyFilters(e,this._originalElement,r,o,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,o=this._filterScalingY,s=this.width,i=this.height,a=Math.max(this.cropX,0),A=Math.max(this.cropY,0),d=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=a*r,h=A*o,p=Math.min(s*r,d-u),v=Math.min(i*o,c-h),w=-s/2,b=-i/2,x=Math.min(s,d/r-a),S=Math.min(i,c/o-A);t&&e.drawImage(t,u,h,p,v,w,b,x,S)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=kF(this.preserveAspectRatio||""),t=this.width,r=this.height,o={width:t,height:r};let s,i=this._element.width,a=this._element.height,A=1,d=1,c=0,u=0,h=0,p=0;return!e||e.alignX===Zs&&e.alignY===Zs?(A=t/i,d=r/a):(e.meetOrSlice==="meet"&&(A=d=sU(this._element,o),s=(t-i*A)/2,e.alignX==="Min"&&(c=-s),e.alignX==="Max"&&(c=s),s=(r-a*d)/2,e.alignY==="Min"&&(u=-s),e.alignY==="Max"&&(u=s)),e.meetOrSlice==="slice"&&(A=d=iU(this._element,o),s=i-t/A,e.alignX==="Mid"&&(h=s/2),e.alignX==="Max"&&(h=s),s=a-r/d,e.alignY==="Mid"&&(p=s/2),e.alignY==="Max"&&(p=s),i=t/A,a=r/d)),{width:i,height:a,scaleX:A,scaleY:d,offsetLeft:c,offsetTop:u,cropX:h,cropY:p}}static fromObject(e,t){let{filters:r,resizeFilter:o,src:s,crossOrigin:i,type:a}=e,A=oo(e,eQ);return Promise.all([tp(s,Ye(Ye({},t),{},{crossOrigin:i})),r&&Xu(r,t),o&&Xu([o],t),vg(A,t)]).then(d=>{let[c,u=[],[h]=[],p={}]=d;return new this(c,Ye(Ye({},A),{},{src:s,filters:u,resizeFilter:h},p))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return tp(e,{crossOrigin:t,signal:r}).then(s=>new this(s,o))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const o=FA(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"],t,o).catch(s=>(fl("log","Unable to parse Image",s),null))}}Xe(Ns,"type","Image"),Xe(Ns,"cacheProperties",[...EA,...qx]),Xe(Ns,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Xe(Ns,"CSS_CANVAS","canvas-img"),Xe(Ns,"ATTRIBUTE_NAMES",[...bl,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),Ar.setClass(Ns),Ar.setSVGClass(Ns);wg(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const xg=n=>n.webgl!==void 0,j1="precision highp float",tQ=`
    `.concat(j1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),rQ=["type"],nQ=["type"],oQ=new RegExp(j1,"g");class qo{get type(){return this.constructor.type}constructor(){let e=oo(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rQ);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return tQ}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=Ha();o!=="highp"&&(t=t.replace(oQ,j1.replace("highp",o)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!i||!a)throw new Qa("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Qa("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Qa("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(a,s),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Qa('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const A=this.getUniformLocations(e,a)||{};return A.uStepW=e.getUniformLocation(a,"uStepW"),A.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:A}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,o={};for(let s=0;s<r.length;s++)o[r[s]]=e.getUniformLocation(t,r[s]);return o}sendAttributeData(e,t,r){const o=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,o=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===o||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,o)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){xg(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,o=ja({width:t,height:r});e.helpLayer=o}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Ye({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(oo(e,nQ))}}Xe(qo,"type","BaseFilter"),Xe(qo,"uniformLocations",[]);const sQ={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class of extends qo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(sQ[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new xi(this.color).getSource(),o=this.alpha,s=r[0]*o,i=r[1]*o,a=r[2]*o,A=1-o;for(let d=0;d<t.length;d+=4){const c=t[d],u=t[d+1],h=t[d+2];let p,v,w;switch(this.mode){case"multiply":p=c*s/255,v=u*i/255,w=h*a/255;break;case"screen":p=255-(255-c)*(255-s)/255,v=255-(255-u)*(255-i)/255,w=255-(255-h)*(255-a)/255;break;case"add":p=c+s,v=u+i,w=h+a;break;case"difference":p=Math.abs(c-s),v=Math.abs(u-i),w=Math.abs(h-a);break;case"subtract":p=c-s,v=u-i,w=h-a;break;case"darken":p=Math.min(c,s),v=Math.min(u,i),w=Math.min(h,a);break;case"lighten":p=Math.max(c,s),v=Math.max(u,i),w=Math.max(h,a);break;case"overlay":p=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,v=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,w=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255;break;case"exclusion":p=s+c-2*s*c/255,v=i+u-2*i*u/255,w=a+h-2*a*h/255;break;case"tint":p=s+c*A,v=i+u*A,w=a+h*A}t[d]=p,t[d+1]=v,t[d+2]=w}}sendUniformData(e,t){const r=new xi(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Xe(of,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Xe(of,"type","BlendColor"),Xe(of,"uniformLocations",["uColor"]),Ar.setClass(of);const iQ={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},aQ=["type","image"];class sf extends qo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return iQ[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:o},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=la());const a=s.blendImage,A=a.getContext("2d");a.width!==r||a.height!==o?(a.width=r,a.height=o):A.clearRect(0,0,r,o),A.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),A.drawImage(i.getElement(),0,0,r,o);const d=A.getImageData(0,0,r,o).data;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],p=t[c+2],v=t[c+3],w=d[c],b=d[c+1],x=d[c+2],S=d[c+3];switch(this.mode){case"multiply":t[c]=u*w/255,t[c+1]=h*b/255,t[c+2]=p*x/255,t[c+3]=v*S/255;break;case"mask":t[c+3]=S}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Ye(Ye({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:o}=e,s=oo(e,aQ);return Ns.fromObject(o,t).then(i=>new this(Ye(Ye({},s),{},{image:i})))}}Xe(sf,"type","BlendImage"),Xe(sf,"defaults",{mode:"multiply",alpha:1}),Xe(sf,"uniformLocations",["uTransformMatrix","uImage"]),Ar.setClass(sf);class af extends qo{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){xg(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:o}}=e;const{width:s,height:i}=r;o.blurLayer1||(o.blurLayer1=la(),o.blurLayer2=la());const a=o.blurLayer1,A=o.blurLayer2;a.width===s&&a.height===i||(A.width=a.width=s,A.height=a.height=i);const d=a.getContext("2d"),c=A.getContext("2d"),u=15,h=.06*this.blur*.5;let p,v,w,b;for(d.putImageData(r,0,0),c.clearRect(0,0,s,i),b=-15;b<=u;b++)p=(Math.random()-.5)/4,v=b/u,w=h*v*s+p,c.globalAlpha=1-Math.abs(v),c.drawImage(a,w,p),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);for(b=-15;b<=u;b++)p=(Math.random()-.5)/4,v=b/u,w=h*v*i+p,c.globalAlpha=1-Math.abs(v),c.drawImage(a,p,w),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);t.drawImage(a,0,0);const x=t.getImageData(0,0,a.width,a.height);return d.globalAlpha=1,d.clearRect(0,0,a.width,a.height),x}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Xe(af,"type","Blur"),Xe(af,"defaults",{blur:0}),Xe(af,"uniformLocations",["uDelta"]),Ar.setClass(af);class Af extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let o=0;o<t.length;o+=4)t[o]+=r,t[o+1]+=r,t[o+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Xe(Af,"type","Brightness"),Xe(Af,"defaults",{brightness:0}),Xe(Af,"uniformLocations",["uBrightness"]),Ar.setClass(Af);const Kx={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class rc extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,o=this.colorsOnly;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],A=t[s+2];if(t[s]=i*r[0]+a*r[1]+A*r[2]+255*r[4],t[s+1]=i*r[5]+a*r[6]+A*r[7]+255*r[9],t[s+2]=i*r[10]+a*r[11]+A*r[12]+255*r[14],!o){const d=t[s+3];t[s]+=d*r[3],t[s+1]+=d*r[8],t[s+2]+=d*r[13],t[s+3]=i*r[15]+a*r[16]+A*r[17]+d*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,o),e.uniform4fv(t.uConstants,s)}toObject(){return Ye(Ye({},super.toObject()),{},{matrix:[...this.matrix]})}}function ud(n,e){var t;const r=(Xe(t=class extends rc{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Xe(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Ar.setClass(r,n),r}Xe(rc,"type","ColorMatrix"),Xe(rc,"defaults",Kx),Xe(rc,"uniformLocations",["uColorMatrix","uConstants"]),Ar.setClass(rc);ud("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ud("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ud("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ud("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ud("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ud("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ud("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class ab extends qo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){xg(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>Ar.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Xe(ab,"type","Composed"),Ar.setClass(ab);class lf extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=o*(t[s]-128)+128,t[s+1]=o*(t[s+1]-128)+128,t[s+2]=o*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Xe(lf,"type","Contrast"),Xe(lf,"defaults",{contrast:0}),Xe(lf,"uniformLocations",["uContrast"]),Ar.setClass(lf);const AQ={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class df extends qo{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return AQ[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,o=this.matrix,s=Math.round(Math.sqrt(o.length)),i=Math.floor(s/2),a=t.width,A=t.height,d=e.ctx.createImageData(a,A),c=d.data,u=this.opaque?1:0;let h,p,v,w,b,x,S,I,P,N,ee,j,D;for(ee=0;ee<A;ee++)for(N=0;N<a;N++){for(b=4*(ee*a+N),h=0,p=0,v=0,w=0,D=0;D<s;D++)for(j=0;j<s;j++)S=ee+D-i,x=N+j-i,S<0||S>=A||x<0||x>=a||(I=4*(S*a+x),P=o[D*s+j],h+=r[I]*P,p+=r[I+1]*P,v+=r[I+2]*P,u||(w+=r[I+3]*P));c[b]=h,c[b+1]=p,c[b+2]=v,c[b+3]=u?r[b+3]:w}e.imageData=d}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Ye(Ye({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Xe(df,"type","Convolute"),Xe(df,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Xe(df,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Ar.setClass(df);const $x="Gamma";class cf extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,o=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let A=0;A<256;A++)a.r[A]=255*Math.pow(A/255,o),a.g[A]=255*Math.pow(A/255,s),a.b[A]=255*Math.pow(A/255,i);for(let A=0;A<t.length;A+=4)t[A]=a.r[t[A]],t[A+1]=a.g[t[A+1]],t[A+2]=a.b[t[A+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:$x,gamma:this.gamma.concat()}}}Xe(cf,"type",$x),Xe(cf,"defaults",{gamma:[1,1,1]}),Xe(cf,"uniformLocations",["uGamma"]),Ar.setClass(cf);const lQ={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class uf extends qo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2];switch(this.mode){case"average":r=(s+i+a)/3;break;case"lightness":r=(Math.min(s,i,a)+Math.max(s,i,a))/2;break;case"luminosity":r=.21*s+.72*i+.07*a}t[o+2]=t[o+1]=t[o]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return lQ[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Xe(uf,"type","Grayscale"),Xe(uf,"defaults",{mode:"average"}),Xe(uf,"uniformLocations",["uMode"]),Ar.setClass(uf);const dQ=Ye(Ye({},Kx),{},{rotation:0});class Qv extends rc{calculateMatrix(){const e=this.rotation*Math.PI,t=BA(e),r=zA(e),o=1/3,s=Math.sqrt(o)*r,i=1-t;this.matrix=[t+i/3,o*i-s,o*i+s,0,0,o*i+s,t+o*i,o*i-s,0,0,o*i-s,o*i+s,t+o*i,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Xe(Qv,"type","HueRotation"),Xe(Qv,"defaults",dQ),Ar.setClass(Qv);class hf extends qo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Xe(hf,"type","Invert"),Xe(hf,"defaults",{alpha:!1,invert:!0}),Xe(hf,"uniformLocations",["uInvert","uAlpha"]),Ar.setClass(hf);class ff extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let o=0;o<t.length;o+=4){const s=(.5-Math.random())*r;t[o]+=s,t[o+1]+=s,t[o+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Xe(ff,"type","Noise"),Xe(ff,"defaults",{noise:0}),Xe(ff,"uniformLocations",["uNoise","uSeed"]),Ar.setClass(ff);class pf extends qo{applyTo2d(e){let{imageData:{data:t,width:r,height:o}}=e;for(let s=0;s<o;s+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const a=4*s*r+4*i,A=t[a],d=t[a+1],c=t[a+2],u=t[a+3];for(let h=s;h<Math.min(s+this.blocksize,o);h++)for(let p=i;p<Math.min(i+this.blocksize,r);p++){const v=4*h*r+4*p;t[v]=A,t[v+1]=d,t[v+2]=c,t[v+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Xe(pf,"type","Pixelate"),Xe(pf,"defaults",{blocksize:4}),Xe(pf,"uniformLocations",["uBlocksize"]),Ar.setClass(pf);class gf extends qo{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,o=new xi(this.color).getSource(),s=[o[0]-r,o[1]-r,o[2]-r],i=[o[0]+r,o[1]+r,o[2]+r];for(let a=0;a<t.length;a+=4){const A=t[a],d=t[a+1],c=t[a+2];A>s[0]&&d>s[1]&&c>s[2]&&A<i[0]&&d<i[1]&&c<i[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new xi(this.color).getSource(),o=this.distance,s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],i=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}Xe(gf,"type","RemoveColor"),Xe(gf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Xe(gf,"uniformLocations",["uLow","uHigh"]),Ar.setClass(gf);class vf extends qo{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),o=new Array(r);for(let s=1;s<=r;s++)o[s-1]=e(s*t);return o}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,o)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(o,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(o,`];
              sum += 2.0 * uTaps[`).concat(o,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){xg(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;const s=t.width,i=t.height,a=Math.round(s*r),A=Math.round(i*o);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,i,a,A):this.resizeType==="hermite"?this.hermiteFastResize(e,s,i,a,A):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,i,a,A):this.resizeType==="lanczos"?this.lanczosResize(e,s,i,a,A):new ImageData(a,A),e.imageData=d}sliceByTwo(e,t,r,o,s){const i=e.imageData,a=.5;let A=!1,d=!1,c=t*a,u=r*a;const h=e.filterBackend.resources;let p=0,v=0;const w=t;let b=0;h.sliceByTwo||(h.sliceByTwo=la());const x=h.sliceByTwo;(x.width<1.5*t||x.height<r)&&(x.width=1.5*t,x.height=r);const S=x.getContext("2d");for(S.clearRect(0,0,1.5*t,r),S.putImageData(i,0,0),o=Math.floor(o),s=Math.floor(s);!A||!d;)t=c,r=u,o<Math.floor(c*a)?c=Math.floor(c*a):(c=o,A=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,d=!0),S.drawImage(x,p,v,t,r,w,b,c,u),p=w,v=b,b+=u;return S.getImageData(p,v,o,s)}lanczosResize(e,t,r,o,s){const i=e.imageData.data,a=e.ctx.createImageData(o,s),A=a.data,d=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,p=2/this.rcpScaleY,v=Math.ceil(c*this.lanczosLobes/2),w=Math.ceil(u*this.lanczosLobes/2),b={},x={x:0,y:0},S={x:0,y:0};return function I(P){let N,ee,j,D,ne,xe,L,q,V,se,ve;for(x.x=(P+.5)*c,S.x=Math.floor(x.x),N=0;N<s;N++){for(x.y=(N+.5)*u,S.y=Math.floor(x.y),ne=0,xe=0,L=0,q=0,V=0,ee=S.x-v;ee<=S.x+v;ee++)if(!(ee<0||ee>=t)){se=Math.floor(1e3*Math.abs(ee-x.x)),b[se]||(b[se]={});for(let ie=S.y-w;ie<=S.y+w;ie++)ie<0||ie>=r||(ve=Math.floor(1e3*Math.abs(ie-x.y)),b[se][ve]||(b[se][ve]=d(Math.sqrt(Math.pow(se*h,2)+Math.pow(ve*p,2))/1e3)),j=b[se][ve],j>0&&(D=4*(ie*t+ee),ne+=j,xe+=j*i[D],L+=j*i[D+1],q+=j*i[D+2],V+=j*i[D+3]))}D=4*(N*o+P),A[D]=xe/ne,A[D+1]=L/ne,A[D+2]=q/ne,A[D+3]=V/ne}return++P<o?I(P):a}(0)}bilinearFiltering(e,t,r,o,s){let i,a,A,d,c,u,h,p,v,w,b,x,S,I=0;const P=this.rcpScaleX,N=this.rcpScaleY,ee=4*(t-1),j=e.imageData.data,D=e.ctx.createImageData(o,s),ne=D.data;for(h=0;h<s;h++)for(p=0;p<o;p++)for(c=Math.floor(P*p),u=Math.floor(N*h),v=P*p-c,w=N*h-u,S=4*(u*t+c),b=0;b<4;b++)i=j[S+b],a=j[S+4+b],A=j[S+ee+b],d=j[S+ee+4+b],x=i*(1-v)*(1-w)+a*v*(1-w)+A*w*(1-v)+d*v*w,ne[I++]=x;return D}hermiteFastResize(e,t,r,o,s){const i=this.rcpScaleX,a=this.rcpScaleY,A=Math.ceil(i/2),d=Math.ceil(a/2),c=e.imageData.data,u=e.ctx.createImageData(o,s),h=u.data;for(let p=0;p<s;p++)for(let v=0;v<o;v++){const w=4*(v+p*o);let b=0,x=0,S=0,I=0,P=0,N=0,ee=0;const j=(p+.5)*a;for(let D=Math.floor(p*a);D<(p+1)*a;D++){const ne=Math.abs(j-(D+.5))/d,xe=(v+.5)*i,L=ne*ne;for(let q=Math.floor(v*i);q<(v+1)*i;q++){let V=Math.abs(xe-(q+.5))/A;const se=Math.sqrt(L+V*V);se>1&&se<-1||(b=2*se*se*se-3*se*se+1,b>0&&(V=4*(q+D*t),ee+=b*c[V+3],S+=b,c[V+3]<255&&(b=b*c[V+3]/250),I+=b*c[V],P+=b*c[V+1],N+=b*c[V+2],x+=b))}}h[w]=I/x,h[w+1]=P/x,h[w+2]=N/x,h[w+3]=ee/S}return u}}Xe(vf,"type","Resize"),Xe(vf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Xe(vf,"uniformLocations",["uDelta","uTaps"]),Ar.setClass(vf);class mf extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a);t[o]+=A!==s?(A-s)*r:0,t[o+1]+=A!==i?(A-i)*r:0,t[o+2]+=A!==a?(A-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Xe(mf,"type","Saturation"),Xe(mf,"defaults",{saturation:0}),Xe(mf,"uniformLocations",["uSaturation"]),Ar.setClass(mf);class wf extends qo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a),d=(s+i+a)/3,c=2*Math.abs(A-d)/255*r;t[o]+=A!==s?(A-s)*c:0,t[o+1]+=A!==i?(A-i)*c:0,t[o+2]+=A!==a?(A-a)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Xe(wf,"type","Vibrance"),Xe(wf,"defaults",{vibrance:0}),Xe(wf,"uniformLocations",["uVibrance"]),Ar.setClass(wf);ns.prototype.toObject=function(n){return function(e=[]){return n.call(this,["data",...e])}}(ns.prototype.toObject);class Vx{constructor(e,t){this.currentScale=1,this.SNAP_THRESHOLD=10,this.resizeTimeout=null,this.originalWidth=t.width,this.originalHeight=t.height,this.aspectRatio=this.originalHeight/this.originalWidth,this.containerElement=t.containerElement,this.containerElement.style.height=`${this.containerElement.offsetWidth*this.aspectRatio}px`,this.canvas=new X0(e,{width:this.originalWidth,height:this.originalHeight,controlsAboveOverlay:!0,preserveObjectStacking:!0,selection:!0}),this.setupResizeObserver(),this.setupSnapBehavior(),this.setupSelectionBehavior()}toOriginalCoordinate(e){return e/this.currentScale}toScaledCoordinate(e){return e*this.currentScale}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.containerElement)}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.updateCanvasSize(),this.canvas.requestRenderAll()},100)}updateCanvasSize(){const e=this.containerElement.offsetWidth,t=this.canvas.backgroundImage?this.canvas.backgroundImage.height/this.canvas.backgroundImage.width:this.canvas.overlayImage?this.canvas.overlayImage.height/this.canvas.overlayImage.width:this.aspectRatio,r=e*t;this.containerElement.style.height=`${r}px`;const o=e/this.originalWidth;this.currentScale=o,this.canvas.setDimensions({width:e,height:r}),this.canvas.setViewportTransform([o,0,0,o,0,0]),this.canvas.requestRenderAll()}setupSnapBehavior(){this.canvas.on("object:moving",e=>{var A;const t=e.target;if(!t||((A=t.data)==null?void 0:A.editType)==="print")return;const o=this.canvas.getObjects().filter(d=>{var c;return((c=d.data)==null?void 0:c.editType)==="print"});let s=null,i=null;const a={left:t.left/this.currentScale,right:(t.left+t.width*t.scaleX)/this.currentScale,top:t.top,bottom:t.top+t.height*t.scaleY,centerX:t.left+t.width*t.scaleX/2,centerY:t.top+t.height*t.scaleY/2};for(const d of o){const c={left:d.left/this.currentScale,right:(d.left+d.width*d.scaleX)/this.currentScale,top:d.top,bottom:d.top+d.height*d.scaleY,centerX:d.left+d.width*d.scaleX/2,centerY:d.top+d.height*d.scaleY/2};Math.abs(a.left-c.left)<this.SNAP_THRESHOLD?s=c.left:Math.abs(a.right-c.right)<this.SNAP_THRESHOLD?s=c.right-t.width*t.scaleX:Math.abs(a.centerX-c.centerX)<this.SNAP_THRESHOLD&&(s=c.centerX-t.width*t.scaleX/2),Math.abs(a.top-c.top)<this.SNAP_THRESHOLD?i=c.top:Math.abs(a.bottom-c.bottom)<this.SNAP_THRESHOLD?i=c.bottom-t.height*t.scaleY:Math.abs(a.centerY-c.centerY)<this.SNAP_THRESHOLD&&(i=c.centerY-t.height*t.scaleY/2)}s!==null&&t.set("left",s),i!==null&&t.set("top",i)})}setupSelectionBehavior(){this.canvas.on("selection:created",e=>{var r,o;const t=(r=e.selected)==null?void 0:r[0];((o=t==null?void 0:t.data)==null?void 0:o.editType)==="print"&&this.canvas.discardActiveObject()}),this.canvas.on("mouse:down",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&t.data.objectId&&this.onPrintAreaClick&&this.onPrintAreaClick(t.data.objectId)}),this.canvas.on("mouse:over",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="pointer")}),this.canvas.on("mouse:out",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="default")})}setPrintAreaClickListener(e){this.onPrintAreaClick=e}async setCanvasJSON(e){console.log("json",e),await this.canvas.loadFromJSON(e),this.canvas.requestRenderAll()}addEditableArea(e){if(e.type==="rect"){const t=new na({left:e.properties.x,top:e.properties.y,width:e.properties.width,height:e.properties.height,fill:"rgba(0,216,255,0.3)",stroke:"rgba(0,203,239,1)",strokeWidth:1,cornerStyle:"circle",transparentCorners:!1,cornerColor:"rgba(0,203,239,0.5)",cornerSize:10,lockRotation:!0,hasControls:!0,data:{editType:e.properties.editType,objectId:e.properties.objectId}});return this.canvas.add(t),this.canvas.requestRenderAll(),t}}removeObject(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(this.canvas.remove(r),this.canvas.requestRenderAll())}setSelectionListener(e){this.canvas.on("selection:created",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:updated",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:cleared",()=>e(null))}zoomToPoint(e,t){const s=Math.min(Math.max(t,.1),3),i=new zt(e.x,e.y);this.canvas.zoomToPoint(i,s),this.canvas.requestRenderAll()}getCurrentScale(){return this.currentScale}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.canvas.dispose()}getCanvas(){return this.canvas}getObjects(){return this.canvas.getObjects()}getCanvasJson(){return this.canvas.toJSON()}getCanvasImage(){return this.canvas.toDataURL({format:"png",quality:1,multiplier:1})}async setImage(e){return new Promise((t,r)=>{const o=new Image;o.onload=()=>{const s={width:o.width,height:o.height,dataUrl:e},i=800;let a=o.width,A=o.height;(a>i||A>i)&&(a>A?(A=i*A/a,a=i):(a=i*a/A,A=i));const d=document.createElement("canvas");d.width=a,d.height=A;const c=d.getContext("2d");c==null||c.drawImage(o,0,0,a,A);const u=d.toDataURL("image/jpeg",.9);Ns.fromURL(u,{crossOrigin:"anonymous"}).then(h=>{const p=this.canvas.getWidth(),v=this.canvas.getHeight(),w=A/a,b=v/p;w>b?h.scaleToHeight(v):h.scaleToWidth(p),this.canvas.getObjects().filter(S=>{var I;return((I=S.data)==null?void 0:I.editType)==="print"}).forEach(async S=>{const I=S;I.absolutePositioned=!0,I.fill="transparent";const P=S.width/h.width,N=S.height/h.height,ee=Math.max(P,N),j=h.width*ee,D=h.height*ee;h.left=S.left+(S.width-j)/2,h.top=S.top+(S.height-D)/2,h.scaleToWidth(j),h.scaleToHeight(D),h.clipPath=I}),this.canvas.add(h),this.canvas.requestRenderAll(),t({thumbnail:{width:a,height:A,dataUrl:u},original:s})}).catch(r)},o.onerror=()=>{r(new Error("  "))},o.src=e})}async setOverlay(e){try{const t=await Ns.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.overlayImage=t,this.canvas.renderAll()}catch(t){throw console.error("     :",t),t}}async setBackground(e){try{const t=await Ns.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.backgroundImage=t,this.canvas.requestRenderAll()}catch(t){throw console.error("     :",t),t}}async setBackgroundOverlaySize(e){const t=this.containerElement.offsetWidth,r=t*(e.height/e.width);this.originalWidth=t,this.originalHeight=r,this.aspectRatio=r/t,this.containerElement.style.height=`${r}px`,e.scaleToWidth(t),e.scaleToHeight(r),e.set({top:0,left:0,originX:"left",originY:"top"})}updateObjectDisabled(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(r.set("fill","#cccccc"),r.set("opacity",.5),r.set("stroke","#cccccc"),r.set("strokeWidth",0),r.set("evented",!1)),this.canvas.requestRenderAll()}updateAllObjectEnabled(){this.canvas.getObjects().forEach(t=>{t.set("fill","rgba(0,216,255,0.3)"),t.set("opacity",1),t.set("stroke","rgba(0,203,239,1)"),t.set("strokeWidth",1),t.set("evented",!0)}),this.canvas.requestRenderAll()}}async function cQ(n,e="estimates",t){try{console.log("   :",{name:n.name,size:n.size,type:n.type,folder:e});const r=fQ(n);if(!r.isValid)return console.error("   :",r.errors),{success:!1,error:r.errors.join(", ")};const o=Date.now(),s=Math.random().toString(36).substring(2,8),i=pQ(n.name),a=`${o}_${s}_${i}`,A=`${e}/${a}`;console.log("   :",{fileName:a,filePath:A});const{data:d,error:c}=await vt.storage.from("uploads").upload(A,n,{cacheControl:"3600",upsert:!1});if(c)return console.error(" Storage  :",c),{success:!1,error:`  : ${c.message}`};console.log(" Storage  :",d);const{data:u}=vt.storage.from("uploads").getPublicUrl(A);if(!u.publicUrl)return console.error("  URL  "),{success:!1,error:"  URL  ."};console.log("  URL  :",u.publicUrl);const h={id:s,name:n.name,size:n.size,type:n.type,url:u.publicUrl,path:A,uploadedAt:new Date().toISOString()};return console.log("   :",h),{success:!0,file:h}}catch(r){return console.error("      :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}async function uQ(n,e="estimates",t){console.log("    :",{count:n.length,folder:e});const r=[];for(let s=0;s<n.length;s++){const i=n[s];console.log(`  ${s+1}/${n.length}  :`,i.name);const a=await cQ(i,e);if(r.push(a),t){const A=s+1,d=n.length,c=Math.round(A/d*100);t(A,d,c)}a.success||console.warn(`    (${s+1}/${n.length}):`,{fileName:i.name,error:a.error})}const o=r.filter(s=>s.success).length;return console.log("    :",{total:n.length,success:o,failed:n.length-o}),r}async function hQ(n){try{console.log("   :",n);const{error:e}=await vt.storage.from("uploads").remove([n]);return e?(console.error("   :",e),!1):(console.log("   :",n),!0)}catch(e){return console.error("    :",e),!1}}async function Ab(n,e,t){try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e,fileCount:t.length});const{data:r,error:o}=await vt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("object_id",e).single();if(o&&o.code!=="PGRST116")return console.error("    :",o),{success:!1,error:`   : ${o.message}`};const s={files:t,updatedAt:new Date().toISOString(),totalFiles:t.length,totalSize:t.reduce((i,a)=>i+a.size,0)};if(r){const{error:i}=await vt.from("estimate_simple_prints").update({uploaded_files:s,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)return console.error("   :",i),{success:!1,error:`  : ${i.message}`};console.log("    :",r.id)}else{const{error:i}=await vt.from("estimate_simple_prints").insert({estimate_id:n,object_id:e,title:` ${e}`,print_method:"file-upload",uploaded_files:s,price:0,original_price:0,discount_amount:0});if(i)return console.error("    :",i),{success:!1,error:`   : ${i.message}`};console.log("    ")}return{success:!0}}catch(r){return console.error(" estimate_simple_prints   :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}function fQ(n){const e=[];n.size>52428800&&e.push(`   .  50MB  . (: ${Math.round(n.size/1024/1024)}MB)`);const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/postscript","application/illustrator","image/vnd.adobe.photoshop"],o=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".eps",".ai",".psd"],s=n.name.toLowerCase(),i=o.some(A=>s.endsWith(A)),a=r.includes(n.type);return!i&&!a&&e.push("   . ( : JPG, PNG, GIF, PDF, AI, EPS, PSD, SVG)"),n.name.length>255&&e.push("  . 255  ."),{isValid:e.length===0,errors:e}}function pQ(n){return n.replace(/[^-a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"")}function gQ(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}async function vQ(n,e){var t;try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e});const{data:r,error:o}=await vt.from("estimate_simple_prints").select("uploaded_files, file_metadata").eq("estimate_id",n).eq("object_id",e).single();if(o)return o.code==="PGRST116"?{success:!0,files:[]}:(console.error("    :",o),{success:!1,files:[],error:`   : ${o.message}`});const s=r==null?void 0:r.uploaded_files;let i=(s==null?void 0:s.files)||[];return console.log(" DB  :",{hasUploadedFiles:!!s,uploadedFilesType:typeof s,uploadedFilesHasFiles:!!(s!=null&&s.files),uploadedFilesLength:((t=s==null?void 0:s.files)==null?void 0:t.length)||0,hasFileMetadata:!!(r!=null&&r.file_metadata),fileMetadataType:typeof(r==null?void 0:r.file_metadata),fileMetadataLength:Array.isArray(r==null?void 0:r.file_metadata)?r.file_metadata.length:0}),i.length===0&&(r!=null&&r.file_metadata)&&(console.log(" uploaded_files  - file_metadata  "),i=(Array.isArray(r.file_metadata)?r.file_metadata:[]).map(A=>({id:Math.random().toString(36).substring(2,8),name:A.name||"",size:A.size||0,type:A.type||"",url:A.url||"#",path:A.path||"",uploadedAt:new Date().toISOString()})),console.log(" file_metadata   :",{fileCount:i.length,files:i.map(A=>({name:A.name,hasUrl:A.url!=="#"}))})),console.log("    :",{fileCount:i.length,source:i.length>0&&(s!=null&&s.files)?"uploaded_files":"file_metadata"}),{success:!0,files:i}}catch(r){return console.error("     :",r),{success:!1,files:[],error:r instanceof Error?r.message:"    ."}}}var mQ=G('<div class="odz-absolute -odz-top-2 -odz-right-2 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),wQ=G('<button><!> <div class="odz-text-center"><span> </span></div></button>'),bQ=G('<div class="odz-mt-3 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><svg class="odz-w-4 odz-h-4 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-w-full odz-bg-blue-200 odz-rounded-full odz-h-2"><div class="odz-bg-blue-600 odz-h-2 odz-rounded-full odz-transition-all odz-duration-300"></div></div></div>'),yQ=G('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-red-700"> </span></div>'),_Q=G('<a target="_blank" rel="noopener noreferrer" class="odz-p-1 odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></a>'),xQ=G('<button class="odz-p-1 odz-text-gray-400 odz-cursor-not-allowed odz-rounded" disabled title="  .   ."><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg></button>'),BQ=G('<div class="odz-flex odz-items-center odz-justify-between odz-bg-white odz-border odz-border-gray-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-min-w-0 odz-flex-1"><svg class="odz-w-4 odz-h-4 odz-text-gray-500 odz-flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <div class="odz-min-w-0 odz-flex-1"><p class="odz-text-sm odz-font-medium odz-text-gray-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div> <div class="odz-flex odz-items-center odz-gap-2"><!> <button class="odz-p-1 odz-text-red-600 hover:odz-text-red-800 hover:odz-bg-red-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),zQ=G('<div class="odz-mt-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-green-700"> </span></div> <div class="odz-space-y-2"></div></div>'),CQ=G('<div class="odz-flex odz-items-center odz-gap-1 odz-text-xs odz-text-gray-600 odz-bg-gray-50 odz-px-2 odz-py-1 odz-rounded odz-min-w-0"><span class="odz-flex-shrink-0"></span> <span class="odz-truncate odz-min-w-0"> </span> <span class="odz-flex-shrink-0"> </span></div>'),SQ=G('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-mt-2 odz-space-y-1"></div>',1),EQ=G(`<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><span class="odz-text-white odz-font-bold odz-text-sm"></span></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800"> </h3> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <button class="odz-w-8 odz-h-8 odz-flex odz-items-center odz-justify-center odz-text-gray-400 hover:odz-text-red-500
                                   hover:odz-bg-red-50 odz-rounded-full odz-transition-all odz-duration-200" aria-label="  "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-mb-6"><div class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3"> </div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div></div> <div class="odz-mb-4"><label class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3">  </label> <div class="odz-relative"><input type="file" multiple accept="image/*,.pdf,.ai,.eps" class="odz-absolute odz-inset-0 odz-w-full odz-h-full odz-opacity-0 odz-cursor-pointer"> <div class="odz-bg-white odz-border-2 odz-border-dashed odz-border-gray-300 odz-rounded-xl odz-p-6
                                       hover:odz-border-red-300 hover:odz-bg-red-50 odz-transition-colors odz-duration-200"><div class="odz-text-center"><svg class="odz-w-8 odz-h-8 odz-text-gray-400 odz-mx-auto odz-mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <p class="odz-text-sm odz-text-gray-600 odz-mb-1">   </p> <p class="odz-text-xs odz-text-gray-500">, PDF, AI, EPS  </p></div></div></div> <!> <!> <!> <!></div></div>`),FQ=G('<div class="odz-mt-2 odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3 odz-h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span> </span></div>'),IQ=G(`<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"></div> <div class="odz-mt-6"><div class="odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><div class="odz-w-8 odz-h-8 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800">  </h3> <p class="odz-text-sm odz-text-gray-600">    </p></div></div> <textarea class="odz-w-full odz-h-24 odz-p-4 odz-border-2 odz-border-gray-200 odz-rounded-xl
                           odz-resize-none odz-text-sm odz-text-gray-700
                           focus:odz-border-blue-400 focus:odz-ring-2 focus:odz-ring-blue-100 focus:odz-outline-none
                           placeholder:odz-text-gray-400 odz-transition-all odz-duration-200" placeholder=":    ,     ,     "></textarea> <!></div></div></div>`),UQ=G('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>      .</p></div></div>'),QQ=G('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">  <span class="odz-text-sm odz-font-normal odz-text-gray-500">   .</span></h1> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas></div> <p class="odz-text-sm odz-text-gray-500 odz-mt-4">          .</p></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function TQ(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(ni,"$shopStore",t),s=()=>on(wt,"$estimateStore",t);let i=gt(e,"productId",8);gt(e,"estimateId",8,void 0);let a=gt(e,"idx",8,void 0),A=gt(e,"onComplete",8),d=gt(e,"onCancel",8,()=>{}),c,u=null,h=[],p=ze(),v=ze(),w=ze(),b=ze([]),x=ze(!1);Zn(async()=>{c=a()??0;let Q=!1;try{await Promise.race([S(),new Promise((k,O)=>setTimeout(()=>O(new Error("  timeout (10)")),1e4))]),Q=!0}catch{}try{Q&&(await ra(),await new Promise(k=>setTimeout(k,100))),await I()}catch{}const M=k=>{k.detail.productId===i()&&(console.log(" SimplePrint   :",i()),ee())};return window.addEventListener("saveSimplePrintState",M),()=>{window.removeEventListener("saveSimplePrintState",M)}}),ps(()=>{if(l(b).length>0){const Q=l(b).map(M=>({objectId:M.objectId,title:M.title,printMethod:M.printMethod,savedFileInfo:M.savedFileInfo||M.uploadedFiles.map(k=>({name:k.name,size:k.size,type:k.type,url:k.url,path:k.path}))}));wt.updateSimplePrints(c,Q)}l(w)&&l(w).destroy()});async function S(){await ra();let Q=0;const M=50;for(;Q<M&&!l(v);)await new Promise(k=>setTimeout(k,100)),Q++;if(!l(v))throw new Error("    .");try{if(u=await j5(i(),o().id),u!=null&&u.id&&(h=await R5(u.id)),u!=null&&u.canvas_json){const k=typeof u.canvas_json=="string"?JSON.parse(u.canvas_json):u.canvas_json,O=k.backgroundImage.width*k.backgroundImage.scaleX,K=k.backgroundImage.height*k.backgroundImage.scaleY;y(w,new Vx(l(v),{width:O,height:K,containerElement:l(p)})),l(w).setPrintAreaClickListener(async R=>{j(R)}),await l(w).setCanvasJSON(k),await new Promise(R=>setTimeout(R,200))}}catch(k){throw k}}async function I(){var Q,M;if(l(w)){let k=0;const O=30;for(;k<O;){try{if((((M=(Q=l(w)).getObjects)==null?void 0:M.call(Q))||[]).length>0)break}catch{}k++,await new Promise(K=>setTimeout(K,100))}}try{let k=[];const O=s().products[c];O!=null&&O.simplePrints&&O.simplePrints.length>0?k=O.simplePrints:O!=null&&O.simplePrintState&&O.simplePrintState.length>0&&(k=O.simplePrintState),k&&Array.isArray(k)&&k.length>0&&(y(x,!0),y(b,k.map(K=>({objectId:K.objectId,title:K.title,printMethod:K.printMethod||"",uploadedFiles:[],savedFileInfo:K.savedFileInfo||[]}))),await P(),l(w)&&(await ra(),await new Promise(K=>setTimeout(K,50)),D()),y(x,!1))}catch{y(x,!1)}}async function P(){for(const Q of l(b))try{if(s().estimateId){const M=await vQ(s().estimateId,Q.objectId);if(M.success&&M.files.length>0){y(b,l(b).map(k=>k.objectId===Q.objectId?{...k,uploadedFiles:M.files}:k));continue}}if(Q.savedFileInfo&&Q.savedFileInfo.length>0){const M=Q.savedFileInfo.map(k=>({id:Math.random().toString(36).substring(2,8),name:k.name,size:k.size,type:k.type,url:k.url||"#",path:k.path||"",uploadedAt:new Date().toISOString()}));y(b,l(b).map(k=>k.objectId===Q.objectId?{...k,uploadedFiles:M}:k))}}catch{if(Q.savedFileInfo&&Q.savedFileInfo.length>0){const k=Q.savedFileInfo.map(O=>({id:Math.random().toString(36).substring(2,8),name:O.name,size:O.size,type:O.type,url:O.url||"#",path:O.path||"",uploadedAt:new Date().toISOString()}));y(b,l(b).map(O=>O.objectId===Q.objectId?{...O,uploadedFiles:k}:O))}}}async function N(Q,M){try{if(!await hQ(M.path))throw new Error("Storage   .");if(y(b,l(b).map(O=>{var K;return O.objectId===Q?{...O,uploadedFiles:O.uploadedFiles.filter(R=>R.id!==M.id),savedFileInfo:(K=O.savedFileInfo)==null?void 0:K.filter(R=>R.name!==M.name)}:O})),s().estimateId){const O=l(b).find(K=>K.objectId===Q);O&&await Ab(s().estimateId,Q,O.uploadedFiles)}ee()}catch(k){y(b,l(b).map(O=>O.objectId===Q?{...O,uploadError:`  : ${k instanceof Error?k.message:"   "}`}:O)),setTimeout(()=>{y(b,l(b).map(O=>O.objectId===Q?{...O,uploadError:void 0}:O))},3e3)}}function ee(){if(!l(x))try{const Q=l(b).map(M=>({objectId:M.objectId,title:M.title,printMethod:M.printMethod,savedFileInfo:M.savedFileInfo||M.uploadedFiles.map(k=>({name:k.name,size:k.size,type:k.type,url:k.url,path:k.path}))}));if(wt.updateSimplePrints(c,Q),typeof window<"u")try{const M=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.saveCurrentState"}});window.dispatchEvent(M)}catch{}}catch{}}function j(Q){if(l(b).find(R=>R.objectId===Q))return;const k=h.find(R=>R.object_id===Q),O=k?k.title:`${Q} `,K={objectId:Q,title:O,printMethod:"",uploadedFiles:[],isUploading:!1,uploadProgress:0,uploadError:void 0,savedFileInfo:[]};y(b,[...l(b),K]),D(),ee()}function D(){if(l(w))try{l(w).updateAllObjectEnabled(),l(b).forEach(Q=>{l(w).updateObjectDisabled(Q.objectId)})}catch{}}function ne(Q){var M,k;if(console.log(""),console.log(" [SimplePrint] removePrintFromArea :",{objectId:Q,productId:i(),idx:a()}),console.log(" [BEFORE] selectedPrintAreas:",JSON.parse(JSON.stringify(l(b)))),console.log(" [BEFORE] estimateStore.products[idx].simple_prints:",JSON.parse(JSON.stringify(((M=s().products[a()??0])==null?void 0:M.simple_prints)||[]))),y(b,l(b).filter(O=>O.objectId!==Q)),wt.cancelPrint(s().index,Q),D(),ee(),console.log(" [AFTER] selectedPrintAreas:",JSON.parse(JSON.stringify(l(b)))),console.log(" [AFTER] estimateStore.products[idx].simple_prints:",JSON.parse(JSON.stringify(((k=s().products[a()??0])==null?void 0:k.simple_prints)||[]))),console.log(""),typeof window<"u")try{const O=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.removePrintFromArea"}});window.dispatchEvent(O)}catch{}}function xe(Q,M){if(y(b,l(b).map(k=>k.objectId===Q?{...k,printMethod:M}:k)),ee(),typeof window<"u")try{const k=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.updatePrintMethod"}});window.dispatchEvent(k)}catch{}}async function L(Q,M){const k=Array.from(M);y(b,l(b).map(O=>O.objectId===Q?{...O,isUploading:!0,uploadProgress:0,uploadError:void 0}:O));try{const O=await uQ(k,`estimates/${s().estimateId||"temp"}`,(Be,Pe,He)=>{y(b,l(b).map(W=>W.objectId===Q?{...W,uploadProgress:He}:W))}),K=O.filter(Be=>Be.success&&Be.file).map(Be=>Be.file),R=O.filter(Be=>!Be.success);if(K.length>0&&s().estimateId){const Be=await Ab(s().estimateId,Q,K);if(!Be.success)throw new Error(Be.error||"  .")}const de=k.map(Be=>({name:Be.name,size:Be.size,type:Be.type}));if(y(b,l(b).map(Be=>Be.objectId===Q?{...Be,uploadedFiles:K,isUploading:!1,uploadProgress:100,uploadError:R.length>0?`${R.length}   `:void 0,savedFileInfo:de}:Be)),ee(),typeof window<"u")try{const Be=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.handleFileUpload"}});window.dispatchEvent(Be)}catch{}if(R.length>0){const Be=R.map(Pe=>Pe.error).join(", ")}}catch(O){y(b,l(b).map(K=>K.objectId===Q?{...K,isUploading:!1,uploadProgress:0,uploadError:O instanceof Error?O.message:"  ."}:K))}}function q(Q){const k=Q.target.value;wt.update(O=>({...O,uploadMemo:k}))}Zt(()=>(l(b),l(w),l(x)),()=>{l(b)&&l(w)&&!l(x)&&D()}),Fo(),cn();var V=QQ(),se=B(g(V),2),ve=g(se),ie=g(ve),ge=g(ie);hs(ge,Q=>y(v,Q),()=>l(v)),hs(ie,Q=>y(p,Q),()=>l(p));var re=B(ve,2),ue=g(re);{var Z=Q=>{var M=IQ(),k=g(M),O=B(g(k),2),K=B(g(O),2),R=g(K),de=B(k,2);sr(de,5,()=>l(b),vr,(te,Ae,he)=>{var we=EQ(),ye=g(we),Ie=g(ye),le=g(Ie),Te=g(le);Te.textContent=he+1;var Fe=B(le,2),Me=g(Fe),Ne=g(Me),fe=B(Ie,2),J=B(ye,2),Se=B(g(J),2);sr(Se,4,()=>["","","",""," "],vr,(nt,st)=>{var pt=wQ();const It=At(()=>l(Ae).printMethod===st);var Pt=g(pt);{var St=Lt=>{var Et=mQ();U(Lt,Et)};be(Pt,Lt=>{l(It)&&Lt(St)})}var bt=B(Pt,2),ft=g(bt),jt=g(ft);De(()=>{Pr(pt,`odz-group odz-relative odz-bg-white odz-border-2 odz-rounded-xl odz-p-3 odz-transition-all odz-duration-200
                                           ${(l(It)?"odz-border-red-400 odz-bg-gradient-to-br odz-from-red-50 odz-to-rose-50 odz-shadow-md odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md hover:odz-scale-[1.02]")??""}`),Pr(ft,`odz-text-sm odz-font-semibold ${(l(It)?"odz-text-red-700":"odz-text-gray-700")??""}`),Qe(jt,st)}),it("click",pt,()=>xe(l(Ae).objectId,st)),U(nt,pt)});var $=B(J,2),Ce=g($),Ee=B(Ce,2),Oe=g(Ee),je=B(Ee,2);{var ke=nt=>{var st=bQ(),pt=g(st),It=B(g(pt),2),Pt=g(It),St=B(pt,2),bt=g(St);De(()=>{Qe(Pt,`  ... ${l(Ae).uploadProgress||0}%`),cr(bt,"style",`width: ${l(Ae).uploadProgress||0}%`)}),U(nt,st)};be(je,nt=>{l(Ae).isUploading&&nt(ke)})}var pe=B(je,2);{var Re=nt=>{var st=yQ(),pt=B(g(st),2),It=g(pt);De(()=>Qe(It,l(Ae).uploadError)),U(nt,st)};be(pe,nt=>{l(Ae).uploadError&&nt(Re)})}var et=B(pe,2);{var Je=nt=>{var st=zQ(),pt=g(st),It=B(g(pt),2),Pt=g(It),St=B(pt,2);sr(St,5,()=>l(Ae).uploadedFiles,vr,(bt,ft)=>{var jt=BQ(),Lt=g(jt),Et=B(g(Lt),2),$e=g(Et),dt=g($e),at=B($e,2),Vt=g(at),Jt=B(Lt,2),Kt=g(Jt);{var Gt=xt=>{var Dt=_Q();De(()=>cr(Dt,"href",l(ft).url)),U(xt,Dt)},er=xt=>{var Dt=xQ();U(xt,Dt)};be(Kt,xt=>{l(ft).url&&l(ft).url!=="#"?xt(Gt):xt(er,!1)})}var Ct=B(Kt,2);De(xt=>{cr($e,"title",l(ft).name),Qe(dt,l(ft).name),Qe(Vt,xt)},[()=>gQ(l(ft).size)],At),it("click",Ct,()=>N(l(Ae).objectId,l(ft))),U(bt,jt)}),De(()=>Qe(Pt,`${l(Ae).uploadedFiles.length??""}  `)),U(nt,st)};be(et,nt=>{l(Ae).uploadedFiles.length>0&&nt(Je)})}var rt=B(et,2);{var Ke=nt=>{var st=SQ(),pt=lt(st),It=B(g(pt),2),Pt=g(It),St=B(pt,2);sr(St,5,()=>l(Ae).savedFileInfo,vr,(bt,ft)=>{var jt=CQ(),Lt=B(g(jt),2),Et=g(Lt),$e=B(Lt,2),dt=g($e);De(at=>{cr(Lt,"title",l(ft).name),Qe(Et,l(ft).name),Qe(dt,`(${at??""}KB)`)},[()=>Math.round(l(ft).size/1024)],At),U(bt,jt)}),De(()=>Qe(Pt,`  ${l(Ae).savedFileInfo.length??""}    (  )`)),U(nt,st)};be(rt,nt=>{l(Ae).savedFileInfo&&l(Ae).savedFileInfo.length>0&&l(Ae).uploadedFiles.length===0&&nt(Ke)})}De(()=>{Qe(Ne,l(Ae).title),cr(Ce,"for",`file-upload-${l(Ae).objectId??""}`),cr(Oe,"id",`file-upload-${l(Ae).objectId??""}`)}),it("click",fe,()=>ne(l(Ae).objectId)),it("change",Oe,nt=>L(l(Ae).objectId,nt.target.files)),U(te,we)});var Be=B(de,2),Pe=g(Be),He=B(g(Pe),2),W=B(He,2);{var H=te=>{var Ae=FQ(),he=B(g(Ae),2),we=g(he);De(ye=>Qe(we,`${ye??""} `),[()=>s().uploadMemo.trim().length],At),U(te,Ae)};be(W,te=>{s().uploadMemo&&s().uploadMemo.trim().length>0&&te(H)})}De(()=>Qe(R,`${l(b).length??""}  `)),Fr(He,()=>s().uploadMemo,te=>nr(wt,ct(s).uploadMemo=te,ct(s))),it("input",He,q),U(Q,M)},_e=Q=>{var M=UQ();U(Q,M)};be(ue,Q=>{l(b).length>0?Q(Z):Q(_e,!1)})}var z=B(se,2),E=g(z),F=B(E,2);it("click",E,function(...Q){var M;(M=d())==null||M.apply(this,Q)}),it("click",F,function(...Q){var M;(M=A())==null||M.apply(this,Q)}),U(n,V),An(),r()}const Iu="uploads";function LQ(n){try{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e||e.length!==3)return console.error("Invalid base64 data URL format"),null;const t=e[1],r=e[2],o=atob(r),s=new Array(o.length);for(let A=0;A<o.length;A++)s[A]=o.charCodeAt(A);const i=new Uint8Array(s);return{blob:new Blob([i],{type:t}),contentType:t}}catch(e){return console.error("Error converting base64 to Blob:",e),null}}function PQ(n){const e=n.lastIndexOf("."),t=e>0?n.substring(0,e):n,r=e>0?n.substring(e):"";let o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"").replace(/_{2,}/g,"_").replace(/^_|_$/g,"").substring(0,200);o||(o=`file_${Date.now()}`);const s=r.replace(/[^\x00-\x7F]/g,"").toLowerCase();return o+s}async function kQ(n,e){var t;try{let r,o,s={};if(n instanceof File)o=n,s.contentType=n.type;else if(typeof n=="string"&&n.startsWith("data:")){const a=LQ(n);if(!a)throw new Error("Failed to convert base64 string to Blob.");o=a.blob,s.contentType=a.contentType}else throw new Error("Invalid data type provided. Must be a File object or a base64 data URL string.");if(console.log(`Uploading to bucket: ${Iu}, path: ${e}, contentType: ${s.contentType}`),r=await vt.storage.from(Iu).upload(e,o,{cacheControl:"3600",upsert:!0,contentType:s.contentType}),r.error)throw console.error("Supabase upload error:",r.error),r.error;if(!((t=r.data)!=null&&t.path))throw new Error("Upload successful but no path returned.");const{data:i}=vt.storage.from(Iu).getPublicUrl(r.data.path);return i!=null&&i.publicUrl?(console.log("File uploaded successfully:",i.publicUrl),i.publicUrl):(console.warn("Could not get public URL after upload."),null)}catch(r){return console.error("Error in uploadImage function:",r),null}}async function OQ(n){if(!n)return console.error("deleteImage: filePath is required."),!1;console.log(`Attempting to delete file from bucket: ${Iu}, path: ${n}`);try{const{data:e,error:t}=await vt.storage.from(Iu).remove([n]);if(t)throw console.error("Supabase delete error:",t),t;return e&&e.length>0?(console.log(`File deleted successfully: ${n}`),!0):(console.warn(`File deletion response for ${n} was successful but no data returned. It might have already been deleted or the path was incorrect.`),!0)}catch(e){return console.error("Error in deleteImage function:",e),!1}}var DQ=G('<th class="odz-bg-base-200"> </th>'),NQ=G('<td><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder=" "></td>'),MQ=G('<tr><td><input type="checkbox" class="odz-checkbox"></td><th class="odz-text-sm odz-font-normal odz-whitespace-nowrap"> </th><!></tr>'),HQ=G('<td><div class="odz-flex odz-gap-1"><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder="  "> <button class="odz-btn odz-btn-secondary odz-btn-sm"></button></div></td>'),jQ=G('<div class="odz-overflow-x-auto odz-mt-4"><table class="odz-table odz-table-zebra odz-w-full"><thead><tr><th class="odz-bg-base-200 odz-w-10"><input type="checkbox" class="odz-checkbox"></th><th class="odz-bg-base-200"></th><!></tr></thead><tbody><!><tr class="odz-bg-base-100"><td colspan="2" class="odz-font-bold">  </td><!></tr></tbody></table> <div class="odz-mt-4"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>');function RQ(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=ze(),i=ze(),a=ze(),A=ze();let d=gt(e,"onComplete",8,()=>{}),c=gt(e,"nameSheet",28,()=>({})),u=ze({});Zn(()=>{y(u,JSON.parse(JSON.stringify(c())))});let h=ze({}),p=ze({});function v(ie){const ge={...l(h)};l(a).forEach(re=>{ge[re.id]=ie}),y(h,ge)}function w(ie){const ge=l(p)[ie]||"",re={...l(u)};l(a).forEach(ue=>{l(h)[ue.id]&&(re[ue.title]||(re[ue.title]={}),re[ue.title][l(b)[ie]||ie]=ge)}),y(u,re)}let b=ze({});function x(ie,ge,re,ue,Z){l(u)[ge]||zr(u,l(u)[ge]={}),zr(u,l(u)[ge][ue]=Z)}function S(){l(a).forEach(ie=>{l(u)[ie.title]||zr(u,l(u)[ie.title]={}),l(A).forEach(ge=>{const re=l(b)[ge.objectId]||ge.objectId;l(u)[ie.title][re]===void 0&&zr(u,l(u)[ie.title][re]="")})}),c(JSON.parse(JSON.stringify(l(u)))),console.log("  :",c()),d()(c())}Zt(()=>o(),()=>{y(s,o().products[o().index])}),Zt(()=>l(s),()=>{var ie;y(i,((ie=l(s))==null?void 0:ie.variants)||[])}),Zt(()=>l(i),()=>{y(a,[...l(i)].sort((ie,ge)=>ie.title.localeCompare(ge.title)))}),Zt(()=>l(s),()=>{var ie;y(A,((ie=l(s))==null?void 0:ie.prints)||[])}),Zt(()=>(l(A),l(b),xp),()=>{l(A)&&l(A).length>0&&l(A).forEach(async ie=>{if(ie.objectId&&!l(b)[ie.objectId])try{const ge=await xp(ie.objectId);y(b,{...l(b),[ie.objectId]:(ge==null?void 0:ge.title)||ie.objectId})}catch{y(b,{...l(b),[ie.objectId]:ie.objectId})}})}),Zt(()=>(l(a),l(A),l(u),l(b),no(c())),()=>{if(l(a).length>0&&l(A).length>0){const ie={...l(u)};l(a).forEach(ge=>{ie[ge.title]||(ie[ge.title]={}),l(A).forEach(re=>{var Z;const ue=l(b)[re.objectId]||re.objectId;ie[ge.title][ue]===void 0&&(ie[ge.title][ue]=((Z=c()[ge.title])==null?void 0:Z[ue])||"")})}),y(u,ie)}}),Zt(()=>(l(a),l(h)),()=>{l(a)&&l(a).length>0&&l(a).forEach(ie=>{l(h)[ie.id]===void 0&&y(h,{...l(h),[ie.id]:!0})})}),Fo(),cn();var I=jQ(),P=g(I),N=g(P),ee=g(N),j=g(ee),D=g(j),ne=B(j,2);sr(ne,1,()=>l(A),vr,(ie,ge)=>{var re=DQ(),ue=g(re);De(()=>Qe(ue,l(b)[l(ge).objectId]||l(ge).objectId)),U(ie,re)});var xe=B(N),L=g(xe);sr(L,1,()=>l(a),vr,(ie,ge)=>{var re=MQ(),ue=g(re),Z=g(ue),_e=B(ue),z=g(_e),E=B(_e);sr(E,1,()=>l(A),vr,(F,Q)=>{var M=NQ(),k=g(M);De(()=>{var O;return t1(k,((O=l(u)[l(ge).title])==null?void 0:O[l(b)[l(Q).objectId]||l(Q).objectId])||"")}),it("input",k,O=>x(l(ge).id,l(ge).title,l(Q).objectId,l(b)[l(Q).objectId]||l(Q).objectId,O.target.value)),U(F,M)}),De(()=>Qe(z,l(ge).title)),B0(Z,()=>l(h)[l(ge).id],F=>zr(h,l(h)[l(ge).id]=F)),U(ie,re)});var q=B(L),V=B(g(q));sr(V,1,()=>l(A),vr,(ie,ge)=>{var re=HQ(),ue=g(re),Z=g(ue),_e=B(Z,2);Fr(Z,()=>l(p)[l(ge).objectId],z=>zr(p,l(p)[l(ge).objectId]=z)),it("click",_e,()=>w(l(ge).objectId)),U(ie,re)});var se=B(P,2),ve=g(se);De(ie=>ju(D,ie),[()=>Object.values(l(h)).every(ie=>ie)],At),it("change",D,ie=>v(ie.target.checked)),it("click",ve,S),U(n,I),An(),r()}var qQ=G('<span class="odz-text-info odz-inline-flex odz-items-center odz-gap-1"><!>  ...</span>'),KQ=G('<span class="odz-text-success"> </span>'),$Q=G('<span class="odz-text-error"> </span>'),VQ=G('<span class="odz-text-gray-500"> </span>'),GQ=G('<a target="_blank" rel="noopener noreferrer" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50" aria-label=" " title="   "><!></a>'),WQ=G('<div class="odz-flex odz-items-center odz-gap-4 odz-p-3 odz-bg-base-200 odz-rounded-lg odz-relative"><div class="odz-flex-1 odz-min-w-0"><p class="odz-font-medium odz-truncate"> </p> <p class="odz-text-sm odz-text-base-content/70"><!> <!></p></div> <!> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" aria-label=" "><!></button></div>'),XQ=G('<div class="odz-mt-4 odz-flex odz-flex-col odz-gap-2"></div>'),YQ=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),JQ=G('<label for="nameSheet" class="odz-label odz-label-text odz-text-sm odz-mt-4 odz-ml-4 odz-font-bold">       .</label> <div class="odz-card-actions odz-p-4 odz-justify-start"><button class="odz-btn odz-btn-secondary odz-min-w-32"> </button></div> <!>',1),ZQ=G("<!>  ...",1),eT=G("<!>  ...",1),tT=G('<div class="odz-card odz-bg-base-100 odz-w-full"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base"> </h2> <div role="presentation"><div class="odz-flex odz-flex-col odz-items-center odz-gap-4"><svg xmlns="http://www.w3.org/2000/svg" class="odz-w-12 odz-h-12 odz-text-base-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <div class="odz-text-base-content"><p class="odz-font-medium">   </p> <label class="odz-btn odz-btn-primary odz-btn-sm odz-mt-2">  <input type="file" multiple class="odz-hidden" accept="image/*"></label></div></div></div> <!> <h2 class="odz-card-title odz-text-base odz-mt-4"> </h2> <textarea name="" id="" rows="5" class="odz-textarea odz-text-sm odz-textarea-bordered odz-textarea-lg odz-w-full odz-mt-4"></textarea></div> <!> <div class="odz-card-actions odz-p-4 odz-justify-center"><button class="odz-btn odz-btn-primary odz-min-w-32"><!></button></div></div>');function rT(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(ni,"$shopStore",t),s=ze(),i=ze(),a=ze();let A=gt(e,"fileUploadTitle",8," "),d=gt(e,"callback",8),c=gt(e,"uploadMemo",12,""),u=gt(e,"initialFiles",24,()=>[]),h=gt(e,"useNameSheet",8,!1),p=gt(e,"nameSheet",28,()=>({})),v=ze([]),w=ze(),b=ze(!1),x=ze(!1),S=ze(!1);async function I(K){const R=Array.from(K);for(const de of R){const Be=crypto.randomUUID(),Pe=PQ(de.name),He=`estimate-uploads/${o().id}/${Date.now()}-${Pe}`,W={id:Be,file:de,status:"uploading",path:He};y(v,[...l(v),W]);try{const H=await kQ(de,He);y(v,l(v).map(te=>te.id===Be?{...te,status:H?"uploaded":"error",url:H,error:H?null:"Upload failed to return URL"}:te))}catch(H){console.error("Upload error for file:",de.name,H),y(v,l(v).map(te=>te.id===Be?{...te,status:"error",error:H.message||"Unknown upload error"}:te))}}}function P(K){K.preventDefault(),y(b,!0)}function N(K){K.preventDefault(),y(b,!1)}function ee(K){var de;K.preventDefault(),y(b,!1);const R=(de=K.dataTransfer)==null?void 0:de.files;R&&I(R)}function j(K){const R=K.target;R.files&&(I(R.files),R.value="")}async function D(K){const R=l(v).find(Be=>Be.id===K);if(!R)return;const de=[...l(v)];if(y(v,l(v).filter(Be=>Be.id!==K)),R.status==="uploaded"&&R.path)try{await OQ(R.path)||(console.warn(`Failed to delete file from storage: ${R.path}`),alert("   ."),y(v,de))}catch(Be){console.error("Error deleting file from storage:",Be),alert("     ."),y(v,de)}else R.status==="uploading"?console.log("Deleting an item that was still uploading."):console.log("Deleting an item not present in storage or in error state.")}function ne(){y(x,!0);const K=l(v).filter(de=>de.status==="uploaded"&&de.url),R={uploadTitle:A(),uploadMemo:c(),files:K.map(de=>{var Be;return{name:((Be=de.file)==null?void 0:Be.name)||de.initialName||"Unknown File",url:de.url}})};try{d()(R,p())}catch(de){console.error("Error executing callback:",de),alert("     .")}finally{y(x,!1)}}Zn(()=>{console.log("upload component mounted"),u()&&u().length>0&&y(v,u().map(K=>({id:K.path||crypto.randomUUID(),file:null,initialName:K.name,status:"uploaded",url:K.url,path:K.path,error:null})))}),Zt(()=>l(v),()=>{y(s,l(v).every(K=>K.status==="uploaded"||K.status==="error"))}),Zt(()=>l(v),()=>{y(i,l(v).some(K=>K.status==="error"))}),Zt(()=>l(v),()=>{y(a,l(v).some(K=>K.status==="uploading"))}),Fo(),cn();var xe=tT(),L=g(xe),q=B(g(L),2),V=g(q),se=B(g(V),2),ve=B(g(se),2),ie=B(g(ve));hs(ie,K=>y(w,K),()=>l(w));var ge=B(q,2);{var re=K=>{var R=XQ();sr(R,5,()=>l(v),de=>de.id,(de,Be)=>{var Pe=WQ(),He=g(Pe),W=g(He),H=g(W),te=B(W,2),Ae=g(te);{var he=Ne=>{var fe=xn();De(J=>Qe(fe,`${J??""} MB -`),[()=>(l(Be).file.size/1024/1024).toFixed(2)],At),U(Ne,fe)};be(Ae,Ne=>{l(Be).file&&Ne(he)})}var we=B(Ae,2);{var ye=Ne=>{var fe=qQ(),J=g(fe);lc(J,{class:"odz-animate-spin odz-w-3 odz-h-3"}),U(Ne,fe)},Ie=Ne=>{var fe=Tt(),J=lt(fe);{var Se=Ce=>{var Ee=KQ();U(Ce,Ee)},$=Ce=>{var Ee=Tt(),Oe=lt(Ee);{var je=pe=>{var Re=$Q();De(()=>cr(Re,"title",l(Be).error||"Unknown error")),U(pe,Re)},ke=pe=>{var Re=VQ();U(pe,Re)};be(Oe,pe=>{l(Be).status==="error"?pe(je):pe(ke,!1)},!0)}U(Ce,Ee)};be(J,Ce=>{l(Be).status==="uploaded"?Ce(Se):Ce($,!1)},!0)}U(Ne,fe)};be(we,Ne=>{l(Be).status==="uploading"?Ne(ye):Ne(Ie,!1)})}var le=B(He,2);{var Te=Ne=>{var fe=GQ(),J=g(fe);i5(J,{class:"odz-w-5 odz-h-5"}),De(()=>cr(fe,"href",l(Be).url)),U(Ne,fe)};be(le,Ne=>{l(Be).status==="uploaded"&&l(Be).url&&Ne(Te)})}var Fe=B(le,2),Me=g(Fe);Ku(Me,{class:"odz-w-5 odz-h-5"}),De(()=>{var Ne;Qe(H,((Ne=l(Be).file)==null?void 0:Ne.name)||l(Be).initialName||"Unknown File"),Fe.disabled=l(Be).status==="uploading"}),it("click",Fe,()=>D(l(Be).id)),U(de,Pe)}),U(K,R)};be(ge,K=>{l(v)&&l(v).length>0&&K(re)})}var ue=B(ge,2),Z=g(ue),_e=B(ue,2),z=B(L,2);{var E=K=>{var R=JQ(),de=B(lt(R),2),Be=g(de),Pe=B(de,2);{var He=W=>{var H=YQ(),te=g(H),Ae=g(te),he=g(Ae),we=B(Ae,2);RQ(we,{get nameSheet(){return p()},onComplete:ye=>{p(ye),y(S,!1)}}),it("click",he,()=>y(S,!1)),U(W,H)};be(Pe,W=>{l(S)&&W(He)})}it("click",Be,()=>y(S,!0)),U(K,R)};be(z,K=>{h()&&K(E)})}var F=B(z,2),Q=g(F),M=g(Q);{var k=K=>{var R=xn("");U(K,R)},O=K=>{var R=Tt(),de=lt(R);{var Be=He=>{var W=ZQ(),H=lt(W);lc(H,{class:"odz-animate-spin odz-mr-2"}),U(He,W)},Pe=He=>{var W=Tt(),H=lt(W);{var te=he=>{var we=eT(),ye=lt(we);lc(ye,{class:"odz-animate-spin odz-mr-2"}),U(he,we)},Ae=he=>{var we=xn("");U(he,we)};be(H,he=>{l(a)?he(te):he(Ae,!1)},!0)}U(He,W)};be(de,He=>{l(x)?He(Be):He(Pe,!1)},!0)}U(K,R)};be(M,K=>{l(v).length===0&&!l(x)&&!l(a)?K(k):K(O,!1)})}De(()=>{Pr(q,`odz-border-2 odz-border-dashed odz-rounded-lg odz-p-5 odz-text-center odz-mt-4 odz-transition-colors ${(l(b)?"odz-border-primary odz-bg-primary/5":"odz-border-base-300")??""}`),Qe(Z,A()),cr(_e,"placeholder",A()),Q.disabled=l(x)||l(a)}),it("change",ie,j),it("dragover",q,P),it("dragleave",q,N),it("drop",q,ee),Fr(_e,c),it("click",Q,ne),U(n,xe),An(),r()}async function nT(n){const{data:e,error:t}=await vt.from("color_groups").select("*").eq("id",n).single();if(t)throw t;return e}var oT=G('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),sT=G('<div class="odz-tooltip odz-tooltip-secondary"><button><!></button></div>'),iT=G('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2">  </h3> <div class="odz-flex odz-items-center odz-gap-2"><input type="color" class="odz-h-10 odz-w-10 odz-p-0.5 odz-rounded-full odz-cursor-pointer odz-border odz-border-base-300 [&amp;::-webkit-color-swatch-wrapper]:odz-p-0 [&amp;::-webkit-color-swatch]:odz-rounded-full [&amp;::-moz-color-swatch]:odz-rounded-full"> <input type="text" placeholder="   " class="odz-input odz-input-bordered odz-flex-1"> <button class="odz-btn odz-btn-primary"></button></div></div>'),aT=G('<div class="odz-flex odz-items-center odz-gap-2 odz-bg-base-200 odz-rounded-full odz-px-3 odz-py-1"><div class="odz-w-4 odz-h-4 odz-rounded-full"></div> <span class="odz-text-sm"> </span> <button class="odz-btn odz-btn-ghost odz-btn-xs odz-rounded-full"></button></div>'),AT=G('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),lT=G('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base odz-mb-4">  <span class="odz-text-sm odz-font-normal"> </span></h2> <div class="odz-flex odz-flex-wrap odz-gap-2"></div> <!> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div> <!> <!>',1);function dT(n,e){an(e,!1);let t=gt(e,"colorGroupId",8,null),r=gt(e,"selectedTemplateId",8,null),o=gt(e,"callback",8),s=gt(e,"selectedColors",28,()=>[]),i=ze(!1),a=ze([]),A=ze(0),d=ze(!1),c=ze("#000000"),u=ze(""),h=ze(!1),p=ze("");async function v(){if(t()){y(i,!0);try{const re=await nT(t());y(a,(re==null?void 0:re.colors)||[]),y(d,(re==null?void 0:re.use_custom)||!1)}finally{y(i,!1)}}}async function w(){if(!r())return;const re=await Qc(r());console.log({templateProduct:re}),y(A,Math.max(...re.template_product_variants.map(ue=>ue.color_count))),console.log({colorCount:l(A)})}function b(re){if(s().findIndex(Z=>Z.hex===re.hex)===-1){if(s().length>=l(A))return;s([...s(),re])}else s(s().filter(Z=>Z.hex!==re.hex))}function x(re){const ue=re.replace("#",""),Z=parseInt(ue.substr(0,2),16),_e=parseInt(ue.substr(2,2),16),z=parseInt(ue.substr(4,2),16);return(Z*299+_e*587+z*114)/1e3<128}function S(){if(s().length===0){y(h,!0),y(p,"  .");return}console.log("selectedColors",s()),o()(s())}Zn(async()=>{await v(),await w()}),cn();var I=lT(),P=lt(I),N=g(P),ee=g(N),j=B(g(ee)),D=g(j),ne=B(ee,2);sr(ne,5,()=>l(a),vr,(re,ue)=>{var Z=sT(),_e=g(Z),z=g(_e);{var E=F=>{var Q=oT(),M=g(Q);De(k=>cr(M,"stroke",k),[()=>x(l(ue).hex)?"white":"black"],At),U(F,Q)};be(z,F=>{s().some(Q=>Q.hex===l(ue).hex)&&F(E)})}De(F=>{cr(Z,"data-tip",l(ue).name),Pr(_e,`odz-relative odz-w-10 odz-h-10 odz-rounded-full odz-transition-all odz-border hover:odz-scale-110 ${F??""}`),cr(_e,"style",`background-color: ${l(ue).hex??""};`)},[()=>s().some(F=>F.hex===l(ue).hex)?"odz-border-primary odz-scale-110":"odz-border"],At),it("click",_e,()=>b(l(ue))),U(re,Z)});var xe=B(ne,2);{var L=re=>{var ue=iT(),Z=B(g(ue),2),_e=g(Z),z=B(_e,2),E=B(z,2);Fr(_e,()=>l(c),F=>y(c,F)),Fr(z,()=>l(u),F=>y(u,F)),it("click",E,()=>{if(l(u).trim()){const F={name:l(u),hex:l(c)};b(F),y(u,""),y(c,"#000000")}}),U(re,ue)};be(xe,re=>{l(d)&&re(L)})}var q=B(xe,2);{var V=re=>{var ue=AT(),Z=B(g(ue),2);sr(Z,5,s,vr,(_e,z)=>{var E=aT(),F=g(E),Q=B(F,2),M=g(Q),k=B(Q,2);De(()=>{cr(F,"style",`background-color: ${l(z).hex??""};`),Qe(M,l(z).name)}),it("click",k,()=>b(l(z))),U(_e,E)}),U(re,ue)};be(q,re=>{s().length>0&&re(V)})}var se=B(N,2),ve=g(se),ie=B(P,2);Lc(ie,{get isLoading(){return l(i)}});var ge=B(ie,2);Tc(ge,{get isOpen(){return l(h)},set isOpen(re){y(h,re)},get message(){return l(p)},set message(re){y(p,re)},$$legacy:!0}),De(()=>Qe(D,`(${s().length??""}/${l(A)??""}   .)`)),it("click",ve,S),U(n,I),An()}var cT=G('<li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"> </button></li>'),uT=G('<div class="odz-text-sm odz-breadcrumbs odz-mb-6"><ul><li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"></button></li> <!></ul></div>'),hT=G('<figure class="odz-aspect-square odz-overflow-hidden"><img class="odz-w-full odz-h-full odz-object-cover"></figure>'),fT=G('<div class="odz-aspect-square odz-bg-base-200 odz-flex odz-items-center odz-justify-center"><span class="odz-text-base-content/50"> </span></div>'),pT=G('<p class="odz-text-sm odz-text-sm odz-text-base-content/70"> </p>'),gT=G('<button class="odz-btn odz-btn-outline odz-w-full odz-mb-2"> </button>'),vT=G('<div class="odz-card odz-bg-base-100 odz-shadow hover:odz-shadow-lg odz-rounded-lg odz-transition-shadow odz-cursor-pointer"><!> <div class="odz-card-body odz-p-5"><h2 class="odz-card-title odz-text-base"> </h2> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><!> <button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>'),mT=G('<div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 md:odz-grid-cols-3 odz-gap-4 odz-w-full"></div>'),wT=G('<div class="odz-p-2 odz-w-full"><h1 class="odz-text-2xl odz-font-bold odz-mb-6"> </h1> <!> <!></div> <!>',1);function bT(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t);let s=gt(e,"objectId",12),i=gt(e,"isTemplateModal",12),a=gt(e,"updateObjectDisabled",8),A=gt(e,"selectedPrintIndex",12),d=gt(e,"productId",8,null),c=gt(e,"estimateId",8,void 0),u=gt(e,"idx",8,void 0),h=ze(!1),p=ze(null),v=ze([]),w=ze([]),b=ze(!1),x=ze(!1),S=ze(null),I="",P=ze({uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}}),N=null;function ee(z){if(u()!==void 0){const E=z.products.findIndex(F=>(F==null?void 0:F.idx)===u());if(E!==-1)return E}if(d()){const E=z.products.findIndex(F=>{var Q;return((Q=F==null?void 0:F.product)==null?void 0:Q.id)===d()});if(E!==-1)return E}return z.index??0}async function j(z){var Q,M;const E=await D5(z.id);if(y(v,await uh(z.id)),console.log("selectTemplate called:",{template:z,selectedPrintIndex:A()}),y(p,{...E}),l(p).is_last){y(b,l(p).use_file_upload),y(x,l(p).use_color),y(S,l(p).color_group_id);const k=await Qc(l(p).id),O=o(),K=ee(O),R=O.products[K],de=A()!==null?(Q=R==null?void 0:R.prints)==null?void 0:Q[A()]:(M=R==null?void 0:R.prints)==null?void 0:M.find(Pe=>Pe.objectId===s()),Be=(de==null?void 0:de.id)||`print_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;N={...de?{...de}:{},id:Be,parentTemplates:l(v),template:{...z,templateProduct:k},objectId:s(),title:I},de!=null&&de.uploads?(zr(P,l(P).uploads=de.uploads),zr(P,l(P).nameSheet=de.nameSheet||{})):(zr(P,l(P).uploads=null),zr(P,l(P).nameSheet={})),de!=null&&de.colors?zr(P,l(P).colors=de.colors):zr(P,l(P).colors=null),l(b)||(N={...N,uploads:null,nameSheet:{}},zr(P,l(P).uploads=null),zr(P,l(P).nameSheet={})),l(x)||(N={...N,colors:null},zr(P,l(P).colors=null)),!l(b)&&!l(x)&&(await V(),q())}else{y(b,!1),y(x,!1);const k=await N5(z.id);y(w,k)}}async function D(){ne()}async function ne(){var z,E,F;y(h,!0),y(b,!1),y(x,!1),y(v,[]),N=null;try{if(A()!==null){const M=ee(o()),k=o().products[M],O=(z=k==null?void 0:k.prints)==null?void 0:z[A()];O?(console.log({print:O}),O.uploads&&zr(P,l(P).uploads=O.uploads),O.colors&&zr(P,l(P).colors=O.colors),(E=O.uploads)!=null&&E.uploadMemo&&zr(P,l(P).uploadMemo=O.uploads.uploadMemo),O.nameSheet&&zr(P,l(P).nameSheet=O.nameSheet)):A(null)}const Q=await xp(s());if(y(w,Q.process_print_area_templates.map(({template:M})=>M)),I=Q.title,A()!==null){const M=ee(o()),k=o().products[M],O=(F=k==null?void 0:k.prints)==null?void 0:F[A()];O!=null&&O.template}}catch(Q){console.error(Q)}finally{console.log("isUpload",l(b)),y(h,!1)}}async function xe(z,E){if(y(b,!1),zr(P,l(P).uploads=z),zr(P,l(P).nameSheet=E),!N){console.warn("selectUpload: pendingPrintData ");return}N={...N,uploads:z,nameSheet:E},l(x)===!1&&(await V(),q())}async function L(z){if(y(x,!1),zr(P,l(P).colors=z),!N){console.warn("selectColor: pendingPrintData ");return}N={...N,colors:z},await V(),q()}function q(){!l(b)&&!l(x)&&(i(!1),s(null),N=null,y(P,{uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}})),a()()}async function V(){var E;if(!N)return;wt.update(F=>{const Q=ee(F),M=[...F.products];if(!M[Q])return F;const k=[...M[Q].prints||[]];return A()===null?k.push(N):k[A()]=N,M[Q]={...M[Q],prints:k},{...F,products:M}});const z=ee(o());if(await wt.calculatePrintPrice(z),await new Promise(F=>setTimeout(F,50)),typeof window<"u"&&d())try{const F=((E=o().products[z])==null?void 0:E.prints)||[],Q=c()||o().estimateId||"temp",M=`detailedPrint_${d()}_${Q}`,k=JSON.stringify(F);window.sessionStorage.setItem(M,k),console.log(" Templates.svelte - SessionStorage :",{key:M,printsCount:F.length,productId:d(),estimateId:Q,mode:c()?"Edit":"Create"});const O=F.reduce((R,de)=>R+(de.price||0),0),K=new CustomEvent("detailedPrintUpdate",{detail:{productId:d(),idx:u(),prints:F,printAmount:O,timestamp:Date.now(),source:"Templates",estimateId:Q}});window.dispatchEvent(K),console.log(" Templates.svelte -    :",{productId:d(),idx:u(),printAmount:O,estimateId:Q,timestamp:Date.now()})}catch(F){console.error(" Templates.svelte - SessionStorage  :",F)}console.log("Decision point - finalized",{selectedPrintIndex:A(),objectId:N.objectId}),N=null}Zn(async()=>{ne()}),cn();var se=wT(),ve=lt(se),ie=B(g(ve),2);{var ge=z=>{var E=uT(),F=g(E),Q=g(F),M=g(Q),k=B(Q,2);sr(k,1,()=>l(v),vr,(O,K)=>{var R=cT(),de=g(R),Be=g(de);De(()=>Qe(Be,l(K).name)),it("click",de,pv(()=>j(l(K)))),U(O,R)}),it("click",M,pv(()=>D())),U(z,E)};be(ie,z=>{l(p)&&z(ge)})}var re=B(ie,2);{var ue=z=>{const E=At(()=>{var k;return(k=l(p))==null?void 0:k.file_upload_title}),F=At(()=>l(P).uploadMemo||""),Q=At(()=>{var k;return((k=l(P).uploads)==null?void 0:k.files)||[]}),M=At(()=>{var k;return(k=l(p))==null?void 0:k.use_name_list});rT(z,{get fileUploadTitle(){return l(E)},callback:xe,get uploadMemo(){return l(F)},get initialFiles(){return l(Q)},get nameSheet(){return l(P).nameSheet},get useNameSheet(){return l(M)}})},Z=z=>{var E=Tt(),F=lt(E);{var Q=k=>{const O=At(()=>{var R;return(R=l(p))==null?void 0:R.id}),K=At(()=>l(P).colors||[]);dT(k,{get colorGroupId(){return l(S)},get selectedTemplateId(){return l(O)},callback:L,get selectedColors(){return l(K)}})},M=k=>{var O=mT();sr(O,5,()=>l(w),vr,(K,R)=>{var de=vT(),Be=g(de);{var Pe=Te=>{var Fe=hT(),Me=g(Fe);De(()=>{cr(Me,"src",l(R).image_url),cr(Me,"alt",l(R).name)}),U(Te,Fe)},He=Te=>{var Fe=fT();U(Te,Fe)};be(Be,Te=>{l(R).image_url?Te(Pe):Te(He,!1)})}var W=B(Be,2),H=g(W),te=g(H),Ae=B(H,2);{var he=Te=>{var Fe=pT(),Me=g(Fe);De(()=>Qe(Me,l(R).description)),U(Te,Fe)};be(Ae,Te=>{l(R).description&&Te(he)})}var we=B(W,2),ye=g(we);{var Ie=Te=>{var Fe=gT();it("click",Fe,pv(()=>window.open(l(R).detail_url,"_blank","width=800,height=600"))),U(Te,Fe)};be(ye,Te=>{l(R).detail_url&&Te(Ie)})}var le=B(ye,2);De(()=>Qe(te,l(R).name)),it("click",le,()=>j(l(R))),U(K,de)}),U(k,O)};be(F,k=>{l(x)?k(Q):k(M,!1)},!0)}U(z,E)};be(re,z=>{l(b)?z(ue):z(Z,!1)})}var _e=B(ve,2);Lc(_e,{get isLoading(){return l(h)},set isLoading(z){y(h,z)},$$legacy:!0}),U(n,se),An(),r()}var yT=G('<div class="odz-alert odz-alert-error odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <button class="odz-btn odz-btn-sm odz-btn-outline"> </button></div>'),_T=G('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-gray-600">  ...</span></div></div>'),xT=G('<img class="odz-h-6 odz-w-6 odz-rounded-md odz-object-cover">'),BT=G('<div class="odz-inline-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2"><!> <span class="odz-text-xs odz-font-medium odz-text-slate-700"> </span></div>'),zT=G('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"> </p> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),CT=G('<span class="odz-inline-flex odz-items-center odz-gap-1 odz-rounded-full odz-bg-slate-100 odz-px-2 odz-py-1"><span class="odz-h-3.5 odz-w-3.5 odz-rounded-full odz-border odz-border-slate-300"></span> <span class="odz-text-[11px] odz-text-slate-600"> </span></span>'),ST=G('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-flex-wrap odz-gap-1.5"></div></div>'),ET=G('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2 odz-text-xs odz-text-slate-600"><svg class="odz-h-3.5 odz-w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 9.828m-2.828-2.828L16 5l3 3-1.828 1.828m-2.828-2.828L9 5l3 3"></path></svg> <span> </span></div></div>'),FT=G('<div class="odz-grid odz-gap-3 sm:odz-grid-cols-2"><!> <!></div>'),IT=G('<div class="odz-rounded-2xl odz-border odz-border-slate-200 odz-bg-white odz-shadow-sm odz-transition-shadow hover:odz-shadow-md"><div class="odz-flex odz-items-start odz-justify-between odz-gap-4 odz-border-b odz-border-slate-100 odz-bg-slate-50 odz-rounded-t-2xl odz-px-5 odz-py-4"><div class="odz-space-y-1"><span class="odz-inline-flex odz-items-center odz-gap-2 odz-text-xs odz-font-semibold odz-text-slate-500"><span class="odz-inline-flex odz-h-5 odz-w-5 odz-items-center odz-justify-center odz-rounded-full odz-bg-slate-200 odz-text-[10px] odz-font-bold odz-text-slate-700"></span>  </span> <h3 class="odz-text-base odz-font-semibold odz-text-slate-900"> </h3></div> <div class="odz-flex odz-shrink-0 odz-items-center odz-gap-2"><button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button></div></div> <div class="odz-space-y-4 odz-p-5"><!> <!></div></div>'),UT=G('<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-5"></div></div>'),QT=G('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>         .</p></div></div>'),TT=G('<dialog id="detailed-print-template-modal" class="odz-modal odz-modal-open odz-items-center"><div class="odz-modal-box odz-w-11/12 odz-max-w-6xl odz-max-h-[85vh] odz-overflow-hidden odz-flex odz-flex-col odz-items-stretch odz-relative odz-p-4"><div class="odz-flex odz-items-center odz-justify-end odz-pb-2 odz-flex-shrink-0 odz-w-full"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"></button></form></div> <div class="odz-overflow-y-auto odz-flex-1 odz-w-full odz-min-w-0"><!></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),LT=G('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">   <span class="odz-text-sm odz-font-normal odz-text-gray-500">     .</span></h1> <!> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas> <!></div> <p class="odz-text-sm odz-text-gray-500">         .</p></div></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div> <!>',1);function PT(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(ni,"$shopStore",t),s=()=>on(wt,"$estimateStore",t);let i=gt(e,"productId",8),a=gt(e,"estimateId",8,void 0),A=gt(e,"idx",8,void 0),d=gt(e,"onComplete",8),c=gt(e,"onCancel",8,()=>{}),u=null,h=[],p=ze(),v=ze(),w=ze(),b=ze(!0),x=ze(null),S=ze(!1),I=ze(null),P=ze(null),N=ze(""),ee=ze(null),j=ze([]),D=ze(!1),ne=ze(""),xe=ze(!1),L=ze(null),q=ze(""),V=ze(null),se=ze(!1),ve=ze(!1),ie=ze(!1),ge=ze();const re=".main-estimate-modal-box";function ue(){if(typeof window<"u")try{const $=l(j).reduce((Ee,Oe)=>Ee+(Oe.price||0),0),Ce=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),idx:A(),prints:l(j),printAmount:$,timestamp:Date.now(),source:"DetailedPrint"}});window.dispatchEvent(Ce),console.log(" DetailedPrint -    :",{productId:i(),idx:A(),printAmount:$,timestamp:Date.now()})}catch($){console.error(" DetailedPrint -    :",$)}}Zn(async()=>{y(ge,A()??0);try{await K(),await Z(),Q()}finally{y(ve,!0)}}),ps(()=>{var $;($=l(w))==null||$.destroy(),O()});async function Z(){try{y(b,!0),y(x,null),await _e(),await ra(),Q()}catch($){console.error("DetailedPrint initialize failed:",$),y(x,$ instanceof Error?$.message:"   .")}finally{y(b,!1)}}async function _e(){await ra();let $=0;const Ce=50;for(;!l(v)&&$<Ce;)await new Promise(ke=>setTimeout(ke,100)),$++;if(!l(v))throw new Error("    .");if(u=await j5(i(),o().id),u!=null&&u.id&&(h=await R5(u.id)),!(u!=null&&u.canvas_json))throw new Error("    .");const Ee=typeof u.canvas_json=="string"?JSON.parse(u.canvas_json):u.canvas_json,Oe=Ee.backgroundImage.width*Ee.backgroundImage.scaleX,je=Ee.backgroundImage.height*Ee.backgroundImage.scaleY;y(w,new Vx(l(v),{width:Oe,height:je,containerElement:l(p)})),l(w).setPrintAreaClickListener(ke=>{z(ke)}),await l(w).setCanvasJSON(Ee)}function z($){var Oe,je,ke;if(!l(w))return;y(I,$),y(N,((Oe=h.find(pe=>pe.object_id===$))==null?void 0:Oe.title)||`${$} `);const Ee=(((ke=(je=l(w)).getObjects)==null?void 0:ke.call(je))||[]).find(pe=>{var Re;return((Re=pe==null?void 0:pe.data)==null?void 0:Re.objectId)===$});Ee?y(ee,{x:Math.round(Ee.left||0),y:Math.round(Ee.top||0),width:Math.round((Ee.width||0)*(Ee.scaleX||1)),height:Math.round((Ee.height||0)*(Ee.scaleY||1))}):y(ee,null),y(P,null),y(S,!0),E()}function E(){const $=document.querySelector(re);$&&($.scrollTop=0)}function F($,Ce){var Oe,je;($||Ce)&&(console.log(""),console.log(" [DetailedPrint] cancelPrint :",{printId:$,objectId:Ce,productId:i(),idx:A()}),console.log(" [BEFORE] currentPrints:",JSON.parse(JSON.stringify(l(j)))),console.log(" [BEFORE] estimateStore.products[idx].prints:",JSON.parse(JSON.stringify(((Oe=s().products[l(ge)])==null?void 0:Oe.prints)||[]))),$?y(j,l(j).filter(ke=>ke.id!==$)):y(j,l(j).filter(ke=>ke.objectId!==Ce)),l(ge)!==void 0&&s().products[l(ge)]&&wt.cancelPrint(l(ge),$,Ce),Q(),O(),console.log(" [AFTER] currentPrints:",JSON.parse(JSON.stringify(l(j)))),console.log(" [AFTER] estimateStore.products[idx].prints:",JSON.parse(JSON.stringify(((je=s().products[l(ge)])==null?void 0:je.prints)||[]))),console.log(""),ue())}function Q(){l(w)&&l(w).updateAllObjectEnabled()}function M($){const Ce=l(j)[$];Ce!=null&&Ce.objectId&&(y(I,Ce.objectId),y(P,$),y(N,Ce.title||`${Ce.objectId} `),y(ee,null),y(S,!0),E())}function k(){y(S,!1)}function O($){try{const Ce=$??JSON.stringify(l(j)??[]),Ee=JSON.parse(Ce);y(ne,Ce),y(V,Ee),wt.updateDetailedPrints(l(ge),Ee),ue();try{pr.selectPrintMethod("detailed")}catch{}try{Gn.selectPrintMethod(i(),"detailed")}catch{}}catch(Ce){console.error("DetailedPrint  :",Ce)}}async function K(){let $=null;const Ce=Ur(wt),Ee=Ce.products[l(ge)];if(Ee!=null&&Ee.prints&&Ee.prints.length>0&&($=Ee.prints),!(!$||!Array.isArray($)||$.length===0))try{const Oe=$;if(y(V,[...Oe]),y(j,[...Oe]),y(ne,JSON.stringify(Oe)),!Ce.products[l(ge)]){y(L,Oe),y(q,l(ne)),y(xe,!0);return}if(y(xe,!0),R(Oe),await ra(),Array.isArray(Oe)&&Oe.length>0){try{pr.selectPrintMethod("detailed")}catch{}try{Gn.selectPrintMethod(i(),"detailed")}catch{}ue()}}catch(Oe){console.error("DetailedPrint  :",Oe)}finally{l(L)||y(xe,!1)}}function R($){if(!(!$||$.length===0)){if(l(ge)===void 0||!s().products[l(ge)]){console.warn("DetailedPrint applyPrintsToStore:    .",{productId:i(),idx:A(),capturedIdx:l(ge)});return}y(se,!0),console.log("DetailedPrint applyPrintsToStore ",{productId:i(),capturedIdx:l(ge),printsCount:$.length}),y(ie,!1),wt.update(Ce=>{const Ee=[...Ce.products];return Ee[l(ge)]={...Ee[l(ge)],prints:$},{...Ce,products:Ee,index:l(ge)}}),y(ne,JSON.stringify($??[])),ra().then(()=>{y(se,!1)})}}Zt(()=>(l(V),s(),l(j)),()=>{var $;l(V)&&l(V).length>0&&((($=s())==null?void 0:$.estimateId)||"temp")!=="temp"&&(y(j,[...l(V)]),console.log(" Edit  (reactive): Supabase DB  :",{printsCount:l(j).length,colors:l(j).map(Oe=>{var je,ke;return{colorsCount:((je=Oe.colors)==null?void 0:je.length)||0,colorNames:(ke=Oe.colors)==null?void 0:ke.map(pe=>pe.name)}})}))}),Zt(()=>(s(),l(V),l(ge)),()=>{var Oe;if(!((((Oe=s())==null?void 0:Oe.estimateId)||"temp")!=="temp"&&l(V)&&l(V).length>0)&&l(ge)!==void 0){const je=s().products[l(ge)],ke=(je==null?void 0:je.prints)??[];ke.length>0?y(j,[...ke]):l(V)&&l(V).length>0&&y(j,[...l(V)])}}),Zt(()=>(l(L),l(ge),s(),l(q),ra),()=>{if(l(L)&&l(ge)!==void 0&&s().products[l(ge)]){const Ce=l(L),Ee=l(q)||JSON.stringify(Ce??[]);y(xe,!0),R(Ce),y(ne,Ee),y(L,null),y(q,""),ra().then(()=>{y(xe,!1)})}}),Zt(()=>(l(xe),l(se),l(V),l(ge),s()),()=>{var $;if(!l(xe)&&!l(se)&&(($=l(V))!=null&&$.length)&&l(ge)!==void 0){const Ce=s().products[l(ge)],Ee=(Ce==null?void 0:Ce.prints)??[];(!Ee||Ee.length===0)&&R(l(V))}}),Zt(()=>(l(S),l(xe),l(se),l(j),l(ne)),()=>{if(l(S)&&!l(xe)&&!l(se))try{JSON.stringify(l(j)??[])!==l(ne)&&y(ie,!0)}catch($){console.error("DetailedPrint    :",$)}}),Zt(()=>l(w),()=>{l(w)&&Q()}),Zt(()=>l(S),()=>{y(D,l(S))}),Zt(()=>(l(S),l(D),l(ie),l(ve)),()=>{!l(S)&&l(D)&&(y(I,null),y(P,null),y(N,""),y(ee,null),l(ie)&&l(ve)&&O(),y(ie,!1),Q())}),Zt(()=>(l(ve),l(S),l(xe),l(se),l(j),l(ne)),()=>{if(l(ve)&&!l(S)&&!l(xe)&&!l(se))try{const $=JSON.stringify(l(j)??[]);$!==l(ne)&&O($)}catch($){console.error("DetailedPrint   :",$)}}),Fo(),cn();var de=LT(),Be=lt(de),Pe=B(g(Be),2);{var He=$=>{var Ce=yT(),Ee=g(Ce),Oe=B(g(Ee),2),je=g(Oe),ke=B(Ee,2);De(()=>Qe(je,l(x))),it("click",ke,Z),U($,Ce)};be(Pe,$=>{l(x)&&$(He)})}var W=B(Pe,2),H=g(W),te=g(H),Ae=g(te),he=g(Ae);hs(he,$=>y(v,$),()=>l(v));var we=B(he,2);{var ye=$=>{var Ce=_T();U($,Ce)};be(we,$=>{l(b)&&!l(x)&&$(ye)})}hs(Ae,$=>y(p,$),()=>l(p));var Ie=B(H,2),le=g(Ie);{var Te=$=>{var Ce=UT(),Ee=g(Ce),Oe=B(g(Ee),2),je=B(g(Oe),2),ke=g(je),pe=B(Ee,2);sr(pe,5,()=>l(j),vr,(Re,et,Je)=>{var rt=IT(),Ke=g(rt),nt=g(Ke),st=g(nt),pt=g(st);pt.textContent=Je+1;var It=B(st,2),Pt=g(It),St=B(nt,2),bt=g(St),ft=B(bt,2),jt=B(Ke,2),Lt=g(jt);{var Et=at=>{var Vt=zT(),Jt=B(g(Vt),2);sr(Jt,5,()=>l(et).parentTemplates,vr,(Kt,Gt)=>{var er=BT(),Ct=g(er);{var xt=ur=>{var hr=xT();De(()=>{cr(hr,"src",l(Gt).image_url),cr(hr,"alt",l(Gt).name)}),U(ur,hr)};be(Ct,ur=>{l(Gt).image_url&&ur(xt)})}var Dt=B(Ct,2),lr=g(Dt);De(()=>Qe(lr,l(Gt).name)),U(Kt,er)}),U(at,Vt)};be(Lt,at=>{var Vt;(Vt=l(et).parentTemplates)!=null&&Vt.length&&at(Et)})}var $e=B(Lt,2);{var dt=at=>{var Vt=FT(),Jt=g(Vt);{var Kt=Ct=>{var xt=ST(),Dt=B(g(xt),2);sr(Dt,5,()=>l(et).colors,vr,(lr,ur)=>{var hr=CT(),fr=g(hr),xr=B(fr,2),un=g(xr);De(()=>{cr(fr,"style",`background-color: ${l(ur).hex??""};`),Qe(un,l(ur).name)}),U(lr,hr)}),U(Ct,xt)};be(Jt,Ct=>{var xt;(xt=l(et).colors)!=null&&xt.length&&Ct(Kt)})}var Gt=B(Jt,2);{var er=Ct=>{var xt=ET(),Dt=B(g(xt),2),lr=B(g(Dt),2),ur=g(lr);De(()=>Qe(ur,` ${l(et).uploads.files.length??""}`)),U(Ct,xt)};be(Gt,Ct=>{var xt,Dt;(Dt=(xt=l(et).uploads)==null?void 0:xt.files)!=null&&Dt.length&&Ct(er)})}U(at,Vt)};be($e,at=>{var Vt,Jt,Kt;((Vt=l(et).colors)!=null&&Vt.length||(Kt=(Jt=l(et).uploads)==null?void 0:Jt.files)!=null&&Kt.length)&&at(dt)})}De(()=>Qe(Pt,l(et).title)),it("click",bt,()=>M(Je)),it("click",ft,()=>F(l(et).id,l(et).objectId)),U(Re,rt)}),De(()=>Qe(ke,`${l(j).length??""}  `)),U($,Ce)},Fe=$=>{var Ce=QT();U($,Ce)};be(le,$=>{l(j).length>0?$(Te):$(Fe,!1)})}var Me=B(Be,2),Ne=g(Me),fe=B(Ne,2),J=B(Me,2);{var Se=$=>{var Ce=TT(),Ee=g(Ce),Oe=g(Ee),je=g(Oe),ke=g(je),pe=B(Oe,2),Re=g(pe);bT(Re,{get productId(){return i()},get estimateId(){return a()},get idx(){return A()},updateObjectDisabled:Q,get objectId(){return l(I)},set objectId(rt){y(I,rt)},get isTemplateModal(){return l(S)},set isTemplateModal(rt){y(S,rt)},get selectedPrintIndex(){return l(P)},set selectedPrintIndex(rt){y(P,rt)},$$legacy:!0});var et=B(Ee,2),Je=g(et);it("click",ke,k),it("click",Je,k),U($,Ce)};be(J,$=>{l(S)&&$(Se)})}De(()=>Pr(te,`odz-space-y-4 ${l(b)?"odz-opacity-50":""}`)),it("click",Ne,function(...$){var Ce;(Ce=c())==null||Ce.apply(this,$)}),it("click",fe,function(...$){var Ce;(Ce=d())==null||Ce.apply(this,$)}),U(n,de),An(),r()}var kT=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-10"><div class="odz-text-center"><h2 class="odz-text-xl odz-font-bold odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-500">      </p></div> <div class="odz-bg-gray-50 odz-p-8 odz-rounded-lg odz-border-2 odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-600 odz-text-center">    </p></div> <button class="odz-btn odz-btn-secondary odz-px-8"> </button></div>');function OT(n,e){let t=gt(e,"productId",8),r=gt(e,"onComplete",8);console.log("    - productId:",t());var o=kT(),s=B(g(o),4);it("click",s,function(...i){var a;(a=r())==null||a.apply(this,i)}),U(n,o)}var DT=G('<p class="odz-text-[11px] odz-text-gray-400 odz-line-through odz-mt-1"> </p> <p class="odz-text-[11px] odz-text-emerald-600 odz-font-semibold odz-mt-0.5"> </p>',1),NT=G('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p><!></p>',1),MT=G('<p class="odz-mt-1 odz-text-[11px] odz-text-blue-600">   -  </p>'),HT=G('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">     </p>'),jT=G('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <!>',1),RT=G('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">    </p>',1),qT=G('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">   </p>',1),KT=G('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!></p>'),$T=G('<span class="odz-text-blue-600">+ ( )</span>'),VT=G("<span>+ ( )</span>"),GT=G('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> <!></p>'),WT=G('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> + ( )</p>'),XT=lg('<svg class="odz-w-4 odz-h-4 sm:odz-w-5 sm:odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),YT=G("<button><!> <span> </span></button>"),JT=G('<div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2.5"></div>'),ZT=G('<button class="odz-w-full odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-semibold odz-py-2.5 odz-px-4 odz-rounded-xl odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2"><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg> <span> </span></button>'),e6=G('<div class="odz-mt-5 odz-border-t odz-border-gray-200/70 odz-pt-3.5"><!></div>'),t6=G('<div class="odz-mt-5 odz-px-4"><div class="odz-sticky odz-bottom-4 md:odz-static md:odz-bottom-auto"><div class="odz-rounded-3xl odz-border odz-border-gray-200 odz-bg-white/90 odz-backdrop-blur-md odz-shadow-xl odz-p-4 sm:odz-p-5 lg:odz-p-6"><div class="odz-grid sm:odz-grid-cols-2 lg:odz-grid-cols-5 odz-gap-2.5 lg:odz-gap-3"><div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-xs odz-text-gray-500"> </p></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-red-600"> </p> <!></div></div> <!></div></div></div>');function kp(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(pr,"$fixedEstimateStore",t),s=()=>on(Gn,"$extendedProductDataStore",t),i=()=>on(ni,"$shopStore",t),a=ze(),A=ze(),d=ze(),c=ze(),u=ze(),h=ze(),p=ze(),v=ze(),w=ze(),b=ze(),x=ze(),S=ze(),I=ze(),P=ze(),N=ze();let ee=gt(e,"productId",8),j=gt(e,"showNextButton",8,!1),D=gt(e,"nextButtonText",8,"  "),ne=gt(e,"onNext",8,void 0),xe=gt(e,"estimateId",8,null),L=gt(e,"idx",8,null),q=gt(e,"buttonConfig",8,null),V=ze(0),se=ze(null),ve=ze(!1),ie=ze(!1);async function ge(){var Ae,he;if(l(ve))return;const te=Ur(Gn);if((he=(Ae=te==null?void 0:te.productDataCache)==null?void 0:Ae[ee()])!=null&&he.product){console.log(" SelectedProductSummary: product   ()",{productId:ee()});return}y(ve,!0);try{console.log(" SelectedProductSummary: product  fallback  ",{productId:ee()}),await Gn.loadIntegratedProductData(ee(),i().id),console.log(" SelectedProductSummary: product  fallback  ",{productId:ee()}),y(V,Date.now())}catch(we){console.error(" SelectedProductSummary: product  fallback  ",we)}finally{y(ve,!1)}}function re(){if(l(a)&&l(a).productId===ee()&&l(a).idx===L()&&l(a).printSelection&&l(a).printSelection.currentMethod!=="selection")return l(a).printSelection;if(L()!==null&&L()!==void 0){const Ae=Ur(wt).products.find(he=>he.idx===L());if(Ae!=null&&Ae.print_type&&Ae.print_type!=="selection")return{currentMethod:Ae.print_type,productId:ee()}}return l(d)&&l(d).printSelection&&l(d).printSelection.currentMethod!=="selection"?l(d).printSelection:null}async function ue(te,Ae,he,we){var fe;if(we==="simple"||we==="none")return console.log(" resolvePrintAmount: simple/none   null ",{overrideMethod:we}),null;const ye=L()??0,Ie=Ur(wt).products,le=Ie.find(J=>J.idx===ye)||Ie[0],Te=le==null?void 0:le.print_type;if((we||(Ae?"detailed":null)||(Te==="detailed"?"detailed":"none"))!=="detailed")return null;if(le!=null&&le.prints&&Array.isArray(le.prints)&&le.prints.length===0)return console.log(" resolvePrintAmount: prints    DB   null ",{idx:ye,print_type:Te}),null;if(le!=null&&le.prints&&Array.isArray(le.prints)&&le.prints.length>0){const J=he;if(J<=0)return null;let Se=0;console.log(" estimateStore.products[idx].prints    :",{idx:ye,printsCount:le.prints.length});for(const $ of le.prints){const Ce=await Z($,J);Ce!==null?Se+=Ce:$.price&&typeof $.price=="number"&&(Se+=$.price,console.log("      ():",{title:$.title,fallbackPrice:$.price,currentTotal:Se}))}if(Se>0)return Se}const Me=Ur(pr);if((Me==null?void 0:Me.productId)===ee()&&(Me==null?void 0:Me.idx)===L()&&(le==null?void 0:le.prints)!==void 0)return console.log(" resolvePrintAmount: fixedEstimateStore   - DB  ",{productId:ee(),idx:L(),printsLength:((fe=le==null?void 0:le.prints)==null?void 0:fe.length)??"undefined"}),0;if(xe()&&L()!==null)try{const Se=(await xc(xe())).filter($=>$.idx===L());if(Se.length>0){const $=he;if($<=0)return null;let Ce=0;for(const Ee of Se){const Oe={id:Ee.id,template:{id:Ee.template_id},colors:Ee.colors||[],price:Ee.price},je=await Z(Oe,$);je!==null?Ce+=je:(Ce+=Ee.price||0,console.log("   - DB   ():",{objectId:Ee.object_id,dbPrice:Ee.price}))}return Ce}}catch{}if(te!=null&&te.printConfig){let J=null;if(typeof te.printConfig=="string")try{J=JSON.parse(te.printConfig)}catch{return null}else typeof te.printConfig=="object"&&te.printConfig!==null&&(J=te.printConfig);if(J){const Se=["totalAmount","total","totalPrice","price","amount"];for(const Ce of Se){const Ee=J[Ce];if(typeof Ee=="number"&&!Number.isNaN(Ee))return Ee}const $=J.summary;if($&&typeof $=="object")for(const Ce of Se){const Ee=$[Ce];if(typeof Ee=="number"&&!Number.isNaN(Ee))return Ee}}}return null}async function Z(te,Ae){var he,we;try{if(!((he=te.template)!=null&&he.id))return null;let ye=te.template.templateProduct;if(ye||(ye=await Qc(te.template.id)),!(ye!=null&&ye.template_product_variants))return null;let Ie;if(te.variant_id?(Ie=ye.template_product_variants.find(Fe=>Fe.variant_id===te.variant_id),console.log(" STEP 4  (variant_id ):",{found:!!Ie,selectedVariant:Ie})):te.colors&&te.colors.length>0?(Ie=ye.template_product_variants.find(Fe=>Fe.color_count===te.colors.length),console.log(" STEP 4  (  ):",{found:!!Ie,selectedVariant:Ie})):(Ie=ye.template_product_variants[0],console.log(" STEP 4  ():",{selectedVariant:Ie})),!Ie)return null;const le=await hl(Ie.variant_id);if(!le||!le.prices||le.prices.length===0)return null;const Te=le.prices[0].amount;if(Ie.min_quantity<=Ae){let Fe=Te*Ae;if((we=ye.product)!=null&&we.quantity_discounts&&ye.product.quantity_discounts.length>0){const Me=ia(Ae,Te,ye.product.quantity_discounts);if(Me.hasDiscount){const Ne=Me.discountedPrice*Ae;return console.log(" =====   ( ) =====:",{discountedUnitPrice:Me.discountedPrice,quantity:Ae,finalPrice:Ne}),Ne}}return Fe}else{const Fe=Ie.plate_price||0;return console.log(" =====   (  , plate_price ) =====:",{min_quantity:Ie.min_quantity,productQuantity:Ae,platePrice:Fe}),Fe}}catch{return null}}function _e(te,Ae,he){const we=he??0,ye=Ur(wt).products,Ie=ye.find(Te=>Te.idx===we)||ye[0],le=(Ie==null?void 0:Ie.prints)&&Array.isArray(Ie.prints)&&Ie.prints.length>0;return le&&console.log(" checkDetailedPrintSession - estimateStore.products idx   :",{idx:we,foundProductIdx:Ie==null?void 0:Ie.idx,dataLength:Ie.prints.length}),le}let z=ze(0),E=ze(!1),F=ze(null);Zn(()=>{if(typeof window<"u"){const te=ye=>{const{productId:Ie,idx:le,prints:Te,printAmount:Fe,timestamp:Me,source:Ne}=ye.detail;Ie===ee()&&(le===L()||le===null||le===void 0)&&(typeof Fe=="number"&&Fe>=0&&(y(Q,Fe),console.log(" SelectedProductSummary:   printAmount :",{printAmount:Fe,source:Ne,idx:le})),y(V,Date.now()),y(z,Date.now()))},Ae=async ye=>{var Ne,fe,J;const{productId:Ie,addonId:le,selectedAddons:Te,timestamp:Fe,source:Me}=ye.detail;if(Ie===ee()){console.log(" SelectedProductSummary -     ():",{eventProductId:Ie,addonId:le,selectedAddonsCount:Object.keys(Te||{}).length,timestamp:Fe,source:Me,currentProductId:ee()}),await new Promise(Ee=>setTimeout(Ee,50));let Se=Ur(pr),$=0;const Ce=5;for(;$<Ce&&Se;){const Ee=(fe=(Ne=Se==null?void 0:Se.addonSelection)==null?void 0:Ne.selectedAddons)==null?void 0:fe[le];if(Ee&&Ee.variantId===ye.detail.variantId)break;console.log(` Store    (${$+1}/${Ce}):`,{storeVariantId:Ee==null?void 0:Ee.variantId,expectedVariantId:ye.detail.variantId}),await new Promise(Oe=>setTimeout(Oe,25)),Se=Ur(pr),$++}if(Se&&l(u)&&l(d)){const Ee=K(Se,l(u),Date.now(),(J=Se.addonSelection)==null?void 0:J.selectedAddons);y(I,Ee)}y(V,Date.now()),y(z,Date.now())}},he=ye=>{const{productId:Ie,action:le,color:Te,variantId:Fe,oldQuantity:Me,newQuantity:Ne,newTotalQuantity:fe,timestamp:J,source:Se}=ye.detail;Ie===ee()&&(y(V,Date.now()),y(z,Date.now()))},we=async ye=>{var J,Se,$;const{productId:Ie,toMethod:le,idx:Te,estimateId:Fe,prints:Me,printAmount:Ne,source:fe}=ye.detail;Ie===ee()&&(console.log(""),console.log(" [SelectedProductSummary] printAmountRecalc  :",{toMethod:le,printAmount:Ne,source:fe,idx:Te}),console.log(" [EVENT] estimateStore.products[idx]:",JSON.parse(JSON.stringify(Ur(wt).products[L()??0]||{}))),console.log(" [EVENT] fixedEstimateStore.printSelection:",JSON.parse(JSON.stringify(((J=Ur(pr))==null?void 0:J.printSelection)||{}))),console.log(" [EVENT]  resolvedPrintAmount:",l(Q)),console.log(" [EVENT]  isDetailedPrintSelected:",l(E)),console.log(""),y(se,le||null),le==="simple"||le==="none"?(y(ie,!0),y(Q,0),y(E,!1),console.log(" printAmountRecalc: simple/none     &  0 ",{toMethod:le,source:fe,skipPrintAmountRecalc:!0,resolvedPrintAmount:0,isDetailedPrintSelected:!1})):typeof Ne=="number"&&(y(Q,Ne),console.log(" printAmountRecalc:  printAmount :",{printAmount:Ne,toMethod:le,source:fe})),le&&pr.updatePrintSelection({currentMethod:le,isCompleted:le==="none",lastUpdated:Date.now()}),y(V,Date.now()),y(z,Date.now()),le==="detailed"&&typeof Ne!="number"?(await new Promise(Ce=>setTimeout(Ce,100)),y(ie,!1),k(le)):setTimeout(()=>{y(ie,!1),console.log(" skipPrintAmountRecalc   (200ms )")},200),console.log(""),console.log(" [SelectedProductSummary]     :"),console.log(" resolvedPrintAmount:",l(Q)),console.log(" isDetailedPrintSelected:",l(E)),console.log(" skipPrintAmountRecalc:",l(ie)),console.log(" eventOverrideMethod:",l(se)),console.log(" estimateStore.products[idx].prints:",JSON.parse(JSON.stringify(((Se=Ur(wt).products[L()??0])==null?void 0:Se.prints)||[]))),console.log(" estimateStore.products[idx].print_type:",($=Ur(wt).products[L()??0])==null?void 0:$.print_type),console.log(""))};return window.addEventListener("detailedPrintUpdate",te),window.addEventListener("addonSelectionUpdate",Ae),window.addEventListener("productQuantityUpdate",he),window.addEventListener("printAmountRecalc",we),setTimeout(()=>{y(z,Date.now())},100),()=>{window.removeEventListener("detailedPrintUpdate",te),window.removeEventListener("addonSelectionUpdate",Ae),window.removeEventListener("productQuantityUpdate",he),window.removeEventListener("printAmountRecalc",we)}}});let Q=ze(null),M=!1;async function k(te){var Ae,he,we;if(!M){console.log(" [calculatePrintAmountAsync] :",{overrideMethod:te,skipPrintAmountRecalc:l(ie),isDetailedPrintSelected:l(E),currentPrintMethod:l(p),"estimateStore.products[idx].prints.length":((he=(Ae=Ur(wt).products[L()??0])==null?void 0:Ae.prints)==null?void 0:he.length)||0,"estimateStore.products[idx].print_type":(we=Ur(wt).products[L()??0])==null?void 0:we.print_type});try{M=!0;const ye=l(Q);y(Q,await ue(l(h),l(E),l(u).totalQuantity,te)),console.log(" [calculatePrintAmountAsync] :",{previousAmount:ye,newAmount:l(Q),changed:ye!==l(Q)})}catch(ye){y(Q,null),console.error(" [calculatePrintAmountAsync] :",ye)}finally{M=!1}}}let O=null;function K(te,Ae,he,we){var Fe,Me,Ne;let ye=te;if(typeof window<"u"&&ee())try{const fe=Ur(pr);fe&&fe.productId===ee()&&(ye=fe)}catch{}if(he&&typeof window<"u"&&ee())try{const fe=Ur(pr);fe&&fe.productId===ee()&&(ye=fe)}catch{}let Ie=we||((Fe=ye==null?void 0:ye.addonSelection)==null?void 0:Fe.selectedAddons);if(typeof window<"u"&&he)try{const fe=Ur(pr);if(fe&&fe.productId===ee()){const J=(Me=fe.addonSelection)==null?void 0:Me.selectedAddons;J&&Object.keys(J).length>0&&(Ie=J)}}catch{}if(!Ie||!((Ne=l(d))!=null&&Ne.addons))return 0;const le=Ae.totalQuantity;let Te=0;return Object.entries(Ie).forEach(([fe,J])=>{var ke,pe,Re;if(!J||typeof J!="object"||!("productId"in J)||!("variantId"in J))return;const Se=J,$=l(d).addons.find(et=>et.id===fe);if(!$)return;const Ce=$.items.find(et=>et.addon_product.id===Se.productId);if(!Ce)return;(ke=Ce.addon_product.variants)!=null&&ke.map(et=>{var Je,rt;return{id:et.id,title:et.title,price:(rt=(Je=et.prices)==null?void 0:Je[0])==null?void 0:rt.amount}});let Ee=(pe=Ce.addon_product.variants)==null?void 0:pe.find(et=>et.id===Se.variantId);if(!Ee){(Re=Ce.addon_product.variants)==null||Re.forEach((et,Je)=>{});return}if(!Ee.prices||Ee.prices.length===0)return;const Oe=Ee.prices[0].amount,je=Oe*le;Te+=je,console.log("    ():",{addonName:$.name,variantTitle:Ee.title||Ce.addon_product.title,selectedVariantId:Se.variantId,foundVariantId:Ee.id,addonUnitPrice:Oe,totalQuantity:le,addonItemTotal:je,currentAddonTotal:Te,calculationValid:Ee.id===Se.variantId})}),Te}function R(te,Ae,he){var J,Se;if(!((J=l(a))!=null&&J.productSelection)||!l(c)||l(a).productId!==ee())return{totalQuantity:0,selectedColors:[],totalAmount:{originalTotal:0,discountedTotal:0,hasDiscount:!1}};const{quantityByVariant:we,variantsByColor:ye={},variantDiscounts:Ie}=l(a).productSelection,le=Object.values(we||{}).reduce(($,Ce)=>$+Object.values(Ce||{}).reduce((Ee,Oe)=>Ee+Oe,0),0),Te=Object.keys(we||{}).filter($=>Object.values(we[$]||{}).some(Ce=>Ce>0));let Fe=0,Me=0,Ne=!1;for(const $ in we||{})for(const Ce in we[$]||{}){const Ee=we[$][Ce];if(Ee>0){const Oe=(Se=ye[$])==null?void 0:Se.find(je=>je.id===Ce);if(Oe&&Oe.prices&&Oe.prices.length>0){const je=Oe.prices[0].amount,ke=Ie==null?void 0:Ie[Ce];Fe+=je*Ee,ke!=null&&ke.hasDiscount?(Me+=ke.discountedPrice*Ee,Ne=!0):Me+=je*Ee}}}return{totalQuantity:le,selectedColors:Te,totalAmount:{originalTotal:Fe,discountedTotal:Ne?Me:Fe,hasDiscount:Ne}}}Zn(()=>{O=pr.subscribe(te=>{(te==null?void 0:te.productId)===ee()&&y(V,Date.now())})}),ps(()=>{O&&O()});function de(){ne()&&ne()()}function Be(te){switch(te){case"arrow-left":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>';case"arrow-right":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>';case"check":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';case"save":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path>';default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>'}}function Pe(te,Ae="normal"){const he="odz-font-semibold odz-rounded-lg odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2",we=Ae==="large"?"odz-py-3 odz-px-5 odz-text-base":"odz-py-2.5 odz-px-4 odz-text-sm";return te==="primary"?`${he} ${we} odz-bg-red-600 hover:odz-bg-red-700 odz-text-white`:`${he} ${we} odz-bg-gray-100 hover:odz-bg-gray-200 odz-text-gray-700 hover:odz-text-gray-800 odz-border odz-border-gray-300`}Zt(()=>o(),()=>{y(a,o())}),Zt(()=>s(),()=>{y(A,s())}),Zt(()=>(l(A),no(ee())),()=>{var te,Ae;y(d,(Ae=(te=l(A))==null?void 0:te.productDataCache)==null?void 0:Ae[ee()])}),Zt(()=>l(d),()=>{var te;y(c,(te=l(d))==null?void 0:te.product)}),Zt(()=>(no(ee()),l(c),l(ve),i()),()=>{var te;ee()&&!l(c)&&!l(ve)&&((te=i())!=null&&te.id)&&ge()}),Zt(()=>(l(V),l(a),l(c)),()=>{y(u,R(l(V),l(a),l(c)))}),Zt(()=>{},()=>{y(h,re())}),Zt(()=>l(h),()=>{var te;y(p,((te=l(h))==null?void 0:te.currentMethod)??"selection")}),Zt(()=>(l(z),l(se),l(p),l(h),no(ee()),no(xe()),no(L()),l(F),l(E)),()=>{l(z);const te=l(se)||l(p),Ae=!!l(h),he=_e(ee(),xe(),L());let we=!1;te==="detailed"?we=!0:te==="simple"||te==="none"?we=!1:te==="selection"&&(we=he);const ye=`${te}|${Ae}|${he}`;ye!==l(F)&&y(F,ye),l(E)!==we&&y(E,we)}),Zt(()=>l(Q),()=>{y(v,l(Q)??0)}),Zt(()=>l(u),()=>{y(w,l(u).totalAmount.hasDiscount?l(u).totalAmount.discountedTotal:l(u).totalAmount.originalTotal)}),Zt(()=>l(u),()=>{y(b,l(u).totalAmount.hasDiscount?l(u).totalAmount.originalTotal-l(u).totalAmount.discountedTotal:0)}),Zt(()=>l(b),()=>{y(x,l(b)>0)}),Zt(()=>o(),()=>{var te,Ae;y(S,(Ae=(te=o())==null?void 0:te.addonSelection)==null?void 0:Ae.selectedAddons)}),Zt(()=>(l(a),l(u),l(V),l(S)),()=>{y(I,K(l(a),l(u),l(V),l(S)))}),Zt(()=>(l(E),l(w),l(v),l(I)),()=>{y(P,l(E)?l(w)+l(v)+l(I):l(w)+l(I))}),Zt(()=>(l(ie),l(h),l(E),l(u),l(V),l(se),l(p)),()=>{if(!l(ie)&&(l(h)||l(E)||l(u).totalQuantity||l(V))){const te=l(se)||l(p);te==="detailed"||te==="selection"?(console.log(" [reactive block]    :",{effectiveMethod:te,skipPrintAmountRecalc:l(ie),currentPrintMethod:l(p),eventOverrideMethod:l(se)}),k(l(se)||void 0)):console.log(" [reactive block]   (effectiveMethod simple/none):",{effectiveMethod:te,skipPrintAmountRecalc:l(ie)})}else l(ie)&&console.log(" [reactive block]   (skipPrintAmountRecalc=true)")}),Zt(()=>{},()=>{}),Zt(()=>(no(q()),no(j())),()=>{y(N,q()||j())}),Fo(),cn();var He=Tt(),W=lt(He);{var H=te=>{var Ae=t6(),he=g(Ae),we=g(he),ye=g(we),Ie=g(ye),le=B(g(Ie),2),Te=g(le),Fe=B(le,2),Me=g(Fe),Ne=B(Ie,2),fe=B(g(Ne),2),J=g(fe),Se=B(fe,2);{var $=St=>{var bt=DT(),ft=lt(bt),jt=g(ft),Lt=B(ft,2),Et=g(Lt);De(($e,dt)=>{Qe(jt,`${$e??""}`),Qe(Et,`-${dt??""} `)},[()=>Er(l(u).totalAmount.originalTotal),()=>Er(l(b))],At),U(St,bt)};be(Se,St=>{l(x)&&St($)})}var Ce=B(Ne,2),Ee=B(g(Ce),2);{var Oe=St=>{var bt=NT(),ft=lt(bt),jt=g(ft),Lt=B(ft,2),Et=g(Lt);{var $e=at=>{var Vt=xn("    .");U(at,Vt)},dt=at=>{var Vt=xn("    .");U(at,Vt)};be(Et,at=>{l(v)>0?at($e):at(dt,!1)})}De(at=>{Qe(jt,`${at??""}`),Pr(Lt,`odz-mt-1 odz-text-[11px] ${l(v)>0?"odz-text-gray-500":"odz-text-orange-500"}`)},[()=>Er(l(v))],At),U(St,bt)},je=St=>{var bt=jT(),ft=B(lt(bt),2);{var jt=Et=>{var $e=MT();U(Et,$e)},Lt=Et=>{var $e=HT();U(Et,$e)};be(ft,Et=>{(l(se)||l(p))==="simple"?Et(jt):Et(Lt,!1)})}U(St,bt)};be(Ee,St=>{l(E)?St(Oe):St(je,!1)})}var ke=B(Ce,2),pe=B(g(ke),2);{var Re=St=>{var bt=RT(),ft=lt(bt),jt=g(ft);De(Lt=>Qe(jt,`${Lt??""}`),[()=>Er(l(I))],At),U(St,bt)},et=St=>{var bt=qT();U(St,bt)};be(pe,St=>{l(I)>0?St(Re):St(et,!1)})}var Je=B(ke,2),rt=B(g(Je),2),Ke=g(rt),nt=B(rt,2);{var st=St=>{var bt=KT(),ft=g(bt),jt=B(ft);{var Lt=Et=>{var $e=xn();De(dt=>Qe($e,`+ ${dt??""}`),[()=>Er(l(I))],At),U(Et,$e)};be(jt,Et=>{l(I)>0&&Et(Lt)})}De((Et,$e)=>Qe(ft,`${Et??""} + ${$e??""} `),[()=>Er(l(w)),()=>Er(l(v))],At),U(St,bt)},pt=St=>{var bt=Tt(),ft=lt(bt);{var jt=Et=>{var $e=GT(),dt=g($e),at=B(dt);{var Vt=er=>{var Ct=xn();De(xt=>Qe(Ct,`+  ${xt??""}`),[()=>Er(l(I))],At),U(er,Ct)};be(at,er=>{l(I)>0&&er(Vt)})}var Jt=B(at,2);{var Kt=er=>{var Ct=$T();U(er,Ct)},Gt=er=>{var Ct=VT();U(er,Ct)};be(Jt,er=>{l(p)==="simple"?er(Kt):er(Gt,!1)})}De(er=>Qe(dt,` ${er??""} `),[()=>Er(l(w))],At),U(Et,$e)},Lt=Et=>{var $e=WT(),dt=g($e),at=B(dt);{var Vt=Jt=>{var Kt=xn();De(Gt=>Qe(Kt,`+  ${Gt??""}`),[()=>Er(l(I))],At),U(Jt,Kt)};be(at,Jt=>{l(I)>0&&Jt(Vt)})}De(Jt=>Qe(dt,` ${Jt??""} `),[()=>Er(l(w))],At),U(Et,$e)};be(ft,Et=>{l(E)?Et(Lt,!1):Et(jt)},!0)}U(St,bt)};be(nt,St=>{l(E)&&l(v)>0?St(st):St(pt,!1)})}var It=B(ye,2);{var Pt=St=>{var bt=e6(),ft=g(bt);{var jt=Et=>{var $e=JT();sr($e,5,()=>q().buttons,vr,(dt,at,Vt)=>{var Jt=YT(),Kt=g(Jt);{var Gt=xt=>{var Dt=XT(),lr=g(Dt);_0(lr,()=>Be(l(at).icon),!0,!1),U(xt,Dt)};be(Kt,xt=>{l(at).icon&&xt(Gt)})}var er=B(Kt,2),Ct=g(er);De(xt=>{Pr(Jt,xt),Qe(Ct,l(at).text)},[()=>`${q().type==="single"?"odz-w-full":Vt===0?"odz-flex-1":"odz-flex-1 sm:odz-flex-[1.35]"} ${Pe(l(at).style,l(at).size||"normal")}`],At),it("click",Jt,function(...xt){var Dt;(Dt=l(at).action)==null||Dt.apply(this,xt)}),U(dt,Jt)}),U(Et,$e)},Lt=Et=>{var $e=ZT(),dt=B(g($e),2),at=g(dt);De(()=>Qe(at,D())),it("click",$e,de),U(Et,$e)};be(ft,Et=>{q()?Et(jt):Et(Lt,!1)})}U(St,bt)};be(It,St=>{l(N)&&St(Pt)})}De((St,bt)=>{Qe(Te,`${l(u).totalQuantity??""}`),Qe(Me,`${l(u).selectedColors.length??""}  `),Qe(J,`${St??""}`),Qe(Ke,`${bt??""}`)},[()=>Er(l(w)),()=>Er(l(P))],At),U(te,Ae)};be(W,te=>{l(u).totalQuantity>0&&l(c)&&te(H)})}U(n,He),An(),r()}var r6=G('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),n6=G('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),o6=G('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-green-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">    ...</p></div></div></div>'),s6=G('<div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-1.5 odz-h-1.5 odz-bg-gray-400 odz-rounded-full"></div> <span class="odz-text-xs odz-text-gray-600"> </span></div>'),i6=G(`<button class="odz-group odz-cursor-pointer odz-w-full odz-text-left"><div class="odz-relative odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-xl odz-p-6
                               odz-transition-all odz-duration-300 odz-shadow-sm odz-overflow-visible
                               hover:odz-border-gray-300 hover:odz-shadow-lg hover:odz-scale-105"><div></div> <div class="odz-relative odz-z-10"><div class="odz-text-4xl odz-mb-4 odz-text-center"> </div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-800 odz-text-center odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-text-center odz-mb-4"> </p> <div class="odz-space-y-2"></div></div></div></button>`),a6=G('<div class="odz-flex odz-flex-col odz-gap-6 odz-p-4 odz-pb-48"><div class="odz-text-center odz-mb-6"><h1 class="odz-text-2xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h1> <p class="odz-text-sm odz-text-gray-600">   </p></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6 odz-p-4"></div> <!></div>'),A6=G('<div class="odz-relative"><!></div>'),l6=G('<div class="odz-relative"><!></div>'),d6=G('<div class="odz-relative odz-pb-48"><!> <!></div>'),c6=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-16"><div class="odz-text-center"><div class="odz-text-6xl odz-mb-4"></div> <h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h2> <p class="odz-text-sm odz-text-gray-600">        </p></div> <div class="odz-w-full odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function Gx(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=()=>on(pr,"$fixedEstimateStore",t),i=()=>on(ni,"$shopStore",t),a=ze();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"step",12,0),h=gt(e,"onNext",8,void 0),p=ze(null),v=ze(!1),w=ze(null),b=ze(!1);function x(){if(d()&&d()!=="temp")return"selection";if(c()!==void 0){const _e=o().products[c()];if(_e!=null&&_e.print_type&&_e.print_type!=="selection")return _e.print_type}return"selection"}let S=ze(x()),I=null;const P=[{id:"simple",title:"  ",description:"   ",icon:"",features:[" ","  "," "],color:"from-green-500 to-emerald-600"},{id:"detailed",title:"  ",description:"  ",icon:"",features:[" "," "," /"],color:"from-blue-500 to-indigo-600"},{id:"self-design",title:" ",description:"  ",icon:"",features:[" "," "," "],color:"from-purple-500 to-pink-600"},{id:"none",title:"  ",description:"    ",icon:"",features:[" ","  "," "],color:"from-gray-500 to-slate-600"}];function N(ue){const Z=ue;y(S,Z),console.log(""),console.log(" [print.svelte] selectPrintMethod :",{method:Z,idx:c(),productId:A()}),console.log(" [BEFORE] estimateStore.products[idx]:",JSON.parse(JSON.stringify(Ur(wt).products[c()??0]||{}))),console.log(" [BEFORE] fixedEstimateStore:",JSON.parse(JSON.stringify(Ur(pr)||{}))),Z!=="selection"&&Gn.selectPrintMethod(A(),Z),Z!=="selection"&&pr.selectPrintMethod(Z),Z!=="selection"&&c()!==void 0&&(wt.updateProductPrintType(c(),Z),Z==="simple"||Z==="none"?(wt.clearDetailedPrints(c()),console.log(" [print.svelte] clearDetailedPrints  (idx:",c(),")")):Z==="detailed"&&wt.clearSimplePrints(c())),console.log(" [AFTER] estimateStore.products[idx]:",JSON.parse(JSON.stringify(Ur(wt).products[c()??0]||{}))),console.log(" [AFTER] fixedEstimateStore:",JSON.parse(JSON.stringify(Ur(pr)||{}))),console.log(""),(Z==="simple"||Z==="none")&&d()&&d()!=="temp"&&c()!==void 0&&vt.from("estimate_prints").delete().eq("estimate_id",d()).eq("idx",c()).then(({error:_e})=>{_e&&console.error(" estimate_prints  :",_e)}),typeof window<"u"&&Z!=="selection"&&requestAnimationFrame(()=>{const _e=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:Z,idx:c(),estimateId:d(),printAmount:Z==="simple"||Z==="none"?0:void 0,source:"printMethodChange"}});window.dispatchEvent(_e),console.log(" printAmountRecalc   (requestAnimationFrame ):",{productId:A(),method:Z,printAmount:Z==="simple"||Z==="none"?0:void 0})}),Z==="none"&&(u(0),Gn.completePrintSelection(A()),pr.completePrintSelection(),h()&&h()())}function ee(){console.log(""),console.log(" [print.svelte] backToSelection "),console.log(" [BEFORE] estimateStore.products[idx]:",JSON.parse(JSON.stringify(Ur(wt).products[c()??0]||{}))),console.log(" [BEFORE] fixedEstimateStore:",JSON.parse(JSON.stringify(Ur(pr)||{}))),y(S,"selection"),Gn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1}),pr.updatePrintSelection({currentMethod:"selection",isCompleted:!1,lastUpdated:Date.now()}),c()!==void 0&&(wt.clearDetailedPrints(c()),wt.clearSimplePrints(c()),wt.updateProductPrintType(c(),"selection"),console.log(" [backToSelection] estimateStore prints ")),console.log(" [AFTER] estimateStore.products[idx]:",JSON.parse(JSON.stringify(Ur(wt).products[c()??0]||{}))),console.log(" [AFTER] fixedEstimateStore:",JSON.parse(JSON.stringify(Ur(pr)||{}))),console.log(""),typeof window<"u"&&requestAnimationFrame(()=>{const ue=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:"selection",idx:c(),estimateId:d(),printAmount:0,source:"backToSelection"}});window.dispatchEvent(ue),console.log(" [backToSelection] printAmountRecalc   (toMethod: selection, printAmount: 0)")})}function j(){y(S,"selection"),A()&&Gn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1})}async function D(){var _e;u(0),Gn.completePrintSelection(A()),pr.completePrintSelection();let ue=0,Z=[];if(l(S)==="detailed"&&c()!==void 0&&(await wt.calculatePrintPrice(c()),Z=((_e=o().products[c()])==null?void 0:_e.prints)||[],ue=Z.reduce((z,E)=>z+(E.price||0),0)),typeof window<"u"){const z=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:l(S),toMethod:l(S),idx:c(),estimateId:d(),prints:Z,printAmount:ue,source:"printComplete"}});window.dispatchEvent(z),console.log(" print.svelte - completePrint  :",{productId:A(),idx:c(),currentMethod:l(S),printAmount:ue})}h()&&h()()}function ne(ue){ue!=null&&ue.product&&wt.update(Z=>{const _e=[...Z.products];let z=_e.findIndex(E=>{var F;return((F=E==null?void 0:E.product)==null?void 0:F.id)===ue.product.id});if(z===-1){const E={product:ue.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:ue.addonProductsMap||{},productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};_e.push(E),z=_e.length-1}else _e[z].prints||(_e[z]={..._e[z],prints:[]});return{...Z,products:_e,index:z}})}async function xe(ue=!1){var Z;if(A()){y(v,!0),y(w,null);try{const _e=s().productSelection;if(ue&&_e&&_e.product&&_e.productId===A()){if(y(p,{product:_e.product,addons:_e.addons||[],addonItems:_e.addonItems||[]}),ne(l(p)),c()!==void 0){const E=o().products[c()];E!=null&&E.print_type&&E.print_type!=="selection"&&y(S,E.print_type)}return}if(!ue){const E=Gn.restoreFromSession(A());if(E!=null&&E.isLoaded){y(p,E),ne(l(p)),E.printSelection&&y(S,E.printSelection.currentMethod);return}}const z=Gn.getProductData(A());z!=null&&z.isLoaded?(y(p,z),ne(l(p)),!ue&&z.printSelection&&y(S,z.printSelection.currentMethod)):(y(p,await Gn.loadIntegratedProductData(A(),i().id)),ne(l(p))),(Z=l(p))!=null&&Z.process}catch(_e){y(w,_e instanceof Error?_e.message:"   .")}finally{y(v,!1)}}}function L(){const ue=Gn.getProductData(A());if(!(ue!=null&&ue.printSelection))return;const Z=ue.printSelection;y(S,Z.currentMethod)}function q(){I=Gn.subscribe(ue=>{const Z=ue.productDataCache[A()];if(Z!=null&&Z.printSelection){const z=Z.printSelection.currentMethod;z!==l(S)&&y(S,z)}})}async function V(){if(!d()||d()==="temp")return"selection";const ue=c()??o().index??0;let Z="selection";try{const z=o().products[ue];if(z!=null&&z.print_type&&z.print_type!=="selection")return z.print_type;const F=(await h1(d())).filter(Q=>Q.idx===ue);if(F.length>0){const Q=F.map(M=>({objectId:M.object_id||"",title:M.title||"",printMethod:M.print_method||"",savedFileInfo:M.uploads?typeof M.uploads=="string"?JSON.parse(M.uploads):M.uploads:[]}));wt.updateSimplePrints(ue,Q),Z="simple"}return z!=null&&z.prints&&z.prints.length>0&&(Z="detailed"),Z!=="selection"&&wt.updateProductPrintType(ue,Z),Z}catch(_e){return console.error(" detectPrintMethodFromDB :",_e),"selection"}}Zn(async()=>{var Z,_e;const ue=d()&&d()!=="temp";if(ue){y(b,!0);try{const z=await V();z!=="selection"&&y(S,z)}finally{y(b,!1)}}if(ue||pr.initialize(A(),d(),c()),q(),await xe(ue),ue||L(),!ue){const z=o().products.find(F=>{var Q;return((Q=F==null?void 0:F.product)==null?void 0:Q.id)===A()});if((!((Z=l(p))!=null&&Z.printSelection)||!l(p).printSelection.currentMethod||l(p).printSelection.currentMethod==="selection")&&(z!=null&&z.prints)&&z.prints.length>0)try{const F=z.prints[0],Q=(F==null?void 0:F.method)??((_e=F==null?void 0:F.parentTemplates)!=null&&_e.length?"detailed":"simple");Gn.updatePrintSelection(A(),{currentMethod:Q??l(S),selectedTemplate:F==null?void 0:F.template,selectedColors:F==null?void 0:F.colors,printConfig:F==null?void 0:F.config}),y(S,Q??l(S)),console.log("      (currentMethod ):",{derivedMethod:Q,fallbackMethod:l(S)})}catch{}}}),ps(()=>{I&&I()}),Zt(()=>l(p),()=>{y(a,P.filter(ue=>{var Z,_e;return ue.id==="self-design"?((_e=(Z=l(p))==null?void 0:Z.product)==null?void 0:_e.self_design_enabled)===!0:!0}))}),Zt(()=>(l(S),l(a)),()=>{l(S)!=="selection"&&(l(a).some(Z=>Z.id===l(S))||y(S,"selection"))}),Fo(),cn();var se=Tt(),ve=lt(se);{var ie=ue=>{var Z=r6();U(ue,Z)},ge=ue=>{var Z=Tt(),_e=lt(Z);{var z=F=>{var Q=n6(),M=g(Q),k=B(g(M),2),O=B(g(k),2),K=g(O),R=B(M,2);De(()=>Qe(K,l(w))),it("click",R,()=>xe(d()&&d()!=="temp")),U(F,Q)},E=F=>{var Q=Tt(),M=lt(Q);{var k=K=>{var R=o6();U(K,R)},O=K=>{var R=Tt(),de=lt(R);{var Be=He=>{var W=a6(),H=B(g(W),2);sr(H,5,()=>l(a),vr,(we,ye)=>{var Ie=i6(),le=g(Ie),Te=g(le),Fe=B(Te,2),Me=g(Fe),Ne=g(Me),fe=B(Me,2),J=g(fe),Se=B(fe,2),$=g(Se),Ce=B(Se,2);sr(Ce,5,()=>l(ye).features,vr,(Ee,Oe)=>{var je=s6(),ke=B(g(je),2),pe=g(ke);De(()=>Qe(pe,l(Oe))),U(Ee,je)}),De(()=>{Pr(Te,`odz-absolute odz-inset-0 odz-bg-gradient-to-br ${l(ye).color??""}
                                   odz-rounded-xl odz-opacity-0 group-hover:odz-opacity-10 odz-transition-opacity odz-duration-300`),Qe(Ne,l(ye).icon),Qe(J,l(ye).title),Qe($,l(ye).description)}),it("click",Ie,()=>N(l(ye).id)),U(we,Ie)});var te=B(H,2);const Ae=At(()=>d()||null),he=At(()=>c()!==void 0?c():null);kp(te,{get productId(){return A()},get estimateId(){return l(Ae)},get idx(){return l(he)},debugSource:"print-selection",buttonConfig:{type:"double",buttons:[{text:" ",action:()=>{if(typeof window<"u"){const we=new CustomEvent("changeTab",{detail:"product"});window.dispatchEvent(we)}},style:"secondary",icon:"arrow-left"},{text:"",action:D,style:"primary",icon:"check"}]}}),U(He,W)},Pe=He=>{var W=Tt(),H=lt(W);{var te=he=>{var we=A6(),ye=g(we);TQ(ye,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:D,onCancel:ee}),U(he,we)},Ae=he=>{var we=Tt(),ye=lt(we);{var Ie=Te=>{var Fe=l6(),Me=g(Fe);PT(Me,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:D,onCancel:ee}),U(Te,Fe)},le=Te=>{var Fe=Tt(),Me=lt(Fe);{var Ne=J=>{var Se=d6(),$=g(Se);OT($,{get productId(){return A()},onComplete:D});var Ce=B($,2);const Ee=At(()=>d()||null),Oe=At(()=>c()!==void 0?c():null);kp(Ce,{get productId(){return A()},get estimateId(){return l(Ee)},get idx(){return l(Oe)},debugSource:"print-self-design",buttonConfig:{type:"single",buttons:[{text:"",action:D,style:"primary",icon:"check",size:"large"}]}}),U(J,Se)},fe=J=>{var Se=Tt(),$=lt(Se);{var Ce=Ee=>{var Oe=c6(),je=B(g(Oe),2),ke=g(je),pe=B(ke,2);it("click",ke,ee),it("click",pe,D),U(Ee,Oe)};be($,Ee=>{l(S)==="none"&&Ee(Ce)},!0)}U(J,Se)};be(Me,J=>{l(S)==="self-design"?J(Ne):J(fe,!1)},!0)}U(Te,Fe)};be(ye,Te=>{l(S)==="detailed"?Te(Ie):Te(le,!1)},!0)}U(he,we)};be(H,he=>{l(S)==="simple"?he(te):he(Ae,!1)},!0)}U(He,W)};be(de,He=>{l(S)==="selection"?He(Be):He(Pe,!1)},!0)}U(K,R)};be(M,K=>{l(b)?K(k):K(O,!1)},!0)}U(F,Q)};be(_e,F=>{l(w)?F(z):F(E,!1)},!0)}U(ue,Z)};be(ve,ue=>{l(v)?ue(ie):ue(ge,!1)})}U(n,se),P_(e,"resetPrintTab",j);var re=An({resetPrintTab:j});return r(),re}/*!
* html2canvas-pro 1.5.8 <https://yorickshan.github.io/html2canvas-pro/>
* Copyright (c) 2024 yorickshan <https://github.com/yorickshan>
* Released under MIT License
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J0=function(n,e){return J0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},J0(n,e)};function da(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");J0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Z0=function(){return Z0=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Z0.apply(this,arguments)};function ks(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,[])).next())})}function Bs(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(c){return A([d,c])}}function A(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],o=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function bf(n,e,t){if(arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var CA=function(){function n(e,t,r,o){this.left=e,this.top=t,this.width=r,this.height=o}return n.prototype.add=function(e,t,r,o){return new n(this.left+e,this.top+t,this.width+r,this.height+o)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(o){return o.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),Bg=function(n,e){return CA.fromClientRect(n,e.getBoundingClientRect())},u6=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),o=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new CA(0,0,r,o)},zg=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},xo=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},lb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yf=0;yf<lb.length;yf++)h6[lb.charCodeAt(yf)]=yf;var db="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _f=0;_f<db.length;_f++)gu[db.charCodeAt(_f)]=_f;var f6=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=gu[n.charCodeAt(r)],i=gu[n.charCodeAt(r+1)],a=gu[n.charCodeAt(r+2)],A=gu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},p6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},g6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Yl=5,R1=11,Tv=2,v6=R1-Yl,Wx=65536>>Yl,m6=1<<Yl,Lv=m6-1,w6=1024>>Yl,b6=Wx+w6,y6=b6,_6=32,x6=y6+_6,B6=65536>>R1,z6=1<<v6,C6=z6-1,cb=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},S6=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},E6=function(n,e){var t=f6(n),r=Array.isArray(t)?g6(t):new Uint32Array(t),o=Array.isArray(t)?p6(t):new Uint16Array(t),s=24,i=cb(o,s/2,r[4]/2),a=r[5]===2?cb(o,(s+r[4])/2):S6(r,Math.ceil((s+r[4])/4));return new F6(r[0],r[1],r[2],r[3],i,a)},F6=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Yl],t=(t<<Tv)+(e&Lv),this.data[t];if(e<=65535)return t=this.index[Wx+(e-55296>>Yl)],t=(t<<Tv)+(e&Lv),this.data[t];if(e<this.highStart)return t=x6-B6+(e>>R1),t=this.index[t],t+=e>>Yl&C6,t=this.index[t],t=(t<<Tv)+(e&Lv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),ub="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xf=0;xf<ub.length;xf++)I6[ub.charCodeAt(xf)]=xf;var U6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",hb=50,Q6=1,Xx=2,Yx=3,T6=4,L6=5,fb=7,Jx=8,pb=9,sl=10,em=11,gb=12,tm=13,P6=14,vu=15,rm=16,Bf=17,su=18,k6=19,vb=20,nm=21,iu=22,Pv=23,Dd=24,vi=25,mu=26,wu=27,Nd=28,O6=29,Ol=30,D6=31,zf=32,Cf=33,om=34,sm=35,im=36,eh=37,am=38,np=39,op=40,kv=41,Zx=42,N6=43,M6=[9001,65288],eB="!",tn="",Sf="",Am=E6(U6),aA=[Ol,im],lm=[Q6,Xx,Yx,L6],tB=[sl,Jx],mb=[wu,mu],H6=lm.concat(tB),wb=[am,np,op,om,sm],j6=[vu,tm],R6=function(n,e){e===void 0&&(e="strict");var t=[],r=[],o=[];return n.forEach(function(s,i){var a=Am.get(s);if(a>hb?(o.push(!0),a-=hb):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),t.push(rm);if(a===T6||a===em){if(i===0)return r.push(i),t.push(Ol);var A=t[i-1];return H6.indexOf(A)===-1?(r.push(r[i-1]),t.push(A)):(r.push(i),t.push(Ol))}if(r.push(i),a===D6)return t.push(e==="strict"?nm:eh);if(a===Zx||a===O6)return t.push(Ol);if(a===N6)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(eh):t.push(Ol);t.push(a)}),[r,t,o]},Ov=function(n,e,t,r){var o=r[t];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var s=t;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==sl)break}if(o===sl)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==sl)break}if(a!==sl)break}return!1},bb=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===sl)t--;else return r}return 0},q6=function(n,e,t,r,o){if(t[r]===0)return tn;var s=r-1;if(Array.isArray(o)&&o[s]===!0)return tn;var i=s-1,a=s+1,A=e[s],d=i>=0?e[i]:0,c=e[a];if(A===Xx&&c===Yx)return tn;if(lm.indexOf(A)!==-1)return eB;if(lm.indexOf(c)!==-1||tB.indexOf(c)!==-1)return tn;if(bb(s,e)===Jx)return Sf;if(Am.get(n[s])===em||(A===zf||A===Cf)&&Am.get(n[a])===em||A===fb||c===fb||A===pb||[sl,tm,vu].indexOf(A)===-1&&c===pb||[Bf,su,k6,Dd,Nd].indexOf(c)!==-1||bb(s,e)===iu||Ov(Pv,iu,s,e)||Ov([Bf,su],nm,s,e)||Ov(gb,gb,s,e))return tn;if(A===sl)return Sf;if(A===Pv||c===Pv)return tn;if(c===rm||A===rm)return Sf;if([tm,vu,nm].indexOf(c)!==-1||A===P6||d===im&&j6.indexOf(A)!==-1||A===Nd&&c===im||c===vb||aA.indexOf(c)!==-1&&A===vi||aA.indexOf(A)!==-1&&c===vi||A===wu&&[eh,zf,Cf].indexOf(c)!==-1||[eh,zf,Cf].indexOf(A)!==-1&&c===mu||aA.indexOf(A)!==-1&&mb.indexOf(c)!==-1||mb.indexOf(A)!==-1&&aA.indexOf(c)!==-1||[wu,mu].indexOf(A)!==-1&&(c===vi||[iu,vu].indexOf(c)!==-1&&e[a+1]===vi)||[iu,vu].indexOf(A)!==-1&&c===vi||A===vi&&[vi,Nd,Dd].indexOf(c)!==-1)return tn;if([vi,Nd,Dd,Bf,su].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===vi)return tn;if([Nd,Dd].indexOf(h)!==-1)u--;else break}if([wu,mu].indexOf(c)!==-1)for(var u=[Bf,su].indexOf(A)!==-1?i:s;u>=0;){var h=e[u];if(h===vi)return tn;if([Nd,Dd].indexOf(h)!==-1)u--;else break}if(am===A&&[am,np,om,sm].indexOf(c)!==-1||[np,om].indexOf(A)!==-1&&[np,op].indexOf(c)!==-1||[op,sm].indexOf(A)!==-1&&c===op||wb.indexOf(A)!==-1&&[vb,mu].indexOf(c)!==-1||wb.indexOf(c)!==-1&&A===wu||aA.indexOf(A)!==-1&&aA.indexOf(c)!==-1||A===Dd&&aA.indexOf(c)!==-1||aA.concat(vi).indexOf(A)!==-1&&c===iu&&M6.indexOf(n[a])===-1||aA.concat(vi).indexOf(c)!==-1&&A===su)return tn;if(A===kv&&c===kv){for(var p=t[s],v=1;p>0&&(p--,e[p]===kv);)v++;if(v%2!==0)return tn}return A===zf&&c===Cf?tn:Sf},K6=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=R6(n,e.lineBreak),r=t[0],o=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[vi,Ol,Zx].indexOf(a)!==-1?eh:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,o,i]},$6=function(){function n(e,t,r,o){this.codePoints=e,this.required=t===eB,this.start=r,this.end=o}return n.prototype.slice=function(){return xo.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),V6=function(n,e){var t=zg(n),r=K6(t,e),o=r[0],s=r[1],i=r[2],a=t.length,A=0,d=0;return{next:function(){if(d>=a)return{done:!0,value:null};for(var c=tn;d<a&&(c=q6(t,s,o,++d,i))===tn;);if(c!==tn||d===a){var u=new $6(t,c,A,d);return A=d,{value:u,done:!1}}return{done:!0,value:null}}}},G6=1,W6=2,gh=4,yb=8,Op=10,_b=47,Uu=92,X6=9,Y6=32,Ef=34,au=61,J6=35,Z6=36,eL=37,Ff=39,If=40,Au=41,tL=95,Ys=45,rL=33,nL=60,oL=62,sL=64,iL=91,aL=93,AL=61,lL=123,Uf=63,dL=125,xb=124,cL=126,uL=128,Bb=65533,Dv=42,Kl=43,hL=44,fL=58,pL=59,th=46,gL=0,vL=8,mL=11,wL=14,bL=31,yL=127,za=-1,rB=48,nB=97,oB=101,_L=102,xL=117,BL=122,sB=65,iB=69,aB=70,zL=85,CL=90,Cs=function(n){return n>=rB&&n<=57},SL=function(n){return n>=55296&&n<=57343},Md=function(n){return Cs(n)||n>=sB&&n<=aB||n>=nB&&n<=_L},EL=function(n){return n>=nB&&n<=BL},FL=function(n){return n>=sB&&n<=CL},IL=function(n){return EL(n)||FL(n)},UL=function(n){return n>=uL},Qf=function(n){return n===Op||n===X6||n===Y6},Dp=function(n){return IL(n)||UL(n)||n===tL},zb=function(n){return Dp(n)||Cs(n)||n===Ys},QL=function(n){return n>=gL&&n<=vL||n===mL||n>=wL&&n<=bL||n===yL},tl=function(n,e){return n!==Uu?!1:e!==Op},Tf=function(n,e,t){return n===Ys?Dp(e)||tl(e,t):Dp(n)?!0:!!(n===Uu&&tl(n,e))},Nv=function(n,e,t){return n===Kl||n===Ys?Cs(e)?!0:e===th&&Cs(t):Cs(n===th?e:n)},TL=function(n){var e=0,t=1;(n[e]===Kl||n[e]===Ys)&&(n[e]===Ys&&(t=-1),e++);for(var r=[];Cs(n[e]);)r.push(n[e++]);var o=r.length?parseInt(xo.apply(void 0,r),10):0;n[e]===th&&e++;for(var s=[];Cs(n[e]);)s.push(n[e++]);var i=s.length,a=i?parseInt(xo.apply(void 0,s),10):0;(n[e]===iB||n[e]===oB)&&e++;var A=1;(n[e]===Kl||n[e]===Ys)&&(n[e]===Ys&&(A=-1),e++);for(var d=[];Cs(n[e]);)d.push(n[e++]);var c=d.length?parseInt(xo.apply(void 0,d),10):0;return t*(o+a*Math.pow(10,-i))*Math.pow(10,A*c)},LL={type:2},PL={type:3},kL={type:4},OL={type:13},DL={type:8},NL={type:21},ML={type:9},HL={type:10},jL={type:11},RL={type:12},qL={type:14},Lf={type:23},KL={type:1},$L={type:25},VL={type:24},GL={type:26},WL={type:27},XL={type:28},YL={type:29},JL={type:31},dm={type:32},AB=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(zg(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==dm;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ef:return this.consumeStringToken(Ef);case J6:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(zb(t)||tl(r,o)){var s=Tf(t,r,o)?W6:G6,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Z6:if(this.peekCodePoint(0)===au)return this.consumeCodePoint(),OL;break;case Ff:return this.consumeStringToken(Ff);case If:return LL;case Au:return PL;case Dv:if(this.peekCodePoint(0)===au)return this.consumeCodePoint(),qL;break;case Kl:if(Nv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case hL:return kL;case Ys:var a=e,A=this.peekCodePoint(0),d=this.peekCodePoint(1);if(Nv(a,A,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Tf(a,A,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Ys&&d===oL)return this.consumeCodePoint(),this.consumeCodePoint(),VL;break;case th:if(Nv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _b:if(this.peekCodePoint(0)===Dv)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Dv&&(c=this.consumeCodePoint(),c===_b))return this.consumeToken();if(c===za)return this.consumeToken()}break;case fL:return GL;case pL:return WL;case nL:if(this.peekCodePoint(0)===rL&&this.peekCodePoint(1)===Ys&&this.peekCodePoint(2)===Ys)return this.consumeCodePoint(),this.consumeCodePoint(),$L;break;case sL:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Tf(u,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case iL:return XL;case Uu:if(tl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case aL:return YL;case AL:if(this.peekCodePoint(0)===au)return this.consumeCodePoint(),DL;break;case lL:return jL;case dL:return RL;case xL:case zL:var v=this.peekCodePoint(0),w=this.peekCodePoint(1);return v===Kl&&(Md(w)||w===Uf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xb:if(this.peekCodePoint(0)===au)return this.consumeCodePoint(),ML;if(this.peekCodePoint(0)===xb)return this.consumeCodePoint(),NL;break;case cL:if(this.peekCodePoint(0)===au)return this.consumeCodePoint(),HL;break;case za:return dm}return Qf(e)?(this.consumeWhiteSpace(),JL):Cs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Dp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:xo(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Md(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Uf&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(xo.apply(void 0,e.map(function(A){return A===Uf?rB:A})),16),s=parseInt(xo.apply(void 0,e.map(function(A){return A===Uf?aB:A})),16);return{type:30,start:o,end:s}}var i=parseInt(xo.apply(void 0,e),16);if(this.peekCodePoint(0)===Ys&&Md(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];Md(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(xo.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===If?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===If?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===za)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Ff||t===Ef){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===za||this.peekCodePoint(0)===Au)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Lf)}for(;;){var o=this.consumeCodePoint();if(o===za||o===Au)return{type:22,value:xo.apply(void 0,e)};if(Qf(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===za||this.peekCodePoint(0)===Au?(this.consumeCodePoint(),{type:22,value:xo.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Lf);if(o===Ef||o===Ff||o===If||QL(o))return this.consumeBadUrlRemnants(),Lf;if(o===Uu)if(tl(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Lf;else e.push(o)}},n.prototype.consumeWhiteSpace=function(){for(;Qf(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Au||e===za)return;tl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var o=Math.min(t,e);r+=xo.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var o=this._value[r];if(o===za||o===void 0||o===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(o===Op)return this._value.splice(0,r),KL;if(o===Uu){var s=this._value[r+1];s!==za&&s!==void 0&&(s===Op?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):tl(o,s)&&(t+=this.consumeStringSlice(r),t+=xo(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=gh,r=this.peekCodePoint(0);for((r===Kl||r===Ys)&&e.push(this.consumeCodePoint());Cs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===th&&Cs(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=yb;Cs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===iB||r===oB)&&((o===Kl||o===Ys)&&Cs(s)||Cs(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=yb;Cs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[TL(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],o=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Tf(o,s,i)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return o===eL?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Md(e)){for(var t=xo(e);Md(this.peekCodePoint(0))&&t.length<6;)t+=xo(this.consumeCodePoint());Qf(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||SL(r)||r>1114111?Bb:r}return e===za?Bb:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(zb(t))e+=xo(t);else if(tl(t,this.peekCodePoint(0)))e+=xo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),lB=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new AB;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||eP(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?dm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),yl=function(n){return n.type===15},Po=function(n){return n.type===17},nn=function(n){return n.type===20},ZL=function(n){return n.type===0},cm=function(n,e){return nn(n)&&n.value===e},dB=function(n){return n.type!==31},fs=function(n){return n.type!==31&&n.type!==4},Ka=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},eP=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},gl=function(n){return n.type===17||n.type===15},Yn=function(n){return n.type===16||gl(n)},cB=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},us={type:17,number:0,flags:gh},q1={type:16,number:50,flags:gh},il={type:16,number:100,flags:gh},bu=function(n,e,t){var r=n[0],o=n[1];return[Un(r,e),Un(typeof o<"u"?o:r,t)]},Un=function(n,e){if(n.type===16)return n.number/100*e;if(yl(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},uB="deg",hB="grad",fB="rad",pB="turn",Cg={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case uB:return Math.PI*e.number/180;case hB:return Math.PI/200*e.number;case fB:return e.number;case pB:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},gB=function(n){return n.type===15&&(n.unit===uB||n.unit===hB||n.unit===fB||n.unit===pB)},vB=function(n){var e=n.filter(nn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[us,us];case"to top":case"bottom":return Di(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[us,il];case"to right":case"left":return Di(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[il,il];case"to bottom":case"top":return Di(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[il,us];case"to left":case"right":return Di(270)}return 0},Di=function(n){return Math.PI*n/180},ll=function(n){return(255&n)===0},es=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,o=255&n>>24;return e<255?"rgba(".concat(o,",").concat(r,",").concat(t,",").concat(e/255,")"):"rgb(".concat(o,",").concat(r,",").concat(t,")")},Ra=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},Np=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},hd=function(n){return(n[0].type===20?n[0].value:"unknown")==="from"},vo=function(n,e,t){return Math.min(Math.max(n,e),t)},si=function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[3]*e[0]+n[4]*e[1]+n[5]*e[2],n[6]*e[0]+n[7]*e[1]+n[8]*e[2]]},tP=function(n){return Ra(vo(Math.round(n[0]*255),0,255),vo(Math.round(n[1]*255),0,255),vo(Math.round(n[2]*255),0,255),vo(n[3],0,1))},K1=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],s=fd([e,t,r]);return Ra(vo(Math.round(s[0]*255),0,255),vo(Math.round(s[1]*255),0,255),vo(Math.round(s[2]*255),0,255),o)},vh=function(n){var e=_l([n[0],n[1],n[2]]);return K1([e[0],e[1],e[2],n[3]])},rP=function(n,e){if(hd(e.filter(fs)))throw new Error("Relative color not supported for lab()");var t=Sg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=fd(_l(Ig([r,o,s])));return Ra(vo(Math.round(a[0]*255),0,255),vo(Math.round(a[1]*255),0,255),vo(Math.round(a[2]*255),0,255),i)},nP=function(n,e){if(hd(e.filter(fs)))throw new Error("Relative color not supported for oklab()");var t=Sg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=fd(_l(Fg([r,o,s])));return Ra(vo(Math.round(a[0]*255),0,255),vo(Math.round(a[1]*255),0,255),vo(Math.round(a[2]*255),0,255),i)},oP=function(n,e){if(hd(e.filter(fs)))throw new Error("Relative color not supported for oklch()");var t=bB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=fd(_l(Fg(Eg([r,o,s]))));return Ra(vo(Math.round(a[0]*255),0,255),vo(Math.round(a[1]*255),0,255),vo(Math.round(a[2]*255),0,255),i)},sP=function(n,e){if(hd(e.filter(fs)))throw new Error("Relative color not supported for lch()");var t=wB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=fd(_l(Ig(Eg([r,o,s]))));return Ra(vo(Math.round(a[0]*255),0,255),vo(Math.round(a[1]*255),0,255),vo(Math.round(a[2]*255),0,255),i)},mB=function(n,e){var t=e.filter(fs),r=t[0],o=t[1],s=t[2],i=t[3],a=(r.type===17?Di(r.number):Cg.parse(n,r))/(Math.PI*2),A=Yn(o)?o.number/100:0,d=Yn(s)?s.number/100:0,c=typeof i<"u"&&Yn(i)?Un(i,1):1;return[a,A,d,c]},Cb=function(n,e){if(hd(e))throw new Error("Relative color not supported for hsl()");var t=mB(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=_B([r,o,s]);return Ra(a[0]*255,a[1]*255,a[2]*255,o===0?1:i)},wB=function(n){var e=n.filter(fs),t=Yn(e[0])?e[0].number:0,r=Yn(e[1])?e[1].number:0,o=Po(e[2])||yl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Yn(e[4])?Un(e[4],1):1;return[t,r,o,s]},Sg=function(n){var e=n.filter(fs),t=e[0].type===16?e[0].number/100:Po(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:Po(e[1])?e[1].number:0,o=Po(e[2])||yl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Yn(e[4])?Un(e[4],1):1;return[t,r,o,s]},bB=function(n){var e=n.filter(fs),t=e[0].type===16?e[0].number/100:Po(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:Po(e[1])?e[1].number:0,o=Po(e[2])||yl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Yn(e[4])?Un(e[4],1):1;return[t,r,o,s]},yB=function(n){return si([1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371],n)},$1=function(n){return si([.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124],n)},Mv=function(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n},_B=function(n){var e=n[0],t=n[1],r=n[2];if(t===0)return[r*255,r*255,r*255];var o=r<=.5?r*(t+1):r+t-r*t,s=r*2-o,i=Mv(s,o,e+1/3),a=Mv(s,o,e),A=Mv(s,o,e-1/3);return[i,a,A]},Eg=function(n){var e=n[0],t=n[1],r=n[2];return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},Fg=function(n){var e=si([1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092],n),t=e.map(function(r){return Math.pow(r,3)});return si([1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],t)},Ig=function(n){var e=(n[0]+16)/116,t=n[1]/500+e,r=e-n[2]/200,o=24389/27,s=24/116,i=[(t>s?Math.pow(t,3):(116*t-16)/o)*.3457/.3585,n[0]>8?Math.pow(e,3):n[0]/o,(r>s?Math.pow(r,3):(116*r-16)/o)*(1-.3457-.3585)/.3585];return $1([i[0],i[1],i[2]])},iP=function(n,e){var t=e.filter(fs);if(t.length===3){var r=t.map(Np),o=r[0],s=r[1],i=r[2],a=hm([o/255,s/255,i/255]),A=um([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,1]}if(t.length===4){var h=t.map(Np),o=h[0],s=h[1],i=h[2],p=h[3],a=hm([o/255,s/255,i/255]),v=um([a[0],a[1],a[2]]),d=v[0],c=v[1],u=v[2];return[d,c,u,p]}return[0,0,0,1]},aP=function(n,e){var t=mB(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=hm(_B([r,o,s])),A=um([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,i]},AP=function(n,e){var t=Sg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ig([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},lP=function(n,e){var t=wB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ig(Eg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},dP=function(n,e){var t=bB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Fg(Eg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},cP=function(n,e){var t=Sg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Fg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},uP=function(n){return $1([n[0],n[1],n[2]])},Sb=function(n){return n},hP=function(n){var e=yB([n[0],n[2],n[3]]),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},Eb=function(n){return vh([n[0],n[1],n[2],n[3]])},fP=function(n){var e=uP([n[0],n[1],n[2]]);return vh([e[0],e[1],e[2],n[3]])},_l=function(n){return si([3.2409699419045226,-1.537383177570094,-.4986107602930034,-.9692436362808796,1.8759675015077202,.04155505740717559,.05563007969699366,-.20397695888897652,1.0569715142428786],n)},um=function(n){return si([.41239079926595934,.357584339383878,.1804807884018343,.21263900587151027,.715168678767756,.07219231536073371,.01933081871559182,.11919477979462598,.9505321522496607],n)},fd=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r>.0031308?t*(1.055*Math.pow(r,1/2.4)-.055):12.92*e})},hm=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r<=.04045?e/12.92:t*Math.pow((r+.055)/1.055,2.4)})},pP=function(n){var e=fd(_l([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},gP=function(n){var e=_l([n[0],n[1],n[2]]),t=e[0],r=e[1],o=e[2];return[vo(Math.round(t*255),0,255),vo(Math.round(r*255),0,255),vo(Math.round(o*255),0,255),n[3]]},vP=function(n){return si([.4865709486482162,.26566769316909306,.1982172852343625,.2289745640697488,.6917385218365064,.079286914093745,0,.04511338185890264,1.043944368900976],n)},mP=function(n){return si([2.493496911941425,-.9313836179191239,-.40271078445071684,-.8294889695615747,1.7626640603183463,.023624685841943577,.03584583024378447,-.07617238926804182,.9568845240076872],n)},wP=function(n){return n.map(function(e){var t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*Math.pow((e+.055)/1.055,2.4)||0})},bP=function(n){return fd(n)},yP=function(n){var e=wP([n[0],n[1],n[2]]);return vP([e[0],e[1],e[2]])},_P=function(n){var e=bP(mP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},xP=function(n){var e=yP([n[0],n[1],n[2]]);return vh([e[0],e[1],e[2],n[3]])},BP=function(n){return si([2.0415879038107465,-.5650069742788596,-.34473135077832956,-.9692436362808795,1.8759675015077202,.04155505740717557,.013444280632031142,-.11836239223101838,1.0151749943912054],n)},zP=function(n){return si([.5766690429101305,.1855582379065463,.1882286462349947,.29734497525053605,.6273635662554661,.0752914584939978,.02703136138641234,.07068885253582723,.9913375368376388],n)},CP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,2.19921875)});return[e[0],e[1],e[2]]},SP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,.4547069271758437)});return[e[0],e[1],e[2]]},EP=function(n){var e=SP(BP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},FP=function(n){var e=_l(zP(CP([n[0],n[1],n[2]])));return K1([e[0],e[1],e[2],n[3]])},IP=function(n){return si([.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602],n)},UP=function(n){return si([1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452],n)},QP=function(n){return n.map(function(e){return e<16/512?e/16:Math.pow(e,1.8)})},TP=function(n){return n.map(function(e){return e>1/512?Math.pow(e,1/1.8):e*16})},LP=function(n){var e=QP([n[0],n[1],n[2]]);return $1(IP([e[0],e[1],e[2]]))},PP=function(n){var e=TP(UP(yB([n[0],n[1],n[2]]))),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},kP=function(n){var e=LP([n[0],n[1],n[2]]);return vh([e[0],e[1],e[2],n[3]])},Mp=1.09929682680944,xB=.018053968510807,OP=function(n){return n.map(function(e){return e<xB*4.5?e/4.5:Math.pow((e+Mp-1)/Mp,1/.45)})},DP=function(n){return n.map(function(e){return e>=xB?Mp*Math.pow(e,.45)-(Mp-1):4.5*e})},NP=function(n){return si([.6369580483012914,.14461690358620832,.1688809751641721,.2627002120112671,.6779980715188708,.05930171646986196,0,.028072693049087428,1.060985057710791],n)},MP=function(n){return si([1.716651187971268,-.355670783776392,-.25336628137366,-.666684351832489,1.616481236634939,.0157685458139111,.017639857445311,-.042770613257809,.942103121235474],n)},HP=function(n){var e=OP([n[0],n[1],n[2]]);return NP([e[0],e[1],e[2]])},jP=function(n){var e=DP(MP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},RP=function(n){var e=HP([n[0],n[1],n[2]]);return vh([e[0],e[1],e[2],n[3]])},dl={name:"color",parse:function(n,e){if(e.type===18){var t=VP[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'.concat(e.name,'"'));return t(n,e.values)}if(e.type===5){var r=BB(e),o=r[0],s=r[1],i=r[2],a=r[3];return Ra(o,s,i,a)}if(e.type===20){var A=ka[e.value.toUpperCase()];if(typeof A<"u")return A}return ka.TRANSPARENT}},BB=function(n){if(n.value.length===3){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),1]}if(n.value.length===4){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3),o=n.value.substring(3,4);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),parseInt(o+o,16)/255]}if(n.value.length===6){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),1]}if(n.value.length===8){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6),o=n.value.substring(6,8);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),parseInt(o,16)/255]}return[0,0,0,1]},Fb=function(n,e){var t=e.filter(fs);if(hd(t))throw new Error("Relative color not supported for rgb()");if(t.length===3){var r=t.map(Np),o=r[0],s=r[1],i=r[2];return Ra(o,s,i,1)}if(t.length===4){var a=t.map(Np),o=a[0],s=a[1],i=a[2],A=a[3];return Ra(o,s,i,A)}return 0},qP=function(n,e){var t=e.filter(fs),r=t[0].type===20?t[0].value:"unknown",o=!hd(t);if(o){var s=r,i=Ib[s];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(s,'" for color() function'));var a=Po(t[1])?t[1].number:0,A=Po(t[2])?t[2].number:0,d=Po(t[3])?t[3].number:0,c=t.length>4&&t[4].type===6&&t[4].value==="/"&&Po(t[5])?t[5].number:1;return i([a,A,d,c])}else{var u=function(ve,ie){if(Po(ie))return ie.number;var ge=function(z){return z==="r"||z==="x"?0:z==="g"||z==="y"?1:2};if(nn(ie)){var re=ge(ie.value);return ve[re]}var ue=function(z){for(var E=z.filter(fs),F="(",Q=0,M=E;Q<M.length;Q++){var k=M[Q];F+=k.type===18&&k.name==="calc"?ue(k.values):Po(k)?k.number:k.type===6||nn(k)?k.value:""}return F+=")",F};if(ie.type===18){var Z=ie.values.filter(fs);if(ie.name==="calc"){var _e=ue(Z).replace(/r|x/,ve[0].toString()).replace(/g|y/,ve[1].toString()).replace(/b|z/,ve[2].toString());return new Function("return "+_e)()}}return null},h=t[1].type===18?t[1].name:nn(t[1])||t[1].type===5?"rgb":"unknown",p=nn(t[2])?t[2].value:"unknown",v=t[1].type===18?t[1].values:nn(t[1])?[t[1]]:[];if(nn(t[1])){var w=ka[t[1].value.toUpperCase()];if(typeof w>"u")throw new Error("Attempting to use unknown color in relative color 'from'");var b=fc(n,t[1].value),x=255&b,S=255&b>>8,I=255&b>>16,P=255&b>>24;v=[{type:17,number:P,flags:1},{type:17,number:I,flags:1},{type:17,number:S,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}else if(t[1].type===5){var N=BB(t[1]),P=N[0],I=N[1],S=N[2],x=N[3];v=[{type:17,number:P,flags:1},{type:17,number:I,flags:1},{type:17,number:S,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}if(v.length===0)throw new Error("Attempting to use unknown color in relative color 'from'");if(p==="unknown")throw new Error("Attempting to use unknown colorspace in relative color 'to'");var ee=KP[h],j=$P[p],D=Ib[p];if(typeof ee>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(h,'" for color() function'));if(typeof j>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(p,'" for color() function'));var ne=ee(n,v),xe=j(ne),a=u(xe,t[3]),A=u(xe,t[4]),d=u(xe,t[5]),c=t.length>6&&t[6].type===6&&t[6].value==="/"&&Po(t[7])?t[7].number:1;if(a===null||A===null||d===null)throw new Error("Invalid relative color in color() function");return D([a,A,d,c])}},Ib={srgb:tP,"srgb-linear":K1,"display-p3":xP,"a98-rgb":FP,"prophoto-rgb":kP,xyz:Eb,"xyz-d50":fP,"xyz-d65":Eb,rec2020:RP},KP={rgb:iP,hsl:aP,lab:AP,lch:lP,oklab:cP,oklch:dP},$P={srgb:pP,"srgb-linear":gP,"display-p3":_P,"a98-rgb":EP,"prophoto-rgb":PP,xyz:Sb,"xyz-d50":hP,"xyz-d65":Sb,rec2020:jP},VP={hsl:Cb,hsla:Cb,rgb:Fb,rgba:Fb,lch:sP,oklch:oP,oklab:nP,lab:rP,color:qP},fc=function(n,e){return dl.parse(n,lB.create(e).parseComponentValue())},ka={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},GP={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(nn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WP={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ug=function(n,e){var t=dl.parse(n,e[0]),r=e[1];return r&&Yn(r)?{color:t,stop:r}:{color:t,stop:null}},Ub=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=us),r.stop===null&&(r.stop=il);for(var o=[],s=0,i=0;i<n.length;i++){var a=n[i].stop;if(a!==null){var A=Un(a,e);A>s?o.push(A):o.push(s),s=A}else o.push(null)}for(var d=null,i=0;i<o.length;i++){var c=o[i];if(c===null)d===null&&(d=i);else if(d!==null){for(var u=i-d,h=o[d-1],p=(c-h)/(u+1),v=1;v<=u;v++)o[d+v-1]=p*v;d=null}}return n.map(function(w,b){var x=w.color;return{color:x,stop:Math.max(Math.min(1,o[b]/e),0)}})},XP=function(n,e,t){var r=e/2,o=t/2,s=Un(n[0],e)-r,i=o-Un(n[1],t);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},YP=function(n,e,t){var r=typeof n=="number"?n:XP(n,e,t),o=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,i=t/2,a=o/2,A=Math.sin(r-Math.PI/2)*a,d=Math.cos(r-Math.PI/2)*a;return[o,s-d,s+d,i-A,i+A]},Xi=function(n,e){return Math.sqrt(n*n+e*e)},Qb=function(n,e,t,r,o){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(i,a){var A=a[0],d=a[1],c=Xi(t-A,r-d);return(o?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:a,optimumDistance:c}:i},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},JP=function(n,e,t,r,o){var s=0,i=0;switch(n.size){case 0:n.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(t),Math.abs(t-o)));break;case 2:if(n.shape===0)s=i=Math.min(Xi(e,t),Xi(e,t-o),Xi(e-r,t),Xi(e-r,t-o));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-o))/Math.min(Math.abs(e),Math.abs(e-r)),A=Qb(r,o,e,t,!0),d=A[0],c=A[1];s=Xi(d-e,(c-t)/a),i=a*s}break;case 1:n.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(t),Math.abs(t-o)));break;case 3:if(n.shape===0)s=i=Math.max(Xi(e,t),Xi(e,t-o),Xi(e-r,t),Xi(e-r,t-o));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-o))/Math.max(Math.abs(e),Math.abs(e-r)),u=Qb(r,o,e,t,!1),d=u[0],c=u[1];s=Xi(d-e,(c-t)/a),i=a*s}break}return Array.isArray(n.size)&&(s=Un(n.size[0],r),i=n.size.length===2?Un(n.size[1],o):s),[s,i]},ZP=function(n,e){var t=Di(180),r=[];return Ka(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&i.value==="to"){t=vB(o);return}else if(gB(i)){t=Cg.parse(n,i);return}}var a=Ug(n,o);r.push(a)}),{angle:t,stops:r,type:1}},Pf=function(n,e){var t=Di(180),r=[];return Ka(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=vB(o);return}else if(gB(i)){t=(Cg.parse(n,i)+Di(270))%Di(360);return}}var a=Ug(n,o);r.push(a)}),{angle:t,stops:r,type:1}},ek=function(n,e){var t=Di(180),r=[],o=1,s=0,i=3,a=[];return Ka(e).forEach(function(A,d){var c=A[0];if(d===0){if(nn(c)&&c.value==="linear"){o=1;return}else if(nn(c)&&c.value==="radial"){o=2;return}}if(c.type===18){if(c.name==="from"){var u=dl.parse(n,c.values[0]);r.push({stop:us,color:u})}else if(c.name==="to"){var u=dl.parse(n,c.values[0]);r.push({stop:il,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(fs);if(h.length===2){var u=dl.parse(n,h[1]),p=h[0];Po(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:u})}}}}),o===1?{angle:(t+Di(180))%Di(360),stops:r,type:o}:{size:i,shape:s,stops:r,position:a,type:o}},zB="closest-side",CB="farthest-side",SB="closest-corner",EB="farthest-corner",FB="circle",IB="ellipse",UB="cover",QB="contain",tk=function(n,e){var t=0,r=3,o=[],s=[];return Ka(e).forEach(function(i,a){var A=!0;if(a===0){var d=!1;A=i.reduce(function(u,h){if(d)if(nn(h))switch(h.value){case"center":return s.push(q1),u;case"top":case"left":return s.push(us),u;case"right":case"bottom":return s.push(il),u}else(Yn(h)||gl(h))&&s.push(h);else if(nn(h))switch(h.value){case FB:return t=0,!1;case IB:return t=1,!1;case"at":return d=!0,!1;case zB:return r=0,!1;case UB:case CB:return r=1,!1;case QB:case SB:return r=2,!1;case EB:return r=3,!1}else if(gl(h)||Yn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},A)}if(A){var c=Ug(n,i);o.push(c)}}),{size:r,shape:t,stops:o,position:s,type:2}},kf=function(n,e){var t=0,r=3,o=[],s=[];return Ka(e).forEach(function(i,a){var A=!0;if(a===0?A=i.reduce(function(c,u){if(nn(u))switch(u.value){case"center":return s.push(q1),!1;case"top":case"left":return s.push(us),!1;case"right":case"bottom":return s.push(il),!1}else if(Yn(u)||gl(u))return s.push(u),!1;return c},A):a===1&&(A=i.reduce(function(c,u){if(nn(u))switch(u.value){case FB:return t=0,!1;case IB:return t=1,!1;case QB:case zB:return r=0,!1;case CB:return r=1,!1;case SB:return r=2,!1;case UB:case EB:return r=3,!1}else if(gl(u)||Yn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var d=Ug(n,i);o.push(d)}}),{size:r,shape:t,stops:o,position:s,type:2}},rk=function(n){return n.type===1},nk=function(n){return n.type===2},V1={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=TB[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'.concat(e.name,'"'));return r(n,e.values)}throw new Error("Unsupported image type ".concat(e.type))}};function ok(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!TB[n.name])}var TB={"linear-gradient":ZP,"-moz-linear-gradient":Pf,"-ms-linear-gradient":Pf,"-o-linear-gradient":Pf,"-webkit-linear-gradient":Pf,"radial-gradient":tk,"-moz-radial-gradient":kf,"-ms-radial-gradient":kf,"-o-radial-gradient":kf,"-webkit-radial-gradient":kf,"-webkit-gradient":ek},sk={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return fs(r)&&ok(r)}).map(function(r){return V1.parse(n,r)})}},ik={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(nn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ak={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Ka(e).map(function(t){return t.filter(Yn)}).map(cB)}},Ak={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Ka(e).map(function(t){return t.filter(nn).map(function(r){return r.value}).join(" ")}).map(lk)}},lk=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pc;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(pc||(pc={}));var dk={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Ka(e).map(function(t){return t.filter(ck)})}},ck=function(n){return nn(n)||Yn(n)},Qg=function(n){return{name:"border-".concat(n,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},uk=Qg("top"),hk=Qg("right"),fk=Qg("bottom"),pk=Qg("left"),Tg=function(n){return{name:"border-radius-".concat(n),initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return cB(t.filter(Yn))}}},gk=Tg("top-left"),vk=Tg("top-right"),mk=Tg("bottom-right"),wk=Tg("bottom-left"),Lg=function(n){return{name:"border-".concat(n,"-style"),initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},bk=Lg("top"),yk=Lg("right"),_k=Lg("bottom"),xk=Lg("left"),Pg=function(n){return{name:"border-".concat(n,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e,t){return yl(t)?t.number:0}}},Bk=Pg("top"),zk=Pg("right"),Ck=Pg("bottom"),Sk=Pg("left"),Ek={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Ik={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).reduce(function(t,r){return t|Uk(r.value)},0)}},Uk=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Qk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Tk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Hp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Hp||(Hp={}));var Lk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Hp.STRICT;case"normal":default:return Hp.NORMAL}}},Pk={name:"line-height",initialValue:"normal",prefix:!1,type:4},Tb=function(n,e){return nn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Yn(n)?Un(n,e):e},kk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:V1.parse(n,e)}},Ok={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},fm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},kg=function(n){return{name:"margin-".concat(n),initialValue:"0",prefix:!1,type:4}},Dk=kg("top"),Nk=kg("right"),Mk=kg("bottom"),Hk=kg("left"),jk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Rk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Og=function(n){return{name:"padding-".concat(n),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},qk=Og("top"),Kk=Og("right"),$k=Og("bottom"),Vk=Og("left"),Gk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Wk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&cm(e[0],"none")?[]:Ka(e).map(function(t){for(var r={color:ka.TRANSPARENT,offsetX:us,offsetY:us,blur:us},o=0,s=0;s<t.length;s++){var i=t[s];gl(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:r.blur=i,o++):r.color=dl.parse(n,i)}return r})}},Yk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Jk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=tO[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return t(e.values)}return null}},Zk=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},eO=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var o=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,o,s,i,a]:null},tO={matrix:Zk,matrix3d:eO},Lb={type:16,number:50,flags:gh},rO=[Lb,Lb],nO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Yn);return t.length!==2?rO:[t[0],t[1]]}},oO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Qu;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Qu||(Qu={}));var sO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Qu.BREAK_ALL;case"keep-all":return Qu.KEEP_ALL;case"normal":default:return Qu.NORMAL}}},iO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(Po(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},LB={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},aO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return Po(e)?e.number:1}},AO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},dO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:t.push(o.value);break;case 17:t.push(o.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'".concat(o,"'")})}},cO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},uO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(Po(e))return e.number;if(nn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},hO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(nn).map(function(t){return t.value})}},fO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},jo=function(n,e){return(n&e)!==0},pO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},gO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],o=e.filter(dB),s=0;s<o.length;s++){var i=o[s],a=o[s+1];if(i.type===20){var A=a&&Po(a)?a.number:1;r.push({counter:i.value,increment:A})}}return r}},vO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(dB),o=0;o<r.length;o++){var s=r[o],i=r[o+1];if(nn(s)&&s.value!=="none"){var a=i&&Po(i)?i.number:0;t.push({counter:s.value,reset:a})}}return t}},mO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(yl).map(function(t){return LB.parse(n,t)})}},wO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],o=e.filter(ZL);if(o.length%2!==0)return null;for(var s=0;s<o.length;s+=2){var i=o[s].value,a=o[s+1].value;r.push({open:i,close:a})}return r}},Pb=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},bO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&cm(e[0],"none")?[]:Ka(e).map(function(t){for(var r={color:255,offsetX:us,offsetY:us,blur:us,spread:us,inset:!1},o=0,s=0;s<t.length;s++){var i=t[s];cm(i,"inset")?r.inset=!0:gl(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:o===2?r.blur=i:r.spread=i,o++):r.color=dl.parse(n,i)}return r})}},yO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(nn).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},_O={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},xO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return yl(e)?e.number:0}},BO={name:"objectFit",initialValue:"fill",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).reduce(function(t,r){return t|zO(r.value)},0)}},zO=function(n){switch(n){case"contain":return 2;case"cover":return 4;case"none":return 8;case"scale-down":return 16}return 0},CO=function(){function n(e,t){var r,o;this.animationDuration=ar(e,mO,t.animationDuration),this.backgroundClip=ar(e,GP,t.backgroundClip),this.backgroundColor=ar(e,WP,t.backgroundColor),this.backgroundImage=ar(e,sk,t.backgroundImage),this.backgroundOrigin=ar(e,ik,t.backgroundOrigin),this.backgroundPosition=ar(e,ak,t.backgroundPosition),this.backgroundRepeat=ar(e,Ak,t.backgroundRepeat),this.backgroundSize=ar(e,dk,t.backgroundSize),this.borderTopColor=ar(e,uk,t.borderTopColor),this.borderRightColor=ar(e,hk,t.borderRightColor),this.borderBottomColor=ar(e,fk,t.borderBottomColor),this.borderLeftColor=ar(e,pk,t.borderLeftColor),this.borderTopLeftRadius=ar(e,gk,t.borderTopLeftRadius),this.borderTopRightRadius=ar(e,vk,t.borderTopRightRadius),this.borderBottomRightRadius=ar(e,mk,t.borderBottomRightRadius),this.borderBottomLeftRadius=ar(e,wk,t.borderBottomLeftRadius),this.borderTopStyle=ar(e,bk,t.borderTopStyle),this.borderRightStyle=ar(e,yk,t.borderRightStyle),this.borderBottomStyle=ar(e,_k,t.borderBottomStyle),this.borderLeftStyle=ar(e,xk,t.borderLeftStyle),this.borderTopWidth=ar(e,Bk,t.borderTopWidth),this.borderRightWidth=ar(e,zk,t.borderRightWidth),this.borderBottomWidth=ar(e,Ck,t.borderBottomWidth),this.borderLeftWidth=ar(e,Sk,t.borderLeftWidth),this.boxShadow=ar(e,bO,t.boxShadow),this.color=ar(e,Ek,t.color),this.direction=ar(e,Fk,t.direction),this.display=ar(e,Ik,t.display),this.float=ar(e,Qk,t.cssFloat),this.fontFamily=ar(e,dO,t.fontFamily),this.fontSize=ar(e,cO,t.fontSize),this.fontStyle=ar(e,fO,t.fontStyle),this.fontVariant=ar(e,hO,t.fontVariant),this.fontWeight=ar(e,uO,t.fontWeight),this.letterSpacing=ar(e,Tk,t.letterSpacing),this.lineBreak=ar(e,Lk,t.lineBreak),this.lineHeight=ar(e,Pk,t.lineHeight),this.listStyleImage=ar(e,kk,t.listStyleImage),this.listStylePosition=ar(e,Ok,t.listStylePosition),this.listStyleType=ar(e,fm,t.listStyleType),this.marginTop=ar(e,Dk,t.marginTop),this.marginRight=ar(e,Nk,t.marginRight),this.marginBottom=ar(e,Mk,t.marginBottom),this.marginLeft=ar(e,Hk,t.marginLeft),this.opacity=ar(e,aO,t.opacity);var s=ar(e,jk,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=ar(e,Rk,t.overflowWrap),this.paddingTop=ar(e,qk,t.paddingTop),this.paddingRight=ar(e,Kk,t.paddingRight),this.paddingBottom=ar(e,$k,t.paddingBottom),this.paddingLeft=ar(e,Vk,t.paddingLeft),this.paintOrder=ar(e,yO,t.paintOrder),this.position=ar(e,Wk,t.position),this.textAlign=ar(e,Gk,t.textAlign),this.textDecorationColor=ar(e,AO,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=ar(e,lO,(o=t.textDecorationLine)!==null&&o!==void 0?o:t.textDecoration),this.textShadow=ar(e,Xk,t.textShadow),this.textTransform=ar(e,Yk,t.textTransform),this.transform=ar(e,Jk,t.transform),this.transformOrigin=ar(e,nO,t.transformOrigin),this.visibility=ar(e,oO,t.visibility),this.webkitTextStrokeColor=ar(e,_O,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=ar(e,xO,t.webkitTextStrokeWidth),this.wordBreak=ar(e,sO,t.wordBreak),this.zIndex=ar(e,iO,t.zIndex),this.objectFit=ar(e,BO,t.objectFit)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return ll(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return jo(this.display,4)||jo(this.display,33554432)||jo(this.display,268435456)||jo(this.display,536870912)||jo(this.display,67108864)||jo(this.display,134217728)},n}(),SO=function(){function n(e,t){this.content=ar(e,pO,t.content),this.quotes=ar(e,wO,t.quotes)}return n}(),kb=function(){function n(e,t){this.counterIncrement=ar(e,gO,t.counterIncrement),this.counterReset=ar(e,vO,t.counterReset)}return n}(),ar=function(n,e,t){var r=new AB,o=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(o);var s=new lB(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(n,nn(i)?i.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Cg.parse(n,s.parseComponentValue());case"color":return dl.parse(n,s.parseComponentValue());case"image":return V1.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return gl(a)?a:us;case"length-percentage":var A=s.parseComponentValue();return Yn(A)?A:us;case"time":return LB.parse(n,s.parseComponentValue())}break}},EO="data-html2canvas-debug",FO=function(n){var e=n.getAttribute(EO);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},pm=function(n,e){var t=FO(n);return t===1||e===t},$a=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,pm(t,3))debugger;this.styles=new CO(e,window.getComputedStyle(t,null)),mm(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Bg(this.context,t),pm(t,4)&&(this.flags|=16)}return n}(),IO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Of=0;Of<Ob.length;Of++)yu[Ob.charCodeAt(Of)]=Of;var UO=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=yu[n.charCodeAt(r)],i=yu[n.charCodeAt(r+1)],a=yu[n.charCodeAt(r+2)],A=yu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},QO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},TO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Jl=5,G1=11,Hv=2,LO=G1-Jl,PB=65536>>Jl,PO=1<<Jl,jv=PO-1,kO=1024>>Jl,OO=PB+kO,DO=OO,NO=32,MO=DO+NO,HO=65536>>G1,jO=1<<LO,RO=jO-1,Db=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},qO=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},KO=function(n,e){var t=UO(n),r=Array.isArray(t)?TO(t):new Uint32Array(t),o=Array.isArray(t)?QO(t):new Uint16Array(t),s=24,i=Db(o,s/2,r[4]/2),a=r[5]===2?Db(o,(s+r[4])/2):qO(r,Math.ceil((s+r[4])/4));return new $O(r[0],r[1],r[2],r[3],i,a)},$O=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Jl],t=(t<<Hv)+(e&jv),this.data[t];if(e<=65535)return t=this.index[PB+(e-55296>>Jl)],t=(t<<Hv)+(e&jv),this.data[t];if(e<this.highStart)return t=MO-HO+(e>>G1),t=this.index[t],t+=e>>Jl&RO,t=this.index[t],t=(t<<Hv)+(e&jv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Nb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",VO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Df=0;Df<Nb.length;Df++)VO[Nb.charCodeAt(Df)]=Df;var GO=1,Rv=2,qv=3,Mb=4,Hb=5,WO=7,jb=8,Kv=9,$v=10,Rb=11,qb=12,Kb=13,$b=14,Vv=15,XO=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},YO=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},JO=KO(IO),Pi="",Gv="",ZO=function(n){return JO.get(n)},e8=function(n,e,t){var r=t-2,o=e[r],s=e[t-1],i=e[t];if(s===Rv&&i===qv)return Pi;if(s===Rv||s===qv||s===Mb||i===Rv||i===qv||i===Mb)return Gv;if(s===jb&&[jb,Kv,Rb,qb].indexOf(i)!==-1||(s===Rb||s===Kv)&&(i===Kv||i===$v)||(s===qb||s===$v)&&i===$v||i===Kb||i===Hb||i===WO||s===GO)return Pi;if(s===Kb&&i===$b){for(;o===Hb;)o=e[--r];if(o===$b)return Pi}if(s===Vv&&i===Vv){for(var a=0;o===Vv;)a++,o=e[--r];if(a%2===0)return Pi}return Gv},t8=function(n){var e=XO(n),t=e.length,r=0,o=0,s=e.map(ZO);return{next:function(){if(r>=t)return{done:!0,value:null};for(var i=Pi;r<t&&(i=e8(e,s,++r))===Pi;);if(i!==Pi||r===t){var a=YO.apply(null,e.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},r8=function(n){for(var e=t8(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},n8=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height="".concat(e,"px"),r.style.display="block",n.body.appendChild(r),t.selectNode(r);var o=t.getBoundingClientRect(),s=Math.round(o.height);if(n.body.removeChild(r),s===e)return!0}}return!1},o8=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=zg(r.data).map(function(A){return xo(A)}),s=0,i={},a=o.every(function(A,d){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>i.x||c.y>i.y;return i=c,d===0?!0:u});return n.body.removeChild(e),a},s8=function(){return typeof new Image().crossOrigin<"u"},i8=function(){return typeof new XMLHttpRequest().responseType=="string"},a8=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Vb=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},A8=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var o=new Image,s=e.toDataURL();o.src=s;var i=gm(t,t,0,0,o);return r.fillStyle="red",r.fillRect(0,0,t,t),Gb(i).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=n.createElement("div");return d.style.backgroundImage="url(".concat(s,")"),d.style.height="".concat(t,"px"),Vb(A)?Gb(gm(t,t,0,0,d)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),Vb(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},gm=function(n,e,t,r,o){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),i},Gb=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},ds={get SUPPORT_RANGE_BOUNDS(){var n=n8(document);return Object.defineProperty(ds,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=ds.SUPPORT_RANGE_BOUNDS&&o8(document);return Object.defineProperty(ds,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=a8(document);return Object.defineProperty(ds,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?A8(document):Promise.resolve(!1);return Object.defineProperty(ds,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=s8();return Object.defineProperty(ds,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=i8();return Object.defineProperty(ds,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ds,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ds,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Tu=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),l8=function(n,e,t,r){var o=u8(e,t),s=[],i=0;return o.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(ds.SUPPORT_RANGE_BOUNDS){var A=Wb(r,i,a.length).getClientRects();if(A.length>1){var d=W1(a),c=0;d.forEach(function(h){s.push(new Tu(h,CA.fromDOMRectList(n,Wb(r,c+i,h.length).getClientRects()))),c+=h.length})}else s.push(new Tu(a,CA.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new Tu(a,d8(n,r))),r=u}else ds.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),s},d8=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var s=Bg(n,r);return r.firstChild&&o.replaceChild(r.firstChild,r),s}}return CA.EMPTY},Wb=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(n,e),o.setEnd(n,e+t),o},W1=function(n){if(ds.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return r8(n)},c8=function(n,e){if(ds.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return f8(n,e)},u8=function(n,e){return e.letterSpacing!==0?W1(n):c8(n,e)},h8=[32,160,4961,65792,65793,4153,4241],f8=function(n,e){for(var t=V6(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,s=function(){if(o.value){var i=o.value.slice(),a=zg(i),A="";a.forEach(function(d){h8.indexOf(d)===-1?A+=xo(d):(A.length&&r.push(A),r.push(xo(d)),A="")}),A.length&&r.push(A)}};!(o=t.next()).done;)s();return r},p8=function(){function n(e,t,r){this.text=g8(t.data,r.textTransform),this.textBounds=l8(e,this.text,r,t)}return n}(),g8=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(v8,m8);case 2:return n.toUpperCase();default:return n}},v8=/(^|\s|:|-|\(|\))([a-z])/g,m8=function(n,e,t){return n.length>0?e+t.toUpperCase():n},kB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}($a),OB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}($a),DB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=new XMLSerializer,i=Bg(t,r);return r.setAttribute("width","".concat(i.width,"px")),r.setAttribute("height","".concat(i.height,"px")),o.svg="data:image/svg+xml,".concat(encodeURIComponent(s.serializeToString(r))),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}($a),NB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}($a),vm=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}($a),w8=[{type:15,flags:0,unit:"px",number:3}],b8=[{type:16,flags:0,number:50}],y8=function(n){return n.width>n.height?new CA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new CA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},_8=function(n){var e=n.type===x8?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},jp="checkbox",Rp="radio",x8="password",Xb=707406591,X1=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=_8(r),(o.type===jp||o.type===Rp)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=y8(o.bounds)),o.type){case jp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=w8;break;case Rp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=b8;break}return o}return e}($a),MB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return o.value=s&&s.text||"",o}return e}($a),HB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}($a),jB=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=qB(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?fc(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ka.TRANSPARENT,i=r.contentWindow.document.body?fc(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):ka.TRANSPARENT;o.backgroundColor=ll(s)?ll(i)?o.styles.backgroundColor:i:s}}catch{}return o}return e}($a),B8=["OL","UL","MENU"],sp=function(n,e,t,r){for(var o=e.firstChild,s=void 0;o;o=s)if(s=o.nextSibling,KB(o)&&o.data.length>0)t.textNodes.push(new p8(n,o,t.styles));else if(nc(o))if(WB(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return sp(n,a,t,r)});else{var i=RB(n,o);i.styles.isVisible()&&(z8(o,i,r)?i.flags|=4:C8(i.styles)&&(i.flags|=2),B8.indexOf(o.tagName)!==-1&&(i.flags|=8),t.elements.push(i),o.slot,o.shadowRoot?sp(n,o.shadowRoot,i,r):!qp(o)&&!$B(o)&&!Kp(o)&&sp(n,o,i,r))}},RB=function(n,e){return wm(e)?new kB(n,e):VB(e)?new OB(n,e):$B(e)?new DB(n,e):S8(e)?new NB(n,e):E8(e)?new vm(n,e):F8(e)?new X1(n,e):Kp(e)?new MB(n,e):qp(e)?new HB(n,e):GB(e)?new jB(n,e):new $a(n,e)},qB=function(n,e){var t=RB(n,e);return t.flags|=4,sp(n,e,t,t),t},z8=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Y1(n)&&t.styles.isTransparent()},C8=function(n){return n.isPositioned()||n.isFloating()},KB=function(n){return n.nodeType===Node.TEXT_NODE},nc=function(n){return n.nodeType===Node.ELEMENT_NODE},mm=function(n){return nc(n)&&typeof n.style<"u"&&!ip(n)},ip=function(n){return typeof n.className=="object"},S8=function(n){return n.tagName==="LI"},E8=function(n){return n.tagName==="OL"},F8=function(n){return n.tagName==="INPUT"},I8=function(n){return n.tagName==="HTML"},$B=function(n){return n.tagName==="svg"},Y1=function(n){return n.tagName==="BODY"},VB=function(n){return n.tagName==="CANVAS"},Yb=function(n){return n.tagName==="VIDEO"},wm=function(n){return n.tagName==="IMG"},GB=function(n){return n.tagName==="IFRAME"},Jb=function(n){return n.tagName==="STYLE"},U8=function(n){return n.tagName==="SCRIPT"},qp=function(n){return n.tagName==="TEXTAREA"},Kp=function(n){return n.tagName==="SELECT"},WB=function(n){return n.tagName==="SLOT"},Zb=function(n){return n.tagName.indexOf("-")>0},Q8=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,o=e.counterReset,s=!0;r!==null&&r.forEach(function(a){var A=t.counters[a.counter];A&&a.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=a.increment)});var i=[];return s&&o.forEach(function(a){var A=t.counters[a.counter];i.push(a.counter),A||(A=t.counters[a.counter]=[]),A.push(a.reset)}),i},n}(),ey={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ty={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},T8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},L8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hd=function(n,e,t,r,o,s){return n<e||n>t?rh(n,o,s.length>0):r.integers.reduce(function(i,a,A){for(;n>=a;)n-=a,i+=r.values[A];return i},"")+s},XB=function(n,e,t,r){var o="";do t||n--,o=r(n)+o,n/=e;while(n*e>=e);return o},yo=function(n,e,t,r,o){var s=t-e+1;return(n<0?"-":"")+(XB(Math.abs(n),s,r,function(i){return xo(Math.floor(i%s)+e)})+o)},Il=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return XB(Math.abs(n),r,!1,function(o){return e[Math.floor(o%r)]})+t},Gd=1,YA=2,JA=4,_u=8,AA=function(n,e,t,r,o,s){if(n<-9999||n>9999)return rh(n,4,o.length>0);var i=Math.abs(n),a=o;if(i===0)return e[0]+a;for(var A=0;i>0&&A<=4;A++){var d=i%10;d===0&&jo(s,Gd)&&a!==""?a=e[d]+a:d>1||d===1&&A===0||d===1&&A===1&&jo(s,YA)||d===1&&A===1&&jo(s,JA)&&n>100||d===1&&A>1&&jo(s,_u)?a=e[d]+(A>0?t[A-1]:"")+a:d===1&&A>0&&(a=t[A-1]+a),i=Math.floor(i/10)}return(n<0?r:"")+a},ry="",ny="",oy="",Wv="",rh=function(n,e,t){var r=t?". ":"",o=t?"":"",s=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=yo(n,48,57,!0,r);return a.length<4?"0".concat(a):a;case 4:return Il(n,"",o);case 6:return Hd(n,1,3999,ey,3,r).toLowerCase();case 7:return Hd(n,1,3999,ey,3,r);case 8:return yo(n,945,969,!1,r);case 9:return yo(n,97,122,!1,r);case 10:return yo(n,65,90,!1,r);case 11:return yo(n,1632,1641,!0,r);case 12:case 49:return Hd(n,1,9999,ty,3,r);case 35:return Hd(n,1,9999,ty,3,r).toLowerCase();case 13:return yo(n,2534,2543,!0,r);case 14:case 30:return yo(n,6112,6121,!0,r);case 15:return Il(n,"",o);case 16:return Il(n,"",o);case 17:case 48:return AA(n,"",ry,"",o,YA|JA|_u);case 47:return AA(n,"",ny,"",o,Gd|YA|JA|_u);case 42:return AA(n,"",ry,"",o,YA|JA|_u);case 41:return AA(n,"",ny,"",o,Gd|YA|JA|_u);case 26:return AA(n,"","",oy,o,0);case 25:return AA(n,"","",oy,o,Gd|YA|JA);case 31:return AA(n,"","",Wv,s,Gd|YA|JA);case 33:return AA(n,"","",Wv,s,0);case 32:return AA(n,"","",Wv,s,Gd|YA|JA);case 18:return yo(n,2406,2415,!0,r);case 20:return Hd(n,1,19999,L8,3,r);case 21:return yo(n,2790,2799,!0,r);case 22:return yo(n,2662,2671,!0,r);case 22:return Hd(n,1,10999,T8,3,r);case 23:return Il(n,"");case 24:return Il(n,"");case 27:return yo(n,3302,3311,!0,r);case 28:return Il(n,"",o);case 29:return Il(n,"",o);case 34:return yo(n,3792,3801,!0,r);case 37:return yo(n,6160,6169,!0,r);case 38:return yo(n,4160,4169,!0,r);case 39:return yo(n,2918,2927,!0,r);case 40:return yo(n,1776,1785,!0,r);case 43:return yo(n,3046,3055,!0,r);case 44:return yo(n,3174,3183,!0,r);case 45:return yo(n,3664,3673,!0,r);case 46:return yo(n,3872,3881,!0,r);case 3:default:return yo(n,48,57,!0,r)}},YB="data-html2canvas-ignore",sy=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new Q8,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,o=P8(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=o.contentWindow,A=a.document,d=D8(o).then(function(){return ks(r,void 0,void 0,function(){var u,h;return Bs(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(j8),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the ".concat(this.referenceElement.nodeName," in the cloned document"))]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,O8(A)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,h)}).then(function(){return o})]:[2,o]}})})}),c=A.adoptNode(this.documentElement);return V8(c,A),A.open(),A.write("".concat(M8(document.doctype),"<html></html>")),H8(this.referenceElement.ownerDocument,s,i),A.replaceChild(c,A.documentElement),A.close(),d},n.prototype.createElementClone=function(e){if(pm(e,2))debugger;if(VB(e))return this.createCanvasClone(e);if(Yb(e))return this.createVideoClone(e);if(Jb(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return wm(t)&&(wm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Zb(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Xv(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var s=e.getContext("2d"),i=o.getContext("2d",{willReadFrequently:!0});if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var A=a.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},n.prototype.appendChildNode=function(e,t,r){(!nc(t)||!U8(t)&&!t.hasAttribute(YB)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!nc(t)||!Jb(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var o=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(nc(s)&&WB(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return o.appendChildNode(t,a,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(KB(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&nc(e)&&(mm(e)||ip(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&mm(o)&&(this.clonedReferenceElement=o),Y1(o)&&K8(o);var A=this.counters.parse(new kb(this.context,s)),d=this.resolvePseudoContent(e,o,i,Lu.BEFORE);Zb(e)&&(t=!0),Yb(e)||this.cloneChildNodes(e,o,t),d&&o.insertBefore(d,o.firstChild);var c=this.resolvePseudoContent(e,o,a,Lu.AFTER);return c&&o.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||ip(e))&&!GB(e)||t)&&Xv(s,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(qp(e)||Kp(e))&&(qp(o)||Kp(o))&&(o.value=e.value),o}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,o){var s=this;if(r){var i=r.content,a=t.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new kb(this.context,r));var A=new SO(this.context,r),d=a.createElement("html2canvaspseudoelement");Xv(r,d),A.content.forEach(function(u){if(u.type===0)d.appendChild(a.createTextNode(u.value));else if(u.type===22){var h=a.createElement("img");h.src=u.value,h.style.opacity="1",d.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var p=u.values.filter(nn);p.length&&d.appendChild(a.createTextNode(e.getAttribute(p[0].value)||""))}else if(u.name==="counter"){var v=u.values.filter(fs),w=v[0],b=v[1];if(w&&nn(w)){var x=s.counters.getCounterValue(w.value),S=b&&nn(b)?fm.parse(s.context,b.value):3;d.appendChild(a.createTextNode(rh(x,S,!1)))}}else if(u.name==="counters"){var I=u.values.filter(fs),w=I[0],P=I[1],b=I[2];if(w&&nn(w)){var N=s.counters.getCounterValues(w.value),ee=b&&nn(b)?fm.parse(s.context,b.value):3,j=P&&P.type===0?P.value:"",D=N.map(function(L){return rh(L,ee,!1)}).join(j);d.appendChild(a.createTextNode(D))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(a.createTextNode(Pb(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(a.createTextNode(Pb(A.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(a.createTextNode(u.value))}}),d.className="".concat(bm," ").concat(ym);var c=o===Lu.BEFORE?" ".concat(bm):" ".concat(ym);return ip(t)?t.className.baseValue+=c:t.className+=c,d}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Lu;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Lu||(Lu={}));var P8=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(YB,"true"),n.body.appendChild(t),t},k8=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},O8=function(n){return Promise.all([].slice.call(n.images,0).map(k8))},D8=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var o=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},N8=["all","d","content"],Xv=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);N8.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},M8=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'.concat(n.publicId,'"')),n.systemId&&(e+='"'.concat(n.systemId,'"')),e+=">"),e},H8=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},j8=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},R8=":before",q8=":after",bm="___html2canvas___pseudoelement_before",ym="___html2canvas___pseudoelement_after",iy=`{
    content: "" !important;
    display: none !important;
}`,K8=function(n){$8(n,".".concat(bm).concat(R8).concat(iy,`
         .`).concat(ym).concat(q8).concat(iy))},$8=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},V8=function(n,e){var t,r=e.createElement("base");r.href=e.baseURI;var o=n.getElementsByTagName("head").item(0);o==null||o.insertBefore(r,(t=o==null?void 0:o.firstChild)!==null&&t!==void 0?t:null)},JB=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),G8=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Jv(e)||J8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return ks(this,void 0,void 0,function(){var t,r,o,s,i=this;return Bs(this,function(a){switch(a.label){case 0:return t=JB.isSameOrigin(e),r=!Yv(e)&&this._options.useCORS===!0&&ds.SUPPORT_CORS_IMAGES&&!t,o=!Yv(e)&&!t&&!Jv(e)&&typeof this._options.proxy=="string"&&ds.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!Yv(e)&&!Jv(e)&&!o&&!r?[2]:(s=e,o?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image ".concat(e.substring(0,256))),[4,new Promise(function(A,d){var c=new Image;c.onload=function(){return A(c)},c.onerror=d,(Z8(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return d("Timed out (".concat(i._options.imageTimeout,"ms) loading image"))},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(s,i){var a=ds.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(a==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return i(h)},!1),u.readAsDataURL(A.response)}else i("Failed to proxy resource ".concat(o," with status code ").concat(A.status))},A.onerror=i;var d=r.indexOf("?")>-1?"&":"?";if(A.open("GET","".concat(r).concat(d,"url=").concat(encodeURIComponent(e),"&responseType=").concat(a)),a!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return i("Timed out (".concat(c,"ms) proxying ").concat(o))}}A.send()})},n}(),W8=/^data:image\/svg\+xml/i,X8=/^data:image\/.*;base64,/i,Y8=/^data:image\/.*/i,J8=function(n){return ds.SUPPORT_SVG_DRAWING||!eD(n)},Yv=function(n){return Y8.test(n)},Z8=function(n){return X8.test(n)},Jv=function(n){return n.substr(0,4)==="blob"},eD=function(n){return n.substr(-3).toLowerCase()==="svg"||W8.test(n)},or=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),jd=function(n,e,t){return new or(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Nf=function(){function n(e,t,r,o){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=o}return n.prototype.subdivide=function(e,t){var r=jd(this.start,this.startControl,e),o=jd(this.startControl,this.endControl,e),s=jd(this.endControl,this.end,e),i=jd(r,o,e),a=jd(o,s,e),A=jd(i,a,e);return t?new n(this.start,r,i,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),ki=function(n){return n.type===1},tD=function(){function n(e){var t=e.styles,r=e.bounds,o=bu(t.borderTopLeftRadius,r.width,r.height),s=o[0],i=o[1],a=bu(t.borderTopRightRadius,r.width,r.height),A=a[0],d=a[1],c=bu(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],p=bu(t.borderBottomLeftRadius,r.width,r.height),v=p[0],w=p[1],b=[];b.push((s+A)/r.width),b.push((v+u)/r.width),b.push((i+w)/r.height),b.push((d+h)/r.height);var x=Math.max.apply(Math,b);x>1&&(s/=x,i/=x,A/=x,d/=x,u/=x,h/=x,v/=x,w/=x);var S=r.width-A,I=r.height-h,P=r.width-u,N=r.height-w,ee=t.borderTopWidth,j=t.borderRightWidth,D=t.borderBottomWidth,ne=t.borderLeftWidth,xe=Un(t.paddingTop,e.bounds.width),L=Un(t.paddingRight,e.bounds.width),q=Un(t.paddingBottom,e.bounds.width),V=Un(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?ro(r.left+ne/3,r.top+ee/3,s-ne/3,i-ee/3,_n.TOP_LEFT):new or(r.left+ne/3,r.top+ee/3),this.topRightBorderDoubleOuterBox=s>0||i>0?ro(r.left+S,r.top+ee/3,A-j/3,d-ee/3,_n.TOP_RIGHT):new or(r.left+r.width-j/3,r.top+ee/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?ro(r.left+P,r.top+I,u-j/3,h-D/3,_n.BOTTOM_RIGHT):new or(r.left+r.width-j/3,r.top+r.height-D/3),this.bottomLeftBorderDoubleOuterBox=v>0||w>0?ro(r.left+ne/3,r.top+N,v-ne/3,w-D/3,_n.BOTTOM_LEFT):new or(r.left+ne/3,r.top+r.height-D/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?ro(r.left+ne*2/3,r.top+ee*2/3,s-ne*2/3,i-ee*2/3,_n.TOP_LEFT):new or(r.left+ne*2/3,r.top+ee*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?ro(r.left+S,r.top+ee*2/3,A-j*2/3,d-ee*2/3,_n.TOP_RIGHT):new or(r.left+r.width-j*2/3,r.top+ee*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?ro(r.left+P,r.top+I,u-j*2/3,h-D*2/3,_n.BOTTOM_RIGHT):new or(r.left+r.width-j*2/3,r.top+r.height-D*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||w>0?ro(r.left+ne*2/3,r.top+N,v-ne*2/3,w-D*2/3,_n.BOTTOM_LEFT):new or(r.left+ne*2/3,r.top+r.height-D*2/3),this.topLeftBorderStroke=s>0||i>0?ro(r.left+ne/2,r.top+ee/2,s-ne/2,i-ee/2,_n.TOP_LEFT):new or(r.left+ne/2,r.top+ee/2),this.topRightBorderStroke=s>0||i>0?ro(r.left+S,r.top+ee/2,A-j/2,d-ee/2,_n.TOP_RIGHT):new or(r.left+r.width-j/2,r.top+ee/2),this.bottomRightBorderStroke=u>0||h>0?ro(r.left+P,r.top+I,u-j/2,h-D/2,_n.BOTTOM_RIGHT):new or(r.left+r.width-j/2,r.top+r.height-D/2),this.bottomLeftBorderStroke=v>0||w>0?ro(r.left+ne/2,r.top+N,v-ne/2,w-D/2,_n.BOTTOM_LEFT):new or(r.left+ne/2,r.top+r.height-D/2),this.topLeftBorderBox=s>0||i>0?ro(r.left,r.top,s,i,_n.TOP_LEFT):new or(r.left,r.top),this.topRightBorderBox=A>0||d>0?ro(r.left+S,r.top,A,d,_n.TOP_RIGHT):new or(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?ro(r.left+P,r.top+I,u,h,_n.BOTTOM_RIGHT):new or(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=v>0||w>0?ro(r.left,r.top+N,v,w,_n.BOTTOM_LEFT):new or(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?ro(r.left+ne,r.top+ee,Math.max(0,s-ne),Math.max(0,i-ee),_n.TOP_LEFT):new or(r.left+ne,r.top+ee),this.topRightPaddingBox=A>0||d>0?ro(r.left+Math.min(S,r.width-j),r.top+ee,S>r.width+j?0:Math.max(0,A-j),Math.max(0,d-ee),_n.TOP_RIGHT):new or(r.left+r.width-j,r.top+ee),this.bottomRightPaddingBox=u>0||h>0?ro(r.left+Math.min(P,r.width-ne),r.top+Math.min(I,r.height-D),Math.max(0,u-j),Math.max(0,h-D),_n.BOTTOM_RIGHT):new or(r.left+r.width-j,r.top+r.height-D),this.bottomLeftPaddingBox=v>0||w>0?ro(r.left+ne,r.top+Math.min(N,r.height-D),Math.max(0,v-ne),Math.max(0,w-D),_n.BOTTOM_LEFT):new or(r.left+ne,r.top+r.height-D),this.topLeftContentBox=s>0||i>0?ro(r.left+ne+V,r.top+ee+xe,Math.max(0,s-(ne+V)),Math.max(0,i-(ee+xe)),_n.TOP_LEFT):new or(r.left+ne+V,r.top+ee+xe),this.topRightContentBox=A>0||d>0?ro(r.left+Math.min(S,r.width+ne+V),r.top+ee+xe,S>r.width+ne+V?0:A-ne+V,d-(ee+xe),_n.TOP_RIGHT):new or(r.left+r.width-(j+L),r.top+ee+xe),this.bottomRightContentBox=u>0||h>0?ro(r.left+Math.min(P,r.width-(ne+V)),r.top+Math.min(I,r.height+ee+xe),Math.max(0,u-(j+L)),h-(D+q),_n.BOTTOM_RIGHT):new or(r.left+r.width-(j+L),r.top+r.height-(D+q)),this.bottomLeftContentBox=v>0||w>0?ro(r.left+ne+V,r.top+N,Math.max(0,v-(ne+V)),w-(D+q),_n.BOTTOM_LEFT):new or(r.left+ne+V,r.top+r.height-(D+q))}return n}(),_n;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_n||(_n={}));var ro=function(n,e,t,r,o){var s=4*((Math.sqrt(2)-1)/3),i=t*s,a=r*s,A=n+t,d=e+r;switch(o){case _n.TOP_LEFT:return new Nf(new or(n,d),new or(n,d-a),new or(A-i,e),new or(A,e));case _n.TOP_RIGHT:return new Nf(new or(n,e),new or(n+i,e),new or(A,d-a),new or(A,d));case _n.BOTTOM_RIGHT:return new Nf(new or(A,e),new or(A,e+a),new or(n+i,d),new or(n,d));case _n.BOTTOM_LEFT:default:return new Nf(new or(A,d),new or(A-i,d),new or(n,e+a),new or(n,e))}},$p=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},rD=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Vp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},nD=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),Mf=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),oD=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),sD=function(n){return n.type===0},ZB=function(n){return n.type===1},iD=function(n){return n.type===2},ay=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},aD=function(n,e,t,r,o){return n.map(function(s,i){switch(i){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+o);case 3:return s.add(e,t+o)}return s})},ez=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),tz=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new tD(this.container),this.container.styles.opacity<1&&this.effects.push(new oD(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new nD(r,o,s))}if(this.container.styles.overflowX!==0){var i=$p(this.curves),a=Vp(this.curves);ay(i,a)?this.effects.push(new Mf(i,6)):(this.effects.push(new Mf(i,2)),this.effects.push(new Mf(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!ZB(A)});if(t||r.container.styles.position!==0||!r.parent){if(t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=$p(r.curves),a=Vp(r.curves);ay(i,a)||o.unshift(new Mf(a,6))}o.unshift.apply(o,s)}else o.unshift.apply(o,s);r=r.parent}return o.filter(function(A){return jo(A.target,e)})},n}(),_m=function(n,e,t,r){n.container.elements.forEach(function(o){var s=jo(o.flags,4),i=jo(o.flags,2),a=new tz(o,n);jo(o.styles.display,2048)&&r.push(a);var A=jo(o.flags,8)?[]:r;if(s||i){var d=s||o.styles.isPositioned()?t:e,c=new ez(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var u=o.styles.zIndex.order;if(u<0){var h=0;d.negativeZIndex.some(function(v,w){return u>v.element.container.styles.zIndex.order?(h=w,!1):h>0}),d.negativeZIndex.splice(h,0,c)}else if(u>0){var p=0;d.positiveZIndex.some(function(v,w){return u>=v.element.container.styles.zIndex.order?(p=w+1,!1):p>0}),d.positiveZIndex.splice(p,0,c)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else o.styles.isFloating()?d.nonPositionedFloats.push(c):d.nonPositionedInlineLevel.push(c);_m(a,c,s?c:t,A)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),_m(a,e,t,A);jo(o.flags,8)&&rz(o,A)})},rz=function(n,e){for(var t=n instanceof vm?n.start:1,r=n instanceof vm?n.reversed:!1,o=0;o<e.length;o++){var s=e[o];s.container instanceof NB&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=rh(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},AD=function(n){var e=new tz(n,null),t=new ez(e),r=[];return _m(e,t,t,r),rz(e.container,r),t},Ay=function(n,e){switch(e){case 0:return Ni(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ni(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ni(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ni(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},lD=function(n,e){switch(e){case 0:return Ni(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ni(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ni(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ni(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},dD=function(n,e){switch(e){case 0:return Ni(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ni(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ni(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ni(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},cD=function(n,e){switch(e){case 0:return Hf(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Hf(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Hf(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Hf(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Hf=function(n,e){var t=[];return ki(n)?t.push(n.subdivide(.5,!1)):t.push(n),ki(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Ni=function(n,e,t,r){var o=[];return ki(n)?o.push(n.subdivide(.5,!1)):o.push(n),ki(t)?o.push(t.subdivide(.5,!0)):o.push(t),ki(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),ki(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},nz=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Gp=function(n){var e=n.styles,t=n.bounds,r=Un(e.paddingLeft,t.width),o=Un(e.paddingRight,t.width),s=Un(e.paddingTop,t.width),i=Un(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+s+i))},uD=function(n,e){return n===0?e.bounds:n===2?Gp(e):nz(e)},hD=function(n,e){return n===0?e.bounds:n===2?Gp(e):nz(e)},Zv=function(n,e,t){var r=uD(Wd(n.styles.backgroundOrigin,e),n),o=hD(Wd(n.styles.backgroundClip,e),n),s=fD(Wd(n.styles.backgroundSize,e),t,r),i=s[0],a=s[1],A=bu(Wd(n.styles.backgroundPosition,e),r.width-i,r.height-a),d=pD(Wd(n.styles.backgroundRepeat,e),A,s,r,o),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return i=Math.max(1,i),a=Math.max(1,a),[d,c,u,i,a]},Rd=function(n){return nn(n)&&n.value===pc.AUTO},jf=function(n){return typeof n=="number"},fD=function(n,e,t){var r=e[0],o=e[1],s=e[2],i=n[0],a=n[1];if(!i)return[0,0];if(Yn(i)&&a&&Yn(a))return[Un(i,t.width),Un(a,t.height)];var A=jf(s);if(nn(i)&&(i.value===pc.CONTAIN||i.value===pc.COVER)){if(jf(s)){var d=t.width/t.height;return d<s!=(i.value===pc.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=jf(r),u=jf(o),h=c||u;if(Rd(i)&&(!a||Rd(a))){if(c&&u)return[r,o];if(!A&&!h)return[t.width,t.height];if(h&&A){var p=c?r:o*s,v=u?o:r/s;return[p,v]}var w=c?r:t.width,b=u?o:t.height;return[w,b]}if(A){var x=0,S=0;return Yn(i)?x=Un(i,t.width):Yn(a)&&(S=Un(a,t.height)),Rd(i)?x=S*s:(!a||Rd(a))&&(S=x/s),[x,S]}var I=null,P=null;if(Yn(i)?I=Un(i,t.width):a&&Yn(a)&&(P=Un(a,t.height)),I!==null&&(!a||Rd(a))&&(P=c&&u?I/r*o:t.height),P!==null&&Rd(i)&&(I=c&&u?P/o*r:t.width),I!==null&&P!==null)return[I,P];throw new Error("Unable to calculate background-size for element")},Wd=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},pD=function(n,e,t,r,o){var s=e[0],i=e[1],a=t[0],A=t[1];switch(n){case 2:return[new or(Math.round(r.left),Math.round(r.top+i)),new or(Math.round(r.left+r.width),Math.round(r.top+i)),new or(Math.round(r.left+r.width),Math.round(A+r.top+i)),new or(Math.round(r.left),Math.round(A+r.top+i))];case 3:return[new or(Math.round(r.left+s),Math.round(r.top)),new or(Math.round(r.left+s+a),Math.round(r.top)),new or(Math.round(r.left+s+a),Math.round(r.height+r.top)),new or(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new or(Math.round(r.left+s),Math.round(r.top+i)),new or(Math.round(r.left+s+a),Math.round(r.top+i)),new or(Math.round(r.left+s+a),Math.round(r.top+i+A)),new or(Math.round(r.left+s),Math.round(r.top+i+A))];default:return[new or(Math.round(o.left),Math.round(o.top)),new or(Math.round(o.left+o.width),Math.round(o.top)),new or(Math.round(o.left+o.width),Math.round(o.height+o.top)),new or(Math.round(o.left),Math.round(o.height+o.top))]}},gD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ly="Hidden Text",vD=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),o=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),o.src=gD,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(ly)),r.appendChild(s),r.appendChild(o);var a=o.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(ly)),r.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r="".concat(e," ").concat(t);return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),oz=function(){function n(e,t){this.context=e,this.options=t}return n}(),mD=1e4,wD=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px")),o.fontMetrics=new vD(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized (".concat(r.width,"x").concat(r.height,") with scale ").concat(r.scale)),o}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(t){this.ctx.save(),iD(t)&&(this.ctx.globalAlpha=t.opacity),sD(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),ZB(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ks(this,void 0,void 0,function(){var r;return Bs(this,function(o){switch(o.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ks(this,void 0,void 0,function(){return Bs(this,function(r){switch(r.label){case 0:if(jo(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,o){var s=this;if(r===0)navigator.userAgent.indexOf("Firefox")===-1?(this.ctx.textBaseline="ideographic",this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)):this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+o);else{var i=W1(t.text);i.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+o),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),o=BD(t.fontFamily).join(", "),s=yl(t.fontSize)?"".concat(t.fontSize.number).concat(t.fontSize.unit):"".concat(t.fontSize.number,"px");return[[t.fontStyle,r,t.fontWeight,s,o].join(" "),o,s]},e.prototype.renderTextNode=function(t,r){return ks(this,void 0,void 0,function(){var o,s,i=this;return Bs(this,function(a){return o=this.createFontStyle(r)[0],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=r.paintOrder,t.textBounds.forEach(function(A){s.forEach(function(d){switch(d){case 0:i.ctx.fillStyle=es(r.color),i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number);var c=r.textShadow;if(c.length&&A.text.trim().length&&(c.slice(0).reverse().forEach(function(h){i.ctx.shadowColor=es(h.color),i.ctx.shadowOffsetX=h.offsetX.number*i.options.scale,i.ctx.shadowOffsetY=h.offsetY.number*i.options.scale,i.ctx.shadowBlur=h.blur.number,i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number)}),i.ctx.shadowColor="",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0),r.textDecorationLine.length){i.ctx.fillStyle=es(r.textDecorationColor||r.color);var u=1;r.textDecorationLine.forEach(function(h){switch(h){case 1:i.ctx.fillRect(A.bounds.left,A.bounds.top+A.bounds.height-u,A.bounds.width,u);break;case 2:i.ctx.fillRect(A.bounds.left,A.bounds.top,A.bounds.width,u);break;case 3:i.ctx.fillRect(A.bounds.left,A.bounds.top+(A.bounds.height/2-u/2),A.bounds.width,u);break}})}break;case 1:r.webkitTextStrokeWidth&&A.text.trim().length&&(i.ctx.strokeStyle=es(r.webkitTextStrokeColor),i.ctx.lineWidth=r.webkitTextStrokeWidth,i.ctx.lineJoin=window.chrome?"miter":"round",i.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)),i.ctx.strokeStyle="",i.ctx.lineWidth=0,i.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,o){var s=o.naturalWidth||t.intrinsicWidth,i=o.naturalHeight||t.intrinsicHeight;if(o&&s>0&&i>0){var a=Gp(t),A=Vp(r);this.path(A),this.ctx.save(),this.ctx.clip();var d=0,c=0,u=s,h=i,p=a.left,v=a.top,w=a.width,b=a.height,x=t.styles.objectFit,S=w/b,I=u/h;if(x===2)I>S?(b=w/I,v+=(a.height-b)/2):(w=b*I,p+=(a.width-w)/2);else if(x===4)I>S?(u=h*S,d+=(s-u)/2):(h=u/S,c+=(i-h)/2);else if(x===8)u>w?(d+=(u-w)/2,u=w):(p+=(w-u)/2,w=u),h>b?(c+=(h-b)/2,h=b):(v+=(b-h)/2,b=h);else if(x===16){var P=I>S?w:b*I,N=u>w?u:w;P<N?I>S?(b=w/I,v+=(a.height-b)/2):(w=b*I,p+=(a.width-w)/2):(u>w?(d+=(u-w)/2,u=w):(p+=(w-u)/2,w=u),h>b?(c+=(h-b)/2,h=b):(v+=(b-h)/2,b=h))}this.ctx.drawImage(o,d,c,u,h,p,v,w,b),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ks(this,void 0,void 0,function(){var r,o,s,i,a,A,S,S,d,c,u,h,P,p,v,N,w,b,x,S,I,P,N;return Bs(this,function(ee){switch(ee.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,o=t.curves,s=r.styles,i=0,a=r.textNodes,ee.label=1;case 1:return i<a.length?(A=a[i],[4,this.renderTextNode(A,s)]):[3,4];case 2:ee.sent(),ee.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof kB))return[3,8];ee.label=5;case 5:return ee.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return S=ee.sent(),this.renderReplacedElement(r,o,S),[3,8];case 7:return ee.sent(),this.context.logger.error("Error loading image ".concat(r.src)),[3,8];case 8:if(r instanceof OB&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof DB))return[3,12];ee.label=9;case 9:return ee.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return S=ee.sent(),this.renderReplacedElement(r,o,S),[3,12];case 11:return ee.sent(),this.context.logger.error("Error loading svg ".concat(r.svg.substring(0,255))),[3,12];case 12:return r instanceof jB&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:c=ee.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),ee.label=14;case 14:if(r instanceof X1&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===jp?r.checked&&(this.ctx.save(),this.path([new or(r.bounds.left+u*.39363,r.bounds.top+u*.79),new or(r.bounds.left+u*.16,r.bounds.top+u*.5549),new or(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new or(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new or(r.bounds.left+u*.72983,r.bounds.top+u*.23),new or(r.bounds.left+u*.84,r.bounds.top+u*.34085),new or(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=es(Xb),this.ctx.fill(),this.ctx.restore()):r.type===Rp&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=es(Xb),this.ctx.fill(),this.ctx.restore())),bD(r)&&r.value.length){switch(h=this.createFontStyle(s),P=h[0],p=h[1],v=this.fontMetrics.getMetrics(P,p).baseline,this.ctx.font=P,this.ctx.fillStyle=es(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_D(r.styles.textAlign),N=Gp(r),w=0,r.styles.textAlign){case 1:w+=N.width/2;break;case 2:w+=N.width;break}b=N.add(w,0,0,-N.height/2+1),this.ctx.save(),this.path([new or(N.left,N.top),new or(N.left+N.width,N.top),new or(N.left+N.width,N.top+N.height),new or(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Tu(r.value,b),s.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!jo(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(x=r.styles.listStyleImage,x.type!==0)return[3,18];S=void 0,I=x.url,ee.label=15;case 15:return ee.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return S=ee.sent(),this.ctx.drawImage(S,r.bounds.left-(S.width+10),r.bounds.top),[3,18];case 17:return ee.sent(),this.context.logger.error("Error loading list-style-image ".concat(I)),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(P=this.createFontStyle(s)[0],this.ctx.font=P,this.ctx.fillStyle=es(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new CA(r.bounds.left,r.bounds.top+Un(r.styles.paddingTop,r.bounds.width),r.bounds.width,Tb(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Tu(t.listValue,N),s.letterSpacing,Tb(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ee.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ks(this,void 0,void 0,function(){var r,o,x,s,i,x,a,A,x,d,c,x,u,h,x,p,v,x,w,b,x;return Bs(this,function(S){switch(S.label){case 0:if(jo(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:S.sent(),r=0,o=t.negativeZIndex,S.label=2;case 2:return r<o.length?(x=o[r],[4,this.renderStack(x)]):[3,5];case 3:S.sent(),S.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:S.sent(),s=0,i=t.nonInlineLevel,S.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:S.sent(),S.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,S.label=11;case 11:return a<A.length?(x=A[a],[4,this.renderStack(x)]):[3,14];case 12:S.sent(),S.label=13;case 13:return a++,[3,11];case 14:d=0,c=t.nonPositionedInlineLevel,S.label=15;case 15:return d<c.length?(x=c[d],[4,this.renderStack(x)]):[3,18];case 16:S.sent(),S.label=17;case 17:return d++,[3,15];case 18:u=0,h=t.inlineLevel,S.label=19;case 19:return u<h.length?(x=h[u],[4,this.renderNode(x)]):[3,22];case 20:S.sent(),S.label=21;case 21:return u++,[3,19];case 22:p=0,v=t.zeroOrAutoZIndexOrTransformedOrOpacity,S.label=23;case 23:return p<v.length?(x=v[p],[4,this.renderStack(x)]):[3,26];case 24:S.sent(),S.label=25;case 25:return p++,[3,23];case 26:w=0,b=t.positiveZIndex,S.label=27;case 27:return w<b.length?(x=b[w],[4,this.renderStack(x)]):[3,30];case 28:S.sent(),S.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(o,s){var i=ki(o)?o.start:o;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),ki(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(t,r,o,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},e.prototype.resizeImage=function(t,r,o){var s,i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,o);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,o),a},e.prototype.renderBackgroundImage=function(t){return ks(this,void 0,void 0,function(){var r,o,s,i,a,A;return Bs(this,function(d){switch(d.label){case 0:r=t.styles.backgroundImage.length-1,o=function(c){var u,h,p,v,w,q,re,ue,ve,ie,xe,b,q,re,ue,ve,ie,x,S,I,P,N,ee,j,D,ne,xe,L,q,V,se,ve,ie,ge,re,ue,Z,_e,z,E,F,Q,M,k;return Bs(this,function(O){switch(O.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,O.label=1;case 1:return O.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=O.sent(),[3,4];case 3:return O.sent(),s.context.logger.error("Error loading background-image ".concat(h)),[3,4];case 4:return u&&(p=isNaN(u.width)||u.width===0?1:u.width,v=isNaN(u.height)||u.height===0?1:u.height,w=Zv(t,r,[p,v,p/v]),q=w[0],re=w[1],ue=w[2],ve=w[3],ie=w[4],xe=s.ctx.createPattern(s.resizeImage(u,ve,ie),"repeat"),s.renderRepeat(q,xe,re,ue)),[3,6];case 5:rk(c)?(b=Zv(t,r,[null,null,null]),q=b[0],re=b[1],ue=b[2],ve=b[3],ie=b[4],x=YP(c.angle,ve,ie),S=x[0],I=x[1],P=x[2],N=x[3],ee=x[4],j=document.createElement("canvas"),j.width=ve,j.height=ie,D=j.getContext("2d"),ne=D.createLinearGradient(I,N,P,ee),Ub(c.stops,S).forEach(function(K){return ne.addColorStop(K.stop,es(K.color))}),D.fillStyle=ne,D.fillRect(0,0,ve,ie),ve>0&&ie>0&&(xe=s.ctx.createPattern(j,"repeat"),s.renderRepeat(q,xe,re,ue))):nk(c)&&(L=Zv(t,r,[null,null,null]),q=L[0],V=L[1],se=L[2],ve=L[3],ie=L[4],ge=c.position.length===0?[q1]:c.position,re=Un(ge[0],ve),ue=Un(ge[ge.length-1],ie),Z=JP(c,re,ue,ve,ie),_e=Z[0],z=Z[1],_e>0&&z>0&&(E=s.ctx.createRadialGradient(V+re,se+ue,0,V+re,se+ue,_e),Ub(c.stops,_e*2).forEach(function(K){return E.addColorStop(K.stop,es(K.color))}),s.path(q),s.ctx.fillStyle=E,_e!==z?(F=t.bounds.left+.5*t.bounds.width,Q=t.bounds.top+.5*t.bounds.height,M=z/_e,k=1/M,s.ctx.save(),s.ctx.translate(F,Q),s.ctx.transform(1,0,0,M,0,0),s.ctx.translate(-F,-Q),s.ctx.fillRect(V,k*(se-Q)+Q,ve,ie*k),s.ctx.restore()):s.ctx.fill())),O.label=6;case 6:return r--,[2]}})},s=this,i=0,a=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return i<a.length?(A=a[i],[5,o(A)]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,o){return ks(this,void 0,void 0,function(){return Bs(this,function(s){return this.path(Ay(o,r)),this.ctx.fillStyle=es(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,o,s){return ks(this,void 0,void 0,function(){var i,a;return Bs(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,o,s)]:[3,2];case 1:return A.sent(),[2];case 2:return i=lD(s,o),this.path(i),this.ctx.fillStyle=es(t),this.ctx.fill(),a=dD(s,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ks(this,void 0,void 0,function(){var r,o,s,i,a,A,d,c,u=this;return Bs(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,o=!ll(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=yD(Wd(r.backgroundClip,0),t.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),ll(r.backgroundColor)||(this.ctx.fillStyle=es(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){u.ctx.save();var v=$p(t.curves),w=p.inset?0:mD,b=aD(v,-w+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(u.path(v),u.ctx.clip(),u.mask(b)):(u.mask(v),u.ctx.clip(),u.path(b)),u.ctx.shadowOffsetX=p.offsetX.number+w,u.ctx.shadowOffsetY=p.offsetY.number,u.ctx.shadowColor=es(p.color),u.ctx.shadowBlur=p.blur.number,u.ctx.fillStyle=p.inset?es(p.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,A=0,d=s,h.label=3;case 3:return A<d.length?(c=d[A],c.style!==0&&!ll(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,o,s,i){return ks(this,void 0,void 0,function(){var a,A,d,c,u,h,p,v,w,b,x,S,I,P,N,ee,N,ee;return Bs(this,function(j){return this.ctx.save(),a=cD(s,o),A=Ay(s,o),i===2&&(this.path(A),this.ctx.clip()),ki(A[0])?(d=A[0].start.x,c=A[0].start.y):(d=A[0].x,c=A[0].y),ki(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),o===0||o===2?p=Math.abs(d-u):p=Math.abs(c-h),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(A.slice(0,2)),v=r<3?r*3:r*2,w=r<3?r*2:r,i===3&&(v=r,w=r),b=!0,p<=v*2?b=!1:p<=v*2+w?(x=p/(2*v+w),v*=x,w*=x):(S=Math.floor((p+w)/(v+w)),I=(p-S*v)/(S-1),P=(p-(S+1)*v)/S,w=P<=0||Math.abs(w-I)<Math.abs(w-P)?I:P),b&&(i===3?this.ctx.setLineDash([0,v+w]):this.ctx.setLineDash([v,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=es(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ki(A[0])&&(N=A[3],ee=A[0],this.ctx.beginPath(),this.formatPath([new or(N.end.x,N.end.y),new or(ee.start.x,ee.start.y)]),this.ctx.stroke()),ki(A[1])&&(N=A[1],ee=A[2],this.ctx.beginPath(),this.formatPath([new or(N.end.x,N.end.y),new or(ee.start.x,ee.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ks(this,void 0,void 0,function(){var r;return Bs(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=es(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=AD(t),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(oz),bD=function(n){return n instanceof HB||n instanceof MB?!0:n instanceof X1&&n.type!==Rp&&n.type!==jp},yD=function(n,e){switch(n){case 0:return $p(e);case 2:return rD(e);case 1:default:return Vp(e)}},_D=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},xD=["-apple-system","system-ui"],BD=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return xD.indexOf(e)===-1}):n},zD=function(n){da(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px"),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (".concat(r.width,"x").concat(r.height," at ").concat(r.x,",").concat(r.y,") with scale ").concat(r.scale)),o}return e.prototype.render=function(t){return ks(this,void 0,void 0,function(){var r,o;return Bs(this,function(s){switch(s.label){case 0:return r=gm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,CD(r)];case 1:return o=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=es(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(oz),CD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},SD=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,bf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,bf([this.id,"".concat(this.getTime(),"ms")],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,bf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,bf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.instances={},n}(),ED=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#".concat(n.instanceCount++),this.logger=new SD({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new G8(this,e)}return n.instanceCount=1,n}(),FD=function(n,e){return e===void 0&&(e={}),ID(n,e)};typeof window<"u"&&JB.setContext(window);var ID=function(n,e){return ks(void 0,void 0,void 0,function(){var t,r,o,s,i,a,A,d,c,u,h,p,v,w,b,x,S,I,P,N,j,ee,j,D,ne,xe,L,q,V,se,ve,ie,ge,re,ue,Z,_e,z,E,F;return Bs(this,function(Q){switch(Q.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(D=e.allowTaint)!==null&&D!==void 0?D:!1,imageTimeout:(ne=e.imageTimeout)!==null&&ne!==void 0?ne:15e3,proxy:e.proxy,useCORS:(xe=e.useCORS)!==null&&xe!==void 0?xe:!1},s=Z0({logging:(L=e.logging)!==null&&L!==void 0?L:!0,cache:e.cache},o),i={windowWidth:(q=e.windowWidth)!==null&&q!==void 0?q:r.innerWidth,windowHeight:(V=e.windowHeight)!==null&&V!==void 0?V:r.innerHeight,scrollX:(se=e.scrollX)!==null&&se!==void 0?se:r.pageXOffset,scrollY:(ve=e.scrollY)!==null&&ve!==void 0?ve:r.pageYOffset},a=new CA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new ED(s,a),d=(ie=e.foreignObjectRendering)!==null&&ie!==void 0?ie:!1,c={allowTaint:(ge=e.allowTaint)!==null&&ge!==void 0?ge:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},A.logger.debug("Starting document clone with size ".concat(a.width,"x").concat(a.height," scrolled to ").concat(-a.left,",").concat(-a.top)),u=new sy(A,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=Q.sent(),v=Y1(h)||I8(h)?u6(h.ownerDocument):Bg(A,h),w=v.width,b=v.height,x=v.left,S=v.top,I=UD(A,h,e.backgroundColor),P={canvas:e.canvas,backgroundColor:I,scale:(ue=(re=e.scale)!==null&&re!==void 0?re:r.devicePixelRatio)!==null&&ue!==void 0?ue:1,x:((Z=e.x)!==null&&Z!==void 0?Z:0)+x,y:((_e=e.y)!==null&&_e!==void 0?_e:0)+S,width:(z=e.width)!==null&&z!==void 0?z:Math.ceil(w),height:(E=e.height)!==null&&E!==void 0?E:Math.ceil(b)},d?(A.logger.debug("Document cloned, using foreign object rendering"),j=new zD(A,P),[4,j.render(h)]):[3,3];case 2:return N=Q.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at ".concat(x,",").concat(S," with size ").concat(w,"x").concat(b," using computed rendering")),A.logger.debug("Starting DOM parsing"),ee=qB(A,h),I===ee.styles.backgroundColor&&(ee.styles.backgroundColor=ka.TRANSPARENT),A.logger.debug("Starting renderer for element at ".concat(P.x,",").concat(P.y," with size ").concat(P.width,"x").concat(P.height)),j=new wD(A,P),[4,j.render(ee)];case 4:N=Q.sent(),Q.label=5;case 5:return(!((F=e.removeContainer)!==null&&F!==void 0)||F)&&(sy.destroy(p)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,N]}})})},UD=function(n,e,t){var r=e.ownerDocument,o=r.documentElement?fc(n,getComputedStyle(r.documentElement).backgroundColor):ka.TRANSPARENT,s=r.body?fc(n,getComputedStyle(r.body).backgroundColor):ka.TRANSPARENT,i=typeof t=="string"?fc(n,t):t===null?ka.TRANSPARENT:4294967295;return e===r.documentElement?ll(o)?ll(s)?i:s:o:i};function Qn(n){"@babel/helpers - typeof";return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(n)}var Ss=Uint8Array,_i=Uint16Array,J1=Int32Array,Dg=new Ss([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ng=new Ss([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xm=new Ss([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sz=function(n,e){for(var t=new _i(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new J1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)o[s]=s-t[r]<<5|r;return{b:t,r:o}},iz=sz(Dg,2),az=iz.b,Bm=iz.r;az[28]=258,Bm[258]=28;var Az=sz(Ng,0),QD=Az.b,dy=Az.r,zm=new _i(32768);for(var Jn=0;Jn<32768;++Jn){var VA=(Jn&43690)>>1|(Jn&21845)<<1;VA=(VA&52428)>>2|(VA&13107)<<2,VA=(VA&61680)>>4|(VA&3855)<<4,zm[Jn]=((VA&65280)>>8|(VA&255)<<8)>>1}var Oa=function(n,e,t){for(var r=n.length,o=0,s=new _i(e);o<r;++o)n[o]&&++s[n[o]-1];var i=new _i(e);for(o=1;o<e;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(t){a=new _i(1<<e);var A=15-e;for(o=0;o<r;++o)if(n[o])for(var d=o<<4|n[o],c=e-n[o],u=i[n[o]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[zm[u]>>A]=d}else for(a=new _i(r),o=0;o<r;++o)n[o]&&(a[o]=zm[i[n[o]-1]++]>>15-n[o]);return a},vl=new Ss(288);for(var Jn=0;Jn<144;++Jn)vl[Jn]=8;for(var Jn=144;Jn<256;++Jn)vl[Jn]=9;for(var Jn=256;Jn<280;++Jn)vl[Jn]=7;for(var Jn=280;Jn<288;++Jn)vl[Jn]=8;var nh=new Ss(32);for(var Jn=0;Jn<32;++Jn)nh[Jn]=5;var TD=Oa(vl,9,0),LD=Oa(vl,9,1),PD=Oa(nh,5,0),kD=Oa(nh,5,1),e0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Gi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},t0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Z1=function(n){return(n+7)/8|0},lz=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ss(n.subarray(e,t))},OD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zi=function(n,e,t){var r=new Error(e||OD[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Zi),!t)throw r;return r},DD=function(n,e,t,r){var o=n.length,s=0;if(!o||e.f&&!e.l)return t||new Ss(0);var i=!t,a=i||e.i!=2,A=e.i;i&&(t=new Ss(o*3));var d=function(de){var Be=t.length;if(de>Be){var Pe=new Ss(Math.max(Be*2,de));Pe.set(t),t=Pe}},c=e.f||0,u=e.p||0,h=e.b||0,p=e.l,v=e.d,w=e.m,b=e.n,x=o*8;do{if(!p){c=Gi(n,u,1);var S=Gi(n,u+1,3);if(u+=3,S)if(S==1)p=LD,v=kD,w=9,b=5;else if(S==2){var ee=Gi(n,u,31)+257,j=Gi(n,u+10,15)+4,D=ee+Gi(n,u+5,31)+1;u+=14;for(var ne=new Ss(D),xe=new Ss(19),L=0;L<j;++L)xe[xm[L]]=Gi(n,u+L*3,7);u+=j*3;for(var q=e0(xe),V=(1<<q)-1,se=Oa(xe,q,1),L=0;L<D;){var ve=se[Gi(n,u,V)];u+=ve&15;var I=ve>>4;if(I<16)ne[L++]=I;else{var ie=0,ge=0;for(I==16?(ge=3+Gi(n,u,3),u+=2,ie=ne[L-1]):I==17?(ge=3+Gi(n,u,7),u+=3):I==18&&(ge=11+Gi(n,u,127),u+=7);ge--;)ne[L++]=ie}}var re=ne.subarray(0,ee),ue=ne.subarray(ee);w=e0(re),b=e0(ue),p=Oa(re,w,1),v=Oa(ue,b,1)}else Zi(1);else{var I=Z1(u)+4,P=n[I-4]|n[I-3]<<8,N=I+P;if(N>o){A&&Zi(0);break}a&&d(h+P),t.set(n.subarray(I,N),h),e.b=h+=P,e.p=u=N*8,e.f=c;continue}if(u>x){A&&Zi(0);break}}a&&d(h+131072);for(var Z=(1<<w)-1,_e=(1<<b)-1,z=u;;z=u){var ie=p[t0(n,u)&Z],E=ie>>4;if(u+=ie&15,u>x){A&&Zi(0);break}if(ie||Zi(2),E<256)t[h++]=E;else if(E==256){z=u,p=null;break}else{var F=E-254;if(E>264){var L=E-257,Q=Dg[L];F=Gi(n,u,(1<<Q)-1)+az[L],u+=Q}var M=v[t0(n,u)&_e],k=M>>4;M||Zi(3),u+=M&15;var ue=QD[k];if(k>3){var Q=Ng[k];ue+=t0(n,u)&(1<<Q)-1,u+=Q}if(u>x){A&&Zi(0);break}a&&d(h+131072);var O=h+F;if(h<ue){var K=s-ue,R=Math.min(ue,O);for(K+h<0&&Zi(3);h<R;++h)t[h]=r[K+h]}for(;h<O;++h)t[h]=t[h-ue]}}e.l=p,e.p=z,e.b=h,e.f=c,p&&(c=1,e.m=w,e.d=v,e.n=b)}while(!c);return h!=t.length&&i?lz(t,0,h):t.subarray(0,h)},lA=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},lu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},r0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,s=t.slice();if(!o)return{t:cz,l:0};if(o==1){var i=new Ss(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(N,ee){return N.f-ee.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],d=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=o-1;)a=t[t[d].f<t[u].f?d++:u++],A=t[d!=c&&t[d].f<t[u].f?d++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var h=s[0].s,r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var p=new _i(h+1),v=Cm(t[c-1],p,0);if(v>e){var r=0,w=0,b=v-e,x=1<<b;for(s.sort(function(ee,j){return p[j.s]-p[ee.s]||ee.f-j.f});r<o;++r){var S=s[r].s;if(p[S]>e)w+=x-(1<<v-p[S]),p[S]=e;else break}for(w>>=b;w>0;){var I=s[r].s;p[I]<e?w-=1<<e-p[I]++-1:++r}for(;r>=0&&w;--r){var P=s[r].s;p[P]==e&&(--p[P],++w)}v=e}return{t:new Ss(p),l:v}},Cm=function(n,e,t){return n.s==-1?Math.max(Cm(n.l,e,t+1),Cm(n.r,e,t+1)):e[n.s]=t},cy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new _i(++e),r=0,o=n[0],s=1,i=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==o&&a!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=n[a]}return{c:t.subarray(0,r),n:e}},du=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},dz=function(n,e,t){var r=t.length,o=Z1(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var s=0;s<r;++s)n[o+s+4]=t[s];return(o+4+r)*8},uy=function(n,e,t,r,o,s,i,a,A,d,c){lA(e,c++,t),++o[256];for(var u=r0(o,15),h=u.t,p=u.l,v=r0(s,15),w=v.t,b=v.l,x=cy(h),S=x.c,I=x.n,P=cy(w),N=P.c,ee=P.n,j=new _i(19),D=0;D<S.length;++D)++j[S[D]&31];for(var D=0;D<N.length;++D)++j[N[D]&31];for(var ne=r0(j,7),xe=ne.t,L=ne.l,q=19;q>4&&!xe[xm[q-1]];--q);var V=d+5<<3,se=du(o,vl)+du(s,nh)+i,ve=du(o,h)+du(s,w)+i+14+3*q+du(j,xe)+2*j[16]+3*j[17]+7*j[18];if(A>=0&&V<=se&&V<=ve)return dz(e,c,n.subarray(A,A+d));var ie,ge,re,ue;if(lA(e,c,1+(ve<se)),c+=2,ve<se){ie=Oa(h,p,0),ge=h,re=Oa(w,b,0),ue=w;var Z=Oa(xe,L,0);lA(e,c,I-257),lA(e,c+5,ee-1),lA(e,c+10,q-4),c+=14;for(var D=0;D<q;++D)lA(e,c+3*D,xe[xm[D]]);c+=3*q;for(var _e=[S,N],z=0;z<2;++z)for(var E=_e[z],D=0;D<E.length;++D){var F=E[D]&31;lA(e,c,Z[F]),c+=xe[F],F>15&&(lA(e,c,E[D]>>5&127),c+=E[D]>>12)}}else ie=TD,ge=vl,re=PD,ue=nh;for(var D=0;D<a;++D){var Q=r[D];if(Q>255){var F=Q>>18&31;lu(e,c,ie[F+257]),c+=ge[F+257],F>7&&(lA(e,c,Q>>23&31),c+=Dg[F]);var M=Q&31;lu(e,c,re[M]),c+=ue[M],M>3&&(lu(e,c,Q>>5&8191),c+=Ng[M])}else lu(e,c,ie[Q]),c+=ge[Q]}return lu(e,c,ie[256]),c+ge[256]},ND=new J1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cz=new Ss(0),MD=function(n,e,t,r,o,s){var i=s.z||n.length,a=new Ss(r+i+5*(1+Math.ceil(i/7e3))+o),A=a.subarray(r,a.length-o),d=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=ND[e-1],h=u>>13,p=u&8191,v=(1<<t)-1,w=s.p||new _i(32768),b=s.h||new _i(v+1),x=Math.ceil(t/3),S=2*x,I=function(He){return(n[He]^n[He+1]<<x^n[He+2]<<S)&v},P=new J1(25e3),N=new _i(288),ee=new _i(32),j=0,D=0,ne=s.i||0,xe=0,L=s.w||0,q=0;ne+2<i;++ne){var V=I(ne),se=ne&32767,ve=b[V];if(w[se]=ve,b[V]=se,L<=ne){var ie=i-ne;if((j>7e3||xe>24576)&&(ie>423||!d)){c=uy(n,A,0,P,N,ee,D,xe,q,ne-q,c),xe=j=D=0,q=ne;for(var ge=0;ge<286;++ge)N[ge]=0;for(var ge=0;ge<30;++ge)ee[ge]=0}var re=2,ue=0,Z=p,_e=se-ve&32767;if(ie>2&&V==I(ne-_e))for(var z=Math.min(h,ie)-1,E=Math.min(32767,ne),F=Math.min(258,ie);_e<=E&&--Z&&se!=ve;){if(n[ne+re]==n[ne+re-_e]){for(var Q=0;Q<F&&n[ne+Q]==n[ne+Q-_e];++Q);if(Q>re){if(re=Q,ue=_e,Q>z)break;for(var M=Math.min(_e,Q-2),k=0,ge=0;ge<M;++ge){var O=ne-_e+ge&32767,K=w[O],R=O-K&32767;R>k&&(k=R,ve=O)}}}se=ve,ve=w[se],_e+=se-ve&32767}if(ue){P[xe++]=268435456|Bm[re]<<18|dy[ue];var de=Bm[re]&31,Be=dy[ue]&31;D+=Dg[de]+Ng[Be],++N[257+de],++ee[Be],L=ne+re,++j}else P[xe++]=n[ne],++N[n[ne]]}}for(ne=Math.max(ne,L);ne<i;++ne)P[xe++]=n[ne],++N[n[ne]];c=uy(n,A,d,P,N,ee,D,xe,q,ne-q,c),d||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=b,s.p=w,s.i=ne,s.w=L)}else{for(var ne=s.w||0;ne<i+d;ne+=65535){var Pe=ne+65535;Pe>=i&&(A[c/8|0]=d,Pe=i),c=dz(A,c+1,n.subarray(ne,Pe))}s.i=i}return lz(a,0,r+Z1(c)+o)},uz=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,s=t.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=t[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},HD=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Ss(s.length+n.length);i.set(s),i.set(n,s.length),n=i,o.w=s.length}return MD(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},hz=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},jD=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=uz();o.p(e.dictionary),hz(n,2,o.d())}},RD=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Zi(6,"invalid zlib data"),(n[1]>>5&1)==1&&Zi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Sm(n,e){e||(e={});var t=uz();t.p(n);var r=HD(n,e,e.dictionary?6:2,4);return jD(r,e),hz(r,r.length-4,t.d()),r}function qD(n,e){return DD(n.subarray(RD(n),-4),{i:2},e,e)}var KD=typeof TextDecoder<"u"&&new TextDecoder,$D=0;try{KD.decode(cz,{stream:!0}),$D=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function n0(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var Dn={log:n0,warn:function(n){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):n0.call(null,arguments))},error:function(n){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):n0(n))}};function o0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Ql(r.response,e,t)},r.onerror=function(){Dn.error("could not download file")},r.send()}function hy(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Pu,Em,Ql=Qr.saveAs||((typeof window>"u"?"undefined":Qn(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Qr.URL||Qr.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?hy(o.href)?o0(n,e,t):Rf(o,o.target="_blank"):Rf(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Rf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(hy(n))o0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Rf(r)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:Qn(s)!=="object"&&(Dn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return o0(n,e,t);var o=n.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&s)&&(typeof FileReader>"u"?"undefined":Qn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=i?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var A=Qr.URL||Qr.webkitURL,d=A.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){A.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fz(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,s=t[r].process,i=o.exec(n);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),A=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),"#"+a+A+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function s0(n,e){var t=n[0],r=n[1],o=n[2],s=n[3];t=ws(t,r,o,s,e[0],7,-680876936),s=ws(s,t,r,o,e[1],12,-389564586),o=ws(o,s,t,r,e[2],17,606105819),r=ws(r,o,s,t,e[3],22,-1044525330),t=ws(t,r,o,s,e[4],7,-176418897),s=ws(s,t,r,o,e[5],12,1200080426),o=ws(o,s,t,r,e[6],17,-1473231341),r=ws(r,o,s,t,e[7],22,-45705983),t=ws(t,r,o,s,e[8],7,1770035416),s=ws(s,t,r,o,e[9],12,-1958414417),o=ws(o,s,t,r,e[10],17,-42063),r=ws(r,o,s,t,e[11],22,-1990404162),t=ws(t,r,o,s,e[12],7,1804603682),s=ws(s,t,r,o,e[13],12,-40341101),o=ws(o,s,t,r,e[14],17,-1502002290),t=bs(t,r=ws(r,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=bs(s,t,r,o,e[6],9,-1069501632),o=bs(o,s,t,r,e[11],14,643717713),r=bs(r,o,s,t,e[0],20,-373897302),t=bs(t,r,o,s,e[5],5,-701558691),s=bs(s,t,r,o,e[10],9,38016083),o=bs(o,s,t,r,e[15],14,-660478335),r=bs(r,o,s,t,e[4],20,-405537848),t=bs(t,r,o,s,e[9],5,568446438),s=bs(s,t,r,o,e[14],9,-1019803690),o=bs(o,s,t,r,e[3],14,-187363961),r=bs(r,o,s,t,e[8],20,1163531501),t=bs(t,r,o,s,e[13],5,-1444681467),s=bs(s,t,r,o,e[2],9,-51403784),o=bs(o,s,t,r,e[7],14,1735328473),t=ys(t,r=bs(r,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=ys(s,t,r,o,e[8],11,-2022574463),o=ys(o,s,t,r,e[11],16,1839030562),r=ys(r,o,s,t,e[14],23,-35309556),t=ys(t,r,o,s,e[1],4,-1530992060),s=ys(s,t,r,o,e[4],11,1272893353),o=ys(o,s,t,r,e[7],16,-155497632),r=ys(r,o,s,t,e[10],23,-1094730640),t=ys(t,r,o,s,e[13],4,681279174),s=ys(s,t,r,o,e[0],11,-358537222),o=ys(o,s,t,r,e[3],16,-722521979),r=ys(r,o,s,t,e[6],23,76029189),t=ys(t,r,o,s,e[9],4,-640364487),s=ys(s,t,r,o,e[12],11,-421815835),o=ys(o,s,t,r,e[15],16,530742520),t=_s(t,r=ys(r,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=_s(s,t,r,o,e[7],10,1126891415),o=_s(o,s,t,r,e[14],15,-1416354905),r=_s(r,o,s,t,e[5],21,-57434055),t=_s(t,r,o,s,e[12],6,1700485571),s=_s(s,t,r,o,e[3],10,-1894986606),o=_s(o,s,t,r,e[10],15,-1051523),r=_s(r,o,s,t,e[1],21,-2054922799),t=_s(t,r,o,s,e[8],6,1873313359),s=_s(s,t,r,o,e[15],10,-30611744),o=_s(o,s,t,r,e[6],15,-1560198380),r=_s(r,o,s,t,e[13],21,1309151649),t=_s(t,r,o,s,e[4],6,-145523070),s=_s(s,t,r,o,e[11],10,-1120210379),o=_s(o,s,t,r,e[2],15,718787259),r=_s(r,o,s,t,e[9],21,-343485551),n[0]=al(t,n[0]),n[1]=al(r,n[1]),n[2]=al(o,n[2]),n[3]=al(s,n[3])}function Mg(n,e,t,r,o,s){return e=al(al(e,n),al(r,s)),al(e<<o|e>>>32-o,t)}function ws(n,e,t,r,o,s,i){return Mg(e&t|~e&r,n,e,o,s,i)}function bs(n,e,t,r,o,s,i){return Mg(e&r|t&~r,n,e,o,s,i)}function ys(n,e,t,r,o,s,i){return Mg(e^t^r,n,e,o,s,i)}function _s(n,e,t,r,o,s,i){return Mg(t^(e|~r),n,e,o,s,i)}function pz(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)s0(r,VD(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(s0(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,s0(r,o),r}function VD(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Pu=Qr.atob.bind(Qr),Em=Qr.btoa.bind(Qr);var fy="0123456789abcdef".split("");function GD(n){for(var e="",t=0;t<4;t++)e+=fy[n>>8*t+4&15]+fy[n>>8*t&15];return e}function WD(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Fm(n){return pz(n).map(WD).join("")}var XD=function(n){for(var e=0;e<n.length;e++)n[e]=GD(n[e]);return n.join("")}(pz("hello"))!="5d41402abc4b2a76b9719d911017c592";function al(n,e){if(XD){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Im(n,e){var t,r,o,s;if(n!==t){for(var i=(o=n,s=1+(256/n.length>>0),new Array(s+1).join(o)),a=[],A=0;A<256;A++)a[A]=A;var d=0;for(A=0;A<256;A++){var c=a[A];d=(d+c+i.charCodeAt(A))%256,a[A]=a[d],a[d]=c}t=n,r=a}else a=r;var u=e.length,h=0,p=0,v="";for(A=0;A<u;A++)p=(p+(c=a[h=(h+1)%256]))%256,a[h]=a[p],a[p]=c,i=a[(a[h]+a[p])%256],v+=String.fromCharCode(e.charCodeAt(A)^i);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var py={print:4,modify:8,copy:16,"annot-forms":32};function Xd(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(a){if(py.perm!==void 0)throw new Error("Invalid permission: "+a);o+=py[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^o)),this.encryptionKey=Fm(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Im(this.encryptionKey,this.padding)}function Yd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function gy(n){if(Qn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!o],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var i=e[t][s];try{i[0].apply(n,r)}catch(a){Qr.console&&Dn.error("jsPDF PubSub Error",a.message,a)}i[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Wp(n){if(!(this instanceof Wp))return new Wp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function gz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Dl(n,e,t,r,o){if(!(this instanceof Dl))return new Dl(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,gz.call(this,r,o)}function oc(n,e,t,r,o){if(!(this instanceof oc))return new oc(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,gz.call(this,r,o)}function Sr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],i=[],a=1,A=16,d="S",c=null;Qn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(A=n.floatPrecision),d=n.defaultPathOperation||"S"),i=n.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",t=(""+(t||"P")).toLowerCase();var u=n.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=gy;var v="1.3",w=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(_){v=_};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var x=p.__private__.getPageFormat=function(_){return b[_]};o=o||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},I=S.COMPAT;function P(){this.saveGraphicsState(),H(new ft($,0,0,-$,0,Si()*$).toString()+" cm"),this.setFontSize(this.getFontSize()/$),d="n",I=S.ADVANCED}function N(){this.restoreGraphicsState(),d="S",I=S.COMPAT}var ee=p.__private__.combineFontStyleAndFontWeight=function(_,X){if(_=="bold"&&X=="normal"||_=="bold"&&X==400||_=="normal"&&X=="italic"||_=="bold"&&X=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return X&&(_=X==400||X==="normal"?_==="italic"?"italic":"normal":X!=700&&X!=="bold"||_!=="normal"?(X==700?"bold":X)+""+_:"bold"),_};p.advancedAPI=function(_){var X=I===S.COMPAT;return X&&P.call(this),typeof _!="function"||(_(this),X&&N.call(this)),this},p.compatAPI=function(_){var X=I===S.ADVANCED;return X&&N.call(this),typeof _!="function"||(_(this),X&&P.call(this)),this},p.isAdvancedAPI=function(){return I===S.ADVANCED};var j,D=function(_){if(I!==S.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ne=p.roundToPrecision=p.__private__.roundToPrecision=function(_,X){var Le=e||X;if(isNaN(_)||isNaN(Le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(Le).replace(/0+$/,"")};j=p.hpf=p.__private__.hpf=typeof A=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(_,A)}:A==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(_,16)};var xe=p.f2=p.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return ne(_,2)},L=p.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return ne(_,3)},q=p.scale=p.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return I===S.COMPAT?_*$:I===S.ADVANCED?_:void 0},V=function(_){return I===S.COMPAT?Si()-_:I===S.ADVANCED?_:void 0},se=function(_){return q(V(_))};p.__private__.setPrecision=p.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var ve,ie="00000000000000000000000000000000",ge=p.__private__.getFileId=function(){return ie},re=p.__private__.setFileId=function(_){return ie=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Hr=new Xd(c.userPermissions,c.userPassword,c.ownerPassword,ie)),ie};p.setFileId=function(_){return re(_),this},p.getFileId=function(){return ge()};var ue=p.__private__.convertDateToPDFDate=function(_){var X=_.getTimezoneOffset(),Le=X<0?"+":"-",qe=Math.floor(Math.abs(X/60)),ot=Math.abs(X%60),Bt=[Le,F(qe),"'",F(ot),"'"].join("");return["D:",_.getFullYear(),F(_.getMonth()+1),F(_.getDate()),F(_.getHours()),F(_.getMinutes()),F(_.getSeconds()),Bt].join("")},Z=p.__private__.convertPDFDateToDate=function(_){var X=parseInt(_.substr(2,4),10),Le=parseInt(_.substr(6,2),10)-1,qe=parseInt(_.substr(8,2),10),ot=parseInt(_.substr(10,2),10),Bt=parseInt(_.substr(12,2),10),kt=parseInt(_.substr(14,2),10);return new Date(X,Le,qe,ot,Bt,kt,0)},_e=p.__private__.setCreationDate=function(_){var X;if(_===void 0&&(_=new Date),_ instanceof Date)X=ue(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");X=_}return ve=X},z=p.__private__.getCreationDate=function(_){var X=ve;return _==="jsDate"&&(X=Z(ve)),X};p.setCreationDate=function(_){return _e(_),this},p.getCreationDate=function(_){return z(_)};var E,F=p.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},Q=p.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},M=0,k=[],O=[],K=0,R=[],de=[],Be=!1,Pe=O,He=function(){M=0,K=0,O=[],k=[],R=[],Jt=dt(),Kt=dt()};p.__private__.setCustomOutputDestination=function(_){Be=!0,Pe=_};var W=function(_){Be||(Pe=_)};p.__private__.resetCustomOutputDestination=function(){Be=!1,Pe=O};var H=p.__private__.out=function(_){return _=_.toString(),K+=_.length+1,Pe.push(_),Pe},te=p.__private__.write=function(_){return H(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Ae=p.__private__.getArrayBuffer=function(_){for(var X=_.length,Le=new ArrayBuffer(X),qe=new Uint8Array(Le);X--;)qe[X]=_.charCodeAt(X);return Le},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return he};var we=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(_){return we=I===S.ADVANCED?_/$:_,this};var ye,Ie=p.__private__.getFontSize=p.getFontSize=function(){return I===S.COMPAT?we:we*$},le=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(_){return le=_,this},p.__private__.getR2L=p.getR2L=function(){return le};var Te,Fe=p.__private__.setZoomMode=function(_){var X=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))ye=_;else if(isNaN(_)){if(X.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');ye=_}else ye=parseInt(_,10)};p.__private__.getZoomMode=function(){return ye};var Me,Ne=p.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Te=_};p.__private__.getPageMode=function(){return Te};var fe=p.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Me=_};p.__private__.getLayoutMode=function(){return Me},p.__private__.setDisplayMode=p.setDisplayMode=function(_,X,Le){return Fe(_),fe(X),Ne(Le),this};var J={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(_){if(Object.keys(J).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return J[_]},p.__private__.getDocumentProperties=function(){return J},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(_){for(var X in J)J.hasOwnProperty(X)&&_[X]&&(J[X]=_[X]);return this},p.__private__.setDocumentProperty=function(_,X){if(Object.keys(J).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return J[_]=X};var Se,$,Ce,Ee,Oe,je={},ke={},pe=[],Re={},et={},Je={},rt={},Ke=null,nt=0,st=[],pt=new gy(p),It=n.hotfixes||[],Pt={},St={},bt=[],ft=function _(X,Le,qe,ot,Bt,kt){if(!(this instanceof _))return new _(X,Le,qe,ot,Bt,kt);isNaN(X)&&(X=1),isNaN(Le)&&(Le=0),isNaN(qe)&&(qe=0),isNaN(ot)&&(ot=1),isNaN(Bt)&&(Bt=0),isNaN(kt)&&(kt=0),this._matrix=[X,Le,qe,ot,Bt,kt]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(_)},ft.prototype.multiply=function(_){var X=_.sx*this.sx+_.shy*this.shx,Le=_.sx*this.shy+_.shy*this.sy,qe=_.shx*this.sx+_.sy*this.shx,ot=_.shx*this.shy+_.sy*this.sy,Bt=_.tx*this.sx+_.ty*this.shx+this.tx,kt=_.tx*this.shy+_.ty*this.sy+this.ty;return new ft(X,Le,qe,ot,Bt,kt)},ft.prototype.decompose=function(){var _=this.sx,X=this.shy,Le=this.shx,qe=this.sy,ot=this.tx,Bt=this.ty,kt=Math.sqrt(_*_+X*X),rr=(_/=kt)*Le+(X/=kt)*qe;Le-=_*rr,qe-=X*rr;var gr=Math.sqrt(Le*Le+qe*qe);return rr/=gr,_*(qe/=gr)<X*(Le/=gr)&&(_=-_,X=-X,rr=-rr,kt=-kt),{scale:new ft(kt,0,0,gr,0,0),translate:new ft(1,0,0,1,ot,Bt),rotate:new ft(_,X,-X,_,0,0),skew:new ft(1,0,rr,1,0,0)}},ft.prototype.toString=function(_){return this.join(" ")},ft.prototype.inversed=function(){var _=this.sx,X=this.shy,Le=this.shx,qe=this.sy,ot=this.tx,Bt=this.ty,kt=1/(_*qe-X*Le),rr=qe*kt,gr=-X*kt,Tr=-Le*kt,Lr=_*kt;return new ft(rr,gr,Tr,Lr,-rr*ot-Tr*Bt,-gr*ot-Lr*Bt)},ft.prototype.applyToPoint=function(_){var X=_.x*this.sx+_.y*this.shx+this.tx,Le=_.x*this.shy+_.y*this.sy+this.ty;return new Ci(X,Le)},ft.prototype.applyToRectangle=function(_){var X=this.applyToPoint(_),Le=this.applyToPoint(new Ci(_.x+_.w,_.y+_.h));return new ga(X.x,X.y,Le.x-X.x,Le.y-X.y)},ft.prototype.clone=function(){var _=this.sx,X=this.shy,Le=this.shx,qe=this.sy,ot=this.tx,Bt=this.ty;return new ft(_,X,Le,qe,ot,Bt)},p.Matrix=ft;var jt=p.matrixMult=function(_,X){return X.multiply(_)},Lt=new ft(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Lt;var Et=function(_,X){if(!et[_]){var Le=(X instanceof Dl?"Sh":"P")+(Object.keys(Re).length+1).toString(10);X.id=Le,et[_]=Le,Re[Le]=X,pt.publish("addPattern",X)}};p.ShadingPattern=Dl,p.TilingPattern=oc,p.addShadingPattern=function(_,X){return D("addShadingPattern()"),Et(_,X),this},p.beginTilingPattern=function(_){D("beginTilingPattern()"),Ja(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},p.endTilingPattern=function(_,X){D("endTilingPattern()"),X.stream=de[E].join(`
`),Et(_,X),pt.publish("endTilingPattern",X),bt.pop().restore()};var $e=p.__private__.newObject=function(){var _=dt();return at(_,!0),_},dt=p.__private__.newObjectDeferred=function(){return M++,k[M]=function(){return K},M},at=function(_,X){return X=typeof X=="boolean"&&X,k[_]=K,X&&H(_+" 0 obj"),_},Vt=p.__private__.newAdditionalObject=function(){var _={objId:dt(),content:""};return R.push(_),_},Jt=dt(),Kt=dt(),Gt=p.__private__.decodeColorString=function(_){var X=_.split(" ");if(X.length!==2||X[1]!=="g"&&X[1]!=="G")X.length===5&&(X[4]==="k"||X[4]==="K")&&(X=[(1-X[0])*(1-X[3]),(1-X[1])*(1-X[3]),(1-X[2])*(1-X[3]),"r"]);else{var Le=parseFloat(X[0]);X=[Le,Le,Le,"r"]}for(var qe="#",ot=0;ot<3;ot++)qe+=("0"+Math.floor(255*parseFloat(X[ot])).toString(16)).slice(-2);return qe},er=p.__private__.encodeColorString=function(_){var X;typeof _=="string"&&(_={ch1:_});var Le=_.ch1,qe=_.ch2,ot=_.ch3,Bt=_.ch4,kt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Le=="string"&&Le.charAt(0)!=="#"){var rr=new fz(Le);if(rr.ok)Le=rr.toHex();else if(!/^\d*\.?\d*$/.test(Le))throw new Error('Invalid color "'+Le+'" passed to jsPDF.encodeColorString.')}if(typeof Le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Le)&&(Le="#"+Le[1]+Le[1]+Le[2]+Le[2]+Le[3]+Le[3]),typeof Le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Le)){var gr=parseInt(Le.substr(1),16);Le=gr>>16&255,qe=gr>>8&255,ot=255&gr}if(qe===void 0||Bt===void 0&&Le===qe&&qe===ot)if(typeof Le=="string")X=Le+" "+kt[0];else switch(_.precision){case 2:X=xe(Le/255)+" "+kt[0];break;case 3:default:X=L(Le/255)+" "+kt[0]}else if(Bt===void 0||Qn(Bt)==="object"){if(Bt&&!isNaN(Bt.a)&&Bt.a===0)return X=["1.","1.","1.",kt[1]].join(" ");if(typeof Le=="string")X=[Le,qe,ot,kt[1]].join(" ");else switch(_.precision){case 2:X=[xe(Le/255),xe(qe/255),xe(ot/255),kt[1]].join(" ");break;default:case 3:X=[L(Le/255),L(qe/255),L(ot/255),kt[1]].join(" ")}}else if(typeof Le=="string")X=[Le,qe,ot,Bt,kt[2]].join(" ");else switch(_.precision){case 2:X=[xe(Le),xe(qe),xe(ot),xe(Bt),kt[2]].join(" ");break;case 3:default:X=[L(Le),L(qe),L(ot),L(Bt),kt[2]].join(" ")}return X},Ct=p.__private__.getFilters=function(){return i},xt=p.__private__.putStream=function(_){var X=(_=_||{}).data||"",Le=_.filters||Ct(),qe=_.alreadyAppliedFilters||[],ot=_.addLength1||!1,Bt=X.length,kt=_.objectId,rr=function(Qo){return Qo};if(c!==null&&kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(rr=Hr.encryptor(kt,0));var gr={};Le===!0&&(Le=["FlateEncode"]);var Tr=_.additionalKeyValues||[],Lr=(gr=Sr.API.processDataByFilters!==void 0?Sr.API.processDataByFilters(X,Le):{data:X,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(gr.data.length!==0&&(Tr.push({key:"Length",value:gr.data.length}),ot===!0&&Tr.push({key:"Length1",value:Bt})),Lr.length!=0)if(Lr.split("/").length-1==1)Tr.push({key:"Filter",value:Lr});else{Tr.push({key:"Filter",value:"["+Lr+"]"});for(var qr=0;qr<Tr.length;qr+=1)if(Tr[qr].key==="DecodeParms"){for(var Ln=[],Rn=0;Rn<gr.reverseChain.split("/").length-1;Rn+=1)Ln.push("null");Ln.push(Tr[qr].value),Tr[qr].value="["+Ln.join(" ")+"]"}}H("<<");for(var to=0;to<Tr.length;to++)H("/"+Tr[to].key+" "+Tr[to].value);H(">>"),gr.data.length!==0&&(H("stream"),H(rr(gr.data)),H("endstream"))},Dt=p.__private__.putPage=function(_){var X=_.number,Le=_.data,qe=_.objId,ot=_.contentsObjId;at(qe,!0),H("<</Type /Page"),H("/Parent "+_.rootDictionaryObjId+" 0 R"),H("/Resources "+_.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(j(_.mediaBox.bottomLeftX))+" "+parseFloat(j(_.mediaBox.bottomLeftY))+" "+j(_.mediaBox.topRightX)+" "+j(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&H("/CropBox ["+j(_.cropBox.bottomLeftX)+" "+j(_.cropBox.bottomLeftY)+" "+j(_.cropBox.topRightX)+" "+j(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&H("/BleedBox ["+j(_.bleedBox.bottomLeftX)+" "+j(_.bleedBox.bottomLeftY)+" "+j(_.bleedBox.topRightX)+" "+j(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&H("/TrimBox ["+j(_.trimBox.bottomLeftX)+" "+j(_.trimBox.bottomLeftY)+" "+j(_.trimBox.topRightX)+" "+j(_.trimBox.topRightY)+"]"),_.artBox!==null&&H("/ArtBox ["+j(_.artBox.bottomLeftX)+" "+j(_.artBox.bottomLeftY)+" "+j(_.artBox.topRightX)+" "+j(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&H("/UserUnit "+_.userUnit),pt.publish("putPage",{objId:qe,pageContext:st[X],pageNumber:X,page:Le}),H("/Contents "+ot+" 0 R"),H(">>"),H("endobj");var Bt=Le.join(`
`);return I===S.ADVANCED&&(Bt+=`
Q`),at(ot,!0),xt({data:Bt,filters:Ct(),objectId:ot}),H("endobj"),qe},lr=p.__private__.putPages=function(){var _,X,Le=[];for(_=1;_<=nt;_++)st[_].objId=dt(),st[_].contentsObjId=dt();for(_=1;_<=nt;_++)Le.push(Dt({number:_,data:de[_],objId:st[_].objId,contentsObjId:st[_].contentsObjId,mediaBox:st[_].mediaBox,cropBox:st[_].cropBox,bleedBox:st[_].bleedBox,trimBox:st[_].trimBox,artBox:st[_].artBox,userUnit:st[_].userUnit,rootDictionaryObjId:Jt,resourceDictionaryObjId:Kt}));at(Jt,!0),H("<</Type /Pages");var qe="/Kids [";for(X=0;X<nt;X++)qe+=Le[X]+" 0 R ";H(qe+"]"),H("/Count "+nt),H(">>"),H("endobj"),pt.publish("postPutPages")},ur=function(_){pt.publish("putFont",{font:_,out:H,newObject:$e,putStream:xt}),_.isAlreadyPutted!==!0&&(_.objectNumber=$e(),H("<<"),H("/Type /Font"),H("/BaseFont /"+Yd(_.postScriptName)),H("/Subtype /Type1"),typeof _.encoding=="string"&&H("/Encoding /"+_.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},hr=function(){for(var _ in je)je.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&ur(je[_])},fr=function(_){_.objectNumber=$e();var X=[];X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Form"}),X.push({key:"BBox",value:"["+[j(_.x),j(_.y),j(_.x+_.width),j(_.y+_.height)].join(" ")+"]"}),X.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var Le=_.pages[1].join(`
`);xt({data:Le,additionalKeyValues:X,objectId:_.objectNumber}),H("endobj")},xr=function(){for(var _ in Pt)Pt.hasOwnProperty(_)&&fr(Pt[_])},un=function(_,X){var Le,qe=[],ot=1/(X-1);for(Le=0;Le<1;Le+=ot)qe.push(Le);if(qe.push(1),_[0].offset!=0){var Bt={offset:0,color:_[0].color};_.unshift(Bt)}if(_[_.length-1].offset!=1){var kt={offset:1,color:_[_.length-1].color};_.push(kt)}for(var rr="",gr=0,Tr=0;Tr<qe.length;Tr++){for(Le=qe[Tr];Le>_[gr+1].offset;)gr++;var Lr=_[gr].offset,qr=(Le-Lr)/(_[gr+1].offset-Lr),Ln=_[gr].color,Rn=_[gr+1].color;rr+=Q(Math.round((1-qr)*Ln[0]+qr*Rn[0]).toString(16))+Q(Math.round((1-qr)*Ln[1]+qr*Rn[1]).toString(16))+Q(Math.round((1-qr)*Ln[2]+qr*Rn[2]).toString(16))}return rr.trim()},wn=function(_,X){X||(X=21);var Le=$e(),qe=un(_.colors,X),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+X+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt({data:qe,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Le}),H("endobj"),_.objectNumber=$e(),H("<< /ShadingType "+_.type),H("/ColorSpace /DeviceRGB");var Bt="/Coords ["+j(parseFloat(_.coords[0]))+" "+j(parseFloat(_.coords[1]))+" ";_.type===2?Bt+=j(parseFloat(_.coords[2]))+" "+j(parseFloat(_.coords[3])):Bt+=j(parseFloat(_.coords[2]))+" "+j(parseFloat(_.coords[3]))+" "+j(parseFloat(_.coords[4]))+" "+j(parseFloat(_.coords[5])),H(Bt+="]"),_.matrix&&H("/Matrix ["+_.matrix.toString()+"]"),H("/Function "+Le+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},Dr=function(_,X){var Le=dt(),qe=$e();X.push({resourcesOid:Le,objectOid:qe}),_.objectNumber=qe;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+_.boundingBox.map(j).join(" ")+"]"}),ot.push({key:"XStep",value:j(_.xStep)}),ot.push({key:"YStep",value:j(_.yStep)}),ot.push({key:"Resources",value:Le+" 0 R"}),_.matrix&&ot.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),xt({data:_.stream,additionalKeyValues:ot,objectId:_.objectNumber}),H("endobj")},Cr=function(_){var X;for(X in Re)Re.hasOwnProperty(X)&&(Re[X]instanceof Dl?wn(Re[X]):Re[X]instanceof oc&&Dr(Re[X],_))},Vr=function(_){for(var X in _.objectNumber=$e(),H("<<"),_)switch(X){case"opacity":H("/ca "+xe(_[X]));break;case"stroke-opacity":H("/CA "+xe(_[X]))}H(">>"),H("endobj")},jr=function(){var _;for(_ in Je)Je.hasOwnProperty(_)&&Vr(Je[_])},Ir=function(){for(var _ in H("/XObject <<"),Pt)Pt.hasOwnProperty(_)&&Pt[_].objectNumber>=0&&H("/"+_+" "+Pt[_].objectNumber+" 0 R");pt.publish("putXobjectDict"),H(">>")},Br=function(){Hr.oid=$e(),H("<<"),H("/Filter /Standard"),H("/V "+Hr.v),H("/R "+Hr.r),H("/U <"+Hr.toHexString(Hr.U)+">"),H("/O <"+Hr.toHexString(Hr.O)+">"),H("/P "+Hr.P),H(">>"),H("endobj")},Gr=function(){for(var _ in H("/Font <<"),je)je.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&H("/"+_+" "+je[_].objectNumber+" 0 R");H(">>")},Xr=function(){if(Object.keys(Re).length>0){for(var _ in H("/Shading <<"),Re)Re.hasOwnProperty(_)&&Re[_]instanceof Dl&&Re[_].objectNumber>=0&&H("/"+_+" "+Re[_].objectNumber+" 0 R");pt.publish("putShadingPatternDict"),H(">>")}},bn=function(_){if(Object.keys(Re).length>0){for(var X in H("/Pattern <<"),Re)Re.hasOwnProperty(X)&&Re[X]instanceof p.TilingPattern&&Re[X].objectNumber>=0&&Re[X].objectNumber<_&&H("/"+X+" "+Re[X].objectNumber+" 0 R");pt.publish("putTilingPatternDict"),H(">>")}},Wr=function(){if(Object.keys(Je).length>0){var _;for(_ in H("/ExtGState <<"),Je)Je.hasOwnProperty(_)&&Je[_].objectNumber>=0&&H("/"+_+" "+Je[_].objectNumber+" 0 R");pt.publish("putGStateDict"),H(">>")}},mr=function(_){at(_.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Gr(),Xr(),bn(_.objectOid),Wr(),Ir(),H(">>"),H("endobj")},Tn=function(){var _=[];hr(),jr(),xr(),Cr(_),pt.publish("putResources"),_.forEach(mr),mr({resourcesOid:Kt,objectOid:Number.MAX_SAFE_INTEGER}),pt.publish("postPutResources")},Oo=function(){pt.publish("putAdditionalObjects");for(var _=0;_<R.length;_++){var X=R[_];at(X.objId,!0),H(X.content),H("endobj")}pt.publish("postPutAdditionalObjects")},ho=function(_){ke[_.fontName]=ke[_.fontName]||{},ke[_.fontName][_.fontStyle]=_.id},Io=function(_,X,Le,qe,ot){var Bt={id:"F"+(Object.keys(je).length+1).toString(10),postScriptName:_,fontName:X,fontStyle:Le,encoding:qe,isStandardFont:ot||!1,metadata:{}};return pt.publish("addFont",{font:Bt,instance:this}),je[Bt.id]=Bt,ho(Bt),Bt.id},gs=function(_){for(var X=0,Le=he.length;X<Le;X++){var qe=Io.call(this,_[X][0],_[X][1],_[X][2],he[X][3],!0);u===!1&&(h[qe]=!0);var ot=_[X][0].split("-");ho({id:qe,fontName:ot[0],fontStyle:ot[1]||""})}pt.publish("addFonts",{fonts:je,dictionary:ke})},eo=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(qe){var X=qe.stack||"";~X.indexOf(" at ")&&(X=X.split(" at ")[1]);var Le="Error in function "+X.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Qr.console)throw new Error(Le);Qr.console.error(Le,qe),Qr.alert&&alert(Le)}},_.foo.bar=_,_.foo},$o=function(_,X){var Le,qe,ot,Bt,kt,rr,gr,Tr,Lr;if(ot=(X=X||{}).sourceEncoding||"Unicode",kt=X.outputEncoding,(X.autoencode||kt)&&je[Se].metadata&&je[Se].metadata[ot]&&je[Se].metadata[ot].encoding&&(Bt=je[Se].metadata[ot].encoding,!kt&&je[Se].encoding&&(kt=je[Se].encoding),!kt&&Bt.codePages&&(kt=Bt.codePages[0]),typeof kt=="string"&&(kt=Bt[kt]),kt)){for(gr=!1,rr=[],Le=0,qe=_.length;Le<qe;Le++)(Tr=kt[_.charCodeAt(Le)])?rr.push(String.fromCharCode(Tr)):rr.push(_[Le]),rr[Le].charCodeAt(0)>>8&&(gr=!0);_=rr.join("")}for(Le=_.length;gr===void 0&&Le!==0;)_.charCodeAt(Le-1)>>8&&(gr=!0),Le--;if(!gr)return _;for(rr=X.noBOM?[]:[254,255],Le=0,qe=_.length;Le<qe;Le++){if((Lr=(Tr=_.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rr.push(Lr),rr.push(Tr-(Lr<<8))}return String.fromCharCode.apply(void 0,rr)},Mn=p.__private__.pdfEscape=p.pdfEscape=function(_,X){return $o(_,X).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ve=p.__private__.beginPage=function(_){de[++nt]=[],st[nt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},qt(nt),W(de[E])},mt=function(_,X){var Le,qe,ot;switch(t=X||t,typeof _=="string"&&(Le=x(_.toLowerCase()),Array.isArray(Le)&&(qe=Le[0],ot=Le[1])),Array.isArray(_)&&(qe=_[0]*$,ot=_[1]*$),isNaN(qe)&&(qe=o[0],ot=o[1]),(qe>14400||ot>14400)&&(Dn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),ot=Math.min(14400,ot)),o=[qe,ot],t.substr(0,1)){case"l":ot>qe&&(o=[ot,qe]);break;case"p":qe>ot&&(o=[ot,qe])}Ve(o),Zr(Vo),H(vs),Xa!==0&&H(Xa+" J"),Ya!==0&&H(Ya+" j"),pt.publish("addPage",{pageNumber:nt})},Rt=function(_){_>0&&_<=nt&&(de.splice(_,1),st.splice(_,1),nt--,E>nt&&(E=nt),this.setPage(E))},qt=function(_){_>0&&_<=nt&&(E=_)},Ht=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return de.length-1},Xt=function(_,X,Le){var qe,ot=void 0;return Le=Le||{},_=_!==void 0?_:je[Se].fontName,X=X!==void 0?X:je[Se].fontStyle,qe=_.toLowerCase(),ke[qe]!==void 0&&ke[qe][X]!==void 0?ot=ke[qe][X]:ke[_]!==void 0&&ke[_][X]!==void 0?ot=ke[_][X]:Le.disableWarning===!1&&Dn.warn("Unable to look up font label for font '"+_+"', '"+X+"'. Refer to getFontList() for available fonts."),ot||Le.noFallback||(ot=ke.times[X])==null&&(ot=ke.times.normal),ot},Wt=p.__private__.putInfo=function(){var _=$e(),X=function(qe){return qe};for(var Le in c!==null&&(X=Hr.encryptor(_,0)),H("<<"),H("/Producer ("+Mn(X("jsPDF "+Sr.version))+")"),J)J.hasOwnProperty(Le)&&J[Le]&&H("/"+Le.substr(0,1).toUpperCase()+Le.substr(1)+" ("+Mn(X(J[Le]))+")");H("/CreationDate ("+Mn(X(ve))+")"),H(">>"),H("endobj")},wr=p.__private__.putCatalog=function(_){var X=(_=_||{}).rootDictionaryObjId||Jt;switch($e(),H("<<"),H("/Type /Catalog"),H("/Pages "+X+" 0 R"),ye||(ye="fullwidth"),ye){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Le=""+ye;Le.substr(Le.length-1)==="%"&&(ye=parseInt(ye)/100),typeof ye=="number"&&H("/OpenAction [3 0 R /XYZ null null "+xe(ye)+"]")}switch(Me||(Me="continuous"),Me){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}Te&&H("/PageMode /"+Te),pt.publish("putCatalog"),H(">>"),H("endobj")},br=p.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(M+1)),H("/Root "+M+" 0 R"),H("/Info "+(M-1)+" 0 R"),c!==null&&H("/Encrypt "+Hr.oid+" 0 R"),H("/ID [ <"+ie+"> <"+ie+"> ]"),H(">>")},vn=p.__private__.putHeader=function(){H("%PDF-"+v),H("%")},Nt=p.__private__.putXRef=function(){var _="0000000000";H("xref"),H("0 "+(M+1)),H("0000000000 65535 f ");for(var X=1;X<=M;X++)typeof k[X]=="function"?H((_+k[X]()).slice(-10)+" 00000 n "):k[X]!==void 0?H((_+k[X]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},yr=p.__private__.buildDocument=function(){He(),W(O),pt.publish("buildDocument"),vn(),lr(),Oo(),Tn(),c!==null&&Br(),Wt(),wr();var _=K;return Nt(),br(),H("startxref"),H(""+_),H("%%EOF"),W(de[E]),O.join(`
`)},$r=p.__private__.getBlob=function(_){return new Blob([Ae(_)],{type:"application/pdf"})},kn=p.output=p.__private__.output=eo(function(_,X){switch(typeof(X=X||{})=="string"?X={filename:X}:X.filename=X.filename||"generated.pdf",_){case void 0:return yr();case"save":p.save(X.filename);break;case"arraybuffer":return Ae(yr());case"blob":return $r(yr());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL($r(yr()))||void 0;Dn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Le="",qe=yr();try{Le=Em(qe)}catch{Le=Em(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+X.filename+";base64,"+Le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';X.pdfObjectUrl&&(ot=X.pdfObjectUrl,Bt="");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+Bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(X)+");<\/script></body></html>",rr=Qr.open();return rr!==null&&rr.document.write(kt),rr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(X.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+X.filename+'" width="500px" height="400px" /></body></html>',Tr=Qr.open();if(Tr!==null){Tr.document.write(gr);var Lr=this;Tr.document.documentElement.querySelector("#pdfViewer").onload=function(){Tr.document.title=X.filename,Tr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Lr.output("bloburl"))}}return Tr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",X)+'"></iframe></body></html>',Ln=Qr.open();if(Ln!==null&&(Ln.document.write(qr),Ln.document.title=X.filename),Ln||typeof safari>"u")return Ln;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",X);default:return null}}),Do=function(_){return Array.isArray(It)===!0&&It.indexOf(_)>-1};switch(r){case"pt":$=1;break;case"mm":$=72/25.4;break;case"cm":$=72/2.54;break;case"in":$=72;break;case"px":$=Do("px_scaling")==1?.75:96/72;break;case"pc":case"em":$=12;break;case"ex":$=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$=r}var Hr=null;_e(),re();var Hn=function(_){return c!==null?Hr.encryptor(_,0):function(X){return X}},so=p.__private__.getPageInfo=p.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:st[_].objId,pageNumber:_,pageContext:st[_]}},Mt=p.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var X in st)if(st[X].objId===_)break;return so(X)},Rs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:st[E].objId,pageNumber:E,pageContext:st[E]}};p.addPage=function(){return mt.apply(this,arguments),this},p.setPage=function(){return qt.apply(this,arguments),W.call(this,de[E]),this},p.insertPage=function(_){return this.addPage(),this.movePage(E,_),this},p.movePage=function(_,X){var Le,qe;if(_>X){Le=de[_],qe=st[_];for(var ot=_;ot>X;ot--)de[ot]=de[ot-1],st[ot]=st[ot-1];de[X]=Le,st[X]=qe,this.setPage(X)}else if(_<X){Le=de[_],qe=st[_];for(var Bt=_;Bt<X;Bt++)de[Bt]=de[Bt+1],st[Bt]=st[Bt+1];de[X]=Le,st[X]=qe,this.setPage(X)}return this},p.deletePage=function(){return Rt.apply(this,arguments),this},p.__private__.text=p.text=function(_,X,Le,qe,ot){var Bt,kt,rr,gr,Tr,Lr,qr,Ln,Rn,to=(qe=qe||{}).scope||this;if(typeof _=="number"&&typeof X=="number"&&(typeof Le=="string"||Array.isArray(Le))){var Qo=Le;Le=X,X=_,_=Qo}if(arguments[3]instanceof ft?(D("The transform parameter of text() with a Matrix value"),Rn=ot):(rr=arguments[4],gr=arguments[5],Qn(qr=arguments[3])==="object"&&qr!==null||(typeof rr=="string"&&(gr=rr,rr=null),typeof qr=="string"&&(gr=qr,qr=null),typeof qr=="number"&&(rr=qr,qr=null),qe={flags:qr,angle:rr,align:gr})),isNaN(X)||isNaN(Le)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return to;var io="",Go=!1,os=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:jn,ms=to.internal.scaleFactor;function ya(Kn){return Kn=Kn.split("	").join(Array(qe.TabLen||9).join(" ")),Mn(Kn,qr)}function _a(Kn){for(var $n,bo=Kn.concat(),Ho=[],nA=bo.length;nA--;)typeof($n=bo.shift())=="string"?Ho.push($n):Array.isArray(Kn)&&($n.length===1||$n[1]===void 0&&$n[2]===void 0)?Ho.push($n[0]):Ho.push([$n[0],$n[1],$n[2]]);return Ho}function Za(Kn,$n){var bo;if(typeof Kn=="string")bo=$n(Kn)[0];else if(Array.isArray(Kn)){for(var Ho,nA,$c=Kn.concat(),bd=[],yh=$c.length;yh--;)typeof(Ho=$c.shift())=="string"?bd.push($n(Ho)[0]):Array.isArray(Ho)&&typeof Ho[0]=="string"&&(nA=$n(Ho[0],Ho[1],Ho[2]),bd.push([nA[0],nA[1],nA[2]]));bo=bd}return bo}var En=!1,ao=!0;if(typeof _=="string")En=!0;else if(Array.isArray(_)){var Wo=_.concat();kt=[];for(var ss,mo=Wo.length;mo--;)(typeof(ss=Wo.shift())!="string"||Array.isArray(ss)&&typeof ss[0]!="string")&&(ao=!1);En=ao}if(En===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var kr=we/to.internal.scaleFactor,ln=kr*(os-1);switch(qe.baseline){case"bottom":Le-=ln;break;case"top":Le+=kr-ln;break;case"hanging":Le+=kr-2*ln;break;case"middle":Le+=kr/2-ln}if((Lr=qe.maxWidth||0)>0&&(typeof _=="string"?_=to.splitTextToSize(_,Lr):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Kn,$n){return Kn.concat(to.splitTextToSize($n,Lr))},[]))),Bt={text:_,x:X,y:Le,options:qe,mutex:{pdfEscape:Mn,activeFontKey:Se,fonts:je,activeFontSize:we}},pt.publish("preProcessText",Bt),_=Bt.text,rr=(qe=Bt.options).angle,!(Rn instanceof ft)&&rr&&typeof rr=="number"){rr*=Math.PI/180,qe.rotationDirection===0&&(rr=-rr),I===S.ADVANCED&&(rr=-rr);var yn=Math.cos(rr),No=Math.sin(rr);Rn=new ft(yn,No,-No,yn,0,0)}else rr&&rr instanceof ft&&(Rn=rr);I!==S.ADVANCED||Rn||(Rn=Lt),(Tr=qe.charSpace||Ri)!==void 0&&(io+=j(q(Tr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ln=qe.horizontalScale)!==void 0&&(io+=j(100*Ln)+` Tz
`),qe.lang;var qn=-1,Mo=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,Ao=to.internal.getCurrentPageInfo().pageContext;switch(Mo){case 0:case!1:case"fill":qn=0;break;case 1:case!0:case"stroke":qn=1;break;case 2:case"fillThenStroke":qn=2;break;case 3:case"invisible":qn=3;break;case 4:case"fillAndAddForClipping":qn=4;break;case 5:case"strokeAndAddPathForClipping":qn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qn=6;break;case 7:case"addToPathForClipping":qn=7}var ci=Ao.usedRenderingMode!==void 0?Ao.usedRenderingMode:-1;qn!==-1?io+=qn+` Tr
`:ci!==-1&&(io+=`0 Tr
`),qn!==-1&&(Ao.usedRenderingMode=qn),gr=qe.align||"left";var Xo,eA=we*os,xl=to.internal.pageSize.getWidth(),gd=je[Se];Tr=qe.charSpace||Ri,Lr=qe.maxWidth||0,qr=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var xa=[],tA=function(Kn){return to.getStringUnitWidth(Kn,{font:gd,charSpace:Tr,fontSize:we,doKerning:!1})*we/ms};if(Object.prototype.toString.call(_)==="[object Array]"){var is;kt=_a(_),gr!=="left"&&(Xo=kt.map(tA));var as,Is=0;if(gr==="right"){X-=Xo[0],_=[],mo=kt.length;for(var As=0;As<mo;As++)As===0?(as=Ks(X),is=$s(Le)):(as=q(Is-Xo[As]),is=-eA),_.push([kt[As],as,is]),Is=Xo[As]}else if(gr==="center"){X-=Xo[0]/2,_=[],mo=kt.length;for(var ui=0;ui<mo;ui++)ui===0?(as=Ks(X),is=$s(Le)):(as=q((Is-Xo[ui])/2),is=-eA),_.push([kt[ui],as,is]),Is=Xo[ui]}else if(gr==="left"){_=[],mo=kt.length;for(var vd=0;vd<mo;vd++)_.push(kt[vd])}else if(gr==="justify"&&gd.encoding==="Identity-H"){_=[],mo=kt.length,Lr=Lr!==0?Lr:xl;for(var rA=0,wo=0;wo<mo;wo++)if(is=wo===0?$s(Le):-eA,as=wo===0?Ks(X):rA,wo<mo-1){var Rc=q((Lr-Xo[wo])/(kt[wo].split(" ").length-1)),Us=kt[wo].split(" ");_.push([Us[0]+" ",as,is]),rA=0;for(var Ei=1;Ei<Us.length;Ei++){var md=(tA(Us[Ei-1]+" "+Us[Ei])-tA(Us[Ei]))*ms+Rc;Ei==Us.length-1?_.push([Us[Ei],md,0]):_.push([Us[Ei]+" ",md,0]),rA-=md}}else _.push([kt[wo],as,is]);_.push(["",rA,0])}else{if(gr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],mo=kt.length,Lr=Lr!==0?Lr:xl,wo=0;wo<mo;wo++)is=wo===0?$s(Le):-eA,as=wo===0?Ks(X):0,wo<mo-1?xa.push(j(q((Lr-Xo[wo])/(kt[wo].split(" ").length-1)))):xa.push(0),_.push([kt[wo],as,is])}}var bh=typeof qe.R2L=="boolean"?qe.R2L:le;bh===!0&&(_=Za(_,function(Kn,$n,bo){return[Kn.split("").reverse().join(""),$n,bo]})),Bt={text:_,x:X,y:Le,options:qe,mutex:{pdfEscape:Mn,activeFontKey:Se,fonts:je,activeFontSize:we}},pt.publish("postProcessText",Bt),_=Bt.text,Go=Bt.mutex.isHex||!1;var qc=je[Se].encoding;qc!=="WinAnsiEncoding"&&qc!=="StandardEncoding"||(_=Za(_,function(Kn,$n,bo){return[ya(Kn),$n,bo]})),kt=_a(_),_=[];for(var Bl,zl,PA,Cl=0,wd=1,Sl=Array.isArray(kt[0])?wd:Cl,kA="",Kc=function(Kn,$n,bo){var Ho="";return bo instanceof ft?(bo=typeof qe.angle=="number"?jt(bo,new ft(1,0,0,1,Kn,$n)):jt(new ft(1,0,0,1,Kn,$n),bo),I===S.ADVANCED&&(bo=jt(new ft(1,0,0,-1,0,0),bo)),Ho=bo.join(" ")+` Tm
`):Ho=j(Kn)+" "+j($n)+` Td
`,Ho},Fi=0;Fi<kt.length;Fi++){switch(kA="",Sl){case wd:PA=(Go?"<":"(")+kt[Fi][0]+(Go?">":")"),Bl=parseFloat(kt[Fi][1]),zl=parseFloat(kt[Fi][2]);break;case Cl:PA=(Go?"<":"(")+kt[Fi]+(Go?">":")"),Bl=Ks(X),zl=$s(Le)}xa!==void 0&&xa[Fi]!==void 0&&(kA=xa[Fi]+` Tw
`),Fi===0?_.push(kA+Kc(Bl,zl,Rn)+PA):Sl===Cl?_.push(kA+PA):Sl===wd&&_.push(kA+Kc(Bl,zl,Rn)+PA)}_=Sl===Cl?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Ii=`BT
/`;return Ii+=Se+" "+we+` Tf
`,Ii+=j(we*os)+` TL
`,Ii+=di+`
`,Ii+=io,Ii+=_,H(Ii+="ET"),h[Se]=!0,to};var Wn=p.__private__.clip=p.clip=function(_){return H(_==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Wn("evenodd")},p.__private__.discardPath=p.discardPath=function(){return H("n"),this};var Yr=p.__private__.isValidStyle=function(_){var X=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(X=!0),X};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(_){return Yr(_)&&(d=_),this};var $t=p.__private__.getStyle=p.getStyle=function(_){var X=d;switch(_){case"D":case"S":X="S";break;case"F":X="f";break;case"FD":case"DF":X="B";break;case"f":case"f*":case"B":case"B*":X=_}return X},Jr=p.close=function(){return H("h"),this};p.stroke=function(){return H("S"),this},p.fill=function(_){return Sn("f",_),this},p.fillEvenOdd=function(_){return Sn("f*",_),this},p.fillStroke=function(_){return Sn("B",_),this},p.fillStrokeEvenOdd=function(_){return Sn("B*",_),this};var Sn=function(_,X){Qn(X)==="object"?ai(X,_):H(_)},fo=function(_){_===null||I===S.ADVANCED&&_===void 0||(_=$t(_),H(_))};function Uo(_,X,Le,qe,ot){var Bt=new oc(X||this.boundingBox,Le||this.xStep,qe||this.yStep,this.gState,ot||this.matrix);Bt.stream=this.stream;var kt=_+"$$"+this.cloneIndex+++"$$";return Et(kt,Bt),Bt}var ai=function(_,X){var Le=et[_.key],qe=Re[Le];if(qe instanceof Dl)H("q"),H(Bi(X)),qe.gState&&p.setGState(qe.gState),H(_.matrix.toString()+" cm"),H("/"+Le+" sh"),H("Q");else if(qe instanceof oc){var ot=new ft(1,0,0,-1,0,Si());_.matrix&&(ot=ot.multiply(_.matrix||Lt),Le=Uo.call(qe,_.key,_.boundingBox,_.xStep,_.yStep,ot).id),H("q"),H("/Pattern cs"),H("/"+Le+" scn"),qe.gState&&p.setGState(qe.gState),H(X),H("Q")}},Bi=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},zi=p.moveTo=function(_,X){return H(j(q(_))+" "+j(se(X))+" m"),this},Ai=p.lineTo=function(_,X){return H(j(q(_))+" "+j(se(X))+" l"),this},qs=p.curveTo=function(_,X,Le,qe,ot,Bt){return H([j(q(_)),j(se(X)),j(q(Le)),j(se(qe)),j(q(ot)),j(se(Bt)),"c"].join(" ")),this};p.__private__.line=p.line=function(_,X,Le,qe,ot){if(isNaN(_)||isNaN(X)||isNaN(Le)||isNaN(qe)||!Yr(ot))throw new Error("Invalid arguments passed to jsPDF.line");return I===S.COMPAT?this.lines([[Le-_,qe-X]],_,X,[1,1],ot||"S"):this.lines([[Le-_,qe-X]],_,X,[1,1]).stroke()},p.__private__.lines=p.lines=function(_,X,Le,qe,ot,Bt){var kt,rr,gr,Tr,Lr,qr,Ln,Rn,to,Qo,io,Go;if(typeof _=="number"&&(Go=Le,Le=X,X=_,_=Go),qe=qe||[1,1],Bt=Bt||!1,isNaN(X)||isNaN(Le)||!Array.isArray(_)||!Array.isArray(qe)||!Yr(ot)||typeof Bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zi(X,Le),kt=qe[0],rr=qe[1],Tr=_.length,Qo=X,io=Le,gr=0;gr<Tr;gr++)(Lr=_[gr]).length===2?(Qo=Lr[0]*kt+Qo,io=Lr[1]*rr+io,Ai(Qo,io)):(qr=Lr[0]*kt+Qo,Ln=Lr[1]*rr+io,Rn=Lr[2]*kt+Qo,to=Lr[3]*rr+io,Qo=Lr[4]*kt+Qo,io=Lr[5]*rr+io,qs(qr,Ln,Rn,to,Qo,io));return Bt&&Jr(),fo(ot),this},p.path=function(_){for(var X=0;X<_.length;X++){var Le=_[X],qe=Le.c;switch(Le.op){case"m":zi(qe[0],qe[1]);break;case"l":Ai(qe[0],qe[1]);break;case"c":qs.apply(this,qe);break;case"h":Jr()}}return this},p.__private__.rect=p.rect=function(_,X,Le,qe,ot){if(isNaN(_)||isNaN(X)||isNaN(Le)||isNaN(qe)||!Yr(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return I===S.COMPAT&&(qe=-qe),H([j(q(_)),j(se(X)),j(q(Le)),j(q(qe)),"re"].join(" ")),fo(ot),this},p.__private__.triangle=p.triangle=function(_,X,Le,qe,ot,Bt,kt){if(isNaN(_)||isNaN(X)||isNaN(Le)||isNaN(qe)||isNaN(ot)||isNaN(Bt)||!Yr(kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Le-_,qe-X],[ot-Le,Bt-qe],[_-ot,X-Bt]],_,X,[1,1],kt,!0),this},p.__private__.roundedRect=p.roundedRect=function(_,X,Le,qe,ot,Bt,kt){if(isNaN(_)||isNaN(X)||isNaN(Le)||isNaN(qe)||isNaN(ot)||isNaN(Bt)||!Yr(kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rr=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*Le),Bt=Math.min(Bt,.5*qe),this.lines([[Le-2*ot,0],[ot*rr,0,ot,Bt-Bt*rr,ot,Bt],[0,qe-2*Bt],[0,Bt*rr,-ot*rr,Bt,-ot,Bt],[2*ot-Le,0],[-ot*rr,0,-ot,-Bt*rr,-ot,-Bt],[0,2*Bt-qe],[0,-Bt*rr,ot*rr,-Bt,ot,-Bt]],_+ot,X,[1,1],kt,!0),this},p.__private__.ellipse=p.ellipse=function(_,X,Le,qe,ot){if(isNaN(_)||isNaN(X)||isNaN(Le)||isNaN(qe)||!Yr(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Bt=4/3*(Math.SQRT2-1)*Le,kt=4/3*(Math.SQRT2-1)*qe;return zi(_+Le,X),qs(_+Le,X-kt,_+Bt,X-qe,_,X-qe),qs(_-Bt,X-qe,_-Le,X-kt,_-Le,X),qs(_-Le,X+kt,_-Bt,X+qe,_,X+qe),qs(_+Bt,X+qe,_+Le,X+kt,_+Le,X),fo(ot),this},p.__private__.circle=p.circle=function(_,X,Le,qe){if(isNaN(_)||isNaN(X)||isNaN(Le)||!Yr(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,X,Le,Le,qe)},p.setFont=function(_,X,Le){return Le&&(X=ee(X,Le)),Se=Xt(_,X,{disableWarning:!1}),this};var ji=p.__private__.getFont=p.getFont=function(){return je[Xt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var _,X,Le={};for(_ in ke)if(ke.hasOwnProperty(_))for(X in Le[_]=[],ke[_])ke[_].hasOwnProperty(X)&&Le[_].push(X);return Le},p.addFont=function(_,X,Le,qe,ot){var Bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Bt.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&Bt.indexOf(arguments[3])==-1&&(Le=ee(Le,qe)),ot=ot||"Identity-H",Io.call(this,_,X,Le,ot)};var jn,Vo=n.lineWidth||.200025,Xn=p.__private__.getLineWidth=p.getLineWidth=function(){return Vo},Zr=p.__private__.setLineWidth=p.setLineWidth=function(_){return Vo=_,H(j(q(_))+" w"),this};p.__private__.setLineDash=Sr.API.setLineDash=Sr.API.setLineDashPattern=function(_,X){if(_=_||[],X=X||0,isNaN(X)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(Le){return j(q(Le))}).join(" "),X=j(q(X)),H("["+_+"] "+X+" d"),this};var fa=p.__private__.getLineHeight=p.getLineHeight=function(){return we*jn};p.__private__.getLineHeight=p.getLineHeight=function(){return we*jn};var Ga=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(jn=_),this},pa=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return jn};Ga(n.lineHeight);var Ks=p.__private__.getHorizontalCoordinate=function(_){return q(_)},$s=p.__private__.getVerticalCoordinate=function(_){return I===S.ADVANCED?_:st[E].mediaBox.topRightY-st[E].mediaBox.bottomLeftY-q(_)},IA=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(_){return j(Ks(_))},li=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(_){return j($s(_))},vs=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Gt(vs)},p.__private__.setStrokeColor=p.setDrawColor=function(_,X,Le,qe){return vs=er({ch1:_,ch2:X,ch3:Le,ch4:qe,pdfColorType:"draw",precision:2}),H(vs),this};var Wa=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Gt(Wa)},p.__private__.setFillColor=p.setFillColor=function(_,X,Le,qe){return Wa=er({ch1:_,ch2:X,ch3:Le,ch4:qe,pdfColorType:"fill",precision:2}),H(Wa),this};var di=n.textColor||"0 g",UA=p.__private__.getTextColor=p.getTextColor=function(){return Gt(di)};p.__private__.setTextColor=p.setTextColor=function(_,X,Le,qe){return di=er({ch1:_,ch2:X,ch3:Le,ch4:qe,pdfColorType:"text",precision:3}),this};var Ri=n.charSpace,QA=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ri||0)};p.__private__.setCharSpace=p.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ri=_,this};var Xa=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(_){var X=p.CapJoinStyles[_];if(X===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xa=X,H(X+" J"),this};var Ya=0;p.__private__.setLineJoin=p.setLineJoin=function(_){var X=p.CapJoinStyles[_];if(X===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ya=X,H(X+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(j(q(_))+" M"),this},p.GState=Wp,p.setGState=function(_){(_=typeof _=="string"?Je[rt[_]]:TA(null,_)).equals(Ke)||(H("/"+_.id+" gs"),Ke=_)};var TA=function(_,X){if(!_||!rt[_]){var Le=!1;for(var qe in Je)if(Je.hasOwnProperty(qe)&&Je[qe].equals(X)){Le=!0;break}if(Le)X=Je[qe];else{var ot="GS"+(Object.keys(Je).length+1).toString(10);Je[ot]=X,X.id=ot}return _&&(rt[_]=X.id),pt.publish("addGState",X),X}};p.addGState=function(_,X){return TA(_,X),this},p.saveGraphicsState=function(){return H("q"),pe.push({key:Se,size:we,color:di}),this},p.restoreGraphicsState=function(){H("Q");var _=pe.pop();return Se=_.key,we=_.size,di=_.color,Ke=null,this},p.setCurrentTransformationMatrix=function(_){return H(_.toString()+" cm"),this},p.comment=function(_){return H("#"+_),this};var Ci=function(_,X){var Le=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Le},set:function(Bt){isNaN(Bt)||(Le=parseFloat(Bt))}});var qe=X||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(Bt){isNaN(Bt)||(qe=parseFloat(Bt))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(Bt){ot=Bt.toString()}}),this},ga=function(_,X,Le,qe){Ci.call(this,_,X),this.type="rect";var ot=Le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(kt){isNaN(kt)||(ot=parseFloat(kt))}});var Bt=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Bt},set:function(kt){isNaN(kt)||(Bt=parseFloat(kt))}}),this},va=function(){this.page=nt,this.currentPage=E,this.pages=de.slice(0),this.pagesContext=st.slice(0),this.x=Ce,this.y=Ee,this.matrix=Oe,this.width=qi(E),this.height=Si(E),this.outputDestination=Pe,this.id="",this.objectNumber=-1};va.prototype.restore=function(){nt=this.page,E=this.currentPage,st=this.pagesContext,de=this.pages,Ce=this.x,Ee=this.y,Oe=this.matrix,wa(E,this.width),ba(E,this.height),Pe=this.outputDestination};var Ja=function(_,X,Le,qe,ot){bt.push(new va),nt=E=0,de=[],Ce=_,Ee=X,Oe=ot,Ve([Le,qe])},LA=function(_){if(St[_])bt.pop().restore();else{var X=new va,Le="Xo"+(Object.keys(Pt).length+1).toString(10);X.id=Le,St[_]=Le,Pt[Le]=X,pt.publish("addFormObject",X),bt.pop().restore()}};for(var ma in p.beginFormObject=function(_,X,Le,qe,ot){return Ja(_,X,Le,qe,ot),this},p.endFormObject=function(_){return LA(_),this},p.doFormObject=function(_,X){var Le=Pt[St[_]];return H("q"),H(X.toString()+" cm"),H("/"+Le.id+" Do"),H("Q"),this},p.getFormObject=function(_){var X=Pt[St[_]];return{x:X.x,y:X.y,width:X.width,height:X.height,matrix:X.matrix}},p.save=function(_,X){return _=_||"generated.pdf",(X=X||{}).returnPromise=X.returnPromise||!1,X.returnPromise===!1?(Ql($r(yr()),_),typeof Ql.unload=="function"&&Qr.setTimeout&&setTimeout(Ql.unload,911),this):new Promise(function(Le,qe){try{var ot=Ql($r(yr()),_);typeof Ql.unload=="function"&&Qr.setTimeout&&setTimeout(Ql.unload,911),Le(ot)}catch(Bt){qe(Bt.message)}})},Sr.API)Sr.API.hasOwnProperty(ma)&&(ma==="events"&&Sr.API.events.length?function(_,X){var Le,qe,ot;for(ot=X.length-1;ot!==-1;ot--)Le=X[ot][0],qe=X[ot][1],_.subscribe.apply(_,[Le].concat(typeof qe=="function"?[qe]:qe))}(pt,Sr.API.events):p[ma]=Sr.API[ma]);var qi=p.getPageWidth=function(_){return(st[_=_||E].mediaBox.topRightX-st[_].mediaBox.bottomLeftX)/$},wa=p.setPageWidth=function(_,X){st[_].mediaBox.topRightX=X*$+st[_].mediaBox.bottomLeftX},Si=p.getPageHeight=function(_){return(st[_=_||E].mediaBox.topRightY-st[_].mediaBox.bottomLeftY)/$},ba=p.setPageHeight=function(_,X){st[_].mediaBox.topRightY=X*$+st[_].mediaBox.bottomLeftY};return p.internal={pdfEscape:Mn,getStyle:$t,getFont:ji,getFontSize:Ie,getCharSpace:QA,getTextColor:UA,getLineHeight:fa,getLineHeightFactor:pa,getLineWidth:Xn,write:te,getHorizontalCoordinate:Ks,getVerticalCoordinate:$s,getCoordinateString:IA,getVerticalCoordinateString:li,collections:{},newObject:$e,newAdditionalObject:Vt,newObjectDeferred:dt,newObjectDeferredBegin:at,getFilters:Ct,putStream:xt,events:pt,scaleFactor:$,pageSize:{getWidth:function(){return qi(E)},setWidth:function(_){wa(E,_)},getHeight:function(){return Si(E)},setHeight:function(_){ba(E,_)}},encryptionOptions:c,encryption:Hr,getEncryptor:Hn,output:kn,getNumberOfPages:Ht,pages:de,out:H,f2:xe,f3:L,getPageInfo:so,getPageInfoByObjId:Mt,getCurrentPageInfo:Rs,getPDFVersion:w,Point:Ci,Rectangle:ga,Matrix:ft,hasHotfix:Do},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return qi(E)},set:function(_){wa(E,_)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Si(E)},set:function(_){ba(E,_)},enumerable:!0,configurable:!0}),gs.call(p,he),Se="F1",mt(o,t),pt.publish("initialized"),p}Xd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Xd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Xd.prototype.processOwnerPassword=function(n,e){return Im(Fm(e).substr(0,5),n)},Xd.prototype.encryptor=function(n,e){var t=Fm(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Im(t,r)}},Wp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Qn(n)!==Qn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Sr.API={events:[]},Sr.version="3.0.0";var go=Sr.API,e2=1,pd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Or=function(n){return n.toFixed(2)},GA=function(n){return n.toFixed(5)};go.__acroform__={};var ii=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},vy=function(n){return n*e2},Fa=function(n){var e=new mz,t=dr.internal.getHeight(n)||0,r=dr.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Or(r)),Number(Or(t))],e},YD=go.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},JD=go.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},ZD=go.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},zo=go.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ZD(n,e-1)},Co=go.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return YD(n,e-1)},So=go.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return JD(n,e-1)},eN=go.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],s=n[1],i=n[2],a=n[3],A={};return A.lowerLeft_X=t(o)||0,A.lowerLeft_Y=r(s+a)||0,A.upperRight_X=t(o+i)||0,A.upperRight_Y=r(s)||0,[Number(Or(A.lowerLeft_X)),Number(Or(A.lowerLeft_Y)),Number(Or(A.upperRight_X)),Number(Or(A.upperRight_Y))]},tN=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Um(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Or(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Fa(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Um=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(L){return L.split(`
`)}):o.map(function(L){return[L]});var s=t,i=dr.internal.getHeight(n)||0;i=i<0?-i:i;var a=dr.internal.getWidth(n)||0;a=a<0?-a:a;var A=function(L,q,V){if(L+1<o.length){var se=q+" "+o[L+1][0];return qf(se,n,V).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var d,c,u=qf("3",n,s).height,h=n.multiline?i-s:(i-u)/2,p=h+=2,v=0,w=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+qf(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",S=0,I=0;I<o.length;I++)if(o.hasOwnProperty(I)){var P=!1;if(o[I].length!==1&&b!==o[I].length-1){if((u+2)*(S+2)+2>i)continue e;x+=o[I][b],P=!0,w=I,I--}else{x=(x+=o[I][b]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var N=parseInt(I),ee=A(N,x,s),j=I>=o.length-1;if(ee&&!j){x+=" ",b=0;continue}if(ee||j){if(j)w=N;else if(n.multiline&&(u+2)*(S+2)+2>i)continue e}else{if(!n.multiline||(u+2)*(S+2)+2>i)continue e;w=N}}for(var D="",ne=v;ne<=w;ne++){var xe=o[ne];if(n.multiline){if(ne===w){D+=xe[b]+" ",b=(b+1)%xe.length;continue}if(ne===v){D+=xe[xe.length-1]+" ";continue}}D+=xe[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,c=qf(D,n,s).width,n.textAlign){case"right":d=a-c-2;break;case"center":d=(a-c)/2;break;case"left":default:d=2}e+=Or(d)+" "+Or(p)+` Td
`,e+="("+pd(D)+`) Tj
`,e+=-Or(d)+` 0 Td
`,p=-(s+2),c=0,v=P?w:w+1,S++,x=""}break}return r.text=e,r.fontSize=s,r},qf=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},rN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nN=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},oN=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),Qn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},sN=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ca.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(rN)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");e2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new wz,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.objId=void 0,s.hasAnnotation&&nN(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var s=!r;for(var i in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var a=r[i],A=[],d=a.Rect;if(a.Rect&&(a.Rect=eN(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=dr.createDefaultAppearanceStream(a),Qn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(A=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=tN(a);A.push({key:"AP",value:"<</N "+c+">>"}),o.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var p=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var v=p[i];typeof v=="function"&&(v=v.call(o,a)),u+="/"+i+" "+v+" ",o.internal.acroformPlugin.xForms.indexOf(v)>=0||o.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(o,a)),u+="/"+i+" "+v,o.internal.acroformPlugin.xForms.indexOf(v)>=0||o.internal.acroformPlugin.xForms.push(v);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:a.objId}),o.internal.out("endobj")}s&&oN(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},vz=go.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(i){return i};if(Array.isArray(n)){for(var o="[",s=0;s<n.length;s++)switch(s!==0&&(o+=" "),Qn(n[s])){case"boolean":case"number":case"object":o+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+pd(r(n[s].toString()))+")"):o+=n[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},i0=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+pd(r(n))+")"},Ta=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ta.prototype.toString=function(){return this.objId+" 0 R"},Ta.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ta.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:vz(o,this.objId,this.scope)}):o instanceof Ta?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var mz=function(){Ta.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ii(mz,Ta);var wz=function(){Ta.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+pd(t(n))+")"}},set:function(t){n=t}})};ii(wz,Ta);var ca=function n(){Ta.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zo(e,3)},set:function(x){x?this.F=Co(e,3):this.F=So(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Xp)return;s="FieldObject"+n.FieldNum++}var x=function(S){return S};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+pd(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/e2:d},set:function(x){d=x}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Xp||this instanceof Zl))return i0(u,this.objId,this.scope)},set:function(x){x=x.toString(),u=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof rs?h:i0(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof rs?x:x.substr(0,1)==="("?qd(x.substr(1,x.length-2)):qd(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rs?qd(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof rs?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof rs?p:i0(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof rs?x:x.substr(0,1)==="("?qd(x.substr(1,x.length-2)):qd(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rs?qd(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof rs?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,1)},set:function(x){x?this.Ff=Co(this.Ff,1):this.Ff=So(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,2)},set:function(x){x?this.Ff=Co(this.Ff,2):this.Ff=So(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,3)},set:function(x){x?this.Ff=Co(this.Ff,3):this.Ff=So(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');b=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(b){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ii(ca,Ta);var gc=function(){ca.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vz(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(s,i,a){a||(a=1);for(var A,d=[];A=i.exec(s);)d.push(A[a]);return d}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,18)},set:function(t){t?this.Ff=Co(this.Ff,18):this.Ff=So(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Co(this.Ff,19):this.Ff=So(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,20)},set:function(t){t?(this.Ff=Co(this.Ff,20),e.sort()):this.Ff=So(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,22)},set:function(t){t?this.Ff=Co(this.Ff,22):this.Ff=So(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(t){t?this.Ff=Co(this.Ff,23):this.Ff=So(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,27)},set:function(t){t?this.Ff=Co(this.Ff,27):this.Ff=So(this.Ff,27)}}),this.hasAppearanceStream=!1};ii(gc,ca);var vc=function(){gc.call(this),this.fontName="helvetica",this.combo=!1};ii(vc,gc);var mc=function(){vc.call(this),this.combo=!0};ii(mc,vc);var ap=function(){mc.call(this),this.edit=!0};ii(ap,mc);var rs=function(){ca.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,15)},set:function(t){t?this.Ff=Co(this.Ff,15):this.Ff=So(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,16)},set:function(t){t?this.Ff=Co(this.Ff,16):this.Ff=So(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,17)},set:function(t){t?this.Ff=Co(this.Ff,17):this.Ff=So(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(t){t?this.Ff=Co(this.Ff,26):this.Ff=So(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+pd(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){Qn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ii(rs,ca);var Ap=function(){rs.call(this),this.pushButton=!0};ii(Ap,rs);var wc=function(){rs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ii(wc,rs);var Xp=function(){var n,e;ca.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+pd(o(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(o){Qn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ii(Xp,ca),wc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},wc.prototype.createOption=function(n){var e=new Xp;return e.Parent=this,e.optionName=n,this.Kids.push(e),iN.call(this.scope,e),e};var lp=function(){rs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dr.CheckBox.createAppearanceStream()};ii(lp,rs);var Zl=function(){ca.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,13)},set:function(e){e?this.Ff=Co(this.Ff,13):this.Ff=So(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,21)},set:function(e){e?this.Ff=Co(this.Ff,21):this.Ff=So(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(e){e?this.Ff=Co(this.Ff,23):this.Ff=So(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,24)},set:function(e){e?this.Ff=Co(this.Ff,24):this.Ff=So(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,25)},set:function(e){e?this.Ff=Co(this.Ff,25):this.Ff=So(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(e){e?this.Ff=Co(this.Ff,26):this.Ff=So(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ii(Zl,ca);var dp=function(){Zl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,14)},set:function(n){n?this.Ff=Co(this.Ff,14):this.Ff=So(this.Ff,14)}}),this.password=!0};ii(dp,Zl);var dr={CheckBox:{createAppearanceStream:function(){return{N:{On:dr.CheckBox.YesNormal},D:{On:dr.CheckBox.YesPushDown,Off:dr.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),s=Um(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Or(dr.internal.getWidth(n))+" "+Or(dr.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Or(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Fa(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],s=dr.internal.getHeight(n),i=dr.internal.getWidth(n),a=Um(n,n.caption);return o.push("1 g"),o.push("0 0 "+Or(i)+" "+Or(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Or(i-1)+" "+Or(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+Or(a.fontSize)+" Tf "+r),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Or(dr.internal.getWidth(n))+" "+Or(dr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:dr.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=dr.RadioButton.Circle.YesNormal,e.D[n]=dr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Fa(n);e.scope=n.scope;var t=[],r=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=dr.internal.Bezier_C,s=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+GA(dr.internal.getWidth(n)/2)+" "+GA(dr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=[],r=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*dr.internal.Bezier_C).toFixed(5)),i=Number((r*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+GA(dr.internal.getWidth(n)/2)+" "+GA(dr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+GA(dr.internal.getWidth(n)/2)+" "+GA(dr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=[],r=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+GA(dr.internal.getWidth(n)/2)+" "+GA(dr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:dr.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=dr.RadioButton.Cross.YesNormal,e.D[n]=dr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Fa(n);e.scope=n.scope;var t=[],r=dr.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Or(dr.internal.getWidth(n)-2)+" "+Or(dr.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Or(r.x1.x)+" "+Or(r.x1.y)+" m"),t.push(Or(r.x2.x)+" "+Or(r.x2.y)+" l"),t.push(Or(r.x4.x)+" "+Or(r.x4.y)+" m"),t.push(Or(r.x3.x)+" "+Or(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=dr.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Or(dr.internal.getWidth(n))+" "+Or(dr.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Or(dr.internal.getWidth(n)-2)+" "+Or(dr.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Or(t.x1.x)+" "+Or(t.x1.y)+" m"),r.push(Or(t.x2.x)+" "+Or(t.x2.y)+" l"),r.push(Or(t.x4.x)+" "+Or(t.x4.y)+" m"),r.push(Or(t.x3.x)+" "+Or(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Fa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Or(dr.internal.getWidth(n))+" "+Or(dr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};dr.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=dr.internal.getWidth(n),t=dr.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},dr.internal.getWidth=function(n){var e=0;return Qn(n)==="object"&&(e=vy(n.Rect[2])),e},dr.internal.getHeight=function(n){var e=0;return Qn(n)==="object"&&(e=vy(n.Rect[3])),e};var iN=go.addField=function(n){if(sN(this,n),!(n instanceof ca))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};go.AcroFormChoiceField=gc,go.AcroFormListBox=vc,go.AcroFormComboBox=mc,go.AcroFormEditBox=ap,go.AcroFormButton=rs,go.AcroFormPushButton=Ap,go.AcroFormRadioButton=wc,go.AcroFormCheckBox=lp,go.AcroFormTextField=Zl,go.AcroFormPasswordField=dp,go.AcroFormAppearance=dr,go.AcroForm={ChoiceField:gc,ListBox:vc,ComboBox:mc,EditBox:ap,Button:rs,PushButton:Ap,RadioButton:wc,CheckBox:lp,TextField:Zl,PasswordField:dp,Appearance:dr},Sr.AcroForm={ChoiceField:gc,ListBox:vc,ComboBox:mc,EditBox:ap,Button:rs,PushButton:Ap,RadioButton:wc,CheckBox:lp,TextField:Zl,PasswordField:dp,Appearance:dr};Sr.AcroForm;function bz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(L,q){var V,se,ve,ie,ge,re=e;if((q=q||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(ee(L))for(ge in t)for(ve=t[ge],V=0;V<ve.length;V+=1){for(ie=!0,se=0;se<ve[V].length;se+=1)if(ve[V][se]!==void 0&&ve[V][se]!==L[se]){ie=!1;break}if(ie===!0){re=ge;break}}else for(ge in t)for(ve=t[ge],V=0;V<ve.length;V+=1){for(ie=!0,se=0;se<ve[V].length;se+=1)if(ve[V][se]!==void 0&&ve[V][se]!==L.charCodeAt(se)){ie=!1;break}if(ie===!0){re=ge;break}}return re===e&&q!==e&&(re=q),re},o=function L(q){for(var V=this.internal.write,se=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:q.width}),ie.push({key:"Height",value:q.height}),q.colorSpace===b.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===b.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)){for(var ge="",re=0,ue=q.transparency.length;re<ue;re++)ge+=q.transparency[re]+" "+q.transparency[re]+" ";ie.push({key:"Mask",value:"["+ge+"]"})}q.sMask!==void 0&&ie.push({key:"SMask",value:q.objectId+1+" 0 R"});var Z=q.filter!==void 0?["/"+q.filter]:void 0;if(se({data:q.data,additionalKeyValues:ie,alreadyAppliedFilters:Z,objectId:q.objectId}),V("endobj"),"sMask"in q&&q.sMask!==void 0){var _e="/Predictor "+q.predictor+" /Colors 1 /BitsPerComponent "+q.bitsPerComponent+" /Columns "+q.width,z={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:q.bitsPerComponent,decodeParameters:_e,data:q.sMask};"filter"in q&&(z.filter=q.filter),L.call(this,z)}if(q.colorSpace===b.INDEXED){var E=this.internal.newObject();se({data:D(new Uint8Array(q.palette)),objectId:E}),V("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var q in L)o.call(this,L[q])},i=function(){var L,q=this.internal.collections.addImage_images,V=this.internal.write;for(var se in q)V("/I"+(L=q[se]).index,L.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},A=function(){var L=this.internal.collections.addImage_images;return a.call(this),L},d=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(L){return typeof n["process"+L.toUpperCase()]=="function"},u=function(L){return Qn(L)==="object"&&L.nodeType===1},h=function(L,q){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var V=""+L.getAttribute("src");if(V.indexOf("data:image/")===0)return Pu(unescape(V).split("base64,").pop());var se=n.loadFile(V,!0);if(se!==void 0)return se}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ve;switch(q){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;case"JPEG":case"JPG":default:ve="image/jpeg"}return Pu(L.toDataURL(ve,1).split("base64,").pop())}},p=function(L){var q=this.internal.collections.addImage_images;if(q){for(var V in q)if(L===q[V].alias)return q[V]}},v=function(L,q,V){return L||q||(L=-96,q=-96),L<0&&(L=-1*V.width*72/L/this.internal.scaleFactor),q<0&&(q=-1*V.height*72/q/this.internal.scaleFactor),L===0&&(L=q*V.width/V.height),q===0&&(q=L*V.height/V.width),[L,q]},w=function(L,q,V,se,ve,ie){var ge=v.call(this,V,se,ve),re=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,Z=A.call(this);if(V=ge[0],se=ge[1],Z[ve.index]=ve,ie){ie*=Math.PI/180;var _e=Math.cos(ie),z=Math.sin(ie),E=function(Q){return Q.toFixed(4)},F=[E(_e),E(z),E(-1*z),E(_e),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,re(L),ue(q+se),"cm"].join(" ")),this.internal.write(F.join(" ")),this.internal.write([re(V),"0","0",re(se),"0","0","cm"].join(" "))):this.internal.write([re(V),"0","0",re(se),re(L),ue(q+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},b=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=n.__addimage__.sHashCode=function(L){var q,V,se=0;if(typeof L=="string")for(V=L.length,q=0;q<V;q++)se=(se<<5)-se+L.charCodeAt(q),se|=0;else if(ee(L))for(V=L.byteLength/2,q=0;q<V;q++)se=(se<<5)-se+L[q],se|=0;return se},I=n.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var q=!0;return L.length===0&&(q=!1),L.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(q=!1),q},P=n.__addimage__.extractImageFromDataUrl=function(L){var q=(L=L||"").split("base64,"),V=null;if(q.length===2){var se=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(q[0]);Array.isArray(se)&&(V={mimeType:se[1],charset:se[2],data:q[1]})}return V},N=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(L){return N()&&L instanceof ArrayBuffer};var ee=n.__addimage__.isArrayBufferView=function(L){return N()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},j=n.__addimage__.binaryStringToUint8Array=function(L){for(var q=L.length,V=new Uint8Array(q),se=0;se<q;se++)V[se]=L.charCodeAt(se);return V},D=n.__addimage__.arrayBufferToBinaryString=function(L){for(var q="",V=ee(L)?L:new Uint8Array(L),se=0;se<V.length;se+=8192)q+=String.fromCharCode.apply(null,V.subarray(se,se+8192));return q};n.addImage=function(){var L,q,V,se,ve,ie,ge,re,ue;if(typeof arguments[1]=="number"?(q=e,V=arguments[1],se=arguments[2],ve=arguments[3],ie=arguments[4],ge=arguments[5],re=arguments[6],ue=arguments[7]):(q=arguments[1],V=arguments[2],se=arguments[3],ve=arguments[4],ie=arguments[5],ge=arguments[6],re=arguments[7],ue=arguments[8]),Qn(L=arguments[0])==="object"&&!u(L)&&"imageData"in L){var Z=L;L=Z.imageData,q=Z.format||q||e,V=Z.x||V||0,se=Z.y||se||0,ve=Z.w||Z.width||ve,ie=Z.h||Z.height||ie,ge=Z.alias||ge,re=Z.compression||re,ue=Z.rotation||Z.angle||ue}var _e=this.internal.getFilters();if(re===void 0&&_e.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(V)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var z=ne.call(this,L,q,ge,re);return w.call(this,V,se,ve,ie,z,ue),this};var ne=function(L,q,V,se){var ve,ie,ge;if(typeof L=="string"&&r(L)===e){L=unescape(L);var re=xe(L,!1);(re!==""||(re=n.loadFile(L,!0))!==void 0)&&(L=re)}if(u(L)&&(L=h(L,q)),q=r(L,q),!c(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((ge=V)==null||ge.length===0)&&(V=function(ue){return typeof ue=="string"||ee(ue)?S(ue):ee(ue.data)?S(ue.data):null}(L)),(ve=p.call(this,V))||(N()&&(L instanceof Uint8Array||q==="RGBA"||(ie=L,L=j(L))),ve=this["process"+q.toUpperCase()](L,d.call(this),V,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in n.image_compression?ue:x.NONE}(se),ie)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},xe=n.__addimage__.convertBase64ToBinaryString=function(L,q){var V;q=typeof q!="boolean"||q;var se,ve="";if(typeof L=="string"){se=(V=P(L))!==null?V.data:L;try{ve=Pu(se)}catch(ie){if(q)throw I(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ve};n.getImageProperties=function(L){var q,V,se="";if(u(L)&&(L=h(L)),typeof L=="string"&&r(L)===e&&((se=xe(L,!1))===""&&(se=n.loadFile(L)||""),L=se),V=r(L),!c(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!N()||L instanceof Uint8Array||(L=j(L)),!(q=this["process"+V.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=V,q}})(Sr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Sr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,c=!1,u=0;u<d.length&&!c;u++)switch((r=d[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){r=d[h];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(x(r.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+p(x(S))+") >>",w.content=s;var I=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+i(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(w.objId,"0 R",b.objId,"0 R");break;case"freetext":o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var P=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+p(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var N=this.annotations._nameMap[r.options.name];r.options.pageNumber=N.page,r.options.top=N.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ee=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,s,i){var a=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:A(t),y:d(r),w:A(t+o),h:d(r+s)},options:i,type:"link"})},n.textWithLink=function(t,r,o,s){var i,a,A=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;i=Math.ceil(d*c)}else a=A,i=d;return this.text(t,r,o,s),o+=.2*d,s.align==="center"&&(r-=A/2),s.align==="right"&&(r-=A),this.link(r,o-d,a,i,s),A},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Sr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},A=n.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&o.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length==4},u=n.__arabicParser__.resolveLigatures=function(w){var b=0,x=t,S="",I=0;for(b=0;b<w.length;b+=1)x[w.charCodeAt(b)]!==void 0?(I++,typeof(x=x[w.charCodeAt(b)])=="number"&&(S+=String.fromCharCode(x),x=t,I=0),b===w.length-1&&(x=t,S+=w.charAt(b-(I-1)),b-=I-1,I=0)):(x=t,S+=w.charAt(b-I),b-=I,I=0);return S};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(w,b,x){return i(w)?s(w)===!1?-1:!d(w)||!i(b)&&!i(x)||!i(x)&&a(b)||a(w)&&!i(b)||a(w)&&A(b)||a(w)&&a(b)?0:c(w)&&i(b)&&!a(b)&&i(x)&&d(x)?3:a(w)||!i(x)?1:2:-1},p=function(w){var b=0,x=0,S=0,I="",P="",N="",ee=(w=w||"").split("\\s+"),j=[];for(b=0;b<ee.length;b+=1){for(j.push(""),x=0;x<ee[b].length;x+=1)I=ee[b][x],P=ee[b][x-1],N=ee[b][x+1],i(I)?(S=h(I,P,N),j[b]+=S!==-1?String.fromCharCode(e[I.charCodeAt(0)][S]):I):j[b]+=I;j[b]=u(j[b])}return j.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var w,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(b)){var S=0;for(x=[],S=0;S<b.length;S+=1)Array.isArray(b[S])?x.push([p(b[S][0]),b[S][1],b[S][2]]):x.push([p(b[S])]);w=x}else w=p(b);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",v])}(Sr.API),Sr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Sr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(w){A=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(w){v=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},n.getTextDimensions=function(A,d){r.call(this);var c=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,p=0,v=0,w=0,b=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var x=d.maxWidth;x>0?typeof A=="string"?A=this.splitTextToSize(A,x):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,P){return I.concat(b.splitTextToSize(P,x))},[])):A=Array.isArray(A)?A:[A];for(var S=0;S<A.length;S++)p<(w=this.getStringUnitWidth(A[S],{font:u})*c)&&(p=w);return p!==0&&(v=A.length),{w:p/=h,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===A.lineNumber?(A.x=(d.x||0)+(d.width||0),A.y=d.y||0):d.y+d.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,p&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=d.y+d.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};n.table=function(A,d,c,u,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var p,v,w,b,x=[],S=[],I=[],P={},N={},ee=[],j=[],D=(h=h||{}).autoSize||!1,ne=h.printHeaders!==!1,xe=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,L=h.margins||Object.assign({width:this.getPageWidth()},e),q=typeof h.padding=="number"?h.padding:3,V=h.headerBackgroundColor||"#c8c8c8",se=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=ne,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=se,this.setFontSize(xe),u==null)S=x=Object.keys(c[0]),I=x.map(function(){return"left"});else if(Array.isArray(u)&&Qn(u[0])==="object")for(x=u.map(function(Z){return Z.name}),S=u.map(function(Z){return Z.prompt||Z.name||""}),I=u.map(function(Z){return Z.align||"left"}),p=0;p<u.length;p+=1)N[u[p].name]=u[p].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(S=x=u,I=x.map(function(){return"left"}));if(D||Array.isArray(u)&&typeof u[0]=="string")for(p=0;p<x.length;p+=1){for(P[b=x[p]]=c.map(function(Z){return Z[b]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=P[b],this.setFont(void 0,"normal"),w=0;w<v.length;w+=1)ee.push(this.getTextDimensions(v[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[b]=Math.max.apply(null,ee)+q+q,ee=[]}if(ne){var ve={};for(p=0;p<x.length;p+=1)ve[x[p]]={},ve[x[p]].text=S[p],ve[x[p]].align=I[p];var ie=a.call(this,ve,N);j=x.map(function(Z){return new s(A,d,N[Z],ie,ve[Z].text,void 0,ve[Z].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var ge=u.reduce(function(Z,_e){return Z[_e.name]=_e.align,Z},{});for(p=0;p<c.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:c[p]},this);var re=a.call(this,c[p],N);for(w=0;w<x.length;w+=1){var ue=c[p][x[w]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:w,data:ue},this),i.call(this,new s(A,d,N[x[w]],re,ue,p+2,ge[x[w]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=d,this};var a=function(A,d){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(p){var v=A[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[p]-c-c)},this).map(function(p){return this.getLineHeightFactor()*p.length*u/h+c+c},this).reduce(function(p,v){return Math.max(p,v)},0)};n.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},n.printHeaderRow=function(A,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,c),this.setTextColor(v)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Sr.API);var yz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_z=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qm=bz(_z),xz=[100,200,300,400,500,600,700,800,900],aN=bz(xz);function Tm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return yz[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(s){return typeof Qm[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function my(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var AN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function by(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function lN(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},AN,t.genericFontFamilies||{}),s=null,i=null,a=0;a<e.length;++a)if(o[(s=Tm(e[a])).family]&&(s.family=o[s.family]),n.hasOwnProperty(s.family)){i=n[s.family];break}if(!(i=i||n[r]))throw new Error("Could not find a font-family for the rule '"+by(s)+"' and default family '"+r+"'.");if(i=function(A,d){if(d[A])return d[A];var c=Qm[A],u=c<=Qm.normal?-1:1,h=my(d,_z,c,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+A);return h}(s.stretch,i),i=function(A,d){if(d[A])return d[A];for(var c=yz[A],u=0;u<c.length;++u)if(d[c[u]])return d[c[u]];throw new Error("Could not find a matching font-style for "+A)}(s.style,i),!(i=function(A,d){if(d[A])return d[A];if(A===400&&d[500])return d[500];if(A===500&&d[400])return d[400];var c=aN[A],u=my(d,xz,c,A<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+A);return u}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+by(s)+"'.");return i}function yy(n){return n.trimLeft()}function dN(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function cN(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Kf,_y,xy,a0=["times"];(function(n){var e,t,r,o,s,i,a,A,d,c=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new A,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new i,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new i,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,a=this.internal.Rectangle,A=this.internal.Matrix,d=new c}]);var u=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=z;Object.defineProperty(this,"pdf",{get:function(){return E}});var F=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return F},set:function(W){F=!!W}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(W){Q=!!W}});var M=0;Object.defineProperty(this,"posX",{get:function(){return M},set:function(W){isNaN(W)||(M=W)}});var k=0;Object.defineProperty(this,"posY",{get:function(){return k},set:function(W){isNaN(W)||(k=W)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(W){var H;typeof W=="number"?H=[W,W,W,W]:((H=new Array(4))[0]=W[0],H[1]=W.length>=2?W[1]:H[0],H[2]=W.length>=3?W[2]:H[0],H[3]=W.length>=4?W[3]:H[1]),d.margin=H}});var O=!1;Object.defineProperty(this,"autoPaging",{get:function(){return O},set:function(W){O=W}});var K=0;Object.defineProperty(this,"lastBreak",{get:function(){return K},set:function(W){K=W}});var R=[];Object.defineProperty(this,"pageBreaks",{get:function(){return R},set:function(W){R=W}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(W){W instanceof c&&(d=W)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(W){d.path=W}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(W){de=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var H;H=h(W),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var H=h(W);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var Be=null;function Pe(W,H){if(Be===null){var te=function(Ae){var he=[];return Object.keys(Ae).forEach(function(we){Ae[we].forEach(function(ye){var Ie=null;switch(ye){case"bold":Ie={family:we,weight:"bold"};break;case"italic":Ie={family:we,style:"italic"};break;case"bolditalic":Ie={family:we,weight:"bold",style:"italic"};break;case"":case"normal":Ie={family:we}}Ie!==null&&(Ie.ref={name:we,style:ye},he.push(Ie))})}),he}(W.getFontList());Be=function(Ae){for(var he={},we=0;we<Ae.length;++we){var ye=Tm(Ae[we]),Ie=ye.family,le=ye.stretch,Te=ye.style,Fe=ye.weight;he[Ie]=he[Ie]||{},he[Ie][le]=he[Ie][le]||{},he[Ie][le][Te]=he[Ie][le][Te]||{},he[Ie][le][Te][Fe]=ye}return he}(te.concat(H))}return Be}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(W){Be=null,He=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var H;if(this.ctx.font=W,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(W))!==null){var te=H[1],Ae=(H[2],H[3]),he=H[4],we=(H[5],H[6]),ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(ye==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var Ie=function(J){var Se,$,Ce=[],Ee=J.trim();if(Ee==="")return a0;if(Ee in wy)return[wy[Ee]];for(;Ee!=="";){switch($=null,Se=(Ee=yy(Ee)).charAt(0)){case'"':case"'":$=dN(Ee.substring(1),Se);break;default:$=cN(Ee)}if($===null||(Ce.push($[0]),(Ee=yy($[1]))!==""&&Ee.charAt(0)!==","))return a0;Ee=Ee.replace(/^,/,"")}return Ce}(we);if(this.fontFaces){var le=lN(Pe(this.pdf,this.fontFaces),Ie.map(function(J){return{family:J,stretch:"normal",weight:Ae,style:te}}));this.pdf.setFont(le.ref.name,le.ref.style)}else{var Te="";(Ae==="bold"||parseInt(Ae,10)>=700||te==="bold")&&(Te="bold"),te==="italic"&&(Te+="italic"),Te.length===0&&(Te="normal");for(var Fe="",Me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ne=0;Ne<Ie.length;Ne++){if(this.pdf.internal.getFont(Ie[Ne],Te,{noFallback:!0,disableWarning:!0})!==void 0){Fe=Ie[Ne];break}if(Te==="bolditalic"&&this.pdf.internal.getFont(Ie[Ne],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=Ie[Ne],Te="bold";else if(this.pdf.internal.getFont(Ie[Ne],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=Ie[Ne],Te="normal";break}}if(Fe===""){for(var fe=0;fe<Ie.length;fe++)if(Me[Ie[fe]]){Fe=Me[Ie[fe]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,Te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};u.prototype.setLineDash=function(z){this.lineDash=z},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){P.call(this,"fill",!1)},u.prototype.stroke=function(){P.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(z,E){if(isNaN(z)||isNaN(E))throw Dn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var F=this.ctx.transform.applyToPoint(new i(z,E));this.path.push({type:"mt",x:F.x,y:F.y}),this.ctx.lastPoint=new i(z,E)},u.prototype.closePath=function(){var z=new i(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&Qn(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){z=new i(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(z.x,z.y)},u.prototype.lineTo=function(z,E){if(isNaN(z)||isNaN(E))throw Dn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var F=this.ctx.transform.applyToPoint(new i(z,E));this.path.push({type:"lt",x:F.x,y:F.y}),this.ctx.lastPoint=new i(F.x,F.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},u.prototype.quadraticCurveTo=function(z,E,F,Q){if(isNaN(F)||isNaN(Q)||isNaN(z)||isNaN(E))throw Dn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var M=this.ctx.transform.applyToPoint(new i(F,Q)),k=this.ctx.transform.applyToPoint(new i(z,E));this.path.push({type:"qct",x1:k.x,y1:k.y,x:M.x,y:M.y}),this.ctx.lastPoint=new i(M.x,M.y)},u.prototype.bezierCurveTo=function(z,E,F,Q,M,k){if(isNaN(M)||isNaN(k)||isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q))throw Dn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var O=this.ctx.transform.applyToPoint(new i(M,k)),K=this.ctx.transform.applyToPoint(new i(z,E)),R=this.ctx.transform.applyToPoint(new i(F,Q));this.path.push({type:"bct",x1:K.x,y1:K.y,x2:R.x,y2:R.y,x:O.x,y:O.y}),this.ctx.lastPoint=new i(O.x,O.y)},u.prototype.arc=function(z,E,F,Q,M,k){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q)||isNaN(M))throw Dn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(k=!!k,!this.ctx.transform.isIdentity){var O=this.ctx.transform.applyToPoint(new i(z,E));z=O.x,E=O.y;var K=this.ctx.transform.applyToPoint(new i(0,F)),R=this.ctx.transform.applyToPoint(new i(0,0));F=Math.sqrt(Math.pow(K.x-R.x,2)+Math.pow(K.y-R.y,2))}Math.abs(M-Q)>=2*Math.PI&&(Q=0,M=2*Math.PI),this.path.push({type:"arc",x:z,y:E,radius:F,startAngle:Q,endAngle:M,counterclockwise:k})},u.prototype.arcTo=function(z,E,F,Q,M){throw new Error("arcTo not implemented.")},u.prototype.rect=function(z,E,F,Q){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q))throw Dn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,E),this.lineTo(z+F,E),this.lineTo(z+F,E+Q),this.lineTo(z,E+Q),this.lineTo(z,E),this.lineTo(z+F,E),this.lineTo(z,E)},u.prototype.fillRect=function(z,E,F,Q){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q))throw Dn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var M={};this.lineCap!=="butt"&&(M.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(M.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,E,F,Q),this.fill(),M.hasOwnProperty("lineCap")&&(this.lineCap=M.lineCap),M.hasOwnProperty("lineJoin")&&(this.lineJoin=M.lineJoin)}},u.prototype.strokeRect=function(z,E,F,Q){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q))throw Dn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(z,E,F,Q),this.stroke())},u.prototype.clearRect=function(z,E,F,Q){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q))throw Dn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,E,F,Q))},u.prototype.save=function(z){z=typeof z!="boolean"||z;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},u.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("Q");this.pdf.setPage(E),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(z){var E,F,Q,M;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))E=0,F=0,Q=0,M=0;else{var k=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(k!==null)E=parseInt(k[1]),F=parseInt(k[2]),Q=parseInt(k[3]),M=1;else if((k=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)E=parseInt(k[1]),F=parseInt(k[2]),Q=parseInt(k[3]),M=parseFloat(k[4]);else{if(M=1,typeof z=="string"&&z.charAt(0)!=="#"){var O=new fz(z);z=O.ok?O.toHex():"#000000"}z.length===4?(E=z.substring(1,2),E+=E,F=z.substring(2,3),F+=F,Q=z.substring(3,4),Q+=Q):(E=z.substring(1,3),F=z.substring(3,5),Q=z.substring(5,7)),E=parseInt(E,16),F=parseInt(F,16),Q=parseInt(Q,16)}}return{r:E,g:F,b:Q,a:M,style:z}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(z,E,F,Q){if(isNaN(E)||isNaN(F)||typeof z!="string")throw Dn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!p.call(this)){var M=re(this.ctx.transform.rotation),k=this.ctx.transform.scaleX;q.call(this,{text:z,x:E,y:F,scale:k,angle:M,align:this.textAlign,maxWidth:Q})}},u.prototype.strokeText=function(z,E,F,Q){if(isNaN(E)||isNaN(F)||typeof z!="string")throw Dn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Q=isNaN(Q)?void 0:Q;var M=re(this.ctx.transform.rotation),k=this.ctx.transform.scaleX;q.call(this,{text:z,x:E,y:F,scale:k,renderingMode:"stroke",angle:M,align:this.textAlign,maxWidth:Q})}},u.prototype.measureText=function(z){if(typeof z!="string")throw Dn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,F=this.pdf.internal.scaleFactor,Q=E.internal.getFontSize(),M=E.getStringUnitWidth(z)*Q/E.internal.scaleFactor,k=function(O){var K=(O=O||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return K}}),this};return new k({width:M*=Math.round(96*F/72*1e4)/1e4})},u.prototype.scale=function(z,E){if(isNaN(z)||isNaN(E))throw Dn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var F=new A(z,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.rotate=function(z){if(isNaN(z))throw Dn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new A(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.translate=function(z,E){if(isNaN(z)||isNaN(E))throw Dn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var F=new A(1,0,0,1,z,E);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.transform=function(z,E,F,Q,M,k){if(isNaN(z)||isNaN(E)||isNaN(F)||isNaN(Q)||isNaN(M)||isNaN(k))throw Dn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var O=new A(z,E,F,Q,M,k);this.ctx.transform=this.ctx.transform.multiply(O)},u.prototype.setTransform=function(z,E,F,Q,M,k){z=isNaN(z)?1:z,E=isNaN(E)?0:E,F=isNaN(F)?0:F,Q=isNaN(Q)?1:Q,M=isNaN(M)?0:M,k=isNaN(k)?0:k,this.ctx.transform=new A(z,E,F,Q,M,k)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(z,E,F,Q,M,k,O,K,R){var de=this.pdf.getImageProperties(z),Be=1,Pe=1,He=1,W=1;Q!==void 0&&K!==void 0&&(He=K/Q,W=R/M,Be=de.width/Q*K/Q,Pe=de.height/M*R/M),k===void 0&&(k=E,O=F,E=0,F=0),Q!==void 0&&K===void 0&&(K=Q,R=M),Q===void 0&&K===void 0&&(K=de.width,R=de.height);for(var H,te=this.ctx.transform.decompose(),Ae=re(te.rotate.shx),he=new A,we=(he=(he=(he=he.multiply(te.translate)).multiply(te.skew)).multiply(te.scale)).applyToRectangle(new a(k-E*He,O-F*W,Q*Be,M*Pe)),ye=b.call(this,we),Ie=[],le=0;le<ye.length;le+=1)Ie.indexOf(ye[le])===-1&&Ie.push(ye[le]);if(I(Ie),this.autoPaging)for(var Te=Ie[0],Fe=Ie[Ie.length-1],Me=Te;Me<Fe+1;Me++){this.pdf.setPage(Me);var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fe=Me===1?this.posY+this.margin[0]:this.margin[0],J=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$=Me===1?0:J+(Me-2)*Se;if(this.ctx.clip_path.length!==0){var Ce=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(H,this.posX+this.margin[3],-$+fe+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Ce}var Ee=JSON.parse(JSON.stringify(we));Ee=S([Ee],this.posX+this.margin[3],-$+fe+this.ctx.prevPageLastElemOffset)[0];var Oe=(Me>Te||Me<Fe)&&w.call(this);Oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,Se,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Ae),Oe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",we.x,we.y,we.w,we.h,null,null,Ae)};var b=function(z,E,F){var Q=[];E=E||this.pdf.internal.pageSize.width,F=F||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var M=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":Q.push(Math.floor((z.y+M)/F)+1);break;case"arc":Q.push(Math.floor((z.y+M-z.radius)/F)+1),Q.push(Math.floor((z.y+M+z.radius)/F)+1);break;case"qct":var k=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);Q.push(Math.floor((k.y+M)/F)+1),Q.push(Math.floor((k.y+k.h+M)/F)+1);break;case"bct":var O=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);Q.push(Math.floor((O.y+M)/F)+1),Q.push(Math.floor((O.y+O.h+M)/F)+1);break;case"rect":Q.push(Math.floor((z.y+M)/F)+1),Q.push(Math.floor((z.y+z.h+M)/F)+1)}for(var K=0;K<Q.length;K+=1)for(;this.pdf.internal.getNumberOfPages()<Q[K];)x.call(this);return Q},x=function(){var z=this.fillStyle,E=this.strokeStyle,F=this.font,Q=this.lineCap,M=this.lineWidth,k=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=E,this.font=F,this.lineCap=Q,this.lineWidth=M,this.lineJoin=k},S=function(z,E,F){for(var Q=0;Q<z.length;Q++)switch(z[Q].type){case"bct":z[Q].x2+=E,z[Q].y2+=F;case"qct":z[Q].x1+=E,z[Q].y1+=F;case"mt":case"lt":case"arc":default:z[Q].x+=E,z[Q].y+=F}return z},I=function(z){return z.sort(function(E,F){return E-F})},P=function(z,E){for(var F,Q,M=this.fillStyle,k=this.strokeStyle,O=this.lineCap,K=this.lineWidth,R=Math.abs(K*this.ctx.transform.scaleX),de=this.lineJoin,Be=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),He=[],W=0;W<Pe.length;W++)if(Pe[W].x!==void 0)for(var H=b.call(this,Pe[W]),te=0;te<H.length;te+=1)He.indexOf(H[te])===-1&&He.push(H[te]);for(var Ae=0;Ae<He.length;Ae++)for(;this.pdf.internal.getNumberOfPages()<He[Ae];)x.call(this);if(I(He),this.autoPaging)for(var he=He[0],we=He[He.length-1],ye=he;ye<we+1;ye++){this.pdf.setPage(ye),this.fillStyle=M,this.strokeStyle=k,this.lineCap=O,this.lineWidth=R,this.lineJoin=de;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],le=ye===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Me=ye===1?0:Te+(ye-2)*Fe;if(this.ctx.clip_path.length!==0){var Ne=this.path;F=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(F,this.posX+this.margin[3],-Me+le+this.ctx.prevPageLastElemOffset),N.call(this,z,!0),this.path=Ne}if(Q=JSON.parse(JSON.stringify(Be)),this.path=S(Q,this.posX+this.margin[3],-Me+le+this.ctx.prevPageLastElemOffset),E===!1||ye===0){var fe=(ye>he||ye<we)&&w.call(this);fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,Fe,null).clip().discardPath()),N.call(this,z,E),fe&&this.pdf.restoreGraphicsState()}this.lineWidth=K}else this.lineWidth=R,N.call(this,z,E),this.lineWidth=K;this.path=Be},N=function(z,E){if((z!=="stroke"||E||!v.call(this))&&(z==="stroke"||E||!p.call(this))){for(var F,Q,M=[],k=this.path,O=0;O<k.length;O++){var K=k[O];switch(K.type){case"begin":M.push({begin:!0});break;case"close":M.push({close:!0});break;case"mt":M.push({start:K,deltas:[],abs:[]});break;case"lt":var R=M.length;if(k[O-1]&&!isNaN(k[O-1].x)&&(F=[K.x-k[O-1].x,K.y-k[O-1].y],R>0)){for(;R>=0;R--)if(M[R-1].close!==!0&&M[R-1].begin!==!0){M[R-1].deltas.push(F),M[R-1].abs.push(K);break}}break;case"bct":F=[K.x1-k[O-1].x,K.y1-k[O-1].y,K.x2-k[O-1].x,K.y2-k[O-1].y,K.x-k[O-1].x,K.y-k[O-1].y],M[M.length-1].deltas.push(F);break;case"qct":var de=k[O-1].x+2/3*(K.x1-k[O-1].x),Be=k[O-1].y+2/3*(K.y1-k[O-1].y),Pe=K.x+2/3*(K.x1-K.x),He=K.y+2/3*(K.y1-K.y),W=K.x,H=K.y;F=[de-k[O-1].x,Be-k[O-1].y,Pe-k[O-1].x,He-k[O-1].y,W-k[O-1].x,H-k[O-1].y],M[M.length-1].deltas.push(F);break;case"arc":M.push({deltas:[],abs:[],arc:!0}),Array.isArray(M[M.length-1].abs)&&M[M.length-1].abs.push(K)}}Q=E?null:z==="stroke"?"stroke":"fill";for(var te=!1,Ae=0;Ae<M.length;Ae++)if(M[Ae].arc)for(var he=M[Ae].abs,we=0;we<he.length;we++){var ye=he[we];ye.type==="arc"?D.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,E,!te):V.call(this,ye.x,ye.y),te=!0}else if(M[Ae].close===!0)this.pdf.internal.out("h"),te=!1;else if(M[Ae].begin!==!0){var Ie=M[Ae].start.x,le=M[Ae].start.y;se.call(this,M[Ae].deltas,Ie,le),te=!0}Q&&ne.call(this,Q),E&&xe.call(this)}},ee=function(z){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,F=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-F;case"top":return z+E-F;case"hanging":return z+E-2*F;case"middle":return z+E/2-F;case"ideographic":return z;case"alphabetic":default:return z}},j=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(E,F){this.colorStops.push([E,F])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(z,E,F,Q,M,k,O,K,R){for(var de=ie.call(this,F,Q,M,k),Be=0;Be<de.length;Be++){var Pe=de[Be];Be===0&&(R?L.call(this,Pe.x1+z,Pe.y1+E):V.call(this,Pe.x1+z,Pe.y1+E)),ve.call(this,z,E,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}K?xe.call(this):ne.call(this,O)},ne=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(z,E){this.pdf.internal.out(t(z)+" "+r(E)+" m")},q=function(z){var E;switch(z.align){case"right":case"end":E="right";break;case"center":E="center";break;case"left":case"start":default:E="left"}var F=this.pdf.getTextDimensions(z.text),Q=ee.call(this,z.y),M=j.call(this,Q)-F.h,k=this.ctx.transform.applyToPoint(new i(z.x,Q)),O=this.ctx.transform.decompose(),K=new A;K=(K=(K=K.multiply(O.translate)).multiply(O.skew)).multiply(O.scale);for(var R,de,Be,Pe=this.ctx.transform.applyToRectangle(new a(z.x,Q,F.w,F.h)),He=K.applyToRectangle(new a(z.x,M,F.w,F.h)),W=b.call(this,He),H=[],te=0;te<W.length;te+=1)H.indexOf(W[te])===-1&&H.push(W[te]);if(I(H),this.autoPaging)for(var Ae=H[0],he=H[H.length-1],we=Ae;we<he+1;we++){this.pdf.setPage(we);var ye=we===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[2],Te=le-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],Me=Fe-this.margin[3],Ne=we===1?0:Ie+(we-2)*Te;if(this.ctx.clip_path.length!==0){var fe=this.path;R=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(R,this.posX+this.margin[3],-1*Ne+ye),N.call(this,"fill",!0),this.path=fe}var J=S([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Ne+ye+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*z.scale),Be=this.lineWidth,this.lineWidth=Be*z.scale);var Se=this.autoPaging!=="text";if(Se||J.y+J.h<=le){if(Se||J.y>=ye&&J.x<=Fe){var $=Se?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||Fe-J.x)[0],Ce=S([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Ne+ye+this.ctx.prevPageLastElemOffset)[0],Ee=Se&&(we>Ae||we<he)&&w.call(this);Ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,Te,null).clip().discardPath()),this.pdf.text($,Ce.x,Ce.y,{angle:z.angle,align:E,renderingMode:z.renderingMode}),Ee&&this.pdf.restoreGraphicsState()}}else J.y<le&&(this.ctx.prevPageLastElemOffset+=le-J.y);z.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Be)}else z.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*z.scale),Be=this.lineWidth,this.lineWidth=Be*z.scale),this.pdf.text(z.text,k.x+this.posX,k.y+this.posY,{angle:z.angle,align:E,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Be)},V=function(z,E,F,Q){F=F||0,Q=Q||0,this.pdf.internal.out(t(z+F)+" "+r(E+Q)+" l")},se=function(z,E,F){return this.pdf.lines(z,E,F,null,null)},ve=function(z,E,F,Q,M,k,O,K){this.pdf.internal.out([e(o(F+z)),e(s(Q+E)),e(o(M+z)),e(s(k+E)),e(o(O+z)),e(s(K+E)),"c"].join(" "))},ie=function(z,E,F,Q){for(var M=2*Math.PI,k=Math.PI/2;E>F;)E-=M;var O=Math.abs(F-E);O<M&&Q&&(O=M-O);for(var K=[],R=Q?-1:1,de=E;O>1e-5;){var Be=de+R*Math.min(O,k);K.push(ge.call(this,z,de,Be)),O-=Math.abs(Be-de),de=Be}return K},ge=function(z,E,F){var Q=(F-E)/2,M=z*Math.cos(Q),k=z*Math.sin(Q),O=M,K=-k,R=O*O+K*K,de=R+O*M+K*k,Be=4/3*(Math.sqrt(2*R*de)-de)/(O*k-K*M),Pe=O-Be*K,He=K+Be*O,W=Pe,H=-He,te=Q+E,Ae=Math.cos(te),he=Math.sin(te);return{x1:z*Math.cos(E),y1:z*Math.sin(E),x2:Pe*Ae-He*he,y2:Pe*he+He*Ae,x3:W*Ae-H*he,y3:W*he+H*Ae,x4:z*Math.cos(F),y4:z*Math.sin(F)}},re=function(z){return 180*z/Math.PI},ue=function(z,E,F,Q,M,k){var O=z+.5*(F-z),K=E+.5*(Q-E),R=M+.5*(F-M),de=k+.5*(Q-k),Be=Math.min(z,M,O,R),Pe=Math.max(z,M,O,R),He=Math.min(E,k,K,de),W=Math.max(E,k,K,de);return new a(Be,He,Pe-Be,W-He)},Z=function(z,E,F,Q,M,k,O,K){var R,de,Be,Pe,He,W,H,te,Ae,he,we,ye,Ie,le,Te=F-z,Fe=Q-E,Me=M-F,Ne=k-Q,fe=O-M,J=K-k;for(de=0;de<41;de++)Ae=(H=(Be=z+(R=de/40)*Te)+R*((He=F+R*Me)-Be))+R*(He+R*(M+R*fe-He)-H),he=(te=(Pe=E+R*Fe)+R*((W=Q+R*Ne)-Pe))+R*(W+R*(k+R*J-W)-te),de==0?(we=Ae,ye=he,Ie=Ae,le=he):(we=Math.min(we,Ae),ye=Math.min(ye,he),Ie=Math.max(Ie,Ae),le=Math.max(le,he));return new a(Math.round(we),Math.round(ye),Math.round(Ie-we),Math.round(le-ye))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,E,F=(z=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:E}));this.prevLineDash!==F&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=F)}}})(Sr.API),function(n){var e=function(s){var i,a,A,d,c,u,h,p,v,w;for(a=[],A=0,d=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;d>A;A+=4)(c=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(u=(c=((c=((c=((c=(c-(w=c%85))/85)-(v=c%85))/85)-(p=c%85))/85)-(h=c%85))/85)%85,a.push(u+33,h+33,p+33,v+33,w+33)):a.push(122);return function(b,x){for(var S=x;S>0;S--)b.pop()}(a,i.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var i,a,A,d,c,u=String,h="length",p=255,v="charCodeAt",w="slice",b="replace";for(s[w](-2),s=s[w](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),A=[],d=0,c=(s+=i="uuuuu"[w](s[h]%5||5))[h];c>d;d+=5)a=52200625*(s[v](d)-33)+614125*(s[v](d+1)-33)+7225*(s[v](d+2)-33)+85*(s[v](d+3)-33)+(s[v](d+4)-33),A.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(x,S){for(var I=S;I>0;I--)x.pop()}(A,i[h]),u.fromCharCode.apply(u,A)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var a="",A=0;A<s.length;A+=2)a+=String.fromCharCode("0x"+(s[A]+s[A+1]));return a},o=function(s){for(var i=new Uint8Array(s.length),a=s.length;a--;)i[a]=s.charCodeAt(a);return s=(i=Sm(i)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,i){var a=0,A=s||"",d=[];for(typeof(i=i||[])=="string"&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":A=t(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=o(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(Sr.API),function(n){n.loadFile=function(e,t,r){return function(o,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var a=void 0;try{a=function(A,d,c){var u=new XMLHttpRequest,h=0,p=function(v){var w=v.length,b=[],x=String.fromCharCode;for(h=0;h<w;h+=1)b.push(x(255&v.charCodeAt(h)));return b.join("")};if(u.open("GET",A,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?c(p(this.responseText)):c(void 0)}),u.send(null),d&&u.status===200)return p(u.responseText)}(o,s,i)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Sr.API),function(n){function e(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):Hs(()=>import("./html2canvas.esm.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):Hs(()=>import("./purify.es.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var a=Qn(i);return a==="undefined"?"undefined":a==="string"||i instanceof String?"string":a==="number"||i instanceof Number?"number":a==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(i,a){var A=document.createElement(i);for(var d in a.className&&(A.className=a.className),a.innerHTML&&a.dompurify&&(A.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)A.style[d]=a.style[d];return A},s=function i(a){var A=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),d=i.convert(Promise.resolve(),A);return d=(d=d.setProgress(1,i,1,[i])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,a){return i.__proto__=a||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,a){return this.then(function(){switch(a=a||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(A){return this.set({src:o("div",{innerHTML:i,dompurify:A})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function A(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(A(h,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,a(this.prop.container,A)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=this.opt.jsPDF,d=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var p=d[h],v=p.src.find(function(w){return w.format==="truetype"});v&&A.addFont(v.url,p.ref.name,p.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,A.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,a,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(i,a):this.outputPdf(i,a)},s.prototype.outputPdf=function(i,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,a)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var a=Object.keys(i||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=i[A]};switch(A){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[A]=i[A]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(i,a){return this.then(function(){var A=i in s.template.prop?this.prop[i]:this.opt[i];return a?a(A):A})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function a(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(i=i||Sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:a(i.inner.width,i.k),height:a(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,a,A,d){return i!=null&&(this.progress.val=i),a!=null&&(this.progress.state=a),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,a,A,d){return this.setProgress(i?this.progress.val+i:null,a||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(i,a){var A=this;return this.thenCore(i,a,function(d,c){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return A.updateProgress(null,d),u}).then(d,c).then(function(u){return A.updateProgress(1),u})})},s.prototype.thenCore=function(i,a,A){A=A||Promise.prototype.then,i&&(i=i.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=A.call(d,i,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(i,a){return Promise.prototype.then.call(this,i,a)},s.prototype.thenList=function(i){var a=this;return i.forEach(function(A){a=a.thenCore(A)}),a},s.prototype.catch=function(i){i&&(i=i.bind(this));var a=Promise.prototype.catch.call(this,i);return s.convert(a,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Sr.getPageSize=function(i,a,A){if(Qn(i)==="object"){var d=i;i=d.orientation,a=d.unit||a,A=d.format||A}a=a||"mm",A=A||"a4",i=(""+(i||"P")).toLowerCase();var c,u=(""+A).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var p,v=0,w=0;if(h.hasOwnProperty(u))v=h[u][1]/c,w=h[u][0]/c;else try{v=A[1],w=A[0]}catch{throw new Error("Invalid format: "+A)}if(i==="p"||i==="portrait")i="p",w>v&&(p=w,w=v,v=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",v>w&&(p=w,w=v,v=p)}return{width:w,height:v,unit:a,k:c,orientation:i}},n.html=function(i,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Tm):null;var A=new s(a);return a.worker?A:A.from(i).doCallback()}}(Sr.API),Sr.API.addJS=function(n){return xy=n,this.internal.events.subscribe("postPutResources",function(){Kf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Kf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),_y=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Kf!==void 0&&_y!==void 0&&this.internal.out("/Names <</JavaScript "+Kf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var i=o[s],a=r.exec(i);if(a!=null){var A=a[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,c=[];for(s=0;s<d;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,s){var i={title:o,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var A=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var s=0;s<o.children.length;s++)r.count++,this.count_r(r,o.children[s]);return r.count}}])}(Sr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,s,i,a){var A,d=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(A=function(u){for(var h,p=256*u.charCodeAt(4)+u.charCodeAt(5),v=u.length,w={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=p,e.indexOf(u.charCodeAt(b+1))!==-1){h=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),w={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:h,numcomponents:u.charCodeAt(b+9)};break}p=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:a,bitsPerComponent:8,filter:d,index:r,alias:o}}return c}}(Sr.API);var Kd,$f,By,zy,Cy,uN=function(){var n,e,t;function r(s){var i,a,A,d,c,u,h,p,v,w,b,x,S,I;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(i=this.readUInt32(),v=(function(){var P,N;for(N=[],P=0;P<4;++P)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*c/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,i-=4),s=(u!=null?u.data:void 0)||this.imgData,x=0;0<=i?x<i:x>i;0<=i?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((w=A-this.transparency.indexed.length)>0)for(S=0;0<=w?S<w:S>w;0<=w?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,a;for(a=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*i),A=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(u,h,p,v){var w,b,x,S,I,P,N,ee,j,D,ne,xe,L,q,V,se,ve,ie,ge,re,ue,Z=Math.ceil((d.width-u)/p),_e=Math.ceil((d.height-h)/v),z=d.width==Z&&d.height==_e;for(q=i*Z,xe=z?a:new Uint8Array(q*_e),P=s.length,L=0,b=0;L<_e&&A<P;){switch(s[A++]){case 0:for(S=ve=0;ve<q;S=ve+=1)xe[b++]=s[A++];break;case 1:for(S=ie=0;ie<q;S=ie+=1)w=s[A++],I=S<i?0:xe[b-i],xe[b++]=(w+I)%256;break;case 2:for(S=ge=0;ge<q;S=ge+=1)w=s[A++],x=(S-S%i)/i,V=L&&xe[(L-1)*q+x*i+S%i],xe[b++]=(V+w)%256;break;case 3:for(S=re=0;re<q;S=re+=1)w=s[A++],x=(S-S%i)/i,I=S<i?0:xe[b-i],V=L&&xe[(L-1)*q+x*i+S%i],xe[b++]=(w+Math.floor((I+V)/2))%256;break;case 4:for(S=ue=0;ue<q;S=ue+=1)w=s[A++],x=(S-S%i)/i,I=S<i?0:xe[b-i],L===0?V=se=0:(V=xe[(L-1)*q+x*i+S%i],se=x&&xe[(L-1)*q+(x-1)*i+S%i]),N=I+V-se,ee=Math.abs(N-I),D=Math.abs(N-V),ne=Math.abs(N-se),j=ee<=D&&ee<=ne?I:D<=ne?V:se,xe[b++]=(w+j)%256;break;default:throw new Error("Invalid filter algorithm: "+s[A-1])}if(!z){var E=((h+L*v)*d.width+u)*i,F=L*q;for(S=0;S<Z;S+=1){for(var Q=0;Q<i;Q+=1)a[E++]=xe[F++];E+=(p-1)*i}}L++}}return s=qD(s),d.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,i,a,A,d,c,u,h,p;for(a=this.palette,c=this.transparency.indexed||[],d=new Uint8Array((c.length||0)+a.length),A=0,s=0,i=u=0,h=a.length;u<h;i=u+=3)d[A++]=a[i],d[A++]=a[i+1],d[A++]=a[i+2],d[A++]=(p=c[s++])!=null?p:255;return d},r.prototype.copyToImageData=function(s,i){var a,A,d,c,u,h,p,v,w,b,x;if(A=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),A=4,a=!0),v=(d=s.data||s).length,u=w||i,c=h=0,A===1)for(;c<v;)p=w?4*i[c/4]:h,b=u[p++],d[c++]=b,d[c++]=b,d[c++]=b,d[c++]=a?u[p++]:255,h=p;else for(;c<v;)p=w?4*i[c/4]:h,d[c++]=u[p++],d[c++]=u[p++],d[c++]=u[p++],d[c++]=a?u[p++]:255,h=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{e=Qr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(s){var i;if(o()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,a,A,d,c,u,h,p;if(this.animation){for(p=[],a=c=0,u=(h=this.animation.frames).length;c<u;a=++c)i=h[a],A=s.createImageData(i.width,i.height),d=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(A,d),i.imageData=A,p.push(i.image=n(A));return p}},r.prototype.renderFrame=function(s,i){var a,A,d;return a=(A=this.animation.frames)[i],d=A[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var i,a,A,d,c,u,h=this;return a=0,u=this.animation,d=u.numFrames,A=u.frames,c=u.numPlays,(i=function(){var p,v;if(p=a++%d,v=A[p],h.renderFrame(s,p),d>1&&a/d<c)return h.animation._timeout=setTimeout(i,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(a=i.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),i.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],s=o>>7,i=1<<(7&o)+1;n[e++],n[e++];var a=null,A=null;s&&(a=e,A=i,e+=3*i);var d=!0,c=[],u=0,h=null,p=0,v=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];u=n[e++]|n[e++]<<8,h=n[e++],!(1&w)&&(h=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var b=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,P=n[e++],N=P>>6&1,ee=1<<(7&P)+1,j=a,D=A,ne=!1;P>>7&&(ne=!0,j=e,D=ee,e+=3*ee);var xe=e;for(e++;;){var L;if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}c.push({x:b,y:x,width:S,height:I,has_local_palette:ne,palette_offset:j,palette_size:D,data_offset:xe,data_length:e-xe,transparent_index:h,interlaced:!!N,delay:u,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(q){if(q<0||q>=c.length)throw new Error("Frame index out of range.");return c[q]},this.decodeAndBlitFrameBGRA=function(q,V){var se=this.frameInfo(q),ve=se.width*se.height,ie=new Uint8Array(ve);Sy(n,se.data_offset,ie,ve);var ge=se.palette_offset,re=se.transparent_index;re===null&&(re=256);var ue=se.width,Z=t-ue,_e=ue,z=4*(se.y*t+se.x),E=4*((se.y+se.height)*t+se.x),F=z,Q=4*Z;se.interlaced===!0&&(Q+=4*t*7);for(var M=8,k=0,O=ie.length;k<O;++k){var K=ie[k];if(_e===0&&(_e=ue,(F+=Q)>=E&&(Q=4*Z+4*t*(M-1),F=z+(ue+Z)*(M<<1),M>>=1)),K===re)F+=4;else{var R=n[ge+3*K],de=n[ge+3*K+1],Be=n[ge+3*K+2];V[F++]=Be,V[F++]=de,V[F++]=R,V[F++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(q,V){var se=this.frameInfo(q),ve=se.width*se.height,ie=new Uint8Array(ve);Sy(n,se.data_offset,ie,ve);var ge=se.palette_offset,re=se.transparent_index;re===null&&(re=256);var ue=se.width,Z=t-ue,_e=ue,z=4*(se.y*t+se.x),E=4*((se.y+se.height)*t+se.x),F=z,Q=4*Z;se.interlaced===!0&&(Q+=4*t*7);for(var M=8,k=0,O=ie.length;k<O;++k){var K=ie[k];if(_e===0&&(_e=ue,(F+=Q)>=E&&(Q=4*Z+4*t*(M-1),F=z+(ue+Z)*(M<<1),M>>=1)),K===re)F+=4;else{var R=n[ge+3*K],de=n[ge+3*K+1],Be=n[ge+3*K+2];V[F++]=R,V[F++]=de,V[F++]=Be,V[F++]=255}--_e}}}function Sy(n,e,t,r){for(var o=n[e++],s=1<<o,i=s+1,a=i+1,A=o+1,d=(1<<A)-1,c=0,u=0,h=0,p=n[e++],v=new Int32Array(4096),w=null;;){for(;c<16&&p!==0;)u|=n[e++]<<c,c+=8,p===1?p=n[e++]:--p;if(c<A)break;var b=u&d;if(u>>=A,c-=A,b!==s){if(b===i)break;for(var x=b<a?b:w,S=0,I=x;I>s;)I=v[I]>>8,++S;var P=I;if(h+S+(x!==b?1:0)>r)return void Dn.log("Warning, gif stream longer than expected.");t[h++]=P;var N=h+=S;for(x!==b&&(t[h++]=P),I=x;S--;)I=v[I],t[--N]=255&I,I>>=8;w!==null&&a<4096&&(v[a++]=w<<8|P,a>=d+1&&A<12&&(++A,d=d<<1|1)),w=b}else a=i+1,d=(1<<(A=o+1))-1,w=null}return h!==r&&Dn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function A0(n){var e,t,r,o,s,i=Math.floor,a=new Array(64),A=new Array(64),d=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),v=new Array(64),w=[],b=0,x=7,S=new Array(64),I=new Array(64),P=new Array(64),N=new Array(256),ee=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(z,E){for(var F=0,Q=0,M=new Array,k=1;k<=16;k++){for(var O=1;O<=z[k];O++)M[E[Q]]=[],M[E[Q]][0]=F,M[E[Q]][1]=k,Q++,F++;F*=2}return M}function ge(z){for(var E=z[0],F=z[1]-1;F>=0;)E&1<<F&&(b|=1<<x),F--,--x<0&&(b==255?(re(255),re(0)):re(b),x=7,b=0)}function re(z){w.push(z)}function ue(z){re(z>>8&255),re(255&z)}function Z(z,E,F,Q,M){for(var k,O=M[0],K=M[240],R=function(he,we){var ye,Ie,le,Te,Fe,Me,Ne,fe,J,Se,$=0;for(J=0;J<8;++J){ye=he[$],Ie=he[$+1],le=he[$+2],Te=he[$+3],Fe=he[$+4],Me=he[$+5],Ne=he[$+6];var Ce=ye+(fe=he[$+7]),Ee=ye-fe,Oe=Ie+Ne,je=Ie-Ne,ke=le+Me,pe=le-Me,Re=Te+Fe,et=Te-Fe,Je=Ce+Re,rt=Ce-Re,Ke=Oe+ke,nt=Oe-ke;he[$]=Je+Ke,he[$+4]=Je-Ke;var st=.707106781*(nt+rt);he[$+2]=rt+st,he[$+6]=rt-st;var pt=.382683433*((Je=et+pe)-(nt=je+Ee)),It=.5411961*Je+pt,Pt=1.306562965*nt+pt,St=.707106781*(Ke=pe+je),bt=Ee+St,ft=Ee-St;he[$+5]=ft+It,he[$+3]=ft-It,he[$+1]=bt+Pt,he[$+7]=bt-Pt,$+=8}for($=0,J=0;J<8;++J){ye=he[$],Ie=he[$+8],le=he[$+16],Te=he[$+24],Fe=he[$+32],Me=he[$+40],Ne=he[$+48];var jt=ye+(fe=he[$+56]),Lt=ye-fe,Et=Ie+Ne,$e=Ie-Ne,dt=le+Me,at=le-Me,Vt=Te+Fe,Jt=Te-Fe,Kt=jt+Vt,Gt=jt-Vt,er=Et+dt,Ct=Et-dt;he[$]=Kt+er,he[$+32]=Kt-er;var xt=.707106781*(Ct+Gt);he[$+16]=Gt+xt,he[$+48]=Gt-xt;var Dt=.382683433*((Kt=Jt+at)-(Ct=$e+Lt)),lr=.5411961*Kt+Dt,ur=1.306562965*Ct+Dt,hr=.707106781*(er=at+$e),fr=Lt+hr,xr=Lt-hr;he[$+40]=xr+lr,he[$+24]=xr-lr,he[$+8]=fr+ur,he[$+56]=fr-ur,$++}for(J=0;J<64;++J)Se=he[J]*we[J],p[J]=Se>0?Se+.5|0:Se-.5|0;return p}(z,E),de=0;de<64;++de)v[j[de]]=R[de];var Be=v[0]-F;F=v[0],Be==0?ge(Q[0]):(ge(Q[h[k=32767+Be]]),ge(u[k]));for(var Pe=63;Pe>0&&v[Pe]==0;)Pe--;if(Pe==0)return ge(O),F;for(var He,W=1;W<=Pe;){for(var H=W;v[W]==0&&W<=Pe;)++W;var te=W-H;if(te>=16){He=te>>4;for(var Ae=1;Ae<=He;++Ae)ge(K);te&=15}k=32767+v[W],ge(M[(te<<4)+h[k]]),ge(u[k]),W++}return Pe!=63&&ge(O),F}function _e(z){z=Math.min(Math.max(z,1),100),s!=z&&(function(E){for(var F=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var M=i((F[Q]*E+50)/100);M=Math.min(Math.max(M,1),255),a[j[Q]]=M}for(var k=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],O=0;O<64;O++){var K=i((k[O]*E+50)/100);K=Math.min(Math.max(K,1),255),A[j[O]]=K}for(var R=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,Be=0;Be<8;Be++)for(var Pe=0;Pe<8;Pe++)d[de]=1/(a[j[de]]*R[Be]*R[Pe]*8),c[de]=1/(A[j[de]]*R[Be]*R[Pe]*8),de++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),s=z)}this.encode=function(z,E){E&&_e(E),w=new Array,b=0,x=7,ue(65496),ue(65504),ue(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),ue(1),ue(1),re(0),re(0),function(){ue(65499),ue(132),re(0);for(var Ie=0;Ie<64;Ie++)re(a[Ie]);re(1);for(var le=0;le<64;le++)re(A[le])}(),function(Ie,le){ue(65472),ue(17),re(8),ue(le),ue(Ie),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(z.width,z.height),function(){ue(65476),ue(418),re(0);for(var Ie=0;Ie<16;Ie++)re(D[Ie+1]);for(var le=0;le<=11;le++)re(ne[le]);re(16);for(var Te=0;Te<16;Te++)re(xe[Te+1]);for(var Fe=0;Fe<=161;Fe++)re(L[Fe]);re(1);for(var Me=0;Me<16;Me++)re(q[Me+1]);for(var Ne=0;Ne<=11;Ne++)re(V[Ne]);re(17);for(var fe=0;fe<16;fe++)re(se[fe+1]);for(var J=0;J<=161;J++)re(ve[J])}(),ue(65498),ue(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var F=0,Q=0,M=0;b=0,x=7,this.encode.displayName="_encode_";for(var k,O,K,R,de,Be,Pe,He,W,H=z.data,te=z.width,Ae=z.height,he=4*te,we=0;we<Ae;){for(k=0;k<he;){for(de=he*we+k,Pe=-1,He=0,W=0;W<64;W++)Be=de+(He=W>>3)*he+(Pe=4*(7&W)),we+He>=Ae&&(Be-=he*(we+1+He-Ae)),k+Pe>=he&&(Be-=k+Pe-he+4),O=H[Be++],K=H[Be++],R=H[Be++],S[W]=(ee[O]+ee[K+256>>0]+ee[R+512>>0]>>16)-128,I[W]=(ee[O+768>>0]+ee[K+1024>>0]+ee[R+1280>>0]>>16)-128,P[W]=(ee[O+1280>>0]+ee[K+1536>>0]+ee[R+1792>>0]>>16)-128;F=Z(S,d,F,e,r),Q=Z(I,c,Q,t,o),M=Z(P,c,M,t,o),k+=32}we+=8}if(x>=0){var ye=[];ye[1]=x+1,ye[0]=(1<<x+1)-1,ge(ye)}return ue(65497),new Uint8Array(w)},n=n||50,function(){for(var z=String.fromCharCode,E=0;E<256;E++)N[E]=z(E)}(),e=ie(D,ne),t=ie(q,V),r=ie(xe,L),o=ie(se,ve),function(){for(var z=1,E=2,F=1;F<=15;F++){for(var Q=z;Q<E;Q++)h[32767+Q]=F,u[32767+Q]=[],u[32767+Q][1]=F,u[32767+Q][0]=Q;for(var M=-(E-1);M<=-z;M++)h[32767+M]=F,u[32767+M]=[],u[32767+M][1]=F,u[32767+M][0]=E-1+M;z<<=1,E<<=1}}(),function(){for(var z=0;z<256;z++)ee[z]=19595*z,ee[z+256>>0]=38470*z,ee[z+512>>0]=7471*z+32768,ee[z+768>>0]=-11059*z,ee[z+1024>>0]=-21709*z,ee[z+1280>>0]=32768*z+8421375,ee[z+1536>>0]=-27439*z,ee[z+1792>>0]=-5329*z}(),_e(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ey(n){function e(D){if(!D)throw Error("assert :P")}function t(D,ne,xe){for(var L=0;4>L;L++)if(D[ne+L]!=xe.charCodeAt(L))return!0;return!1}function r(D,ne,xe,L,q){for(var V=0;V<q;V++)D[ne+V]=xe[L+V]}function o(D,ne,xe,L){for(var q=0;q<L;q++)D[ne+q]=xe}function s(D){return new Int32Array(D)}function i(D,ne){for(var xe=[],L=0;L<D;L++)xe.push(new ne);return xe}function a(D,ne){var xe=[];return function L(q,V,se){for(var ve=se[V],ie=0;ie<ve&&(q.push(se.length>V+1?[]:new ne),!(se.length<V+1));ie++)L(q[ie],V+1,se)}(xe,0,D),xe}var A=function(){var D=this;function ne(f,m){for(var C=1<<m-1>>>0;f&C;)C>>>=1;return C?(f&C-1)+C:f}function xe(f,m,C,T,Y){e(!(T%C));do f[m+(T-=C)]=Y;while(0<T)}function L(f,m,C,T,Y){if(e(2328>=Y),512>=Y)var oe=s(512);else if((oe=s(Y))==null)return 0;return function(ae,ce,me,Ue,Ge,ut){var ht,tt,Qt=ce,_t=1<<me,We=s(16),Ze=s(16);for(e(Ge!=0),e(Ue!=null),e(ae!=null),e(0<me),tt=0;tt<Ge;++tt){if(15<Ue[tt])return 0;++We[Ue[tt]]}if(We[0]==Ge)return 0;for(Ze[1]=0,ht=1;15>ht;++ht){if(We[ht]>1<<ht)return 0;Ze[ht+1]=Ze[ht]+We[ht]}for(tt=0;tt<Ge;++tt)ht=Ue[tt],0<Ue[tt]&&(ut[Ze[ht]++]=tt);if(Ze[15]==1)return(Ue=new q).g=0,Ue.value=ut[0],xe(ae,Qt,1,_t,Ue),_t;var Ft,Ot=-1,Ut=_t-1,ir=0,Yt=1,_r=1,tr=1<<me;for(tt=0,ht=1,Ge=2;ht<=me;++ht,Ge<<=1){if(Yt+=_r<<=1,0>(_r-=We[ht]))return 0;for(;0<We[ht];--We[ht])(Ue=new q).g=ht,Ue.value=ut[tt++],xe(ae,Qt+ir,Ge,tr,Ue),ir=ne(ir,ht)}for(ht=me+1,Ge=2;15>=ht;++ht,Ge<<=1){if(Yt+=_r<<=1,0>(_r-=We[ht]))return 0;for(;0<We[ht];--We[ht]){if(Ue=new q,(ir&Ut)!=Ot){for(Qt+=tr,Ft=1<<(Ot=ht)-me;15>Ot&&!(0>=(Ft-=We[Ot]));)++Ot,Ft<<=1;_t+=tr=1<<(Ft=Ot-me),ae[ce+(Ot=ir&Ut)].g=Ft+me,ae[ce+Ot].value=Qt-ce-Ot}Ue.g=ht-me,Ue.value=ut[tt++],xe(ae,Qt+(ir>>me),Ge,tr,Ue),ir=ne(ir,ht)}}return Yt!=2*Ze[15]-1?0:_t}(f,m,C,T,Y,oe)}function q(){this.value=this.g=0}function V(){this.value=this.g=0}function se(){this.G=i(5,q),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(mo,V)}function ve(f,m,C,T){e(f!=null),e(m!=null),e(2147483648>T),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=m,f.pa=C,f.Jd=m,f.Yc=C+T,f.Zc=4<=T?C+T-4+1:C,k(f)}function ie(f,m){for(var C=0;0<m--;)C|=K(f,128)<<m;return C}function ge(f,m){var C=ie(f,m);return O(f)?-C:C}function re(f,m,C,T){var Y,oe=0;for(e(f!=null),e(m!=null),e(4294967288>T),f.Sb=T,f.Ra=0,f.u=0,f.h=0,4<T&&(T=4),Y=0;Y<T;++Y)oe+=m[C+Y]<<8*Y;f.Ra=oe,f.bb=T,f.oa=m,f.pa=C}function ue(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<yn-8>>>0,++f.bb,f.u-=8;F(f)&&(f.h=1,f.u=0)}function Z(f,m){if(e(0<=m),!f.h&&m<=ln){var C=E(f)&kr[m];return f.u+=m,ue(f),C}return f.h=1,f.u=0}function _e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(f){return f.Ra>>>(f.u&yn-1)>>>0}function F(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>yn}function Q(f,m){f.u=m,f.h=F(f)}function M(f){f.u>=No&&(e(f.u>=No),ue(f))}function k(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function O(f){return ie(f,1)}function K(f,m){var C=f.Ca;0>f.b&&k(f);var T=f.b,Y=C*m>>>8,oe=(f.I>>>T>Y)+0;for(oe?(C-=Y,f.I-=Y+1<<T>>>0):C=Y+1,T=C,Y=0;256<=T;)Y+=8,T>>=8;return T=7^Y+qn[T],f.b-=T,f.Ca=(C<<T)-1,oe}function R(f,m,C){f[m+0]=C>>24&255,f[m+1]=C>>16&255,f[m+2]=C>>8&255,f[m+3]=C>>0&255}function de(f,m){return f[m+0]<<0|f[m+1]<<8}function Be(f,m){return de(f,m)|f[m+2]<<16}function Pe(f,m){return de(f,m)|de(f,m+2)<<16}function He(f,m){var C=1<<m;return e(f!=null),e(0<m),f.X=s(C),f.X==null?0:(f.Mb=32-m,f.Xa=m,1)}function W(f,m){e(f!=null),e(m!=null),e(f.Xa==m.Xa),r(m.X,0,f.X,0,1<<m.Xa)}function H(){this.X=[],this.Xa=this.Mb=0}function te(f,m,C,T){e(C!=null),e(T!=null);var Y=C[0],oe=T[0];return Y==0&&(Y=(f*oe+m/2)/m),oe==0&&(oe=(m*Y+f/2)/f),0>=Y||0>=oe?0:(C[0]=Y,T[0]=oe,1)}function Ae(f,m){return f+(1<<m)-1>>>m}function he(f,m){return((4278255360&f)+(4278255360&m)>>>0&4278255360)+((16711935&f)+(16711935&m)>>>0&16711935)>>>0}function we(f,m){D[m]=function(C,T,Y,oe,ae,ce,me){var Ue;for(Ue=0;Ue<ae;++Ue){var Ge=D[f](ce[me+Ue-1],Y,oe+Ue);ce[me+Ue]=he(C[T+Ue],Ge)}}}function ye(){this.ud=this.hd=this.jd=0}function Ie(f,m){return((4278124286&(f^m))>>>1)+(f&m)>>>0}function le(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Te(f,m){return le(f+(f-m+.5>>1))}function Fe(f,m,C){return Math.abs(m-C)-Math.abs(f-C)}function Me(f,m,C,T,Y,oe,ae){for(T=oe[ae-1],C=0;C<Y;++C)oe[ae+C]=T=he(f[m+C],T)}function Ne(f,m,C,T,Y){var oe;for(oe=0;oe<C;++oe){var ae=f[m+oe],ce=ae>>8&255,me=16711935&(me=(me=16711935&ae)+((ce<<16)+ce));T[Y+oe]=(4278255360&ae)+me>>>0}}function fe(f,m){m.jd=f>>0&255,m.hd=f>>8&255,m.ud=f>>16&255}function J(f,m,C,T,Y,oe){var ae;for(ae=0;ae<T;++ae){var ce=m[C+ae],me=ce>>>8,Ue=ce,Ge=255&(Ge=(Ge=ce>>>16)+((f.jd<<24>>24)*(me<<24>>24)>>>5));Ue=255&(Ue=(Ue=Ue+((f.hd<<24>>24)*(me<<24>>24)>>>5))+((f.ud<<24>>24)*(Ge<<24>>24)>>>5)),Y[oe+ae]=(4278255360&ce)+(Ge<<16)+Ue}}function Se(f,m,C,T,Y){D[m]=function(oe,ae,ce,me,Ue,Ge,ut,ht,tt){for(me=ut;me<ht;++me)for(ut=0;ut<tt;++ut)Ue[Ge++]=Y(ce[T(oe[ae++])])},D[f]=function(oe,ae,ce,me,Ue,Ge,ut){var ht=8>>oe.b,tt=oe.Ea,Qt=oe.K[0],_t=oe.w;if(8>ht)for(oe=(1<<oe.b)-1,_t=(1<<ht)-1;ae<ce;++ae){var We,Ze=0;for(We=0;We<tt;++We)We&oe||(Ze=T(me[Ue++])),Ge[ut++]=Y(Qt[Ze&_t]),Ze>>=ht}else D["VP8LMapColor"+C](me,Ue,Qt,_t,Ge,ut,ae,ce,tt)}}function $(f,m,C,T,Y){for(C=m+C;m<C;){var oe=f[m++];T[Y++]=oe>>16&255,T[Y++]=oe>>8&255,T[Y++]=oe>>0&255}}function Ce(f,m,C,T,Y){for(C=m+C;m<C;){var oe=f[m++];T[Y++]=oe>>16&255,T[Y++]=oe>>8&255,T[Y++]=oe>>0&255,T[Y++]=oe>>24&255}}function Ee(f,m,C,T,Y){for(C=m+C;m<C;){var oe=(ae=f[m++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;T[Y++]=oe,T[Y++]=ae}}function Oe(f,m,C,T,Y){for(C=m+C;m<C;){var oe=(ae=f[m++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;T[Y++]=oe,T[Y++]=ae}}function je(f,m,C,T,Y){for(C=m+C;m<C;){var oe=f[m++];T[Y++]=oe>>0&255,T[Y++]=oe>>8&255,T[Y++]=oe>>16&255}}function ke(f,m,C,T,Y,oe){if(oe==0)for(C=m+C;m<C;)R(T,((oe=f[m++])[0]>>24|oe[1]>>8&65280|oe[2]<<8&16711680|oe[3]<<24)>>>0),Y+=32;else r(T,Y,f,m,C)}function pe(f,m){D[m][0]=D[f+"0"],D[m][1]=D[f+"1"],D[m][2]=D[f+"2"],D[m][3]=D[f+"3"],D[m][4]=D[f+"4"],D[m][5]=D[f+"5"],D[m][6]=D[f+"6"],D[m][7]=D[f+"7"],D[m][8]=D[f+"8"],D[m][9]=D[f+"9"],D[m][10]=D[f+"10"],D[m][11]=D[f+"11"],D[m][12]=D[f+"12"],D[m][13]=D[f+"13"],D[m][14]=D[f+"0"],D[m][15]=D[f+"0"]}function Re(f){return f==Yg||f==Jg||f==Sh||f==Zg}function et(){this.eb=[],this.size=this.A=this.fb=0}function Je(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new et,this.f.kb=new Je,this.sd=null}function Ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function nt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function st(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function pt(f,m){var C=f.T,T=m.ba.f.RGBA,Y=T.eb,oe=T.fb+f.ka*T.A,ae=Qi[m.ba.S],ce=f.y,me=f.O,Ue=f.f,Ge=f.N,ut=f.ea,ht=f.W,tt=m.cc,Qt=m.dc,_t=m.Mc,We=m.Nc,Ze=f.ka,Ft=f.ka+f.T,Ot=f.U,Ut=Ot+1>>1;for(Ze==0?ae(ce,me,null,null,Ue,Ge,ut,ht,Ue,Ge,ut,ht,Y,oe,null,null,Ot):(ae(m.ec,m.fc,ce,me,tt,Qt,_t,We,Ue,Ge,ut,ht,Y,oe-T.A,Y,oe,Ot),++C);Ze+2<Ft;Ze+=2)tt=Ue,Qt=Ge,_t=ut,We=ht,Ge+=f.Rc,ht+=f.Rc,oe+=2*T.A,ae(ce,(me+=2*f.fa)-f.fa,ce,me,tt,Qt,_t,We,Ue,Ge,ut,ht,Y,oe-T.A,Y,oe,Ot);return me+=f.fa,f.j+Ft<f.o?(r(m.ec,m.fc,ce,me,Ot),r(m.cc,m.dc,Ue,Ge,Ut),r(m.Mc,m.Nc,ut,ht,Ut),C--):1&Ft||ae(ce,me,null,null,Ue,Ge,ut,ht,Ue,Ge,ut,ht,Y,oe+T.A,null,null,Ot),C}function It(f,m,C){var T=f.F,Y=[f.J];if(T!=null){var oe=f.U,ae=m.ba.S,ce=ae==Ch||ae==Sh;m=m.ba.f.RGBA;var me=[0],Ue=f.ka;me[0]=f.T,f.Kb&&(Ue==0?--me[0]:(--Ue,Y[0]-=f.width),f.j+f.ka+f.T==f.o&&(me[0]=f.o-f.j-Ue));var Ge=m.eb;Ue=m.fb+Ue*m.A,f=$n(T,Y[0],f.width,oe,me,Ge,Ue+(ce?0:3),m.A),e(C==me),f&&Re(ae)&&Ii(Ge,Ue,ce,oe,me,m.A)}return 0}function Pt(f){var m=f.ma,C=m.ba.S,T=11>C,Y=C==Bh||C==zh||C==Ch||C==Xg||C==12||Re(C);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!ao(m.Oa,f,Y?11:12))return 0;if(Y&&Re(C)&&kt(),f.da)alert("todo:use_scaling");else{if(T){if(m.Ib=st,f.Kb){if(C=f.U+1>>1,m.memory=s(f.U+2*C),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+f.U,m.Mc=m.cc,m.Nc=m.dc+C,m.Ib=pt,kt()}}else alert("todo:EmitYUV");Y&&(m.Jb=It,T&&ot())}if(T&&!_2){for(f=0;256>f;++f)BC[f]=89858*(f-128)+Fh>>Eh,SC[f]=-22014*(f-128)+Fh,CC[f]=-45773*(f-128),zC[f]=113618*(f-128)+Fh>>Eh;for(f=Gc;f<rv;++f)m=76283*(f-16)+Fh>>Eh,EC[f-Gc]=os(m,255),FC[f-Gc]=os(m+8>>4,15);_2=1}return 1}function St(f){var m=f.ma,C=f.U,T=f.T;return e(!(1&f.ka)),0>=C||0>=T?0:(C=m.Ib(f,m),m.Jb!=null&&m.Jb(f,m,C),m.Dc+=C,1)}function bt(f){f.ma.memory=null}function ft(f,m,C,T){return Z(f,8)!=47?0:(m[0]=Z(f,14)+1,C[0]=Z(f,14)+1,T[0]=Z(f,1),Z(f,3)!=0?0:!f.h)}function jt(f,m){if(4>f)return f+1;var C=f-2>>1;return(2+(1&f)<<C)+Z(m,C)+1}function Lt(f,m){return 120<m?m-120:1<=(C=((C=dC[m-1])>>4)*f+(8-(15&C)))?C:1;var C}function Et(f,m,C){var T=E(C),Y=f[m+=255&T].g-8;return 0<Y&&(Q(C,C.u+8),T=E(C),m+=f[m].value,m+=T&(1<<Y)-1),Q(C,C.u+f[m].g),f[m].value}function $e(f,m,C){return C.g+=f.g,C.value+=f.value<<m>>>0,e(8>=C.g),f.g}function dt(f,m,C){var T=f.xc;return e((m=T==0?0:f.vc[f.md*(C>>T)+(m>>T)])<f.Wb),f.Ya[m]}function at(f,m,C,T){var Y=f.ab,oe=f.c*m,ae=f.C;m=ae+m;var ce=C,me=T;for(T=f.Ta,C=f.Ua;0<Y--;){var Ue=f.gc[Y],Ge=ae,ut=m,ht=ce,tt=me,Qt=(me=T,ce=C,Ue.Ea);switch(e(Ge<ut),e(ut<=Ue.nc),Ue.hc){case 2:ci(ht,tt,(ut-Ge)*Qt,me,ce);break;case 0:var _t=Ge,We=ut,Ze=me,Ft=ce,Ot=(tr=Ue).Ea;_t==0&&(Mo(ht,tt,null,null,1,Ze,Ft),Me(ht,tt+1,0,0,Ot-1,Ze,Ft+1),tt+=Ot,Ft+=Ot,++_t);for(var Ut=1<<tr.b,ir=Ut-1,Yt=Ae(Ot,tr.b),_r=tr.K,tr=tr.w+(_t>>tr.b)*Yt;_t<We;){var mn=_r,Fn=tr,hn=1;for(Ao(ht,tt,Ze,Ft-Ot,1,Ze,Ft);hn<Ot;){var en=(hn&~ir)+Ut;en>Ot&&(en=Ot),(0,xa[mn[Fn++]>>8&15])(ht,tt+ +hn,Ze,Ft+hn-Ot,en-hn,Ze,Ft+hn),hn=en}tt+=Ot,Ft+=Ot,++_t&ir||(tr+=Yt)}ut!=Ue.nc&&r(me,ce-Qt,me,ce+(ut-Ge-1)*Qt,Qt);break;case 1:for(Qt=ht,We=tt,Ot=(ht=Ue.Ea)-(Ft=ht&~(Ze=(tt=1<<Ue.b)-1)),_t=Ae(ht,Ue.b),Ut=Ue.K,Ue=Ue.w+(Ge>>Ue.b)*_t;Ge<ut;){for(ir=Ut,Yt=Ue,_r=new ye,tr=We+Ft,mn=We+ht;We<tr;)fe(ir[Yt++],_r),tA(_r,Qt,We,tt,me,ce),We+=tt,ce+=tt;We<mn&&(fe(ir[Yt++],_r),tA(_r,Qt,We,Ot,me,ce),We+=Ot,ce+=Ot),++Ge&Ze||(Ue+=_t)}break;case 3:if(ht==me&&tt==ce&&0<Ue.b){for(We=me,ht=Qt=ce+(ut-Ge)*Qt-(Ft=(ut-Ge)*Ae(Ue.Ea,Ue.b)),tt=me,Ze=ce,_t=[],Ft=(Ot=Ft)-1;0<=Ft;--Ft)_t[Ft]=tt[Ze+Ft];for(Ft=Ot-1;0<=Ft;--Ft)We[ht+Ft]=_t[Ft];Xo(Ue,Ge,ut,me,Qt,me,ce)}else Xo(Ue,Ge,ut,ht,tt,me,ce)}ce=T,me=C}me!=C&&r(T,C,ce,me,oe)}function Vt(f,m){var C=f.V,T=f.Ba+f.c*f.C,Y=m-f.C;if(e(m<=f.l.o),e(16>=Y),0<Y){var oe=f.l,ae=f.Ta,ce=f.Ua,me=oe.width;if(at(f,Y,C,T),Y=ce=[ce],e((C=f.C)<(T=m)),e(oe.v<oe.va),T>oe.o&&(T=oe.o),C<oe.j){var Ue=oe.j-C;C=oe.j,Y[0]+=Ue*me}if(C>=T?C=0:(Y[0]+=4*oe.v,oe.ka=C-oe.j,oe.U=oe.va-oe.v,oe.T=T-C,C=1),C){if(ce=ce[0],11>(C=f.ca).S){var Ge=C.f.RGBA,ut=(T=C.S,Y=oe.U,oe=oe.T,Ue=Ge.eb,Ge.A),ht=oe;for(Ge=Ge.fb+f.Ma*Ge.A;0<ht--;){var tt=ae,Qt=ce,_t=Y,We=Ue,Ze=Ge;switch(T){case xh:is(tt,Qt,_t,We,Ze);break;case Bh:as(tt,Qt,_t,We,Ze);break;case Yg:as(tt,Qt,_t,We,Ze),Ii(We,Ze,0,_t,1,0);break;case h2:ui(tt,Qt,_t,We,Ze);break;case zh:ke(tt,Qt,_t,We,Ze,1);break;case Jg:ke(tt,Qt,_t,We,Ze,1),Ii(We,Ze,0,_t,1,0);break;case Ch:ke(tt,Qt,_t,We,Ze,0);break;case Sh:ke(tt,Qt,_t,We,Ze,0),Ii(We,Ze,1,_t,1,0);break;case Xg:Is(tt,Qt,_t,We,Ze);break;case Zg:Is(tt,Qt,_t,We,Ze),Kn(We,Ze,_t,1,0);break;case f2:As(tt,Qt,_t,We,Ze);break;default:e(0)}ce+=me,Ge+=ut}f.Ma+=oe}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=C.height)}}f.C=m,e(f.C<=f.i)}function Jt(f){var m;if(0<f.ua)return 0;for(m=0;m<f.Wb;++m){var C=f.Ya[m].G,T=f.Ya[m].H;if(0<C[1][T[1]+0].g||0<C[2][T[2]+0].g||0<C[3][T[3]+0].g)return 0}return 1}function Kt(f,m,C,T,Y,oe){if(f.Z!=0){var ae=f.qd,ce=f.rd;for(e(DA[f.Z]!=null);m<C;++m)DA[f.Z](ae,ce,T,Y,T,Y,oe),ae=T,ce=Y,Y+=oe;f.qd=ae,f.rd=ce}}function Gt(f,m){var C=f.l.ma,T=C.Z==0||C.Z==1?f.l.j:f.C;if(T=f.C<T?T:f.C,e(m<=f.l.o),m>T){var Y=f.l.width,oe=C.ca,ae=C.tb+Y*T,ce=f.V,me=f.Ba+f.c*T,Ue=f.gc;e(f.ab==1),e(Ue[0].hc==3),xl(Ue[0],T,m,ce,me,oe,ae),Kt(C,T,m,oe,ae,Y)}f.C=f.Ma=m}function er(f,m,C,T,Y,oe,ae){var ce=f.$/T,me=f.$%T,Ue=f.m,Ge=f.s,ut=C+f.$,ht=ut;Y=C+T*Y;var tt=C+T*oe,Qt=280+Ge.ua,_t=f.Pb?ce:16777216,We=0<Ge.ua?Ge.Wa:null,Ze=Ge.wc,Ft=ut<tt?dt(Ge,me,ce):null;e(f.C<oe),e(tt<=Y);var Ot=!1;e:for(;;){for(;Ot||ut<tt;){var Ut=0;if(ce>=_t){var ir=ut-C;e((_t=f).Pb),_t.wd=_t.m,_t.xd=ir,0<_t.s.ua&&W(_t.s.Wa,_t.s.vb),_t=ce+uC}if(me&Ze||(Ft=dt(Ge,me,ce)),e(Ft!=null),Ft.Qb&&(m[ut]=Ft.qb,Ot=!0),!Ot)if(M(Ue),Ft.jc){Ut=Ue,ir=m;var Yt=ut,_r=Ft.pd[E(Ut)&mo-1];e(Ft.jc),256>_r.g?(Q(Ut,Ut.u+_r.g),ir[Yt]=_r.value,Ut=0):(Q(Ut,Ut.u+_r.g-256),e(256<=_r.value),Ut=_r.value),Ut==0&&(Ot=!0)}else Ut=Et(Ft.G[0],Ft.H[0],Ue);if(Ue.h)break;if(Ot||256>Ut){if(!Ot)if(Ft.nd)m[ut]=(Ft.qb|Ut<<8)>>>0;else{if(M(Ue),Ot=Et(Ft.G[1],Ft.H[1],Ue),M(Ue),ir=Et(Ft.G[2],Ft.H[2],Ue),Yt=Et(Ft.G[3],Ft.H[3],Ue),Ue.h)break;m[ut]=(Yt<<24|Ot<<16|Ut<<8|ir)>>>0}if(Ot=!1,++ut,++me>=T&&(me=0,++ce,ae!=null&&ce<=oe&&!(ce%16)&&ae(f,ce),We!=null))for(;ht<ut;)Ut=m[ht++],We.X[(506832829*Ut&4294967295)>>>We.Mb]=Ut}else if(280>Ut){if(Ut=jt(Ut-256,Ue),ir=Et(Ft.G[4],Ft.H[4],Ue),M(Ue),ir=Lt(T,ir=jt(ir,Ue)),Ue.h)break;if(ut-C<ir||Y-ut<Ut)break e;for(Yt=0;Yt<Ut;++Yt)m[ut+Yt]=m[ut+Yt-ir];for(ut+=Ut,me+=Ut;me>=T;)me-=T,++ce,ae!=null&&ce<=oe&&!(ce%16)&&ae(f,ce);if(e(ut<=Y),me&Ze&&(Ft=dt(Ge,me,ce)),We!=null)for(;ht<ut;)Ut=m[ht++],We.X[(506832829*Ut&4294967295)>>>We.Mb]=Ut}else{if(!(Ut<Qt))break e;for(Ot=Ut-280,e(We!=null);ht<ut;)Ut=m[ht++],We.X[(506832829*Ut&4294967295)>>>We.Mb]=Ut;Ut=ut,e(!(Ot>>>(ir=We).Xa)),m[Ut]=ir.X[Ot],Ot=!0}Ot||e(Ue.h==F(Ue))}if(f.Pb&&Ue.h&&ut<Y)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&W(f.s.vb,f.s.Wa);else{if(Ue.h)break e;ae!=null&&ae(f,ce>oe?oe:ce),f.a=0,f.$=ut-C}return 1}return f.a=3,0}function Ct(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var m=f.Wa;m!=null&&(m.X=null),f.vb=null,e(f!=null)}function xt(){var f=new LA;return f==null?null:(f.a=0,f.xb=v2,pe("Predictor","VP8LPredictors"),pe("Predictor","VP8LPredictors_C"),pe("PredictorAdd","VP8LPredictorsAdd"),pe("PredictorAdd","VP8LPredictorsAdd_C"),ci=Ne,tA=J,is=$,as=Ce,Is=Ee,As=Oe,ui=je,D.VP8LMapColor32b=eA,D.VP8LMapColor8b=gd,f)}function Dt(f,m,C,T,Y){var oe=1,ae=[f],ce=[m],me=T.m,Ue=T.s,Ge=null,ut=0;e:for(;;){if(C)for(;oe&&Z(me,1);){var ht=ae,tt=ce,Qt=T,_t=1,We=Qt.m,Ze=Qt.gc[Qt.ab],Ft=Z(We,2);if(Qt.Oc&1<<Ft)oe=0;else{switch(Qt.Oc|=1<<Ft,Ze.hc=Ft,Ze.Ea=ht[0],Ze.nc=tt[0],Ze.K=[null],++Qt.ab,e(4>=Qt.ab),Ft){case 0:case 1:Ze.b=Z(We,3)+2,_t=Dt(Ae(Ze.Ea,Ze.b),Ae(Ze.nc,Ze.b),0,Qt,Ze.K),Ze.K=Ze.K[0];break;case 3:var Ot,Ut=Z(We,8)+1,ir=16<Ut?0:4<Ut?1:2<Ut?2:3;if(ht[0]=Ae(Ze.Ea,ir),Ze.b=ir,Ot=_t=Dt(Ut,1,0,Qt,Ze.K)){var Yt,_r=Ut,tr=Ze,mn=1<<(8>>tr.b),Fn=s(mn);if(Fn==null)Ot=0;else{var hn=tr.K[0],en=tr.w;for(Fn[0]=tr.K[0][0],Yt=1;Yt<1*_r;++Yt)Fn[Yt]=he(hn[en+Yt],Fn[Yt-1]);for(;Yt<4*mn;++Yt)Fn[Yt]=0;tr.K[0]=null,tr.K[0]=Fn,Ot=1}}_t=Ot;break;case 2:break;default:e(0)}oe=_t}}if(ae=ae[0],ce=ce[0],oe&&Z(me,1)&&!(oe=1<=(ut=Z(me,4))&&11>=ut)){T.a=3;break e}var On;if(On=oe)t:{var Pn,Nr,To,Vs=T,Lo=ae,Gs=ce,In=ut,fi=C,pi=Vs.m,Yo=Vs.s,ls=[null],Qs=1,Ti=0,Ba=cC[In];r:for(;;){if(fi&&Z(pi,1)){var Jo=Z(pi,3)+2,sA=Ae(Lo,Jo),El=Ae(Gs,Jo),yd=sA*El;if(!Dt(sA,El,0,Vs,ls))break r;for(ls=ls[0],Yo.xc=Jo,Pn=0;Pn<yd;++Pn){var NA=ls[Pn]>>8&65535;ls[Pn]=NA,NA>=Qs&&(Qs=NA+1)}}if(pi.h)break r;for(Nr=0;5>Nr;++Nr){var po=p2[Nr];!Nr&&0<In&&(po+=1<<In),Ti<po&&(Ti=po)}var nv=i(Qs*Ba,q),z2=Qs,C2=i(z2,se);if(C2==null)var Uh=null;else e(65536>=z2),Uh=C2;var Wc=s(Ti);if(Uh==null||Wc==null||nv==null){Vs.a=1;break r}var Qh=nv;for(Pn=To=0;Pn<Qs;++Pn){var $i=Uh[Pn],_d=$i.G,xd=$i.H,S2=0,Th=1,E2=0;for(Nr=0;5>Nr;++Nr){po=p2[Nr],_d[Nr]=Qh,xd[Nr]=To,!Nr&&0<In&&(po+=1<<In);o:{var Lh,ov=po,Ph=Vs,Xc=Wc,QC=Qh,TC=To,sv=0,MA=Ph.m,LC=Z(MA,1);if(o(Xc,0,0,ov),LC){var PC=Z(MA,1)+1,kC=Z(MA,1),F2=Z(MA,kC==0?1:8);Xc[F2]=1,PC==2&&(Xc[F2=Z(MA,8)]=1);var kh=1}else{var I2=s(19),U2=Z(MA,4)+4;if(19<U2){Ph.a=3;var Oh=0;break o}for(Lh=0;Lh<U2;++Lh)I2[lC[Lh]]=Z(MA,3);var iv=void 0,Yc=void 0,Q2=Ph,OC=I2,Dh=ov,T2=Xc,av=0,HA=Q2.m,L2=8,P2=i(128,q);n:for(;L(P2,0,7,OC,19);){if(Z(HA,1)){var DC=2+2*Z(HA,3);if((iv=2+Z(HA,DC))>Dh)break n}else iv=Dh;for(Yc=0;Yc<Dh&&iv--;){M(HA);var k2=P2[0+(127&E(HA))];Q(HA,HA.u+k2.g);var Bd=k2.value;if(16>Bd)T2[Yc++]=Bd,Bd!=0&&(L2=Bd);else{var NC=Bd==16,O2=Bd-16,MC=aC[O2],D2=Z(HA,iC[O2])+MC;if(Yc+D2>Dh)break n;for(var HC=NC?L2:0;0<D2--;)T2[Yc++]=HC}}av=1;break n}av||(Q2.a=3),kh=av}(kh=kh&&!MA.h)&&(sv=L(QC,TC,8,Xc,ov)),kh&&sv!=0?Oh=sv:(Ph.a=3,Oh=0)}if(Oh==0)break r;if(Th&&AC[Nr]==1&&(Th=Qh[To].g==0),S2+=Qh[To].g,To+=Oh,3>=Nr){var Jc,Av=Wc[0];for(Jc=1;Jc<po;++Jc)Wc[Jc]>Av&&(Av=Wc[Jc]);E2+=Av}}if($i.nd=Th,$i.Qb=0,Th&&($i.qb=(_d[3][xd[3]+0].value<<24|_d[1][xd[1]+0].value<<16|_d[2][xd[2]+0].value)>>>0,S2==0&&256>_d[0][xd[0]+0].value&&($i.Qb=1,$i.qb+=_d[0][xd[0]+0].value<<8)),$i.jc=!$i.Qb&&6>E2,$i.jc){var Nh,iA=$i;for(Nh=0;Nh<mo;++Nh){var jA=Nh,RA=iA.pd[jA],Mh=iA.G[0][iA.H[0]+jA];256<=Mh.value?(RA.g=Mh.g+256,RA.value=Mh.value):(RA.g=0,RA.value=0,jA>>=$e(Mh,8,RA),jA>>=$e(iA.G[1][iA.H[1]+jA],16,RA),jA>>=$e(iA.G[2][iA.H[2]+jA],0,RA),$e(iA.G[3][iA.H[3]+jA],24,RA))}}}Yo.vc=ls,Yo.Wb=Qs,Yo.Ya=Uh,Yo.yc=nv,On=1;break t}On=0}if(!(oe=On)){T.a=3;break e}if(0<ut){if(Ue.ua=1<<ut,!He(Ue.Wa,ut)){T.a=1,oe=0;break e}}else Ue.ua=0;var lv=T,N2=ae,jC=ce,dv=lv.s,cv=dv.xc;if(lv.c=N2,lv.i=jC,dv.md=Ae(N2,cv),dv.wc=cv==0?-1:(1<<cv)-1,C){T.xb=wC;break e}if((Ge=s(ae*ce))==null){T.a=1,oe=0;break e}oe=(oe=er(T,Ge,0,ae,ce,ce,null))&&!me.h;break e}return oe?(Y!=null?Y[0]=Ge:(e(Ge==null),e(C)),T.$=0,C||Ct(Ue)):Ct(Ue),oe}function lr(f,m){var C=f.c*f.i,T=C+m+16*m;return e(f.c<=m),f.V=s(T),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+C+m,1)}function ur(f,m){var C=f.C,T=m-C,Y=f.V,oe=f.Ba+f.c*C;for(e(m<=f.l.o);0<T;){var ae=16<T?16:T,ce=f.l.ma,me=f.l.width,Ue=me*ae,Ge=ce.ca,ut=ce.tb+me*C,ht=f.Ta,tt=f.Ua;at(f,ae,Y,oe),bo(ht,tt,Ge,ut,Ue),Kt(ce,C,C+ae,Ge,ut,me),T-=ae,Y+=ae*f.c,C+=ae}e(C==m),f.C=f.Ma=m}function hr(){this.ub=this.yd=this.td=this.Rb=0}function fr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function un(){this.Yb=function(){var f=[];return function m(C,T,Y){for(var oe=Y[T],ae=0;ae<oe&&(C.push(Y.length>T+1?[]:0),!(Y.length<T+1));ae++)m(C[ae],T+1,Y)}(f,0,[3,11]),f}()}function wn(){this.jb=s(3),this.Wc=a([4,8],un),this.Xc=a([4,17],un)}function Dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Cr(){this.ld=this.La=this.dd=this.tc=0}function Vr(){this.Na=this.la=0}function jr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ir(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Br(){this.uc=this.M=this.Nb=0,this.wa=Array(new Cr),this.Y=0,this.ya=Array(new Ir),this.aa=0,this.l=new bn}function Gr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Xr(){this.cb=this.a=0,this.sc="",this.m=new _e,this.Od=new hr,this.Kc=new fr,this.ed=new Dr,this.Qa=new xr,this.Ic=this.$c=this.Aa=0,this.D=new Br,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,_e),this.ia=0,this.pb=i(4,jr),this.Pa=new wn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gr),this.Hd=0,this.rb=Array(new Vr),this.sb=0,this.wa=Array(new Cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ir),this.L=this.aa=0,this.gd=a([4,2],Cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wr(){var f=new Xr;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Vc||(Vc=ho)),f}function mr(f,m,C){return f.a==0&&(f.a=m,f.sc=C,f.cb=0),0}function Tn(f,m,C){return 3<=C&&f[m+0]==157&&f[m+1]==1&&f[m+2]==42}function Oo(f,m){if(f==null)return 0;if(f.a=0,f.sc="OK",m==null)return mr(f,2,"null VP8Io passed to VP8GetHeaders()");var C=m.data,T=m.w,Y=m.ha;if(4>Y)return mr(f,7,"Truncated header.");var oe=C[T+0]|C[T+1]<<8|C[T+2]<<16,ae=f.Od;if(ae.Rb=!(1&oe),ae.td=oe>>1&7,ae.yd=oe>>4&1,ae.ub=oe>>5,3<ae.td)return mr(f,3,"Incorrect keyframe parameters.");if(!ae.yd)return mr(f,4,"Frame not displayable.");T+=3,Y-=3;var ce=f.Kc;if(ae.Rb){if(7>Y)return mr(f,7,"cannot parse picture header");if(!Tn(C,T,Y))return mr(f,3,"Bad code word");ce.c=16383&(C[T+4]<<8|C[T+3]),ce.Td=C[T+4]>>6,ce.i=16383&(C[T+6]<<8|C[T+5]),ce.Ud=C[T+6]>>6,T+=7,Y-=7,f.za=ce.c+15>>4,f.Ub=ce.i+15>>4,m.width=ce.c,m.height=ce.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,o((oe=f.Pa).jb,0,255,oe.jb.length),e((oe=f.Qa)!=null),oe.Cb=0,oe.Bb=0,oe.Fb=1,o(oe.Zb,0,0,oe.Zb.length),o(oe.Lb,0,0,oe.Lb)}if(ae.ub>Y)return mr(f,7,"bad partition length");ve(oe=f.m,C,T,ae.ub),T+=ae.ub,Y-=ae.ub,ae.Rb&&(ce.Ld=O(oe),ce.Kd=O(oe)),ce=f.Qa;var me,Ue=f.Pa;if(e(oe!=null),e(ce!=null),ce.Cb=O(oe),ce.Cb){if(ce.Bb=O(oe),O(oe)){for(ce.Fb=O(oe),me=0;4>me;++me)ce.Zb[me]=O(oe)?ge(oe,7):0;for(me=0;4>me;++me)ce.Lb[me]=O(oe)?ge(oe,6):0}if(ce.Bb)for(me=0;3>me;++me)Ue.jb[me]=O(oe)?ie(oe,8):255}else ce.Bb=0;if(oe.Ka)return mr(f,3,"cannot parse segment header");if((ce=f.ed).zd=O(oe),ce.Tb=ie(oe,6),ce.wb=ie(oe,3),ce.Pc=O(oe),ce.Pc&&O(oe)){for(Ue=0;4>Ue;++Ue)O(oe)&&(ce.vd[Ue]=ge(oe,6));for(Ue=0;4>Ue;++Ue)O(oe)&&(ce.od[Ue]=ge(oe,6))}if(f.L=ce.Tb==0?0:ce.zd?1:2,oe.Ka)return mr(f,3,"cannot parse filter header");var Ge=Y;if(Y=me=T,T=me+Ge,ce=Ge,f.Xb=(1<<ie(f.m,2))-1,Ge<3*(Ue=f.Xb))C=7;else{for(me+=3*Ue,ce-=3*Ue,Ge=0;Ge<Ue;++Ge){var ut=C[Y+0]|C[Y+1]<<8|C[Y+2]<<16;ut>ce&&(ut=ce),ve(f.Jc[+Ge],C,me,ut),me+=ut,ce-=ut,Y+=3}ve(f.Jc[+Ue],C,me,ce),C=me<T?0:5}if(C!=0)return mr(f,C,"cannot parse partitions");for(C=ie(me=f.m,7),Y=O(me)?ge(me,4):0,T=O(me)?ge(me,4):0,ce=O(me)?ge(me,4):0,Ue=O(me)?ge(me,4):0,me=O(me)?ge(me,4):0,Ge=f.Qa,ut=0;4>ut;++ut){if(Ge.Cb){var ht=Ge.Zb[ut];Ge.Fb||(ht+=C)}else{if(0<ut){f.pb[ut]=f.pb[0];continue}ht=C}var tt=f.pb[ut];tt.Sc[0]=ev[os(ht+Y,127)],tt.Sc[1]=tv[os(ht+0,127)],tt.Eb[0]=2*ev[os(ht+T,127)],tt.Eb[1]=101581*tv[os(ht+ce,127)]>>16,8>tt.Eb[1]&&(tt.Eb[1]=8),tt.Qc[0]=ev[os(ht+Ue,117)],tt.Qc[1]=tv[os(ht+me,127)],tt.lc=ht+me}if(!ae.Rb)return mr(f,4,"Not a key frame.");for(O(oe),ae=f.Pa,C=0;4>C;++C){for(Y=0;8>Y;++Y)for(T=0;3>T;++T)for(ce=0;11>ce;++ce)Ue=K(oe,vC[C][Y][T][ce])?ie(oe,8):pC[C][Y][T][ce],ae.Wc[C][Y].Yb[T][ce]=Ue;for(Y=0;17>Y;++Y)ae.Xc[C][Y]=ae.Wc[C][mC[Y]]}return f.kc=O(oe),f.kc&&(f.Bd=ie(oe,8)),f.cb=1}function ho(f,m,C,T,Y,oe,ae){var ce=m[Y].Yb[C];for(C=0;16>Y;++Y){if(!K(f,ce[C+0]))return Y;for(;!K(f,ce[C+1]);)if(ce=m[++Y].Yb[0],C=0,Y==16)return 16;var me=m[Y+1].Yb;if(K(f,ce[C+2])){var Ue=f,Ge=0;if(K(Ue,(ht=ce)[(ut=C)+3]))if(K(Ue,ht[ut+6])){for(ce=0,ut=2*(Ge=K(Ue,ht[ut+8]))+(ht=K(Ue,ht[ut+9+Ge])),Ge=0,ht=hC[ut];ht[ce];++ce)Ge+=Ge+K(Ue,ht[ce]);Ge+=3+(8<<ut)}else K(Ue,ht[ut+7])?(Ge=7+2*K(Ue,165),Ge+=K(Ue,145)):Ge=5+K(Ue,159);else Ge=K(Ue,ht[ut+4])?3+K(Ue,ht[ut+5]):2;ce=me[2]}else Ge=1,ce=me[1];me=ae+fC[Y],0>(Ue=f).b&&k(Ue);var ut,ht=Ue.b,tt=(ut=Ue.Ca>>1)-(Ue.I>>ht)>>31;--Ue.b,Ue.Ca+=tt,Ue.Ca|=1,Ue.I-=(ut+1&tt)<<ht,oe[me]=((Ge^tt)-tt)*T[(0<Y)+0]}return 16}function Io(f){var m=f.rb[f.sb-1];m.la=0,m.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function gs(f,m){if(f==null)return 0;if(m==null)return mr(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Oo(f,m))return 0;if(e(f.cb),m.ac==null||m.ac(m)){m.ob&&(f.L=0);var C=Ih[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=m.v-C>>4,f.zb=m.j-C>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=m.o+15+C>>4,f.Hb=m.va+15+C>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var T=f.ed;for(C=0;4>C;++C){var Y;if(f.Qa.Cb){var oe=f.Qa.Lb[C];f.Qa.Fb||(oe+=T.Tb)}else oe=T.Tb;for(Y=0;1>=Y;++Y){var ae=f.gd[C][Y],ce=oe;if(T.Pc&&(ce+=T.vd[0],Y&&(ce+=T.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var me=ce;0<T.wb&&(me=4<T.wb?me>>2:me>>1)>9-T.wb&&(me=9-T.wb),1>me&&(me=1),ae.dd=me,ae.tc=2*ce+me,ae.ld=40<=ce?2:15<=ce?1:0}else ae.tc=0;ae.La=Y}}}C=0}else mr(f,6,"Frame setup failed"),C=f.a;if(C=C==0){if(C){f.$c=0,0<f.Aa||(f.Ic=UC);e:{C=f.Ic,T=4*(me=f.za);var Ue=32*me,Ge=me+1,ut=0<f.L?me*(0<f.Aa?2:1):0,ht=(f.Aa==2?2:1)*me;if((ae=T+832+(Y=3*(16*C+Ih[f.L])/2*Ue)+(oe=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=ae)C=0;else{if(ae>f.Vb){if(f.Vb=0,f.Ec=s(ae),f.Fc=0,f.Ec==null){C=mr(f,1,"no memory during frame initialization.");break e}f.Vb=ae}ae=f.Ec,ce=f.Fc,f.Ac=ae,f.Bc=ce,ce+=T,f.Gd=i(Ue,Gr),f.Hd=0,f.rb=i(Ge+1,Vr),f.sb=1,f.wa=ut?i(ut,Cr):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=me),e(!0),f.oc=ae,f.pc=ce,ce+=832,f.ya=i(ht,Ir),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=me),f.R=16*me,f.B=8*me,me=(Ue=Ih[f.L])*f.R,Ue=Ue/2*f.B,f.sa=ae,f.ta=ce+me,f.qa=f.sa,f.ra=f.ta+16*C*f.R+Ue,f.Ha=f.qa,f.Ia=f.ra+8*C*f.B+Ue,f.$c=0,ce+=Y,f.mb=oe?ae:null,f.nb=oe?ce:null,e(ce+oe<=f.Fc+f.Vb),Io(f),o(f.Ac,f.Bc,0,T),C=1}}if(C){if(m.ka=0,m.y=f.sa,m.O=f.ta,m.f=f.qa,m.N=f.ra,m.ea=f.Ha,m.Vd=f.Ia,m.fa=f.R,m.Rc=f.B,m.F=null,m.J=0,!yh){for(C=-255;255>=C;++C)Ho[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)nA[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)$c[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)bd[255+C]=0>C?0:255<C?255:C;yh=1}vd=Wt,rA=Rt,Rc=qt,Us=Ht,Ei=Xt,wo=mt,md=Wa,bh=di,qc=QA,Bl=Xa,zl=UA,PA=Ri,Cl=Ya,wd=TA,Sl=pa,kA=Ks,Kc=$s,Fi=IA,Ki[0]=Yr,Ki[1]=br,Ki[2]=Rs,Ki[3]=Wn,Ki[4]=$t,Ki[5]=Sn,Ki[6]=Jr,Ki[7]=fo,Ki[8]=ai,Ki[9]=Uo,OA[0]=Do,OA[1]=Nt,OA[2]=yr,OA[3]=$r,OA[4]=Hr,OA[5]=Hn,OA[6]=so,oA[0]=qs,oA[1]=vn,oA[2]=Bi,oA[3]=zi,oA[4]=jn,oA[5]=ji,oA[6]=Vo,C=1}else C=0}C&&(C=function(tt,Qt){for(tt.M=0;tt.M<tt.Va;++tt.M){var _t,We=tt.Jc[tt.M&tt.Xb],Ze=tt.m,Ft=tt;for(_t=0;_t<Ft.za;++_t){var Ot=Ze,Ut=Ft,ir=Ut.Ac,Yt=Ut.Bc+4*_t,_r=Ut.zc,tr=Ut.ya[Ut.aa+_t];if(Ut.Qa.Bb?tr.$b=K(Ot,Ut.Pa.jb[0])?2+K(Ot,Ut.Pa.jb[2]):K(Ot,Ut.Pa.jb[1]):tr.$b=0,Ut.kc&&(tr.Ad=K(Ot,Ut.Bd)),tr.Za=!K(Ot,145)+0,tr.Za){var mn=tr.Ob,Fn=0;for(Ut=0;4>Ut;++Ut){var hn,en=_r[0+Ut];for(hn=0;4>hn;++hn){en=gC[ir[Yt+hn]][en];for(var On=g2[K(Ot,en[0])];0<On;)On=g2[2*On+K(Ot,en[On])];en=-On,ir[Yt+hn]=en}r(mn,Fn,ir,Yt,4),Fn+=4,_r[0+Ut]=en}}else en=K(Ot,156)?K(Ot,128)?1:3:K(Ot,163)?2:0,tr.Ob[0]=en,o(ir,Yt,en,4),o(_r,0,en,4);tr.Dd=K(Ot,142)?K(Ot,114)?K(Ot,183)?1:3:2:0}if(Ft.m.Ka)return mr(tt,7,"Premature end-of-partition0 encountered.");for(;tt.ja<tt.za;++tt.ja){if(Ft=We,Ot=(Ze=tt).rb[Ze.sb-1],ir=Ze.rb[Ze.sb+Ze.ja],_t=Ze.ya[Ze.aa+Ze.ja],Yt=Ze.kc?_t.Ad:0)Ot.la=ir.la=0,_t.Za||(Ot.Na=ir.Na=0),_t.Hc=0,_t.Gc=0,_t.ia=0;else{var Pn,Nr;if(Ot=ir,ir=Ft,Yt=Ze.Pa.Xc,_r=Ze.ya[Ze.aa+Ze.ja],tr=Ze.pb[_r.$b],Ut=_r.ad,mn=0,Fn=Ze.rb[Ze.sb-1],en=hn=0,o(Ut,mn,0,384),_r.Za)var To=0,Vs=Yt[3];else{On=s(16);var Lo=Ot.Na+Fn.Na;if(Lo=Vc(ir,Yt[1],Lo,tr.Eb,0,On,0),Ot.Na=Fn.Na=(0<Lo)+0,1<Lo)vd(On,0,Ut,mn);else{var Gs=On[0]+3>>3;for(On=0;256>On;On+=16)Ut[mn+On]=Gs}To=1,Vs=Yt[0]}var In=15&Ot.la,fi=15&Fn.la;for(On=0;4>On;++On){var pi=1&fi;for(Gs=Nr=0;4>Gs;++Gs)In=In>>1|(pi=(Lo=Vc(ir,Vs,Lo=pi+(1&In),tr.Sc,To,Ut,mn))>To)<<7,Nr=Nr<<2|(3<Lo?3:1<Lo?2:Ut[mn+0]!=0),mn+=16;In>>=4,fi=fi>>1|pi<<7,hn=(hn<<8|Nr)>>>0}for(Vs=In,To=fi>>4,Pn=0;4>Pn;Pn+=2){for(Nr=0,In=Ot.la>>4+Pn,fi=Fn.la>>4+Pn,On=0;2>On;++On){for(pi=1&fi,Gs=0;2>Gs;++Gs)Lo=pi+(1&In),In=In>>1|(pi=0<(Lo=Vc(ir,Yt[2],Lo,tr.Qc,0,Ut,mn)))<<3,Nr=Nr<<2|(3<Lo?3:1<Lo?2:Ut[mn+0]!=0),mn+=16;In>>=2,fi=fi>>1|pi<<5}en|=Nr<<4*Pn,Vs|=In<<4<<Pn,To|=(240&fi)<<Pn}Ot.la=Vs,Fn.la=To,_r.Hc=hn,_r.Gc=en,_r.ia=43690&en?0:tr.ia,Yt=!(hn|en)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[_t.$b][_t.Za],Ze.wa[Ze.Y+Ze.ja].La|=!Yt),Ft.Ka)return mr(tt,7,"Premature end-of-file encountered.")}if(Io(tt),Ze=Qt,Ft=1,_t=(We=tt).D,Ot=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(_t.M=We.M,_t.uc=Ot,Za(We,_t),Ft=1,_t=(Nr=We.D).Nb,Ot=(en=Ih[We.L])*We.R,ir=en/2*We.B,On=16*_t*We.R,Gs=8*_t*We.B,Yt=We.sa,_r=We.ta-Ot+On,tr=We.qa,Ut=We.ra-ir+Gs,mn=We.Ha,Fn=We.Ia-ir+Gs,fi=(In=Nr.M)==0,hn=In>=We.Va-1,We.Aa==2&&Za(We,Nr),Nr.uc)for(pi=(Lo=We).D.M,e(Lo.D.uc),Nr=Lo.yb;Nr<Lo.Hb;++Nr){To=Nr,Vs=pi;var Yo=(ls=(po=Lo).D).Nb;Pn=po.R;var ls=ls.wa[ls.Y+To],Qs=po.sa,Ti=po.ta+16*Yo*Pn+16*To,Ba=ls.dd,Jo=ls.tc;if(Jo!=0)if(e(3<=Jo),po.L==1)0<To&&kA(Qs,Ti,Pn,Jo+4),ls.La&&Fi(Qs,Ti,Pn,Jo),0<Vs&&Sl(Qs,Ti,Pn,Jo+4),ls.La&&Kc(Qs,Ti,Pn,Jo);else{var sA=po.B,El=po.qa,yd=po.ra+8*Yo*sA+8*To,NA=po.Ha,po=po.Ia+8*Yo*sA+8*To;Yo=ls.ld,0<To&&(bh(Qs,Ti,Pn,Jo+4,Ba,Yo),Bl(El,yd,NA,po,sA,Jo+4,Ba,Yo)),ls.La&&(PA(Qs,Ti,Pn,Jo,Ba,Yo),wd(El,yd,NA,po,sA,Jo,Ba,Yo)),0<Vs&&(md(Qs,Ti,Pn,Jo+4,Ba,Yo),qc(El,yd,NA,po,sA,Jo+4,Ba,Yo)),ls.La&&(zl(Qs,Ti,Pn,Jo,Ba,Yo),Cl(El,yd,NA,po,sA,Jo,Ba,Yo))}}if(We.ia&&alert("todo:DitherRow"),Ze.put!=null){if(Nr=16*In,In=16*(In+1),fi?(Ze.y=We.sa,Ze.O=We.ta+On,Ze.f=We.qa,Ze.N=We.ra+Gs,Ze.ea=We.Ha,Ze.W=We.Ia+Gs):(Nr-=en,Ze.y=Yt,Ze.O=_r,Ze.f=tr,Ze.N=Ut,Ze.ea=mn,Ze.W=Fn),hn||(In-=en),In>Ze.o&&(In=Ze.o),Ze.F=null,Ze.J=null,We.Fa!=null&&0<We.Fa.length&&Nr<In&&(Ze.J=ba(We,Ze,Nr,In-Nr),Ze.F=We.mb,Ze.F==null&&Ze.F.length==0)){Ft=mr(We,3,"Could not decode alpha data.");break e}Nr<Ze.j&&(en=Ze.j-Nr,Nr=Ze.j,e(!(1&en)),Ze.O+=We.R*en,Ze.N+=We.B*(en>>1),Ze.W+=We.B*(en>>1),Ze.F!=null&&(Ze.J+=Ze.width*en)),Nr<In&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=Nr-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=In-Nr,Ft=Ze.put(Ze))}_t+1!=We.Ic||hn||(r(We.sa,We.ta-Ot,Yt,_r+16*We.R,Ot),r(We.qa,We.ra-ir,tr,Ut+8*We.B,ir),r(We.Ha,We.Ia-ir,mn,Fn+8*We.B,ir))}if(!Ft)return mr(tt,6,"Output aborted.")}return 1}(f,m)),m.bc!=null&&m.bc(m),C&=1}return C?(f.cb=0,C):0}function eo(f,m,C,T,Y){Y=f[m+C+32*T]+(Y>>3),f[m+C+32*T]=-256&Y?0>Y?0:255:Y}function $o(f,m,C,T,Y,oe){eo(f,m,0,C,T+Y),eo(f,m,1,C,T+oe),eo(f,m,2,C,T-oe),eo(f,m,3,C,T-Y)}function Mn(f){return(20091*f>>16)+f}function Ve(f,m,C,T){var Y,oe=0,ae=s(16);for(Y=0;4>Y;++Y){var ce=f[m+0]+f[m+8],me=f[m+0]-f[m+8],Ue=(35468*f[m+4]>>16)-Mn(f[m+12]),Ge=Mn(f[m+4])+(35468*f[m+12]>>16);ae[oe+0]=ce+Ge,ae[oe+1]=me+Ue,ae[oe+2]=me-Ue,ae[oe+3]=ce-Ge,oe+=4,m++}for(Y=oe=0;4>Y;++Y)ce=(f=ae[oe+0]+4)+ae[oe+8],me=f-ae[oe+8],Ue=(35468*ae[oe+4]>>16)-Mn(ae[oe+12]),eo(C,T,0,0,ce+(Ge=Mn(ae[oe+4])+(35468*ae[oe+12]>>16))),eo(C,T,1,0,me+Ue),eo(C,T,2,0,me-Ue),eo(C,T,3,0,ce-Ge),oe++,T+=32}function mt(f,m,C,T){var Y=f[m+0]+4,oe=35468*f[m+4]>>16,ae=Mn(f[m+4]),ce=35468*f[m+1]>>16;$o(C,T,0,Y+ae,f=Mn(f[m+1]),ce),$o(C,T,1,Y+oe,f,ce),$o(C,T,2,Y-oe,f,ce),$o(C,T,3,Y-ae,f,ce)}function Rt(f,m,C,T,Y){Ve(f,m,C,T),Y&&Ve(f,m+16,C,T+4)}function qt(f,m,C,T){rA(f,m+0,C,T,1),rA(f,m+32,C,T+128,1)}function Ht(f,m,C,T){var Y;for(f=f[m+0]+4,Y=0;4>Y;++Y)for(m=0;4>m;++m)eo(C,T,m,Y,f)}function Xt(f,m,C,T){f[m+0]&&Us(f,m+0,C,T),f[m+16]&&Us(f,m+16,C,T+4),f[m+32]&&Us(f,m+32,C,T+128),f[m+48]&&Us(f,m+48,C,T+128+4)}function Wt(f,m,C,T){var Y,oe=s(16);for(Y=0;4>Y;++Y){var ae=f[m+0+Y]+f[m+12+Y],ce=f[m+4+Y]+f[m+8+Y],me=f[m+4+Y]-f[m+8+Y],Ue=f[m+0+Y]-f[m+12+Y];oe[0+Y]=ae+ce,oe[8+Y]=ae-ce,oe[4+Y]=Ue+me,oe[12+Y]=Ue-me}for(Y=0;4>Y;++Y)ae=(f=oe[0+4*Y]+3)+oe[3+4*Y],ce=oe[1+4*Y]+oe[2+4*Y],me=oe[1+4*Y]-oe[2+4*Y],Ue=f-oe[3+4*Y],C[T+0]=ae+ce>>3,C[T+16]=Ue+me>>3,C[T+32]=ae-ce>>3,C[T+48]=Ue-me>>3,T+=64}function wr(f,m,C){var T,Y=m-32,oe=hi,ae=255-f[Y-1];for(T=0;T<C;++T){var ce,me=oe,Ue=ae+f[m-1];for(ce=0;ce<C;++ce)f[m+ce]=me[Ue+f[Y+ce]];m+=32}}function br(f,m){wr(f,m,4)}function vn(f,m){wr(f,m,8)}function Nt(f,m){wr(f,m,16)}function yr(f,m){var C;for(C=0;16>C;++C)r(f,m+32*C,f,m-32,16)}function $r(f,m){var C;for(C=16;0<C;--C)o(f,m,f[m-1],16),m+=32}function kn(f,m,C){var T;for(T=0;16>T;++T)o(m,C+32*T,f,16)}function Do(f,m){var C,T=16;for(C=0;16>C;++C)T+=f[m-1+32*C]+f[m+C-32];kn(T>>5,f,m)}function Hr(f,m){var C,T=8;for(C=0;16>C;++C)T+=f[m-1+32*C];kn(T>>4,f,m)}function Hn(f,m){var C,T=8;for(C=0;16>C;++C)T+=f[m+C-32];kn(T>>4,f,m)}function so(f,m){kn(128,f,m)}function Mt(f,m,C){return f+2*m+C+2>>2}function Rs(f,m){var C,T=m-32;for(T=new Uint8Array([Mt(f[T-1],f[T+0],f[T+1]),Mt(f[T+0],f[T+1],f[T+2]),Mt(f[T+1],f[T+2],f[T+3]),Mt(f[T+2],f[T+3],f[T+4])]),C=0;4>C;++C)r(f,m+32*C,T,0,T.length)}function Wn(f,m){var C=f[m-1],T=f[m-1+32],Y=f[m-1+64],oe=f[m-1+96];R(f,m+0,16843009*Mt(f[m-1-32],C,T)),R(f,m+32,16843009*Mt(C,T,Y)),R(f,m+64,16843009*Mt(T,Y,oe)),R(f,m+96,16843009*Mt(Y,oe,oe))}function Yr(f,m){var C,T=4;for(C=0;4>C;++C)T+=f[m+C-32]+f[m-1+32*C];for(T>>=3,C=0;4>C;++C)o(f,m+32*C,T,4)}function $t(f,m){var C=f[m-1+0],T=f[m-1+32],Y=f[m-1+64],oe=f[m-1-32],ae=f[m+0-32],ce=f[m+1-32],me=f[m+2-32],Ue=f[m+3-32];f[m+0+96]=Mt(T,Y,f[m-1+96]),f[m+1+96]=f[m+0+64]=Mt(C,T,Y),f[m+2+96]=f[m+1+64]=f[m+0+32]=Mt(oe,C,T),f[m+3+96]=f[m+2+64]=f[m+1+32]=f[m+0+0]=Mt(ae,oe,C),f[m+3+64]=f[m+2+32]=f[m+1+0]=Mt(ce,ae,oe),f[m+3+32]=f[m+2+0]=Mt(me,ce,ae),f[m+3+0]=Mt(Ue,me,ce)}function Jr(f,m){var C=f[m+1-32],T=f[m+2-32],Y=f[m+3-32],oe=f[m+4-32],ae=f[m+5-32],ce=f[m+6-32],me=f[m+7-32];f[m+0+0]=Mt(f[m+0-32],C,T),f[m+1+0]=f[m+0+32]=Mt(C,T,Y),f[m+2+0]=f[m+1+32]=f[m+0+64]=Mt(T,Y,oe),f[m+3+0]=f[m+2+32]=f[m+1+64]=f[m+0+96]=Mt(Y,oe,ae),f[m+3+32]=f[m+2+64]=f[m+1+96]=Mt(oe,ae,ce),f[m+3+64]=f[m+2+96]=Mt(ae,ce,me),f[m+3+96]=Mt(ce,me,me)}function Sn(f,m){var C=f[m-1+0],T=f[m-1+32],Y=f[m-1+64],oe=f[m-1-32],ae=f[m+0-32],ce=f[m+1-32],me=f[m+2-32],Ue=f[m+3-32];f[m+0+0]=f[m+1+64]=oe+ae+1>>1,f[m+1+0]=f[m+2+64]=ae+ce+1>>1,f[m+2+0]=f[m+3+64]=ce+me+1>>1,f[m+3+0]=me+Ue+1>>1,f[m+0+96]=Mt(Y,T,C),f[m+0+64]=Mt(T,C,oe),f[m+0+32]=f[m+1+96]=Mt(C,oe,ae),f[m+1+32]=f[m+2+96]=Mt(oe,ae,ce),f[m+2+32]=f[m+3+96]=Mt(ae,ce,me),f[m+3+32]=Mt(ce,me,Ue)}function fo(f,m){var C=f[m+0-32],T=f[m+1-32],Y=f[m+2-32],oe=f[m+3-32],ae=f[m+4-32],ce=f[m+5-32],me=f[m+6-32],Ue=f[m+7-32];f[m+0+0]=C+T+1>>1,f[m+1+0]=f[m+0+64]=T+Y+1>>1,f[m+2+0]=f[m+1+64]=Y+oe+1>>1,f[m+3+0]=f[m+2+64]=oe+ae+1>>1,f[m+0+32]=Mt(C,T,Y),f[m+1+32]=f[m+0+96]=Mt(T,Y,oe),f[m+2+32]=f[m+1+96]=Mt(Y,oe,ae),f[m+3+32]=f[m+2+96]=Mt(oe,ae,ce),f[m+3+64]=Mt(ae,ce,me),f[m+3+96]=Mt(ce,me,Ue)}function Uo(f,m){var C=f[m-1+0],T=f[m-1+32],Y=f[m-1+64],oe=f[m-1+96];f[m+0+0]=C+T+1>>1,f[m+2+0]=f[m+0+32]=T+Y+1>>1,f[m+2+32]=f[m+0+64]=Y+oe+1>>1,f[m+1+0]=Mt(C,T,Y),f[m+3+0]=f[m+1+32]=Mt(T,Y,oe),f[m+3+32]=f[m+1+64]=Mt(Y,oe,oe),f[m+3+64]=f[m+2+64]=f[m+0+96]=f[m+1+96]=f[m+2+96]=f[m+3+96]=oe}function ai(f,m){var C=f[m-1+0],T=f[m-1+32],Y=f[m-1+64],oe=f[m-1+96],ae=f[m-1-32],ce=f[m+0-32],me=f[m+1-32],Ue=f[m+2-32];f[m+0+0]=f[m+2+32]=C+ae+1>>1,f[m+0+32]=f[m+2+64]=T+C+1>>1,f[m+0+64]=f[m+2+96]=Y+T+1>>1,f[m+0+96]=oe+Y+1>>1,f[m+3+0]=Mt(ce,me,Ue),f[m+2+0]=Mt(ae,ce,me),f[m+1+0]=f[m+3+32]=Mt(C,ae,ce),f[m+1+32]=f[m+3+64]=Mt(T,C,ae),f[m+1+64]=f[m+3+96]=Mt(Y,T,C),f[m+1+96]=Mt(oe,Y,T)}function Bi(f,m){var C;for(C=0;8>C;++C)r(f,m+32*C,f,m-32,8)}function zi(f,m){var C;for(C=0;8>C;++C)o(f,m,f[m-1],8),m+=32}function Ai(f,m,C){var T;for(T=0;8>T;++T)o(m,C+32*T,f,8)}function qs(f,m){var C,T=8;for(C=0;8>C;++C)T+=f[m+C-32]+f[m-1+32*C];Ai(T>>4,f,m)}function ji(f,m){var C,T=4;for(C=0;8>C;++C)T+=f[m+C-32];Ai(T>>3,f,m)}function jn(f,m){var C,T=4;for(C=0;8>C;++C)T+=f[m-1+32*C];Ai(T>>3,f,m)}function Vo(f,m){Ai(128,f,m)}function Xn(f,m,C){var T=f[m-C],Y=f[m+0],oe=3*(Y-T)+Wg[1020+f[m-2*C]-f[m+C]],ae=_h[112+(oe+4>>3)];f[m-C]=hi[255+T+_h[112+(oe+3>>3)]],f[m+0]=hi[255+Y-ae]}function Zr(f,m,C,T){var Y=f[m+0],oe=f[m+C];return Ui[255+f[m-2*C]-f[m-C]]>T||Ui[255+oe-Y]>T}function fa(f,m,C,T){return 4*Ui[255+f[m-C]-f[m+0]]+Ui[255+f[m-2*C]-f[m+C]]<=T}function Ga(f,m,C,T,Y){var oe=f[m-3*C],ae=f[m-2*C],ce=f[m-C],me=f[m+0],Ue=f[m+C],Ge=f[m+2*C],ut=f[m+3*C];return 4*Ui[255+ce-me]+Ui[255+ae-Ue]>T?0:Ui[255+f[m-4*C]-oe]<=Y&&Ui[255+oe-ae]<=Y&&Ui[255+ae-ce]<=Y&&Ui[255+ut-Ge]<=Y&&Ui[255+Ge-Ue]<=Y&&Ui[255+Ue-me]<=Y}function pa(f,m,C,T){var Y=2*T+1;for(T=0;16>T;++T)fa(f,m+T,C,Y)&&Xn(f,m+T,C)}function Ks(f,m,C,T){var Y=2*T+1;for(T=0;16>T;++T)fa(f,m+T*C,1,Y)&&Xn(f,m+T*C,1)}function $s(f,m,C,T){var Y;for(Y=3;0<Y;--Y)pa(f,m+=4*C,C,T)}function IA(f,m,C,T){var Y;for(Y=3;0<Y;--Y)Ks(f,m+=4,C,T)}function li(f,m,C,T,Y,oe,ae,ce){for(oe=2*oe+1;0<Y--;){if(Ga(f,m,C,oe,ae))if(Zr(f,m,C,ce))Xn(f,m,C);else{var me=f,Ue=m,Ge=C,ut=me[Ue-2*Ge],ht=me[Ue-Ge],tt=me[Ue+0],Qt=me[Ue+Ge],_t=me[Ue+2*Ge],We=27*(Ft=Wg[1020+3*(tt-ht)+Wg[1020+ut-Qt]])+63>>7,Ze=18*Ft+63>>7,Ft=9*Ft+63>>7;me[Ue-3*Ge]=hi[255+me[Ue-3*Ge]+Ft],me[Ue-2*Ge]=hi[255+ut+Ze],me[Ue-Ge]=hi[255+ht+We],me[Ue+0]=hi[255+tt-We],me[Ue+Ge]=hi[255+Qt-Ze],me[Ue+2*Ge]=hi[255+_t-Ft]}m+=T}}function vs(f,m,C,T,Y,oe,ae,ce){for(oe=2*oe+1;0<Y--;){if(Ga(f,m,C,oe,ae))if(Zr(f,m,C,ce))Xn(f,m,C);else{var me=f,Ue=m,Ge=C,ut=me[Ue-Ge],ht=me[Ue+0],tt=me[Ue+Ge],Qt=_h[112+((_t=3*(ht-ut))+4>>3)],_t=_h[112+(_t+3>>3)],We=Qt+1>>1;me[Ue-2*Ge]=hi[255+me[Ue-2*Ge]+We],me[Ue-Ge]=hi[255+ut+_t],me[Ue+0]=hi[255+ht-Qt],me[Ue+Ge]=hi[255+tt-We]}m+=T}}function Wa(f,m,C,T,Y,oe){li(f,m,C,1,16,T,Y,oe)}function di(f,m,C,T,Y,oe){li(f,m,1,C,16,T,Y,oe)}function UA(f,m,C,T,Y,oe){var ae;for(ae=3;0<ae;--ae)vs(f,m+=4*C,C,1,16,T,Y,oe)}function Ri(f,m,C,T,Y,oe){var ae;for(ae=3;0<ae;--ae)vs(f,m+=4,1,C,16,T,Y,oe)}function QA(f,m,C,T,Y,oe,ae,ce){li(f,m,Y,1,8,oe,ae,ce),li(C,T,Y,1,8,oe,ae,ce)}function Xa(f,m,C,T,Y,oe,ae,ce){li(f,m,1,Y,8,oe,ae,ce),li(C,T,1,Y,8,oe,ae,ce)}function Ya(f,m,C,T,Y,oe,ae,ce){vs(f,m+4*Y,Y,1,8,oe,ae,ce),vs(C,T+4*Y,Y,1,8,oe,ae,ce)}function TA(f,m,C,T,Y,oe,ae,ce){vs(f,m+4,1,Y,8,oe,ae,ce),vs(C,T+4,1,Y,8,oe,ae,ce)}function Ci(){this.ba=new rt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new nt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ga(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function va(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ja(){this.ua=0,this.Wa=new H,this.vb=new H,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new q}function LA(){this.xb=this.a=0,this.l=new bn,this.ca=new rt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ja,this.ab=0,this.gc=i(4,va),this.Oc=0}function ma(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qi(f,m,C,T,Y,oe,ae){for(f=f==null?0:f[m+0],m=0;m<ae;++m)Y[oe+m]=f+C[T+m]&255,f=Y[oe+m]}function wa(f,m,C,T,Y,oe,ae){var ce;if(f==null)qi(null,null,C,T,Y,oe,ae);else for(ce=0;ce<ae;++ce)Y[oe+ce]=f[m+ce]+C[T+ce]&255}function Si(f,m,C,T,Y,oe,ae){if(f==null)qi(null,null,C,T,Y,oe,ae);else{var ce,me=f[m+0],Ue=me,Ge=me;for(ce=0;ce<ae;++ce)Ue=Ge+(me=f[m+ce])-Ue,Ge=C[T+ce]+(-256&Ue?0>Ue?0:255:Ue)&255,Ue=me,Y[oe+ce]=Ge}}function ba(f,m,C,T){var Y=m.width,oe=m.o;if(e(f!=null&&m!=null),0>C||0>=T||C+T>oe)return null;if(!f.Cc){if(f.ga==null){var ae;if(f.ga=new ma,(ae=f.ga==null)||(ae=m.width*m.o,e(f.Gb.length==0),f.Gb=s(ae),f.Uc=0,f.Gb==null?ae=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,ae=1),ae=!ae),!ae){ae=f.ga;var ce=f.Fa,me=f.P,Ue=f.qc,Ge=f.mb,ut=f.nb,ht=me+1,tt=Ue-1,Qt=ae.l;if(e(ce!=null&&Ge!=null&&m!=null),DA[0]=null,DA[1]=qi,DA[2]=wa,DA[3]=Si,ae.ca=Ge,ae.tb=ut,ae.c=m.width,ae.i=m.height,e(0<ae.c&&0<ae.i),1>=Ue)m=0;else if(ae.$a=ce[me+0]>>0&3,ae.Z=ce[me+0]>>2&3,ae.Lc=ce[me+0]>>4&3,me=ce[me+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||me)m=0;else if(Qt.put=St,Qt.ac=Pt,Qt.bc=bt,Qt.ma=ae,Qt.width=m.width,Qt.height=m.height,Qt.Da=m.Da,Qt.v=m.v,Qt.va=m.va,Qt.j=m.j,Qt.o=m.o,ae.$a)e:{e(ae.$a==1),m=xt();t:for(;;){if(m==null){m=0;break e}if(e(ae!=null),ae.mc=m,m.c=ae.c,m.i=ae.i,m.l=ae.l,m.l.ma=ae,m.l.width=ae.c,m.l.height=ae.i,m.a=0,re(m.m,ce,ht,tt),!Dt(ae.c,ae.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Jt(m.s)?(ae.ic=1,ce=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(ce),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(ae.ic=0,m=lr(m,ae.c)),!m))break t;m=1;break e}ae.mc=null,m=0}else m=tt>=ae.c*ae.i;ae=!m}if(ae)return null;f.ga.Lc!=1?f.Ga=0:T=oe-C}e(f.ga!=null),e(C+T<=oe);e:{if(m=(ce=f.ga).c,oe=ce.l.o,ce.$a==0){if(ht=f.rc,tt=f.Vc,Qt=f.Fa,me=f.P+1+C*m,Ue=f.mb,Ge=f.nb+C*m,e(me<=f.P+f.qc),ce.Z!=0)for(e(DA[ce.Z]!=null),ae=0;ae<T;++ae)DA[ce.Z](ht,tt,Qt,me,Ue,Ge,m),ht=Ue,tt=Ge,Ge+=m,me+=m;else for(ae=0;ae<T;++ae)r(Ue,Ge,Qt,me,m),ht=Ue,tt=Ge,Ge+=m,me+=m;f.rc=ht,f.Vc=tt}else{if(e(ce.mc!=null),m=C+T,e((ae=ce.mc)!=null),e(m<=ae.i),ae.C>=m)m=1;else if(ce.ic||ot(),ce.ic){ce=ae.V,ht=ae.Ba,tt=ae.c;var _t=ae.i,We=(Qt=1,me=ae.$/tt,Ue=ae.$%tt,Ge=ae.m,ut=ae.s,ae.$),Ze=tt*_t,Ft=tt*m,Ot=ut.wc,Ut=We<Ft?dt(ut,Ue,me):null;e(We<=Ze),e(m<=_t),e(Jt(ut));t:for(;;){for(;!Ge.h&&We<Ft;){if(Ue&Ot||(Ut=dt(ut,Ue,me)),e(Ut!=null),M(Ge),256>(_t=Et(Ut.G[0],Ut.H[0],Ge)))ce[ht+We]=_t,++We,++Ue>=tt&&(Ue=0,++me<=m&&!(me%16)&&Gt(ae,me));else{if(!(280>_t)){Qt=0;break t}_t=jt(_t-256,Ge);var ir,Yt=Et(Ut.G[4],Ut.H[4],Ge);if(M(Ge),!(We>=(Yt=Lt(tt,Yt=jt(Yt,Ge)))&&Ze-We>=_t)){Qt=0;break t}for(ir=0;ir<_t;++ir)ce[ht+We+ir]=ce[ht+We+ir-Yt];for(We+=_t,Ue+=_t;Ue>=tt;)Ue-=tt,++me<=m&&!(me%16)&&Gt(ae,me);We<Ft&&Ue&Ot&&(Ut=dt(ut,Ue,me))}e(Ge.h==F(Ge))}Gt(ae,me>m?m:me);break t}!Qt||Ge.h&&We<Ze?(Qt=0,ae.a=Ge.h?5:3):ae.$=We,m=Qt}else m=er(ae,ae.V,ae.Ba,ae.c,ae.i,m,ur);if(!m){T=0;break e}}C+T>=oe&&(f.Cc=1),T=1}if(!T)return null;if(f.Cc&&((T=f.ga)!=null&&(T.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+C*Y}function _(f,m,C,T,Y,oe){for(;0<Y--;){var ae,ce=f,me=m+(C?1:0),Ue=f,Ge=m+(C?0:3);for(ae=0;ae<T;++ae){var ut=Ue[Ge+4*ae];ut!=255&&(ut*=32897,ce[me+4*ae+0]=ce[me+4*ae+0]*ut>>23,ce[me+4*ae+1]=ce[me+4*ae+1]*ut>>23,ce[me+4*ae+2]=ce[me+4*ae+2]*ut>>23)}m+=oe}}function X(f,m,C,T,Y){for(;0<T--;){var oe;for(oe=0;oe<C;++oe){var ae=f[m+2*oe+0],ce=15&(Ue=f[m+2*oe+1]),me=4369*ce,Ue=(240&Ue|Ue>>4)*me>>16;f[m+2*oe+0]=(240&ae|ae>>4)*me>>16&240|(15&ae|ae<<4)*me>>16>>4&15,f[m+2*oe+1]=240&Ue|ce}m+=Y}}function Le(f,m,C,T,Y,oe,ae,ce){var me,Ue,Ge=255;for(Ue=0;Ue<Y;++Ue){for(me=0;me<T;++me){var ut=f[m+me];oe[ae+4*me]=ut,Ge&=ut}m+=C,ae+=ce}return Ge!=255}function qe(f,m,C,T,Y){var oe;for(oe=0;oe<Y;++oe)C[T+oe]=f[m+oe]>>8}function ot(){Ii=_,Kn=X,$n=Le,bo=qe}function Bt(f,m,C){D[f]=function(T,Y,oe,ae,ce,me,Ue,Ge,ut,ht,tt,Qt,_t,We,Ze,Ft,Ot){var Ut,ir=Ot-1>>1,Yt=ce[me+0]|Ue[Ge+0]<<16,_r=ut[ht+0]|tt[Qt+0]<<16;e(T!=null);var tr=3*Yt+_r+131074>>2;for(m(T[Y+0],255&tr,tr>>16,_t,We),oe!=null&&(tr=3*_r+Yt+131074>>2,m(oe[ae+0],255&tr,tr>>16,Ze,Ft)),Ut=1;Ut<=ir;++Ut){var mn=ce[me+Ut]|Ue[Ge+Ut]<<16,Fn=ut[ht+Ut]|tt[Qt+Ut]<<16,hn=Yt+mn+_r+Fn+524296,en=hn+2*(mn+_r)>>3;tr=en+Yt>>1,Yt=(hn=hn+2*(Yt+Fn)>>3)+mn>>1,m(T[Y+2*Ut-1],255&tr,tr>>16,_t,We+(2*Ut-1)*C),m(T[Y+2*Ut-0],255&Yt,Yt>>16,_t,We+(2*Ut-0)*C),oe!=null&&(tr=hn+_r>>1,Yt=en+Fn>>1,m(oe[ae+2*Ut-1],255&tr,tr>>16,Ze,Ft+(2*Ut-1)*C),m(oe[ae+2*Ut+0],255&Yt,Yt>>16,Ze,Ft+(2*Ut+0)*C)),Yt=mn,_r=Fn}1&Ot||(tr=3*Yt+_r+131074>>2,m(T[Y+Ot-1],255&tr,tr>>16,_t,We+(Ot-1)*C),oe!=null&&(tr=3*_r+Yt+131074>>2,m(oe[ae+Ot-1],255&tr,tr>>16,Ze,Ft+(Ot-1)*C)))}}function kt(){Qi[xh]=bC,Qi[Bh]=m2,Qi[h2]=yC,Qi[zh]=w2,Qi[Ch]=b2,Qi[Xg]=y2,Qi[f2]=_C,Qi[Yg]=m2,Qi[Jg]=w2,Qi[Sh]=b2,Qi[Zg]=y2}function rr(f){return f&-16384?0>f?0:255:f>>xC}function gr(f,m){return rr((19077*f>>8)+(26149*m>>8)-14234)}function Tr(f,m,C){return rr((19077*f>>8)-(6419*m>>8)-(13320*C>>8)+8708)}function Lr(f,m){return rr((19077*f>>8)+(33050*m>>8)-17685)}function qr(f,m,C,T,Y){T[Y+0]=gr(f,C),T[Y+1]=Tr(f,m,C),T[Y+2]=Lr(f,m)}function Ln(f,m,C,T,Y){T[Y+0]=Lr(f,m),T[Y+1]=Tr(f,m,C),T[Y+2]=gr(f,C)}function Rn(f,m,C,T,Y){var oe=Tr(f,m,C);m=oe<<3&224|Lr(f,m)>>3,T[Y+0]=248&gr(f,C)|oe>>5,T[Y+1]=m}function to(f,m,C,T,Y){var oe=240&Lr(f,m)|15;T[Y+0]=240&gr(f,C)|Tr(f,m,C)>>4,T[Y+1]=oe}function Qo(f,m,C,T,Y){T[Y+0]=255,qr(f,m,C,T,Y+1)}function io(f,m,C,T,Y){Ln(f,m,C,T,Y),T[Y+3]=255}function Go(f,m,C,T,Y){qr(f,m,C,T,Y),T[Y+3]=255}function os(f,m){return 0>f?0:f>m?m:f}function ms(f,m,C){D[f]=function(T,Y,oe,ae,ce,me,Ue,Ge,ut){for(var ht=Ge+(-2&ut)*C;Ge!=ht;)m(T[Y+0],oe[ae+0],ce[me+0],Ue,Ge),m(T[Y+1],oe[ae+0],ce[me+0],Ue,Ge+C),Y+=2,++ae,++me,Ge+=2*C;1&ut&&m(T[Y+0],oe[ae+0],ce[me+0],Ue,Ge)}}function ya(f,m,C){return C==0?f==0?m==0?6:5:m==0?4:0:C}function _a(f,m,C,T,Y){switch(f>>>30){case 3:rA(m,C,T,Y,0);break;case 2:wo(m,C,T,Y);break;case 1:Us(m,C,T,Y)}}function Za(f,m){var C,T,Y=m.M,oe=m.Nb,ae=f.oc,ce=f.pc+40,me=f.oc,Ue=f.pc+584,Ge=f.oc,ut=f.pc+600;for(C=0;16>C;++C)ae[ce+32*C-1]=129;for(C=0;8>C;++C)me[Ue+32*C-1]=129,Ge[ut+32*C-1]=129;for(0<Y?ae[ce-1-32]=me[Ue-1-32]=Ge[ut-1-32]=129:(o(ae,ce-32-1,127,21),o(me,Ue-32-1,127,9),o(Ge,ut-32-1,127,9)),T=0;T<f.za;++T){var ht=m.ya[m.aa+T];if(0<T){for(C=-1;16>C;++C)r(ae,ce+32*C-4,ae,ce+32*C+12,4);for(C=-1;8>C;++C)r(me,Ue+32*C-4,me,Ue+32*C+4,4),r(Ge,ut+32*C-4,Ge,ut+32*C+4,4)}var tt=f.Gd,Qt=f.Hd+T,_t=ht.ad,We=ht.Hc;if(0<Y&&(r(ae,ce-32,tt[Qt].y,0,16),r(me,Ue-32,tt[Qt].f,0,8),r(Ge,ut-32,tt[Qt].ea,0,8)),ht.Za){var Ze=ae,Ft=ce-32+16;for(0<Y&&(T>=f.za-1?o(Ze,Ft,tt[Qt].y[15],4):r(Ze,Ft,tt[Qt+1].y,0,4)),C=0;4>C;C++)Ze[Ft+128+C]=Ze[Ft+256+C]=Ze[Ft+384+C]=Ze[Ft+0+C];for(C=0;16>C;++C,We<<=2)Ze=ae,Ft=ce+x2[C],Ki[ht.Ob[C]](Ze,Ft),_a(We,_t,16*+C,Ze,Ft)}else if(Ze=ya(T,Y,ht.Ob[0]),OA[Ze](ae,ce),We!=0)for(C=0;16>C;++C,We<<=2)_a(We,_t,16*+C,ae,ce+x2[C]);for(C=ht.Gc,Ze=ya(T,Y,ht.Dd),oA[Ze](me,Ue),oA[Ze](Ge,ut),We=_t,Ze=me,Ft=Ue,255&(ht=C>>0)&&(170&ht?Rc(We,256,Ze,Ft):Ei(We,256,Ze,Ft)),ht=Ge,We=ut,255&(C>>=8)&&(170&C?Rc(_t,320,ht,We):Ei(_t,320,ht,We)),Y<f.Ub-1&&(r(tt[Qt].y,0,ae,ce+480,16),r(tt[Qt].f,0,me,Ue+224,8),r(tt[Qt].ea,0,Ge,ut+224,8)),C=8*oe*f.B,tt=f.sa,Qt=f.ta+16*T+16*oe*f.R,_t=f.qa,ht=f.ra+8*T+C,We=f.Ha,Ze=f.Ia+8*T+C,C=0;16>C;++C)r(tt,Qt+C*f.R,ae,ce+32*C,16);for(C=0;8>C;++C)r(_t,ht+C*f.B,me,Ue+32*C,8),r(We,Ze+C*f.B,Ge,ut+32*C,8)}}function En(f,m,C,T,Y,oe,ae,ce,me){var Ue=[0],Ge=[0],ut=0,ht=me!=null?me.kd:0,tt=me??new ga;if(f==null||12>C)return 7;tt.data=f,tt.w=m,tt.ha=C,m=[m],C=[C],tt.gb=[tt.gb];e:{var Qt=m,_t=C,We=tt.gb;if(e(f!=null),e(_t!=null),e(We!=null),We[0]=0,12<=_t[0]&&!t(f,Qt[0],"RIFF")){if(t(f,Qt[0]+8,"WEBP")){We=3;break e}var Ze=Pe(f,Qt[0]+4);if(12>Ze||4294967286<Ze){We=3;break e}if(ht&&Ze>_t[0]-8){We=7;break e}We[0]=Ze,Qt[0]+=12,_t[0]-=12}We=0}if(We!=0)return We;for(Ze=0<tt.gb[0],C=C[0];;){e:{var Ft=f;_t=m,We=C;var Ot=Ue,Ut=Ge,ir=Qt=[0];if((tr=ut=[ut])[0]=0,8>We[0])We=7;else{if(!t(Ft,_t[0],"VP8X")){if(Pe(Ft,_t[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Yt=Pe(Ft,_t[0]+8),_r=1+Be(Ft,_t[0]+12);if(2147483648<=_r*(Ft=1+Be(Ft,_t[0]+15))){We=3;break e}ir!=null&&(ir[0]=Yt),Ot!=null&&(Ot[0]=_r),Ut!=null&&(Ut[0]=Ft),_t[0]+=18,We[0]-=18,tr[0]=1}We=0}}if(ut=ut[0],Qt=Qt[0],We!=0)return We;if(_t=!!(2&Qt),!Ze&&ut)return 3;if(oe!=null&&(oe[0]=!!(16&Qt)),ae!=null&&(ae[0]=_t),ce!=null&&(ce[0]=0),ae=Ue[0],Qt=Ge[0],ut&&_t&&me==null){We=0;break}if(4>C){We=7;break}if(Ze&&ut||!Ze&&!ut&&!t(f,m[0],"ALPH")){C=[C],tt.na=[tt.na],tt.P=[tt.P],tt.Sa=[tt.Sa];e:{Yt=f,We=m,Ze=C;var tr=tt.gb;Ot=tt.na,Ut=tt.P,ir=tt.Sa,_r=22,e(Yt!=null),e(Ze!=null),Ft=We[0];var mn=Ze[0];for(e(Ot!=null),e(ir!=null),Ot[0]=null,Ut[0]=null,ir[0]=0;;){if(We[0]=Ft,Ze[0]=mn,8>mn){We=7;break e}var Fn=Pe(Yt,Ft+4);if(4294967286<Fn){We=3;break e}var hn=8+Fn+1&-2;if(_r+=hn,0<tr&&_r>tr){We=3;break e}if(!t(Yt,Ft,"VP8 ")||!t(Yt,Ft,"VP8L")){We=0;break e}if(mn[0]<hn){We=7;break e}t(Yt,Ft,"ALPH")||(Ot[0]=Yt,Ut[0]=Ft+8,ir[0]=Fn),Ft+=hn,mn-=hn}}if(C=C[0],tt.na=tt.na[0],tt.P=tt.P[0],tt.Sa=tt.Sa[0],We!=0)break}C=[C],tt.Ja=[tt.Ja],tt.xa=[tt.xa];e:if(tr=f,We=m,Ze=C,Ot=tt.gb[0],Ut=tt.Ja,ir=tt.xa,Yt=We[0],Ft=!t(tr,Yt,"VP8 "),_r=!t(tr,Yt,"VP8L"),e(tr!=null),e(Ze!=null),e(Ut!=null),e(ir!=null),8>Ze[0])We=7;else{if(Ft||_r){if(tr=Pe(tr,Yt+4),12<=Ot&&tr>Ot-12){We=3;break e}if(ht&&tr>Ze[0]-8){We=7;break e}Ut[0]=tr,We[0]+=8,Ze[0]-=8,ir[0]=_r}else ir[0]=5<=Ze[0]&&tr[Yt+0]==47&&!(tr[Yt+4]>>5),Ut[0]=Ze[0];We=0}if(C=C[0],tt.Ja=tt.Ja[0],tt.xa=tt.xa[0],m=m[0],We!=0)break;if(4294967286<tt.Ja)return 3;if(ce==null||_t||(ce[0]=tt.xa?2:1),ae=[ae],Qt=[Qt],tt.xa){if(5>C){We=7;break}ce=ae,ht=Qt,_t=oe,f==null||5>C?f=0:5<=C&&f[m+0]==47&&!(f[m+4]>>5)?(Ze=[0],tr=[0],Ot=[0],re(Ut=new z,f,m,C),ft(Ut,Ze,tr,Ot)?(ce!=null&&(ce[0]=Ze[0]),ht!=null&&(ht[0]=tr[0]),_t!=null&&(_t[0]=Ot[0]),f=1):f=0):f=0}else{if(10>C){We=7;break}ce=Qt,f==null||10>C||!Tn(f,m+3,C-3)?f=0:(ht=f[m+0]|f[m+1]<<8|f[m+2]<<16,_t=16383&(f[m+7]<<8|f[m+6]),f=16383&(f[m+9]<<8|f[m+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=tt.Ja||!_t||!f?f=0:(ae&&(ae[0]=_t),ce&&(ce[0]=f),f=1))}if(!f||(ae=ae[0],Qt=Qt[0],ut&&(Ue[0]!=ae||Ge[0]!=Qt)))return 3;me!=null&&(me[0]=tt,me.offset=m-me.w,e(4294967286>m-me.w),e(me.offset==me.ha-C));break}return We==0||We==7&&ut&&me==null?(oe!=null&&(oe[0]|=tt.na!=null&&0<tt.na.length),T!=null&&(T[0]=ae),Y!=null&&(Y[0]=Qt),0):We}function ao(f,m,C){var T=m.width,Y=m.height,oe=0,ae=0,ce=T,me=Y;if(m.Da=f!=null&&0<f.Da,m.Da&&(ce=f.cd,me=f.bd,oe=f.v,ae=f.j,11>C||(oe&=-2,ae&=-2),0>oe||0>ae||0>=ce||0>=me||oe+ce>T||ae+me>Y))return 0;if(m.v=oe,m.j=ae,m.va=oe+ce,m.o=ae+me,m.U=ce,m.T=me,m.da=f!=null&&0<f.da,m.da){if(!te(ce,me,C=[f.ib],oe=[f.hb]))return 0;m.ib=C[0],m.hb=oe[0]}return m.ob=f!=null&&f.ob,m.Kb=f==null||!f.Sd,m.da&&(m.ob=m.ib<3*T/4&&m.hb<3*Y/4,m.Kb=0),1}function Wo(f){if(f==null)return 2;if(11>f.S){var m=f.f.RGBA;m.fb+=(f.height-1)*m.A,m.A=-m.A}else m=f.f.kb,f=f.height,m.O+=(f-1)*m.fa,m.fa=-m.fa,m.N+=(f-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(f-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(f-1)*m.lb,m.lb=-m.lb);return 0}function ss(f,m,C,T){if(T==null||0>=f||0>=m)return 2;if(C!=null){if(C.Da){var Y=C.cd,oe=C.bd,ae=-2&C.v,ce=-2&C.j;if(0>ae||0>ce||0>=Y||0>=oe||ae+Y>f||ce+oe>m)return 2;f=Y,m=oe}if(C.da){if(!te(f,m,Y=[C.ib],oe=[C.hb]))return 2;f=Y[0],m=oe[0]}}T.width=f,T.height=m;e:{var me=T.width,Ue=T.height;if(f=T.S,0>=me||0>=Ue||!(f>=xh&&13>f))f=2;else{if(0>=T.Rd&&T.sd==null){ae=oe=Y=m=0;var Ge=(ce=me*B2[f])*Ue;if(11>f||(oe=(Ue+1)/2*(m=(me+1)/2),f==12&&(ae=(Y=me)*Ue)),(Ue=s(Ge+2*oe+ae))==null){f=1;break e}T.sd=Ue,11>f?((me=T.f.RGBA).eb=Ue,me.fb=0,me.A=ce,me.size=Ge):((me=T.f.kb).y=Ue,me.O=0,me.fa=ce,me.Fd=Ge,me.f=Ue,me.N=0+Ge,me.Ab=m,me.Cd=oe,me.ea=Ue,me.W=0+Ge+oe,me.Db=m,me.Ed=oe,f==12&&(me.F=Ue,me.J=0+Ge+2*oe),me.Tc=ae,me.lb=Y)}if(m=1,Y=T.S,oe=T.width,ae=T.height,Y>=xh&&13>Y)if(11>Y)f=T.f.RGBA,m&=(ce=Math.abs(f.A))*(ae-1)+oe<=f.size,m&=ce>=oe*B2[Y],m&=f.eb!=null;else{f=T.f.kb,ce=(oe+1)/2,Ge=(ae+1)/2,me=Math.abs(f.fa),Ue=Math.abs(f.Ab);var ut=Math.abs(f.Db),ht=Math.abs(f.lb),tt=ht*(ae-1)+oe;m&=me*(ae-1)+oe<=f.Fd,m&=Ue*(Ge-1)+ce<=f.Cd,m=(m&=ut*(Ge-1)+ce<=f.Ed)&me>=oe&Ue>=ce&ut>=ce,m&=f.y!=null,m&=f.f!=null,m&=f.ea!=null,Y==12&&(m&=ht>=oe,m&=tt<=f.Tc,m&=f.F!=null)}else m=0;f=m?0:2}}return f!=0||C!=null&&C.fd&&(f=Wo(T)),f}var mo=64,kr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ln=24,yn=32,No=8,qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];we("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(f){return f},D.Predictor2=function(f,m,C){return m[C+0]},D.Predictor3=function(f,m,C){return m[C+1]},D.Predictor4=function(f,m,C){return m[C-1]},D.Predictor5=function(f,m,C){return Ie(Ie(f,m[C+1]),m[C+0])},D.Predictor6=function(f,m,C){return Ie(f,m[C-1])},D.Predictor7=function(f,m,C){return Ie(f,m[C+0])},D.Predictor8=function(f,m,C){return Ie(m[C-1],m[C+0])},D.Predictor9=function(f,m,C){return Ie(m[C+0],m[C+1])},D.Predictor10=function(f,m,C){return Ie(Ie(f,m[C-1]),Ie(m[C+0],m[C+1]))},D.Predictor11=function(f,m,C){var T=m[C+0];return 0>=Fe(T>>24&255,f>>24&255,(m=m[C-1])>>24&255)+Fe(T>>16&255,f>>16&255,m>>16&255)+Fe(T>>8&255,f>>8&255,m>>8&255)+Fe(255&T,255&f,255&m)?T:f},D.Predictor12=function(f,m,C){var T=m[C+0];return(le((f>>24&255)+(T>>24&255)-((m=m[C-1])>>24&255))<<24|le((f>>16&255)+(T>>16&255)-(m>>16&255))<<16|le((f>>8&255)+(T>>8&255)-(m>>8&255))<<8|le((255&f)+(255&T)-(255&m)))>>>0},D.Predictor13=function(f,m,C){var T=m[C-1];return(Te((f=Ie(f,m[C+0]))>>24&255,T>>24&255)<<24|Te(f>>16&255,T>>16&255)<<16|Te(f>>8&255,T>>8&255)<<8|Te(f>>0&255,T>>0&255))>>>0};var Mo=D.PredictorAdd0;D.PredictorAdd1=Me,we("Predictor2","PredictorAdd2"),we("Predictor3","PredictorAdd3"),we("Predictor4","PredictorAdd4"),we("Predictor5","PredictorAdd5"),we("Predictor6","PredictorAdd6"),we("Predictor7","PredictorAdd7"),we("Predictor8","PredictorAdd8"),we("Predictor9","PredictorAdd9"),we("Predictor10","PredictorAdd10"),we("Predictor11","PredictorAdd11"),we("Predictor12","PredictorAdd12"),we("Predictor13","PredictorAdd13");var Ao=D.PredictorAdd2;Se("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Se("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var ci,Xo=D.ColorIndexInverseTransform,eA=D.MapARGB,xl=D.VP8LColorIndexInverseTransformAlpha,gd=D.MapAlpha,xa=D.VP8LPredictorsAdd=[];xa.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var tA,is,as,Is,As,ui,vd,rA,wo,Rc,Us,Ei,md,bh,qc,Bl,zl,PA,Cl,wd,Sl,kA,Kc,Fi,Ii,Kn,$n,bo,Ho=s(511),nA=s(2041),$c=s(225),bd=s(767),yh=0,Wg=nA,_h=$c,hi=bd,Ui=Ho,xh=0,Bh=1,h2=2,zh=3,Ch=4,Xg=5,f2=6,Yg=7,Jg=8,Sh=9,Zg=10,iC=[2,3,7],aC=[3,3,11],p2=[280,256,256,256,40],AC=[0,1,1,1,0],lC=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],dC=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cC=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],uC=8,ev=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vc=null,hC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],g2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],OA=[],Ki=[],oA=[],wC=1,v2=2,DA=[],Qi=[];Bt("UpsampleRgbLinePair",qr,3),Bt("UpsampleBgrLinePair",Ln,3),Bt("UpsampleRgbaLinePair",Go,4),Bt("UpsampleBgraLinePair",io,4),Bt("UpsampleArgbLinePair",Qo,4),Bt("UpsampleRgba4444LinePair",to,2),Bt("UpsampleRgb565LinePair",Rn,2);var bC=D.UpsampleRgbLinePair,yC=D.UpsampleBgrLinePair,m2=D.UpsampleRgbaLinePair,w2=D.UpsampleBgraLinePair,b2=D.UpsampleArgbLinePair,y2=D.UpsampleRgba4444LinePair,_C=D.UpsampleRgb565LinePair,Eh=16,Fh=1<<Eh-1,Gc=-227,rv=482,xC=6,_2=0,BC=s(256),zC=s(256),CC=s(256),SC=s(256),EC=s(rv-Gc),FC=s(rv-Gc);ms("YuvToRgbRow",qr,3),ms("YuvToBgrRow",Ln,3),ms("YuvToRgbaRow",Go,4),ms("YuvToBgraRow",io,4),ms("YuvToArgbRow",Qo,4),ms("YuvToRgba4444Row",to,2),ms("YuvToRgb565Row",Rn,2);var x2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ih=[0,2,8],IC=[8,7,6,4,4,2,2,2,1,1,1,1],UC=1;this.WebPDecodeRGBA=function(f,m,C,T,Y){var oe=Bh,ae=new Ci,ce=new rt;ae.ba=ce,ce.S=oe,ce.width=[ce.width],ce.height=[ce.height];var me=ce.width,Ue=ce.height,Ge=new Ke;if(Ge==null||f==null)var ut=2;else e(Ge!=null),ut=En(f,m,C,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(ut!=0?me=0:(me!=null&&(me[0]=Ge.width[0]),Ue!=null&&(Ue[0]=Ge.height[0]),me=1),me){ce.width=ce.width[0],ce.height=ce.height[0],T!=null&&(T[0]=ce.width),Y!=null&&(Y[0]=ce.height);e:{if(T=new bn,(Y=new ga).data=f,Y.w=m,Y.ha=C,Y.kd=1,m=[0],e(Y!=null),((f=En(Y.data,Y.w,Y.ha,null,null,null,m,null,Y))==0||f==7)&&m[0]&&(f=4),(m=f)==0){if(e(ae!=null),T.data=Y.data,T.w=Y.w+Y.offset,T.ha=Y.ha-Y.offset,T.put=St,T.ac=Pt,T.bc=bt,T.ma=ae,Y.xa){if((f=xt())==null){ae=1;break e}if(function(ht,tt){var Qt=[0],_t=[0],We=[0];t:for(;;){if(ht==null)return 0;if(tt==null)return ht.a=2,0;if(ht.l=tt,ht.a=0,re(ht.m,tt.data,tt.w,tt.ha),!ft(ht.m,Qt,_t,We)){ht.a=3;break t}if(ht.xb=v2,tt.width=Qt[0],tt.height=_t[0],!Dt(Qt[0],_t[0],1,ht,null))break t;return 1}return e(ht.a!=0),0}(f,T)){if(T=(m=ss(T.width,T.height,ae.Oa,ae.ba))==0){t:{T=f;r:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((C=T.l)!=null),e((Y=C.ma)!=null),T.xb!=0){if(T.ca=Y.ba,T.tb=Y.tb,e(T.ca!=null),!ao(Y.Oa,C,zh)){T.a=2;break r}if(!lr(T,C.width)||C.da)break r;if((C.da||Re(T.ca.S))&&ot(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&ot()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!He(T.s.vb,T.s.Wa.Xa)){T.a=1;break r}T.xb=0}if(!er(T,T.V,T.Ba,T.c,T.i,C.o,Vt))break r;Y.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(m=f.a)}else m=f.a}else{if((f=new Wr)==null){ae=1;break e}if(f.Fa=Y.na,f.P=Y.P,f.qc=Y.Sa,Oo(f,T)){if((m=ss(T.width,T.height,ae.Oa,ae.ba))==0){if(f.Aa=0,C=ae.Oa,e((Y=f)!=null),C!=null){if(0<(me=0>(me=C.Md)?0:100<me?255:255*me/100)){for(Ue=Ge=0;4>Ue;++Ue)12>(ut=Y.pb[Ue]).lc&&(ut.ia=me*IC[0>ut.lc?0:ut.lc]>>3),Ge|=ut.ia;Ge&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=C.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}gs(f,T)||(m=f.a)}}else m=f.a}m==0&&ae.Oa!=null&&ae.Oa.fd&&(m=Wo(ae.ba))}ae=m}oe=ae!=0?null:11>oe?ce.f.RGBA.eb:ce.f.kb.y}else oe=null;return oe};var B2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(D,ne){for(var xe="",L=0;L<4;L++)xe+=String.fromCharCode(D[ne++]);return xe}function c(D,ne){return(D[ne+0]<<0|D[ne+1]<<8|D[ne+2]<<16)>>>0}function u(D,ne){return(D[ne+0]<<0|D[ne+1]<<8|D[ne+2]<<16|D[ne+3]<<24)>>>0}new A;var h=[0],p=[0],v=[],w=new A,b=n,x=function(D,ne){var xe={},L=0,q=!1,V=0,se=0;if(xe.frames=[],!function(E,F,Q,M){for(var k=0;k<M;k++)if(E[F+k]!=Q.charCodeAt(k))return!0;return!1}(D,ne,"RIFF",4)){var ve,ie;for(u(D,ne+=4),ne+=8;ne<D.length;){var ge=d(D,ne),re=u(D,ne+=4);ne+=4;var ue=re+(1&re);switch(ge){case"VP8 ":case"VP8L":xe.frames[L]===void 0&&(xe.frames[L]={}),(z=xe.frames[L]).src_off=q?se:ne-8,z.src_size=V+re+8,L++,q&&(q=!1,V=0,se=0);break;case"VP8X":(z=xe.header={}).feature_flags=D[ne];var Z=ne+4;z.canvas_width=1+c(D,Z),Z+=3,z.canvas_height=1+c(D,Z),Z+=3;break;case"ALPH":q=!0,V=ue+8,se=ne-8;break;case"ANIM":(z=xe.header).bgcolor=u(D,ne),Z=ne+4,z.loop_count=(ve=D)[(ie=Z)+0]<<0|ve[ie+1]<<8,Z+=2;break;case"ANMF":var _e,z;(z=xe.frames[L]={}).offset_x=2*c(D,ne),ne+=3,z.offset_y=2*c(D,ne),ne+=3,z.width=1+c(D,ne),ne+=3,z.height=1+c(D,ne),ne+=3,z.duration=c(D,ne),ne+=3,_e=D[ne++],z.dispose=1&_e,z.blend=_e>>1&1}ge!="ANMF"&&(ne+=ue)}return xe}}(b,0);x.response=b,x.rgbaoutput=!0,x.dataurl=!1;var S=x.header?x.header:null,I=x.frames?x.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],p=[S.canvas_width];for(var P=0;P<I.length&&I[P].blend!=0;P++);}var N=I[0],ee=w.WebPDecodeRGBA(b,N.src_off,N.src_size,p,h);N.rgba=ee,N.imgwidth=p[0],N.imgheight=h[0];for(var j=0;j<p[0]*h[0]*4;j++)v[j]=ee[j];return this.width=p,this.height=h,this.data=v,this}(function(n){var e=function(){return typeof Sm=="function"},t=function(h,p,v,w){var b=4,x=i;switch(w){case n.image_compression.FAST:b=1,x=s;break;case n.image_compression.MEDIUM:b=6,x=a;break;case n.image_compression.SLOW:b=9,x=A}h=r(h,p,v,x);var S=Sm(h,{level:b});return n.__addimage__.arrayBufferToBinaryString(S)},r=function(h,p,v,w){for(var b,x,S,I=h.length/p,P=new Uint8Array(h.length+I),N=c(),ee=0;ee<I;ee+=1){if(S=ee*p,b=h.subarray(S,S+p),w)P.set(w(b,v,x),S+ee);else{for(var j,D=N.length,ne=[];j<D;j+=1)ne[j]=N[j](b,v,x);var xe=u(ne.concat());P.set(ne[xe],S+ee)}x=b}return P},o=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var v,w=[],b=h.length;w[0]=1;for(var x=0;x<b;x+=1)v=h[x-p]||0,w[x+1]=h[x]-v+256&255;return w},i=function(h,p,v){var w,b=[],x=h.length;b[0]=2;for(var S=0;S<x;S+=1)w=v&&v[S]||0,b[S+1]=h[S]-w+256&255;return b},a=function(h,p,v){var w,b,x=[],S=h.length;x[0]=3;for(var I=0;I<S;I+=1)w=h[I-p]||0,b=v&&v[I]||0,x[I+1]=h[I]+256-(w+b>>>1)&255;return x},A=function(h,p,v){var w,b,x,S,I=[],P=h.length;I[0]=4;for(var N=0;N<P;N+=1)w=h[N-p]||0,b=v&&v[N]||0,x=v&&v[N-p]||0,S=d(w,b,x),I[N+1]=h[N]-S+256&255;return I},d=function(h,p,v){if(h===p&&p===v)return h;var w=Math.abs(p-v),b=Math.abs(h-v),x=Math.abs(h+p-v-v);return w<=b&&w<=x?h:b<=x?p:v},c=function(){return[o,s,i,a,A]},u=function(h){var p=h.map(function(v){return v.reduce(function(w,b){return w+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(h,p,v,w){var b,x,S,I,P,N,ee,j,D,ne,xe,L,q,V,se,ve=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(S=new uN(h)).imgData,x=S.bits,b=S.colorSpace,P=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){D=(j=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,xe=new Uint8Array(D*S.colors),ne=new Uint8Array(D);var ge,re=S.pixelBitlength-S.bits;for(V=0,se=0;V<D;V++){for(q=j[V],ge=0;ge<re;)xe[se++]=q>>>ge&255,ge+=S.bits;ne[V]=q>>>ge&255}}if(S.bits===16){D=(j=new Uint32Array(S.decodePixels().buffer)).length,xe=new Uint8Array(D*(32/S.pixelBitlength)*S.colors),ne=new Uint8Array(D*(32/S.pixelBitlength)),L=S.colors>1,V=0,se=0;for(var ue=0;V<D;)q=j[V++],xe[se++]=q>>>0&255,L&&(xe[se++]=q>>>16&255,q=j[V++],xe[se++]=q>>>0&255),ne[ue++]=q>>>16&255;x=8}w!==n.image_compression.NONE&&e()?(h=t(xe,S.width*S.colors,S.colors,w),ee=t(ne,S.width,1,w)):(h=xe,ee=ne,ve=void 0)}if(S.colorType===3&&(b=this.color_spaces.INDEXED,N=S.palette,S.transparency.indexed)){var Z=S.transparency.indexed,_e=0;for(V=0,D=Z.length;V<D;++V)_e+=Z[V];if((_e/=255)===D-1&&Z.indexOf(0)!==-1)I=[Z.indexOf(0)];else if(_e!==D){for(j=S.decodePixels(),ne=new Uint8Array(j.length),V=0,D=j.length;V<D;V++)ne[V]=Z[j[V]];ee=t(ne,S.width,1)}}var z=function(E){var F;switch(E){case n.image_compression.FAST:F=11;break;case n.image_compression.MEDIUM:F=13;break;case n.image_compression.SLOW:F=14;break;default:F=12}return F}(w);return ve===this.decode.FLATE_DECODE&&(ie="/Predictor "+z+" "),ie+="/Colors "+P+" /BitsPerComponent "+x+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:v,data:h,index:p,filter:ve,decodeParameters:ie,transparency:I,palette:N,sMask:ee,predictor:z,width:S.width,height:S.height,bitsPerComponent:x,colorSpace:b}}}})(Sr.API),function(n){n.processGIF89A=function(e,t,r,o){var s=new hN(e),i=s.width,a=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var d={data:A,width:i,height:a},c=new A0(100).encode(d,100);return n.processJPEG.call(this,c,t,r,o)},n.processGIF87A=n.processGIF89A}(Sr.API),Wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Dn.log("bit decode error:"+t)}},Wi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var A=this.palette[s>>7-a&1];this.data[i+4*a]=A.blue,this.data[i+4*a+1]=A.green,this.data[i+4*a+2]=A.red,this.data[i+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Wi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,a=s>>4,A=15&s,d=this.palette[a];if(this.data[i]=d.blue,this.data[i+1]=d.green,this.data[i+2]=d.red,this.data[i+3]=255,2*o+1>=this.width)break;d=this.palette[A],this.data[i+4]=d.blue,this.data[i+4+1]=d.green,this.data[i+4+2]=d.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Wi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Wi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,d=s>>15?255:0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=d}this.pos+=n}},Wi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&t)/t*255|0,d=(i>>11)/e*255|0,c=o*this.width*4+4*s;this.data[c]=d,this.data[c+1]=A,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},Wi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=s,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},Wi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=i}},Wi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var s=new Wi(e,!1),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new A0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),Ey.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var s=new Ey(e),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new A0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),Sr.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,s=new Uint8Array(o/4*3),i=new Uint8Array(o/4),a=0,A=0,d=0;d<o;d+=4){var c=r[d],u=r[d+1],h=r[d+2],p=r[d+3];s[a++]=c,s[a++]=u,s[a++]=h,i[A++]=p}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Sr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Kd=Sr.API,$f=Kd.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,A=a.fof?a.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,c=d.fof?d.fof:1,u=e.doKerning!==!1,h=0,p=n.length,v=0,w=a[0]||A,b=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?b.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=u&&Qn(d[r])==="object"&&!isNaN(parseInt(d[r][v],10))?d[r][v]/c:0,b.push((a[r]||w)/A+h)),v=r;return b},By=Kd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Kd.processArabic&&(n=Kd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:$f.apply(this,arguments).reduce(function(s,i){return s+i},0)},zy=function(n,e,t,r){for(var o=[],s=0,i=n.length,a=0;s!==i&&a+e[s]<t;)a+=e[s],s++;o.push(n.slice(0,s));var A=s;for(a=0;s!==i;)a+e[s]>r&&(o.push(n.slice(A,s)),a=0,A=s),a+=e[s],s++;return A!==s&&o.push(n.slice(A,s)),o},Cy=function(n,e,t){t||(t={});var r,o,s,i,a,A,d,c=[],u=[c],h=t.textIndent||0,p=0,v=0,w=n.split(" "),b=$f.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var x=Array(A).join(" "),S=[];w.map(function(P){(P=P.split(/\s*\n/)).length>1?S=S.concat(P.map(function(N,ee){return(ee&&N.length?`
`:"")+N})):S.push(P[0])}),w=S,A=By.apply(this,[x,t])}for(s=0,i=w.length;s<i;s++){var I=0;if(r=w[s],A&&r[0]==`
`&&(r=r.substr(1),I=1),h+p+(v=(o=$f.apply(this,[r,t])).reduce(function(P,N){return P+N},0))>e||I){if(v>e){for(a=zy.apply(this,[r,o,e-(h+p),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);v=o.slice(r.length-(c[0]?c[0].length:0)).reduce(function(P,N){return P+N},0)}else c=[r];u.push(c),h=v+A,p=b}else c.push(r),h+=p+v,p=b}return d=A?function(P,N){return(N?x:"")+P.join(" ")}:function(P){return P.join(" ")},u.map(d)},Kd.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var a,A,d=[];for(a=0,A=r.length;a<A;a++)d=d.concat(Cy.apply(this,[r[a],i,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(u){return"0x"+parseInt(u,10).toString(16)},i=n.__fontmetrics__.compress=function(u){var h,p,v,w,b=["{"];for(var x in u){if(h=u[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=s(x).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof h=="number")h<0?(v=s(h).slice(3),w="-"):(v=s(h).slice(2),w=""),v=w+v.slice(0,-1)+r[v.slice(-1)];else{if(Qn(h)!=="object")throw new Error("Don't know what to do with value type "+Qn(h)+".");v=i(h)}b.push(p+v)}return b.push("}"),b.join("")},a=n.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,v,w,b={},x=1,S=b,I=[],P="",N="",ee=u.length-1,j=1;j<ee;j+=1)(w=u[j])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(w):w=="{"?(I.push([S,v]),S={},v=void 0):w=="}"?((p=I.pop())[0][p[1]]=S,v=void 0,S=p[0]):w=="-"?x=-1:v===void 0?t.hasOwnProperty(w)?(P+=t[w],v=parseInt(P,16)*x,x=1,P=""):P+=w:t.hasOwnProperty(w)?(N+=t[w],S[v]=parseInt(N,16)*x,x=1,v=void 0,N=""):N+=w;return b},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(u){var h=u.font,p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(Sr.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=t.charCodeAt(s);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(i,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Pu(a)),i.metadata=n.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(o,r)}}])}(Sr),function(n){function e(){return(Qr.canvg?Promise.resolve(Qr.canvg):Hs(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Sr.API.addSvgAsImage=function(t,r,o,s,i,a,A,d){if(isNaN(r)||isNaN(o))throw Dn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Dn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(v){return v.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),r,o,s,i,A,d)})}}(),Sr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},Sr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(i),A=[],d=0,c=0,u=0;function h(v,w){var b,x=!1;for(b=0;b<v.length;b+=1)v[b]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(u=0;u<p;u+=1)t[a[u]].value=t[a[u]].defaultValue,t[a[u]].explicitSet=!1}if(Qn(n)==="object"){for(o in n)if(s=n[o],h(a,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&h(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")A.push(String(s[d]-1));else if(s[d].length>1){for(c=0;c<s[d].length;c+=1)typeof s[d][c]!="number"&&(r=!1);r===!0&&A.push([s[d][0]-1,s[d][1]-1].join(" "))}t[o].value="["+A.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,w=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?w.push("/"+v+" /"+t[v].value):w.push("/"+v+" "+t[v].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+i.length+a.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+s+i+a+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Sr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,i){for(var a,A=i.metadata.Unicode.widths,d=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(a=i.metadata.characterToGlyph(s.charCodeAt(u)),i.metadata.glyIdsUsed.push(a),i.metadata.toUnicode[a]=s.charCodeAt(u),A.indexOf(a)==-1&&(A.push(a),A.push([parseInt(i.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(d[4-a.length],a)}return c.join("")},r=function(s){var i,a,A,d,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(a=Object.keys(s).sort(function(p,v){return p-v})).length;u<h;u++)i=a[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(d=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),A.push("<"+i+"><"+d+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",v=0;v<h.length;v++)p+=String.fromCharCode(h[v]);var w=d();c({data:p,addLength1:!0,objectId:w}),A("endobj");var b=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var x=d();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Yd(a.fontName)),A("/FontFile2 "+w+" 0 R"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/Flags "+a.metadata.flags),A("/StemV "+a.metadata.stemV),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A(">>"),A("endobj");var S=d();A("<<"),A("/Type /Font"),A("/BaseFont /"+Yd(a.fontName)),A("/FontDescriptor "+x+" 0 R"),A("/W "+n.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+a.encoding+")"),A(">>"),A(">>"),A("endobj"),a.objectNumber=d(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+b+" 0 R"),A("/BaseFont /"+Yd(a.fontName)),A("/Encoding /"+a.encoding),A("/DescendantFonts ["+S+" 0 R]"),A(">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",p=0;p<u.length;p++)h+=String.fromCharCode(u[p]);var v=d();c({data:h,addLength1:!0,objectId:v}),A("endobj");var w=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),A("endobj");var b=d();A("<<"),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A("/StemV "+a.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+v+" 0 R"),A("/Flags 96"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/FontName /"+Yd(a.fontName)),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A(">>"),A("endobj"),a.objectNumber=d();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Yd(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]);var o=function(s){var i,a=s.text||"",A=s.x,d=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,p=u.activeFontKey,v=u.fonts,w=p,b="",x=0,S="",I=v[w].encoding;if(v[w].encoding!=="Identity-H")return{text:a,x:A,y:d,options:c,mutex:u};for(S=a,w=p,Array.isArray(a)&&(S=a[0]),x=0;x<S.length;x+=1)v[w].metadata.hasOwnProperty("cmap")&&(i=v[w].metadata.cmap.unicode.codeMap[S[x].charCodeAt(0)]),i||S[x].charCodeAt(0)<256&&v[w].metadata.hasOwnProperty("Unicode")?b+=S[x]:b+="";var P="";return parseInt(w.slice(1))<14||I==="WinAnsiEncoding"?P=h(b,w).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(P=t(b,v[w])),u.isHex=!0,{text:P,x:A,y:d,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var i=s.text||"",a=[],A={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var d=0;for(d=0;d<i.length;d+=1)Array.isArray(i[d])&&i[d].length===3?a.push([o(Object.assign({},A,{text:i[d][0]})).text,i[d][1],i[d][2]]):a.push(o(Object.assign({},A,{text:i[d]})).text);s.text=a}else s.text=o(Object.assign({},A,{text:i})).text}])}(Sr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Sr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,s,i,a,A,d,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,I=0;this.__bidiEngine__={};var P=function(L){var q=L.charCodeAt(),V=q>>8,se=w[V];return se!==void 0?u[256*se+(255&q)]:V===252||V===253?"AL":x.test(V)?"L":V===8?"R":"N"},N=function(L){for(var q,V=0;V<L.length;V++){if((q=P(L.charAt(V)))==="L")return!1;if(q==="R")return!0}return!1},ee=function(L,q,V,se){var ve,ie,ge,re,ue=q[se];switch(ue){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(ue="AN");break;case"AL":S=!0,ue="R";break;case"WS":ue="N";break;case"CS":se<1||se+1>=q.length||(ve=V[se-1])!=="EN"&&ve!=="AN"||(ie=q[se+1])!=="EN"&&ie!=="AN"?ue="N":S&&(ie="AN"),ue=ie===ve?ie:"N";break;case"ES":ue=(ve=se>0?V[se-1]:"B")==="EN"&&se+1<q.length&&q[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&V[se-1]==="EN"){ue="EN";break}if(S){ue="N";break}for(ge=se+1,re=q.length;ge<re&&q[ge]==="ET";)ge++;ue=ge<re&&q[ge]==="EN"?"EN":"N";break;case"NSM":if(i&&!a){for(re=q.length,ge=se+1;ge<re&&q[ge]==="NSM";)ge++;if(ge<re){var Z=L[se],_e=Z>=1425&&Z<=2303||Z===64286;if(ve=q[ge],_e&&(ve==="R"||ve==="AL")){ue="R";break}}}ue=se<1||(ve=q[se-1])==="B"?"N":V[se-1];break;case"B":S=!1,o=!0,ue=I;break;case"S":s=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":ue="N"}return ue},j=function(L,q,V){var se=L.split("");return V&&D(se,V,{hiLevel:I}),se.reverse(),q&&q.reverse(),se.join("")},D=function(L,q,V){var se,ve,ie,ge,re,ue=-1,Z=L.length,_e=0,z=[],E=I?p:h,F=[];for(S=!1,o=!1,s=!1,ve=0;ve<Z;ve++)F[ve]=P(L[ve]);for(ie=0;ie<Z;ie++){if(re=_e,z[ie]=ee(L,F,z,ie),se=240&(_e=E[re][v[z[ie]]]),_e&=15,q[ie]=ge=E[_e][5],se>0)if(se===16){for(ve=ue;ve<ie;ve++)q[ve]=1;ue=-1}else ue=-1;if(E[_e][6])ue===-1&&(ue=ie);else if(ue>-1){for(ve=ue;ve<ie;ve++)q[ve]=ge;ue=-1}F[ie]==="B"&&(q[ie]=0),V.hiLevel|=ge}s&&function(Q,M,k){for(var O=0;O<k;O++)if(Q[O]==="S"){M[O]=I;for(var K=O-1;K>=0&&Q[K]==="WS";K--)M[K]=I}}(F,q,Z)},ne=function(L,q,V,se,ve){if(!(ve.hiLevel<L)){if(L===1&&I===1&&!o)return q.reverse(),void(V&&V.reverse());for(var ie,ge,re,ue,Z=q.length,_e=0;_e<Z;){if(se[_e]>=L){for(re=_e+1;re<Z&&se[re]>=L;)re++;for(ue=_e,ge=re-1;ue<ge;ue++,ge--)ie=q[ue],q[ue]=q[ge],q[ge]=ie,V&&(ie=V[ue],V[ue]=V[ge],V[ge]=ie);_e=re}_e++}}},xe=function(L,q,V){var se=L.split(""),ve={hiLevel:I};return V||(V=[]),D(se,V,ve),function(ie,ge,re){if(re.hiLevel!==0&&c)for(var ue,Z=0;Z<ie.length;Z++)ge[Z]===1&&(ue=b.indexOf(ie[Z]))>=0&&(ie[Z]=b[ue+1])}(se,V,ve),ne(2,se,q,V,ve),ne(1,se,q,V,ve),se.join("")};return this.__bidiEngine__.doBidiReorder=function(L,q,V){if(function(ve,ie){if(ie)for(var ge=0;ge<ve.length;ge++)ie[ge]=ge;a===void 0&&(a=N(ve)),d===void 0&&(d=N(ve))}(L,q),i||!A||d)if(i&&A&&a^d)I=a?1:0,L=j(L,q,V);else if(!i&&A&&d)I=a?1:0,L=xe(L,q,V),L=j(L,q);else if(!i||a||A||d){if(i&&!A&&a^d)L=j(L,q),a?(I=0,L=xe(L,q,V)):(I=1,L=xe(L,q,V),L=j(L,q));else if(i&&a&&!A&&d)I=1,L=xe(L,q,V),L=j(L,q);else if(!i&&!A&&a^d){var se=c;a?(I=1,L=xe(L,q,V),I=0,c=!1,L=xe(L,q,V),c=se):(I=0,L=xe(L,q,V),L=j(L,q),I=1,c=!1,L=xe(L,q,V),c=se,L=j(L,q))}}else I=0,L=xe(L,q,V);else I=a?1:0,L=xe(L,q,V);return L},this.__bidiEngine__.setOptions=function(L){L&&(i=L.isInputVisual,A=L.isOutputVisual,a=L.isInputRtl,d=L.isOutputRtl,c=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(i=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?i.push([t.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):i.push([t.doBidiReorder(o[a])]);r.text=i}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(Sr),Sr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ml(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new EN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new fN(this.contents),this.head=new gN(this),this.name=new yN(this),this.cmap=new Bz(this),this.toUnicode={},this.hhea=new vN(this),this.maxp=new _N(this),this.hmtx=new xN(this),this.post=new wN(this),this.os2=new mN(this),this.loca=new SN(this),this.glyf=new BN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,a,A,d;for(d=[],i=0,a=(A=this.bbox).length;i<a;i++)e=A[i],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)o=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ua,ml=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,s,i,a,A;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*s+65536*i+256*a+A},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),fN=function(){var n;function e(t){var r,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,s,i,a,A,d,c,u,h,p,v,w;for(w in p=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(p)/A),i=Math.floor(u/A),c=16*p-u,(o=new ml).writeInt(this.scalarType),o.writeShort(p),o.writeShort(u),o.writeShort(i),o.writeShort(c),s=16*p,d=o.pos+s,a=null,v=[],t)for(h=t[w],o.writeString(w),o.writeInt(n(h)),o.writeInt(d),o.writeInt(h.length),v=v.concat(h),w==="head"&&(a=d),d+=h.length;d%4;)v.push(0),d++;return o.write(v),r=2981146554-n(o.data),o.pos=a+8,o.writeUInt32(r),o.data},n=function(t){var r,o,s,i;for(t=zz.call(t);t.length%4;)t.push(0);for(s=new ml(t),o=0,r=0,i=t.length;r<i;r=r+=4)o+=s.readUInt32();return 4294967295&o},e}(),pN={}.hasOwnProperty,Va=function(n,e){for(var t in e)pN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ua=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var gN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ml).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Fy=function(){function n(e,t){var r,o,s,i,a,A,d,c,u,h,p,v,w,b,x,S,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(p=e.readUInt16(),h=p/2,e.pos+=6,s=function(){var P,N;for(N=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)N.push(e.readUInt16());return N}(),e.pos+=2,w=function(){var P,N;for(N=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)N.push(e.readUInt16());return N}(),d=function(){var P,N;for(N=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)N.push(e.readUInt16());return N}(),c=function(){var P,N;for(N=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)N.push(e.readUInt16());return N}(),o=(this.length-e.pos+this.offset)/2,a=function(){var P,N;for(N=[],A=P=0;0<=o?P<o:P>o;A=0<=o?++P:--P)N.push(e.readUInt16());return N}(),A=x=0,I=s.length;x<I;A=++x)for(b=s[A],r=S=v=w[A];v<=b?S<=b:S>=b;r=v<=b?++S:--S)c[A]===0?i=r+d[A]:(i=a[c[A]/2+(r-v)-(h-A)]||0)!==0&&(i+=d[A]),this.codeMap[r]=65535&i}e.pos=u}return n.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,p,v,w,b,x,S,I,P,N,ee,j,D,ne,xe,L,q,V,se,ve,ie,ge,re,ue,Z,_e,z,E,F,Q,M,k,O,K,R,de,Be;switch(se=new ml,i=Object.keys(e).sort(function(Pe,He){return Pe-He}),t){case"macroman":for(w=0,b=function(){var Pe=[];for(v=0;v<256;++v)Pe.push(0);return Pe}(),S={0:0},s={},ve=0,ue=i.length;ve<ue;ve++)S[K=e[o=i[ve]]]==null&&(S[K]=++w),s[o]={old:e[o],new:S[e[o]]},b[o]=S[e[o]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(b),{charMap:s,subtable:se.data,maxGlyphID:w+1};case"unicode":for(q=[],u=[],I=0,S={},r={},x=d=null,ie=0,Z=i.length;ie<Z;ie++)S[N=e[o=i[ie]]]==null&&(S[N]=++I),r[o]={old:N,new:S[N]},a=S[N]-o,x!=null&&a===d||(x&&u.push(x),q.push(o),d=a),x=o;for(x&&u.push(x),u.push(65535),q.push(65535),xe=2*(ne=q.length),D=2*Math.pow(Math.log(ne)/Math.LN2,2),h=Math.log(D/2)/Math.LN2,j=2*ne-D,A=[],ee=[],p=[],v=ge=0,_e=q.length;ge<_e;v=++ge){if(L=q[v],c=u[v],L===65535){A.push(0),ee.push(0);break}if(L-(V=r[L].new)>=32768)for(A.push(0),ee.push(2*(p.length+ne-v)),o=re=L;L<=c?re<=c:re>=c;o=L<=c?++re:--re)p.push(r[o].new);else A.push(V-L),ee.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*ne+2*p.length),se.writeUInt16(0),se.writeUInt16(xe),se.writeUInt16(D),se.writeUInt16(h),se.writeUInt16(j),k=0,z=u.length;k<z;k++)o=u[k],se.writeUInt16(o);for(se.writeUInt16(0),O=0,E=q.length;O<E;O++)o=q[O],se.writeUInt16(o);for(R=0,F=A.length;R<F;R++)a=A[R],se.writeUInt16(a);for(de=0,Q=ee.length;de<Q;de++)P=ee[de],se.writeUInt16(P);for(Be=0,M=p.length;Be<M;Be++)w=p[Be],se.writeUInt16(w);return{charMap:r,subtable:se.data,maxGlyphID:I+1}}},n}(),Bz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r=new Fy(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,s;return r==null&&(r="macroman"),o=Fy.encode(t,r),(s=new ml).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),vN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),mN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),wN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(o=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=(function(){var a,A,d;for(d=[],i=a=0,A=this.file.maxp.numGlyphs;0<=A?a<A:a>A;i=0<=A?++a:--a)d.push(t.readUInt32());return d}).call(this)}},e}(),bN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,s,i,a,A,d,c,u,h,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),A=t.readShort(),o=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=u=0,h=o.length;u<h;i=++u)s=o[i],t.pos=s.offset,c=t.readString(s.length),a=new bN(c,s),d[p=s.nameID]==null&&(d[p]=[]),d[s.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),_N=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),xN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,s,i,a,A,d;for(t.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,h,p;for(p=[],c=0,u=(h=this.metrics).length;c<u;c++)i=h[c],p.push(i.advance);return p}).call(this),o=this.widths[this.widths.length-1],d=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)d.push(this.widths.push(o));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),zz=[].slice,BN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,s,i,a,A,d,c,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,o=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,a=(A=new ml(r.read(s))).readShort(),c=A.readShort(),h=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[t]=a===-1?new CN(A,c,h,d,u):new zN(A,a,c,h,d,u),this.cache[t]))},e.prototype.encode=function(t,r,o){var s,i,a,A,d;for(a=[],i=[],A=0,d=r.length;A<d;A++)s=t[r[A]],i.push(a.length),s&&(a=a.concat(s.encode(o)));return i.push(a.length),{table:a,offsets:i}},e}(),zN=function(){function n(e,t,r,o,s,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=s,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),CN=function(){function n(e,t,r,o,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ml(zz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),SN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Va(e,ua),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<o.length;++a)if(o[a]=s,i<r.length&&r[i]==a){++i,o[a]=s;var A=this.offsets[a],d=this.offsets[a+1]-A;d>0&&(s+=d)}for(var c=new Array(4*o.length),u=0;u<o.length;++u)c[4*u+3]=255&o[u],c[4*u+2]=(65280&o[u])>>8,c[4*u+1]=(16711680&o[u])>>16,c[4*u]=(4278190080&o[u])>>24;return c},e}(),EN=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,s,i,a,A;for(o={},i=0,a=e.length;i<a;i++)o[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(r=o[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))r=A[s],o[s]=r;return o},n.prototype.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,p,v,w,b,x;for(o in r=Bz.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),p={0:0},x=r.charMap)p[(A=x[o]).old]=A.new;for(v in h=r.maxGlyphID,i)v in p||(p[v]=h++);return c=function(S){var I,P;for(I in P={},S)P[S[I]]=I;return P}(p),u=Object.keys(c).sort(function(S,I){return S-I}),w=function(){var S,I,P;for(P=[],S=0,I=u.length;S<I;S++)a=u[S],P.push(c[a]);return P}(),s=this.font.glyf.encode(i,w,p),d=this.font.loca.encode(s.offsets,w),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},n}();Sr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,s,i;if(Array.isArray(t))return"["+function(){var a,A,d;for(d=[],a=0,A=t.length;a<A;a++)r=t[a],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)i=t[o],s.push("/"+o+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+t},e}();var FN=G('<tr><td class="odz-text-xs"></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),IN=G('<tr><td></td><td colspan="5" class="odz-text-xs"> <!> <!></td><td> </td></tr>'),UN=G('<tr><td></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),QN=G("<!> <!> <!>",1),TN=G('<tr><td></td><td class="odz-text-xs">[]  </td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td> </td></tr>'),LN=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-p-8 odz-print-area"><h1 class="odz-text-center odz-text-3xl odz-font-bold odz-mb-8"></h1> <table class="odz-table odz-w-full odz-border odz-border-gray-400"><tbody><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200 odz-w-32"> </td><td>101-86-83287</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td>()</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"> </td><td colspan="3">  22 19-15</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td>02-6499-2267</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td colspan="3"><div class="odz-flex odz-justify-between"><span></span> <span></span></div></td></tr></tbody></table> <div class="odz-my-4"><div class="odz-font-bold">  (+)</div> <div class="odz-text-right"> </div></div> <table class="odz-table odz-table-bordered odz-w-full"><thead><tr class="odz-bg-base-200"><th></th><th>/</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><!><!><tr><td colspan="3" class="odz-text-center odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"> </td></tr></tbody></table> <div class="odz-mt-4 odz-p-4 odz-bg-base-200 odz-rounded"><div class="odz-font-bold odz-mb-2"></div> <ul class="odz-list-disc odz-list-inside odz-text-sm"><li>   20 (   )</li> <li>      .</li> <li>   .</li> <li>   .</li> <li>       ,  .</li></ul></div> <div class="odz-flex odz-justify-end odz-gap-2 odz-mt-6 print:odz-hidden"><button class="odz-btn odz-btn-primary"></button> <button class="odz-btn odz-btn-secondary">PDF </button> <button class="odz-btn"></button></div></div></dialog>');function PN(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t);let s=gt(e,"isOpen",12);function i(){s(!1)}function a(){window.print()}console.log("paper estimateStore",o());const A=new Date,d=`${A.getFullYear()} ${String(A.getMonth()+1).padStart(2,"0")} ${String(A.getDate()).padStart(2,"0")}`;async function c(){const Z=document.querySelector(".odz-print-area");if(Z)try{const _e=Z.querySelector(".print\\:odz-hidden");let z="";_e&&(z=_e.style.display,_e.style.display="none");const E=Z.scrollHeight,F=Z.scrollWidth,Q=Z.scrollTop;Z.scrollTop=0;const M=await FD(Z,{useCORS:!0,scale:2,x:0,y:0,width:F,height:E,backgroundColor:"#ffffff",logging:!1,allowTaint:!0,windowHeight:E});Z.scrollTop=Q,_e&&(_e.style.display=z);const k=M.toDataURL("image/png",1),O=new Sr({orientation:"portrait",unit:"mm",format:"a4"}),K=O.internal.pageSize.getWidth(),R=O.internal.pageSize.getHeight(),de=10,Be=K-de*2,Pe=R-de*2,He=M.height/M.width;let H=Be*He;if(H>Pe){const te=Math.ceil(H/Pe),Ae=M.height/H,he=Pe*Ae;for(let we=0;we<te;we++){we>0&&O.addPage();const ye=-we*he/Ae;O.addImage(k,"PNG",de,ye+de,Be,M.height*(Be/M.width))}}else O.addImage(k,"PNG",de,de,Be,H);O.save(".pdf")}catch(_e){console.error("PDF    :",_e)}}cn();var u=LN(),h=g(u),p=B(g(h),2),v=g(p),w=g(v),b=B(g(w),3);b.textContent=d;var x=B(p,2),S=B(g(x),2),I=g(S),P=B(x,2),N=B(g(P)),ee=g(N);sr(ee,1,()=>o().products,vr,(Z,_e,z)=>{var E=QN(),F=lt(E);sr(F,1,()=>l(_e).variants,vr,(K,R,de)=>{var Be=FN();const Pe=At(()=>l(R).prices[0].amount),He=At(()=>l(_e).variants.reduce((Se,$)=>Se+($.quantity||0),0)),W=At(()=>{var Se;return(Se=l(_e).discountInfo)!=null&&Se.hasDiscount?(l(_e).discountInfo.originalAmount-l(_e).discountInfo.discountAmount)/l(He):l(Pe)}),H=At(()=>l(W)*l(R).quantity);var te=g(Be);te.textContent=`${z+1}-${de+1}`;var Ae=B(te),he=g(Ae),we=B(Ae),ye=g(we),Ie=B(we),le=g(Ie),Te=B(Ie),Fe=g(Te),Me=B(Te),Ne=g(Me),fe=B(Me),J=g(fe);De((Se,$)=>{Qe(he,l(_e).product.title),Qe(ye,l(R).title||""),Qe(le,l(R).quantity),Qe(Fe,Se),Qe(Ne,$),Qe(J,$)},[()=>Er(l(W)),()=>Er(l(H))],At),U(K,Be)});var Q=B(F,2);{var M=K=>{var R=Tt(),de=lt(R);sr(de,1,()=>l(_e).prints,vr,(Be,Pe)=>{var He=IN(),W=B(g(He)),H=g(W),te=B(H);{var Ae=le=>{var Te=xn();De(Fe=>Qe(Te,`- ${Fe??""}`),[()=>l(Pe).parentTemplates.map(Fe=>Fe.name).join(" > ")],At),U(le,Te)};be(te,le=>{l(Pe).parentTemplates&&le(Ae)})}var he=B(te,2);{var we=le=>{var Te=xn();De(()=>Qe(Te,`- ${l(Pe).colors.length??""}`)),U(le,Te)};be(he,le=>{l(Pe).colors&&le(we)})}var ye=B(W),Ie=g(ye);De(le=>{Qe(H,`: ${l(Pe).title??""} `),Qe(Ie,le)},[()=>Er(l(Pe).price||0)],At),U(Be,He)}),U(K,R)};be(Q,K=>{l(_e).prints&&l(_e).prints.length>0&&K(M)})}var k=B(Q,2);{var O=K=>{var R=Tt(),de=lt(R);sr(de,1,()=>Object.entries(l(_e).addons),vr,(Be,Pe)=>{let He=()=>l(Pe)[1];var W=Tt();const H=At(()=>l(_e).addonProductsMap[He().productId]),te=At(()=>{var we,ye;return(ye=(we=l(H))==null?void 0:we.variants)==null?void 0:ye.find(Ie=>Ie.id===He().variantId)});var Ae=lt(W);{var he=we=>{var ye=UN(),Ie=B(g(ye)),le=g(Ie),Te=B(Ie),Fe=g(Te),Me=B(Te),Ne=g(Me),fe=B(Me),J=g(fe),Se=B(fe),$=g(Se),Ce=B(Se),Ee=g(Ce);De((Oe,je)=>{Qe(le,`[] ${l(H).title??""}`),Qe(Fe,l(te).title||""),Qe(Ne,l(_e).quantity),Qe(J,Oe),Qe($,je),Qe(Ee,je)},[()=>Er(l(te).prices[0].amount),()=>Er(l(te).prices[0].amount*l(_e).quantity)],At),U(we,ye)};be(Ae,we=>{l(H)&&l(te)&&we(he)})}U(Be,W)}),U(K,R)};be(k,K=>{l(_e).addons&&l(_e).addonProductsMap&&Object.keys(l(_e).addons).length>0&&K(O)})}U(Z,E)});var j=B(ee);{var D=Z=>{var _e=TN(),z=B(g(_e),6),E=g(z);De(F=>Qe(E,F),[()=>Er(o().totalAdditionalAmount)],At),U(Z,_e)};be(j,Z=>{o().totalAdditionalAmount>0&&Z(D)})}var ne=B(j),xe=B(g(ne)),L=g(xe),q=B(xe,2),V=g(q),se=B(q),ve=g(se),ie=B(P,4),ge=g(ie),re=B(ge,2),ue=B(re,2);De((Z,_e)=>{Qe(I,` (  ${Z??""} )`),Qe(L,`${o().totalQuantity??""}`),Qe(V,_e),Qe(ve,Z)},[()=>Er(o().totalAmount),()=>Er(o().totalProductAmount+o().totalPrintAmount+o().totalAddonAmount+o().totalAdditionalAmount)],At),it("click",ge,a),it("click",re,c),it("click",ue,i),U(n,u),An(),r()}var kN=G("<!> <button> </button>",1),ON=G("<button> </button>"),DN=G('<div class="odz-flex odz-flex-wrap odz-gap-1.5"></div>'),NN=G('<div class="odz-flex odz-justify-center odz-items-center odz-h-32"><div class="odz-loading odz-loading-spinner odz-loading-md"></div></div>'),MN=G('<div class="odz-text-error odz-text-center odz-py-4"> </div>'),HN=G('<div class="odz-text-center odz-py-4 odz-text-gray-500">  .</div>'),jN=G('<img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0">'),RN=G('<div class="odz-w-12 odz-h-12 odz-bg-gray-100 odz-rounded odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><span class="odz-text-gray-400 odz-text-xs"></span></div>'),qN=G('<div class="odz-flex odz-items-center odz-gap-3 odz-p-2 odz-bg-base-100 odz-rounded-lg odz-border odz-border-gray-100 hover:odz-bg-gray-50"><!> <div class="odz-flex-1 odz-min-w-0"><h3 class="odz-text-sm odz-font-medium odz-truncate"> </h3> <div class="odz-text-xs odz-text-gray-500"><!></div></div> <button class="odz-btn odz-btn-primary odz-btn-xs odz-flex-shrink-0"></button></div>'),KN=G('<div class="odz-flex odz-justify-center odz-items-center odz-py-3"><div class="odz-loading odz-loading-spinner odz-loading-sm"></div></div>'),$N=G('<div class="odz-flex odz-flex-col odz-gap-2"></div> <!>',1),VN=G('<div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-bg-white odz-rounded-lg odz-w-full odz-max-w-2xl odz-mx-4 odz-max-h-[80vh] odz-overflow-hidden odz-flex odz-flex-col"><div class="odz-p-4 odz-border-b odz-flex odz-justify-between odz-items-center"><h2 class="odz-text-lg odz-font-bold"> </h2> <button class="odz-btn odz-btn-ghost odz-btn-sm"><!></button></div> <div class="odz-p-3 odz-border-b odz-space-y-3"><div class="odz-relative"><input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-input-sm"> <!></div> <div class="odz-flex odz-items-center odz-gap-1.5 odz-text-xs odz-text-gray-500"><button></button> <!></div> <!></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-3"><!></div></div></div>');function t2(n,e){an(e,!1);const t=ze();let r=gt(e,"addProduct",8),o=gt(e,"isProductSearchOpen",12),s=gt(e,"productType",8,""),i=gt(e,"excludeNoProcess",8,!1),a=ze(""),A=ze([]),d=ze([]),c=ze(""),u=ze([]),h=ze(!1),p=ze(null),v,w=!0,b=1;const x=20;let S=ze();Zn(async()=>{document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(de=>{de instanceof HTMLElement&&(de.scrollTop=0)});try{y(d,await s5()),await I()}catch(de){console.error("     :",de)}}),ps(()=>{document.body.style.overflow=""});async function I(){y(h,!0),y(p,null);try{const{products:R,total:de}=await Wf("",void 0,1,x,s(),i());y(A,R),w=l(A).length<de}catch(R){console.error("    :",R),y(p,"    .")}finally{y(h,!1)}}async function P(){if(!(l(h)||!w)){y(h,!0),b++;try{const{products:R,total:de}=await Wf(l(a),l(c),b,x,s(),i());R.length>0?(y(A,[...l(A),...R]),w=l(A).length<de):w=!1}catch(R){console.error("     :",R),y(p,"    .")}finally{y(h,!1)}}}async function N(){if(!l(a).trim()&&!l(c)){await I();return}y(h,!0),y(p,null),b=1,y(A,[]);try{const{products:R,total:de}=await Wf(l(a),l(c),1,x,s(),i());y(A,R),w=l(A).length<de}catch(R){console.error("    :",R),y(p,"    .")}finally{y(h,!1)}}function ee(){clearTimeout(v),v=setTimeout(N,300)}function j(R){y(c,R.id),y(u,[...l(u),R]),N()}function D(R){y(u,l(u).slice(0,R+1)),y(c,l(u)[R].id),N()}function ne(R){r()(R.id)}function xe(){o(!1),y(a,""),y(c,""),y(u,[]),y(A,[]),y(p,null),b=1,w=!0}function L(){if(!l(S))return;const{scrollTop:R,scrollHeight:de,clientHeight:Be}=l(S);de-R<=Be*1.5&&P()}Zt(()=>(l(u),l(d)),()=>{var R;y(t,l(u).length===0?l(d):((R=l(u)[l(u).length-1])==null?void 0:R.children)||[])}),Fo(),cn();var q=VN(),V=g(q),se=g(V),ve=B(g(se),2),ie=g(ve);xA(ie,{class:"odz-w-5 odz-h-5"});var ge=B(se,2),re=g(ge),ue=g(re),Z=B(ue,2);_p(Z,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var _e=B(re,2),z=g(_e),E=B(z,2);sr(E,1,()=>l(u),vr,(R,de,Be)=>{var Pe=kN(),He=lt(Pe);gE(He,{class:"odz-w-3 odz-h-3"});var W=B(He,2),H=g(W);De(()=>{Pr(W,`hover:odz-text-primary odz-transition-colors ${(Be===l(u).length-1?"odz-text-gray-900 odz-font-medium":"")??""}`),Qe(H,l(de).name)}),it("click",W,()=>D(Be)),U(R,Pe)});var F=B(_e,2);{var Q=R=>{var de=DN();sr(de,5,()=>l(t),vr,(Be,Pe)=>{var He=ON(),W=g(He);De(()=>{Pr(He,`odz-px-3 odz-py-1 odz-text-xs odz-rounded-full odz-transition-all odz-duration-200
                ${(l(c)===l(Pe).id?"odz-bg-primary odz-text-primary-content odz-shadow-sm":"odz-bg-gray-100 odz-text-gray-600 hover:odz-bg-gray-200 hover:odz-text-gray-800")??""}`),Qe(W,l(Pe).name)}),it("click",He,()=>j(l(Pe))),U(Be,He)}),U(R,de)};be(F,R=>{l(t).length>0&&R(Q)})}var M=B(ge,2),k=g(M);{var O=R=>{var de=NN();U(R,de)},K=R=>{var de=Tt(),Be=lt(de);{var Pe=W=>{var H=MN(),te=g(H);De(()=>Qe(te,l(p))),U(W,H)},He=W=>{var H=Tt(),te=lt(H);{var Ae=we=>{var ye=HN();U(we,ye)},he=we=>{var ye=$N(),Ie=lt(ye);sr(Ie,5,()=>l(A),vr,(Fe,Me)=>{var Ne=qN(),fe=g(Ne);{var J=et=>{var Je=jN();De(()=>{cr(Je,"src",l(Me).thumbnail),cr(Je,"alt",l(Me).title)}),U(et,Je)},Se=et=>{var Je=RN();U(et,Je)};be(fe,et=>{l(Me).thumbnail?et(J):et(Se,!1)})}var $=B(fe,2),Ce=g($),Ee=g(Ce),Oe=B(Ce,2),je=g(Oe);{var ke=et=>{var Je=Tt(),rt=lt(Je);{var Ke=st=>{var pt=xn();De(It=>Qe(pt,`${It??""}`),[()=>Er(l(Me).variants[0].prices[0].amount)],At),U(st,pt)},nt=st=>{var pt=xn();De(It=>Qe(pt,`${It??""} ~`),[()=>Er(Math.min(...l(Me).variants.map(It=>It.prices[0].amount)))],At),U(st,pt)};be(rt,st=>{l(Me).variants.length===1?st(Ke):st(nt,!1)})}U(et,Je)},pe=et=>{var Je=xn("  ");U(et,Je)};be(je,et=>{l(Me).variants&&l(Me).variants.length>0?et(ke):et(pe,!1)})}var Re=B($,2);De(()=>Qe(Ee,l(Me).title)),it("click",Re,()=>ne(l(Me))),U(Fe,Ne)});var le=B(Ie,2);{var Te=Fe=>{var Me=KN();U(Fe,Me)};be(le,Fe=>{l(h)&&l(A).length>0&&Fe(Te)})}U(we,ye)};be(te,we=>{l(A).length===0&&(l(a)||l(c))?we(Ae):we(he,!1)},!0)}U(W,H)};be(Be,W=>{l(p)?W(Pe):W(He,!1)},!0)}U(R,de)};be(k,R=>{l(h)&&l(A).length===0?R(O):R(K,!1)})}hs(M,R=>y(S,R),()=>l(S)),De(()=>Pr(z,`hover:odz-text-primary odz-transition-colors ${(l(u).length===0?"odz-text-gray-900 odz-font-medium":"")??""}`)),it("click",ve,xe),Fr(ue,()=>l(a),R=>y(a,R)),it("input",ue,ee),it("click",z,()=>{y(u,[]),y(c,""),N()}),it("scroll",M,L),U(n,q),An()}var GN=G('<div class="odz-text-sm odz-text-gray-600 odz-mt-1"> </div>'),WN=G('<div class="odz-flex odz-items-center odz-justify-between odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><div class="odz-flex-1"><div class="odz-font-semibold odz-text-gray-800"> </div> <!></div> <div class="odz-text-right"><div class="odz-font-bold odz-text-lg odz-text-gray-800"> </div></div></div>'),XN=G('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><h2 class="odz-text-lg odz-font-bold odz-mb-4 odz-flex odz-items-center odz-gap-2"></h2> <div class="odz-space-y-3"></div> <div class="odz-divider odz-my-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><span class="odz-font-bold odz-text-lg odz-text-gray-800"> </span> <span class="odz-font-bold odz-text-xl odz-text-gray-800"> </span></div></div></div>');function YN(n,e){an(e,!1);const t=ze();let r=gt(e,"additionalCosts",24,()=>[]);gt(e,"isEditable",8,!0),Zt(()=>no(r()),()=>{y(t,r().reduce((a,A)=>a+Number(A.amount),0))}),Fo(),cn();var o=Tt(),s=lt(o);{var i=a=>{var A=XN(),d=g(A),c=B(g(d),2);sr(c,5,r,v=>v.id,(v,w)=>{var b=WN(),x=g(b),S=g(x),I=g(S),P=B(S,2);{var N=ne=>{var xe=GN(),L=g(xe);De(()=>Qe(L,l(w).description)),U(ne,xe)};be(P,ne=>{l(w).description&&ne(N)})}var ee=B(x,2),j=g(ee),D=g(j);De(ne=>{Qe(I,l(w).name),Qe(D,`+${ne??""}`)},[()=>Er(Number(l(w).amount))],At),U(v,b)});var u=B(c,4),h=B(g(u),2),p=g(h);De(v=>Qe(p,`+${v??""}`),[()=>Er(l(t))],At),U(a,A)};be(s,a=>{r().length>0&&a(i)})}U(n,o),An()}var JN=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-bg-gray-50 odz-rounded-lg"><div class="odz-text-6xl odz-mb-4"></div> <h3 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-6">      </p> <button class="odz-btn odz-btn-primary odz-gap-2"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </button></div>'),ZN=G("<div><!></div>"),eM=G("<div><!></div>"),tM=G("<div></div>"),rM=G('<div class="odz-mt-5"><div role="tablist" class="odz-tabs odz-tabs-boxed"><button role="tab"></button> <button role="tab"></button></div></div> <!>',1),nM=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-text-lg odz-font-medium odz-mt-4">   ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2"> ,  ,    .</p></div>'),oM=G('<button class="odz-btn odz-btn-primary"><!>  </button>'),sM=G('<div><h2 class="odz-text-2xl odz-font-bold odz-mb-4"> </h2> <!> <div class="odz-flex odz-justify-end odz-mt-4"><!></div> <!></div>'),iM=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-md odz-text-primary"></div> <p class="odz-text-base odz-font-medium odz-mt-3">   ...</p></div>'),aM=G('<span class="odz-badge odz-badge-warning"> </span>'),AM=G('<div class="odz-flex odz-items-center odz-gap-2"><span> </span> <!></div>'),lM=G('<div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="password-input"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input id="password-input" type="password" class="odz-input odz-input-bordered odz-w-full" placeholder="     "> <label class="odz-label" for="password-input"><span class="odz-label-text-alt">     .  !</span></label></div>'),dM=G(`<div class="odz-flex odz-justify-between odz-items-center odz-mb-4"><h2 class="odz-text-lg odz-font-bold odz-flex odz-items-center odz-gap-1">  <div class="odz-flex odz-items-center odz-gap-1"><!> <span class="odz-text-xs odz-text-gray-500 odz-ml-1">  </span></div></h2> <!></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="   . ) ' 000  '" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="  " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="010" class="odz-input odz-input-bordered odz-w-1/4" maxlength="3"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <span class="odz-text-xs odz-self-center">   ,     .</span></div></div></div> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="address-section"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!>  </span></label> <div class="odz-flex odz-gap-2 odz-mb-2"><input type="text" id="postcode" placeholder="" readonly="" class="odz-input odz-input-bordered odz-w-1/4"> <button class="odz-btn odz-btn-secondary"></button> <button class="odz-btn odz-btn-outline"> </button></div> <input type="text" id="address1" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-mb-2"> <input type="text" id="address2" placeholder=" " class="odz-input odz-input-bordered odz-w-full"> <p class="odz-text-xs odz-mt-1">       .</p></div> <div class="odz-form-control odz-w-full odz-mt-4"><div class="odz-flex odz-gap-4 odz-items-center"><button class="odz-btn odz-btn-outline odz-flex-1"></button> <p class="odz-text-xs">      .</p></div></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-mt-4"><div class="odz-form-control odz-w-full"><label class="odz-label" for="shipping-method"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <select id="shipping-method" class="odz-select odz-select-bordered odz-w-full"><option disabled selected>==   ==</option><option></option><option></option><option></option></select></div> <div class="odz-form-control odz-w-full"><label class="odz-label" for="pref-delivery-date"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"></span></label> <input id="pref-delivery-date" type="date" class="odz-input odz-input-bordered odz-w-full"> <label class="odz-label" for="pref-delivery-date-note"><span class="odz-label-text-alt">        .</span></label></div></div> <!> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="request-notes"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"> </span></label> <textarea id="request-notes" class="odz-textarea odz-textarea-bordered odz-h-24 odz-w-full" placeholder="   ."></textarea></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-outline odz-btn-secondary"><!>  </button> <button class="odz-btn odz-w-full odz-btn-primary md:odz-w-auto disabled:bg-primary/50 disabled:odz-bg-secondary/20"><!> <!></button></div>`,1),cM=G('<!> <!> <div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><!></div></div>',1),uM=G('<div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-ml-3 odz-text-lg odz-font-medium">  ...</span></div>'),hM=G('<div class="odz-text-xs odz-text-gray-400 odz-line-through"> </div> <div class="odz-text-xs odz-text-green-600 odz-font-medium"> </div>',1),fM=G('<div class="odz-text-xs odz-text-gray-400"> </div>'),pM=G('<span class="odz-text-gray-400"></span>'),gM=G('<div class="odz-text-xs odz-text-green-600">   </div>'),vM=G('<div class="odz-text-xs odz-text-blue-600">   -  </div>'),mM=G('<div class="odz-text-xs odz-text-gray-400"> </div>'),wM=G('<div class="odz-text-xs odz-text-gray-500">    </div>'),bM=G('<div class="odz-grid odz-grid-cols-2 md:odz-grid-cols-5 odz-gap-3 md:odz-gap-4 odz-p-4 md:odz-p-6 odz-bg-white"><div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">1  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"><!></div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">    </div></div> <div class="odz-text-center md:odz-col-span-1 odz-col-span-2"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-3xl md:odz-text-2xl odz-font-bold odz-text-red-600 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400"> <!> <!></div></div></div>'),yM=G(`<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <div class="odz-space-y-4 odz-py-4"><div><ul class="odz-list-disc odz-ml-5 odz-space-y-2"><li>        
                     
                  </li> <li>   .     
               .</li> <li>( :   22 19-15 3)</li></ul></div> <div><table class="odz-table odz-table-zebra odz-w-full"><tbody><tr><td>*Name:</td><td></td></tr><tr><td>*Country:</td><td></td></tr><tr><td>*ZipCode:</td><td></td></tr><tr><td>*Address:</td><td></td></tr><tr><td>*Tel.No.():</td><td></td></tr><tr><td>*E-mail:</td><td></td></tr></tbody></table></div></div> <div class="odz-modal-action"><button class="odz-btn"></button></div></div></dialog>`),_M=G('<!> <div class="odz-sticky odz-bottom-0 odz-left-0 odz-right-0 odz-mt-6 odz-bg-white odz-border-t odz-shadow-lg"><!></div> <!> <!> <!> <!>',1);function xM(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=()=>on(ni,"$shopStore",t),i=()=>on(Gl,"$customerStore",t);let a=gt(e,"productId",12),A=gt(e,"isEstimateModal",12),d=gt(e,"estimate",12),c=ze(null),u=ze(!1),h=ze(""),p=ze(""),v=ze(0),w=ze(!1),b=ze(""),x=ze(""),S=ze(""),I=!1,P=ze(!1),N=ze(""),ee=ze(""),j=ze(""),D=ze(),ne=ze(),xe=ze(),L=ze(""),q=ze(!1),V=ze(!0),se=ze([]),ve=ze(!1);function ie(){var le;if(y(v,0),(le=d())!=null&&le.id&&(console.log(" Edit mode - clearing sessionStorage before DB load"),FE()),nr(wt,ct(o).estimateName=d().name||"",ct(o)),nr(wt,ct(o).organizationName=d().organization_name||"",ct(o)),nr(wt,ct(o).orderName=d().order_name||"",ct(o)),nr(wt,ct(o).orderPhone=d().order_phone||"",ct(o)),nr(wt,ct(o).postcode=d().postcode||"",ct(o)),nr(wt,ct(o).address1=d().address1||"",ct(o)),nr(wt,ct(o).address2=d().address2||"",ct(o)),nr(wt,ct(o).comment=d().comment||"",ct(o)),nr(wt,ct(o).shippingMethod=d().shipping_method||"",ct(o)),nr(wt,ct(o).prefDeliveryDate=d().pref_delivery_date||"",ct(o)),nr(wt,ct(o).estDeliveryDate=d().est_delivery_date||"",ct(o)),nr(wt,ct(o).uploadMemo=d().upload_memo||"",ct(o)),nr(wt,ct(o).designUploads=d().design_uploads&&typeof d().design_uploads=="object"&&Array.isArray(d().design_uploads.files)?d().design_uploads.files.map(Te=>Te.url):[],ct(o)),nr(wt,ct(o).designConfirm=d().design_confirm||"",ct(o)),o().prefDeliveryDate&&y(L,new Date(o().prefDeliveryDate).toISOString().split("T")[0]),y(b,d().postcode||""),y(x,d().address1||""),y(S,d().address2||""),y(V,dc(d().status)),d().order_phone){const Te=d().order_phone;Te.length>=3&&y(N,Te.slice(0,3)),Te.length>=7&&y(ee,Te.slice(3,7)),Te.length>=11&&y(j,Te.slice(7,11))}k(d().id)}function ge(le){a(o().products[le].product.id),nr(wt,ct(o).index=le,ct(o)),y(v,1)}function re(){var le,Te;if(y(v,1),(!a()||a().trim()==="")&&(o().products.length>0&&o().index>=0&&((Te=(le=o().products[o().index])==null?void 0:le.product)!=null&&Te.id)?(a(o().products[o().index].product.id),console.log("   productId :",a())):console.log(" productId     ")),typeof window<"u"&&a()){const Fe=`extended-product-data-cache-${a()}`;try{const Me=window.sessionStorage.getItem(Fe);if(Me){const Ne=JSON.parse(Me);Ne.printSelection&&!Ne.printSelection.isCompleted&&(Ne.printSelection.currentMethod="selection",window.sessionStorage.setItem(Fe,JSON.stringify(Ne)),console.log("     "))}}catch(Me){console.warn("     :",Me)}}}function ue(){if(!o().products||o().products.length===0||o().index<0||!o().products[o().index]){y(u,!0),y(h," "),y(p,"  .");return}if(o().products[o().index].variants.length<1){y(u,!0),y(h," "),y(p,"1   .");return}if(o().products[o().index].variants.some(Te=>Te.quantity===0)){y(u,!0),y(h," "),y(p," 1  ");return}y(v,2)}function Z(){y(w,!0)}function _e(){return I?Promise.resolve():new Promise(le=>{const Te=document.createElement("script");Te.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",Te.onload=()=>{I=!0,le()},document.head.appendChild(Te)})}async function z(){await _e(),new window.daum.Postcode({oncomplete(le){if(y(b,le.zonecode),y(x,le.roadAddress||le.jibunAddress),le.userSelectedType==="R"){let Te="";le.bname!==""&&/[||]$/g.test(le.bname)&&(Te+=le.bname),le.buildingName!==""&&le.apartment==="Y"&&(Te+=Te!==""?", "+le.buildingName:le.buildingName),Te!==""&&y(x,l(x)+(" ("+Te+")"))}}}).open()}function E(){y(P,!0)}function F(le,Te){const Fe=le.target;Fe.value.length>=parseInt(Fe.getAttribute("maxlength")||"0")&&Te&&Te.focus()}function Q(le){return le?le.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}async function M(){var le,Te,Fe,Me,Ne,fe,J,Se,$,Ce,Ee,Oe,je,ke,pe,Re,et,Je,rt,Ke;try{if(!o().estimateName||!o().organizationName||!o().orderName||!o().orderPhone||!o().shippingMethod){y(u,!0),y(h,"  "),y(p,", ,    .");return}if(!s().customer_id){const pt=Q(o().password);if(!pt.valid){y(u,!0),y(h," "),y(p,pt.message);return}}const nt={name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:l(b),address1:l(x),address2:l(S),comment:o().comment,password:s().customer_id?null:o().password,shipping_method:o().shippingMethod,pref_delivery_date:o().prefDeliveryDate,upload_memo:o().uploadMemo,sess:s().sess,customer_id:s().customer_id,mall_type:i().mallType,shop_id:s().id};let st;if((le=d())!=null&&le.id){st=await _c(d().id,nt);const pt=await Gu(d().id);for(const Pt of pt)Pt.id&&await l5(Pt.id);const It=await xc(d().id);for(const Pt of It)Pt.id&&await d5(Pt.id);for(let Pt=0;Pt<o().products.length;Pt++)await y5(d().id,Pt)}else st=await c1(nt);if(!st.id)throw new Error("  .");for(let pt=0;pt<o().products.length;pt++){const It=o().products[pt],Pt=It.discountInfo,St=Pt==null?void 0:Pt.discountDetails;for(const bt of It.variants)if(bt.quantity>0){const ft=bt.prices[0].amount;let jt=ft,Lt=0;const Et=It.variants.reduce((Vt,Jt)=>Vt+(Jt.quantity||0),0),$e=ia(Et,ft,It.product.quantity_discounts);$e.hasDiscount&&(jt=$e.discountedPrice,Lt=$e.discountAmount);const dt=It.prints&&It.prints.length>0?"detailed":It.simplePrints&&It.simplePrints.length>0?"simple":"none",at={estimate_id:st.id,product_id:It.product.id,variant_id:bt.id,quantity:bt.quantity,idx:pt,price:jt,original_price:ft,discount_amount:Lt,discount_type:((Te=$e==null?void 0:$e.discountInfo)==null?void 0:Te.type)||null,discount_value:((Fe=$e==null?void 0:$e.discountInfo)==null?void 0:Fe.value)||null,discount_direction:((Me=$e==null?void 0:$e.discountInfo)==null?void 0:Me.direction)||null,discount_min_quantity:((Ne=$e==null?void 0:$e.discountInfo)==null?void 0:Ne.min_quantity)||null,discount_max_quantity:((fe=$e==null?void 0:$e.discountInfo)==null?void 0:fe.max_quantity)||null,print_type:dt};await u1(at)}if(It.prints&&It.prints.length>0)for(const bt of It.prints){const ft={estimate_id:st.id,idx:pt,template_id:bt.template.id,variant_id:bt.variant_id,price:bt.price||0,colors:bt.colors||null,uploads:bt.uploads||null,name_sheet:bt.nameSheet||null,object_id:bt.objectId||null,original_price:((J=bt.discountInfo)==null?void 0:J.originalPrice)||null,discount_amount:((Se=bt.discountInfo)==null?void 0:Se.discountAmount)||null,discount_type:((Ce=($=bt.discountInfo)==null?void 0:$.discountDetails)==null?void 0:Ce.type)||null,discount_value:((Oe=(Ee=bt.discountInfo)==null?void 0:Ee.discountDetails)==null?void 0:Oe.value)||null,discount_direction:((ke=(je=bt.discountInfo)==null?void 0:je.discountDetails)==null?void 0:ke.direction)||null,discount_min_quantity:((Re=(pe=bt.discountInfo)==null?void 0:pe.discountDetails)==null?void 0:Re.min_quantity)||null,discount_max_quantity:((Je=(et=bt.discountInfo)==null?void 0:et.discountDetails)==null?void 0:Je.max_quantity)||null};await f1(ft)}if(It.addons)for(const[bt,ft]of Object.entries(It.addons)){if(!ft.variantId||ft.variantId.trim()===""){console.warn("  variantId    :",ft);continue}let jt=0;if(It.addonProductsMap&&It.addonProductsMap[ft.productId]){const $e=It.addonProductsMap[ft.productId].variants.find(dt=>dt.id===ft.variantId);$e&&$e.prices&&$e.prices.length>0&&(jt=$e.prices[0].amount)}const Lt={estimate_id:st.id,idx:pt,addon_id:bt,selected_product_id:ft.productId,selected_variant_id:ft.variantId,price:jt,quantity:It.quantity||0};await m1(Lt)}}console.log(" Estimate    ..."),await b1(st.id),console.log(" Estimate    "),y(u,!0),y(h,(rt=d())!=null&&rt.id?"  ":"  "),y(p,(Ke=d())!=null&&Ke.id?"  .":s().customer_id?"  .":"  .      ."),A(!1),i().mallType==="godo5"&&(window.location.href="/odiz/list.php")}catch(nt){console.error("    :",nt),y(u,!0),y(h," "),y(p,"    .  .")}}Zn(()=>{var le,Te;if(nr(wt,ct(o).index=o().products.length,ct(o)),(le=d())!=null&&le.id){ie();const Fe=ug(d().id,Me=>{d(Me),y(V,dc(Me.status))});return()=>{Fe.unsubscribe()}}else a()&&O(a());if(!((Te=d())!=null&&Te.id)&&i())if(nr(wt,ct(o).orderName=i().name,ct(o)),nr(wt,ct(o).orderPhone=i().phone.replace(/-/g,""),ct(o)),y(x,i().address1),y(S,i().address2),y(b,i().postcode),i().phone){const Fe=i().phone.replace(/-/g,"");nr(wt,ct(o).orderPhone=Fe,ct(o)),Fe.length>=3&&y(N,Fe.slice(0,3)),Fe.length>=7&&y(ee,Fe.slice(3,7)),Fe.length>=11&&y(j,Fe.slice(7,11))}else nr(wt,ct(o).orderPhone="",ct(o));_e()});async function k(le){var Te;y(ve,!0);try{const Fe=await Gu(le),Me=await xc(le),Ne=await hg(le);y(se,await w1(le));const fe=[],J={};for(const pe of Fe)if(pe.product_id&&pe.product){const Re=pe.idx||0;if(J[Re]||(J[Re]={product:pe.product,variants:[],quantity:0,prints:[],addons:{}}),pe.variant_id&&pe.quantity){const et={id:pe.variant_id,quantity:pe.quantity,prices:[{amount:pe.original_price||pe.price||0}],thumbnail:((Te=pe.variant)==null?void 0:Te.thumbnail)||null,title:pe.variant_title||` ${pe.variant_id.substring(0,4)}`};J[Re].variants.push(et),J[Re].quantity+=pe.quantity}}const Se=[];for(const pe of Me)if(pe.template_id&&pe.estimate_id){const Re=pe.idx||0;if(J[Re]){const et=(async()=>{try{const Je=await uh(pe.template_id);let rt=null;try{rt=await Qc(pe.template_id)}catch(st){console.warn("templateProduct  :",st)}const nt={template:{id:pe.template_id,name:Je.length>0&&Je[Je.length-1].name||"",templateProduct:rt},parentTemplates:Je,price:pe.price||0,colors:pe.colors?typeof pe.colors=="string"?JSON.parse(pe.colors):pe.colors:[],uploads:pe.uploads?typeof pe.uploads=="string"?JSON.parse(pe.uploads):pe.uploads:null,nameSheet:pe.name_sheet?typeof pe.name_sheet=="string"?JSON.parse(pe.name_sheet):pe.name_sheet:null,title:Je.length>0?Je[0].name:"",objectId:pe.object_id||null,variant_id:pe.variant_id||null,discountInfo:pe.original_price?{originalPrice:pe.original_price,discountAmount:pe.discount_amount||0,discountDetails:pe.discount_type?{type:pe.discount_type,value:pe.discount_value||0,direction:pe.discount_direction||null,min_quantity:pe.discount_min_quantity||null,max_quantity:pe.discount_max_quantity||null}:void 0,hasDiscount:(pe.discount_amount||0)>0}:void 0};J[Re].prints.push(nt)}catch(Je){console.error("    :",Je);const Ke={template:{id:pe.template_id,name:"",templateProduct:null},parentTemplates:[],price:pe.price||0,colors:pe.colors?typeof pe.colors=="string"?JSON.parse(pe.colors):pe.colors:[],uploads:pe.uploads?typeof pe.uploads=="string"?JSON.parse(pe.uploads):pe.uploads:null,title:"",objectId:pe.object_id||null,variant_id:pe.variant_id||null,nameSheet:pe.name_sheet?typeof pe.name_sheet=="string"?JSON.parse(pe.name_sheet):pe.name_sheet:null,discountInfo:pe.original_price?{originalPrice:pe.original_price,discountAmount:pe.discount_amount||0,discountDetails:pe.discount_type?{type:pe.discount_type,value:pe.discount_value||0,direction:pe.discount_direction||null,min_quantity:pe.discount_min_quantity||null,max_quantity:pe.discount_max_quantity||null}:void 0,hasDiscount:(pe.discount_amount||0)>0}:void 0};J[Re].prints.push(Ke)}})();Se.push(et)}}await Promise.all(Se),Ne.forEach(pe=>{const Re=pe.idx||0;J[Re]?(J[Re].addons||(J[Re].addons={}),J[Re].addons[pe.addon_id]={productId:pe.selected_product_id,variantId:pe.selected_variant_id||""}):console.log(`productGroups[${Re}]  `)});const $=[];for(const pe in J){const Re=J[pe];if(Re.product&&Object.keys(Re.addons||{}).length>0){const et=(async()=>{try{const Je=await ch(Re.product.id);Re.addonProductsMap={},Je.forEach(rt=>{rt.items.forEach(Ke=>{var nt,st,pt;Ke.addon_product&&((pt=(st=(nt=Ke.addon_product.variants)==null?void 0:nt[0])==null?void 0:st.prices)!=null&&pt[0])&&(Re.addonProductsMap[Ke.addon_product.id]={price:Ke.addon_product.variants[0].prices[0].amount,title:Ke.addon_product.title,variants:Ke.addon_product.variants})})})}catch(Je){console.error(`idx ${pe}    :`,Je),Re.addonProductsMap={}}})();$.push(et)}fe.push(Re)}await Promise.all($),N_(wt,{...o(),products:fe,index:(fe.length>0,0)});const Ce=fe.reduce((pe,Re)=>pe+Re.quantity,0),Ee=fe.reduce((pe,Re)=>pe+(Re.variants||[]).reduce((et,Je)=>{const rt=Je.quantity||0;return et+Je.prices[0].amount*rt},0),0),Oe=fe.reduce((pe,Re)=>pe+(Re.prints||[]).reduce((et,Je)=>et+(Je.price||0),0),0),je=fe.reduce((pe,Re)=>{if(!Re.addons||Object.keys(Re.addons).length===0||!Re.addonProductsMap)return pe;const et=Re.quantity||0,Je=Object.values(Re.addons).reduce((rt,Ke)=>{const nt=Re.addonProductsMap[Ke.productId];if(nt&&Ke.variantId){const st=nt.variants.find(pt=>pt.id===Ke.variantId);if(st&&st.prices&&st.prices.length>0){const pt=st.prices[0].amount*et;return rt+pt}}return rt},0);return pe+Je},0),ke=l(se).reduce((pe,Re)=>pe+Number(Re.amount),0);nr(wt,ct(o).totalQuantity=Ce,ct(o)),nr(wt,ct(o).totalProductAmount=Ee,ct(o)),nr(wt,ct(o).totalPrintAmount=Oe,ct(o)),nr(wt,ct(o).totalAddonAmount=je,ct(o)),nr(wt,ct(o).totalAdditionalAmount=ke,ct(o)),nr(wt,ct(o).totalAmount=Ee+Oe+je+ke,ct(o)),setTimeout(()=>{wt.updateTotalAmounts()},200)}catch(Fe){console.error("     :",Fe),nr(wt,ct(o).products=[],ct(o))}finally{y(ve,!1)}}function O(le){y(q,!1),a(le),nr(wt,ct(o).index=o().products.length,ct(o)),y(v,1)}Zt(()=>(l(P),l(w),l(c)),()=>{var le;(l(P)||l(w))&&(y(c,(le=document.getElementById("estimate-modal"))==null?void 0:le.querySelector(".odz-modal-box")),l(c)&&zr(c,l(c).scrollTop=0))}),Zt(()=>(o(),l(N),l(ee),l(j)),()=>{if(o().orderPhone&&!l(N)&&!l(ee)&&!l(j)){const le=o().orderPhone;le.length>=3&&y(N,le.slice(0,3)),le.length>=7&&y(ee,le.slice(3,7)),le.length>=11&&y(j,le.slice(7,11))}}),Zt(()=>(l(N),l(ee),l(j)),()=>{nr(wt,ct(o).orderPhone=`${l(N)}${l(ee)}${l(j)}`,ct(o))}),Zt(()=>(l(u),l(c)),()=>{var le;l(u)&&(y(c,(le=document.getElementById("estimate-modal"))==null?void 0:le.querySelector(".odz-modal-box")),l(c)&&zr(c,l(c).scrollTop=0))}),Zt(()=>l(L),()=>{l(L)&&nr(wt,ct(o).prefDeliveryDate=new Date(l(L)).toISOString(),ct(o))}),Fo(),cn();var K=_M(),R=lt(K);{var de=le=>{var Te=rM(),Fe=lt(Te),Me=g(Fe),Ne=g(Me),fe=B(Ne,2),J=B(Fe,2);{var Se=Ce=>{var Ee=ZN(),Oe=g(Ee);{var je=pe=>{bF(pe,{get productId(){return a()},get step(){return l(v)},set step(Re){y(v,Re)},$$legacy:!0})},ke=pe=>{var Re=JN(),et=B(g(Re),6);it("click",et,()=>y(q,!0)),U(pe,Re)};be(Oe,pe=>{a()&&a().trim()!==""?pe(je):pe(ke,!1)})}U(Ce,Ee)},$=Ce=>{var Ee=Tt(),Oe=lt(Ee);{var je=pe=>{var Re=eM(),et=g(Re);const Je=At(()=>{var rt;return(rt=d())==null?void 0:rt.id});Gx(et,{get productId(){return a()},get estimateId(){return l(Je)},get idx(){return o().index},get step(){return l(v)},set step(rt){y(v,rt)},$$legacy:!0}),U(pe,Re)},ke=pe=>{var Re=Tt(),et=lt(Re);{var Je=rt=>{var Ke=tM();U(rt,Ke)};be(et,rt=>{l(v)===3&&rt(Je)},!0)}U(pe,Re)};be(Oe,pe=>{l(v)===2?pe(je):pe(ke,!1)},!0)}U(Ce,Ee)};be(J,Ce=>{l(v)===1?Ce(Se):Ce($,!1)})}De(()=>{Pr(Ne,`odz-tab ${(l(v)===1?"odz-tab-active":"")??""}`),Pr(fe,`odz-tab ${(l(v)===2?"odz-tab-active":"")??""}`)}),it("click",Ne,re),it("click",fe,ue),U(le,Te)},Be=le=>{var Te=cM(),Fe=lt(Te);{var Me=je=>{var ke=nM();U(je,ke)},Ne=je=>{var ke=sM(),pe=B(g(ke),2);M5(pe,{onSelectProduct:ge,get isEditable(){return l(V)},set isEditable(Ke){y(V,Ke)},$$legacy:!0});var Re=B(pe,2),et=g(Re);{var Je=Ke=>{var nt=oM(),st=g(nt);Vu(st,{class:"odz-w-5 odz-h-5 odz-mr-2"}),it("click",nt,()=>y(q,!0)),U(Ke,nt)};be(et,Ke=>{l(V)&&Ke(Je)})}var rt=B(Re,2);YN(rt,{get additionalCosts(){return l(se)},get isEditable(){return l(V)}}),U(je,ke)};be(Fe,je=>{l(ve)?je(Me):je(Ne,!1)})}var fe=B(Fe,2);{var J=je=>{t2(je,{addProduct:O,productType:"godo",get isProductSearchOpen(){return l(q)},set isProductSearchOpen(ke){y(q,ke)},$$legacy:!0})};be(fe,je=>{l(q)&&je(J)})}var Se=B(fe,2),$=g(Se),Ce=g($);{var Ee=je=>{var ke=iM();U(je,ke)},Oe=je=>{var ke=dM(),pe=lt(ke),Re=g(pe),et=B(g(Re)),Je=g(et);qA(Je,{class:"odz-text-error",size:10});var rt=B(Re,2);{var Ke=Nt=>{var yr=AM(),$r=g(yr),kn=g($r),Do=B($r,2);{var Hr=Hn=>{var so=aM();U(Hn,so)};be(Do,Hn=>{l(V)||Hn(Hr)})}De(()=>{Pr($r,`odz-badge odz-badge-${(d().status==="pending"?"warning":d().status==="progress"?"info":d().status==="completed"?"success":"error")??""}`),Qe(kn,d().status==="pending"?"":d().status==="progress"?"":d().status==="completed"?"":"")}),U(Nt,yr)};be(rt,Nt=>{var yr;(yr=d())!=null&&yr.id&&Nt(Ke)})}var nt=B(pe,2),st=g(nt),pt=g(st),It=g(pt),Pt=g(It);qA(Pt,{class:"odz-text-error",size:12});var St=B(pt,2),bt=B(st,2),ft=g(bt),jt=g(ft),Lt=g(jt);qA(Lt,{class:"odz-text-error",size:12});var Et=B(ft,2),$e=B(bt,2),dt=g($e),at=g(dt),Vt=g(at);qA(Vt,{class:"odz-text-error",size:12});var Jt=B(dt,2),Kt=B($e,2),Gt=g(Kt),er=g(Gt),Ct=g(er);qA(Ct,{class:"odz-text-error",size:12});var xt=B(Gt,2),Dt=g(xt);hs(Dt,Nt=>y(D,Nt),()=>l(D));var lr=B(Dt,2);hs(lr,Nt=>y(ne,Nt),()=>l(ne));var ur=B(lr,2);hs(ur,Nt=>y(xe,Nt),()=>l(xe));var hr=B(nt,2),fr=g(hr),xr=g(fr),un=g(xr);qA(un,{class:"odz-text-error",size:12});var wn=B(fr,2),Dr=g(wn),Cr=B(Dr,2),Vr=B(Cr,2),jr=B(wn,2),Ir=B(jr,2),Br=B(hr,4),Gr=g(Br),Xr=g(Gr),bn=g(Xr),Wr=g(bn);qA(Wr,{class:"odz-text-error",size:12});var mr=B(Xr,2);De(()=>{o(),Hu(()=>{l(V)})});var Tn=g(mr);Tn.value=((Tn.__value="")==null,"");var Oo=B(Tn);Oo.value=(Oo.__value="delivery")==null?"":"delivery";var ho=B(Oo);ho.value=(ho.__value="pickup")==null?"":"pickup";var Io=B(ho);Io.value=(Io.__value="quick")==null?"":"quick";var gs=B(Gr,2),eo=B(g(gs),2),$o=B(Br,2);{var Mn=Nt=>{var yr=lM(),$r=g(yr),kn=g($r),Do=g(kn);qA(Do,{class:"odz-text-error",size:12});var Hr=B($r,2);De(()=>Hr.readOnly=!l(V)),Fr(Hr,()=>o().password,Hn=>nr(wt,ct(o).password=Hn,ct(o))),U(Nt,yr)};be($o,Nt=>{s().customer_id||Nt(Mn)})}var Ve=B($o,2),mt=B(g(Ve),2),Rt=B(Ve,2),qt=g(Rt),Ht=g(qt);xw(Ht,{class:"odz-w-5 odz-h-5 odz-mr-2"});var Xt=B(qt,2),Wt=g(Xt);xw(Wt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var wr=B(Wt,2);{var br=Nt=>{var yr=xn(" ");U(Nt,yr)},vn=Nt=>{var yr=xn(" ");U(Nt,yr)};be(wr,Nt=>{var yr;(yr=d())!=null&&yr.id?Nt(br):Nt(vn,!1)})}De(Nt=>{St.readOnly=!l(V),Et.readOnly=!l(V),Jt.readOnly=!l(V),Dt.readOnly=!l(V),lr.readOnly=!l(V),ur.readOnly=!l(V),jr.readOnly=!l(V),Ir.readOnly=!l(V),mr.disabled=!l(V),eo.disabled=!l(V),cr(eo,"min",Nt),mt.readOnly=!l(V),Xt.disabled=!l(V)},[()=>new Date().toISOString().split("T")[0]],At),Fr(St,()=>o().estimateName,Nt=>nr(wt,ct(o).estimateName=Nt,ct(o))),Fr(Et,()=>o().organizationName,Nt=>nr(wt,ct(o).organizationName=Nt,ct(o))),Fr(Jt,()=>o().orderName,Nt=>nr(wt,ct(o).orderName=Nt,ct(o))),Fr(Dt,()=>l(N),Nt=>y(N,Nt)),it("input",Dt,Nt=>F(Nt,l(ne))),Fr(lr,()=>l(ee),Nt=>y(ee,Nt)),it("input",lr,Nt=>F(Nt,l(xe))),Fr(ur,()=>l(j),Nt=>y(j,Nt)),it("input",ur,Nt=>F(Nt)),Fr(Dr,()=>l(b),Nt=>y(b,Nt)),it("click",Cr,z),it("click",Vr,E),Fr(jr,()=>l(x),Nt=>y(x,Nt)),Fr(Ir,()=>l(S),Nt=>y(S,Nt)),Ru(mr,()=>o().shippingMethod,Nt=>nr(wt,ct(o).shippingMethod=Nt,ct(o))),Fr(eo,()=>l(L),Nt=>y(L,Nt)),Fr(mt,()=>o().comment,Nt=>nr(wt,ct(o).comment=Nt,ct(o))),it("click",qt,Z),it("click",Xt,M),U(je,ke)};be(Ce,je=>{l(ve)?je(Ee):je(Oe,!1)})}U(le,Te)};be(R,le=>{l(v)>0?le(de):le(Be,!1)})}var Pe=B(R,2),He=g(Pe);{var W=le=>{var Te=uM();U(le,Te)},H=le=>{var Te=bM(),Fe=g(Te),Me=B(g(Fe),2),Ne=g(Me),fe=B(Fe,2),J=B(g(fe),2),Se=g(J),$=B(J,2);{var Ce=$e=>{var dt=hM();const at=At(()=>o().products.reduce((Ct,xt)=>{var Dt;return Ct+(((Dt=xt.discountInfo)==null?void 0:Dt.originalAmount)||0)},0)),Vt=At(()=>o().products.reduce((Ct,xt)=>{var Dt;return Ct+(((Dt=xt.discountInfo)==null?void 0:Dt.discountAmount)||0)},0));var Jt=lt(dt),Kt=g(Jt),Gt=B(Jt,2),er=g(Gt);De((Ct,xt)=>{Qe(Kt,`${Ct??""}`),Qe(er,`-${xt??""} `)},[()=>Er(l(at)),()=>Er(l(Vt))],At),U($e,dt)},Ee=$e=>{var dt=fM();U($e,dt)};be($,$e=>{o().products.some(dt=>{var at;return(at=dt.discountInfo)==null?void 0:at.hasDiscount})?$e(Ce):$e(Ee,!1)})}var Oe=B(fe,2),je=B(g(Oe),2),ke=g(je);{var pe=$e=>{var dt=pM();U($e,dt)},Re=$e=>{var dt=xn();De(at=>Qe(dt,`${at??""}`),[()=>Er(o().totalPrintAmount)],At),U($e,dt)};be(ke,$e=>{o().totalPrintAmount===0?$e(pe):$e(Re,!1)})}var et=B(je,2);{var Je=$e=>{var dt=gM();U($e,dt)},rt=$e=>{var dt=Tt(),at=lt(dt);{var Vt=Kt=>{var Gt=vM();U(Kt,Gt)},Jt=Kt=>{var Gt=Tt(),er=lt(Gt);{var Ct=Dt=>{var lr=mM();U(Dt,lr)},xt=Dt=>{var lr=wM();U(Dt,lr)};be(er,Dt=>{o().products.some(lr=>lr.print_type==="none")?Dt(Ct):Dt(xt,!1)},!0)}U(Kt,Gt)};be(at,Kt=>{o().products.some(Gt=>Gt.print_type==="simple")?Kt(Vt):Kt(Jt,!1)},!0)}U($e,dt)};be(et,$e=>{o().totalPrintAmount>0?$e(Je):$e(rt,!1)})}var Ke=B(Oe,2),nt=B(g(Ke),2),st=g(nt),pt=B(Ke,2),It=B(g(pt),2),Pt=g(It),St=B(It,2),bt=g(St),ft=B(bt);{var jt=$e=>{var dt=xn("+ ( )");U($e,dt)};be(ft,$e=>{o().totalPrintAmount>0&&$e(jt)})}var Lt=B(ft,2);{var Et=$e=>{var dt=xn();De(at=>Qe(dt,`+ ${at??""}`),[()=>Er(o().totalAdditionalAmount)],At),U($e,dt)};be(Lt,$e=>{o().totalAdditionalAmount>0&&$e(Et)})}De(($e,dt,at)=>{Qe(Ne,`${o().totalQuantity||0}`),Qe(Se,`${$e??""}`),Qe(st,`${dt??""}`),Qe(Pt,`${at??""}`),Qe(bt,` ${$e??""} + 
          ${dt??""} `)},[()=>Er(o().totalProductAmount),()=>Er(o().totalAddonAmount),()=>Er(o().totalAmount)],At),U(le,Te)};be(He,le=>{l(ve)?le(W):le(H,!1)})}var te=B(Pe,2);{var Ae=le=>{var Te=yM(),Fe=g(Te),Me=B(g(Fe),4),Ne=g(Me);it("click",Ne,()=>y(P,!1)),U(le,Te)};be(te,le=>{l(P)&&le(Ae)})}var he=B(te,2);{var we=le=>{PN(le,{get isOpen(){return l(w)},set isOpen(Te){y(w,Te)},$$legacy:!0})};be(he,le=>{l(w)&&le(we)})}var ye=B(he,2);Tc(ye,{get isOpen(){return l(u)},set isOpen(le){y(u,le)},get title(){return l(h)},set title(le){y(h,le)},get message(){return l(p)},set message(le){y(p,le)},$$legacy:!0});var Ie=B(ye,2);Lc(Ie,{get isLoading(){return l(ve)},set isLoading(le){y(ve,le)},$$legacy:!0}),U(n,K),An(),r()}var BM=G('<div class="odz-alert odz-alert-error"> </div>'),zM=G('<div class="odz-mb-4"><!></div>'),CM=G('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),SM=G('<div><h4 class="odz-font-semibold odz-mb-2"> </h4> <div class="odz-flex odz-flex-col odz-justify-center"></div></div>'),EM=G('<p class="odz-text-base odz-font-semibold odz-mb-3"> </p>'),FM=G('<div class="odz-border odz-rounded-lg odz-p-2 odz-w-full sm:odz-w-48 md:odz-w-56 odz-flex odz-items-center odz-gap-3"><img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0"> <div class="odz-flex-grow odz-min-w-0"><p class="odz-text-xs odz-font-medium odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div>'),IM=G('<div class="odz-mb-4"><!> <div class="odz-flex odz-flex-wrap odz-gap-3"></div></div>'),UM=G('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),QM=G('<div class="odz-flex odz-flex-col odz-justify-center"></div>'),TM=G('<p class="odz-text-xs odz-text-gray-500">     .</p>'),LM=G('<div class="odz-mb-2"><h6 class="odz-font-medium odz-text-sm odz-mb-2"> </h6> <!></div>'),PM=G('<div class="odz-mb-6 odz-p-4 odz-border odz-rounded-lg"><h5 class="odz-font-medium odz-text-base odz-mb-3"> </h5> <!> <!></div>'),kM=G("<div></div>"),OM=G('<p class="odz-text-center odz-text-gray-500 odz-py-4">   .</p>'),DM=G('<div class="odz-mt-4"><!></div>'),NM=G('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1">[]</div> <div class="odz-chat-bubble odz-text-sm odz-chat-bubble-success odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),MM=G('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"></div> <div class="odz-chat-bubble odz-chat-bubble-secondary odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),HM=G('<div class="odz-chat odz-chat-start"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"> </div> <div class="odz-chat-bubble odz-chat-bubble-gray"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),jM=G('<p class="odz-text-center odz-text-sm odz-text-gray-500">  .</p>'),RM=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),qM=G('<div role="alert" class="odz-alert odz-alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> :    .</span></div>'),KM=G('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),$M=G('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),VM=G('<div role="alert" class="odz-alert odz-alert-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),GM=G('<div role="alert" class="odz-alert odz-alert-success odz-alert-outline"><span> :   .</span></div>'),WM=G('<button class="odz-btn odz-btn-success"> </button> <button class="odz-btn odz-btn-error"> </button>',1),XM=G('<div class="odz-space-y-6"><!> <!> <!> <!></div> <div class="odz-divider odz-my-6"></div> <div class="odz-space-y-4"><div class="odz-max-h-60 odz-overflow-y-auto odz-p-2 odz-bg-base-200 odz-rounded-lg odz-space-y-3"></div> <div class="odz-flex odz-gap-2 odz-items-center"><input type="text" placeholder=" ..." class="odz-input odz-input-bordered odz-flex-grow"> <button class="odz-btn odz-btn-primary"><!> </button></div></div> <div class="odz-mt-6"><!></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <!></div>',1),YM=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4"> </h3> <!></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),JM=G('<div class="odz-flex odz-gap-4"><label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label> <label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label></div>'),ZM=G('<input type="checkbox" class="odz-checkbox odz-checkbox-sm">'),e7=G('<div class="odz-form-control"><label class="odz-label odz-cursor-pointer odz-gap-4"><span class="odz-label-text odz-text-xs"> </span> <!></label></div>'),t7=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>   ...',1),r7=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-font-bold odz-text-lg">    </h3> <p class="odz-py-4 odz-text-sm">       .</p> <div class="odz-form-control odz-mb-4"><label class="odz-label odz-cursor-pointer"><span class="odz-label-text odz-font-semibold"> .</span> <input type="checkbox" class="odz-checkbox odz-checkbox-primary"></label></div> <div class="odz-space-y-2 odz-border-t odz-border-b odz-py-4 odz-max-h-60 odz-overflow-y-auto"></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <button class="odz-btn odz-btn-primary"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),n7=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>  ...',1),o7=G('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box"><h3 class="odz-font-bold odz-text-lg odz-mb-4">   </h3> <textarea class="odz-textarea odz-textarea-bordered odz-w-full odz-h-32" placeholder="   ..."></textarea> <div class="odz-modal-action odz-mt-4"><button class="odz-btn"></button> <button class="odz-btn odz-btn-error"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),s7=G("<!> <!> <!> <!>",1);function i7(n,e){an(e,!1);let t=gt(e,"estimateId",8),r=gt(e,"isOpen",12),o=ze(null),s=ze(!0),i=ze(null),a=ze({}),A=ze([]),d=ze(""),c=ze(""),u=null,h=null,p=null,v=ze(!1),w=ze(""),b=ze(""),x=ze([]),S=ze(""),I=ze(!1),P=ze(),N=ze(!1),ee=ze(""),j=ze(!1),D=ze(!1),ne=ze([!1,!1,!1,!1,!1,!1,!1]),xe=ze(!1),L=ze(!1);const q=["     .","          .","    .","    ,    ?","           .","   , ,       .","    ? ( ,  3 )"];function V(W){if(!W)return null;try{return typeof W=="object"&&W!==null?W:JSON.parse(W)}catch(H){return console.error("Failed to parse JSON:",H,"Input:",W),null}}async function se(){await ra(),l(P)&&zr(P,l(P).scrollTop=l(P).scrollHeight)}function ve(){var H;if(!l(o))return;if((H=l(o).estimate)!=null&&H.design_uploads){const te=typeof l(o).estimate.design_uploads=="string"?V(l(o).estimate.design_uploads):l(o).estimate.design_uploads;te&&Array.isArray(te.files)?y(A,te.files.map(Ae=>({url:Ae.url,name:Ae.name}))):y(A,[]),y(d,(te==null?void 0:te.topHTML)||""),y(c,(te==null?void 0:te.bottomHTML)||"")}else y(A,[]),y(d,""),y(c,"");const W={};l(o).items.length>0&&(l(o).items.forEach(te=>{const Ae=te.idx??0;W[Ae]||(W[Ae]={items:[],prints:[]}),W[Ae].items.push(te)}),l(o).prints.forEach(te=>{const Ae=te.idx??0;W[Ae]||(console.warn(`Print found for idx ${Ae} but no corresponding item group exists.`),W[Ae]={items:[],prints:[]});const he=typeof te.design_uploads=="string"?V(te.design_uploads):te.design_uploads;te.parsed_uploads=(he==null?void 0:he.files)||[],W[Ae].prints.find(ye=>ye.id===te.id)||W[Ae].prints.push(te)})),y(a,W),console.log("Processed and grouped data:",l(a)),Object.entries(l(a)).forEach(([te,Ae])=>{console.log(`idx ${te}: ${Ae.prints.length} print(s)`,Ae.prints.map(he=>{var we;return{id:he.id,parsed_uploads_count:(we=he.parsed_uploads)==null?void 0:we.length}}))})}Zn(async()=>{if(!t()){y(i," ID  ."),y(s,!1);return}y(s,!0),y(i,null);try{const[W,H]=await Promise.all([p1(t()),u5(t())]);y(o,W),y(x,H),console.log("Fetched initial details in component:",l(o)),console.log("Fetched initial comments in component:",l(x)),ve(),u=ug(t(),te=>{console.log("Received estimate update:",te),l(o)&&(zr(o,l(o).estimate={...l(o).estimate,...te}),ve())}),console.log("Subscribed to estimate changes:",u),h=g1(t(),te=>{console.log("Received comment update payload:",te),te.eventType==="INSERT"&&te.new?y(x,[...l(x),te.new]):te.eventType==="DELETE"&&te.old?y(x,l(x).filter(Ae=>Ae.id!==te.old.id)):te.eventType==="UPDATE"&&te.new&&y(x,l(x).map(Ae=>{var he;return Ae.id===((he=te.new)==null?void 0:he.id)?{...Ae,...te.new}:Ae})),se()}),console.log("Subscribed to comment changes:",h),p=v1(t(),te=>{if(console.log("Received print update payload:",te),l(o)){let Ae=!1;if(te.eventType==="INSERT"&&te.new)zr(o,l(o).prints=[...l(o).prints,te.new]),Ae=!0;else if(te.eventType==="DELETE"&&te.old){const he=l(o).prints.length;zr(o,l(o).prints=l(o).prints.filter(we=>we.id!==te.old.id)),l(o).prints.length<he&&(Ae=!0)}else if(te.eventType==="UPDATE"&&te.new){const he=l(o).prints.findIndex(we=>{var ye;return we.id===((ye=te.new)==null?void 0:ye.id)});he!==-1&&(zr(o,l(o).prints[he]={...l(o).prints[he],...te.new}),Ae=!0)}Ae&&(ve(),console.log("Prints array updated, re-processed data"))}}),console.log("Subscribed to print changes:",p),se()}catch(W){console.error("Error loading initial data or subscribing:",W),y(i,"        .")}finally{y(s,!1)}}),ps(()=>{u&&(console.log("Unsubscribing from estimate changes"),u.unsubscribe()),h&&(console.log("Unsubscribing from comment changes"),h.unsubscribe()),p&&(console.log("Unsubscribing from print changes"),p.unsubscribe())});function ie(){r(!1)}function ge(){y(ne,Array(q.length).fill(!1)),y(xe,!1),y(D,!0)}function re(){y(D,!1)}function ue(){for(let W=0;W<q.length-1;W++)zr(ne,l(ne)[W]=l(xe));y(ne,[...l(ne)]),console.log({confirmationChecks:l(ne)})}function Z(W,H){zr(ne,l(ne)[W]=H),W<q.length-1&&y(xe,l(ne).slice(0,-1).every(te=>te===!0)),y(ne,[...l(ne)])}function _e(){y(ee,""),y(N,!0)}function z(){y(N,!1)}async function E(){var Ae,he;if(!l(ee).trim()){y(w," "),y(b,"   ."),y(v,!0);return}if(!((he=(Ae=l(o))==null?void 0:Ae.estimate)!=null&&he.id))return;const W=l(o).estimate.id;y(j,!0);let H=null,te=null;try{try{await Yf({estimate_id:W,comment:`[] ${l(ee)}`,system:!1,writer:"customer"}),console.log("Rejection comment added successfully.")}catch(we){throw H=we,console.error("Error adding rejection comment:",H),new Error("     .")}try{await _c(W,{design_confirm:"processing"}),console.log("Estimate status updated to processing.")}catch(we){throw te=we,console.error("Error updating estimate status after rejection:",te),new Error("    .")}z(),ie()}catch(we){console.error("Error during rejection process:",we),y(w,""),y(b,we.message||"     ."),y(v,!0)}finally{y(j,!1)}}async function F(){var he,we;if(!((we=(he=l(o))==null?void 0:he.estimate)!=null&&we.id))return;const W=l(o).estimate.id,H=l(ne)[q.length-1];y(L,!0);let te=null,Ae=null;try{await _c(W,{design_confirm:"completed",use_reorder:H,...l(o).estimate.auto_complete_on_approval?{status:"completed"}:{}}),console.log(`Estimate status updated to completed with use_reorder: ${H}.`);try{await Yf({estimate_id:W,comment:"",system:!0,writer:"customer"}),console.log("System comment added successfully with writer as customer.")}catch(ye){Ae=ye,console.error("Error adding system comment after approval:",Ae)}}catch(ye){te=ye,console.error("Error approving design:",te)}finally{y(L,!1),te?(y(w,""),y(b,"      ."),y(v,!0)):Ae?(y(w,""),y(b," ,      ."),y(v,!0)):(re(),ie())}}async function Q(){var W,H;if(!(!l(S).trim()||!((H=(W=l(o))==null?void 0:W.estimate)!=null&&H.id))){y(I,!0);try{await Yf({estimate_id:l(o).estimate.id,comment:l(S),system:!1,writer:"customer"}),y(S,"")}catch(te){console.error("Error sending comment:",te),y(w,""),y(b,"    ."),y(v,!0)}finally{y(I,!1)}}}function M(W){if(!W)return"";try{return new Date(W).toLocaleString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return W}}cn();var k=s7(),O=lt(k);{var K=W=>{var H=YM(),te=g(H),Ae=g(te),he=B(Ae,2),we=g(he),ye=B(he,2);{var Ie=Me=>{Lc(Me,{get isLoading(){return l(s)},set isLoading(Ne){y(s,Ne)},$$legacy:!0})},le=Me=>{var Ne=Tt(),fe=lt(Ne);{var J=$=>{var Ce=BM(),Ee=g(Ce);De(()=>Qe(Ee,l(i))),U($,Ce)},Se=$=>{var Ce=Tt(),Ee=lt(Ce);{var Oe=je=>{var ke=XM(),pe=lt(ke),Re=g(pe);{var et=Ct=>{var xt=zM(),Dt=g(xt);_0(Dt,()=>l(d),!1,!1),U(Ct,xt)};be(Re,Ct=>{l(d)&&Ct(et)})}var Je=B(Re,2);{var rt=Ct=>{var xt=SM(),Dt=B(g(xt),2);sr(Dt,5,()=>l(A),vr,(lr,ur)=>{var hr=CM(),fr=g(hr);De(()=>{cr(fr,"src",l(ur).url),cr(fr,"alt",l(ur).name)}),U(lr,hr)}),U(Ct,xt)};be(Je,Ct=>{l(A).length>0&&Ct(rt)})}var Ke=B(Je,2);{var nt=Ct=>{var xt=kM();sr(xt,5,()=>Object.entries(l(a)),vr,(Dt,lr)=>{let ur=()=>l(lr)[0],hr=()=>l(lr)[1];var fr=PM(),xr=g(fr),un=g(xr),wn=B(xr,2);{var Dr=jr=>{var Ir=IM(),Br=g(Ir);{var Gr=bn=>{var Wr=EM(),mr=g(Wr);De(()=>Qe(mr,hr().items[0].product.title)),U(bn,Wr)};be(Br,bn=>{var Wr;(Wr=hr().items[0].product)!=null&&Wr.title&&bn(Gr)})}var Xr=B(Br,2);sr(Xr,5,()=>hr().items,vr,(bn,Wr)=>{var mr=FM(),Tn=g(mr),Oo=B(Tn,2),ho=g(Oo),Io=g(ho),gs=B(ho,2),eo=g(gs);De(()=>{var $o,Mn,Ve;cr(Tn,"src",(($o=l(Wr).variant)==null?void 0:$o.thumbnail)||l(Wr).thumbnail||"/placeholder.png"),cr(Tn,"alt",l(Wr).variant_title||((Mn=l(Wr).variant)==null?void 0:Mn.title)),Qe(Io,l(Wr).variant_title||((Ve=l(Wr).variant)==null?void 0:Ve.title)||"  "),Qe(eo,`${l(Wr).quantity??""}`)}),U(bn,mr)}),U(jr,Ir)};be(wn,jr=>{hr().items.length>0&&jr(Dr)})}var Cr=B(wn,2);{var Vr=jr=>{var Ir=LM();const Br=At(()=>hr().prints[0]),Gr=At(()=>{var mr;return((mr=l(Br))==null?void 0:mr.parsed_uploads)||[]});var Xr=B(g(Ir),2);{var bn=mr=>{var Tn=QM();sr(Tn,5,()=>l(Gr),vr,(Oo,ho)=>{var Io=UM(),gs=g(Io);De(()=>{cr(gs,"src",l(ho).url),cr(gs,"alt",l(ho).name)}),U(Oo,Io)}),U(mr,Tn)},Wr=mr=>{var Tn=TM();U(mr,Tn)};be(Xr,mr=>{l(Gr).length>0?mr(bn):mr(Wr,!1)})}U(jr,Ir)};be(Cr,jr=>{hr().prints.length>0&&jr(Vr)})}De(jr=>{cr(fr,"data-idx",ur()),Qe(un,` ${jr??""}`)},[()=>Number(ur())+1],At),U(Dt,fr)}),U(Ct,xt)},st=Ct=>{var xt=Tt(),Dt=lt(xt);{var lr=ur=>{var hr=OM();U(ur,hr)};be(Dt,ur=>{l(A).length===0&&ur(lr)},!0)}U(Ct,xt)};be(Ke,Ct=>{Object.keys(l(a)).length>0?Ct(nt):Ct(st,!1)})}var pt=B(Ke,2);{var It=Ct=>{var xt=DM(),Dt=g(xt);_0(Dt,()=>l(c),!1,!1),U(Ct,xt)};be(pt,Ct=>{l(c)&&Ct(It)})}var Pt=B(pe,4),St=g(Pt);sr(St,5,()=>l(x),Ct=>Ct.id,(Ct,xt)=>{var Dt=Tt(),lr=lt(Dt);{var ur=fr=>{var xr=NM(),un=B(g(xr),2),wn=g(un),Dr=B(wn),Cr=g(Dr);De(Vr=>{Qe(wn,`${l(xt).comment??""} `),Qe(Cr,Vr)},[()=>M(l(xt).created_at)],At),U(fr,xr)},hr=fr=>{var xr=Tt(),un=lt(xr);{var wn=Cr=>{var Vr=MM(),jr=B(g(Vr),2),Ir=g(jr),Br=B(Ir),Gr=g(Br);De(Xr=>{Qe(Ir,`${l(xt).comment??""} `),Qe(Gr,Xr)},[()=>M(l(xt).created_at)],At),U(Cr,Vr)},Dr=Cr=>{var Vr=HM(),jr=g(Vr),Ir=g(jr),Br=B(jr,2),Gr=g(Br),Xr=B(Gr),bn=g(Xr);De(Wr=>{Qe(Ir,l(xt).writer||""),Qe(Gr,`${l(xt).comment??""} `),Qe(bn,Wr)},[()=>M(l(xt).created_at)],At),U(Cr,Vr)};be(un,Cr=>{l(xt).writer==="customer"?Cr(wn):Cr(Dr,!1)},!0)}U(fr,xr)};be(lr,fr=>{l(xt).system?fr(ur):fr(hr,!1)})}U(Ct,Dt)},Ct=>{var xt=jM();U(Ct,xt)}),hs(St,Ct=>y(P,Ct),()=>l(P));var bt=B(St,2),ft=g(bt),jt=B(ft,2),Lt=g(jt);{var Et=Ct=>{var xt=RM();U(Ct,xt)};be(Lt,Ct=>{l(I)&&Ct(Et)})}var $e=B(Pt,2),dt=g($e);{var at=Ct=>{var xt=qM();U(Ct,xt)},Vt=Ct=>{var xt=Tt(),Dt=lt(xt);{var lr=hr=>{var fr=KM();U(hr,fr)},ur=hr=>{var fr=Tt(),xr=lt(fr);{var un=Dr=>{var Cr=$M();U(Dr,Cr)},wn=Dr=>{var Cr=Tt(),Vr=lt(Cr);{var jr=Br=>{var Gr=VM();U(Br,Gr)},Ir=Br=>{var Gr=Tt(),Xr=lt(Gr);{var bn=Wr=>{var mr=GM();U(Wr,mr)};be(Xr,Wr=>{var mr,Tn;((Tn=(mr=l(o))==null?void 0:mr.estimate)==null?void 0:Tn.design_confirm)==="completed"&&Wr(bn)},!0)}U(Br,Gr)};be(Vr,Br=>{var Gr,Xr;((Xr=(Gr=l(o))==null?void 0:Gr.estimate)==null?void 0:Xr.design_confirm)==="confirming"?Br(jr):Br(Ir,!1)},!0)}U(Dr,Cr)};be(xr,Dr=>{var Cr,Vr;((Vr=(Cr=l(o))==null?void 0:Cr.estimate)==null?void 0:Vr.design_confirm)==="processing"?Dr(un):Dr(wn,!1)},!0)}U(hr,fr)};be(Dt,hr=>{var fr,xr;((xr=(fr=l(o))==null?void 0:fr.estimate)==null?void 0:xr.design_confirm)==="waiting"?hr(lr):hr(ur,!1)},!0)}U(Ct,xt)};be(dt,Ct=>{var xt,Dt;((Dt=(xt=l(o))==null?void 0:xt.estimate)==null?void 0:Dt.design_confirm)==="none"?Ct(at):Ct(Vt,!1)})}var Jt=B($e,2),Kt=g(Jt),Gt=B(Kt,2);{var er=Ct=>{var xt=WM(),Dt=lt(xt),lr=B(Dt,2);De(()=>{Dt.disabled=l(L),lr.disabled=l(L)}),it("click",Dt,ge),it("click",lr,_e),U(Ct,xt)};be(Gt,Ct=>{var xt,Dt;((Dt=(xt=l(o))==null?void 0:xt.estimate)==null?void 0:Dt.design_confirm)==="confirming"&&Ct(er)})}De(Ct=>{ft.disabled=l(I),jt.disabled=Ct,Kt.disabled=l(L)},[()=>l(I)||!l(S).trim()],At),Fr(ft,()=>l(S),Ct=>y(S,Ct)),it("keydown",ft,Ct=>Ct.key==="Enter"&&!Ct.isComposing&&Q()),it("click",jt,Q),it("click",Kt,ie),U(je,ke)};be(Ee,je=>{l(o)&&je(Oe)},!0)}U($,Ce)};be(fe,$=>{l(i)?$(J):$(Se,!1)},!0)}U(Me,Ne)};be(ye,Me=>{l(s)?Me(Ie):Me(le,!1)})}var Te=B(te,2),Fe=g(Te);De(()=>{var Me,Ne;return Qe(we,`  - ${((Ne=(Me=l(o))==null?void 0:Me.estimate)==null?void 0:Ne.name)||""}`)}),it("click",Ae,ie),it("click",Fe,ie),U(W,H)};be(O,W=>{r()&&W(K)})}var R=B(O,2);{var de=W=>{var H=r7(),te=g(H),Ae=B(g(te),4),he=g(Ae),we=B(g(he),2),ye=B(Ae,2);sr(ye,5,()=>q,vr,(Se,$,Ce)=>{var Ee=e7(),Oe=g(Ee),je=g(Oe),ke=g(je),pe=B(je,2);{var Re=Je=>{var rt=JM(),Ke=g(rt),nt=B(g(Ke),2);cr(nt,"name",`reorder-${Ce??""}`);var st=B(Ke,2),pt=B(g(st),2);cr(pt,"name",`reorder-${Ce??""}`),De(()=>{ju(nt,l(ne)[Ce]),ju(pt,!l(ne)[Ce])}),it("change",nt,It=>Z(Ce,It.target.checked)),it("change",pt,It=>Z(Ce,!It.target.checked)),U(Je,rt)},et=Je=>{var rt=ZM();B0(rt,()=>l(ne)[Ce],Ke=>zr(ne,l(ne)[Ce]=Ke)),it("change",rt,Ke=>Z(Ce,Ke.target.checked)),U(Je,rt)};be(pe,Je=>{Ce===6?Je(Re):Je(et,!1)})}De(()=>Qe(ke,l($))),U(Se,Ee)});var Ie=B(ye,2),le=g(Ie),Te=B(le,2),Fe=g(Te);{var Me=Se=>{var $=t7();U(Se,$)},Ne=Se=>{var $=xn("");U(Se,$)};be(Fe,Se=>{l(L)?Se(Me):Se(Ne,!1)})}var fe=B(te,2),J=g(fe);De(()=>{le.disabled=l(L),Te.disabled=!l(xe)||l(L)}),B0(we,()=>l(xe),Se=>y(xe,Se)),it("change",we,ue),it("click",le,re),it("click",Te,F),it("click",J,re),U(W,H)};be(R,W=>{l(D)&&W(de)})}var Be=B(R,2);{var Pe=W=>{var H=o7(),te=g(H),Ae=B(g(te),2),he=B(Ae,2),we=g(he),ye=B(we,2),Ie=g(ye);{var le=Ne=>{var fe=n7();U(Ne,fe)},Te=Ne=>{var fe=xn(" ");U(Ne,fe)};be(Ie,Ne=>{l(j)?Ne(le):Ne(Te,!1)})}var Fe=B(te,2),Me=g(Fe);De(Ne=>{Ae.disabled=l(j),we.disabled=l(j),ye.disabled=Ne},[()=>l(j)||!l(ee).trim()],At),Fr(Ae,()=>l(ee),Ne=>y(ee,Ne)),it("click",we,z),it("click",ye,E),it("click",Me,z),U(W,H)};be(Be,W=>{l(N)&&W(Pe)})}var He=B(Be,2);Tc(He,{get isOpen(){return l(v)},set isOpen(W){y(v,W)},get title(){return l(w)},set title(W){y(w,W)},get message(){return l(b)},set message(W){y(b,W)},$$legacy:!0}),U(n,k),An()}function Cz(n,e){return function(){return n.apply(e,arguments)}}const{toString:a7}=Object.prototype,{getPrototypeOf:r2}=Object,{iterator:Hg,toStringTag:Sz}=Symbol,jg=(n=>e=>{const t=a7.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ha=n=>(n=n.toLowerCase(),e=>jg(e)===n),Rg=n=>e=>typeof e===n,{isArray:Hc}=Array,oh=Rg("undefined");function A7(n){return n!==null&&!oh(n)&&n.constructor!==null&&!oh(n.constructor)&&ti(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ez=ha("ArrayBuffer");function l7(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Ez(n.buffer),e}const d7=Rg("string"),ti=Rg("function"),Fz=Rg("number"),qg=n=>n!==null&&typeof n=="object",c7=n=>n===!0||n===!1,cp=n=>{if(jg(n)!=="object")return!1;const e=r2(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Sz in n)&&!(Hg in n)},u7=ha("Date"),h7=ha("File"),f7=ha("Blob"),p7=ha("FileList"),g7=n=>qg(n)&&ti(n.pipe),v7=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ti(n.append)&&((e=jg(n))==="formdata"||e==="object"&&ti(n.toString)&&n.toString()==="[object FormData]"))},m7=ha("URLSearchParams"),[w7,b7,y7,_7]=["ReadableStream","Request","Response","Headers"].map(ha),x7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),Hc(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,n[a],a,n)}}function Iz(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const $l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Uz=n=>!oh(n)&&n!==$l;function Lm(){const{caseless:n}=Uz(this)&&this||{},e={},t=(r,o)=>{const s=n&&Iz(e,o)||o;cp(e[s])&&cp(r)?e[s]=Lm(e[s],r):cp(r)?e[s]=Lm({},r):Hc(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&mh(arguments[r],t);return e}const B7=(n,e,t,{allOwnKeys:r}={})=>(mh(e,(o,s)=>{t&&ti(o)?n[s]=Cz(o,t):n[s]=o},{allOwnKeys:r}),n),z7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),C7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},S7=(n,e,t,r)=>{let o,s,i;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)i=o[s],(!r||r(i,n,e))&&!a[i]&&(e[i]=n[i],a[i]=!0);n=t!==!1&&r2(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},E7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},F7=n=>{if(!n)return null;if(Hc(n))return n;let e=n.length;if(!Fz(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},I7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&r2(Uint8Array)),U7=(n,e)=>{const r=(n&&n[Hg]).call(n);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(n,s[0],s[1])}},Q7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},T7=ha("HTMLFormElement"),L7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),Iy=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),P7=ha("RegExp"),Qz=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};mh(t,(o,s)=>{let i;(i=e(o,s,n))!==!1&&(r[s]=i||o)}),Object.defineProperties(n,r)},k7=n=>{Qz(n,(e,t)=>{if(ti(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ti(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},O7=(n,e)=>{const t={},r=o=>{o.forEach(s=>{t[s]=!0})};return Hc(n)?r(n):r(String(n).split(e)),t},D7=()=>{},N7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function M7(n){return!!(n&&ti(n.append)&&n[Sz]==="FormData"&&n[Hg])}const H7=n=>{const e=new Array(10),t=(r,o)=>{if(qg(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=Hc(r)?[]:{};return mh(r,(i,a)=>{const A=t(i,o+1);!oh(A)&&(s[a]=A)}),e[o]=void 0,s}}return r};return t(n,0)},j7=ha("AsyncFunction"),R7=n=>n&&(qg(n)||ti(n))&&ti(n.then)&&ti(n.catch),Tz=((n,e)=>n?setImmediate:e?((t,r)=>($l.addEventListener("message",({source:o,data:s})=>{o===$l&&s===t&&r.length&&r.shift()()},!1),o=>{r.push(o),$l.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ti($l.postMessage)),q7=typeof queueMicrotask<"u"?queueMicrotask.bind($l):typeof process<"u"&&process.nextTick||Tz,K7=n=>n!=null&&ti(n[Hg]),yt={isArray:Hc,isArrayBuffer:Ez,isBuffer:A7,isFormData:v7,isArrayBufferView:l7,isString:d7,isNumber:Fz,isBoolean:c7,isObject:qg,isPlainObject:cp,isReadableStream:w7,isRequest:b7,isResponse:y7,isHeaders:_7,isUndefined:oh,isDate:u7,isFile:h7,isBlob:f7,isRegExp:P7,isFunction:ti,isStream:g7,isURLSearchParams:m7,isTypedArray:I7,isFileList:p7,forEach:mh,merge:Lm,extend:B7,trim:x7,stripBOM:z7,inherits:C7,toFlatObject:S7,kindOf:jg,kindOfTest:ha,endsWith:E7,toArray:F7,forEachEntry:U7,matchAll:Q7,isHTMLForm:T7,hasOwnProperty:Iy,hasOwnProp:Iy,reduceDescriptors:Qz,freezeMethods:k7,toObjectSet:O7,toCamelCase:L7,noop:D7,toFiniteNumber:N7,findKey:Iz,global:$l,isContextDefined:Uz,isSpecCompliantForm:M7,toJSONObject:H7,isAsyncFn:j7,isThenable:R7,setImmediate:Tz,asap:q7,isIterable:K7};function Mr(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}yt.inherits(Mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yt.toJSONObject(this.config),code:this.code,status:this.status}}});const Lz=Mr.prototype,Pz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Pz[n]={value:n}});Object.defineProperties(Mr,Pz);Object.defineProperty(Lz,"isAxiosError",{value:!0});Mr.from=(n,e,t,r,o,s)=>{const i=Object.create(Lz);return yt.toFlatObject(n,i,function(A){return A!==Error.prototype},a=>a!=="isAxiosError"),Mr.call(i,n.message,e,t,r,o),i.cause=n,i.name=n.name,s&&Object.assign(i,s),i};const $7=null;function Pm(n){return yt.isPlainObject(n)||yt.isArray(n)}function kz(n){return yt.endsWith(n,"[]")?n.slice(0,-2):n}function Uy(n,e,t){return n?n.concat(e).map(function(o,s){return o=kz(o),!t&&s?"["+o+"]":o}).join(t?".":""):e}function V7(n){return yt.isArray(n)&&!n.some(Pm)}const G7=yt.toFlatObject(yt,{},null,function(e){return/^is[A-Z]/.test(e)});function Kg(n,e,t){if(!yt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=yt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!yt.isUndefined(b[w])});const r=t.metaTokens,o=t.visitor||c,s=t.dots,i=t.indexes,A=(t.Blob||typeof Blob<"u"&&Blob)&&yt.isSpecCompliantForm(e);if(!yt.isFunction(o))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(yt.isDate(v))return v.toISOString();if(!A&&yt.isBlob(v))throw new Mr("Blob is not supported. Use a Buffer instead.");return yt.isArrayBuffer(v)||yt.isTypedArray(v)?A&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,w,b){let x=v;if(v&&!b&&typeof v=="object"){if(yt.endsWith(w,"{}"))w=r?w:w.slice(0,-2),v=JSON.stringify(v);else if(yt.isArray(v)&&V7(v)||(yt.isFileList(v)||yt.endsWith(w,"[]"))&&(x=yt.toArray(v)))return w=kz(w),x.forEach(function(I,P){!(yt.isUndefined(I)||I===null)&&e.append(i===!0?Uy([w],P,s):i===null?w:w+"[]",d(I))}),!1}return Pm(v)?!0:(e.append(Uy(b,w,s),d(v)),!1)}const u=[],h=Object.assign(G7,{defaultVisitor:c,convertValue:d,isVisitable:Pm});function p(v,w){if(!yt.isUndefined(v)){if(u.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));u.push(v),yt.forEach(v,function(x,S){(!(yt.isUndefined(x)||x===null)&&o.call(e,x,yt.isString(S)?S.trim():S,w,h))===!0&&p(x,w?w.concat(S):[S])}),u.pop()}}if(!yt.isObject(n))throw new TypeError("data must be an object");return p(n),e}function Qy(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function n2(n,e){this._pairs=[],n&&Kg(n,this,e)}const Oz=n2.prototype;Oz.append=function(e,t){this._pairs.push([e,t])};Oz.toString=function(e){const t=e?function(r){return e.call(this,r,Qy)}:Qy;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function W7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dz(n,e,t){if(!e)return n;const r=t&&t.encode||W7;yt.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let s;if(o?s=o(e,t):s=yt.isURLSearchParams(e)?e.toString():new n2(e,t).toString(r),s){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Ty{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Nz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},X7=typeof URLSearchParams<"u"?URLSearchParams:n2,Y7=typeof FormData<"u"?FormData:null,J7=typeof Blob<"u"?Blob:null,Z7={isBrowser:!0,classes:{URLSearchParams:X7,FormData:Y7,Blob:J7},protocols:["http","https","file","blob","url","data"]},o2=typeof window<"u"&&typeof document<"u",km=typeof navigator=="object"&&navigator||void 0,eH=o2&&(!km||["ReactNative","NativeScript","NS"].indexOf(km.product)<0),tH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rH=o2&&window.location.href||"http://localhost",nH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:o2,hasStandardBrowserEnv:eH,hasStandardBrowserWebWorkerEnv:tH,navigator:km,origin:rH},Symbol.toStringTag,{value:"Module"})),Es={...nH,...Z7};function oH(n,e){return Kg(n,new Es.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,s){return Es.isNode&&yt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function sH(n){return yt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iH(n){const e={},t=Object.keys(n);let r;const o=t.length;let s;for(r=0;r<o;r++)s=t[r],e[s]=n[s];return e}function Mz(n){function e(t,r,o,s){let i=t[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),A=s>=t.length;return i=!i&&yt.isArray(o)?o.length:i,A?(yt.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!yt.isObject(o[i]))&&(o[i]=[]),e(t,r,o[i],s)&&yt.isArray(o[i])&&(o[i]=iH(o[i])),!a)}if(yt.isFormData(n)&&yt.isFunction(n.entries)){const t={};return yt.forEachEntry(n,(r,o)=>{e(sH(r),o,t,0)}),t}return null}function aH(n,e,t){if(yt.isString(n))try{return(e||JSON.parse)(n),yt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const wh={transitional:Nz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,s=yt.isObject(e);if(s&&yt.isHTMLForm(e)&&(e=new FormData(e)),yt.isFormData(e))return o?JSON.stringify(Mz(e)):e;if(yt.isArrayBuffer(e)||yt.isBuffer(e)||yt.isStream(e)||yt.isFile(e)||yt.isBlob(e)||yt.isReadableStream(e))return e;if(yt.isArrayBufferView(e))return e.buffer;if(yt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oH(e,this.formSerializer).toString();if((a=yt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return Kg(a?{"files[]":e}:e,A&&new A,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),aH(e)):e}],transformResponse:[function(e){const t=this.transitional||wh.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(yt.isResponse(e)||yt.isReadableStream(e))return e;if(e&&yt.isString(e)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Mr.from(a,Mr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Es.classes.FormData,Blob:Es.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yt.forEach(["delete","get","head","post","put","patch"],n=>{wh.headers[n]={}});const AH=yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lH=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||e[t]&&AH[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Ly=Symbol("internals");function cu(n){return n&&String(n).trim().toLowerCase()}function up(n){return n===!1||n==null?n:yt.isArray(n)?n.map(up):String(n)}function dH(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const cH=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function l0(n,e,t,r,o){if(yt.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!yt.isString(e)){if(yt.isString(r))return e.indexOf(r)!==-1;if(yt.isRegExp(r))return r.test(e)}}function uH(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function hH(n,e){const t=yt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}let ri=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function s(a,A,d){const c=cu(A);if(!c)throw new Error("header name must be a non-empty string");const u=yt.findKey(o,c);(!u||o[u]===void 0||d===!0||d===void 0&&o[u]!==!1)&&(o[u||A]=up(a))}const i=(a,A)=>yt.forEach(a,(d,c)=>s(d,c,A));if(yt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(yt.isString(e)&&(e=e.trim())&&!cH(e))i(lH(e),t);else if(yt.isObject(e)&&yt.isIterable(e)){let a={},A,d;for(const c of e){if(!yt.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(A=a[d])?yt.isArray(A)?[...A,c[1]]:[A,c[1]]:c[1]}i(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=cu(e),e){const r=yt.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return dH(o);if(yt.isFunction(t))return t.call(this,o,r);if(yt.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=cu(e),e){const r=yt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||l0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function s(i){if(i=cu(i),i){const a=yt.findKey(r,i);a&&(!t||l0(r,r[a],a,t))&&(delete r[a],o=!0)}}return yt.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const s=t[r];(!e||l0(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const t=this,r={};return yt.forEach(this,(o,s)=>{const i=yt.findKey(r,s);if(i){t[i]=up(o),delete t[s];return}const a=e?uH(s):String(s).trim();a!==s&&delete t[s],t[a]=up(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return yt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&yt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[Ly]=this[Ly]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=cu(i);r[a]||(hH(o,i),r[a]=!0)}return yt.isArray(e)?e.forEach(s):s(e),this}};ri.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);yt.reduceDescriptors(ri.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});yt.freezeMethods(ri);function d0(n,e){const t=this||wh,r=e||t,o=ri.from(r.headers);let s=r.data;return yt.forEach(n,function(a){s=a.call(t,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function Hz(n){return!!(n&&n.__CANCEL__)}function jc(n,e,t){Mr.call(this,n??"canceled",Mr.ERR_CANCELED,e,t),this.name="CanceledError"}yt.inherits(jc,Mr,{__CANCEL__:!0});function jz(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Mr("Request failed with status code "+t.status,[Mr.ERR_BAD_REQUEST,Mr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fH(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function pH(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(A){const d=Date.now(),c=r[s];i||(i=d),t[o]=A,r[o]=d;let u=s,h=0;for(;u!==o;)h+=t[u++],u=u%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-i<e)return;const p=c&&d-c;return p?Math.round(h*1e3/p):void 0}}function gH(n,e){let t=0,r=1e3/e,o,s;const i=(d,c=Date.now())=>{t=c,o=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const c=Date.now(),u=c-t;u>=r?i(d,c):(o=d,s||(s=setTimeout(()=>{s=null,i(o)},r-u)))},()=>o&&i(o)]}const Yp=(n,e,t=3)=>{let r=0;const o=pH(50,250);return gH(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,A=i-r,d=o(A),c=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:A,rate:d||void 0,estimated:d&&a&&c?(a-i)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},Py=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},ky=n=>(...e)=>yt.asap(()=>n(...e)),vH=Es.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Es.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Es.origin),Es.navigator&&/(msie|trident)/i.test(Es.navigator.userAgent)):()=>!0,mH=Es.hasStandardBrowserEnv?{write(n,e,t,r,o,s){const i=[n+"="+encodeURIComponent(e)];yt.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),yt.isString(r)&&i.push("path="+r),yt.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wH(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function bH(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Rz(n,e,t){let r=!wH(e);return n&&(r||t==!1)?bH(n,e):e}const Oy=n=>n instanceof ri?{...n}:n;function id(n,e){e=e||{};const t={};function r(d,c,u,h){return yt.isPlainObject(d)&&yt.isPlainObject(c)?yt.merge.call({caseless:h},d,c):yt.isPlainObject(c)?yt.merge({},c):yt.isArray(c)?c.slice():c}function o(d,c,u,h){if(yt.isUndefined(c)){if(!yt.isUndefined(d))return r(void 0,d,u,h)}else return r(d,c,u,h)}function s(d,c){if(!yt.isUndefined(c))return r(void 0,c)}function i(d,c){if(yt.isUndefined(c)){if(!yt.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,u){if(u in e)return r(d,c);if(u in n)return r(void 0,d)}const A={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,c,u)=>o(Oy(d),Oy(c),u,!0)};return yt.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=A[c]||o,h=u(n[c],e[c],c);yt.isUndefined(h)&&u!==a||(t[c]=h)}),t}const qz=n=>{const e=id({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=ri.from(i),e.url=Dz(Rz(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let A;if(yt.isFormData(t)){if(Es.hasStandardBrowserEnv||Es.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((A=i.getContentType())!==!1){const[d,...c]=A?A.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...c].join("; "))}}if(Es.hasStandardBrowserEnv&&(r&&yt.isFunction(r)&&(r=r(e)),r||r!==!1&&vH(e.url))){const d=o&&s&&mH.read(s);d&&i.set(o,d)}return e},yH=typeof XMLHttpRequest<"u",_H=yH&&function(n){return new Promise(function(t,r){const o=qz(n);let s=o.data;const i=ri.from(o.headers).normalize();let{responseType:a,onUploadProgress:A,onDownloadProgress:d}=o,c,u,h,p,v;function w(){p&&p(),v&&v(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function x(){if(!b)return;const I=ri.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:I,config:n,request:b};jz(function(j){t(j),w()},function(j){r(j),w()},N),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(r(new Mr("Request aborted",Mr.ECONNABORTED,n,b)),b=null)},b.onerror=function(){r(new Mr("Network Error",Mr.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let P=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const N=o.transitional||Nz;o.timeoutErrorMessage&&(P=o.timeoutErrorMessage),r(new Mr(P,N.clarifyTimeoutError?Mr.ETIMEDOUT:Mr.ECONNABORTED,n,b)),b=null},s===void 0&&i.setContentType(null),"setRequestHeader"in b&&yt.forEach(i.toJSON(),function(P,N){b.setRequestHeader(N,P)}),yt.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),a&&a!=="json"&&(b.responseType=o.responseType),d&&([h,v]=Yp(d,!0),b.addEventListener("progress",h)),A&&b.upload&&([u,p]=Yp(A),b.upload.addEventListener("progress",u),b.upload.addEventListener("loadend",p)),(o.cancelToken||o.signal)&&(c=I=>{b&&(r(!I||I.type?new jc(null,n,b):I),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const S=fH(o.url);if(S&&Es.protocols.indexOf(S)===-1){r(new Mr("Unsupported protocol "+S+":",Mr.ERR_BAD_REQUEST,n));return}b.send(s||null)})},xH=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const s=function(d){if(!o){o=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof Mr?c:new jc(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,s(new Mr(`timeout ${e} of ms exceeded`,Mr.ETIMEDOUT))},e);const a=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:A}=r;return A.unsubscribe=()=>yt.asap(a),A}},BH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},zH=async function*(n,e){for await(const t of CH(n))yield*BH(t,e)},CH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Dy=(n,e,t,r)=>{const o=zH(n,e);let s=0,i,a=A=>{i||(i=!0,r&&r(A))};return new ReadableStream({async pull(A){try{const{done:d,value:c}=await o.next();if(d){a(),A.close();return}let u=c.byteLength;if(t){let h=s+=u;t(h)}A.enqueue(new Uint8Array(c))}catch(d){throw a(d),d}},cancel(A){return a(A),o.return()}},{highWaterMark:2})},$g=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kz=$g&&typeof ReadableStream=="function",SH=$g&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),$z=(n,...e)=>{try{return!!n(...e)}catch{return!1}},EH=Kz&&$z(()=>{let n=!1;const e=new Request(Es.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Ny=64*1024,Om=Kz&&$z(()=>yt.isReadableStream(new Response("").body)),Jp={stream:Om&&(n=>n.body)};$g&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Jp[e]&&(Jp[e]=yt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Mr(`Response type '${e}' is not supported`,Mr.ERR_NOT_SUPPORT,r)})})})(new Response);const FH=async n=>{if(n==null)return 0;if(yt.isBlob(n))return n.size;if(yt.isSpecCompliantForm(n))return(await new Request(Es.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(yt.isArrayBufferView(n)||yt.isArrayBuffer(n))return n.byteLength;if(yt.isURLSearchParams(n)&&(n=n+""),yt.isString(n))return(await SH(n)).byteLength},IH=async(n,e)=>{const t=yt.toFiniteNumber(n.getContentLength());return t??FH(e)},UH=$g&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:A,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=qz(n);d=d?(d+"").toLowerCase():"text";let p=xH([o,s&&s.toAbortSignal()],i),v;const w=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(A&&EH&&t!=="get"&&t!=="head"&&(b=await IH(c,r))!==0){let N=new Request(e,{method:"POST",body:r,duplex:"half"}),ee;if(yt.isFormData(r)&&(ee=N.headers.get("content-type"))&&c.setContentType(ee),N.body){const[j,D]=Py(b,Yp(ky(A)));r=Dy(N.body,Ny,j,D)}}yt.isString(u)||(u=u?"include":"omit");const x="credentials"in Request.prototype;v=new Request(e,{...h,signal:p,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:x?u:void 0});let S=await fetch(v);const I=Om&&(d==="stream"||d==="response");if(Om&&(a||I&&w)){const N={};["status","statusText","headers"].forEach(ne=>{N[ne]=S[ne]});const ee=yt.toFiniteNumber(S.headers.get("content-length")),[j,D]=a&&Py(ee,Yp(ky(a),!0))||[];S=new Response(Dy(S.body,Ny,j,()=>{D&&D(),w&&w()}),N)}d=d||"text";let P=await Jp[yt.findKey(Jp,d)||"text"](S,n);return!I&&w&&w(),await new Promise((N,ee)=>{jz(N,ee,{data:P,headers:ri.from(S.headers),status:S.status,statusText:S.statusText,config:n,request:v})})}catch(x){throw w&&w(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Mr("Network Error",Mr.ERR_NETWORK,n,v),{cause:x.cause||x}):Mr.from(x,x&&x.code,n,v)}}),Dm={http:$7,xhr:_H,fetch:UH};yt.forEach(Dm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const My=n=>`- ${n}`,QH=n=>yt.isFunction(n)||n===null||n===!1,Vz={getAdapter:n=>{n=yt.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let s=0;s<e;s++){t=n[s];let i;if(r=t,!QH(t)&&(r=Dm[(i=String(t)).toLowerCase()],r===void 0))throw new Mr(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,A])=>`adapter ${a} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(My).join(`
`):" "+My(s[0]):"as no adapter specified";throw new Mr("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Dm};function c0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new jc(null,n)}function Hy(n){return c0(n),n.headers=ri.from(n.headers),n.data=d0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Vz.getAdapter(n.adapter||wh.adapter)(n).then(function(r){return c0(n),r.data=d0.call(n,n.transformResponse,r),r.headers=ri.from(r.headers),r},function(r){return Hz(r)||(c0(n),r&&r.response&&(r.response.data=d0.call(n,n.transformResponse,r.response),r.response.headers=ri.from(r.response.headers))),Promise.reject(r)})}const Gz="1.9.0",Vg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Vg[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const jy={};Vg.transitional=function(e,t,r){function o(s,i){return"[Axios v"+Gz+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new Mr(o(i," has been removed"+(t?" in "+t:"")),Mr.ERR_DEPRECATED);return t&&!jy[i]&&(jy[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,a):!0}};Vg.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function TH(n,e,t){if(typeof n!="object")throw new Mr("options must be an object",Mr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=n[s],A=a===void 0||i(a,s,n);if(A!==!0)throw new Mr("option "+s+" must be "+A,Mr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Mr("Unknown option "+s,Mr.ERR_BAD_OPTION)}}const hp={assertOptions:TH,validators:Vg},Ca=hp.validators;let ed=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ty,response:new Ty}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=id(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:s}=t;r!==void 0&&hp.assertOptions(r,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1),o!=null&&(yt.isFunction(o)?t.paramsSerializer={serialize:o}:hp.assertOptions(o,{encode:Ca.function,serialize:Ca.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),hp.assertOptions(t,{baseUrl:Ca.spelling("baseURL"),withXsrfToken:Ca.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&yt.merge(s.common,s[t.method]);s&&yt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=ri.concat(i,s);const a=[];let A=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(A=A&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let c,u=0,h;if(!A){const v=[Hy.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,d),h=v.length,c=Promise.resolve(t);u<h;)c=c.then(v[u++],v[u++]);return c}h=a.length;let p=t;for(u=0;u<h;){const v=a[u++],w=a[u++];try{p=v(p)}catch(b){w.call(this,b);break}}try{c=Hy.call(this,p)}catch(v){return Promise.reject(v)}for(u=0,h=d.length;u<h;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=id(this.defaults,e);const t=Rz(e.baseURL,e.url,e.allowAbsoluteUrls);return Dz(t,e.params,e.paramsSerializer)}};yt.forEach(["delete","get","head","options"],function(e){ed.prototype[e]=function(t,r){return this.request(id(r||{},{method:e,url:t,data:(r||{}).data}))}});yt.forEach(["post","put","patch"],function(e){function t(r){return function(s,i,a){return this.request(id(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}ed.prototype[e]=t(),ed.prototype[e+"Form"]=t(!0)});let LH=class Wz{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new jc(s,i,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Wz(function(o){e=o}),cancel:e}}};function PH(n){return function(t){return n.apply(null,t)}}function kH(n){return yt.isObject(n)&&n.isAxiosError===!0}const Nm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nm).forEach(([n,e])=>{Nm[e]=n});function Xz(n){const e=new ed(n),t=Cz(ed.prototype.request,e);return yt.extend(t,ed.prototype,e,{allOwnKeys:!0}),yt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Xz(id(n,o))},t}const uo=Xz(wh);uo.Axios=ed;uo.CanceledError=jc;uo.CancelToken=LH;uo.isCancel=Hz;uo.VERSION=Gz;uo.toFormData=Kg;uo.AxiosError=Mr;uo.Cancel=uo.CanceledError;uo.all=function(e){return Promise.all(e)};uo.spread=PH;uo.isAxiosError=kH;uo.mergeConfig=id;uo.AxiosHeaders=ri;uo.formToJSON=n=>Mz(yt.isHTMLForm(n)?new FormData(n):n);uo.getAdapter=Vz.getAdapter;uo.HttpStatusCode=Nm;uo.default=uo;const{Axios:j$,AxiosError:R$,CanceledError:q$,isCancel:K$,CancelToken:$$,VERSION:V$,all:G$,Cancel:W$,isAxiosError:X$,spread:Y$,toFormData:J$,AxiosHeaders:Z$,HttpStatusCode:eV,formToJSON:tV,getAdapter:rV,mergeConfig:nV}=uo,Yz=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",OH=Yz+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",DH="["+Yz+"]["+OH+"]*",NH=new RegExp("^"+DH+"$");function Jz(n,e){const t=[];let r=e.exec(n);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let i=0;i<s;i++)o.push(r[i]);t.push(o),r=e.exec(n)}return t}const s2=function(n){const e=NH.exec(n);return!(e===null||typeof e>"u")};function MH(n){return typeof n<"u"}const HH={allowBooleanAttributes:!1,unpairedTags:[]};function jH(n,e){e=Object.assign({},HH,e);const t=[];let r=!1,o=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=qy(n,s),s.err)return s}else if(n[s]==="<"){let i=s;if(s++,n[s]==="!"){s=Ky(n,s);continue}else{let a=!1;n[s]==="/"&&(a=!0,s++);let A="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)A+=n[s];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),s--),!XH(A)){let u;return A.trim().length===0?u="Invalid space after '<'.":u="Tag '"+A+"' is an invalid name.",_o("InvalidTag",u,Ls(n,s))}const d=KH(n,s);if(d===!1)return _o("InvalidAttr","Attributes for '"+A+"' have open quote.",Ls(n,s));let c=d.value;if(s=d.index,c[c.length-1]==="/"){const u=s-c.length;c=c.substring(0,c.length-1);const h=$y(c,e);if(h===!0)r=!0;else return _o(h.err.code,h.err.msg,Ls(n,u+h.err.line))}else if(a)if(d.tagClosed){if(c.trim().length>0)return _o("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",Ls(n,i));if(t.length===0)return _o("InvalidTag","Closing tag '"+A+"' has not been opened.",Ls(n,i));{const u=t.pop();if(A!==u.tagName){let h=Ls(n,u.tagStartPos);return _o("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+A+"'.",Ls(n,i))}t.length==0&&(o=!0)}}else return _o("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",Ls(n,s));else{const u=$y(c,e);if(u!==!0)return _o(u.err.code,u.err.msg,Ls(n,s-c.length+u.err.line));if(o===!0)return _o("InvalidXml","Multiple possible root nodes found.",Ls(n,s));e.unpairedTags.indexOf(A)!==-1||t.push({tagName:A,tagStartPos:i}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=Ky(n,s);continue}else if(n[s+1]==="?"){if(s=qy(n,++s),s.err)return s}else break;else if(n[s]==="&"){const u=GH(n,s);if(u==-1)return _o("InvalidChar","char '&' is not expected.",Ls(n,s));s=u}else if(o===!0&&!Ry(n[s]))return _o("InvalidXml","Extra text at the end",Ls(n,s));n[s]==="<"&&s--}}else{if(Ry(n[s]))continue;return _o("InvalidChar","char '"+n[s]+"' is not expected.",Ls(n,s))}if(r){if(t.length==1)return _o("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Ls(n,t[0].tagStartPos));if(t.length>0)return _o("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return _o("InvalidXml","Start tag expected.",1);return!0}function Ry(n){return n===" "||n==="	"||n===`
`||n==="\r"}function qy(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return _o("InvalidXml","XML declaration allowed only at the start of the document.",Ls(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function Ky(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const RH='"',qH="'";function KH(n,e){let t="",r="",o=!1;for(;e<n.length;e++){if(n[e]===RH||n[e]===qH)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){o=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:o}}const $H=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function $y(n,e){const t=Jz(n,$H),r={};for(let o=0;o<t.length;o++){if(t[o][1].length===0)return _o("InvalidAttr","Attribute '"+t[o][2]+"' has no space in starting.",uu(t[o]));if(t[o][3]!==void 0&&t[o][4]===void 0)return _o("InvalidAttr","Attribute '"+t[o][2]+"' is without value.",uu(t[o]));if(t[o][3]===void 0&&!e.allowBooleanAttributes)return _o("InvalidAttr","boolean attribute '"+t[o][2]+"' is not allowed.",uu(t[o]));const s=t[o][2];if(!WH(s))return _o("InvalidAttr","Attribute '"+s+"' is an invalid name.",uu(t[o]));if(!r.hasOwnProperty(s))r[s]=1;else return _o("InvalidAttr","Attribute '"+s+"' is repeated.",uu(t[o]))}return!0}function VH(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function GH(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,VH(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function _o(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function WH(n){return s2(n)}function XH(n){return s2(n)}function Ls(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function uu(n){return n.startIndex+n[1].length}const YH={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},JH=function(n){return Object.assign({},YH,n)};let Zp;typeof Symbol!="function"?Zp="@@xmlMetadata":Zp=Symbol("XML Node Metadata");class Nl{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][Zp]={startIndex:t})}static getMetaDataSymbol(){return Zp}}function ZH(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,o=!1,s=!1,i="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(o&&Ml(n,"!ENTITY",e)){e+=7;let a,A;[a,A,e]=ej(n,e+1),A.indexOf("&")===-1&&(t[a]={regx:RegExp(`&${a};`,"g"),val:A})}else if(o&&Ml(n,"!ELEMENT",e)){e+=8;const{index:a}=rj(n,e+1);e=a}else if(o&&Ml(n,"!ATTLIST",e))e+=8;else if(o&&Ml(n,"!NOTATION",e)){e+=9;const{index:a}=tj(n,e+1);e=a}else if(Ml(n,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,i=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?o=!0:i+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const Al=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function ej(n,e){e=Al(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(i2(t),e=Al(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=fp(n,e,"entity"),e--,[t,r,e]}function tj(n,e){e=Al(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;i2(t),e=Al(n,e);const r=n.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=Al(n,e);let o=null,s=null;if(r==="PUBLIC")[e,o]=fp(n,e,"publicIdentifier"),e=Al(n,e),(n[e]==='"'||n[e]==="'")&&([e,s]=fp(n,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=fp(n,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:o,systemIdentifier:s,index:--e}}function fp(n,e,t){let r="";const o=n[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<n.length&&n[e]!==o;)r+=n[e],e++;if(n[e]!==o)throw new Error(`Unterminated ${t} value`);return e++,[e,r]}function rj(n,e){e=Al(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!i2(t))throw new Error(`Invalid element name: "${t}"`);e=Al(n,e);let r="";if(n[e]==="E"&&Ml(n,"MPTY",e))e+=6;else if(n[e]==="A"&&Ml(n,"NY",e))e+=4;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)r+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:r.trim(),index:e}}function Ml(n,e,t){for(let r=0;r<e.length;r++)if(e[r]!==n[t+r+1])return!1;return!0}function i2(n){if(s2(n))return n;throw new Error(`Invalid entity name ${n}`)}const nj=/^[-+]?0x[a-fA-F0-9]+$/,oj=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,sj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ij(n,e={}){if(e=Object.assign({},sj,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&nj.test(t))return dj(t,16);if(t.search(/.+[eE].+/)!==-1)return Aj(n,t,e);{const r=oj.exec(t);if(r){const o=r[1]||"",s=r[2];let i=lj(r[3]);const a=o?n[s.length+1]===".":n[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!a))return n;{const A=Number(t),d=String(A);if(A===0||A===-0)return A;if(d.search(/[eE]/)!==-1)return e.eNotation?A:n;if(t.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?A:n;let c=s?i:t;return s?c===d||o+c===d?A:n:c===d||c===o+d?A:n}}else return n}}const aj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Aj(n,e,t){if(!t.eNotation)return n;const r=e.match(aj);if(r){let o=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",i=r[2],a=o?n[i.length+1]===s:n[i.length]===s;return i.length>1&&a?n:i.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):t.leadingZeros&&!a?(e=(r[1]||"")+r[3],Number(e)):n}else return n}function lj(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function dj(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function cj(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class uj{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=hj,this.parseXml=mj,this.parseTextData=fj,this.resolveNameSpace=pj,this.buildAttributesMap=vj,this.isItStopNode=_j,this.replaceEntitiesValue=bj,this.readStopNodeData=Bj,this.saveTextToParentTag=yj,this.addChild=wj,this.ignoreAttributesFn=cj(this.options.ignoreAttributes)}}function hj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function fj(n,e,t,r,o,s,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const a=this.options.tagValueProcessor(e,n,t,o,s);return a==null?n:typeof a!=typeof n||a!==n?a:this.options.trimValues?Hm(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Hm(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function pj(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const gj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function vj(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Jz(n,gj),o=r.length,s={};for(let i=0;i<o;i++){const a=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(a,e))continue;let A=r[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);const c=this.options.attributeValueProcessor(a,A,e);c==null?s[d]=A:typeof c!=typeof A||c!==A?s[d]=c:s[d]=Hm(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=s,i}return s}}const mj=function(n){n=n.replace(/\r\n?/g,`
`);const e=new Nl("!xml");let t=e,r="",o="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const a=Vl(n,">",s,"Closing Tag is not closed.");let A=n.substring(s+2,a).trim();if(this.options.removeNSPrefix){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&(r=this.saveTextToParentTag(r,t,o));const d=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let c=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),t=this.tagsNodeStack.pop(),r="",s=a}else if(n[s+1]==="?"){let a=Mm(n,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const A=new Nl(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(t,A,o,s)}s=a.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const a=Vl(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const A=n.substring(s+4,a-2);r=this.saveTextToParentTag(r,t,o),t.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}s=a}else if(n.substr(s+1,2)==="!D"){const a=ZH(n,s);this.docTypeEntities=a.entities,s=a.i}else if(n.substr(s+1,2)==="!["){const a=Vl(n,"]]>",s,"CDATA is not closed.")-2,A=n.substring(s+9,a);r=this.saveTextToParentTag(r,t,o);let d=this.parseTextData(A,t.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):t.add(this.options.textNodeName,d),s=a+2}else{let a=Mm(n,s,this.options.removeNSPrefix),A=a.tagName;const d=a.rawTagName;let c=a.tagExp,u=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,o,!1));const p=t;p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(t=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==e.tagname&&(o+=o?"."+A:A);const v=s;if(this.isItStopNode(this.options.stopNodes,o,A)){let w="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)s=a.closeIndex;else{const x=this.readStopNodeData(n,d,h+1);if(!x)throw new Error(`Unexpected end of ${d}`);s=x.i,w=x.tagContent}const b=new Nl(A);A!==c&&u&&(b[":@"]=this.buildAttributesMap(c,o,A)),w&&(w=this.parseTextData(w,A,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),b.add(this.options.textNodeName,w),this.addChild(t,b,o,v)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));const w=new Nl(A);A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,v),o=o.substr(0,o.lastIndexOf("."))}else{const w=new Nl(A);this.tagsNodeStack.push(t),A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,v),t=w}r="",s=h}}else r+=n[s];return e.child};function wj(n,e,t,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(e.tagname,t,e[":@"]);o===!1||(typeof o=="string"&&(e.tagname=o),n.addChild(e,r))}const bj=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function yj(n,e,t,r){return n&&(r===void 0&&(r=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function _j(n,e,t){const r="*."+t;for(const o in n){const s=n[o];if(r===s||e===s)return!0}return!1}function xj(n,e,t=">"){let r,o="";for(let s=e;s<n.length;s++){let i=n[s];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===t[0])if(t[1]){if(n[s+1]===t[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Vl(n,e,t,r){const o=n.indexOf(e,t);if(o===-1)throw new Error(r);return o+e.length-1}function Mm(n,e,t,r=">"){const o=xj(n,e+1,r);if(!o)return;let s=o.data;const i=o.index,a=s.search(/\s/);let A=s,d=!0;a!==-1&&(A=s.substring(0,a),s=s.substring(a+1).trimStart());const c=A;if(t){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1),d=A!==o.data.substr(u+1))}return{tagName:A,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:c}}function Bj(n,e,t){const r=t;let o=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=Vl(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(o--,o===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=Vl(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Vl(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Vl(n,"]]>",t,"StopNode is not closed.")-2;else{const s=Mm(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,t=s.closeIndex)}}function Hm(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:ij(n,t)}else return MH(n)?n:""}const u0=Nl.getMetaDataSymbol();function zj(n,e){return Zz(n,e)}function Zz(n,e,t){let r;const o={};for(let s=0;s<n.length;s++){const i=n[s],a=Cj(i);let A="";if(t===void 0?A=a:A=t+"."+a,a===e.textNodeName)r===void 0?r=i[a]:r+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Zz(i[a],e,A);const c=Ej(d,e);i[u0]!==void 0&&(d[u0]=i[u0]),i[":@"]?Sj(d,i[":@"],A,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,A,c)?o[a]=[d]:o[a]=d}}}return typeof r=="string"?r.length>0&&(o[e.textNodeName]=r):r!==void 0&&(o[e.textNodeName]=r),o}function Cj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function Sj(n,e,t,r){if(e){const o=Object.keys(e),s=o.length;for(let i=0;i<s;i++){const a=o[i];r.isArray(a,t+"."+a,!0,!0)?n[a]=[e[a]]:n[a]=e[a]}}}function Ej(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class Fj{constructor(e){this.externalEntities={},this.options=JH(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=jH(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new uj(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(e);return this.options.preserveOrder||o===void 0?o:zj(o,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return Nl.getMetaDataSymbol()}}class eC{constructor(){this.partner_key="JUZFJThGJUQ0JUQ0JUNCUVBD",this.key="JUI5JTgyR3QlMTMtUSVBRiUxMyVEQUslQzclN0ZHJTBCVzQlOUUyLSUxMiUwRmMlODQlNUMlRTglQTYlRjUlMTVMJThBVTclRTIlOTElM0E=",this.parser=new Fj({ignoreAttributes:!1,trimValues:!0})}async getProduct(e){var t,r;try{const o=await uo.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Search.php",{params:{partner_key:this.partner_key,key:this.key,goodsNo:e}});if(typeof o.data!="string")throw new Error("XML    .");const i=this.parser.parse(o.data).data.return.goods_data,a=((t=i.optionName)==null?void 0:t.split("^|^").map(d=>d))||[];console.log({godoProduct:i});const A=a.map((d,c)=>{var v;const u=((v=i.optionData)==null?void 0:v.map(w=>w[`optionValue${c+1}`]).filter(w=>w))||[],h=[...new Set(u)],p=h.map(w=>{var b,x;if(c===0){const I=(((x=(b=i.optionData)==null?void 0:b.find(N=>N[`optionValue${c+1}`]===w))==null?void 0:x.optionImage)||"").split("http").pop();return I?"http"+I:""}return""});return{title:d,values:h,images:p}});return{title:i.goodsNm,description:i.goodsDescription,handle:i.goodsNo,thumbnail:i.listImageData?i.listImageData["#text"]:"",goodsNo:i.goodsNo,goodsNm:i.goodsNm,goodsDescription:i.goodsDescription.replace(/\\r\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\/g,"")||"",status:"draft",productOptionValues:A,variants:((r=i.optionData)==null?void 0:r.map(d=>{const c=Array.from({length:5},(v,w)=>d[`optionValue${w+1}`]).filter(v=>v!==void 0&&v!==""),h=(d.optionImage||"").split("http").pop(),p=h?"http"+h:"";return{title:c.join(" / "),sku:d.optionCode||`${i.goodsNo}-${c.join("-")}`,thumbnail:p,barcode:"",inventory_quantity:parseInt(d.stockCnt||"0"),price:parseInt(i.goodsPrice+d.optionPrice||"0")}}))||[],mallType:"godo5",mallProductId:e,textOptionData:i.textOptionData}}catch(o){throw console.error("Godo5 API Error:",o),new Error("5    .")}}async getAddProduct(e){try{const t=await uo.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Add_Search.php",{params:{partner_key:this.partner_key,key:this.key,addGoodsNo:e}});if(typeof t.data!="string")throw new Error("XML    .");console.log({response:t});const r=this.parser.parse(t.data);console.log({result:r});const o=r.data.return.goods_data;return console.log({addGoodsData:o}),{addGoodsNo:o.addGoodsNo,goodsNm:o.goodsNm,goodsPrice:parseInt(o.goodsPrice||"0"),stockCnt:parseInt(o.stockCnt||"0"),listImageData:o.listImageData,soldOutFl:o.soldOutFl==="y"}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}parseOptionInfo(e){try{return JSON.parse(e).map(r=>({name:r[0]||"",value:r[1]||"",code:r[2]||"",stock:r[3]||"",price:parseInt(r[3]||"0")})).filter(r=>r.name&&r.value)}catch(t){return console.error("   :",t),[]}}getOptionCode(e){try{return JSON.parse(e)[0][2]||""}catch(t){return console.error("   :",t),""}}async getOrder(e){try{const t=await uo.get("https://openhub.godo.co.kr/godomall5/order/Order_Search.php",{params:{partner_key:this.partner_key,key:this.key,orderNo:e}});if(typeof t.data!="string")throw new Error("XML    .");const o=this.parser.parse(t.data).data.return.order_data;return console.log({orderData:o}),{orderNo:o.orderNo,orderDate:o.orderDate,orderStatus:o.orderStatus,orderName:o.orderInfoData.orderName,orderEmail:o.orderInfoData.orderEmail,orderPhone:o.orderInfoData.orderPhone,receiverName:o.orderInfoData.receiverName,receiverPhone:o.orderInfoData.receiverPhone,receiverAddress:`${o.orderInfoData.receiverZonecode} ${o.orderInfoData.receiverAddress} ${o.orderInfoData.receiverAddressSub}`,totalPrice:parseInt(o.settlePrice),orderGoodsData:Array.isArray(o.orderGoodsData)?o.orderGoodsData.map(s=>({goodsNo:s.goodsNo||"",goodsNm:s.goodsNm||"",goodsType:"orderGoods",goodsCnt:s.goodsCnt||0,goodsPrice:s.goodsPrice||0,listImageData:s.listImageData||"",exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[],addGoodsData:Array.isArray(o.addGoodsData)?o.addGoodsData.map(s=>({goodsNm:s.goodsNm,addGoodsNo:s.addGoodsNo,goodsType:"addGoods",goodsCnt:parseInt(String(s.goodsCnt)),goodsPrice:parseInt(String(s.goodsPrice)),listImageData:s.listImageData,exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[]}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}}new eC;async function Ij(n,e){const t=[],r=n.filter(o=>o.product&&o.product.mall_type==="godo5"&&o.product.mall_product_id);if(r.length===0)return console.log("5  ."),t;console.log(`${r.length} 5  .`);try{const o=document.createElement("form");o.method="POST",o.action="/order/cart_ps.php",o.style.display="none";const s=(i,a)=>{const A=document.createElement("input");A.type="hidden",A.name=i,A.value=a,o.appendChild(A)};s("mode","cartIn"),s("cartMode","d"),s("useBundleGoods","1"),s("scmNo","1");for(const i of r)try{const A=i.product.mall_product_id,d=i.idx;let c=1;i.isAdditionalCost?c=1:c=Array.isArray(i.items)?i.items.reduce((p,v)=>p+(v.quantity||0),0):1;let u="";e&&d!==void 0&&(i.isAdditionalCost?u=`${e}-add-${i.id}`:u=`${e}-${d}`);const h=await Qj(i.product.mall_product_id);console.log(`   (${i.isAdditionalCost?"":""}):`,h),s("goodsNo[]",A),s("goodsCnt[]",c.toString()),s("optionFl[]","n"),s("displayOptionkey[]",""),s("goodsPriceSum[]","0"),s("addGoodsPriceSum[]","0"),u&&h.textOptionData.optionName==="odiz"&&s(`optionText[${d}][${h.textOptionData.sno}]`,u),t.push(A)}catch(a){console.error("    :",a)}return document.body.appendChild(o),console.log(o),o.submit(),console.log(`${r.length} 5     `),t}catch(o){return console.error("    :",o),t}}async function Uj(n){var t,r,o,s;const e={success:!1,submittedOrders:[]};try{const i=((t=n[0])==null?void 0:t.estimate_id)||((s=(o=(r=n[0])==null?void 0:r.items)==null?void 0:o[0])==null?void 0:s.estimate_id),a=await Ij(n,i);a.length>0&&(e.submittedOrders.push({mallType:"godo5",productIds:a}),e.success=!0)}catch(i){console.error("    :",i)}return e}async function Qj(n){return await new eC().getProduct(n)}function Tj(n,e,t,r){y(e,""),y(t,""),y(r,"")}var Lj=(n,e,t)=>{y(e,""),y(t,"")},Pj=G('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600 odz-transition-colors"><!></button>'),kj=G('<button type="button" class="odz-btn odz-btn-outline odz-btn-sm sm:odz-btn-md"></button>'),Oj=G('<div class="odz-mt-3 odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-indigo-600"> </span>  .</div>'),Dj=G('<button class="odz-btn odz-btn-outline odz-ml-2"></button>'),Nj=(n,e)=>e("1week"),Mj=(n,e)=>e("1month"),Hj=(n,e)=>e("6months"),jj=(n,e)=>e("1year"),Rj=G('<div class="odz-text-xs odz-text-gray-500 odz-mt-2"> </div>'),qj=G('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm"> </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button> <!></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"><button class="odz-btn odz-btn-xs odz-btn-outline">1</button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline">6</button> <button class="odz-btn odz-btn-xs odz-btn-outline">1</button></div> <!></div></fieldset></div></div>'),Kj=G('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm">  </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button></div></div> <div class="odz-text-xs odz-text-gray-500 odz-mt-2">* /      .</div></div></fieldset></div></div>'),$j=(n,e)=>e("current"),Vj=(n,e)=>e("previous"),Gj=G('<div class="odz-flex odz-gap-2 odz-mb-4 odz-border-b odz-border-gray-200"><button type="button"> </button> <button type="button">  (2026 )</button></div>'),Wj=G('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),Xj=G('<div class="odz-alert odz-alert-error"><span> </span></div>'),Yj=G('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8"><!></div>'),Jj=G('<img loading="lazy" class="odz-w-24 odz-h-24 odz-rounded-xl odz-object-cover odz-ring-2 odz-ring-gray-100 odz-transition-transform odz-duration-300 group-hover:odz-scale-105"> <div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100" style="display: none;"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>',1),Zj=G('<div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),eR=G('<div class="odz-absolute -odz-bottom-2 -odz-right-2 odz-bg-indigo-600 odz-text-white odz-text-xs odz-font-bold odz-px-2.5 odz-py-1 odz-rounded-full odz-shadow-lg odz-ring-2 odz-ring-white"> </div>'),tR=G('<p class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-truncate"> <!></p>'),rR=G('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-medium odz-border odz-border-indigo-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> </span>'),nR=G('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-amber-50 odz-text-amber-700 odz-text-xs odz-font-medium odz-border odz-border-amber-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </span>'),oR=(n,e,t,r)=>{l(e)&&t(l(r).id)},sR=(n,e,t)=>e(l(t)),iR=lg('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>'),aR=lg('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>',1),AR=(n,e,t)=>e(l(t)),lR=G('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),dR=(n,e,t)=>e(l(t)),cR=G('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> </button>'),uR=G('<article class="odz-group odz-relative odz-flex odz-flex-col odz-overflow-hidden odz-bg-white odz-border odz-border-gray-200 odz-rounded-2xl odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all odz-duration-300 hover:odz-shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:odz-border-indigo-200"><div class="odz-absolute odz-top-4 odz-right-4 odz-z-10"><span><svg class="odz-w-2 odz-h-2 odz-fill-current svelte-ryvuky" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" class="svelte-ryvuky"></circle></svg> </span></div> <div class="odz-flex odz-flex-col lg:odz-flex-row"><div class="odz-flex odz-flex-1 odz-flex-col odz-p-6"><div class="odz-flex odz-items-start odz-gap-5 odz-mb-5"><div class="odz-relative odz-flex-shrink-0"><!> <!></div> <div class="odz-flex-1 odz-min-w-0 odz-pt-1"><h3 class="odz-text-xl odz-font-bold odz-text-slate-900 odz-mb-2 odz-line-clamp-2 odz-leading-tight"> </h3> <!> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mb-5"><!> <!></div> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-amber-100 odz-text-amber-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-3 odz-p-5 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-xl odz-border odz-border-slate-200"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5 odz-col-span-2 sm:odz-col-span-1"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"> </span> <span class="odz-text-lg odz-font-bold odz-text-indigo-600"> </span></div></div></div> <div class="odz-flex odz-flex-col odz-gap-4 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-gray-50 odz-border-t lg:odz-border-t-0 lg:odz-border-l odz-border-gray-200 lg:odz-w-56 odz-justify-between"><div class="odz-flex odz-flex-col odz-gap-2"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"> </span> <button type="button"><svg class="odz-w-4 odz-h-4 svelte-ryvuky" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" class="svelte-ryvuky"></path></svg> </button></div> <div class="odz-flex odz-flex-col odz-gap-2.5"><button class="odz-btn odz-btn-primary odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <!></div></div></div></article>'),hR=G('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),fR=G('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),pR=G('<div class="odz-alert odz-alert-error"><span> </span></div>'),gR=G('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),vR=(n,e,t)=>{y(e,""),y(t,"")},mR=G('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600"><!></button>'),wR=G('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),bR=G('<span class="odz-text-gray-300">|</span> <span> </span>',1),yR=G('<img class="odz-w-12 odz-h-12 odz-rounded odz-object-cover odz-flex-shrink-0">'),_R=G('<div class="odz-w-12 odz-h-12 odz-rounded odz-bg-gray-200 odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><!></div>'),xR=(n,e,t)=>e(l(t).sno),BR=G('<div class="odz-flex odz-items-center odz-gap-3 odz-p-3 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-gray-100"><!> <div class="odz-flex-1 odz-min-w-0"><p class="odz-text-sm odz-font-medium odz-text-slate-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500 odz-truncate"> </p></div> <button type="button" class="odz-btn odz-btn-xs odz-btn-outline odz-flex-shrink-0"><!> </button></div>'),zR=G('<div class="odz-px-5 odz-mb-4"><div class="odz-text-xs odz-font-medium odz-text-gray-500 odz-mb-2 odz-flex odz-items-center odz-gap-1"><!> </div> <div class="odz-flex odz-flex-col odz-gap-2"></div></div>'),CR=G("<span> </span>"),SR=(n,e,t)=>e(l(t)),ER=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span> ...',1),FR=G("<!> ",1),IR=G('<div class="odz-card odz-bg-white odz-border odz-border-gray-200 odz-shadow-sm odz-rounded-2xl odz-overflow-hidden"><div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-pt-5"><span> </span> <span class="odz-text-sm odz-text-gray-500"> </span></div> <div class="odz-p-5"><h3 class="odz-font-bold odz-text-lg odz-text-slate-900 odz-mb-1"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-3"> </p> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><span> </span> <!></div></div> <!> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mx-5 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-sky-100 odz-text-sky-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-py-4 odz-border-t odz-border-gray-100 odz-bg-gray-50/50"><div class="odz-text-sm odz-text-gray-500"><!></div> <div class="odz-text-right"><span class="odz-text-xs odz-text-gray-500"></span> <p class="odz-text-lg odz-font-bold odz-text-primary"> </p></div></div> <div class="odz-flex odz-justify-end odz-px-5 odz-pb-5"><button type="button" class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!></button></div></div>'),UR=G('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),QR=G(`<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="search" placeholder=", , , , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10" autocomplete="off" readonly=""> <!></div></div></div></div> <div class="odz-bg-emerald-50 odz-border odz-border-emerald-200 odz-rounded-lg odz-p-4 odz-mb-4"><p class="odz-text-sm odz-text-emerald-800"><strong></strong>    <strong> </strong>
          .</p></div> <!>`,1),TR=(n,e)=>{n.key==="Enter"&&e()},LR=G('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),PR=G('<div class="odz-fixed odz-inset-0 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50 odz-z-50"><div class="odz-bg-white odz-p-6 odz-rounded-lg odz-shadow-xl"><div class="odz-flex odz-flex-col odz-items-center"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-mb-4"></span> <p class="odz-text-lg odz-font-medium">  ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2">  </p></div></div></div>'),kR=G('<div class="odz-w-full"><h2 class="odz-text-xl odz-font-bold odz-mb-4"> </h2> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="search" placeholder=", , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10" autocomplete="off" readonly=""> <!></div> <div class="odz-relative odz-min-w-[140px]"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <select class="odz-select odz-select-bordered odz-w-full odz-pl-9"><option> </option><option></option><option></option><option></option><option></option><option></option></select></div> <!></div> <!></div></div> <!> <!> <!> <!> <!></div> <!> <dialog id="password_confirm_modal"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg odz-mb-4">  </h3> <p class="odz-text-sm odz-mb-4">     .</p> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text"></span></label> <input type="password" placeholder=" "> <!></div> <div class="odz-modal-action"><button class="odz-btn odz-btn-outline"></button> <button class="odz-btn odz-btn-primary"></button></div></div> <div class="odz-modal-backdrop"></div></dialog> <!>',1);function OR(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(ni,"$shopStore",t),s=()=>on(Gl,"$customerStore",t),i=ze(),a=ze();let A=gt(e,"openEstimateModal",8,()=>{}),d=ze([]),c=ze(!0),u=ze(null),h,p=ze(!1),v=ze(null),w=ze(""),b=ze(""),x=ze(null),S=ze(""),I=ze(""),P=ze(""),N=ze(!1),ee=ze(!1),j=ze(""),D=ze(""),ne=ze(!1),xe=ze(!1),L=ze(""),q=null,V=ze(""),se=ze(!1),ve=ze(!1),ie=null,ge=ze(null),re=ze("current"),ue=ze([]),Z=ze(!1),_e=ze(null),z=!1,E=ze(""),F=ze(""),Q=ze(null),M=ze(!1),k=ze(null);const O={thumbnail:null,productNames:[],itemCount:0,totalQuantity:0};let K={};Zn(async()=>{try{if(l(N)){y(c,!0);try{console.log("[ODIZ Debug]   "),console.log("[ODIZ Debug] shop_id:",o().id),console.log("[ODIZ Debug] sess:",o().sess),console.log("[ODIZ Debug] mallType:",s().mallType);const Ve=await vt.from("estimates").select("*").eq("shop_id",o().id).is("customer_id",null).eq("sess",o().sess).neq("status","temp").order("created_at",{ascending:!1});if(Ve.error)throw Ve.error;y(d,Ve.data||[]),s().mallType&&s().mallType.trim()!==""&&y(d,l(d).filter(mt=>mt.mall_type===s().mallType)),await ye(l(d)),h=k0(o().sess,o().id,async mt=>{var Rt,qt,Ht,Xt,Wt,wr;mt.eventType==="UPDATE"?((Rt=mt.new)==null?void 0:Rt.status)!=="temp"?(y(d,l(d).map(br=>br.id===mt.new.id?{...br,...mt.new}:br)),await Ie((qt=mt.new)==null?void 0:qt.id)):(y(d,l(d).filter(br=>br.id!==mt.new.id)),le((Ht=mt.new)==null?void 0:Ht.id)):mt.eventType==="INSERT"?((Xt=mt.new)==null?void 0:Xt.status)!=="temp"&&(!s().mallType||s().mallType.trim()===""||mt.new.mall_type===s().mallType)&&(y(d,[mt.new,...l(d)]),await Ie((Wt=mt.new)==null?void 0:Wt.id)):mt.eventType==="DELETE"&&(y(d,l(d).filter(br=>br.id!==mt.old.id)),le((wr=mt.old)==null?void 0:wr.id))},void 0)}catch(Ve){console.error("    :",Ve),y(d,[])}y(c,!1)}else{const Ve=new Date,mt=new Date(Ve);mt.setMonth(mt.getMonth()-1),y(j,de(mt)),y(D,de(Ve)),y(ne,!0);const{getEstimatesWithDateFilter:Rt}=await Hs(async()=>{const{getEstimatesWithDateFilter:qt}=await Promise.resolve().then(()=>Vh);return{getEstimatesWithDateFilter:qt}},void 0);y(d,await Rt(o().sess,o().customer_id,o().id,l(j),l(D))),await ye(l(d)),h=k0(o().sess,o().id,async qt=>{var Ht,Xt,Wt,wr,br,vn;qt.eventType==="UPDATE"?((Ht=qt.new)==null?void 0:Ht.status)!=="temp"?(y(d,l(d).map(Nt=>Nt.id===qt.new.id?{...Nt,...qt.new}:Nt)),await Ie((Xt=qt.new)==null?void 0:Xt.id)):(y(d,l(d).filter(Nt=>Nt.id!==qt.new.id)),le((Wt=qt.new)==null?void 0:Wt.id)):qt.eventType==="INSERT"?((wr=qt.new)==null?void 0:wr.status)!=="temp"&&(y(d,[qt.new,...l(d)]),await Ie((br=qt.new)==null?void 0:br.id)):qt.eventType==="DELETE"&&(y(d,l(d).filter(Nt=>Nt.id!==qt.old.id)),le((vn=qt.old)==null?void 0:vn.id))},o().customer_id)}}catch(Ve){y(u,Ve.message||"     ."),K={}}finally{y(c,!1)}}),ps(()=>{h&&h.unsubscribe()});function R(Ve){if(!Ve)return"";const mt=new Date(Ve);return`${mt.getFullYear()}-${String(mt.getMonth()+1).padStart(2,"0")}-${String(mt.getDate()).padStart(2,"0")}`}function de(Ve){const mt=Ve.getFullYear(),Rt=String(Ve.getMonth()+1).padStart(2,"0"),qt=String(Ve.getDate()).padStart(2,"0");return`${mt}-${Rt}-${qt}`}function Be(Ve){const mt=new Date,Rt=de(mt);let qt=new Date(mt);switch(Ve){case"1week":qt.setDate(qt.getDate()-7);break;case"1month":qt.setMonth(qt.getMonth()-1);break;case"6months":qt.setMonth(qt.getMonth()-6);break;case"1year":qt.setFullYear(qt.getFullYear()-1);break}y(j,de(qt)),y(D,Rt)}function Pe(Ve){return{1:"",2:"",3:"",4:"",5:"",6:""}[Ve]||`${Ve}`}function He(Ve){return{1:"odz-badge-warning",2:"odz-badge-info",3:"odz-badge-success",4:"odz-badge-primary",5:"odz-badge-neutral",6:"odz-badge-error"}[Ve]||"odz-badge-ghost"}function W(Ve){return!Ve||Ve==="0000-00-00 00:00:00"?"-":new Date(Ve).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})}function H(Ve){const mt=typeof Ve=="string"?parseFloat(Ve):Ve;return isNaN(mt)?"0":mt.toLocaleString("ko-KR")+""}function te(Ve){return!Ve.imageStorage||!Ve.imagePath||!Ve.imageName?"":`${Ve.imageStorage}/${Ve.imagePath}${Ve.imageName}`}function Ae(Ve){try{if(!Ve)return{summary:"-",totalQty:0};const mt=Ve.replace(/\\"/g,'"'),Rt=JSON.parse(mt);if(!Array.isArray(Rt)||Rt.length===0)return{summary:"-",totalQty:0};const qt=Rt.reduce((wr,br)=>wr+(br.ea||0),0),Ht=Rt[0],Xt=[Ht.optionValue1,Ht.optionValue2].filter(Boolean).join(" / ");return{summary:Rt.length>1?`${Xt}  ${Rt.length-1} `:Xt,totalQty:qt}}catch{return{summary:"-",totalQty:0}}}function he(Ve){const mt=`http://dantee771.godomall.com/estimate/estimate_goods_design.php?estimateGoodsSno=${Ve}`;window.open(mt,`design_${Ve}`,"width=900,height=700,scrollbars=yes,resizable=yes")}function we(Ve){const mt=new Set;let Rt=null,qt=0,Ht=0;return(Ve||[]).forEach((Wt,wr)=>{var Nt,yr;if(!Wt)return;Ht+=1,qt+=Wt.quantity||0;const br=(Nt=Wt.product)==null?void 0:Nt.title;br&&mt.add(br);const vn=(yr=Wt.product)==null?void 0:yr.thumbnail;!Rt&&vn&&(Rt=vn)}),{thumbnail:Rt,productNames:Array.from(mt),itemCount:Ht,totalQuantity:qt}}async function ye(Ve){const mt=Ve.map(Rt=>Rt.id).filter(Rt=>!!Rt);if(mt.length===0){K={};return}try{const{data:Rt,error:qt}=await vt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).in("estimate_id",mt);if(qt){console.error("    :",qt);return}const Ht={};(Rt||[]).forEach(Wt=>{Wt!=null&&Wt.estimate_id&&(Ht[Wt.estimate_id]||(Ht[Wt.estimate_id]=[]),Ht[Wt.estimate_id].push(Wt))});const Xt={};mt.forEach(Wt=>{Xt[Wt]=we(Ht[Wt])}),K=Xt}catch(Rt){console.error("     :",Rt)}}async function Ie(Ve){if(Ve)try{const{data:mt,error:Rt}=await vt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).eq("estimate_id",Ve);if(Rt){console.error("[ERROR]      :",Rt),console.error("[ERROR] estimateId:",Ve);return}const qt=we(mt);K={...K,[Ve]:qt}}catch(mt){console.error("[ERROR]       :",mt),console.error("[ERROR] estimateId:",Ve)}}function le(Ve){if(!Ve)return;const{[Ve]:mt,...Rt}=K;K=Rt}function Te(Ve){return Ve&&K[Ve]||O}function Fe(Ve){switch(Ve){case"pending":return"";case"progress":return"";case"completed":return"";case"temp":return"";case"canceled":return"";case"hold":return"";default:return""}}function Me(Ve){switch(Ve){case"pending":return"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200";case"progress":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"canceled":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";case"hold":case"temp":return"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function Ne(Ve){switch(Ve){case"none":return" ";case"waiting":return" ";case"processing":return" ";case"confirming":return" ";case"completed":return" ";case"rejected":return" ";default:return"-"}}function fe(Ve){switch(Ve){case"none":return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200";case"waiting":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"processing":return"odz-bg-indigo-100 odz-text-indigo-700 odz-border-indigo-200";case"confirming":return"odz-bg-purple-100 odz-text-purple-700 odz-border-purple-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"rejected":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function J(Ve){y(v,Ve),y(p,!0)}async function Se(){y(c,!0),y(u,null),y(ee,!0);try{y(d,await m5(o().id,l(I),l(P),o().sess,s().mallType)),await ye(l(d)),l(d).length===0&&(!l(I)&&!l(P)?y(u,"   ."):y(u,"    ."))}catch(Ve){y(u,Ve.message||"    ."),y(d,[]),K={}}finally{y(c,!1)}}async function $(){if(!l(j)&&!l(D)){y(u,"   .");return}y(c,!0),y(u,null),y(ne,!0);try{const{getEstimatesWithDateFilter:Ve}=await Hs(async()=>{const{getEstimatesWithDateFilter:mt}=await Promise.resolve().then(()=>Vh);return{getEstimatesWithDateFilter:mt}},void 0);y(d,await Ve(o().sess,o().customer_id,o().id,l(j),l(D))),await ye(l(d)),l(d).length===0&&y(u,"   .")}catch(Ve){y(u,Ve.message||"    ."),y(d,[]),K={}}finally{y(c,!1)}}async function Ce(){y(u,null);const Ve=new Date,mt=new Date(Ve);mt.setMonth(mt.getMonth()-1),y(j,de(mt)),y(D,de(Ve)),y(ne,!0),y(c,!0);try{const{getEstimatesWithDateFilter:Rt}=await Hs(async()=>{const{getEstimatesWithDateFilter:qt}=await Promise.resolve().then(()=>Vh);return{getEstimatesWithDateFilter:qt}},void 0);y(d,await Rt(o().sess,o().customer_id,o().id,l(j),l(D))),await ye(l(d))}catch(Rt){y(u,Rt.message||"     ."),K={}}finally{y(c,!1)}}async function Ee(){y(c,!0),y(u,null);try{const Ve=new Date,mt=new Date(Ve);mt.setMonth(mt.getMonth()-1),y(j,de(mt)),y(D,de(Ve)),y(ne,!0);const{getEstimatesWithDateFilter:Rt}=await Hs(async()=>{const{getEstimatesWithDateFilter:qt}=await Promise.resolve().then(()=>Vh);return{getEstimatesWithDateFilter:qt}},void 0);y(d,await Rt(o().sess,o().customer_id,o().id,l(j),l(D))),await ye(l(d)),console.log("[loadEstimates]    -  :",l(d).length)}catch(Ve){console.error("[loadEstimates] :",Ve),y(u,Ve.message||"     ."),K={}}finally{y(c,!1)}}function Oe(Ve){l(N)&&Ve.status==="pending"?(q=Ve,y(L,""),y(V,""),y(xe,!0)):window.location.href=`?mode=register&estimateId=${Ve.id}`}async function je(){if(!q||!l(L).trim()){y(V," .");return}try{const{data:Ve,error:mt}=await vt.from("estimates").select("id").eq("id",q.id).eq("password",l(L)).single();if(mt||!Ve){y(V,"  .");return}y(xe,!1),A()(!0,q)}catch(Ve){y(V,"    ."),console.error("  :",Ve)}}function ke(){y(xe,!1),y(L,""),y(V,""),q=null}async function pe(Ve){if(!(!Ve||!Ve.id))try{y(se,!0),y(ge,Ve.id);const mt=await w5(Ve.id);let Rt=[...mt];const qt=await _5(Ve.id);if((qt==null?void 0:qt.length)>0){const Xt=mt.length>0?Math.max(...mt.map(wr=>wr.idx||0)):0,Wt=qt.map((wr,br)=>({...wr,idx:Xt+br+1,items:wr.items.map(vn=>({...vn,idx:Xt+br+1}))}));Rt=[...Rt,...Wt]}if(!Rt.some(Xt=>Xt.product&&Xt.product.mall_type==="godo5"&&Xt.product.mall_product_id)){alert("5    .");return}if(ie=await Uj(Rt),ie.success){const Xt=ie.submittedOrders.reduce((Wt,wr)=>Wt+wr.productIds.length,0);alert(` .  ${Xt}  .`)}else alert("  .   .")}catch(mt){console.error("    :",mt),alert("    : "+mt.message)}finally{y(se,!1)}}async function Re(Ve){if(Ve!=null&&Ve.id)try{y(ve,!0),y(ge,Ve.id);const mt=await I5(Ve.id);if(mt.success&&mt.newEstimateId){const Rt=await rd(mt.newEstimateId);Rt&&(alert(" ."),A()(!0,Rt))}else alert(mt.error||"    .")}catch(mt){console.error("   :",mt),alert("    .")}finally{y(ve,!1),y(ge,null)}}async function et(Ve){var Xt;if(!(Ve!=null&&Ve.estimateNo))return;const mt=document.getElementById("odiz-shop-id"),Rt=mt==null?void 0:mt.value;if(console.log("[handleLegacyReorder]  - shopIdElement:",mt,"shopId:",Rt),!Rt||Rt.trim()===""){console.error("[handleLegacyReorder] shopId . HTML   :",{elementExists:!!mt,value:Rt}),alert(`    .
(    )`);return}const qt=(Xt=document.getElementById("odiz-customer-id"))==null?void 0:Xt.value,Ht=qt&&qt.trim()!==""?qt:null;console.log("[handleLegacyReorder] shopId:",Rt,"customerId:",Ht);try{y(M,!0),y(k,Ve.estimateNo);const Wt=await k5(Ve,Rt,Ht);Wt.success?(alert(` .
 : ${Wt.newEstimateNo}`),y(re,"current"),await Ee()):alert(Wt.error||"    .")}catch(Wt){console.error("[handleLegacyReorder] :",Wt),alert("    .")}finally{y(M,!1),y(k,null)}}async function Je(){var qt,Ht,Xt;const Ve=(qt=document.getElementById("odiz-customer-id"))==null?void 0:qt.value,mt=(Ht=document.getElementById("odiz-customer-name"))==null?void 0:Ht.value,Rt=(Xt=document.getElementById("odiz-customer-phone"))==null?void 0:Xt.value;if(console.log("[ODIZ Debug]    "),console.log("[ODIZ Debug] customerId:",Ve),console.log("[ODIZ Debug] customerName:",mt),console.log("[ODIZ Debug] customerPhone:",Rt),!Ve&&!mt&&!Rt){y(_e,"    ."),alert("    .");return}y(Z,!0),y(_e,null);try{const Wt=`https://dantee7728.godomall.com/proxy/api_proxy.php?endpoint=estimate/get_data&memId=${encodeURIComponent(Ve)}&orderName=${encodeURIComponent(mt)}&orderPhone=${encodeURIComponent(Rt)}`;console.log("[ODIZ Debug] API URL:",Wt);const wr=await fetch(Wt);if(!wr.ok)throw new Error(`API  : ${wr.status}`);const br=await wr.json();console.log("[ODIZ Debug] API :",br),y(ue,Array.isArray(br)?br:br.data||br.estimates||[br]),z=!0}catch(Wt){console.error("Previous estimates API error:",Wt),y(_e,"     .")}finally{y(Z,!1)}}async function rt(Ve){y(re,Ve),Ve==="previous"&&!z&&await Je()}Zt(()=>(l(x),l(w)),()=>{l(x)&&clearTimeout(l(x)),y(x,setTimeout(()=>{y(b,l(w))},300))}),Zt(()=>(l(re),l(d),l(S),l(b)),()=>{y(i,(l(re),l(d).filter(Ve=>{if(l(S)&&Ve.status!==l(S))return!1;if(l(b)){const mt=l(b).toLowerCase().trim(),qt=Te(Ve.id).productNames.join(" ").toLowerCase();return String(Ve.estimate_no||"").toLowerCase().includes(mt)||String(Ve.name||"").toLowerCase().includes(mt)||String(Ve.organization_name||"").toLowerCase().includes(mt)||String(Ve.order_name||"").toLowerCase().includes(mt)||String(Ve.order_phone||"").includes(mt)||qt.includes(mt)}return!0})))}),Zt(()=>(l(Q),l(E)),()=>{l(Q)&&clearTimeout(l(Q)),y(Q,setTimeout(()=>{y(F,l(E))},300))}),Zt(()=>(l(ue),l(F)),()=>{y(a,l(ue).filter(Ve=>{var mt,Rt,qt,Ht,Xt,Wt;if(Ve.state!==3)return!1;if(l(F)){const wr=l(F).toLowerCase().trim();return String(Ve.estimateNo).includes(wr)||((mt=Ve.estimateNm)==null?void 0:mt.toLowerCase().includes(wr))||((Rt=Ve.ex1)==null?void 0:Rt.toLowerCase().includes(wr))||((qt=Ve.receiverName)==null?void 0:qt.toLowerCase().includes(wr))||((Ht=Ve.memNm)==null?void 0:Ht.toLowerCase().includes(wr))||((Xt=Ve.receiverCellPhone)==null?void 0:Xt.includes(wr))||((Wt=Ve.orderGoodsNm)==null?void 0:Wt.toLowerCase().includes(wr))}return!0}))}),Zt(()=>o(),()=>{y(N,!o().customer_id)}),Fo(),cn();var Ke=kR(),nt=lt(Ke),st=B(g(nt),2),pt=g(st),It=g(pt),Pt=g(It),St=g(Pt),bt=g(St);_p(bt,{size:18});var ft=B(St,2),jt=B(ft,2);{var Lt=Ve=>{var mt=Pj();mt.__click=[Lj,w,b];var Rt=g(mt);xA(Rt,{size:16}),U(Ve,mt)};be(jt,Ve=>{l(w)&&Ve(Lt)})}var Et=B(Pt,2),$e=g(Et),dt=g($e);vE(dt,{size:16});var at=B($e,2);De(()=>{l(S),Hu(()=>{})});var Vt=g(at);Vt.value=((Vt.__value="")==null,"");var Jt=B(Vt);Jt.value=(Jt.__value="pending")==null?"":"pending";var Kt=B(Jt);Kt.value=(Kt.__value="progress")==null?"":"progress";var Gt=B(Kt);Gt.value=(Gt.__value="completed")==null?"":"completed";var er=B(Gt);er.value=(er.__value="hold")==null?"":"hold";var Ct=B(er);Ct.value=(Ct.__value="canceled")==null?"":"canceled";var xt=B(Et,2);{var Dt=Ve=>{var mt=kj();mt.__click=[Tj,w,b,S],U(Ve,mt)};be(xt,Ve=>{(l(w)||l(S))&&Ve(Dt)})}var lr=B(It,2);{var ur=Ve=>{var mt=Oj(),Rt=g(mt),qt=g(Rt);De(()=>Qe(qt,l(i).length)),U(Ve,mt)};be(lr,Ve=>{!l(c)&&(l(w)||l(S))&&Ve(ur)})}var hr=B(st,2);{var fr=Ve=>{var mt=qj(),Rt=g(mt),qt=g(Rt),Ht=B(g(qt),2),Xt=g(Ht),Wt=g(Xt),wr=B(g(Wt),2),br=B(Wt,2),vn=B(g(br),2),Nt=B(br,2),yr=g(Nt);yr.__click=$;var $r=B(yr,2);{var kn=Yr=>{var $t=Dj();$t.__click=Ce,De(()=>$t.disabled=l(c)),U(Yr,$t)};be($r,Yr=>{l(ne)&&Yr(kn)})}var Do=B(Xt,2),Hr=g(Do);Hr.__click=[Nj,Be];var Hn=B(Hr,2);Hn.__click=[Mj,Be];var so=B(Hn,2);so.__click=[Hj,Be];var Mt=B(so,2);Mt.__click=[jj,Be];var Rs=B(Do,2);{var Wn=Yr=>{var $t=Rj(),Jr=g($t);De(()=>Qe(Jr,`*  ${l(j)||""} ~ ${l(D)||""} 
                 `)),U(Yr,$t)};be(Rs,Yr=>{l(ne)&&Yr(Wn)})}De(()=>{yr.disabled=l(c),Hr.disabled=l(c),Hn.disabled=l(c),so.disabled=l(c),Mt.disabled=l(c)}),Fr(wr,()=>l(j),Yr=>y(j,Yr)),Fr(vn,()=>l(D),Yr=>y(D,Yr)),U(Ve,mt)};be(hr,Ve=>{l(N)||Ve(fr)})}var xr=B(hr,2);{var un=Ve=>{var mt=Kj(),Rt=g(mt),qt=g(Rt),Ht=B(g(qt),2),Xt=g(Ht),Wt=g(Xt),wr=B(g(Wt),2),br=B(Wt,2),vn=B(g(br),2),Nt=B(br,2),yr=g(Nt);yr.__click=Se,Fr(wr,()=>l(I),$r=>y(I,$r)),Fr(vn,()=>l(P),$r=>y(P,$r)),U(Ve,mt)};be(xr,Ve=>{l(N)&&Ve(un)})}var wn=B(xr,2);{var Dr=Ve=>{var mt=Gj(),Rt=g(mt);Rt.__click=[$j,rt];var qt=B(Rt,2);qt.__click=[Vj,rt],De(()=>{Pr(Rt,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(re)==="current"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`),Pr(qt,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(re)==="previous"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`)}),U(Ve,mt)};be(wn,Ve=>{l(N)||Ve(Dr)})}var Cr=B(wn,2);{var Vr=Ve=>{var mt=Tt(),Rt=lt(mt);{var qt=Xt=>{var Wt=Wj();U(Xt,Wt)},Ht=Xt=>{var Wt=Tt(),wr=lt(Wt);{var br=Nt=>{var yr=Xj(),$r=g(yr),kn=g($r);De(()=>Qe(kn,l(u))),U(Nt,yr)},vn=Nt=>{var yr=Tt(),$r=lt(yr);{var kn=Hr=>{var Hn=Yj(),so=g(Hn);{var Mt=Wn=>{var Yr=xn("    .");U(Wn,Yr)},Rs=Wn=>{var Yr=Tt(),$t=lt(Yr);{var Jr=fo=>{var Uo=xn("   .    .");U(fo,Uo)},Sn=fo=>{var Uo=xn("  .");U(fo,Uo)};be($t,fo=>{l(N)?fo(Jr):fo(Sn,!1)},!0)}U(Wn,Yr)};be(so,Wn=>{l(N)&&l(ee)?Wn(Mt):Wn(Rs,!1)})}U(Hr,Hn)},Do=Hr=>{var Hn=hR();sr(Hn,5,()=>l(i),so=>so.id??so.created_at,(so,Mt)=>{var Rs=uR();const Wn=At(()=>Te(l(Mt).id)),Yr=At(()=>l(Mt).design_confirm==="confirming"||l(Mt).design_confirm==="completed");var $t=g(Rs),Jr=g($t),Sn=B(g(Jr)),fo=B($t,2),Uo=g(fo),ai=g(Uo),Bi=g(ai),zi=g(Bi);{var Ai=kr=>{var ln=Jj(),yn=lt(ln);De(()=>{cr(yn,"src",l(Wn).thumbnail),cr(yn,"alt",(l(Mt).name||"")+"  ")}),it("error",yn,No=>{No.currentTarget.style.display="none";const qn=No.currentTarget.nextElementSibling;qn&&(qn.style.display="flex")}),T_(yn),U(kr,ln)},qs=kr=>{var ln=Zj();U(kr,ln)};be(zi,kr=>{l(Wn).thumbnail?kr(Ai):kr(qs,!1)})}var ji=B(zi,2);{var jn=kr=>{var ln=eR(),yn=g(ln);De(()=>Qe(yn,`${l(Wn).totalQuantity??""}`)),U(kr,ln)};be(ji,kr=>{l(Wn).totalQuantity>0&&kr(jn)})}var Vo=B(Bi,2),Xn=g(Vo),Zr=g(Xn),fa=B(Xn,2);{var Ga=kr=>{var ln=tR(),yn=g(ln),No=B(yn);{var qn=Mo=>{var Ao=xn();De(()=>Qe(Ao,` ${l(Wn).productNames.length-1}`)),U(Mo,Ao)};be(No,Mo=>{l(Wn).productNames.length>1&&Mo(qn)})}De(()=>Qe(yn,l(Wn).productNames[0])),U(kr,ln)};be(fa,kr=>{l(Wn).productNames.length>0&&kr(Ga)})}var pa=B(fa,2),Ks=B(g(pa)),$s=B(ai,2),IA=g($s);{var li=kr=>{var ln=rR(),yn=B(g(ln));De(()=>Qe(yn,` ${l(Mt).estimate_no??""}`)),U(kr,ln)};be(IA,kr=>{l(Mt).estimate_no&&kr(li)})}var vs=B(IA,2);{var Wa=kr=>{var ln=nR(),yn=B(g(ln));De(No=>Qe(yn,`  ${No??""}`),[()=>R(l(Mt).pref_delivery_date)],At),U(kr,ln)};be(vs,kr=>{l(Mt).pref_delivery_date&&kr(Wa)})}var di=B($s,2),UA=g(di),Ri=g(UA),QA=g(Ri);Bw(QA,{size:18});var Xa=B(Ri,2),Ya=B(g(Xa),2),TA=g(Ya),Ci=B(UA,2),ga=g(Ci),va=g(ga);Wl(va,{size:18});var Ja=B(ga,2),LA=B(g(Ja),2),ma=g(LA),qi=B(Ci,2),wa=g(qi),Si=g(wa);T0(Si,{size:18});var ba=B(wa,2),_=B(g(ba),2),X=g(_),Le=B(di,2),qe=g(Le),ot=B(g(qe),2),Bt=g(ot),kt=B(qe,2),rr=B(g(kt),2),gr=g(rr),Tr=B(kt,2),Lr=B(g(Tr),2),qr=g(Lr),Ln=B(Tr,2),Rn=B(g(Ln),2),to=g(Rn),Qo=B(Uo,2),io=g(Qo),Go=B(g(io),2);Go.__click=[oR,Yr,J,Mt];var os=B(g(Go)),ms=B(io,2),ya=g(ms);ya.__click=[sR,Oe,Mt];var _a=g(ya),Za=g(_a);{var En=kr=>{var ln=iR();U(kr,ln)},ao=kr=>{var ln=aR();U(kr,ln)};be(Za,kr=>{l(Mt).status==="pending"?kr(En):kr(ao,!1)})}var Wo=B(_a),ss=B(ya,2);{var mo=kr=>{var ln=Tt(),yn=lt(ln);{var No=Mo=>{var Ao=lR();Ao.__click=[AR,Re,Mt];var ci=g(Ao);zw(ci,{class:"odz-w-4 odz-h-4 odz-mr-1.5"});var Xo=B(ci);De(()=>{Ao.disabled=l(ve)||l(ge)===l(Mt).id,Qe(Xo,` ${(l(ve)&&l(ge)===l(Mt).id?"...":"")??""}`)}),U(Mo,Ao)},qn=Mo=>{var Ao=cR();Ao.__click=[dR,pe,Mt];var ci=B(g(Ao));De(()=>{Ao.disabled=l(se)||l(ge)===l(Mt).id,Qe(ci,` ${(l(se)&&l(ge)===l(Mt).id?"...":"")??""}`)}),U(Mo,Ao)};be(yn,Mo=>{l(Mt).is_payment?Mo(No):Mo(qn,!1)})}U(kr,ln)};be(ss,kr=>{l(Mt).status==="completed"&&kr(mo)})}De((kr,ln,yn,No,qn,Mo,Ao,ci,Xo)=>{Pr(Jr,`${kr??""} svelte-ryvuky`),Qe(Sn,` ${ln??""}`),Qe(Zr,l(Mt).name||"  "),Qe(Ks,` ${yn??""}`),Qe(TA,l(Mt).organization_name||"-"),Qe(ma,l(Mt).order_name||"-"),Qe(X,l(Mt).order_phone||"-"),Qe(Bt,No),Qe(gr,qn),Qe(qr,Mo),Qe(to,Ao),Pr(Go,`${ci??""} svelte-ryvuky`),Go.disabled=!l(Yr),Qe(os,` ${Xo??""}`),Qe(Wo,` ${(l(Mt).status==="pending"?"":"")??""}`)},[()=>`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-backdrop-blur-sm ${Me(l(Mt).status)}`,()=>Fe(l(Mt).status),()=>R(l(Mt).created_at),()=>l(Mt).product_amount!==null&&l(Mt).product_amount!==void 0?`${Er(l(Mt).product_amount)}`:"-",()=>l(Mt).print_amount!==null&&l(Mt).print_amount!==void 0?`${Er(l(Mt).print_amount)}`:"-",()=>l(Mt).addon_amount!==null&&l(Mt).addon_amount!==void 0?`${Er(l(Mt).addon_amount)}`:"-",()=>l(Mt).total_amount!==null&&l(Mt).total_amount!==void 0?`${Er(l(Mt).total_amount)}`:"-",()=>`odz-inline-flex odz-items-center odz-justify-center odz-gap-2 odz-px-4 odz-py-2.5 odz-rounded-lg odz-text-sm odz-font-semibold odz-transition-all odz-duration-200 ${fe(l(Mt).design_confirm)} ${l(Yr)?"hover:odz-shadow-md hover:odz-scale-105":"odz-opacity-60 odz-cursor-not-allowed"}`,()=>Ne(l(Mt).design_confirm)],At),U(so,Rs)}),U(Hr,Hn)};be($r,Hr=>{l(d).length===0?Hr(kn):Hr(Do,!1)},!0)}U(Nt,yr)};be(wr,Nt=>{l(u)?Nt(br):Nt(vn,!1)},!0)}U(Xt,Wt)};be(Rt,Xt=>{l(c)?Xt(qt):Xt(Ht,!1)})}U(Ve,mt)};be(Cr,Ve=>{(l(re)==="current"||l(N))&&Ve(Vr)})}var jr=B(Cr,2);{var Ir=Ve=>{var mt=Tt(),Rt=lt(mt);{var qt=Xt=>{var Wt=fR();U(Xt,Wt)},Ht=Xt=>{var Wt=Tt(),wr=lt(Wt);{var br=Nt=>{var yr=pR(),$r=g(yr),kn=g($r);De(()=>Qe(kn,l(_e))),U(Nt,yr)},vn=Nt=>{var yr=Tt(),$r=lt(yr);{var kn=Hr=>{var Hn=gR();U(Hr,Hn)},Do=Hr=>{var Hn=QR(),so=lt(Hn),Mt=g(so),Rs=g(Mt),Wn=g(Rs),Yr=g(Wn),$t=g(Yr);_p($t,{size:18});var Jr=B(Yr,2),Sn=B(Jr,2);{var fo=jn=>{var Vo=mR();Vo.__click=[vR,E,F];var Xn=g(Vo);xA(Xn,{size:16}),U(jn,Vo)};be(Sn,jn=>{l(E)&&jn(fo)})}var Uo=B(so,2),ai=g(Uo),Bi=B(g(ai),2),zi=g(Bi),Ai=B(Uo,2);{var qs=jn=>{var Vo=wR();U(jn,Vo)},ji=jn=>{var Vo=UR();sr(Vo,5,()=>l(a),vr,(Xn,Zr)=>{var fa=IR(),Ga=g(fa),pa=g(Ga),Ks=g(pa),$s=B(pa,2),IA=g($s),li=B(Ga,2),vs=g(li),Wa=g(vs),di=B(vs,2),UA=g(di),Ri=B(di,2),QA=g(Ri),Xa=g(QA),Ya=B(QA,2);{var TA=En=>{var ao=bR(),Wo=B(lt(ao),2),ss=g(Wo);De(()=>Qe(ss,`: ${l(Zr).goodsCnt??""}`)),U(En,ao)};be(Ya,En=>{l(Zr).goodsCnt&&l(Zr).goodsCnt!=="0"&&En(TA)})}var Ci=B(li,2);{var ga=En=>{var ao=zR(),Wo=g(ao),ss=g(Wo);$u(ss,{size:14});var mo=B(ss),kr=B(Wo,2);sr(kr,5,()=>l(Zr).estimateGoods,vr,(ln,yn)=>{var No=BR();const qn=At(()=>Ae(l(yn).selectOptions)),Mo=At(()=>te(l(yn)));var Ao=g(No);{var ci=Is=>{var As=yR();De(()=>{cr(As,"src",l(Mo)),cr(As,"alt",l(yn).goodsNm)}),it("error",As,ui=>ui.currentTarget.style.display="none"),U(Is,As)},Xo=Is=>{var As=_R(),ui=g(As);$u(ui,{size:20,class:"odz-text-gray-400"}),U(Is,As)};be(Ao,Is=>{l(Mo)?Is(ci):Is(Xo,!1)})}var eA=B(Ao,2),xl=g(eA),gd=g(xl),xa=B(xl,2),tA=g(xa),is=B(eA,2);is.__click=[xR,he,yn];var as=g(is);i5(as,{size:14,class:"odz-mr-1"}),De(()=>{Qe(gd,l(yn).goodsNm),Qe(tA,`${l(qn).summary??""}  ${l(qn).totalQty??""}`)}),U(ln,No)}),De(()=>Qe(mo,`  (${l(Zr).estimateGoods.length??""})`)),U(En,ao)};be(Ci,En=>{l(Zr).estimateGoods&&l(Zr).estimateGoods.length>0&&En(ga)})}var va=B(Ci,2),Ja=g(va),LA=g(Ja),ma=g(LA);Bw(ma,{size:18});var qi=B(LA,2),wa=B(g(qi),2),Si=g(wa),ba=B(Ja,2),_=g(ba),X=g(_);Wl(X,{size:18});var Le=B(_,2),qe=B(g(Le),2),ot=g(qe),Bt=B(ba,2),kt=g(Bt),rr=g(kt);T0(rr,{size:18});var gr=B(kt,2),Tr=B(g(gr),2),Lr=g(Tr),qr=B(va,2),Ln=g(qr),Rn=g(Ln);{var to=En=>{var ao=CR(),Wo=g(ao);De(ss=>Qe(Wo,`: ${ss??""}`),[()=>W(l(Zr).eventDate)],At),U(En,ao)};be(Rn,En=>{l(Zr).eventDate&&l(Zr).eventDate!=="0000-00-00 00:00:00"&&En(to)})}var Qo=B(Ln,2),io=B(g(Qo),2),Go=g(io),os=B(qr,2),ms=g(os);ms.__click=[SR,et,Zr];var ya=g(ms);{var _a=En=>{var ao=ER();U(En,ao)},Za=En=>{var ao=FR(),Wo=lt(ao);zw(Wo,{size:14}),U(En,ao)};be(ya,En=>{l(M)&&l(k)===l(Zr).estimateNo?En(_a):En(Za,!1)})}De((En,ao,Wo,ss)=>{Pr(pa,En),Qe(Ks,ao),Qe(IA,Wo),Qe(Wa,l(Zr).estimateNm||` #${l(Zr).estimateNo}`),Qe(UA,l(Zr).orderGoodsNm||"-"),Qe(Xa,`: ${l(Zr).estimateNo??""}`),Qe(Si,l(Zr).ex1||"-"),Qe(ot,l(Zr).receiverName||l(Zr).memNm||"-"),Qe(Lr,l(Zr).receiverCellPhone||"-"),Qe(Go,ss),ms.disabled=l(M)&&l(k)===l(Zr).estimateNo},[()=>`odz-badge ${He(l(Zr).state)}`,()=>Pe(l(Zr).state),()=>W(l(Zr).regDt),()=>H(l(Zr).totalPrice)],At),U(Xn,fa)}),U(jn,Vo)};be(Ai,jn=>{l(a).length===0?jn(qs):jn(ji,!1)})}De(()=>Qe(zi,`${l(a).length??""}`)),it("focus",Jr,jn=>jn.currentTarget.removeAttribute("readonly")),Fr(Jr,()=>l(E),jn=>y(E,jn)),U(Hr,Hn)};be($r,Hr=>{l(ue).length===0?Hr(kn):Hr(Do,!1)},!0)}U(Nt,yr)};be(wr,Nt=>{l(_e)?Nt(br):Nt(vn,!1)},!0)}U(Xt,Wt)};be(Rt,Xt=>{l(Z)?Xt(qt):Xt(Ht,!1)})}U(Ve,mt)};be(jr,Ve=>{!l(N)&&l(re)==="previous"&&Ve(Ir)})}var Br=B(nt,2);{var Gr=Ve=>{var mt=Tt(),Rt=lt(mt);$4(Rt,()=>l(v),qt=>{i7(qt,{get estimateId(){return l(v)},get isOpen(){return l(p)},set isOpen(Ht){y(p,Ht)},$$legacy:!0})}),U(Ve,mt)};be(Br,Ve=>{l(v)&&Ve(Gr)})}var Xr=B(Br,2),bn=g(Xr),Wr=B(g(bn),4),mr=B(g(Wr),2);mr.__keydown=[TR,je];var Tn=B(mr,2);{var Oo=Ve=>{var mt=LR(),Rt=g(mt),qt=g(Rt);De(()=>Qe(qt,l(V))),U(Ve,mt)};be(Tn,Ve=>{l(V)&&Ve(Oo)})}var ho=B(Wr,2),Io=g(ho);Io.__click=ke;var gs=B(Io,2);gs.__click=je;var eo=B(bn,2);eo.__click=ke;var $o=B(Xr,2);{var Mn=Ve=>{var mt=PR();U(Ve,mt)};be($o,Ve=>{l(se)&&Ve(Mn)})}De(()=>{Pr(Xr,`odz-modal ${(l(xe)?"odz-modal-open":"")??""}`),Pr(mr,`odz-input odz-input-bordered odz-w-full ${(l(V)?"odz-input-error":"")??""}`)}),it("focus",ft,Ve=>Ve.currentTarget.removeAttribute("readonly")),Fr(ft,()=>l(w),Ve=>y(w,Ve)),Ru(at,()=>l(S),Ve=>y(S,Ve)),Fr(mr,()=>l(L),Ve=>y(L,Ve)),U(n,Ke),An(),r()}F_(["click","keydown"]);var DR=G('<div class="ed-text-sm odz-text-gray-600 ed-leading-relaxed svelte-1sldu2b"> </div>'),NR=G('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-justify-between odz-items-start odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="ed-text-base odz-font-semibold odz-text-gray-800 odz-mb-1 svelte-1sldu2b"> </div> <!></div> <div class="ed-text-lg odz-font-bold odz-text-gray-900 odz-ml-4 svelte-1sldu2b"> </div></div></div>'),MR=G('<div class="odz-bg-white odz-border odz-border-gray-300 odz-rounded odz-px-2 odz-py-1 ed-text-xs odz-text-gray-700 svelte-1sldu2b"> </div>'),HR=G('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-px-4 odz-py-3 odz-flex-shrink-0"><div class="ed-text-sm odz-font-semibold odz-text-gray-800 odz-mb-2 svelte-1sldu2b"> </div> <div class="odz-flex odz-flex-wrap odz-gap-1"></div></div>'),jR=G('<div class="ed-text-xs odz-text-blue-600 odz-mt-1 svelte-1sldu2b"><!></div>'),RR=G('<div class="odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-md odz-p-3 odz-mb-3"><div class="odz-flex odz-justify-between odz-items-center odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="odz-font-medium odz-text-blue-700">  </span></div> <div class="odz-text-right"><div class="ed-text-xs odz-text-gray-500 odz-line-through svelte-1sldu2b"> </div> <div class="ed-text-sm odz-font-semibold odz-text-red-600 svelte-1sldu2b"> </div></div></div> <!></div>'),qR=G('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-3 odz-mb-4"></div> <div class="ed-text-sm odz-text-gray-600 odz-mb-2 odz-text-right svelte-1sldu2b"> </div> <!> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),KR=G('<span class="odz-w-6 odz-h-6 odz-rounded-full odz-border-2 odz-border-white odz-shadow-sm"></span>'),$R=G('<div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg> <span class="ed-text-sm odz-font-medium odz-text-gray-700 svelte-1sldu2b"> </span></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-gap-1"></div> <div class="ed-text-sm odz-text-gray-800 svelte-1sldu2b"> </div></div></div>'),VR=G('<div class="odz-bg-white odz-border odz-border-gray-100 odz-rounded-xl odz-p-5 odz-shadow-sm odz-hover:shadow-md odz-transition-all odz-duration-200"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-blue-100 odz-text-blue-600 odz-rounded-full odz-flex odz-items-center odz-justify-center ed-text-sm odz-font-semibold svelte-1sldu2b"></div> <span class="odz-font-medium odz-text-gray-900"> </span></div> <div class="odz-text-right"><div class="ed-text-lg odz-font-bold odz-text-gray-900 svelte-1sldu2b"> </div></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"><!> <div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="ed-text-sm odz-font-medium odz-text-gray-700 svelte-1sldu2b"> </span></div> <div class="ed-text-sm odz-text-gray-800 ed-leading-relaxed svelte-1sldu2b"> </div></div></div></div>'),GR=G('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-6 svelte-1sldu2b"> </h3> <div class="odz-space-y-4"></div></div>'),WR=G('<span class="odz-text-gray-600"> </span>'),XR=G('<div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-font-medium odz-text-gray-800 odz-mb-1"> <!></div> <div class="ed-text-sm odz-text-gray-600 svelte-1sldu2b"> </div></div> <div class="odz-font-semibold odz-text-gray-900"> </div></div>'),YR=G('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-flex-col odz-gap-3 odz-mb-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),JR=G("<!> <!> <!>",1),ZR=G('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-p-4 odz-animate-in odz-fade-in odz-duration-300 ed-root svelte-1sldu2b"><div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-60 odz-backdrop-blur-sm odz-cursor-pointer"></div> <div class="odz-relative odz-bg-white odz-rounded-xl odz-shadow-2xl odz-max-w-2xl odz-max-h-[90vh] odz-w-full odz-overflow-hidden odz-flex odz-flex-col odz-animate-in odz-zoom-in-95 odz-slide-in-from-bottom-4 odz-duration-300 odz-cursor-default"><div class="odz-flex odz-justify-between odz-items-center odz-p-6 odz-border-b odz-border-gray-200 odz-bg-gradient-to-r odz-from-slate-50 odz-to-slate-100 odz-sticky odz-top-0 odz-z-10"><h2 class="ed-text-2xl odz-font-bold odz-text-gray-900 svelte-1sldu2b">  </h2> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-hover:odz-bg-gray-100 odz-transition-all odz-duration-200"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-6"><!> <div class="odz-border-t-2 odz-border-gray-200 odz-pt-6 odz-mt-6"><div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-900 odz-rounded-lg odz-p-4"><span class="ed-text-lg odz-font-semibold odz-text-white svelte-1sldu2b"> </span> <span class="ed-text-2xl odz-font-bold odz-text-white svelte-1sldu2b"> </span></div></div></div></div></div>');function e9(n,e){an(e,!1);let t=gt(e,"estimateDetails",8),r=gt(e,"productAmount",8);gt(e,"printAmount",8);let o=gt(e,"addonAmount",8),s=gt(e,"totalAmount",8),i=gt(e,"printInfoList",8),a=gt(e,"addonItems",8),A=gt(e,"addCostItems",8,null),d=gt(e,"isAddCost",8,!1),c=gt(e,"addonProductsMap",24,()=>({}));const u=dg();let h=ze([]);function p(){if(!t()||!t().items||t().items.length===0)return;const ge=new Map;t().items.forEach(ue=>{const _e=(ue.variant||{}).title||ue.variant_title||" ",z=_e.match(/(.+)\s*-\s*(.+)/),E=z?z[1]:_e,F=z?z[2]:"";ge.has(E)||ge.set(E,{name:E,sizes:new Map});const Q=ge.get(E);Q.sizes.has(F)||Q.sizes.set(F,{size:F,quantity:0});const M=Q.sizes.get(F);M.quantity+=ue.quantity||1}),y(h,Array.from(ge.values()).map(ue=>({name:ue.name,sizes:Array.from(ue.sizes.values())}))),y(h,l(h).filter(ue=>ue.name!==""));const re=new Set;l(h).forEach(ue=>{ue.sizes.forEach(Z=>{re.add(Z.size)})}),Array.from(re)}function v(ge){return`background-color: ${ge.hex};`}function w(ge,re){const ue=[];if(ge&&ue.push(`: ${ge}`),re&&re.length>0){const Z=re.map(_e=>_e.name).join(" > ");ue.push(`: ${Z}`)}return ue.length>0?ue.join(" | "):" "}function b(){return A()&&A().amount||0}function x(){u("close")}Zt(()=>no(t()),()=>{t()&&p()}),Fo(),cn();var S=ZR(),I=g(S),P=B(I,2),N=g(P),ee=B(g(N),2),j=B(N,2),D=g(j);{var ne=ge=>{var re=NR(),ue=B(g(re),2),Z=g(ue),_e=g(Z),z=g(_e),E=B(_e,2);{var F=k=>{var O=DR(),K=g(O);De(()=>Qe(K,A().description)),U(k,O)};be(E,k=>{A().description&&k(F)})}var Q=B(Z,2),M=g(Q);De(k=>{Qe(z,A().name),Qe(M,`${k??""}`)},[()=>A().amount.toLocaleString()],At),U(ge,re)},xe=ge=>{var re=Tt(),ue=lt(re);{var Z=_e=>{var z=JR(),E=lt(z);{var F=K=>{var R=qR(),de=B(g(R),2);sr(de,5,()=>l(h),vr,(he,we)=>{var ye=HR(),Ie=g(ye),le=g(Ie),Te=B(Ie,2);sr(Te,5,()=>l(we).sizes,vr,(Fe,Me)=>{var Ne=MR(),fe=g(Ne);De(()=>Qe(fe,`${l(Me).size??""}: ${l(Me).quantity??""}`)),U(Fe,Ne)}),De(()=>Qe(le,l(we).name)),U(he,ye)});var Be=B(de,2),Pe=g(Be),He=B(Be,2);{var W=he=>{var we=RR();const ye=At(()=>t().items.reduce(($,Ce)=>$+(Ce.discount_amount||0)*(Ce.quantity||0),0)),Ie=At(()=>t().items.find($=>$.discount_amount&&$.discount_amount>0));var le=g(we),Te=B(g(le),2),Fe=g(Te),Me=g(Fe),Ne=B(Fe,2),fe=g(Ne),J=B(le,2);{var Se=$=>{var Ce=jR(),Ee=g(Ce);{var Oe=ke=>{var pe=xn();De(Re=>Qe(pe,`${l(Ie).discount_value??""}%  ( ${Re??""})`),[()=>(l(Ie).discount_amount||0).toLocaleString()],At),U(ke,pe)},je=ke=>{var pe=xn();De(Re=>Qe(pe,` ${Re??""} `),[()=>l(Ie).discount_value.toLocaleString()],At),U(ke,pe)};be(Ee,ke=>{l(Ie).discount_type==="percentage"?ke(Oe):ke(je,!1)})}U($,Ce)};be(J,$=>{l(Ie)&&l(Ie).discount_type&&l(Ie).discount_value&&$(Se)})}De(($,Ce)=>{Qe(Me,`${$??""}`),Qe(fe,`-${Ce??""}`)},[()=>t().items.reduce(($,Ce)=>$+(Ce.original_price||Ce.price||0)*(Ce.quantity||0),0).toLocaleString(),()=>l(ye).toLocaleString()],At),U(he,we)};be(He,he=>{t().items&&t().items.some(we=>we.discount_amount&&we.discount_amount>0)&&he(W)})}var H=B(He,2),te=B(g(H),2),Ae=g(te);De((he,we)=>{Qe(Pe,` : ${he??""}`),Qe(Ae,`${we??""}`)},[()=>l(h).reduce((he,we)=>he+we.sizes.reduce((ye,Ie)=>ye+Ie.quantity,0),0),()=>r().toLocaleString()],At),U(K,R)};be(E,K=>{l(h).length>0&&K(F)})}var Q=B(E,2);{var M=K=>{var R=GR(),de=B(g(R),2);sr(de,5,i,vr,(Be,Pe,He)=>{var W=VR(),H=g(W),te=g(H),Ae=g(te);Ae.textContent=He+1;var he=B(te,2),we=g(he),ye=g(we),Ie=B(H,2),le=g(Ie);{var Te=fe=>{var J=$R(),Se=B(g(J),2),$=g(Se);sr($,5,()=>l(Pe).colorInfo,vr,(Oe,je)=>{var ke=KR();De(pe=>{cr(ke,"style",pe),cr(ke,"title",l(je).name)},[()=>v(l(je))],At),U(Oe,ke)});var Ce=B($,2),Ee=g(Ce);De(Oe=>Qe(Ee,Oe),[()=>l(Pe).colorInfo.map(Oe=>Oe.name).join(", ")],At),U(fe,J)};be(le,fe=>{l(Pe).colorInfo&&l(Pe).colorInfo.length>0&&fe(Te)})}var Fe=B(le,2),Me=B(g(Fe),2),Ne=g(Me);De((fe,J)=>{Qe(ye,`${fe??""}`),Qe(Ne,J)},[()=>l(Pe).price.toLocaleString(),()=>w(l(Pe).printAreaTitle,l(Pe).parentTemplates)],At),U(Be,W)}),U(K,R)};be(Q,K=>{i().length>0&&K(M)})}var k=B(Q,2);{var O=K=>{var R=YR(),de=B(g(R),2);sr(de,5,a,vr,(W,H)=>{var te=XR();const Ae=At(()=>`${l(H).selected_product_id}_${l(H).selected_variant_id}`),he=At(()=>c()[l(Ae)]);var we=g(te),ye=g(we),Ie=g(ye),le=B(Ie);{var Te=J=>{var Se=WR(),$=g(Se);De(()=>Qe($,`- ${l(he).variantTitle??""}`)),U(J,Se)};be(le,J=>{var Se;(Se=l(he))!=null&&Se.variantTitle&&J(Te)})}var Fe=B(ye,2),Me=g(Fe),Ne=B(we,2),fe=g(Ne);De(J=>{var Se;Qe(Ie,`${((Se=l(he))==null?void 0:Se.productTitle)||""} `),Qe(Me,`${l(H).quantity??""}`),Qe(fe,`${J??""}`)},[()=>(l(H).price*l(H).quantity).toLocaleString()],At),U(W,te)});var Be=B(de,2),Pe=B(g(Be),2),He=g(Pe);De(W=>Qe(He,`${W??""}`),[()=>o().toLocaleString()],At),U(K,R)};be(k,K=>{a().length>0&&K(O)})}U(_e,z)};be(ue,_e=>{t()&&t().estimate&&_e(Z)},!0)}U(ge,re)};be(D,ge=>{d()&&A()?ge(ne):ge(xe,!1)})}var L=B(D,2),q=g(L),V=g(q),se=g(V),ve=B(V,2),ie=g(ve);De(ge=>{Qe(se,d()?" ":" "),Qe(ie,`${ge??""}`)},[()=>d()?b().toLocaleString():s().toLocaleString()],At),it("click",I,x),it("click",ee,x),U(n,S),An()}var t9=G('<p class="odiz-loading"> ...</p>'),r9=G('<p class="odiz-error"> </p>'),n9=G('<div class="odiz-addcost-description"> </div>'),o9=G('<div class="odiz-addcost-detailed"><div class="odiz-addcost-header"><h3 class="odiz-addcost-title"> </h3></div> <div class="odiz-addcost-items"><div class="odiz-addcost-item"><div class="odiz-addcost-info"><div class="odiz-addcost-name"> </div> <!></div> <div class="odiz-addcost-amount"> </div></div></div> <div class="odiz-divider"></div> <div class="odiz-total-price"><div class="odiz-price-label"> </div> <div class="odiz-price-value odiz-total-value"> </div></div></div>'),s9=G('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"><!></span></div>'),i9=G('<span class="odz-color-dot-compact"></span>'),a9=G('<span class="odz-color-count"> </span>'),A9=G('<span class="odz-color-dots-compact"><!> <!></span>'),l9=G('<span class="odz-print-area-compact"> </span>'),d9=G("<!> <!>",1),c9=G('<span class="odz-print-count"> </span>'),u9=G('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value odz-print-inline"><!> <!></span></div>'),h9=G('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"> </span></div>'),f9=G('<button class="odz-detail-btn odz-estimate-mgmt-btn" type="button"> </button>'),p9=G('<div class="odiz-estimate-detailed"><div class="odz-estimate-summary"><div class="odz-summary-content"><!> <!> <!></div> <div class="odz-summary-actions"><button class="odz-detail-btn" type="button">  </button> <!></div></div> <div class="odz-price-summary"><div class="odz-price-label"></div> <div class="odz-price-value"><span class="odz-text-lg odz-font-bold"> </span></div></div></div>'),g9=G('<p class="odiz-empty">  .</p>'),v9=G('<div class="odiz-estimate-preview odz-estimate-preview-root"><!></div> <!>',1);function m9(n,e){an(e,!1);let t=gt(e,"uuid",8),r=gt(e,"idx",8),o=gt(e,"appType",8),s=gt(e,"isAddCost",8),i=ze(!0),a=ze(null),A=ze(null),d=ze(0),c=ze(0),u=ze(0),h=ze(0),p=ze([]),v=ze([]),w=ze(null),b=ze({}),x=ze([]),S=ze(!1);async function I(){var re,ue;y(b,{});for(const Z of l(v)){const _e=`${Z.selected_product_id}_${Z.selected_variant_id}`;if(!l(b)[_e])try{if(Z.selected_variant_id){const z=await hl(Z.selected_variant_id);if(z){const{data:E}=await vt.from("products").select("id, title").eq("id",Z.selected_product_id).single();zr(b,l(b)[_e]={productTitle:(E==null?void 0:E.title)||"",variantTitle:z.title||"",price:((ue=(re=z.prices)==null?void 0:re[0])==null?void 0:ue.amount)||0})}}else{const{data:z}=await vt.from("products").select("id, title").eq("id",Z.selected_product_id).single();zr(b,l(b)[_e]={productTitle:(z==null?void 0:z.title)||"",variantTitle:null,price:Z.price||0})}}catch{zr(b,l(b)[_e]={productTitle:"",variantTitle:null,price:Z.price||0})}}}async function P(){try{y(i,!0),y(a,null),y(A,await p1(t()));const re=await hg(t());if(s()&&(y(w,await b5(r())),console.log("addCostItems",l(w))),l(A)){zr(A,l(A).items=l(A).items.filter(Z=>{var _e;return((_e=Z.idx)==null?void 0:_e.toString())===r()}));const ue=l(A).prints.filter(Z=>{var _e;return((_e=Z.idx)==null?void 0:_e.toString())===r()});zr(A,l(A).prints=l(A).prints.filter(Z=>{var _e;return((_e=Z.idx)==null?void 0:_e.toString())===r()})),y(v,re.filter(Z=>{var _e;return((_e=Z.idx)==null?void 0:_e.toString())===r()})),await I(),ee(),N(),y(p,[]);for(const Z of ue){const _e={id:Z.id||0,price:Z.price||0,templateId:Z.template_id,objectId:Z.object_id,colorInfo:[]};try{if(Z.template_id&&(console.log("template_id:",Z.template_id),_e.parentTemplates=await uh(Z.template_id),console.log("template_id   :",_e.parentTemplates)),Z.object_id){console.log("object_id:",Z.object_id);const z=await y1(Z.object_id);z&&(_e.printAreaTitle=z.title,console.log(" :",z.title))}}catch(z){console.error("    :",z)}if(Z.colors)try{let z=null;if(typeof Z.colors=="string"?z=JSON.parse(Z.colors):z=Z.colors,Array.isArray(z)){let E=[];if(z.length>0&&Array.isArray(z[0]))for(const F of z)Array.isArray(F)&&(E=E.concat(F));else E=z;E.length>0&&(typeof E[0]=="object"&&E[0]!==null?_e.colorInfo=E:_e.colorInfo=E.map(F=>({hex:F,name:F})))}console.log("  :",_e.colorInfo)}catch(z){console.error("    :",z)}l(p).push(_e)}console.log("   :",l(p))}}catch(re){console.error("    :",re),y(a,"     .")}finally{y(i,!1)}}function N(){if(!l(A)||!l(A).items||l(A).items.length===0)return;const re=new Map;l(A).items.forEach(Z=>{const z=(Z.variant||{}).title||Z.variant_title||" ",E=z.match(/(.+)\s*-\s*(.+)/),F=E?E[1]:z,Q=E?E[2]:"";re.has(F)||re.set(F,{name:F,sizes:new Map});const M=re.get(F);M.sizes.has(Q)||M.sizes.set(Q,{size:Q,quantity:0});const k=M.sizes.get(Q);k.quantity+=Z.quantity||1}),y(x,Array.from(re.values()).map(Z=>({name:Z.name,sizes:Array.from(Z.sizes.values())}))),y(x,l(x).filter(Z=>Z.name!==""));const ue=new Set;l(x).forEach(Z=>{Z.sizes.forEach(_e=>{ue.add(_e.size)})}),Array.from(ue)}function ee(){if(l(A)){y(d,0),y(c,0),y(u,0);for(const re of l(A).items)re.quantity&&re.price&&y(d,l(d)+re.quantity*re.price);for(const re of l(A).prints)re.price&&y(c,l(c)+re.price);for(const re of l(v))re.price&&re.quantity&&y(u,l(u)+re.price*re.quantity);y(h,l(d)+l(c)+l(u))}}function j(){return l(w)&&l(w).amount||0}Zn(()=>{P()});function D(){window.open(`https://odiz.vercel.app/dashboard/estimates/${t()}`,"_blank")}function ne(){y(S,!0)}function xe(){y(S,!1)}cn();var L=v9(),q=lt(L),V=g(q);{var se=re=>{var ue=t9();U(re,ue)},ve=re=>{var ue=Tt(),Z=lt(ue);{var _e=E=>{var F=r9(),Q=g(F);De(()=>Qe(Q,l(a))),U(E,F)},z=E=>{var F=Tt(),Q=lt(F);{var M=O=>{var K=o9(),R=B(g(K),2),de=g(R),Be=g(de),Pe=g(Be),He=g(Pe),W=B(Pe,2);{var H=Ie=>{var le=n9(),Te=g(le);De(()=>Qe(Te,l(w).description)),U(Ie,le)};be(W,Ie=>{l(w).description&&Ie(H)})}var te=B(Be,2),Ae=g(te),he=B(R,4),we=B(g(he),2),ye=g(we);De((Ie,le)=>{Qe(He,l(w).name),Qe(Ae,`${Ie??""}`),Qe(ye,`${le??""}`)},[()=>l(w).amount.toLocaleString(),()=>j().toLocaleString()],At),U(O,K)},k=O=>{var K=Tt(),R=lt(K);{var de=Pe=>{var He=p9(),W=g(He),H=g(W),te=g(H);{var Ae=$=>{var Ce=s9(),Ee=B(g(Ce),2),Oe=g(Ee);{var je=pe=>{var Re=xn();De(et=>Qe(Re,`${l(x)[0].name??""} (${et??""})`),[()=>l(x).reduce((et,Je)=>et+Je.sizes.reduce((rt,Ke)=>rt+Ke.quantity,0),0)],At),U(pe,Re)},ke=pe=>{var Re=xn();De(et=>Qe(Re,`${l(x)[0].name??""}  ${l(x).length-1} (${et??""})`),[()=>l(x).reduce((et,Je)=>et+Je.sizes.reduce((rt,Ke)=>rt+Ke.quantity,0),0)],At),U(pe,Re)};be(Oe,pe=>{l(x).length===1?pe(je):pe(ke,!1)})}U($,Ce)};be(te,$=>{l(x).length>0&&$(Ae)})}var he=B(te,2);{var we=$=>{var Ce=u9(),Ee=B(g(Ce),2),Oe=g(Ee);sr(Oe,1,()=>l(p).slice(0,1),vr,(pe,Re)=>{var et=d9(),Je=lt(et);{var rt=st=>{var pt=A9(),It=g(pt);sr(It,1,()=>l(Re).colorInfo.slice(0,3),vr,(bt,ft)=>{var jt=i9();De(()=>{cr(jt,"style",`background-color: ${l(ft).hex??""};`),cr(jt,"title",l(ft).name)}),U(bt,jt)});var Pt=B(It,2);{var St=bt=>{var ft=a9(),jt=g(ft);De(()=>Qe(jt,`+${l(Re).colorInfo.length-3}`)),U(bt,ft)};be(Pt,bt=>{l(Re).colorInfo.length>3&&bt(St)})}U(st,pt)};be(Je,st=>{l(Re).colorInfo&&l(Re).colorInfo.length>0&&st(rt)})}var Ke=B(Je,2);{var nt=st=>{var pt=l9(),It=g(pt);De(()=>Qe(It,l(Re).printAreaTitle)),U(st,pt)};be(Ke,st=>{l(Re).printAreaTitle&&st(nt)})}U(pe,et)});var je=B(Oe,2);{var ke=pe=>{var Re=c9(),et=g(Re);De(()=>Qe(et,` ${l(p).length-1}`)),U(pe,Re)};be(je,pe=>{l(p).length>1&&pe(ke)})}U($,Ce)};be(he,$=>{l(p).length>0&&$(we)})}var ye=B(he,2);{var Ie=$=>{var Ce=h9(),Ee=B(g(Ce),2),Oe=g(Ee);De(()=>Qe(Oe,`${l(v).length??""}`)),U($,Ce)};be(ye,$=>{l(v).length>0&&$(Ie)})}var le=B(H,2),Te=g(le),Fe=B(Te,2);{var Me=$=>{var Ce=f9();it("click",Ce,D),U($,Ce)};be(Fe,$=>{o()==="admin"&&$(Me)})}var Ne=B(W,2),fe=B(g(Ne),2),J=g(fe),Se=g(J);De($=>Qe(Se,`${$??""}`),[()=>l(h).toLocaleString()],At),it("click",Te,ne),U(Pe,He)},Be=Pe=>{var He=g9();U(Pe,He)};be(R,Pe=>{l(A)&&l(A).estimate?Pe(de):Pe(Be,!1)},!0)}U(O,K)};be(Q,O=>{s()&&l(w)?O(M):O(k,!1)},!0)}U(E,F)};be(Z,E=>{l(a)?E(_e):E(z,!1)},!0)}U(re,ue)};be(V,re=>{l(i)?re(se):re(ve,!1)})}var ie=B(q,2);{var ge=re=>{e9(re,{get estimateDetails(){return l(A)},get productAmount(){return l(d)},get printAmount(){return l(c)},get addonAmount(){return l(u)},get totalAmount(){return l(h)},get printInfoList(){return l(p)},get addonItems(){return l(v)},get addCostItems(){return l(w)},get isAddCost(){return s()},get addonProductsMap(){return l(b)},$$events:{close:xe}})};be(ie,re=>{l(S)&&l(A)&&re(ge)})}U(n,L),An()}var w9=G('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),b9=G('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),y9=G('<span class="odz-text-red-500 odz-ml-2"> </span>'),_9=G('<div class="odz-text-sm odz-text-gray-600"> <!></div>'),x9=G('<div class="odz-absolute -odz-top-1 -odz-right-1 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),B9=G("<img> <!>",1),z9=G('<div class="odz-flex odz-items-center odz-gap-1 odz-bg-red-100 odz-px-2 odz-py-1 odz-rounded-full"><span class="odz-text-xs odz-font-medium odz-text-red-600"> </span></div>'),C9=G('<button><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-relative odz-flex-shrink-0"><!></div> <span> </span> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-shrink-0"><!> <div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path></svg></div></div></div></button>'),S9=G('<div><h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-text-gray-800"> </h3> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 lg:odz-grid-cols-4 xl:odz-grid-cols-5 odz-gap-3"></div></div>'),E9=G('<div class="odz-relative"><img class="odz-w-12 odz-h-12 odz-rounded-lg odz-object-cover odz-shadow-md odz-ring-2 odz-ring-white"></div>'),F9=G('<div class="odz-absolute -odz-top-2 -odz-right-2"><div class="odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-shadow-lg"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>'),I9=G('<span class="odz-text-sm odz-font-semibold odz-text-gray-700"> </span>'),U9=G(`<div class="odz-group odz-relative"><div><!> <div class="odz-text-center odz-mb-3"><div> </div> <div class="odz-mt-2 odz-min-h-[2rem] odz-flex odz-flex-col odz-items-center odz-justify-center"><!></div></div> <div class="odz-flex odz-items-center odz-bg-gray-50 odz-rounded-lg odz-p-1 odz-gap-1"><button aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <input type="number" class="odz-flex-1 odz-text-center odz-bg-transparent odz-border-0 odz-text-xs sm:odz-text-sm odz-font-bold odz-text-gray-800
                                                           focus:odz-outline-none focus:odz-ring-0 odz-min-w-0" min="0" placeholder="0"> <button class="odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150 hover:odz-scale-110" aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path></svg></button></div></div></div>`),Q9=G('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),T9=G('<div class="odz-text-center odz-py-8"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="odz-text-sm odz-text-gray-500">     .</p></div>'),L9=G('<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-4 odz-mb-6"><!> <div><h4 class="odz-text-xl odz-font-bold odz-text-gray-800"> </h4> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <!></div>'),P9=G('<div class="odz-space-y-6 odz-mt-6"></div>'),k9=G('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <!></div></div> <!> <!> <!>',1),O9=G('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!>',1);function D9(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(pr,"$fixedEstimateStore",t),s=()=>on(wt,"$estimateStore",t),i=()=>on(ni,"$shopStore",t),a=ze();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"onNext",8,void 0),h=ze(null),p=ze(!1),v=ze(null),w=ze(!1),b=ze(""),x=ze(""),S=ze([]),I=ze({}),P=ze({}),N=ze({}),ee=ze(0),j=ze(0),D=null;function ne(R){var te,Ae,he,we,ye,Ie;if(!l(a)||!l(a).variants||!l(a).options||l(a).options.length===0)return;const de=o();if((Ae=(te=de==null?void 0:de.productSelection)==null?void 0:te.quantityByVariant)!=null&&Ae[R]&&Object.keys(de.productSelection.quantityByVariant[R]).length>0,(((we=(he=de==null?void 0:de.productSelection)==null?void 0:he.quantityByVariant)==null?void 0:we[R])!==void 0||l(S).includes(R))&&d()&&d()!=="temp"){if(l(S).includes(R)){y(S,l(S).filter(Fe=>Fe!==R));const le={...l(P)};delete le[R],y(P,le);const Te={...l(I)};Te[R]&&Object.keys(Te[R]).forEach(Fe=>{Te[R][Fe]=0}),y(I,Te),pr.update(Fe=>{if(!Fe||!Fe.productSelection)return Fe;const Me={...Fe.productSelection.quantityByVariant};Me[R]&&Object.keys(Me[R]).forEach(fe=>{Me[R][fe]=0});const Ne=Object.values(Me).reduce((fe,J)=>fe+Object.values(J).reduce((Se,$)=>Se+$,0),0);return{...Fe,productSelection:{...Fe.productSelection,selectedColors:l(S),variantsByColor:le,quantityByVariant:Me,totalQuantity:Ne}}}),ge(),Ia(j);return}if(!l(S).includes(R)){const le=l(a).options[0].id,Te=l(a).variants.filter(Fe=>{var Me;return!Fe.option_values||!Array.isArray(Fe.option_values)?!1:(Me=Fe.option_values)==null?void 0:Me.some(Ne=>Ne.option_value&&Ne.option_value.option?Ne.option_value.option.id===le&&Ne.option_value.value===R:Ne.option_id?Ne.option_id===le&&Ne.value===R:!1)});Te.length>0&&(y(P,{...l(P),[R]:Te}),y(S,[...l(S),R]),pr.update(Fe=>!Fe||!Fe.productSelection?Fe:{...Fe,productSelection:{...Fe.productSelection,selectedColors:[...Fe.productSelection.selectedColors,R],variantsByColor:{...Fe.productSelection.variantsByColor,[R]:Te},quantityByVariant:{...Fe.productSelection.quantityByVariant,[R]:Fe.productSelection.quantityByVariant[R]||{}}}}),Ia(j))}return}const Pe=l(a).options[0].id,He=l(a).variants.filter(le=>{var Te;return!le.option_values||!Array.isArray(le.option_values)?!1:(Te=le.option_values)==null?void 0:Te.some(Fe=>Fe.option_value&&Fe.option_value.option?Fe.option_value.option.id===Pe&&Fe.option_value.value===R:Fe.option_id?Fe.option_id===Pe&&Fe.value===R:!1)}),W={...l(P)};if(He.length>0&&(W[R]=He),d()&&d()!=="temp"){const le=o();((Ie=(ye=le==null?void 0:le.productSelection)==null?void 0:ye.selectedColors)==null?void 0:Ie.includes(R))?(y(P,{...l(P),...W}),pr.update(Fe=>!Fe||!Fe.productSelection?Fe:{...Fe,productSelection:{...Fe.productSelection,variantsByColor:{...Fe.productSelection.variantsByColor,...W}}})):(l(S).includes(R)||y(S,[...l(S),R]),y(P,{...l(P),...W}),pr.update(Fe=>{var Se,$,Ce,Ee,Oe;if(!Fe||!Fe.productSelection)return Fe;const Me=Object.keys(Fe.productSelection.quantityByVariant||{}),Ne=new Set([...Me,R]),fe=Array.from(Ne),J={...((Se=Fe.productSelection)==null?void 0:Se.variantsByColor)||{},...W};return console.log(" Edit :   (  ):",{colorValue:R,colorsWithQuantity:Me,newSelectedColors:fe,variantsInColor:(($=W[R])==null?void 0:$.length)||0,quantityByVariant:Fe.productSelection.quantityByVariant}),{...Fe,productSelection:{...Fe.productSelection,selectedColors:fe,variantsByColor:J,quantityByVariant:{...((Ce=Fe.productSelection)==null?void 0:Ce.quantityByVariant)||{},[R]:((Oe=(Ee=Fe.productSelection)==null?void 0:Ee.quantityByVariant)==null?void 0:Oe[R])||{}}}}}))}else pr.toggleColorSelection(R,W)}function xe(R){var Pe;if(!l(a)||l(a).options.length<2||!R||!R.option_values||!Array.isArray(R.option_values))return"";const de=l(a).options[1].id,Be=R.option_values.find(He=>He.option_value&&He.option_value.option?He.option_value.option.id===de:He.option_id?He.option_id===de:!1);return((Pe=Be==null?void 0:Be.option_value)==null?void 0:Pe.value)||(Be==null?void 0:Be.value)||""}function L(R,de){var He;const Be=((He=l(I)[R])==null?void 0:He[de])||0,Pe=Be+1;pr.updateQuantity(R,de,Pe),se("increase",R,de,Be,Pe)}function q(R,de){var Pe;const Be=((Pe=l(I)[R])==null?void 0:Pe[de])||0;if(Be>0){const He=Be-1;pr.updateQuantity(R,de,He),se("decrease",R,de,Be,He)}}function V(R,de,Be){var H;const Pe=parseInt(R.target.value)||0,He=Math.max(0,Pe),W=((H=l(I)[de])==null?void 0:H[Be])||0;pr.updateQuantity(de,Be,He),se("input",de,Be,W,He)}function se(R,de,Be,Pe,He){var W;if(typeof window<"u"){const H=Object.values(l(I)).reduce((te,Ae)=>te+Object.values(Ae).reduce((he,we)=>he+we,0),0)-Pe+He;window.dispatchEvent(new CustomEvent("productQuantityUpdate",{detail:{productId:(W=l(a))==null?void 0:W.id,action:R,color:de,variantId:Be,oldQuantity:Pe,newQuantity:He,newTotalQuantity:H,timestamp:Date.now(),source:"product.svelte"}}))}}let ve=!1,ie=!1;function ge(){const R=Object.values(l(I)).reduce((de,Be)=>de+Object.values(Be).reduce((Pe,He)=>Pe+He,0),0);l(ee)!==R&&(y(ee,R),re())}function re(){var R,de;if(!ve){ve=!0;try{const Be={};if(!((R=l(a))!=null&&R.quantity_discounts)||l(ee)===0){Object.keys(l(N)).length>0&&(y(N,{}),pr.updateVariantDiscounts({}));return}const Pe=Object.keys(l(I)),He=Object.keys(l(P));Pe.filter(he=>!He.includes(he)).length>0;for(const he in l(I))for(const we in l(I)[he])if(l(I)[he][we]>0){const Ie=(de=l(P)[he])==null?void 0:de.find(le=>le.id===we);if(Ie&&Ie.prices&&Ie.prices.length>0){const le=Ie.prices[0].amount,Te=ia(l(ee),le,l(a).quantity_discounts);Te!=null&&Te.hasDiscount&&(Be[we]=Te)}}const H=Object.keys(l(N)).sort(),te=Object.keys(Be).sort();(JSON.stringify(H)!==JSON.stringify(te)||Object.keys(Be).some(he=>JSON.stringify(l(N)[he])!==JSON.stringify(Be[he])))&&(y(N,Be),pr.updateVariantDiscounts(l(N)))}finally{ve=!1}}}function ue(){var Pe;let R=0,de=0,Be=!1;for(const He in l(I))for(const W in l(I)[He]){const H=l(I)[He][W];if(H>0){const te=(Pe=l(P)[He])==null?void 0:Pe.find(Ae=>Ae.id===W);if(te&&te.prices&&te.prices.length>0){const Ae=te.prices[0].amount,he=l(N)[W];R+=Ae*H,he!=null&&he.hasDiscount?(de+=he.discountedPrice*H,Be=!0):de+=Ae*H}}}return{originalTotal:R,discountedTotal:Be?de:R,hasDiscount:Be}}function Z(){if(l(ee)===0){y(w,!0),y(b," "),y(x," 1   .");return}pr.completeProductSelection();const R=[];for(const Be in l(I))for(const Pe in l(I)[Be]){const He=l(I)[Be][Pe];if(He>0){const W=l(P)[Be].find(H=>H.id===Pe);W&&R.push({...W,quantity:He})}}const de=s().products.findIndex(Be=>{var Pe;return((Pe=Be.product)==null?void 0:Pe.id)===l(a).id});de>=0?nr(wt,ct(s).products[de]={product:l(a),variants:R,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}},ct(s)):nr(wt,ct(s).products=[...s().products,{product:l(a),variants:R,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}}],ct(s)),wt.updateTotalAmounts(),y(w,!0),y(b," "),y(x,`${l(ee)}  .`),u()&&u()()}async function _e(){var de,Be,Pe,He,W,H,te,Ae,he;if(!A())return;const R=o().productSelection;if(R&&R.product&&R.productId===A()){y(p,!0),y(v,null);try{y(h,await Jd.loadIntegratedProductData(A(),i().id)),console.log(" Edit : productDataStore   ( variants ):",{productId:A(),variantsCount:((Pe=(Be=(de=l(h))==null?void 0:de.product)==null?void 0:Be.variants)==null?void 0:Pe.length)||0,hasOptionValues:(te=(H=(W=(He=l(h))==null?void 0:He.product)==null?void 0:W.variants)==null?void 0:H[0])!=null&&te.option_values?"yes":"no"}),(Ae=l(h))!=null&&Ae.product&&Gn.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]})}catch(we){y(v,we instanceof Error?we.message:"   .")}finally{y(p,!1)}return}y(p,!0),y(v,null);try{if(y(h,await Jd.loadIntegratedProductData(A(),i().id)),(he=l(h))!=null&&he.product){Gn.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]});const we=s().products.find(ye=>{var Ie;return((Ie=ye.product)==null?void 0:Ie.id)===l(h).product.id});if(we&&we.variants.length>0){const ye={},Ie=l(h).product.options[0].id;we.variants.forEach(le=>{var Fe;if(!le||!le.option_values||!Array.isArray(le.option_values))return;const Te=le.option_values.find(Me=>Me.option_value&&Me.option_value.option?Me.option_value.option.id===Ie:Me.option_id?Me.option_id===Ie:!1);if(Te){const Me=((Fe=Te.option_value)==null?void 0:Fe.value)||Te.value||"";ye[Me]||(ye[Me]=[]),ye[Me].push(le)}});for(const le in ye)ne(le),ye[le].forEach(Te=>{l(I)[le]&&zr(I,l(I)[le][Te.id]=Te.quantity||0)});y(I,{...l(I)}),ge()}}}catch(we){y(v,we instanceof Error?we.message:"   .")}finally{y(p,!1)}}function z(){const R=o();if(!(R!=null&&R.productSelection)||!l(a))return;const de=R.productSelection;if(y(S,[...de.selectedColors]),y(I,{...de.quantityByVariant}),y(ee,de.totalQuantity),d()&&d(),l(S).length>0&&l(a)&&l(a).variants){y(P,{});const Be=l(a).options[0].id;Object.keys(de.quantityByVariant||{}).forEach(He=>{const W=l(a).variants.filter(H=>{var te;return(te=H.option_values)==null?void 0:te.some(Ae=>Ae.option_value&&Ae.option_value.option?Ae.option_value.option.id===Be&&Ae.option_value.value===He:Ae.option_id?Ae.option_id===Be&&Ae.value===He:!1)});W.length>0&&zr(P,l(P)[He]=W)})}y(P,{...l(P)}),Ia(j),Object.keys(l(P)).length>0&&pr.update(Be=>!Be||!Be.productSelection?Be:{...Be,productSelection:{...Be.productSelection,variantsByColor:l(P)}}),l(ee)>0&&re()}function E(){D=pr.subscribe(R=>{if(R!=null&&R.productSelection&&R.productId===A()){const de=R.productSelection;if(!l(a)||!l(a).variants)return;if(y(S,[...de.selectedColors]),y(I,{...de.quantityByVariant}),y(ee,de.totalQuantity),Ia(j),l(a)&&l(a).variants&&l(S).length>0){d()&&d();const Be={},Pe=l(a).options[0].id;if(Object.keys(de.quantityByVariant||{}).forEach(W=>{const H=l(a).variants.filter(te=>{var Ae;return(Ae=te.option_values)==null?void 0:Ae.some(he=>he.option_value&&he.option_value.option?he.option_value.option.id===Pe&&he.option_value.value===W:he.option_id?he.option_id===Pe&&he.value===W:!1)});H.length>0&&(Be[W]=H)}),y(P,Be),Ia(j),!ie){const W=Object.keys(de.variantsByColor||{}).sort(),H=Object.keys(Be).sort();if(JSON.stringify(W)!==JSON.stringify(H)){ie=!0;try{console.log(" Store variantsByColor  ( ):",{before:W.length,after:H.length,beforeKeys:W,afterKeys:H}),pr.update(Ae=>!Ae||!Ae.productSelection?Ae:{...Ae,productSelection:{...Ae.productSelection,variantsByColor:Be}})}finally{setTimeout(()=>{ie=!1},0)}}}}else l(S).length===0&&(y(P,{}),Ia(j));de.needsDiscountRecalculation&&l(ee)>0&&setTimeout(()=>{re()},0)}})}Zn(async()=>{d()&&d()!=="temp"||pr.initialize(A(),d()),E(),await _e(),z()}),ps(()=>{D&&D()}),Zt(()=>(o(),no(A()),l(h)),()=>{var R,de,Be;(de=(R=o())==null?void 0:R.productSelection)!=null&&de.product&&o().productSelection.productId===A()&&(!l(h)||((Be=l(h).product)==null?void 0:Be.id)!==o().productSelection.product.id)&&y(h,{product:o().productSelection.product,addons:o().productSelection.addons||[],addonItems:o().productSelection.addonItems||[]})}),Zt(()=>l(h),()=>{var R;y(a,((R=l(h))==null?void 0:R.product)||null)}),Zt(()=>(l(a),l(S),no(d()),l(j)),()=>{var R,de;if(l(a)&&l(a).variants&&l(S).length>0){const Be=d()&&d()!=="temp";console.log(` Reactive: product  , variantsByColor  (${Be?"Edit":"Create"} )`,{productId:l(a).id,variantsCount:l(a).variants.length,selectedColors:l(S),firstVariant:l(a).variants[0],hasOptionValues:!!((R=l(a).variants[0])!=null&&R.option_values)});const Pe={},He=(de=l(a).options[0])==null?void 0:de.id;He&&(l(S).forEach(W=>{const H=l(a).variants.filter(te=>{var Ae;return l(S).indexOf(W)===0&&l(a).variants.indexOf(te),(Ae=te.option_values)==null?void 0:Ae.some(he=>he.option_value&&he.option_value.option?he.option_value.option.id===He&&he.option_value.value===W:he.option_id?he.option_id===He&&he.value===W:!1)});H.length>0&&(Pe[W]=H)}),y(P,Pe),Ia(j))}}),Zt(()=>(o(),l(N),l(j)),()=>{var R,de;if((de=(R=o())==null?void 0:R.productSelection)!=null&&de.variantDiscounts){const Be=o().productSelection.variantDiscounts,Pe=Object.keys(l(N)).sort(),He=Object.keys(Be).sort();(JSON.stringify(Pe)!==JSON.stringify(He)||Object.keys(Be).some(H=>JSON.stringify(l(N)[H])!==JSON.stringify(Be[H])))&&(y(N,{...Be}),Ia(j))}}),Fo(),cn();var F=O9(),Q=lt(F),M=g(Q);{var k=R=>{var de=w9();U(R,de)},O=R=>{var de=Tt(),Be=lt(de);{var Pe=W=>{var H=b9(),te=g(H),Ae=B(g(te),2),he=B(g(Ae),2),we=g(he),ye=B(te,2);De(()=>Qe(we,l(v))),it("click",ye,_e),U(W,H)},He=W=>{var H=Tt(),te=lt(H);{var Ae=he=>{var we=k9(),ye=lt(we),Ie=g(ye),le=g(Ie),Te=B(Ie,2),Fe=g(Te),Me=g(Fe),Ne=B(Fe,2);{var fe=pe=>{var Re=_9();const et=At(ue);var Je=g(Re),rt=B(Je);{var Ke=nt=>{var st=y9();U(nt,st)};be(rt,nt=>{l(et).hasDiscount&&nt(Ke)})}De(()=>Qe(Je,` : ${l(ee)??""} `)),U(pe,Re)};be(Ne,pe=>{l(ee)>0&&pe(fe)})}var J=B(ye,2);{var Se=pe=>{var Re=S9(),et=B(g(Re),2);sr(et,5,()=>l(a).options[0].values,vr,(Je,rt)=>{var Ke=C9();const nt=At(()=>l(S).includes(l(rt).value));var st=g(Ke),pt=g(st),It=g(pt);{var Pt=dt=>{var at=B9(),Vt=lt(at),Jt=B(Vt,2);{var Kt=Gt=>{var er=x9();U(Gt,er)};be(Jt,Gt=>{l(nt)&&Gt(Kt)})}De(()=>{cr(Vt,"src",l(rt).image),cr(Vt,"alt",l(rt).value),Pr(Vt,`odz-w-12 odz-h-12 odz-object-cover odz-rounded-lg odz-shadow-sm
                                                   ${(l(nt)?"odz-ring-2 odz-ring-red-400 odz-ring-offset-2":"")??""}`)}),U(dt,at)};be(It,dt=>{l(rt).image&&dt(Pt)})}var St=B(pt,2),bt=g(St),ft=B(St,2),jt=g(ft);{var Lt=dt=>{var at=Tt();const Vt=At(()=>Object.values(l(I)[l(rt).value]||{}).reduce((Gt,er)=>Gt+er,0));var Jt=lt(at);{var Kt=Gt=>{var er=z9(),Ct=g(er),xt=g(Ct);De(()=>Qe(xt,`${l(Vt)??""}`)),U(Gt,er)};be(Jt,Gt=>{l(Vt)>0&&Gt(Kt)})}U(dt,at)};be(jt,dt=>{var at;l(nt)&&((at=l(P)[l(rt).value])==null?void 0:at.length)>0&&l(j)>=0&&dt(Lt)})}var Et=B(jt,2),$e=g(Et);De(()=>{Pr(Ke,`odz-w-full odz-transition-all odz-duration-200 odz-ease-in-out
                                   ${(l(nt)?"odz-bg-gradient-to-r odz-from-red-50 odz-to-rose-50 odz-border-2 odz-border-red-400 odz-shadow-md":"odz-bg-white odz-border-2 odz-border-gray-200 hover:odz-border-gray-300 hover:odz-shadow-sm")??""}
                                   odz-rounded-xl odz-p-3`),Pr(St,`odz-flex-1 odz-text-sm odz-font-semibold odz-text-gray-700 odz-text-left
                                            ${(l(nt)?"odz-text-red-700":"")??""}`),Qe(bt,l(rt).value),Pr(Et,`odz-transition-transform odz-duration-300
                                               ${(l(nt)?"odz-rotate-90":"")??""}`),eS($e,`odz-w-4 odz-h-4 odz-text-gray-400
                                                   ${(l(nt)?"odz-text-red-500":"")??""}`)}),it("click",Ke,()=>ne(l(rt).value)),U(Je,Ke)}),U(pe,Re)};be(J,pe=>{l(a).options.length>0&&pe(Se)})}var $=B(J,2);{var Ce=pe=>{var Re=P9();sr(Re,5,()=>l(S),vr,(et,Je)=>{var rt=L9();const Ke=At(()=>l(P)[l(Je)]||[]),nt=At(()=>l(a).options[0].values.find(Et=>Et.value===l(Je)));var st=g(rt),pt=g(st);{var It=Et=>{var $e=E9(),dt=g($e);De(()=>{cr(dt,"src",l(nt).image),cr(dt,"alt",l(Je))}),U(Et,$e)};be(pt,Et=>{var $e;($e=l(nt))!=null&&$e.image&&Et(It)})}var Pt=B(pt,2),St=g(Pt),bt=g(St),ft=B(st,2);{var jt=Et=>{var $e=Q9();sr($e,5,()=>l(Ke),vr,(dt,at)=>{var Vt=U9();const Jt=At(()=>xe(l(at))),Kt=At(()=>{var Ir;return((Ir=l(I)[l(Je)])==null?void 0:Ir[l(at).id])||0}),Gt=At(()=>l(N)[l(at).id]),er=At(()=>l(Kt)>0);var Ct=g(Vt),xt=g(Ct);{var Dt=Ir=>{var Br=F9();U(Ir,Br)};be(xt,Ir=>{var Br;l(er)&&((Br=l(Gt))!=null&&Br.hasDiscount)&&Ir(Dt)})}var lr=B(xt,2),ur=g(lr),hr=g(ur),fr=B(ur,2),xr=g(fr);{var un=Ir=>{H5(Ir,{get originalPrice(){return l(at).prices[0].amount},get finalPrice(){return l(Gt).discountedPrice},hasDiscount:!0,size:"sm"})},wn=Ir=>{var Br=I9(),Gr=g(Br);De(Xr=>Qe(Gr,`${Xr??""}`),[()=>Er(l(at).prices[0].amount)],At),U(Ir,Br)};be(xr,Ir=>{var Br;(Br=l(Gt))!=null&&Br.hasDiscount&&l(Kt)>0?Ir(un):Ir(wn,!1)})}var Dr=B(lr,2),Cr=g(Dr),Vr=B(Cr,2),jr=B(Vr,2);De(()=>{Pr(Ct,`odz-bg-white odz-border-2 odz-rounded-xl odz-p-2 odz-transition-all odz-duration-200
                                                    ${(l(er)?"odz-border-red-300 odz-shadow-lg odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md")??""}`),Pr(ur,`odz-bg-gradient-to-r odz-from-slate-600 odz-to-slate-800 odz-text-white
                                                           odz-px-3 odz-py-1 odz-rounded-lg odz-text-sm odz-font-bold odz-shadow-sm
                                                           ${(l(er)?"odz-from-red-500 odz-to-red-700":"")??""}`),Qe(hr,l(Jt)),Pr(Cr,`odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150
                                                           ${(l(Kt)<=0?"odz-opacity-50 odz-cursor-not-allowed":"hover:odz-scale-110")??""}`),Cr.disabled=l(Kt)<=0,t1(Vr,l(Kt))}),it("click",Cr,()=>q(l(Je),l(at).id)),it("input",Vr,Ir=>V(Ir,l(Je),l(at).id)),it("click",jr,()=>L(l(Je),l(at).id)),U(dt,Vt)}),U(Et,$e)},Lt=Et=>{var $e=T9();U(Et,$e)};be(ft,Et=>{l(Ke).length>0&&l(j)>=0?Et(jt):Et(Lt,!1)})}De(()=>Qe(bt,l(Je))),U(et,rt)}),U(pe,Re)};be($,pe=>{l(S).length>0&&pe(Ce)})}var Ee=B($,2);const Oe=At(()=>d()||null),je=At(()=>c()!==void 0?c():null),ke=At(()=>l(ee)>0);kp(Ee,{get productId(){return A()},get estimateId(){return l(Oe)},get idx(){return l(je)},debugSource:"product-tab",get showNextButton(){return l(ke)},nextButtonText:"  ",onNext:Z}),De(()=>{cr(le,"src",l(a).thumbnail),cr(le,"alt",l(a).title),Qe(Me,l(a).title)}),U(he,we)};be(te,he=>{l(a)&&he(Ae)},!0)}U(W,H)};be(Be,W=>{l(v)?W(Pe):W(He,!1)},!0)}U(R,de)};be(M,R=>{l(p)?R(k):R(O,!1)})}var K=B(Q,2);Tc(K,{get isOpen(){return l(w)},set isOpen(R){y(w,R)},get title(){return l(b)},set title(R){y(b,R)},get message(){return l(x)},set message(R){y(x,R)},$$legacy:!0}),U(n,F),An(),r()}var N9=G('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),M9=G('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div></div>'),H9=G('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-overflow-hidden odz-rounded-lg odz-border odz-border-gray-200"><img class="odz-w-full odz-h-full odz-object-cover" loading="lazy"></div>'),j9=G('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-bg-gray-100 odz-rounded-lg odz-border odz-border-gray-200 odz-flex odz-items-center odz-justify-center"><svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div>'),R9=G('<label><input type="radio" class="odz-w-4 odz-h-4 odz-text-red-600 odz-border-gray-300 odz-focus:ring-red-500"> <div class="odz-flex-1"><span class="odz-font-medium odz-text-gray-900"> </span> <div class="odz-text-sm odz-text-red-600 odz-font-semibold"> </div></div></label>'),q9=G('<div class="odz-mt-4 odz-p-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><svg class="odz-w-4 odz-h-4 odz-text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="odz-text-green-800">: <strong> </strong> </span></div></div>'),K9=G('<div class="odz-border odz-border-gray-200 odz-rounded-lg odz-p-6"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><!> <h4 class="odz-text-md odz-font-semibold odz-text-gray-800"> </h4></div> <fieldset class="odz-space-y-3"><legend class="odz-sr-only"> </legend> <!></fieldset> <!></div>'),$9=G('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-mb-6 odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </h3> <div class="odz-space-y-8"></div></div>'),V9=G('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-xl odz-p-8 odz-text-center"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <h3 class="odz-text-lg odz-font-semibold odz-text-gray-700 odz-mb-2"> </h3> <p class="odz-text-gray-500">     .</p></div>'),G9=G("<!> <!>",1),W9=G('<div class="odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-yellow-800">    </h3> <p class="odz-text-sm odz-text-yellow-600"> ID   .</p></div></div></div>'),X9=G('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-md odz-p-8"><div class="odz-text-center odz-mb-8"><h3 class="odz-text-lg odz-font-medium odz-text-gray-800">   .</h3></div> <div class="odz-space-y-3"><button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-gray-900 hover:odz-bg-gray-800 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors odz-flex odz-items-center odz-justify-center odz-gap-3"><div class="odz-w-6 odz-h-6 odz-bg-green-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>   </button> <button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors">  </button></div></div></div>'),Y9=G('<div class="odz-addon-tab"><div class="odz-mb-6"><h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-600">  </p></div> <div class="odz-space-y-6"><!></div></div> <!>',1);function J9(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=()=>on(pr,"$fixedEstimateStore",t),i=()=>on(ni,"$shopStore",t);let a=gt(e,"productId",8),A=gt(e,"estimateId",8,void 0),d=gt(e,"idx",8,void 0),c=gt(e,"onSave",8,void 0);gt(e,"onNext",8,void 0);let u=gt(e,"onPrev",8,void 0),h=null,p=ze(null),v=ze(!1),w=ze(null),b=ze({}),x=ze(!1),S="";function I(z,E,F){var Q,M;pr.toggleAddonSelection(z,E,F),((Q=l(b)[z])==null?void 0:Q.productId)===E&&((M=l(b)[z])==null?void 0:M.variantId)===F?delete l(b)[z]:zr(b,l(b)[z]={productId:E,variantId:F}),y(b,{...l(b)}),P(),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("addonSelectionUpdate",{detail:{productId:E,addonId:z,variantId:F,selectedAddons:{...l(b)},timestamp:Date.now(),source:"addon.svelte"}})),console.log(" addonSelectionUpdate   (variantId ):",{productId:E,addonId:z,variantId:F,selectedAddonsCount:Object.keys(l(b)).length}))}function P(){const z=o().index;z>=0&&o().products[z]&&(nr(wt,ct(o).products[z].addons={...l(b)},ct(o)),N_(wt,{...o()}))}async function N(){if(!a())return;const z=s().productSelection;if(z&&z.product&&z.productId===a()){y(p,{product:z.product,addons:z.addons||[],addonItems:z.addonItems||[]}),y(v,!1);return}y(v,!0),y(w,null);try{y(p,await Gn.loadIntegratedProductData(a(),i().id))}catch(E){y(w,E instanceof Error?E.message:"   .")}finally{y(v,!1)}}function ee(){const z=s();if(z&&z.productId===a()&&z.addonSelection&&z.addonSelection.selectedAddons){const E={...z.addonSelection.selectedAddons};Object.keys(l(b)).length,Object.keys(E).length,y(b,E),y(b,{...l(b)})}}function j(){h=pr.subscribe(z=>{if(z&&z.productId===a())if(z.addonSelection&&z.addonSelection.selectedAddons){const E={...z.addonSelection.selectedAddons};Object.keys(l(b)).length,Object.keys(E).length,JSON.stringify(l(b))!==JSON.stringify(E)&&(y(b,E),typeof window<"u"&&window.dispatchEvent(new CustomEvent("addonSelectionChanged",{detail:{selectedAddons:E}})))}else Object.keys(l(b)).length>0&&y(b,{})})}function D(z){var M;const E={printMethod:null,simplePrintState:null,detailedPrintState:null},F=o().products[z];F&&(F.print_type&&F.print_type!=="selection"&&(E.printMethod=F.print_type),F.simplePrints&&F.simplePrints.length>0&&(E.simplePrintState=F.simplePrints),F.prints&&F.prints.length>0&&(E.detailedPrintState=F.prints));const Q=s();return(M=Q==null?void 0:Q.printSelection)!=null&&M.currentMethod&&(E.printMethod=Q.printSelection.currentMethod),E}async function ne(z,E,F,Q){var le,Te,Fe,Me,Ne,fe;const{shopData:M,customerData:k,fixedEstimateData:O,estimateStoreData:K}=z,R=new Date().toISOString(),de={shop_id:(M==null?void 0:M.id)||null,sess:(M==null?void 0:M.sess)||null,customer_id:(M==null?void 0:M.customer_id)||null,name:(k==null?void 0:k.name)||(E==null?void 0:E.name)||null,order_name:(k==null?void 0:k.name)||(E==null?void 0:E.name)||null,order_phone:(k==null?void 0:k.phone)||(E==null?void 0:E.phone)||null,address1:(k==null?void 0:k.address1)||(E==null?void 0:E.address1)||null,address2:(k==null?void 0:k.address2)||(E==null?void 0:E.address2)||null,postcode:(k==null?void 0:k.postcode)||(E==null?void 0:E.postcode)||null,mall_type:(k==null?void 0:k.mallType)||(E==null?void 0:E.mallType)||null,upload_memo:(K==null?void 0:K.uploadMemo)||null,status:"temp",created_at:R,updated_at:R},Be=[];let Pe=((le=O==null?void 0:O.printSelection)==null?void 0:le.currentMethod)||(F==null?void 0:F.printMethod)||"none";if(Pe==="selection"&&(console.warn(' [prepareDataForDatabase] print_type "selection" . "none" .'),Pe="none"),["simple","detailed","self-design","none"].includes(Pe)||(console.warn(` [prepareDataForDatabase]   print_type: "${Pe}". "none" .`),Pe="none"),(Te=O==null?void 0:O.productSelection)!=null&&Te.quantityByVariant&&((Fe=O==null?void 0:O.productSelection)!=null&&Fe.variantsByColor)){const J=O.productSelection.quantityByVariant,Se=O.productSelection.variantsByColor,$=O.productSelection.variantDiscounts||{};for(const Ce in J){const Ee=J[Ce],Oe=Se[Ce]||[];for(const je in Ee){const ke=Ee[je];if(ke>0){const pe=Oe.find(Re=>Re.id===je);if(pe){const Re=pe.prices&&pe.prices.length>0?pe.prices[0].amount:0,et=$[je];let Je=Re,rt=0,Ke="amount",nt=0,st="minus",pt=null,It=null;if(et&&et.hasDiscount){Je=et.discountedPrice,rt=et.discountAmount;const Pt=et.discountInfo;Pt&&(Ke=Pt.type||"amount",nt=Pt.value||0,st=Pt.direction||"minus",pt=Pt.min_quantity||null,It=Pt.max_quantity||null)}Be.push({idx:0,variant_id:je,quantity:ke,price:Je,print_type:Pe,original_price:Re,discount_amount:rt,discount_type:Ke,discount_value:nt,discount_direction:st,discount_min_quantity:pt,discount_max_quantity:It,product_id:Q,created_at:R,updated_at:R})}}}}}if(Be.length===0&&(K!=null&&K.products)){const J=K.products.find(Se=>{var $;return(($=Se.product)==null?void 0:$.id)===Q});J&&J.variants&&J.variants.length>0&&J.variants.forEach((Se,$)=>{var Ce;if(Se.quantity>0){const Ee=Se.prices&&Se.prices.length>0?Se.prices[0].amount:0,Oe=(Ce=Se.product)==null?void 0:Ce.quantity_discounts,je=ia(Se.quantity,Ee,Oe),ke=je.discountInfo;Be.push({idx:$,variant_id:Se.id,quantity:Se.quantity,price:je.discountedPrice,original_price:Ee,discount_amount:je.discountAmount,discount_type:(ke==null?void 0:ke.type)||"amount",discount_value:(ke==null?void 0:ke.value)||0,discount_direction:(ke==null?void 0:ke.direction)||"minus",discount_min_quantity:(ke==null?void 0:ke.min_quantity)||null,discount_max_quantity:(ke==null?void 0:ke.max_quantity)||null,product_id:Q,created_at:R,updated_at:R})}})}const W=[];F.simplePrintState&&Array.isArray(F.simplePrintState)&&F.simplePrintState.forEach((J,Se)=>{W.push({idx:0,object_id:J.objectId||`area-${Se}`,title:J.title||`  ${Se+1}`,print_method:J.printMethod||null,uploaded_files:J.uploadedFiles||null,file_metadata:J.savedFileInfo||null,price:J.price||0,created_at:R,updated_at:R})});const H=[],te=new Set,Ae=((Me=O==null?void 0:O.printSelection)==null?void 0:Me.currentMethod)==="detailed"||Array.isArray(F.detailedPrintState)&&F.detailedPrintState.length>0;async function he(J,Se){var et,Je,rt,Ke;if(!J)return;const $=((et=J.template)==null?void 0:et.id)??J.template_id??null,Ce=J.objectId??J.object_id??null;if(!$&&!Ce||Ce&&te.has(Ce))return;let Ee=0;const Oe=J.price??0,je=Number(Oe);if(Number.isFinite(je)&&je>0)Ee=je;else try{const nt=((Je=O==null?void 0:O.productSelection)==null?void 0:Je.totalQuantity)||0;let st=0,pt=0;if(J.colors&&((rt=J.template)!=null&&rt.templateProduct)){const It=J.colors.length,Pt=J.template.templateProduct.template_product_variants.find(St=>St.color_count===It);if(Pt){const St=await hl(Pt.variant_id);if(St)if(st=St.prices[0].amount,Pt.min_quantity<=nt)if(pt=st*nt,J.template.templateProduct.product.quantity_discounts&&J.template.templateProduct.product.quantity_discounts.length>0){const bt=ia(nt,st,J.template.templateProduct.product.quantity_discounts);Ee=bt.hasDiscount?bt.discountedPrice*nt:pt}else Ee=pt;else Ee=Pt.plate_price}}else if((Ke=J.template)!=null&&Ke.templateProduct){const It=J.template.templateProduct.template_product_variants[0];if(It){const Pt=await hl(It.variant_id);if(Pt)if(st=Pt.prices[0].amount,It.min_quantity<=nt)if(pt=st*nt,J.template.templateProduct.product.quantity_discounts&&J.template.templateProduct.product.quantity_discounts.length>0){const St=ia(nt,st,J.template.templateProduct.product.quantity_discounts);Ee=St.hasDiscount?St.discountedPrice*nt:pt}else Ee=pt;else Ee=It.plate_price}}}catch{Ee=0}const ke=J.discountInfo||{},pe=ke.discountDetails||ke.discountInfo||{};H.push({idx:0,template_id:$,variant_id:J.variant_id??null,price:Ee,colors:J.colors||null,uploads:J.uploads||null,name_sheet:J.nameSheet??J.name_sheet??null,object_id:Ce,original_price:ke.originalPrice??J.original_price??null,discount_amount:ke.discountAmount??J.discount_amount??null,discount_type:pe.type??J.discount_type??null,discount_value:pe.value??J.discount_value??null,discount_direction:pe.direction??J.discount_direction??null,discount_min_quantity:pe.min_quantity??J.discount_min_quantity??null,discount_max_quantity:pe.max_quantity??J.discount_max_quantity??null,created_at:R,updated_at:R}),Ce&&te.add(Ce)}if(Ae){if(Array.isArray(F.detailedPrintState)&&F.detailedPrintState.length>0)for(let J=0;J<F.detailedPrintState.length;J++){const Se=F.detailedPrintState[J];await he(Se)}if(H.length===0&&(K!=null&&K.products)){const J=K.products.find(Se=>{var $;return(($=Se.product)==null?void 0:$.id)===Q});if(J!=null&&J.prints&&J.prints.length>0)for(let Se=0;Se<J.prints.length;Se++)await he(J.prints[Se])}}const we=[],ye=(Ne=O==null?void 0:O.addonSelection)==null?void 0:Ne.selectedAddons,Ie=((fe=O==null?void 0:O.productSelection)==null?void 0:fe.totalQuantity)||0;return ye&&Object.keys(ye).length>0&&Object.entries(ye).forEach(([J,Se])=>{var Ee,Oe,je;let $=0,Ce=0;if((Oe=(Ee=l(p))==null?void 0:Ee.addonProductsMap)!=null&&Oe[Se.productId]){const pe=(je=l(p).addonProductsMap[Se.productId].variants)==null?void 0:je.find(Re=>Re.id===Se.variantId);pe&&pe.prices&&pe.prices.length>0&&(Ce=pe.prices[0].amount||0,$=Ce)}we.push({idx:0,addon_id:J,selected_product_id:Se.productId,selected_variant_id:Se.variantId,quantity:Ie,price:$,created_at:R,updated_at:R})}),{estimate:de,estimate_items:Be,estimate_simple_prints:W,estimate_prints:H,estimate_addon_items:we}}function xe(z){const E=[];return z.estimate.shop_id||E.push(" ID "),z.estimate_items.length===0&&E.push("  "),z.estimate_items.forEach((F,Q)=>{F.variant_id||E.push(` ${Q+1}:  ID `),(!F.quantity||F.quantity<=0)&&E.push(` ${Q+1}:  `)}),z.estimate_simple_prints.forEach((F,Q)=>{F.object_id||E.push(`  ${Q+1}:  ID `)}),z.estimate_prints&&z.estimate_prints.length>0&&z.estimate_prints.forEach((F,Q)=>{!F.template_id&&!F.object_id&&E.push(`  ${Q+1}: template_id  object_id `)}),{isValid:E.length===0,errors:E}}async function L(){var z;try{let E=null,F=null,Q=null,M=null,k=null;pr.subscribe(ye=>{E=ye})(),Gn.subscribe(ye=>{F=ye})(),wt.subscribe(ye=>{Q=ye})(),Gl.subscribe(ye=>{M=ye})(),ni.subscribe(ye=>{k=ye})();const Pe=d()??o().index??0,He=D(Pe),W={shopData:k,customerData:M,fixedEstimateData:E,extendedProductData:F,estimateStoreData:Q},H={name:M==null?void 0:M.name,phone:M==null?void 0:M.phone,address1:M==null?void 0:M.address1,address2:M==null?void 0:M.address2,postcode:M==null?void 0:M.postcode,mallType:M==null?void 0:M.mallType},te=await ne(W,H,He,a()),Ae=xe(te);if(!Ae.isValid){alert(`   :

${Ae.errors.join(`
`)}

   .`);return}const he=await B5(te,(M==null?void 0:M.mallType)||(H==null?void 0:H.mallType),k==null?void 0:k.customer_id,k==null?void 0:k.sess);if(he.success){const ye=`
   !

  : ${((z=he.details)==null?void 0:z.estimateNumber)||"N/A"}
  ID: ${he.estimateId}
  ID: ${a()}
   : ${te.estimate_items.length}
   : ${te.estimate_simple_prints.length}
   : ${te.estimate_prints.length}
  : ${te.estimate_addon_items.length}

   : ${new Date().toLocaleString()}

   !
                `.trim();y(x,!0),S=he.estimateId}else{const ye=`
   !

  ID: ${a()}
  : ${he.error}

  : ${new Date().toLocaleString()}

    .
                `.trim();alert(ye)}const we={version:"1.0.0",timestamp:new Date().toISOString(),productId:a(),databaseData:te,validationResult:Ae,saveResult:he,stores:{shopStore:k,customerStore:M,fixedEstimateStore:E,extendedProductDataStore:F,estimateStore:Q},storeDataBackup:He,integratedProductData:l(p),selectedAddons:l(b),formData:H};window.lastEstimateDataPackage=we}catch(E){const F=`
     !

  : ${E instanceof Error?E.message:"   "}
  ID: ${a()}
  : ${new Date().toLocaleString()}

   .
            `.trim();alert(F)}}function q(){y(x,!1),pr.reset(),Gn.reset(),wt.reset(),y(b,{}),y(p,null),pr.setCurrentStep("product"),setTimeout(()=>{window.location.href="/"},100)}function V(){y(x,!1),window.location.href="/odiz/estimate.php"}Zn(async()=>{var F;const z=s();(!z||z.productId!==a())&&pr.initialize(a(),A()),j(),await N(),ee();const E=o().index;if(E>=0&&((F=o().products[E])!=null&&F.addons)){const Q=o().products[E].addons;Object.keys(Q).length>0&&y(b,{...Q})}}),ps(()=>{h&&h()}),cn();var se=Y9(),ve=lt(se),ie=B(g(ve),2),ge=g(ie);{var re=z=>{var E=N9();U(z,E)},ue=z=>{var E=Tt(),F=lt(E);{var Q=k=>{var O=M9(),K=g(O),R=B(g(K),2),de=B(g(R),2),Be=g(de);De(()=>Qe(Be,l(w))),U(k,O)},M=k=>{var O=Tt(),K=lt(O);{var R=Be=>{var Pe=G9(),He=lt(Pe);{var W=ye=>{var Ie=$9(),le=B(g(Ie),2);sr(le,5,()=>l(p).addons,Te=>Te.id,(Te,Fe)=>{var Me=K9(),Ne=g(Me),fe=g(Ne);{var J=et=>{var Je=H9(),rt=g(Je);De(()=>{cr(rt,"src",l(Fe).items[0].addon_product.thumbnail),cr(rt,"alt",l(Fe).name)}),T_(rt),it("error",rt,Ke=>{const nt=Ke.target;nt.style.display="none",nt.parentElement&&(nt.parentElement.innerHTML=`
                                                        <div class="odz-w-full odz-h-full odz-bg-gray-100 odz-flex odz-items-center odz-justify-center">
                                                            <svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                                            </svg>
                                                        </div>
                                                    `)}),U(et,Je)},Se=et=>{var Je=j9();U(et,Je)};be(fe,et=>{l(Fe).items&&l(Fe).items.length>0&&l(Fe).items[0].addon_product.thumbnail?et(J):et(Se,!1)})}var $=B(fe,2),Ce=g($),Ee=B(Ne,2),Oe=g(Ee),je=g(Oe),ke=B(Oe,2);sr(ke,1,()=>l(Fe).items,et=>et.id,(et,Je)=>{var rt=Tt(),Ke=lt(rt);{var nt=st=>{var pt=Tt(),It=lt(pt);sr(It,1,()=>l(Je).addon_product.variants,Pt=>Pt.id,(Pt,St)=>{var bt=R9();const ft=At(()=>{var Kt,Gt;return((Kt=l(b)[l(Fe).id])==null?void 0:Kt.productId)===l(Je).addon_product.id&&((Gt=l(b)[l(Fe).id])==null?void 0:Gt.variantId)===l(St).id}),jt=At(()=>l(St).prices&&l(St).prices.length>0?l(St).prices[0].amount:0);var Lt=g(bt),Et=bc(()=>(()=>{var ur,hr;const Kt=l(Fe).id,Gt=l(Fe).name,er=l(Je).addon_product.id,Ct=l(Je).addon_product.title,xt=l(St).id,Dt=l(St).title,lr=(hr=(ur=l(St).prices)==null?void 0:ur[0])==null?void 0:hr.amount;return fr=>{console.log(" Radio button clicked ( ):",{addonId:Kt,addonName:Gt,productId:er,productTitle:Ct,variantId:xt,variantTitle:Dt,variantPrice:lr,radioId:fr.target.id,timestamp:Date.now()}),I(Kt,er,xt)}})()),$e=B(Lt,2),dt=g($e),at=g(dt),Vt=B(dt,2),Jt=g(Vt);De(Kt=>{cr(bt,"for",`addon-${l(Fe).id??""}-${l(Je).id??""}-${l(St).id??""}`),Pr(bt,`odz-flex odz-items-center odz-gap-4 odz-p-4 odz-border-2 odz-rounded-lg odz-cursor-pointer odz-transition-all
                                                           ${(l(ft)?"odz-border-red-500 odz-bg-red-50":"odz-border-gray-200 odz-bg-white hover:odz-border-gray-300")??""}`),cr(Lt,"id",`addon-${l(Fe).id??""}-${l(Je).id??""}-${l(St).id??""}`),cr(Lt,"name",`addon-${l(Fe).id??""}`),ju(Lt,l(ft)),Qe(at,l(St).title||l(Je).addon_product.title),Qe(Jt,` ${Kt??""}`)},[()=>Er(l(jt))],At),it("change",Lt,function(...Kt){var Gt;(Gt=l(Et))==null||Gt.apply(this,Kt)}),U(Pt,bt)}),U(st,pt)};be(Ke,st=>{l(Je).addon_product.variants&&l(Je).addon_product.variants.length>0&&st(nt)})}U(et,rt)});var pe=B(Ee,2);{var Re=et=>{var Je=Tt();const rt=At(()=>l(Fe).items.find(pt=>pt.addon_product.id===l(b)[l(Fe).id].productId)),Ke=At(()=>{var pt,It;return(It=(pt=l(rt))==null?void 0:pt.addon_product.variants)==null?void 0:It.find(Pt=>Pt.id===l(b)[l(Fe).id].variantId)});var nt=lt(Je);{var st=pt=>{var It=q9(),Pt=g(It),St=B(g(Pt),2),bt=B(g(St)),ft=g(bt),jt=B(bt);De(Lt=>{Qe(ft,l(Ke).title||l(rt).addon_product.title),Qe(jt,` ( ${Lt??""})`)},[()=>{var Lt,Et;return Er(((Et=(Lt=l(Ke).prices)==null?void 0:Lt[0])==null?void 0:Et.amount)||0)}],At),U(pt,It)};be(nt,pt=>{l(rt)&&l(Ke)&&pt(st)})}U(et,Je)};be(pe,et=>{l(b)[l(Fe).id]&&et(Re)})}De(()=>{Qe(Ce,l(Fe).name),Qe(je,`${l(Fe).name??""} `)}),U(Te,Me)}),U(ye,Ie)},H=ye=>{var Ie=V9();U(ye,Ie)};be(He,ye=>{l(p).addons.length>0?ye(W):ye(H,!1)})}var te=B(He,2);const Ae=At(()=>A()||null),he=At(()=>d()!==void 0?d():null),we=At(()=>({type:"double",buttons:[{text:" ",action:u()||(()=>{}),style:"secondary",icon:"arrow-left"},{text:" ",action:A()&&typeof d()=="number"&&c()?c():L,style:"primary",icon:"save",size:"large"}]}));kp(te,{get productId(){return a()},get estimateId(){return l(Ae)},get idx(){return l(he)},debugSource:"addon-tab",get buttonConfig(){return l(we)}}),U(Be,Pe)},de=Be=>{var Pe=W9();U(Be,Pe)};be(K,Be=>{l(p)?Be(R):Be(de,!1)},!0)}U(k,O)};be(F,k=>{l(w)?k(Q):k(M,!1)},!0)}U(z,E)};be(ge,z=>{l(v)?z(re):z(ue,!1)})}var Z=B(ve,2);{var _e=z=>{var E=X9(),F=g(E),Q=B(g(F),2),M=g(Q),k=B(M,2);it("click",M,q),it("click",k,V),U(z,E)};be(Z,z=>{l(x)&&z(_e)})}U(n,se),An(),r()}var Z9=G('<button><div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><span class="odz-hidden sm:odz-inline"> </span></div></button>'),eq=G('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><div class="odz-w-full"><div class="odz-flex odz-w-full odz-border-b odz-border-gray-200"></div></div>  <div><div><!></div> <div><!></div> <div><!></div></div></div>');function ku(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=()=>on(pr,"$fixedEstimateStore",t),i=()=>on(ni,"$shopStore",t);let a=gt(e,"productId",8),A=gt(e,"estimateId",8,void 0),d=gt(e,"idx",8,void 0),c=gt(e,"onSave",8,void 0),u=ze("product"),h=null,p=null,v=!1,w=null;const b=[{id:"product",label:"",description:"   "},{id:"print",label:"",description:"   "},{id:"addon",label:"",description:"  "}];function x(ve){var ue;const ie=l(u),ge=ve;if(y(u,ge),pr.setCurrentStep(ge),Gn.getProductData(a())&&(Gn.saveToSession(a()),typeof window<"u"))try{const Z=d()??0,_e=`tab-state-${a()}_${Z}`,z={currentTab:ge,previousTab:ie,timestamp:Date.now(),productId:a(),idx:Z};window.sessionStorage.setItem(_e,JSON.stringify(z))}catch{}if(typeof window<"u")try{let Z;const _e=d()??0,z=o().products;if(z&&z[_e]){const F=z[_e];F.print_type&&F.print_type!=="selection"&&(Z=F.print_type,console.log(" toMethod (estimateStore ):",{idx:_e,toMethod:Z}))}if(!Z){const F=s();if((F==null?void 0:F.idx)===d()&&((ue=F==null?void 0:F.printSelection)!=null&&ue.currentMethod)){const Q=F.printSelection.currentMethod;Q!=="selection"&&(Z=Q,console.log(" toMethod (fixedEstimateStore ):",{idx:d(),toMethod:Z}))}}console.log("   - toMethod :",{estimateId:A(),idx:d(),productId:a(),toMethod:Z,source:Z?"store":"none"});const E=new CustomEvent("printAmountRecalc",{detail:{productId:a(),fromTab:ie,toTab:ge,toMethod:Z,estimateId:A(),idx:d(),timestamp:Date.now(),source:"tab-change"}});window.dispatchEvent(E)}catch{}console.log("   ( ):",{from:ie,to:ge,productId:a(),sessionSaved:!0})}function S(){l(u)==="product"?x("print"):l(u)==="print"&&x("addon")}function I(){if(typeof window>"u")return!1;try{const ve=d()??0,ie=`tab-state-${a()}_${ve}`,ge=window.sessionStorage.getItem(ie);if(ge){const re=JSON.parse(ge);if(re.productId===a()&&re.idx===ve&&re.currentTab)return y(u,re.currentTab),console.log("   :",{productId:a(),idx:ve,tab:l(u)}),!0}}catch{}return!1}async function P(){try{await Gn.loadIntegratedProductData(a(),i().id)}catch{}}Zn(async()=>{const ve=A()&&A()!=="temp";await P();const ie=I();v=ie,ve||pr.initialize(a()),ie&&!ve&&pr.setCurrentStep(l(u)),h=pr.subscribe(ge=>{ge&&ge.productId===a()&&!v&&(ge.currentStep,l(u))}),p=Gn.subscribe(ge=>{}),w=ge=>{const re=ge.detail;re&&["product","print","addon"].includes(re)&&x(re)},typeof window<"u"&&window.addEventListener("changeTab",w)}),ps(()=>{h&&h(),p&&p(),typeof window<"u"&&w&&window.removeEventListener("changeTab",w)}),cn();var N=eq(),ee=g(N),j=g(ee);sr(j,5,()=>b,vr,(ve,ie)=>{var ge=Z9(),re=g(ge),ue=g(re),Z=g(ue);De(()=>{Pr(ge,`odz-flex-1 odz-px-4 odz-py-3 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2
                           ${(l(u)===l(ie).id?"odz-text-red-600 odz-border-red-400 odz-bg-red-50":"odz-text-gray-600 odz-border-transparent hover:odz-text-gray-800 hover:odz-border-gray-300")??""}`),Qe(Z,l(ie).label)}),it("click",ge,()=>x(l(ie).id)),U(ve,ge)});var D=B(ee,2),ne=g(D),xe=g(ne);D9(xe,{get productId(){return a()},get estimateId(){return A()},get idx(){return d()},onNext:()=>x("print")});var L=B(ne,2),q=g(L);Gx(q,{get productId(){return a()},get estimateId(){return A()},get idx(){return d()},onNext:S});var V=B(L,2),se=g(V);J9(se,{get productId(){return a()},get estimateId(){return A()},get idx(){return d()},onNext:S,onPrev:()=>x("print"),get onSave(){return c()}}),De(()=>{zs(ne,"odz-hidden",l(u)!=="product"),zs(L,"odz-hidden",l(u)!=="print"),zs(V,"odz-hidden",l(u)!=="addon")}),U(n,N),An(),r()}var tq=G('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),rq=G('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),nq=G('<dialog class="odz-modal odz-modal-open odz-backdrop:odz-bg-black odz-backdrop:odz-bg-opacity-50"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900">  </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"></button></div></div></dialog>');function oq(n,e){an(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"estimateId",8),o=gt(e,"idx",8),s=gt(e,"productIndex",8),i=gt(e,"productId",8),a=gt(e,"onClose",8),A=gt(e,"onSave",8),d=ze(!0),c=ze(""),u=ze();async function h(){var V,se,ve;try{y(d,!0),y(c,"");const ie=await z5(r(),o());if(!ie.items||ie.items.length===0)throw new Error(`     . (estimateId: ${r()}, idx: ${o()})`);if(!((V=ie.items[0])!=null&&V.product_id))throw new Error(" ID   .");if(!ie.items.some(E=>E.variant&&E.variant.id)){const E=ie.items.map(F=>F.variant_id).filter(Boolean);throw E.length===0?new Error("    .  ."):new Error(`     . ( ID: ${E[0]})
     .  .`)}const re=S5(ie),ue=r()||"temp",Z=Date.now().toString(36)+Math.random().toString(36).substr(2),_e={productId:i(),productSelection:re.fixedEstimateData.productSelection,printSelection:re.fixedEstimateData.printSelection||null,addonSelection:re.fixedEstimateData.addonSelection||null,additionalInfo:re.fixedEstimateData.additionalInfo||null,currentStep:"product",isDebugMode:!0,sessionId:Z,estimateId:ue,idx:o()};pr.set(_e);const{sessionStorageData:z}=re;wt.updateProductAtIndex(s(),{print_type:((se=_e.printSelection)==null?void 0:se.currentMethod)||"selection",prints:z.detailedPrintState||[],simplePrints:z.simplePrintState||[],simplePrintState:z.simplePrintState||[],productSelection:re.fixedEstimateData.productSelection,addons:((ve=re.fixedEstimateData.addonSelection)==null?void 0:ve.selectedAddons)||{}}),await new Promise(E=>setTimeout(E,50)),y(d,!1)}catch(ie){ie instanceof Error?y(c,ie.message):y(c,"    ."),y(d,!1)}}function p(){pr.reset(),a()()}function v(){A()()}function w(V){V.key==="Escape"&&p()}function b(V){V.target===l(u)&&p()}ps(()=>{pr.reset()}),Zt(()=>(l(u),no(t())),()=>{l(u)&&(t()?(l(u).showModal(),h()):l(u).close())}),Fo(),cn();var x=nq(),S=g(x),I=g(S),P=B(g(I),2),N=g(P);xA(N,{class:"odz-w-5 odz-h-5"});var ee=B(I,2),j=g(ee);{var D=V=>{var se=tq();U(V,se)},ne=V=>{var se=Tt(),ve=lt(se);{var ie=re=>{var ue=rq(),Z=B(g(ue),2),_e=g(Z);De(()=>Qe(_e,l(c))),U(re,ue)},ge=re=>{ku(re,{get productId(){return i()},get estimateId(){return r()},get idx(){return o()},onSave:v})};be(ve,re=>{l(c)?re(ie):re(ge,!1)},!0)}U(V,se)};be(j,V=>{l(d)?V(D):V(ne,!1)})}var xe=B(ee,2),L=g(xe),q=B(L,2);hs(x,V=>y(u,V),()=>l(u)),De(()=>q.disabled=l(d)),it("click",P,p),it("click",L,p),it("click",q,v),it("keydown",x,w),it("click",x,b),U(n,x),An()}var sq=G('<div class="odz-flex odz-items-center odz-justify-center odz-min-h-screen"><div class="odz-text-center"><div class="odz-w-12 odz-h-12 odz-border-4 odz-border-red-500 odz-border-t-transparent odz-rounded-full odz-animate-spin odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">  ...</p></div></div>'),iq=G('<div class="odz-mb-4"><button class="odz-flex odz-items-center odz-gap-2 odz-text-gray-600 hover:odz-text-gray-900 odz-transition-colors"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="odz-text-sm odz-font-medium"> </span></button></div>'),aq=G('<div class="odz-fixed odz-top-4 odz-right-4 odz-z-50 odz-bg-green-500 odz-text-white odz-px-4 odz-py-3 odz-rounded-lg odz-shadow-lg odz-flex odz-items-center odz-gap-2"><!> <span class="odz-text-sm"></span></div>'),Aq=G('<button class="odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-px-6 odz-py-3 odz-rounded-lg odz-font-medium odz-text-sm odz-transition-colors"> </button>'),lq=G('<div class="odz-text-center odz-py-12"><!> <p class="odz-text-sm odz-text-gray-500 odz-mb-4">  </p> <!></div>'),dq=G('<p class="odz-mt-1 odz-text-xs odz-text-red-500"> </p>'),cq=G('<p class="odz-mt-1 odz-text-xs odz-text-gray-500">  4  </p>'),uq=G('<div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-relative"><!> <input type="password" placeholder="     "></div> <!></div>'),hq=G('<div class="odz-flex odz-justify-between odz-text-sm odz-text-red-600"><span></span> <span class="odz-font-medium"> </span></div>'),fq=G('<span class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-5 odz-h-5 odz-border-2 odz-border-white odz-border-t-transparent odz-rounded-full odz-animate-spin"></div>  ...</span>'),pq=G('<div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-4 odz-border odz-border-gray-200 odz-sticky odz-bottom-0"><button class="odz-w-full odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-py-4 odz-rounded-lg odz-font-medium odz-text-base odz-transition-colors disabled:odz-opacity-50 disabled:odz-cursor-not-allowed"><!></button></div>'),gq=G('<div class="odz-max-w-5xl odz-mx-auto odz-px-4 odz-py-6"><!> <!> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><!></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-4"><div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder="  ()" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><select class="odz-w-20 odz-px-3 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"><option>010</option><option>011</option><option>016</option><option>017</option><option>018</option><option>019</option></select> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"></div></div> <div class="odz-col-span-full odz-border-t odz-border-gray-200 odz-my-2"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="" readonly="" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"> <button type="button" class="odz-px-6 odz-py-2.5 odz-bg-gray-700 hover:odz-bg-gray-800 odz-text-white odz-rounded-lg odz-text-sm odz-font-medium odz-transition-colors odz-whitespace-nowrap disabled:odz-opacity-50"> </button></div></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder="    " readonly="" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <select class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"><option></option><option></option><option></option><option></option></select></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="date" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <!> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> </label> <textarea class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 odz-resize-none disabled:odz-bg-gray-50" rows="3" placeholder="  "></textarea></div></div></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-3"><div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"> </span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <!> <div class="odz-border-t odz-border-gray-200 odz-pt-3 odz-flex odz-justify-between"><span class="odz-font-semibold odz-text-gray-900"> </span> <span class="odz-text-xl odz-font-bold odz-text-red-600"> </span></div></div></div> <!></div>'),vq=G('<div class="odz-min-h-screen odz-bg-gray-50"><!></div> <!> <!> <!> <!>',1);function mq(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(wt,"$estimateStore",t),s=ze();let i=gt(e,"mallType",8,""),a=gt(e,"customerId",8,""),A=gt(e,"sess",8,""),d=gt(e,"shopId",8,""),c=gt(e,"estimateId",12,void 0),u=gt(e,"returnTo",8,"list"),h=ze(null),p=ze(!1),v=ze(!1),w=ze(!1),b=ze(!1),x=ze(""),S=ze(""),I=ze(void 0),P=ze(!1),N=ze(!1),ee=!1,j=ze(""),D=ze("");function ne(fe){return fe?fe.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}let xe=ze(!1),L=ze(-1),q=ze(""),V=ze(-1),se=[],ve=null,ie=!1;async function ge(){var fe;if(ie){console.log(" [Realtime]     ");return}if(!((fe=l(h))!=null&&fe.id)){console.log(" [Realtime]  ID ,  ");return}ve&&clearTimeout(ve),ve=setTimeout(async()=>{try{console.log(" [Realtime]    :",l(h).id),await K(l(h).id),console.log(" [Realtime]    ")}catch(J){console.error(" [Realtime]   :",J)}},300)}function re(fe){console.log(" [Realtime]    :",fe);const J=ug(fe,ke=>{console.log(" [Realtime] Estimate  :",ke),y(h,ke),y(w,dc(ke.status))});se.push(()=>J.unsubscribe());const Se=f5(fe,ke=>{console.log(" [Realtime] EstimateItems  :",ke.eventType),ge()});se.push(()=>Se.unsubscribe());const $=v1(fe,ke=>{console.log(" [Realtime] EstimatePrints  :",ke.eventType),ge()});se.push(()=>$.unsubscribe());const Ce=p5(fe,ke=>{console.log(" [Realtime] EstimateSimplePrints  :",ke.eventType),ge()});se.push(()=>Ce.unsubscribe());const Ee=g5(fe,ke=>{console.log(" [Realtime] EstimateAddonItems  :",ke.eventType),ge()});se.push(()=>Ee.unsubscribe());const Oe=v5(fe,ke=>{console.log(" [Realtime] EstimateAdditionalCosts  :",ke.eventType),ge()});se.push(()=>Oe.unsubscribe());const je=g1(fe,ke=>{console.log(" [Realtime] EstimateComments  :",ke.eventType)});se.push(()=>je.unsubscribe()),console.log(" [Realtime]     (7 )")}function ue(){const{phone1:fe,phone2:J,phone3:Se}=o();fe&&J&&Se&&wt.update($=>({...$,orderPhone:`${fe}-${J}-${Se}`}))}function Z(fe){if(fe&&fe.includes("-")){const J=fe.split("-");J.length===3&&wt.update(Se=>({...Se,phone1:J[0]||"010",phone2:J[1]||"",phone3:J[2]||""}))}}function _e(){return ee?Promise.resolve():new Promise(fe=>{const J=document.createElement("script");J.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",J.onload=()=>{ee=!0,fe()},document.head.appendChild(J)})}async function z(){try{await _e(),new window.daum.Postcode({oncomplete(fe){wt.update(J=>({...J,postcode:fe.zonecode,address1:fe.roadAddress||fe.jibunAddress}))},onresize(fe){}}).open()}catch{y(b,!0),y(x,"  "),y(S,"     .    .")}}Zn(async()=>{ni.set({id:d(),name:"",sess:A(),customer_id:a()}),Gl.set({name:"",phone:"",address1:"",address2:"",postcode:"",mallType:i()}),c()?await F(c()):await E()}),ps(()=>{se.forEach(fe=>{try{fe()}catch(J){console.error("   :",J)}}),se=[]});async function E(){y(p,!0);try{const fe=await d1(i(),a(),A());fe?(y(h,fe),y(w,dc(fe.status)),await k(fe),re(fe.id)):(wt.reset(),y(w,!0))}catch{y(b,!0),y(x," "),y(S,"     .")}finally{y(p,!1)}}async function F(fe){y(p,!0);try{let J=await rd(fe);if(J){const Se=!!(A()||a());if(O5(J)&&Se){console.log("[loadEstimateById]    ,   ...");const Ce=await F5(fe,d(),A()||null,a()||null,i()||null);if(Ce.success&&Ce.newEstimateId){if(console.log(`[loadEstimateById]   : ${fe}  ${Ce.newEstimateId}`),Q(Ce.newEstimateId),J=await rd(Ce.newEstimateId),!J)throw new Error("    .");c(Ce.newEstimateId)}else{console.error("[loadEstimateById]   :",Ce.error),y(b,!0),y(x," "),y(S,`    : ${Ce.error}`);return}}y(h,J),y(w,dc(J.status)),await k(J),re(J.id)}else y(b,!0),y(x," "),y(S,"   .")}catch(J){console.error("[loadEstimateById] :",J),y(b,!0),y(x," "),y(S,"    .")}finally{y(p,!1)}}function Q(fe){try{const J=new URL(window.location.href);J.searchParams.set("estimateId",fe),window.history.replaceState({},"",J.toString()),console.log(`[updateUrlWithNewEstimateId] URL  : ${J.toString()}`)}catch(J){console.error("[updateUrlWithNewEstimateId] URL  :",J)}}function M(fe){const J={delivery:"",pickup:"",quick:""};return fe&&J[fe]||""}async function k(fe){try{nr(wt,ct(o).estimateName=fe.name||"",ct(o)),nr(wt,ct(o).organizationName=fe.organization_name||"",ct(o)),nr(wt,ct(o).orderName=fe.order_name||"",ct(o)),nr(wt,ct(o).orderPhone=fe.order_phone||"",ct(o)),nr(wt,ct(o).postcode=fe.postcode||"",ct(o)),nr(wt,ct(o).address1=fe.address1||"",ct(o)),nr(wt,ct(o).address2=fe.address2||"",ct(o)),nr(wt,ct(o).comment=fe.comment||"",ct(o)),nr(wt,ct(o).shippingMethod=M(fe.shipping_method),ct(o)),nr(wt,ct(o).prefDeliveryDate=fe.pref_delivery_date||"",ct(o)),nr(wt,ct(o).uploadMemo=fe.upload_memo||"",ct(o)),nr(wt,ct(o).designConfirm=fe.design_confirm||"",ct(o)),fe.order_phone&&Z(fe.order_phone),await K(fe.id)}catch(J){J instanceof SyntaxError&&J.message.includes("JSON")?(y(b,!0),y(x," "),y(S,"    .  .")):(y(b,!0),y(x," "),y(S,"    ."))}}function O(fe){if(fe==null)return null;if(typeof fe=="object")return fe;if(typeof fe=="string")try{return JSON.parse(fe)}catch{return null}return fe}async function K(fe){var J;try{const Se=await Gu(fe),$=await xc(fe),Ce=await h1(fe),Ee=await hg(fe),Oe=await w1(fe),je=[],ke={};for(const pe of Se)if(pe.product_id&&pe.product){const Re=pe.idx||0;if(ke[Re]||(ke[Re]={product:pe.product,variants:[],quantity:0,prints:[],addons:{},print_type:pe.print_type||"none",simplePrints:[]}),pe.variant_id&&pe.quantity){const et=pe.original_price?parseFloat(pe.original_price.toString()):0,Je=pe.price?parseFloat(pe.price.toString()):0,rt=et>0,Ke=rt?et:Je,nt={id:pe.variant_id,quantity:pe.quantity,prices:[{amount:Ke}],thumbnail:((J=pe.variant)==null?void 0:J.thumbnail)||null,title:pe.variant_title||` ${pe.variant_id.substring(0,4)}`,discountInfo:rt&&pe.discount_amount?{discountAmount:pe.discount_amount,discountType:pe.discount_type,discountValue:pe.discount_value,discountDirection:pe.discount_direction}:void 0,isDiscountedPrice:!rt};ke[Re].variants.push(nt),ke[Re].quantity+=pe.quantity}}for(const pe of $)if(pe.template_id&&pe.estimate_id){const Re=pe.idx||0;if(ke[Re]){const et={template:{id:pe.template_id,name:""},price:pe.price||0,colors:O(pe.colors)||[],uploads:O(pe.uploads)||null,title:"",objectId:pe.object_id||null,variant_id:pe.variant_id||null};ke[Re].prints.push(et)}}for(const pe of Ce){const Re=pe.idx||0;ke[Re]&&(ke[Re].simplePrints||(ke[Re].simplePrints=[]),ke[Re].simplePrints.push({object_id:pe.object_id||null,title:pe.title||" ",print_method:pe.print_method||"none",uploaded_files:O(pe.uploaded_files)||null,file_metadata:O(pe.file_metadata)||null,price:pe.price||0}))}Ee.forEach(pe=>{const Re=pe.idx||0;ke[Re]&&(ke[Re].addons||(ke[Re].addons={}),ke[Re].addons[pe.addon_id]={productId:pe.selected_product_id,variantId:pe.selected_variant_id||"",price:pe.price||0,quantity:pe.quantity||1})});for(const pe in ke)je.push({...ke[pe],idx:parseInt(pe)});nr(wt,ct(o).products=je,ct(o)),nr(wt,ct(o).index=(je.length>0,0),ct(o)),wt.updateTotalAmounts()}catch(Se){throw Se instanceof SyntaxError&&Se.message.includes("JSON")?(y(b,!0),y(x," "),y(S,"     .  .")):(y(b,!0),y(x," "),y(S,"     .")),Se}}function R(fe){y(v,!1)}function de(fe){var J,Se;try{const $=o().products[fe];if(!$||$.idx===void 0){y(b,!0),y(x," "),y(S,"    .");return}if(!((J=$.product)!=null&&J.id)){y(b,!0),y(x," "),y(S," ID   .");return}if(!((Se=l(h))!=null&&Se.id)){y(b,!0),y(x," "),y(S,"    .");return}y(L,fe),y(q,$.product.id),y(V,$.idx),ie=!0,console.log(" [Edit]    - Realtime   "),y(xe,!0)}catch{y(b,!0),y(x,""),y(S,"    .")}}function Be(){y(xe,!1),y(L,-1),y(q,""),y(V,-1),ie=!1,console.log(" [Edit]    - Realtime   ")}async function Pe(){var fe,J,Se,$,Ce,Ee,Oe,je,ke,pe,Re,et,Je,rt;y(P,!0);try{if(!((fe=l(h))!=null&&fe.id))throw new Error(" ID .");if(l(V)===-1)throw new Error(" idx  .");const Ke=Ur(pr);if(!Ke||!Ke.productSelection)throw new Error("  .");if(!Ke.productSelection.quantityByVariant||Object.keys(Ke.productSelection.quantityByVariant).length===0)throw new Error("   .");await O0(l(h).id,l(V));const nt=[],{quantityByVariant:st,variantDiscounts:pt,variantsByColor:It}=Ke.productSelection;let Pt="none";const St=Ur(wt).products;if(l(L)<0||l(L)>=St.length)throw console.error(" [Edit ] productIndex  :",{editingProductIndex:l(L),storeProductsLength:St.length}),new Error(`  . (productIndex: ${l(L)})`);const bt=St[l(L)];(J=bt==null?void 0:bt.product)!=null&&J.id&&bt.product.id!==Ke.productId&&console.warn(" [Edit ] productIndex productId   (  ):",{editingProductIndex:l(L),editingIdx:l(V),storeProductId:bt.product.id,currentProductId:Ke.productId});const ft=bt==null?void 0:bt.prints,jt=bt==null?void 0:bt.simplePrints;if(ft&&Array.isArray(ft)&&ft.length>0)Pt="detailed";else if(jt&&Array.isArray(jt)&&jt.length>0)Pt="simple";else if((Se=Ke.printSelection)!=null&&Se.currentMethod){const Lt=Ke.printSelection.currentMethod;(Lt==="detailed"||Lt==="simple"||Lt==="self-design")&&(Pt=Lt)}console.log(" [Edit ]  print_type:",Pt),console.log(" [Edit ] estimateStore.products[editingProductIndex]:",{editingProductIndex:l(L),editingIdx:l(V),prints:(ft==null?void 0:ft.length)||0,simplePrints:(jt==null?void 0:jt.length)||0,print_type:bt==null?void 0:bt.print_type}),console.log(" [Edit ] currentStore.printSelection:",Ke.printSelection);for(const Lt in st)for(const Et in st[Lt]){const $e=st[Lt][Et];if($e>0){const dt=pt==null?void 0:pt[Et],at=($=It[Lt])==null?void 0:$.find(Kt=>Kt.id===Et),Vt=((Ee=(Ce=at==null?void 0:at.prices)==null?void 0:Ce[0])==null?void 0:Ee.amount)||0,Jt=(dt==null?void 0:dt.discountedPrice)||Vt;nt.push({estimate_id:l(h).id,product_id:Ke.productId,variant_id:Et,quantity:$e,price:Jt,original_price:Vt,discount_amount:(dt==null?void 0:dt.discountAmount)||0,discount_type:((Oe=dt==null?void 0:dt.discountInfo)==null?void 0:Oe.type)||null,discount_value:((je=dt==null?void 0:dt.discountInfo)==null?void 0:je.value)||null,discount_direction:((ke=dt==null?void 0:dt.discountInfo)==null?void 0:ke.direction)||null,discount_min_quantity:((pe=dt==null?void 0:dt.discountInfo)==null?void 0:pe.min_quantity)||null,discount_max_quantity:((Re=dt==null?void 0:dt.discountInfo)==null?void 0:Re.max_quantity)||null,idx:l(V),print_type:Pt})}}if(nt.length>0){const{error:Lt}=await vt.from("estimate_items").insert(nt);if(Lt)throw new Error(`  : ${Lt.message}`)}if(ft&&Array.isArray(ft)&&ft.length>0){const Lt=ft,Et=((et=Ke.productSelection)==null?void 0:et.totalQuantity)||0;async function $e(at,Vt){var Jt,Kt,Gt,er;try{const Ct=((Jt=at.template)==null?void 0:Jt.id)||at.template_id;if(!Ct)return at.price||0;const xt=await Qc(Ct);if(!(xt!=null&&xt.template_product_variants)||xt.template_product_variants.length===0)return at.price||0;let Dt=null;at.variant_id&&(Dt=xt.template_product_variants.find(xr=>xr.variant_id===at.variant_id)),!Dt&&Array.isArray(at.colors)&&at.colors.length>0&&(Dt=xt.template_product_variants.find(xr=>xr.color_count===at.colors.length)),Dt||(Dt=xt.template_product_variants[0]);const lr=await hl(Dt.variant_id),ur=((Gt=(Kt=lr==null?void 0:lr.prices)==null?void 0:Kt[0])==null?void 0:Gt.amount)||0;if(Dt.min_quantity&&Vt<Dt.min_quantity)return Dt.plate_price||0;let hr=ur;const fr=((er=xt.product)==null?void 0:er.quantity_discounts)||[];if(fr.length>0){const xr=ia(Vt,ur,fr);xr!=null&&xr.hasDiscount&&(hr=xr.discountedPrice)}return hr*Vt}catch{return at.price||0}}const dt=await Promise.all(Lt.map(async at=>{var Jt,Kt,Gt,er,Ct,xt,Dt,lr,ur,hr,fr,xr,un;const Vt=await $e(at,Et);return{estimate_id:l(h).id,template_id:((Jt=at.template)==null?void 0:Jt.id)||at.template_id||null,colors:at.colors||[],price:Vt,object_id:at.objectId||at.object_id||null,variant_id:at.variant_id||null,name_sheet:at.nameSheet||at.name_sheet||null,uploads:at.uploads||null,original_price:at.original_price||((Kt=at.discountInfo)==null?void 0:Kt.originalPrice)||Vt||0,discount_amount:at.discount_amount||((Gt=at.discountInfo)==null?void 0:Gt.discountAmount)||0,discount_type:at.discount_type||((Ct=(er=at.discountInfo)==null?void 0:er.discountDetails)==null?void 0:Ct.type)||null,discount_value:at.discount_value||((Dt=(xt=at.discountInfo)==null?void 0:xt.discountDetails)==null?void 0:Dt.value)||null,discount_direction:at.discount_direction||((ur=(lr=at.discountInfo)==null?void 0:lr.discountDetails)==null?void 0:ur.direction)||null,discount_min_quantity:at.discount_min_quantity||((fr=(hr=at.discountInfo)==null?void 0:hr.discountDetails)==null?void 0:fr.min_quantity)||null,discount_max_quantity:at.discount_max_quantity||((un=(xr=at.discountInfo)==null?void 0:xr.discountDetails)==null?void 0:un.max_quantity)||null,idx:l(V)}}));if(dt.length>0){const{error:at}=await vt.from("estimate_prints").insert(dt);if(at)throw new Error(`   : ${at.message}`)}}if(jt&&Array.isArray(jt)&&jt.length>0){const Et=jt.map($e=>({estimate_id:l(h).id,object_id:$e.objectId||$e.object_id||null,title:$e.title||null,print_method:$e.printMethod||$e.print_method||null,uploaded_files:$e.uploadedFiles||$e.uploaded_files||null,file_metadata:$e.savedFileInfo||$e.file_metadata||null,price:$e.price||0,idx:l(V)}));if(Et.length>0){const{error:$e}=await vt.from("estimate_simple_prints").insert(Et);if($e)throw new Error(`   : ${$e.message}`)}}if((Je=Ke.addonSelection)!=null&&Je.selectedAddons){const Lt=[],Et=((rt=Ke.productSelection)==null?void 0:rt.totalQuantity)||0;for(const[$e,dt]of Object.entries(Ke.addonSelection.selectedAddons)){const at=dt;let Vt=0;if(at.variantId)try{const{data:Jt,error:Kt}=await vt.from("prices").select("amount").eq("variant_id",at.variantId).single();!Kt&&Jt&&(Vt=Jt.amount)}catch{}Lt.push({estimate_id:l(h).id,addon_id:$e,selected_product_id:at.productId,selected_variant_id:at.variantId||null,price:Vt,quantity:Et,idx:l(V)})}if(Lt.length>0){const{error:$e}=await vt.from("estimate_addon_items").insert(Lt);if($e)throw new Error(`  : ${$e.message}`)}}y(N,!0),setTimeout(()=>{y(N,!1)},3e3),Be(),await K(l(h).id)}catch(Ke){let nt="     .";Ke instanceof Error&&(nt=Ke.message,Ke.message.includes("duplicate key")?nt="  .  .":Ke.message.includes("foreign key")?nt="   .     .":Ke.message.includes("not null")?nt="  .    .":Ke.message.includes("permission")&&(nt="   .  .")),y(b,!0),y(x," "),y(S,nt)}finally{y(P,!1)}}async function He(fe){var J;try{const Se=o().products[fe];if(!Se||Se.idx===void 0){y(b,!0),y(x," "),y(S,"    .");return}if(!((J=l(h))!=null&&J.id)){y(b,!0),y(x," "),y(S,"    .");return}await O0(l(h).id,Se.idx),nr(wt,ct(o).products=o().products.filter(($,Ce)=>Ce!==fe),ct(o)),wt.updateTotalAmounts()}catch{y(b,!0),y(x," "),y(S,"    .")}}function W(fe){const J={:"delivery",:"pickup",:"quick"};return fe&&J[fe]||null}async function H(){var fe;if(!l(s)){y(b,!0),y(x," "),y(S,"    .");return}if(!a()){const J=ne(l(j));if(!J.valid){y(D,J.message),y(b,!0),y(x," "),y(S,J.message);return}y(D,"")}ue(),y(P,!0);try{if(!((fe=l(h))!=null&&fe.id))throw new Error("  .");const J=W(o().shippingMethod);await _c(l(h).id,{name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:o().postcode,address1:o().address1,address2:o().address2,comment:o().comment||null,shipping_method:J,pref_delivery_date:o().prefDeliveryDate||null,upload_memo:o().uploadMemo||null,design_confirm:o().designConfirm||"none",password:a()?null:l(j)}),await c5(l(h).id,"pending"),y(N,!0),setTimeout(()=>{y(N,!1)},3e3),y(b,!0),y(x," "),y(S,"  ."),y(I,()=>{window.location.href="/odiz/list.php"})}catch(J){y(b,!0),y(x," "),y(S,J instanceof Error?J.message:"    ."),y(I,void 0)}finally{y(P,!1)}}Zt(()=>o(),()=>{y(s,o().estimateName&&o().orderName&&o().phone1&&o().phone2&&o().phone3&&o().postcode&&o().address1)}),Fo(),cn();var te=vq(),Ae=lt(te),he=g(Ae);{var we=fe=>{var J=sq();U(fe,J)},ye=fe=>{var J=gq(),Se=g(J);{var $=Ht=>{var Xt=iq(),Wt=g(Xt);it("click",Wt,()=>window.location.href=`?mode=${u()}`),U(Ht,Xt)};be(Se,Ht=>{c()&&Ht($)})}var Ce=B(Se,2);{var Ee=Ht=>{var Xt=aq(),Wt=g(Xt);a1(Wt,{class:"odz-w-4 odz-h-4"}),U(Ht,Xt)};be(Ce,Ht=>{l(N)&&Ht(Ee)})}var Oe=B(Ce,2),je=g(Oe);{var ke=Ht=>{M5(Ht,{onSelectProduct:de,onDeleteProduct:He,get isEditable(){return l(w)},set isEditable(Xt){y(w,Xt)},$$legacy:!0})},pe=Ht=>{var Xt=lq(),Wt=g(Xt);BE(Wt,{class:"odz-w-16 odz-h-16 odz-text-gray-300 odz-mx-auto odz-mb-4"});var wr=B(Wt,4);{var br=vn=>{var Nt=Aq();it("click",Nt,()=>y(v,!0)),U(vn,Nt)};be(wr,vn=>{l(w)&&vn(br)})}U(Ht,Xt)};be(je,Ht=>{o().products&&o().products.length>0?Ht(ke):Ht(pe,!1)})}var Re=B(Oe,2),et=g(Re),Je=g(et),rt=B(g(Je),2),Ke=B(Je,2),nt=B(g(Ke),2),st=B(Ke,2),pt=B(g(st),2),It=B(st,2),Pt=B(g(It),2),St=g(Pt);De(()=>{o(),Hu(()=>{l(w)})});var bt=g(St);bt.value=(bt.__value="010")==null?"":"010";var ft=B(bt);ft.value=(ft.__value="011")==null?"":"011";var jt=B(ft);jt.value=(jt.__value="016")==null?"":"016";var Lt=B(jt);Lt.value=(Lt.__value="017")==null?"":"017";var Et=B(Lt);Et.value=(Et.__value="018")==null?"":"018";var $e=B(Et);$e.value=($e.__value="019")==null?"":"019";var dt=B(St,2),at=B(dt,2),Vt=B(It,4),Jt=B(g(Vt),2),Kt=g(Jt),Gt=B(Kt,2),er=B(Vt,2),Ct=B(g(er),2),xt=B(er,2),Dt=B(g(xt),2),lr=B(xt,2),ur=B(g(lr),2);De(()=>{o(),Hu(()=>{l(w)})});var hr=g(ur);hr.value=((hr.__value="")==null,"");var fr=B(hr);fr.value=(fr.__value="")==null?"":"";var xr=B(fr);xr.value=(xr.__value="")==null?"":"";var un=B(xr);un.value=(un.__value="")==null?"":"";var wn=B(lr,2),Dr=B(g(wn),2),Cr=B(wn,2);{var Vr=Ht=>{var Xt=uq(),Wt=B(g(Xt),2),wr=g(Wt);A1(wr,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform odz--translate-y-1/2 odz-w-5 odz-h-5 odz-text-gray-400"});var br=B(wr,2),vn=B(Wt,2);{var Nt=$r=>{var kn=dq(),Do=g(kn);De(()=>Qe(Do,l(D))),U($r,kn)},yr=$r=>{var kn=cq();U($r,kn)};be(vn,$r=>{l(D)?$r(Nt):$r(yr,!1)})}De(()=>{Pr(br,`odz-w-full odz-pl-10 odz-pr-4 odz-py-2.5 odz-border ${(l(D)?"odz-border-red-500":"odz-border-gray-300")??""} odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50`),br.disabled=!l(w)}),Fr(br,()=>l(j),$r=>y(j,$r)),U(Ht,Xt)};be(Cr,Ht=>{a()||Ht(Vr)})}var jr=B(Cr,2),Ir=B(g(jr),2),Br=B(Re,2),Gr=g(Br),Xr=g(Gr),bn=B(g(Xr),2),Wr=g(bn),mr=B(Xr,2),Tn=B(g(mr),2),Oo=g(Tn),ho=B(mr,2),Io=B(g(ho),2),gs=g(Io),eo=B(ho,2);{var $o=Ht=>{var Xt=hq(),Wt=B(g(Xt),2),wr=g(Wt);De(br=>Qe(wr,`-${br??""}`),[()=>Er(o().totalDiscountAmount)],At),U(Ht,Xt)};be(eo,Ht=>{o().totalDiscountAmount>0&&Ht($o)})}var Mn=B(eo,2),Ve=B(g(Mn),2),mt=g(Ve),Rt=B(Br,2);{var qt=Ht=>{var Xt=pq(),Wt=g(Xt),wr=g(Wt);{var br=Nt=>{var yr=fq();U(Nt,yr)},vn=Nt=>{var yr=xn(" ");U(Nt,yr)};be(wr,Nt=>{l(P)?Nt(br):Nt(vn,!1)})}De(()=>Wt.disabled=l(P)||!l(s)),it("click",Wt,H),U(Ht,Xt)};be(Rt,Ht=>{l(w)&&Ht(qt)})}De((Ht,Xt,Wt)=>{rt.disabled=!l(w),nt.disabled=!l(w),pt.disabled=!l(w),St.disabled=!l(w),dt.disabled=!l(w),at.disabled=!l(w),Gt.disabled=!l(w),Dt.disabled=!l(w),ur.disabled=!l(w),Dr.disabled=!l(w),Ir.disabled=!l(w),Qe(Wr,`${o().totalQuantity||0}`),Qe(Oo,Ht),Qe(gs,Xt),Qe(mt,Wt)},[()=>Er(o().totalProductAmount),()=>Er(o().totalPrintAmount),()=>Er(o().totalAmount)],At),Fr(rt,()=>o().estimateName,Ht=>nr(wt,ct(o).estimateName=Ht,ct(o))),Fr(nt,()=>o().organizationName,Ht=>nr(wt,ct(o).organizationName=Ht,ct(o))),Fr(pt,()=>o().orderName,Ht=>nr(wt,ct(o).orderName=Ht,ct(o))),Ru(St,()=>o().phone1,Ht=>nr(wt,ct(o).phone1=Ht,ct(o))),it("change",St,ue),Fr(dt,()=>o().phone2,Ht=>nr(wt,ct(o).phone2=Ht,ct(o))),it("input",dt,ue),Fr(at,()=>o().phone3,Ht=>nr(wt,ct(o).phone3=Ht,ct(o))),it("input",at,ue),Fr(Kt,()=>o().postcode,Ht=>nr(wt,ct(o).postcode=Ht,ct(o))),it("click",Gt,z),Fr(Ct,()=>o().address1,Ht=>nr(wt,ct(o).address1=Ht,ct(o))),Fr(Dt,()=>o().address2,Ht=>nr(wt,ct(o).address2=Ht,ct(o))),Ru(ur,()=>o().shippingMethod,Ht=>nr(wt,ct(o).shippingMethod=Ht,ct(o))),Fr(Dr,()=>o().prefDeliveryDate,Ht=>nr(wt,ct(o).prefDeliveryDate=Ht,ct(o))),Fr(Ir,()=>o().comment,Ht=>nr(wt,ct(o).comment=Ht,ct(o))),U(fe,J)};be(he,fe=>{l(p)?fe(we):fe(ye,!1)})}var Ie=B(Ae,2);{var le=fe=>{t2(fe,{addProduct:R,productType:"godo",get isProductSearchOpen(){return l(v)},set isProductSearchOpen(J){y(v,J)},$$legacy:!0})};be(Ie,fe=>{l(v)&&fe(le)})}var Te=B(Ie,2);{var Fe=fe=>{oq(fe,{get isOpen(){return l(xe)},get estimateId(){return l(h).id},get idx(){return l(V)},get productIndex(){return l(L)},get productId(){return l(q)},onClose:Be,onSave:Pe})};be(Te,fe=>{l(xe)&&l(h)&&fe(Fe)})}var Me=B(Te,2);Tc(Me,{get onClose(){return l(I)},get isOpen(){return l(b)},set isOpen(fe){y(b,fe)},get title(){return l(x)},set title(fe){y(x,fe)},get message(){return l(S)},set message(fe){y(S,fe)},$$legacy:!0});var Ne=B(Me,2);Lc(Ne,{get isLoading(){return l(p)},set isLoading(fe){y(p,fe)},$$legacy:!0}),U(n,te),An(),r()}const Vy={qnaId:null,title:"",content:"",customerName:"",customerPhone:"",customerEmail:"",products:[],nextIdx:0,editingIdx:null,editingProductId:null,isLoading:!1,isSaving:!1};function wq(){const{subscribe:n,set:e,update:t}=ld({...Vy});return{subscribe:n,reset:()=>{e({...Vy})},setQnaId:r=>{t(o=>({...o,qnaId:r}))},setTitle:r=>{t(o=>({...o,title:r}))},setContent:r=>{t(o=>({...o,content:r}))},setCustomerInfo:(r,o,s)=>{t(i=>({...i,customerName:r,customerPhone:o,customerEmail:s}))},addProduct:r=>{t(o=>{const s={...r,idx:o.nextIdx};return{...o,products:[...o.products,s],nextIdx:o.nextIdx+1}})},updateProduct:(r,o)=>{t(s=>({...s,products:s.products.map(i=>i.idx===r?{...i,...o}:i)}))},removeProduct:r=>{t(o=>({...o,products:o.products.filter(s=>s.idx!==r)}))},setEditing:(r,o)=>{t(s=>({...s,editingIdx:r,editingProductId:o}))},clearEditing:()=>{t(r=>({...r,editingIdx:null,editingProductId:null}))},setLoading:r=>{t(o=>({...o,isLoading:r}))},setSaving:r=>{t(o=>({...o,isSaving:r}))},setState:r=>{t(o=>({...o,...r}))},getState:()=>Ur({subscribe:n})}}const Yi=wq();function tC(n,e,t){return`qna_product_${e}_${n||"new"}_${t}`}function rC(n,e,t,r){const o=tC(n,e,t);try{sessionStorage.setItem(o,JSON.stringify(r))}catch(s){console.error("[QnaStore] Failed to save to session:",s)}}function bq(n,e,t){const r=tC(n,e,t);try{const o=sessionStorage.getItem(r);return o?JSON.parse(o):null}catch(o){return console.error("[QnaStore] Failed to load from session:",o),null}}function h0(n){try{const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&r.startsWith("qna_product_")&&r.includes(`_${n||"new"}_`)&&e.push(r)}e.forEach(t=>sessionStorage.removeItem(t))}catch(e){console.error("[QnaStore] Failed to clear all session:",e)}}async function yq(n){const{data:e,error:t}=await vt.rpc("hash_inquiry_password",{plain_password:n});if(t)throw console.error("[QnaService] hashPassword error:",t),t;return e}async function _q(n,e){const{data:t,error:r}=await vt.rpc("verify_inquiry_password",{inquiry_id_param:n,plain_password:e});if(r)throw console.error("[QnaService] verifyPassword error:",r),r;return t===!0}async function xq(n,e){try{const t=await Gg(n);return t?t.customer_id?e&&t.customer_id===e?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!1,message:"     ."}:{canAccess:!1,requiresPassword:!0,message:" ."}:{canAccess:!1,requiresPassword:!1,message:"   ."}}catch(t){return console.error("[QnaService] checkQnaAccess error:",t),{canAccess:!1,requiresPassword:!1,message:"     ."}}}async function Bq(n,e){try{return await _q(n,e)?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!0,message:"  ."}}catch(t){return console.error("[QnaService] accessQnaWithPassword error:",t),{canAccess:!1,requiresPassword:!0,message:"    ."}}}function zq(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*1e3)).padStart(3,"0");return`Q${e}${t}${r}${o}${s}${i}`}async function Cq(n){const e=zq();let t;!n.customer_id&&n.password&&(t=await yq(n.password));const{password:r,...o}=n,s={...o,inquiry_no:e,status:n.status||"pending"};t&&(s.password=t);const{data:i,error:a}=await vt.from("inquiries").insert(s).select().single();if(a)throw console.error("[QnaService] createQna error:",a),a;return i}async function Gg(n){const{data:e,error:t}=await vt.from("inquiries").select("*").eq("id",n).single();if(t){if(t.code==="PGRST116")return null;throw console.error("[QnaService] getQnaById error:",t),t}return e}async function Sq(n,e,t){let r=vt.from("inquiries").select("*").eq("shop_id",n).order("created_at",{ascending:!1});const{data:o,error:s}=await r;if(s)throw console.error("[QnaService] getQnaList error:",s),s;return o||[]}async function a2(n,e){const{data:t,error:r}=await vt.from("inquiries").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(r)throw console.error("[QnaService] updateQna error:",r),r;return t}async function nC(n,e){return a2(n,{status:e})}async function Eq(n){const{error:e}=await vt.from("inquiries").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQna error:",e),e}async function Fq(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await vt.from("inquiry_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaItems error:",o),o;return r||[]}async function A2(n){const{data:e,error:t}=await vt.from("inquiry_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaItems error:",t),t;return e||[]}async function Iq(n){const{error:e}=await vt.from("inquiry_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaItems error:",e),e}async function Uq(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await vt.from("inquiry_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaPrints error:",o),o;return r||[]}async function l2(n){const{data:e,error:t}=await vt.from("inquiry_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaPrints error:",t),t;return e||[]}async function Qq(n){const{error:e}=await vt.from("inquiry_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaPrints error:",e),e}async function oC(n,e){const{data:t,error:r}=await vt.from("inquiry_comments").insert({...e,inquiry_id:n}).select().single();if(r)throw console.error("[QnaService] addQnaComment error:",r),r;return e.writer==="manager"&&await nC(n,"answered"),t}async function Tq(n){const{data:e,error:t}=await vt.from("inquiry_comments").select("*").eq("inquiry_id",n).order("created_at",{ascending:!0});if(t)throw console.error("[QnaService] getQnaComments error:",t),t;return e||[]}async function Lq(n){const{error:e}=await vt.from("inquiry_comments").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQnaComment error:",e),e}async function Pq(n){const e=await Gg(n);if(!e)throw new Error("   .");const t=await A2(n),r=await l2(n),o=await c2(n),s=await u2(n),i=await c1({shop_id:e.shop_id,customer_id:e.customer_id,name:e.title,order_name:e.customer_name,phone:e.customer_phone,email:e.customer_email,status:"temp",memo:`: ${e.inquiry_no}

${e.content}`});if(!i.id)throw new Error("  .");for(const a of t)await u1({estimate_id:i.id,idx:a.idx,product_id:a.product_id,variant_id:a.variant_id,quantity:a.quantity});for(const a of r)a.print_type==="simple"?await P0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,title:a.title,print_method:a.print_method,uploaded_files:a.uploaded_files,file_metadata:a.file_metadata}):a.print_type==="detailed"&&await f1({estimate_id:i.id,idx:a.idx,object_id:a.object_id,template_id:a.template_id,colors:a.colors,uploads:a.uploaded_files});for(const a of o)await P0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,print_method:a.print_method,template_id:a.template_id,selected_colors:a.selected_colors,print_config:a.print_config,uploads:a.uploads,name_sheet:a.name_sheet,memo:a.memo});for(const a of s)await m1({estimate_id:i.id,idx:a.idx,addon_id:a.addon_id,selected_product_id:a.selected_product_id,selected_variant_id:a.selected_variant_id});return await a2(n,{converted_estimate_id:i.id,status:"closed"}),await oC(n,{writer:"system",writer_name:"",content:` . (: ${i.estimate_no})`}),i.id}function kq(n,e){return vt.channel(`qna-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`id=eq.${n}`},e).subscribe()}function Oq(n,e){return vt.channel(`qna-list-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`shop_id=eq.${n}`},e).subscribe()}function Dq(n,e){return vt.channel(`qna-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiry_comments",filter:`inquiry_id=eq.${n}`},e).subscribe()}function d2(n){n&&vt.removeChannel(n)}async function Nq(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await vt.from("inquiry_simple_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaSimplePrints error:",o),o;return r||[]}async function c2(n){const{data:e,error:t}=await vt.from("inquiry_simple_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaSimplePrints error:",t),t;return e||[]}async function Mq(n){const{error:e}=await vt.from("inquiry_simple_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaSimplePrints error:",e),e}async function Hq(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await vt.from("inquiry_addon_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaAddonItems error:",o),o;return r||[]}async function u2(n){const{data:e,error:t}=await vt.from("inquiry_addon_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaAddonItems error:",t),t;if(!e||e.length===0)return[];const r=[...new Set(e.map(h=>h.addon_id).filter(Boolean))],o=[...new Set(e.map(h=>h.selected_product_id).filter(Boolean))],s=[...new Set(e.map(h=>h.selected_variant_id).filter(Boolean))],[i,a,A]=await Promise.all([r.length>0?vt.from("product_addons").select("id, name").in("id",r):{data:[]},o.length>0?vt.from("products").select("id, title").in("id",o):{data:[]},s.length>0?vt.from("product_variants").select("id, title").in("id",s):{data:[]}]),d=new Map((i.data||[]).map(h=>[h.id,h.name])),c=new Map((a.data||[]).map(h=>[h.id,h.title])),u=new Map((A.data||[]).map(h=>[h.id,h.title]));return e.map(h=>({...h,addon_name:d.get(h.addon_id)||null,selected_product_name:c.get(h.selected_product_id)||null,selected_variant_name:u.get(h.selected_variant_id)||null}))}async function jq(n){const{error:e}=await vt.from("inquiry_addon_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaAddonItems error:",e),e}async function Rq(n){const{data:e}=await vt.from("inquiry_items").select("quantity, price").eq("inquiry_id",n);let t=0,r=0;if(e)for(const h of e){const p=h.quantity||0,v=h.price||0;t+=p*v,r+=p}const{data:o}=await vt.from("inquiry_prints").select("price").eq("inquiry_id",n);let s=0;if(o)for(const h of o)s+=h.price||0;const{data:i}=await vt.from("inquiry_simple_prints").select("price").eq("inquiry_id",n);if(i)for(const h of i)s+=h.price||0;const{data:a}=await vt.from("inquiry_addon_items").select("price, quantity").eq("inquiry_id",n);let A=0;if(a)for(const h of a){const p=h.quantity||1,v=h.price||0;A+=p*v}const{data:d}=await vt.from("inquiry_additional_costs").select("amount").eq("inquiry_id",n);let c=0;if(d)for(const h of d)c+=h.amount||0;const u=t+s+A+c;return{product_amount:t,print_amount:s,addon_amount:A,additional_amount:c,total_quantity:r,total_amount:u}}async function qq(n){const e=await Rq(n),{error:t}=await vt.from("inquiries").update({product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,updated_at:new Date().toISOString()}).eq("id",n);if(t)throw console.error("[QnaService] updateInquirySummary error:",t),t}async function Kq(n){const{data:e,error:t}=await vt.from("inquiry_estimates").select(`
      id,
      inquiry_id,
      estimate_id,
      created_at,
      created_by,
      memo,
      estimates:estimate_id (
        estimate_no,
        status,
        total_amount,
        created_at,
        name
      )
    `).eq("inquiry_id",n).order("created_at",{ascending:!1});if(t)throw console.error("[QnaService] getLinkedEstimates error:",t),t;return(e||[]).map(r=>({id:r.id,inquiry_id:r.inquiry_id,estimate_id:r.estimate_id,created_at:r.created_at,created_by:r.created_by,memo:r.memo,estimate:r.estimates}))}var $q=G(`<div class="odz-text-center odz-py-12 odz-bg-slate-50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><!> <p class="odz-text-slate-500 odz-font-bold">  .</p> <p class="odz-text-sm odz-text-slate-400 odz-mt-1">   ' '  .</p></div>`),Vq=G('<div class="odz-flex odz-gap-1"><button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" title=""><!></button> <button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-error" title=""><!></button></div>'),Gq=G('<li class="odz-flex odz-justify-between"><span> </span> <span class="odz-font-bold odz-text-slate-800"> </span></li>'),Wq=G('<div class="odz-mt-4 odz-bg-slate-50 odz-rounded-xl odz-p-3 odz-border odz-border-slate-100"><ul class="odz-text-sm odz-text-gray-600 odz-space-y-1.5"></ul></div>'),Xq=G('<span class="odz-text-gray-400"></span>'),Yq=G('<span class="odz-text-blue-800"> </span> <!>',1),Jq=G('<span class="odz-flex odz-items-center odz-gap-1"></span>'),Zq=G("<span> </span>"),eK=G('<span class="odz-text-blue-500"> </span>'),tK=G('<span class="odz-text-gray-500"> </span>'),rK=G('<li class="odz-flex odz-flex-wrap odz-items-center odz-gap-1"><!> <!> <!></li>'),nK=G('<div class="odz-mt-3 odz-bg-sky-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-sky-100"><p class="odz-text-xs odz-font-medium odz-text-blue-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-blue-700 odz-space-y-1"></ul></div>'),oK=G('<span class="odz-text-green-600"> </span>'),sK=G('<span class="odz-text-green-500"> </span>'),iK=G('<span class="odz-text-gray-500"> </span>'),aK=G('<li class="odz-flex odz-items-center odz-gap-1"><span> </span> <!> <!> <!></li>'),AK=G('<div class="odz-mt-3 odz-bg-emerald-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-emerald-100"><p class="odz-text-xs odz-font-medium odz-text-green-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-green-700 odz-space-y-1"></ul></div>'),lK=G('<span class="odz-text-purple-500"> </span>'),dK=G('<span class="odz-text-purple-600"> </span>'),cK=G('<span class="odz-text-purple-600 odz-font-medium odz-whitespace-nowrap"> </span>'),uK=G('<li class="odz-flex odz-items-center odz-justify-between"><span class="odz-flex odz-items-center odz-gap-1 odz-flex-wrap"><span class="odz-font-medium"> </span> <!> <!></span> <!></li>'),hK=G('<div class="odz-mt-3 odz-bg-purple-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-purple-100"><p class="odz-text-xs odz-font-medium odz-text-purple-800 odz-mb-1"></p> <ul class="odz-text-xs odz-text-purple-700 odz-space-y-1"></ul></div>'),fK=G('<div class="odz-group odz-relative odz-bg-white odz-rounded-2xl odz-border odz-border-slate-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all hover:odz-shadow-[0_8px_30px_rgba(0,0,0,0.1)] hover:odz-border-primary/20"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-items-start odz-justify-between"><div class="odz-flex-1"><h4 class="odz-font-bold odz-text-slate-900 odz-text-xl odz-tracking-tight"> </h4> <p class="odz-text-base odz-text-slate-500 odz-mt-1.5 odz-flex odz-items-center odz-gap-1"> : <span class="odz-font-bold odz-text-primary"> </span></p></div> <!></div> <div class="odz-mt-4 odz-pt-4 odz-border-t odz-border-gray-100 odz-space-y-3"><div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <!> <!> <!> <!></div></div></div>'),pK=G('<div class="odz-modal odz-modal-open" style="z-index: 9999;"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error"></button></div></div> <button type="button" class="odz-modal-backdrop" aria-label=""></button></div>'),gK=G('<div class="odz-space-y-3"><!></div> <!>',1);function sC(n,e){an(e,!1);const t=dg();let r=gt(e,"products",24,()=>[]),o=gt(e,"disabled",8,!1),s=ze(!1),i=ze(null),a=null,A=0;function d(j,D){j.stopPropagation(),j.preventDefault(),!o()&&t("edit",{idx:D.idx,productId:D.productId})}function c(j,D){if(j.stopPropagation(),j.preventDefault(),o())return;y(i,D);const ne=j.currentTarget;a=ne.closest(".odz-overflow-y-auto")||ne.closest('[style*="overflow"]')||document.querySelector(".odz-modal-box"),a&&(A=a.scrollTop,a.scrollTop=0,a.classList.add("odz-overflow-hidden")),y(s,!0)}function u(){l(i)&&t("delete",{idx:l(i).idx}),a&&(a.classList.remove("odz-overflow-hidden"),a=null),y(s,!1),y(i,null)}function h(){a&&(a.classList.remove("odz-overflow-hidden"),a.scrollTop=A,a=null),y(s,!1),y(i,null)}function p(j){return!j.variants||j.variants.length===0?" ":j.variants.map(D=>`${D.variantName||D.variantId}: ${D.quantity}`).join(", ")}function v(j){const D=j.prints&&j.prints.length>0,ne=j.simplePrints&&j.simplePrints.length>0;if(!D&&!ne)return" ";const xe=[];return D&&xe.push(`  ${j.prints.length}`),ne&&xe.push(`  ${j.simplePrints.length}`),xe.join(", ")}function w(j){return!j.addons||j.addons.length===0?" ":` ${j.addons.length}`}cn();var b=gK(),x=lt(b),S=g(x);{var I=j=>{var D=$q(),ne=g(D);$u(ne,{class:"odz-w-16 odz-h-16 odz-mx-auto odz-text-slate-300 odz-mb-4"}),U(j,D)},P=j=>{var D=Tt(),ne=lt(D);sr(ne,1,r,xe=>xe.idx,(xe,L)=>{var q=fK(),V=g(q),se=g(V),ve=g(se),ie=g(ve),ge=g(ie),re=B(ie,2),ue=B(g(re)),Z=g(ue),_e=B(ve,2);{var z=Ne=>{var fe=Vq(),J=g(fe),Se=g(J);A5(Se,{class:"odz-w-4 odz-h-4"});var $=B(J,2),Ce=g($);l1(Ce,{class:"odz-w-4 odz-h-4"}),it("click",J,Ee=>d(Ee,l(L))),it("click",$,Ee=>c(Ee,l(L))),U(Ne,fe)};be(_e,Ne=>{o()||Ne(z)})}var E=B(se,2),F=g(E),Q=g(F);$u(Q,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var M=B(Q,2),k=B(g(M),2),O=g(k),K=B(F,2),R=g(K);bE(R,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var de=B(R,2),Be=B(g(de),2),Pe=g(Be),He=B(K,2),W=g(He);L0(W,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var H=B(W,2),te=B(g(H),2),Ae=g(te),he=B(He,2);{var we=Ne=>{var fe=Wq(),J=g(fe);sr(J,5,()=>l(L).variants,vr,(Se,$)=>{var Ce=Gq(),Ee=g(Ce),Oe=g(Ee),je=B(Ee,2),ke=g(je);De(()=>{Qe(Oe,l($).variantName||l($).variantId),Qe(ke,`${l($).quantity??""}`)}),U(Se,Ce)}),U(Ne,fe)};be(he,Ne=>{l(L).variants&&l(L).variants.length>0&&Ne(we)})}var ye=B(he,2);{var Ie=Ne=>{var fe=nK(),J=B(g(fe),2);sr(J,5,()=>l(L).prints,vr,(Se,$)=>{var Ce=rK(),Ee=g(Ce);{var Oe=Je=>{var rt=Jq();sr(rt,5,()=>l($).parentTemplates,vr,(Ke,nt,st)=>{var pt=Yq(),It=lt(pt),Pt=g(It),St=B(It,2);{var bt=ft=>{var jt=Xq();U(ft,jt)};be(St,ft=>{st<l($).parentTemplates.length-1&&ft(bt)})}De(()=>Qe(Pt,l(nt).name)),U(Ke,pt)}),U(Je,rt)},je=Je=>{var rt=Tt(),Ke=lt(rt);{var nt=st=>{var pt=Zq(),It=g(pt);De(()=>Qe(It,`: ${(l($).templateName||l($).templateId)??""}`)),U(st,pt)};be(Ke,st=>{l($).templateId&&st(nt)},!0)}U(Je,rt)};be(Ee,Je=>{l($).parentTemplates&&l($).parentTemplates.length>0?Je(Oe):Je(je,!1)})}var ke=B(Ee,2);{var pe=Je=>{var rt=eK(),Ke=g(rt);De(()=>Qe(Ke,`(${l($).colors.length??""})`)),U(Je,rt)};be(ke,Je=>{l($).colors&&Array.isArray(l($).colors)&&l($).colors.length>0&&Je(pe)})}var Re=B(ke,2);{var et=Je=>{var rt=tK(),Ke=g(rt);De(()=>Qe(Ke,`- ${l($).memo??""}`)),U(Je,rt)};be(Re,Je=>{l($).memo&&Je(et)})}U(Se,Ce)}),U(Ne,fe)};be(ye,Ne=>{l(L).prints&&l(L).prints.length>0&&Ne(Ie)})}var le=B(ye,2);{var Te=Ne=>{var fe=AK(),J=B(g(fe),2);sr(J,5,()=>l(L).simplePrints,vr,(Se,$)=>{var Ce=aK(),Ee=g(Ce),Oe=g(Ee),je=B(Ee,2);{var ke=rt=>{var Ke=oK(),nt=g(Ke);De(()=>Qe(nt,`(${l($).printMethod??""})`)),U(rt,Ke)};be(je,rt=>{l($).printMethod&&rt(ke)})}var pe=B(je,2);{var Re=rt=>{var Ke=sK(),nt=g(Ke);De(()=>Qe(nt,`(${l($).selectedColors.length??""})`)),U(rt,Ke)};be(pe,rt=>{l($).selectedColors&&Array.isArray(l($).selectedColors)&&l($).selectedColors.length>0&&rt(Re)})}var et=B(pe,2);{var Je=rt=>{var Ke=iK(),nt=g(Ke);De(()=>Qe(nt,`- ${l($).memo??""}`)),U(rt,Ke)};be(et,rt=>{l($).memo&&rt(Je)})}De(()=>Qe(Oe,l($).objectId||" ")),U(Se,Ce)}),U(Ne,fe)};be(le,Ne=>{l(L).simplePrints&&l(L).simplePrints.length>0&&Ne(Te)})}var Fe=B(le,2);{var Me=Ne=>{var fe=hK(),J=B(g(fe),2);sr(J,5,()=>l(L).addons,vr,(Se,$)=>{var Ce=uK(),Ee=g(Ce),Oe=g(Ee),je=g(Oe),ke=B(Oe,2);{var pe=Ke=>{var nt=lK(),st=g(nt);De(()=>Qe(st,`(${l($).selectedProductName||""}${(l($).selectedVariantName?` - ${l($).selectedVariantName}`:"")??""})`)),U(Ke,nt)};be(ke,Ke=>{(l($).selectedProductName||l($).selectedVariantName)&&Ke(pe)})}var Re=B(ke,2);{var et=Ke=>{var nt=dK(),st=g(nt);De(()=>Qe(st,`x${l($).quantity??""}`)),U(Ke,nt)};be(Re,Ke=>{l($).quantity&&l($).quantity>1&&Ke(et)})}var Je=B(Ee,2);{var rt=Ke=>{var nt=cK(),st=g(nt);De(pt=>Qe(st,`${pt??""}`),[()=>l($).price.toLocaleString()],At),U(Ke,nt)};be(Je,Ke=>{l($).price&&Ke(rt)})}De(()=>Qe(je,l($).addonName||l($).addonId)),U(Se,Ce)}),U(Ne,fe)};be(Fe,Ne=>{l(L).addons&&l(L).addons.length>0&&Ne(Me)})}De((Ne,fe,J)=>{Qe(ge,l(L).productName||l(L).productId),Qe(Z,l(L).totalQuantity),Qe(O,Ne),Qe(Pe,fe),Qe(Ae,J)},[()=>p(l(L)),()=>v(l(L)),()=>w(l(L))],At),U(xe,q)}),U(j,D)};be(S,j=>{r().length===0?j(I):j(P,!1)})}var N=B(x,2);{var ee=j=>{var D=pK(),ne=g(D),xe=B(g(ne),2),L=g(xe),q=B(xe,2),V=g(q),se=B(V,2),ve=B(ne,2);De(()=>{var ie,ge;return Qe(L,`'${(((ie=l(i))==null?void 0:ie.productName)||((ge=l(i))==null?void 0:ge.productId))??""}' 
        ?`)}),it("click",V,h),it("click",se,u),it("click",ve,h),U(j,D)};be(N,j=>{l(s)&&j(ee)})}U(n,b),An()}var vK=G('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),mK=G('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),wK=G('<dialog class="odz-modal odz-modal-open odiz-app odz-items-center odz-justify-center"><div class="odz-modal-box odz-w-[90vw] odz-max-w-[1200px] odz-h-[90vh] odz-p-0 odz-relative odz-rounded-xl odz-shadow-2xl odz-bg-white"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"> </button></div></div></dialog>');function bK(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(Yi,"$qnaStore",t),s=ze(),i=ze(),a=dg();let A=gt(e,"isOpen",8,!1),d=gt(e,"productId",8),c=gt(e,"shopId",8);gt(e,"mallType",8,"");let u=gt(e,"qnaId",8,null),h=gt(e,"editingIdx",8,null),p=ze(!0),v=ze(""),w=ze(),b=ze("");async function x(){try{y(p,!0),y(v,"");const F=await dh(d(),c());if(y(b,(F==null?void 0:F.title)||(F==null?void 0:F.name)||d()),h()!==null){const Q=bq(u(),d(),h());Q?await I(Q):await S()}else await S();y(p,!1)}catch(F){console.error("[QnaProductSelector]  :",F),F instanceof Error?y(v,F.message):y(v,"     ."),y(p,!1)}}async function S(){P();const F=Date.now().toString(36)+Math.random().toString(36).substr(2),Q={productId:d(),productSelection:{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!1,sessionId:F,estimateId:l(s)};if(pr.set(Q),typeof window<"u"){const M=`fixedEstimate_${d()}_${l(s)}_${l(i)}`;window.sessionStorage.setItem(M,JSON.stringify(Q))}}async function I(F){const Q=Date.now().toString(36)+Math.random().toString(36).substr(2),M={productId:d(),productSelection:F.productSelection||{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:F.printSelection||null,addonSelection:F.addonSelection||null,additionalInfo:F.additionalInfo||null,currentStep:"product",isDebugMode:!1,sessionId:Q,estimateId:l(s)};if(typeof window<"u"){const k=`fixedEstimate_${d()}_${l(s)}_${l(i)}`,O=`simplePrint_${d()}_${l(s)}`,K=`detailedPrint_${d()}_${l(s)}`;window.sessionStorage.removeItem(O),window.sessionStorage.removeItem(K),window.sessionStorage.setItem(k,JSON.stringify(M)),F.simplePrintState&&(window.sessionStorage.setItem(O,JSON.stringify(F.simplePrintState)),console.log("[QnaProductSelector] simplePrint  :",F.simplePrintState)),F.detailedPrintState&&(window.sessionStorage.setItem(K,JSON.stringify(F.detailedPrintState)),console.log("[QnaProductSelector] detailedPrint  :",F.detailedPrintState))}pr.set(M),await new Promise(k=>setTimeout(k,50))}function P(){typeof window<"u"&&[`fixedEstimate_${d()}_${l(s)}_${l(i)}`,`simplePrint_${d()}_${l(s)}`,`detailedPrint_${d()}_${l(s)}`,`tab-state-${d()}`].forEach(Q=>window.sessionStorage.removeItem(Q))}function N(){var F,Q,M,k;try{const O=Ur(pr);if(!O.productSelection||O.productSelection.totalQuantity===0){alert("   .");return}const K=[],R=O.productSelection.quantityByVariant||{},de=O.productSelection.variantsByColor||{};for(const[ye,Ie]of Object.entries(R)){if(typeof Ie!="object"||Ie===null)continue;const le=de[ye]||[];for(const[Te,Fe]of Object.entries(Ie))if(Fe&&Number(Fe)>0){const Me=le.find(fe=>fe.id===Te),Ne=((Q=(F=Me==null?void 0:Me.prices)==null?void 0:F[0])==null?void 0:Q.amount)||0;K.push({variantId:Te,variantName:(Me==null?void 0:Me.name)||(Me==null?void 0:Me.title)||`${ye} - ${Te}`,quantity:Number(Fe),price:Ne,optionValues:(Me==null?void 0:Me.optionValues)||{color:ye}})}}const Be=[],Pe=[],He=[],H=Ur(wt).products[l(i)],te=H==null?void 0:H.simplePrints,Ae=H==null?void 0:H.prints;if(console.log("[QnaProductSelector]   :",{currentIdx:l(i),hasSimplePrints:(te==null?void 0:te.length)||0,hasDetailedPrints:(Ae==null?void 0:Ae.length)||0,printMethod:(M=O.printSelection)==null?void 0:M.currentMethod}),O.printSelection){const ye=O.printSelection.currentMethod;ye==="simple"?te&&Array.isArray(te)&&te.length>0&&te.forEach(Ie=>{Pe.push({objectId:Ie.objectId,printMethod:Ie.printMethod,templateId:Ie.templateId,selectedColors:Ie.selectedColors,printConfig:Ie.printConfig,uploads:Ie.uploadedFiles||Ie.uploads,nameSheet:Ie.nameSheet,memo:Ie.memo,price:Ie.price||0})}):ye==="detailed"&&Ae&&Array.isArray(Ae)&&Ae.length>0&&Ae.forEach(Ie=>{var Te,Fe,Me;const le=[];Ie.parentTemplates&&Array.isArray(Ie.parentTemplates)&&Ie.parentTemplates.forEach(Ne=>{le.push({id:Ne.id,name:Ne.name||Ne.id})}),(Te=Ie.template)!=null&&Te.id&&le.push({id:Ie.template.id,name:Ie.template.name||Ie.template.id}),Be.push({objectId:Ie.objectId,printType:"detailed",templateId:(Fe=Ie.template)==null?void 0:Fe.id,templateName:(Me=Ie.template)==null?void 0:Me.name,parentTemplates:le.length>0?le:void 0,colors:Ie.colors,uploadedFiles:Ie.uploads,memo:Ie.memo,price:Ie.price||0})})}if(console.log("[QnaProductSelector] currentState.addonSelection:",O.addonSelection),(k=O.addonSelection)!=null&&k.selectedAddons){const ye=O.addonSelection.selectedAddons;console.log("[QnaProductSelector] selectedAddons entries:",Object.entries(ye));for(const[Ie,le]of Object.entries(ye))if(console.log("[QnaProductSelector] Processing addon:",{addonId:Ie,selection:le}),le&&typeof le=="object"){const Te=le;console.log("[QnaProductSelector] sel.productId:",Te.productId),Te.productId?(He.push({addonId:Ie,selectedProductId:Te.productId,selectedVariantId:Te.variantId,price:Te.price||0,quantity:Te.quantity||1}),console.log("[QnaProductSelector] Addon added to array:",He[He.length-1])):console.log("[QnaProductSelector] Addon skipped - no productId")}}else console.log("[QnaProductSelector] No selectedAddons in addonSelection");console.log("[QnaProductSelector] Final addons array:",He);const he={productId:d(),productName:l(b),variants:K,prints:Be,simplePrints:Pe,addons:He,totalQuantity:O.productSelection.totalQuantity||0},we={productSelection:O.productSelection,printSelection:O.printSelection,addonSelection:O.addonSelection,additionalInfo:O.additionalInfo,simplePrintState:null,detailedPrintState:null};te&&Array.isArray(te)&&te.length>0&&(we.simplePrintState=te),Ae&&Array.isArray(Ae)&&Ae.length>0&&(we.detailedPrintState=Ae),rC(u(),d(),l(i),we),a("save",{idx:l(i),productData:he,isEdit:h()!==null}),ee()}catch(O){console.error("[QnaProductSelector]  :",O),alert("   .")}}function ee(){P(),pr.reset(),a("close")}function j(F){F.key==="Escape"&&ee()}function D(F){F.target===l(w)&&ee()}ps(()=>{document.body.style.overflow="",P(),pr.reset()}),Zt(()=>no(u()),()=>{y(s,`qna_${u()||"new"}`)}),Zt(()=>(no(h()),o()),()=>{y(i,h()??o().nextIdx)}),Zt(()=>(l(w),no(A())),()=>{l(w)&&(A()?(document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(Q=>{Q instanceof HTMLElement&&(Q.scrollTop=0)}),l(w).showModal(),x()):(document.body.style.overflow="",l(w).close()))}),Fo(),cn();var ne=wK(),xe=g(ne),L=g(xe),q=g(L),V=g(q),se=B(q,2),ve=g(se);xA(ve,{class:"odz-w-5 odz-h-5"});var ie=B(L,2),ge=g(ie);{var re=F=>{var Q=vK();U(F,Q)},ue=F=>{var Q=Tt(),M=lt(Q);{var k=K=>{var R=mK(),de=B(g(R),2),Be=g(de);De(()=>Qe(Be,l(v))),U(K,R)},O=K=>{ku(K,{get productId(){return d()},get estimateId(){return l(s)},get idx(){return l(i)},onSave:N})};be(M,K=>{l(v)?K(k):K(O,!1)},!0)}U(F,Q)};be(ge,F=>{l(p)?F(re):F(ue,!1)})}var Z=B(ie,2),_e=g(Z),z=B(_e,2),E=g(z);hs(ne,F=>y(w,F),()=>l(w)),De(()=>{Qe(V,`${(h()!==null?" ":" ")??""} - ${(l(b)||d())??""}`),z.disabled=l(p),Qe(E,h()!==null?"":"")}),it("click",se,ee),it("click",_e,ee),it("click",z,N),it("keydown",ne,j),it("click",ne,D),U(n,ne),An(),r()}var yK=G('<div class="loading-state svelte-11bib0p"><div class="loading-spinner svelte-11bib0p"><!></div> <p class="odz-text-slate-500 odz-mt-4 odz-text-sm svelte-11bib0p"> ...</p></div>'),_K=G('<div class="section-badge svelte-11bib0p"><!></div>'),xK=G('<span class="field-error svelte-11bib0p">4  </span>'),BK=G('<span class="field-error svelte-11bib0p">  </span>'),zK=G('<div class="password-section svelte-11bib0p"><div class="password-header svelte-11bib0p"><!> <div class="svelte-11bib0p"><h4 class="password-title svelte-11bib0p">  </h4> <p class="password-desc svelte-11bib0p">      (4~16)</p></div></div> <div class="password-fields svelte-11bib0p"><div class="form-field svelte-11bib0p"><label class="field-label svelte-11bib0p" for="password"> <span class="required svelte-11bib0p">*</span></label> <input type="password" id="password" placeholder=" " minlength="4" maxlength="16" class="text-input svelte-11bib0p"> <!></div> <div class="form-field svelte-11bib0p"><label class="field-label svelte-11bib0p" for="passwordConfirm">  <span class="required svelte-11bib0p">*</span></label> <input type="password" id="passwordConfirm" placeholder=" " maxlength="16" class="text-input svelte-11bib0p"> <!></div></div></div>'),CK=G('<div class="section-badge svelte-11bib0p"><!></div>'),SK=G('<div class="product-list-container svelte-11bib0p"><!></div>'),EK=G('<div class="empty-products svelte-11bib0p"><div class="empty-icon svelte-11bib0p"><!></div> <p class="empty-title svelte-11bib0p">  </p> <p class="empty-desc svelte-11bib0p">   </p> <button type="button" class="empty-add-btn svelte-11bib0p"><!>  </button></div>'),FK=G('<!> <span class="svelte-11bib0p"> ...</span>',1),IK=G('<!> <span class="svelte-11bib0p"> </span>',1),UK=G('<header class="qna-header svelte-11bib0p"><div class="header-content svelte-11bib0p"><div class="header-title-area svelte-11bib0p"><div class="header-icon svelte-11bib0p"><!></div> <div class="svelte-11bib0p"><h1 class="header-title svelte-11bib0p"> </h1> <p class="header-subtitle svelte-11bib0p">     </p></div></div> <button type="button" class="close-button svelte-11bib0p" title=""><!></button></div> <div class="progress-indicator svelte-11bib0p"><div class="progress-step svelte-11bib0p"><div class="step-icon svelte-11bib0p"><!></div> <span class="step-label svelte-11bib0p"></span></div> <div class="progress-line svelte-11bib0p"></div> <div class="progress-step svelte-11bib0p"><div class="step-icon svelte-11bib0p"><!></div> <span class="step-label svelte-11bib0p"></span></div> <div class="progress-line svelte-11bib0p"></div> <div class="progress-step svelte-11bib0p"><div class="step-icon svelte-11bib0p"><!></div> <span class="step-label svelte-11bib0p"></span></div></div></header> <main class="qna-main svelte-11bib0p"><section class="form-section svelte-11bib0p"><div class="section-header svelte-11bib0p"><div class="section-icon svelte-11bib0p"><!></div> <div class="section-title-area svelte-11bib0p"><h2 class="section-title svelte-11bib0p"> </h2> <p class="section-desc svelte-11bib0p">    </p></div> <!></div> <div class="form-field svelte-11bib0p" style="margin-bottom: 20px;"><label class="field-label svelte-11bib0p" for="customerName"> <span class="required svelte-11bib0p">*</span></label> <div class="input-wrapper svelte-11bib0p" style="position: relative;"><!> <input type="text" id="customerName" placeholder=" " class="text-input with-icon svelte-11bib0p" style="padding-left: 42px;"></div></div> <div class="form-field svelte-11bib0p" style="margin-bottom: 20px;"><label class="field-label svelte-11bib0p" for="customerPhone"></label> <div class="input-wrapper svelte-11bib0p" style="position: relative;"><!> <div class="phone-input-group svelte-11bib0p" style="padding-left: 42px;"><input type="text" placeholder="010" maxlength="3" class="phone-input svelte-11bib0p"> <span class="phone-separator svelte-11bib0p">-</span> <input type="text" placeholder="0000" maxlength="4" class="phone-input svelte-11bib0p"> <span class="phone-separator svelte-11bib0p">-</span> <input type="text" placeholder="0000" maxlength="4" class="phone-input svelte-11bib0p"></div></div></div> <div class="form-field svelte-11bib0p"><label class="field-label svelte-11bib0p" for="customerEmail"></label> <div class="input-wrapper svelte-11bib0p" style="position: relative;"><!> <input type="email" id="customerEmail" placeholder="example@email.com" class="text-input with-icon svelte-11bib0p" style="padding-left: 42px;"></div></div> <!></section> <section class="form-section svelte-11bib0p"><div class="section-header svelte-11bib0p"><div class="section-icon svelte-11bib0p"><!></div> <div class="section-title-area svelte-11bib0p"><h2 class="section-title svelte-11bib0p"> </h2> <p class="section-desc svelte-11bib0p">    </p></div> <!></div> <div class="form-stack svelte-11bib0p"><div class="form-field svelte-11bib0p"><label class="field-label svelte-11bib0p" for="title"> <span class="required svelte-11bib0p">*</span></label> <input type="text" id="title" placeholder="  " class="text-input svelte-11bib0p"></div> <div class="form-field svelte-11bib0p"><label class="field-label svelte-11bib0p" for="content"> <span class="required svelte-11bib0p">*</span></label> <textarea id="content" placeholder="    .  : -     -     -    " rows="8" class="textarea-input svelte-11bib0p"></textarea> <div class="field-hint svelte-11bib0p"><span class="char-count svelte-11bib0p"> </span></div></div></div></section> <section class="form-section product-section svelte-11bib0p"><div class="section-header svelte-11bib0p"><div class="section-icon product-icon svelte-11bib0p"><!></div> <div class="section-title-area svelte-11bib0p"><h2 class="section-title svelte-11bib0p">  <span class="optional-badge svelte-11bib0p"></span></h2> <p class="section-desc svelte-11bib0p">   </p></div> <button type="button" class="add-product-btn svelte-11bib0p"><!> <span class="svelte-11bib0p"> </span></button></div> <!></section></main> <footer class="action-bar svelte-11bib0p"><div class="action-content svelte-11bib0p"><button type="button" class="cancel-btn svelte-11bib0p"></button> <button type="button" class="submit-btn svelte-11bib0p"><!></button></div></footer>',1),QK=G(`<div class="qna-register-container odiz-app svelte-11bib0p" style="
    --primary: #d01b22;
    --primary-dark: #b01820;
    --primary-light: #fef2f2;
    --gray-50: #f8fafc;
    --gray-100: #f1f5f9;
    --gray-200: #e2e8f0;
    --gray-300: #cbd5e1;
    --gray-400: #94a3b8;
    --gray-500: #64748b;
    --gray-600: #475569;
    --gray-700: #334155;
    --gray-800: #1e293b;
    --gray-900: #0f172a;
    --amber-50: #fffbeb;
    --amber-100: #fef3c7;
    --amber-500: #f59e0b;
    --amber-600: #d97706;
    --green-500: #22c55e;
    --green-600: #16a34a;
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
    min-height: 100%;
    background: linear-gradient(180deg, #f8fafc 0%, #fff 100%);
    display: flex;
    flex-direction: column;
  "><!> <!> <!> <dialog class="cancel-dialog svelte-11bib0p"><div class="cancel-dialog-content svelte-11bib0p"><div class="cancel-dialog-icon svelte-11bib0p"><!></div> <h3 class="cancel-dialog-title svelte-11bib0p"> ?</h3> <p class="cancel-dialog-desc svelte-11bib0p">    .</p> <div class="cancel-dialog-actions svelte-11bib0p"><button type="button" class="dialog-btn-secondary svelte-11bib0p"> </button> <button type="button" class="dialog-btn-danger svelte-11bib0p"></button></div></div></dialog></div>`);function TK(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(Yi,"$qnaStore",t),s=ze(),i=ze(),a=ze(),A=ze(),d=ze(),c=ze(),u=ze(),h=ze();let p=gt(e,"mallType",8,""),v=gt(e,"customerId",8,"");gt(e,"sess",8,"");let w=gt(e,"shopId",8,""),b=gt(e,"qnaId",8,""),x=gt(e,"onSubmitSuccess",8,void 0),S=gt(e,"onCancel",8,void 0),I=ze(""),P=ze(""),N=ze(""),ee=ze(""),j=ze(""),D=ze(""),ne=ze(""),xe=ze(!1),L=ze(!1),q=ze(!1),V=ze(!1),se=ze(""),ve=ze(),ie=ze(),ge=ze();function re(){l(ee).length>=3&&l(ie)&&l(ie).focus()}function ue(){l(j).length>=4&&l(ge)&&l(ge).focus()}let Z=null,_e=ze([]),z=ze(""),E=ze("");Zn(async()=>{Yi.reset(),b()&&await F()}),ps(()=>{Yi.reset(),h0(b()||null)});async function F(){y(xe,!0);try{if(Z=await Gg(b()),Z){if(y(I,Z.title||""),y(P,Z.content||""),y(N,Z.customer_name||""),y(ne,Z.customer_email||""),Z.customer_phone){const Oe=Z.customer_phone.split("-");Oe.length===3&&(y(ee,Oe[0]),y(j,Oe[1]),y(D,Oe[2]))}const J=await A2(b()),Se=await l2(b()),$=await c2(b()),Ce=await u2(b()),Ee=new Map;for(const Oe of J){const je=Oe.idx||0;Ee.has(je)||Ee.set(je,{idx:je,productId:Oe.product_id,productName:Oe.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const ke=Ee.get(je);ke.variants.push({variantId:Oe.variant_id,variantName:Oe.variant_name,quantity:Oe.quantity||1,optionValues:Oe.option_values}),ke.totalQuantity+=Oe.quantity||1}for(const Oe of Se){const je=Oe.idx||0;if(Ee.has(je)){let ke=[];if(Oe.template_id)try{ke=(await uh(Oe.template_id)).map(et=>({id:et.id,name:et.name,image_url:et.image_url})),console.log("[QnaRegister] parentTemplates :",ke)}catch(Re){console.warn("[QnaRegister] parentTemplates  :",Re)}let pe=Oe.title;if(!pe&&Oe.object_id)try{const Re=await y1(Oe.object_id);Re&&(pe=Re.title||Re.name,console.log("[QnaRegister] print area title :",pe))}catch(Re){console.warn("[QnaRegister] print area  :",Re)}Ee.get(je).prints.push({objectId:Oe.object_id,printType:Oe.print_type,title:pe,printMethod:Oe.print_method,templateId:Oe.template_id,colors:Oe.colors,uploadedFiles:Oe.uploaded_files,fileMetadata:Oe.file_metadata,memo:Oe.memo,parentTemplates:ke})}}for(const Oe of $){const je=Oe.idx||0;Ee.has(je)&&Ee.get(je).simplePrints.push({objectId:Oe.object_id,printMethod:Oe.print_method,templateId:Oe.template_id,selectedColors:Oe.selected_colors,printConfig:Oe.print_config,uploads:Oe.uploads,nameSheet:Oe.name_sheet,memo:Oe.memo})}for(const Oe of Ce){const je=Oe.idx||0;Ee.has(je)&&Ee.get(je).addons.push({addonId:Oe.addon_id,addonName:Oe.addon_name||void 0,selectedProductId:Oe.selected_product_id,selectedProductName:Oe.selected_product_name||void 0,selectedVariantId:Oe.selected_variant_id,selectedVariantName:Oe.selected_variant_name||void 0,price:Oe.price||0,quantity:Oe.quantity||1})}y(_e,Array.from(Ee.values())),Yi.setState({qnaId:b(),title:l(I),content:l(P),customerName:l(N),customerPhone:l(d),customerEmail:l(ne),products:l(_e),nextIdx:l(_e).length>0?Math.max(...l(_e).map(Oe=>Oe.idx))+1:0})}}catch(J){console.error("[QnaRegister] loadQna error:",J),alert("   .")}finally{y(xe,!1)}}function Q(){y(q,!0)}function M(J){y(q,!1),y(se,J),y(V,!0)}function k(J){const{productData:Se,isEdit:$,idx:Ce}=J.detail;Se&&($&&Ce!==void 0?Yi.updateProduct(Ce,Se):Yi.addProduct(Se),y(_e,[...o().products])),y(V,!1),y(se,""),Yi.clearEditing()}function O(J){var Ee,Oe;const{idx:Se,productId:$}=J.detail,Ce=o().products.find(je=>je.idx===Se);if(Ce){const je={},ke=[];for(const Ke of Ce.variants){const nt=((Ee=Ke.optionValues)==null?void 0:Ee.color)||((Oe=Ke.optionValues)==null?void 0:Oe.)||"default";je[nt]||(je[nt]={},ke.push(nt)),je[nt][Ke.variantId]=Ke.quantity}const pe={};for(const Ke of Ce.addons||[])pe[Ke.addonId]={productId:Ke.selectedProductId,variantId:Ke.selectedVariantId,price:Ke.price||0,quantity:Ke.quantity||1};let Re=null,et=null,Je=null;Ce.simplePrints&&Ce.simplePrints.length>0&&(Re=Ce.simplePrints.map(Ke=>({objectId:Ke.objectId,printMethod:Ke.printMethod,templateId:Ke.templateId,selectedColors:Ke.selectedColors,printConfig:Ke.printConfig,uploadedFiles:Ke.uploads,uploads:Ke.uploads,nameSheet:Ke.nameSheet,memo:Ke.memo,price:Ke.price||0})),Je={currentMethod:"simple"}),Ce.prints&&Ce.prints.length>0&&(et=Ce.prints.map(Ke=>({objectId:Ke.objectId,title:Ke.title,template:Ke.templateId?{id:Ke.templateId,name:Ke.templateName||Ke.title}:null,parentTemplates:Ke.parentTemplates||[],colors:Ke.colors,uploads:Ke.uploadedFiles,memo:Ke.memo,price:Ke.price||0})),Je={currentMethod:"detailed"},console.log("[QnaRegister] detailedPrintState :",et));const rt={productSelection:{selectedColors:ke,quantityByVariant:je,totalQuantity:Ce.totalQuantity,variantsData:[]},printSelection:Je,addonSelection:{selectedAddons:pe},additionalInfo:null,simplePrintState:Re,detailedPrintState:et};rC(o().qnaId,$,Se,rt),console.log("[QnaRegister]    sessionStorage :",{idx:Se,productId:$,sessionData:rt})}Yi.setEditing(Se,$),y(se,$),y(V,!0)}function K(J){const{idx:Se}=J.detail;Yi.removeProduct(Se),y(_e,[...o().products])}async function R(J){if(J&&(J.stopPropagation(),J.preventDefault()),!l(A)){l(s)&&!b()?l(z)?l(z).length<4?alert(" 4  ."):l(z)!==l(E)?alert("  ."):alert(", ,    ."):alert("   ."):alert(", ,    .");return}y(L,!0);try{let Se;if(b()&&Z?(Se=await a2(b(),{title:l(I),content:l(P),customer_name:l(N),customer_phone:l(d),customer_email:l(ne)}),await Iq(b()),await Qq(b()),await Mq(b()),await jq(b())):Se=await Cq({shop_id:w(),customer_id:v()||void 0,customer_name:l(N),customer_phone:l(d),customer_email:l(ne),title:l(I),content:l(P),password:l(s)?l(z):void 0}),!Se.id)throw new Error("  .");const $=o().products;if($.length>0){const Ce=[];for(const ke of $)for(const pe of ke.variants)Ce.push({idx:ke.idx,product_id:ke.productId,variant_id:pe.variantId,quantity:pe.quantity,price:pe.price||0,product_name:ke.productName,variant_name:pe.variantName,option_values:pe.optionValues});Ce.length>0&&await Fq(Se.id,Ce);const Ee=[];for(const ke of $)for(const pe of ke.prints||[])Ee.push({idx:ke.idx,object_id:pe.objectId,print_type:pe.printType,title:pe.title,print_method:pe.printMethod,template_id:pe.templateId,colors:pe.colors,uploaded_files:pe.uploadedFiles,file_metadata:pe.fileMetadata,memo:pe.memo,price:pe.price||0});Ee.length>0&&await Uq(Se.id,Ee);const Oe=[];for(const ke of $)for(const pe of ke.simplePrints||[])Oe.push({idx:ke.idx,object_id:pe.objectId,print_method:pe.printMethod,template_id:pe.templateId,selected_colors:pe.selectedColors,print_config:pe.printConfig,uploads:pe.uploads,name_sheet:pe.nameSheet,memo:pe.memo,price:pe.price||0});Oe.length>0&&await Nq(Se.id,Oe);const je=[];console.log("[QnaRegister] Processing addon save for products:",$.map(ke=>{var pe;return{idx:ke.idx,productId:ke.productId,addonsCount:((pe=ke.addons)==null?void 0:pe.length)||0,addons:ke.addons}}));for(const ke of $){console.log("[QnaRegister] Product addons:",ke.addons);for(const pe of ke.addons||[])je.push({idx:ke.idx,addon_id:pe.addonId,selected_product_id:pe.selectedProductId,selected_variant_id:pe.selectedVariantId,price:pe.price||0,quantity:pe.quantity||1})}console.log("[QnaRegister] addonsToSave:",je),je.length>0?(console.log("[QnaRegister] Saving addons to database..."),await Hq(Se.id,je),console.log("[QnaRegister] Addons saved successfully")):console.log("[QnaRegister] No addons to save"),await qq(Se.id)}if(h0(b()||null),x()&&Se.id)x()(Se.id);else{const Ce=b()?`?qnaMode=detail&qnaId=${Se.id}`:"?qnaMode=list";window.location.href=window.location.pathname+Ce}}catch(Se){console.error("[QnaRegister] submitQna error:",Se),alert("  .  .")}finally{y(L,!1)}}function de(J){J.stopPropagation(),J.preventDefault(),l(ve)&&l(ve).showModal()}function Be(){l(ve)&&l(ve).close(),h0(b()||null),S()?S()():window.location.href=window.location.pathname+"?qnaMode=list"}function Pe(){l(ve)&&l(ve).close()}Zt(()=>no(v()),()=>{y(s,!v())}),Zt(()=>(l(z),l(E)),()=>{y(i,!l(z)||!l(E)||l(z)===l(E))}),Zt(()=>(l(s),no(b()),l(z),l(i)),()=>{y(a,!l(s)||!b()&&l(z).length>=4&&l(z).length<=16&&l(i))}),Zt(()=>(l(I),l(P),l(N),no(v()),no(b()),l(z),l(E)),()=>{y(A,l(I).trim()&&l(P).trim()&&l(N).trim()&&(v()||b()||l(z).trim()&&l(z)===l(E)&&l(z).length>=4))}),Zt(()=>(l(ee),l(j),l(D)),()=>{y(d,l(ee)&&l(j)&&l(D)?`${l(ee)}-${l(j)}-${l(D)}`:"")}),Zt(()=>l(N),()=>{y(c,l(N).trim().length>0)}),Zt(()=>(l(I),l(P)),()=>{y(u,l(I).trim().length>0&&l(P).trim().length>0)}),Zt(()=>(l(s),no(b()),l(z),l(i)),()=>{y(h,!l(s)||b()||l(z).length>=4&&l(i))}),Fo(),cn();var He=QK(),W=g(He);{var H=J=>{var Se=yK(),$=g(Se),Ce=g($);lc(Ce,{class:"odz-w-10 odz-h-10 odz-animate-spin"}),U(J,Se)},te=J=>{var Se=UK(),$=lt(Se),Ce=g($),Ee=g(Ce),Oe=g(Ee),je=g(Oe);a5(je,{class:"odz-w-6 odz-h-6"});var ke=B(Oe,2),pe=g(ke),Re=g(pe),et=B(Ee,2),Je=g(et);xA(Je,{class:"odz-w-5 odz-h-5"});var rt=B(Ce,2),Ke=g(rt),nt=g(Ke),st=g(nt);{var pt=$t=>{nu($t,{class:"odz-w-4 odz-h-4"})},It=$t=>{Wl($t,{class:"odz-w-4 odz-h-4"})};be(st,$t=>{l(c)?$t(pt):$t(It,!1)})}var Pt=B(Ke,2),St=B(Pt,2),bt=g(St),ft=g(bt);{var jt=$t=>{nu($t,{class:"odz-w-4 odz-h-4"})},Lt=$t=>{Zd($t,{class:"odz-w-4 odz-h-4"})};be(ft,$t=>{l(u)?$t(jt):$t(Lt,!1)})}var Et=B(St,2),$e=B(Et,2),dt=g($e),at=g(dt);{var Vt=$t=>{nu($t,{class:"odz-w-4 odz-h-4"})},Jt=$t=>{L0($t,{class:"odz-w-4 odz-h-4"})};be(at,$t=>{l(_e).length>0?$t(Vt):$t(Jt,!1)})}var Kt=B($,2),Gt=g(Kt),er=g(Gt),Ct=g(er),xt=g(Ct);Wl(xt,{class:"odz-w-5 odz-h-5"});var Dt=B(Ct,4);{var lr=$t=>{var Jr=_K(),Sn=g(Jr);nu(Sn,{class:"odz-w-4 odz-h-4"}),U($t,Jr)};be(Dt,$t=>{l(c)&&$t(lr)})}var ur=B(er,2),hr=B(g(ur),2),fr=g(hr);Wl(fr,{class:"input-icon",style:"position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #94a3b8; pointer-events: none;"});var xr=B(fr,2),un=B(ur,2),wn=B(g(un),2),Dr=g(wn);T0(Dr,{class:"input-icon",style:"position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #94a3b8; pointer-events: none; z-index: 1;"});var Cr=B(Dr,2),Vr=g(Cr),jr=B(Vr,4);hs(jr,$t=>y(ie,$t),()=>l(ie));var Ir=B(jr,4);hs(Ir,$t=>y(ge,$t),()=>l(ge));var Br=B(un,2),Gr=B(g(Br),2),Xr=g(Gr);wE(Xr,{class:"input-icon",style:"position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #94a3b8; pointer-events: none;"});var bn=B(Xr,2),Wr=B(Br,2);{var mr=$t=>{var Jr=zK(),Sn=g(Jr),fo=g(Sn);mE(fo,{class:"odz-w-5 odz-h-5 odz-text-amber-600"});var Uo=B(Sn,2),ai=g(Uo),Bi=B(g(ai),2),zi=B(Bi,2);{var Ai=Xn=>{var Zr=xK();U(Xn,Zr)};be(zi,Xn=>{l(z)&&l(z).length<4&&Xn(Ai)})}var qs=B(ai,2),ji=B(g(qs),2),jn=B(ji,2);{var Vo=Xn=>{var Zr=BK();U(Xn,Zr)};be(jn,Xn=>{l(E)&&!l(i)&&Xn(Vo)})}De(()=>{zs(Bi,"input-error",l(z)&&l(z).length<4),zs(ji,"input-error",l(E)&&!l(i))}),Fr(Bi,()=>l(z),Xn=>y(z,Xn)),Fr(ji,()=>l(E),Xn=>y(E,Xn)),U($t,Jr)};be(Wr,$t=>{l(s)&&!b()&&$t(mr)})}var Tn=B(Gt,2),Oo=g(Tn),ho=g(Oo),Io=g(ho);Zd(Io,{class:"odz-w-5 odz-h-5"});var gs=B(ho,4);{var eo=$t=>{var Jr=CK(),Sn=g(Jr);nu(Sn,{class:"odz-w-4 odz-h-4"}),U($t,Jr)};be(gs,$t=>{l(u)&&$t(eo)})}var $o=B(Oo,2),Mn=g($o),Ve=B(g(Mn),2),mt=B(Mn,2),Rt=B(g(mt),2),qt=B(Rt,2),Ht=g(qt),Xt=g(Ht),Wt=B(Tn,2),wr=g(Wt),br=g(wr),vn=g(br);L0(vn,{class:"odz-w-5 odz-h-5"});var Nt=B(br,4),yr=g(Nt);Vu(yr,{class:"odz-w-4 odz-h-4"});var $r=B(wr,2);{var kn=$t=>{var Jr=SK(),Sn=g(Jr);sC(Sn,{get products(){return l(_e)},$$events:{edit:O,delete:K}}),U($t,Jr)},Do=$t=>{var Jr=EK(),Sn=g(Jr),fo=g(Sn);$u(fo,{class:"odz-w-12 odz-h-12"});var Uo=B(Sn,6),ai=g(Uo);Vu(ai,{class:"odz-w-4 odz-h-4"}),it("click",Uo,Q),U($t,Jr)};be($r,$t=>{l(_e).length>0?$t(kn):$t(Do,!1)})}var Hr=B(Kt,2),Hn=g(Hr),so=g(Hn),Mt=B(so,2),Rs=g(Mt);{var Wn=$t=>{var Jr=FK(),Sn=lt(Jr);lc(Sn,{class:"odz-w-5 odz-h-5 odz-animate-spin"}),U($t,Jr)},Yr=$t=>{var Jr=IK(),Sn=lt(Jr);_E(Sn,{class:"odz-w-5 odz-h-5"});var fo=B(Sn,2),Uo=g(fo);De(()=>Qe(Uo,b()?" ":" ")),U($t,Jr)};be(Rs,$t=>{l(L)?$t(Wn):$t(Yr,!1)})}De(()=>{Qe(Re,b()?" ":" "),zs(Ke,"completed",l(c)),zs(Pt,"active",l(c)),zs(St,"completed",l(u)),zs(Et,"active",l(u)),zs($e,"completed",l(_e).length>0),zs(Gt,"section-complete",l(c)),zs(Tn,"section-complete",l(u)),Qe(Xt,`${l(P).length??""}`),zs(Wt,"section-complete",l(_e).length>0),Mt.disabled=!l(A)||l(L)}),it("click",et,$t=>de($t)),Fr(xr,()=>l(N),$t=>y(N,$t)),Fr(Vr,()=>l(ee),$t=>y(ee,$t)),it("input",Vr,re),Fr(jr,()=>l(j),$t=>y(j,$t)),it("input",jr,ue),Fr(Ir,()=>l(D),$t=>y(D,$t)),Fr(bn,()=>l(ne),$t=>y(ne,$t)),Fr(Ve,()=>l(I),$t=>y(I,$t)),Fr(Rt,()=>l(P),$t=>y(P,$t)),it("click",Nt,Q),it("click",so,$t=>de($t)),it("click",Mt,$t=>R($t)),U(J,Se)};be(W,J=>{l(xe)?J(H):J(te,!1)})}var Ae=B(W,2);{var he=J=>{t2(J,{addProduct:M,get productType(){return p()},excludeNoProcess:!0,get isProductSearchOpen(){return l(q)},set isProductSearchOpen(Se){y(q,Se)},$$legacy:!0})};be(Ae,J=>{l(q)&&J(he)})}var we=B(Ae,2);{var ye=J=>{const Se=At(()=>b()||null);bK(J,{get isOpen(){return l(V)},get productId(){return l(se)},get shopId(){return w()},get mallType(){return p()},get qnaId(){return l(Se)},get editingIdx(){return o().editingIdx},$$events:{save:k,close:()=>{y(V,!1),y(se,""),Yi.clearEditing()}}})};be(we,J=>{l(V)&&J(ye)})}var Ie=B(we,2),le=g(Ie),Te=g(le),Fe=g(Te);xA(Fe,{class:"odz-w-6 odz-h-6"});var Me=B(Te,6),Ne=g(Me),fe=B(Ne,2);hs(Ie,J=>y(ve,J),()=>l(ve)),it("click",Ne,Pe),it("click",fe,Be),it("click",Ie,O_(Pe)),U(n,He),An(),r()}var LK=G(' <span class="odz-font-mono odz-font-medium odz-text-primary"> </span>',1),PK=G('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),kK=G("<!>  ...",1),OK=G('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-sm"><button type="button" class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"><!></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-flex odz-items-center odz-gap-2"><!>  </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-4"><!>  .</p> <div class="odz-form-control odz-mb-4"><input type="password" placeholder=" (4~16)" maxlength="16" class="odz-input odz-input-bordered odz-w-full"> <!></div> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div></div>');function DK(n,e){an(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"qnaId",8,""),o=gt(e,"inquiryNo",8,"");const s=dg();let i=ze(""),a=ze(!1),A=ze("");async function d(){if(!l(i).trim()){y(A," .");return}if(l(i).length<4){y(A," 4  .");return}y(a,!0),y(A,""),s("verify",{qnaId:r(),password:l(i)})}function c(b,x){y(a,!1),!b&&x&&y(A,x)}function u(){y(i,""),y(A,""),y(a,!1),s("cancel")}function h(b){b.key==="Enter"&&!l(a)?d():b.key==="Escape"&&u()}Zt(()=>no(t()),()=>{t()&&(y(i,""),y(A,""),y(a,!1))}),Fo(),cn();var p=Tt(),v=lt(p);{var w=b=>{var x=OK(),S=g(x),I=g(S),P=g(I);xA(P,{class:"odz-w-4 odz-h-4"});var N=B(I,2),ee=g(N);A1(ee,{class:"odz-w-5 odz-h-5 odz-text-warning"});var j=B(N,2),D=g(j);{var ne=Z=>{var _e=LK(),z=B(lt(_e)),E=g(z);De(()=>Qe(E,o())),U(Z,_e)};be(D,Z=>{o()&&Z(ne)})}var xe=B(j,2),L=g(xe),q=B(L,2);{var V=Z=>{var _e=PK(),z=g(_e),E=g(z);De(()=>Qe(E,l(A))),U(Z,_e)};be(q,Z=>{l(A)&&Z(V)})}var se=B(xe,2),ve=g(se),ie=B(ve,2),ge=g(ie);{var re=Z=>{var _e=kK(),z=lt(_e);lc(z,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),U(Z,_e)},ue=Z=>{var _e=xn("");U(Z,_e)};be(ge,Z=>{l(a)?Z(re):Z(ue,!1)})}De(Z=>{I.disabled=l(a),L.disabled=l(a),zs(L,"odz-input-error",l(A)),ve.disabled=l(a),ie.disabled=Z},[()=>l(a)||!l(i).trim()],At),it("click",I,u),Fr(L,()=>l(i),Z=>y(i,Z)),it("keydown",L,h),it("click",ve,u),it("click",ie,d),it("click",x,O_(u)),U(b,x)};be(v,b=>{t()&&b(w)})}return U(n,p),P_(e,"setVerifyResult",c),An({setVerifyResult:c})}var NK=G('<button class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!>  </button>'),MK=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),HK=G('<div class="odz-alert odz-alert-error"><!> <span> </span> <button class="odz-btn odz-btn-sm odz-btn-ghost"> </button></div>'),jK=G('<button class="odz-btn odz-btn-primary odz-btn-sm odz-mt-4 odz-gap-1"><!>   </button>'),RK=G('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">  </p> <!>',1),qK=G('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   </p>',1),KK=G('<div class="odz-text-center odz-py-12 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-gray-200"><!> <!></div>'),$K=G('<span class="odz-badge odz-badge-xs odz-badge-info"></span>'),VK=G('<tr class="odz-cursor-pointer hover:odz-bg-blue-50/50 odz-transition-colors"><td class="odz-text-center odz-py-3"><span class="odz-inline-flex odz-items-center odz-gap-1 odz-text-sm odz-text-gray-500"> <!></span></td><td class="odz-text-center odz-py-3"><span> </span></td><td class="odz-py-3"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-800 odz-truncate odz-max-w-xs hover:odz-text-primary hover:odz-underline odz-transition-colors"> </span> <!></div></td><td class="odz-text-center odz-text-sm odz-text-gray-500 odz-py-3 odz-hidden sm:odz-table-cell odz-whitespace-nowrap"> </td><td class="odz-text-center odz-text-sm odz-text-gray-400 odz-py-3 odz-hidden md:odz-table-cell"> </td></tr>'),GK=G('<span class="odz-text-gray-300"> </span>'),WK=G('<div class="odz-bg-white odz-rounded-lg odz-border odz-border-gray-200 odz-overflow-hidden"><table class="odz-table odz-table-sm odz-w-full"><thead><tr class="odz-bg-gray-50 odz-border-b odz-border-gray-200"><th class="odz-text-center odz-w-24 odz-text-xs odz-font-medium odz-text-gray-600"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-medium odz-text-gray-600"></th><th class="odz-text-left odz-text-xs odz-font-medium odz-text-gray-600"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-medium odz-text-gray-600 odz-hidden sm:odz-table-cell"></th><th class="odz-text-center odz-w-32 odz-text-xs odz-font-medium odz-text-gray-600 odz-hidden md:odz-table-cell"></th></tr></thead><tbody class="odz-divide-y odz-divide-gray-100"></tbody></table></div> <div class="odz-text-center odz-text-xs odz-text-gray-400 odz-pt-2"> <!></div>',1),XK=G('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2> <!></div> <div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2"><div class="odz-relative odz-flex-1"><!> <input type="text" placeholder=", ,  ..." class="odz-input odz-input-bordered odz-input-sm odz-w-full odz-pl-9"></div> <select class="odz-select odz-select-bordered odz-select-sm odz-w-full sm:odz-w-32"><option></option><option></option><option></option><option></option></select></div> <!></div> <!>',1);function YK(n,e){an(e,!1);let t=gt(e,"shopId",8),r=gt(e,"customerId",8,void 0),o=gt(e,"onSelectQna",8,void 0),s=gt(e,"onCreateNew",8,void 0),i=ze([]),a=ze([]),A=ze(!0),d=ze(""),c=ze(""),u=ze("all"),h=null,p=ze(!1),v=ze(null),w=ze();Zn(async()=>{await b(),x()}),ps(()=>{h&&d2(h)});async function b(){try{y(A,!0),y(d,""),y(i,await Sq(t(),r()))}catch(O){console.error("[QnaList]   :",O),y(d,"     .")}finally{y(A,!1)}}function x(){h=Oq(t(),async O=>{console.log("[QnaList]  :",O),await b()})}function S(O){switch(O){case"pending":return{label:"",class:"odz-badge-warning",icon:yp};case"answered":return{label:"",class:"odz-badge-success",icon:a1};case"closed":return{label:"",class:"odz-badge-neutral",icon:Ku};default:return{label:"",class:"odz-badge-ghost",icon:yp}}}function I(O){return O?new Date(O).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}async function P(O){if(O.id)try{const K=await xq(O.id,r());K.canAccess?o()&&o()(O.id):K.requiresPassword?(y(v,O),y(p,!0)):alert(K.message||"  .")}catch(K){console.error("[QnaList]    :",K),alert("     .")}}async function N(O){const{qnaId:K,password:R}=O.detail;try{const de=await Bq(K,R);de.canAccess?(y(p,!1),y(v,null),o()&&o()(K)):l(w)&&l(w).setVerifyResult(!1,de.message||"  .")}catch(de){console.error("[QnaList]   :",de),l(w)&&l(w).setVerifyResult(!1,"    .")}}function ee(){y(p,!1),y(v,null)}function j(){s()&&s()()}Zt(()=>(l(i),l(c),l(u)),()=>{let O=l(i);if(l(c).trim()){const K=l(c).toLowerCase();O=O.filter(R=>{var de,Be,Pe;return((de=R.title)==null?void 0:de.toLowerCase().includes(K))||((Be=R.customer_name)==null?void 0:Be.toLowerCase().includes(K))||((Pe=R.inquiry_no)==null?void 0:Pe.toLowerCase().includes(K))})}l(u)!=="all"&&(O=O.filter(K=>K.status===l(u))),y(a,O)}),Fo(),cn();var D=XK(),ne=lt(D),xe=g(ne),L=B(g(xe),2);{var q=O=>{var K=NK(),R=g(K);Vu(R,{class:"odz-w-4 odz-h-4"}),it("click",K,j),U(O,K)};be(L,O=>{s()&&O(q)})}var V=B(xe,2),se=g(V),ve=g(se);_p(ve,{class:"odz-absolute odz-left-3 odz-top-1/2 odz--translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var ie=B(ve,2),ge=B(se,2);De(()=>{l(u),Hu(()=>{})});var re=g(ge);re.value=(re.__value="all")==null?"":"all";var ue=B(re);ue.value=(ue.__value="pending")==null?"":"pending";var Z=B(ue);Z.value=(Z.__value="answered")==null?"":"answered";var _e=B(Z);_e.value=(_e.__value="closed")==null?"":"closed";var z=B(V,2);{var E=O=>{var K=MK();U(O,K)},F=O=>{var K=Tt(),R=lt(K);{var de=Pe=>{var He=HK(),W=g(He);Ku(W,{class:"odz-w-5 odz-h-5"});var H=B(W,2),te=g(H),Ae=B(H,2);De(()=>Qe(te,l(d))),it("click",Ae,b),U(Pe,He)},Be=Pe=>{var He=Tt(),W=lt(He);{var H=Ae=>{var he=KK(),we=g(he);a5(we,{class:"odz-w-10 odz-h-10 odz-mx-auto odz-text-gray-300 odz-mb-3"});var ye=B(we,2);{var Ie=Te=>{var Fe=RK(),Me=B(lt(Fe),4);{var Ne=fe=>{var J=jK(),Se=g(J);Vu(Se,{class:"odz-w-4 odz-h-4"}),it("click",J,j),U(fe,J)};be(Me,fe=>{s()&&fe(Ne)})}U(Te,Fe)},le=Te=>{var Fe=qK();U(Te,Fe)};be(ye,Te=>{l(i).length===0?Te(Ie):Te(le,!1)})}U(Ae,he)},te=Ae=>{var he=WK(),we=lt(he),ye=g(we),Ie=B(g(ye));sr(Ie,5,()=>l(a),Ne=>Ne.id,(Ne,fe)=>{var J=VK();const Se=At(()=>S(l(fe).status));var $=g(J),Ce=g($),Ee=g(Ce),Oe=B(Ee);{var je=bt=>{A1(bt,{class:"odz-w-3 odz-h-3 odz-text-amber-500",title:" "})};be(Oe,bt=>{l(fe).customer_id||bt(je)})}var ke=B($),pe=g(ke),Re=g(pe),et=B(ke),Je=g(et),rt=g(Je),Ke=g(rt),nt=B(rt,2);{var st=bt=>{var ft=$K();U(bt,ft)};be(nt,bt=>{l(fe).converted_estimate_id&&bt(st)})}var pt=B(et),It=g(pt),Pt=B(pt),St=g(Pt);De(bt=>{Qe(Ee,`${l(fe).inquiry_no??""} `),Pr(pe,`odz-badge odz-badge-sm odz-gap-0.5 odz-whitespace-nowrap ${l(Se).class??""}`),Qe(Re,l(Se).label),Qe(Ke,l(fe).title||"( )"),Qe(It,l(fe).customer_name),Qe(St,bt)},[()=>I(l(fe).created_at)],At),it("click",J,()=>P(l(fe))),U(Ne,J)});var le=B(we,2),Te=g(le),Fe=B(Te);{var Me=Ne=>{var fe=GK(),J=g(fe);De(()=>Qe(J,`/  ${l(i).length??""}`)),U(Ne,fe)};be(Fe,Ne=>{l(a).length!==l(i).length&&Ne(Me)})}De(()=>Qe(Te,` ${l(a).length??""} `)),U(Ae,he)};be(W,Ae=>{l(a).length===0?Ae(H):Ae(te,!1)},!0)}U(Pe,He)};be(R,Pe=>{l(d)?Pe(de):Pe(Be,!1)},!0)}U(O,K)};be(z,O=>{l(A)?O(E):O(F,!1)})}var Q=B(ne,2);const M=At(()=>{var O;return((O=l(v))==null?void 0:O.id)||""}),k=At(()=>{var O;return((O=l(v))==null?void 0:O.inquiry_no)||""});hs(DK(Q,{get qnaId(){return l(M)},get inquiryNo(){return l(k)},get isOpen(){return l(p)},set isOpen(O){y(p,O)},$$events:{verify:N,cancel:ee},$$legacy:!0}),O=>y(w,O),()=>l(w)),Fr(ie,()=>l(c),O=>y(c,O)),Ru(ge,()=>l(u),O=>y(u,O)),U(n,D),An()}var JK=G('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-dots odz-loading-md odz-text-gray-400"></div></div>'),ZK=G('<div class="odz-text-center odz-text-red-500 odz-py-4"> </div>'),e$=G('<div class="odz-text-center odz-text-gray-500 odz-py-8"><p>  .</p> <p class="odz-text-sm odz-mt-1">   .</p></div>'),t$=G('<div class="odz-flex odz-justify-center"><div class="odz-px-3.5 odz-py-2 odz-bg-gray-200 odz-text-gray-600 odz-text-sm odz-rounded-full"> </div></div>'),r$=G("<button><!></button>"),n$=G('<div><div class="odz-flex-shrink-0"><div><!></div></div> <div><span class="odz-text-sm odz-text-gray-500 odz-mb-1"> </span> <div class="odz-group odz-relative"><div> </div> <!></div> <span class="odz-text-xs odz-text-gray-400 odz-mt-1"> </span></div></div>'),o$=G('<span class="odz-loading odz-loading-spinner odz-loading-sm"></span>'),s$=G('<div class="odz-flex odz-flex-col odz-h-full odz-min-h-[300px]"><div class="odz-flex-1 odz-overflow-y-auto odz-space-y-4 odz-p-5 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-slate-100 odz-max-h-[500px] odz-shadow-inner"><!></div> <div class="odz-mt-4 odz-flex odz-gap-2"><textarea placeholder=" ..." class="odz-textarea odz-textarea-bordered odz-flex-1 odz-resize-none odz-h-14 odz-rounded-2xl odz-bg-white odz-border-slate-200 focus:odz-border-primary odz-shadow-sm odz-p-4"></textarea> <button class="odz-btn odz-btn-primary odz-rounded-2xl odz-h-14 odz-w-14 odz-p-0 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!></button></div></div>');function i$(n,e){an(e,!1);let t=gt(e,"qnaId",8),r=gt(e,"isManager",8,!1),o=gt(e,"customerName",8,""),s=ze([]),i=ze(""),a=ze(!0),A=ze(!1),d=ze(""),c=null,u=ze();Zn(async()=>{await h(),p()}),ps(()=>{c&&d2(c)}),aS(()=>{v()});async function h(){try{y(a,!0),y(d,""),y(s,await Tq(t()))}catch(ve){console.error("[QnaComments]  :",ve),y(d,"    .")}finally{y(a,!1)}}function p(){c=Dq(t(),async ve=>{console.log("[QnaComments]  :",ve),await h()})}function v(){l(u)&&zr(u,l(u).scrollTop=l(u).scrollHeight)}async function w(){if(l(i).trim())try{y(A,!0);const ve=r()?"manager":"customer",ie=r()?"":o();await oC(t(),{writer:ve,writer_name:ie,content:l(i).trim()}),y(i,"")}catch(ve){console.error("[QnaComments]  :",ve),alert("    .")}finally{y(A,!1)}}async function b(ve){if(confirm("  ?"))try{await Lq(ve),y(s,l(s).filter(ie=>ie.id!==ve))}catch(ie){console.error("[QnaComments]  :",ie),alert("    .")}}function x(ve){ve.key==="Enter"&&!ve.shiftKey&&(ve.preventDefault(),w())}function S(ve){switch(r()?ve.writer:ve.writer,ve.writer){case"customer":return{icon:Wl,class:"odz-bg-blue-100 odz-text-blue-600",isMe:!r()};case"manager":return{icon:zE,class:"odz-bg-green-100 odz-text-green-600",isMe:r()};case"system":return{icon:pE,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1};default:return{icon:Wl,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1}}}function I(ve){if(!ve)return"";const ie=new Date(ve),ge=new Date;return ie.toDateString()===ge.toDateString()?ie.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):ie.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}cn();var P=s$(),N=g(P),ee=g(N);{var j=ve=>{var ie=JK();U(ve,ie)},D=ve=>{var ie=Tt(),ge=lt(ie);{var re=Z=>{var _e=ZK(),z=g(_e);De(()=>Qe(z,l(d))),U(Z,_e)},ue=Z=>{var _e=Tt(),z=lt(_e);{var E=Q=>{var M=e$();U(Q,M)},F=Q=>{var M=Tt(),k=lt(M);sr(k,1,()=>l(s),O=>O.id,(O,K)=>{var R=Tt();const de=At(()=>S(l(K)));var Be=lt(R);{var Pe=W=>{var H=t$(),te=g(H),Ae=g(te);De(()=>Qe(Ae,l(K).content)),U(W,H)},He=W=>{var H=n$(),te=g(H),Ae=g(te),he=g(Ae);I_(he,()=>l(de).icon,(Se,$)=>{$(Se,{class:"odz-w-4 odz-h-4"})});var we=B(te,2),ye=g(we),Ie=g(ye),le=B(ye,2),Te=g(le),Fe=g(Te),Me=B(Te,2);{var Ne=Se=>{var $=r$(),Ce=g($);l1(Ce,{class:"odz-w-3.5 odz-h-3.5 odz-text-gray-400 hover:odz-text-red-500"}),De(()=>Pr($,`odz-absolute odz-top-0 ${(l(de).isMe?"odz-left-0 -odz-translate-x-full odz-pr-1":"odz-right-0 odz-translate-x-full odz-pl-1")??""} odz-opacity-0 group-hover:odz-opacity-100 odz-transition-opacity`)),it("click",$,()=>b(l(K).id)),U(Se,$)};be(Me,Se=>{(l(de).isMe||r())&&l(K).writer!=="system"&&Se(Ne)})}var fe=B(le,2),J=g(fe);De(Se=>{Pr(H,`odz-flex odz-gap-2 ${(l(de).isMe?"odz-flex-row-reverse":"")??""}`),Pr(Ae,`odz-w-8 odz-h-8 odz-rounded-full ${l(de).class??""} odz-flex odz-items-center odz-justify-center`),Pr(we,`odz-flex odz-flex-col odz-max-w-[70%] ${(l(de).isMe?"odz-items-end":"odz-items-start")??""}`),Qe(Ie,l(K).writer_name||l(K).writer),Pr(Te,`odz-px-4 odz-py-2.5 odz-rounded-2xl odz-text-base odz-whitespace-pre-wrap odz-shadow-sm ${(l(de).isMe?"odz-bg-primary odz-text-white":"odz-bg-white odz-text-slate-800 odz-border odz-border-slate-200")??""}`),Qe(Fe,l(K).content),Qe(J,Se)},[()=>I(l(K).created_at)],At),U(W,H)};be(Be,W=>{l(K).writer==="system"?W(Pe):W(He,!1)})}U(O,R)}),U(Q,M)};be(z,Q=>{l(s).length===0?Q(E):Q(F,!1)},!0)}U(Z,_e)};be(ge,Z=>{l(d)?Z(re):Z(ue,!1)},!0)}U(ve,ie)};be(ee,ve=>{l(a)?ve(j):ve(D,!1)})}hs(N,ve=>y(u,ve),()=>l(u));var ne=B(N,2),xe=g(ne),L=B(xe,2),q=g(L);{var V=ve=>{var ie=o$();U(ve,ie)},se=ve=>{xE(ve,{class:"odz-w-5 odz-h-5"})};be(q,ve=>{l(A)?ve(V):ve(se,!1)})}De(ve=>{xe.disabled=l(A),L.disabled=ve},[()=>l(A)||!l(i).trim()],At),Fr(xe,()=>l(i),ve=>y(i,ve)),it("keydown",xe,x),it("click",L,w),U(n,P),An()}var a$=G('<button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-transition-transform hover:odz-rotate-90" title=""><!></button>'),A$=G('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-20 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500 odz-animate-pulse">   ...</span></div>'),l$=G('<div class="odz-alert odz-alert-error odz-shadow-sm odz-rounded-2xl"><!> <span> </span></div>'),d$=G('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3.5 odz-py-1.5 odz-rounded-full odz-bg-primary/10 odz-text-primary odz-text-xs odz-font-semibold odz-border odz-border-primary/20 odz-shadow-sm"><!> </span>'),c$=G('<button class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),u$=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),h$=G('<button class="odz-btn odz-btn-sm odz-btn-primary odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!> </button>'),f$=G('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),p$=G('<div class="odz-dropdown odz-dropdown-end"><button tabindex="0" role="button" class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button> <ul tabindex="0" class="odz-dropdown-content odz-z-[1] odz-menu odz-p-2 odz-shadow-xl odz-bg-base-100 odz-rounded-2xl odz-w-32 odz-mt-2 odz-border odz-border-gray-100 odz-backdrop-blur-sm"><li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li></ul></div> <!> <button class="odz-btn odz-btn-sm odz-btn-ghost odz-text-error odz-btn-square odz-rounded-xl hover:odz-bg-error/10 odz-transition-colors" title=""><!></button>',1),g$=G('<button type="button" class="odz-w-full odz-text-left odz-bg-slate-50 odz-rounded-2xl odz-p-4 odz-border odz-border-slate-100 hover:odz-bg-white hover:odz-shadow-xl hover:odz-border-primary/30 odz-transition-all odz-cursor-pointer odz-group"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-p-1.5 odz-rounded-lg odz-bg-white odz-border odz-border-slate-200 group-hover:odz-border-primary/20 group-hover:odz-bg-primary/10 odz-transition-colors"><!></div> <span class="odz-font-mono odz-text-sm odz-font-bold odz-text-slate-900"> </span></div> <span> </span></div> <div class="odz-flex odz-items-end odz-justify-between odz-gap-4"><p class="odz-text-sm odz-font-semibold odz-text-slate-700 odz-line-clamp-1 odz-flex-1"> </p> <span class="odz-text-[11px] odz-text-slate-400 odz-whitespace-nowrap"> </span></div></button>'),v$=G('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-primary odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><!>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-primary/10 odz-text-primary odz-text-sm odz-font-bold"> </span></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-3"></div></div>'),m$=G('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-primary odz-rounded-full"></div>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-slate-100 odz-text-slate-600 odz-text-sm odz-font-bold"> </span></div> <!></div>'),w$=G('<div class="odz-relative odz-overflow-hidden odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-absolute odz-top-0 odz-right-0 odz-w-64 odz-h-64 odz-bg-primary/5 -odz-z-10 odz-rounded-full -odz-mr-20 -odz-mt-20"></div> <div class="odz-flex odz-flex-wrap odz-items-start odz-justify-between odz-gap-6"><div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><span class="odz-px-2.5 odz-py-1 odz-bg-slate-50 odz-rounded-lg odz-text-xs odz-font-mono odz-font-semibold odz-text-slate-600 odz-border odz-border-slate-200 odz-shadow-sm"> </span> <span><!> </span> <!></div> <h3 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-leading-tight"> </h3></div> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><!> <!></div></div> <div class="odz-divider odz-my-5"></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-6 odz-p-6 odz-bg-slate-50 odz-rounded-2xl odz-border odz-border-slate-100"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900 odz-break-all"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900"> </p></div></div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-4 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-primary odz-rounded-full"></div>  </h4> <div class="odz-prose odz-prose-lg odz-max-w-none odz-text-slate-900 odz-whitespace-pre-wrap odz-leading-relaxed odz-bg-slate-50/50 odz-p-8 odz-rounded-2xl odz-border odz-text-base odz-border-slate-100"> </div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-5 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-primary odz-rounded-full"></div> </h4> <!></div>',1),b$=G('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><div class="odz-flex odz-items-center odz-gap-3"><h2 class="odz-text-2xl odz-font-bold odz-text-slate-900 odz-tracking-tight"> </h2></div> <!></div> <!></div>');function y$(n,e){an(e,!1);const t=ze();let r=gt(e,"qnaId",8);gt(e,"shopId",8);let o=gt(e,"isManager",8,!1),s=gt(e,"onBack",8,void 0),i=gt(e,"onEdit",8,void 0),a=gt(e,"onConvertToEstimate",8,void 0),A=gt(e,"onViewEstimate",8,void 0),d=ze(null),c=[],u=[],h=ze([]),p=ze([]),v=ze(!0),w=ze(""),b=ze(!1),x=ze(!1),S=null;Zn(async()=>{await I(),P()}),ps(()=>{S&&d2(S)});async function I(){try{if(y(v,!0),y(w,""),y(d,await Gg(r())),!l(d)){y(w,"   .");return}const[z,E,F,Q]=await Promise.all([A2(r()),l2(r()),c2(r()),u2(r())]);c=z,u=E,y(h,N(c,u,F,Q));try{y(p,await Kq(r()))}catch(M){console.warn("[QnaDetail]    :",M),y(p,[])}}catch(z){console.error("[QnaDetail]  :",z),y(w,"     .")}finally{y(v,!1)}}function P(){S=kq(r(),async z=>{console.log("[QnaDetail]  :",z),await I()})}function N(z,E,F,Q){const M=new Map;return z.forEach(k=>{const O=k.idx??0;M.has(O)||M.set(O,{idx:O,productId:k.product_id,productName:k.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const K=M.get(O);K.variants.push({variantId:k.variant_id||"",variantName:k.variant_name,quantity:k.quantity||0,optionValues:k.option_values}),K.totalQuantity+=k.quantity||0}),E.forEach(k=>{const O=k.idx??0,K=M.get(O);K&&K.prints.push({objectId:k.object_id||"",printType:k.print_type||"none",title:k.title,printMethod:k.print_method,templateId:k.template_id,colors:k.colors,uploadedFiles:k.uploaded_files,fileMetadata:k.file_metadata,memo:k.memo})}),F.forEach(k=>{const O=k.idx??0,K=M.get(O);K&&K.simplePrints&&K.simplePrints.push({objectId:k.object_id||"",printMethod:k.print_method,templateId:k.template_id,selectedColors:k.selected_colors,printConfig:k.print_config,uploads:k.uploads,nameSheet:k.name_sheet,memo:k.memo,price:k.price})}),Q.forEach(k=>{const O=k.idx??0,K=M.get(O);K&&K.addons&&K.addons.push({addonId:k.addon_id,addonName:k.addon_name||"",selectedProductId:k.selected_product_id,selectedProductName:k.selected_product_name||"",selectedVariantId:k.selected_variant_id,selectedVariantName:k.selected_variant_name||"",quantity:k.quantity||0})}),Array.from(M.values())}function ee(z){switch(z){case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200",icon:yp};case"answered":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200",icon:a1};case"closed":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300",icon:Ku};default:return{label:"",class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200",icon:yp}}}function j(z){return z?new Date(z).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function D(z){switch(z){case"temp":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200"};case"progress":return{label:"",class:"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200"};case"completed":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200"};case"canceled":return{label:"",class:"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200"};case"hold":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};default:return{label:z,class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}}function ne(){s()&&s()()}function xe(z){A()?A()(z):window.location.href=`/?mode=register&estimateId=${z}&returnTo=qna`}function L(){var z;i()&&((z=l(d))!=null&&z.id)&&i()(l(d).id)}async function q(){var z;if((z=l(d))!=null&&z.id&&confirm("  ?     ."))try{y(x,!0),await Eq(l(d).id),alert(" ."),s()&&s()()}catch(E){console.error("[QnaDetail]  :",E),alert("   .")}finally{y(x,!1)}}async function V(){var z;if((z=l(d))!=null&&z.id&&confirm("   ?"))try{y(b,!0);const E=await Pq(l(d).id);alert(" ."),a()&&a()(E)}catch(E){console.error("[QnaDetail]   :",E),alert("    .")}finally{y(b,!1)}}async function se(z){var E;if((E=l(d))!=null&&E.id)try{await nC(l(d).id,z),y(d,{...l(d),status:z})}catch(F){console.error("[QnaDetail]   :",F),alert("    .")}}Zt(()=>l(d),()=>{y(t,l(d)&&((l(d).product_amount??0)>0||(l(d).print_amount??0)>0||(l(d).addon_amount??0)>0||(l(d).additional_amount??0)>0))}),Fo(),cn();var ve=b$(),ie=g(ve),ge=B(g(ie),2);{var re=z=>{var E=a$(),F=g(E);xA(F,{class:"odz-w-5 odz-h-5"}),it("click",E,ne),U(z,E)};be(ge,z=>{s()&&z(re)})}var ue=B(ie,2);{var Z=z=>{var E=A$();U(z,E)},_e=z=>{var E=Tt(),F=lt(E);{var Q=k=>{var O=l$(),K=g(O);Ku(K,{class:"odz-w-6 odz-h-6"});var R=B(K,2),de=g(R);De(()=>Qe(de,l(w))),U(k,O)},M=k=>{var O=Tt(),K=lt(O);{var R=de=>{var Be=w$();const Pe=At(()=>ee(l(d).status));var He=lt(Be),W=B(g(He),2),H=g(W),te=g(H),Ae=g(te),he=g(Ae),we=B(Ae,2),ye=g(we);I_(ye,()=>l(Pe).icon,($e,dt)=>{dt($e,{class:"odz-w-3 odz-h-3"})});var Ie=B(ye),le=B(we,2);{var Te=$e=>{var dt=d$(),at=g(dt);Zd(at,{class:"odz-w-3 odz-h-3"}),U($e,dt)};be(le,$e=>{l(d).converted_estimate_id&&$e(Te)})}var Fe=B(te,2),Me=g(Fe),Ne=B(H,2),fe=g(Ne);{var J=$e=>{var dt=c$(),at=g(dt);A5(at,{class:"odz-w-4 odz-h-4"}),it("click",dt,L),U($e,dt)};be(fe,$e=>{i()&&l(d).status==="pending"&&$e(J)})}var Se=B(fe,2);{var $=$e=>{var dt=p$(),at=lt(dt),Vt=g(at),Jt=g(Vt);yE(Jt,{class:"odz-w-4 odz-h-4"});var Kt=B(Vt,2),Gt=g(Kt),er=g(Gt),Ct=B(Gt,2),xt=g(Ct),Dt=B(Ct,2),lr=g(Dt),ur=B(at,2);{var hr=Dr=>{var Cr=h$(),Vr=g(Cr);{var jr=Br=>{var Gr=u$();U(Br,Gr)},Ir=Br=>{Zd(Br,{class:"odz-w-4 odz-h-4"})};be(Vr,Br=>{l(b)?Br(jr):Br(Ir,!1)})}De(()=>Cr.disabled=l(b)),it("click",Cr,V),U(Dr,Cr)};be(ur,Dr=>{!l(d).converted_estimate_id&&l(h).length>0&&Dr(hr)})}var fr=B(ur,2),xr=g(fr);{var un=Dr=>{var Cr=f$();U(Dr,Cr)},wn=Dr=>{l1(Dr,{class:"odz-w-4 odz-h-4"})};be(xr,Dr=>{l(x)?Dr(un):Dr(wn,!1)})}De(()=>{zs(er,"odz-font-bold",l(d).status==="pending"),zs(xt,"odz-font-bold",l(d).status==="answered"),fr.disabled=l(x)}),it("click",er,()=>se("pending")),it("click",xt,()=>se("answered")),it("click",lr,()=>se("closed")),it("click",fr,q),U($e,dt)};be(Se,$e=>{o()&&l(d).status!=="closed"&&$e($)})}var Ce=B(W,4),Ee=g(Ce),Oe=B(g(Ee),2),je=g(Oe),ke=B(Ee,2),pe=B(g(ke),2),Re=g(pe),et=B(ke,2),Je=B(g(et),2),rt=g(Je),Ke=B(et,2),nt=B(g(Ke),2),st=g(nt),pt=B(He,2);{var It=$e=>{var dt=v$(),at=g(dt),Vt=g(at),Jt=g(Vt);Zd(Jt,{class:"odz-w-5 odz-h-5"});var Kt=B(Vt,2),Gt=g(Kt),er=B(at,2);sr(er,5,()=>l(p),vr,(Ct,xt)=>{var Dt=g$();const lr=At(()=>{var Xr;return D(((Xr=l(xt).estimate)==null?void 0:Xr.status)||"")});var ur=g(Dt),hr=g(ur),fr=g(hr),xr=g(fr);Zd(xr,{class:"odz-w-4 odz-h-4 odz-text-slate-400 group-hover:odz-text-primary"});var un=B(fr,2),wn=g(un),Dr=B(hr,2),Cr=g(Dr),Vr=B(ur,2),jr=g(Vr),Ir=g(jr),Br=B(jr,2),Gr=g(Br);De(Xr=>{var bn,Wr;Qe(wn,((bn=l(xt).estimate)==null?void 0:bn.estimate_no)||"-"),Pr(Dr,`odz-inline-flex odz-items-center odz-px-2 odz-py-1 odz-rounded-md odz-text-[10px] odz-font-bold odz-border ${l(lr).class??""}`),Qe(Cr,l(lr).label),Qe(Ir,((Wr=l(xt).estimate)==null?void 0:Wr.name)||"  "),Qe(Gr,Xr)},[()=>j(l(xt).created_at)],At),it("click",Dt,()=>xe(l(xt).estimate_id)),U(Ct,Dt)}),De(()=>Qe(Gt,l(p).length)),U($e,dt)};be(pt,$e=>{l(p).length>0&&$e(It)})}var Pt=B(pt,2),St=B(g(Pt),2),bt=g(St),ft=B(Pt,2);{var jt=$e=>{var dt=m$(),at=g(dt),Vt=B(g(at),2),Jt=g(Vt),Kt=B(at,2);sC(Kt,{get products(){return l(h)},disabled:!0}),De(()=>Qe(Jt,`${l(h).length??""}`)),U($e,dt)};be(ft,$e=>{l(h).length>0&&$e(jt)})}var Lt=B(ft,2),Et=B(g(Lt),2);i$(Et,{get qnaId(){return r()},get isManager(){return o()}}),De($e=>{Qe(he,`#${l(d).inquiry_no??""}`),Pr(we,`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-border ${l(Pe).class??""}`),Qe(Ie,` ${l(Pe).label??""}`),Qe(Me,l(d).title||"( )"),Qe(je,l(d).customer_name),Qe(Re,l(d).customer_phone||"-"),Qe(rt,l(d).customer_email||"-"),Qe(st,$e),Qe(bt,l(d).content||"( )")},[()=>j(l(d).created_at)],At),U(de,Be)};be(K,de=>{l(d)&&de(R)},!0)}U(k,O)};be(F,k=>{l(w)?k(Q):k(M,!1)},!0)}U(z,E)};be(ue,z=>{l(v)?z(Z):z(_e,!1)})}U(n,ve),An()}var _$=G('<dialog id="estimate-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-7xl odz-h-full main-estimate-modal-box"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),x$=G('<dialog id="button-estimate-modal" class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-7xl odz-h-[90vh] odz-overflow-y-auto odz-relative"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2 odz-z-10" type="button"></button> <div id="button-fixed-products-container" class="odiz-app"></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),B$=G("<main><!> <!></main>");function z$(n,e){an(e,!1);const[t,r]=Ko(),o=()=>on(Gl,"$customerStore",t);let s=ze(""),i="",a="",A="",d="",c="",u="",h="",p="",v="",w="",b=ze(!1),x=null,S=ze(null),I=[],P=null,N=null,ee="list",j=!1,D=null,ne=null,xe=null,L=null,q=ze(!1),V=null;function se(){var W,H,te,Ae,he,we,ye,Ie,le,Te;i=((W=document.getElementById("odiz-product-id"))==null?void 0:W.value)||"",A=((H=document.getElementById("odiz-shop-id"))==null?void 0:H.value)||"",d=((te=document.getElementById("odiz-sess"))==null?void 0:te.value)||"",c=((Ae=document.getElementById("odiz-customer-id"))==null?void 0:Ae.value)||"",a=((he=document.getElementById("odiz-mall_type"))==null?void 0:he.value)||"",u=((we=document.getElementById("odiz-customer-name"))==null?void 0:we.value)||"",h=((ye=document.getElementById("odiz-customer-phone"))==null?void 0:ye.value)||"",p=((Ie=document.getElementById("odiz-customer-address1"))==null?void 0:Ie.value)||"",v=((le=document.getElementById("odiz-customer-address2"))==null?void 0:le.value)||"",w=((Te=document.getElementById("odiz-customer-postcode"))==null?void 0:Te.value)||""}function ve(){document.querySelectorAll("input.odiz-hidden-class").forEach(H=>{const te=H.value;if(te){const Ae=document.getElementsByClassName(te);for(let he=0;he<Ae.length;he++)Ae[he].style.display="none"}})}function ie(W,H,te,Ae,he){const we=document.createElement("div");we.className="odiz-estimate-preview-container odiz-app";const ye=te.closest("div");ye&&(ye.insertAdjacentElement("afterend",we),Sa(m9,{target:we,props:{uuid:W,idx:H,appType:Ae,isAddCost:he}}))}function ge(W){const H=document.getElementById("inc_order_view");if(!H){console.warn("[ODIZ] #inc_order_view    .");return}H.querySelectorAll(".info").forEach(Ae=>{var Ie;if(Ae.hasAttribute("data-odiz-processed"))return;const he=((Ie=Ae.textContent)==null?void 0:Ie.replace(/\s+/g," ").trim())||"";if(!he.toLowerCase().includes("odiz"))return;const we=/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}(?:-add)?)-(\d+)/i,ye=he.match(we);if(ye){let le=ye[1],Te=!1;le.endsWith("-add")&&(le=le.slice(0,-4),Te=!0);const Fe=ye[2];I.push({uuid:le,idx:Fe}),Ae.setAttribute("data-odiz-processed","true"),ie(le,Fe,Ae,W,Te),console.log(`[ODIZ] Admin UUID : ${le}-${Fe} (isAddCost: ${Te})`)}})}function re(W){let Ae=0;function he(){return document.getElementById("inc_order_view")&&(ge(W),I.length>0)?(console.log(`[ODIZ] Admin : ${I.length} UUID   (: ${Ae+1})`),!0):!1}if(he())return;console.log("[ODIZ] Admin : #inc_order_view   ...  ");const we=setInterval(()=>{if(Ae++,he()){clearInterval(we);return}Ae>=10?(clearInterval(we),console.warn("[ODIZ] Admin : 10   UUID  ")):console.log(`[ODIZ] Admin :  ${Ae}/10...`)},1e3)}function ue(W,H=5e3){return new Promise(te=>{const Ae=document.getElementById(W);if(Ae)return te(Ae);const he=new MutationObserver(()=>{const we=document.getElementById(W);we&&(he.disconnect(),te(we))});he.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{he.disconnect(),te(null)},H)})}function Z(W){let te=new URLSearchParams(window.location.search).get(W);if(te)return te;try{if(te=new URL(window.location.href).searchParams.get(W),te)return te}catch{}const Ae=document.getElementById(`odiz-${W}`);return Ae!=null&&Ae.value?Ae.value:null}Zn(async()=>{var le,Te,Fe,Me,Ne;try{const fe=await h5();fe>0&&console.log(`[ODIZ]   : ${fe}    .`)}catch(fe){console.error("[ODIZ]    :",fe)}const W=Z("mode"),H=Z("estimateId"),te=Z("returnTo");console.log("[ODIZ] URL parameters:",{urlMode:W,urlEstimateId:H,urlReturnTo:te});let Ae=((le=document.getElementById("odiz-app-type"))==null?void 0:le.value)||"";(W==="register"||W==="list")&&(Ae=W,console.log("[ODIZ] AppType set from URL:",Ae)),H&&(P=H,console.log("[ODIZ] EditingEstimateId set:",P));const he=Z("qnaId"),we=Z("qnaMode"),ye=Z("isManager");if(he&&(N=he,console.log("[ODIZ] EditingQnaId set:",N)),(we==="register"||we==="list"||we==="detail")&&(ee=we,console.log("[ODIZ] QnaMode set from URL:",ee)),(ye==="true"||ye==="1")&&(j=!0,console.log("[ODIZ] IsQnaManager set:",j)),!Ae){console.warn("[ODIZ] No appType detected, exiting early");return}const Ie=document.getElementById("odiz-estimate");if(Ie&&Ie.addEventListener("click",z),se(),ve(),ni.set({id:A,name:"",sess:d,customer_id:c}),Gl.set({name:u,phone:h,address1:p,address2:v,postcode:w,mallType:a}),x=document.getElementById("odiz-estimate-list"),Ae==="order"||Ae==="admin")if(Ae==="admin")re(Ae);else{const fe=document.getElementById("select-order-class"),J=document.getElementById("select-order-class-uuid");if(fe&&J){const Se=fe.value,$=J.value,Ce=document.getElementsByClassName(Se);if(Ce.length>0){const Ee=Ce[0].getElementsByClassName($);for(let Oe=0;Oe<Ee.length;Oe++){const je=Ee[Oe],ke=((Te=je.textContent)==null?void 0:Te.trim())||"",pe=/odiz\s*:\s*([a-f0-9-]+)-(\d+)/i,Re=ke.match(pe);if(Re){let et=Re[1],Je=!1;et.endsWith("-add")&&(et=et.slice(0,-4),Je=!0);const rt=Re[2];I.push({uuid:et,idx:rt}),ie(et,rt,je,Ae,Je)}}}}}if(Ae==="list"&&x&&Sa(OR,{target:x,props:{openEstimateModal:(fe,J)=>{wt.reset(),y(b,fe),y(S,J)}}}),Ae==="run"&&i){const fe=document.getElementById("odiz-run-btn"),J=((Fe=document.getElementById("odiz-run-btn-name"))==null?void 0:Fe.value)||" ";if(fe){const Se=document.createElement("button");Se.textContent=J,Se.type="button",Se.className="odz-btn odz-btn-primary",Se.onclick=_e,fe.appendChild(Se)}}if(Ae==="fixed"){const fe=document.getElementById("odiz-fixed-area");if(fe&&i){const J=document.createElement("div");if(J.className="odiz-fixed-product-container odiz-app",fe.appendChild(J),a)try{const Se=await Xf(a,i);Se&&(y(s,Se.id),Sa(ku,{target:J,props:{productId:l(s)}}))}catch{}else i&&(y(s,i),Sa(ku,{target:J,props:{productId:l(s)}}))}}if(Ae==="button"){const fe=document.getElementById("odiz-button-area");if(fe&&i){const J=((Me=document.getElementById("odiz-button-text"))==null?void 0:Me.value)||"  ",Se=((Ne=document.getElementById("odiz-button-class"))==null?void 0:Ne.value)||"odz-btn odz-btn-primary",$=document.createElement("button");$.textContent=J,$.type="button",$.className=Se,$.onclick=E,fe.appendChild($),console.log("[ODIZ] Button mode initialized",{buttonText:J,productIdValue:i,mallType:a,shopId:A})}else console.warn("[ODIZ] Button mode: Missing odiz-button-area or product ID")}if(Ae==="register"){console.log("[ODIZ] Register mode detected, waiting for container...");const fe=await ue("odiz-estimate-register-area");if(fe){console.log("[ODIZ] Container found, mounting EstimateRegister with estimateId:",P);const J=document.createElement("div");J.className="odiz-estimate-register-container odiz-app",fe.appendChild(J),Sa(mq,{target:J,props:{mallType:a,customerId:c,sess:d,shopId:A,estimateId:P,returnTo:te||"list"}})}else console.error("[ODIZ] Failed to find #odiz-estimate-register-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-estimate-register-area"></div>')}if(Ae==="qna"){console.log("[ODIZ] QNA mode detected (dialog-based)");const fe=await ue("odiz-qna-area");if(fe){console.log("[ODIZ] QNA container found, mounting QnaList as main view...");const J=document.createElement("div");J.className="odiz-qna-container odiz-app",fe.appendChild(J),Sa(YK,{target:J,props:{shopId:A,customerId:c||void 0,onSelectQna:Se=>{ne=Se,K()},onCreateNew:()=>{D=null,O()}}}),N?ee==="detail"?(ne=N,setTimeout(()=>K(),100)):ee==="register"&&(D=N,setTimeout(()=>O(),100)):ee==="register"&&(D=null,setTimeout(()=>O(),100))}else console.error("[ODIZ] Failed to find #odiz-qna-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-qna-area"></div>')}});async function _e(){wt.reset(),y(S,null);try{a&&nr(Gl,ct(o).mallType=a,ct(o));const W=await Xf(a,i);W?(y(s,W.id),y(b,!0)):alert("     .")}catch{alert("     .")}}function z(){y(s,""),wt.reset(),y(S,null),y(b,!0)}async function E(){console.log("[ODIZ] Button mode click triggered");try{if(a&&i){const W=await Xf(a,i);if(W)y(s,W.id),console.log("[ODIZ] Button mode: Product resolved",{productId:l(s),mallType:a,productIdValue:i});else{console.error("[ODIZ] Button mode: Product not found"),alert("     .");return}}else if(i)y(s,i);else{console.error("[ODIZ] Button mode: No product ID available"),alert("   .");return}pr.reset(),Gn.reset(),y(q,!0),await ra(),Q()}catch(W){console.error("[ODIZ] Button mode error:",W),alert("     .")}}function F(){if(console.log("[ODIZ] Button mode: Closing modal"),V){try{uv(V)}catch(H){console.warn("[ODIZ] Button mode: Failed to unmount component:",H)}V=null}const W=document.getElementById("button-fixed-products-container");W&&(W.innerHTML=""),y(q,!1)}function Q(){const W=document.getElementById("button-fixed-products-container");if(!W){console.error("[ODIZ] Button mode: Container not found");return}W.innerHTML="",V=Sa(ku,{target:W,props:{productId:l(s)}}),console.log("[ODIZ] Button mode: FixedProducts mounted",{productId:l(s)})}function M(W){W.style.cssText=`
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      background: transparent !important;
    `}function k(W){W.style.cssText="",W.close()}function O(){const W=document.getElementById("qna-register-dialog-wrapper"),H=document.getElementById("qna-register-dialog");if(W&&H){if(W.classList.add("odiz-app"),xe){try{uv(xe)}catch(te){console.warn("[ODIZ] Failed to unmount previous QnaRegister instance:",te)}xe=null}H.innerHTML="",W.oncancel=te=>{te.preventDefault()},xe=Sa(TK,{target:H,props:{shopId:A,mallType:a,customerId:c||void 0,customerName:u,customerPhone:h,qnaId:D||"",onSubmitSuccess:te=>{k(W),ne=te,K()},onCancel:()=>{k(W)}}}),W.showModal(),M(W)}}function K(){const W=document.getElementById("qna-detail-dialog-wrapper"),H=document.getElementById("qna-detail-dialog");if(W&&H&&ne){if(W.classList.add("odiz-app"),L){try{uv(L)}catch(te){console.warn("[ODIZ] Failed to unmount previous QnaDetail instance:",te)}L=null}H.innerHTML="",W.oncancel=te=>{te.preventDefault()},L=Sa(y$,{target:H,props:{qnaId:ne,shopId:A,isManager:j,onBack:()=>{k(W)},onEdit:te=>{k(W),D=te,O()},onConvertToEstimate:te=>{console.log("[ODIZ] Converted to estimate:",te),alert(` . ( ID: ${te})`)}}}),W.showModal(),M(W)}}cn();var R=B$(),de=g(R);{var Be=W=>{var H=_$(),te=g(H),Ae=g(te),he=g(Ae),we=B(Ae,2);xM(we,{get productId(){return l(s)},get estimate(){return l(S)},get isEstimateModal(){return l(b)},set isEstimateModal(ye){y(b,ye)},$$legacy:!0}),it("click",he,()=>y(b,!1)),U(W,H)};be(de,W=>{l(b)&&W(Be)})}var Pe=B(de,2);{var He=W=>{var H=x$(),te=g(H),Ae=g(te),he=B(te,2),we=g(he);it("click",Ae,F),it("click",we,F),U(W,H)};be(Pe,W=>{l(q)&&l(s)&&W(He)})}U(n,R),An(),r()}Sa(z$,{target:document.getElementById("odiz-app")});export{Qn as _,C$ as c,vS as g};
