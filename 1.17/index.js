(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const Av=!1;var Hp=Array.isArray,EC=Array.prototype.indexOf,Pm=Array.from,jb=Object.defineProperty,_a=Object.getOwnPropertyDescriptor,Rb=Object.getOwnPropertyDescriptors,FC=Object.prototype,IC=Array.prototype,km=Object.getPrototypeOf;function Uc(n){return typeof n=="function"}const yd=()=>{};function UC(n){return n()}function lv(n){for(var e=0;e<n.length;e++)n[e]()}const ei=2,qb=4,Lu=8,Om=16,Yi=32,Md=64,ep=128,Ki=256,tp=512,$o=1024,Ua=2048,fl=4096,Ba=8192,jp=16384,QC=32768,Pu=65536,Kb=1<<17,TC=1<<19,$b=1<<20,Hi=Symbol("$state"),Vb=Symbol("legacy props"),dv=Symbol("");function Gb(n){return n===this.v}function Dm(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function LC(n,e){return n!==e}function Nm(n){return!Dm(n,this.v)}function PC(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kC(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function OC(n){throw new Error("https://svelte.dev/e/effect_orphan")}function DC(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function NC(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function MC(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function HC(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jC(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function RC(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function qC(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Hd=!1,KC=!1;function $C(){Hd=!0}const Mm=1,Hm=2,Wb=4,VC=8,GC=16,WC=1,XC=2,Xb=4,YC=8,JC=16,Yb=1,ZC=2,Zo=Symbol(),Jb="http://www.w3.org/2000/svg";function Rp(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let rn=null;function L2(n){rn=n}function Nr(n,e=!1,t){rn={p:rn,c:null,e:null,m:!1,s:n,x:null,l:null},Hd&&!e&&(rn.l={s:null,u:null,r1:[],r2:Ts(!1)})}function Mr(n){const e=rn;if(e!==null){n!==void 0&&(e.x=n);const i=e.e;if(i!==null){var t=nn,r=yn;e.e=null;try{for(var o=0;o<i.length;o++){var s=i[o];Vi(s.effect),vA(s.reaction),Ou(s.fn)}}finally{Vi(t),vA(r)}}rn=e.p,e.m=!0}return n||{}}function jd(){return!Hd||rn!==null&&rn.l===null}function Ts(n,e){var t={f:0,v:n,reactions:null,equals:Gb,rv:0,wv:0};return t}function qp(n,e=!1){var r;const t=Ts(n);return e||(t.equals=Nm),Hd&&rn!==null&&rn.l!==null&&((r=rn.l).s??(r.s=[])).push(t),t}function Ue(n,e=!1){return e4(qp(n,e))}function e4(n){return yn!==null&&!xa&&yn.f&ei&&(ji===null?u4([n]):ji.push(n)),n}function fr(n,e){return b(n,lt(()=>l(n))),e}function b(n,e){return yn!==null&&!xa&&jd()&&yn.f&(ei|Om)&&(ji===null||!ji.includes(n))&&qC(),hu(n,e)}function hu(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=h_(),Zb(n,Ua),jd()&&nn!==null&&nn.f&$o&&!(nn.f&(Yi|Md))&&(va===null?h4([n]):va.push(n))),e}function pa(n,e=1){var t=l(n),r=e===1?t++:t--;return b(n,t),r}function Zb(n,e){var t=n.reactions;if(t!==null)for(var r=jd(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;a&Ua||!r&&i===nn||(Bi(i,e),a&($o|Ki)&&(a&ei?Zb(i,fl):Wp(i)))}}let jm=!1;function Ad(n,e=null,t){if(typeof n!="object"||n===null||Hi in n)return n;const r=km(n);if(r!==FC&&r!==IC)return n;var o=new Map,s=Hp(n),i=Ts(0);s&&o.set("length",Ts(n.length));var a;return new Proxy(n,{defineProperty(A,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&HC();var u=o.get(d);return u===void 0?(u=Ts(c.value),o.set(d,u)):b(u,Ad(c.value,a)),!0},deleteProperty(A,d){var c=o.get(d);if(c===void 0)d in A&&o.set(d,Ts(Zo));else{if(s&&typeof d=="string"){var u=o.get("length"),h=Number(d);Number.isInteger(h)&&h<u.v&&b(u,h)}b(c,Zo),P2(i)}return!0},get(A,d,c){var g;if(d===Hi)return n;var u=o.get(d),h=d in A;if(u===void 0&&(!h||(g=_a(A,d))!=null&&g.writable)&&(u=Ts(Ad(h?A[d]:Zo,a)),o.set(d,u)),u!==void 0){var f=l(u);return f===Zo?void 0:f}return Reflect.get(A,d,c)},getOwnPropertyDescriptor(A,d){var c=Reflect.getOwnPropertyDescriptor(A,d);if(c&&"value"in c){var u=o.get(d);u&&(c.value=l(u))}else if(c===void 0){var h=o.get(d),f=h==null?void 0:h.v;if(h!==void 0&&f!==Zo)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(A,d){var f;if(d===Hi)return!0;var c=o.get(d),u=c!==void 0&&c.v!==Zo||Reflect.has(A,d);if(c!==void 0||nn!==null&&(!u||(f=_a(A,d))!=null&&f.writable)){c===void 0&&(c=Ts(u?Ad(A[d],a):Zo),o.set(d,c));var h=l(c);if(h===Zo)return!1}return u},set(A,d,c,u){var I;var h=o.get(d),f=d in A;if(s&&d==="length")for(var g=c;g<h.v;g+=1){var m=o.get(g+"");m!==void 0?b(m,Zo):g in A&&(m=Ts(Zo),o.set(g+"",m))}h===void 0?(!f||(I=_a(A,d))!=null&&I.writable)&&(h=Ts(void 0),b(h,Ad(c,a)),o.set(d,h)):(f=h.v!==Zo,b(h,Ad(c,a)));var y=Reflect.getOwnPropertyDescriptor(A,d);if(y!=null&&y.set&&y.set.call(u,c),!f){if(s&&typeof d=="string"){var _=o.get("length"),C=Number(d);Number.isInteger(C)&&C>=_.v&&b(_,C+1)}P2(i)}return!0},ownKeys(A){l(i);var d=Reflect.ownKeys(A).filter(h=>{var f=o.get(h);return f===void 0||f.v!==Zo});for(var[c,u]of o)u.v!==Zo&&!(c in A)&&d.push(c);return d},setPrototypeOf(){jC()}})}function P2(n,e=1){b(n,n.v+e)}function k2(n){return n!==null&&typeof n=="object"&&Hi in n?n[Hi]:n}function t4(n,e){return Object.is(k2(n),k2(e))}var O2,e_,t_;function r4(){if(O2===void 0){O2=window;var n=Element.prototype,e=Node.prototype;e_=_a(e,"firstChild").get,t_=_a(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function ku(n=""){return document.createTextNode(n)}function Ls(n){return e_.call(n)}function Kp(n){return t_.call(n)}function w(n,e){return Ls(n)}function ft(n,e){{var t=Ls(n);return t instanceof Comment&&t.data===""?Kp(t):t}}function z(n,e=1,t=!1){let r=n;for(;e--;)r=Kp(r);return r}function n4(n){n.textContent=""}function Pd(n){var e=ei|Ua,t=yn!==null&&yn.f&ei?yn:null;return nn===null||t!==null&&t.f&Ki?e|=Ki:nn.f|=$b,{ctx:rn,deps:null,effects:null,equals:Gb,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??nn}}function dt(n){const e=Pd(n);return e.equals=Nm,e}function r_(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)$i(e[t])}}function o4(n){for(var e=n.parent;e!==null;){if(!(e.f&ei))return e;e=e.parent}return null}function s4(n){var e,t=nn;Vi(o4(n));try{r_(n),e=p_(n)}finally{Vi(t)}return e}function n_(n){var e=s4(n),t=(lA||n.f&Ki)&&n.deps!==null?fl:$o;Bi(n,t),n.equals(e)||(n.v=e,n.wv=h_())}function o_(n){nn===null&&yn===null&&OC(),yn!==null&&yn.f&Ki&&nn===null&&kC(),Km&&PC()}function i4(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Rd(n,e,t,r=!0){var o=(n&Md)!==0,s=nn,i={ctx:rn,deps:null,nodes_start:null,nodes_end:null,f:n|Ua,first:null,fn:e,last:null,next:null,parent:o?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var a=bd;try{D2(!0),Gp(i),i.f|=QC}catch(c){throw $i(i),c}finally{D2(a)}}else e!==null&&Wp(i);var A=t&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&($b|ep))===0;if(!A&&!o&&r&&(s!==null&&i4(i,s),yn!==null&&yn.f&ei)){var d=yn;(d.effects??(d.effects=[])).push(i)}return i}function Rm(n){const e=Rd(Lu,null,!1);return Bi(e,$o),e.teardown=n,e}function cv(n){o_();var e=nn!==null&&(nn.f&Yi)!==0&&rn!==null&&!rn.m;if(e){var t=rn;(t.e??(t.e=[])).push({fn:n,effect:nn,reaction:yn})}else{var r=Ou(n);return r}}function a4(n){return o_(),qd(n)}function A4(n){const e=Rd(Md,n,!0);return(t={})=>new Promise(r=>{t.outro?dl(e,()=>{$i(e),r(void 0)}):($i(e),r(void 0))})}function Ou(n){return Rd(qb,n,!1)}function Jt(n,e){var t=rn,r={effect:null,ran:!1};t.l.r1.push(r),r.effect=qd(()=>{n(),!r.ran&&(r.ran=!0,b(t.l.r2,!0),lt(e))})}function to(){var n=rn;qd(()=>{if(l(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&$o&&Bi(t,fl),Kd(t)&&Gp(t),e.ran=!1}n.l.r2.v=!1}})}function qd(n){return Rd(Lu,n,!0)}function He(n,e=[],t=Pd){const r=e.map(t);return pl(()=>n(...r.map(l)))}function pl(n,e=0){return Rd(Lu|Om|e,n,!0)}function Sa(n,e=!0){return Rd(Lu|Yi,n,!0,e)}function s_(n){var e=n.teardown;if(e!==null){const t=Km,r=yn;N2(!0),vA(null);try{e.call(null)}finally{N2(t),vA(r)}}}function i_(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;$i(t,e),t=r}}function l4(n){for(var e=n.first;e!==null;){var t=e.next;e.f&Yi||$i(e),e=t}}function $i(n,e=!0){var t=!1;if((e||n.f&TC)&&n.nodes_start!==null){for(var r=n.nodes_start,o=n.nodes_end;r!==null;){var s=r===o?null:Kp(r);r.remove(),r=s}t=!0}i_(n,e&&!t),op(n,0),Bi(n,jp);var i=n.transitions;if(i!==null)for(const A of i)A.stop();s_(n);var a=n.parent;a!==null&&a.first!==null&&a_(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function a_(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function dl(n,e){var t=[];qm(n,t,!0),A_(t,()=>{$i(n),e&&e()})}function A_(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function qm(n,e,t){if(!(n.f&Ba)){if(n.f^=Ba,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&Pu)!==0||(r.f&Yi)!==0;qm(r,e,s?t:!1),r=o}}}function fu(n){l_(n,!0)}function l_(n,e){if(n.f&Ba){n.f^=Ba,n.f&$o||(n.f^=$o),Kd(n)&&(Bi(n,Ua),Wp(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&Pu)!==0||(t.f&Yi)!==0;l_(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let rp=!1,uv=[];function d_(){rp=!1;const n=uv.slice();uv=[],lv(n)}function $p(n){rp||(rp=!0,queueMicrotask(d_)),uv.push(n)}function d4(){rp&&d_()}const c_=0,c4=1;let Tf=!1,Lf=c_,pu=!1,gu=null,bd=!1,Km=!1;function D2(n){bd=n}function N2(n){Km=n}let YA=[],_d=0;let yn=null,xa=!1;function vA(n){yn=n}let nn=null;function Vi(n){nn=n}let ji=null;function u4(n){ji=n}let rs=null,Us=0,va=null;function h4(n){va=n}let u_=1,np=0,lA=!1,aA=null;function h_(){return++u_}function Kd(n){var d;var e=n.f;if(e&Ua)return!0;if(e&fl){var t=n.deps,r=(e&Ki)!==0;if(t!==null){var o,s,i=(e&tp)!==0,a=r&&nn!==null&&!lA,A=t.length;if(i||a){for(o=0;o<A;o++)s=t[o],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);i&&(n.f^=tp)}for(o=0;o<A;o++)if(s=t[o],Kd(s)&&n_(s),s.wv>n.wv)return!0}(!r||nn!==null&&!lA)&&Bi(n,$o)}return!1}function f4(n,e){for(var t=e;t!==null;){if(t.f&ep)try{t.fn(n);return}catch{t.f^=ep}t=t.parent}throw Tf=!1,n}function p4(n){return(n.f&jp)===0&&(n.parent===null||(n.parent.f&ep)===0)}function Vp(n,e,t,r){if(Tf){if(t===null&&(Tf=!1),p4(e))throw n;return}t!==null&&(Tf=!0);{f4(n,e);return}}function f_(n,e,t=0){var r=n.reactions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];s.f&ei?f_(s,e,t+1):e===s&&(t===0?Bi(s,Ua):s.f&$o&&Bi(s,fl),Wp(s))}}function p_(n){var f;var e=rs,t=Us,r=va,o=yn,s=lA,i=ji,a=rn,A=xa,d=n.f;rs=null,Us=0,va=null,yn=d&(Yi|Md)?null:n,lA=(d&Ki)!==0&&(!bd||o===null||A),ji=null,L2(n.ctx),xa=!1,np++;try{var c=(0,n.fn)(),u=n.deps;if(rs!==null){var h;if(op(n,Us),u!==null&&Us>0)for(u.length=Us+rs.length,h=0;h<rs.length;h++)u[Us+h]=rs[h];else n.deps=u=rs;if(!lA)for(h=Us;h<u.length;h++)((f=u[h]).reactions??(f.reactions=[])).push(n)}else u!==null&&Us<u.length&&(op(n,Us),u.length=Us);if(jd()&&va!==null&&!(n.f&(ei|fl|Ua)))for(h=0;h<va.length;h++)f_(va[h],n);return o!==null&&np++,c}finally{rs=e,Us=t,va=r,yn=o,lA=s,ji=i,L2(a),xa=A}}function g4(n,e){let t=e.reactions;if(t!==null){var r=EC.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&ei&&(rs===null||!rs.includes(e))&&(Bi(e,fl),e.f&(Ki|tp)||(e.f^=tp),r_(e),op(e,0))}function op(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)g4(n,t[r])}function Gp(n){var e=n.f;if(!(e&jp)){Bi(n,$o);var t=nn,r=rn;nn=n;try{e&Om?l4(n):i_(n),s_(n);var o=p_(n);n.teardown=typeof o=="function"?o:null,n.wv=u_;var s=n.deps,i;Av&&KC&&n.f&Ua}catch(a){Vp(a,n,t,r||n.ctx)}finally{nn=t}}}function g_(){if(_d>1e3){_d=0;try{DC()}catch(n){if(gu!==null)Vp(n,gu,null);else throw n}}_d++}function v_(n){var e=n.length;if(e!==0){g_();var t=bd;bd=!0;try{for(var r=0;r<e;r++){var o=n[r];o.f&$o||(o.f^=$o);var s=[];m_(o,s),v4(s)}}finally{bd=t}}}function v4(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(jp|Ba)))try{Kd(r)&&(Gp(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?a_(r):r.fn=null))}catch(o){Vp(o,r,null,r.ctx)}}}function m4(){if(pu=!1,_d>1001)return;const n=YA;YA=[],v_(n),pu||(_d=0,gu=null)}function Wp(n){Lf===c_&&(pu||(pu=!0,queueMicrotask(m4))),gu=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(Md|Yi)){if(!(t&$o))return;e.f^=$o}}YA.push(e)}function m_(n,e){var t=n.first,r=[];e:for(;t!==null;){var o=t.f,s=(o&Yi)!==0,i=s&&(o&$o)!==0,a=t.next;if(!i&&!(o&Ba))if(o&Lu){if(s)t.f^=$o;else{var A=yn;try{yn=t,Kd(t)&&Gp(t)}catch(h){Vp(h,t,null,t.ctx)}finally{yn=A}}var d=t.first;if(d!==null){t=d;continue}}else o&qb&&r.push(t);if(a===null){let h=t.parent;for(;h!==null;){if(n===h)break e;var c=h.next;if(c!==null){t=c;continue e}h=h.parent}}t=a}for(var u=0;u<r.length;u++)d=r[u],e.push(d),m_(d,e)}function w_(n){var e=Lf,t=YA;try{g_();const o=[];Lf=c4,YA=o,pu=!1,v_(t);var r=n==null?void 0:n();return d4(),(YA.length>0||o.length>0)&&w_(),_d=0,gu=null,r}finally{Lf=e,YA=t}}async function Oi(){await Promise.resolve(),w_()}function l(n){var e=n.f,t=(e&ei)!==0;if(aA!==null&&aA.add(n),yn!==null&&!xa){ji!==null&&ji.includes(n)&&RC();var r=yn.deps;n.rv<np&&(n.rv=np,rs===null&&r!==null&&r[Us]===n?Us++:rs===null?rs=[n]:(!lA||!rs.includes(n))&&rs.push(n))}else if(t&&n.deps===null&&n.effects===null){var o=n,s=o.parent;s!==null&&!(s.f&Ki)&&(o.f^=Ki)}return t&&(o=n,Kd(o)&&n_(o)),n.v}function w4(n){var e=aA;aA=new Set;var t=aA,r;try{if(lt(n),e!==null)for(r of aA)e.add(r)}finally{aA=e}return t}function sp(n){var e=w4(()=>lt(n));for(var t of e)if(t.f&Kb)for(const r of t.deps||[])r.f&ei||hu(r,r.v);else hu(t,t.v)}function lt(n){var e=xa;try{return xa=!0,n()}finally{xa=e}}const y4=-7169;function Bi(n,e){n.f=n.f&y4|e}function Cn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Hi in n)hv(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&Hi in t&&hv(t)}}}function hv(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{hv(n[r],e)}catch{}const t=km(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Rb(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function b4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const _4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function B4(n){return _4.includes(n)}const x4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function z4(n){return n=n.toLowerCase(),x4[n]??n}const C4=["touchstart","touchmove"];function S4(n){return C4.includes(n)}function E4(n,e){if(e){const t=document.body;n.autofocus=!0,$p(()=>{document.activeElement===t&&n.focus()})}}let M2=!1;function F4(){M2||(M2=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function y_(n){var e=yn,t=nn;vA(null),Vi(null);try{return n()}finally{vA(e),Vi(t)}}function $m(n,e,t,r=t){n.addEventListener(e,()=>y_(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),F4()}const b_=new Set,fv=new Set;function __(n,e,t,r={}){function o(s){if(r.capture||qc.call(e,s),!s.cancelBubble)return y_(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?$p(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function at(n,e,t,r,o){var s={capture:r,passive:o},i=__(n,e,t,s);(e===document.body||e===window||e===document)&&Rm(()=>{e.removeEventListener(n,i,s)})}function I4(n){for(var e=0;e<n.length;e++)b_.add(n[e]);for(var t of fv)t(n)}function qc(n){var C;var e=this,t=e.ownerDocument,r=n.type,o=((C=n.composedPath)==null?void 0:C.call(n))||[],s=o[0]||n.target,i=0,a=n.__root;if(a){var A=o.indexOf(a);if(A!==-1&&(e===document||e===window)){n.__root=e;return}var d=o.indexOf(e);if(d===-1)return;A<=d&&(i=A)}if(s=o[i]||n.target,s!==e){jb(n,"currentTarget",{configurable:!0,get(){return s||t}});var c=yn,u=nn;vA(null),Vi(null);try{for(var h,f=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];if(m!==void 0&&!s.disabled)if(Hp(m)){var[y,..._]=m;y.apply(s,[n,..._])}else m.call(s,n)}catch(I){h?f.push(I):h=I}if(n.cancelBubble||g===e||g===null)break;s=g}if(h){for(let I of f)queueMicrotask(()=>{throw I});throw h}}finally{n.__root=e,delete n.currentTarget,vA(c),Vi(u)}}}function Vm(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function mA(n,e){var t=nn;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function Y(n,e){var t=(e&Yb)!==0,r=(e&ZC)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=Vm(s?n:"<!>"+n),t||(o=Ls(o)));var i=r?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=Ls(i),A=i.lastChild;mA(a,A)}else mA(i,i);return i}}function Xp(n,e,t="svg"){var r=!n.startsWith("<!>"),o=(e&Yb)!==0,s=`<${t}>${r?n:"<!>"+n}</${t}>`,i;return()=>{if(!i){var a=Vm(s),A=Ls(a);if(o)for(i=document.createDocumentFragment();Ls(A);)i.appendChild(Ls(A));else i=Ls(A)}var d=i.cloneNode(!0);if(o){var c=Ls(d),u=d.lastChild;mA(c,u)}else mA(d,d);return d}}function en(n=""){{var e=ku(n+"");return mA(e,e),e}}function kt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=ku();return n.append(e,t),mA(e,t),n}function L(n,e){n!==null&&n.before(e)}function Le(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function ha(n,e){return U4(n,e)}const Hl=new Map;function U4(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){r4();var a=new Set,A=u=>{for(var h=0;h<u.length;h++){var f=u[h];if(!a.has(f)){a.add(f);var g=S4(f);e.addEventListener(f,qc,{passive:g});var m=Hl.get(f);m===void 0?(document.addEventListener(f,qc,{passive:g}),Hl.set(f,1)):Hl.set(f,m+1)}}};A(Pm(b_)),fv.add(A);var d=void 0,c=A4(()=>{var u=t??e.appendChild(ku());return Sa(()=>{if(s){Nr({});var h=rn;h.c=s}o&&(r.$$events=o),d=n(u,r)||{},s&&Mr()}),()=>{var g;for(var h of a){e.removeEventListener(h,qc);var f=Hl.get(h);--f===0?(document.removeEventListener(h,qc),Hl.delete(h)):Hl.set(h,f)}fv.delete(A),u!==t&&((g=u.parentNode)==null||g.removeChild(u))}});return pv.set(d,c),d}let pv=new WeakMap;function H2(n,e){const t=pv.get(n);return t?(pv.delete(n),t(e)):Promise.resolve()}function ze(n,e,t=!1){var r=n,o=null,s=null,i=Zo,a=t?Pu:0,A=!1;const d=(u,h=!0)=>{A=!0,c(h,u)},c=(u,h)=>{i!==(i=u)&&(i?(o?fu(o):h&&(o=Sa(()=>h(r))),s&&dl(s,()=>{s=null})):(s?fu(s):h&&(s=Sa(()=>h(r))),o&&dl(o,()=>{o=null})))};pl(()=>{A=!1,e(d),A||c(null,null)},a)}function Q4(n,e,t){var r=n,o=Zo,s,i=jd()?LC:Dm;pl(()=>{i(o,o=e())&&(s&&dl(s),s=Sa(()=>t(r)))})}function Ar(n,e){return e}function T4(n,e,t,r){for(var o=[],s=e.length,i=0;i<s;i++)qm(e[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var A=t.parentNode;n4(A),A.append(t),r.clear(),oA(n,e[0].prev,e[s-1].next)}A_(o,()=>{for(var d=0;d<s;d++){var c=e[d];a||(r.delete(c.k),oA(n,c.prev,c.next)),$i(c.e,!a)}})}function Yt(n,e,t,r,o,s=null){var i=n,a={items:new Map,first:null},A=(e&Wb)!==0;if(A){var d=n;i=d.appendChild(ku())}var c=null,u=!1,h=dt(()=>{var f=t();return Hp(f)?f:f==null?[]:Pm(f)});pl(()=>{var f=l(h),g=f.length;u&&g===0||(u=g===0,L4(f,a,i,o,e,r,t),s!==null&&(g===0?c?fu(c):c=Sa(()=>s(i)):c!==null&&dl(c,()=>{c=null})),l(h))})}function L4(n,e,t,r,o,s,i){var te,le,ne,Be;var a=(o&VC)!==0,A=(o&(Mm|Hm))!==0,d=n.length,c=e.items,u=e.first,h=u,f,g=null,m,y=[],_=[],C,I,N,k;if(a)for(k=0;k<d;k+=1)C=n[k],I=s(C,k),N=c.get(I),N!==void 0&&((te=N.a)==null||te.measure(),(m??(m=new Set)).add(N));for(k=0;k<d;k+=1){if(C=n[k],I=s(C,k),N=c.get(I),N===void 0){var W=h?h.e.nodes_start:t;g=k4(W,e,g,g===null?e.first:g.next,C,I,k,r,o,i),c.set(I,g),y=[],_=[],h=g.next;continue}if(A&&P4(N,C,k,o),N.e.f&Ba&&(fu(N.e),a&&((le=N.a)==null||le.unfix(),(m??(m=new Set)).delete(N))),N!==h){if(f!==void 0&&f.has(N)){if(y.length<_.length){var V=_[0],H;g=V.prev;var J=y[0],xe=y[y.length-1];for(H=0;H<y.length;H+=1)j2(y[H],V,t);for(H=0;H<_.length;H+=1)f.delete(_[H]);oA(e,J.prev,xe.next),oA(e,g,J),oA(e,xe,V),h=V,g=xe,k-=1,y=[],_=[]}else f.delete(N),j2(N,h,t),oA(e,N.prev,N.next),oA(e,N,g===null?e.first:g.next),oA(e,g,N),g=N;continue}for(y=[],_=[];h!==null&&h.k!==I;)h.e.f&Ba||(f??(f=new Set)).add(h),_.push(h),h=h.next;if(h===null)continue;N=h}y.push(N),g=N,h=N.next}if(h!==null||f!==void 0){for(var M=f===void 0?[]:Pm(f);h!==null;)h.e.f&Ba||M.push(h),h=h.next;var O=M.length;if(O>0){var X=o&Wb&&d===0?t:null;if(a){for(k=0;k<O;k+=1)(ne=M[k].a)==null||ne.measure();for(k=0;k<O;k+=1)(Be=M[k].a)==null||Be.fix()}T4(e,M,X,c)}}a&&$p(()=>{var Z;if(m!==void 0)for(N of m)(Z=N.a)==null||Z.apply()}),nn.first=e.first&&e.first.e,nn.last=g&&g.e}function P4(n,e,t,r){r&Mm&&hu(n.v,e),r&Hm?hu(n.i,t):n.i=t}function k4(n,e,t,r,o,s,i,a,A,d){var c=(A&Mm)!==0,u=(A&GC)===0,h=c?u?qp(o):Ts(o):o,f=A&Hm?Ts(i):i,g={i:f,v:h,k:s,a:null,e:null,prev:t,next:r};try{return g.e=Sa(()=>a(n,h,f,d),jm),g.e.prev=t&&t.e,g.e.next=r&&r.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function j2(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var i=Kp(s);o.before(s),s=i}}function oA(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function gv(n,e,t,r,o){var s=n,i="",a;pl(()=>{i!==(i=e()??"")&&(a!==void 0&&($i(a),a=void 0),i!==""&&(a=Sa(()=>{var A=i+"";t&&(A=`<svg>${A}</svg>`);var d=Vm(A);if((t||r)&&(d=Ls(d)),mA(Ls(d),d.lastChild),t||r)for(;Ls(d);)s.before(Ls(d));else s.before(d)})))})}function cn(n,e,t,r,o){var a;var s=(a=e.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=e.children,i=!0),s===void 0||s(n,i?()=>r:r)}function Gm(n,e,t){var r=n,o,s;pl(()=>{o!==(o=e())&&(s&&(dl(s),s=null),o&&(s=Sa(()=>t(r,o))))},Pu)}function O4(n,e,t,r,o,s){var i,a,A=null,d=n,c;pl(()=>{const u=e()||null;var h=Jb;u!==i&&(c&&(u===null?dl(c,()=>{c=null,a=null}):u===a?fu(c):$i(c)),u&&u!==a&&(c=Sa(()=>{if(A=document.createElementNS(h,u),mA(A,A),r){var f=A.appendChild(ku());r(A,f)}nn.nodes_end=A,d.before(A)})),i=u,i&&(a=i))},Pu)}function B_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=B_(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function D4(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=B_(n))&&(r&&(r+=" "),r+=e);return r}function vv(n){return typeof n=="object"?D4(n):n??""}function Wm(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function vu(n,e){var t=n.__attributes??(n.__attributes={});t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function N4(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function rr(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[dv]=t),t==null?n.removeAttribute(e):typeof t!="string"&&x_(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function R2(n,e,t,r,o=!1,s=!1,i=!1){var a=e||{},A=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class&&(t.class=vv(t.class));var c=x_(n),u=n.__attributes??(n.__attributes={});for(const _ in t){let C=t[_];if(A&&_==="value"&&C==null){n.value=n.__value="",a[_]=C;continue}var h=a[_];if(C!==h){a[_]=C;var f=_[0]+_[1];if(f!=="$$"){if(f==="on"){const I={},N="$$"+_;let k=_.slice(2);var g=B4(k);if(b4(k)&&(k=k.slice(0,-7),I.capture=!0),!g&&h){if(C!=null)continue;n.removeEventListener(k,a[N],I),a[N]=null}if(C!=null)if(g)n[`__${k}`]=C,I4([k]);else{let W=function(V){a[_].call(this,V)};a[N]=__(k,n,W,I)}else g&&(n[`__${k}`]=void 0)}else if(_==="style"&&C!=null)n.style.cssText=C+"";else if(_==="autofocus")E4(n,!!C);else if(!s&&(_==="__value"||_==="value"&&C!=null))n.value=n.__value=C;else if(_==="selected"&&A)N4(n,C);else{var m=_;o||(m=z4(m));var y=m==="defaultValue"||m==="defaultChecked";if(C==null&&!s&&!y)if(u[_]=null,m==="value"||m==="checked"){let I=n;if(m==="value"){let N=I.defaultValue;I.removeAttribute(m),I.defaultValue=N}else{let N=I.defaultChecked;I.removeAttribute(m),I.defaultChecked=N}}else n.removeAttribute(_);else y||c.includes(m)&&(s||typeof C!="string")?n[m]=C:typeof C!="function"&&rr(n,m,C)}_==="style"&&"__styles"in n&&(n.__styles={})}}}return a}var q2=new Map;function x_(n){var e=q2.get(n.nodeName);if(e)return e;q2.set(n.nodeName,e=[]);for(var t,r=n,o=Element.prototype;o!==r;){t=Rb(r);for(var s in t)t[s].set&&e.push(s);r=km(r)}return e}function z_(n){if(n.loading==="lazy"){var e=n.src;n[dv]=null,n.loading="eager",n.removeAttribute("src"),requestAnimationFrame(()=>{n[dv]!=="eager"&&(n.loading="lazy"),n.src=e})}}function M4(n,e,t){var r=n.__className,o=C_(e);(r!==o||jm)&&(o===""?n.removeAttribute("class"):n.setAttribute("class",o),n.__className=o)}function Cr(n,e,t){var r=n.__className,o=C_(e);(r!==o||jm)&&(e==null?n.removeAttribute("class"):n.className=o,n.__className=o)}function C_(n,e){return(n??"")+""}function fA(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function yr(n,e,t=e){var r=jd();$m(n,"input",o=>{var s=o?n.defaultValue:n.value;if(s=i0(n)?a0(s):s,t(s),r&&s!==(s=e())){var i=n.selectionStart,a=n.selectionEnd;n.value=s??"",a!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(a,n.value.length))}}),lt(e)==null&&n.value&&t(i0(n)?a0(n.value):n.value),qd(()=>{var o=e();i0(n)&&o===a0(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function mv(n,e,t=e){$m(n,"change",r=>{var o=r?n.defaultChecked:n.checked;t(o)}),lt(e)==null&&t(n.checked),qd(()=>{var r=e();n.checked=!!r})}function i0(n){var e=n.type;return e==="number"||e==="range"}function a0(n){return n===""?null:+n}function S_(n,e,t){var r=_a(n,e);r&&r.set&&(n[e]=t,Rm(()=>{n[e]=null}))}function E_(n,e,t){if(n.multiple)return j4(n,e);for(var r of n.options){var o=eu(r);if(t4(o,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function H4(n,e){Ou(()=>{var t=new MutationObserver(()=>{var r=n.__value;E_(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ip(n,e,t=e){var r=!0;$m(n,"change",o=>{var s=o?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(s),eu);else{var a=n.querySelector(s)??n.querySelector("option:not([disabled])");i=a&&eu(a)}t(i)}),Ou(()=>{var o=e();if(E_(n,o,r),r&&o===void 0){var s=n.querySelector(":checked");s!==null&&(o=eu(s),t(o))}n.__value=o,r=!1}),H4(n)}function j4(n,e){for(var t of n.options)t.selected=~e.indexOf(eu(t))}function eu(n){return"__value"in n?n.__value:n.value}function K2(n,e){return n===e||(n==null?void 0:n[Hi])===e}function ss(n={},e,t,r){return Ou(()=>{var o,s;return qd(()=>{o=s,s=[],lt(()=>{n!==t(...s)&&(e(n,...s),o&&K2(t(...o),n)&&e(null,...o))})}),()=>{$p(()=>{s&&K2(t(...s),n)&&e(null,...s)})}}),n}function F_(n){return function(...e){var t=e[0];t.target===this&&(n==null||n.apply(this,e))}}function A0(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function Rr(n=!1){const e=rn,t=e.l.u;if(!t)return;let r=()=>Cn(e.s);if(n){let o=0,s={};const i=Pd(()=>{let a=!1;const A=e.s;for(const d in A)A[d]!==s[d]&&(s[d]=A[d],a=!0);return a&&o++,o});r=()=>l(i)}t.b.length&&a4(()=>{$2(e,r),lv(t.b)}),cv(()=>{const o=lt(()=>t.m.map(UC));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&cv(()=>{$2(e,r),lv(t.a)})}function $2(n,e){if(n.l.s)for(const t of n.l.s)l(t);e()}function I_(n,e,t){if(n==null)return e(void 0),yd;const r=lt(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const jl=[];function gl(n,e=yd){let t=null;const r=new Set;function o(a){if(Dm(n,a)&&(n=a,t)){const A=!jl.length;for(const d of r)d[1](),jl.push(d,n);if(A){for(let d=0;d<jl.length;d+=2)jl[d][0](jl[d+1]);jl.length=0}}}function s(a){o(a(n))}function i(a,A=yd){const d=[a,A];return r.add(d),r.size===1&&(t=e(o,s)||yd),a(n),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function fn(n){let e;return I_(n,t=>e=t)(),e}let Sh=!1,wv=Symbol();function Gr(n,e,t){const r=t[e]??(t[e]={store:null,source:qp(void 0),unsubscribe:yd});if(r.store!==n&&!(wv in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=yd;else{var o=!0;r.unsubscribe=I_(n,s=>{o?r.source.v=s:b(r.source,s)}),o=!1}return n&&wv in t?fn(n):l(r.source)}function U_(n,e){return n.set(e),e}function po(){const n={};function e(){Rm(()=>{for(var t in n)n[t].unsubscribe();jb(n,wv,{enumerable:!1,value:!0})})}return[n,e]}function Kt(n,e,t){return n.set(t),e}function R4(n){var e=Sh;try{return Sh=!1,[n(),Sh]}finally{Sh=e}}const q4={get(n,e){if(!n.exclude.includes(e))return l(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){return e in n.special||(n.special[e]=vt({get[e](){return n.props[e]}},e,Xb)),n.special[e](t),pa(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),pa(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function on(n,e){return new Proxy({props:n,exclude:e,special:{},version:Ts(0)},q4)}const K4={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Uc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let o=n.props[r];Uc(o)&&(o=o());const s=_a(o,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Uc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=_a(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(n,e){if(e===Hi||e===Vb)return!1;for(let t of n.props)if(Uc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Uc(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function pn(...n){return new Proxy({props:n},K4)}function V2(n){for(var e=nn,t=nn;e!==null&&!(e.f&(Yi|Md));)e=e.parent;try{return Vi(e),n()}finally{Vi(t)}}function vt(n,e,t,r){var V;var o=(t&WC)!==0,s=!Hd||(t&XC)!==0,i=(t&YC)!==0,a=(t&JC)!==0,A=!1,d;i?[d,A]=R4(()=>n[e]):d=n[e];var c=Hi in n||Vb in n,u=i&&(((V=_a(n,e))==null?void 0:V.set)??(c&&e in n&&(H=>n[e]=H)))||void 0,h=r,f=!0,g=!1,m=()=>(g=!0,f&&(f=!1,a?h=lt(r):h=r),h);d===void 0&&r!==void 0&&(u&&s&&MC(),d=m(),u&&u(d));var y;if(s)y=()=>{var H=n[e];return H===void 0?m():(f=!0,g=!1,H)};else{var _=V2(()=>(o?Pd:dt)(()=>n[e]));_.f|=Kb,y=()=>{var H=l(_);return H!==void 0&&(h=void 0),H===void 0?h:H}}if(!(t&Xb))return y;if(u){var C=n.$$legacy;return function(H,J){return arguments.length>0?((!s||!J||C||A)&&u(J?y():H),H):y()}}var I=!1,N=!1,k=qp(d),W=V2(()=>Pd(()=>{var H=y(),J=l(k);return I?(I=!1,N=!0,J):(N=!1,k.v=H)}));return o||(W.equals=Nm),function(H,J){if(aA!==null&&(I=N,y(),l(k)),arguments.length>0){const xe=J?l(W):s&&i?Ad(H):H;return W.equals(xe)||(I=!0,b(k,xe),g&&h!==void 0&&(h=xe),lt(()=>l(W))),H}return l(W)}}function Fn(n){rn===null&&Rp(),Hd&&rn.l!==null?Q_(rn).m.push(n):cv(()=>{const e=lt(n);if(typeof e=="function")return e})}function Qo(n){rn===null&&Rp(),Fn(()=>()=>lt(n))}function $4(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function Yp(){const n=rn;return n===null&&Rp(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=Hp(o)?o.slice():[o],a=$4(e,t,r);for(const A of i)A.call(n.x,a);return!a.defaultPrevented}return!0}}function V4(n){rn===null&&Rp(),rn.l===null&&NC(),Q_(rn).a.push(n)}function Q_(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const G4="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(G4);$C();const W4="modulepreload",X4=function(n){return"/"+n},G2={},ps=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(t.map(A=>{if(A=X4(A),A in G2)return;G2[A]=!0;const d=A.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":W4,d||(u.as="script"),u.crossOrigin="",u.href=A,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Y4=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:r}=await Promise.resolve().then(()=>$d);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Xm extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class J4 extends Xm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Z4 extends Xm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class eS extends Xm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yv;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(yv||(yv={}));var tS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class rS{constructor(e,{headers:t={},customFetch:r,region:o=yv.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=Y4(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return tS(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=t;let a={},{region:A}=t;A||(A=this.region),A&&A!=="any"&&(a["x-region"]=A);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(g=>{throw new J4(g)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Z4(c);if(!c.ok)throw new eS(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="text/event-stream"?f=c:h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(o){return{data:null,error:o}}})}}var TK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function oS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var wo={},Rl={},ql={},Kl={},$l={},Vl={},sS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kd=sS();const iS=kd.fetch,T_=kd.fetch.bind(kd),L_=kd.Headers,aS=kd.Request,AS=kd.Response,$d=Object.freeze(Object.defineProperty({__proto__:null,Headers:L_,Request:aS,Response:AS,default:T_,fetch:iS},Symbol.toStringTag,{value:"Module"})),lS=oS($d);var Eh={},W2;function P_(){if(W2)return Eh;W2=1,Object.defineProperty(Eh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Eh.default=n,Eh}var X2;function k_(){if(X2)return Vl;X2=1;var n=Vl&&Vl.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Vl,"__esModule",{value:!0});const e=n(lS),t=n(P_());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let A=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,h;let f=null,g=null,m=null,y=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const k=await d.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=k:g=JSON.parse(k))}const I=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),N=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");I&&N&&N.length>1&&(m=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,y=406,_="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const I=await d.text();try{f=JSON.parse(I),Array.isArray(f)&&d.status===404&&(g=[],f=null,y=200,_="OK")}catch{d.status===404&&I===""?(y=204,_="No Content"):f={message:I}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,_="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:m,status:y,statusText:_}});return this.shouldThrowOnError||(A=A.catch(d=>{var c,u,h;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),A.then(s,i)}}return Vl.default=r,Vl}var Y2;function O_(){if(Y2)return $l;Y2=1;var n=$l&&$l.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($l,"__esModule",{value:!0});const e=n(k_());class t extends e.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:A=a}={}){const d=A?`${A}.order`:"order",c=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${c?`${c},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const A=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(A,`${o}`),this.url.searchParams.set(d,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:A=!1,format:d="text"}={}){var c;const u=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,A?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${u};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return $l.default=t,$l}var J2;function Ym(){if(J2)return Kl;J2=1;var n=Kl&&Kl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=n(O_());class t extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let A="";a==="plain"?A="pl":a==="phrase"?A="ph":a==="websearch"&&(A="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${A}fts${d}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return Kl.default=t,Kl}var Z2;function D_(){if(Z2)return ql;Z2=1;var n=ql&&ql.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ql,"__esModule",{value:!0});const e=n(Ym());class t{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let A=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!A?"":(c==='"'&&(A=!A),c)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",A=[];if(this.headers.Prefer&&A.push(this.headers.Prefer),s&&A.push(`count=${s}`),i||A.push("missing=default"),this.headers.Prefer=A.join(","),Array.isArray(o)){const d=o.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:A=!0}={}){const d="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),A||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(o)){const u=o.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ql.default=t,ql}var Qc={},Tc={},ew;function dS(){return ew||(ew=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.version=void 0,Tc.version="0.0.0-automated"),Tc}var tw;function cS(){if(tw)return Qc;tw=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.DEFAULT_HEADERS=void 0;const n=dS();return Qc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Qc}var rw;function uS(){if(rw)return Rl;rw=1;var n=Rl&&Rl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Rl,"__esModule",{value:!0});const e=n(D_()),t=n(Ym()),r=cS();class o{constructor(i,{headers:a={},schema:A,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=A,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:A=!1,get:d=!1,count:c}={}){let u;const h=new URL(`${this.url}/rpc/${i}`);let f;A||d?(u=A?"HEAD":"GET",Object.entries(a).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{h.searchParams.append(m,y)})):(u="POST",f=a);const g=Object.assign({},this.headers);return c&&(g.Prefer=`count=${c}`),new t.default({method:u,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return Rl.default=o,Rl}var nw;function hS(){if(nw)return wo;nw=1;var n=wo&&wo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wo,"__esModule",{value:!0}),wo.PostgrestError=wo.PostgrestBuilder=wo.PostgrestTransformBuilder=wo.PostgrestFilterBuilder=wo.PostgrestQueryBuilder=wo.PostgrestClient=void 0;const e=n(uS());wo.PostgrestClient=e.default;const t=n(D_());wo.PostgrestQueryBuilder=t.default;const r=n(Ym());wo.PostgrestFilterBuilder=r.default;const o=n(O_());wo.PostgrestTransformBuilder=o.default;const s=n(k_());wo.PostgrestBuilder=s.default;const i=n(P_());return wo.PostgrestError=i.default,wo.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},wo}var fS=hS();const pS=nS(fS),{PostgrestClient:gS,PostgrestQueryBuilder:LK,PostgrestFilterBuilder:PK,PostgrestTransformBuilder:kK,PostgrestBuilder:OK,PostgrestError:DK}=pS,vS="2.11.2",mS={"X-Client-Info":`realtime-js/${vS}`},wS="1.0.0",N_=1e4,yS=1e3;var Bd;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Bd||(Bd={}));var Qs;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Qs||(Qs={}));var gi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(gi||(gi={}));var bv;(function(n){n.websocket="websocket"})(bv||(bv={}));var RA;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(RA||(RA={}));class bS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const A=r.decode(e.slice(i,i+s));i=i+s;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:A,payload:d}}}class M_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(xn||(xn={}));const ow=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=_S(i,n,e,o),s),{})},_S=(n,e,t,r)=>{const o=e.find(a=>a.name===n),s=o==null?void 0:o.type,i=t[n];return s&&!r.includes(s)?H_(s,i):_v(i)},H_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return CS(e,t)}switch(n){case xn.bool:return BS(e);case xn.float4:case xn.float8:case xn.int2:case xn.int4:case xn.int8:case xn.numeric:case xn.oid:return xS(e);case xn.json:case xn.jsonb:return zS(e);case xn.timestamp:return SS(e);case xn.abstime:case xn.date:case xn.daterange:case xn.int4range:case xn.int8range:case xn.money:case xn.reltime:case xn.text:case xn.time:case xn.timestamptz:case xn.timetz:case xn.tsrange:case xn.tstzrange:return _v(e);default:return _v(e)}},_v=n=>n,BS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},xS=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},zS=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},CS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const i=n.slice(1,t);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>H_(e,a))}return n},SS=n=>typeof n=="string"?n.replace(" ","T"):n,j_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class l0{constructor(e,t,r={},o=N_){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(sw||(sw={}));class tu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tu.syncState(this.state,o,s,i),this.pendingDiffs.forEach(A=>{this.state=tu.syncDiff(this.state,A,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=tu.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const s=this.cloneDeep(e),i=this.transformState(t),a={},A={};return this.map(s,(d,c)=>{i[d]||(A[d]=c)}),this.map(i,(d,c)=>{const u=s[d];if(u){const h=c.map(y=>y.presence_ref),f=u.map(y=>y.presence_ref),g=c.filter(y=>f.indexOf(y.presence_ref)<0),m=u.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[d]=g),m.length>0&&(A[d]=m)}else a[d]=c}),this.syncDiff(s,{joins:a,leaves:A},r,o)}static syncDiff(e,t,r,o){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,A)=>{var d;const c=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(A),c.length>0){const u=e[a].map(f=>f.presence_ref),h=c.filter(f=>u.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,A)}),this.map(i,(a,A)=>{let d=e[a];if(!d)return;const c=A.map(u=>u.presence_ref);d=d.filter(u=>c.indexOf(u.presence_ref)<0),e[a]=d,o(a,d,A),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(iw||(iw={}));var aw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(aw||(aw={}));var ga;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class Jm{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Qs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new l0(this,gi.join,this.params,this.timeout),this.rejoinTimer=new M_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qs.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new tu(this),this.broadcastEndpointURL=j_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(c=>e==null?void 0:e(ga.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ga.CLOSED));const A={},d={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},A)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var u;if(this.socket.setAuth(),c===void 0){e==null||e(ga.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,g=[];for(let m=0;m<f;m++){const y=h[m],{filter:{event:_,schema:C,table:I,filter:N}}=y,k=c&&c[m];if(k&&k.event===_&&k.schema===C&&k.table===I&&k.filter===N)g.push(Object.assign(Object.assign({},y),{id:k.id}));else{this.unsubscribe(),e==null||e(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ga.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,A;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||A===void 0)&&A.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qs.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new l0(this,gi.leave,{},e);o.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new l0(this,e,t,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:A,leave:d,join:c}=gi;if(r&&[a,A,d,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var g,m,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(f=>f.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(f=>{var g,m,y,_,C,I;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const N=f.id,k=(g=f.filter)===null||g===void 0?void 0:g.event;return N&&((m=t.ids)===null||m===void 0?void 0:m.includes(N))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const N=(C=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return N==="*"||N===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:y,commit_timestamp:_,type:C,errors:I}=g;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:_,eventType:C,new:{},old:{},errors:I}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===Qs.closed}_isJoined(){return this.state===Qs.joined}_isJoining(){return this.state===Qs.joining}_isLeaving(){return this.state===Qs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),s={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Jm.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ow(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ow(e.columns,e.old_record)),t}}const ES=()=>{},FS=typeof WebSocket<"u",IS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class US{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=mS,this.params={},this.timeout=N_,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ES,this.conn=null,this.sendBuffer=[],this.serializer=new bS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>ps(async()=>{const{default:A}=await Promise.resolve().then(()=>$d);return{default:A}},void 0).then(({default:A})=>A(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${bv.websocket}`,this.httpEndpoint=j_(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,i)=>i(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new M_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(FS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new QS(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ps(async()=>{const{default:e}=await import("./browser.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wS}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bd.connecting:return RA.Connecting;case Bd.open:return RA.Open;case Bd.closing:return RA.Closing;default:return RA.Closed}}isConnected(){return this.connectionState()===RA.Open}channel(e,t={config:{}}){const r=new Jm(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var A;(A=this.conn)===null||A===void 0||A.send(a)})};this.log("push",`${t} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(gi.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(yS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:o,payload:s,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([IS],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class QS{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Bd.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bo(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class TS extends Zm{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Bv extends Zm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var LS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const R_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:r}=await Promise.resolve().then(()=>$d);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},PS=()=>LS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ps(()=>Promise.resolve().then(()=>$d),void 0)).Response:Response}),xv=n=>{if(Array.isArray(n))return n.map(t=>xv(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=xv(r)}),e};var vl=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const d0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),kS=(n,e,t)=>vl(void 0,void 0,void 0,function*(){const r=yield PS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{e(new TS(d0(o),n.status||500))}).catch(o=>{e(new Bv(d0(o),o))}):e(new Bv(d0(n),n))}),OS=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),t))};function Du(n,e,t,r,o,s){return vl(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,OS(e,r,o,s)).then(A=>{if(!A.ok)throw A;return r!=null&&r.noResolveJson?A:A.json()}).then(A=>i(A)).catch(A=>kS(A,a,r))})})}function ap(n,e,t,r){return vl(this,void 0,void 0,function*(){return Du(n,"GET",e,t,r)})}function sA(n,e,t,r,o){return vl(this,void 0,void 0,function*(){return Du(n,"POST",e,r,o,t)})}function DS(n,e,t,r,o){return vl(this,void 0,void 0,function*(){return Du(n,"PUT",e,r,o,t)})}function NS(n,e,t,r){return vl(this,void 0,void 0,function*(){return Du(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function q_(n,e,t,r,o){return vl(this,void 0,void 0,function*(){return Du(n,"DELETE",e,r,o,t)})}var us=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const MS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Aw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HS{constructor(e,t={},r,o){this.url=e,this.headers=t,this.bucketId=r,this.fetch=R_(o)}uploadOrUpdate(e,t,r,o){return us(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},Aw),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const A=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,A&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const d=this._removeEmptyFolders(t),c=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(bo(s))return{data:null,error:s};throw s}})}upload(e,t,r){return us(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return us(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let A;const d=Object.assign({upsert:Aw.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",d.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",d.cacheControl)):(A=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:A,headers:c}),h=yield u.json();return u.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(A){if(bo(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,t){return us(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const s=yield sA(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new Zm("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(bo(r))return{data:null,error:r};throw r}})}update(e,t,r){return us(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return us(this,void 0,void 0,function*(){try{return{data:yield sA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(bo(o))return{data:null,error:o};throw o}})}copy(e,t,r){return us(this,void 0,void 0,function*(){try{return{data:{path:(yield sA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(bo(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return us(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield sA(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(bo(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return us(this,void 0,void 0,function*(){try{const o=yield sA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(bo(o))return{data:null,error:o};throw o}})}download(e,t){return us(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ap(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(bo(a))return{data:null,error:a};throw a}})}info(e){return us(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ap(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xv(r),error:null}}catch(r){if(bo(r))return{data:null,error:r};throw r}})}exists(e){return us(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield NS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(bo(r)&&r instanceof Bv){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&o.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});A!==""&&o.push(A);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return us(this,void 0,void 0,function*(){try{return{data:yield q_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(bo(t))return{data:null,error:t};throw t}})}list(e,t,r){return us(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},MS),t),{prefix:e||""});return{data:yield sA(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(bo(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const jS="2.7.1",RS={"X-Client-Info":`storage-js/${jS}`};var Gl=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class qS{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},RS),t),this.fetch=R_(r)}listBuckets(){return Gl(this,void 0,void 0,function*(){try{return{data:yield ap(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bo(e))return{data:null,error:e};throw e}})}getBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield ap(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(bo(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Gl(this,void 0,void 0,function*(){try{return{data:yield sA(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bo(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Gl(this,void 0,void 0,function*(){try{return{data:yield DS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bo(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield sA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(bo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield q_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(bo(t))return{data:null,error:t};throw t}})}}class KS extends qS{constructor(e,t={},r){super(e,t,r)}from(e){return new HS(this.url,this.headers,e,this.fetch)}}const $S="2.48.1";let Kc="";typeof Deno<"u"?Kc="deno":typeof document<"u"?Kc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kc="react-native":Kc="node";const VS={"X-Client-Info":`supabase-js-${Kc}/${$S}`},GS={headers:VS},WS={schema:"public"},XS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YS={};var JS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const ZS=n=>{let e;return n?e=n:typeof fetch>"u"?e=T_:e=fetch,(...t)=>e(...t)},e3=()=>typeof Headers>"u"?L_:Headers,t3=(n,e,t)=>{const r=ZS(t),o=e3();return(s,i)=>JS(void 0,void 0,void 0,function*(){var a;const A=(a=yield e())!==null&&a!==void 0?a:n;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${A}`),r(s,Object.assign(Object.assign({},i),{headers:d}))})};var r3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};function n3(n){return n.replace(/\/$/,"")}function o3(n,e){const{db:t,auth:r,realtime:o,global:s}=n,{db:i,auth:a,realtime:A,global:d}=e,c={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},A),o),global:Object.assign(Object.assign({},d),s),accessToken:()=>r3(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const K_="2.67.3",s3="http://localhost:9999",i3="supabase.auth.token",a3={"X-Client-Info":`gotrue-js/${K_}`},lw=10,zv="X-Supabase-Api-Version",$_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function A3(n){return Math.round(Date.now()/1e3)+n}function l3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Pi=()=>typeof window<"u"&&typeof document<"u",NA={tested:!1,writable:!1},ru=()=>{if(!Pi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(NA.tested)return NA.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),NA.tested=!0,NA.writable=!0}catch{NA.tested=!0,NA.writable=!1}return NA.writable};function d3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const V_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:r}=await Promise.resolve().then(()=>$d);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},c3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",G_=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Fh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ih=async(n,e)=>{await n.removeItem(e)};function u3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,o,s,i,a,A,d,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)i=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),A=e.indexOf(n.charAt(c++)),d=e.indexOf(n.charAt(c++)),r=i<<2|a>>4,o=(a&15)<<4|A>>2,s=(A&3)<<6|d,t=t+String.fromCharCode(r),A!=64&&o!=0&&(t=t+String.fromCharCode(o)),d!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Jp{constructor(){this.promise=new Jp.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Jp.promiseConstructor=Promise;function dw(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(u3(r))}async function h3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function f3(n,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await n(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function p3(n){return("0"+n.toString(16)).substr(-2)}function g3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let s=0;s<56;s++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,p3).join("")}async function v3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}function m3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function w3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await v3(n);return m3(t)}async function Wl(n,e,t=!1){const r=g3();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await G_(n,`${e}-code-verifier`,o);const s=await w3(r);return[s,r===s?"plain":"s256"]}const y3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b3(n){const e=n.headers.get(zv);if(!e||!e.match(y3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class e1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Fr(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class _3 extends e1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function B3(n){return Fr(n)&&n.name==="AuthApiError"}class W_ extends e1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ml extends e1{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class eA extends ml{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x3(n){return Fr(n)&&n.name==="AuthSessionMissingError"}class c0 extends ml{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uh extends ml{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qh extends ml{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z3(n){return Fr(n)&&n.name==="AuthImplicitGrantRedirectError"}class cw extends ml{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cv extends ml{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function u0(n){return Fr(n)&&n.name==="AuthRetryableFetchError"}class uw extends ml{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var C3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};const HA=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),S3=[502,503,504];async function hw(n){var e;if(!c3(n))throw new Cv(HA(n),0);if(S3.includes(n.status))throw new Cv(HA(n),n.status);let t;try{t=await n.json()}catch(s){throw new W_(HA(s),s)}let r;const o=b3(n);if(o&&o.getTime()>=$_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new uw(HA(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new eA}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new uw(HA(t),n.status,t.weak_password.reasons);throw new _3(HA(t),n.status||500,r)}const E3=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function Or(n,e,t,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[zv]||(s[zv]=$_["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",A=await F3(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(A):{data:Object.assign({},A),error:null}}async function F3(n,e,t,r,o,s){const i=E3(e,r,o,s);let a;try{a=await n(t,Object.assign({},i))}catch(A){throw console.error(A),new Cv(HA(A),0)}if(a.ok||await hw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(A){await hw(A)}}function tA(n){var e;let t=null;T3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=A3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function fw(n){const e=tA(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function AA(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function I3(n){return{data:n,error:null}}function U3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s}=n,i=C3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s},A=Object.assign({},i);return{data:{properties:a,user:A},error:null}}function Q3(n){return n}function T3(n){return n.access_token&&n.refresh_token&&n.expires_in}var L3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};class P3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=V_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Or(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Or(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:AA})}catch(r){if(Fr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=L3(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Or(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:U3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Fr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Or(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:AA})}catch(t){if(Fr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,s,i,a,A;try{const d={nextPage:null,lastPage:0,total:0},c=await Or(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Q3});if(c.error)throw c.error;const u=await c.json(),h=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(A=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);d[`${y}Page`]=m}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Fr(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await Or(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:AA})}catch(t){if(Fr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Or(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:AA})}catch(r){if(Fr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Or(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:AA})}catch(r){if(Fr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Or(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(Fr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Or(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Fr(t))return{data:null,error:t};throw t}}}const k3={getItem:n=>ru()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ru()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ru()&&globalThis.localStorage.removeItem(n)}};function pw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function O3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xl={debug:!!(globalThis&&ru()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class X_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class D3 extends X_{}async function N3(n,e,t){Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new D3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}O3();const M3={url:s3,storageKey:i3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:a3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Lc=30*1e3,gw=3;async function vw(n,e,t){return await t()}class mu{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mu.nextInstanceID,mu.nextInstanceID+=1,this.instanceID>0&&Pi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},M3),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new P3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=V_(o.fetch),this.lock=o.lock||vw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Pi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=N3:this.lock=vw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:ru()?this.storage=k3:(this.memoryStorage={},this.storage=pw(this.memoryStorage)):(this.memoryStorage={},this.storage=pw(this.memoryStorage)),Pi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${K_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=d3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Pi()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),z3(s)){const A=(e=s.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fr(t)?{error:t}:{error:new W_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const s=await Or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:tA}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Fr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,o;try{let s;if("email"in e){const{email:c,password:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Wl(this.storage,this.storageKey)),s=await Or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:tA})}else if("phone"in e){const{phone:c,password:u,options:h}=e;s=await Or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:tA})}else throw new Uh("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Fr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:i,options:a}=e;t=await Or(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fw})}else if("phone"in e){const{phone:s,password:i,options:a}=e;t=await Or(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fw})}else throw new Uh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new c0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(Fr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Fh(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{const{data:s,error:i}=await Or(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tA});if(await Ih(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new c0}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Fr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:s,nonce:i}=e,a=await Or(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:tA}),{data:A,error:d}=a;return d?{data:{user:null,session:null},error:d}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new c0}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:d})}catch(t){if(Fr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,s,i;try{if("email"in e){const{email:a,options:A}=e;let d=null,c=null;this.flowType==="pkce"&&([d,c]=await Wl(this.storage,this.storageKey));const{error:u}=await Or(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},create_user:(r=A==null?void 0:A.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:d,code_challenge_method:c},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:A}=e,{data:d,error:c}=await Or(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:c}}throw new Uh("You must provide either an email or phone number.")}catch(a){if(Fr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let o,s;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Or(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:tA});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const A=i.session,d=i.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(o){if(Fr(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await Wl(this.storage,this.storageKey)),await Or(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:I3})}catch(s){if(Fr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new eA;const{error:o}=await Or(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Fr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Or(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await Or(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Uh("You must provide either an email or phone number and a type")}catch(t){if(Fr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Fh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,d,c)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,d,c))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Or(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:AA}):await this._useSession(async t=>{var r,o,s;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new eA}:await Or(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:AA})})}catch(t){if(Fr(t))return x3(t)&&(await this._removeSession(),await Ih(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new eA;const i=o.session;let a=null,A=null;this.flowType==="pkce"&&e.email!=null&&([a,A]=await Wl(this.storage,this.storageKey));const{data:d,error:c}=await Or(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:A}),jwt:i.access_token,xform:AA});if(c)throw c;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Fr(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return dw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new eA;const t=Date.now()/1e3;let r=t,o=!0,s=null;const i=dw(e.access_token);if(i.exp&&(r=i.exp,o=r<=t),o){const{session:a,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:A}=await this._getUser(e.access_token);if(A)throw A;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Fr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new eA;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Pi())throw new Qh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new cw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cw("No code detected.");const{data:C,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:A,token_type:d}=e;if(!s||!a||!i||!d)throw new Qh("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;A&&(h=parseInt(A));const f=h-c;f*1e3<=Lc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=h-u;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:m,error:y}=await this._getUser(s);if(y)throw y;const _={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:d,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(Fr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Fh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(B3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ih(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=l3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:s},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Wl(this.storage,this.storageKey,!0));try{return await Or(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Fr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Fr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,A,d,c;const{data:u,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Or(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0})});if(o)throw o;return Pi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Fr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)throw i;return await Or(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(Fr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await f3(async o=>(o>0&&await h3(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await Or(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tA})),(o,s)=>{const i=200*Math.pow(2,o);return s&&u0(s)&&Date.now()+i-r<Lc})}catch(r){if(this._debug(t,"error",r),Fr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Pi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Fh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+lw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${lw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),u0(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new eA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Jp;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new eA;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),Fr(s)){const i={session:null,error:s};return u0(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(A){s.push(A)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await G_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ih(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Lc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Lc}ms, refresh threshold is ${gw} ticks`),o<=gw&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof X_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await Wl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Or(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Fr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:A,error:d}=await Or(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=A==null?void 0:A.totp)===null||o===void 0)&&o.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(t){if(Fr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await Or(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(Fr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Or(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Fr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let a=null;i.aal&&(a=i.aal);let A=a;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:A,currentAuthenticationMethods:c},error:null}}))}}mu.nextInstanceID=0;const H3=mu;class j3 extends H3{constructor(e){super(e)}}var R3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class q3{constructor(e,t,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=n3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const A=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:WS,realtime:YS,auth:Object.assign(Object.assign({},XS),{storageKey:A}),global:GS},c=o3(r??{},d);this.storageKey=(o=c.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=t3(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new gS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new rS(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new KS(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return R3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:A},d,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j3({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:A,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new US(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const K3=(n,e,t)=>new q3(n,e,t),$3="https://mprzyonufqescpcpusno.supabase.co",V3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wcnp5b251ZnFlc2NwY3B1c25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk3NjAwMzIsImV4cCI6MjA0NTMzNjAzMn0._EwKZZ9Yk-C6t96up66bvHDv_pLcE5HDD1TNpi2dWy4",pt=K3($3,V3);async function Nu(n,e){const{data:t,error:r}=await pt.from("products").select(`
            *,
            variants:product_variants(
                *,
                prices(*),
                option_values:product_variant_option_values(
                    option_value:product_option_values(
                        *,
                        option:product_options(*)
                    )
                )
            ),
            categories:categories(*),
            options:product_options(
                *,
                values:product_option_values(*)
            ),
            process:processes(*)
        `).eq("id",n).eq("shop",e).single();if(r)throw r;return t}async function wA(n){const{data:e,error:t}=await pt.from("product_variants").select(" *, prices(*)").eq("id",n).single();if(t)throw t;return e}async function Y_(){const{data:n,error:e}=await pt.from("categories").select("*").order("name");if(e)throw e;const t=n||[],r=new Map,o=[];return t.forEach(s=>{r.set(s.id,{...s,children:[]})}),t.forEach(s=>{const i=r.get(s.id);if(i)if(s.parent_category_id){const a=r.get(s.parent_category_id);a&&(a.children=a.children||[],a.children.push(i))}else o.push(i)}),o}async function Pf(n,e,t=1,r=12,o,s=!1){const i=(t-1)*r,a=i+r-1;let A=pt.from("products").select(`
      *,
      variants:product_variants(
        *,
        prices(*)
      )
    `,{count:"exact"}).ilike("title",`%${n}%`).range(i,a).order("created_at",{ascending:!1});if(o==="godo"&&(A=A.not("godo_product","is",null)),s&&(A=A.not("process_id","is",null)),e){const{data:h}=await pt.from("product_categories").select("product_id").eq("category_id",e),f=(h==null?void 0:h.map(g=>g.product_id))||[];A=A.in("id",f)}const{data:d,error:c,count:u}=await A;if(c)throw c;return{products:d||[],total:u||0}}async function Sv(n,e){if(!n||!e)return console.warn("getProductByMallInfo: mallType or mallProductNo is missing."),null;const{data:t,error:r}=await pt.from("products").select("*").eq("mall_type",n).eq("mall_product_id",e).maybeSingle();if(r)throw console.error("Error fetching product by mall info:",r),r;return t||console.log("Product not found for given mall info."),t}async function Mu(n){const{data:e,error:t}=await pt.from("product_addons").select("*").eq("product_id",n).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching product addons:",t),t;if(!e||e.length===0)return[];const r=[];for(const o of e){const{data:s,error:i}=await pt.from("product_addon_items").select(`
        *,
        addon_product:products(
          *,
          variants:product_variants(
            *,
            prices(*)
          )
        )
      `).eq("addon_id",o.id);if(i){console.error("Error fetching addon items:",i);continue}r.push({...o,items:s||[]})}return r}const G3=Object.freeze(Object.defineProperty({__proto__:null,getCategories:Y_,getProductAddons:Mu,getProductById:Nu,getProductByMallInfo:Sv,getProductVariant:wA,searchProducts:Pf},Symbol.toStringTag,{value:"Module"}));function bi(n,e,t){if(!t||t.length===0)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};const r=t.find(i=>n>=i.min_quantity&&n<=i.max_quantity);if(!r)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};let o=e,s=0;if(r.type==="amount")r.direction==="minus"?(o=Math.max(0,e-r.value),s=e-o):(o=e+r.value,s=-r.value);else if(r.type==="percentage"){const i=r.value/100;r.direction==="minus"?(s=e*i,o=e-s):(s=-(e*i),o=e+Math.abs(s))}return{originalPrice:e,discountedPrice:o,discountAmount:s,discountInfo:r,hasDiscount:s!==0}}const W3={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1};function X3(){const{subscribe:n,set:e,update:t}=gl(W3);return{subscribe:n,set:e,update:t,async loadIntegratedProductData(r,o){var i;const s=fn({subscribe:n});if((i=s.productDataCache[r])!=null&&i.isLoaded)return s.productDataCache[r];if(s.loadingProducts.has(r))return new Promise((a,A)=>{const d=setInterval(()=>{var u;const c=fn({subscribe:n});c.loadingProducts.has(r)||(clearInterval(d),(u=c.productDataCache[r])!=null&&u.isLoaded?a(c.productDataCache[r]):A(new Error("   ")))},100)});t(a=>({...a,loadingProducts:new Set([...a.loadingProducts,r]),isGlobalLoading:!0,productDataCache:{...a.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0}}}));try{const[a,A]=await Promise.all([Nu(r,o),Mu(r)]);if(!a)throw new Error("   ");const d={};A.forEach(u=>{u.items.forEach(h=>{h.addon_product.variants&&h.addon_product.variants.length>0&&(d[h.addon_product.id]={price:h.addon_product.variants[0].prices[0].amount,title:h.addon_product.title,variants:h.addon_product.variants,description:h.addon_product.description,thumbnail:h.addon_product.thumbnail})})});const c={id:r,product:a,addons:A,process:a.process,addonProductsMap:d,isLoaded:!0,isLoading:!1};return t(u=>{const h=new Set(u.loadingProducts);return h.delete(r),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[r]:c}}}),c}catch(a){throw console.error("   :",a),t(A=>{const d=new Set(A.loadingProducts);return d.delete(r),{...A,loadingProducts:d,isGlobalLoading:d.size>0,productDataCache:{...A.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:a instanceof Error?a.message:"   "}}}}),a}},async loadMultipleProductData(r,o){t(s=>({...s,isGlobalLoading:!0}));try{const s=r.map(a=>this.loadIntegratedProductData(a,o)),i=await Promise.all(s);return t(a=>({...a,isGlobalLoading:!1})),i}catch(s){throw t(i=>({...i,isGlobalLoading:!1})),s}},getProductData(r){return fn({subscribe:n}).productDataCache[r]||null},clearProductData(r){t(r?o=>{const s={...o.productDataCache};return delete s[r],{...o,productDataCache:s}}:o=>({...o,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1}))},isProductLoading(r){return fn({subscribe:n}).loadingProducts.has(r)},isGlobalLoading(){return fn({subscribe:n}).isGlobalLoading},isCached(r){var s;return((s=fn({subscribe:n}).productDataCache[r])==null?void 0:s.isLoaded)===!0}}}const fd=X3(),ks=gl(null);function Y3(){const n={},e={products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null},{subscribe:t,set:r,update:o}=gl(e),s=i=>{const a=i.products.map(h=>{var J;let f=0,g={originalAmount:0,discountAmount:0,hasDiscount:!1,discountDetails:void 0};const m=(h.variants||[]).reduce((xe,M)=>xe+(M.quantity||0),0),y=(h.variants||[]).map(xe=>{const M=xe.quantity||0,O=xe.prices[0].amount;if(M>0){if(xe.isDiscountedPrice)return{originalAmount:O*M,discountedAmount:O*M,discountAmount:0,discountDetails:void 0,hasDiscount:!1};const X=bi(m,O,h.product.quantity_discounts);return{originalAmount:O*M,discountedAmount:X.discountedPrice*M,discountAmount:X.discountAmount*M,discountDetails:X.discountInfo,hasDiscount:X.hasDiscount}}else return{originalAmount:O*M,discountedAmount:O*M,discountAmount:0,discountDetails:void 0,hasDiscount:!1}});f=y.reduce((xe,M)=>xe+M.discountedAmount,0);const _=y.some(xe=>xe.hasDiscount),C=(J=y.find(xe=>xe.hasDiscount))==null?void 0:J.discountDetails;g={originalAmount:y.reduce((xe,M)=>xe+M.originalAmount,0),discountAmount:y.reduce((xe,M)=>xe+M.discountAmount,0),hasDiscount:_,discountDetails:C};let I=0;const N=h.prints&&h.prints.length>0,k=h.simplePrints&&h.simplePrints.length>0,W=h.print_type==="simple"&&k||k&&!N;N&&!W&&(I=(h.prints||[]).reduce((xe,M)=>xe+(M.price||0),0));let V=0;if(h.addons&&Object.keys(h.addons).length>0){const xe=h.quantity||0;V=Object.values(h.addons).reduce((M,O)=>{if(O.price!==void 0){const X=O.quantity||1;return M+O.price*X}if(h.addonProductsMap){const X=h.addonProductsMap[O.productId];if(X&&O.variantId){const te=X.variants.find(le=>le.id===O.variantId);if(te&&te.prices&&te.prices.length>0)return M+te.prices[0].amount*xe}}return M},0)}const H=f+I+V;return{...h,productAmount:f,printAmount:I,addonAmount:V,totalAmount:H,discountInfo:g}}),A=a.reduce((h,f)=>h+f.quantity,0),d=a.reduce((h,f)=>h+(f.productAmount||0),0),c=a.reduce((h,f)=>h+(f.printAmount||0),0),u=a.reduce((h,f)=>h+(f.addonAmount||0),0);return{products:a,totalQuantity:A,totalProductAmount:d,totalPrintAmount:c,totalAddonAmount:u,totalAmount:d+c+u+(i.totalAdditionalAmount||0)}};return{subscribe:t,set:r,update:o,async addProductWithIntegratedData(i,a){try{const A=await fd.loadIntegratedProductData(i,a),d={product:A.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:A.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};o(c=>({...c,products:[...c.products,d],index:c.products.length}))}catch(A){throw console.error("  :",A),A}},async preloadProductsForFixedMode(i,a){try{const d=(await fd.loadMultipleProductData(i,a)).map(c=>({product:c.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:c.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0}));o(c=>({...c,products:d,index:0}))}catch(A){throw console.error("   :",A),A}},async refreshProductData(i,a){const d=fn({subscribe:t}).products[i];if(!d)throw new Error("   ");try{fd.clearProductData(d.product.id);const c=await fd.loadIntegratedProductData(d.product.id,a);o(u=>({...u,products:u.products.map((h,f)=>f===i?{...h,product:c.product,addonProductsMap:c.addonProductsMap,isLoaded:!0}:h)}))}catch(c){throw console.error("   :",c),c}},reset:()=>{r({products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null})},calculatePrintPrice:async(i,a=!1)=>{const A=fn(It),d=A.products[i];if(console.log({product:d}),d.prints&&d.prints.length>0)for(const c of d.prints){console.log({print:c});let u=0,h=0;if(c.colors&&c.template.templateProduct){const f=c.template.templateProduct.template_product_variants.find(g=>g.color_count===c.colors.length);if(console.log({selectedVariant:f}),f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await wA(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=bi(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}else if(c.template.templateProduct){const f=c.template.templateProduct.template_product_variants[0];if(f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await wA(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=bi(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}}if(!a){const c=s(A);r({...A,...c,totalAdditionalAmount:A.totalAdditionalAmount})}},updateTotalAmounts:()=>{o(i=>{const a=s(i);return{...i,...a,totalAdditionalAmount:i.totalAdditionalAmount}})},cancelPrint:(i,a)=>{o(A=>{var c;A.products[i].prints=(c=A.products[i].prints)==null?void 0:c.filter(u=>u.objectId!==a);const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}})},updateSimplePrint:(i,a,A)=>{o(d=>{d.products[i].prints||(d.products[i].prints=[]);const c=d.products[i].prints.findIndex(u=>u.objectId===a);return c>=0?d.products[i].prints[c]={...d.products[i].prints[c],...A}:d.products[i].prints.push(A),d})},saveSimplePrintState:(i,a)=>{console.log("Store: saveSimplePrintState ",{productIndex:i,selectedAreasCount:a.length,selectedAreas:a}),o(A=>A.products[i]?(A.products[i].simplePrintState=a,console.log("Store: saveSimplePrintState ",{productIndex:i,savedState:A.products[i].simplePrintState}),A):(console.warn("Store: saveSimplePrintState -   :",i),A))},getSimplePrintState:i=>{var d;const a=fn(It),A=((d=a.products[i])==null?void 0:d.simplePrintState)||[];return console.log("Store: getSimplePrintState ",{productIndex:i,hasProduct:!!a.products[i],result:A,resultType:typeof A,resultLength:Array.isArray(A)?A.length:"not array"}),A},updateProductPrintType:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateProductPrintType ",{idx:i,printType:a,previousPrintType:A.products[i].print_type}),A.products[i].print_type=a,(a==="simple"||a==="none")&&(A.products[i].prints=[],A.products[i].printAmount=0);const d=s(A);return{...A,totalProductAmount:d.totalProductAmount,totalPrintAmount:d.totalPrintAmount,totalAddonAmount:d.totalAddonAmount,totalAdditionalCostAmount:d.totalAdditionalCostAmount,totalAmount:d.totalAmount}}return A})}}}const It=Y3();function J3(){const n={name:"",phone:"",address1:"",address2:"",postcode:""},{subscribe:e,set:t,update:r}=gl(n);return{subscribe:e,set:t,update:r,reset:()=>{console.log(" Customer Store "),t(n)}}}const ol=J3(),vr=n=>n.toLocaleString("ko-KR");/**
* @license lucide-svelte v0.475.0 - ISC
*
* ISC License
* 
* Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
* 
* Permission to use, copy, modify, and/or distribute this software for any
* purpose with or without fee is hereby granted, provided that the above
* copyright notice and this permission notice appear in all copies.
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
* WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
* ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
* WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
* ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
* OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*/const Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var eE=Xp("<svg><!><!></svg>");function gn(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]),r=on(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Nr(e,!1);let o=vt(e,"name",8,void 0),s=vt(e,"color",8,"currentColor"),i=vt(e,"size",8,24),a=vt(e,"strokeWidth",8,2),A=vt(e,"absoluteStrokeWidth",8,!1),d=vt(e,"iconNode",24,()=>[]);const c=(...m)=>m.filter((y,_,C)=>!!y&&C.indexOf(y)===_).join(" ");Rr();var u=eE();let h;var f=w(u);Yt(f,1,d,Ar,(m,y)=>{let _=()=>l(y)[0],C=()=>l(y)[1];var I=kt(),N=ft(I);O4(N,_,!0,(k,W)=>{let V;He(()=>V=R2(k,V,{...C()},void 0,k.namespaceURI===Jb,k.nodeName.includes("-")))}),L(m,I)});var g=z(f);cn(g,e,"default",{}),He((m,y)=>h=R2(u,h,{...Z3,...r,width:i(),height:i(),stroke:s(),"stroke-width":m,class:y},void 0,!0),[()=>A()?Number(a())*24/Number(i()):a(),()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],dt),L(n,u),Mr()}function Wa(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"asterisk"},()=>t,{iconNode:[["path",{d:"M12 6v12"}],["path",{d:"M17.196 9 6.804 15"}],["path",{d:"m6.804 9 10.392 6"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function mw(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"book-text"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["path",{d:"M8 11h8"}],["path",{d:"M8 7h6"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function tE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"bot"},()=>t,{iconNode:[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function rE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function t1(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function wu(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"circle-x"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function Ap(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"clock"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function nE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"eye"},()=>t,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function Th(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"file-text"},()=>t,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function oE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"key"},()=>t,{iconNode:[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function xd(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"loader-circle"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function r1(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function sE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"mail"},()=>t,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function iE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"message-square"},()=>t,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function Ev(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"package"},()=>t,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function J_(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function yu(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function aE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"printer"},()=>t,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function AE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"refresh-cw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function lE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function Z_(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function dE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"send"},()=>t,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function cE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"shopping-bag"},()=>t,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function uE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"shopping-cart"},()=>t,{iconNode:[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function n1(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"trash-2"},()=>t,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function hE(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"user-cog"},()=>t,{iconNode:[["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m21.7 16.4-.9-.3"}],["path",{d:"m15.2 13.9-.9-.3"}],["path",{d:"m16.6 18.7.3-.9"}],["path",{d:"m19.1 12.2.3-.9"}],["path",{d:"m19.6 18.7-.4-1"}],["path",{d:"m16.8 12.3-.4-1"}],["path",{d:"m14.3 16.6 1-.4"}],["path",{d:"m20.7 13.8 1-.4"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function ww(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"user"},()=>t,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}function Hu(n,e){const t=on(e,["children","$$slots","$$events","$$legacy"]);gn(n,pn({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,s)=>{var i=kt(),a=ft(i);cn(a,e,"default",{}),L(o,i)},$$slots:{default:!0}}))}async function fE(n,e,t,r,o){let s=pt.from("estimates").select("*").eq("is_delete",!1).neq("status","temp").order("created_at",{ascending:!1});t&&(s=s.eq("shop_id",t)),e?s=s.eq("customer_id",e):n&&(s=s.eq("sess",n)),r&&(s=s.gte("created_at",`${r}T00:00:00`)),o&&(s=s.lte("created_at",`${o}T23:59:59`));const{data:i,error:a}=await s;if(a)throw a;return i||[]}async function o1(n,e,t){if(n&&e){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("mall_type",n).eq("customer_id",e).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}if(t){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("sess",t).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}return null}async function bu(n){const{data:e,error:t}=await pt.from("estimates").select("*").eq("id",n).eq("is_delete",!1).single();if(t)throw t;return e}function _u(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${e}${t}${r}${o}${s}${i}`}async function s1(n){const e={...n,estimate_no:_u(),customer_id:n.customer_id===""?null:n.customer_id,sess:n.sess===""?null:n.sess},{data:t,error:r}=await pt.from("estimates").insert(e).select().single();if(r)throw r;return t}async function Od(n,e){const{data:t,error:r}=await pt.from("estimates").select("estimate_no, customer_id, sess").eq("id",n).single();if(r)throw r;const o={...e};(e.customer_id===""||e.customer_id===void 0)&&((t==null?void 0:t.customer_id)===null?o.customer_id=null:e.customer_id===""&&delete o.customer_id),(e.sess===""||e.sess===void 0)&&(t!=null&&t.sess?delete o.sess:e.sess===""&&(o.sess=null)),t!=null&&t.estimate_no||(o.estimate_no=_u());const{error:s}=await pt.from("estimates").update(o).eq("id",n);if(s)throw s;const{data:i,error:a}=await pt.from("estimates").select("*").eq("id",n).single();if(a)throw a;if(!i)throw new Error("   .");return i}async function Bu(n){const{data:e,error:t}=await pt.from("estimate_items").select(`
      *,
      product:products(*),
      variant:product_variants(id, title, thumbnail)
    `).eq("estimate_id",n);if(t)throw t;return(e||[]).map(r=>{var o;return{...r,variant_title:((o=r.variant)==null?void 0:o.title)||null}})}async function i1(n){const{data:e,error:t}=await pt.from("estimate_items").insert(n).select().single();if(t)throw t;return e}async function e5(n){const{error:e}=await pt.from("estimate_items").delete().eq("id",n);if(e)throw e}async function Dd(n){const{data:e,error:t}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function a1(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function A1(n){const{data:e,error:t}=await pt.from("estimate_prints").insert(n).select().single();if(t)throw t;return e}async function t5(n){const{error:e}=await pt.from("estimate_prints").delete().eq("id",n);if(e)throw e}async function Fv(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").insert(n).select().single();if(t)throw t;return e}async function r5(n,e){const{data:t,error:r}=await pt.from("estimates").update({status:e}).eq("id",n).select().single();if(r)throw r;return t}function Zp(n,e){return pt.channel(`estimate-${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"estimates",filter:`id=eq.${n}`},t=>{e(t.new)}).subscribe()}function n5(n,e,t,r){const o=r?`estimate-list-${e}-${r}`:`estimate-list-${n}-${e}`;let s=`shop_id=eq.${e}`;return r?s=`customer_id=eq.${r}`:n&&(s=`sess=eq.${n}`),pt.channel(o).on("postgres_changes",{event:"*",schema:"public",table:"estimates",filter:s},i=>{t({...i,eventType:i.eventType})}).subscribe()}function zd(n){return n===void 0||n==="temp"||n==="pending"}async function l1(n){try{const e=bu(n),t=Bu(n),r=Dd(n),[o,s,i]=await Promise.all([e,t,r]);return{estimate:o,items:s||[],prints:i||[]}}catch(e){throw e}}async function o5(n){const{data:e,error:t}=await pt.from("estimate_comments").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function kf(n){const{data:e,error:t}=await pt.from("estimate_comments").insert(n).select().single();if(t)throw t;return e}function d1(n,e){return pt.channel(`estimate-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_comments",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}async function s5(){var n,e;try{const t=document.getElementById("odiz-customer-id"),r=document.getElementById("odiz-sess"),o=(n=t==null?void 0:t.value)==null?void 0:n.trim(),s=(e=r==null?void 0:r.value)==null?void 0:e.trim();if(!o||!s)return 0;const{data:i,error:a}=await pt.from("estimates").select("id").eq("sess",s).is("customer_id",null);if(a)throw a;if(!i||i.length===0)return 0;const{data:A,error:d}=await pt.from("estimates").update({customer_id:o}).eq("sess",s).is("customer_id",null).select();if(d)throw d;return(A==null?void 0:A.length)||0}catch{return 0}}function c1(n,e){return pt.channel(`estimate-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}function i5(n,e){return pt.channel(`estimate-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateItems  :",r)})}function a5(n,e){return pt.channel(`estimate-simple-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_simple_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateSimplePrints  :",r)})}function A5(n,e){return pt.channel(`estimate-addon-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_addon_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAddonItems  :",r)})}function l5(n,e){return pt.channel(`estimate-additional-costs-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_additional_costs",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAdditionalCosts  :",r)})}async function d5(n,e,t,r,o){const s=t?t.replace(/[\s\-\(\)\.]/g,""):"";let i=pt.from("estimates").select("*").eq("shop_id",n).or("customer_id.is.null,customer_id.eq.").neq("status","temp").order("created_at",{ascending:!1});r&&!e&&!s?i=i.eq("sess",r):(e&&(i=i.ilike("order_name",`%${e}%`)),s&&(i=i.filter("order_phone","ilike",`%${s}%`))),o&&(i=i.eq("mall_type",o));const{data:a,error:A}=await i;if(A)throw A;return a||[]}async function c5(n){try{const{data:e,error:t}=await pt.from("estimate_items").select(`
        *,
        product:products(*)
      `).eq("estimate_id",n).order("idx");if(t)throw t;const{data:r,error:o}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).order("idx");if(o)throw o;const s={};return(e||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,product:i.product,items:[],prints:[]}),s[a].items.push(i)}),(r||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,items:[],prints:[]}),s[a].prints.push(i)}),Object.values(s)}catch(e){throw e}}async function eg(n){const{data:e,error:t}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).order("idx");if(t)throw t;return e||[]}async function u5(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("id",n).single();if(t)throw t;return e||null}async function u1(n){const e={...n,selected_variant_id:n.selected_variant_id&&n.selected_variant_id.trim()!==""?n.selected_variant_id:null},{data:t,error:r}=await pt.from("estimate_addon_items").insert(e).select().single();if(r)throw r;return t}async function h5(n,e){const{error:t}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t}async function h1(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function f5(n){try{const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at");if(t)throw t;return(e||[]).map((o,s)=>({id:o.id,product:{name:o.name,title:o.name,mall_type:o.mall_type||null,mall_product_id:o.mall_product_id||null},items:[{estimate_id:n,quantity:1,price:o.amount}],additionalCosts:[o],isAdditionalCost:!0}))}catch(e){throw e}}async function p5(n){const{data:e,error:t}=await pt.from("estimate_items").select("idx").eq("estimate_id",n).order("idx",{ascending:!1}).limit(1).single();return t||!e?-1:e.idx}async function g5(n,e,t,r){try{const o=await o1(e,t,r);let s,i,a=!1,A=0;if(o&&o.id)s=o.id,i=o.estimate_no||_u(),await Od(s,{...n.estimate,estimate_no:i}),A=await p5(s)+1;else{const g={...n.estimate,estimate_no:_u(),status:"temp",customer_id:n.estimate.customer_id===""?null:n.estimate.customer_id,sess:n.estimate.sess===""?null:n.estimate.sess},{data:m,error:y}=await pt.from("estimates").insert(g).select().single();if(y)throw new Error(`  : ${y.message}`);s=m.id,i=m.estimate_no,a=!0}let d=0;if(n.estimate_items&&n.estimate_items.length>0){const g=n.estimate_items.map(_=>({..._,estimate_id:s,idx:A})),{data:m,error:y}=await pt.from("estimate_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);d=(m==null?void 0:m.length)||0}let c=0;if(n.estimate_simple_prints&&n.estimate_simple_prints.length>0){const g=n.estimate_simple_prints.map(_=>({..._,estimate_id:s,idx:a?_.idx||0:A})),{data:m,error:y}=await pt.from("estimate_simple_prints").insert(g).select();if(y)throw new Error(`   : ${y.message}`);c=(m==null?void 0:m.length)||0}let u=0;if(n.estimate_prints&&n.estimate_prints.length>0){const g=n.estimate_prints.map(_=>({..._,estimate_id:s,idx:a?_.idx||0:A})),{data:m,error:y}=await pt.from("estimate_prints").insert(g).select();if(y)throw new Error(`    : ${y.message}`);if(u=(m==null?void 0:m.length)||0,u>0){const{error:_}=await pt.from("estimate_items").update({print_type:"detailed"}).eq("estimate_id",s).eq("idx",A)}}let h=0;if(n.estimate_addon_items&&n.estimate_addon_items.length>0){const g=n.estimate_addon_items.map(_=>({..._,estimate_id:s,idx:a?_.idx||0:A,selected_variant_id:_.selected_variant_id&&_.selected_variant_id.trim()!==""?_.selected_variant_id:null})),{data:m,error:y}=await pt.from("estimate_addon_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);h=(m==null?void 0:m.length)||0}const f={success:!0,estimateId:s,details:{estimateCount:a?1:0,itemsCount:d,simplePrintsCount:c,detailedPrintsCount:u,addonItemsCount:h}};return await f1(s),f}catch(o){return{success:!1,error:o instanceof Error?o.message:"    ."}}}async function Iv(n,e){try{const{error:t}=await pt.from("estimate_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t;const{error:r}=await pt.from("estimate_prints").delete().eq("estimate_id",n).eq("idx",e);if(r)throw r;const{error:o}=await pt.from("estimate_simple_prints").delete().eq("estimate_id",n).eq("idx",e);if(o)throw o;const{error:s}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(s)throw s}catch(t){throw t}}async function v5(n,e){try{const{data:t,error:r}=await pt.from("estimate_items").select(`
        *,
        product:products(
          *,
          options:product_options(
            *,
            values:product_option_values(*)
          ),
          variants:product_variants(*)
        )
      `).eq("estimate_id",n).eq("idx",e);if(r)throw r;if(t&&t.length>0)for(const h of t)if(h.variant_id)try{const{data:f,error:g}=await pt.from("product_variants").select("*").eq("id",h.variant_id).single();if(g)h.variant=null;else{h.variant=f;try{const{data:m,error:y}=await pt.from("prices").select("*").eq("variant_id",h.variant_id);y?h.variant.prices=[]:h.variant.prices=m||[]}catch{h.variant.prices=[]}try{const{data:m,error:y}=await pt.from("product_variant_option_values").select("option_value_id").eq("variant_id",h.variant_id);if(y||!m||m.length===0)h.variant.option_values=[];else{const _=m.map(I=>I.option_value_id).filter(Boolean),C=[];for(const I of _)try{const{data:N,error:k}=await pt.from("product_option_values").select("id, value, option_id").eq("id",I).single();if(k||!N)continue;let W=null;if(N.option_id){const{data:V,error:H}=await pt.from("product_options").select("*").eq("id",N.option_id).single();!H&&V&&(W={id:V.id,name:V.title})}C.push({option_value:{id:N.id,value:N.value,option_id:N.option_id,option:W}})}catch{}h.variant.option_values=C}}catch{h.variant.option_values=[]}}}catch{h.variant=null}else h.variant=null;const{data:o,error:s}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).eq("idx",e);if(s)throw s;if(o&&o.length>0){const{getParentTemplates:h}=await ps(async()=>{const{getParentTemplates:f}=await Promise.resolve().then(()=>yE);return{getParentTemplates:f}},void 0);for(const f of o)if(f.template_id)try{const g=await h(f.template_id);f.parentTemplates=g}catch{f.parentTemplates=[]}else f.parentTemplates=[]}const{data:i,error:a}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("idx",e);if(a)throw a;const{data:A,error:d}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).eq("idx",e);if(d)throw d;const c=t&&t.length>0?t[0].product_id:null;let u=[];if(c)try{const{getProductAddons:h}=await ps(async()=>{const{getProductAddons:f}=await Promise.resolve().then(()=>G3);return{getProductAddons:f}},void 0);u=await h(c)}catch{u=[]}return{items:t||[],prints:o||[],simplePrints:i||[],addonItems:A||[],addons:u||[]}}catch(t){throw t}}function m5(n){const e={};return n.forEach((t,r)=>{if(!t.variant)return;const o=t.variant;let s="";if(o.option_values&&Array.isArray(o.option_values)&&o.option_values.length>0)try{const a=o.option_values.find(A=>{var c;if(!A||!A.option_value)return!1;const d=(c=A.option_value.option)==null?void 0:c.name;return d===""||d===""||d==="color"||d==="Color"});a&&a.option_value&&(s=a.option_value.value||"")}catch{}if(!s&&o.title){const a=o.title.split("/").map(A=>A.trim());a.length>0&&(s=a[0])}s||(s=""),e[s]||(e[s]=[]),e[s].some(a=>a.id===o.id)||e[s].push({id:o.id,title:o.title,thumbnail:o.thumbnail,product_id:o.product_id,prices:t.variant.prices||[],option_values:o.option_values||[]})}),e}function w5(n,e){var y,_,C;if(!n.items||n.items.length===0)throw new Error("estimate_items  ");const t=(y=n.items[0])==null?void 0:y.product_id;if(!t)throw new Error("Product ID   ");let r;r=m5(n.items),Object.keys(r).length;const o={},s={},i=new Set;let a=0;n.items.forEach((I,N)=>{const k=I.variant_id,W=I.quantity||0;a+=W;let V="";for(const[H,J]of Object.entries(r))if(J.some(xe=>xe.id===k)){V=H,i.add(H);break}V&&(o[V]||(o[V]={}),o[V][k]=W),(I.discount_amount>0||I.discount_value>0)&&(s[k]={hasDiscount:!0,discountedPrice:I.price,discountAmount:I.discount_amount,discountInfo:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}})});const A={productId:t,product:(_=n.items[0])==null?void 0:_.product,addons:n.addons||[],addonItems:n.addonItems||[],selectedColors:Array.from(i),quantityByVariant:o,variantsByColor:r,variantDiscounts:s,totalQuantity:a,isCompleted:!0,lastUpdated:Date.now()},d=(n.simplePrints||[]).map(I=>({objectId:I.object_id,title:I.title,printMethod:I.print_method,uploadedFiles:I.uploaded_files,savedFileInfo:I.file_metadata,price:I.price})),c=n.prints.map((I,N)=>({template:{id:I.template_id},template_id:I.template_id,variant_id:I.variant_id,colors:I.colors,uploads:I.uploads,nameSheet:I.name_sheet,name_sheet:I.name_sheet,objectId:I.object_id,object_id:I.object_id,price:I.price,original_price:I.original_price,discount_amount:I.discount_amount,discount_type:I.discount_type,discount_value:I.discount_value,discount_direction:I.discount_direction,discount_min_quantity:I.discount_min_quantity,discount_max_quantity:I.discount_max_quantity,parentTemplates:I.parentTemplates||[],discountInfo:{originalPrice:I.original_price,discountAmount:I.discount_amount,discountDetails:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}}})),u={};n.addonItems.forEach(I=>{u[I.addon_id]={productId:I.selected_product_id,variantId:I.selected_variant_id}});const h={productId:t,selectedAddons:u,isCompleted:!0,lastUpdated:Date.now()};let f="none";const g=(C=n.items[0])==null?void 0:C.print_type;g&&["simple","detailed","self-design","none"].includes(g)?f=g:(f="selection",(d.length>0||c.length>0)&&console.warn("    print_type .    ."));const m={productId:t,currentMethod:f,isCompleted:!0,lastUpdated:Date.now()};return{productId:t,fixedEstimateData:{productId:t,productSelection:A,printSelection:m,addonSelection:h,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:Date.now().toString(36)+Math.random().toString(36).substr(2)},sessionStorageData:{fixedEstimateKey:`fixedEstimate_${t}`,simplePrintKey:`simplePrint_${t}`,detailedPrintKey:`detailedPrint_${t}`,printMethod:f,simplePrintState:d,detailedPrintState:c}}}async function y5(n){const{data:e,error:t}=await pt.from("estimate_items").select("quantity, price, print_type").eq("estimate_id",n);if(t)throw t;let r=0,o=0,s=!1;(e||[]).forEach(g=>{const m=g.quantity||0,y=g.price||0;r+=m*y,o+=m,g.print_type==="detailed"&&(s=!0)});let i=0;if(s){const{data:g,error:m}=await pt.from("estimate_prints").select("price").eq("estimate_id",n);if(m)throw m;i=(g||[]).reduce((y,_)=>y+(_.price||0),0)}const{data:a,error:A}=await pt.from("estimate_addon_items").select("price, quantity").eq("estimate_id",n);if(A)throw A;let d=0;(a||[]).forEach(g=>{const m=g.price||0,y=g.quantity||1;d+=m*y});const{data:c,error:u}=await pt.from("estimate_additional_costs").select("amount").eq("estimate_id",n);if(u)throw u;const h=(c||[]).reduce((g,m)=>g+(m.amount||0),0),f=r+i+d+h;return{product_amount:r,print_amount:i,addon_amount:d,additional_amount:h,total_quantity:o,total_amount:f}}async function f1(n){const e=await y5(n),{error:t}=await pt.from("estimates").update(e).eq("id",n);if(t)throw new Error(`Failed to update estimate summary: ${t.message}`)}async function b5(n,e,t,r,o){try{const s=await bu(n);if(!s)throw new Error("    ");const i=new Date().toISOString(),a=_u(),A={shop_id:s.shop_id||e,name:s.name,organization_name:s.organization_name,order_name:s.order_name,order_phone:s.order_phone,postcode:s.postcode,address1:s.address1,address2:s.address2,comment:s.comment,shipping_method:s.shipping_method,pref_delivery_date:s.pref_delivery_date,upload_memo:s.upload_memo,product_amount:s.product_amount,print_amount:s.print_amount,addon_amount:s.addon_amount,additional_amount:s.additional_amount,total_quantity:s.total_quantity,total_amount:s.total_amount,delivery_fee:s.delivery_fee,memo:s.memo,use_reorder:s.use_reorder,sess:t||null,customer_id:r||null,mall_type:o||s.mall_type,estimate_no:a,status:"temp",design_confirm:"none",source_estimate_id:n,is_delete:!1,created_at:i,updated_at:i},{data:d,error:c}=await pt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);const u=d.id;return await pE(n,u),await gE(n,u),await vE(n,u),await mE(n,u),await wE(n,u),console.log(`[copyEstimateForUser]   : ${n}  ${u}`),{success:!0,newEstimateId:u,newEstimateNo:a}}catch(s){return console.error("[copyEstimateForUser] :",s),{success:!1,newEstimateId:null,newEstimateNo:null,error:s instanceof Error?s.message:"    ."}}}async function pE(n,e){const{data:t,error:r}=await pt.from("estimate_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function gE(n,e){const{data:t,error:r}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_simple_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function vE(n,e){const{data:t,error:r}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function mE(n,e){const{data:t,error:r}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_addon_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function wE(n,e){const{data:t,error:r}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_additional_costs").insert(s);if(i)throw new Error(`    : ${i.message}`)}}function _5(n){return n?!n.sess&&!n.customer_id:!1}const h0=Object.freeze(Object.defineProperty({__proto__:null,addEstimateAddonItem:u1,addEstimateComment:kf,addEstimateItem:i1,addEstimatePrint:A1,addEstimateSimplePrint:Fv,buildVariantsByColorFromDB:m5,calculateEstimateSummary:y5,canEditEstimate:zd,convertDBDataToSessionStorage:w5,copyEstimateForUser:b5,createEstimate:s1,deleteEstimateAddonItemsByIdx:h5,deleteEstimateItem:e5,deleteEstimatePrint:t5,deleteEstimateProductByIdx:Iv,getAdditionalItems:f5,getEstimateAdditionalCost:u5,getEstimateAdditionalCosts:h1,getEstimateAddonItems:eg,getEstimateById:bu,getEstimateComments:o5,getEstimateItems:Bu,getEstimateItemsGroupedByIdx:c5,getEstimatePrints:Dd,getEstimateSimplePrints:a1,getEstimatesWithDateFilter:fE,getFullEstimateDetails:l1,getGuestEstimates:d5,getMaxEstimateItemIdx:p5,getTempEstimate:o1,isAdminCreatedEstimate:_5,loadEstimateItemDataByIdx:v5,migrateSessionEstimatesToCustomer:s5,saveCompleteEstimateData:g5,subscribeToEstimateAdditionalCostsChanges:l5,subscribeToEstimateAddonItemsChanges:A5,subscribeToEstimateChanges:Zp,subscribeToEstimateCommentChanges:d1,subscribeToEstimateItemsChanges:i5,subscribeToEstimateListChanges:n5,subscribeToEstimatePrintChanges:c1,subscribeToEstimateSimplePrintsChanges:a5,updateEstimate:Od,updateEstimateStatus:r5,updateEstimateSummary:f1},Symbol.toStringTag,{value:"Module"}));async function B5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("id",n).single();if(t)throw t;return e}async function x5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("parent_id",n).order("sort");if(t)throw t;return e||[]}async function lp(n){const{data:e,error:t}=await pt.from("process_print_areas").select(`
            id,
            title,
            process_print_area_templates!inner (
                id,
                print_area_id,
                template_id,
                group_cd,
                created_at,
                updated_at,
                template:templates (*)
            )
        `).eq("object_id",n).single();if(t)throw t;return e}async function ju(n){const e=[],{data:t,error:r}=await pt.from("templates").select(" * ").eq("id",n).single();if(r)return console.error("   :",r),e;if(!t)return e;e.push(t);let o=t.parent_id;for(;o;){const{data:s,error:i}=await pt.from("templates").select(" * ").eq("id",o).single();if(i){console.error("   :",i);break}if(!s)break;e.push(s),o=s.parent_id}return e.reverse()}async function Vd(n){const{data:e,error:t}=await pt.from("template_products").select(`
            *,
            product:products (*),
            template_product_variants (
                id,
                variant_id,
                color_count,
                min_quantity,
                plate_price
            )
        `).eq("template_id",n).single();if(t)throw t;return e}async function p1(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("object_id",n).single();return t?(console.error("  :",t),null):e}const yE=Object.freeze(Object.defineProperty({__proto__:null,getChildTemplates:x5,getParentTemplates:ju,getPrintAreaByObjectId:p1,getTemplate:B5,getTemplateProduct:Vd,getTemplatesByObjectId:lp},Symbol.toStringTag,{value:"Module"})),Yl={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1,currentSessionId:`session-${Date.now()}-${Math.random().toString(36).substring(2)}`,sessionStorageKey:"extended-product-data-cache"};function bE(){const{subscribe:n,set:e,update:t}=gl(Yl),r={save(o,s){if(!(typeof window>"u"))try{const i=`${Yl.sessionStorageKey}-${o}`,a={...s,lastSavedToSession:Date.now()};window.sessionStorage.setItem(i,JSON.stringify(a))}catch(i){console.warn("   :",i)}},restore(o){if(typeof window>"u")return null;try{const s=`${Yl.sessionStorageKey}-${o}`,i=window.sessionStorage.getItem(s);if(i)return JSON.parse(i)}catch(s){console.warn("   :",s)}return null},clear(o){if(!(typeof window>"u"))if(o){const s=`${Yl.sessionStorageKey}-${o}`;window.sessionStorage.removeItem(s)}else Object.keys(window.sessionStorage).forEach(s=>{s.startsWith(Yl.sessionStorageKey)&&window.sessionStorage.removeItem(s)})}};return{subscribe:n,set:e,update:t,async loadIntegratedProductData(o,s){var d;const i={subscribe:n},a=fn(i),A=r.restore(o);if((d=a.productDataCache[o])!=null&&d.isLoaded||A!=null&&A.isLoaded){const c=A||a.productDataCache[o];return A&&t(u=>({...u,productDataCache:{...u.productDataCache,[o]:c}})),c}if(a.loadingProducts.has(o))return new Promise((c,u)=>{const h=setInterval(()=>{var g;const f=fn(i);f.loadingProducts.has(o)||(clearInterval(h),(g=f.productDataCache[o])!=null&&g.isLoaded?c(f.productDataCache[o]):u(new Error("   ")))},100)});t(c=>({...c,loadingProducts:new Set([...c.loadingProducts,o]),isGlobalLoading:!0,productDataCache:{...c.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0,sessionId:c.currentSessionId}}}));try{const[c,u]=await Promise.all([Nu(o,s),Mu(o)]);if(!c)throw new Error("   ");const h={};u.forEach(g=>{g.items.forEach(m=>{m.addon_product.variants&&m.addon_product.variants.length>0&&(h[m.addon_product.id]={price:m.addon_product.variants[0].prices[0].amount,title:m.addon_product.title,variants:m.addon_product.variants,description:m.addon_product.description,thumbnail:m.addon_product.thumbnail})})});const f={id:o,product:c,addons:u,process:c.process,addonProductsMap:h,productSelection:A==null?void 0:A.productSelection,printSelection:A==null?void 0:A.printSelection,addonSelection:A==null?void 0:A.addonSelection,isLoaded:!0,isLoading:!1,sessionId:a.currentSessionId};return t(g=>{const m=new Set(g.loadingProducts);return m.delete(o),{...g,loadingProducts:m,isGlobalLoading:m.size>0,productDataCache:{...g.productDataCache,[o]:f}}}),r.save(o,f),f}catch(c){throw console.error("   :",c),t(u=>{const h=new Set(u.loadingProducts);return h.delete(o),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:c instanceof Error?c.message:"   ",sessionId:u.currentSessionId}}}}),c}},updateProductSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedColors:[],quantityByVariant:{},variantsByColor:{},totalQuantity:0,isCompleted:!1,...a.productSelection,...s,lastUpdated:A},c={...a,productSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},updatePrintSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,currentMethod:"selection",isCompleted:!1,...a.printSelection,...s,lastUpdated:A},c={...a,printSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},selectPrintMethod(o,s){this.updatePrintSelection(o,{currentMethod:s,lastUpdated:Date.now()})},completePrintSelection(o){this.updatePrintSelection(o,{isCompleted:!0,lastUpdated:Date.now()})},updateAddonSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedAddons:{},isCompleted:!1,...a.addonSelection,...s,lastUpdated:A},c={...a,addonSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},getProductData(o){return fn({subscribe:n}).productDataCache[o]||null},restoreFromSession(o){const s=r.restore(o);return s&&t(i=>({...i,productDataCache:{...i.productDataCache,[o]:s}})),s},saveToSession(o){const a=fn({subscribe:n}).productDataCache[o];a&&r.save(o,a)},clearProductData(o){o?(r.clear(o),t(s=>{const i={...s.productDataCache};return delete i[o],{...s,productDataCache:i}})):(r.clear(),t(s=>({...s,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1})))},updateProduct(o,s){t(i=>{const A={...i.productDataCache[o]||{id:o,product:s.product,addons:s.addons,addonProductsMap:{},isLoaded:!0,isLoading:!1,sessionId:i.currentSessionId},product:s.product,addons:s.addons,isLoaded:!0,isLoading:!1};return r.save(o,A),{...i,productDataCache:{...i.productDataCache,[o]:A}}})},hasProductSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.productSelection)!=null&&i.isCompleted)},hasPrintSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.printSelection)!=null&&i.isCompleted)},hasAddonSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.addonSelection)!=null&&i.isCompleted)},reset(){console.log(" Extended Product Data Store  "),r.clear(),e(Yl),console.log(" Extended Product Data Store  ")}}}const Rn=bE();function _E(){if(typeof window>"u")return;const n=[];for(let e=0;e<window.sessionStorage.length;e++){const t=window.sessionStorage.key(e);if(!t)continue;(t.startsWith("fixedEstimate_")||t.startsWith("detailedPrint_")||t.startsWith("simplePrint_")||t.startsWith("extended-product-data-cache-"))&&n.push(t)}n.forEach(e=>window.sessionStorage.removeItem(e)),console.log(` Edit mode: Cleared ${n.length} sessionStorage keys`,n)}var BE=Y('<div class="odz-gap-2 odz-mt-3 odz-flex odz-flex-col"><button class="odz-btn odz-btn-sm odz-btn-secondary"></button> <button class="odz-btn odz-btn-sm odz-btn-primary"></button></div>'),xE=Y('<img class="odz-w-8 odz-h-8 odz-object-cover odz-rounded">'),zE=Y('<div class="odz-flex odz-items-center odz-gap-2 odz-border odz-rounded-lg odz-p-2"><!> <div class="odz-text-xs"><span> </span> <span class="odz-ml-2 odz-font-semibold"> </span></div></div>'),CE=Y('<div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><span class="odz-text-gray-600 odz-font-bold"> </span> <span class="odz-text-xs"> </span></div>'),SE=Y('<div class="odz-mt-3"></div>'),EE=Y('<span class="odz-text-gray-600"> </span> <span class="odz-text-primary odz-font-semibold odz-ml-auto"> </span>',1),FE=Y('<div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-bg-gray-50 odz-p-2 odz-rounded odz-mb-1"><span class="odz-font-medium"> </span> <!></div>'),IE=Y('<div class="odz-mt-3"><div class="odz-text-sm odz-font-bold odz-text-gray-600 odz-mb-2"> </div> <!></div>'),UE=Y('<span class="odz-text-sm odz-font-bold odz-text-gray-500"></span>'),QE=Y('<span class="odz-text-sm odz-font-bold"> </span>'),TE=Y('<div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div>'),LE=Y('<div class="odz-flex odz-flex-col odz-gap-1"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div> <div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <!></div> <!></div> <div class="odz-flex odz-flex-col odz-items-end"><span class="odz-font-bold"> </span> <span class="odz-font-bold odz-text-lg"> </span></div>',1),PE=Y('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border"><div class="odz-card-body odz-p-3"><div class="odz-flex odz-gap-4"><div class="odz-flex odz-flex-col odz-justify-between"><img class="odz-w-24 odz-h-24 odz-object-cover odz-rounded"> <!></div> <div class="odz-flex-1"><h2 class="odz-text-lg odz-font-bold"> </h2> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"></div> <!> <!> <div class="odz-flex odz-justify-between odz-items-center odz-mt-4 odz-pt-3 odz-border-t"></div></div></div></div></div>'),kE=Y('<div class="odz-text-center odz-py-8 odz-text-gray-500">  .</div>'),OE=Y('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50"><div class="odz-bg-white odz-rounded-lg odz-shadow-xl odz-max-w-md odz-w-full odz-mx-4"><div class="odz-px-6 odz-py-4 odz-border-b odz-border-gray-200"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-900">  </h3></div> <div class="odz-px-6 odz-py-4"><p class="odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-gray-900"> </span>() ?</p> <p class="odz-text-xs odz-text-gray-500 odz-mt-2">    .</p></div> <div class="odz-px-6 odz-py-4 odz-border-t odz-border-gray-200 odz-flex odz-gap-3 odz-justify-end"><button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-gray-700 odz-bg-white odz-border odz-border-gray-300 odz-rounded-lg hover:odz-bg-gray-50 odz-transition-colors"></button> <button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-white odz-bg-red-500 odz-rounded-lg hover:odz-bg-red-600 odz-transition-colors"></button></div></div></div>'),DE=Y('<div class="odz-flex odz-flex-col odz-gap-4"><!></div> <!>',1);function z5(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t);let s=vt(e,"onSelectProduct",8),i=vt(e,"onDeleteProduct",8,void 0),a=vt(e,"isEditable",8,!1),A=Ue(!1),d=null,c=Ue("");function u(V){return V.title?V.title:!V.option_values||!Array.isArray(V.option_values)?V.id||"":V.option_values.map(H=>{var J;return((J=H.option_value)==null?void 0:J.value)||""}).join(" / ")}function h(V){const H=[];return V.parentTemplates&&H.push(V.parentTemplates.map(J=>J.name).join(" > ")),V.colors&&H.push(`${V.colors.length}`),H.join(" - ")}function f(V){var H,J;d=V,b(c,((J=(H=o().products[V])==null?void 0:H.product)==null?void 0:J.title)||" "),b(A,!0)}async function g(){if(d===null)return;const V=d;b(A,!1),d=null,b(c,""),i()?await i()(V):Kt(It,lt(o).products=o().products.filter((H,J)=>J!==V),lt(o))}function m(){b(A,!1),d=null,b(c,"")}Rr();var y=DE(),_=ft(y),C=w(_);{var I=V=>{var H=kt(),J=ft(H);Yt(J,1,()=>o().products,Ar,(xe,M,O)=>{var X=PE(),te=w(X),le=w(te),ne=w(le),Be=w(ne),Z=z(Be,2);{var se=q=>{var j=BE(),Ae=w(j),Ee=z(Ae,2);at("click",Ae,()=>s()(O)),at("click",Ee,()=>f(O)),L(q,j)};ze(Z,q=>{a()&&q(se)})}var ce=z(ne,2),be=w(ce),x=w(be),F=z(be,2);Yt(F,5,()=>l(M).variants,Ar,(q,j)=>{var Ae=zE(),Ee=w(Ae);{var _e=pe=>{var oe=xE();He(ye=>{rr(oe,"src",l(j).thumbnail),rr(oe,"alt",ye)},[()=>u(l(j))],dt),L(pe,oe)};ze(Ee,pe=>{l(j).thumbnail&&pe(_e)})}var Oe=z(Ee,2),G=w(Oe),D=w(G),ie=z(G,2),me=w(ie);He(pe=>{Le(D,pe),Le(me,`${l(j).quantity??""}`)},[()=>u(l(j))],dt),L(q,Ae)});var E=z(F,2);{var U=q=>{var j=SE();Yt(j,5,()=>l(M).prints,Ar,(Ae,Ee)=>{var _e=CE(),Oe=w(_e),G=w(Oe),D=z(Oe,2),ie=w(D);He(me=>{Le(G,l(Ee).title),Le(ie,me)},[()=>h(l(Ee))],dt),L(Ae,_e)}),L(q,j)};ze(E,q=>{l(M).prints&&l(M).prints.length>0&&q(U)})}var P=z(E,2);{var T=q=>{var j=IE(),Ae=z(w(j),2);Yt(Ae,1,()=>Object.entries(l(M).addons),Ar,(Ee,_e)=>{let Oe=()=>l(_e)[1];var G=kt();const D=dt(()=>l(M).addonProductsMap[Oe().productId]);var ie=ft(G);{var me=pe=>{var oe=FE();const ye=dt(()=>l(D).variants.find(De=>De.id===Oe().variantId));var Ne=w(oe),we=w(Ne),Fe=z(Ne,2);{var ue=De=>{var Pe=EE(),he=ft(Pe),ee=w(he),ge=z(he,2),Se=w(ge);He(Me=>{Le(ee,`- ${l(ye).title||" "}`),Le(Se,` ${Me??""}`)},[()=>vr(l(ye).prices[0].amount)],dt),L(De,Pe)};ze(Fe,De=>{l(ye)&&De(ue)})}He(()=>Le(we,l(D).title)),L(pe,oe)};ze(ie,pe=>{l(D)&&pe(me)})}L(Ee,G)}),L(q,j)};ze(P,q=>{l(M).addons&&Object.keys(l(M).addons).length>0&&l(M).addonProductsMap&&q(T)})}var R=z(P,2);Yt(R,5,()=>[l(M)],Ar,(q,j)=>{var Ae=LE();const Ee=dt(()=>l(j).productAmount||(l(j).variants||[]).reduce((Qe,ot)=>Qe+ot.prices[0].amount*ot.quantity,0)),_e=dt(()=>l(j).printAmount||(l(j).prints||[]).reduce((Qe,ot)=>Qe+(ot.price||0),0)),Oe=dt(()=>l(j).addonAmount||0),G=dt(()=>l(j).totalAmount||l(Ee)+l(_e)+l(Oe)),D=dt(()=>l(j).prints&&l(j).prints.length>0),ie=dt(()=>l(j).simplePrints&&l(j).simplePrints.length>0),me=dt(()=>l(j).print_type==="simple"&&l(ie)||l(ie)&&!l(D)),pe=dt(()=>!l(D)&&!l(ie));var oe=ft(Ae),ye=w(oe),Ne=z(w(ye),2),we=w(Ne),Fe=z(ye,2),ue=z(w(Fe),2);{var De=Qe=>{var ot=UE();L(Qe,ot)},Pe=Qe=>{var ot=QE(),Ye=w(ot);He(Ce=>Le(Ye,`${Ce??""}`),[()=>vr(l(_e))],dt),L(Qe,ot)};ze(ue,Qe=>{l(me)||l(pe)?Qe(De):Qe(Pe,!1)})}var he=z(Fe,2);{var ee=Qe=>{var ot=TE(),Ye=z(w(ot),2),Ce=w(Ye);He(de=>Le(Ce,`${de??""}`),[()=>vr(l(Oe))],dt),L(Qe,ot)};ze(he,Qe=>{l(Oe)>0&&Qe(ee)})}var ge=z(oe,2),Se=z(w(ge),2),Me=w(Se);He((Qe,ot)=>{Le(we,`${Qe??""}`),Le(Me,`${ot??""}`)},[()=>vr(l(Ee)),()=>vr(l(G))],dt),L(q,Ae)}),He(()=>{rr(Be,"src",l(M).product.thumbnail),rr(Be,"alt",l(M).product.title),Le(x,l(M).product.title)}),L(xe,X)}),L(V,H)},N=V=>{var H=kE();L(V,H)};ze(C,V=>{o().products&&o().products.length>0?V(I):V(N,!1)})}var k=z(_,2);{var W=V=>{var H=OE(),J=w(H),xe=z(w(J),2),M=w(xe),O=w(M),X=w(O),te=z(xe,2),le=w(te),ne=z(le,2);He(()=>Le(X,l(c))),at("click",le,m),at("click",ne,g),L(V,H)};ze(k,V=>{l(A)&&V(W)})}L(n,y),Mr(),r()}var NE=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><form method="dialog"><button class="odz-btn"></button></form></div></div></dialog>');function Gd(n,e){Nr(e,!1);let t=vt(e,"isOpen",12),r=vt(e,"message",12),o=vt(e,"title",8,""),s=vt(e,"onClose",8,void 0);function i(){t(!1),r(""),s()&&s()()}Rr();var a=kt(),A=ft(a);{var d=c=>{var u=NE(),h=w(u),f=w(h),g=w(f),m=z(f,2),y=w(m),_=z(m,2),C=w(_),I=w(C);He(()=>{Le(g,o()),Le(y,r())}),at("click",I,i),L(c,u)};ze(A,c=>{t()&&c(d)})}L(n,a),Mr()}var ME=Y('<div class="odz-fixed odz-inset-0 odz-bg-base-100 odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-rounded-lg odz-p-8 odz-flex odz-flex-col odz-items-center odz-gap-4"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></span> <p class="odz-text-base-content odz-font-medium"> </p></div></div>');function Wd(n,e){let t=vt(e,"isLoading",8,!1),r=vt(e,"message",8,"...");var o=kt(),s=ft(o);{var i=a=>{var A=ME(),d=w(A),c=z(w(d),2),u=w(c);He(()=>Le(u,r())),L(a,A)};ze(s,a=>{t()&&a(i)})}L(n,o)}var HE=Y("<span> <span></span></span>"),jE=Y('<div class="odz-flex odz-items-center odz-gap-2 odz-w-full odz-justify-center"><!> <span> <span></span></span> <!></div>');function C5(n,e){Nr(e,!1);const t=Ue();let r=vt(e,"originalPrice",8),o=vt(e,"finalPrice",8),s=vt(e,"hasDiscount",8,!1),i=vt(e,"size",8,"md"),a=vt(e,"showOriginal",8,!0);Jt(()=>Cn(i()),()=>{b(t,{sm:{original:"odz-text-sm",final:"odz-text-sm odz-font-semibold",currency:"odz-text-xs"},md:{original:"odz-text-base",final:"odz-text-lg odz-font-bold",currency:"odz-text-sm"},lg:{original:"odz-text-lg",final:"odz-text-xl odz-font-bold",currency:"odz-text-base"}}[i()])}),to(),Rr();var A=jE(),d=w(A);{var c=y=>{var _=HE(),C=w(_),I=z(C);He(N=>{Cr(_,`odz-text-gray-500 odz-line-through ${l(t).original??""}`),Le(C,N),Cr(I,vv(l(t).currency))},[()=>r().toLocaleString()],dt),L(y,_)};ze(d,y=>{s()&&a()&&r()!==o()&&y(c)})}var u=z(d,2),h=w(u),f=z(h),g=z(u,2);{var m=y=>{var _=kt();const C=dt(()=>Math.round((r()-o())/r()*100));var I=ft(_);{var N=k=>{};ze(I,k=>{l(C)>0&&k(N)})}L(y,_)};ze(g,y=>{s()&&r()!==o()&&y(m)})}He(y=>{Cr(u,`odz-text-gray-900 ${l(t).final??""}`),Le(h,y),Cr(f,vv(l(t).currency))},[()=>o().toLocaleString()],dt),L(n,A),Mr()}var RE=Y('<img class="odz-w-8 odz-h-8 odz-object-cover odz-mb-1">'),qE=Y('<span class="odz-ml-1"></span>'),KE=Y('<span class="odz-ml-1"></span>'),$E=Y("<button><!> <span> </span> <!></button>"),VE=Y('<div class="odz-flex odz-flex-col odz-gap-2 mb-4"><h3 class="odz-font-bold odz-text-sm"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),GE=Y('<img class="odz-w-10 odz-h-10 odz-rounded odz-object-cover">'),WE=Y('<!> <div class="odz-inline-flex odz-items-center odz-justify-center odz-w-5 odz-h-5 odz-bg-red-500 odz-text-white odz-rounded-full odz-text-xs odz-font-bold odz-flex-shrink-0" title=" ">%</div>',1),XE=Y('<span class="odz-text-xs"> </span>'),YE=Y('<div class="odz-flex odz-flex-col odz-border odz-rounded odz-overflow-hidden"><div class="odz-bg-gray-50 odz-px-3 odz-py-2 odz-border-b"><span class="odz-text-xs odz-font-medium odz-text-center odz-block"> </span></div> <div class="odz-flex odz-flex-col odz-p-3 odz-gap-2"><div class="odz-text-center"><div class="odz-flex odz-items-center odz-justify-center odz-gap-1"><!></div></div> <div class="odz-flex odz-items-center odz-border odz-rounded odz-mt-1"><button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">-</button> <input type="number" class="odz-input odz-input-sm odz-w-full odz-text-center odz-border-x-0 odz-border-y focus:odz-outline-none focus:odz-ring-0 focus:odz-border-x-0 focus:odz-border-y" min="0"> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">+</button></div></div></div>'),JE=Y('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),ZE=Y(`<p class="odz-text-sm odz-text-gray-500">    ( )
                                .</p>`),eF=Y('<div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-bg-gray-100 odz-p-2 odz-rounded"><!> <h3 class="odz-font-semibold odz-text-base"> </h3></div> <!></div>'),tF=Y('<div class="odz-flex odz-flex-col odz-gap-6 mt-4"></div>'),rF=Y('<img class="odz-w-16 odz-h-16 odz-object-cover odz-rounded">'),nF=Y('<p class="odz-text-sm odz-text-gray-600 odz-mt-1"> </p>'),oF=Y('<div class="odz-text-sm odz-font-semibold odz-text-primary"> </div>'),sF=Y('<div role="button" tabindex="0"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><input type="radio" class="odz-radio odz-radio-primary odz-radio-sm"> <span class="odz-text-sm odz-font-medium"> </span></div> <!></div>'),iF=Y('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 odz-gap-3"></div>'),aF=Y('<div class="odz-border odz-rounded-lg odz-p-4 odz-bg-base-100"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-3"><!> <div><h5 class="odz-font-medium odz-text-base"> </h5> <!></div></div> <!></div>'),AF=Y('<div class="odz-flex odz-flex-col odz-gap-4"><h4 class="odz-font-semibold odz-text-base odz-text-gray-700"> </h4> <!></div>'),lF=Y('<div class="odz-flex odz-flex-col odz-gap-6 odz-mt-8"><h3 class="odz-font-bold odz-text-lg odz-border-b odz-pb-2"> </h3> <!></div>'),dF=Y('<div class="odz-flex odz-justify-end odz-mt-6"><button class="odz-btn odz-btn-accent odz-w-full"></button></div>'),cF=Y('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <div class="odz-card-actions odz-justify-end"></div></div></div> <!> <!> <!> <!>',1),uF=Y('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!> <!>',1);function hF(n,e){var be;Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=()=>Gr(ks,"$shopStore",t);let i=vt(e,"step",12,0),a=vt(e,"productId",8),A=Ue(null),d=Ue(!1),c=Ue(""),u=Ue(""),h=Ue(!1),f=Ue([]),g=Ue({}),m=Ue({}),y=Ue(((be=o().products[o().index])==null?void 0:be.variants.map(x=>({...x})))||[]),_=Ue({}),C=null,I=Ue({}),N=Ue([]),k=Ue({});function W(x,F){console.log(" togglePenultimateSelection :",{optionId:x,value:F,penultimateOptionId:C}),!C&&l(A)&&l(A).options.length>=2&&(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",C)),x!==C&&console.log(" optionId :",{optionId:x,penultimateOptionId:C}),fr(_,l(_)[x]=F),b(_,{...l(_)});const E=l(N).indexOf(F);if(console.log("  expandedPenultimateValues:",l(N),"index:",E),E===-1)if(b(N,[...l(N),F]),console.log("    expandedPenultimateValues:",l(N)),!l(k)[F]||l(k)[F].length===0){console.log(" variants  :",{value:F,optionId:x,penultimateOptionId:C});const U=l(A).variants.filter(P=>P.option_values?P.option_values.some(R=>{if(R.option_id&&R.value){const q=R.option_id===x&&R.value===F;return q&&console.log("   :",{variantId:P.id,ov:R}),q}else if(R.option_value&&R.option_value.option_id){const q=R.option_value.option_id===x&&R.option_value.value===F;return q&&console.log("   :",{variantId:P.id,ov:R}),q}return!1}):(console.log(" variant.option_values :",P.id),!1));console.log("  variants:",{value:F,count:U.length,variants:U.map(P=>({id:P.id,title:P.title}))}),fr(k,l(k)[F]=U),b(k,{...l(k)}),U.forEach(P=>{l(y).some(T=>T.id===P.id)||b(y,[...l(y),{...P,quantity:0}])})}else console.log("  variants :",{value:F,count:l(k)[F].length});else b(N,l(N).filter(U=>U!==F)),console.log("    expandedPenultimateValues:",l(N));b(N,[...l(N)]),b(k,{...l(k)}),console.log(" togglePenultimateSelection :",{expandedPenultimateValues:l(N),variantsByGroup:Object.keys(l(k)),hasExpanded:l(N).length>0}),setTimeout(()=>{console.log(" 1   :",{expandedPenultimateValues:l(N).length,variantsByGroupKeys:Object.keys(l(k))})},1e3)}function V(x,F){var U;const E=((U=l(A))==null?void 0:U.options.findIndex(P=>P.id===x))??-1;if(!(!l(A)||E===-1||E>=l(A).options.length-1)){for(let P=E+1;P<l(A).options.length;P++)delete l(_)[l(A).options[P].id];fr(_,l(_)[x]=F),b(_,{...l(_)}),b(N,[]),b(k,{}),C&&b(y,l(y).filter(P=>!P.option_values.some(T=>T.option_value.option_id===C)||(P.quantity||0)>0))}}function H(x){b(y,l(y).map(F=>F.id===x?{...F,quantity:(F.quantity||0)+1}:F))}function J(x){b(y,l(y).map(F=>F.id===x&&(F.quantity||0)>0?{...F,quantity:(F.quantity||0)-1}:F))}function xe(){const x=l(y).filter(E=>(E.quantity||0)>0);if(x.length===0){b(d,!0),b(c," "),b(u,"1    .");return}const F=o().products[o().index];F&&(Kt(It,lt(o).products[o().index]={...F,variants:x,quantity:x.reduce((E,U)=>E+(U.quantity||0),0)},lt(o)),It.updateTotalAmounts()),i(2)}async function M(){var U,P;if(!((U=l(A))!=null&&U.quantity_discounts)){b(I,{});return}const x=l(y).reduce((T,R)=>T+(R.quantity||0),0);let F=null;if(x>0){const T=((P=l(y).find(R=>(R.quantity||0)>0))==null?void 0:P.prices[0].amount)||0;F=bi(x,T,l(A).quantity_discounts)}const E={};for(const T of l(y))(T.quantity||0)>0&&(F!=null&&F.hasDiscount)&&(E[T.id]=F);b(I,E)}let O=Ue(null);Fn(async()=>{var x;b(h,!0);try{if(b(A,await Nu(a(),s().id)),l(A)&&(b(f,await Mu(l(A).id)),b(m,{}),l(f).forEach(F=>{F.items.forEach(E=>{E.addon_product.variants&&E.addon_product.variants.length>0&&fr(m,l(m)[E.addon_product.id]={price:E.addon_product.variants[0].prices[0].amount,title:E.addon_product.title,variants:E.addon_product.variants})})}),(x=o().products[o().index])!=null&&x.addons)){const F=o().products[o().index].addons;b(g,{}),Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId?fr(g,l(g)[E]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&fr(g,l(g)[E]={productId:U,variantId:""})}),b(g,{...l(g)})}if(l(A)&&l(A).options.length>0&&(l(A).options.length>=2?(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",{penultimateOptionId:C,optionCount:l(A).options.length,allOptions:l(A).options.map(F=>({id:F.id,title:F.title}))})):console.log("  2 :",l(A).options.length)),o().products[o().index]&&o().products[o().index].variants.length>0){Kt(It,lt(o).products[o().index].product=l(A),lt(o)),b(y,o().products[o().index].variants.map(E=>({...E})));const F=o().products[o().index].addons||{};if(b(g,{}),Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId?fr(g,l(g)[E]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&fr(g,l(g)[E]={productId:U,variantId:""})}),l(A)&&l(A).options.length>0){const E=l(y).filter(U=>(U.quantity||0)>0);if(E.length>0){const U=l(A).options.map(P=>P.id);if(l(A).options.length>=2){C=l(A).options[l(A).options.length-2].id;const P=[];if(E.forEach(T=>{if(T.title){const R=T.title.split(" / ");if(R.length>0){const q=R[0];P.includes(q)||P.push(q)}}T.option_values&&T.option_values.forEach(R=>{R.option_id&&R.value?R.option_id===C&&(P.includes(R.value)||P.push(R.value)):R.option_value&&R.option_value.option_id&&R.option_value.option_id===C&&(P.includes(R.option_value.value)||P.push(R.option_value.value))})}),P.length>0)P.forEach(T=>{W(C,T)});else{const T=[];E.forEach(R=>{if(R.title){const q=R.title.split(" / ");if(q.length>0){const j=q[0].trim();T.includes(j)||T.push(j)}}}),T.length>0?T.forEach(R=>{const q=l(A).options[l(A).options.length-2].values.find(j=>j.value.toLowerCase()===R.toLowerCase());if(q)W(C,q.value);else{const j=l(A).options[l(A).options.length-2].values.filter(Ae=>Ae.value.toLowerCase().includes(R.toLowerCase())||R.toLowerCase().includes(Ae.value.toLowerCase()));j.length>0&&j.forEach(Ae=>{W(C,Ae.value)})}}):l(A).options[l(A).options.length-2].values.forEach(R=>{W(C,R.value)})}}else l(A).options.length}}}else l(A)&&Kt(It,lt(o).products=[...o().products,{product:l(A),variants:[],quantity:0,prints:[],addons:{},addonProductsMap:l(m)}],lt(o));setTimeout(()=>{It.updateTotalAmounts()},100)}catch(F){console.error("Product component  :",F)}finally{b(h,!1)}});function X(x,F,E){if(!E||E.trim()===""){console.error("Invalid variantId provided:",E);return}fr(g,l(g)[x]={productId:F,variantId:E}),b(g,{...l(g)});const U=o().products[o().index];U&&(Kt(It,lt(o).products[o().index]={...U,addons:l(g),addonProductsMap:l(m)},lt(o)),It.updateTotalAmounts())}function te(x){return x?x.replace(/<[^>]*>/g,"").trim():""}Jt(()=>(o(),l(g)),()=>{var x;if((x=o().products[o().index])!=null&&x.addons&&Object.keys(o().products[o().index].addons).length>0&&Object.keys(l(g)).length===0){const F=o().products[o().index].addons;Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId&&fr(g,l(g)[E]={productId:U.productId,variantId:U.variantId})}),b(g,{...l(g)})}}),Jt(()=>(l(y),l(A),l(O),o(),l(g),l(m),It),()=>{l(y)&&l(A)&&(l(O)&&clearTimeout(l(O)),b(O,setTimeout(()=>{const x=o().products[o().index];if(x){const F=l(y).reduce((P,T)=>P+(T.quantity||0),0),E=x.quantity||0,U=l(y).filter(P=>(P.quantity||0)>0);Kt(It,lt(o).products[o().index]={...x,variants:U,quantity:F,addons:l(g),addonProductsMap:l(m)},lt(o)),M(),F!==E&&x.prints&&x.prints.length>0&&It.calculatePrintPrice(o().index),It.updateTotalAmounts()}},100)))}),to(),Rr();var le=uF(),ne=ft(le),Be=w(ne);{var Z=x=>{var F=cF(),E=ft(F),U=w(E),P=w(U),T=z(U,2),R=w(T),q=w(R),j=z(E,2);Yt(j,1,()=>l(A).options,Ar,(ie,me,pe)=>{var oe=kt(),ye=ft(oe);{var Ne=we=>{var Fe=VE(),ue=w(Fe),De=w(ue),Pe=z(ue,2);Yt(Pe,5,()=>l(me).values,Ar,(he,ee)=>{var ge=$E();const Se=dt(()=>pe===l(A).options.length-2),Me=dt(()=>l(Se)&&l(N).includes(l(ee).value)),Qe=dt(()=>l(Se)?l(Me):l(_)[l(me).id]===l(ee).value);var ot=w(ge);{var Ye=Re=>{var Ve=RE();He(()=>{rr(Ve,"src",l(ee).image),rr(Ve,"alt",l(ee).value)}),L(Re,Ve)};ze(ot,Re=>{l(ee).image&&Re(Ye)})}var Ce=z(ot,2),de=w(Ce),Te=z(Ce,2);{var qe=Re=>{var Ve=qE();L(Re,Ve)},je=Re=>{var Ve=kt(),At=ft(Ve);{var Ke=nt=>{var ht=KE();L(nt,ht)};ze(At,nt=>{l(Se)&&nt(Ke)},!0)}L(Re,Ve)};ze(Te,Re=>{l(Se)&&l(Me)?Re(qe):Re(je,!1)})}He(()=>{Cr(ge,`odz-btn odz-btn-outline odz-h-auto odz-min-h-10 odz-border-gray-300 odz-w-44 odz-p-2 odz-text-xs ${(l(Qe)?"odz-border-2 odz-border-gray-800":"")??""}`),Le(de,l(ee).value)}),at("click",ge,()=>{var Re;console.log("   :",{optionTitle:l(me).title,optionId:l(me).id,value:l(ee).value,isPenultimateOption:l(Se),index:pe,totalOptions:(Re=l(A))==null?void 0:Re.options.length}),l(Se)?W(l(me).id,l(ee).value):V(l(me).id,l(ee).value)}),L(he,ge)}),He(()=>Le(De,l(me).title)),L(we,Fe)};ze(ye,we=>{pe<l(A).options.length-1&&we(Ne)})}L(ie,oe)});var Ae=z(j,2);{var Ee=ie=>{var me=tF();Yt(me,5,()=>l(N),pe=>pe,(pe,oe)=>{var ye=eF();const Ne=dt(()=>l(k)[l(oe)]||[]),we=dt(()=>{var Me;return(Me=l(A).options[l(A).options.length-2])==null?void 0:Me.values.find(Qe=>Qe.value===l(oe))});var Fe=w(ye),ue=w(Fe);{var De=Me=>{var Qe=GE();He(()=>{rr(Qe,"src",l(we).image),rr(Qe,"alt",l(oe))}),L(Me,Qe)};ze(ue,Me=>{var Qe;(Qe=l(we))!=null&&Qe.image&&Me(De)})}var Pe=z(ue,2),he=w(Pe),ee=z(Fe,2);{var ge=Me=>{var Qe=JE();Yt(Qe,5,()=>l(Ne),ot=>ot.id,(ot,Ye)=>{var Ce=YE();const de=dt(()=>l(y).find(Ze=>Ze.id===l(Ye).id)),Te=dt(()=>{var Ze;return((Ze=l(de))==null?void 0:Ze.quantity)||0}),qe=dt(()=>{var Ze;return((Ze=l(Ye).option_values.find(wt=>wt.option_value.option_id===l(A).options[l(A).options.length-1].id))==null?void 0:Ze.option_value.value)||"N/A"}),je=dt(()=>l(I)[l(Ye).id]);var Re=w(Ce),Ve=w(Re),At=w(Ve),Ke=z(Re,2),nt=w(Ke),ht=w(nt),mt=w(ht);{var St=Ze=>{var wt=WE(),gt=ft(wt);C5(gt,{get originalPrice(){return l(Ye).prices[0].amount},get finalPrice(){return l(je).discountedPrice},hasDiscount:!0,size:"sm"}),L(Ze,wt)},st=Ze=>{var wt=XE(),gt=w(wt);He(Dt=>Le(gt,`${Dt??""}`),[()=>vr(l(Ye).prices[0].amount)],dt),L(Ze,wt)};ze(mt,Ze=>{var wt;(wt=l(je))!=null&&wt.hasDiscount&&l(Te)>0?Ze(St):Ze(st,!1)})}var tt=z(nt,2),Ft=w(tt),xt=z(Ft,2),Ot=z(xt,2);He(()=>{Le(At,l(qe)),Ft.disabled=l(Te)<=0,Wm(xt,l(Te))}),at("click",Ft,()=>J(l(Ye).id)),at("input",xt,Ze=>{const wt=parseInt(Ze.target.value)||0;b(y,l(y).map(gt=>gt.id===l(Ye).id?{...gt,quantity:wt>=0?wt:0}:gt))}),at("click",Ot,()=>H(l(Ye).id)),L(ot,Ce)}),L(Me,Qe)},Se=Me=>{var Qe=ZE();L(Me,Qe)};ze(ee,Me=>{l(Ne).length>0?Me(ge):Me(Se,!1)})}He(()=>Le(he,l(oe))),L(pe,ye)}),L(ie,me)};ze(Ae,ie=>{l(N).length>0&&ie(Ee)})}var _e=z(Ae,2);{var Oe=ie=>{var me=lF(),pe=z(w(me),2);Yt(pe,1,()=>l(f),oe=>oe.id,(oe,ye)=>{var Ne=AF(),we=w(Ne),Fe=w(we),ue=z(we,2);Yt(ue,1,()=>l(ye).items,De=>De.id,(De,Pe)=>{var he=aF(),ee=w(he),ge=w(ee);{var Se=qe=>{var je=rF();He(()=>{rr(je,"src",l(Pe).addon_product.thumbnail),rr(je,"alt",l(Pe).addon_product.title)}),L(qe,je)};ze(ge,qe=>{l(Pe).addon_product.thumbnail&&qe(Se)})}var Me=z(ge,2),Qe=w(Me),ot=w(Qe),Ye=z(Qe,2);{var Ce=qe=>{var je=nF(),Re=w(je);He(Ve=>Le(Re,Ve),[()=>te(l(Pe).addon_product.description)],dt),L(qe,je)};ze(Ye,qe=>{l(Pe).addon_product.description&&qe(Ce)})}var de=z(ee,2);{var Te=qe=>{var je=iF();Yt(je,5,()=>l(Pe).addon_product.variants,Re=>Re.id,(Re,Ve)=>{var At=sF();const Ke=dt(()=>l(g)[l(ye).id]),nt=dt(()=>{var xt,Ot;return((xt=l(Ke))==null?void 0:xt.productId)===l(Pe).addon_product.id&&((Ot=l(Ke))==null?void 0:Ot.variantId)===l(Ve).id});var ht=w(At),mt=w(ht),St=z(mt,2),st=w(St),tt=z(ht,2);{var Ft=xt=>{var Ot=oF(),Ze=w(Ot);He(wt=>Le(Ze,` ${wt??""}`),[()=>vr(l(Ve).prices[0].amount)],dt),L(xt,Ot)};ze(tt,xt=>{l(Ve).prices&&l(Ve).prices.length>0&&xt(Ft)})}He(xt=>{Cr(At,`odz-border odz-rounded odz-p-3 odz-cursor-pointer odz-transition-all odz-duration-200 ${(l(nt)?"odz-border-primary odz-bg-primary/5":"odz-border-gray-300 hover:odz-border-gray-400")??""}`),rr(mt,"name",`addon-${l(ye).id??""}`),vu(mt,l(nt)),Le(st,xt)},[()=>l(Ve).title||` ${l(Ve).id.substring(0,4)}`],dt),at("change",mt,()=>X(l(ye).id,l(Pe).addon_product.id,l(Ve).id)),at("click",At,()=>X(l(ye).id,l(Pe).addon_product.id,l(Ve).id)),at("keydown",At,xt=>xt.key==="Enter"&&X(l(ye).id,l(Pe).addon_product.id,l(Ve).id)),L(Re,At)}),L(qe,je)};ze(de,qe=>{l(Pe).addon_product.variants&&l(Pe).addon_product.variants.length>0&&qe(Te)})}He(()=>Le(ot,l(Pe).addon_product.title)),L(De,he)}),He(()=>Le(Fe,l(ye).name)),L(oe,Ne)}),L(ie,me)};ze(_e,ie=>{l(f).length>0&&ie(Oe)})}var G=z(_e,2);{var D=ie=>{var me=dF(),pe=w(me);at("click",pe,()=>xe()),L(ie,me)};ze(G,ie=>{l(y).filter(me=>(me.quantity||0)>0).length>0&&ie(D)})}He(()=>{rr(P,"src",l(A).thumbnail),rr(P,"alt",l(A).title),Le(q,l(A).title)}),L(x,F)};ze(Be,x=>{l(A)&&x(Z)})}var se=z(ne,2);Gd(se,{get isOpen(){return l(d)},set isOpen(x){b(d,x)},get title(){return l(c)},set title(x){b(c,x)},get message(){return l(u)},set message(x){b(u,x)},$$legacy:!0});var ce=z(se,2);Wd(ce,{get isLoading(){return l(h)},set isLoading(x){b(h,x)},$$legacy:!0}),L(n,le),Mr(),r()}class fF{constructor(e){this.isEnabled=!0,this.sessionId=e}log(e,t,r){if(!this.isEnabled)return;const o=new Date().toISOString();`${this.sessionId}${o}`}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}function pF(n){const e=Date.now().toString(36)+Math.random().toString(36).substr(2);return{productId:n,productSelection:null,printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:e}}function gF(){const{subscribe:n,set:e,update:t}=gl(null);let r=null,o=null,s=0;return{subscribe:n,set:e,update:t,saveToSessionStorage(i){!i||Date.now()-s<100||(o&&clearTimeout(o),o=setTimeout(()=>{try{[`fixedEstimate_${i.productId}`,`fixedEstimate_${i.productId}_${i.estimateId}`,`fixedEstimate_${i.productId}_${i.estimateId}_0`,`fixedEstimate_${i.productId}_${i.estimateId}_1`,`fixedEstimate_${i.productId}_${i.estimateId}_2`,`fixedEstimate_${i.productId}_${i.estimateId}_3`,`fixedEstimate_${i.productId}_${i.estimateId}_4`,`fixedEstimate_${i.productId}_${i.estimateId}_5`,`fixedEstimate_${i.productId}_0`,`fixedEstimate_${i.productId}_1`,`fixedEstimate_${i.productId}_2`,`fixedEstimate_${i.productId}_3`,`fixedEstimate_${i.productId}_4`,`fixedEstimate_${i.productId}_5`].forEach(c=>{try{sessionStorage.removeItem(c)}catch{}});let d=`fixedEstimate_${i.productId}`;i.estimateId&&(d+=`_${i.estimateId}`),i.idx!==void 0&&(d+=`_${i.idx}`),sessionStorage.setItem(d,JSON.stringify(i)),s=Date.now()}catch{}},10))},initialize(i,a,A){var h,f,g;let d=`fixedEstimate_${i}`;a&&(d+=`_${a}`),A!==void 0&&(d+=`_${A}`);let c=null;try{const m=sessionStorage.getItem(d);if(m){const y=JSON.parse(m);y.productId===i&&(c=y)}}catch{}const u=c||{...pF(i),estimateId:a,idx:A};r=new fF(u.sessionId),e(u),c?r.info("Fixed Estimate Store   ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId,selectedColors:((f=(h=u.productSelection)==null?void 0:h.selectedColors)==null?void 0:f.length)||0,totalQuantity:((g=u.productSelection)==null?void 0:g.totalQuantity)||0}):r.info("Fixed Estimate Store  ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId}),this.saveToSessionStorage(u)},reset(){r==null||r.info("Fixed Estimate Store "),e(null),r=null},setCurrentStep(i){t(a=>{if(!a)return a;r==null||r.info(" ",{from:a.currentStep,to:i});const A={...a,currentStep:i};return this.saveToSessionStorage(A),A})},updateProductSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.productSelection,c={productId:a.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,totalQuantity:c.totalQuantity,selectedColors:c.selectedColors.length}),{...a,productSelection:c}})},toggleColorSelection(i,a){t(A=>{var m;if(!A)return A;if(!A.productSelection){const y={productId:A.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,lastUpdated:Date.now()};A={...A,productSelection:y}}const d=[...A.productSelection.selectedColors],c={...A.productSelection.quantityByVariant},u={...A.productSelection.variantsByColor},h=d.indexOf(i);h===-1?(d.push(i),u[i]=a[i]||[],c[i]=c[i]||{},r==null||r.info("  ",{color:i,totalColors:d.length,variantCount:((m=a[i])==null?void 0:m.length)||0})):(d.splice(h,1),delete u[i],delete c[i],r==null||r.info("  ",{color:i,remainingColors:d.length}));const f=Object.values(c).reduce((y,_)=>y+Object.values(_).reduce((C,I)=>C+I,0),0),g={...A,productSelection:{...A.productSelection,selectedColors:d,quantityByVariant:c,variantsByColor:u,totalQuantity:f,lastUpdated:Date.now()}};return this.saveToSessionStorage(g),g})},updateQuantity(i,a,A){t(d=>{if(!d||!d.productSelection)return d;const c={...d.productSelection.quantityByVariant};c[i]||(c[i]={});const u=c[i][a]||0;c[i][a]=Math.max(0,A);const h=Object.values(c).reduce((g,m)=>g+Object.values(m).reduce((y,_)=>y+_,0),0);r==null||r.info(" ",{color:i,variantId:a,oldQuantity:u,newQuantity:c[i][a],totalQuantity:h,triggerDiscountUpdate:!0});const f={...d,productSelection:{...d.productSelection,quantityByVariant:c,totalQuantity:h,lastUpdated:Date.now(),needsDiscountRecalculation:!0}};return this.saveToSessionStorage(f),f})},updateVariantDiscounts(i){t(a=>{if(!a||!a.productSelection)return a;const A=a.productSelection.variantDiscounts||{},d=Object.keys(A).sort(),c=Object.keys(i).sort();if(!(JSON.stringify(d)!==JSON.stringify(c)||Object.keys(i).some(f=>JSON.stringify(A[f])!==JSON.stringify(i[f]))))return a;r==null||r.info("  ",{productId:a.productId,discountCount:Object.keys(i).length,changedVariants:Object.keys(i)});const h={...a,productSelection:{...a.productSelection,variantDiscounts:{...i},needsDiscountRecalculation:!1,lastUpdated:Date.now()}};return this.saveToSessionStorage(h),h})},completeProductSelection(){t(i=>{if(!i||!i.productSelection)return i;r==null||r.info("  ",{totalQuantity:i.productSelection.totalQuantity,selectedColors:i.productSelection.selectedColors.length});const a={...i,productSelection:{...i.productSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"print"};return this.saveToSessionStorage(a),a})},updatePrintSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.printSelection,c={productId:a.productId,currentMethod:"selection",isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,currentMethod:c.currentMethod}),{...a,printSelection:c}})},selectPrintMethod(i){t(a=>{if(!a)return a;r==null||r.info("  ",{method:i,productId:a.productId});const A={...a.printSelection,productId:a.productId,currentMethod:i,isCompleted:!1,lastUpdated:Date.now()},d={...a,printSelection:A};try{let c=`fixedEstimate_${d.productId}`;d.estimateId&&(c+=`_${d.estimateId}`),d.idx!==void 0&&(c+=`_${d.idx}`),sessionStorage.setItem(c,JSON.stringify(d)),console.log("    :",{method:i,storageKey:c,printSelection:d.printSelection})}catch(c){console.error("     :",c)}return d})},completePrintSelection(){t(i=>!i||!i.printSelection?i:(r==null||r.info("  ",{method:i.printSelection.currentMethod}),{...i,printSelection:{...i.printSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"addon"}))},updateAddonSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.addonSelection,c={productId:a.productId,selectedAddons:{},isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,addonCount:Object.keys(c.selectedAddons).length}),{...a,addonSelection:c}})},toggleAddonSelection(i,a,A){t(d=>{var g,m,y;if(!d)return d;const c={...((g=d.addonSelection)==null?void 0:g.selectedAddons)||{}};((m=c[i])==null?void 0:m.productId)===a&&((y=c[i])==null?void 0:y.variantId)===A?(delete c[i],r==null||r.info("  ",{addonId:i,productId:a,variantId:A,remainingAddons:Object.keys(c).length})):(c[i]={productId:a,variantId:A},r==null||r.info(" ",{addonId:i,productId:a,variantId:A,totalAddons:Object.keys(c).length}));const h={...d.addonSelection??{productId:d.productId,selectedAddons:{},isCompleted:!1,lastUpdated:Date.now()},productId:d.productId,selectedAddons:c,isCompleted:!1,lastUpdated:Date.now()},f={...d,addonSelection:h};try{const _=`fixedEstimate_${f.productId}`;sessionStorage.setItem(_,JSON.stringify(f))}catch{}return f})},completeAddonSelection(){t(i=>{var A;if(!i)return i;const a=Object.keys(((A=i.addonSelection)==null?void 0:A.selectedAddons)||{}).length;return r==null||r.info("  ",{addonCount:a}),{...i,addonSelection:{...i.addonSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"additional"}})},updateAdditionalInfo(i){t(a=>{if(!a)return a;const A=Date.now(),c={customerName:"",customerPhone:"",customerEmail:"",organizationName:"",postcode:"",address1:"",address2:"",shippingMethod:"standard",prefDeliveryDate:"",comment:"",designRequirement:"",isCompleted:!1,...a.additionalInfo,...i,lastUpdated:A};return r==null||r.info("  ",{changes:i,hasCustomerInfo:!!(c.customerName&&c.customerPhone),hasAddressInfo:!!c.address1}),{...a,additionalInfo:c}})},completeAdditionalInfo(){t(i=>!i||!i.additionalInfo?i:(r==null||r.info("  ",{customerName:i.additionalInfo.customerName,hasAddress:!!i.additionalInfo.address1}),{...i,additionalInfo:{...i.additionalInfo,isCompleted:!0,lastUpdated:Date.now()}}))},toggleDebugMode(){t(i=>{if(!i)return i;const a=!i.isDebugMode;return r&&(a?(r.enable(),r.info("  ")):(r.info("  "),r.disable())),{...i,isDebugMode:a}})},getSelectionSummary(){var A,d,c,u,h,f,g,m,y,_;const i=fn({subscribe:n});if(!i)return null;const a={productId:i.productId,sessionId:i.sessionId,currentStep:i.currentStep,completedSteps:{product:((A=i.productSelection)==null?void 0:A.isCompleted)||!1,print:((d=i.printSelection)==null?void 0:d.isCompleted)||!1,addon:((c=i.addonSelection)==null?void 0:c.isCompleted)||!1,additional:((u=i.additionalInfo)==null?void 0:u.isCompleted)||!1},statistics:{totalQuantity:((h=i.productSelection)==null?void 0:h.totalQuantity)||0,selectedColors:((f=i.productSelection)==null?void 0:f.selectedColors.length)||0,printMethod:((g=i.printSelection)==null?void 0:g.currentMethod)||"none",addonCount:Object.keys(((m=i.addonSelection)==null?void 0:m.selectedAddons)||{}).length,hasCustomerInfo:!!((y=i.additionalInfo)!=null&&y.customerName&&((_=i.additionalInfo)!=null&&_.customerPhone))}};return r==null||r.info("  ",a),a},toEstimateStoreFormat(){const i=fn({subscribe:n});if(!i)return null;r==null||r.info("EstimateStore   ");const a={productSelection:i.productSelection,printSelection:i.printSelection,addonSelection:i.addonSelection,additionalInfo:i.additionalInfo,metadata:{sessionId:i.sessionId,lastUpdated:Date.now()}};return r==null||r.info("EstimateStore   ",{hasProductSelection:!!i.productSelection,hasPrintSelection:!!i.printSelection,hasAddonSelection:!!i.addonSelection,hasAdditionalInfo:!!i.additionalInfo}),a},toDBFormat(i){const a=fn({subscribe:n});if(!a)return null;try{const{FixedEstimateDBConverter:A}=require("../types/fixedEstimateTypes"),d=i||`EST_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r==null||r.info("DB   ",{estimateId:d});const c=A.toDBFormat(a,d);return r==null||r.info("DB   ",{estimateId:d,hasProductSelection:!!c.productSelection,hasPrintSelection:!!c.printSelection,addonSelectionsCount:c.addonSelections.length,hasAdditionalInfo:!!c.additionalInfo}),c}catch(A){return r==null||r.error("DB   ",A),null}},fromDBFormat(i){try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes");r==null||r.info("DB    ");const A=a.fromDBFormat(i);return e(A),r==null||r.info("DB   ",{productId:A.productId,sessionId:A.sessionId,currentStep:A.currentStep}),!0}catch(a){return r==null||r.error("DB   ",a),!1}},validate(){const i=fn({subscribe:n});if(!i)return{isValid:!1,errors:["Store  ."]};try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes"),A=a.validateForDB(i);return r==null||r.info("  ",{isValid:A.isValid,errorCount:A.errors.length}),A.isValid||r==null||r.warn("  ",{errors:A.errors}),A}catch(a){return r==null||r.error("  ",a),{isValid:!1,errors:["    ."]}}},backup(){const i=fn({subscribe:n});if(!i)return null;const a={...i,backupTimestamp:Date.now()};return r==null||r.info("  ",{sessionId:i.sessionId,backupTimestamp:a.backupTimestamp}),a},restore(i){if(!i||!i.sessionId)return r==null||r.error("  "),!1;try{const{backupTimestamp:a,...A}=i;return e(A),r==null||r.info("    ",{sessionId:A.sessionId,backupTimestamp:a}),!0}catch(a){return r==null||r.error("  ",a),!1}}}}const hr=gF();async function S5(n,e){const{data:t,error:r}=await pt.from("products").select("process:processes( id, shop_id, name, description, image_url, created_at, updated_at, canvas_json)").eq("id",n).eq("shop",e).single();if(r)throw r;return t!=null&&t.process?t.process:null}async function E5(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("process_id",n);if(t)throw t;return e||[]}function Xe(n,e,t){return(e=function(r){var o=function(s,i){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var A=a.call(s,i);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}(r,"string");return typeof o=="symbol"?o:o+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Je(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yw(Object(t),!0).forEach(function(r){Xe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qn(n,e){if(n==null)return{};var t,r,o=function(i,a){if(i==null)return{};var A={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(a.indexOf(d)>=0)continue;A[d]=i[d]}return A}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function zA(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let bw=class{constructor(){Xe(this,"browserShadowBlurConstant",1),Xe(this,"DPI",96),Xe(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Xe(this,"perfLimitSizeTotal",2097152),Xe(this,"maxCacheSideLimit",4096),Xe(this,"minCacheSideLimit",256),Xe(this,"disableStyleCopyPaste",!1),Xe(this,"enableGLFiltering",!0),Xe(this,"textureSize",4096),Xe(this,"forceGLPutImageData",!1),Xe(this,"cachesBoundsOfCurve",!1),Xe(this,"fontPaths",{}),Xe(this,"NUM_FRACTION_DIGITS",4)}};const $r=new class extends bw{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Je(Je({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new bw,t=(n==null?void 0:n.reduce((r,o)=>(r[o]=e[o],r),{}))||e;this.configure(t)}},yA=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Ni=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},vF=class extends Ni{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},mF=class{},wF=class extends mF{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),o=e.createShader(e.FRAGMENT_SHADER);return!!o&&(e.shaderSource(o,r),e.compileShader(o),!!e.getShaderParameter(o,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),yA("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const yF={};let _w;const Gi=()=>_w||(_w={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new wF,dispose(){},copyPasteData:yF}),Xd=()=>Gi().document,g1=()=>Gi().window,F5=()=>{var n;return Math.max((n=$r.devicePixelRatio)!==null&&n!==void 0?n:g1().devicePixelRatio,1)},nu=new class{constructor(){Xe(this,"charWidthsCache",{}),Xe(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return o[s]||(o[s]={}),o[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=$r,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Uv="6.5.4";function Of(){}const Ru=Math.PI/2,dp=2*Math.PI,v1=Math.PI/180,is=Object.freeze([1,0,0,1,0,0]),m1=16,Xa=.4477152502,Ur="center",tn="left",gs="top",Qv="bottom",Xn="right",vs="none",w1=/\r?\n/,I5="moving",tg="scaling",U5="rotating",y1="rotate",Q5="skewing",xu="resizing",bF="modifyPoly",_F="modifyPath",cp="changed",rg="scale",bs="scaleX",ti="scaleY",Yd="skewX",Jd="skewY",ho="fill",ms="stroke",up="modified",Jl="json",f0="svg",er=new class{constructor(){this[Jl]=new Map,this[f0]=new Map}has(n){return this[Jl].has(n)}getClass(n){const e=this[Jl].get(n);if(!e)throw new Ni("No class registered for ".concat(n));return e}setClass(n,e){e?this[Jl].set(e,n):(this[Jl].set(n.type,n),this[Jl].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[f0].get(n)}setSVGClass(n,e){this[f0].set(e??n.type.toLowerCase(),n)}},hp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let BF=class{constructor(){Xe(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[o,s]=r;this.on(o,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(o=>{let[s,i]=o;r.push(this.once(s,i))}),()=>r.forEach(o=>o())}if(t){const r=this.on(e,function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[o,s]=r;this._removeEventListener(o,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const o=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(o)for(let s=0;s<o.length;s++)o[s].call(this,t||{})}};const ld=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Ea=n=>{if(n===0)return 1;switch(Math.abs(n)/Ru){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Fa=n=>{if(n===0)return 0;const e=n/Ru,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let _t=class Yo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Yo(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Yo(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Yo(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Yo(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Yo(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Yo(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Yo(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Yo(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Yo(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Yo(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Yo(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Yo(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b1;const r=Fa(e),o=Ea(e),s=this.subtract(t);return new Yo(s.x*o-s.y*r,s.x*r+s.y*o).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Yo(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const b1=new _t(0,0),Df=n=>!!n&&Array.isArray(n._objects);function T5(n){class e extends n{constructor(){super(...arguments),Xe(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const i=this._objects.push(...o);return o.forEach(a=>this._onObjectAdded(a)),i}insertAt(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,o=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.forEach(A=>{const d=r.indexOf(A);d!==-1&&(r.splice(d,1),o.push(A),this._onObjectRemoved(A))}),o}forEachObject(r){this.getObjects().forEach((o,s,i)=>r(o,s,i))}getObjects(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length===0?[...this._objects]:this._objects.filter(i=>i.isType(...o))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,o){return!!this._objects.includes(r)||!!o&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,o)=>r+=o.complexity?o.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(ld(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(ld(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const i=this.findNewLowerIndex(r,s,o);return ld(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const i=this.findNewUpperIndex(r,s,o);return ld(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,o){return r!==this._objects[o]&&(ld(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,o,s){let i;if(s){i=o;for(let a=o-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o-1;return i}findNewUpperIndex(r,o,s){let i;if(s){i=o;for(let a=o+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o+1;return i}collectObjects(r){let{left:o,top:s,width:i,height:a}=r,{includeIntersecting:A=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],c=new _t(o,s),u=c.add(new _t(i,a));for(let h=this._objects.length-1;h>=0;h--){const f=this._objects[h];f.selectable&&f.visible&&(A&&f.intersectsWithRect(c,u)||f.isContainedWithinRect(c,u)||A&&f.containsPoint(c)||A&&f.containsPoint(u))&&d.push(f)}return d}}return e}let L5=class extends BF{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function Nf(n){return g1().requestAnimationFrame(n)}function xF(n){return g1().cancelAnimationFrame(n)}let zF=0;const bA=()=>zF++,xi=()=>{const n=Xd().createElement("canvas");if(!n||n.getContext===void 0)throw new Ni("Failed to create `canvas` element");return n},CF=()=>Xd().createElement("img"),Wi=n=>{const e=xi();return e.width=n.width,e.height=n.height,e},P5=(n,e,t)=>n.toDataURL("image/".concat(e),t),eo=n=>n*v1,cl=n=>n/v1,SF=n=>n.every((e,t)=>e===is[t]),hs=(n,e,t)=>new _t(n).transform(e,t),yi=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:o}=new _t(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-o,t},Fo=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],_1=(n,e)=>n.reduceRight((t,r)=>r&&t?Fo(r,t,e):r||t,void 0)||is.concat(),k5=n=>{let[e,t]=n;return Math.atan2(t,e)},fp=n=>{const e=k5(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),o=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:cl(e),scaleX:r,scaleY:o,skewX:cl(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},qu=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ku(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=eo(n),o=Ea(r),s=Fa(r);return[o,s,-s,o,e?e-(o*e-s*t):0,t?t-(s*e+o*t):0]}const B1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},O5=n=>Math.tan(eo(n)),D5=n=>[1,0,O5(n),1,0,0],N5=n=>[1,O5(n),0,1,0,0],ng=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:o=!1,skewX:s=0,skewY:i=0}=n,a=B1(r?-e:e,o?-t:t);return s&&(a=Fo(a,D5(s),!0)),i&&(a=Fo(a,N5(i),!0)),a},EF=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let o=qu(e,t);r&&(o=Fo(o,Ku({angle:r})));const s=ng(n);return SF(s)||(o=Fo(o,s)),o},Mf=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,o){if(e&&e.aborted)return o(new vF("loadImage"));const s=CF();let i;e&&(i=function(A){s.src="",o(A)},e.addEventListener("abort",i,{once:!0}));const a=function(){s.onload=s.onerror=null,i&&(e==null||e.removeEventListener("abort",i)),r(s)};n?(s.onload=a,s.onerror=function(){i&&(e==null||e.removeEventListener("abort",i)),o(new Ni("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},zu=function(n){let{signal:e,reviver:t=Of}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,o)=>{const s=[];e&&e.addEventListener("abort",o,{once:!0}),Promise.all(n.map(i=>er.getClass(i.type).fromObject(i,{signal:e}).then(a=>(t(i,a),s.push(a),a)))).then(r).catch(i=>{s.forEach(a=>{a.dispose&&a.dispose()}),o(i)}).finally(()=>{e&&e.removeEventListener("abort",o)})})},og=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&er.has(a.type)?zu([a],{signal:e}).then(A=>{let[d]=A;return o.push(d),d}):a),i=Object.keys(n);Promise.all(s).then(a=>a.reduce((A,d,c)=>(A[i[c]]=d,A),{})).then(t).catch(a=>{o.forEach(A=>{A.dispose&&A.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Zd=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},x1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Bw={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},p0=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),xw=(n,e,t,r)=>{n/=255,e/=255,t/=255;const o=Math.max(n,e,t),s=Math.min(n,e,t);let i,a;const A=(o+s)/2;if(o===s)i=a=0;else{const d=o-s;switch(a=A>.5?d/(2-o-s):d/(o+s),o){case n:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-n)/d+2;break;case t:i=(n-e)/d+4}i/=6}return[Math.round(360*i),Math.round(100*a),Math.round(100*A),r]},zw=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Lh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Cw=n=>{let[e,t,r,o=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,o]};let Os=class Ho{constructor(e){if(Xe(this,"isUnrecognised",!1),e)if(e instanceof Ho)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,o,s=1]=e;this.setSource([t,r,o,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Bw&&(e=Bw[e]),e==="transparent"?[255,255,255,0]:Ho.sourceFromHex(e)||Ho.sourceFromRgb(e)||Ho.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=xw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,o]=xw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(o,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,o]=this.getSource();return"".concat(Lh(e)).concat(Lh(t)).concat(Lh(r)).concat(Lh(Math.round(255*o)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Cw(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Cw(this.getSource()),o=t<(e||127)?0:255;return this.setSource([o,o,o,r]),this}overlayWith(e){e instanceof Ho||(e=new Ho(e));const t=this.getSource(),r=e.getSource(),[o,s,i]=t.map((a,A)=>Math.round(.5*a+.5*r[A]));return this.setSource([o,s,i,t[3]]),this}static fromRgb(e){return Ho.fromRgba(e)}static fromRgba(e){return new Ho(Ho.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,o,s]=t.slice(1,4).map(i=>{const a=parseFloat(i);return i.endsWith("%")?Math.round(2.55*a):a});return[r,o,s,zw(t[4])]}}static fromHsl(e){return Ho.fromHsla(e)}static fromHsla(e){return new Ho(Ho.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(Ho.parseAngletoDegrees(t[1])%360+360)%360/360,o=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,a,A;if(o===0)i=a=A=s;else{const d=s<=.5?s*(o+1):s+o-s*o,c=2*s-d;i=p0(c,d,r+1/3),a=p0(c,d,r),A=p0(c,d,r-1/3)}return[Math.round(255*i),Math.round(255*a),Math.round(255*A),zw(t[4])]}static fromHex(e){return new Ho(Ho.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(A=>A+A):t.match(/.{2}/g);const[o,s,i,a=255]=r.map(A=>parseInt(A,16));return[o,s,i,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?cl(r):t.includes("turn")?360*r:r}};const Dn=(n,e)=>parseFloat(Number(n).toFixed(e)),Cd=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),o=$r.DPI;switch(t==null?void 0:t[0]){case"mm":return r*o/25.4;case"cm":return r*o/2.54;case"in":return r*o;case"pt":return r*o/72;case"pc":return r*o/72*12;case"em":return r*e;default:return r}},FF=n=>{const[e,t]=n.trim().split(" "),[r,o]=(s=e)&&s!==vs?[s.slice(1,4),s.slice(5,8)]:s===vs?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:o}},pp=n=>"matrix("+n.map(e=>Dn(e,$r.NUM_FRACTION_DIGITS)).join(" ")+")",Cu=function(n,e){let t,r,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new Os(e),i=s.getAlpha();t=s.toRgb(),i!==1&&(r=i.toString())}else t="none";return o?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},Ys=n=>!!n&&n.toLive!==void 0,Sw=n=>!!n&&typeof n.toObject=="function",Ew=n=>!!n&&n.offsetX!==void 0&&"source"in n,qA=n=>!!n&&"multiSelectionStacking"in n;function M5(n){const e=n&&wi(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let o=n;const s=e.documentElement,i=e.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===e?(t=i.scrollLeft||s.scrollLeft||0,r=i.scrollTop||s.scrollTop||0):(t+=o.scrollLeft||0,r+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:t,top:r}}const wi=n=>n.ownerDocument||null,H5=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},j5=function(n,e,t){let{width:r,height:o}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=o,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(o*s).toString()),e.scale(s,s))},Tv=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Fw(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=vs,n}let R5=class{constructor(e){Xe(this,"_originalCanvasStyle",void 0),Xe(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Xd().getElementById(e)||xi();var r;if(t.hasAttribute("data-fabric"))throw new Ni("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(r)),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:o}=this.lower;j5(r,o,e,t)}setCSSDimensions(e){Tv(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&wi(e),o={left:0,top:0};if(!r)return o;const s=((t=H5(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};o.left+=parseInt(s.borderLeftWidth,10)||0,o.top+=parseInt(s.borderTopWidth,10)||0,o.left+=parseInt(s.paddingLeft,10)||0,o.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(i=e.getBoundingClientRect());const A=M5(e);return{left:i.left+A.left-(a.clientLeft||0)+o.left,top:i.top+A.top-(a.clientTop||0)+o.top}}(this.lower.el)}dispose(){Gi().dispose(this.lower.el),delete this.lower}};const IF={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...is]};let z1=class q5 extends T5(L5){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return q5.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new R5(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(yA("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?F5():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const o=Je({width:this.width,height:this.height},e);this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,o=[...this.viewportTransform],s=hs(e,yi(o));o[0]=t,o[3]=t;const i=hs(s,o);o[4]+=r.x-i.x,o[5]+=r.y-i.y,this.setViewportTransform(o)}setZoom(e){this.zoomToPoint(new _t(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new _t(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Nf(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=yi(this.viewportTransform),o=hs({x:0,y:0},r),s=hs({x:e,y:t},r),i=o.min(s),a=o.max(s);return this.vptCoords={tl:i,tr:new _t(a.x,i.y),bl:new _t(i.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(xF(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,o)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,o=t.length;r<o;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],o=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!o)return;const a=Ys(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,i&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const A=r.gradientTransform||r.patternTransform;A&&e.transform(...A)}e.fill(),e.restore()}if(o){e.save();const{skipOffscreen:A}=this;this.skipOffscreen=i,i&&e.transform(...s),o.render(e),this.skipOffscreen=A,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new _t(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new _t(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new _t(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new _t(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new _t(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return hs(this.getCenterPoint(),yi(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ur,Ur),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,o=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Je(Je(Je({version:Uv},Zd(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),o?{clipPath:o}:null)}_toObject(e,t,r){let o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!o),s}__serializeBgOverlay(e,t){const r={},o=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,a=this.overlayColor;return Ys(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),Ys(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),o=t.height||"".concat(this.height),s=$r.NUM_FRACTION_DIGITS,i=t.viewBox;let a;if(i)a='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const A=this.viewportTransform;a='viewBox="'.concat(Dn(-A[4]/A[0],s)," ").concat(Dn(-A[5]/A[3],s)," ").concat(Dn(this.width/A[0],s)," ").concat(Dn(this.height/A[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Uv,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(bA()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Ys(t)){const r=this["".concat(e,"Vpt")],o=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?o[0]:1),height:this.height/(r?o[3]:1)};return t.toSVG(s,{additionalTransform:r?pp(o):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=$r.fontPaths;this._objects.forEach(function s(i){e.push(i),Df(i)&&i._objects.forEach(s)}),e.forEach(s=>{if(!(i=s)||typeof i._renderText!="function")return;var i;const{styles:a,fontFamily:A}=s;!t[A]&&r[A]&&(t[A]=!0,a&&Object.values(a).forEach(d=>{Object.values(d).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const o=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return o?`	<style type="text/css"><![CDATA[
`.concat(o,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const o=this[t];o&&!o.excludeFromExport&&o.toSVG&&e.push(o.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Ys(r)){const o=r.repeat||"",s=this.width,i=this.height,a=this["".concat(t,"Vpt")]?pp(yi(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat(o!=="repeat-y"&&o!=="no-repeat"||!Ew(r)?s:r.source.width,'" height="').concat(o!=="repeat-x"&&o!=="no-repeat"||!Ew(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Ni("`json` is undefined"));const o=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:a,overlayImage:A,overlay:d,clipPath:c}=o,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([zu(s,{reviver:t,signal:r}),og({backgroundImage:i,backgroundColor:a,overlayImage:A,overlayColor:d,clipPath:c},{signal:r})]).then(h=>{let[f,g]=h;return this.clear(),this.add(...f),this.set(o),this.set(g),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Wi(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:o=1,enableRetinaScaling:s=!1}=e,i=o*(s?this.getRetinaScaling():1);return P5(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:o,top:s,filter:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,A=(r||this.height)*e,d=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,f=d*e,g=this.viewportTransform,m=[f,0,0,f,(g[4]-(o||0))*e,(g[5]-(s||0))*e],y=this.enableRetinaScaling,_=Wi({width:a,height:A}),C=i?this._objects.filter(I=>i(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=m,this.width=a,this.height=A,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(_.getContext("2d"),C),this.viewportTransform=g,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=h,_}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),hp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};Xe(z1,"ownDefaults",IF);const UF=["touchstart","touchmove","touchend"],QF=n=>{const e=M5(n.target),t=function(r){const o=r.changedTouches;return o&&o[0]?o[0]:r}(n);return new _t(t.clientX+e.left,t.clientY+e.top)},Lv=n=>UF.includes(n.type)||n.pointerType==="touch",Pv=n=>{n.preventDefault(),n.stopPropagation()},za=n=>{let e=0,t=0,r=0,o=0;for(let s=0,i=n.length;s<i;s++){const{x:a,y:A}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(A>o||!s)&&(o=A),(A<t||!s)&&(t=A)}return{left:e,top:t,width:r-e,height:o-t}},TF=["translateX","translateY","scaleX","scaleY"],LF=(n,e)=>gp(n,Fo(e,n.calcOwnMatrix())),gp=(n,e)=>{const t=fp(e),{translateX:r,translateY:o,scaleX:s,scaleY:i}=t,a=Qn(t,TF),A=new _t(r,o);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:i}),n.setPositionByOrigin(A,Ur,Ur)},PF=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},K5=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),C1=(n,e,t)=>{const r=n/2,o=e/2,s=[new _t(-r,-o),new _t(r,-o),new _t(-r,o),new _t(r,o)].map(a=>a.transform(t)),i=za(s);return new _t(i.width,i.height)},sg=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:is;return Fo(yi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:is),n)},Sd=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:is,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:is;return n.transform(sg(e,t))},kF=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:is,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:is;return n.transform(sg(e,t),!0)},OF=(n,e,t)=>{const r=sg(e,t);return gp(n,Fo(r,n.calcOwnMatrix())),r},$5=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Je(Je({},e),{},{target:r})),r.fire(n,e)},DF={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ao=n=>typeof n=="string"?DF[n]:n-.5,vp="not-allowed";function V5(n){return Ao(n.originX)===Ao(Ur)&&Ao(n.originY)===Ao(Ur)}function Iw(n){return .5-Ao(n)}const _i=(n,e)=>n[e],G5=(n,e,t,r)=>({e:n,transform:e,pointer:new _t(t,r)});function W5(n,e){const t=n.getTotalAngle()+cl(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function S1(n,e,t,r,o){var s;let{target:i,corner:a}=n;const A=i.controls[a],d=((s=i.canvas)===null||s===void 0?void 0:s.getZoom())||1,c=i.padding/d,u=function(h,f,g,m){const y=h.getRelativeCenterPoint(),_=g!==void 0&&m!==void 0?h.translateToGivenOrigin(y,Ur,Ur,g,m):new _t(h.left,h.top);return(h.angle?f.rotate(-eo(h.angle),y):f).subtract(_)}(i,new _t(r,o),e,t);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=A.offsetX,u.y-=A.offsetY,u}const NF=(n,e,t,r)=>{const{target:o,offsetX:s,offsetY:i}=e,a=t-s,A=r-i,d=!_i(o,"lockMovementX")&&o.left!==a,c=!_i(o,"lockMovementY")&&o.top!==A;return d&&o.set(tn,a),c&&o.set(gs,A),(d||c)&&$5(I5,G5(n,e,t,r)),d||c};class X5{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):vs,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=Cu(ho,this.fill);return[Cu(ms,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",h,"fill-rule: ",t,"; ","opacity: ",d,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'.concat(pp(r));return"".concat(o).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=o,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:o,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",A=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=A&&A.absolutePositioned,u=this.stroke,h=this.fill,f=this.shadow,g=[],m=e.indexOf("COMMON_PARTS");let y;A&&(A.clipPathId="CLIPPATH_".concat(bA()),y='<clipPath id="'.concat(A.clipPathId,`" >
`).concat(A.toClipPathSVG(r),`</clipPath>
`)),c&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons(),` >
`);const _=[i,d,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[m]=_,Ys(h)&&g.push(h.toSVG(this)),Ys(u)&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),A&&g.push(y),g.push(e.join("")),g.push(`</g>
`),c&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==ho?' paint-order="'.concat(this.paintFirst,'" '):""}}function ig(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Uw;const ul=String.raw(Uw||(Uw=zA(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),MF=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ul+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ul+"))?\\s+(.*)"),HF={cx:tn,x:tn,r:"radius",cy:gs,y:gs,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},g0="font-size",v0="clip-path";ig(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);ig(["symbol","image","marker","pattern","view","svg"]);const Qw=ig(["symbol","g","a","svg","clipPath","defs"]),jF=new _t(1,0),Y5=new _t,J5=(n,e)=>n.rotate(e),kv=(n,e)=>new _t(e).subtract(n),Ov=n=>n.distanceFrom(Y5),Dv=(n,e)=>Math.atan2(ou(n,e),qF(n,e)),RF=n=>Dv(jF,n),E1=n=>n.eq(Y5)?n:n.scalarDivide(Ov(n)),Z5=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return E1(new _t(-n.y,n.x).scalarMultiply(e?1:-1))},ou=(n,e)=>n.x*e.y-n.y*e.x,qF=(n,e)=>n.x*e.x+n.y*e.y,Tw=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=ou(e,t),o=ou(e,n),s=ou(t,n);return r>=0?o>=0&&s<=0:!(o<=0&&s>=0)},Lw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Pw=new RegExp("(?:\\s|^)"+Lw+Lw+"("+ul+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Ca{constructor(e){const t=typeof e=="string"?Ca.parseShadow(e):e;Object.assign(this,Ca.ownDefaults,t),this.id=bA()}static parseShadow(e){const t=e.trim(),[,r=0,o=0,s=0]=(Pw.exec(t)||[]).map(i=>parseFloat(i)||0);return{color:(t.replace(Pw,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:o,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=J5(new _t(this.offsetX,this.offsetY),eo(-e.angle)),r=new Os(this.color);let o=40,s=40;return e.width&&e.height&&(o=100*Dn((Math.abs(t.x)+this.blur)/e.width,$r.NUM_FRACTION_DIGITS)+20,s=100*Dn((Math.abs(t.y)+this.blur)/e.height,$r.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Dn(this.blur?this.blur/2:0,$r.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Dn(t.x,$r.NUM_FRACTION_DIGITS),'" dy="').concat(Dn(t.y,$r.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Ca.ownDefaults;return this.includeDefaultValues?e:x1(e,(r,o)=>r!==t[o])}static async fromObject(e){return new this(e)}}Xe(Ca,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Xe(Ca,"type","shadow"),er.setClass(Ca,"shadow");const Nd=(n,e,t)=>Math.max(n,Math.min(e,t)),KF=[gs,tn,bs,ti,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Yd,Jd],Qa=[ho,ms,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],$F={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:tn,originY:gs,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:ho,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},VF=(n,e,t,r)=>-t*Math.cos(n/r*Ru)+t+e,GF=()=>!1;class F1{constructor(e){let{startValue:t,byValue:r,duration:o=500,delay:s=0,easing:i=VF,onStart:a=Of,onChange:A=Of,onComplete:d=Of,abort:c=GF,target:u}=e;Xe(this,"_state","pending"),Xe(this,"durationProgress",0),Xe(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=s,this.easing=i,this._onStart=a,this._onChange=A,this._onComplete=d,this._abort=c,this.target=u,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Nf(e),this.delay):Nf(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:o,valueProgress:s}=this.calculate(r);this.value=Object.freeze(o),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Nf(this.tick)))}register(){hp.push(this)}unregister(){hp.remove(this)}abort(){this._state="aborted",this.unregister()}}const WF=["startValue","endValue"];class XF extends F1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Je(Je({},Qn(e,WF)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const YF=["startValue","endValue"];class JF extends F1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Je(Je({},Qn(e,YF)),{},{startValue:t,byValue:r.map((o,s)=>o-t[s])}))}calculate(e){const t=this.startValue.map((r,o)=>this.easing(e,r,this.byValue[o],this.duration,o));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const ZF=["startValue","endValue","easing","onChange","onComplete","abort"],eI=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Ru)),m0=n=>n&&((e,t,r)=>n(new Os(e).toRgba(),t,r));class tI extends F1{constructor(e){let{startValue:t,endValue:r,easing:o=eI,onChange:s,onComplete:i,abort:a}=e,A=Qn(e,ZF);const d=new Os(t).getSource(),c=new Os(r).getSource();super(Je(Je({},A),{},{startValue:d,byValue:c.map((u,h)=>u-d[h]),easing:o,onChange:m0(s),onComplete:m0(i),abort:m0(a)}))}calculate(e){const[t,r,o,s]=this.startValue.map((a,A)=>this.easing(e,a,this.byValue[A],this.duration,A)),i=[...[t,r,o].map(Math.round),Nd(0,s,1)];return{value:i,valueProgress:i.map((a,A)=>this.byValue[A]!==0?Math.abs((a-this.startValue[A])/this.byValue[A]):0).find(a=>a!==0)||0}}}function eB(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new JF(n):new XF(n);return e.start(),e}function rI(n){const e=new tI(n);return e.start(),e}class On{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(o=>!this.includes(o))),this}static isPointContained(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(o||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(o||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=kv(t,r),i=kv(t,e).divide(s);return o?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new _t(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let o=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;o+=+(i.status==="Intersection")}return o%2==1}static intersectLineLine(e,t,r,o){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],i=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,A=t.y-e.y,d=o.x-r.x,c=o.y-r.y,u=e.x-r.x,h=e.y-r.y,f=d*h-c*u,g=a*h-A*u,m=c*a-d*A;if(m!==0){const y=f/m,_=g/m;return(s||0<=y&&y<=1)&&(i||0<=_&&_<=1)?new On("Intersection").append(new _t(e.x+y*a,e.y+y*A)):new On}if(f===0||g===0){const y=s||i||On.isPointContained(e,r,o)||On.isPointContained(t,r,o)||On.isPointContained(r,e,t)||On.isPointContained(o,e,t);return new On(y?"Coincident":void 0)}return new On("Parallel")}static intersectSegmentLine(e,t,r,o){return On.intersectLineLine(e,t,r,o,!1,!0)}static intersectSegmentSegment(e,t,r,o){return On.intersectLineLine(e,t,r,o,!1,!1)}static intersectLinePolygon(e,t,r){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new On,i=r.length;for(let a,A,d,c=0;c<i;c++){if(a=r[c],A=r[(c+1)%i],d=On.intersectLineLine(e,t,a,A,o,!1),d.status==="Coincident")return d;s.append(...d.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return On.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new On,o=e.length,s=[];for(let i=0;i<o;i++){const a=e[i],A=e[(i+1)%o],d=On.intersectSegmentPolygon(a,A,t);d.status==="Coincident"?(s.push(d),r.append(a,A)):r.append(...d.points)}return s.length>0&&s.length===e.length?new On("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const o=t.min(r),s=t.max(r),i=new _t(s.x,o.y),a=new _t(o.x,s.y);return On.intersectPolygonPolygon(e,[o,i,s,a])}}class nI extends L5{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?hs(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=hs(e,yi(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new _t(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,o];if(this.group){const i=this.group.calcTransformMatrix();return s.map(a=>hs(a,i))}return s}intersectsWithRect(e,t){return On.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=On.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:o,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&o>=e.y&&o+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return On.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return za(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(bs,e),this._set(ti,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?cl(k5(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||is.concat()}calcACoords(){const e=Ku({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),o=qu(t,r),s=Fo(o,e),i=this._getTransformedDimensions(),a=i.x/2,A=i.y/2;return{tl:hs({x:-a,y:-A},s),tr:hs({x:a,y:-A},s),bl:hs({x:-a,y:A},s),br:hs({x:a,y:A},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ao(this.originX),Ao(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),o=this.matrixCache;return o&&o.key.every((s,i)=>s===r[i])?o.value:(this.group&&(t=Fo(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=EF(o);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new _t(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Je({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let o=r,s=0;this.strokeUniform&&(o=0,s=r);const i=t.width+o,a=t.height+o;let A;return A=t.skewX===0&&t.skewY===0?new _t(i*t.scaleX,a*t.scaleY):C1(i,a,ng(t)),A.scalarAdd(s)}translateToGivenOrigin(e,t,r,o,s){let i=e.x,a=e.y;const A=Ao(o)-Ao(t),d=Ao(s)-Ao(r);if(A||d){const c=this._getTransformedDimensions();i+=A*c.x,a+=d*c.y}return new _t(i,a)}translateToCenterPoint(e,t,r){if(t===Ur&&r===Ur)return e;const o=this.translateToGivenOrigin(e,t,r,Ur,Ur);return this.angle?o.rotate(eo(this.angle),e):o}translateToOriginPoint(e,t,r){const o=this.translateToGivenOrigin(e,Ur,Ur,t,r);return this.angle?o.rotate(eo(this.angle),e):o}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?hs(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new _t(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const o=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),tn,gs)}}const oI=["type"],sI=["extraParam"];let fa=class Hf extends nI{static getDefaults(){return Hf.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){yA("warn","Setting type has no effect",e)}constructor(e){super(),Xe(this,"_cacheContext",null),Object.assign(this,Hf.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=xi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,o=$r.maxCacheSideLimit,s=$r.minCacheSideLimit;if(t<=o&&r<=o&&t*r<=$r.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[a,A]=nu.limitDimsByArea(i),d=Nd(s,a,o),c=Nd(s,A,o);return t>d&&(e.zoomX/=t/d,e.width=d,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,o=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(o+2),zoomX:e.x,zoomY:e.y,x:r,y:o}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:o,zoomX:s,zoomY:i,x:a,y:A}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=r!==e.width||o!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(d||c){r!==e.width||o!==e.height?(e.width=r,e.height=o):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const u=a/2,h=A/2;return this.cacheTranslationX=Math.round(e.width/2-u)+u,this.cacheTranslationY=Math.round(e.height/2-h)+h,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new _t(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=fp(this.calcTransformMatrix());return new _t(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==bs&&e!==ti||(t=this._constrainScale(t)),e===bs&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Ca||(t=new Ca(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s}=this,{width:i,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s,width:i,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ms&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const o=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=o,this.stroke=s}createClipPathLayer(e,t){const r=Wi(t),o=r.getContext("2d");if(o.translate(t.cacheTranslationX,t.cacheTranslationY),o.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(o)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=yi(this.calcTransformMatrix());o.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(o),e.drawObject(o,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const o=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,o)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ys(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Ys(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,o=this.getCanvasRetinaScaling(),[s,,,i]=(r==null?void 0:r.viewportTransform)||is,a=s*o,A=i*o,d=t.nonScaling?new _t(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*$r.browserShadowBlurConstant*(a+A)*(d.x+d.y)/4,e.shadowOffsetX=t.offsetX*a*d.x,e.shadowOffsetY=t.offsetY*A*d.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ys(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,o=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===ms?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=o.x/this.scaleX/s,a=o.y/this.scaleY/s,A=Wi({width:Math.ceil(i),height:Math.ceil(a)}),d=A.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(i,0),d.lineTo(i,a),d.lineTo(0,a),d.closePath(),d.translate(i/2,a/2),d.scale(o.zoomX/this.scaleX/s,o.zoomY/this.scaleY/s),this._applyPatternGradientTransform(d,t),d.fillStyle=t.toLive(e),d.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/o.zoomX,s*this.scaleY/o.zoomY),e.strokeStyle=(r=d.createPattern(A,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new _t(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(er.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=K5(this),r=this.group,o=this.shadow,s=Math.abs,i=e.enableRetinaScaling?F5():1,a=(e.multiplier||1)*i,A=e.canvasProvider||(C=>new z1(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&PF(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&OF(this,this.getViewportTransform()),this.setCoords();const d=xi(),c=this.getBoundingRect(),u=this.shadow,h=new _t;if(u){const C=u.blur,I=u.nonScaling?new _t(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+C)*s(I.x),h.y=2*Math.round(s(u.offsetY)+C)*s(I.y)}const f=c.width+h.x,g=c.height+h.y;d.width=Math.ceil(f),d.height=Math.ceil(g);const m=A(d);e.format==="jpeg"&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new _t(m.width/2,m.height/2),Ur,Ur);const y=this.canvas;m._objects=[this],this.set("canvas",m),this.setCoords();const _=m.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=o,r&&(this.group=r),this.set(t),this.setCoords(),m._objects=[],m.destroy(),_}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return P5(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:o}=this;if(t){const{x:s,y:i}=this.getRelativeCenterPoint();this.originX=Ur,this.originY=Ur,this.left=s,this.top=i}if(this.set("angle",e),t){const{x:s,y:i}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,o);this.left=s,this.top=i,this.originX=r,this.originY=o}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){hp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Gi().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,o)=>{let[s,i]=o;return r[s]=this._animate(s,i,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.split("."),s=this.constructor.colorProperties.includes(o[o.length-1]),{abort:i,startValue:a,onChange:A,onComplete:d}=r,c=Je(Je({},r),{},{target:this,startValue:a??o.reduce((u,h)=>u[h],this),endValue:t,abort:i==null?void 0:i.bind(this),onChange:(u,h,f)=>{o.reduce((g,m,y)=>(y===o.length-1&&(g[m]=u),g[m]),this),A&&A(u,h,f)},onComplete:(u,h,f)=>{this.setCoords(),d&&d(u,h,f)}});return s?rI(c):eB(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let o,s=0;s<t.length;s++){if(o=t[s],o===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(o===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const o=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(o),a=r._objects.indexOf(s);return i>-1&&i>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Hf.customProperties,this.constructor.customProperties||[]);let t;const r=$r.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:i,shadow:a,strokeDashArray:A,left:d,top:c,originX:u,originY:h,width:f,height:g,strokeWidth:m,strokeLineCap:y,strokeDashOffset:_,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:N,scaleX:k,scaleY:W,angle:V,flipX:H,flipY:J,opacity:xe,visible:M,backgroundColor:O,fillRule:X,paintFirst:te,globalCompositeOperation:le,skewX:ne,skewY:Be}=this;o&&!o.excludeFromExport&&(t=o.toObject(e.concat("inverted","absolutePositioned")));const Z=ce=>Dn(ce,r),se=Je(Je({},Zd(this,e)),{},{type:this.constructor.type,version:Uv,originX:u,originY:h,left:Z(d),top:Z(c),width:Z(f),height:Z(g),fill:Sw(s)?s.toObject():s,stroke:Sw(i)?i.toObject():i,strokeWidth:Z(m),strokeDashArray:A&&A.concat(),strokeLineCap:y,strokeDashOffset:_,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:Z(N),scaleX:Z(k),scaleY:Z(W),angle:Z(V),flipX:H,flipY:J,opacity:Z(xe),shadow:a&&a.toObject(),visible:M,backgroundColor:O,fillRule:X,paintFirst:te,globalCompositeOperation:le,skewX:Z(ne),skewY:Z(Be)},t?{clipPath:t}:null);return this.includeDefaultValues?se:this._removeDefaultValues(se)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return x1(e,(o,s)=>{if(s===tn||s===gs||s==="type")return!0;const i=r[s];return o!==i&&!(Array.isArray(o)&&Array.isArray(i)&&o.length===0&&i.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Qn(e,oI),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:o}=r,s=Qn(r,sI);return og(t,s).then(i=>o?(delete i[o],new this(t[o],i)):new this(i))}static fromObject(e,t){return this._fromObject(e,t)}};Xe(fa,"stateProperties",KF),Xe(fa,"cacheProperties",Qa),Xe(fa,"ownDefaults",$F),Xe(fa,"type","FabricObject"),Xe(fa,"colorProperties",[ho,ms,"backgroundColor"]),Xe(fa,"customProperties",[]),er.setClass(fa),er.setClass(fa,"object");const ec=(n,e,t)=>(r,o,s,i)=>{const a=e(r,o,s,i);return a&&$5(n,Je(Je({},G5(r,o,s,i)),t)),a};function tc(n){return(e,t,r,o)=>{const{target:s,originX:i,originY:a}=t,A=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(A,i,a),c=n(e,t,r,o);return s.setPositionByOrigin(d,t.originX,t.originY),c}}const kw=ec(xu,tc((n,e,t,r)=>{const o=S1(e,e.originX,e.originY,t,r);if(Ao(e.originX)===Ao(Ur)||Ao(e.originX)===Ao(Xn)&&o.x<0||Ao(e.originX)===Ao(tn)&&o.x>0){const{target:s}=e,i=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=V5(e)?2:1,A=s.width,d=Math.abs(o.x*a/s.scaleX)-i;return s.set("width",Math.max(d,1)),A!==s.width}return!1}));function iI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ms:ho,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor);let c,u=e,h=t;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",s>i?(c=s,n.scale(1,i/s),h=t*s/i):i>s?(c=i,n.scale(s/i,1),u=e*i/s):c=s,n.beginPath(),n.arc(u,h,c/2,0,dp,!1),n[A](),d&&n.stroke(),n.restore()}function aI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ms:ho,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor),c=s/2,u=i/2;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",n.translate(e,t);const h=o.getTotalAngle();n.rotate(eo(h)),n["".concat(A,"Rect")](-c,-u,s,i),d&&n.strokeRect(-c,-u,s,i),n.restore()}class fi{constructor(e){Xe(this,"visible",!0),Xe(this,"actionName",rg),Xe(this,"angle",0),Xe(this,"x",0),Xe(this,"y",0),Xe(this,"offsetX",0),Xe(this,"offsetY",0),Xe(this,"sizeX",0),Xe(this,"sizeY",0),Xe(this,"touchSizeX",0),Xe(this,"touchSizeY",0),Xe(this,"cursorStyle","crosshair"),Xe(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,o){var s;let{tl:i,tr:a,br:A,bl:d}=o;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&On.isPointInPolygon(r,[i,a,A,d])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,o;return(r=(o=e._controlsVisibility)===null||o===void 0?void 0:o[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,o){return new _t(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,o,s,i){const a=_1([qu(r,o),Ku({angle:e}),B1((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new _t(-.5,-.5).transform(a),tr:new _t(.5,-.5).transform(a),br:new _t(.5,.5).transform(a),bl:new _t(-.5,.5).transform(a)}}render(e,t,r,o,s){((o=o||{}).cornerStyle||s.cornerStyle)==="circle"?iI.call(this,e,t,r,o,s):aI.call(this,e,t,r,o,s)}}const AI=(n,e,t)=>t.lockRotation?vp:e.cursorStyle,lI=ec(U5,tc((n,e,t,r)=>{let{target:o,ex:s,ey:i,theta:a,originX:A,originY:d}=e;const c=o.translateToOriginPoint(o.getRelativeCenterPoint(),A,d);if(_i(o,"lockRotation"))return!1;const u=Math.atan2(i-c.y,s-c.x),h=Math.atan2(r-c.y,t-c.x);let f=cl(h-u+a);if(o.snapAngle&&o.snapAngle>0){const m=o.snapAngle,y=o.snapThreshold||m,_=Math.ceil(f/m)*m,C=Math.floor(f/m)*m;Math.abs(f-C)<y?f=C:Math.abs(f-_)<y&&(f=_)}f<0&&(f=360+f),f%=360;const g=o.angle!==f;return o.angle=f,g}));function tB(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function rB(n,e,t){const r=_i(n,"lockScalingX"),o=_i(n,"lockScalingY");if(r&&o||!e&&(r||o)&&t||r&&e==="x"||o&&e==="y")return!0;const{width:s,height:i,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||i===0&&a===0&&e!=="x"}const dI=["e","se","s","sw","w","nw","n","ne","e"],$c=(n,e,t)=>{const r=tB(n,t);if(rB(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return vp;const o=W5(t,e);return"".concat(dI[o],"-resize")};function I1(n,e,t,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,i=o.by,a=tB(n,s);let A,d,c,u,h,f;if(rB(s,i,a))return!1;if(e.gestureScale)d=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(A=S1(e,e.originX,e.originY,t,r),h=i!=="y"?Math.sign(A.x||e.signX||1):1,f=i!=="x"?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=h),e.signY||(e.signY=f),_i(s,"lockScalingFlip")&&(e.signX!==h||e.signY!==f))return!1;if(u=s._getTransformedDimensions(),a&&!i){const y=Math.abs(A.x)+Math.abs(A.y),{original:_}=e,C=y/(Math.abs(u.x*_.scaleX/s.scaleX)+Math.abs(u.y*_.scaleY/s.scaleY));d=_.scaleX*C,c=_.scaleY*C}else d=Math.abs(A.x*s.scaleX/u.x),c=Math.abs(A.y*s.scaleY/u.y);V5(e)&&(d*=2,c*=2),e.signX!==h&&i!=="y"&&(e.originX=Iw(e.originX),d*=-1,e.signX=h),e.signY!==f&&i!=="x"&&(e.originY=Iw(e.originY),c*=-1,e.signY=f)}const g=s.scaleX,m=s.scaleY;return i?(i==="x"&&s.set(bs,d),i==="y"&&s.set(ti,c)):(!_i(s,"lockScalingX")&&s.set(bs,d),!_i(s,"lockScalingY")&&s.set(ti,c)),g!==s.scaleX||m!==s.scaleY}const Ph=ec(tg,tc((n,e,t,r)=>I1(n,e,t,r))),cI=ec(tg,tc((n,e,t,r)=>I1(n,e,t,r,{by:"x"}))),uI=ec(tg,tc((n,e,t,r)=>I1(n,e,t,r,{by:"y"}))),hI=["target","ex","ey","skewingSide"],w0={x:{counterAxis:"y",scale:bs,skew:Yd,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:ti,skew:Jd,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},fI=["ns","nesw","ew","nwse"],pI=(n,e,t)=>{if(e.x!==0&&_i(t,"lockSkewingY")||e.y!==0&&_i(t,"lockSkewingX"))return vp;const r=W5(t,e)%4;return"".concat(fI[r],"-resize")};function nB(n,e,t,r,o){const{target:s}=t,{counterAxis:i,origin:a,lockSkewing:A,skew:d,flip:c}=w0[n];if(_i(s,A))return!1;const{origin:u,flip:h}=w0[i],f=Ao(t[u])*(s[h]?-1:1),g=-Math.sign(f)*(s[c]?-1:1),m=.5*-((s[d]===0&&S1(t,Ur,Ur,r,o)[n]>0||s[d]>0?1:-1)*g)+.5;return ec(Q5,tc((_,C,I,N)=>function(k,W,V){let{target:H,ex:J,ey:xe,skewingSide:M}=W,O=Qn(W,hI);const{skew:X}=w0[k],te=V.subtract(new _t(J,xe)).divide(new _t(H.scaleX,H.scaleY))[k],le=H[X],ne=O[X],Be=Math.tan(eo(ne)),Z=k==="y"?H._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:H._getTransformedDimensions({scaleX:1,scaleY:1}).y,se=2*te*M/Math.max(Z,1)+Be,ce=cl(Math.atan(se));H.set(X,ce);const be=le!==H[X];if(be&&k==="y"){const{skewX:x,scaleX:F}=H,E=H._getTransformedDimensions({skewY:le}),U=H._getTransformedDimensions(),P=x!==0?E.x/U.x:1;P!==1&&H.set(bs,P*F)}return be}(n,C,new _t(I,N))))(e,Je(Je({},t),{},{[a]:m,skewingSide:g}),r,o)}const gI=(n,e,t,r)=>nB("x",n,e,t,r),vI=(n,e,t,r)=>nB("y",n,e,t,r);function ag(n,e){return n[e.canvas.altActionKey]}const kh=(n,e,t)=>{const r=ag(n,t);return e.x===0?r?Yd:ti:e.y===0?r?Jd:bs:""},pd=(n,e,t)=>ag(n,t)?pI(0,e,t):$c(n,e,t),Ow=(n,e,t,r)=>ag(n,e.target)?vI(n,e,t,r):cI(n,e,t,r),Dw=(n,e,t,r)=>ag(n,e.target)?gI(n,e,t,r):uI(n,e,t,r),oB=()=>({ml:new fi({x:-.5,y:0,cursorStyleHandler:pd,actionHandler:Ow,getActionName:kh}),mr:new fi({x:.5,y:0,cursorStyleHandler:pd,actionHandler:Ow,getActionName:kh}),mb:new fi({x:0,y:.5,cursorStyleHandler:pd,actionHandler:Dw,getActionName:kh}),mt:new fi({x:0,y:-.5,cursorStyleHandler:pd,actionHandler:Dw,getActionName:kh}),tl:new fi({x:-.5,y:-.5,cursorStyleHandler:$c,actionHandler:Ph}),tr:new fi({x:.5,y:-.5,cursorStyleHandler:$c,actionHandler:Ph}),bl:new fi({x:-.5,y:.5,cursorStyleHandler:$c,actionHandler:Ph}),br:new fi({x:.5,y:.5,cursorStyleHandler:$c,actionHandler:Ph}),mtr:new fi({x:0,y:-.5,actionHandler:lI,cursorStyleHandler:AI,offsetY:-40,withConnection:!0,actionName:y1})}),mI=()=>({mr:new fi({x:.5,y:0,actionHandler:kw,cursorStyleHandler:pd,actionName:xu}),ml:new fi({x:-.5,y:0,actionHandler:kw,cursorStyleHandler:pd,actionName:xu})}),wI=()=>Je(Je({},oB()),mI());class Su extends fa{static getDefaults(){return Je(Je({},super.getDefaults()),Su.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Su.ownDefaults),this.setOptions(e)}static createControls(){return{controls:oB()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,o=t.action;if(this===r&&o&&o.startsWith(rg))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let o=r.length-1;o>=0;o--){const[s,i]=r[o],a=this.controls[s];if(a.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=qu(t.x,t.y),o=Ku({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Fo(r,o),i=Fo(e,s),a=Fo(i,[1/e[0],0,0,1/e[3],0,0]),A=this.group?fp(this.calcTransformMatrix()):void 0;A&&(A.scaleX=Math.abs(A.scaleX),A.scaleY=Math.abs(A.scaleY));const d=this._calculateCurrentDimensions(A),c={};return this.forEachControl((u,h)=>{const f=u.positionHandler(d,a,this,u);c[h]=Object.assign(f,this._calcCornerCoords(u,f))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),o=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/o[0],1/o[3]),e.rotate(eo(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=Je({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=o.borderColor,this._setLineDash(e,o.borderDashArray),this.strokeBorders(e,t),o.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:o}=this,s=Je({hasBorders:r,hasControls:o},t),i=this.getViewportTransform(),a=s.hasBorders,A=s.hasControls,d=Fo(i,this.calcTransformMatrix()),c=fp(d);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(eo(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),A&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let o;if(r&&r.forActiveSelection||this.group){const s=C1(this.width,this.height,ng(t)),i=this.isStrokeAccountedForInDimensions()?b1:(this.strokeUniform?new _t().scalarAdd(this.canvas?this.canvas.getZoom():1):new _t(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);o=s.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,o,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((o,s)=>{o.withConnection&&o.getVisibility(this,s)&&(r=!0,e.moveTo(o.x*t.x,o.y*t.y),e.lineTo(o.x*t.x+o.offsetX,o.y*t.y+o.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:s,cornerColor:i}=this,a=Je({cornerStrokeColor:o,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((A,d)=>{if(A.getVisibility(this,d)){const c=this.oCoords[d];A.render(e,c.x,c.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,o]=t;return this.setControlVisible(r,o)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const o=this.width+4,s=this.height+4;return t.clearRect(-o/2,-s/2,o,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function sB(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Xe(Su,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Bo extends Su{}sB(Bo,[X5]),er.setClass(Bo),er.setClass(Bo,"object");const yI=(n,e,t,r)=>{const o=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,o,o);for(let i=3;i<s.length;i+=4)if(s[i]>0)return!1;return!0};class iB{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new _t(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new _t(1/this.options.scaleX,1/this.options.scaleY):new _t(1,1)}createSideVector(e,t){const r=kv(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new _t(e);return t.y+=t.x*Math.tan(eo(this.options.skewY)),t.x+=t.y*Math.tan(eo(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const bI=new _t;class Ed extends iB{static getOrthogonalRotationFactor(e,t){const r=t?Dv(e,t):RF(e);return Math.abs(r)<Ru?-1:1}constructor(e,t,r,o){super(o),Xe(this,"AB",void 0),Xe(this,"AC",void 0),Xe(this,"alpha",void 0),Xe(this,"bisector",void 0),this.A=new _t(e),this.B=new _t(t),this.C=new _t(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Dv(this.AB,this.AC),this.bisector=E1(J5(this.AB.eq(bI)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t),s=Z5(o),i=Ed.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%dp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?Ov(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Ov(o)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(o))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],o=new _t(Ed.getOrthogonalRotationFactor(this.bisector),Ed.getOrthogonalRotationFactor(new _t(this.bisector.y,this.bisector.x)));return[new _t(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new _t(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(s=>{Tw(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:o,skewY:s,scaleX:i,scaleY:a,strokeUniform:A}=this.options,d=new _t(Math.tan(eo(o)),Math.tan(eo(s))),c=this.strokeProjectionMagnitude,u=A?c/a/Math.sqrt(1/a**2+1/i**2*d.y**2):c/Math.sqrt(1+d.y**2),h=new _t(Math.sqrt(Math.max(c**2-u**2,0)),u),f=A?c/Math.sqrt(1+d.x**2*(1/a)**2/(1/i+1/i*d.x*d.y)**2):c/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),g=new _t(f,Math.sqrt(Math.max(c**2-f**2,0)));return[g,g.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(m=>this.applySkew(A?m.multiply(this.strokeUniformScalar):m)).forEach(m=>{Tw(m,e,t)&&r.push(this.applySkew(this.A).add(m))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%dp==0,r=this.applySkew(this.A),o=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=ou(o,i)>0,A=a?o:s,d=a?s:o;return this.isSkewed()?e.push(...this.projectRoundWithSkew(A,d)):e.push(...this.projectRoundNoSkew(A,d)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Nw extends iB{constructor(e,t,r){super(r),this.A=new _t(e),this.T=new _t(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t);return this.scaleUnitVector(Z5(o),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new _t(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Ed(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new _t(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(E1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(r);e.push(o.add(t),o.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const _I=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const o=n.reduce((s,i)=>(s[s.length-1].eq(i)||s.push(new _t(i)),s),[new _t(n[0])]);if(o.length===1)t=!0;else if(!t){const s=o[0],i=((a,A)=>{for(let d=a.length-1;d>=0;d--)if(A(a[d],d,a))return d;return-1})(o,a=>!a.eq(s));o.splice(i+1)}return o.forEach((s,i,a)=>{let A,d;i===0?(d=a[1],A=t?s:a[a.length-1]):i===a.length-1?(A=a[i-1],d=t?s:a[0]):(A=a[i-1],d=a[i+1]),t&&a.length===1?r.push(...new Nw(s,s,e).project()):!t||i!==0&&i!==a.length-1?r.push(...new Ed(s,A,d,e).project()):r.push(...new Nw(s,i===0?d:A,e).project())}),r},U1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Je({},n[t][r])})}),e},BI=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Q1=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=xI(n,r))!==!1&&e.push(t);return e},xI=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(e+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},T1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},zI=(n,e)=>{const t=e.split(`
`),r=[];let o=-1,s={};n=U1(n);for(let i=0;i<t.length;i++){const a=Q1(t[i]);if(n[i])for(let A=0;A<a.length;A++){o++;const d=n[i][A];d&&Object.keys(d).length>0&&(T1(s,d,!0)?r.push({start:o,end:o+1,style:d}):r[r.length-1].end++),s=d||{}}else o+=a.length,s={}}return r},CI=(n,e)=>{if(!Array.isArray(n))return U1(n);const t=e.split(w1),r={};let o=-1,s=0;for(let i=0;i<t.length;i++){const a=Q1(t[i]);for(let A=0;A<a.length;A++)o++,n[s]&&n[s].start<=o&&o<n[s].end&&(r[i]=r[i]||{},r[i][A]=Je({},n[s].style),o===n[s].end-1&&s++)}return r},CA=["display","transform",ho,"fill-opacity","fill-rule","opacity",ms,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Mw(n,e){const t=n.nodeName,r=n.getAttribute("class"),o=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+t,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+s,"i"),e=e.replace(i,"")),r&&e.length){const a=r.split(" ");for(let A=a.length;A--;)i=new RegExp("\\."+a[A]+s,"i"),e=e.replace(i,"")}return e.length===0}function SI(n,e){let t=!0;const r=Mw(n,e.pop());return r&&e.length&&(t=function(o,s){let i,a=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&s.length;)a&&(i=s.pop()),a=Mw(o=o.parentElement,i);return s.length===0}(n,e)),r&&t&&e.length===0}const EI=n=>{var e;return(e=HF[n])!==null&&e!==void 0?e:n},FI=new RegExp("(".concat(ul,")"),"gi"),II=n=>n.replace(FI," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Hw,jw,Rw,qw,Kw,$w,Vw;const os="(".concat(ul,")"),UI=String.raw(Hw||(Hw=zA(["(skewX)(",")"],["(skewX)\\(","\\)"])),os),QI=String.raw(jw||(jw=zA(["(skewY)(",")"],["(skewY)\\(","\\)"])),os),TI=String.raw(Rw||(Rw=zA(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),os,os,os),LI=String.raw(qw||(qw=zA(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),os,os),PI=String.raw(Kw||(Kw=zA(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),os,os),kI=String.raw($w||($w=zA(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),os,os,os,os,os,os),L1="(?:".concat(kI,"|").concat(PI,"|").concat(TI,"|").concat(LI,"|").concat(UI,"|").concat(QI,")"),OI="(?:".concat(L1,"*)"),DI=String.raw(Vw||(Vw=zA(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),OI),NI=new RegExp(DI),MI=new RegExp(L1),HI=new RegExp(L1,"g");function Nv(n){const e=[];if(!(n=II(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!NI.test(n))return[...is];for(const t of n.matchAll(HI)){const r=MI.exec(t[0]);if(!r)continue;let o=is;const s=r.filter(g=>!!g),[,i,...a]=s,[A,d,c,u,h,f]=a.map(g=>parseFloat(g));switch(i){case"translate":o=qu(A,d);break;case y1:o=Ku({angle:A},{x:d,y:c});break;case rg:o=B1(A,d);break;case Yd:o=D5(A);break;case Jd:o=N5(A);break;case"matrix":o=[A,d,c,u,h,f]}e.push(o)}return _1(e)}function jI(n,e,t,r){const o=Array.isArray(e);let s,i=e;if(n!==ho&&n!==ms||e!==vs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")i=e===vs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")i=t&&t.transformMatrix?Fo(t.transformMatrix,Nv(e)):Nv(e);else if(n==="visible")i=e!==vs&&e!=="hidden",t&&t.visible===!1&&(i=!1);else if(n==="opacity")i=parseFloat(e),t&&t.opacity!==void 0&&(i*=t.opacity);else if(n==="textAnchor")i=e==="start"?tn:e==="end"?Xn:Ur;else if(n==="charSpacing")s=Cd(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(ho),A=e.indexOf(ms);i=ho,(a>-1&&A>-1&&A<a||a===-1&&A>-1)&&(i=ms)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=o?e.map(Cd):Cd(e,r)}}else i="";return!o&&isNaN(s)?i:s}function RI(n,e){const t=n.match(MF);if(!t)return;const r=t[1],o=t[3],s=t[4],i=t[5],a=t[6];r&&(e.fontStyle=r),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=Cd(s)),a&&(e.fontFamily=a),i&&(e.lineHeight=i==="normal"?1:i)}function qI(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,o]=t.split(":");e[r.trim().toLowerCase()]=o.trim()})}function KI(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?qI(t,e):function(r,o){Object.entries(r).forEach(s=>{let[i,a]=s;a!==void 0&&(o[i.toLowerCase()]=a)})}(t,e)),e}const $I={stroke:"strokeOpacity",fill:"fillOpacity"};function Ta(n,e,t){if(!n)return{};let r,o={},s=m1;n.parentNode&&Qw.test(n.parentNode.nodeName)&&(o=Ta(n.parentElement,e,t),o.fontSize&&(r=s=Cd(o.fontSize)));const i=Je(Je(Je({},e.reduce((d,c)=>{const u=n.getAttribute(c);return u&&(d[c]=u),d},{})),function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const h in c)SI(d,h.split(" "))&&(u=Je(Je({},u),c[h]));return u}(n,t)),KI(n));i[v0]&&n.setAttribute(v0,i[v0]),i[g0]&&(r=Cd(i[g0],s),i[g0]="".concat(r));const a={};for(const d in i){const c=EI(d),u=jI(c,i[d],o,r);a[c]=u}a&&a.font&&RI(a.font,a);const A=Je(Je({},o),a);return Qw.test(n.nodeName)?A:function(d){const c=Bo.getDefaults();return Object.entries($I).forEach(u=>{let[h,f]=u;if(d[f]===void 0||d[h]==="")return;if(d[h]===void 0){if(!c[h])return;d[h]=c[h]}if(d[h].indexOf("url(")===0)return;const g=new Os(d[h]);d[h]=g.setAlpha(Dn(g.getAlpha()*d[f],2)).toRgba()}),d}(A)}const VI=["left","top","width","height","visible"],aB=["rx","ry"];class mi extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),mi.ownDefaults)}constructor(e){super(),Object.assign(this,mi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,o=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,A=i!==0||a!==0;e.beginPath(),e.moveTo(o+i,s),e.lineTo(o+t-i,s),A&&e.bezierCurveTo(o+t-Xa*i,s,o+t,s+Xa*a,o+t,s+a),e.lineTo(o+t,s+r-a),A&&e.bezierCurveTo(o+t,s+r-Xa*a,o+t-Xa*i,s+r,o+t-i,s+r),e.lineTo(o+i,s+r),A&&e.bezierCurveTo(o+Xa*i,s+r,o,s+r-Xa*a,o,s+r-a),e.lineTo(o,s+a),A&&e.bezierCurveTo(o,s+Xa*a,o+Xa*i,s,o+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...aB,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:o}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(o,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const o=Ta(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:a=0,height:A=0,visible:d=!0}=o,c=Qn(o,VI);return new this(Je(Je(Je({},t),c),{},{left:s,top:i,width:a,height:A,visible:!!(d&&a&&A)}))}}Xe(mi,"type","Rect"),Xe(mi,"cacheProperties",[...Qa,...aB]),Xe(mi,"ownDefaults",{rx:0,ry:0}),Xe(mi,"ATTRIBUTE_NAMES",[...CA,"x","y","rx","ry","width","height"]),er.setClass(mi),er.setSVGClass(mi);const ya="initialization",mp="added",P1="removed",wp="imperative",AB=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:o,height:s,group:i}=e,a=i&&i!==n?sg(i.calcTransformMatrix(),n.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),d=!e.isStrokeAccountedForInDimensions(),c=t&&d?kF(new _t(r,r),void 0,n.calcTransformMatrix()):b1,u=!t&&d?r:0,h=C1(o+u,s+u,_1([a,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[A.subtract(h),A.add(h)]};class Ag{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:o}=e;return t===ya||t===wp||!!r&&o!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==ya&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:o}=t;if(r===wp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:i,width:a,height:A}=za(e.map(u=>AB(o,u)).reduce((u,h)=>u.concat(h),[])),d=new _t(a,A),c=new _t(s,i).add(d.scalarDivide(2));if(r===ya){const u=this.getInitialSize(t,{size:d,center:c});return{center:c,relativeCorrection:new _t(0,0),size:u}}return{center:c.transform(o.calcOwnMatrix()),size:d}}}Xe(Ag,"type","strategy");class Mv extends Ag{shouldPerformLayout(e){return!0}}Xe(Mv,"type","fit-content"),er.setClass(Mv);const GI=["strategy"],WI=["target","strategy","bubbles","prevStrategy"],lB="layoutManager";class Eu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Mv;Xe(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Je(Je({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[up,I5,xu,U5,tg,Q5,cp,bF,_F].map(o=>e.on(o,s=>this.performLayout(o===up?{type:"object_modified",trigger:o,e:s,target:r}:{type:"object_modifying",trigger:o,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:o}=t;if(r===ya||r===mp?this.subscribeTargets(e):r===P1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),o&&o.fire("object:layout:before",{target:t,context:e}),r===wp&&e.deep){const s=Qn(e,GI);t.forEachObject(i=>i.layoutManager&&i.layoutManager.performLayout(Je(Je({},s),{},{bubbles:!1,target:i})))}}getLayoutResult(e){const{target:t,strategy:r,type:o}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=o===ya?new _t:t.getRelativeCenterPoint(),{center:a,correction:A=new _t,relativeCorrection:d=new _t}=s,c=i.subtract(a).add(A).transform(o===ya?is:yi(t.calcOwnMatrix()),!0).add(d);return{result:s,prevCenter:i,nextCenter:a,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:o},nextCenter:s}=t;var i,a;r.set({width:o.x,height:o.y}),this.layoutObjects(e,t),e.type===ya?r.set({left:(i=e.x)!==null&&i!==void 0?i:s.x+o.x*Ao(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+o.y*Ao(r.originY)}):(r.setPositionByOrigin(s,Ur,Ur),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(o=>{o.group===r&&this.layoutObject(e,t,o)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:o}=t;r.set({left:r.left+o.x,top:r.top+o.y})}onAfterLayout(e,t){const{target:r,strategy:o,bubbles:s,prevStrategy:i}=e,a=Qn(e,WI),{canvas:A}=r;r.fire("layout:after",{context:e,result:t}),A&&A.fire("object:layout:after",{context:e,result:t,target:r});const d=r.parent;s&&d!=null&&d.layoutManager&&((a.path||(a.path=[])).push(r),d.layoutManager.performLayout(Je(Je({},a),{},{target:d}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:lB,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}er.setClass(Eu,lB);const XI=["type","objects","layoutManager"];class YI extends Eu{performLayout(){}}class sl extends T5(Bo){static getDefaults(){return Je(Je({},super.getDefaults()),sl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xe(this,"_activeObjects",[]),Xe(this,"__objectSelectionTracker",void 0),Xe(this,"__objectSelectionDisposer",void 0),Object.assign(this,sl.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Eu,this.layoutManager.performLayout({type:ya,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(yA("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(yA("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,o)=>this.canEnterGroup(t)&&o.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...o);return this._onAfterObjectsChange(mp,o),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(mp,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(P1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(o=>{o._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const o=this._activeObjects;if(e)o.push(r),this._set("dirty",!0);else if(o.length>0){const s=o.indexOf(r);s>-1&&(o.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&gp(e,Fo(yi(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(gp(e,Fo(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Bo.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var o;const i=this._objects[s];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&i.group!==this?(e.save(),e.transform(...yi(this.calcTransformMatrix())),i.render(e),e.restore()):i.group===this&&i.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Je({target:this,type:wp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const s=o.includeDefaultValues;o.includeDefaultValues=r;const i=o[e||"toObject"](t);return o.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Je(Je(Je({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=mi.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const o=t.join("");return e?e(o):o}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let o=0;o<this._objects.length;o++)t.push("		",this._objects[o].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let o=0;o<this._objects.length;o++)t.push("	",this._objects[o].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:o=[],layoutManager:s}=e,i=Qn(e,XI);return Promise.all([zu(o,t),og(i,t)]).then(a=>{let[A,d]=a;const c=new this(A,Je(Je(Je({},i),d),{},{layoutManager:new YI}));if(s){const u=er.getClass(s.type),h=er.getClass(s.strategy);c.layoutManager=new u(new h)}else c.layoutManager=new Eu;return c.layoutManager.subscribeTargets({type:ya,target:c,targets:c.getObjects()}),c.setCoords(),c})}}Xe(sl,"type","Group"),Xe(sl,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),er.setClass(sl);const JI=(n,e)=>Math.min(e.width/n.width,e.height/n.height),ZI=(n,e)=>Math.max(e.width/n.width,e.height/n.height),Hv="\\s*,?\\s*",Pc="".concat(Hv,"(").concat(ul,")"),eU="".concat(Pc).concat(Pc).concat(Pc).concat(Hv,"([01])").concat(Hv,"([01])").concat(Pc).concat(Pc),tU={m:"l",M:"L"},rU=(n,e,t,r,o,s,i,a,A,d,c)=>{const u=Ea(n),h=Fa(n),f=Ea(e),g=Fa(e),m=t*o*f-r*s*g+i,y=r*o*f+t*s*g+a;return["C",d+A*(-t*o*h-r*s*u),c+A*(-r*o*h+t*s*u),m+A*(t*o*g+r*s*f),y+A*(r*o*g-t*s*f),m,y]},Gw=(n,e,t,r)=>{const o=Math.atan2(e,n),s=Math.atan2(r,t);return s>=o?s-o:2*Math.PI-(o-s)};function Ww(n,e,t,r,o,s,i,a){let A;if($r.cachesBoundsOfCurve&&(A=[...arguments].join(),nu.boundsOfCurveCache[A]))return nu.boundsOfCurveCache[A];const d=Math.sqrt,c=Math.abs,u=[],h=[[0,0],[0,0]];let f=6*n-12*t+6*o,g=-3*n+9*t-9*o+3*i,m=3*t-3*n;for(let N=0;N<2;++N){if(N>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,m=3*r-3*e),c(g)<1e-12){if(c(f)<1e-12)continue;const J=-m/f;0<J&&J<1&&u.push(J);continue}const k=f*f-4*m*g;if(k<0)continue;const W=d(k),V=(-f+W)/(2*g);0<V&&V<1&&u.push(V);const H=(-f-W)/(2*g);0<H&&H<1&&u.push(H)}let y=u.length;const _=y,C=dB(n,e,t,r,o,s,i,a);for(;y--;){const{x:N,y:k}=C(u[y]);h[0][y]=N,h[1][y]=k}h[0][_]=n,h[1][_]=e,h[0][_+1]=i,h[1][_+1]=a;const I=[new _t(Math.min(...h[0]),Math.min(...h[1])),new _t(Math.max(...h[0]),Math.max(...h[1]))];return $r.cachesBoundsOfCurve&&(nu.boundsOfCurveCache[A]=I),I}const nU=(n,e,t)=>{let[r,o,s,i,a,A,d,c]=t;const u=((h,f,g,m,y,_,C)=>{if(g===0||m===0)return[];let I=0,N=0,k=0;const W=Math.PI,V=C*v1,H=Fa(V),J=Ea(V),xe=.5*(-J*h-H*f),M=.5*(-J*f+H*h),O=g**2,X=m**2,te=M**2,le=xe**2,ne=O*X-O*te-X*le;let Be=Math.abs(g),Z=Math.abs(m);if(ne<0){const j=Math.sqrt(1-ne/(O*X));Be*=j,Z*=j}else k=(y===_?-1:1)*Math.sqrt(ne/(O*te+X*le));const se=k*Be*M/Z,ce=-k*Z*xe/Be,be=J*se-H*ce+.5*h,x=H*se+J*ce+.5*f;let F=Gw(1,0,(xe-se)/Be,(M-ce)/Z),E=Gw((xe-se)/Be,(M-ce)/Z,(-xe-se)/Be,(-M-ce)/Z);_===0&&E>0?E-=2*W:_===1&&E<0&&(E+=2*W);const U=Math.ceil(Math.abs(E/W*2)),P=[],T=E/U,R=8/3*Math.sin(T/4)*Math.sin(T/4)/Math.sin(T/2);let q=F+T;for(let j=0;j<U;j++)P[j]=rU(F,q,J,H,Be,Z,be,x,R,I,N),I=P[j][5],N=P[j][6],F=q,q+=T;return P})(d-n,c-e,o,s,a,A,i);for(let h=0,f=u.length;h<f;h++)u[h][1]+=n,u[h][2]+=e,u[h][3]+=n,u[h][4]+=e,u[h][5]+=n,u[h][6]+=e;return u},oU=n=>{let e=0,t=0,r=0,o=0;const s=[];let i,a=0,A=0;for(const d of n){const c=[...d];let u;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],u=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],u=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],u=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],o=c[2],u=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":a=c[3],A=c[4],e=c[5],t=c[6],u=["C",c[1],c[2],a,A,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":i==="C"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[3],t=c[4],u=["C",a,A,c[1],c[2],e,t],a=u[3],A=u[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":a=c[1],A=c[2],e=c[3],t=c[4],u=["Q",a,A,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":i==="Q"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[1],t=c[2],u=["Q",a,A,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":nU(e,t,c).forEach(h=>s.push(h)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=o,u=["Z"]}u?(s.push(u),i=u[0]):i=""}return s},yp=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),dB=(n,e,t,r,o,s,i,a)=>A=>{const d=A**3,c=(f=>3*f**2*(1-f))(A),u=(f=>3*f*(1-f)**2)(A),h=(f=>(1-f)**3)(A);return new _t(i*d+o*c+t*u+n*h,a*d+s*c+r*u+e*h)},cB=n=>n**2,uB=n=>2*n*(1-n),hB=n=>(1-n)**2,sU=(n,e,t,r,o,s,i,a)=>A=>{const d=cB(A),c=uB(A),u=hB(A),h=3*(u*(t-n)+c*(o-t)+d*(i-o)),f=3*(u*(r-e)+c*(s-r)+d*(a-s));return Math.atan2(f,h)},iU=(n,e,t,r,o,s)=>i=>{const a=cB(i),A=uB(i),d=hB(i);return new _t(o*a+t*A+n*d,s*a+r*A+e*d)},aU=(n,e,t,r,o,s)=>i=>{const a=1-i,A=2*(a*(t-n)+i*(o-t)),d=2*(a*(r-e)+i*(s-r));return Math.atan2(d,A)},Xw=(n,e,t)=>{let r=new _t(e,t),o=0;for(let s=1;s<=100;s+=1){const i=n(s/100);o+=yp(r.x,r.y,i.x,i.y),r=i}return o},AU=(n,e)=>{let t,r=0,o=0,s={x:n.x,y:n.y},i=Je({},s),a=.01,A=0;const d=n.iterator,c=n.angleFinder;for(;o<e&&a>1e-4;)i=d(r),A=r,t=yp(s.x,s.y,i.x,i.y),t+o>e?(r-=a,a/=2):(s=i,r+=a,o+=t);return Je(Je({},i),{},{angle:c(A)})},fB=n=>{let e,t,r=0,o=0,s=0,i=0,a=0;const A=[];for(const d of n){const c={x:o,y:s,command:d[0],length:0};switch(d[0]){case"M":t=c,t.x=i=o=d[1],t.y=a=s=d[2];break;case"L":t=c,t.length=yp(o,s,d[1],d[2]),o=d[1],s=d[2];break;case"C":e=dB(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t=c,t.iterator=e,t.angleFinder=sU(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t.length=Xw(e,o,s),o=d[5],s=d[6];break;case"Q":e=iU(o,s,d[1],d[2],d[3],d[4]),t=c,t.iterator=e,t.angleFinder=aU(o,s,d[1],d[2],d[3],d[4]),t.length=Xw(e,o,s),o=d[3],s=d[4];break;case"Z":t=c,t.destX=i,t.destY=a,t.length=yp(o,s,i,a),o=i,s=a}r+=t.length,A.push(t)}return A.push({length:r,x:o,y:s}),A},lU=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fB(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const o=t[r],s=e/o.length,i=n[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return Je(Je({},new _t(o.x,o.y).lerp(new _t(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return Je(Je({},new _t(o.x,o.y).lerp(new _t(i[1],i[2]),s)),{},{angle:Math.atan2(i[2]-o.y,i[1]-o.x)});case"C":case"Q":return AU(o,e)}},dU=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Yw=new RegExp(eU,"g"),cU=new RegExp(ul,"gi"),uU={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},hU=n=>{var e;const t=[],r=(e=n.match(dU))!==null&&e!==void 0?e:[];for(const o of r){const s=o[0];if(s==="z"||s==="Z"){t.push([s]);continue}const i=uU[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Yw.lastIndex=0;for(let A=null;A=Yw.exec(o);)a.push(...A.slice(1))}else a=o.match(cU)||[];for(let A=0;A<a.length;A+=i){const d=new Array(i),c=tU[s];d[0]=A>0&&c?c:s;for(let u=0;u<i;u++)d[u+1]=parseFloat(a[A+u]);t.push(d)}}return t},fU=(n,e)=>n.map(t=>t.map((r,o)=>o===0||e===void 0?r:Dn(r,e)).join(" ")).join(" ");function jv(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[o,s]=r;return t.setProperty(o,s)}))}class pU extends R5{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Xe(this,"upper",void 0),Xe(this,"container",void 0);const{el:o}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),o.parentNode&&o.parentNode.replaceChild(i,o),i.append(o,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=xi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Xd().createElement("div");return e.setAttribute("data-fabric","wrapper"),jv(e,{position:"relative"}),Fw(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:o}=t;jv(e,Je(Je({},r),{},{"touch-action":o?"manipulation":vs})),Fw(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:o}=this.upper;j5(r,o,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Tv(this.upper.el,e),Tv(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:o}=this.upper;super.cleanupDOM(e),t.removeChild(o),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Gi().dispose(this.upper.el),delete this.upper,delete this.container}}class lg extends z1{constructor(){super(...arguments),Xe(this,"targets",[]),Xe(this,"_hoveredTargets",[]),Xe(this,"_objectsToRender",void 0),Xe(this,"_currentTransform",null),Xe(this,"_groupSelector",null),Xe(this,"contextTopDirty",!1)}static getDefaults(){return Je(Je({},super.getDefaults()),lg.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new pU(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const o=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+o,-r+o),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const a=Math.round(o*this.getRetinaScaling());return yI(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),o=this._activeObject;return!!(!t||t&&o&&r.length>1&&r.indexOf(t)===-1&&o!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&o&&o!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let o;return t===rg||t===bs||t===ti||t===xu?o=this.centeredScaling||e.centeredScaling:t===y1&&(o=this.centeredRotation||e.centeredRotation),o?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Xn:["mr","tr","br"].includes(t)&&(r.x=tn),["tl","mt","tr"].includes(t)?r.y=Qv:["bl","mb","br"].includes(t)&&(r.y=gs)),r}_setupCurrentTransform(e,t,r){var o;const s=t.group?Sd(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:a}=t.getActiveControl()||{},A=r&&a?(o=a.getActionHandler(e,t,a))===null||o===void 0?void 0:o.bind(a):NF,d=((f,g,m,y)=>{if(!g||!f)return"drag";const _=y.controls[g];return _.getActionName(m,_,y)})(r,i,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,d,c)?{x:Ur,y:Ur}:this._getOriginFromCorner(t,i),h={target:t,action:d,actionHandler:A,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:eo(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Je(Je({},K5(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=h,this.fire("before:transform",{e,transform:h})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new _t(t,r).transform(this.viewportTransform),a=new _t(t+o,r+s).transform(this.viewportTransform),A=this.selectionLineWidth/2;let d=Math.min(i.x,a.x),c=Math.min(i.y,a.y),u=Math.max(i.x,a.x),h=Math.max(i.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,c,u-d,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=A,c+=A,u-=A,h-=A,Bo.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,c,u-d,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,o=this.getActiveObjects();if(this.targets=[],r&&o.length>=1){if(r.findControl(t,Lv(e))||o.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&i&&i!==r?(this.targets=s,r):i}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const o=this.getZoom(),s=e.padding/o;if(s){const[i,a,A,d]=r,c=Math.atan2(a.y-i.y,a.x-i.x),u=Ea(c)*s,h=Fa(c)*s,f=u+h,g=u-h;r=[new _t(i.x-g,i.y-f),new _t(a.x+f,a.y-g),new _t(A.x+g,A.y+f),new _t(d.x-f,d.y+g)]}return On.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Sd(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const o=e[r];if(this._checkTarget(o,t)){if(Df(o)&&o.subTargetCheck){const s=this._searchPossibleTargets(o._objects,t);s&&this.targets.push(s)}return o}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Df(r)&&r.interactive&&this.targets[0]){const o=this.targets;for(let s=o.length-1;s>0;s--){const i=o[s];if(!Df(i)||!i.interactive)return i}return o[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,o=r.getBoundingClientRect();let s=QF(e),i=o.width||0,a=o.height||0;i&&a||(gs in o&&Qv in o&&(a=Math.abs(o.top-o.bottom)),Xn in o&&tn in o&&(i=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Sd(s,void 0,this.viewportTransform));const A=this.getRetinaScaling();A!==1&&(s.x/=A,s.y/=A);const d=i===0||a===0?new _t(1,1):new _t(r.width/i,r.height/a);return s.multiply(d)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=xi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return qA(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,o=!1;const s=this.getActiveObjects(),i=[],a=[];e.forEach(A=>{s.includes(A)||(r=!0,A.fire("deselected",{e:t,target:A}),a.push(A))}),s.forEach(A=>{e.includes(A)||(r=!0,A.fire("selected",{e:t,target:A}),i.push(A))}),e.length>0&&s.length>0?(o=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:a})):s.length>0?(o=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(o=!0,this.fire("selection:cleared",{e:t,deselected:a})),o&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),o=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),o}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,qA(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),qA(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const o=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),o}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,o={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",o),r.fire(up,o))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;qA(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const o=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(o),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&qA(t)&&this._activeObject===t){const r=Zd(e,["angle","flipX","flipY",tn,bs,ti,Yd,Jd,gs]);return LF(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const o=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(o)}}Xe(lg,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class gU{constructor(e){Xe(this,"targets",[]),Xe(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:o}=e.getActiveObject()||{};o&&o.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),ld(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const vU=["target","oldTarget","fireCanvas","e"],Fs={passive:!1},Zl=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Ya=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Gs=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},mU={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Rv extends lg{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Xe(this,"_isClick",void 0),Xe(this,"textEditingManager",new gU(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Ya,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,o=this._getEventPrefix();e(H5(r),"resize",this._onResize),e(r,o+"down",this._onMouseDown),e(r,"".concat(o,"move"),this._onMouseMove,Fs),e(r,"".concat(o,"out"),this._onMouseOut),e(r,"".concat(o,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Fs)}removeListeners(){this.addOrRemove(Gs,"remove");const e=this._getEventPrefix(),t=wi(this.upperCanvasEl);Gs(t,"".concat(e,"up"),this._onMouseUp),Gs(t,"touchend",this._onTouchEnd,Fs),Gs(t,"".concat(e,"move"),this._onMouseMove,Fs),Gs(t,"touchmove",this._onMouseMove,Fs),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Je({e},Zl(this,e));this.fire("mouse:out",Je(Je({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Je({},r)),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",Je(Je({},r),{},{target:o})),o&&o.fire("mouseout",Je({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Je({e},Zl(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Ya(this.upperCanvasEl,"drag",this._onDragProgress)}Pv(e)}_renderDragEffects(e,t,r){let o=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),o=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),o=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),o=!0),i.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==vs,r=t?this._activeObject:void 0,o={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Gs(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",o),this._dragSource&&this._dragSource.fire("dragend",o),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:o}=this.findDragTargets(e),s=this._dragSource,i={e,target:r,subTargets:o,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(a=r),r.fire(t,i));for(let A=0;A<o.length;A++){const d=o[A];d.canDrop(e)&&(a=d),d.fire(t,i)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),o={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,o)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),o=this._basicEventHandler("drop:before",Je({e,target:t,subTargets:r,dragSource:this._dragSource},Zl(this,e)));o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],o=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&Pv(e),this._basicEventHandler("contextmenu",o),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const o=this.upperCanvasEl,s=this._getEventPrefix(),i=wi(o);Ya(i,"touchend",this._onTouchEnd,Fs),t&&Ya(i,"touchmove",this._onMouseMove,Fs),Gs(o,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Gs(t,"".concat(r,"move"),this._onMouseMove,Fs);const o=wi(t);Ya(o,"".concat(r,"up"),this._onMouseUp),Ya(o,"".concat(r,"move"),this._onMouseMove,Fs)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=wi(this.upperCanvasEl);Gs(r,"touchend",this._onTouchEnd,Fs),Gs(r,"touchmove",this._onMouseMove,Fs),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ya(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const o=wi(this.upperCanvasEl);Gs(o,"".concat(r,"up"),this._onMouseUp),Gs(o,"".concat(r,"move"),this._onMouseMove,Fs),Ya(t,"".concat(r,"move"),this._onMouseMove,Fs)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,o=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,A,d=!1;if(r&&(this._finalizeCurrentTransform(e),d=r.actionPerformed),!o){const c=s===this._activeObject;this.handleSelection(e),d||(d=this._shouldRender(s)||!c&&s===this._activeObject)}if(s){const c=s.findControl(this.getViewportPoint(e),Lv(e)),{key:u,control:h}=c||{};if(A=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),d=!0;else if(h){const f=h.getMouseUpHandler(e,s,h);f&&(a=this.getScenePoint(e),f.call(h,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==A)){const c=r.target&&r.target.controls[r.corner],u=c&&c.getMouseUpHandler(e,r.target,c);a=a||this.getScenePoint(e),u&&u.call(c,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),d?this.requestRenderAll():o||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:o=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<o.length;s++)o[s]!==r&&o[s].fire(e,t);return t}_handleEvent(e,t){const r=this._target,o=this.targets||[],s=Je(Je({e,target:r,subTargets:o},Zl(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let i=0;i<o.length;i++)o[i]!==r&&o[i].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const i=this.getScenePoint(e);this._groupSelector={x:i.x,y:i.y,deltaY:0,deltaX:0}}if(t){const i=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),Lv(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,i);const A=a?a.control:void 0,d=this.getScenePoint(e),c=A&&A.getMouseDownHandler(e,t,A);c&&c.call(A,e,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Sd(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:o[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("drag",Je(Je({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("drag",Je(Je({},t),{},{target:s[a],oldTarget:o[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:o,fireCanvas:s,e:i}=t,a=Qn(t,vU);const{targetIn:A,targetOut:d,canvasIn:c,canvasOut:u}=mU[e],h=o!==r;if(o&&h){const f=Je(Je({},a),{},{e:i,target:o,nextTarget:r},Zl(this,i));s&&this.fire(u,f),o.fire(d,f)}if(r&&h){const f=Je(Je({},a),{},{e:i,target:r,previousTarget:o},Zl(this,i));s&&this.fire(c,f),r.fire(A,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,o=r.target,s=o.group?Sd(t,void 0,o.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:o,actionHandler:s,target:i}=t,a=!!s&&s(e,t,r.x,r.y);a&&i.setCoords(),o==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const o=qA(this._activeObject)?this._activeObject:null,s=(!o||t.group!==o)&&t.findControl(this.getViewportPoint(e));if(s){const i=s.control;this.setCursor(i.cursorStyleHandler(e,i,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(i=>{r=i.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,o=qA(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||o)&&(o||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(o){const s=r.getObjects();if(t===r){const i=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,i)||this.searchPossibleTargets(this._objects,i))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(er.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new _t(t,r),a=i.add(new _t(o,s)),A=i.min(a),d=i.max(a).subtract(A),c=this.collectObjects({left:A.x,top:A.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(h=>!h.onSelect({e})).reverse():c;if(u.length===1)this.setActiveObject(u[0],e);else if(u.length>1){const h=er.getClass("ActiveSelection");this.setActiveObject(new h(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const pB={x1:0,y1:0,x2:0,y2:0},wU=Je(Je({},pB),{},{r1:0,r2:0}),gd=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,yU=/^(\d+\.\d+)%|(\d+)%$/;function gB(n){return n&&yU.test(n)}function vB(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(gB(n)?100:1):NaN;return Nd(0,gd(t,e),1)}const bU=/\s*;\s*/,_U=/\s*:\s*/;function BU(n,e){let t,r;const o=n.getAttribute("style");if(o){const i=o.split(bU);i[i.length-1]===""&&i.pop();for(let a=i.length;a--;){const[A,d]=i[a].split(_U).map(c=>c.trim());A==="stop-color"?t=d:A==="stop-opacity"&&(r=d)}}const s=new Os(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:vB(n.getAttribute("offset"),0),color:s.toRgb(),opacity:gd(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function xU(n,e){const t=[],r=n.getElementsByTagName("stop"),o=vB(e,1);for(let s=r.length;s--;)t.push(BU(r[s],o));return t}function mB(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function wB(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function li(n,e){return n.getAttribute(e)}function zU(n,e){return function(t,r){let o,{width:s,height:i,gradientUnits:a}=r;return Object.keys(t).reduce((A,d)=>{const c=t[d];return c==="Infinity"?o=1:c==="-Infinity"?o=0:(o=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&gB(c)&&(o*=.01,a==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(o*=s),d!=="y1"&&d!=="y2"||(o*=i)))),A[d]=o,A},{})}(mB(n)==="linear"?function(t){return{x1:li(t,"x1")||0,y1:li(t,"y1")||0,x2:li(t,"x2")||"100%",y2:li(t,"y2")||0}}(n):function(t){return{x1:li(t,"fx")||li(t,"cx")||"50%",y1:li(t,"fy")||li(t,"cy")||"50%",r1:0,x2:li(t,"cx")||"50%",y2:li(t,"cy")||"50%",r2:li(t,"r")||"50%"}}(n),Je(Je({},e),{},{gradientUnits:wB(n)}))}class Oh{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:o={},colorStops:s=[],offsetX:i=0,offsetY:a=0,gradientTransform:A,id:d}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Je(Je({},t==="radial"?wU:pB),o),colorStops:s,offsetX:i,offsetY:a,gradientTransform:A,id:d?"".concat(d,"_").concat(bA()):bA()})}addColorStop(e){for(const t in e){const r=new Os(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Je(Je({},Zd(this,e)),{},{type:this.type,coords:Je({},this.coords),colorStops:this.colorStops.map(t=>Je({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],o=this.gradientTransform?this.gradientTransform.concat():is.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(u=>Je({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,A=-this.offsetY;var d;s==="objectBoundingBox"?(a/=e.width,A/=e.height):(a+=e.width/2,A+=e.height/2),(d=e)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,A-=e.pathOffset.y),o[4]-=a,o[5]-=A;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(pp(o),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:f,y2:g}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:f,y2:g,r1:m,r2:y}=this.coords,_=m>y;r.push("<radialGradient ",c,' cx="',_?u:f,'" cy="',_?h:g,'" r="',_?m:y,'" fx="',_?f:u,'" fy="',_?g:h,`">
`),_&&(i.reverse(),i.forEach(I=>{I.offset=1-I.offset}));const C=Math.min(m,y);if(C>0){const I=C/Math.max(m,y);i.forEach(N=>{N.offset+=I*(1-N.offset)})}}return i.forEach(u=>{let{color:h,offset:f,opacity:g}=u;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',h,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:o,y2:s,r1:i,r2:a}=this.coords,A=this.type==="linear"?e.createLinearGradient(t,r,o,s):e.createRadialGradient(t,r,i,o,s,a);return this.colorStops.forEach(d=>{let{color:c,opacity:u,offset:h}=d;A.addColorStop(h,u!==void 0?new Os(c).setAlpha(u).toRgba():c)}),A}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Je(Je({},e),{},{colorStops:t?t.map(o=>Je({},o)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const o=wB(e),s=t._findCenterFromElement();return new this(Je({id:e.getAttribute("id")||void 0,type:mB(e),coords:zU(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:xU(e,r.opacity),gradientUnits:o,gradientTransform:Nv(e.getAttribute("gradientTransform")||"")},o==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Xe(Oh,"type","Gradient"),er.setClass(Oh,"gradient"),er.setClass(Oh,"linear"),er.setClass(Oh,"radial");const CU=["type","source","patternTransform"];class y0{get type(){return"pattern"}set type(e){yA("warn","Setting type has no effect",e)}constructor(e){Xe(this,"repeat","repeat"),Xe(this,"offsetX",0),Xe(this,"offsetY",0),Xe(this,"crossOrigin",""),this.id=bA(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Je(Je({},Zd(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Dn(this.offsetX,$r.NUM_FRACTION_DIGITS),offsetY:Dn(this.offsetY,$r.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:o,repeat:s,id:i}=this,a=gd(this.offsetX/t,0),A=gd(this.offsetY/r,0),d=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):gd(o.width/t,0),c=s==="repeat-x"||s==="no-repeat"?1+Math.abs(A||0):gd(o.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(a,'" y="').concat(A,'" width="').concat(d,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(o.width,'" height="').concat(o.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:o,patternTransform:s}=e,i=Qn(e,CU);const a=await Mf(o,Je(Je({},t),{},{crossOrigin:i.crossOrigin}));return new this(Je(Je({},i),{},{patternTransform:s&&s.slice(0),source:a}))}}Xe(y0,"type","Pattern"),er.setClass(y0),er.setClass(y0,"pattern");const SU=["path","left","top"],EU=["d"];class KA extends Bo{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:o,top:s}=t,i=Qn(t,SU);super(),Object.assign(this,KA.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),typeof o=="number"&&this.set(tn,o),typeof s=="number"&&this.set(gs,s)}_setPath(e,t){this.path=oU(Array.isArray(e)?e:hU(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new _t(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const o of this.path)switch(o[0]){case"L":e.lineTo(o[1]+t,o[2]+r);break;case"M":e.moveTo(o[1]+t,o[2]+r);break;case"C":e.bezierCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r,o[5]+t,o[6]+r);break;case"Q":e.quadraticCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Je(Je({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=fU(this.path,$r.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=$r.NUM_FRACTION_DIGITS;return" translate(".concat(Dn(-this.pathOffset.x,e),", ").concat(Dn(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:o}=this._calcDimensions();this.set({width:t,height:r,pathOffset:o}),e&&this.setPositionByOrigin(o,Ur,Ur)}_calcBoundsFromPath(){const e=[];let t=0,r=0,o=0,s=0;for(const i of this.path)switch(i[0]){case"L":o=i[1],s=i[2],e.push({x:t,y:r},{x:o,y:s});break;case"M":o=i[1],s=i[2],t=o,r=s;break;case"C":e.push(...Ww(o,s,i[1],i[2],i[3],i[4],i[5],i[6])),o=i[5],s=i[6];break;case"Q":e.push(...Ww(o,s,i[1],i[2],i[1],i[2],i[3],i[4])),o=i[3],s=i[4];break;case"Z":o=t,s=r}return za(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Je(Je({},e),{},{pathOffset:new _t(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const o=Ta(e,this.ATTRIBUTE_NAMES,r),{d:s}=o;return new this(s,Je(Je(Je({},Qn(o,EU)),t),{},{left:void 0,top:void 0}))}}Xe(KA,"type","Path"),Xe(KA,"cacheProperties",[...Qa,"path","fillRule"]),Xe(KA,"ATTRIBUTE_NAMES",[...CA,"d"]),er.setClass(KA),er.setSVGClass(KA);const FU=["left","top","radius"],yB=["radius","startAngle","endAngle","counterClockwise"];class ma extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),ma.ownDefaults)}constructor(e){super(),Object.assign(this,ma.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,eo(this.startAngle),eo(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(bs)}getRadiusY(){return this.get("radius")*this.get(ti)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...yB,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=eo(this.startAngle),o=eo(this.endAngle),s=Ea(r)*t,i=Fa(r)*t,a=Ea(o)*t,A=Fa(o)*t,d=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(d," ").concat(c," ").concat(a," ").concat(A,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const o=Ta(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:a=0}=o;return new this(Je(Je({},Qn(o,FU)),{},{radius:a,left:s-a,top:i-a}))}static fromObject(e){return super._fromObject(e)}}Xe(ma,"type","Circle"),Xe(ma,"cacheProperties",[...Qa,...yB]),Xe(ma,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Xe(ma,"ATTRIBUTE_NAMES",["cx","cy","r",...CA]),er.setClass(ma),er.setSVGClass(ma);const IU=["x1","y1","x2","y2"],UU=["x1","y1","x2","y2"],qv=["x1","x2","y1","y2"];class $A extends Bo{constructor(){let[e,t,r,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,$A.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=o,this._setWidthHeight();const{left:i,top:a}=s;typeof i=="number"&&this.set(tn,i),typeof a=="number"&&this.set(gs,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:o}=this;this.width=Math.abs(r-e),this.height=Math.abs(o-t);const{left:s,top:i,width:a,height:A}=za([{x:e,y:t},{x:r,y:o}]),d=new _t(s+a/2,i+A/2);this.setPositionByOrigin(d,Ur,Ur)}_set(e,t){return super._set(e,t),qv.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var o;Ys(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new _t((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Je(Je({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:o,width:s,height:i}=this,a=e<=t?-1:1,A=r<=o?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:A*i/2,y2:A*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(o,`" />
`)]}static async fromElement(e,t,r){const o=Ta(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:a=0,y2:A=0}=o;return new this([s,i,a,A],Qn(o,IU))}static fromObject(e){let{x1:t,y1:r,x2:o,y2:s}=e,i=Qn(e,UU);return this._fromObject(Je(Je({},i),{},{points:[t,r,o,s]}),{extraParam:"points"})}}Xe($A,"type","Line"),Xe($A,"cacheProperties",[...Qa,...qv]),Xe($A,"ATTRIBUTE_NAMES",CA.concat(qv)),er.setClass($A),er.setSVGClass($A);class JA extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),JA.ownDefaults)}constructor(e){super(),Object.assign(this,JA.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Xe(JA,"type","Triangle"),Xe(JA,"ownDefaults",{width:100,height:100}),er.setClass(JA),er.setSVGClass(JA);const bB=["rx","ry"];class wa extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),wa.ownDefaults)}constructor(e){super(),Object.assign(this,wa.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(bs)}getRy(){return this.get("ry")*this.get(ti)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...bB,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,dp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const o=Ta(e,this.ATTRIBUTE_NAMES,r);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}function QU(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Xe(wa,"type","Ellipse"),Xe(wa,"cacheProperties",[...Qa,...bB]),Xe(wa,"ownDefaults",{rx:0,ry:0}),Xe(wa,"ATTRIBUTE_NAMES",[...CA,"cx","cy","rx","ry"]),er.setClass(wa),er.setSVGClass(wa);const TU=["left","top"],_B={exactBoundingBox:!1};class vi extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),vi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xe(this,"strokeDiff",void 0),Object.assign(this,vi.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:o}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(tn,r),typeof o=="number"&&this.set(gs,o)}isOpen(){return!0}_projectStrokeOnPoints(e){return _I(this.points,e,this.isOpen())}_calcDimensions(e){e=Je({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(d=>d.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new _t,strokeOffset:new _t,strokeDiff:new _t};const r=za(t),o=ng(Je(Je({},e),{},{scaleX:1,scaleY:1})),s=za(this.points.map(d=>hs(d,o,!0))),i=new _t(this.scaleX,this.scaleY);let a=r.left+r.width/2,A=r.top+r.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(eo(this.skewX)),A-=a*Math.tan(eo(this.skewY))),Je(Je({},r),{},{pathOffset:new _t(a,A),strokeOffset:new _t(s.left,s.top).subtract(new _t(r.left,r.top)).multiply(i),strokeDiff:new _t(r.width,r.height).subtract(new _t(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=za(this.points);return new _t(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}=this._calcDimensions();this.set({width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}),e&&this.setPositionByOrigin(new _t(t+o/2,r+s/2),Ur,Ur)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new _t(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:A}=this._calcDimensions(e);i=new _t((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:A)}else{var o,s;i=new _t((o=e.width)!==null&&o!==void 0?o:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return i.multiply(new _t(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,o=super._set(e,t);return this.exactBoundingBox&&r&&((e===bs||e===ti)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),o}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Je(Je({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:o}=t;return{x:r,y:o}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,o=$r.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push(Dn(this.points[s].x-t,o),",",Dn(this.points[s].y-r,o)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(let s=0;s<t;s++){const i=this.points[s];e.lineTo(i.x-r,i.y-o)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(QU(e.getAttribute("points")),Je(Je({},Qn(Ta(e,this.ATTRIBUTE_NAMES,r),TU)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Xe(vi,"ownDefaults",_B),Xe(vi,"type","Polyline"),Xe(vi,"layoutProperties",[Yd,Jd,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Xe(vi,"cacheProperties",[...Qa,"points"]),Xe(vi,"ATTRIBUTE_NAMES",[...CA]),er.setClass(vi),er.setSVGClass(vi);class Dh extends vi{isOpen(){return!1}}Xe(Dh,"ownDefaults",_B),Xe(Dh,"type","Polygon"),er.setClass(Dh),er.setSVGClass(Dh);const BB=["fontSize","fontWeight","fontFamily","fontStyle"],xB=["underline","overline","linethrough"],zB=[...BB,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],CB=[...zB,...xB,"textBackgroundColor","direction"],LU=[...BB,...xB,ms,"strokeWidth",ho,"deltaY","textBackgroundColor"],PU={_reNewline:w1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:tn,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:tn,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Di="justify",bp="justify-left",su="justify-right",iu="justify-center";class SB extends Bo{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const o in t[r])for(const s in t[r][o])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const o in r)for(const s in r[o])if(r[o][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,o,s=0,i=!0,a=0;for(const A in t){r=0;for(const d in t[A]){const c=t[A][d]||{};s++,c[e]!==void 0?(o?c[e]!==o&&(i=!1):o=c[e],c[e]===this[e]&&delete c[e]):i=!1,Object.keys(c).length!==0?r++:delete t[A][d]}r===0&&delete t[A]}for(let A=0;A<this._textLines.length;A++)a+=this._textLines[A].length;i&&s===a&&(this[e]=o,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,o,s;for(o in t){for(s in r=t[o],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[o]}}_extendStyles(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=x1(Je(Je({},this._getStyleDeclaration(r,o)),t),i=>i!==void 0);this._setStyleDeclaration(r,o,s)}getSelectionStyles(e,t,r){const o=[];for(let s=e;s<(t||e);s++)o.push(this.getStyleAtPosition(s,r));return o}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,o):this._getStyleDeclaration(r,o)}setSelectionStyles(e,t,r){for(let o=t;o<(r||t);o++)this._extendStyles(o,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const o=this.styles&&this.styles[e];return o&&(r=o[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Je(Je({},Zd(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Xe(SB,"_styleProperties",LU);const kU=/  +/g,OU=/"/g;function b0(n,e,t,r,o){return"		".concat(function(s,i){let{left:a,top:A,width:d,height:c}=i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$r.NUM_FRACTION_DIGITS;const h=Cu(ho,s,!1),[f,g,m,y]=[a,A,d,c].map(_=>Dn(_,u));return"<rect ".concat(h,' x="').concat(f,'" y="').concat(g,'" width="').concat(m,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:o}),`
`)}const DU=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let _0;class ts extends SB{static getDefaults(){return Je(Je({},super.getDefaults()),ts.ownDefaults)}constructor(e,t){super(),Xe(this,"__charBounds",[]),Object.assign(this,ts.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=fB(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Di)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,o,s,i,a;for(let A=0,d=this._textLines.length;A<d;A++)if((this.textAlign===Di||A!==d-1&&!this.isEndOfWrapping(A))&&(o=0,s=this._textLines[A],t=this.getLineWidth(A),t<this.width&&(a=this.textLines[A].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let c=0;c<=s.length;c++)i=this.__charBounds[A][c],this._reSpaceAndTab.test(s[c])?(i.width+=e,i.kernedWidth+=e,i.left+=o,o+=e):i.left+=o}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<r.length;o++){if(e<=r[o].length)return{lineIndex:o,charIndex:e};e-=r[o].length+this.missingNewlineOffset(o,t)}return{lineIndex:o-1,charIndex:r[o-1].length<e?r[o-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ms?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ur:e.textBaseline="middle";break;case"ascender":e.textBaseline=gs;break;case"descender":e.textBaseline=Qv}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const o=this.getLineWidth(t);o>e&&(e=o)}return e}_renderTextLine(e,t,r,o,s,i){this._renderChars(e,t,r,o,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let o=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){o+=a;continue}const A=this._textLines[s].length,d=this._getLineLeftOffset(s);let c,u,h=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let m=0;m<A;m++){const y=this.__charBounds[s][m];u=this.getValueOfPropertyAt(s,m,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=u,u&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):u!==g?(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=g,g&&e.fillRect(c,o,h,a/this.lineHeight),f=y.left,h=y.width,g=u):h+=y.kernedWidth}u&&!this.path&&(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=u,e.fillRect(c,o,h,a/this.lineHeight)),o+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,o){const s=nu.getFontCache(t),i=this._getFontDeclaration(t),a=r+e,A=r&&i===this._getFontDeclaration(o),d=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,f;if(r&&s[r]!==void 0&&(h=s[r]),s[e]!==void 0&&(f=c=s[e]),A&&s[a]!==void 0&&(u=s[a],f=u-h),c===void 0||h===void 0||u===void 0){const g=function(){return _0||(_0=Wi({width:0,height:0}).getContext("2d")),_0}();this._setTextStyles(g,t,!0),c===void 0&&(f=c=g.measureText(e).width,s[e]=c),h===void 0&&A&&r&&(h=g.measureText(r).width,s[r]=h),A&&u===void 0&&(u=g.measureText(a).width,s[a]=u,f=u-h)}return{width:c*d,kernedWidth:f*d}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,o=0;const s=this.pathSide===Xn,i=this.path,a=this._textLines[e],A=a.length,d=new Array(A);this.__charBounds[e]=d;for(let c=0;c<A;c++){const u=a[c];r=this._getGraphemeBox(u,e,c,t),d[c]=r,o+=r.kernedWidth,t=u}if(d[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let c=0;const u=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case tn:c=s?u-o:0;break;case Ur:c=(u-o)/2;break;case Xn:c=s?0:u-o}c+=this.pathStartOffset*(s?-1:1);for(let h=s?A-1:0;s?h>=0:h<A;s?h--:h++)r=d[h],c>u?c%=u:c<0&&(c+=u),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,o=this.path,s=lU(o.path,r,o.segmentsInfo);t.renderLeft=s.x-o.pathOffset.x,t.renderTop=s.y-o.pathOffset.y,t.angle=s.angle+(this.pathSide===Xn?Math.PI:0)}_getGraphemeBox(e,t,r,o,s){const i=this.getCompleteStyleDeclaration(t,r),a=o?this.getCompleteStyleDeclaration(t,r-1):{},A=this._measureChar(e,i,o,a);let d,c=A.kernedWidth,u=A.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),u+=d,c+=d);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];h.left=f.left+f.width+A.kernedWidth-A.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,o=this._textLines[e].length;r<o;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),t+=r===o-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const o=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const A=this.getHeightOfLine(i),d=A/this.lineHeight,c=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],o+c,s+r+d,i),r+=A}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(ho))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,o,s,i){const a=this.getHeightOfLine(i),A=this.textAlign.includes(Di),d=this.path,c=!A&&this.charSpacing===0&&this.isEmptyStyles(i)&&!d,u=this.direction==="ltr",h=this.direction==="ltr"?1:-1,f=t.direction;let g,m,y,_,C,I="",N=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?tn:Xn),s-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),o,s),void t.restore();for(let k=0,W=r.length-1;k<=W;k++)_=k===W||this.charSpacing||d,I+=r[k],y=this.__charBounds[i][k],N===0?(o+=h*(y.kernedWidth-y.width),N+=y.width):N+=y.kernedWidth,A&&!_&&this._reSpaceAndTab.test(r[k])&&(_=!0),_||(g=g||this.getCompleteStyleDeclaration(i,k),m=this.getCompleteStyleDeclaration(i,k+1),_=T1(g,m,!1)),_&&(d?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,i,k,I,-N/2,0),t.restore()):(C=o,this._renderChar(e,t,i,k,I,C,s)),I="",g=m,o+=h*N,N=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,o=Wi({width:t,height:r}),s=o.getContext("2d");return o.width=t,o.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(o,"no-repeat")}handleFiller(e,t,r){let o,s;return Ys(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:o}=t;return e.lineWidth=o,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,o,s,i,a){const A=this._getStyleDeclaration(r,o),d=this.getCompleteStyleDeclaration(r,o),c=e==="fillText"&&d.fill,u=e==="strokeText"&&d.stroke&&d.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(d),A.textBackgroundColor&&this._removeShadow(t),A.deltaY&&(a+=A.deltaY),c){const h=this._setFillStyles(t,d);t.fillText(s,i-h.offsetX,a-h.offsetY)}if(u){const h=this._setStrokeStyles(t,d);t.strokeText(s,i-h.offsetX,a-h.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),i=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,o=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let a=0;return o===Di||o===iu&&!i||o===su&&!i||o===bp&&!i?0:(o===Ur&&(a=r/2),o===Xn&&(a=r),o===iu&&(a=r/2),o===su&&(a=r),s==="rtl"&&(o===Xn||o===Di||o===su?a=0:o===tn||o===bp?a=-r:o!==Ur&&o!==iu||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var o;return(o=this._getStyleDeclaration(e,t)[r])!==null&&o!==void 0?o:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const o=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let A=0,d=this._textLines.length;A<d;A++){const c=this.getHeightOfLine(A);if(!this[t]&&!this.styleHas(t,A)){r+=c;continue}const u=this._textLines[A],h=c/this.lineHeight,f=this._getLineLeftOffset(A);let g,m,y=0,_=0,C=this.getValueOfPropertyAt(A,0,t),I=this.getValueOfPropertyAt(A,0,ho);const N=r+h*(1-this._fontSizeFraction);let k=this.getHeightOfChar(A,0),W=this.getValueOfPropertyAt(A,0,"deltaY");for(let H=0,J=u.length;H<J;H++){const xe=this.__charBounds[A][H];g=this.getValueOfPropertyAt(A,H,t),m=this.getValueOfPropertyAt(A,H,ho);const M=this.getHeightOfChar(A,H),O=this.getValueOfPropertyAt(A,H,"deltaY");if(s&&g&&m)e.save(),e.fillStyle=I,e.translate(xe.renderLeft,xe.renderTop),e.rotate(xe.angle),e.fillRect(-xe.kernedWidth/2,a*M+O,xe.kernedWidth,this.fontSize/15),e.restore();else if((g!==C||m!==I||M!==k||O!==W)&&_>0){let X=o+f+y;this.direction==="rtl"&&(X=this.width-X-_),C&&I&&(e.fillStyle=I,e.fillRect(X,N+a*k+W,_,this.fontSize/15)),y=xe.left,_=xe.width,C=g,I=m,k=M,W=O}else _+=xe.kernedWidth}let V=o+f+y;this.direction==="rtl"&&(V=this.width-V-_),e.fillStyle=m,g&&m&&e.fillRect(V,N+a*k+W,_-i,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||ts.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:o,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Q1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),o=[`
`];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],o);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Je(Je({},super.toObject([...CB,...e])),{},{styles:zI(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let o=!1,s=!1;if(typeof e=="object")for(const i in e)i==="path"&&this.setPathInfo(),o=o||r.includes(i),s=s||i==="path";else o=r.includes(e),s=e==="path";return s&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const o=Ta(e,ts.ATTRIBUTE_NAMES,r),s=Je(Je({},t),o),{textAnchor:i=tn,textDecoration:a="",dx:A=0,dy:d=0,top:c=0,left:u=0,fontSize:h=m1,strokeWidth:f=1}=s,g=Qn(s,DU),m=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Je({left:u+A,top:c+d,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:h},g)),y=m.getScaledHeight()/m.height,_=((m.height+m.strokeWidth)*m.lineHeight-m.height)*y,C=m.getScaledHeight()+_;let I=0;return i===Ur&&(I=m.getScaledWidth()/2),i===Xn&&(I=m.getScaledWidth()),m.set({left:m.left-I,top:m.top-(C-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:f}),m}static fromObject(e){return this._fromObject(Je(Je({},e),{},{styles:CI(e.styles||{},e.text)}),{extraParam:"text"})}}Xe(ts,"textLayoutProperties",zB),Xe(ts,"cacheProperties",[...Qa,...CB]),Xe(ts,"ownDefaults",PU),Xe(ts,"type","Text"),Xe(ts,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Xe(ts,"ATTRIBUTE_NAMES",CA.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),sB(ts,[class extends X5{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(OU,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let o,s=n;this.backgroundColor&&r.push(...b0(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,a=this._textLines.length;i<a;i++)o=this._getLineLeftOffset(i),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,e+o,s),this._setSVGTextLineText(t,i,e+o,s),s+=this.getHeightOfLine(i);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(kU)),s=o?'style="'.concat(o,'"'):"",i=e.deltaY,a=i?' dy="'.concat(Dn(i,$r.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Dn(t,$r.NUM_FRACTION_DIGITS),'" y="').concat(Dn(r,$r.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(BI(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const o=this.getHeightOfLine(e),s=this.textAlign.includes(Di),i=this._textLines[e];let a,A,d,c,u,h="",f=0;r+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,m=i.length-1;g<=m;g++)u=g===m||this.charSpacing,h+=i[g],d=this.__charBounds[e][g],f===0?(t+=d.kernedWidth-d.width,f+=d.width):f+=d.kernedWidth,s&&!u&&this._reSpaceAndTab.test(i[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(e,g),A=this.getCompleteStyleDeclaration(e,g+1),u=T1(a,A,!0)),u&&(c=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(h,c,t,r)),h="",a=A,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let i,a=0,A=0,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<o.length;c++){const{left:u,width:h,kernedWidth:f}=this.__charBounds[e][c];i=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),i!==d?(d&&n.push(...b0(d,t+A,r,a,s)),A=u,a=h,d=i):a+=f}i&&n.push(...b0(d,t+A,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:o,fill:s,fontSize:i,fontStyle:a,fontWeight:A,deltaY:d}=n,c=this.getSvgTextDecoration(n);return[o?Cu(ms,o):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",c&&"text-decoration: ".concat(c,"; "),s?Cu(ho,s):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),er.setClass(ts),er.setSVGClass(ts);class NU{constructor(e){Xe(this,"target",void 0),Xe(this,"__mouseDownInPlace",!1),Xe(this,"__dragStartFired",!1),Xe(this,"__isDraggingOver",!1),Xe(this,"__dragStartSelection",void 0),Xe(this,"__dragImageDisposer",void 0),Xe(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:o,selectionEnd:s}=t;const i=this.target,a=i.canvas,A=new _t(i.flipX?-1:1,i.flipY?-1:1),d=i._getCursorBoundaries(o),c=new _t(d.left+d.leftOffset,d.top+d.topOffset).multiply(A).transform(i.calcTransformMatrix()),u=a.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),f=i.getBoundingRect(),g=c.subtract(new _t(f.left,f.top)),m=a.viewportTransform,y=g.add(u).transform(m,!0),_=i.backgroundColor,C=U1(i.styles);i.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(I,0,o),i.setSelectionStyles(I,s,i.text.length),i.dirty=!0;const N=i.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=_,i.styles=C,i.dirty=!0,jv(N,{position:"fixed",left:"".concat(-N.width,"px"),border:vs,width:"".concat(N.width/h,"px"),height:"".concat(N.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{N.remove()},wi(e.target||this.target.hiddenTextarea).body.appendChild(N),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(N,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const o=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(o.selectionStart,o.selectionEnd).join(""),i=Je({text:t.text,value:s},o);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,i)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,o=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!o){const i=this.target,a=i.canvas;let A=i.getSelectionStartFromPointer(r);const{styles:d}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const h=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;A>h&&A<=f?A=h:A>f&&(A-=f-h),i.removeChars(h,f),delete this.__dragStartSelection}i._reNewline.test(c)&&(i._reNewline.test(i._text[A])||A===i._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=i,i.insertChars(s,d,A),a.setActiveObject(i),i.enterEditing(r),i.selectionStart=Math.min(A+u,i._text.length),i.selectionEnd=Math.min(i.selectionStart+s.length,i._text.length),i.hiddenTextarea.value=i.text,i._updateTextarea(),i.hiddenTextarea.focus(),i.fire(cp,{index:A+u,action:"drop"}),a.fire("text:changed",{target:i}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const o=this.target,s=this.target.canvas,{selectionStart:i,selectionEnd:a}=this.__dragStartSelection,A=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||vs;A===vs?(o.selectionStart=i,o.selectionEnd=a,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),A==="move"&&(o.removeChars(i,a),o.selectionStart=o.selectionEnd=i,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(cp,{index:i,action:"dragend"}),s.fire("text:changed",{target:o}),s.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Jw=/[ \n\.,;!\?\-]/;class MU extends ts{constructor(){super(...arguments),Xe(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:o,onComplete:s}=e;return eB({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:o,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:i=>{this._currentCursorOpacity=i,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let o=e>0&&this._reSpace.test(r[e])&&(t===-1||!w1.test(r[e-1]))?e-1:e,s=r[o];for(;o>0&&o<r.length&&!Jw.test(s);)o+=t,s=r[o];return t===-1&&Jw.test(s)&&o++,o}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;wi(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),o=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&o!==s||o!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const o=r.slice(0,e),s=this.graphemeSplit(o).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const o=r.slice(0,e).join("").length;return e===t?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,a=t.leftOffset,A=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,c=d.width/A,u=d.height/A,h=c-i,f=u-i,g=new _t(t.left+a,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new _t(d.clientWidth/c,d.clientHeight/u));return g.x<0&&(g.x=0),g.x>h&&(g.x=h),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(up),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=i;a<this._unwrappedTextLines[s].length;a++){const A=this.styles[s][a];A&&(this.styles[r]||(this.styles[r]={}),this.styles[r][o+a-i]=A)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],A=i-o;for(let d=o;d<i;d++)delete a[d];for(const d in this.styles[r]){const c=parseInt(d,10);c>=i&&(a[c-A]=a[d],delete a[d])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const o in this.styles){const s=parseInt(o,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,o){const s={},i=this._unwrappedTextLines[e].length,a=i===t;let A=!1;r||(r=1),this.shiftLineStyles(e,r);const d=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(A=!0,s[h-t]=this.styles[e][u],a&&t===0||delete this.styles[e][u])}let c=!1;for(A&&!a&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)o&&o[r-1]?this.styles[e+r]={0:Je({},o[r-1])}:d?this.styles[e+r]={0:Je({},d)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,o){this.styles||(this.styles={});const s=this.styles[e],i=s?Je({},s):{};r||(r=1);for(const A in i){const d=parseInt(A,10);d>=t&&(s[d+r]=i[d],i[d-r]||delete s[d])}if(this._forceClearCache=!0,o){for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Je({},o[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=Je({},a)}insertNewStyleBlock(e,t,r){const o=this.get2DCursorLocation(t,!0),s=[0];let i,a=0;for(let A=0;A<e.length;A++)e[A]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),i=1;i<a;i++)s[i]>0?this.insertCharStyleObject(o.lineIndex+i,0,s[i],r):r&&this.styles[o.lineIndex+i]&&r[0]&&(this.styles[o.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(o.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;o>r&&this.removeStyleFromTo(r,o);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=tn:this._selectionDirection===Xn&&(this._selectionDirection=tn,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Xn?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Xn:this._selectionDirection===tn&&(this._selectionDirection=Xn,this.selectionStart=t),this.selectionEnd=r)}}class HU extends MU{initHiddenTextarea(){const e=this.canvas&&wi(this.canvas.getElement())||Xd(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(i=>{let[a,A]=i;return t.setAttribute(a,A)});const{top:r,left:o,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(o,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(i=>{let[a,A]=i;return t.addEventListener(a,this[A].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(cp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,i=o.length,a=this.selectionStart,A=this.selectionEnd,d=a!==A;let c,u,h,f,g=i-s;const m=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>m.selectionStart;d?(u=this._text.slice(a,A),g+=A-a):i<s&&(u=y?this._text.slice(A+g,A):this._text.slice(a,a-g));const _=o.slice(m.selectionEnd-g,m.selectionEnd);if(u&&u.length&&(_.length&&(c=this.getSelectionStyles(a,a+1,!1),c=_.map(()=>c[0])),d?(h=a,f=A):y?(h=A-u.length,f=A):(h=A,f=A+u.length),this.removeStyleFromTo(h,f)),_.length){const{copyPasteData:C}=Gi();t&&_.join("")===C.copiedText&&!$r.disableStyleCopyPaste&&(c=C.copiedTextStyle),this.insertNewStyleBlock(_,a,c)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:o}=t;this.compositionStart=r,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Gi();e.copiedText=this.getSelectedText(),$r.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,o=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],o+=r.left+r.width),o}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(i).length+A+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s-1,a),d=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+A-d.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let o,s,i=this._getLineLeftOffset(e),a=0;for(let A=0,d=r.length;A<d;A++)if(o=this.__charBounds[e][A].width,i+=o,i>t){s=!0;const c=i-o,u=i,h=Math.abs(c-t);a=Math.abs(u-t)<h?A:A-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Xn);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const o=this.text.length;this.selectionStart=Nd(0,this.selectionStart,o),this.selectionEnd=Nd(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===tn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let o;if(e.altKey)o=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;o=this["findLineBoundary".concat(r)](this[t])}return o!==void 0&&this[t]!==o&&(this[t]=o,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=tn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Xn&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=tn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===tn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Xn,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Xn,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const B0=n=>!!n.button;class jU extends HU{constructor(){super(...arguments),Xe(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new NU(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),Pv(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!B0(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!B0(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const o=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||B0(t)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(yi(this.calcTransformMatrix())).add(new _t(-this._getLeftOffset(),-this._getTopOffset()));let r=0,o=0,s=0;for(let d=0;d<this._textLines.length&&r<=t.y;d++)r+=this.getHeightOfLine(d),s=d,d>0&&(o+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let i=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,A=this.__charBounds[s];for(let d=0;d<a;d++){const c=i+A[d].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-i)&&o++;break}i=c,o++}return Math.min(this.flipX?a-o:o,this._text.length)}}const Nh="moveCursorUp",Mh="moveCursorDown",Hh="moveCursorLeft",jh="moveCursorRight",Rh="exitEditing",RU=Je({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Rh,27:Rh,33:Nh,34:Mh,35:jh,36:Hh,37:Hh,38:Nh,39:jh,40:Mh},keysMapRtl:{9:Rh,27:Rh,33:Nh,34:Mh,35:Hh,36:jh,37:jh,38:Nh,39:Hh,40:Mh},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class ba extends jU{static getDefaults(){return Je(Je({},super.getDefaults()),ba.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Je(Je({},ba.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Rv&&this.canvas.textEditingManager.remove(this),t instanceof Rv&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),o=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:o,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:o,lineIndex:s}=this.get2DCursorLocation(e);for(let d=0;d<s;d++)t+=this.getHeightOfLine(d);const i=this._getLineLeftOffset(s),a=this.__charBounds[s][o];a&&(r=a.left),this.charSpacing!==0&&o===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const A={top:t,left:i+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Xn||this.textAlign===Di||this.textAlign===su?A.left*=-1:this.textAlign===tn||this.textAlign===bp?A.left=i-(r>0?r:0):this.textAlign!==Ur&&this.textAlign!==iu||(A.left=i-(r>0?r:0))),A}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(o,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),A=this.cursorWidth/a,d=this.getValueOfPropertyAt(o,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-A/2,top:c+t.top+d,width:A,height:i}}_renderCursor(e,t,r){const{color:o,opacity:s,left:i,top:a,width:A,height:d}=this.getCursorRenderingData(r,t);e.fillStyle=o,e.globalAlpha=s,e.fillRect(i,a,A,d)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const o=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(Di),a=this.get2DCursorLocation(o),A=this.get2DCursorLocation(s),d=a.lineIndex,c=A.lineIndex,u=a.charIndex<0?0:a.charIndex,h=A.charIndex<0?0:A.charIndex;for(let f=d;f<=c;f++){const g=this._getLineLeftOffset(f)||0;let m=this.getHeightOfLine(f),y=0,_=0,C=0;if(f===d&&(_=this.__charBounds[d][u].left),f>=d&&f<c)C=i&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===c)if(h===0)C=this.__charBounds[c][h].left;else{const V=this._getWidthOfCharSpacing();C=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-V}y=m,(this.lineHeight<1||f===c&&this.lineHeight>1)&&(m/=this.lineHeight);let I=r.left+g+_,N=m,k=0;const W=C-_;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",N=1,k=m):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Xn||this.textAlign===Di||this.textAlign===su?I=this.width-I-W:this.textAlign===tn||this.textAlign===bp?I=r.left+g-C:this.textAlign!==Ur&&this.textAlign!==iu||(I=r.left+g-C)),e.fillRect(I,r.top+r.topOffset+k,W,N),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,ho)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Xe(ba,"ownDefaults",RU),Xe(ba,"type","IText"),er.setClass(ba),er.setClass(ba,"i-text");class ZA extends ba{static getDefaults(){return Je(Je({},super.getDefaults()),ZA.ownDefaults)}constructor(e,t){super(e,Je(Je({},ZA.ownDefaults),t))}static createControls(){return{controls:wI()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Di)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,o=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)e.graphemeText[o]===`
`&&i>0?(r=0,o++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&i>0&&(r++,o++),s[i]={line:t,offset:r},o+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,o=e+1,s=!1;const i=this._styleMap[e],a=this._styleMap[e+1];i&&(e=i.line,r=i.offset),a&&(o=a.line,s=o===e,t=a.offset);const A=e===void 0?this.styles:{line:this.styles[e]};for(const d in A)for(const c in A[d]){const u=parseInt(c,10);if(u>=r&&(!s||u<t))for(const h in A[d][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const o=this._styleMap[e];super._setStyleDeclaration(o.line,o.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),o=[];for(let s=0;s<r.wordsData.length;s++)o.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,o}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let o=0;return{wordsData:e.map((s,i)=>{let a=0;const A=t?this.graphemeSplit(s):this.wordSplit(s);return A.length===0?[{word:[],width:0}]:A.map(d=>{const c=t?[d]:this.graphemeSplit(d),u=this._measureWord(c,i,a);return o=Math.max(u,o),a+=c.length+r.length,{word:c,width:u}})}),largestWordWidth:o}}_measureWord(e,t){let r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let i=0,a=e.length;i<a;i++)s+=this._getGraphemeBox(e[i],t,i+o,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:o,wordsData:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),A=this.splitByGrapheme,d=[],c=A?"":" ";let u=0,h=[],f=0,g=0,m=!0;t-=i;const y=Math.max(t,o,this.dynamicMinWidth),_=s[e];let C;for(f=0,C=0;C<_.length;C++){const{word:I,width:N}=_[C];f+=I.length,u+=g+N-a,u>y&&!m?(d.push(h),h=[],u=N,m=!0):u+=a,m||A||h.push(c),h=h.concat(I),g=A?0:this._measureWord([c],e,f),f++,m=!1}return C&&d.push(h),o+i>this.dynamicMinWidth&&(this.dynamicMinWidth=o-a+i),d}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=r[s].join("");return t.lines=o,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const o=this._styleMap[t].line;e.set("".concat(o),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Xe(ZA,"type","Textbox"),Xe(ZA,"textLayoutProperties",[...ba.textLayoutProperties,"width"]),Xe(ZA,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),er.setClass(ZA);class Zw extends Ag{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:o,group:s}=r;if(!o||!this.shouldPerformLayout(e))return;const{width:i,height:a}=za(AB(r,o)),A=new _t(i,a);if(o.absolutePositioned)return{center:Sd(o.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:A};{const d=o.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new _t,correction:u=new _t}=this.calcBoundingBox(t,e)||{};return{center:c.add(d),correction:u.subtract(d),size:A}}return{center:r.getRelativeCenterPoint().add(d),size:A}}}}Xe(Zw,"type","clip-path"),er.setClass(Zw);class ey extends Ag{getInitialSize(e,t){let{target:r}=e,{size:o}=t;return new _t(r.width||o.x,r.height||o.y)}}Xe(ey,"type","fixed"),er.setClass(ey);class qU extends Eu{subscribeTargets(e){const t=e.target;e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((o,s)=>(s.parent&&o.add(s.parent),o),new Set).forEach(o=>{!r.some(s=>s.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[t]})})}}class el extends sl{static getDefaults(){return Je(Je({},super.getDefaults()),el.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,el.ownDefaults),this.setOptions(t);const{left:r,top:o,layoutManager:s}=t;this.groupInit(e,{left:r,top:o,layoutManager:s??new qU})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(o=>{const s=this._objects.findIndex(a=>a.isInFrontOf(o)),i=s===-1?this.size():s;this.insertAt(i,o)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(yA("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(o=>{const{parent:s}=o;s&&r.add(s)}),e===P1?r.forEach(o=>{o._onAfterObjectsChange(mp,t)}):r.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o=Je(Je({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,o);super._renderControls(e,t),e.restore()}}Xe(el,"type","ActiveSelection"),Xe(el,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),er.setClass(el),er.setClass(el,"activeSelection");class KU{constructor(){Xe(this,"resources",{})}applyFilters(e,t,r,o,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,o);const a={sourceWidth:r,sourceHeight:o,imageData:i.getImageData(0,0,r,o),originalEl:t,originalImageData:i.getImageData(0,0,r,o),canvasEl:s,ctx:i,filterBackend:this};e.forEach(d=>{d.applyTo(a)});const{imageData:A}=a;return A.width===r&&A.height===o||(s.width=A.width,s.height=A.height),i.putImageData(A,0,0),a}}class EB{constructor(){let{tileSize:e=$r.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xe(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Xe(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Wi({width:e,height:t}),o=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)}applyFilters(e,t,r,o,s,i){const a=this.gl,A=s.getContext("2d");if(!a||!A)return;let d;i&&(d=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:a,sourceTexture:this.createTexture(a,r,o,d?void 0:t),targetTexture:this.createTexture(a,r,o),originalTexture:d||this.createTexture(a,r,o,d?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),e.forEach(h=>{h&&h.applyTo(c)}),function(h){const f=h.targetCanvas,g=f.width,m=f.height,y=h.destinationWidth,_=h.destinationHeight;g===y&&m===_||(f.width=y,f.height=_)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(u),A.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,o,s){const{NEAREST:i,TEXTURE_2D:a,RGBA:A,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,m=e.createTexture();return e.bindTexture(a,m),e.texParameteri(a,u,s||i),e.texParameteri(a,h,s||i),e.texParameteri(a,f,c),e.texParameteri(a,g,c),o?e.texImage2D(a,0,A,A,d,o):e.texImage2D(a,0,A,t,r,0,A,d,null),m}getCachedTexture(e,t,r){const{textureCache:o}=this;if(o[e])return o[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(o[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,o=t.targetCanvas,s=o.getContext("2d");if(!s)return;s.translate(0,o.height),s.scale(1,-1);const i=r.height-o.height;s.drawImage(r,0,i,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),o=t.destinationWidth,s=t.destinationHeight,i=o*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,i),A=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,a);const d=new ImageData(A,o,s);r.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(t.renderer=o.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let x0;function $U(){const{WebGLProbe:n}=Gi();return n.queryWebGL(xi()),$r.enableGLFiltering&&n.isSupported($r.textureSize)?new EB({tileSize:$r.textureSize}):new KU}function z0(){return!x0&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(x0=$U()),x0}const VU=["filters","resizeFilter","src","crossOrigin","type"],FB=["cropX","cropY"];class ns extends Bo{static getDefaults(){return Je(Je({},super.getDefaults()),ns.ownDefaults)}constructor(e,t){super(),Xe(this,"_lastScaleX",1),Xe(this,"_lastScaleY",1),Xe(this,"_filterScalingX",1),Xe(this,"_filterScalingY",1),this.filters=[],Object.assign(this,ns.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(bA()),this.setElement(typeof e=="string"?(this.canvas&&wi(this.canvas.getElement())||Xd()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(ns.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=z0(!1);t instanceof EB&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Gi().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Je(Je({},super.toObject([...FB,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,o=-this.height/2;let s=[],i=[],a="",A="";if(!t)return[];if(this.hasCrop()){const d=bA();s.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(A=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(o-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(A).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,i=['	<rect x="'.concat(r,'" y="').concat(o,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return s=this.paintFirst!==ho?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mf(e,{crossOrigin:t,signal:r}).then(o=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(o)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);const a=Wi(i),{width:A,height:d}=i;this._element=a,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,z0().applyFilters([e],i,A,d,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=Wi({width:r,height:o});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1);z0().applyFilters(e,this._originalElement,r,o,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,o=this._filterScalingY,s=this.width,i=this.height,a=Math.max(this.cropX,0),A=Math.max(this.cropY,0),d=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=a*r,h=A*o,f=Math.min(s*r,d-u),g=Math.min(i*o,c-h),m=-s/2,y=-i/2,_=Math.min(s,d/r-a),C=Math.min(i,c/o-A);t&&e.drawImage(t,u,h,f,g,m,y,_,C)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=FF(this.preserveAspectRatio||""),t=this.width,r=this.height,o={width:t,height:r};let s,i=this._element.width,a=this._element.height,A=1,d=1,c=0,u=0,h=0,f=0;return!e||e.alignX===vs&&e.alignY===vs?(A=t/i,d=r/a):(e.meetOrSlice==="meet"&&(A=d=JI(this._element,o),s=(t-i*A)/2,e.alignX==="Min"&&(c=-s),e.alignX==="Max"&&(c=s),s=(r-a*d)/2,e.alignY==="Min"&&(u=-s),e.alignY==="Max"&&(u=s)),e.meetOrSlice==="slice"&&(A=d=ZI(this._element,o),s=i-t/A,e.alignX==="Mid"&&(h=s/2),e.alignX==="Max"&&(h=s),s=a-r/d,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),i=t/A,a=r/d)),{width:i,height:a,scaleX:A,scaleY:d,offsetLeft:c,offsetTop:u,cropX:h,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:o,src:s,crossOrigin:i,type:a}=e,A=Qn(e,VU);return Promise.all([Mf(s,Je(Je({},t),{},{crossOrigin:i})),r&&zu(r,t),o&&zu([o],t),og(A,t)]).then(d=>{let[c,u=[],[h]=[],f={}]=d;return new this(c,Je(Je({},A),{},{src:s,filters:u,resizeFilter:h},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return Mf(e,{crossOrigin:t,signal:r}).then(s=>new this(s,o))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const o=Ta(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"],t,o).catch(s=>(yA("log","Unable to parse Image",s),null))}}Xe(ns,"type","Image"),Xe(ns,"cacheProperties",[...Qa,...FB]),Xe(ns,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Xe(ns,"CSS_CANVAS","canvas-img"),Xe(ns,"ATTRIBUTE_NAMES",[...CA,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),er.setClass(ns),er.setSVGClass(ns);ig(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const dg=n=>n.webgl!==void 0,k1="precision highp float",GU=`
    `.concat(k1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),WU=["type"],XU=["type"],YU=new RegExp(k1,"g");class fo{get type(){return this.constructor.type}constructor(){let e=Qn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},WU);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return GU}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=Gi();o!=="highp"&&(t=t.replace(YU,k1.replace("highp",o)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!i||!a)throw new Ni("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Ni("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Ni("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(a,s),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Ni('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const A=this.getUniformLocations(e,a)||{};return A.uStepW=e.getUniformLocation(a,"uStepW"),A.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:A}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,o={};for(let s=0;s<r.length;s++)o[r[s]]=e.getUniformLocation(t,r[s]);return o}sendAttributeData(e,t,r){const o=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,o=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===o||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,o)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){dg(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,o=Wi({width:t,height:r});e.helpLayer=o}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Je({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Qn(e,XU))}}Xe(fo,"type","BaseFilter"),Xe(fo,"uniformLocations",[]);const JU={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class qh extends fo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(JU[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Os(this.color).getSource(),o=this.alpha,s=r[0]*o,i=r[1]*o,a=r[2]*o,A=1-o;for(let d=0;d<t.length;d+=4){const c=t[d],u=t[d+1],h=t[d+2];let f,g,m;switch(this.mode){case"multiply":f=c*s/255,g=u*i/255,m=h*a/255;break;case"screen":f=255-(255-c)*(255-s)/255,g=255-(255-u)*(255-i)/255,m=255-(255-h)*(255-a)/255;break;case"add":f=c+s,g=u+i,m=h+a;break;case"difference":f=Math.abs(c-s),g=Math.abs(u-i),m=Math.abs(h-a);break;case"subtract":f=c-s,g=u-i,m=h-a;break;case"darken":f=Math.min(c,s),g=Math.min(u,i),m=Math.min(h,a);break;case"lighten":f=Math.max(c,s),g=Math.max(u,i),m=Math.max(h,a);break;case"overlay":f=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,g=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,m=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255;break;case"exclusion":f=s+c-2*s*c/255,g=i+u-2*i*u/255,m=a+h-2*a*h/255;break;case"tint":f=s+c*A,g=i+u*A,m=a+h*A}t[d]=f,t[d+1]=g,t[d+2]=m}}sendUniformData(e,t){const r=new Os(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Xe(qh,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Xe(qh,"type","BlendColor"),Xe(qh,"uniformLocations",["uColor"]),er.setClass(qh);const ZU={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},eQ=["type","image"];class Kh extends fo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return ZU[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:o},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=xi());const a=s.blendImage,A=a.getContext("2d");a.width!==r||a.height!==o?(a.width=r,a.height=o):A.clearRect(0,0,r,o),A.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),A.drawImage(i.getElement(),0,0,r,o);const d=A.getImageData(0,0,r,o).data;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],f=t[c+2],g=t[c+3],m=d[c],y=d[c+1],_=d[c+2],C=d[c+3];switch(this.mode){case"multiply":t[c]=u*m/255,t[c+1]=h*y/255,t[c+2]=f*_/255,t[c+3]=g*C/255;break;case"mask":t[c+3]=C}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Je(Je({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:o}=e,s=Qn(e,eQ);return ns.fromObject(o,t).then(i=>new this(Je(Je({},s),{},{image:i})))}}Xe(Kh,"type","BlendImage"),Xe(Kh,"defaults",{mode:"multiply",alpha:1}),Xe(Kh,"uniformLocations",["uTransformMatrix","uImage"]),er.setClass(Kh);class $h extends fo{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){dg(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:o}}=e;const{width:s,height:i}=r;o.blurLayer1||(o.blurLayer1=xi(),o.blurLayer2=xi());const a=o.blurLayer1,A=o.blurLayer2;a.width===s&&a.height===i||(A.width=a.width=s,A.height=a.height=i);const d=a.getContext("2d"),c=A.getContext("2d"),u=15,h=.06*this.blur*.5;let f,g,m,y;for(d.putImageData(r,0,0),c.clearRect(0,0,s,i),y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,m=h*g*s+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,m,f),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);for(y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,m=h*g*i+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,f,m),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);t.drawImage(a,0,0);const _=t.getImageData(0,0,a.width,a.height);return d.globalAlpha=1,d.clearRect(0,0,a.width,a.height),_}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Xe($h,"type","Blur"),Xe($h,"defaults",{blur:0}),Xe($h,"uniformLocations",["uDelta"]),er.setClass($h);class Vh extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let o=0;o<t.length;o+=4)t[o]+=r,t[o+1]+=r,t[o+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Xe(Vh,"type","Brightness"),Xe(Vh,"defaults",{brightness:0}),Xe(Vh,"uniformLocations",["uBrightness"]),er.setClass(Vh);const IB={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class vd extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,o=this.colorsOnly;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],A=t[s+2];if(t[s]=i*r[0]+a*r[1]+A*r[2]+255*r[4],t[s+1]=i*r[5]+a*r[6]+A*r[7]+255*r[9],t[s+2]=i*r[10]+a*r[11]+A*r[12]+255*r[14],!o){const d=t[s+3];t[s]+=d*r[3],t[s+1]+=d*r[8],t[s+2]+=d*r[13],t[s+3]=i*r[15]+a*r[16]+A*r[17]+d*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,o),e.uniform4fv(t.uConstants,s)}toObject(){return Je(Je({},super.toObject()),{},{matrix:[...this.matrix]})}}function wl(n,e){var t;const r=(Xe(t=class extends vd{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Xe(t,"defaults",{colorsOnly:!1,matrix:e}),t);return er.setClass(r,n),r}Xe(vd,"type","ColorMatrix"),Xe(vd,"defaults",IB),Xe(vd,"uniformLocations",["uColorMatrix","uConstants"]),er.setClass(vd);wl("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);wl("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);wl("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);wl("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);wl("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);wl("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);wl("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class ty extends fo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){dg(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>er.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Xe(ty,"type","Composed"),er.setClass(ty);class Gh extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=o*(t[s]-128)+128,t[s+1]=o*(t[s+1]-128)+128,t[s+2]=o*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Xe(Gh,"type","Contrast"),Xe(Gh,"defaults",{contrast:0}),Xe(Gh,"uniformLocations",["uContrast"]),er.setClass(Gh);const tQ={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Wh extends fo{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return tQ[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,o=this.matrix,s=Math.round(Math.sqrt(o.length)),i=Math.floor(s/2),a=t.width,A=t.height,d=e.ctx.createImageData(a,A),c=d.data,u=this.opaque?1:0;let h,f,g,m,y,_,C,I,N,k,W,V,H;for(W=0;W<A;W++)for(k=0;k<a;k++){for(y=4*(W*a+k),h=0,f=0,g=0,m=0,H=0;H<s;H++)for(V=0;V<s;V++)C=W+H-i,_=k+V-i,C<0||C>=A||_<0||_>=a||(I=4*(C*a+_),N=o[H*s+V],h+=r[I]*N,f+=r[I+1]*N,g+=r[I+2]*N,u||(m+=r[I+3]*N));c[y]=h,c[y+1]=f,c[y+2]=g,c[y+3]=u?r[y+3]:m}e.imageData=d}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Je(Je({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Xe(Wh,"type","Convolute"),Xe(Wh,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Xe(Wh,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),er.setClass(Wh);const UB="Gamma";class Xh extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,o=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let A=0;A<256;A++)a.r[A]=255*Math.pow(A/255,o),a.g[A]=255*Math.pow(A/255,s),a.b[A]=255*Math.pow(A/255,i);for(let A=0;A<t.length;A+=4)t[A]=a.r[t[A]],t[A+1]=a.g[t[A+1]],t[A+2]=a.b[t[A+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:UB,gamma:this.gamma.concat()}}}Xe(Xh,"type",UB),Xe(Xh,"defaults",{gamma:[1,1,1]}),Xe(Xh,"uniformLocations",["uGamma"]),er.setClass(Xh);const rQ={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Yh extends fo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2];switch(this.mode){case"average":r=(s+i+a)/3;break;case"lightness":r=(Math.min(s,i,a)+Math.max(s,i,a))/2;break;case"luminosity":r=.21*s+.72*i+.07*a}t[o+2]=t[o+1]=t[o]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return rQ[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Xe(Yh,"type","Grayscale"),Xe(Yh,"defaults",{mode:"average"}),Xe(Yh,"uniformLocations",["uMode"]),er.setClass(Yh);const nQ=Je(Je({},IB),{},{rotation:0});class C0 extends vd{calculateMatrix(){const e=this.rotation*Math.PI,t=Ea(e),r=Fa(e),o=1/3,s=Math.sqrt(o)*r,i=1-t;this.matrix=[t+i/3,o*i-s,o*i+s,0,0,o*i+s,t+o*i,o*i-s,0,0,o*i-s,o*i+s,t+o*i,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Xe(C0,"type","HueRotation"),Xe(C0,"defaults",nQ),er.setClass(C0);class Jh extends fo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Xe(Jh,"type","Invert"),Xe(Jh,"defaults",{alpha:!1,invert:!0}),Xe(Jh,"uniformLocations",["uInvert","uAlpha"]),er.setClass(Jh);class Zh extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let o=0;o<t.length;o+=4){const s=(.5-Math.random())*r;t[o]+=s,t[o+1]+=s,t[o+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Xe(Zh,"type","Noise"),Xe(Zh,"defaults",{noise:0}),Xe(Zh,"uniformLocations",["uNoise","uSeed"]),er.setClass(Zh);class ef extends fo{applyTo2d(e){let{imageData:{data:t,width:r,height:o}}=e;for(let s=0;s<o;s+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const a=4*s*r+4*i,A=t[a],d=t[a+1],c=t[a+2],u=t[a+3];for(let h=s;h<Math.min(s+this.blocksize,o);h++)for(let f=i;f<Math.min(i+this.blocksize,r);f++){const g=4*h*r+4*f;t[g]=A,t[g+1]=d,t[g+2]=c,t[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Xe(ef,"type","Pixelate"),Xe(ef,"defaults",{blocksize:4}),Xe(ef,"uniformLocations",["uBlocksize"]),er.setClass(ef);class tf extends fo{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,o=new Os(this.color).getSource(),s=[o[0]-r,o[1]-r,o[2]-r],i=[o[0]+r,o[1]+r,o[2]+r];for(let a=0;a<t.length;a+=4){const A=t[a],d=t[a+1],c=t[a+2];A>s[0]&&d>s[1]&&c>s[2]&&A<i[0]&&d<i[1]&&c<i[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new Os(this.color).getSource(),o=this.distance,s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],i=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}Xe(tf,"type","RemoveColor"),Xe(tf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Xe(tf,"uniformLocations",["uLow","uHigh"]),er.setClass(tf);class rf extends fo{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),o=new Array(r);for(let s=1;s<=r;s++)o[s-1]=e(s*t);return o}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,o)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(o,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(o,`];
              sum += 2.0 * uTaps[`).concat(o,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){dg(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;const s=t.width,i=t.height,a=Math.round(s*r),A=Math.round(i*o);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,i,a,A):this.resizeType==="hermite"?this.hermiteFastResize(e,s,i,a,A):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,i,a,A):this.resizeType==="lanczos"?this.lanczosResize(e,s,i,a,A):new ImageData(a,A),e.imageData=d}sliceByTwo(e,t,r,o,s){const i=e.imageData,a=.5;let A=!1,d=!1,c=t*a,u=r*a;const h=e.filterBackend.resources;let f=0,g=0;const m=t;let y=0;h.sliceByTwo||(h.sliceByTwo=xi());const _=h.sliceByTwo;(_.width<1.5*t||_.height<r)&&(_.width=1.5*t,_.height=r);const C=_.getContext("2d");for(C.clearRect(0,0,1.5*t,r),C.putImageData(i,0,0),o=Math.floor(o),s=Math.floor(s);!A||!d;)t=c,r=u,o<Math.floor(c*a)?c=Math.floor(c*a):(c=o,A=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,d=!0),C.drawImage(_,f,g,t,r,m,y,c,u),f=m,g=y,y+=u;return C.getImageData(f,g,o,s)}lanczosResize(e,t,r,o,s){const i=e.imageData.data,a=e.ctx.createImageData(o,s),A=a.data,d=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(c*this.lanczosLobes/2),m=Math.ceil(u*this.lanczosLobes/2),y={},_={x:0,y:0},C={x:0,y:0};return function I(N){let k,W,V,H,J,xe,M,O,X,te,le;for(_.x=(N+.5)*c,C.x=Math.floor(_.x),k=0;k<s;k++){for(_.y=(k+.5)*u,C.y=Math.floor(_.y),J=0,xe=0,M=0,O=0,X=0,W=C.x-g;W<=C.x+g;W++)if(!(W<0||W>=t)){te=Math.floor(1e3*Math.abs(W-_.x)),y[te]||(y[te]={});for(let ne=C.y-m;ne<=C.y+m;ne++)ne<0||ne>=r||(le=Math.floor(1e3*Math.abs(ne-_.y)),y[te][le]||(y[te][le]=d(Math.sqrt(Math.pow(te*h,2)+Math.pow(le*f,2))/1e3)),V=y[te][le],V>0&&(H=4*(ne*t+W),J+=V,xe+=V*i[H],M+=V*i[H+1],O+=V*i[H+2],X+=V*i[H+3]))}H=4*(k*o+N),A[H]=xe/J,A[H+1]=M/J,A[H+2]=O/J,A[H+3]=X/J}return++N<o?I(N):a}(0)}bilinearFiltering(e,t,r,o,s){let i,a,A,d,c,u,h,f,g,m,y,_,C,I=0;const N=this.rcpScaleX,k=this.rcpScaleY,W=4*(t-1),V=e.imageData.data,H=e.ctx.createImageData(o,s),J=H.data;for(h=0;h<s;h++)for(f=0;f<o;f++)for(c=Math.floor(N*f),u=Math.floor(k*h),g=N*f-c,m=k*h-u,C=4*(u*t+c),y=0;y<4;y++)i=V[C+y],a=V[C+4+y],A=V[C+W+y],d=V[C+W+4+y],_=i*(1-g)*(1-m)+a*g*(1-m)+A*m*(1-g)+d*g*m,J[I++]=_;return H}hermiteFastResize(e,t,r,o,s){const i=this.rcpScaleX,a=this.rcpScaleY,A=Math.ceil(i/2),d=Math.ceil(a/2),c=e.imageData.data,u=e.ctx.createImageData(o,s),h=u.data;for(let f=0;f<s;f++)for(let g=0;g<o;g++){const m=4*(g+f*o);let y=0,_=0,C=0,I=0,N=0,k=0,W=0;const V=(f+.5)*a;for(let H=Math.floor(f*a);H<(f+1)*a;H++){const J=Math.abs(V-(H+.5))/d,xe=(g+.5)*i,M=J*J;for(let O=Math.floor(g*i);O<(g+1)*i;O++){let X=Math.abs(xe-(O+.5))/A;const te=Math.sqrt(M+X*X);te>1&&te<-1||(y=2*te*te*te-3*te*te+1,y>0&&(X=4*(O+H*t),W+=y*c[X+3],C+=y,c[X+3]<255&&(y=y*c[X+3]/250),I+=y*c[X],N+=y*c[X+1],k+=y*c[X+2],_+=y))}}h[m]=I/_,h[m+1]=N/_,h[m+2]=k/_,h[m+3]=W/C}return u}}Xe(rf,"type","Resize"),Xe(rf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Xe(rf,"uniformLocations",["uDelta","uTaps"]),er.setClass(rf);class nf extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a);t[o]+=A!==s?(A-s)*r:0,t[o+1]+=A!==i?(A-i)*r:0,t[o+2]+=A!==a?(A-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Xe(nf,"type","Saturation"),Xe(nf,"defaults",{saturation:0}),Xe(nf,"uniformLocations",["uSaturation"]),er.setClass(nf);class of extends fo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a),d=(s+i+a)/3,c=2*Math.abs(A-d)/255*r;t[o]+=A!==s?(A-s)*c:0,t[o+1]+=A!==i?(A-i)*c:0,t[o+2]+=A!==a?(A-a)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Xe(of,"type","Vibrance"),Xe(of,"defaults",{vibrance:0}),Xe(of,"uniformLocations",["uVibrance"]),er.setClass(of);Bo.prototype.toObject=function(n){return function(e=[]){return n.call(this,["data",...e])}}(Bo.prototype.toObject);class QB{constructor(e,t){this.currentScale=1,this.SNAP_THRESHOLD=10,this.resizeTimeout=null,this.originalWidth=t.width,this.originalHeight=t.height,this.aspectRatio=this.originalHeight/this.originalWidth,this.containerElement=t.containerElement,this.containerElement.style.height=`${this.containerElement.offsetWidth*this.aspectRatio}px`,this.canvas=new Rv(e,{width:this.originalWidth,height:this.originalHeight,controlsAboveOverlay:!0,preserveObjectStacking:!0,selection:!0}),this.setupResizeObserver(),this.setupSnapBehavior(),this.setupSelectionBehavior()}toOriginalCoordinate(e){return e/this.currentScale}toScaledCoordinate(e){return e*this.currentScale}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.containerElement)}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.updateCanvasSize(),this.canvas.requestRenderAll()},100)}updateCanvasSize(){const e=this.containerElement.offsetWidth,t=this.canvas.backgroundImage?this.canvas.backgroundImage.height/this.canvas.backgroundImage.width:this.canvas.overlayImage?this.canvas.overlayImage.height/this.canvas.overlayImage.width:this.aspectRatio,r=e*t;this.containerElement.style.height=`${r}px`;const o=e/this.originalWidth;this.currentScale=o,this.canvas.setDimensions({width:e,height:r}),this.canvas.setViewportTransform([o,0,0,o,0,0]),this.canvas.requestRenderAll()}setupSnapBehavior(){this.canvas.on("object:moving",e=>{var A;const t=e.target;if(!t||((A=t.data)==null?void 0:A.editType)==="print")return;const o=this.canvas.getObjects().filter(d=>{var c;return((c=d.data)==null?void 0:c.editType)==="print"});let s=null,i=null;const a={left:t.left/this.currentScale,right:(t.left+t.width*t.scaleX)/this.currentScale,top:t.top,bottom:t.top+t.height*t.scaleY,centerX:t.left+t.width*t.scaleX/2,centerY:t.top+t.height*t.scaleY/2};for(const d of o){const c={left:d.left/this.currentScale,right:(d.left+d.width*d.scaleX)/this.currentScale,top:d.top,bottom:d.top+d.height*d.scaleY,centerX:d.left+d.width*d.scaleX/2,centerY:d.top+d.height*d.scaleY/2};Math.abs(a.left-c.left)<this.SNAP_THRESHOLD?s=c.left:Math.abs(a.right-c.right)<this.SNAP_THRESHOLD?s=c.right-t.width*t.scaleX:Math.abs(a.centerX-c.centerX)<this.SNAP_THRESHOLD&&(s=c.centerX-t.width*t.scaleX/2),Math.abs(a.top-c.top)<this.SNAP_THRESHOLD?i=c.top:Math.abs(a.bottom-c.bottom)<this.SNAP_THRESHOLD?i=c.bottom-t.height*t.scaleY:Math.abs(a.centerY-c.centerY)<this.SNAP_THRESHOLD&&(i=c.centerY-t.height*t.scaleY/2)}s!==null&&t.set("left",s),i!==null&&t.set("top",i)})}setupSelectionBehavior(){this.canvas.on("selection:created",e=>{var r,o;const t=(r=e.selected)==null?void 0:r[0];((o=t==null?void 0:t.data)==null?void 0:o.editType)==="print"&&this.canvas.discardActiveObject()}),this.canvas.on("mouse:down",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&t.data.objectId&&this.onPrintAreaClick&&this.onPrintAreaClick(t.data.objectId)}),this.canvas.on("mouse:over",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="pointer")}),this.canvas.on("mouse:out",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="default")})}setPrintAreaClickListener(e){this.onPrintAreaClick=e}async setCanvasJSON(e){console.log("json",e),await this.canvas.loadFromJSON(e),this.canvas.requestRenderAll()}addEditableArea(e){if(e.type==="rect"){const t=new mi({left:e.properties.x,top:e.properties.y,width:e.properties.width,height:e.properties.height,fill:"rgba(0,216,255,0.3)",stroke:"rgba(0,203,239,1)",strokeWidth:1,cornerStyle:"circle",transparentCorners:!1,cornerColor:"rgba(0,203,239,0.5)",cornerSize:10,lockRotation:!0,hasControls:!0,data:{editType:e.properties.editType,objectId:e.properties.objectId}});return this.canvas.add(t),this.canvas.requestRenderAll(),t}}removeObject(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(this.canvas.remove(r),this.canvas.requestRenderAll())}setSelectionListener(e){this.canvas.on("selection:created",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:updated",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:cleared",()=>e(null))}zoomToPoint(e,t){const s=Math.min(Math.max(t,.1),3),i=new _t(e.x,e.y);this.canvas.zoomToPoint(i,s),this.canvas.requestRenderAll()}getCurrentScale(){return this.currentScale}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.canvas.dispose()}getCanvas(){return this.canvas}getObjects(){return this.canvas.getObjects()}getCanvasJson(){return this.canvas.toJSON()}getCanvasImage(){return this.canvas.toDataURL({format:"png",quality:1,multiplier:1})}async setImage(e){return new Promise((t,r)=>{const o=new Image;o.onload=()=>{const s={width:o.width,height:o.height,dataUrl:e},i=800;let a=o.width,A=o.height;(a>i||A>i)&&(a>A?(A=i*A/a,a=i):(a=i*a/A,A=i));const d=document.createElement("canvas");d.width=a,d.height=A;const c=d.getContext("2d");c==null||c.drawImage(o,0,0,a,A);const u=d.toDataURL("image/jpeg",.9);ns.fromURL(u,{crossOrigin:"anonymous"}).then(h=>{const f=this.canvas.getWidth(),g=this.canvas.getHeight(),m=A/a,y=g/f;m>y?h.scaleToHeight(g):h.scaleToWidth(f),this.canvas.getObjects().filter(C=>{var I;return((I=C.data)==null?void 0:I.editType)==="print"}).forEach(async C=>{const I=C;I.absolutePositioned=!0,I.fill="transparent";const N=C.width/h.width,k=C.height/h.height,W=Math.max(N,k),V=h.width*W,H=h.height*W;h.left=C.left+(C.width-V)/2,h.top=C.top+(C.height-H)/2,h.scaleToWidth(V),h.scaleToHeight(H),h.clipPath=I}),this.canvas.add(h),this.canvas.requestRenderAll(),t({thumbnail:{width:a,height:A,dataUrl:u},original:s})}).catch(r)},o.onerror=()=>{r(new Error("  "))},o.src=e})}async setOverlay(e){try{const t=await ns.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.overlayImage=t,this.canvas.renderAll()}catch(t){throw console.error("     :",t),t}}async setBackground(e){try{const t=await ns.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.backgroundImage=t,this.canvas.requestRenderAll()}catch(t){throw console.error("     :",t),t}}async setBackgroundOverlaySize(e){const t=this.containerElement.offsetWidth,r=t*(e.height/e.width);this.originalWidth=t,this.originalHeight=r,this.aspectRatio=r/t,this.containerElement.style.height=`${r}px`,e.scaleToWidth(t),e.scaleToHeight(r),e.set({top:0,left:0,originX:"left",originY:"top"})}updateObjectDisabled(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(r.set("fill","#cccccc"),r.set("opacity",.5),r.set("stroke","#cccccc"),r.set("strokeWidth",0),r.set("evented",!1)),this.canvas.requestRenderAll()}updateAllObjectEnabled(){this.canvas.getObjects().forEach(t=>{t.set("fill","rgba(0,216,255,0.3)"),t.set("opacity",1),t.set("stroke","rgba(0,203,239,1)"),t.set("strokeWidth",1),t.set("evented",!0)}),this.canvas.requestRenderAll()}}async function oQ(n,e="estimates",t){try{console.log("   :",{name:n.name,size:n.size,type:n.type,folder:e});const r=aQ(n);if(!r.isValid)return console.error("   :",r.errors),{success:!1,error:r.errors.join(", ")};const o=Date.now(),s=Math.random().toString(36).substring(2,8),i=AQ(n.name),a=`${o}_${s}_${i}`,A=`${e}/${a}`;console.log("   :",{fileName:a,filePath:A});const{data:d,error:c}=await pt.storage.from("uploads").upload(A,n,{cacheControl:"3600",upsert:!1});if(c)return console.error(" Storage  :",c),{success:!1,error:`  : ${c.message}`};console.log(" Storage  :",d);const{data:u}=pt.storage.from("uploads").getPublicUrl(A);if(!u.publicUrl)return console.error("  URL  "),{success:!1,error:"  URL  ."};console.log("  URL  :",u.publicUrl);const h={id:s,name:n.name,size:n.size,type:n.type,url:u.publicUrl,path:A,uploadedAt:new Date().toISOString()};return console.log("   :",h),{success:!0,file:h}}catch(r){return console.error("      :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}async function sQ(n,e="estimates",t){console.log("    :",{count:n.length,folder:e});const r=[];for(let s=0;s<n.length;s++){const i=n[s];console.log(`  ${s+1}/${n.length}  :`,i.name);const a=await oQ(i,e);if(r.push(a),t){const A=s+1,d=n.length,c=Math.round(A/d*100);t(A,d,c)}a.success||console.warn(`    (${s+1}/${n.length}):`,{fileName:i.name,error:a.error})}const o=r.filter(s=>s.success).length;return console.log("    :",{total:n.length,success:o,failed:n.length-o}),r}async function iQ(n){try{console.log("   :",n);const{error:e}=await pt.storage.from("uploads").remove([n]);return e?(console.error("   :",e),!1):(console.log("   :",n),!0)}catch(e){return console.error("    :",e),!1}}async function ry(n,e,t){try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e,fileCount:t.length});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("object_id",e).single();if(o&&o.code!=="PGRST116")return console.error("    :",o),{success:!1,error:`   : ${o.message}`};const s={files:t,updatedAt:new Date().toISOString(),totalFiles:t.length,totalSize:t.reduce((i,a)=>i+a.size,0)};if(r){const{error:i}=await pt.from("estimate_simple_prints").update({uploaded_files:s,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)return console.error("   :",i),{success:!1,error:`  : ${i.message}`};console.log("    :",r.id)}else{const{error:i}=await pt.from("estimate_simple_prints").insert({estimate_id:n,object_id:e,title:` ${e}`,print_method:"file-upload",uploaded_files:s,price:0,original_price:0,discount_amount:0});if(i)return console.error("    :",i),{success:!1,error:`   : ${i.message}`};console.log("    ")}return{success:!0}}catch(r){return console.error(" estimate_simple_prints   :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}function aQ(n){const e=[];n.size>52428800&&e.push(`   .  50MB  . (: ${Math.round(n.size/1024/1024)}MB)`);const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/postscript","application/illustrator","image/vnd.adobe.photoshop"],o=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".eps",".ai",".psd"],s=n.name.toLowerCase(),i=o.some(A=>s.endsWith(A)),a=r.includes(n.type);return!i&&!a&&e.push("   . ( : JPG, PNG, GIF, PDF, AI, EPS, PSD, SVG)"),n.name.length>255&&e.push("  . 255  ."),{isValid:e.length===0,errors:e}}function AQ(n){return n.replace(/[^-a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"")}function lQ(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}async function dQ(n,e){var t;try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("uploaded_files, file_metadata").eq("estimate_id",n).eq("object_id",e).single();if(o)return o.code==="PGRST116"?{success:!0,files:[]}:(console.error("    :",o),{success:!1,files:[],error:`   : ${o.message}`});const s=r==null?void 0:r.uploaded_files;let i=(s==null?void 0:s.files)||[];return console.log(" DB  :",{hasUploadedFiles:!!s,uploadedFilesType:typeof s,uploadedFilesHasFiles:!!(s!=null&&s.files),uploadedFilesLength:((t=s==null?void 0:s.files)==null?void 0:t.length)||0,hasFileMetadata:!!(r!=null&&r.file_metadata),fileMetadataType:typeof(r==null?void 0:r.file_metadata),fileMetadataLength:Array.isArray(r==null?void 0:r.file_metadata)?r.file_metadata.length:0}),i.length===0&&(r!=null&&r.file_metadata)&&(console.log(" uploaded_files  - file_metadata  "),i=(Array.isArray(r.file_metadata)?r.file_metadata:[]).map(A=>({id:Math.random().toString(36).substring(2,8),name:A.name||"",size:A.size||0,type:A.type||"",url:A.url||"#",path:A.path||"",uploadedAt:new Date().toISOString()})),console.log(" file_metadata   :",{fileCount:i.length,files:i.map(A=>({name:A.name,hasUrl:A.url!=="#"}))})),console.log("    :",{fileCount:i.length,source:i.length>0&&(s!=null&&s.files)?"uploaded_files":"file_metadata"}),{success:!0,files:i}}catch(r){return console.error("     :",r),{success:!1,files:[],error:r instanceof Error?r.message:"    ."}}}var cQ=Y('<div class="odz-absolute -odz-top-2 -odz-right-2 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),uQ=Y('<button><!> <div class="odz-text-center"><span> </span></div></button>'),hQ=Y('<div class="odz-mt-3 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><svg class="odz-w-4 odz-h-4 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-w-full odz-bg-blue-200 odz-rounded-full odz-h-2"><div class="odz-bg-blue-600 odz-h-2 odz-rounded-full odz-transition-all odz-duration-300"></div></div></div>'),fQ=Y('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-red-700"> </span></div>'),pQ=Y('<a target="_blank" rel="noopener noreferrer" class="odz-p-1 odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></a>'),gQ=Y('<button class="odz-p-1 odz-text-gray-400 odz-cursor-not-allowed odz-rounded" disabled title="  .   ."><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg></button>'),vQ=Y('<div class="odz-flex odz-items-center odz-justify-between odz-bg-white odz-border odz-border-gray-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-min-w-0 odz-flex-1"><svg class="odz-w-4 odz-h-4 odz-text-gray-500 odz-flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <div class="odz-min-w-0 odz-flex-1"><p class="odz-text-sm odz-font-medium odz-text-gray-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div> <div class="odz-flex odz-items-center odz-gap-2"><!> <button class="odz-p-1 odz-text-red-600 hover:odz-text-red-800 hover:odz-bg-red-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),mQ=Y('<div class="odz-mt-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-green-700"> </span></div> <div class="odz-space-y-2"></div></div>'),wQ=Y('<div class="odz-flex odz-items-center odz-gap-1 odz-text-xs odz-text-gray-600 odz-bg-gray-50 odz-px-2 odz-py-1 odz-rounded odz-min-w-0"><span class="odz-flex-shrink-0"></span> <span class="odz-truncate odz-min-w-0"> </span> <span class="odz-flex-shrink-0"> </span></div>'),yQ=Y('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-mt-2 odz-space-y-1"></div>',1),bQ=Y(`<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><span class="odz-text-white odz-font-bold odz-text-sm"></span></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800"> </h3> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <button class="odz-w-8 odz-h-8 odz-flex odz-items-center odz-justify-center odz-text-gray-400 hover:odz-text-red-500
                                   hover:odz-bg-red-50 odz-rounded-full odz-transition-all odz-duration-200" aria-label="  "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-mb-6"><div class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3"> </div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div></div> <div class="odz-mb-4"><label class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3">  </label> <div class="odz-relative"><input type="file" multiple accept="image/*,.pdf,.ai,.eps" class="odz-absolute odz-inset-0 odz-w-full odz-h-full odz-opacity-0 odz-cursor-pointer"> <div class="odz-bg-white odz-border-2 odz-border-dashed odz-border-gray-300 odz-rounded-xl odz-p-6
                                       hover:odz-border-red-300 hover:odz-bg-red-50 odz-transition-colors odz-duration-200"><div class="odz-text-center"><svg class="odz-w-8 odz-h-8 odz-text-gray-400 odz-mx-auto odz-mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <p class="odz-text-sm odz-text-gray-600 odz-mb-1">   </p> <p class="odz-text-xs odz-text-gray-500">, PDF, AI, EPS  </p></div></div></div> <!> <!> <!> <!></div></div>`),_Q=Y('<div class="odz-mt-2 odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3 odz-h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span> </span></div>'),BQ=Y(`<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"></div> <div class="odz-mt-6"><div class="odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><div class="odz-w-8 odz-h-8 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800">  </h3> <p class="odz-text-sm odz-text-gray-600">    </p></div></div> <textarea class="odz-w-full odz-h-24 odz-p-4 odz-border-2 odz-border-gray-200 odz-rounded-xl
                           odz-resize-none odz-text-sm odz-text-gray-700
                           focus:odz-border-blue-400 focus:odz-ring-2 focus:odz-ring-blue-100 focus:odz-outline-none
                           placeholder:odz-text-gray-400 odz-transition-all odz-duration-200" placeholder=":    ,     ,     "></textarea> <!></div></div></div>`),xQ=Y('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>      .</p></div></div>'),zQ=Y('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">  <span class="odz-text-sm odz-font-normal odz-text-gray-500">   .</span></h1> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas></div> <p class="odz-text-sm odz-text-gray-500 odz-mt-4">          .</p></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function CQ(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=()=>Gr(ks,"$shopStore",t);let i=vt(e,"productId",8),a=vt(e,"estimateId",8,void 0);vt(e,"idx",8,void 0);let A=vt(e,"onComplete",8),d=vt(e,"onCancel",8,()=>{}),c=null,u=[],h=Ue(),f=Ue(),g=Ue(),m=Ue([]),y=Ue(!1);Fn(async()=>{let E=!1;try{await Promise.race([_(),new Promise((P,T)=>setTimeout(()=>T(new Error("  timeout (10)")),1e4))]),E=!0}catch{}try{E&&(await Oi(),await new Promise(P=>setTimeout(P,100))),await C()}catch{}const U=P=>{P.detail.productId===i()&&(console.log(" SimplePrint   :",i()),k())};return window.addEventListener("saveSimplePrintState",U),()=>{window.removeEventListener("saveSimplePrintState",U)}}),Qo(()=>{try{if(l(m).length>0){const E=l(m).map(T=>({objectId:T.objectId,title:T.title,printMethod:T.printMethod,savedFileInfo:T.savedFileInfo||T.uploadedFiles.map(R=>({name:R.name,size:R.size,type:R.type,url:R.url,path:R.path}))})),U=o().estimateId||"temp",P=`simplePrint_${i()}_${U}`;sessionStorage.setItem(P,JSON.stringify(E))}}catch{}l(g)&&l(g).destroy()});async function _(){await Oi();let E=0;const U=50;for(;E<U&&!l(f);)await new Promise(P=>setTimeout(P,100)),E++;if(!l(f))throw new Error("    .");try{if(c=await S5(i(),s().id),c!=null&&c.id&&(u=await E5(c.id)),c!=null&&c.canvas_json){const P=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,T=P.backgroundImage.width*P.backgroundImage.scaleX,R=P.backgroundImage.height*P.backgroundImage.scaleY;b(g,new QB(l(f),{width:T,height:R,containerElement:l(h)})),l(g).setPrintAreaClickListener(async q=>{W(q)}),await l(g).setCanvasJSON(P),await new Promise(q=>setTimeout(q,200))}}catch(P){throw P}}async function C(){var E,U;if(l(g)){let P=0;const T=30;for(;P<T;){try{if((((U=(E=l(g)).getObjects)==null?void 0:U.call(E))||[]).length>0)break}catch{}P++,await new Promise(R=>setTimeout(R,100))}}try{const P=a()||o().estimateId||"temp",T=P!=="temp";let R=[];const q=`simplePrint_${i()}_${P}`,j=sessionStorage.getItem(q);j&&(R=JSON.parse(j)),R&&Array.isArray(R)&&R.length>0&&(b(y,!0),b(m,R.map(Ae=>({objectId:Ae.objectId,title:Ae.title,printMethod:Ae.printMethod||"",uploadedFiles:[],savedFileInfo:Ae.savedFileInfo||[]}))),await I(),l(g)&&(await Oi(),await new Promise(Ae=>setTimeout(Ae,50)),V()),b(y,!1))}catch{b(y,!1)}}async function I(){for(const E of l(m))try{if(o().estimateId){const U=await dQ(o().estimateId,E.objectId);if(U.success&&U.files.length>0){b(m,l(m).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:U.files}:P));continue}}if(E.savedFileInfo&&E.savedFileInfo.length>0){const U=E.savedFileInfo.map(P=>({id:Math.random().toString(36).substring(2,8),name:P.name,size:P.size,type:P.type,url:P.url||"#",path:P.path||"",uploadedAt:new Date().toISOString()}));b(m,l(m).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:U}:P))}}catch{if(E.savedFileInfo&&E.savedFileInfo.length>0){const P=E.savedFileInfo.map(T=>({id:Math.random().toString(36).substring(2,8),name:T.name,size:T.size,type:T.type,url:T.url||"#",path:T.path||"",uploadedAt:new Date().toISOString()}));b(m,l(m).map(T=>T.objectId===E.objectId?{...T,uploadedFiles:P}:T))}}}async function N(E,U){try{if(!await iQ(U.path))throw new Error("Storage   .");if(b(m,l(m).map(T=>{var R;return T.objectId===E?{...T,uploadedFiles:T.uploadedFiles.filter(q=>q.id!==U.id),savedFileInfo:(R=T.savedFileInfo)==null?void 0:R.filter(q=>q.name!==U.name)}:T})),o().estimateId){const T=l(m).find(R=>R.objectId===E);T&&await ry(o().estimateId,E,T.uploadedFiles)}k()}catch(P){b(m,l(m).map(T=>T.objectId===E?{...T,uploadError:`  : ${P instanceof Error?P.message:"   "}`}:T)),setTimeout(()=>{b(m,l(m).map(T=>T.objectId===E?{...T,uploadError:void 0}:T))},3e3)}}function k(){if(!l(y))try{const E=l(m).map(T=>({objectId:T.objectId,title:T.title,printMethod:T.printMethod,savedFileInfo:T.savedFileInfo||T.uploadedFiles.map(R=>({name:R.name,size:R.size,type:R.type,url:R.url,path:R.path}))})),U=o().estimateId||"temp",P=`simplePrint_${i()}_${U}`;if(sessionStorage.setItem(P,JSON.stringify(E)),typeof window<"u")try{const T=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.saveCurrentState"}});window.dispatchEvent(T)}catch{}}catch{}}function W(E){if(l(m).find(q=>q.objectId===E))return;const P=u.find(q=>q.object_id===E),T=P?P.title:`${E} `,R={objectId:E,title:T,printMethod:"",uploadedFiles:[],isUploading:!1,uploadProgress:0,uploadError:void 0,savedFileInfo:[]};b(m,[...l(m),R]),V(),k()}function V(){if(l(g))try{l(g).updateAllObjectEnabled(),l(m).forEach(E=>{l(g).updateObjectDisabled(E.objectId)})}catch{}}function H(E){if(b(m,l(m).filter(U=>U.objectId!==E)),It.cancelPrint(o().index,E),V(),k(),typeof window<"u")try{const U=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.removePrintFromArea"}});window.dispatchEvent(U)}catch{}}function J(E,U){if(b(m,l(m).map(P=>P.objectId===E?{...P,printMethod:U}:P)),k(),typeof window<"u")try{const P=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.updatePrintMethod"}});window.dispatchEvent(P)}catch{}}async function xe(E,U){const P=Array.from(U);b(m,l(m).map(T=>T.objectId===E?{...T,isUploading:!0,uploadProgress:0,uploadError:void 0}:T));try{const T=await sQ(P,`estimates/${o().estimateId||"temp"}`,(Ae,Ee,_e)=>{b(m,l(m).map(Oe=>Oe.objectId===E?{...Oe,uploadProgress:_e}:Oe))}),R=T.filter(Ae=>Ae.success&&Ae.file).map(Ae=>Ae.file),q=T.filter(Ae=>!Ae.success);if(R.length>0&&o().estimateId){const Ae=await ry(o().estimateId,E,R);if(!Ae.success)throw new Error(Ae.error||"  .")}const j=P.map(Ae=>({name:Ae.name,size:Ae.size,type:Ae.type}));if(b(m,l(m).map(Ae=>Ae.objectId===E?{...Ae,uploadedFiles:R,isUploading:!1,uploadProgress:100,uploadError:q.length>0?`${q.length}   `:void 0,savedFileInfo:j}:Ae)),k(),typeof window<"u")try{const Ae=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.handleFileUpload"}});window.dispatchEvent(Ae)}catch{}if(q.length>0){const Ae=q.map(Ee=>Ee.error).join(", ")}}catch(T){b(m,l(m).map(R=>R.objectId===E?{...R,isUploading:!1,uploadProgress:0,uploadError:T instanceof Error?T.message:"  ."}:R))}}function M(E){const P=E.target.value;It.update(T=>({...T,uploadMemo:P}))}Jt(()=>(l(m),l(g),l(y)),()=>{l(m)&&l(g)&&!l(y)&&V()}),to(),Rr();var O=zQ(),X=z(w(O),2),te=w(X),le=w(te),ne=w(le);ss(ne,E=>b(f,E),()=>l(f)),ss(le,E=>b(h,E),()=>l(h));var Be=z(te,2),Z=w(Be);{var se=E=>{var U=BQ(),P=w(U),T=z(w(P),2),R=z(w(T),2),q=w(R),j=z(P,2);Yt(j,5,()=>l(m),Ar,(D,ie,me)=>{var pe=bQ(),oe=w(pe),ye=w(oe),Ne=w(ye),we=w(Ne);we.textContent=me+1;var Fe=z(Ne,2),ue=w(Fe),De=w(ue),Pe=z(ye,2),he=z(oe,2),ee=z(w(he),2);Yt(ee,4,()=>["","","",""," "],Ar,(Ve,At)=>{var Ke=uQ();const nt=dt(()=>l(ie).printMethod===At);var ht=w(Ke);{var mt=Ft=>{var xt=cQ();L(Ft,xt)};ze(ht,Ft=>{l(nt)&&Ft(mt)})}var St=z(ht,2),st=w(St),tt=w(st);He(()=>{Cr(Ke,`odz-group odz-relative odz-bg-white odz-border-2 odz-rounded-xl odz-p-3 odz-transition-all odz-duration-200
                                           ${(l(nt)?"odz-border-red-400 odz-bg-gradient-to-br odz-from-red-50 odz-to-rose-50 odz-shadow-md odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md hover:odz-scale-[1.02]")??""}`),Cr(st,`odz-text-sm odz-font-semibold ${(l(nt)?"odz-text-red-700":"odz-text-gray-700")??""}`),Le(tt,At)}),at("click",Ke,()=>J(l(ie).objectId,At)),L(Ve,Ke)});var ge=z(he,2),Se=w(ge),Me=z(Se,2),Qe=w(Me),ot=z(Me,2);{var Ye=Ve=>{var At=hQ(),Ke=w(At),nt=z(w(Ke),2),ht=w(nt),mt=z(Ke,2),St=w(mt);He(()=>{Le(ht,`  ... ${l(ie).uploadProgress||0}%`),rr(St,"style",`width: ${l(ie).uploadProgress||0}%`)}),L(Ve,At)};ze(ot,Ve=>{l(ie).isUploading&&Ve(Ye)})}var Ce=z(ot,2);{var de=Ve=>{var At=fQ(),Ke=z(w(At),2),nt=w(Ke);He(()=>Le(nt,l(ie).uploadError)),L(Ve,At)};ze(Ce,Ve=>{l(ie).uploadError&&Ve(de)})}var Te=z(Ce,2);{var qe=Ve=>{var At=mQ(),Ke=w(At),nt=z(w(Ke),2),ht=w(nt),mt=z(Ke,2);Yt(mt,5,()=>l(ie).uploadedFiles,Ar,(St,st)=>{var tt=vQ(),Ft=w(tt),xt=z(w(Ft),2),Ot=w(xt),Ze=w(Ot),wt=z(Ot,2),gt=w(wt),Dt=z(Ft,2),qt=w(Dt);{var zt=Ct=>{var Et=pQ();He(()=>rr(Et,"href",l(st).url)),L(Ct,Et)},Mt=Ct=>{var Et=gQ();L(Ct,Et)};ze(qt,Ct=>{l(st).url&&l(st).url!=="#"?Ct(zt):Ct(Mt,!1)})}var jt=z(qt,2);He(Ct=>{rr(Ot,"title",l(st).name),Le(Ze,l(st).name),Le(gt,Ct)},[()=>lQ(l(st).size)],dt),at("click",jt,()=>N(l(ie).objectId,l(st))),L(St,tt)}),He(()=>Le(ht,`${l(ie).uploadedFiles.length??""}  `)),L(Ve,At)};ze(Te,Ve=>{l(ie).uploadedFiles.length>0&&Ve(qe)})}var je=z(Te,2);{var Re=Ve=>{var At=yQ(),Ke=ft(At),nt=z(w(Ke),2),ht=w(nt),mt=z(Ke,2);Yt(mt,5,()=>l(ie).savedFileInfo,Ar,(St,st)=>{var tt=wQ(),Ft=z(w(tt),2),xt=w(Ft),Ot=z(Ft,2),Ze=w(Ot);He(wt=>{rr(Ft,"title",l(st).name),Le(xt,l(st).name),Le(Ze,`(${wt??""}KB)`)},[()=>Math.round(l(st).size/1024)],dt),L(St,tt)}),He(()=>Le(ht,`  ${l(ie).savedFileInfo.length??""}    (  )`)),L(Ve,At)};ze(je,Ve=>{l(ie).savedFileInfo&&l(ie).savedFileInfo.length>0&&l(ie).uploadedFiles.length===0&&Ve(Re)})}He(()=>{Le(De,l(ie).title),rr(Se,"for",`file-upload-${l(ie).objectId??""}`),rr(Qe,"id",`file-upload-${l(ie).objectId??""}`)}),at("click",Pe,()=>H(l(ie).objectId)),at("change",Qe,Ve=>xe(l(ie).objectId,Ve.target.files)),L(D,pe)});var Ae=z(j,2),Ee=w(Ae),_e=z(w(Ee),2),Oe=z(_e,2);{var G=D=>{var ie=_Q(),me=z(w(ie),2),pe=w(me);He(oe=>Le(pe,`${oe??""} `),[()=>o().uploadMemo.trim().length],dt),L(D,ie)};ze(Oe,D=>{o().uploadMemo&&o().uploadMemo.trim().length>0&&D(G)})}He(()=>Le(q,`${l(m).length??""}  `)),yr(_e,()=>o().uploadMemo,D=>Kt(It,lt(o).uploadMemo=D,lt(o))),at("input",_e,M),L(E,U)},ce=E=>{var U=xQ();L(E,U)};ze(Z,E=>{l(m).length>0?E(se):E(ce,!1)})}var be=z(X,2),x=w(be),F=z(x,2);at("click",x,function(...E){var U;(U=d())==null||U.apply(this,E)}),at("click",F,function(...E){var U;(U=A())==null||U.apply(this,E)}),L(n,O),Mr(),r()}const au="uploads";function SQ(n){try{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e||e.length!==3)return console.error("Invalid base64 data URL format"),null;const t=e[1],r=e[2],o=atob(r),s=new Array(o.length);for(let A=0;A<o.length;A++)s[A]=o.charCodeAt(A);const i=new Uint8Array(s);return{blob:new Blob([i],{type:t}),contentType:t}}catch(e){return console.error("Error converting base64 to Blob:",e),null}}function EQ(n){const e=n.lastIndexOf("."),t=e>0?n.substring(0,e):n,r=e>0?n.substring(e):"";let o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"").replace(/_{2,}/g,"_").replace(/^_|_$/g,"").substring(0,200);o||(o=`file_${Date.now()}`);const s=r.replace(/[^\x00-\x7F]/g,"").toLowerCase();return o+s}async function FQ(n,e){var t;try{let r,o,s={};if(n instanceof File)o=n,s.contentType=n.type;else if(typeof n=="string"&&n.startsWith("data:")){const a=SQ(n);if(!a)throw new Error("Failed to convert base64 string to Blob.");o=a.blob,s.contentType=a.contentType}else throw new Error("Invalid data type provided. Must be a File object or a base64 data URL string.");if(console.log(`Uploading to bucket: ${au}, path: ${e}, contentType: ${s.contentType}`),r=await pt.storage.from(au).upload(e,o,{cacheControl:"3600",upsert:!0,contentType:s.contentType}),r.error)throw console.error("Supabase upload error:",r.error),r.error;if(!((t=r.data)!=null&&t.path))throw new Error("Upload successful but no path returned.");const{data:i}=pt.storage.from(au).getPublicUrl(r.data.path);return i!=null&&i.publicUrl?(console.log("File uploaded successfully:",i.publicUrl),i.publicUrl):(console.warn("Could not get public URL after upload."),null)}catch(r){return console.error("Error in uploadImage function:",r),null}}async function IQ(n){if(!n)return console.error("deleteImage: filePath is required."),!1;console.log(`Attempting to delete file from bucket: ${au}, path: ${n}`);try{const{data:e,error:t}=await pt.storage.from(au).remove([n]);if(t)throw console.error("Supabase delete error:",t),t;return e&&e.length>0?(console.log(`File deleted successfully: ${n}`),!0):(console.warn(`File deletion response for ${n} was successful but no data returned. It might have already been deleted or the path was incorrect.`),!0)}catch(e){return console.error("Error in deleteImage function:",e),!1}}var UQ=Y('<th class="odz-bg-base-200"> </th>'),QQ=Y('<td><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder=" "></td>'),TQ=Y('<tr><td><input type="checkbox" class="odz-checkbox"></td><th class="odz-text-sm odz-font-normal odz-whitespace-nowrap"> </th><!></tr>'),LQ=Y('<td><div class="odz-flex odz-gap-1"><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder="  "> <button class="odz-btn odz-btn-secondary odz-btn-sm"></button></div></td>'),PQ=Y('<div class="odz-overflow-x-auto odz-mt-4"><table class="odz-table odz-table-zebra odz-w-full"><thead><tr><th class="odz-bg-base-200 odz-w-10"><input type="checkbox" class="odz-checkbox"></th><th class="odz-bg-base-200"></th><!></tr></thead><tbody><!><tr class="odz-bg-base-100"><td colspan="2" class="odz-font-bold">  </td><!></tr></tbody></table> <div class="odz-mt-4"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>');function kQ(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=Ue(),i=Ue(),a=Ue(),A=Ue();let d=vt(e,"onComplete",8,()=>{}),c=vt(e,"nameSheet",28,()=>({})),u=Ue({});Fn(()=>{b(u,JSON.parse(JSON.stringify(c())))});let h=Ue({}),f=Ue({});function g(ne){const Be={...l(h)};l(a).forEach(Z=>{Be[Z.id]=ne}),b(h,Be)}function m(ne){const Be=l(f)[ne]||"",Z={...l(u)};l(a).forEach(se=>{l(h)[se.id]&&(Z[se.title]||(Z[se.title]={}),Z[se.title][l(y)[ne]||ne]=Be)}),b(u,Z)}let y=Ue({});function _(ne,Be,Z,se,ce){l(u)[Be]||fr(u,l(u)[Be]={}),fr(u,l(u)[Be][se]=ce)}function C(){l(a).forEach(ne=>{l(u)[ne.title]||fr(u,l(u)[ne.title]={}),l(A).forEach(Be=>{const Z=l(y)[Be.objectId]||Be.objectId;l(u)[ne.title][Z]===void 0&&fr(u,l(u)[ne.title][Z]="")})}),c(JSON.parse(JSON.stringify(l(u)))),console.log("  :",c()),d()(c())}Jt(()=>o(),()=>{b(s,o().products[o().index])}),Jt(()=>l(s),()=>{var ne;b(i,((ne=l(s))==null?void 0:ne.variants)||[])}),Jt(()=>l(i),()=>{b(a,[...l(i)].sort((ne,Be)=>ne.title.localeCompare(Be.title)))}),Jt(()=>l(s),()=>{var ne;b(A,((ne=l(s))==null?void 0:ne.prints)||[])}),Jt(()=>(l(A),l(y),lp),()=>{l(A)&&l(A).length>0&&l(A).forEach(async ne=>{if(ne.objectId&&!l(y)[ne.objectId])try{const Be=await lp(ne.objectId);b(y,{...l(y),[ne.objectId]:(Be==null?void 0:Be.title)||ne.objectId})}catch{b(y,{...l(y),[ne.objectId]:ne.objectId})}})}),Jt(()=>(l(a),l(A),l(u),l(y),Cn(c())),()=>{if(l(a).length>0&&l(A).length>0){const ne={...l(u)};l(a).forEach(Be=>{ne[Be.title]||(ne[Be.title]={}),l(A).forEach(Z=>{var ce;const se=l(y)[Z.objectId]||Z.objectId;ne[Be.title][se]===void 0&&(ne[Be.title][se]=((ce=c()[Be.title])==null?void 0:ce[se])||"")})}),b(u,ne)}}),Jt(()=>(l(a),l(h)),()=>{l(a)&&l(a).length>0&&l(a).forEach(ne=>{l(h)[ne.id]===void 0&&b(h,{...l(h),[ne.id]:!0})})}),to(),Rr();var I=PQ(),N=w(I),k=w(N),W=w(k),V=w(W),H=w(V),J=z(V,2);Yt(J,1,()=>l(A),Ar,(ne,Be)=>{var Z=UQ(),se=w(Z);He(()=>Le(se,l(y)[l(Be).objectId]||l(Be).objectId)),L(ne,Z)});var xe=z(k),M=w(xe);Yt(M,1,()=>l(a),Ar,(ne,Be)=>{var Z=TQ(),se=w(Z),ce=w(se),be=z(se),x=w(be),F=z(be);Yt(F,1,()=>l(A),Ar,(E,U)=>{var P=QQ(),T=w(P);He(()=>{var R;return Wm(T,((R=l(u)[l(Be).title])==null?void 0:R[l(y)[l(U).objectId]||l(U).objectId])||"")}),at("input",T,R=>_(l(Be).id,l(Be).title,l(U).objectId,l(y)[l(U).objectId]||l(U).objectId,R.target.value)),L(E,P)}),He(()=>Le(x,l(Be).title)),mv(ce,()=>l(h)[l(Be).id],E=>fr(h,l(h)[l(Be).id]=E)),L(ne,Z)});var O=z(M),X=z(w(O));Yt(X,1,()=>l(A),Ar,(ne,Be)=>{var Z=LQ(),se=w(Z),ce=w(se),be=z(ce,2);yr(ce,()=>l(f)[l(Be).objectId],x=>fr(f,l(f)[l(Be).objectId]=x)),at("click",be,()=>m(l(Be).objectId)),L(ne,Z)});var te=z(N,2),le=w(te);He(ne=>vu(H,ne),[()=>Object.values(l(h)).every(ne=>ne)],dt),at("change",H,ne=>g(ne.target.checked)),at("click",le,C),L(n,I),Mr(),r()}var OQ=Y('<span class="odz-text-info odz-inline-flex odz-items-center odz-gap-1"><!>  ...</span>'),DQ=Y('<span class="odz-text-success"> </span>'),NQ=Y('<span class="odz-text-error"> </span>'),MQ=Y('<span class="odz-text-gray-500"> </span>'),HQ=Y('<a target="_blank" rel="noopener noreferrer" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50" aria-label=" " title="   "><!></a>'),jQ=Y('<div class="odz-flex odz-items-center odz-gap-4 odz-p-3 odz-bg-base-200 odz-rounded-lg odz-relative"><div class="odz-flex-1 odz-min-w-0"><p class="odz-font-medium odz-truncate"> </p> <p class="odz-text-sm odz-text-base-content/70"><!> <!></p></div> <!> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" aria-label=" "><!></button></div>'),RQ=Y('<div class="odz-mt-4 odz-flex odz-flex-col odz-gap-2"></div>'),qQ=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),KQ=Y('<label for="nameSheet" class="odz-label odz-label-text odz-text-sm odz-mt-4 odz-ml-4 odz-font-bold">       .</label> <div class="odz-card-actions odz-p-4 odz-justify-start"><button class="odz-btn odz-btn-secondary odz-min-w-32"> </button></div> <!>',1),$Q=Y("<!>  ...",1),VQ=Y("<!>  ...",1),GQ=Y('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base"> </h2> <div role="presentation"><div class="odz-flex odz-flex-col odz-items-center odz-gap-4"><svg xmlns="http://www.w3.org/2000/svg" class="odz-w-12 odz-h-12 odz-text-base-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <div class="odz-text-base-content"><p class="odz-font-medium">   </p> <label class="odz-btn odz-btn-primary odz-btn-sm odz-mt-2">  <input type="file" multiple class="odz-hidden" accept="image/*"></label></div></div></div> <!> <h2 class="odz-card-title odz-text-base odz-mt-4"> </h2> <textarea name="" id="" rows="5" class="odz-textarea odz-text-sm odz-textarea-bordered odz-textarea-lg odz-w-full odz-mt-4"></textarea></div> <!> <div class="odz-card-actions odz-p-4 odz-justify-center"><button class="odz-btn odz-btn-primary odz-min-w-32"><!></button></div></div>');function WQ(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(ks,"$shopStore",t),s=Ue(),i=Ue(),a=Ue();let A=vt(e,"fileUploadTitle",8," "),d=vt(e,"callback",8),c=vt(e,"uploadMemo",12,""),u=vt(e,"initialFiles",24,()=>[]),h=vt(e,"useNameSheet",8,!1),f=vt(e,"nameSheet",28,()=>({})),g=Ue([]),m=Ue(),y=Ue(!1),_=Ue(!1),C=Ue(!1);async function I(q){const j=Array.from(q);for(const Ae of j){const Ee=crypto.randomUUID(),_e=EQ(Ae.name),Oe=`estimate-uploads/${o().id}/${Date.now()}-${_e}`,G={id:Ee,file:Ae,status:"uploading",path:Oe};b(g,[...l(g),G]);try{const D=await FQ(Ae,Oe);b(g,l(g).map(ie=>ie.id===Ee?{...ie,status:D?"uploaded":"error",url:D,error:D?null:"Upload failed to return URL"}:ie))}catch(D){console.error("Upload error for file:",Ae.name,D),b(g,l(g).map(ie=>ie.id===Ee?{...ie,status:"error",error:D.message||"Unknown upload error"}:ie))}}}function N(q){q.preventDefault(),b(y,!0)}function k(q){q.preventDefault(),b(y,!1)}function W(q){var Ae;q.preventDefault(),b(y,!1);const j=(Ae=q.dataTransfer)==null?void 0:Ae.files;j&&I(j)}function V(q){const j=q.target;j.files&&(I(j.files),j.value="")}async function H(q){const j=l(g).find(Ee=>Ee.id===q);if(!j)return;const Ae=[...l(g)];if(b(g,l(g).filter(Ee=>Ee.id!==q)),j.status==="uploaded"&&j.path)try{await IQ(j.path)||(console.warn(`Failed to delete file from storage: ${j.path}`),alert("   ."),b(g,Ae))}catch(Ee){console.error("Error deleting file from storage:",Ee),alert("     ."),b(g,Ae)}else j.status==="uploading"?console.log("Deleting an item that was still uploading."):console.log("Deleting an item not present in storage or in error state.")}function J(){b(_,!0);const q=l(g).filter(Ae=>Ae.status==="uploaded"&&Ae.url),j={uploadTitle:A(),uploadMemo:c(),files:q.map(Ae=>{var Ee;return{name:((Ee=Ae.file)==null?void 0:Ee.name)||Ae.initialName||"Unknown File",url:Ae.url}})};try{d()(j,f())}catch(Ae){console.error("Error executing callback:",Ae),alert("     .")}finally{b(_,!1)}}Fn(()=>{console.log("upload component mounted"),u()&&u().length>0&&b(g,u().map(q=>({id:q.path||crypto.randomUUID(),file:null,initialName:q.name,status:"uploaded",url:q.url,path:q.path,error:null})))}),Jt(()=>l(g),()=>{b(s,l(g).every(q=>q.status==="uploaded"||q.status==="error"))}),Jt(()=>l(g),()=>{b(i,l(g).some(q=>q.status==="error"))}),Jt(()=>l(g),()=>{b(a,l(g).some(q=>q.status==="uploading"))}),to(),Rr();var xe=GQ(),M=w(xe),O=z(w(M),2),X=w(O),te=z(w(X),2),le=z(w(te),2),ne=z(w(le));ss(ne,q=>b(m,q),()=>l(m));var Be=z(O,2);{var Z=q=>{var j=RQ();Yt(j,5,()=>l(g),Ae=>Ae.id,(Ae,Ee)=>{var _e=jQ(),Oe=w(_e),G=w(Oe),D=w(G),ie=z(G,2),me=w(ie);{var pe=Pe=>{var he=en();He(ee=>Le(he,`${ee??""} MB -`),[()=>(l(Ee).file.size/1024/1024).toFixed(2)],dt),L(Pe,he)};ze(me,Pe=>{l(Ee).file&&Pe(pe)})}var oe=z(me,2);{var ye=Pe=>{var he=OQ(),ee=w(he);xd(ee,{class:"odz-animate-spin odz-w-3 odz-h-3"}),L(Pe,he)},Ne=Pe=>{var he=kt(),ee=ft(he);{var ge=Me=>{var Qe=DQ();L(Me,Qe)},Se=Me=>{var Qe=kt(),ot=ft(Qe);{var Ye=de=>{var Te=NQ();He(()=>rr(Te,"title",l(Ee).error||"Unknown error")),L(de,Te)},Ce=de=>{var Te=MQ();L(de,Te)};ze(ot,de=>{l(Ee).status==="error"?de(Ye):de(Ce,!1)},!0)}L(Me,Qe)};ze(ee,Me=>{l(Ee).status==="uploaded"?Me(ge):Me(Se,!1)},!0)}L(Pe,he)};ze(oe,Pe=>{l(Ee).status==="uploading"?Pe(ye):Pe(Ne,!1)})}var we=z(Oe,2);{var Fe=Pe=>{var he=HQ(),ee=w(he);nE(ee,{class:"odz-w-5 odz-h-5"}),He(()=>rr(he,"href",l(Ee).url)),L(Pe,he)};ze(we,Pe=>{l(Ee).status==="uploaded"&&l(Ee).url&&Pe(Fe)})}var ue=z(we,2),De=w(ue);wu(De,{class:"odz-w-5 odz-h-5"}),He(()=>{var Pe;Le(D,((Pe=l(Ee).file)==null?void 0:Pe.name)||l(Ee).initialName||"Unknown File"),ue.disabled=l(Ee).status==="uploading"}),at("click",ue,()=>H(l(Ee).id)),L(Ae,_e)}),L(q,j)};ze(Be,q=>{l(g)&&l(g).length>0&&q(Z)})}var se=z(Be,2),ce=w(se),be=z(se,2),x=z(M,2);{var F=q=>{var j=KQ(),Ae=z(ft(j),2),Ee=w(Ae),_e=z(Ae,2);{var Oe=G=>{var D=qQ(),ie=w(D),me=w(ie),pe=w(me),oe=z(me,2);kQ(oe,{get nameSheet(){return f()},onComplete:ye=>{f(ye),b(C,!1)}}),at("click",pe,()=>b(C,!1)),L(G,D)};ze(_e,G=>{l(C)&&G(Oe)})}at("click",Ee,()=>b(C,!0)),L(q,j)};ze(x,q=>{h()&&q(F)})}var E=z(x,2),U=w(E),P=w(U);{var T=q=>{var j=en("");L(q,j)},R=q=>{var j=kt(),Ae=ft(j);{var Ee=Oe=>{var G=$Q(),D=ft(G);xd(D,{class:"odz-animate-spin odz-mr-2"}),L(Oe,G)},_e=Oe=>{var G=kt(),D=ft(G);{var ie=pe=>{var oe=VQ(),ye=ft(oe);xd(ye,{class:"odz-animate-spin odz-mr-2"}),L(pe,oe)},me=pe=>{var oe=en("");L(pe,oe)};ze(D,pe=>{l(a)?pe(ie):pe(me,!1)},!0)}L(Oe,G)};ze(Ae,Oe=>{l(_)?Oe(Ee):Oe(_e,!1)},!0)}L(q,j)};ze(P,q=>{l(g).length===0&&!l(_)&&!l(a)?q(T):q(R,!1)})}He(()=>{Cr(O,`odz-border-2 odz-border-dashed odz-rounded-lg odz-p-5 odz-text-center odz-mt-4 odz-transition-colors ${(l(y)?"odz-border-primary odz-bg-primary/5":"odz-border-base-300")??""}`),Le(ce,A()),rr(be,"placeholder",A()),U.disabled=l(_)||l(a)}),at("change",ne,V),at("dragover",O,N),at("dragleave",O,k),at("drop",O,W),yr(be,c),at("click",U,J),L(n,xe),Mr(),r()}async function XQ(n){const{data:e,error:t}=await pt.from("color_groups").select("*").eq("id",n).single();if(t)throw t;return e}var YQ=Y('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),JQ=Y('<div class="odz-tooltip odz-tooltip-secondary"><button><!></button></div>'),ZQ=Y('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2">  </h3> <div class="odz-flex odz-items-center odz-gap-2"><input type="color" class="odz-h-10 odz-w-10 odz-p-0.5 odz-rounded-full odz-cursor-pointer odz-border odz-border-base-300 [&amp;::-webkit-color-swatch-wrapper]:odz-p-0 [&amp;::-webkit-color-swatch]:odz-rounded-full [&amp;::-moz-color-swatch]:odz-rounded-full"> <input type="text" placeholder="   " class="odz-input odz-input-bordered odz-flex-1"> <button class="odz-btn odz-btn-primary"></button></div></div>'),eT=Y('<div class="odz-flex odz-items-center odz-gap-2 odz-bg-base-200 odz-rounded-full odz-px-3 odz-py-1"><div class="odz-w-4 odz-h-4 odz-rounded-full"></div> <span class="odz-text-sm"> </span> <button class="odz-btn odz-btn-ghost odz-btn-xs odz-rounded-full"></button></div>'),tT=Y('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),rT=Y('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base odz-mb-4">  <span class="odz-text-sm odz-font-normal"> </span></h2> <div class="odz-flex odz-flex-wrap odz-gap-2"></div> <!> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div> <!> <!>',1);function nT(n,e){Nr(e,!1);let t=vt(e,"colorGroupId",8,null),r=vt(e,"selectedTemplateId",8,null),o=vt(e,"callback",8),s=vt(e,"selectedColors",28,()=>[]),i=Ue(!1),a=Ue([]),A=Ue(0),d=Ue(!1),c=Ue("#000000"),u=Ue(""),h=Ue(!1),f=Ue("");async function g(){if(t()){b(i,!0);try{const Z=await XQ(t());b(a,(Z==null?void 0:Z.colors)||[]),b(d,(Z==null?void 0:Z.use_custom)||!1)}finally{b(i,!1)}}}async function m(){if(!r())return;const Z=await Vd(r());console.log({templateProduct:Z}),b(A,Math.max(...Z.template_product_variants.map(se=>se.color_count))),console.log({colorCount:l(A)})}function y(Z){if(s().findIndex(ce=>ce.hex===Z.hex)===-1){if(s().length>=l(A))return;s([...s(),Z])}else s(s().filter(ce=>ce.hex!==Z.hex))}function _(Z){const se=Z.replace("#",""),ce=parseInt(se.substr(0,2),16),be=parseInt(se.substr(2,2),16),x=parseInt(se.substr(4,2),16);return(ce*299+be*587+x*114)/1e3<128}function C(){if(s().length===0){b(h,!0),b(f,"  .");return}console.log("selectedColors",s()),o()(s())}Fn(async()=>{await g(),await m()}),Rr();var I=rT(),N=ft(I),k=w(N),W=w(k),V=z(w(W)),H=w(V),J=z(W,2);Yt(J,5,()=>l(a),Ar,(Z,se)=>{var ce=JQ(),be=w(ce),x=w(be);{var F=E=>{var U=YQ(),P=w(U);He(T=>rr(P,"stroke",T),[()=>_(l(se).hex)?"white":"black"],dt),L(E,U)};ze(x,E=>{s().some(U=>U.hex===l(se).hex)&&E(F)})}He(E=>{rr(ce,"data-tip",l(se).name),Cr(be,`odz-relative odz-w-10 odz-h-10 odz-rounded-full odz-transition-all odz-border hover:odz-scale-110 ${E??""}`),rr(be,"style",`background-color: ${l(se).hex??""};`)},[()=>s().some(E=>E.hex===l(se).hex)?"odz-border-primary odz-scale-110":"odz-border"],dt),at("click",be,()=>y(l(se))),L(Z,ce)});var xe=z(J,2);{var M=Z=>{var se=ZQ(),ce=z(w(se),2),be=w(ce),x=z(be,2),F=z(x,2);yr(be,()=>l(c),E=>b(c,E)),yr(x,()=>l(u),E=>b(u,E)),at("click",F,()=>{if(l(u).trim()){const E={name:l(u),hex:l(c)};y(E),b(u,""),b(c,"#000000")}}),L(Z,se)};ze(xe,Z=>{l(d)&&Z(M)})}var O=z(xe,2);{var X=Z=>{var se=tT(),ce=z(w(se),2);Yt(ce,5,s,Ar,(be,x)=>{var F=eT(),E=w(F),U=z(E,2),P=w(U),T=z(U,2);He(()=>{rr(E,"style",`background-color: ${l(x).hex??""};`),Le(P,l(x).name)}),at("click",T,()=>y(l(x))),L(be,F)}),L(Z,se)};ze(O,Z=>{s().length>0&&Z(X)})}var te=z(k,2),le=w(te),ne=z(N,2);Wd(ne,{get isLoading(){return l(i)}});var Be=z(ne,2);Gd(Be,{get isOpen(){return l(h)},set isOpen(Z){b(h,Z)},get message(){return l(f)},set message(Z){b(f,Z)},$$legacy:!0}),He(()=>Le(H,`(${s().length??""}/${l(A)??""}   .)`)),at("click",le,C),L(n,I),Mr()}var oT=Y('<li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"> </button></li>'),sT=Y('<div class="odz-text-sm odz-breadcrumbs odz-mb-6"><ul><li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"></button></li> <!></ul></div>'),iT=Y('<figure><img class="odz-h-48 odz-w-full odz-object-cover"></figure>'),aT=Y('<div class="odz-h-48 odz-bg-base-200 odz-flex odz-items-center odz-justify-center"><span class="odz-text-base-content/50"> </span></div>'),AT=Y('<p class="odz-text-sm odz-text-sm odz-text-base-content/70"> </p>'),lT=Y('<button class="odz-btn odz-btn-outline odz-w-full odz-mb-2"> </button>'),dT=Y('<div class="odz-card odz-bg-base-100 odz-shadow hover:odz-shadow-lg odz-rounded-lg odz-transition-shadow odz-cursor-pointer"><!> <div class="odz-card-body odz-p-5"><h2 class="odz-card-title odz-text-base"> </h2> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><!> <button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>'),cT=Y('<div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"></div>'),uT=Y('<div class="p-4"><h1 class="odz-text-2xl odz-font-bold odz-mb-6"> </h1> <!> <!></div> <!>',1);function hT(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t);let s=vt(e,"objectId",12),i=vt(e,"isTemplateModal",12),a=vt(e,"updateObjectDisabled",8),A=vt(e,"selectedPrintIndex",12),d=vt(e,"productId",8,null),c=vt(e,"estimateId",8,void 0),u=Ue(!1),h=Ue(null),f=Ue([]),g=Ue([]),m=Ue(!1),y=Ue(!1),_=Ue(null),C="",I=Ue({uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}}),N=null;function k(be){if(d()){const x=be.products.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===d()});if(x!==-1)return x}return be.index??0}async function W(be){var E,U;const x=await B5(be.id);if(b(f,await ju(be.id)),console.log("selectTemplate called:",{template:be,selectedPrintIndex:A()}),b(h,{...x}),l(h).is_last){b(m,l(h).use_file_upload),b(y,l(h).use_color),b(_,l(h).color_group_id);const P=await Vd(l(h).id),T=o(),R=k(T),q=T.products[R],j=A()!==null?(E=q==null?void 0:q.prints)==null?void 0:E[A()]:(U=q==null?void 0:q.prints)==null?void 0:U.find(Ae=>Ae.objectId===s());N={...j?{...j}:{},parentTemplates:l(f),template:{...be,templateProduct:P},objectId:s(),title:C},j!=null&&j.uploads?(fr(I,l(I).uploads=j.uploads),fr(I,l(I).nameSheet=j.nameSheet||{})):(fr(I,l(I).uploads=null),fr(I,l(I).nameSheet={})),j!=null&&j.colors?fr(I,l(I).colors=j.colors):fr(I,l(I).colors=null),l(m)||(N={...N,uploads:null,nameSheet:{}},fr(I,l(I).uploads=null),fr(I,l(I).nameSheet={})),l(y)||(N={...N,colors:null},fr(I,l(I).colors=null)),!l(m)&&!l(y)&&(await O(),M())}else{b(m,!1),b(y,!1);const P=await x5(be.id);b(g,P)}}async function V(){H()}async function H(){var be,x,F;b(u,!0),b(m,!1),b(y,!1),b(f,[]),N=null;try{if(A()!==null){const U=k(o()),P=o().products[U],T=(be=P==null?void 0:P.prints)==null?void 0:be[A()];T?(console.log({print:T}),T.uploads&&fr(I,l(I).uploads=T.uploads),T.colors&&fr(I,l(I).colors=T.colors),(x=T.uploads)!=null&&x.uploadMemo&&fr(I,l(I).uploadMemo=T.uploads.uploadMemo),T.nameSheet&&fr(I,l(I).nameSheet=T.nameSheet)):A(null)}const E=await lp(s());if(b(g,E.process_print_area_templates.map(({template:U})=>U)),C=E.title,A()!==null){const U=k(o()),P=o().products[U],T=(F=P==null?void 0:P.prints)==null?void 0:F[A()];T!=null&&T.template}}catch(E){console.error(E)}finally{console.log("isUpload",l(m)),b(u,!1)}}async function J(be,x){if(b(m,!1),fr(I,l(I).uploads=be),fr(I,l(I).nameSheet=x),!N){console.warn("selectUpload: pendingPrintData ");return}N={...N,uploads:be,nameSheet:x},l(y)===!1&&(await O(),M())}async function xe(be){if(b(y,!1),fr(I,l(I).colors=be),!N){console.warn("selectColor: pendingPrintData ");return}N={...N,colors:be},await O(),M()}function M(){!l(m)&&!l(y)&&(i(!1),s(null),N=null,b(I,{uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}})),a()()}async function O(){var x;if(!N)return;It.update(F=>{const E=k(F),U=[...F.products];if(!U[E])return F;const P=[...U[E].prints||[]];if(A()===null){const T=P.findIndex(R=>R.objectId===N.objectId);T!==-1?P[T]=N:P.push(N)}else P[A()]=N;return U[E]={...U[E],prints:P},{...F,products:U}});const be=k(o());if(await It.calculatePrintPrice(be),await new Promise(F=>setTimeout(F,50)),typeof window<"u"&&d())try{const F=((x=o().products[be])==null?void 0:x.prints)||[],E=c()||o().estimateId||"temp",U=`detailedPrint_${d()}_${E}`,P=JSON.stringify(F);window.sessionStorage.setItem(U,P),console.log(" Templates.svelte - SessionStorage :",{key:U,printsCount:F.length,productId:d(),estimateId:E,mode:c()?"Edit":"Create"});const T=new CustomEvent("detailedPrintUpdate",{detail:{productId:d(),timestamp:Date.now(),source:"Templates",estimateId:E}});window.dispatchEvent(T),console.log(" Templates.svelte -    :",{productId:d(),estimateId:E,timestamp:Date.now()})}catch(F){console.error(" Templates.svelte - SessionStorage  :",F)}console.log("Decision point - finalized",{selectedPrintIndex:A(),objectId:N.objectId}),N=null}Fn(async()=>{H()}),Rr();var X=uT(),te=ft(X),le=z(w(te),2);{var ne=be=>{var x=sT(),F=w(x),E=w(F),U=w(E),P=z(E,2);Yt(P,1,()=>l(f),Ar,(T,R)=>{var q=oT(),j=w(q),Ae=w(j);He(()=>Le(Ae,l(R).name)),at("click",j,A0(()=>W(l(R)))),L(T,q)}),at("click",U,A0(()=>V())),L(be,x)};ze(le,be=>{l(h)&&be(ne)})}var Be=z(le,2);{var Z=be=>{const x=dt(()=>{var P;return(P=l(h))==null?void 0:P.file_upload_title}),F=dt(()=>l(I).uploadMemo||""),E=dt(()=>{var P;return((P=l(I).uploads)==null?void 0:P.files)||[]}),U=dt(()=>{var P;return(P=l(h))==null?void 0:P.use_name_list});WQ(be,{get fileUploadTitle(){return l(x)},callback:J,get uploadMemo(){return l(F)},get initialFiles(){return l(E)},get nameSheet(){return l(I).nameSheet},get useNameSheet(){return l(U)}})},se=be=>{var x=kt(),F=ft(x);{var E=P=>{const T=dt(()=>{var q;return(q=l(h))==null?void 0:q.id}),R=dt(()=>l(I).colors||[]);nT(P,{get colorGroupId(){return l(_)},get selectedTemplateId(){return l(T)},callback:xe,get selectedColors(){return l(R)}})},U=P=>{var T=cT();Yt(T,5,()=>l(g),Ar,(R,q)=>{var j=dT(),Ae=w(j);{var Ee=we=>{var Fe=iT(),ue=w(Fe);He(()=>{rr(ue,"src",l(q).image_url),rr(ue,"alt",l(q).name)}),L(we,Fe)},_e=we=>{var Fe=aT();L(we,Fe)};ze(Ae,we=>{l(q).image_url?we(Ee):we(_e,!1)})}var Oe=z(Ae,2),G=w(Oe),D=w(G),ie=z(G,2);{var me=we=>{var Fe=AT(),ue=w(Fe);He(()=>Le(ue,l(q).description)),L(we,Fe)};ze(ie,we=>{l(q).description&&we(me)})}var pe=z(Oe,2),oe=w(pe);{var ye=we=>{var Fe=lT();at("click",Fe,A0(()=>window.open(l(q).detail_url,"_blank","width=800,height=600"))),L(we,Fe)};ze(oe,we=>{l(q).detail_url&&we(ye)})}var Ne=z(oe,2);He(()=>Le(D,l(q).name)),at("click",Ne,()=>W(l(q))),L(R,j)}),L(P,T)};ze(F,P=>{l(y)?P(E):P(U,!1)},!0)}L(be,x)};ze(Be,be=>{l(m)?be(Z):be(se,!1)})}var ce=z(te,2);Wd(ce,{get isLoading(){return l(u)},set isLoading(be){b(u,be)},$$legacy:!0}),L(n,X),Mr(),r()}var fT=Y('<div class="odz-alert odz-alert-error odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <button class="odz-btn odz-btn-sm odz-btn-outline"> </button></div>'),pT=Y('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-gray-600">  ...</span></div></div>'),gT=Y('<img class="odz-h-6 odz-w-6 odz-rounded-md odz-object-cover">'),vT=Y('<div class="odz-inline-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2"><!> <span class="odz-text-xs odz-font-medium odz-text-slate-700"> </span></div>'),mT=Y('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"> </p> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),wT=Y('<span class="odz-inline-flex odz-items-center odz-gap-1 odz-rounded-full odz-bg-slate-100 odz-px-2 odz-py-1"><span class="odz-h-3.5 odz-w-3.5 odz-rounded-full odz-border odz-border-slate-300"></span> <span class="odz-text-[11px] odz-text-slate-600"> </span></span>'),yT=Y('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-flex-wrap odz-gap-1.5"></div></div>'),bT=Y('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2 odz-text-xs odz-text-slate-600"><svg class="odz-h-3.5 odz-w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 9.828m-2.828-2.828L16 5l3 3-1.828 1.828m-2.828-2.828L9 5l3 3"></path></svg> <span> </span></div></div>'),_T=Y('<div class="odz-grid odz-gap-3 sm:odz-grid-cols-2"><!> <!></div>'),BT=Y('<div class="odz-rounded-2xl odz-border odz-border-slate-200 odz-bg-white odz-shadow-sm odz-transition-shadow hover:odz-shadow-md"><div class="odz-flex odz-items-start odz-justify-between odz-gap-4 odz-border-b odz-border-slate-100 odz-bg-slate-50 odz-rounded-t-2xl odz-px-5 odz-py-4"><div class="odz-space-y-1"><span class="odz-inline-flex odz-items-center odz-gap-2 odz-text-xs odz-font-semibold odz-text-slate-500"><span class="odz-inline-flex odz-h-5 odz-w-5 odz-items-center odz-justify-center odz-rounded-full odz-bg-slate-200 odz-text-[10px] odz-font-bold odz-text-slate-700"></span>  </span> <h3 class="odz-text-base odz-font-semibold odz-text-slate-900"> </h3></div> <div class="odz-flex odz-shrink-0 odz-items-center odz-gap-2"><button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button></div></div> <div class="odz-space-y-4 odz-p-5"><!> <!></div></div>'),xT=Y('<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-5"></div></div>'),zT=Y('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>         .</p></div></div>'),CT=Y('<div class="odz-mb-4"><h2 class="odz-text-lg odz-font-semibold"> </h2></div>'),ST=Y('<dialog id="detailed-print-template-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl max-h-100 overflow-y-auto"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!> <!></div></dialog>'),ET=Y('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">   <span class="odz-text-sm odz-font-normal odz-text-gray-500">     .</span></h1> <!> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas> <!></div> <p class="odz-text-sm odz-text-gray-500">         .</p></div></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div> <!>',1);function FT(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(ks,"$shopStore",t),s=()=>Gr(It,"$estimateStore",t);let i=vt(e,"productId",8),a=vt(e,"estimateId",8,void 0),A=vt(e,"onComplete",8),d=vt(e,"onCancel",8,()=>{}),c=null,u=[],h=Ue(),f=Ue(),g=Ue(),m=Ue(!0),y=Ue(null),_=Ue(!1),C=Ue(null),I=Ue(null),N=Ue(""),k=Ue(null),W=Ue([]),V=Ue(!1),H=Ue(""),J=Ue(!1),xe=Ue(null),M=Ue(""),O=Ue(null),X=Ue(!1),te=Ue(!1),le=Ue(!1);const ne=".main-estimate-modal-box";function Be(){if(typeof window<"u")try{const ge=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"DetailedPrint"}});window.dispatchEvent(ge),console.log(" DetailedPrint -    :",{productId:i(),timestamp:Date.now()})}catch(ge){console.error(" DetailedPrint -    :",ge)}}Fn(async()=>{try{await R(),await Z(),F()}finally{b(te,!0)}}),Qo(()=>{var ge;(ge=l(g))==null||ge.destroy(),T()});async function Z(){try{b(m,!0),b(y,null),await se(),await Oi(),F()}catch(ge){console.error("DetailedPrint initialize failed:",ge),b(y,ge instanceof Error?ge.message:"   .")}finally{b(m,!1)}}async function se(){await Oi();let ge=0;const Se=50;for(;!l(f)&&ge<Se;)await new Promise(Ye=>setTimeout(Ye,100)),ge++;if(!l(f))throw new Error("    .");if(c=await S5(i(),o().id),c!=null&&c.id&&(u=await E5(c.id)),!(c!=null&&c.canvas_json))throw new Error("    .");const Me=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,Qe=Me.backgroundImage.width*Me.backgroundImage.scaleX,ot=Me.backgroundImage.height*Me.backgroundImage.scaleY;b(g,new QB(l(f),{width:Qe,height:ot,containerElement:l(h)})),l(g).setPrintAreaClickListener(Ye=>{ce(Ye)}),await l(g).setCanvasJSON(Me)}function ce(ge){var ot,Ye,Ce;if(!l(g))return;b(C,ge),b(N,((ot=u.find(de=>de.object_id===ge))==null?void 0:ot.title)||`${ge} `);const Me=(((Ce=(Ye=l(g)).getObjects)==null?void 0:Ce.call(Ye))||[]).find(de=>{var Te;return((Te=de==null?void 0:de.data)==null?void 0:Te.objectId)===ge});Me?b(k,{x:Math.round(Me.left||0),y:Math.round(Me.top||0),width:Math.round((Me.width||0)*(Me.scaleX||1)),height:Math.round((Me.height||0)*(Me.scaleY||1))}):b(k,null);const Qe=l(W).findIndex(de=>de.objectId===ge);b(I,Qe>=0?Qe:null),b(_,!0),be()}function be(){const ge=document.querySelector(ne);ge&&(ge.scrollTop=0)}function x(ge){if(!ge)return;const Se=s().products.findIndex(Me=>{var Qe;return((Qe=Me==null?void 0:Me.product)==null?void 0:Qe.id)===i()});if(Se===-1){console.warn("DetailedPrint cancelPrint:     .",{productId:i()});return}It.cancelPrint(Se,ge),F(),T(),Be()}function F(){l(g)&&(l(g).updateAllObjectEnabled(),l(W).forEach(ge=>{ge.objectId&&l(g).updateObjectDisabled(ge.objectId)}))}function E(ge){const Se=l(W)[ge];Se!=null&&Se.objectId&&(b(C,Se.objectId),b(I,ge),b(N,Se.title||`${Se.objectId} `),b(k,null),b(_,!0),be())}function U(){b(_,!1)}function P(){const ge=a()||"temp";return`detailedPrint_${i()}_${ge}`}function T(ge){if(!(typeof window>"u"))try{const Se=ge??JSON.stringify(l(W)??[]),Me=P();window.sessionStorage.setItem(Me,Se),b(H,Se);try{b(O,JSON.parse(Se)),console.log("DetailedPrint session ",{storageKey:Me,printsCount:Array.isArray(l(O))?l(O).length:"invalid"}),Be();try{hr.selectPrintMethod("detailed")}catch(Qe){console.warn("fixedEstimateStore selectPrintMethod :",Qe)}try{Rn.selectPrintMethod(i(),"detailed")}catch(Qe){console.warn("extendedProductDataStore selectPrintMethod :",Qe)}}catch(Qe){console.error("DetailedPrint fallback  :",Qe)}}catch(Se){console.error("DetailedPrint session  :",Se)}}async function R(){var ot,Ye,Ce,de,Te,qe,je;if(typeof window>"u")return;const Se=(a()||"temp")!=="temp";let Me=null,Qe=null;if(Se&&console.log(" Edit mode detected - will use sessionStorage populated from DB"),!Me||Me.length===0){const Re=P();if(Qe=window.sessionStorage.getItem(Re),Qe)try{console.log(" Raw sessionStorage data:",Qe),Me=JSON.parse(Qe),console.log(" Parsed printsToRestore:",Me),console.log(" First print colors detail:",{exists:Me.length>0,colorsArray:(ot=Me[0])==null?void 0:ot.colors,colorsLength:(Ce=(Ye=Me[0])==null?void 0:Ye.colors)==null?void 0:Ce.length,colorsType:typeof((de=Me[0])==null?void 0:de.colors),isArray:Array.isArray((Te=Me[0])==null?void 0:Te.colors),allColors:(je=(qe=Me[0])==null?void 0:qe.colors)==null?void 0:je.map((Ve,At)=>({idx:At,name:Ve.name,hex:Ve.hex}))}),console.log(" Using sessionStorage detailed prints:",{printsCount:Me.length,colorsPerPrint:Me.map((Ve,At)=>{var Ke;return{printIndex:At,colorsCount:((Ke=Ve.colors)==null?void 0:Ke.length)||0,colors:Ve.colors,objectId:Ve.objectId}})})}catch(Ve){console.error("Failed to parse sessionStorage prints:",Ve)}}if(!(!Me||!Array.isArray(Me)))try{const Re=Me;b(O,[...Re]),b(W,[...Re]),console.log(" sessionFallbackPrints updated:",{printsCount:l(O).length,colors:l(O).map(Ke=>Ke.colors)});const At=fn(It).products.findIndex(Ke=>{var nt;return((nt=Ke==null?void 0:Ke.product)==null?void 0:nt.id)===i()});if(b(H,Qe),At===-1){console.warn("DetailedPrint   :    .",{productId:i()}),b(xe,Re),b(M,Qe),b(J,!0);return}if(b(J,!0),q(Re),await Oi(),Array.isArray(Re)&&Re.length>0){try{hr.selectPrintMethod("detailed")}catch(Ke){console.warn("fixedEstimateStore selectPrintMethod  (restore):",Ke)}try{Rn.selectPrintMethod(i(),"detailed")}catch(Ke){console.warn("extendedProductDataStore selectPrintMethod  (restore):",Ke)}Be()}}catch(Re){console.error("DetailedPrint   :",Re)}finally{l(xe)||b(J,!1)}}function q(ge){if(!ge||ge.length===0)return;const Se=s().products.findIndex(Me=>{var Qe;return((Qe=Me==null?void 0:Me.product)==null?void 0:Qe.id)===i()});if(Se===-1){console.warn("DetailedPrint applyPrintsToStore:    .",{productId:i()});return}b(X,!0),console.log("DetailedPrint applyPrintsToStore ",{productId:i(),printsCount:ge.length}),b(le,!1),It.update(Me=>{const Qe=[...Me.products];return Qe[Se]={...Qe[Se],prints:ge},{...Me,products:Qe,index:Se}}),b(H,JSON.stringify(ge??[])),Oi().then(()=>{b(X,!1)})}Jt(()=>(l(O),s(),l(W)),()=>{var ge;l(O)&&l(O).length>0&&(((ge=s())==null?void 0:ge.estimateId)||"temp")!=="temp"&&(b(W,[...l(O)]),console.log(" Edit  (reactive): Supabase DB  :",{printsCount:l(W).length,colors:l(W).map(Qe=>{var ot,Ye;return{colorsCount:((ot=Qe.colors)==null?void 0:ot.length)||0,colorNames:(Ye=Qe.colors)==null?void 0:Ye.map(Ce=>Ce.name)}})}))}),Jt(()=>(s(),l(O),Cn(i())),()=>{var Qe;if(!((((Qe=s())==null?void 0:Qe.estimateId)||"temp")!=="temp"&&l(O)&&l(O).length>0)){const ot=s().products.find(Ce=>{var de;return((de=Ce==null?void 0:Ce.product)==null?void 0:de.id)===i()}),Ye=(ot==null?void 0:ot.prints)??[];Ye.length>0?b(W,[...Ye]):l(O)&&l(O).length>0&&b(W,[...l(O)])}}),Jt(()=>(l(xe),s(),Cn(i()),l(M),Oi),()=>{if(l(xe)&&s().products.findIndex(Me=>{var Qe;return((Qe=Me==null?void 0:Me.product)==null?void 0:Qe.id)===i()})!==-1){const Me=l(xe),Qe=l(M)||JSON.stringify(Me??[]);b(J,!0),q(Me),b(H,Qe),b(xe,null),b(M,""),Oi().then(()=>{b(J,!1)})}}),Jt(()=>(l(J),l(X),l(O),s(),Cn(i())),()=>{var ge;if(!l(J)&&!l(X)&&((ge=l(O))!=null&&ge.length)){const Se=s().products.find(Qe=>{var ot;return((ot=Qe==null?void 0:Qe.product)==null?void 0:ot.id)===i()}),Me=(Se==null?void 0:Se.prints)??[];(!Me||Me.length===0)&&q(l(O))}}),Jt(()=>(l(_),l(J),l(X),l(W),l(H)),()=>{if(l(_)&&!l(J)&&!l(X))try{JSON.stringify(l(W)??[])!==l(H)&&b(le,!0)}catch(ge){console.error("DetailedPrint    :",ge)}}),Jt(()=>l(g),()=>{l(g)&&F()}),Jt(()=>l(_),()=>{b(V,l(_))}),Jt(()=>(l(_),l(V),l(le),l(te)),()=>{!l(_)&&l(V)&&(b(C,null),b(I,null),b(N,""),b(k,null),l(le)&&l(te)&&T(),b(le,!1),F())}),Jt(()=>(l(te),l(_),l(J),l(X),l(W),l(H)),()=>{if(l(te)&&!l(_)&&!l(J)&&!l(X))try{const ge=JSON.stringify(l(W)??[]);ge!==l(H)&&T(ge)}catch(ge){console.error("DetailedPrint   :",ge)}}),to(),Rr();var j=ET(),Ae=ft(j),Ee=z(w(Ae),2);{var _e=ge=>{var Se=fT(),Me=w(Se),Qe=z(w(Me),2),ot=w(Qe),Ye=z(Me,2);He(()=>Le(ot,l(y))),at("click",Ye,Z),L(ge,Se)};ze(Ee,ge=>{l(y)&&ge(_e)})}var Oe=z(Ee,2),G=w(Oe),D=w(G),ie=w(D),me=w(ie);ss(me,ge=>b(f,ge),()=>l(f));var pe=z(me,2);{var oe=ge=>{var Se=pT();L(ge,Se)};ze(pe,ge=>{l(m)&&!l(y)&&ge(oe)})}ss(ie,ge=>b(h,ge),()=>l(h));var ye=z(G,2),Ne=w(ye);{var we=ge=>{var Se=xT(),Me=w(Se),Qe=z(w(Me),2),ot=z(w(Qe),2),Ye=w(ot),Ce=z(Me,2);Yt(Ce,5,()=>l(W),Ar,(de,Te,qe)=>{var je=BT(),Re=w(je),Ve=w(Re),At=w(Ve),Ke=w(At);Ke.textContent=qe+1;var nt=z(At,2),ht=w(nt),mt=z(Ve,2),St=w(mt),st=z(St,2),tt=z(Re,2),Ft=w(tt);{var xt=wt=>{var gt=mT(),Dt=z(w(gt),2);Yt(Dt,5,()=>l(Te).parentTemplates,Ar,(qt,zt)=>{var Mt=vT(),jt=w(Mt);{var Ct=Zt=>{var nr=gT();He(()=>{rr(nr,"src",l(zt).image_url),rr(nr,"alt",l(zt).name)}),L(Zt,nr)};ze(jt,Zt=>{l(zt).image_url&&Zt(Ct)})}var Et=z(jt,2),Nt=w(Et);He(()=>Le(Nt,l(zt).name)),L(qt,Mt)}),L(wt,gt)};ze(Ft,wt=>{var gt;(gt=l(Te).parentTemplates)!=null&&gt.length&&wt(xt)})}var Ot=z(Ft,2);{var Ze=wt=>{var gt=_T(),Dt=w(gt);{var qt=jt=>{var Ct=yT(),Et=z(w(Ct),2);Yt(Et,5,()=>l(Te).colors,Ar,(Nt,Zt)=>{var nr=wT(),ir=w(nr),sr=z(ir,2),dr=w(sr);He(()=>{rr(ir,"style",`background-color: ${l(Zt).hex??""};`),Le(dr,l(Zt).name)}),L(Nt,nr)}),L(jt,Ct)};ze(Dt,jt=>{var Ct;(Ct=l(Te).colors)!=null&&Ct.length&&jt(qt)})}var zt=z(Dt,2);{var Mt=jt=>{var Ct=bT(),Et=z(w(Ct),2),Nt=z(w(Et),2),Zt=w(Nt);He(()=>Le(Zt,` ${l(Te).uploads.files.length??""}`)),L(jt,Ct)};ze(zt,jt=>{var Ct,Et;(Et=(Ct=l(Te).uploads)==null?void 0:Ct.files)!=null&&Et.length&&jt(Mt)})}L(wt,gt)};ze(Ot,wt=>{var gt,Dt,qt;((gt=l(Te).colors)!=null&&gt.length||(qt=(Dt=l(Te).uploads)==null?void 0:Dt.files)!=null&&qt.length)&&wt(Ze)})}He(()=>Le(ht,l(Te).title)),at("click",St,()=>E(qe)),at("click",st,()=>x(l(Te).objectId)),L(de,je)}),He(()=>Le(Ye,`${l(W).length??""}  `)),L(ge,Se)},Fe=ge=>{var Se=zT();L(ge,Se)};ze(Ne,ge=>{l(W).length>0?ge(we):ge(Fe,!1)})}var ue=z(Ae,2),De=w(ue),Pe=z(De,2),he=z(ue,2);{var ee=ge=>{var Se=ST(),Me=w(Se),Qe=w(Me),ot=w(Qe),Ye=z(Qe,2);{var Ce=Te=>{var qe=CT(),je=w(qe),Re=w(je);He(()=>Le(Re,l(N))),L(Te,qe)};ze(Ye,Te=>{l(N)&&Te(Ce)})}var de=z(Ye,2);hT(de,{get productId(){return i()},get estimateId(){return a()},updateObjectDisabled:F,get objectId(){return l(C)},set objectId(Te){b(C,Te)},get isTemplateModal(){return l(_)},set isTemplateModal(Te){b(_,Te)},get selectedPrintIndex(){return l(I)},set selectedPrintIndex(Te){b(I,Te)},$$legacy:!0}),at("click",ot,U),L(ge,Se)};ze(he,ge=>{l(_)&&ge(ee)})}He(()=>Cr(D,`odz-space-y-4 ${l(m)?"odz-opacity-50":""}`)),at("click",De,function(...ge){var Se;(Se=d())==null||Se.apply(this,ge)}),at("click",Pe,function(...ge){var Se;(Se=A())==null||Se.apply(this,ge)}),L(n,j),Mr(),r()}var IT=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-10"><div class="odz-text-center"><h2 class="odz-text-xl odz-font-bold odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-500">      </p></div> <div class="odz-bg-gray-50 odz-p-8 odz-rounded-lg odz-border-2 odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-600 odz-text-center">    </p></div> <button class="odz-btn odz-btn-secondary odz-px-8"> </button></div>');function UT(n,e){let t=vt(e,"productId",8),r=vt(e,"onComplete",8);console.log("    - productId:",t());var o=IT(),s=z(w(o),4);at("click",s,function(...i){var a;(a=r())==null||a.apply(this,i)}),L(n,o)}var QT=Y('<p class="odz-text-[11px] odz-text-gray-400 odz-line-through odz-mt-1"> </p> <p class="odz-text-[11px] odz-text-emerald-600 odz-font-semibold odz-mt-0.5"> </p>',1),TT=Y('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p><!></p>',1),LT=Y('<p class="odz-mt-1 odz-text-[11px] odz-text-blue-600">   -  </p>'),PT=Y('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">     </p>'),kT=Y('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <!>',1),OT=Y('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">    </p>',1),DT=Y('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">   </p>',1),NT=Y('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!></p>'),MT=Y('<span class="odz-text-blue-600">+ ( )</span>'),HT=Y("<span>+ ( )</span>"),jT=Y('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> <!></p>'),RT=Y('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> + ( )</p>'),qT=Xp('<svg class="odz-w-4 odz-h-4 sm:odz-w-5 sm:odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),KT=Y("<button><!> <span> </span></button>"),$T=Y('<div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2.5"></div>'),VT=Y('<button class="odz-w-full odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-semibold odz-py-2.5 odz-px-4 odz-rounded-xl odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2"><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg> <span> </span></button>'),GT=Y('<div class="odz-mt-5 odz-border-t odz-border-gray-200/70 odz-pt-3.5"><!></div>'),WT=Y('<div class="odz-mt-5 odz-px-4"><div class="odz-sticky odz-bottom-4 md:odz-static md:odz-bottom-auto"><div class="odz-rounded-3xl odz-border odz-border-gray-200 odz-bg-white/90 odz-backdrop-blur-md odz-shadow-xl odz-p-4 sm:odz-p-5 lg:odz-p-6"><div class="odz-grid sm:odz-grid-cols-2 lg:odz-grid-cols-5 odz-gap-2.5 lg:odz-gap-3"><div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-xs odz-text-gray-500"> </p></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-red-600"> </p> <!></div></div> <!></div></div></div>');function _p(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(hr,"$fixedEstimateStore",t),s=()=>Gr(Rn,"$extendedProductDataStore",t),i=Ue(),a=Ue(),A=Ue(),d=Ue(),c=Ue(),u=Ue(),h=Ue(),f=Ue(),g=Ue(),m=Ue(),y=Ue(),_=Ue(),C=Ue(),I=Ue(),N=Ue();let k=vt(e,"productId",8),W=vt(e,"showNextButton",8,!1),V=vt(e,"nextButtonText",8,"  "),H=vt(e,"onNext",8,void 0),J=vt(e,"estimateId",8,null),xe=vt(e,"idx",8,null),M=vt(e,"buttonConfig",8,null),O=Ue(0),X=Ue(null);function te(){var _e,Oe;if(((_e=l(i))==null?void 0:_e.productId)===k()&&l(i).printSelection&&l(i).printSelection.currentMethod!=="selection")return l(i).printSelection;if(typeof window<"u")try{let G=null,D="";if(J()&&xe()!==null){const ie=`fixedEstimate_${k()}_${J()}_${xe()}`;G=sessionStorage.getItem(ie),G&&(D=ie),console.log(" resolvePrintSelection -    (estimateId + idx):",{exactKey:ie,hasData:!!G})}if(!G&&J()){const ie=`fixedEstimate_${k()}_${J()}`;G=sessionStorage.getItem(ie),G&&(D=ie)}if(!G&&xe()!==null){const ie=`fixedEstimate_${k()}_${xe()}`;G=sessionStorage.getItem(ie),G&&(D=ie)}if(!G){const ie=`fixedEstimate_${k()}`;G=sessionStorage.getItem(ie),G&&(D=ie)}if(G||console.log(" resolvePrintSelection - sessionStorage     (, DB Store ):",{triedKeys:[`fixedEstimate_${k()}`,`fixedEstimate_${k()}_${xe()}`,`fixedEstimate_${k()}_${J()}`],currentIdx:xe(),currentEstimateId:J()}),G){const ie=JSON.parse(G);if(ie.printSelection&&ie.printSelection.currentMethod!=="selection")return ie.printSelection}}catch{}return(Oe=l(A))!=null&&Oe.printSelection&&l(A).printSelection.currentMethod!=="selection"?l(A).printSelection:null}async function le(_e,Oe,G,D){if((D||(Oe?"detailed":"none"))!=="detailed")return null;if(typeof window<"u")try{const me=J()||"temp",pe=`detailedPrint_${k()}_${me}`;let oe=window.sessionStorage.getItem(pe);if(!oe&&xe()!==null){const ye=`detailedPrint_${k()}_${me}_${xe()}`;oe=window.sessionStorage.getItem(ye)}if(!oe){const ye=`detailedPrint_${k()}`;oe=window.sessionStorage.getItem(ye)}if(oe){const ye=JSON.parse(oe);if(console.log(" sessionStorage     ( ):",{key:pe,parsedData:ye,dataLength:ye==null?void 0:ye.length,currentTab:"unknown"}),Array.isArray(ye)&&ye.length>0){const Ne=G;if(Ne<=0)return null;let we=0;for(const Fe of ye){const ue=await ne(Fe,Ne);ue!==null?we+=ue:Fe.price&&typeof Fe.price=="number"&&(we+=Fe.price,console.log("      ():",{title:Fe.title,fallbackPrice:Fe.price,currentTotal:we}))}if(we>0)return we}}}catch{}if(J()&&xe()!==null)try{const pe=(await Dd(J())).filter(oe=>oe.idx===xe());if(pe.length>0){const oe=G;if(oe<=0)return null;let ye=0;for(const Ne of pe){const we={id:Ne.id,template:{id:Ne.template_id},colors:Ne.colors||[],price:Ne.price},Fe=await ne(we,oe);Fe!==null?ye+=Fe:(ye+=Ne.price||0,console.log("   - DB   ():",{objectId:Ne.object_id,dbPrice:Ne.price}))}return ye}}catch{}if(_e!=null&&_e.printConfig){let me=null;if(typeof _e.printConfig=="string")try{me=JSON.parse(_e.printConfig)}catch{return null}else typeof _e.printConfig=="object"&&_e.printConfig!==null&&(me=_e.printConfig);if(me){const pe=["totalAmount","total","totalPrice","price","amount"];for(const ye of pe){const Ne=me[ye];if(typeof Ne=="number"&&!Number.isNaN(Ne))return Ne}const oe=me.summary;if(oe&&typeof oe=="object")for(const ye of pe){const Ne=oe[ye];if(typeof Ne=="number"&&!Number.isNaN(Ne))return Ne}}}return null}async function ne(_e,Oe){var G,D;try{if(!((G=_e.template)!=null&&G.id))return null;let ie=_e.template.templateProduct;if(ie||(ie=await Vd(_e.template.id)),!(ie!=null&&ie.template_product_variants))return null;let me;if(_e.variant_id?(me=ie.template_product_variants.find(ye=>ye.variant_id===_e.variant_id),console.log(" STEP 4  (variant_id ):",{found:!!me,selectedVariant:me})):_e.colors&&_e.colors.length>0?(me=ie.template_product_variants.find(ye=>ye.color_count===_e.colors.length),console.log(" STEP 4  (  ):",{found:!!me,selectedVariant:me})):(me=ie.template_product_variants[0],console.log(" STEP 4  ():",{selectedVariant:me})),!me)return null;const pe=await wA(me.variant_id);if(!pe||!pe.prices||pe.prices.length===0)return null;const oe=pe.prices[0].amount;if(me.min_quantity<=Oe){let ye=oe*Oe;if((D=ie.product)!=null&&D.quantity_discounts&&ie.product.quantity_discounts.length>0){const Ne=bi(Oe,oe,ie.product.quantity_discounts);if(Ne.hasDiscount){const we=Ne.discountedPrice*Oe;return console.log(" =====   ( ) =====:",{discountedUnitPrice:Ne.discountedPrice,quantity:Oe,finalPrice:we}),we}}return ye}else{const ye=me.plate_price||0;return console.log(" =====   (  , plate_price ) =====:",{min_quantity:me.min_quantity,productQuantity:Oe,platePrice:ye}),ye}}catch{return null}}function Be(_e,Oe,G){if(typeof window>"u")return!1;try{const D=Oe||"temp",ie=[G!==null&&D?`detailedPrint_${_e}_${D}_${G}`:null,D?`detailedPrint_${_e}_${D}`:null,`detailedPrint_${_e}`].filter(Boolean);for(const me of ie){const pe=window.sessionStorage.getItem(me);if(pe)try{const oe=JSON.parse(pe);if(Array.isArray(oe)&&oe.length>0)return!0}catch{}}}catch{return!1}return!1}let Z=Ue(0),se=Ue(!1),ce=Ue(null);Fn(()=>{if(typeof window<"u"){const _e=ie=>{const{productId:me,timestamp:pe,source:oe}=ie.detail;me===k()&&(b(O,Date.now()),b(Z,Date.now()))},Oe=async ie=>{var we,Fe,ue;const{productId:me,addonId:pe,selectedAddons:oe,timestamp:ye,source:Ne}=ie.detail;if(me===k()){console.log(" SelectedProductSummary -     ():",{eventProductId:me,addonId:pe,selectedAddonsCount:Object.keys(oe||{}).length,timestamp:ye,source:Ne,currentProductId:k()}),await new Promise(ee=>setTimeout(ee,50));let De=fn(hr),Pe=0;const he=5;for(;Pe<he&&De;){const ee=(Fe=(we=De==null?void 0:De.addonSelection)==null?void 0:we.selectedAddons)==null?void 0:Fe[pe];if(ee&&ee.variantId===ie.detail.variantId)break;console.log(` Store    (${Pe+1}/${he}):`,{storeVariantId:ee==null?void 0:ee.variantId,expectedVariantId:ie.detail.variantId}),await new Promise(ge=>setTimeout(ge,25)),De=fn(hr),Pe++}if(De&&l(c)&&l(A)){const ee=U(De,l(c),Date.now(),(ue=De.addonSelection)==null?void 0:ue.selectedAddons);b(C,ee)}b(O,Date.now()),b(Z,Date.now())}},G=ie=>{const{productId:me,action:pe,color:oe,variantId:ye,oldQuantity:Ne,newQuantity:we,newTotalQuantity:Fe,timestamp:ue,source:De}=ie.detail;me===k()&&(b(O,Date.now()),b(Z,Date.now()))},D=async ie=>{const{productId:me,toMethod:pe,idx:oe,estimateId:ye,source:Ne}=ie.detail;me===k()&&(b(X,pe||null),pe&&hr.updatePrintSelection({currentMethod:pe,isCompleted:pe==="none",lastUpdated:Date.now()}),b(O,Date.now()),b(Z,Date.now()),await new Promise(we=>setTimeout(we,100)),F(pe))};return window.addEventListener("detailedPrintUpdate",_e),window.addEventListener("addonSelectionUpdate",Oe),window.addEventListener("productQuantityUpdate",G),window.addEventListener("printAmountRecalc",D),setTimeout(()=>{b(Z,Date.now())},100),()=>{window.removeEventListener("detailedPrintUpdate",_e),window.removeEventListener("addonSelectionUpdate",Oe),window.removeEventListener("productQuantityUpdate",G),window.removeEventListener("printAmountRecalc",D)}}});let be=Ue(null),x=!1;async function F(_e){if(!x)try{x=!0,b(be,await le(l(u),l(se),l(c).totalQuantity,_e))}catch{b(be,null)}finally{x=!1}}let E=null;function U(_e,Oe,G,D){var ye,Ne,we;let ie=_e;if(typeof window<"u"&&k())try{const Fe=fn(hr);Fe&&Fe.productId===k()&&(ie=Fe)}catch{}if(G&&typeof window<"u"&&k())try{const Fe=fn(hr);Fe&&Fe.productId===k()&&(ie=Fe)}catch{}let me=D||((ye=ie==null?void 0:ie.addonSelection)==null?void 0:ye.selectedAddons);if(typeof window<"u"&&G)try{const Fe=fn(hr);if(Fe&&Fe.productId===k()){const ue=(Ne=Fe.addonSelection)==null?void 0:Ne.selectedAddons;ue&&Object.keys(ue).length>0&&(me=ue)}}catch{}if(!me||!((we=l(A))!=null&&we.addons))return 0;const pe=Oe.totalQuantity;let oe=0;return Object.entries(me).forEach(([Fe,ue])=>{var Me,Qe,ot;if(!ue||typeof ue!="object"||!("productId"in ue)||!("variantId"in ue))return;const De=ue,Pe=l(A).addons.find(Ye=>Ye.id===Fe);if(!Pe)return;const he=Pe.items.find(Ye=>Ye.addon_product.id===De.productId);if(!he)return;(Me=he.addon_product.variants)!=null&&Me.map(Ye=>{var Ce,de;return{id:Ye.id,title:Ye.title,price:(de=(Ce=Ye.prices)==null?void 0:Ce[0])==null?void 0:de.amount}});let ee=(Qe=he.addon_product.variants)==null?void 0:Qe.find(Ye=>Ye.id===De.variantId);if(!ee){(ot=he.addon_product.variants)==null||ot.forEach((Ye,Ce)=>{});return}if(!ee.prices||ee.prices.length===0)return;const ge=ee.prices[0].amount,Se=ge*pe;oe+=Se,console.log("    ():",{addonName:Pe.name,variantTitle:ee.title||he.addon_product.title,selectedVariantId:De.variantId,foundVariantId:ee.id,addonUnitPrice:ge,totalQuantity:pe,addonItemTotal:Se,currentAddonTotal:oe,calculationValid:ee.id===De.variantId})}),oe}function P(_e){var we,Fe;if(!((we=l(i))!=null&&we.productSelection)||!l(d)||l(i).productId!==k())return{totalQuantity:0,selectedColors:[],totalAmount:{originalTotal:0,discountedTotal:0,hasDiscount:!1}};const{quantityByVariant:Oe,variantsByColor:G={},variantDiscounts:D}=l(i).productSelection,ie=Object.values(Oe||{}).reduce((ue,De)=>ue+Object.values(De||{}).reduce((Pe,he)=>Pe+he,0),0),me=Object.keys(Oe||{}).filter(ue=>Object.values(Oe[ue]||{}).some(De=>De>0));let pe=0,oe=0,ye=!1;for(const ue in Oe||{})for(const De in Oe[ue]||{}){const Pe=Oe[ue][De];if(Pe>0){const he=(Fe=G[ue])==null?void 0:Fe.find(ee=>ee.id===De);if(he&&he.prices&&he.prices.length>0){const ee=he.prices[0].amount,ge=D==null?void 0:D[De];pe+=ee*Pe,ge!=null&&ge.hasDiscount?(oe+=ge.discountedPrice*Pe,ye=!0):oe+=ee*Pe}}}return{totalQuantity:ie,selectedColors:me,totalAmount:{originalTotal:pe,discountedTotal:ye?oe:pe,hasDiscount:ye}}}Fn(()=>{E=hr.subscribe(_e=>{(_e==null?void 0:_e.productId)===k()&&b(O,Date.now())})}),Qo(()=>{E&&E()});function T(){H()&&H()()}function R(_e){switch(_e){case"arrow-left":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>';case"arrow-right":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>';case"check":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';case"save":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path>';default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>'}}function q(_e,Oe="normal"){const G="odz-font-semibold odz-rounded-lg odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2",D=Oe==="large"?"odz-py-3 odz-px-5 odz-text-base":"odz-py-2.5 odz-px-4 odz-text-sm";return _e==="primary"?`${G} ${D} odz-bg-red-600 hover:odz-bg-red-700 odz-text-white`:`${G} ${D} odz-bg-gray-100 hover:odz-bg-gray-200 odz-text-gray-700 hover:odz-text-gray-800 odz-border odz-border-gray-300`}Jt(()=>o(),()=>{b(i,o())}),Jt(()=>s(),()=>{b(a,s())}),Jt(()=>(l(a),Cn(k())),()=>{var _e,Oe;b(A,(Oe=(_e=l(a))==null?void 0:_e.productDataCache)==null?void 0:Oe[k()])}),Jt(()=>l(A),()=>{var _e;b(d,(_e=l(A))==null?void 0:_e.product)}),Jt(()=>l(O),()=>{b(c,P(l(O)))}),Jt(()=>{},()=>{b(u,te())}),Jt(()=>l(u),()=>{var _e;b(h,((_e=l(u))==null?void 0:_e.currentMethod)??"selection")}),Jt(()=>(l(Z),l(X),l(h),l(u),Cn(k()),Cn(J()),Cn(xe()),l(ce),l(se)),()=>{l(Z);const _e=l(X)||l(h),Oe=!!l(u),G=Be(k(),J(),xe());let D=!1;_e==="detailed"?D=!0:_e==="simple"||_e==="none"?D=!1:_e==="selection"&&(D=G);const ie=`${_e}|${Oe}|${G}`;ie!==l(ce)&&b(ce,ie),l(se)!==D&&b(se,D)}),Jt(()=>l(be),()=>{b(f,l(be)??0)}),Jt(()=>l(c),()=>{b(g,l(c).totalAmount.hasDiscount?l(c).totalAmount.discountedTotal:l(c).totalAmount.originalTotal)}),Jt(()=>l(c),()=>{b(m,l(c).totalAmount.hasDiscount?l(c).totalAmount.originalTotal-l(c).totalAmount.discountedTotal:0)}),Jt(()=>l(m),()=>{b(y,l(m)>0)}),Jt(()=>o(),()=>{var _e,Oe;b(_,(Oe=(_e=o())==null?void 0:_e.addonSelection)==null?void 0:Oe.selectedAddons)}),Jt(()=>(l(i),l(c),l(O),l(_)),()=>{b(C,U(l(i),l(c),l(O),l(_)))}),Jt(()=>(l(se),l(f),l(g),l(C)),()=>{b(I,l(se)&&l(f)>0?l(g)+l(f)+l(C):l(g)+l(C))}),Jt(()=>(l(u),l(se),l(c),l(O)),()=>{(l(u)||l(se)||l(c).totalQuantity||l(O))&&F()}),Jt(()=>{},()=>{}),Jt(()=>(Cn(M()),Cn(W())),()=>{b(N,M()||W())}),to(),Rr();var j=kt(),Ae=ft(j);{var Ee=_e=>{var Oe=WT(),G=w(Oe),D=w(G),ie=w(D),me=w(ie),pe=z(w(me),2),oe=w(pe),ye=z(pe,2),Ne=w(ye),we=z(me,2),Fe=z(w(we),2),ue=w(Fe),De=z(Fe,2);{var Pe=Ke=>{var nt=QT(),ht=ft(nt),mt=w(ht),St=z(ht,2),st=w(St);He((tt,Ft)=>{Le(mt,`${tt??""}`),Le(st,`-${Ft??""} `)},[()=>vr(l(c).totalAmount.originalTotal),()=>vr(l(m))],dt),L(Ke,nt)};ze(De,Ke=>{l(y)&&Ke(Pe)})}var he=z(we,2),ee=z(w(he),2);{var ge=Ke=>{var nt=TT(),ht=ft(nt),mt=w(ht),St=z(ht,2),st=w(St);{var tt=xt=>{var Ot=en("    .");L(xt,Ot)},Ft=xt=>{var Ot=en("    .");L(xt,Ot)};ze(st,xt=>{l(f)>0?xt(tt):xt(Ft,!1)})}He(xt=>{Le(mt,`${xt??""}`),Cr(St,`odz-mt-1 odz-text-[11px] ${l(f)>0?"odz-text-gray-500":"odz-text-orange-500"}`)},[()=>vr(l(f))],dt),L(Ke,nt)},Se=Ke=>{var nt=kT(),ht=z(ft(nt),2);{var mt=st=>{var tt=LT();L(st,tt)},St=st=>{var tt=PT();L(st,tt)};ze(ht,st=>{(l(X)||l(h))==="simple"?st(mt):st(St,!1)})}L(Ke,nt)};ze(ee,Ke=>{l(se)?Ke(ge):Ke(Se,!1)})}var Me=z(he,2),Qe=z(w(Me),2);{var ot=Ke=>{var nt=OT(),ht=ft(nt),mt=w(ht);He(St=>Le(mt,`${St??""}`),[()=>vr(l(C))],dt),L(Ke,nt)},Ye=Ke=>{var nt=DT();L(Ke,nt)};ze(Qe,Ke=>{l(C)>0?Ke(ot):Ke(Ye,!1)})}var Ce=z(Me,2),de=z(w(Ce),2),Te=w(de),qe=z(de,2);{var je=Ke=>{var nt=NT(),ht=w(nt),mt=z(ht);{var St=st=>{var tt=en();He(Ft=>Le(tt,`+ ${Ft??""}`),[()=>vr(l(C))],dt),L(st,tt)};ze(mt,st=>{l(C)>0&&st(St)})}He((st,tt)=>Le(ht,`${st??""} + ${tt??""} `),[()=>vr(l(g)),()=>vr(l(f))],dt),L(Ke,nt)},Re=Ke=>{var nt=kt(),ht=ft(nt);{var mt=st=>{var tt=jT(),Ft=w(tt),xt=z(Ft);{var Ot=Dt=>{var qt=en();He(zt=>Le(qt,`+  ${zt??""}`),[()=>vr(l(C))],dt),L(Dt,qt)};ze(xt,Dt=>{l(C)>0&&Dt(Ot)})}var Ze=z(xt,2);{var wt=Dt=>{var qt=MT();L(Dt,qt)},gt=Dt=>{var qt=HT();L(Dt,qt)};ze(Ze,Dt=>{l(h)==="simple"?Dt(wt):Dt(gt,!1)})}He(Dt=>Le(Ft,` ${Dt??""} `),[()=>vr(l(g))],dt),L(st,tt)},St=st=>{var tt=RT(),Ft=w(tt),xt=z(Ft);{var Ot=Ze=>{var wt=en();He(gt=>Le(wt,`+  ${gt??""}`),[()=>vr(l(C))],dt),L(Ze,wt)};ze(xt,Ze=>{l(C)>0&&Ze(Ot)})}He(Ze=>Le(Ft,` ${Ze??""} `),[()=>vr(l(g))],dt),L(st,tt)};ze(ht,st=>{l(se)?st(St,!1):st(mt)},!0)}L(Ke,nt)};ze(qe,Ke=>{l(se)&&l(f)>0?Ke(je):Ke(Re,!1)})}var Ve=z(ie,2);{var At=Ke=>{var nt=GT(),ht=w(nt);{var mt=st=>{var tt=$T();Yt(tt,5,()=>M().buttons,Ar,(Ft,xt,Ot)=>{var Ze=KT(),wt=w(Ze);{var gt=zt=>{var Mt=qT(),jt=w(Mt);gv(jt,()=>R(l(xt).icon),!0,!1),L(zt,Mt)};ze(wt,zt=>{l(xt).icon&&zt(gt)})}var Dt=z(wt,2),qt=w(Dt);He(zt=>{Cr(Ze,zt),Le(qt,l(xt).text)},[()=>`${M().type==="single"?"odz-w-full":Ot===0?"odz-flex-1":"odz-flex-1 sm:odz-flex-[1.35]"} ${q(l(xt).style,l(xt).size||"normal")}`],dt),at("click",Ze,function(...zt){var Mt;(Mt=l(xt).action)==null||Mt.apply(this,zt)}),L(Ft,Ze)}),L(st,tt)},St=st=>{var tt=VT(),Ft=z(w(tt),2),xt=w(Ft);He(()=>Le(xt,V())),at("click",tt,T),L(st,tt)};ze(ht,st=>{M()?st(mt):st(St,!1)})}L(Ke,nt)};ze(Ve,Ke=>{l(N)&&Ke(At)})}He((Ke,nt)=>{Le(oe,`${l(c).totalQuantity??""}`),Le(Ne,`${l(c).selectedColors.length??""}  `),Le(ue,`${Ke??""}`),Le(Te,`${nt??""}`)},[()=>vr(l(g)),()=>vr(l(I))],dt),L(_e,Oe)};ze(Ae,_e=>{l(c).totalQuantity>0&&l(d)&&_e(Ee)})}L(n,j),Mr(),r()}var XT=Y('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),YT=Y('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),JT=Y('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-green-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">    ...</p></div></div></div>'),ZT=Y('<div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-1.5 odz-h-1.5 odz-bg-gray-400 odz-rounded-full"></div> <span class="odz-text-xs odz-text-gray-600"> </span></div>'),eL=Y(`<button class="odz-group odz-cursor-pointer odz-w-full odz-text-left"><div class="odz-relative odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-xl odz-p-6
                               odz-transition-all odz-duration-300 odz-shadow-sm
                               hover:odz-border-gray-300 hover:odz-shadow-lg hover:odz-scale-105"><div></div> <div class="odz-relative odz-z-10"><div class="odz-text-4xl odz-mb-4 odz-text-center"> </div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-800 odz-text-center odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-text-center odz-mb-4"> </p> <div class="odz-space-y-2"></div></div> <div class="odz-relative odz-z-10 odz-mt-6"><div></div></div></div></button>`),tL=Y('<div class="odz-flex odz-flex-col odz-gap-6 odz-p-4 odz-pb-48"><div class="odz-text-center odz-mb-6"><h1 class="odz-text-2xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h1> <p class="odz-text-sm odz-text-gray-600">   </p></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-px-2"></div> <!></div>'),rL=Y('<div class="odz-relative"><!></div>'),nL=Y('<div class="odz-relative"><!></div>'),oL=Y('<div class="odz-relative odz-pb-48"><!> <!></div>'),sL=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-16"><div class="odz-text-center"><div class="odz-text-6xl odz-mb-4"></div> <h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h2> <p class="odz-text-sm odz-text-gray-600">        </p></div> <div class="odz-w-full odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function TB(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(hr,"$fixedEstimateStore",t),s=()=>Gr(ks,"$shopStore",t),i=()=>Gr(It,"$estimateStore",t),a=Ue();let A=vt(e,"productId",8),d=vt(e,"estimateId",8,void 0),c=vt(e,"idx",8,void 0),u=vt(e,"step",12,0),h=vt(e,"onNext",8,void 0),f=Ue(null),g=Ue(!1),m=Ue(null),y=Ue(!1);function _(){var ce;if(d()&&d()!=="temp")return console.log(" getInitialMethod: Edit  - selection  (DB  )"),"selection";if(typeof window<"u"&&A())try{let be=`fixedEstimate_${A()}_${d()||"temp"}_${c()}`,x=window.sessionStorage.getItem(be);if(x||(be=`fixedEstimate_${A()}_${d()||"temp"}`,x=window.sessionStorage.getItem(be)),x){const F=JSON.parse(x);if((ce=F.printSelection)!=null&&ce.currentMethod)return F.printSelection.currentMethod}}catch{}return"selection"}let C=Ue(_()),I=null;const N=[{id:"simple",title:"  ",description:"   ",icon:"",features:[" ","  "," "],color:"from-green-500 to-emerald-600"},{id:"detailed",title:"  ",description:"  ",icon:"",features:[" "," "," /"],color:"from-blue-500 to-indigo-600"},{id:"self-design",title:" ",description:"  ",icon:"",features:[" "," "," "],color:"from-purple-500 to-pink-600"},{id:"none",title:"  ",description:"    ",icon:"",features:[" ","  "," "],color:"from-gray-500 to-slate-600"}];function k(se){const ce=se;if(b(C,ce),ce!=="selection"&&Rn.selectPrintMethod(A(),ce),ce!=="selection"&&hr.selectPrintMethod(ce),ce!=="selection"&&c()!==void 0&&It.updateProductPrintType(c(),ce),typeof window<"u"&&(ce==="simple"||ce==="none")){try{const be=d()||"temp";[`detailedPrint_${A()}_${be}`,`detailedPrint_${A()}_${be}_${c()}`,`detailedPrint_${A()}`].forEach(F=>{try{sessionStorage.removeItem(F)}catch{}})}catch(be){console.error(" detailedPrint    :",be)}d()&&c()!==null&&pt.from("estimate_prints").delete().eq("estimate_id",d()).eq("idx",c()).then(({error:be})=>{be?console.error(" estimate_prints  :",be):console.log(" estimate_prints   (/ )")})}if(typeof window<"u"&&ce!=="selection"){const be=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:ce,idx:c(),estimateId:d(),source:"printMethodChange"}});window.dispatchEvent(be)}ce==="none"&&(u(0),Rn.completePrintSelection(A()),hr.completePrintSelection(),h()&&h()())}function W(){b(C,"selection"),Rn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1}),hr.updatePrintSelection({currentMethod:"selection",isCompleted:!1,lastUpdated:Date.now()})}function V(){b(C,"selection"),A()&&Rn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1})}function H(){u(0),Rn.completePrintSelection(A()),hr.completePrintSelection(),h()&&h()()}function J(se){se!=null&&se.product&&It.update(ce=>{const be=[...ce.products];let x=be.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===se.product.id});if(x===-1){const F={product:se.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:se.addonProductsMap||{},productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};be.push(F),x=be.length-1}else be[x].prints||(be[x]={...be[x],prints:[]});return{...ce,products:be,index:x}})}async function xe(se=!1){var ce,be;if(A()){b(g,!0),b(m,null);try{const x=o().productSelection;if(se&&x&&x.product&&x.productId===A()){if(b(f,{product:x.product,addons:x.addons||[],addonItems:x.addonItems||[]}),J(l(f)),typeof window<"u"&&d())try{const E=d(),U=`fixedEstimate_${A()}_${E}`,P=window.sessionStorage.getItem(U);if(P){const T=JSON.parse(P);(ce=T.printSelection)!=null&&ce.currentMethod&&(b(C,T.printSelection.currentMethod),console.log(" Edit  (print.svelte): sessionStorage   :",{currentMethod:l(C),key:U}))}}catch{}return}if(!se){const E=Rn.restoreFromSession(A());if(E!=null&&E.isLoaded){b(f,E),J(l(f)),E.printSelection&&b(C,E.printSelection.currentMethod);return}}const F=Rn.getProductData(A());F!=null&&F.isLoaded?(b(f,F),J(l(f)),!se&&F.printSelection&&b(C,F.printSelection.currentMethod)):(b(f,await Rn.loadIntegratedProductData(A(),s().id)),J(l(f))),(be=l(f))!=null&&be.process}catch(x){b(m,x instanceof Error?x.message:"   .")}finally{b(g,!1)}}}function M(){const se=Rn.getProductData(A());if(!(se!=null&&se.printSelection))return;const ce=se.printSelection;b(C,ce.currentMethod)}function O(){I=Rn.subscribe(se=>{const ce=se.productDataCache[A()];if(ce!=null&&ce.printSelection){const x=ce.printSelection.currentMethod;x!==l(C)&&b(C,x)}})}async function X(){if(typeof window>"u"||!d()||d()==="temp")return"selection";console.log(" populateSessionStorageFromDB :",{productId:A(),estimateId:d(),idx:c()});let se="selection";try{const ce=await a1(d()),be=c()??i().index??0,x=ce.filter(U=>U.idx===be);if(x.length>0){console.log(" SimplePrint DB  :",x.length,"");const U=x.map(T=>({objectId:T.object_id||"",title:T.title||"",printMethod:T.print_method||"",savedFileInfo:T.uploads?typeof T.uploads=="string"?JSON.parse(T.uploads):T.uploads:[]})),P=`simplePrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(U)),console.log(" SimplePrint sessionStorage  :",P),se="simple"}const E=i().products[be];if(E!=null&&E.prints&&E.prints.length>0){console.log(" DetailedPrint   :",E.prints.length,"");const U=E.prints.map(T=>({template:T.template,parentTemplates:T.parentTemplates||[],uploads:T.uploads||null,objectId:T.objectId||"",title:T.title||"",colors:T.colors||[],price:T.price||0,variant_id:T.variant_id||null,nameSheet:T.nameSheet||null,discountInfo:T.discountInfo||null})),P=`detailedPrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(U)),console.log(" DetailedPrint sessionStorage  :",P,U),se="detailed"}if(se!=="selection"){const U=`fixedEstimate_${A()}_${d()}_${be}`,P=window.sessionStorage.getItem(U);let T=P?JSON.parse(P):{};T.printSelection={...T.printSelection,currentMethod:se,isCompleted:!0,lastUpdated:Date.now()},window.sessionStorage.setItem(U,JSON.stringify(T)),console.log(" fixedEstimate sessionStorage  :",U,se)}return console.log(" populateSessionStorageFromDB .  :",se),se}catch(ce){return console.error(" populateSessionStorageFromDB :",ce),"selection"}}Fn(async()=>{var ce,be;const se=d()&&d()!=="temp";if(se){b(y,!0),console.log(" Edit : DB   ");try{const x=await X();x!=="selection"&&(b(C,x),console.log(" Edit : DB    :",x))}finally{b(y,!1),console.log(" Edit : DB   , currentMethod:",l(C))}}if(hr.initialize(A(),d(),c()),O(),await xe(se),se||M(),!se){const x=i().products.find(E=>{var U;return((U=E==null?void 0:E.product)==null?void 0:U.id)===A()});if((!((ce=l(f))!=null&&ce.printSelection)||!l(f).printSelection.currentMethod||l(f).printSelection.currentMethod==="selection")&&(x!=null&&x.prints)&&x.prints.length>0)try{const E=x.prints[0],U=(E==null?void 0:E.method)??((be=E==null?void 0:E.parentTemplates)!=null&&be.length?"detailed":"simple");Rn.updatePrintSelection(A(),{currentMethod:U??l(C),selectedTemplate:E==null?void 0:E.template,selectedColors:E==null?void 0:E.colors,printConfig:E==null?void 0:E.config}),b(C,U??l(C)),console.log("      (currentMethod ):",{derivedMethod:U,fallbackMethod:l(C)})}catch{}}}),Qo(()=>{I&&I()}),Jt(()=>l(f),()=>{b(a,N.filter(se=>{var ce,be;return se.id==="self-design"?((be=(ce=l(f))==null?void 0:ce.product)==null?void 0:be.self_design_enabled)===!0:!0}))}),Jt(()=>(l(C),l(a)),()=>{l(C)!=="selection"&&(l(a).some(ce=>ce.id===l(C))||b(C,"selection"))}),to(),Rr();var te=kt(),le=ft(te);{var ne=se=>{var ce=XT();L(se,ce)},Be=se=>{var ce=kt(),be=ft(ce);{var x=E=>{var U=YT(),P=w(U),T=z(w(P),2),R=z(w(T),2),q=w(R),j=z(P,2);He(()=>Le(q,l(m))),at("click",j,()=>xe(d()&&d()!=="temp")),L(E,U)},F=E=>{var U=kt(),P=ft(U);{var T=q=>{var j=JT();L(q,j)},R=q=>{var j=kt(),Ae=ft(j);{var Ee=Oe=>{var G=tL(),D=z(w(G),2);Yt(D,5,()=>l(a),Ar,(oe,ye)=>{var Ne=eL(),we=w(Ne),Fe=w(we),ue=z(Fe,2),De=w(ue),Pe=w(De),he=z(De,2),ee=w(he),ge=z(he,2),Se=w(ge),Me=z(ge,2);Yt(Me,5,()=>l(ye).features,Ar,(Ye,Ce)=>{var de=ZT(),Te=z(w(de),2),qe=w(Te);He(()=>Le(qe,l(Ce))),L(Ye,de)});var Qe=z(ue,2),ot=w(Qe);He(()=>{Cr(Fe,`odz-absolute odz-inset-0 odz-bg-gradient-to-br ${l(ye).color??""}
                                   odz-rounded-xl odz-opacity-0 group-hover:odz-opacity-10 odz-transition-opacity odz-duration-300`),Le(Pe,l(ye).icon),Le(ee,l(ye).title),Le(Se,l(ye).description),Cr(ot,`odz-w-full odz-bg-gradient-to-r ${l(ye).color??""}
                                          odz-text-white odz-font-semibold odz-py-2 odz-px-4 odz-rounded-lg
                                          odz-transition-all odz-duration-200 hover:odz-shadow-md
                                          group-hover:odz-shadow-lg odz-text-center`)}),at("click",Ne,()=>k(l(ye).id)),L(oe,Ne)});var ie=z(D,2);const me=dt(()=>d()||null),pe=dt(()=>c()!==void 0?c():null);_p(ie,{get productId(){return A()},get estimateId(){return l(me)},get idx(){return l(pe)},debugSource:"print-selection",buttonConfig:{type:"double",buttons:[{text:" ",action:()=>{if(typeof window<"u"){const oe=new CustomEvent("changeTab",{detail:"product"});window.dispatchEvent(oe)}},style:"secondary",icon:"arrow-left"},{text:"",action:H,style:"primary",icon:"check"}]}}),L(Oe,G)},_e=Oe=>{var G=kt(),D=ft(G);{var ie=pe=>{var oe=rL(),ye=w(oe);CQ(ye,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:H,onCancel:W}),L(pe,oe)},me=pe=>{var oe=kt(),ye=ft(oe);{var Ne=Fe=>{var ue=nL(),De=w(ue);FT(De,{get productId(){return A()},get estimateId(){return d()},onComplete:H,onCancel:W}),L(Fe,ue)},we=Fe=>{var ue=kt(),De=ft(ue);{var Pe=ee=>{var ge=oL(),Se=w(ge);UT(Se,{get productId(){return A()},onComplete:H});var Me=z(Se,2);const Qe=dt(()=>d()||null),ot=dt(()=>c()!==void 0?c():null);_p(Me,{get productId(){return A()},get estimateId(){return l(Qe)},get idx(){return l(ot)},debugSource:"print-self-design",buttonConfig:{type:"single",buttons:[{text:"",action:H,style:"primary",icon:"check",size:"large"}]}}),L(ee,ge)},he=ee=>{var ge=kt(),Se=ft(ge);{var Me=Qe=>{var ot=sL(),Ye=z(w(ot),2),Ce=w(Ye),de=z(Ce,2);at("click",Ce,W),at("click",de,H),L(Qe,ot)};ze(Se,Qe=>{l(C)==="none"&&Qe(Me)},!0)}L(ee,ge)};ze(De,ee=>{l(C)==="self-design"?ee(Pe):ee(he,!1)},!0)}L(Fe,ue)};ze(ye,Fe=>{l(C)==="detailed"?Fe(Ne):Fe(we,!1)},!0)}L(pe,oe)};ze(D,pe=>{l(C)==="simple"?pe(ie):pe(me,!1)},!0)}L(Oe,G)};ze(Ae,Oe=>{l(C)==="selection"?Oe(Ee):Oe(_e,!1)},!0)}L(q,j)};ze(P,q=>{l(y)?q(T):q(R,!1)},!0)}L(E,U)};ze(be,E=>{l(m)?E(x):E(F,!1)},!0)}L(se,ce)};ze(le,se=>{l(g)?se(ne):se(Be,!1)})}L(n,te),S_(e,"resetPrintTab",V);var Z=Mr({resetPrintTab:V});return r(),Z}/*!
* html2canvas-pro 1.5.8 <https://yorickshan.github.io/html2canvas-pro/>
* Copyright (c) 2024 yorickshan <https://github.com/yorickshan>
* Released under MIT License
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kv=function(n,e){return Kv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},Kv(n,e)};function zi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $v=function(){return $v=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$v.apply(this,arguments)};function es(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,[])).next())})}function jo(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(c){return A([d,c])}}function A(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],o=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function sf(n,e,t){if(arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var Ia=function(){function n(e,t,r,o){this.left=e,this.top=t,this.width=r,this.height=o}return n.prototype.add=function(e,t,r,o){return new n(this.left+e,this.top+t,this.width+r,this.height+o)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(o){return o.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),cg=function(n,e){return Ia.fromClientRect(n,e.getBoundingClientRect())},iL=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),o=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Ia(0,0,r,o)},ug=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},Wn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var af=0;af<ny.length;af++)aL[ny.charCodeAt(af)]=af;var oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Af=0;Af<oy.length;Af++)Vc[oy.charCodeAt(Af)]=Af;var AL=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=Vc[n.charCodeAt(r)],i=Vc[n.charCodeAt(r+1)],a=Vc[n.charCodeAt(r+2)],A=Vc[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},lL=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},dL=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},il=5,O1=11,S0=2,cL=O1-il,LB=65536>>il,uL=1<<il,E0=uL-1,hL=1024>>il,fL=LB+hL,pL=fL,gL=32,vL=pL+gL,mL=65536>>O1,wL=1<<cL,yL=wL-1,sy=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},bL=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},_L=function(n,e){var t=AL(n),r=Array.isArray(t)?dL(t):new Uint32Array(t),o=Array.isArray(t)?lL(t):new Uint16Array(t),s=24,i=sy(o,s/2,r[4]/2),a=r[5]===2?sy(o,(s+r[4])/2):bL(r,Math.ceil((s+r[4])/4));return new BL(r[0],r[1],r[2],r[3],i,a)},BL=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>il],t=(t<<S0)+(e&E0),this.data[t];if(e<=65535)return t=this.index[LB+(e-55296>>il)],t=(t<<S0)+(e&E0),this.data[t];if(e<this.highStart)return t=vL-mL+(e>>O1),t=this.index[t],t+=e>>il&yL,t=this.index[t],t=(t<<S0)+(e&E0),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lf=0;lf<iy.length;lf++)xL[iy.charCodeAt(lf)]=lf;var zL="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ay=50,CL=1,PB=2,kB=3,SL=4,EL=5,Ay=7,OB=8,ly=9,dA=10,Vv=11,dy=12,Gv=13,FL=14,Gc=15,Wv=16,df=17,kc=18,IL=19,cy=20,Xv=21,Oc=22,F0=23,ed=24,Is=25,Wc=26,Xc=27,td=28,UL=29,VA=30,QL=31,cf=32,uf=33,Yv=34,Jv=35,Zv=36,Fu=37,em=38,jf=39,Rf=40,I0=41,DB=42,TL=43,LL=[9001,65288],NB="!",Lr="",hf="",tm=_L(zL),da=[VA,Zv],rm=[CL,PB,kB,EL],MB=[dA,OB],uy=[Xc,Wc],PL=rm.concat(MB),hy=[em,jf,Rf,Yv,Jv],kL=[Gc,Gv],OL=function(n,e){e===void 0&&(e="strict");var t=[],r=[],o=[];return n.forEach(function(s,i){var a=tm.get(s);if(a>ay?(o.push(!0),a-=ay):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),t.push(Wv);if(a===SL||a===Vv){if(i===0)return r.push(i),t.push(VA);var A=t[i-1];return PL.indexOf(A)===-1?(r.push(r[i-1]),t.push(A)):(r.push(i),t.push(VA))}if(r.push(i),a===QL)return t.push(e==="strict"?Xv:Fu);if(a===DB||a===UL)return t.push(VA);if(a===TL)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Fu):t.push(VA);t.push(a)}),[r,t,o]},U0=function(n,e,t,r){var o=r[t];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var s=t;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==dA)break}if(o===dA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==dA)break}if(a!==dA)break}return!1},fy=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===dA)t--;else return r}return 0},DL=function(n,e,t,r,o){if(t[r]===0)return Lr;var s=r-1;if(Array.isArray(o)&&o[s]===!0)return Lr;var i=s-1,a=s+1,A=e[s],d=i>=0?e[i]:0,c=e[a];if(A===PB&&c===kB)return Lr;if(rm.indexOf(A)!==-1)return NB;if(rm.indexOf(c)!==-1||MB.indexOf(c)!==-1)return Lr;if(fy(s,e)===OB)return hf;if(tm.get(n[s])===Vv||(A===cf||A===uf)&&tm.get(n[a])===Vv||A===Ay||c===Ay||A===ly||[dA,Gv,Gc].indexOf(A)===-1&&c===ly||[df,kc,IL,ed,td].indexOf(c)!==-1||fy(s,e)===Oc||U0(F0,Oc,s,e)||U0([df,kc],Xv,s,e)||U0(dy,dy,s,e))return Lr;if(A===dA)return hf;if(A===F0||c===F0)return Lr;if(c===Wv||A===Wv)return hf;if([Gv,Gc,Xv].indexOf(c)!==-1||A===FL||d===Zv&&kL.indexOf(A)!==-1||A===td&&c===Zv||c===cy||da.indexOf(c)!==-1&&A===Is||da.indexOf(A)!==-1&&c===Is||A===Xc&&[Fu,cf,uf].indexOf(c)!==-1||[Fu,cf,uf].indexOf(A)!==-1&&c===Wc||da.indexOf(A)!==-1&&uy.indexOf(c)!==-1||uy.indexOf(A)!==-1&&da.indexOf(c)!==-1||[Xc,Wc].indexOf(A)!==-1&&(c===Is||[Oc,Gc].indexOf(c)!==-1&&e[a+1]===Is)||[Oc,Gc].indexOf(A)!==-1&&c===Is||A===Is&&[Is,td,ed].indexOf(c)!==-1)return Lr;if([Is,td,ed,df,kc].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===Is)return Lr;if([td,ed].indexOf(h)!==-1)u--;else break}if([Xc,Wc].indexOf(c)!==-1)for(var u=[df,kc].indexOf(A)!==-1?i:s;u>=0;){var h=e[u];if(h===Is)return Lr;if([td,ed].indexOf(h)!==-1)u--;else break}if(em===A&&[em,jf,Yv,Jv].indexOf(c)!==-1||[jf,Yv].indexOf(A)!==-1&&[jf,Rf].indexOf(c)!==-1||[Rf,Jv].indexOf(A)!==-1&&c===Rf||hy.indexOf(A)!==-1&&[cy,Wc].indexOf(c)!==-1||hy.indexOf(c)!==-1&&A===Xc||da.indexOf(A)!==-1&&da.indexOf(c)!==-1||A===ed&&da.indexOf(c)!==-1||da.concat(Is).indexOf(A)!==-1&&c===Oc&&LL.indexOf(n[a])===-1||da.concat(Is).indexOf(c)!==-1&&A===kc)return Lr;if(A===I0&&c===I0){for(var f=t[s],g=1;f>0&&(f--,e[f]===I0);)g++;if(g%2!==0)return Lr}return A===cf&&c===uf?Lr:hf},NL=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=OL(n,e.lineBreak),r=t[0],o=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[Is,VA,DB].indexOf(a)!==-1?Fu:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,o,i]},ML=function(){function n(e,t,r,o){this.codePoints=e,this.required=t===NB,this.start=r,this.end=o}return n.prototype.slice=function(){return Wn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),HL=function(n,e){var t=ug(n),r=NL(t,e),o=r[0],s=r[1],i=r[2],a=t.length,A=0,d=0;return{next:function(){if(d>=a)return{done:!0,value:null};for(var c=Lr;d<a&&(c=DL(t,s,o,++d,i))===Lr;);if(c!==Lr||d===a){var u=new ML(t,c,A,d);return A=d,{value:u,done:!1}}return{done:!0,value:null}}}},jL=1,RL=2,$u=4,py=8,Bp=10,gy=47,Au=92,qL=9,KL=32,ff=34,Dc=61,$L=35,VL=36,GL=37,pf=39,gf=40,Nc=41,WL=95,fs=45,XL=33,YL=60,JL=62,ZL=64,e6=91,t6=93,r6=61,n6=123,vf=63,o6=125,vy=124,s6=126,i6=128,my=65533,Q0=42,tl=43,a6=44,A6=58,l6=59,Iu=46,d6=0,c6=8,u6=11,h6=14,f6=31,p6=127,Ti=-1,HB=48,jB=97,RB=101,g6=102,v6=117,m6=122,qB=65,KB=69,$B=70,w6=85,y6=90,Ro=function(n){return n>=HB&&n<=57},b6=function(n){return n>=55296&&n<=57343},rd=function(n){return Ro(n)||n>=qB&&n<=$B||n>=jB&&n<=g6},_6=function(n){return n>=jB&&n<=m6},B6=function(n){return n>=qB&&n<=y6},x6=function(n){return _6(n)||B6(n)},z6=function(n){return n>=i6},mf=function(n){return n===Bp||n===qL||n===KL},xp=function(n){return x6(n)||z6(n)||n===WL},wy=function(n){return xp(n)||Ro(n)||n===fs},C6=function(n){return n>=d6&&n<=c6||n===u6||n>=h6&&n<=f6||n===p6},iA=function(n,e){return n!==Au?!1:e!==Bp},wf=function(n,e,t){return n===fs?xp(e)||iA(e,t):xp(n)?!0:!!(n===Au&&iA(n,e))},T0=function(n,e,t){return n===tl||n===fs?Ro(e)?!0:e===Iu&&Ro(t):Ro(n===Iu?e:n)},S6=function(n){var e=0,t=1;(n[e]===tl||n[e]===fs)&&(n[e]===fs&&(t=-1),e++);for(var r=[];Ro(n[e]);)r.push(n[e++]);var o=r.length?parseInt(Wn.apply(void 0,r),10):0;n[e]===Iu&&e++;for(var s=[];Ro(n[e]);)s.push(n[e++]);var i=s.length,a=i?parseInt(Wn.apply(void 0,s),10):0;(n[e]===KB||n[e]===RB)&&e++;var A=1;(n[e]===tl||n[e]===fs)&&(n[e]===fs&&(A=-1),e++);for(var d=[];Ro(n[e]);)d.push(n[e++]);var c=d.length?parseInt(Wn.apply(void 0,d),10):0;return t*(o+a*Math.pow(10,-i))*Math.pow(10,A*c)},E6={type:2},F6={type:3},I6={type:4},U6={type:13},Q6={type:8},T6={type:21},L6={type:9},P6={type:10},k6={type:11},O6={type:12},D6={type:14},yf={type:23},N6={type:1},M6={type:25},H6={type:24},j6={type:26},R6={type:27},q6={type:28},K6={type:29},$6={type:31},nm={type:32},VB=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(ug(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==nm;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ff:return this.consumeStringToken(ff);case $L:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(wy(t)||iA(r,o)){var s=wf(t,r,o)?RL:jL,i=this.consumeName();return{type:5,value:i,flags:s}}break;case VL:if(this.peekCodePoint(0)===Dc)return this.consumeCodePoint(),U6;break;case pf:return this.consumeStringToken(pf);case gf:return E6;case Nc:return F6;case Q0:if(this.peekCodePoint(0)===Dc)return this.consumeCodePoint(),D6;break;case tl:if(T0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case a6:return I6;case fs:var a=e,A=this.peekCodePoint(0),d=this.peekCodePoint(1);if(T0(a,A,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(wf(a,A,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===fs&&d===JL)return this.consumeCodePoint(),this.consumeCodePoint(),H6;break;case Iu:if(T0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case gy:if(this.peekCodePoint(0)===Q0)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Q0&&(c=this.consumeCodePoint(),c===gy))return this.consumeToken();if(c===Ti)return this.consumeToken()}break;case A6:return j6;case l6:return R6;case YL:if(this.peekCodePoint(0)===XL&&this.peekCodePoint(1)===fs&&this.peekCodePoint(2)===fs)return this.consumeCodePoint(),this.consumeCodePoint(),M6;break;case ZL:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(wf(u,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case e6:return q6;case Au:if(iA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case t6:return K6;case r6:if(this.peekCodePoint(0)===Dc)return this.consumeCodePoint(),Q6;break;case n6:return k6;case o6:return O6;case v6:case w6:var g=this.peekCodePoint(0),m=this.peekCodePoint(1);return g===tl&&(rd(m)||m===vf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case vy:if(this.peekCodePoint(0)===Dc)return this.consumeCodePoint(),L6;if(this.peekCodePoint(0)===vy)return this.consumeCodePoint(),T6;break;case s6:if(this.peekCodePoint(0)===Dc)return this.consumeCodePoint(),P6;break;case Ti:return nm}return mf(e)?(this.consumeWhiteSpace(),$6):Ro(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):xp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Wn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();rd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===vf&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(Wn.apply(void 0,e.map(function(A){return A===vf?HB:A})),16),s=parseInt(Wn.apply(void 0,e.map(function(A){return A===vf?$B:A})),16);return{type:30,start:o,end:s}}var i=parseInt(Wn.apply(void 0,e),16);if(this.peekCodePoint(0)===fs&&rd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];rd(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(Wn.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===gf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ti)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===pf||t===ff){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ti||this.peekCodePoint(0)===Nc)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),yf)}for(;;){var o=this.consumeCodePoint();if(o===Ti||o===Nc)return{type:22,value:Wn.apply(void 0,e)};if(mf(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ti||this.peekCodePoint(0)===Nc?(this.consumeCodePoint(),{type:22,value:Wn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yf);if(o===ff||o===pf||o===gf||C6(o))return this.consumeBadUrlRemnants(),yf;if(o===Au)if(iA(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),yf;else e.push(o)}},n.prototype.consumeWhiteSpace=function(){for(;mf(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Nc||e===Ti)return;iA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var o=Math.min(t,e);r+=Wn.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var o=this._value[r];if(o===Ti||o===void 0||o===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(o===Bp)return this._value.splice(0,r),N6;if(o===Au){var s=this._value[r+1];s!==Ti&&s!==void 0&&(s===Bp?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):iA(o,s)&&(t+=this.consumeStringSlice(r),t+=Wn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=$u,r=this.peekCodePoint(0);for((r===tl||r===fs)&&e.push(this.consumeCodePoint());Ro(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===Iu&&Ro(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=py;Ro(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===KB||r===RB)&&((o===tl||o===fs)&&Ro(s)||Ro(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=py;Ro(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[S6(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],o=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(wf(o,s,i)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return o===GL?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(rd(e)){for(var t=Wn(e);rd(this.peekCodePoint(0))&&t.length<6;)t+=Wn(this.consumeCodePoint());mf(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||b6(r)||r>1114111?my:r}return e===Ti?my:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(wy(t))e+=Wn(t);else if(iA(t,this.peekCodePoint(0)))e+=Wn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),GB=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new VB;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||G6(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),SA=function(n){return n.type===15},ao=function(n){return n.type===17},Dr=function(n){return n.type===20},V6=function(n){return n.type===0},om=function(n,e){return Dr(n)&&n.value===e},WB=function(n){return n.type!==31},Uo=function(n){return n.type!==31&&n.type!==4},Ji=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},G6=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},_A=function(n){return n.type===17||n.type===15},Sn=function(n){return n.type===16||_A(n)},XB=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Io={type:17,number:0,flags:$u},D1={type:16,number:50,flags:$u},cA={type:16,number:100,flags:$u},Yc=function(n,e,t){var r=n[0],o=n[1];return[ln(r,e),ln(typeof o<"u"?o:r,t)]},ln=function(n,e){if(n.type===16)return n.number/100*e;if(SA(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},YB="deg",JB="grad",ZB="rad",ex="turn",hg={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case YB:return Math.PI*e.number/180;case JB:return Math.PI/200*e.number;case ZB:return e.number;case ex:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},tx=function(n){return n.type===15&&(n.unit===YB||n.unit===JB||n.unit===ZB||n.unit===ex)},rx=function(n){var e=n.filter(Dr).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Io,Io];case"to top":case"bottom":return Js(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Io,cA];case"to right":case"left":return Js(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[cA,cA];case"to bottom":case"top":return Js(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[cA,Io];case"to left":case"right":return Js(270)}return 0},Js=function(n){return Math.PI*n/180},pA=function(n){return(255&n)===0},yo=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,o=255&n>>24;return e<255?"rgba(".concat(o,",").concat(r,",").concat(t,",").concat(e/255,")"):"rgb(".concat(o,",").concat(r,",").concat(t,")")},Xi=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},zp=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},yl=function(n){return(n[0].type===20?n[0].value:"unknown")==="from"},qn=function(n,e,t){return Math.min(Math.max(n,e),t)},_s=function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[3]*e[0]+n[4]*e[1]+n[5]*e[2],n[6]*e[0]+n[7]*e[1]+n[8]*e[2]]},W6=function(n){return Xi(qn(Math.round(n[0]*255),0,255),qn(Math.round(n[1]*255),0,255),qn(Math.round(n[2]*255),0,255),qn(n[3],0,1))},N1=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],s=bl([e,t,r]);return Xi(qn(Math.round(s[0]*255),0,255),qn(Math.round(s[1]*255),0,255),qn(Math.round(s[2]*255),0,255),o)},Vu=function(n){var e=EA([n[0],n[1],n[2]]);return N1([e[0],e[1],e[2],n[3]])},X6=function(n,e){if(yl(e.filter(Uo)))throw new Error("Relative color not supported for lab()");var t=fg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=bl(EA(vg([r,o,s])));return Xi(qn(Math.round(a[0]*255),0,255),qn(Math.round(a[1]*255),0,255),qn(Math.round(a[2]*255),0,255),i)},Y6=function(n,e){if(yl(e.filter(Uo)))throw new Error("Relative color not supported for oklab()");var t=fg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=bl(EA(gg([r,o,s])));return Xi(qn(Math.round(a[0]*255),0,255),qn(Math.round(a[1]*255),0,255),qn(Math.round(a[2]*255),0,255),i)},J6=function(n,e){if(yl(e.filter(Uo)))throw new Error("Relative color not supported for oklch()");var t=sx(e),r=t[0],o=t[1],s=t[2],i=t[3],a=bl(EA(gg(pg([r,o,s]))));return Xi(qn(Math.round(a[0]*255),0,255),qn(Math.round(a[1]*255),0,255),qn(Math.round(a[2]*255),0,255),i)},Z6=function(n,e){if(yl(e.filter(Uo)))throw new Error("Relative color not supported for lch()");var t=ox(e),r=t[0],o=t[1],s=t[2],i=t[3],a=bl(EA(vg(pg([r,o,s]))));return Xi(qn(Math.round(a[0]*255),0,255),qn(Math.round(a[1]*255),0,255),qn(Math.round(a[2]*255),0,255),i)},nx=function(n,e){var t=e.filter(Uo),r=t[0],o=t[1],s=t[2],i=t[3],a=(r.type===17?Js(r.number):hg.parse(n,r))/(Math.PI*2),A=Sn(o)?o.number/100:0,d=Sn(s)?s.number/100:0,c=typeof i<"u"&&Sn(i)?ln(i,1):1;return[a,A,d,c]},yy=function(n,e){if(yl(e))throw new Error("Relative color not supported for hsl()");var t=nx(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=ax([r,o,s]);return Xi(a[0]*255,a[1]*255,a[2]*255,o===0?1:i)},ox=function(n){var e=n.filter(Uo),t=Sn(e[0])?e[0].number:0,r=Sn(e[1])?e[1].number:0,o=ao(e[2])||SA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Sn(e[4])?ln(e[4],1):1;return[t,r,o,s]},fg=function(n){var e=n.filter(Uo),t=e[0].type===16?e[0].number/100:ao(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:ao(e[1])?e[1].number:0,o=ao(e[2])||SA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Sn(e[4])?ln(e[4],1):1;return[t,r,o,s]},sx=function(n){var e=n.filter(Uo),t=e[0].type===16?e[0].number/100:ao(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:ao(e[1])?e[1].number:0,o=ao(e[2])||SA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Sn(e[4])?ln(e[4],1):1;return[t,r,o,s]},ix=function(n){return _s([1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371],n)},M1=function(n){return _s([.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124],n)},L0=function(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n},ax=function(n){var e=n[0],t=n[1],r=n[2];if(t===0)return[r*255,r*255,r*255];var o=r<=.5?r*(t+1):r+t-r*t,s=r*2-o,i=L0(s,o,e+1/3),a=L0(s,o,e),A=L0(s,o,e-1/3);return[i,a,A]},pg=function(n){var e=n[0],t=n[1],r=n[2];return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},gg=function(n){var e=_s([1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092],n),t=e.map(function(r){return Math.pow(r,3)});return _s([1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],t)},vg=function(n){var e=(n[0]+16)/116,t=n[1]/500+e,r=e-n[2]/200,o=24389/27,s=24/116,i=[(t>s?Math.pow(t,3):(116*t-16)/o)*.3457/.3585,n[0]>8?Math.pow(e,3):n[0]/o,(r>s?Math.pow(r,3):(116*r-16)/o)*(1-.3457-.3585)/.3585];return M1([i[0],i[1],i[2]])},eP=function(n,e){var t=e.filter(Uo);if(t.length===3){var r=t.map(zp),o=r[0],s=r[1],i=r[2],a=im([o/255,s/255,i/255]),A=sm([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,1]}if(t.length===4){var h=t.map(zp),o=h[0],s=h[1],i=h[2],f=h[3],a=im([o/255,s/255,i/255]),g=sm([a[0],a[1],a[2]]),d=g[0],c=g[1],u=g[2];return[d,c,u,f]}return[0,0,0,1]},tP=function(n,e){var t=nx(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=im(ax([r,o,s])),A=sm([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,i]},rP=function(n,e){var t=fg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=vg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},nP=function(n,e){var t=ox(e),r=t[0],o=t[1],s=t[2],i=t[3],a=vg(pg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},oP=function(n,e){var t=sx(e),r=t[0],o=t[1],s=t[2],i=t[3],a=gg(pg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},sP=function(n,e){var t=fg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=gg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},iP=function(n){return M1([n[0],n[1],n[2]])},by=function(n){return n},aP=function(n){var e=ix([n[0],n[2],n[3]]),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},_y=function(n){return Vu([n[0],n[1],n[2],n[3]])},AP=function(n){var e=iP([n[0],n[1],n[2]]);return Vu([e[0],e[1],e[2],n[3]])},EA=function(n){return _s([3.2409699419045226,-1.537383177570094,-.4986107602930034,-.9692436362808796,1.8759675015077202,.04155505740717559,.05563007969699366,-.20397695888897652,1.0569715142428786],n)},sm=function(n){return _s([.41239079926595934,.357584339383878,.1804807884018343,.21263900587151027,.715168678767756,.07219231536073371,.01933081871559182,.11919477979462598,.9505321522496607],n)},bl=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r>.0031308?t*(1.055*Math.pow(r,1/2.4)-.055):12.92*e})},im=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r<=.04045?e/12.92:t*Math.pow((r+.055)/1.055,2.4)})},lP=function(n){var e=bl(EA([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},dP=function(n){var e=EA([n[0],n[1],n[2]]),t=e[0],r=e[1],o=e[2];return[qn(Math.round(t*255),0,255),qn(Math.round(r*255),0,255),qn(Math.round(o*255),0,255),n[3]]},cP=function(n){return _s([.4865709486482162,.26566769316909306,.1982172852343625,.2289745640697488,.6917385218365064,.079286914093745,0,.04511338185890264,1.043944368900976],n)},uP=function(n){return _s([2.493496911941425,-.9313836179191239,-.40271078445071684,-.8294889695615747,1.7626640603183463,.023624685841943577,.03584583024378447,-.07617238926804182,.9568845240076872],n)},hP=function(n){return n.map(function(e){var t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*Math.pow((e+.055)/1.055,2.4)||0})},fP=function(n){return bl(n)},pP=function(n){var e=hP([n[0],n[1],n[2]]);return cP([e[0],e[1],e[2]])},gP=function(n){var e=fP(uP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},vP=function(n){var e=pP([n[0],n[1],n[2]]);return Vu([e[0],e[1],e[2],n[3]])},mP=function(n){return _s([2.0415879038107465,-.5650069742788596,-.34473135077832956,-.9692436362808795,1.8759675015077202,.04155505740717557,.013444280632031142,-.11836239223101838,1.0151749943912054],n)},wP=function(n){return _s([.5766690429101305,.1855582379065463,.1882286462349947,.29734497525053605,.6273635662554661,.0752914584939978,.02703136138641234,.07068885253582723,.9913375368376388],n)},yP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,2.19921875)});return[e[0],e[1],e[2]]},bP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,.4547069271758437)});return[e[0],e[1],e[2]]},_P=function(n){var e=bP(mP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},BP=function(n){var e=EA(wP(yP([n[0],n[1],n[2]])));return N1([e[0],e[1],e[2],n[3]])},xP=function(n){return _s([.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602],n)},zP=function(n){return _s([1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452],n)},CP=function(n){return n.map(function(e){return e<16/512?e/16:Math.pow(e,1.8)})},SP=function(n){return n.map(function(e){return e>1/512?Math.pow(e,1/1.8):e*16})},EP=function(n){var e=CP([n[0],n[1],n[2]]);return M1(xP([e[0],e[1],e[2]]))},FP=function(n){var e=SP(zP(ix([n[0],n[1],n[2]]))),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},IP=function(n){var e=EP([n[0],n[1],n[2]]);return Vu([e[0],e[1],e[2],n[3]])},Cp=1.09929682680944,Ax=.018053968510807,UP=function(n){return n.map(function(e){return e<Ax*4.5?e/4.5:Math.pow((e+Cp-1)/Cp,1/.45)})},QP=function(n){return n.map(function(e){return e>=Ax?Cp*Math.pow(e,.45)-(Cp-1):4.5*e})},TP=function(n){return _s([.6369580483012914,.14461690358620832,.1688809751641721,.2627002120112671,.6779980715188708,.05930171646986196,0,.028072693049087428,1.060985057710791],n)},LP=function(n){return _s([1.716651187971268,-.355670783776392,-.25336628137366,-.666684351832489,1.616481236634939,.0157685458139111,.017639857445311,-.042770613257809,.942103121235474],n)},PP=function(n){var e=UP([n[0],n[1],n[2]]);return TP([e[0],e[1],e[2]])},kP=function(n){var e=QP(LP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},OP=function(n){var e=PP([n[0],n[1],n[2]]);return Vu([e[0],e[1],e[2],n[3]])},gA={name:"color",parse:function(n,e){if(e.type===18){var t=HP[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'.concat(e.name,'"'));return t(n,e.values)}if(e.type===5){var r=lx(e),o=r[0],s=r[1],i=r[2],a=r[3];return Xi(o,s,i,a)}if(e.type===20){var A=Ri[e.value.toUpperCase()];if(typeof A<"u")return A}return Ri.TRANSPARENT}},lx=function(n){if(n.value.length===3){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),1]}if(n.value.length===4){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3),o=n.value.substring(3,4);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),parseInt(o+o,16)/255]}if(n.value.length===6){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),1]}if(n.value.length===8){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6),o=n.value.substring(6,8);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),parseInt(o,16)/255]}return[0,0,0,1]},By=function(n,e){var t=e.filter(Uo);if(yl(t))throw new Error("Relative color not supported for rgb()");if(t.length===3){var r=t.map(zp),o=r[0],s=r[1],i=r[2];return Xi(o,s,i,1)}if(t.length===4){var a=t.map(zp),o=a[0],s=a[1],i=a[2],A=a[3];return Xi(o,s,i,A)}return 0},DP=function(n,e){var t=e.filter(Uo),r=t[0].type===20?t[0].value:"unknown",o=!yl(t);if(o){var s=r,i=xy[s];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(s,'" for color() function'));var a=ao(t[1])?t[1].number:0,A=ao(t[2])?t[2].number:0,d=ao(t[3])?t[3].number:0,c=t.length>4&&t[4].type===6&&t[4].value==="/"&&ao(t[5])?t[5].number:1;return i([a,A,d,c])}else{var u=function(le,ne){if(ao(ne))return ne.number;var Be=function(x){return x==="r"||x==="x"?0:x==="g"||x==="y"?1:2};if(Dr(ne)){var Z=Be(ne.value);return le[Z]}var se=function(x){for(var F=x.filter(Uo),E="(",U=0,P=F;U<P.length;U++){var T=P[U];E+=T.type===18&&T.name==="calc"?se(T.values):ao(T)?T.number:T.type===6||Dr(T)?T.value:""}return E+=")",E};if(ne.type===18){var ce=ne.values.filter(Uo);if(ne.name==="calc"){var be=se(ce).replace(/r|x/,le[0].toString()).replace(/g|y/,le[1].toString()).replace(/b|z/,le[2].toString());return new Function("return "+be)()}}return null},h=t[1].type===18?t[1].name:Dr(t[1])||t[1].type===5?"rgb":"unknown",f=Dr(t[2])?t[2].value:"unknown",g=t[1].type===18?t[1].values:Dr(t[1])?[t[1]]:[];if(Dr(t[1])){var m=Ri[t[1].value.toUpperCase()];if(typeof m>"u")throw new Error("Attempting to use unknown color in relative color 'from'");var y=Fd(n,t[1].value),_=255&y,C=255&y>>8,I=255&y>>16,N=255&y>>24;g=[{type:17,number:N,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:_>1?_/255:_,flags:1}]}else if(t[1].type===5){var k=lx(t[1]),N=k[0],I=k[1],C=k[2],_=k[3];g=[{type:17,number:N,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:_>1?_/255:_,flags:1}]}if(g.length===0)throw new Error("Attempting to use unknown color in relative color 'from'");if(f==="unknown")throw new Error("Attempting to use unknown colorspace in relative color 'to'");var W=NP[h],V=MP[f],H=xy[f];if(typeof W>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(h,'" for color() function'));if(typeof V>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(f,'" for color() function'));var J=W(n,g),xe=V(J),a=u(xe,t[3]),A=u(xe,t[4]),d=u(xe,t[5]),c=t.length>6&&t[6].type===6&&t[6].value==="/"&&ao(t[7])?t[7].number:1;if(a===null||A===null||d===null)throw new Error("Invalid relative color in color() function");return H([a,A,d,c])}},xy={srgb:W6,"srgb-linear":N1,"display-p3":vP,"a98-rgb":BP,"prophoto-rgb":IP,xyz:_y,"xyz-d50":AP,"xyz-d65":_y,rec2020:OP},NP={rgb:eP,hsl:tP,lab:rP,lch:nP,oklab:sP,oklch:oP},MP={srgb:lP,"srgb-linear":dP,"display-p3":gP,"a98-rgb":_P,"prophoto-rgb":FP,xyz:by,"xyz-d50":aP,"xyz-d65":by,rec2020:kP},HP={hsl:yy,hsla:yy,rgb:By,rgba:By,lch:Z6,oklch:J6,oklab:Y6,lab:X6,color:DP},Fd=function(n,e){return gA.parse(n,GB.create(e).parseComponentValue())},Ri={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},jP={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Dr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RP={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mg=function(n,e){var t=gA.parse(n,e[0]),r=e[1];return r&&Sn(r)?{color:t,stop:r}:{color:t,stop:null}},zy=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Io),r.stop===null&&(r.stop=cA);for(var o=[],s=0,i=0;i<n.length;i++){var a=n[i].stop;if(a!==null){var A=ln(a,e);A>s?o.push(A):o.push(s),s=A}else o.push(null)}for(var d=null,i=0;i<o.length;i++){var c=o[i];if(c===null)d===null&&(d=i);else if(d!==null){for(var u=i-d,h=o[d-1],f=(c-h)/(u+1),g=1;g<=u;g++)o[d+g-1]=f*g;d=null}}return n.map(function(m,y){var _=m.color;return{color:_,stop:Math.max(Math.min(1,o[y]/e),0)}})},qP=function(n,e,t){var r=e/2,o=t/2,s=ln(n[0],e)-r,i=o-ln(n[1],t);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},KP=function(n,e,t){var r=typeof n=="number"?n:qP(n,e,t),o=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,i=t/2,a=o/2,A=Math.sin(r-Math.PI/2)*a,d=Math.cos(r-Math.PI/2)*a;return[o,s-d,s+d,i-A,i+A]},ui=function(n,e){return Math.sqrt(n*n+e*e)},Cy=function(n,e,t,r,o){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(i,a){var A=a[0],d=a[1],c=ui(t-A,r-d);return(o?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:a,optimumDistance:c}:i},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},$P=function(n,e,t,r,o){var s=0,i=0;switch(n.size){case 0:n.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(t),Math.abs(t-o)));break;case 2:if(n.shape===0)s=i=Math.min(ui(e,t),ui(e,t-o),ui(e-r,t),ui(e-r,t-o));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-o))/Math.min(Math.abs(e),Math.abs(e-r)),A=Cy(r,o,e,t,!0),d=A[0],c=A[1];s=ui(d-e,(c-t)/a),i=a*s}break;case 1:n.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(t),Math.abs(t-o)));break;case 3:if(n.shape===0)s=i=Math.max(ui(e,t),ui(e,t-o),ui(e-r,t),ui(e-r,t-o));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-o))/Math.max(Math.abs(e),Math.abs(e-r)),u=Cy(r,o,e,t,!1),d=u[0],c=u[1];s=ui(d-e,(c-t)/a),i=a*s}break}return Array.isArray(n.size)&&(s=ln(n.size[0],r),i=n.size.length===2?ln(n.size[1],o):s),[s,i]},VP=function(n,e){var t=Js(180),r=[];return Ji(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&i.value==="to"){t=rx(o);return}else if(tx(i)){t=hg.parse(n,i);return}}var a=mg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},bf=function(n,e){var t=Js(180),r=[];return Ji(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=rx(o);return}else if(tx(i)){t=(hg.parse(n,i)+Js(270))%Js(360);return}}var a=mg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},GP=function(n,e){var t=Js(180),r=[],o=1,s=0,i=3,a=[];return Ji(e).forEach(function(A,d){var c=A[0];if(d===0){if(Dr(c)&&c.value==="linear"){o=1;return}else if(Dr(c)&&c.value==="radial"){o=2;return}}if(c.type===18){if(c.name==="from"){var u=gA.parse(n,c.values[0]);r.push({stop:Io,color:u})}else if(c.name==="to"){var u=gA.parse(n,c.values[0]);r.push({stop:cA,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Uo);if(h.length===2){var u=gA.parse(n,h[1]),f=h[0];ao(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:u})}}}}),o===1?{angle:(t+Js(180))%Js(360),stops:r,type:o}:{size:i,shape:s,stops:r,position:a,type:o}},dx="closest-side",cx="farthest-side",ux="closest-corner",hx="farthest-corner",fx="circle",px="ellipse",gx="cover",vx="contain",WP=function(n,e){var t=0,r=3,o=[],s=[];return Ji(e).forEach(function(i,a){var A=!0;if(a===0){var d=!1;A=i.reduce(function(u,h){if(d)if(Dr(h))switch(h.value){case"center":return s.push(D1),u;case"top":case"left":return s.push(Io),u;case"right":case"bottom":return s.push(cA),u}else(Sn(h)||_A(h))&&s.push(h);else if(Dr(h))switch(h.value){case fx:return t=0,!1;case px:return t=1,!1;case"at":return d=!0,!1;case dx:return r=0,!1;case gx:case cx:return r=1,!1;case vx:case ux:return r=2,!1;case hx:return r=3,!1}else if(_A(h)||Sn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},A)}if(A){var c=mg(n,i);o.push(c)}}),{size:r,shape:t,stops:o,position:s,type:2}},_f=function(n,e){var t=0,r=3,o=[],s=[];return Ji(e).forEach(function(i,a){var A=!0;if(a===0?A=i.reduce(function(c,u){if(Dr(u))switch(u.value){case"center":return s.push(D1),!1;case"top":case"left":return s.push(Io),!1;case"right":case"bottom":return s.push(cA),!1}else if(Sn(u)||_A(u))return s.push(u),!1;return c},A):a===1&&(A=i.reduce(function(c,u){if(Dr(u))switch(u.value){case fx:return t=0,!1;case px:return t=1,!1;case vx:case dx:return r=0,!1;case cx:return r=1,!1;case ux:return r=2,!1;case gx:case hx:return r=3,!1}else if(_A(u)||Sn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var d=mg(n,i);o.push(d)}}),{size:r,shape:t,stops:o,position:s,type:2}},XP=function(n){return n.type===1},YP=function(n){return n.type===2},H1={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=mx[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'.concat(e.name,'"'));return r(n,e.values)}throw new Error("Unsupported image type ".concat(e.type))}};function JP(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!mx[n.name])}var mx={"linear-gradient":VP,"-moz-linear-gradient":bf,"-ms-linear-gradient":bf,"-o-linear-gradient":bf,"-webkit-linear-gradient":bf,"radial-gradient":WP,"-moz-radial-gradient":_f,"-ms-radial-gradient":_f,"-o-radial-gradient":_f,"-webkit-radial-gradient":_f,"-webkit-gradient":GP},ZP={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return Uo(r)&&JP(r)}).map(function(r){return H1.parse(n,r)})}},ek={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Dr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tk={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Ji(e).map(function(t){return t.filter(Sn)}).map(XB)}},rk={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Ji(e).map(function(t){return t.filter(Dr).map(function(r){return r.value}).join(" ")}).map(nk)}},nk=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Id;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Id||(Id={}));var ok={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Ji(e).map(function(t){return t.filter(sk)})}},sk=function(n){return Dr(n)||Sn(n)},wg=function(n){return{name:"border-".concat(n,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},ik=wg("top"),ak=wg("right"),Ak=wg("bottom"),lk=wg("left"),yg=function(n){return{name:"border-radius-".concat(n),initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return XB(t.filter(Sn))}}},dk=yg("top-left"),ck=yg("top-right"),uk=yg("bottom-right"),hk=yg("bottom-left"),bg=function(n){return{name:"border-".concat(n,"-style"),initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},fk=bg("top"),pk=bg("right"),gk=bg("bottom"),vk=bg("left"),_g=function(n){return{name:"border-".concat(n,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e,t){return SA(t)?t.number:0}}},mk=_g("top"),wk=_g("right"),yk=_g("bottom"),bk=_g("left"),_k={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Bk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},xk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Dr).reduce(function(t,r){return t|zk(r.value)},0)}},zk=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ck={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Sk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Sp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Sp||(Sp={}));var Ek={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Sp.STRICT;case"normal":default:return Sp.NORMAL}}},Fk={name:"line-height",initialValue:"normal",prefix:!1,type:4},Sy=function(n,e){return Dr(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Sn(n)?ln(n,e):e},Ik={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:H1.parse(n,e)}},Uk={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},am={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bg=function(n){return{name:"margin-".concat(n),initialValue:"0",prefix:!1,type:4}},Qk=Bg("top"),Tk=Bg("right"),Lk=Bg("bottom"),Pk=Bg("left"),kk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Dr).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ok={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},xg=function(n){return{name:"padding-".concat(n),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Dk=xg("top"),Nk=xg("right"),Mk=xg("bottom"),Hk=xg("left"),jk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Rk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},qk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&om(e[0],"none")?[]:Ji(e).map(function(t){for(var r={color:Ri.TRANSPARENT,offsetX:Io,offsetY:Io,blur:Io},o=0,s=0;s<t.length;s++){var i=t[s];_A(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:r.blur=i,o++):r.color=gA.parse(n,i)}return r})}},Kk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},$k={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=Wk[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return t(e.values)}return null}},Vk=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Gk=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var o=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,o,s,i,a]:null},Wk={matrix:Vk,matrix3d:Gk},Ey={type:16,number:50,flags:$u},Xk=[Ey,Ey],Yk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Sn);return t.length!==2?Xk:[t[0],t[1]]}},Jk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},lu;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(lu||(lu={}));var Zk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return lu.BREAK_ALL;case"keep-all":return lu.KEEP_ALL;case"normal":default:return lu.NORMAL}}},eO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(ao(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},wx={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},tO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return ao(e)?e.number:1}},rO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Dr).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},oO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:t.push(o.value);break;case 17:t.push(o.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'".concat(o,"'")})}},sO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},iO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(ao(e))return e.number;if(Dr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},aO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Dr).map(function(t){return t.value})}},AO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},uo=function(n,e){return(n&e)!==0},lO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},dO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],o=e.filter(WB),s=0;s<o.length;s++){var i=o[s],a=o[s+1];if(i.type===20){var A=a&&ao(a)?a.number:1;r.push({counter:i.value,increment:A})}}return r}},cO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(WB),o=0;o<r.length;o++){var s=r[o],i=r[o+1];if(Dr(s)&&s.value!=="none"){var a=i&&ao(i)?i.number:0;t.push({counter:s.value,reset:a})}}return t}},uO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(SA).map(function(t){return wx.parse(n,t)})}},hO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],o=e.filter(V6);if(o.length%2!==0)return null;for(var s=0;s<o.length;s+=2){var i=o[s].value,a=o[s+1].value;r.push({open:i,close:a})}return r}},Fy=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},fO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&om(e[0],"none")?[]:Ji(e).map(function(t){for(var r={color:255,offsetX:Io,offsetY:Io,blur:Io,spread:Io,inset:!1},o=0,s=0;s<t.length;s++){var i=t[s];om(i,"inset")?r.inset=!0:_A(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:o===2?r.blur=i:r.spread=i,o++):r.color=gA.parse(n,i)}return r})}},pO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Dr).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},gO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return SA(e)?e.number:0}},mO={name:"objectFit",initialValue:"fill",prefix:!1,type:1,parse:function(n,e){return e.filter(Dr).reduce(function(t,r){return t|wO(r.value)},0)}},wO=function(n){switch(n){case"contain":return 2;case"cover":return 4;case"none":return 8;case"scale-down":return 16}return 0},yO=function(){function n(e,t){var r,o;this.animationDuration=Xt(e,uO,t.animationDuration),this.backgroundClip=Xt(e,jP,t.backgroundClip),this.backgroundColor=Xt(e,RP,t.backgroundColor),this.backgroundImage=Xt(e,ZP,t.backgroundImage),this.backgroundOrigin=Xt(e,ek,t.backgroundOrigin),this.backgroundPosition=Xt(e,tk,t.backgroundPosition),this.backgroundRepeat=Xt(e,rk,t.backgroundRepeat),this.backgroundSize=Xt(e,ok,t.backgroundSize),this.borderTopColor=Xt(e,ik,t.borderTopColor),this.borderRightColor=Xt(e,ak,t.borderRightColor),this.borderBottomColor=Xt(e,Ak,t.borderBottomColor),this.borderLeftColor=Xt(e,lk,t.borderLeftColor),this.borderTopLeftRadius=Xt(e,dk,t.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,ck,t.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,uk,t.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,hk,t.borderBottomLeftRadius),this.borderTopStyle=Xt(e,fk,t.borderTopStyle),this.borderRightStyle=Xt(e,pk,t.borderRightStyle),this.borderBottomStyle=Xt(e,gk,t.borderBottomStyle),this.borderLeftStyle=Xt(e,vk,t.borderLeftStyle),this.borderTopWidth=Xt(e,mk,t.borderTopWidth),this.borderRightWidth=Xt(e,wk,t.borderRightWidth),this.borderBottomWidth=Xt(e,yk,t.borderBottomWidth),this.borderLeftWidth=Xt(e,bk,t.borderLeftWidth),this.boxShadow=Xt(e,fO,t.boxShadow),this.color=Xt(e,_k,t.color),this.direction=Xt(e,Bk,t.direction),this.display=Xt(e,xk,t.display),this.float=Xt(e,Ck,t.cssFloat),this.fontFamily=Xt(e,oO,t.fontFamily),this.fontSize=Xt(e,sO,t.fontSize),this.fontStyle=Xt(e,AO,t.fontStyle),this.fontVariant=Xt(e,aO,t.fontVariant),this.fontWeight=Xt(e,iO,t.fontWeight),this.letterSpacing=Xt(e,Sk,t.letterSpacing),this.lineBreak=Xt(e,Ek,t.lineBreak),this.lineHeight=Xt(e,Fk,t.lineHeight),this.listStyleImage=Xt(e,Ik,t.listStyleImage),this.listStylePosition=Xt(e,Uk,t.listStylePosition),this.listStyleType=Xt(e,am,t.listStyleType),this.marginTop=Xt(e,Qk,t.marginTop),this.marginRight=Xt(e,Tk,t.marginRight),this.marginBottom=Xt(e,Lk,t.marginBottom),this.marginLeft=Xt(e,Pk,t.marginLeft),this.opacity=Xt(e,tO,t.opacity);var s=Xt(e,kk,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Xt(e,Ok,t.overflowWrap),this.paddingTop=Xt(e,Dk,t.paddingTop),this.paddingRight=Xt(e,Nk,t.paddingRight),this.paddingBottom=Xt(e,Mk,t.paddingBottom),this.paddingLeft=Xt(e,Hk,t.paddingLeft),this.paintOrder=Xt(e,pO,t.paintOrder),this.position=Xt(e,Rk,t.position),this.textAlign=Xt(e,jk,t.textAlign),this.textDecorationColor=Xt(e,rO,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=Xt(e,nO,(o=t.textDecorationLine)!==null&&o!==void 0?o:t.textDecoration),this.textShadow=Xt(e,qk,t.textShadow),this.textTransform=Xt(e,Kk,t.textTransform),this.transform=Xt(e,$k,t.transform),this.transformOrigin=Xt(e,Yk,t.transformOrigin),this.visibility=Xt(e,Jk,t.visibility),this.webkitTextStrokeColor=Xt(e,gO,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,vO,t.webkitTextStrokeWidth),this.wordBreak=Xt(e,Zk,t.wordBreak),this.zIndex=Xt(e,eO,t.zIndex),this.objectFit=Xt(e,mO,t.objectFit)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return pA(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return uo(this.display,4)||uo(this.display,33554432)||uo(this.display,268435456)||uo(this.display,536870912)||uo(this.display,67108864)||uo(this.display,134217728)},n}(),bO=function(){function n(e,t){this.content=Xt(e,lO,t.content),this.quotes=Xt(e,hO,t.quotes)}return n}(),Iy=function(){function n(e,t){this.counterIncrement=Xt(e,dO,t.counterIncrement),this.counterReset=Xt(e,cO,t.counterReset)}return n}(),Xt=function(n,e,t){var r=new VB,o=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(o);var s=new GB(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(n,Dr(i)?i.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return hg.parse(n,s.parseComponentValue());case"color":return gA.parse(n,s.parseComponentValue());case"image":return H1.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return _A(a)?a:Io;case"length-percentage":var A=s.parseComponentValue();return Sn(A)?A:Io;case"time":return wx.parse(n,s.parseComponentValue())}break}},_O="data-html2canvas-debug",BO=function(n){var e=n.getAttribute(_O);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Am=function(n,e){var t=BO(n);return t===1||e===t},Zi=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Am(t,3))debugger;this.styles=new yO(e,window.getComputedStyle(t,null)),cm(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=cg(this.context,t),Am(t,4)&&(this.flags|=16)}return n}(),xO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bf=0;Bf<Uy.length;Bf++)Jc[Uy.charCodeAt(Bf)]=Bf;var zO=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=Jc[n.charCodeAt(r)],i=Jc[n.charCodeAt(r+1)],a=Jc[n.charCodeAt(r+2)],A=Jc[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},CO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},SO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},al=5,j1=11,P0=2,EO=j1-al,yx=65536>>al,FO=1<<al,k0=FO-1,IO=1024>>al,UO=yx+IO,QO=UO,TO=32,LO=QO+TO,PO=65536>>j1,kO=1<<EO,OO=kO-1,Qy=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},DO=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},NO=function(n,e){var t=zO(n),r=Array.isArray(t)?SO(t):new Uint32Array(t),o=Array.isArray(t)?CO(t):new Uint16Array(t),s=24,i=Qy(o,s/2,r[4]/2),a=r[5]===2?Qy(o,(s+r[4])/2):DO(r,Math.ceil((s+r[4])/4));return new MO(r[0],r[1],r[2],r[3],i,a)},MO=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>al],t=(t<<P0)+(e&k0),this.data[t];if(e<=65535)return t=this.index[yx+(e-55296>>al)],t=(t<<P0)+(e&k0),this.data[t];if(e<this.highStart)return t=LO-PO+(e>>j1),t=this.index[t],t+=e>>al&OO,t=this.index[t],t=(t<<P0)+(e&k0),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Ty="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xf=0;xf<Ty.length;xf++)HO[Ty.charCodeAt(xf)]=xf;var jO=1,O0=2,D0=3,Ly=4,Py=5,RO=7,ky=8,N0=9,M0=10,Oy=11,Dy=12,Ny=13,My=14,H0=15,qO=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},KO=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},$O=NO(xO),Ws="",j0="",VO=function(n){return $O.get(n)},GO=function(n,e,t){var r=t-2,o=e[r],s=e[t-1],i=e[t];if(s===O0&&i===D0)return Ws;if(s===O0||s===D0||s===Ly||i===O0||i===D0||i===Ly)return j0;if(s===ky&&[ky,N0,Oy,Dy].indexOf(i)!==-1||(s===Oy||s===N0)&&(i===N0||i===M0)||(s===Dy||s===M0)&&i===M0||i===Ny||i===Py||i===RO||s===jO)return Ws;if(s===Ny&&i===My){for(;o===Py;)o=e[--r];if(o===My)return Ws}if(s===H0&&i===H0){for(var a=0;o===H0;)a++,o=e[--r];if(a%2===0)return Ws}return j0},WO=function(n){var e=qO(n),t=e.length,r=0,o=0,s=e.map(VO);return{next:function(){if(r>=t)return{done:!0,value:null};for(var i=Ws;r<t&&(i=GO(e,s,++r))===Ws;);if(i!==Ws||r===t){var a=KO.apply(null,e.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},XO=function(n){for(var e=WO(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},YO=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height="".concat(e,"px"),r.style.display="block",n.body.appendChild(r),t.selectNode(r);var o=t.getBoundingClientRect(),s=Math.round(o.height);if(n.body.removeChild(r),s===e)return!0}}return!1},JO=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=ug(r.data).map(function(A){return Wn(A)}),s=0,i={},a=o.every(function(A,d){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>i.x||c.y>i.y;return i=c,d===0?!0:u});return n.body.removeChild(e),a},ZO=function(){return typeof new Image().crossOrigin<"u"},e8=function(){return typeof new XMLHttpRequest().responseType=="string"},t8=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Hy=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},r8=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var o=new Image,s=e.toDataURL();o.src=s;var i=lm(t,t,0,0,o);return r.fillStyle="red",r.fillRect(0,0,t,t),jy(i).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=n.createElement("div");return d.style.backgroundImage="url(".concat(s,")"),d.style.height="".concat(t,"px"),Hy(A)?jy(lm(t,t,0,0,d)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),Hy(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},lm=function(n,e,t,r,o){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),i},jy=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},Eo={get SUPPORT_RANGE_BOUNDS(){var n=YO(document);return Object.defineProperty(Eo,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Eo.SUPPORT_RANGE_BOUNDS&&JO(document);return Object.defineProperty(Eo,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=t8(document);return Object.defineProperty(Eo,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?r8(document):Promise.resolve(!1);return Object.defineProperty(Eo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=ZO();return Object.defineProperty(Eo,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=e8();return Object.defineProperty(Eo,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Eo,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Eo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},du=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),n8=function(n,e,t,r){var o=i8(e,t),s=[],i=0;return o.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(Eo.SUPPORT_RANGE_BOUNDS){var A=Ry(r,i,a.length).getClientRects();if(A.length>1){var d=R1(a),c=0;d.forEach(function(h){s.push(new du(h,Ia.fromDOMRectList(n,Ry(r,c+i,h.length).getClientRects()))),c+=h.length})}else s.push(new du(a,Ia.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new du(a,o8(n,r))),r=u}else Eo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),s},o8=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var s=cg(n,r);return r.firstChild&&o.replaceChild(r.firstChild,r),s}}return Ia.EMPTY},Ry=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(n,e),o.setEnd(n,e+t),o},R1=function(n){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return XO(n)},s8=function(n,e){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return A8(n,e)},i8=function(n,e){return e.letterSpacing!==0?R1(n):s8(n,e)},a8=[32,160,4961,65792,65793,4153,4241],A8=function(n,e){for(var t=HL(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,s=function(){if(o.value){var i=o.value.slice(),a=ug(i),A="";a.forEach(function(d){a8.indexOf(d)===-1?A+=Wn(d):(A.length&&r.push(A),r.push(Wn(d)),A="")}),A.length&&r.push(A)}};!(o=t.next()).done;)s();return r},l8=function(){function n(e,t,r){this.text=d8(t.data,r.textTransform),this.textBounds=n8(e,this.text,r,t)}return n}(),d8=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(c8,u8);case 2:return n.toUpperCase();default:return n}},c8=/(^|\s|:|-|\(|\))([a-z])/g,u8=function(n,e,t){return n.length>0?e+t.toUpperCase():n},bx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}(Zi),_x=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}(Zi),Bx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=new XMLSerializer,i=cg(t,r);return r.setAttribute("width","".concat(i.width,"px")),r.setAttribute("height","".concat(i.height,"px")),o.svg="data:image/svg+xml,".concat(encodeURIComponent(s.serializeToString(r))),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(Zi),xx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Zi),dm=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}(Zi),h8=[{type:15,flags:0,unit:"px",number:3}],f8=[{type:16,flags:0,number:50}],p8=function(n){return n.width>n.height?new Ia(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Ia(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},g8=function(n){var e=n.type===v8?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Ep="checkbox",Fp="radio",v8="password",qy=707406591,q1=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=g8(r),(o.type===Ep||o.type===Fp)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=p8(o.bounds)),o.type){case Ep:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=h8;break;case Fp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=f8;break}return o}return e}(Zi),zx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return o.value=s&&s.text||"",o}return e}(Zi),Cx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Zi),Sx=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=Fx(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Fd(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ri.TRANSPARENT,i=r.contentWindow.document.body?Fd(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ri.TRANSPARENT;o.backgroundColor=pA(s)?pA(i)?o.styles.backgroundColor:i:s}}catch{}return o}return e}(Zi),m8=["OL","UL","MENU"],qf=function(n,e,t,r){for(var o=e.firstChild,s=void 0;o;o=s)if(s=o.nextSibling,Ix(o)&&o.data.length>0)t.textNodes.push(new l8(n,o,t.styles));else if(md(o))if(Lx(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return qf(n,a,t,r)});else{var i=Ex(n,o);i.styles.isVisible()&&(w8(o,i,r)?i.flags|=4:y8(i.styles)&&(i.flags|=2),m8.indexOf(o.tagName)!==-1&&(i.flags|=8),t.elements.push(i),o.slot,o.shadowRoot?qf(n,o.shadowRoot,i,r):!Ip(o)&&!Ux(o)&&!Up(o)&&qf(n,o,i,r))}},Ex=function(n,e){return um(e)?new bx(n,e):Qx(e)?new _x(n,e):Ux(e)?new Bx(n,e):b8(e)?new xx(n,e):_8(e)?new dm(n,e):B8(e)?new q1(n,e):Up(e)?new zx(n,e):Ip(e)?new Cx(n,e):Tx(e)?new Sx(n,e):new Zi(n,e)},Fx=function(n,e){var t=Ex(n,e);return t.flags|=4,qf(n,e,t,t),t},w8=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||K1(n)&&t.styles.isTransparent()},y8=function(n){return n.isPositioned()||n.isFloating()},Ix=function(n){return n.nodeType===Node.TEXT_NODE},md=function(n){return n.nodeType===Node.ELEMENT_NODE},cm=function(n){return md(n)&&typeof n.style<"u"&&!Kf(n)},Kf=function(n){return typeof n.className=="object"},b8=function(n){return n.tagName==="LI"},_8=function(n){return n.tagName==="OL"},B8=function(n){return n.tagName==="INPUT"},x8=function(n){return n.tagName==="HTML"},Ux=function(n){return n.tagName==="svg"},K1=function(n){return n.tagName==="BODY"},Qx=function(n){return n.tagName==="CANVAS"},Ky=function(n){return n.tagName==="VIDEO"},um=function(n){return n.tagName==="IMG"},Tx=function(n){return n.tagName==="IFRAME"},$y=function(n){return n.tagName==="STYLE"},z8=function(n){return n.tagName==="SCRIPT"},Ip=function(n){return n.tagName==="TEXTAREA"},Up=function(n){return n.tagName==="SELECT"},Lx=function(n){return n.tagName==="SLOT"},Vy=function(n){return n.tagName.indexOf("-")>0},C8=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,o=e.counterReset,s=!0;r!==null&&r.forEach(function(a){var A=t.counters[a.counter];A&&a.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=a.increment)});var i=[];return s&&o.forEach(function(a){var A=t.counters[a.counter];i.push(a.counter),A||(A=t.counters[a.counter]=[]),A.push(a.reset)}),i},n}(),Gy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Wy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},S8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},E8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},nd=function(n,e,t,r,o,s){return n<e||n>t?Uu(n,o,s.length>0):r.integers.reduce(function(i,a,A){for(;n>=a;)n-=a,i+=r.values[A];return i},"")+s},Px=function(n,e,t,r){var o="";do t||n--,o=r(n)+o,n/=e;while(n*e>=e);return o},Vn=function(n,e,t,r,o){var s=t-e+1;return(n<0?"-":"")+(Px(Math.abs(n),s,r,function(i){return Wn(Math.floor(i%s)+e)})+o)},MA=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return Px(Math.abs(n),r,!1,function(o){return e[Math.floor(o%r)]})+t},dd=1,rA=2,nA=4,Zc=8,ca=function(n,e,t,r,o,s){if(n<-9999||n>9999)return Uu(n,4,o.length>0);var i=Math.abs(n),a=o;if(i===0)return e[0]+a;for(var A=0;i>0&&A<=4;A++){var d=i%10;d===0&&uo(s,dd)&&a!==""?a=e[d]+a:d>1||d===1&&A===0||d===1&&A===1&&uo(s,rA)||d===1&&A===1&&uo(s,nA)&&n>100||d===1&&A>1&&uo(s,Zc)?a=e[d]+(A>0?t[A-1]:"")+a:d===1&&A>0&&(a=t[A-1]+a),i=Math.floor(i/10)}return(n<0?r:"")+a},Xy="",Yy="",Jy="",R0="",Uu=function(n,e,t){var r=t?". ":"",o=t?"":"",s=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=Vn(n,48,57,!0,r);return a.length<4?"0".concat(a):a;case 4:return MA(n,"",o);case 6:return nd(n,1,3999,Gy,3,r).toLowerCase();case 7:return nd(n,1,3999,Gy,3,r);case 8:return Vn(n,945,969,!1,r);case 9:return Vn(n,97,122,!1,r);case 10:return Vn(n,65,90,!1,r);case 11:return Vn(n,1632,1641,!0,r);case 12:case 49:return nd(n,1,9999,Wy,3,r);case 35:return nd(n,1,9999,Wy,3,r).toLowerCase();case 13:return Vn(n,2534,2543,!0,r);case 14:case 30:return Vn(n,6112,6121,!0,r);case 15:return MA(n,"",o);case 16:return MA(n,"",o);case 17:case 48:return ca(n,"",Xy,"",o,rA|nA|Zc);case 47:return ca(n,"",Yy,"",o,dd|rA|nA|Zc);case 42:return ca(n,"",Xy,"",o,rA|nA|Zc);case 41:return ca(n,"",Yy,"",o,dd|rA|nA|Zc);case 26:return ca(n,"","",Jy,o,0);case 25:return ca(n,"","",Jy,o,dd|rA|nA);case 31:return ca(n,"","",R0,s,dd|rA|nA);case 33:return ca(n,"","",R0,s,0);case 32:return ca(n,"","",R0,s,dd|rA|nA);case 18:return Vn(n,2406,2415,!0,r);case 20:return nd(n,1,19999,E8,3,r);case 21:return Vn(n,2790,2799,!0,r);case 22:return Vn(n,2662,2671,!0,r);case 22:return nd(n,1,10999,S8,3,r);case 23:return MA(n,"");case 24:return MA(n,"");case 27:return Vn(n,3302,3311,!0,r);case 28:return MA(n,"",o);case 29:return MA(n,"",o);case 34:return Vn(n,3792,3801,!0,r);case 37:return Vn(n,6160,6169,!0,r);case 38:return Vn(n,4160,4169,!0,r);case 39:return Vn(n,2918,2927,!0,r);case 40:return Vn(n,1776,1785,!0,r);case 43:return Vn(n,3046,3055,!0,r);case 44:return Vn(n,3174,3183,!0,r);case 45:return Vn(n,3664,3673,!0,r);case 46:return Vn(n,3872,3881,!0,r);case 3:default:return Vn(n,48,57,!0,r)}},kx="data-html2canvas-ignore",Zy=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new C8,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,o=F8(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=o.contentWindow,A=a.document,d=Q8(o).then(function(){return es(r,void 0,void 0,function(){var u,h;return jo(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(k8),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the ".concat(this.referenceElement.nodeName," in the cloned document"))]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,U8(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,h)}).then(function(){return o})]:[2,o]}})})}),c=A.adoptNode(this.documentElement);return H8(c,A),A.open(),A.write("".concat(L8(document.doctype),"<html></html>")),P8(this.referenceElement.ownerDocument,s,i),A.replaceChild(c,A.documentElement),A.close(),d},n.prototype.createElementClone=function(e){if(Am(e,2))debugger;if(Qx(e))return this.createCanvasClone(e);if(Ky(e))return this.createVideoClone(e);if($y(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return um(t)&&(um(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Vy(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return q0(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var s=e.getContext("2d"),i=o.getContext("2d",{willReadFrequently:!0});if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var A=a.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},n.prototype.appendChildNode=function(e,t,r){(!md(t)||!z8(t)&&!t.hasAttribute(kx)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!md(t)||!$y(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var o=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(md(s)&&Lx(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return o.appendChildNode(t,a,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(Ix(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&md(e)&&(cm(e)||Kf(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&cm(o)&&(this.clonedReferenceElement=o),K1(o)&&N8(o);var A=this.counters.parse(new Iy(this.context,s)),d=this.resolvePseudoContent(e,o,i,cu.BEFORE);Vy(e)&&(t=!0),Ky(e)||this.cloneChildNodes(e,o,t),d&&o.insertBefore(d,o.firstChild);var c=this.resolvePseudoContent(e,o,a,cu.AFTER);return c&&o.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||Kf(e))&&!Tx(e)||t)&&q0(s,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(Ip(e)||Up(e))&&(Ip(o)||Up(o))&&(o.value=e.value),o}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,o){var s=this;if(r){var i=r.content,a=t.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Iy(this.context,r));var A=new bO(this.context,r),d=a.createElement("html2canvaspseudoelement");q0(r,d),A.content.forEach(function(u){if(u.type===0)d.appendChild(a.createTextNode(u.value));else if(u.type===22){var h=a.createElement("img");h.src=u.value,h.style.opacity="1",d.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var f=u.values.filter(Dr);f.length&&d.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(u.name==="counter"){var g=u.values.filter(Uo),m=g[0],y=g[1];if(m&&Dr(m)){var _=s.counters.getCounterValue(m.value),C=y&&Dr(y)?am.parse(s.context,y.value):3;d.appendChild(a.createTextNode(Uu(_,C,!1)))}}else if(u.name==="counters"){var I=u.values.filter(Uo),m=I[0],N=I[1],y=I[2];if(m&&Dr(m)){var k=s.counters.getCounterValues(m.value),W=y&&Dr(y)?am.parse(s.context,y.value):3,V=N&&N.type===0?N.value:"",H=k.map(function(M){return Uu(M,W,!1)}).join(V);d.appendChild(a.createTextNode(H))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(a.createTextNode(Fy(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(a.createTextNode(Fy(A.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(a.createTextNode(u.value))}}),d.className="".concat(hm," ").concat(fm);var c=o===cu.BEFORE?" ".concat(hm):" ".concat(fm);return Kf(t)?t.className.baseValue+=c:t.className+=c,d}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),cu;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(cu||(cu={}));var F8=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(kx,"true"),n.body.appendChild(t),t},I8=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},U8=function(n){return Promise.all([].slice.call(n.images,0).map(I8))},Q8=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var o=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},T8=["all","d","content"],q0=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);T8.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},L8=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'.concat(n.publicId,'"')),n.systemId&&(e+='"'.concat(n.systemId,'"')),e+=">"),e},P8=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},k8=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},O8=":before",D8=":after",hm="___html2canvas___pseudoelement_before",fm="___html2canvas___pseudoelement_after",eb=`{
    content: "" !important;
    display: none !important;
}`,N8=function(n){M8(n,".".concat(hm).concat(O8).concat(eb,`
         .`).concat(fm).concat(D8).concat(eb))},M8=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},H8=function(n,e){var t,r=e.createElement("base");r.href=e.baseURI;var o=n.getElementsByTagName("head").item(0);o==null||o.insertBefore(r,(t=o==null?void 0:o.firstChild)!==null&&t!==void 0?t:null)},Ox=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),j8=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||($0(e)||$8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return es(this,void 0,void 0,function(){var t,r,o,s,i=this;return jo(this,function(a){switch(a.label){case 0:return t=Ox.isSameOrigin(e),r=!K0(e)&&this._options.useCORS===!0&&Eo.SUPPORT_CORS_IMAGES&&!t,o=!K0(e)&&!t&&!$0(e)&&typeof this._options.proxy=="string"&&Eo.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!K0(e)&&!$0(e)&&!o&&!r?[2]:(s=e,o?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image ".concat(e.substring(0,256))),[4,new Promise(function(A,d){var c=new Image;c.onload=function(){return A(c)},c.onerror=d,(V8(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return d("Timed out (".concat(i._options.imageTimeout,"ms) loading image"))},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(s,i){var a=Eo.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(a==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return i(h)},!1),u.readAsDataURL(A.response)}else i("Failed to proxy resource ".concat(o," with status code ").concat(A.status))},A.onerror=i;var d=r.indexOf("?")>-1?"&":"?";if(A.open("GET","".concat(r).concat(d,"url=").concat(encodeURIComponent(e),"&responseType=").concat(a)),a!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return i("Timed out (".concat(c,"ms) proxying ").concat(o))}}A.send()})},n}(),R8=/^data:image\/svg\+xml/i,q8=/^data:image\/.*;base64,/i,K8=/^data:image\/.*/i,$8=function(n){return Eo.SUPPORT_SVG_DRAWING||!G8(n)},K0=function(n){return K8.test(n)},V8=function(n){return q8.test(n)},$0=function(n){return n.substr(0,4)==="blob"},G8=function(n){return n.substr(-3).toLowerCase()==="svg"||R8.test(n)},$t=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),od=function(n,e,t){return new $t(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},zf=function(){function n(e,t,r,o){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=o}return n.prototype.subdivide=function(e,t){var r=od(this.start,this.startControl,e),o=od(this.startControl,this.endControl,e),s=od(this.endControl,this.end,e),i=od(r,o,e),a=od(o,s,e),A=od(i,a,e);return t?new n(this.start,r,i,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Xs=function(n){return n.type===1},W8=function(){function n(e){var t=e.styles,r=e.bounds,o=Yc(t.borderTopLeftRadius,r.width,r.height),s=o[0],i=o[1],a=Yc(t.borderTopRightRadius,r.width,r.height),A=a[0],d=a[1],c=Yc(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],f=Yc(t.borderBottomLeftRadius,r.width,r.height),g=f[0],m=f[1],y=[];y.push((s+A)/r.width),y.push((g+u)/r.width),y.push((i+m)/r.height),y.push((d+h)/r.height);var _=Math.max.apply(Math,y);_>1&&(s/=_,i/=_,A/=_,d/=_,u/=_,h/=_,g/=_,m/=_);var C=r.width-A,I=r.height-h,N=r.width-u,k=r.height-m,W=t.borderTopWidth,V=t.borderRightWidth,H=t.borderBottomWidth,J=t.borderLeftWidth,xe=ln(t.paddingTop,e.bounds.width),M=ln(t.paddingRight,e.bounds.width),O=ln(t.paddingBottom,e.bounds.width),X=ln(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Un(r.left+J/3,r.top+W/3,s-J/3,i-W/3,Zr.TOP_LEFT):new $t(r.left+J/3,r.top+W/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Un(r.left+C,r.top+W/3,A-V/3,d-W/3,Zr.TOP_RIGHT):new $t(r.left+r.width-V/3,r.top+W/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Un(r.left+N,r.top+I,u-V/3,h-H/3,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-V/3,r.top+r.height-H/3),this.bottomLeftBorderDoubleOuterBox=g>0||m>0?Un(r.left+J/3,r.top+k,g-J/3,m-H/3,Zr.BOTTOM_LEFT):new $t(r.left+J/3,r.top+r.height-H/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Un(r.left+J*2/3,r.top+W*2/3,s-J*2/3,i-W*2/3,Zr.TOP_LEFT):new $t(r.left+J*2/3,r.top+W*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Un(r.left+C,r.top+W*2/3,A-V*2/3,d-W*2/3,Zr.TOP_RIGHT):new $t(r.left+r.width-V*2/3,r.top+W*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Un(r.left+N,r.top+I,u-V*2/3,h-H*2/3,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-V*2/3,r.top+r.height-H*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||m>0?Un(r.left+J*2/3,r.top+k,g-J*2/3,m-H*2/3,Zr.BOTTOM_LEFT):new $t(r.left+J*2/3,r.top+r.height-H*2/3),this.topLeftBorderStroke=s>0||i>0?Un(r.left+J/2,r.top+W/2,s-J/2,i-W/2,Zr.TOP_LEFT):new $t(r.left+J/2,r.top+W/2),this.topRightBorderStroke=s>0||i>0?Un(r.left+C,r.top+W/2,A-V/2,d-W/2,Zr.TOP_RIGHT):new $t(r.left+r.width-V/2,r.top+W/2),this.bottomRightBorderStroke=u>0||h>0?Un(r.left+N,r.top+I,u-V/2,h-H/2,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-V/2,r.top+r.height-H/2),this.bottomLeftBorderStroke=g>0||m>0?Un(r.left+J/2,r.top+k,g-J/2,m-H/2,Zr.BOTTOM_LEFT):new $t(r.left+J/2,r.top+r.height-H/2),this.topLeftBorderBox=s>0||i>0?Un(r.left,r.top,s,i,Zr.TOP_LEFT):new $t(r.left,r.top),this.topRightBorderBox=A>0||d>0?Un(r.left+C,r.top,A,d,Zr.TOP_RIGHT):new $t(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?Un(r.left+N,r.top+I,u,h,Zr.BOTTOM_RIGHT):new $t(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=g>0||m>0?Un(r.left,r.top+k,g,m,Zr.BOTTOM_LEFT):new $t(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?Un(r.left+J,r.top+W,Math.max(0,s-J),Math.max(0,i-W),Zr.TOP_LEFT):new $t(r.left+J,r.top+W),this.topRightPaddingBox=A>0||d>0?Un(r.left+Math.min(C,r.width-V),r.top+W,C>r.width+V?0:Math.max(0,A-V),Math.max(0,d-W),Zr.TOP_RIGHT):new $t(r.left+r.width-V,r.top+W),this.bottomRightPaddingBox=u>0||h>0?Un(r.left+Math.min(N,r.width-J),r.top+Math.min(I,r.height-H),Math.max(0,u-V),Math.max(0,h-H),Zr.BOTTOM_RIGHT):new $t(r.left+r.width-V,r.top+r.height-H),this.bottomLeftPaddingBox=g>0||m>0?Un(r.left+J,r.top+Math.min(k,r.height-H),Math.max(0,g-J),Math.max(0,m-H),Zr.BOTTOM_LEFT):new $t(r.left+J,r.top+r.height-H),this.topLeftContentBox=s>0||i>0?Un(r.left+J+X,r.top+W+xe,Math.max(0,s-(J+X)),Math.max(0,i-(W+xe)),Zr.TOP_LEFT):new $t(r.left+J+X,r.top+W+xe),this.topRightContentBox=A>0||d>0?Un(r.left+Math.min(C,r.width+J+X),r.top+W+xe,C>r.width+J+X?0:A-J+X,d-(W+xe),Zr.TOP_RIGHT):new $t(r.left+r.width-(V+M),r.top+W+xe),this.bottomRightContentBox=u>0||h>0?Un(r.left+Math.min(N,r.width-(J+X)),r.top+Math.min(I,r.height+W+xe),Math.max(0,u-(V+M)),h-(H+O),Zr.BOTTOM_RIGHT):new $t(r.left+r.width-(V+M),r.top+r.height-(H+O)),this.bottomLeftContentBox=g>0||m>0?Un(r.left+J+X,r.top+k,Math.max(0,g-(J+X)),m-(H+O),Zr.BOTTOM_LEFT):new $t(r.left+J+X,r.top+r.height-(H+O))}return n}(),Zr;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Zr||(Zr={}));var Un=function(n,e,t,r,o){var s=4*((Math.sqrt(2)-1)/3),i=t*s,a=r*s,A=n+t,d=e+r;switch(o){case Zr.TOP_LEFT:return new zf(new $t(n,d),new $t(n,d-a),new $t(A-i,e),new $t(A,e));case Zr.TOP_RIGHT:return new zf(new $t(n,e),new $t(n+i,e),new $t(A,d-a),new $t(A,d));case Zr.BOTTOM_RIGHT:return new zf(new $t(A,e),new $t(A,e+a),new $t(n+i,d),new $t(n,d));case Zr.BOTTOM_LEFT:default:return new zf(new $t(A,d),new $t(A-i,d),new $t(n,e+a),new $t(n,e))}},Qp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},X8=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Tp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},Y8=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),Cf=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),J8=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),Z8=function(n){return n.type===0},Dx=function(n){return n.type===1},eD=function(n){return n.type===2},tb=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},tD=function(n,e,t,r,o){return n.map(function(s,i){switch(i){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+o);case 3:return s.add(e,t+o)}return s})},Nx=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),Mx=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new W8(this.container),this.container.styles.opacity<1&&this.effects.push(new J8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Y8(r,o,s))}if(this.container.styles.overflowX!==0){var i=Qp(this.curves),a=Tp(this.curves);tb(i,a)?this.effects.push(new Cf(i,6)):(this.effects.push(new Cf(i,2)),this.effects.push(new Cf(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!Dx(A)});if(t||r.container.styles.position!==0||!r.parent){if(t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=Qp(r.curves),a=Tp(r.curves);tb(i,a)||o.unshift(new Cf(a,6))}o.unshift.apply(o,s)}else o.unshift.apply(o,s);r=r.parent}return o.filter(function(A){return uo(A.target,e)})},n}(),pm=function(n,e,t,r){n.container.elements.forEach(function(o){var s=uo(o.flags,4),i=uo(o.flags,2),a=new Mx(o,n);uo(o.styles.display,2048)&&r.push(a);var A=uo(o.flags,8)?[]:r;if(s||i){var d=s||o.styles.isPositioned()?t:e,c=new Nx(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var u=o.styles.zIndex.order;if(u<0){var h=0;d.negativeZIndex.some(function(g,m){return u>g.element.container.styles.zIndex.order?(h=m,!1):h>0}),d.negativeZIndex.splice(h,0,c)}else if(u>0){var f=0;d.positiveZIndex.some(function(g,m){return u>=g.element.container.styles.zIndex.order?(f=m+1,!1):f>0}),d.positiveZIndex.splice(f,0,c)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else o.styles.isFloating()?d.nonPositionedFloats.push(c):d.nonPositionedInlineLevel.push(c);pm(a,c,s?c:t,A)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),pm(a,e,t,A);uo(o.flags,8)&&Hx(o,A)})},Hx=function(n,e){for(var t=n instanceof dm?n.start:1,r=n instanceof dm?n.reversed:!1,o=0;o<e.length;o++){var s=e[o];s.container instanceof xx&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Uu(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},rD=function(n){var e=new Mx(n,null),t=new Nx(e),r=[];return pm(e,t,t,r),Hx(e.container,r),t},rb=function(n,e){switch(e){case 0:return Zs(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Zs(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Zs(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Zs(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},nD=function(n,e){switch(e){case 0:return Zs(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Zs(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Zs(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Zs(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},oD=function(n,e){switch(e){case 0:return Zs(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Zs(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Zs(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Zs(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},sD=function(n,e){switch(e){case 0:return Sf(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Sf(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Sf(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Sf(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Sf=function(n,e){var t=[];return Xs(n)?t.push(n.subdivide(.5,!1)):t.push(n),Xs(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Zs=function(n,e,t,r){var o=[];return Xs(n)?o.push(n.subdivide(.5,!1)):o.push(n),Xs(t)?o.push(t.subdivide(.5,!0)):o.push(t),Xs(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),Xs(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},jx=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Lp=function(n){var e=n.styles,t=n.bounds,r=ln(e.paddingLeft,t.width),o=ln(e.paddingRight,t.width),s=ln(e.paddingTop,t.width),i=ln(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+s+i))},iD=function(n,e){return n===0?e.bounds:n===2?Lp(e):jx(e)},aD=function(n,e){return n===0?e.bounds:n===2?Lp(e):jx(e)},V0=function(n,e,t){var r=iD(cd(n.styles.backgroundOrigin,e),n),o=aD(cd(n.styles.backgroundClip,e),n),s=AD(cd(n.styles.backgroundSize,e),t,r),i=s[0],a=s[1],A=Yc(cd(n.styles.backgroundPosition,e),r.width-i,r.height-a),d=lD(cd(n.styles.backgroundRepeat,e),A,s,r,o),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return i=Math.max(1,i),a=Math.max(1,a),[d,c,u,i,a]},sd=function(n){return Dr(n)&&n.value===Id.AUTO},Ef=function(n){return typeof n=="number"},AD=function(n,e,t){var r=e[0],o=e[1],s=e[2],i=n[0],a=n[1];if(!i)return[0,0];if(Sn(i)&&a&&Sn(a))return[ln(i,t.width),ln(a,t.height)];var A=Ef(s);if(Dr(i)&&(i.value===Id.CONTAIN||i.value===Id.COVER)){if(Ef(s)){var d=t.width/t.height;return d<s!=(i.value===Id.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=Ef(r),u=Ef(o),h=c||u;if(sd(i)&&(!a||sd(a))){if(c&&u)return[r,o];if(!A&&!h)return[t.width,t.height];if(h&&A){var f=c?r:o*s,g=u?o:r/s;return[f,g]}var m=c?r:t.width,y=u?o:t.height;return[m,y]}if(A){var _=0,C=0;return Sn(i)?_=ln(i,t.width):Sn(a)&&(C=ln(a,t.height)),sd(i)?_=C*s:(!a||sd(a))&&(C=_/s),[_,C]}var I=null,N=null;if(Sn(i)?I=ln(i,t.width):a&&Sn(a)&&(N=ln(a,t.height)),I!==null&&(!a||sd(a))&&(N=c&&u?I/r*o:t.height),N!==null&&sd(i)&&(I=c&&u?N/o*r:t.width),I!==null&&N!==null)return[I,N];throw new Error("Unable to calculate background-size for element")},cd=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},lD=function(n,e,t,r,o){var s=e[0],i=e[1],a=t[0],A=t[1];switch(n){case 2:return[new $t(Math.round(r.left),Math.round(r.top+i)),new $t(Math.round(r.left+r.width),Math.round(r.top+i)),new $t(Math.round(r.left+r.width),Math.round(A+r.top+i)),new $t(Math.round(r.left),Math.round(A+r.top+i))];case 3:return[new $t(Math.round(r.left+s),Math.round(r.top)),new $t(Math.round(r.left+s+a),Math.round(r.top)),new $t(Math.round(r.left+s+a),Math.round(r.height+r.top)),new $t(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new $t(Math.round(r.left+s),Math.round(r.top+i)),new $t(Math.round(r.left+s+a),Math.round(r.top+i)),new $t(Math.round(r.left+s+a),Math.round(r.top+i+A)),new $t(Math.round(r.left+s),Math.round(r.top+i+A))];default:return[new $t(Math.round(o.left),Math.round(o.top)),new $t(Math.round(o.left+o.width),Math.round(o.top)),new $t(Math.round(o.left+o.width),Math.round(o.height+o.top)),new $t(Math.round(o.left),Math.round(o.height+o.top))]}},dD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nb="Hidden Text",cD=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),o=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),o.src=dD,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(nb)),r.appendChild(s),r.appendChild(o);var a=o.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(nb)),r.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r="".concat(e," ").concat(t);return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),Rx=function(){function n(e,t){this.context=e,this.options=t}return n}(),uD=1e4,hD=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px")),o.fontMetrics=new cD(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized (".concat(r.width,"x").concat(r.height,") with scale ").concat(r.scale)),o}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(t){this.ctx.save(),eD(t)&&(this.ctx.globalAlpha=t.opacity),Z8(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Dx(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return es(this,void 0,void 0,function(){var r;return jo(this,function(o){switch(o.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return es(this,void 0,void 0,function(){return jo(this,function(r){switch(r.label){case 0:if(uo(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,o){var s=this;if(r===0)navigator.userAgent.indexOf("Firefox")===-1?(this.ctx.textBaseline="ideographic",this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)):this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+o);else{var i=R1(t.text);i.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+o),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),o=mD(t.fontFamily).join(", "),s=SA(t.fontSize)?"".concat(t.fontSize.number).concat(t.fontSize.unit):"".concat(t.fontSize.number,"px");return[[t.fontStyle,r,t.fontWeight,s,o].join(" "),o,s]},e.prototype.renderTextNode=function(t,r){return es(this,void 0,void 0,function(){var o,s,i=this;return jo(this,function(a){return o=this.createFontStyle(r)[0],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=r.paintOrder,t.textBounds.forEach(function(A){s.forEach(function(d){switch(d){case 0:i.ctx.fillStyle=yo(r.color),i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number);var c=r.textShadow;if(c.length&&A.text.trim().length&&(c.slice(0).reverse().forEach(function(h){i.ctx.shadowColor=yo(h.color),i.ctx.shadowOffsetX=h.offsetX.number*i.options.scale,i.ctx.shadowOffsetY=h.offsetY.number*i.options.scale,i.ctx.shadowBlur=h.blur.number,i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number)}),i.ctx.shadowColor="",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0),r.textDecorationLine.length){i.ctx.fillStyle=yo(r.textDecorationColor||r.color);var u=1;r.textDecorationLine.forEach(function(h){switch(h){case 1:i.ctx.fillRect(A.bounds.left,A.bounds.top+A.bounds.height-u,A.bounds.width,u);break;case 2:i.ctx.fillRect(A.bounds.left,A.bounds.top,A.bounds.width,u);break;case 3:i.ctx.fillRect(A.bounds.left,A.bounds.top+(A.bounds.height/2-u/2),A.bounds.width,u);break}})}break;case 1:r.webkitTextStrokeWidth&&A.text.trim().length&&(i.ctx.strokeStyle=yo(r.webkitTextStrokeColor),i.ctx.lineWidth=r.webkitTextStrokeWidth,i.ctx.lineJoin=window.chrome?"miter":"round",i.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)),i.ctx.strokeStyle="",i.ctx.lineWidth=0,i.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,o){var s=o.naturalWidth||t.intrinsicWidth,i=o.naturalHeight||t.intrinsicHeight;if(o&&s>0&&i>0){var a=Lp(t),A=Tp(r);this.path(A),this.ctx.save(),this.ctx.clip();var d=0,c=0,u=s,h=i,f=a.left,g=a.top,m=a.width,y=a.height,_=t.styles.objectFit,C=m/y,I=u/h;if(_===2)I>C?(y=m/I,g+=(a.height-y)/2):(m=y*I,f+=(a.width-m)/2);else if(_===4)I>C?(u=h*C,d+=(s-u)/2):(h=u/C,c+=(i-h)/2);else if(_===8)u>m?(d+=(u-m)/2,u=m):(f+=(m-u)/2,m=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h);else if(_===16){var N=I>C?m:y*I,k=u>m?u:m;N<k?I>C?(y=m/I,g+=(a.height-y)/2):(m=y*I,f+=(a.width-m)/2):(u>m?(d+=(u-m)/2,u=m):(f+=(m-u)/2,m=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h))}this.ctx.drawImage(o,d,c,u,h,f,g,m,y),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return es(this,void 0,void 0,function(){var r,o,s,i,a,A,C,C,d,c,u,h,N,f,g,k,m,y,_,C,I,N,k;return jo(this,function(W){switch(W.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,o=t.curves,s=r.styles,i=0,a=r.textNodes,W.label=1;case 1:return i<a.length?(A=a[i],[4,this.renderTextNode(A,s)]):[3,4];case 2:W.sent(),W.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof bx))return[3,8];W.label=5;case 5:return W.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return C=W.sent(),this.renderReplacedElement(r,o,C),[3,8];case 7:return W.sent(),this.context.logger.error("Error loading image ".concat(r.src)),[3,8];case 8:if(r instanceof _x&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof Bx))return[3,12];W.label=9;case 9:return W.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return C=W.sent(),this.renderReplacedElement(r,o,C),[3,12];case 11:return W.sent(),this.context.logger.error("Error loading svg ".concat(r.svg.substring(0,255))),[3,12];case 12:return r instanceof Sx&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:c=W.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),W.label=14;case 14:if(r instanceof q1&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Ep?r.checked&&(this.ctx.save(),this.path([new $t(r.bounds.left+u*.39363,r.bounds.top+u*.79),new $t(r.bounds.left+u*.16,r.bounds.top+u*.5549),new $t(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new $t(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new $t(r.bounds.left+u*.72983,r.bounds.top+u*.23),new $t(r.bounds.left+u*.84,r.bounds.top+u*.34085),new $t(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=yo(qy),this.ctx.fill(),this.ctx.restore()):r.type===Fp&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=yo(qy),this.ctx.fill(),this.ctx.restore())),fD(r)&&r.value.length){switch(h=this.createFontStyle(s),N=h[0],f=h[1],g=this.fontMetrics.getMetrics(N,f).baseline,this.ctx.font=N,this.ctx.fillStyle=yo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gD(r.styles.textAlign),k=Lp(r),m=0,r.styles.textAlign){case 1:m+=k.width/2;break;case 2:m+=k.width;break}y=k.add(m,0,0,-k.height/2+1),this.ctx.save(),this.path([new $t(k.left,k.top),new $t(k.left+k.width,k.top),new $t(k.left+k.width,k.top+k.height),new $t(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new du(r.value,y),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!uo(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(_=r.styles.listStyleImage,_.type!==0)return[3,18];C=void 0,I=_.url,W.label=15;case 15:return W.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return C=W.sent(),this.ctx.drawImage(C,r.bounds.left-(C.width+10),r.bounds.top),[3,18];case 17:return W.sent(),this.context.logger.error("Error loading list-style-image ".concat(I)),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(N=this.createFontStyle(s)[0],this.ctx.font=N,this.ctx.fillStyle=yo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new Ia(r.bounds.left,r.bounds.top+ln(r.styles.paddingTop,r.bounds.width),r.bounds.width,Sy(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new du(t.listValue,k),s.letterSpacing,Sy(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),W.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return es(this,void 0,void 0,function(){var r,o,_,s,i,_,a,A,_,d,c,_,u,h,_,f,g,_,m,y,_;return jo(this,function(C){switch(C.label){case 0:if(uo(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:C.sent(),r=0,o=t.negativeZIndex,C.label=2;case 2:return r<o.length?(_=o[r],[4,this.renderStack(_)]):[3,5];case 3:C.sent(),C.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:C.sent(),s=0,i=t.nonInlineLevel,C.label=7;case 7:return s<i.length?(_=i[s],[4,this.renderNode(_)]):[3,10];case 8:C.sent(),C.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,C.label=11;case 11:return a<A.length?(_=A[a],[4,this.renderStack(_)]):[3,14];case 12:C.sent(),C.label=13;case 13:return a++,[3,11];case 14:d=0,c=t.nonPositionedInlineLevel,C.label=15;case 15:return d<c.length?(_=c[d],[4,this.renderStack(_)]):[3,18];case 16:C.sent(),C.label=17;case 17:return d++,[3,15];case 18:u=0,h=t.inlineLevel,C.label=19;case 19:return u<h.length?(_=h[u],[4,this.renderNode(_)]):[3,22];case 20:C.sent(),C.label=21;case 21:return u++,[3,19];case 22:f=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return f<g.length?(_=g[f],[4,this.renderStack(_)]):[3,26];case 24:C.sent(),C.label=25;case 25:return f++,[3,23];case 26:m=0,y=t.positiveZIndex,C.label=27;case 27:return m<y.length?(_=y[m],[4,this.renderStack(_)]):[3,30];case 28:C.sent(),C.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(o,s){var i=Xs(o)?o.start:o;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Xs(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(t,r,o,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},e.prototype.resizeImage=function(t,r,o){var s,i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,o);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,o),a},e.prototype.renderBackgroundImage=function(t){return es(this,void 0,void 0,function(){var r,o,s,i,a,A;return jo(this,function(d){switch(d.label){case 0:r=t.styles.backgroundImage.length-1,o=function(c){var u,h,f,g,m,O,Z,se,le,ne,xe,y,O,Z,se,le,ne,_,C,I,N,k,W,V,H,J,xe,M,O,X,te,le,ne,Be,Z,se,ce,be,x,F,E,U,P,T;return jo(this,function(R){switch(R.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,R.label=1;case 1:return R.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=R.sent(),[3,4];case 3:return R.sent(),s.context.logger.error("Error loading background-image ".concat(h)),[3,4];case 4:return u&&(f=isNaN(u.width)||u.width===0?1:u.width,g=isNaN(u.height)||u.height===0?1:u.height,m=V0(t,r,[f,g,f/g]),O=m[0],Z=m[1],se=m[2],le=m[3],ne=m[4],xe=s.ctx.createPattern(s.resizeImage(u,le,ne),"repeat"),s.renderRepeat(O,xe,Z,se)),[3,6];case 5:XP(c)?(y=V0(t,r,[null,null,null]),O=y[0],Z=y[1],se=y[2],le=y[3],ne=y[4],_=KP(c.angle,le,ne),C=_[0],I=_[1],N=_[2],k=_[3],W=_[4],V=document.createElement("canvas"),V.width=le,V.height=ne,H=V.getContext("2d"),J=H.createLinearGradient(I,k,N,W),zy(c.stops,C).forEach(function(q){return J.addColorStop(q.stop,yo(q.color))}),H.fillStyle=J,H.fillRect(0,0,le,ne),le>0&&ne>0&&(xe=s.ctx.createPattern(V,"repeat"),s.renderRepeat(O,xe,Z,se))):YP(c)&&(M=V0(t,r,[null,null,null]),O=M[0],X=M[1],te=M[2],le=M[3],ne=M[4],Be=c.position.length===0?[D1]:c.position,Z=ln(Be[0],le),se=ln(Be[Be.length-1],ne),ce=$P(c,Z,se,le,ne),be=ce[0],x=ce[1],be>0&&x>0&&(F=s.ctx.createRadialGradient(X+Z,te+se,0,X+Z,te+se,be),zy(c.stops,be*2).forEach(function(q){return F.addColorStop(q.stop,yo(q.color))}),s.path(O),s.ctx.fillStyle=F,be!==x?(E=t.bounds.left+.5*t.bounds.width,U=t.bounds.top+.5*t.bounds.height,P=x/be,T=1/P,s.ctx.save(),s.ctx.translate(E,U),s.ctx.transform(1,0,0,P,0,0),s.ctx.translate(-E,-U),s.ctx.fillRect(X,T*(te-U)+U,le,ne*T),s.ctx.restore()):s.ctx.fill())),R.label=6;case 6:return r--,[2]}})},s=this,i=0,a=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return i<a.length?(A=a[i],[5,o(A)]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,o){return es(this,void 0,void 0,function(){return jo(this,function(s){return this.path(rb(o,r)),this.ctx.fillStyle=yo(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,o,s){return es(this,void 0,void 0,function(){var i,a;return jo(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,o,s)]:[3,2];case 1:return A.sent(),[2];case 2:return i=nD(s,o),this.path(i),this.ctx.fillStyle=yo(t),this.ctx.fill(),a=oD(s,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return es(this,void 0,void 0,function(){var r,o,s,i,a,A,d,c,u=this;return jo(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,o=!pA(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=pD(cd(r.backgroundClip,0),t.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),pA(r.backgroundColor)||(this.ctx.fillStyle=yo(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){u.ctx.save();var g=Qp(t.curves),m=f.inset?0:uD,y=tD(g,-m+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(u.path(g),u.ctx.clip(),u.mask(y)):(u.mask(g),u.ctx.clip(),u.path(y)),u.ctx.shadowOffsetX=f.offsetX.number+m,u.ctx.shadowOffsetY=f.offsetY.number,u.ctx.shadowColor=yo(f.color),u.ctx.shadowBlur=f.blur.number,u.ctx.fillStyle=f.inset?yo(f.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,A=0,d=s,h.label=3;case 3:return A<d.length?(c=d[A],c.style!==0&&!pA(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,o,s,i){return es(this,void 0,void 0,function(){var a,A,d,c,u,h,f,g,m,y,_,C,I,N,k,W,k,W;return jo(this,function(V){return this.ctx.save(),a=sD(s,o),A=rb(s,o),i===2&&(this.path(A),this.ctx.clip()),Xs(A[0])?(d=A[0].start.x,c=A[0].start.y):(d=A[0].x,c=A[0].y),Xs(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),o===0||o===2?f=Math.abs(d-u):f=Math.abs(c-h),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(A.slice(0,2)),g=r<3?r*3:r*2,m=r<3?r*2:r,i===3&&(g=r,m=r),y=!0,f<=g*2?y=!1:f<=g*2+m?(_=f/(2*g+m),g*=_,m*=_):(C=Math.floor((f+m)/(g+m)),I=(f-C*g)/(C-1),N=(f-(C+1)*g)/C,m=N<=0||Math.abs(m-I)<Math.abs(m-N)?I:N),y&&(i===3?this.ctx.setLineDash([0,g+m]):this.ctx.setLineDash([g,m])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=yo(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Xs(A[0])&&(k=A[3],W=A[0],this.ctx.beginPath(),this.formatPath([new $t(k.end.x,k.end.y),new $t(W.start.x,W.start.y)]),this.ctx.stroke()),Xs(A[1])&&(k=A[1],W=A[2],this.ctx.beginPath(),this.formatPath([new $t(k.end.x,k.end.y),new $t(W.start.x,W.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return es(this,void 0,void 0,function(){var r;return jo(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=rD(t),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Rx),fD=function(n){return n instanceof Cx||n instanceof zx?!0:n instanceof q1&&n.type!==Fp&&n.type!==Ep},pD=function(n,e){switch(n){case 0:return Qp(e);case 2:return X8(e);case 1:default:return Tp(e)}},gD=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vD=["-apple-system","system-ui"],mD=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return vD.indexOf(e)===-1}):n},wD=function(n){zi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px"),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (".concat(r.width,"x").concat(r.height," at ").concat(r.x,",").concat(r.y,") with scale ").concat(r.scale)),o}return e.prototype.render=function(t){return es(this,void 0,void 0,function(){var r,o;return jo(this,function(s){switch(s.label){case 0:return r=lm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,yD(r)];case 1:return o=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Rx),yD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},bD=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,sf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,sf([this.id,"".concat(this.getTime(),"ms")],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,sf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,sf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.instances={},n}(),_D=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#".concat(n.instanceCount++),this.logger=new bD({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new j8(this,e)}return n.instanceCount=1,n}(),BD=function(n,e){return e===void 0&&(e={}),xD(n,e)};typeof window<"u"&&Ox.setContext(window);var xD=function(n,e){return es(void 0,void 0,void 0,function(){var t,r,o,s,i,a,A,d,c,u,h,f,g,m,y,_,C,I,N,k,V,W,V,H,J,xe,M,O,X,te,le,ne,Be,Z,se,ce,be,x,F,E;return jo(this,function(U){switch(U.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(H=e.allowTaint)!==null&&H!==void 0?H:!1,imageTimeout:(J=e.imageTimeout)!==null&&J!==void 0?J:15e3,proxy:e.proxy,useCORS:(xe=e.useCORS)!==null&&xe!==void 0?xe:!1},s=$v({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},o),i={windowWidth:(O=e.windowWidth)!==null&&O!==void 0?O:r.innerWidth,windowHeight:(X=e.windowHeight)!==null&&X!==void 0?X:r.innerHeight,scrollX:(te=e.scrollX)!==null&&te!==void 0?te:r.pageXOffset,scrollY:(le=e.scrollY)!==null&&le!==void 0?le:r.pageYOffset},a=new Ia(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new _D(s,a),d=(ne=e.foreignObjectRendering)!==null&&ne!==void 0?ne:!1,c={allowTaint:(Be=e.allowTaint)!==null&&Be!==void 0?Be:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},A.logger.debug("Starting document clone with size ".concat(a.width,"x").concat(a.height," scrolled to ").concat(-a.left,",").concat(-a.top)),u=new Zy(A,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=U.sent(),g=K1(h)||x8(h)?iL(h.ownerDocument):cg(A,h),m=g.width,y=g.height,_=g.left,C=g.top,I=zD(A,h,e.backgroundColor),N={canvas:e.canvas,backgroundColor:I,scale:(se=(Z=e.scale)!==null&&Z!==void 0?Z:r.devicePixelRatio)!==null&&se!==void 0?se:1,x:((ce=e.x)!==null&&ce!==void 0?ce:0)+_,y:((be=e.y)!==null&&be!==void 0?be:0)+C,width:(x=e.width)!==null&&x!==void 0?x:Math.ceil(m),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(y)},d?(A.logger.debug("Document cloned, using foreign object rendering"),V=new wD(A,N),[4,V.render(h)]):[3,3];case 2:return k=U.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at ".concat(_,",").concat(C," with size ").concat(m,"x").concat(y," using computed rendering")),A.logger.debug("Starting DOM parsing"),W=Fx(A,h),I===W.styles.backgroundColor&&(W.styles.backgroundColor=Ri.TRANSPARENT),A.logger.debug("Starting renderer for element at ".concat(N.x,",").concat(N.y," with size ").concat(N.width,"x").concat(N.height)),V=new hD(A,N),[4,V.render(W)];case 4:k=U.sent(),U.label=5;case 5:return(!((E=e.removeContainer)!==null&&E!==void 0)||E)&&(Zy.destroy(f)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,k]}})})},zD=function(n,e,t){var r=e.ownerDocument,o=r.documentElement?Fd(n,getComputedStyle(r.documentElement).backgroundColor):Ri.TRANSPARENT,s=r.body?Fd(n,getComputedStyle(r.body).backgroundColor):Ri.TRANSPARENT,i=typeof t=="string"?Fd(n,t):t===null?Ri.TRANSPARENT:4294967295;return e===r.documentElement?pA(o)?pA(s)?i:s:o:i};function dn(n){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(n)}var qo=Uint8Array,Ps=Uint16Array,$1=Int32Array,zg=new qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cg=new qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gm=new qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qx=function(n,e){for(var t=new Ps(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new $1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)o[s]=s-t[r]<<5|r;return{b:t,r:o}},Kx=qx(zg,2),$x=Kx.b,vm=Kx.r;$x[28]=258,vm[258]=28;var Vx=qx(Cg,0),CD=Vx.b,ob=Vx.r,mm=new Ps(32768);for(var En=0;En<32768;++En){var Ja=(En&43690)>>1|(En&21845)<<1;Ja=(Ja&52428)>>2|(Ja&13107)<<2,Ja=(Ja&61680)>>4|(Ja&3855)<<4,mm[En]=((Ja&65280)>>8|(Ja&255)<<8)>>1}var qi=function(n,e,t){for(var r=n.length,o=0,s=new Ps(e);o<r;++o)n[o]&&++s[n[o]-1];var i=new Ps(e);for(o=1;o<e;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(t){a=new Ps(1<<e);var A=15-e;for(o=0;o<r;++o)if(n[o])for(var d=o<<4|n[o],c=e-n[o],u=i[n[o]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[mm[u]>>A]=d}else for(a=new Ps(r),o=0;o<r;++o)n[o]&&(a[o]=mm[i[n[o]-1]++]>>15-n[o]);return a},BA=new qo(288);for(var En=0;En<144;++En)BA[En]=8;for(var En=144;En<256;++En)BA[En]=9;for(var En=256;En<280;++En)BA[En]=7;for(var En=280;En<288;++En)BA[En]=8;var Qu=new qo(32);for(var En=0;En<32;++En)Qu[En]=5;var SD=qi(BA,9,0),ED=qi(BA,9,1),FD=qi(Qu,5,0),ID=qi(Qu,5,1),G0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},di=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},W0=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},V1=function(n){return(n+7)/8|0},Gx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new qo(n.subarray(e,t))},UD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pi=function(n,e,t){var r=new Error(e||UD[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,pi),!t)throw r;return r},QD=function(n,e,t,r){var o=n.length,s=0;if(!o||e.f&&!e.l)return t||new qo(0);var i=!t,a=i||e.i!=2,A=e.i;i&&(t=new qo(o*3));var d=function(Ae){var Ee=t.length;if(Ae>Ee){var _e=new qo(Math.max(Ee*2,Ae));_e.set(t),t=_e}},c=e.f||0,u=e.p||0,h=e.b||0,f=e.l,g=e.d,m=e.m,y=e.n,_=o*8;do{if(!f){c=di(n,u,1);var C=di(n,u+1,3);if(u+=3,C)if(C==1)f=ED,g=ID,m=9,y=5;else if(C==2){var W=di(n,u,31)+257,V=di(n,u+10,15)+4,H=W+di(n,u+5,31)+1;u+=14;for(var J=new qo(H),xe=new qo(19),M=0;M<V;++M)xe[gm[M]]=di(n,u+M*3,7);u+=V*3;for(var O=G0(xe),X=(1<<O)-1,te=qi(xe,O,1),M=0;M<H;){var le=te[di(n,u,X)];u+=le&15;var I=le>>4;if(I<16)J[M++]=I;else{var ne=0,Be=0;for(I==16?(Be=3+di(n,u,3),u+=2,ne=J[M-1]):I==17?(Be=3+di(n,u,7),u+=3):I==18&&(Be=11+di(n,u,127),u+=7);Be--;)J[M++]=ne}}var Z=J.subarray(0,W),se=J.subarray(W);m=G0(Z),y=G0(se),f=qi(Z,m,1),g=qi(se,y,1)}else pi(1);else{var I=V1(u)+4,N=n[I-4]|n[I-3]<<8,k=I+N;if(k>o){A&&pi(0);break}a&&d(h+N),t.set(n.subarray(I,k),h),e.b=h+=N,e.p=u=k*8,e.f=c;continue}if(u>_){A&&pi(0);break}}a&&d(h+131072);for(var ce=(1<<m)-1,be=(1<<y)-1,x=u;;x=u){var ne=f[W0(n,u)&ce],F=ne>>4;if(u+=ne&15,u>_){A&&pi(0);break}if(ne||pi(2),F<256)t[h++]=F;else if(F==256){x=u,f=null;break}else{var E=F-254;if(F>264){var M=F-257,U=zg[M];E=di(n,u,(1<<U)-1)+$x[M],u+=U}var P=g[W0(n,u)&be],T=P>>4;P||pi(3),u+=P&15;var se=CD[T];if(T>3){var U=Cg[T];se+=W0(n,u)&(1<<U)-1,u+=U}if(u>_){A&&pi(0);break}a&&d(h+131072);var R=h+E;if(h<se){var q=s-se,j=Math.min(se,R);for(q+h<0&&pi(3);h<j;++h)t[h]=r[q+h]}for(;h<R;++h)t[h]=t[h-se]}}e.l=f,e.p=x,e.b=h,e.f=c,f&&(c=1,e.m=m,e.d=g,e.n=y)}while(!c);return h!=t.length&&i?Gx(t,0,h):t.subarray(0,h)},ua=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Mc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},X0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,s=t.slice();if(!o)return{t:Xx,l:0};if(o==1){var i=new qo(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(k,W){return k.f-W.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],d=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=o-1;)a=t[t[d].f<t[u].f?d++:u++],A=t[d!=c&&t[d].f<t[u].f?d++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var h=s[0].s,r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var f=new Ps(h+1),g=wm(t[c-1],f,0);if(g>e){var r=0,m=0,y=g-e,_=1<<y;for(s.sort(function(W,V){return f[V.s]-f[W.s]||W.f-V.f});r<o;++r){var C=s[r].s;if(f[C]>e)m+=_-(1<<g-f[C]),f[C]=e;else break}for(m>>=y;m>0;){var I=s[r].s;f[I]<e?m-=1<<e-f[I]++-1:++r}for(;r>=0&&m;--r){var N=s[r].s;f[N]==e&&(--f[N],++m)}g=e}return{t:new qo(f),l:g}},wm=function(n,e,t){return n.s==-1?Math.max(wm(n.l,e,t+1),wm(n.r,e,t+1)):e[n.s]=t},sb=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ps(++e),r=0,o=n[0],s=1,i=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==o&&a!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=n[a]}return{c:t.subarray(0,r),n:e}},Hc=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Wx=function(n,e,t){var r=t.length,o=V1(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var s=0;s<r;++s)n[o+s+4]=t[s];return(o+4+r)*8},ib=function(n,e,t,r,o,s,i,a,A,d,c){ua(e,c++,t),++o[256];for(var u=X0(o,15),h=u.t,f=u.l,g=X0(s,15),m=g.t,y=g.l,_=sb(h),C=_.c,I=_.n,N=sb(m),k=N.c,W=N.n,V=new Ps(19),H=0;H<C.length;++H)++V[C[H]&31];for(var H=0;H<k.length;++H)++V[k[H]&31];for(var J=X0(V,7),xe=J.t,M=J.l,O=19;O>4&&!xe[gm[O-1]];--O);var X=d+5<<3,te=Hc(o,BA)+Hc(s,Qu)+i,le=Hc(o,h)+Hc(s,m)+i+14+3*O+Hc(V,xe)+2*V[16]+3*V[17]+7*V[18];if(A>=0&&X<=te&&X<=le)return Wx(e,c,n.subarray(A,A+d));var ne,Be,Z,se;if(ua(e,c,1+(le<te)),c+=2,le<te){ne=qi(h,f,0),Be=h,Z=qi(m,y,0),se=m;var ce=qi(xe,M,0);ua(e,c,I-257),ua(e,c+5,W-1),ua(e,c+10,O-4),c+=14;for(var H=0;H<O;++H)ua(e,c+3*H,xe[gm[H]]);c+=3*O;for(var be=[C,k],x=0;x<2;++x)for(var F=be[x],H=0;H<F.length;++H){var E=F[H]&31;ua(e,c,ce[E]),c+=xe[E],E>15&&(ua(e,c,F[H]>>5&127),c+=F[H]>>12)}}else ne=SD,Be=BA,Z=FD,se=Qu;for(var H=0;H<a;++H){var U=r[H];if(U>255){var E=U>>18&31;Mc(e,c,ne[E+257]),c+=Be[E+257],E>7&&(ua(e,c,U>>23&31),c+=zg[E]);var P=U&31;Mc(e,c,Z[P]),c+=se[P],P>3&&(Mc(e,c,U>>5&8191),c+=Cg[P])}else Mc(e,c,ne[U]),c+=Be[U]}return Mc(e,c,ne[256]),c+Be[256]},TD=new $1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Xx=new qo(0),LD=function(n,e,t,r,o,s){var i=s.z||n.length,a=new qo(r+i+5*(1+Math.ceil(i/7e3))+o),A=a.subarray(r,a.length-o),d=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=TD[e-1],h=u>>13,f=u&8191,g=(1<<t)-1,m=s.p||new Ps(32768),y=s.h||new Ps(g+1),_=Math.ceil(t/3),C=2*_,I=function(Oe){return(n[Oe]^n[Oe+1]<<_^n[Oe+2]<<C)&g},N=new $1(25e3),k=new Ps(288),W=new Ps(32),V=0,H=0,J=s.i||0,xe=0,M=s.w||0,O=0;J+2<i;++J){var X=I(J),te=J&32767,le=y[X];if(m[te]=le,y[X]=te,M<=J){var ne=i-J;if((V>7e3||xe>24576)&&(ne>423||!d)){c=ib(n,A,0,N,k,W,H,xe,O,J-O,c),xe=V=H=0,O=J;for(var Be=0;Be<286;++Be)k[Be]=0;for(var Be=0;Be<30;++Be)W[Be]=0}var Z=2,se=0,ce=f,be=te-le&32767;if(ne>2&&X==I(J-be))for(var x=Math.min(h,ne)-1,F=Math.min(32767,J),E=Math.min(258,ne);be<=F&&--ce&&te!=le;){if(n[J+Z]==n[J+Z-be]){for(var U=0;U<E&&n[J+U]==n[J+U-be];++U);if(U>Z){if(Z=U,se=be,U>x)break;for(var P=Math.min(be,U-2),T=0,Be=0;Be<P;++Be){var R=J-be+Be&32767,q=m[R],j=R-q&32767;j>T&&(T=j,le=R)}}}te=le,le=m[te],be+=te-le&32767}if(se){N[xe++]=268435456|vm[Z]<<18|ob[se];var Ae=vm[Z]&31,Ee=ob[se]&31;H+=zg[Ae]+Cg[Ee],++k[257+Ae],++W[Ee],M=J+Z,++V}else N[xe++]=n[J],++k[n[J]]}}for(J=Math.max(J,M);J<i;++J)N[xe++]=n[J],++k[n[J]];c=ib(n,A,d,N,k,W,H,xe,O,J-O,c),d||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=y,s.p=m,s.i=J,s.w=M)}else{for(var J=s.w||0;J<i+d;J+=65535){var _e=J+65535;_e>=i&&(A[c/8|0]=d,_e=i),c=Wx(A,c+1,n.subarray(J,_e))}s.i=i}return Gx(a,0,r+V1(c)+o)},Yx=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,s=t.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=t[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},PD=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new qo(s.length+n.length);i.set(s),i.set(n,s.length),n=i,o.w=s.length}return LD(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},Jx=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},kD=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=Yx();o.p(e.dictionary),Jx(n,2,o.d())}},OD=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&pi(6,"invalid zlib data"),(n[1]>>5&1)==1&&pi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ym(n,e){e||(e={});var t=Yx();t.p(n);var r=PD(n,e,e.dictionary?6:2,4);return kD(r,e),Jx(r,r.length-4,t.d()),r}function DD(n,e){return QD(n.subarray(OD(n),-4),{i:2},e,e)}var ND=typeof TextDecoder<"u"&&new TextDecoder,MD=0;try{ND.decode(Xx,{stream:!0}),MD=1}catch{}var mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Y0(){mr.console&&typeof mr.console.log=="function"&&mr.console.log.apply(mr.console,arguments)}var wn={log:Y0,warn:function(n){mr.console&&(typeof mr.console.warn=="function"?mr.console.warn.apply(mr.console,arguments):Y0.call(null,arguments))},error:function(n){mr.console&&(typeof mr.console.error=="function"?mr.console.error.apply(mr.console,arguments):Y0(n))}};function J0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){jA(r.response,e,t)},r.onerror=function(){wn.error("could not download file")},r.send()}function ab(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ff(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var uu,bm,jA=mr.saveAs||((typeof window>"u"?"undefined":dn(window))!=="object"||window!==mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=mr.URL||mr.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?ab(o.href)?J0(n,e,t):Ff(o,o.target="_blank"):Ff(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Ff(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ab(n))J0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Ff(r)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:dn(s)!=="object"&&(wn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return J0(n,e,t);var o=n.type==="application/octet-stream",s=/constructor/i.test(mr.HTMLElement)||mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&s)&&(typeof FileReader>"u"?"undefined":dn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=i?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var A=mr.URL||mr.webkitURL,d=A.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){A.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Zx(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,s=t[r].process,i=o.exec(n);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),A=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),"#"+a+A+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z0(n,e){var t=n[0],r=n[1],o=n[2],s=n[3];t=Oo(t,r,o,s,e[0],7,-680876936),s=Oo(s,t,r,o,e[1],12,-389564586),o=Oo(o,s,t,r,e[2],17,606105819),r=Oo(r,o,s,t,e[3],22,-1044525330),t=Oo(t,r,o,s,e[4],7,-176418897),s=Oo(s,t,r,o,e[5],12,1200080426),o=Oo(o,s,t,r,e[6],17,-1473231341),r=Oo(r,o,s,t,e[7],22,-45705983),t=Oo(t,r,o,s,e[8],7,1770035416),s=Oo(s,t,r,o,e[9],12,-1958414417),o=Oo(o,s,t,r,e[10],17,-42063),r=Oo(r,o,s,t,e[11],22,-1990404162),t=Oo(t,r,o,s,e[12],7,1804603682),s=Oo(s,t,r,o,e[13],12,-40341101),o=Oo(o,s,t,r,e[14],17,-1502002290),t=Do(t,r=Oo(r,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=Do(s,t,r,o,e[6],9,-1069501632),o=Do(o,s,t,r,e[11],14,643717713),r=Do(r,o,s,t,e[0],20,-373897302),t=Do(t,r,o,s,e[5],5,-701558691),s=Do(s,t,r,o,e[10],9,38016083),o=Do(o,s,t,r,e[15],14,-660478335),r=Do(r,o,s,t,e[4],20,-405537848),t=Do(t,r,o,s,e[9],5,568446438),s=Do(s,t,r,o,e[14],9,-1019803690),o=Do(o,s,t,r,e[3],14,-187363961),r=Do(r,o,s,t,e[8],20,1163531501),t=Do(t,r,o,s,e[13],5,-1444681467),s=Do(s,t,r,o,e[2],9,-51403784),o=Do(o,s,t,r,e[7],14,1735328473),t=No(t,r=Do(r,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=No(s,t,r,o,e[8],11,-2022574463),o=No(o,s,t,r,e[11],16,1839030562),r=No(r,o,s,t,e[14],23,-35309556),t=No(t,r,o,s,e[1],4,-1530992060),s=No(s,t,r,o,e[4],11,1272893353),o=No(o,s,t,r,e[7],16,-155497632),r=No(r,o,s,t,e[10],23,-1094730640),t=No(t,r,o,s,e[13],4,681279174),s=No(s,t,r,o,e[0],11,-358537222),o=No(o,s,t,r,e[3],16,-722521979),r=No(r,o,s,t,e[6],23,76029189),t=No(t,r,o,s,e[9],4,-640364487),s=No(s,t,r,o,e[12],11,-421815835),o=No(o,s,t,r,e[15],16,530742520),t=Mo(t,r=No(r,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=Mo(s,t,r,o,e[7],10,1126891415),o=Mo(o,s,t,r,e[14],15,-1416354905),r=Mo(r,o,s,t,e[5],21,-57434055),t=Mo(t,r,o,s,e[12],6,1700485571),s=Mo(s,t,r,o,e[3],10,-1894986606),o=Mo(o,s,t,r,e[10],15,-1051523),r=Mo(r,o,s,t,e[1],21,-2054922799),t=Mo(t,r,o,s,e[8],6,1873313359),s=Mo(s,t,r,o,e[15],10,-30611744),o=Mo(o,s,t,r,e[6],15,-1560198380),r=Mo(r,o,s,t,e[13],21,1309151649),t=Mo(t,r,o,s,e[4],6,-145523070),s=Mo(s,t,r,o,e[11],10,-1120210379),o=Mo(o,s,t,r,e[2],15,718787259),r=Mo(r,o,s,t,e[9],21,-343485551),n[0]=uA(t,n[0]),n[1]=uA(r,n[1]),n[2]=uA(o,n[2]),n[3]=uA(s,n[3])}function Sg(n,e,t,r,o,s){return e=uA(uA(e,n),uA(r,s)),uA(e<<o|e>>>32-o,t)}function Oo(n,e,t,r,o,s,i){return Sg(e&t|~e&r,n,e,o,s,i)}function Do(n,e,t,r,o,s,i){return Sg(e&r|t&~r,n,e,o,s,i)}function No(n,e,t,r,o,s,i){return Sg(e^t^r,n,e,o,s,i)}function Mo(n,e,t,r,o,s,i){return Sg(t^(e|~r),n,e,o,s,i)}function ez(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Z0(r,HD(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Z0(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,Z0(r,o),r}function HD(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}uu=mr.atob.bind(mr),bm=mr.btoa.bind(mr);var Ab="0123456789abcdef".split("");function jD(n){for(var e="",t=0;t<4;t++)e+=Ab[n>>8*t+4&15]+Ab[n>>8*t&15];return e}function RD(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function _m(n){return ez(n).map(RD).join("")}var qD=function(n){for(var e=0;e<n.length;e++)n[e]=jD(n[e]);return n.join("")}(ez("hello"))!="5d41402abc4b2a76b9719d911017c592";function uA(n,e){if(qD){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Bm(n,e){var t,r,o,s;if(n!==t){for(var i=(o=n,s=1+(256/n.length>>0),new Array(s+1).join(o)),a=[],A=0;A<256;A++)a[A]=A;var d=0;for(A=0;A<256;A++){var c=a[A];d=(d+c+i.charCodeAt(A))%256,a[A]=a[d],a[d]=c}t=n,r=a}else a=r;var u=e.length,h=0,f=0,g="";for(A=0;A<u;A++)f=(f+(c=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=c,i=a[(a[h]+a[f])%256],g+=String.fromCharCode(e.charCodeAt(A)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lb={print:4,modify:8,copy:16,"annot-forms":32};function ud(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(a){if(lb.perm!==void 0)throw new Error("Invalid permission: "+a);o+=lb[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^o)),this.encryptionKey=_m(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Bm(this.encryptionKey,this.padding)}function hd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function db(n){if(dn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!o],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var i=e[t][s];try{i[0].apply(n,r)}catch(a){mr.console&&wn.error("jsPDF PubSub Error",a.message,a)}i[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Pp(n){if(!(this instanceof Pp))return new Pp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function tz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function GA(n,e,t,r,o){if(!(this instanceof GA))return new GA(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,tz.call(this,r,o)}function wd(n,e,t,r,o){if(!(this instanceof wd))return new wd(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,tz.call(this,r,o)}function gr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],i=[],a=1,A=16,d="S",c=null;dn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(A=n.floatPrecision),d=n.defaultPathOperation||"S"),i=n.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",t=(""+(t||"P")).toLowerCase();var u=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=db;var g="1.3",m=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(B){g=B};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var _=f.__private__.getPageFormat=function(B){return y[B]};o=o||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},I=C.COMPAT;function N(){this.saveGraphicsState(),D(new tt(Se,0,0,-Se,0,Oa()*Se).toString()+" cm"),this.setFontSize(this.getFontSize()/Se),d="n",I=C.ADVANCED}function k(){this.restoreGraphicsState(),d="S",I=C.COMPAT}var W=f.__private__.combineFontStyleAndFontWeight=function(B,$){if(B=="bold"&&$=="normal"||B=="bold"&&$==400||B=="normal"&&$=="italic"||B=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(B=$==400||$==="normal"?B==="italic"?"italic":"normal":$!=700&&$!=="bold"||B!=="normal"?($==700?"bold":$)+""+B:"bold"),B};f.advancedAPI=function(B){var $=I===C.COMPAT;return $&&N.call(this),typeof B!="function"||(B(this),$&&k.call(this)),this},f.compatAPI=function(B){var $=I===C.ADVANCED;return $&&k.call(this),typeof B!="function"||(B(this),$&&N.call(this)),this},f.isAdvancedAPI=function(){return I===C.ADVANCED};var V,H=function(B){if(I!==C.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=f.roundToPrecision=f.__private__.roundToPrecision=function(B,$){var ke=e||$;if(isNaN(B)||isNaN(ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(ke).replace(/0+$/,"")};V=f.hpf=f.__private__.hpf=typeof A=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return J(B,A)}:A==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return J(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return J(B,16)};var xe=f.f2=f.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return J(B,2)},M=f.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return J(B,3)},O=f.scale=f.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return I===C.COMPAT?B*Se:I===C.ADVANCED?B:void 0},X=function(B){return I===C.COMPAT?Oa()-B:I===C.ADVANCED?B:void 0},te=function(B){return O(X(B))};f.__private__.setPrecision=f.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var le,ne="00000000000000000000000000000000",Be=f.__private__.getFileId=function(){return ne},Z=f.__private__.setFileId=function(B){return ne=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Pn=new ud(c.userPermissions,c.userPassword,c.ownerPassword,ne)),ne};f.setFileId=function(B){return Z(B),this},f.getFileId=function(){return Be()};var se=f.__private__.convertDateToPDFDate=function(B){var $=B.getTimezoneOffset(),ke=$<0?"+":"-",$e=Math.floor(Math.abs($/60)),it=Math.abs($%60),Bt=[ke,E($e),"'",E(it),"'"].join("");return["D:",B.getFullYear(),E(B.getMonth()+1),E(B.getDate()),E(B.getHours()),E(B.getMinutes()),E(B.getSeconds()),Bt].join("")},ce=f.__private__.convertPDFDateToDate=function(B){var $=parseInt(B.substr(2,4),10),ke=parseInt(B.substr(6,2),10)-1,$e=parseInt(B.substr(8,2),10),it=parseInt(B.substr(10,2),10),Bt=parseInt(B.substr(12,2),10),Pt=parseInt(B.substr(14,2),10);return new Date($,ke,$e,it,Bt,Pt,0)},be=f.__private__.setCreationDate=function(B){var $;if(B===void 0&&(B=new Date),B instanceof Date)$=se(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=B}return le=$},x=f.__private__.getCreationDate=function(B){var $=le;return B==="jsDate"&&($=ce(le)),$};f.setCreationDate=function(B){return be(B),this},f.getCreationDate=function(B){return x(B)};var F,E=f.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},U=f.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},P=0,T=[],R=[],q=0,j=[],Ae=[],Ee=!1,_e=R,Oe=function(){P=0,q=0,R=[],T=[],j=[],qt=wt(),zt=wt()};f.__private__.setCustomOutputDestination=function(B){Ee=!0,_e=B};var G=function(B){Ee||(_e=B)};f.__private__.resetCustomOutputDestination=function(){Ee=!1,_e=R};var D=f.__private__.out=function(B){return B=B.toString(),q+=B.length+1,_e.push(B),_e},ie=f.__private__.write=function(B){return D(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},me=f.__private__.getArrayBuffer=function(B){for(var $=B.length,ke=new ArrayBuffer($),$e=new Uint8Array(ke);$--;)$e[$]=B.charCodeAt($);return ke},pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return pe};var oe=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(B){return oe=I===C.ADVANCED?B/Se:B,this};var ye,Ne=f.__private__.getFontSize=f.getFontSize=function(){return I===C.COMPAT?oe:oe*Se},we=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(B){return we=B,this},f.__private__.getR2L=f.getR2L=function(){return we};var Fe,ue=f.__private__.setZoomMode=function(B){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))ye=B;else if(isNaN(B)){if($.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');ye=B}else ye=parseInt(B,10)};f.__private__.getZoomMode=function(){return ye};var De,Pe=f.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Fe=B};f.__private__.getPageMode=function(){return Fe};var he=f.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');De=B};f.__private__.getLayoutMode=function(){return De},f.__private__.setDisplayMode=f.setDisplayMode=function(B,$,ke){return ue(B),he($),Pe(ke),this};var ee={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(B){if(Object.keys(ee).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ee[B]},f.__private__.getDocumentProperties=function(){return ee},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(B){for(var $ in ee)ee.hasOwnProperty($)&&B[$]&&(ee[$]=B[$]);return this},f.__private__.setDocumentProperty=function(B,$){if(Object.keys(ee).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ee[B]=$};var ge,Se,Me,Qe,ot,Ye={},Ce={},de=[],Te={},qe={},je={},Re={},Ve=null,At=0,Ke=[],nt=new db(f),ht=n.hotfixes||[],mt={},St={},st=[],tt=function B($,ke,$e,it,Bt,Pt){if(!(this instanceof B))return new B($,ke,$e,it,Bt,Pt);isNaN($)&&($=1),isNaN(ke)&&(ke=0),isNaN($e)&&($e=0),isNaN(it)&&(it=1),isNaN(Bt)&&(Bt=0),isNaN(Pt)&&(Pt=0),this._matrix=[$,ke,$e,it,Bt,Pt]};Object.defineProperty(tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(B)},tt.prototype.multiply=function(B){var $=B.sx*this.sx+B.shy*this.shx,ke=B.sx*this.shy+B.shy*this.sy,$e=B.shx*this.sx+B.sy*this.shx,it=B.shx*this.shy+B.sy*this.sy,Bt=B.tx*this.sx+B.ty*this.shx+this.tx,Pt=B.tx*this.shy+B.ty*this.sy+this.ty;return new tt($,ke,$e,it,Bt,Pt)},tt.prototype.decompose=function(){var B=this.sx,$=this.shy,ke=this.shx,$e=this.sy,it=this.tx,Bt=this.ty,Pt=Math.sqrt(B*B+$*$),Vt=(B/=Pt)*ke+($/=Pt)*$e;ke-=B*Vt,$e-=$*Vt;var ar=Math.sqrt(ke*ke+$e*$e);return Vt/=ar,B*($e/=ar)<$*(ke/=ar)&&(B=-B,$=-$,Vt=-Vt,Pt=-Pt),{scale:new tt(Pt,0,0,ar,0,0),translate:new tt(1,0,0,1,it,Bt),rotate:new tt(B,$,-$,B,0,0),skew:new tt(1,0,Vt,1,0,0)}},tt.prototype.toString=function(B){return this.join(" ")},tt.prototype.inversed=function(){var B=this.sx,$=this.shy,ke=this.shx,$e=this.sy,it=this.tx,Bt=this.ty,Pt=1/(B*$e-$*ke),Vt=$e*Pt,ar=-$*Pt,zr=-ke*Pt,Br=B*Pt;return new tt(Vt,ar,zr,Br,-Vt*it-zr*Bt,-ar*it-Br*Bt)},tt.prototype.applyToPoint=function(B){var $=B.x*this.sx+B.y*this.shx+this.tx,ke=B.x*this.shy+B.y*this.sy+this.ty;return new zl($,ke)},tt.prototype.applyToRectangle=function(B){var $=this.applyToPoint(B),ke=this.applyToPoint(new zl(B.x+B.w,B.y+B.h));return new cc($.x,$.y,ke.x-$.x,ke.y-$.y)},tt.prototype.clone=function(){var B=this.sx,$=this.shy,ke=this.shx,$e=this.sy,it=this.tx,Bt=this.ty;return new tt(B,$,ke,$e,it,Bt)},f.Matrix=tt;var Ft=f.matrixMult=function(B,$){return $.multiply(B)},xt=new tt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=xt;var Ot=function(B,$){if(!qe[B]){var ke=($ instanceof GA?"Sh":"P")+(Object.keys(Te).length+1).toString(10);$.id=ke,qe[B]=ke,Te[ke]=$,nt.publish("addPattern",$)}};f.ShadingPattern=GA,f.TilingPattern=wd,f.addShadingPattern=function(B,$){return H("addShadingPattern()"),Ot(B,$),this},f.beginTilingPattern=function(B){H("beginTilingPattern()"),th(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},f.endTilingPattern=function(B,$){H("endTilingPattern()"),$.stream=Ae[F].join(`
`),Ot(B,$),nt.publish("endTilingPattern",$),st.pop().restore()};var Ze=f.__private__.newObject=function(){var B=wt();return gt(B,!0),B},wt=f.__private__.newObjectDeferred=function(){return P++,T[P]=function(){return q},P},gt=function(B,$){return $=typeof $=="boolean"&&$,T[B]=q,$&&D(B+" 0 obj"),B},Dt=f.__private__.newAdditionalObject=function(){var B={objId:wt(),content:""};return j.push(B),B},qt=wt(),zt=wt(),Mt=f.__private__.decodeColorString=function(B){var $=B.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var ke=parseFloat($[0]);$=[ke,ke,ke,"r"]}for(var $e="#",it=0;it<3;it++)$e+=("0"+Math.floor(255*parseFloat($[it])).toString(16)).slice(-2);return $e},jt=f.__private__.encodeColorString=function(B){var $;typeof B=="string"&&(B={ch1:B});var ke=B.ch1,$e=B.ch2,it=B.ch3,Bt=B.ch4,Pt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ke=="string"&&ke.charAt(0)!=="#"){var Vt=new Zx(ke);if(Vt.ok)ke=Vt.toHex();else if(!/^\d*\.?\d*$/.test(ke))throw new Error('Invalid color "'+ke+'" passed to jsPDF.encodeColorString.')}if(typeof ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ke)&&(ke="#"+ke[1]+ke[1]+ke[2]+ke[2]+ke[3]+ke[3]),typeof ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ke)){var ar=parseInt(ke.substr(1),16);ke=ar>>16&255,$e=ar>>8&255,it=255&ar}if($e===void 0||Bt===void 0&&ke===$e&&$e===it)if(typeof ke=="string")$=ke+" "+Pt[0];else switch(B.precision){case 2:$=xe(ke/255)+" "+Pt[0];break;case 3:default:$=M(ke/255)+" "+Pt[0]}else if(Bt===void 0||dn(Bt)==="object"){if(Bt&&!isNaN(Bt.a)&&Bt.a===0)return $=["1.","1.","1.",Pt[1]].join(" ");if(typeof ke=="string")$=[ke,$e,it,Pt[1]].join(" ");else switch(B.precision){case 2:$=[xe(ke/255),xe($e/255),xe(it/255),Pt[1]].join(" ");break;default:case 3:$=[M(ke/255),M($e/255),M(it/255),Pt[1]].join(" ")}}else if(typeof ke=="string")$=[ke,$e,it,Bt,Pt[2]].join(" ");else switch(B.precision){case 2:$=[xe(ke),xe($e),xe(it),xe(Bt),Pt[2]].join(" ");break;case 3:default:$=[M(ke),M($e),M(it),M(Bt),Pt[2]].join(" ")}return $},Ct=f.__private__.getFilters=function(){return i},Et=f.__private__.putStream=function(B){var $=(B=B||{}).data||"",ke=B.filters||Ct(),$e=B.alreadyAppliedFilters||[],it=B.addLength1||!1,Bt=$.length,Pt=B.objectId,Vt=function(ko){return ko};if(c!==null&&Pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Vt=Pn.encryptor(Pt,0));var ar={};ke===!0&&(ke=["FlateEncode"]);var zr=B.additionalKeyValues||[],Br=(ar=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters($,ke):{data:$,reverseChain:[]}).reverseChain+(Array.isArray($e)?$e.join(" "):$e.toString());if(ar.data.length!==0&&(zr.push({key:"Length",value:ar.data.length}),it===!0&&zr.push({key:"Length1",value:Bt})),Br.length!=0)if(Br.split("/").length-1==1)zr.push({key:"Filter",value:Br});else{zr.push({key:"Filter",value:"["+Br+"]"});for(var jr=0;jr<zr.length;jr+=1)if(zr[jr].key==="DecodeParms"){for(var kn=[],Mn=0;Mn<ar.reverseChain.split("/").length-1;Mn+=1)kn.push("null");kn.push(zr[jr].value),zr[jr].value="["+kn.join(" ")+"]"}}D("<<");for(var oo=0;oo<zr.length;oo++)D("/"+zr[oo].key+" "+zr[oo].value);D(">>"),ar.data.length!==0&&(D("stream"),D(Vt(ar.data)),D("endstream"))},Nt=f.__private__.putPage=function(B){var $=B.number,ke=B.data,$e=B.objId,it=B.contentsObjId;gt($e,!0),D("<</Type /Page"),D("/Parent "+B.rootDictionaryObjId+" 0 R"),D("/Resources "+B.resourceDictionaryObjId+" 0 R"),D("/MediaBox ["+parseFloat(V(B.mediaBox.bottomLeftX))+" "+parseFloat(V(B.mediaBox.bottomLeftY))+" "+V(B.mediaBox.topRightX)+" "+V(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&D("/CropBox ["+V(B.cropBox.bottomLeftX)+" "+V(B.cropBox.bottomLeftY)+" "+V(B.cropBox.topRightX)+" "+V(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&D("/BleedBox ["+V(B.bleedBox.bottomLeftX)+" "+V(B.bleedBox.bottomLeftY)+" "+V(B.bleedBox.topRightX)+" "+V(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&D("/TrimBox ["+V(B.trimBox.bottomLeftX)+" "+V(B.trimBox.bottomLeftY)+" "+V(B.trimBox.topRightX)+" "+V(B.trimBox.topRightY)+"]"),B.artBox!==null&&D("/ArtBox ["+V(B.artBox.bottomLeftX)+" "+V(B.artBox.bottomLeftY)+" "+V(B.artBox.topRightX)+" "+V(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&D("/UserUnit "+B.userUnit),nt.publish("putPage",{objId:$e,pageContext:Ke[$],pageNumber:$,page:ke}),D("/Contents "+it+" 0 R"),D(">>"),D("endobj");var Bt=ke.join(`
`);return I===C.ADVANCED&&(Bt+=`
Q`),gt(it,!0),Et({data:Bt,filters:Ct(),objectId:it}),D("endobj"),$e},Zt=f.__private__.putPages=function(){var B,$,ke=[];for(B=1;B<=At;B++)Ke[B].objId=wt(),Ke[B].contentsObjId=wt();for(B=1;B<=At;B++)ke.push(Nt({number:B,data:Ae[B],objId:Ke[B].objId,contentsObjId:Ke[B].contentsObjId,mediaBox:Ke[B].mediaBox,cropBox:Ke[B].cropBox,bleedBox:Ke[B].bleedBox,trimBox:Ke[B].trimBox,artBox:Ke[B].artBox,userUnit:Ke[B].userUnit,rootDictionaryObjId:qt,resourceDictionaryObjId:zt}));gt(qt,!0),D("<</Type /Pages");var $e="/Kids [";for($=0;$<At;$++)$e+=ke[$]+" 0 R ";D($e+"]"),D("/Count "+At),D(">>"),D("endobj"),nt.publish("postPutPages")},nr=function(B){nt.publish("putFont",{font:B,out:D,newObject:Ze,putStream:Et}),B.isAlreadyPutted!==!0&&(B.objectNumber=Ze(),D("<<"),D("/Type /Font"),D("/BaseFont /"+hd(B.postScriptName)),D("/Subtype /Type1"),typeof B.encoding=="string"&&D("/Encoding /"+B.encoding),D("/FirstChar 32"),D("/LastChar 255"),D(">>"),D("endobj"))},ir=function(){for(var B in Ye)Ye.hasOwnProperty(B)&&(u===!1||u===!0&&h.hasOwnProperty(B))&&nr(Ye[B])},sr=function(B){B.objectNumber=Ze();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[V(B.x),V(B.y),V(B.x+B.width),V(B.y+B.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var ke=B.pages[1].join(`
`);Et({data:ke,additionalKeyValues:$,objectId:B.objectNumber}),D("endobj")},dr=function(){for(var B in mt)mt.hasOwnProperty(B)&&sr(mt[B])},Jr=function(B,$){var ke,$e=[],it=1/($-1);for(ke=0;ke<1;ke+=it)$e.push(ke);if($e.push(1),B[0].offset!=0){var Bt={offset:0,color:B[0].color};B.unshift(Bt)}if(B[B.length-1].offset!=1){var Pt={offset:1,color:B[B.length-1].color};B.push(Pt)}for(var Vt="",ar=0,zr=0;zr<$e.length;zr++){for(ke=$e[zr];ke>B[ar+1].offset;)ar++;var Br=B[ar].offset,jr=(ke-Br)/(B[ar+1].offset-Br),kn=B[ar].color,Mn=B[ar+1].color;Vt+=U(Math.round((1-jr)*kn[0]+jr*Mn[0]).toString(16))+U(Math.round((1-jr)*kn[1]+jr*Mn[1]).toString(16))+U(Math.round((1-jr)*kn[2]+jr*Mn[2]).toString(16))}return Vt.trim()},sn=function(B,$){$||($=21);var ke=Ze(),$e=Jr(B.colors,$),it=[];it.push({key:"FunctionType",value:"0"}),it.push({key:"Domain",value:"[0.0 1.0]"}),it.push({key:"Size",value:"["+$+"]"}),it.push({key:"BitsPerSample",value:"8"}),it.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),it.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Et({data:$e,additionalKeyValues:it,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ke}),D("endobj"),B.objectNumber=Ze(),D("<< /ShadingType "+B.type),D("/ColorSpace /DeviceRGB");var Bt="/Coords ["+V(parseFloat(B.coords[0]))+" "+V(parseFloat(B.coords[1]))+" ";B.type===2?Bt+=V(parseFloat(B.coords[2]))+" "+V(parseFloat(B.coords[3])):Bt+=V(parseFloat(B.coords[2]))+" "+V(parseFloat(B.coords[3]))+" "+V(parseFloat(B.coords[4]))+" "+V(parseFloat(B.coords[5])),D(Bt+="]"),B.matrix&&D("/Matrix ["+B.matrix.toString()+"]"),D("/Function "+ke+" 0 R"),D("/Extend [true true]"),D(">>"),D("endobj")},lr=function(B,$){var ke=wt(),$e=Ze();$.push({resourcesOid:ke,objectOid:$e}),B.objectNumber=$e;var it=[];it.push({key:"Type",value:"/Pattern"}),it.push({key:"PatternType",value:"1"}),it.push({key:"PaintType",value:"1"}),it.push({key:"TilingType",value:"1"}),it.push({key:"BBox",value:"["+B.boundingBox.map(V).join(" ")+"]"}),it.push({key:"XStep",value:V(B.xStep)}),it.push({key:"YStep",value:V(B.yStep)}),it.push({key:"Resources",value:ke+" 0 R"}),B.matrix&&it.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Et({data:B.stream,additionalKeyValues:it,objectId:B.objectNumber}),D("endobj")},cr=function(B){var $;for($ in Te)Te.hasOwnProperty($)&&(Te[$]instanceof GA?sn(Te[$]):Te[$]instanceof wd&&lr(Te[$],B))},qr=function(B){for(var $ in B.objectNumber=Ze(),D("<<"),B)switch($){case"opacity":D("/ca "+xe(B[$]));break;case"stroke-opacity":D("/CA "+xe(B[$]))}D(">>"),D("endobj")},Pr=function(){var B;for(B in je)je.hasOwnProperty(B)&&qr(je[B])},_r=function(){for(var B in D("/XObject <<"),mt)mt.hasOwnProperty(B)&&mt[B].objectNumber>=0&&D("/"+B+" "+mt[B].objectNumber+" 0 R");nt.publish("putXobjectDict"),D(">>")},wr=function(){Pn.oid=Ze(),D("<<"),D("/Filter /Standard"),D("/V "+Pn.v),D("/R "+Pn.r),D("/U <"+Pn.toHexString(Pn.U)+">"),D("/O <"+Pn.toHexString(Pn.O)+">"),D("/P "+Pn.P),D(">>"),D("endobj")},Qr=function(){for(var B in D("/Font <<"),Ye)Ye.hasOwnProperty(B)&&(u===!1||u===!0&&h.hasOwnProperty(B))&&D("/"+B+" "+Ye[B].objectNumber+" 0 R");D(">>")},Wr=function(){if(Object.keys(Te).length>0){for(var B in D("/Shading <<"),Te)Te.hasOwnProperty(B)&&Te[B]instanceof GA&&Te[B].objectNumber>=0&&D("/"+B+" "+Te[B].objectNumber+" 0 R");nt.publish("putShadingPatternDict"),D(">>")}},vn=function(B){if(Object.keys(Te).length>0){for(var $ in D("/Pattern <<"),Te)Te.hasOwnProperty($)&&Te[$]instanceof f.TilingPattern&&Te[$].objectNumber>=0&&Te[$].objectNumber<B&&D("/"+$+" "+Te[$].objectNumber+" 0 R");nt.publish("putTilingPatternDict"),D(">>")}},Hr=function(){if(Object.keys(je).length>0){var B;for(B in D("/ExtGState <<"),je)je.hasOwnProperty(B)&&je[B].objectNumber>=0&&D("/"+B+" "+je[B].objectNumber+" 0 R");nt.publish("putGStateDict"),D(">>")}},pr=function(B){gt(B.resourcesOid,!0),D("<<"),D("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qr(),Wr(),vn(B.objectOid),Hr(),_r(),D(">>"),D("endobj")},In=function(){var B=[];ir(),Pr(),dr(),cr(B),nt.publish("putResources"),B.forEach(pr),pr({resourcesOid:zt,objectOid:Number.MAX_SAFE_INTEGER}),nt.publish("postPutResources")},To=function(){nt.publish("putAdditionalObjects");for(var B=0;B<j.length;B++){var $=j[B];gt($.objId,!0),D($.content),D("endobj")}nt.publish("postPutAdditionalObjects")},ro=function(B){Ce[B.fontName]=Ce[B.fontName]||{},Ce[B.fontName][B.fontStyle]=B.id},xo=function(B,$,ke,$e,it){var Bt={id:"F"+(Object.keys(Ye).length+1).toString(10),postScriptName:B,fontName:$,fontStyle:ke,encoding:$e,isStandardFont:it||!1,metadata:{}};return nt.publish("addFont",{font:Bt,instance:this}),Ye[Bt.id]=Bt,ro(Bt),Bt.id},as=function(B){for(var $=0,ke=pe.length;$<ke;$++){var $e=xo.call(this,B[$][0],B[$][1],B[$][2],pe[$][3],!0);u===!1&&(h[$e]=!0);var it=B[$][0].split("-");ro({id:$e,fontName:it[0],fontStyle:it[1]||""})}nt.publish("addFonts",{fonts:Ye,dictionary:Ce})},Tn=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch($e){var $=$e.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var ke="Error in function "+$.split(`
`)[0].split("<")[0]+": "+$e.message;if(!mr.console)throw new Error(ke);mr.console.error(ke,$e),mr.alert&&alert(ke)}},B.foo.bar=B,B.foo},Lo=function(B,$){var ke,$e,it,Bt,Pt,Vt,ar,zr,Br;if(it=($=$||{}).sourceEncoding||"Unicode",Pt=$.outputEncoding,($.autoencode||Pt)&&Ye[ge].metadata&&Ye[ge].metadata[it]&&Ye[ge].metadata[it].encoding&&(Bt=Ye[ge].metadata[it].encoding,!Pt&&Ye[ge].encoding&&(Pt=Ye[ge].encoding),!Pt&&Bt.codePages&&(Pt=Bt.codePages[0]),typeof Pt=="string"&&(Pt=Bt[Pt]),Pt)){for(ar=!1,Vt=[],ke=0,$e=B.length;ke<$e;ke++)(zr=Pt[B.charCodeAt(ke)])?Vt.push(String.fromCharCode(zr)):Vt.push(B[ke]),Vt[ke].charCodeAt(0)>>8&&(ar=!0);B=Vt.join("")}for(ke=B.length;ar===void 0&&ke!==0;)B.charCodeAt(ke-1)>>8&&(ar=!0),ke--;if(!ar)return B;for(Vt=$.noBOM?[]:[254,255],ke=0,$e=B.length;ke<$e;ke++){if((Br=(zr=B.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(Br),Vt.push(zr-(Br<<8))}return String.fromCharCode.apply(void 0,Vt)},Ln=f.__private__.pdfEscape=f.pdfEscape=function(B,$){return Lo(B,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Po=f.__private__.beginPage=function(B){Ae[++At]=[],Ke[At]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Ds(At),G(Ae[F])},ri=function(B,$){var ke,$e,it;switch(t=$||t,typeof B=="string"&&(ke=_(B.toLowerCase()),Array.isArray(ke)&&($e=ke[0],it=ke[1])),Array.isArray(B)&&($e=B[0]*Se,it=B[1]*Se),isNaN($e)&&($e=o[0],it=o[1]),($e>14400||it>14400)&&(wn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$e=Math.min(14400,$e),it=Math.min(14400,it)),o=[$e,it],t.substr(0,1)){case"l":it>$e&&(o=[it,$e]);break;case"p":$e>it&&(o=[it,$e])}Po(o),Xu(ac),D(si),lc!==0&&D(lc+" J"),dc!==0&&D(dc+" j"),nt.publish("addPage",{pageNumber:At})},ta=function(B){B>0&&B<=At&&(Ae.splice(B,1),Ke.splice(B,1),At--,F>At&&(F=At),this.setPage(F))},Ds=function(B){B>0&&B<=At&&(F=B)},or=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Ae.length-1},Vr=function(B,$,ke){var $e,it=void 0;return ke=ke||{},B=B!==void 0?B:Ye[ge].fontName,$=$!==void 0?$:Ye[ge].fontStyle,$e=B.toLowerCase(),Ce[$e]!==void 0&&Ce[$e][$]!==void 0?it=Ce[$e][$]:Ce[B]!==void 0&&Ce[B][$]!==void 0?it=Ce[B][$]:ke.disableWarning===!1&&wn.warn("Unable to look up font label for font '"+B+"', '"+$+"'. Refer to getFontList() for available fonts."),it||ke.noFallback||(it=Ce.times[$])==null&&(it=Ce.times.normal),it},bn=f.__private__.putInfo=function(){var B=Ze(),$=function($e){return $e};for(var ke in c!==null&&($=Pn.encryptor(B,0)),D("<<"),D("/Producer ("+Ln($("jsPDF "+gr.version))+")"),ee)ee.hasOwnProperty(ke)&&ee[ke]&&D("/"+ke.substr(0,1).toUpperCase()+ke.substr(1)+" ("+Ln($(ee[ke]))+")");D("/CreationDate ("+Ln($(le))+")"),D(">>"),D("endobj")},lo=f.__private__.putCatalog=function(B){var $=(B=B||{}).rootDictionaryObjId||qt;switch(Ze(),D("<<"),D("/Type /Catalog"),D("/Pages "+$+" 0 R"),ye||(ye="fullwidth"),ye){case"fullwidth":D("/OpenAction [3 0 R /FitH null]");break;case"fullheight":D("/OpenAction [3 0 R /FitV null]");break;case"fullpage":D("/OpenAction [3 0 R /Fit]");break;case"original":D("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ke=""+ye;ke.substr(ke.length-1)==="%"&&(ye=parseInt(ye)/100),typeof ye=="number"&&D("/OpenAction [3 0 R /XYZ null null "+xe(ye)+"]")}switch(De||(De="continuous"),De){case"continuous":D("/PageLayout /OneColumn");break;case"single":D("/PageLayout /SinglePage");break;case"two":case"twoleft":D("/PageLayout /TwoColumnLeft");break;case"tworight":D("/PageLayout /TwoColumnRight")}Fe&&D("/PageMode /"+Fe),nt.publish("putCatalog"),D(">>"),D("endobj")},no=f.__private__.putTrailer=function(){D("trailer"),D("<<"),D("/Size "+(P+1)),D("/Root "+P+" 0 R"),D("/Info "+(P-1)+" 0 R"),c!==null&&D("/Encrypt "+Pn.oid+" 0 R"),D("/ID [ <"+ne+"> <"+ne+"> ]"),D(">>")},Vo=f.__private__.putHeader=function(){D("%PDF-"+g),D("%")},Gt=f.__private__.putXRef=function(){var B="0000000000";D("xref"),D("0 "+(P+1)),D("0000000000 65535 f ");for(var $=1;$<=P;$++)typeof T[$]=="function"?D((B+T[$]()).slice(-10)+" 00000 n "):T[$]!==void 0?D((B+T[$]).slice(-10)+" 00000 n "):D("0000000000 00000 n ")},kr=f.__private__.buildDocument=function(){Oe(),G(R),nt.publish("buildDocument"),Vo(),Zt(),To(),In(),c!==null&&wr(),bn(),lo();var B=q;return Gt(),no(),D("startxref"),D(""+B),D("%%EOF"),G(Ae[F]),R.join(`
`)},zn=f.__private__.getBlob=function(B){return new Blob([me(B)],{type:"application/pdf"})},zo=f.output=f.__private__.output=Tn(function(B,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",B){case void 0:return kr();case"save":f.save($.filename);break;case"arraybuffer":return me(kr());case"blob":return zn(kr());case"bloburi":case"bloburl":if(mr.URL!==void 0&&typeof mr.URL.createObjectURL=="function")return mr.URL&&mr.URL.createObjectURL(zn(kr()))||void 0;wn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ke="",$e=kr();try{ke=bm($e)}catch{ke=bm(unescape(encodeURIComponent($e)))}return"data:application/pdf;filename="+$.filename+";base64,"+ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var it="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(it=$.pdfObjectUrl,Bt="");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+it+'"'+Bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Vt=mr.open();return Vt!==null&&Vt.document.write(Pt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',zr=mr.open();if(zr!==null){zr.document.write(ar);var Br=this;zr.document.documentElement.querySelector("#pdfViewer").onload=function(){zr.document.title=$.filename,zr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Br.output("bloburl"))}}return zr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',kn=mr.open();if(kn!==null&&(kn.document.write(jr),kn.document.title=$.filename),kn||typeof safari>"u")return kn;break;case"datauri":case"dataurl":return mr.document.location.href=this.output("datauristring",$);default:return null}}),Ns=function(B){return Array.isArray(ht)===!0&&ht.indexOf(B)>-1};switch(r){case"pt":Se=1;break;case"mm":Se=72/25.4;break;case"cm":Se=72/2.54;break;case"in":Se=72;break;case"px":Se=Ns("px_scaling")==1?.75:96/72;break;case"pc":case"em":Se=12;break;case"ex":Se=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Se=r}var Pn=null;be(),Z();var ni=function(B){return c!==null?Pn.encryptor(B,0):function($){return $}},La=f.__private__.getPageInfo=f.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ke[B].objId,pageNumber:B,pageContext:Ke[B]}},br=f.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Ke)if(Ke[$].objId===B)break;return La($)},Ir=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ke[F].objId,pageNumber:F,pageContext:Ke[F]}};f.addPage=function(){return ri.apply(this,arguments),this},f.setPage=function(){return Ds.apply(this,arguments),G.call(this,Ae[F]),this},f.insertPage=function(B){return this.addPage(),this.movePage(F,B),this},f.movePage=function(B,$){var ke,$e;if(B>$){ke=Ae[B],$e=Ke[B];for(var it=B;it>$;it--)Ae[it]=Ae[it-1],Ke[it]=Ke[it-1];Ae[$]=ke,Ke[$]=$e,this.setPage($)}else if(B<$){ke=Ae[B],$e=Ke[B];for(var Bt=B;Bt<$;Bt++)Ae[Bt]=Ae[Bt+1],Ke[Bt]=Ke[Bt+1];Ae[$]=ke,Ke[$]=$e,this.setPage($)}return this},f.deletePage=function(){return ta.apply(this,arguments),this},f.__private__.text=f.text=function(B,$,ke,$e,it){var Bt,Pt,Vt,ar,zr,Br,jr,kn,Mn,oo=($e=$e||{}).scope||this;if(typeof B=="number"&&typeof $=="number"&&(typeof ke=="string"||Array.isArray(ke))){var ko=ke;ke=$,$=B,B=ko}if(arguments[3]instanceof tt?(H("The transform parameter of text() with a Matrix value"),Mn=it):(Vt=arguments[4],ar=arguments[5],dn(jr=arguments[3])==="object"&&jr!==null||(typeof Vt=="string"&&(ar=Vt,Vt=null),typeof jr=="string"&&(ar=jr,jr=null),typeof jr=="number"&&(Vt=jr,jr=null),$e={flags:jr,angle:Vt,align:ar})),isNaN($)||isNaN(ke)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return oo;var go="",ii=!1,zs=typeof $e.lineHeightFactor=="number"?$e.lineHeightFactor:IA,Ui=oo.internal.scaleFactor;function rh(_n){return _n=_n.split("	").join(Array($e.TabLen||9).join(" ")),Ln(_n,jr)}function pc(_n){for(var Bn,$n=_n.concat(),co=[],ia=$n.length;ia--;)typeof(Bn=$n.shift())=="string"?co.push(Bn):Array.isArray(_n)&&(Bn.length===1||Bn[1]===void 0&&Bn[2]===void 0)?co.push(Bn[0]):co.push([Bn[0],Bn[1],Bn[2]]);return co}function gc(_n,Bn){var $n;if(typeof _n=="string")$n=Bn(_n)[0];else if(Array.isArray(_n)){for(var co,ia,xc=_n.concat(),kl=[],ah=xc.length;ah--;)typeof(co=xc.shift())=="string"?kl.push(Bn(co)[0]):Array.isArray(co)&&typeof co[0]=="string"&&(ia=Bn(co[0],co[1],co[2]),kl.push([ia[0],ia[1],ia[2]]));$n=kl}return $n}var Sl=!1,vc=!0;if(typeof B=="string")Sl=!0;else if(Array.isArray(B)){var mc=B.concat();Pt=[];for(var El,Co=mc.length;Co--;)(typeof(El=mc.shift())!="string"||Array.isArray(El)&&typeof El[0]!="string")&&(vc=!1);Sl=vc}if(Sl===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var Fl=oe/oo.internal.scaleFactor,Il=Fl*(zs-1);switch($e.baseline){case"bottom":ke-=Il;break;case"top":ke+=Fl-Il;break;case"hanging":ke+=Fl-2*Il;break;case"middle":ke+=Fl/2-Il}if((Br=$e.maxWidth||0)>0&&(typeof B=="string"?B=oo.splitTextToSize(B,Br):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(_n,Bn){return _n.concat(oo.splitTextToSize(Bn,Br))},[]))),Bt={text:B,x:$,y:ke,options:$e,mutex:{pdfEscape:Ln,activeFontKey:ge,fonts:Ye,activeFontSize:oe}},nt.publish("preProcessText",Bt),B=Bt.text,Vt=($e=Bt.options).angle,!(Mn instanceof tt)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,$e.rotationDirection===0&&(Vt=-Vt),I===C.ADVANCED&&(Vt=-Vt);var Ul=Math.cos(Vt),wc=Math.sin(Vt);Mn=new tt(Ul,wc,-wc,Ul,0,0)}else Vt&&Vt instanceof tt&&(Mn=Vt);I!==C.ADVANCED||Mn||(Mn=xt),(zr=$e.charSpace||xl)!==void 0&&(go+=V(O(zr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(kn=$e.horizontalScale)!==void 0&&(go+=V(100*kn)+` Tz
`),$e.lang;var As=-1,jg=$e.renderingMode!==void 0?$e.renderingMode:$e.stroke,yc=oo.internal.getCurrentPageInfo().pageContext;switch(jg){case 0:case!1:case"fill":As=0;break;case 1:case!0:case"stroke":As=1;break;case 2:case"fillThenStroke":As=2;break;case 3:case"invisible":As=3;break;case 4:case"fillAndAddForClipping":As=4;break;case 5:case"strokeAndAddPathForClipping":As=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":As=6;break;case 7:case"addToPathForClipping":As=7}var nh=yc.usedRenderingMode!==void 0?yc.usedRenderingMode:-1;As!==-1?go+=As+` Tr
`:nh!==-1&&(go+=`0 Tr
`),As!==-1&&(yc.usedRenderingMode=As),ar=$e.align||"left";var Hs,Ql=oe*zs,oh=oo.internal.pageSize.getWidth(),sh=Ye[ge];zr=$e.charSpace||xl,Br=$e.maxWidth||0,jr=Object.assign({autoencode:!0,noBOM:!0},$e.flags);var Da=[],TA=function(_n){return oo.getStringUnitWidth(_n,{font:sh,charSpace:zr,fontSize:oe,doKerning:!1})*oe/Ui};if(Object.prototype.toString.call(B)==="[object Array]"){var ls;Pt=pc(B),ar!=="left"&&(Hs=Pt.map(TA));var Go,Na=0;if(ar==="right"){$-=Hs[0],B=[],Co=Pt.length;for(var na=0;na<Co;na++)na===0?(Go=Ii($),ls=ra(ke)):(Go=O(Na-Hs[na]),ls=-Ql),B.push([Pt[na],Go,ls]),Na=Hs[na]}else if(ar==="center"){$-=Hs[0]/2,B=[],Co=Pt.length;for(var oa=0;oa<Co;oa++)oa===0?(Go=Ii($),ls=ra(ke)):(Go=O((Na-Hs[oa])/2),ls=-Ql),B.push([Pt[oa],Go,ls]),Na=Hs[oa]}else if(ar==="left"){B=[],Co=Pt.length;for(var Tl=0;Tl<Co;Tl++)B.push(Pt[Tl])}else if(ar==="justify"&&sh.encoding==="Identity-H"){B=[],Co=Pt.length,Br=Br!==0?Br:oh;for(var sa=0,Kn=0;Kn<Co;Kn++)if(ls=Kn===0?ra(ke):-Ql,Go=Kn===0?Ii($):sa,Kn<Co-1){var bc=O((Br-Hs[Kn])/(Pt[Kn].split(" ").length-1)),Wo=Pt[Kn].split(" ");B.push([Wo[0]+" ",Go,ls]),sa=0;for(var js=1;js<Wo.length;js++){var Ll=(TA(Wo[js-1]+" "+Wo[js])-TA(Wo[js]))*Ui+bc;js==Wo.length-1?B.push([Wo[js],Ll,0]):B.push([Wo[js]+" ",Ll,0]),sa-=Ll}}else B.push([Pt[Kn],Go,ls]);B.push(["",sa,0])}else{if(ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Co=Pt.length,Br=Br!==0?Br:oh,Kn=0;Kn<Co;Kn++)ls=Kn===0?ra(ke):-Ql,Go=Kn===0?Ii($):0,Kn<Co-1?Da.push(V(O((Br-Hs[Kn])/(Pt[Kn].split(" ").length-1)))):Da.push(0),B.push([Pt[Kn],Go,ls])}}var ih=typeof $e.R2L=="boolean"?$e.R2L:we;ih===!0&&(B=gc(B,function(_n,Bn,$n){return[_n.split("").reverse().join(""),Bn,$n]})),Bt={text:B,x:$,y:ke,options:$e,mutex:{pdfEscape:Ln,activeFontKey:ge,fonts:Ye,activeFontSize:oe}},nt.publish("postProcessText",Bt),B=Bt.text,ii=Bt.mutex.isHex||!1;var _c=Ye[ge].encoding;_c!=="WinAnsiEncoding"&&_c!=="StandardEncoding"||(B=gc(B,function(_n,Bn,$n){return[rh(_n),Bn,$n]})),Pt=pc(B),B=[];for(var LA,PA,Ma,kA=0,Pl=1,OA=Array.isArray(Pt[0])?Pl:kA,Ha="",Bc=function(_n,Bn,$n){var co="";return $n instanceof tt?($n=typeof $e.angle=="number"?Ft($n,new tt(1,0,0,1,_n,Bn)):Ft(new tt(1,0,0,1,_n,Bn),$n),I===C.ADVANCED&&($n=Ft(new tt(1,0,0,-1,0,0),$n)),co=$n.join(" ")+` Tm
`):co=V(_n)+" "+V(Bn)+` Td
`,co},Rs=0;Rs<Pt.length;Rs++){switch(Ha="",OA){case Pl:Ma=(ii?"<":"(")+Pt[Rs][0]+(ii?">":")"),LA=parseFloat(Pt[Rs][1]),PA=parseFloat(Pt[Rs][2]);break;case kA:Ma=(ii?"<":"(")+Pt[Rs]+(ii?">":")"),LA=Ii($),PA=ra(ke)}Da!==void 0&&Da[Rs]!==void 0&&(Ha=Da[Rs]+` Tw
`),Rs===0?B.push(Ha+Bc(LA,PA,Mn)+Ma):OA===kA?B.push(Ha+Ma):OA===Pl&&B.push(Ha+Bc(LA,PA,Mn)+Ma)}B=OA===kA?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var qs=`BT
/`;return qs+=ge+" "+oe+` Tf
`,qs+=V(oe*zs)+` TL
`,qs+=UA+`
`,qs+=go,qs+=B,D(qs+="ET"),h[ge]=!0,oo};var Xr=f.__private__.clip=f.clip=function(B){return D(B==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Xr("evenodd")},f.__private__.discardPath=f.discardPath=function(){return D("n"),this};var un=f.__private__.isValidStyle=function(B){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&($=!0),$};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(B){return un(B)&&(d=B),this};var xs=f.__private__.getStyle=f.getStyle=function(B){var $=d;switch(B){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=B}return $},oi=f.close=function(){return D("h"),this};f.stroke=function(){return D("S"),this},f.fill=function(B){return Ms("f",B),this},f.fillEvenOdd=function(B){return Ms("f*",B),this},f.fillStroke=function(B){return Ms("B",B),this},f.fillStrokeEvenOdd=function(B){return Ms("B*",B),this};var Ms=function(B,$){dn($)==="object"?sc($,B):D(B)},Fi=function(B){B===null||I===C.ADVANCED&&B===void 0||(B=xs(B),D(B))};function oc(B,$,ke,$e,it){var Bt=new wd($||this.boundingBox,ke||this.xStep,$e||this.yStep,this.gState,it||this.matrix);Bt.stream=this.stream;var Pt=B+"$$"+this.cloneIndex+++"$$";return Ot(Pt,Bt),Bt}var sc=function(B,$){var ke=qe[B.key],$e=Te[ke];if($e instanceof GA)D("q"),D(kg($)),$e.gState&&f.setGState($e.gState),D(B.matrix.toString()+" cm"),D("/"+ke+" sh"),D("Q");else if($e instanceof wd){var it=new tt(1,0,0,-1,0,Oa());B.matrix&&(it=it.multiply(B.matrix||xt),ke=oc.call($e,B.key,B.boundingBox,B.xStep,B.yStep,it).id),D("q"),D("/Pattern cs"),D("/"+ke+" scn"),$e.gState&&f.setGState($e.gState),D($),D("Q")}},kg=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ic=f.moveTo=function(B,$){return D(V(O(B))+" "+V(te($))+" m"),this},FA=f.lineTo=function(B,$){return D(V(O(B))+" "+V(te($))+" l"),this},Pa=f.curveTo=function(B,$,ke,$e,it,Bt){return D([V(O(B)),V(te($)),V(O(ke)),V(te($e)),V(O(it)),V(te(Bt)),"c"].join(" ")),this};f.__private__.line=f.line=function(B,$,ke,$e,it){if(isNaN(B)||isNaN($)||isNaN(ke)||isNaN($e)||!un(it))throw new Error("Invalid arguments passed to jsPDF.line");return I===C.COMPAT?this.lines([[ke-B,$e-$]],B,$,[1,1],it||"S"):this.lines([[ke-B,$e-$]],B,$,[1,1]).stroke()},f.__private__.lines=f.lines=function(B,$,ke,$e,it,Bt){var Pt,Vt,ar,zr,Br,jr,kn,Mn,oo,ko,go,ii;if(typeof B=="number"&&(ii=ke,ke=$,$=B,B=ii),$e=$e||[1,1],Bt=Bt||!1,isNaN($)||isNaN(ke)||!Array.isArray(B)||!Array.isArray($e)||!un(it)||typeof Bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ic($,ke),Pt=$e[0],Vt=$e[1],zr=B.length,ko=$,go=ke,ar=0;ar<zr;ar++)(Br=B[ar]).length===2?(ko=Br[0]*Pt+ko,go=Br[1]*Vt+go,FA(ko,go)):(jr=Br[0]*Pt+ko,kn=Br[1]*Vt+go,Mn=Br[2]*Pt+ko,oo=Br[3]*Vt+go,ko=Br[4]*Pt+ko,go=Br[5]*Vt+go,Pa(jr,kn,Mn,oo,ko,go));return Bt&&oi(),Fi(it),this},f.path=function(B){for(var $=0;$<B.length;$++){var ke=B[$],$e=ke.c;switch(ke.op){case"m":ic($e[0],$e[1]);break;case"l":FA($e[0],$e[1]);break;case"c":Pa.apply(this,$e);break;case"h":oi()}}return this},f.__private__.rect=f.rect=function(B,$,ke,$e,it){if(isNaN(B)||isNaN($)||isNaN(ke)||isNaN($e)||!un(it))throw new Error("Invalid arguments passed to jsPDF.rect");return I===C.COMPAT&&($e=-$e),D([V(O(B)),V(te($)),V(O(ke)),V(O($e)),"re"].join(" ")),Fi(it),this},f.__private__.triangle=f.triangle=function(B,$,ke,$e,it,Bt,Pt){if(isNaN(B)||isNaN($)||isNaN(ke)||isNaN($e)||isNaN(it)||isNaN(Bt)||!un(Pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ke-B,$e-$],[it-ke,Bt-$e],[B-it,$-Bt]],B,$,[1,1],Pt,!0),this},f.__private__.roundedRect=f.roundedRect=function(B,$,ke,$e,it,Bt,Pt){if(isNaN(B)||isNaN($)||isNaN(ke)||isNaN($e)||isNaN(it)||isNaN(Bt)||!un(Pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return it=Math.min(it,.5*ke),Bt=Math.min(Bt,.5*$e),this.lines([[ke-2*it,0],[it*Vt,0,it,Bt-Bt*Vt,it,Bt],[0,$e-2*Bt],[0,Bt*Vt,-it*Vt,Bt,-it,Bt],[2*it-ke,0],[-it*Vt,0,-it,-Bt*Vt,-it,-Bt],[0,2*Bt-$e],[0,-Bt*Vt,it*Vt,-Bt,it,-Bt]],B+it,$,[1,1],Pt,!0),this},f.__private__.ellipse=f.ellipse=function(B,$,ke,$e,it){if(isNaN(B)||isNaN($)||isNaN(ke)||isNaN($e)||!un(it))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Bt=4/3*(Math.SQRT2-1)*ke,Pt=4/3*(Math.SQRT2-1)*$e;return ic(B+ke,$),Pa(B+ke,$-Pt,B+Bt,$-$e,B,$-$e),Pa(B-Bt,$-$e,B-ke,$-Pt,B-ke,$),Pa(B-ke,$+Pt,B-Bt,$+$e,B,$+$e),Pa(B+Bt,$+$e,B+ke,$+Pt,B+ke,$),Fi(it),this},f.__private__.circle=f.circle=function(B,$,ke,$e){if(isNaN(B)||isNaN($)||isNaN(ke)||!un($e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,$,ke,ke,$e)},f.setFont=function(B,$,ke){return ke&&($=W($,ke)),ge=Vr(B,$,{disableWarning:!1}),this};var Og=f.__private__.getFont=f.getFont=function(){return Ye[Vr.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var B,$,ke={};for(B in Ce)if(Ce.hasOwnProperty(B))for($ in ke[B]=[],Ce[B])Ce[B].hasOwnProperty($)&&ke[B].push($);return ke},f.addFont=function(B,$,ke,$e,it){var Bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Bt.indexOf(arguments[3])!==-1?it=arguments[3]:arguments[3]&&Bt.indexOf(arguments[3])==-1&&(ke=W(ke,$e)),it=it||"Identity-H",xo.call(this,B,$,ke,it)};var IA,ac=n.lineWidth||.200025,Bl=f.__private__.getLineWidth=f.getLineWidth=function(){return ac},Xu=f.__private__.setLineWidth=f.setLineWidth=function(B){return ac=B,D(V(O(B))+" w"),this};f.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(B,$){if(B=B||[],$=$||0,isNaN($)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(ke){return V(O(ke))}).join(" "),$=V(O($)),D("["+B+"] "+$+" d"),this};var Yu=f.__private__.getLineHeight=f.getLineHeight=function(){return oe*IA};f.__private__.getLineHeight=f.getLineHeight=function(){return oe*IA};var Ju=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(IA=B),this},Zu=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return IA};Ju(n.lineHeight);var Ii=f.__private__.getHorizontalCoordinate=function(B){return O(B)},ra=f.__private__.getVerticalCoordinate=function(B){return I===C.ADVANCED?B:Ke[F].mediaBox.topRightY-Ke[F].mediaBox.bottomLeftY-O(B)},Dg=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(B){return V(Ii(B))},ka=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(B){return V(ra(B))},si=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Mt(si)},f.__private__.setStrokeColor=f.setDrawColor=function(B,$,ke,$e){return si=jt({ch1:B,ch2:$,ch3:ke,ch4:$e,pdfColorType:"draw",precision:2}),D(si),this};var Ac=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Mt(Ac)},f.__private__.setFillColor=f.setFillColor=function(B,$,ke,$e){return Ac=jt({ch1:B,ch2:$,ch3:ke,ch4:$e,pdfColorType:"fill",precision:2}),D(Ac),this};var UA=n.textColor||"0 g",Ng=f.__private__.getTextColor=f.getTextColor=function(){return Mt(UA)};f.__private__.setTextColor=f.setTextColor=function(B,$,ke,$e){return UA=jt({ch1:B,ch2:$,ch3:ke,ch4:$e,pdfColorType:"text",precision:3}),this};var xl=n.charSpace,Mg=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(xl||0)};f.__private__.setCharSpace=f.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xl=B,this};var lc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(B){var $=f.CapJoinStyles[B];if($===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lc=$,D($+" J"),this};var dc=0;f.__private__.setLineJoin=f.setLineJoin=function(B){var $=f.CapJoinStyles[B];if($===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dc=$,D($+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return D(V(O(B))+" M"),this},f.GState=Pp,f.setGState=function(B){(B=typeof B=="string"?je[Re[B]]:eh(null,B)).equals(Ve)||(D("/"+B.id+" gs"),Ve=B)};var eh=function(B,$){if(!B||!Re[B]){var ke=!1;for(var $e in je)if(je.hasOwnProperty($e)&&je[$e].equals($)){ke=!0;break}if(ke)$=je[$e];else{var it="GS"+(Object.keys(je).length+1).toString(10);je[it]=$,$.id=it}return B&&(Re[B]=$.id),nt.publish("addGState",$),$}};f.addGState=function(B,$){return eh(B,$),this},f.saveGraphicsState=function(){return D("q"),de.push({key:ge,size:oe,color:UA}),this},f.restoreGraphicsState=function(){D("Q");var B=de.pop();return ge=B.key,oe=B.size,UA=B.color,Ve=null,this},f.setCurrentTransformationMatrix=function(B){return D(B.toString()+" cm"),this},f.comment=function(B){return D("#"+B),this};var zl=function(B,$){var ke=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ke},set:function(Bt){isNaN(Bt)||(ke=parseFloat(Bt))}});var $e=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $e},set:function(Bt){isNaN(Bt)||($e=parseFloat(Bt))}});var it="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return it},set:function(Bt){it=Bt.toString()}}),this},cc=function(B,$,ke,$e){zl.call(this,B,$),this.type="rect";var it=ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return it},set:function(Pt){isNaN(Pt)||(it=parseFloat(Pt))}});var Bt=$e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Bt},set:function(Pt){isNaN(Pt)||(Bt=parseFloat(Pt))}}),this},uc=function(){this.page=At,this.currentPage=F,this.pages=Ae.slice(0),this.pagesContext=Ke.slice(0),this.x=Me,this.y=Qe,this.matrix=ot,this.width=QA(F),this.height=Oa(F),this.outputDestination=_e,this.id="",this.objectNumber=-1};uc.prototype.restore=function(){At=this.page,F=this.currentPage,Ke=this.pagesContext,Ae=this.pages,Me=this.x,Qe=this.y,ot=this.matrix,hc(F,this.width),fc(F,this.height),_e=this.outputDestination};var th=function(B,$,ke,$e,it){st.push(new uc),At=F=0,Ae=[],Me=B,Qe=$,ot=it,Po([ke,$e])},Hg=function(B){if(St[B])st.pop().restore();else{var $=new uc,ke="Xo"+(Object.keys(mt).length+1).toString(10);$.id=ke,St[B]=ke,mt[ke]=$,nt.publish("addFormObject",$),st.pop().restore()}};for(var Cl in f.beginFormObject=function(B,$,ke,$e,it){return th(B,$,ke,$e,it),this},f.endFormObject=function(B){return Hg(B),this},f.doFormObject=function(B,$){var ke=mt[St[B]];return D("q"),D($.toString()+" cm"),D("/"+ke.id+" Do"),D("Q"),this},f.getFormObject=function(B){var $=mt[St[B]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},f.save=function(B,$){return B=B||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(jA(zn(kr()),B),typeof jA.unload=="function"&&mr.setTimeout&&setTimeout(jA.unload,911),this):new Promise(function(ke,$e){try{var it=jA(zn(kr()),B);typeof jA.unload=="function"&&mr.setTimeout&&setTimeout(jA.unload,911),ke(it)}catch(Bt){$e(Bt.message)}})},gr.API)gr.API.hasOwnProperty(Cl)&&(Cl==="events"&&gr.API.events.length?function(B,$){var ke,$e,it;for(it=$.length-1;it!==-1;it--)ke=$[it][0],$e=$[it][1],B.subscribe.apply(B,[ke].concat(typeof $e=="function"?[$e]:$e))}(nt,gr.API.events):f[Cl]=gr.API[Cl]);var QA=f.getPageWidth=function(B){return(Ke[B=B||F].mediaBox.topRightX-Ke[B].mediaBox.bottomLeftX)/Se},hc=f.setPageWidth=function(B,$){Ke[B].mediaBox.topRightX=$*Se+Ke[B].mediaBox.bottomLeftX},Oa=f.getPageHeight=function(B){return(Ke[B=B||F].mediaBox.topRightY-Ke[B].mediaBox.bottomLeftY)/Se},fc=f.setPageHeight=function(B,$){Ke[B].mediaBox.topRightY=$*Se+Ke[B].mediaBox.bottomLeftY};return f.internal={pdfEscape:Ln,getStyle:xs,getFont:Og,getFontSize:Ne,getCharSpace:Mg,getTextColor:Ng,getLineHeight:Yu,getLineHeightFactor:Zu,getLineWidth:Bl,write:ie,getHorizontalCoordinate:Ii,getVerticalCoordinate:ra,getCoordinateString:Dg,getVerticalCoordinateString:ka,collections:{},newObject:Ze,newAdditionalObject:Dt,newObjectDeferred:wt,newObjectDeferredBegin:gt,getFilters:Ct,putStream:Et,events:nt,scaleFactor:Se,pageSize:{getWidth:function(){return QA(F)},setWidth:function(B){hc(F,B)},getHeight:function(){return Oa(F)},setHeight:function(B){fc(F,B)}},encryptionOptions:c,encryption:Pn,getEncryptor:ni,output:zo,getNumberOfPages:or,pages:Ae,out:D,f2:xe,f3:M,getPageInfo:La,getPageInfoByObjId:br,getCurrentPageInfo:Ir,getPDFVersion:m,Point:zl,Rectangle:cc,Matrix:tt,hasHotfix:Ns},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return QA(F)},set:function(B){hc(F,B)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Oa(F)},set:function(B){fc(F,B)},enumerable:!0,configurable:!0}),as.call(f,pe),ge="F1",ri(o,t),nt.publish("initialized"),f}ud.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},ud.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ud.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ud.prototype.processOwnerPassword=function(n,e){return Bm(_m(e).substr(0,5),n)},ud.prototype.encryptor=function(n,e){var t=_m(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Bm(t,r)}},Pp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||dn(n)!==dn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},gr.API={events:[]},gr.version="3.0.0";var jn=gr.API,G1=1,_l=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},id=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xr=function(n){return n.toFixed(2)},Za=function(n){return n.toFixed(5)};jn.__acroform__={};var Bs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},cb=function(n){return n*G1},ki=function(n){var e=new nz,t=tr.internal.getHeight(n)||0,r=tr.internal.getWidth(n)||0;return e.BBox=[0,0,Number(xr(r)),Number(xr(t))],e},KD=jn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},$D=jn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},VD=jn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Yn=jn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VD(n,e-1)},Jn=jn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return KD(n,e-1)},Zn=jn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $D(n,e-1)},GD=jn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],s=n[1],i=n[2],a=n[3],A={};return A.lowerLeft_X=t(o)||0,A.lowerLeft_Y=r(s+a)||0,A.upperRight_X=t(o+i)||0,A.upperRight_Y=r(s)||0,[Number(xr(A.lowerLeft_X)),Number(xr(A.lowerLeft_Y)),Number(xr(A.upperRight_X)),Number(xr(A.upperRight_Y))]},WD=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=xm(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+xr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ki(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},xm=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(M){return M.split(`
`)}):o.map(function(M){return[M]});var s=t,i=tr.internal.getHeight(n)||0;i=i<0?-i:i;var a=tr.internal.getWidth(n)||0;a=a<0?-a:a;var A=function(M,O,X){if(M+1<o.length){var te=O+" "+o[M+1][0];return If(te,n,X).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var d,c,u=If("3",n,s).height,h=n.multiline?i-s:(i-u)/2,f=h+=2,g=0,m=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+If(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var _="",C=0,I=0;I<o.length;I++)if(o.hasOwnProperty(I)){var N=!1;if(o[I].length!==1&&y!==o[I].length-1){if((u+2)*(C+2)+2>i)continue e;_+=o[I][y],N=!0,m=I,I--}else{_=(_+=o[I][y]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var k=parseInt(I),W=A(k,_,s),V=I>=o.length-1;if(W&&!V){_+=" ",y=0;continue}if(W||V){if(V)m=k;else if(n.multiline&&(u+2)*(C+2)+2>i)continue e}else{if(!n.multiline||(u+2)*(C+2)+2>i)continue e;m=k}}for(var H="",J=g;J<=m;J++){var xe=o[J];if(n.multiline){if(J===m){H+=xe[y]+" ",y=(y+1)%xe.length;continue}if(J===g){H+=xe[xe.length-1]+" ";continue}}H+=xe[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,c=If(H,n,s).width,n.textAlign){case"right":d=a-c-2;break;case"center":d=(a-c)/2;break;case"left":default:d=2}e+=xr(d)+" "+xr(f)+` Td
`,e+="("+_l(H)+`) Tj
`,e+=-xr(d)+` 0 Td
`,f=-(s+2),c=0,g=N?m:m+1,C++,_=""}break}return r.text=e,r.fontSize=s,r},If=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},XD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YD=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},JD=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),dn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},ZD=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ci.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(XD)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");G1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new oz,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.objId=void 0,s.hasAnnotation&&YD(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var s=!r;for(var i in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var a=r[i],A=[],d=a.Rect;if(a.Rect&&(a.Rect=GD(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=tr.createDefaultAppearanceStream(a),dn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(A=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=WD(a);A.push({key:"AP",value:"<</N "+c+">>"}),o.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var g=f[i];typeof g=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g+" ",o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g,o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:a.objId}),o.internal.out("endobj")}s&&JD(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},rz=jn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(i){return i};if(Array.isArray(n)){for(var o="[",s=0;s<n.length;s++)switch(s!==0&&(o+=" "),dn(n[s])){case"boolean":case"number":case"object":o+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+_l(r(n[s].toString()))+")"):o+=n[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ev=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+_l(r(n))+")"},Mi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mi.prototype.toString=function(){return this.objId+" 0 R"},Mi.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Mi.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:rz(o,this.objId,this.scope)}):o instanceof Mi?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var nz=function(){Mi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Bs(nz,Mi);var oz=function(){Mi.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+_l(t(n))+")"}},set:function(t){n=t}})};Bs(oz,Mi);var Ci=function n(){Mi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Yn(e,3)},set:function(_){_?this.F=Jn(e,3):this.F=Zn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');t=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof kp)return;s="FieldObject"+n.FieldNum++}var _=function(C){return C};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+_l(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(_){i=_}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(_){A=_}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/G1:d},set:function(_){d=_}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof kp||this instanceof Al))return ev(u,this.objId,this.scope)},set:function(_){_=_.toString(),u=_}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof _o?h:ev(h,this.objId,this.scope)},set:function(_){_=_.toString(),h=this instanceof _o?_:_.substr(0,1)==="("?id(_.substr(1,_.length-2)):id(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _o?id(h.substr(1,h.length-1)):h},set:function(_){_=_.toString(),h=this instanceof _o?"/"+_:_}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof _o?f:ev(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=this instanceof _o?_:_.substr(0,1)==="("?id(_.substr(1,_.length-2)):id(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _o?id(f.substr(1,f.length-1)):f},set:function(_){_=_.toString(),f=this instanceof _o?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){_=!!_,m=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(_){g=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,1)},set:function(_){_?this.Ff=Jn(this.Ff,1):this.Ff=Zn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,2)},set:function(_){_?this.Ff=Jn(this.Ff,2):this.Ff=Zn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,3)},set:function(_){_?this.Ff=Jn(this.Ff,3):this.Ff=Zn(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');y=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(y){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};Bs(Ci,Mi);var Ud=function(){Ci.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rz(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(s,i,a){a||(a=1);for(var A,d=[];A=i.exec(s);)d.push(A[a]);return d}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,18)},set:function(t){t?this.Ff=Jn(this.Ff,18):this.Ff=Zn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Jn(this.Ff,19):this.Ff=Zn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,20)},set:function(t){t?(this.Ff=Jn(this.Ff,20),e.sort()):this.Ff=Zn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,22)},set:function(t){t?this.Ff=Jn(this.Ff,22):this.Ff=Zn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,23)},set:function(t){t?this.Ff=Jn(this.Ff,23):this.Ff=Zn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,27)},set:function(t){t?this.Ff=Jn(this.Ff,27):this.Ff=Zn(this.Ff,27)}}),this.hasAppearanceStream=!1};Bs(Ud,Ci);var Qd=function(){Ud.call(this),this.fontName="helvetica",this.combo=!1};Bs(Qd,Ud);var Td=function(){Qd.call(this),this.combo=!0};Bs(Td,Qd);var $f=function(){Td.call(this),this.edit=!0};Bs($f,Td);var _o=function(){Ci.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,15)},set:function(t){t?this.Ff=Jn(this.Ff,15):this.Ff=Zn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,16)},set:function(t){t?this.Ff=Jn(this.Ff,16):this.Ff=Zn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,17)},set:function(t){t?this.Ff=Jn(this.Ff,17):this.Ff=Zn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,26)},set:function(t){t?this.Ff=Jn(this.Ff,26):this.Ff=Zn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+_l(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){dn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Bs(_o,Ci);var Vf=function(){_o.call(this),this.pushButton=!0};Bs(Vf,_o);var Ld=function(){_o.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Bs(Ld,_o);var kp=function(){var n,e;Ci.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+_l(o(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(o){dn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bs(kp,Ci),Ld.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ld.prototype.createOption=function(n){var e=new kp;return e.Parent=this,e.optionName=n,this.Kids.push(e),eN.call(this.scope,e),e};var Gf=function(){_o.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tr.CheckBox.createAppearanceStream()};Bs(Gf,_o);var Al=function(){Ci.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,13)},set:function(e){e?this.Ff=Jn(this.Ff,13):this.Ff=Zn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,21)},set:function(e){e?this.Ff=Jn(this.Ff,21):this.Ff=Zn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,23)},set:function(e){e?this.Ff=Jn(this.Ff,23):this.Ff=Zn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,24)},set:function(e){e?this.Ff=Jn(this.Ff,24):this.Ff=Zn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,25)},set:function(e){e?this.Ff=Jn(this.Ff,25):this.Ff=Zn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,26)},set:function(e){e?this.Ff=Jn(this.Ff,26):this.Ff=Zn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bs(Al,Ci);var Wf=function(){Al.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,14)},set:function(n){n?this.Ff=Jn(this.Ff,14):this.Ff=Zn(this.Ff,14)}}),this.password=!0};Bs(Wf,Al);var tr={CheckBox:{createAppearanceStream:function(){return{N:{On:tr.CheckBox.YesNormal},D:{On:tr.CheckBox.YesPushDown,Off:tr.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),s=xm(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+xr(tr.internal.getWidth(n))+" "+xr(tr.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+xr(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ki(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],s=tr.internal.getHeight(n),i=tr.internal.getWidth(n),a=xm(n,n.caption);return o.push("1 g"),o.push("0 0 "+xr(i)+" "+xr(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+xr(i-1)+" "+xr(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+xr(a.fontSize)+" Tf "+r),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xr(tr.internal.getWidth(n))+" "+xr(tr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:tr.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=tr.RadioButton.Circle.YesNormal,e.D[n]=tr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ki(n);e.scope=n.scope;var t=[],r=tr.internal.getWidth(n)<=tr.internal.getHeight(n)?tr.internal.getWidth(n)/4:tr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=tr.internal.Bezier_C,s=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Za(tr.internal.getWidth(n)/2)+" "+Za(tr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=[],r=tr.internal.getWidth(n)<=tr.internal.getHeight(n)?tr.internal.getWidth(n)/4:tr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*tr.internal.Bezier_C).toFixed(5)),i=Number((r*tr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Za(tr.internal.getWidth(n)/2)+" "+Za(tr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Za(tr.internal.getWidth(n)/2)+" "+Za(tr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=[],r=tr.internal.getWidth(n)<=tr.internal.getHeight(n)?tr.internal.getWidth(n)/4:tr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*tr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Za(tr.internal.getWidth(n)/2)+" "+Za(tr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:tr.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=tr.RadioButton.Cross.YesNormal,e.D[n]=tr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ki(n);e.scope=n.scope;var t=[],r=tr.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+xr(tr.internal.getWidth(n)-2)+" "+xr(tr.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(xr(r.x1.x)+" "+xr(r.x1.y)+" m"),t.push(xr(r.x2.x)+" "+xr(r.x2.y)+" l"),t.push(xr(r.x4.x)+" "+xr(r.x4.y)+" m"),t.push(xr(r.x3.x)+" "+xr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=tr.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+xr(tr.internal.getWidth(n))+" "+xr(tr.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+xr(tr.internal.getWidth(n)-2)+" "+xr(tr.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(xr(t.x1.x)+" "+xr(t.x1.y)+" m"),r.push(xr(t.x2.x)+" "+xr(t.x2.y)+" l"),r.push(xr(t.x4.x)+" "+xr(t.x4.y)+" m"),r.push(xr(t.x3.x)+" "+xr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ki(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xr(tr.internal.getWidth(n))+" "+xr(tr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};tr.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=tr.internal.getWidth(n),t=tr.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},tr.internal.getWidth=function(n){var e=0;return dn(n)==="object"&&(e=cb(n.Rect[2])),e},tr.internal.getHeight=function(n){var e=0;return dn(n)==="object"&&(e=cb(n.Rect[3])),e};var eN=jn.addField=function(n){if(ZD(this,n),!(n instanceof Ci))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};jn.AcroFormChoiceField=Ud,jn.AcroFormListBox=Qd,jn.AcroFormComboBox=Td,jn.AcroFormEditBox=$f,jn.AcroFormButton=_o,jn.AcroFormPushButton=Vf,jn.AcroFormRadioButton=Ld,jn.AcroFormCheckBox=Gf,jn.AcroFormTextField=Al,jn.AcroFormPasswordField=Wf,jn.AcroFormAppearance=tr,jn.AcroForm={ChoiceField:Ud,ListBox:Qd,ComboBox:Td,EditBox:$f,Button:_o,PushButton:Vf,RadioButton:Ld,CheckBox:Gf,TextField:Al,PasswordField:Wf,Appearance:tr},gr.AcroForm={ChoiceField:Ud,ListBox:Qd,ComboBox:Td,EditBox:$f,Button:_o,PushButton:Vf,RadioButton:Ld,CheckBox:Gf,TextField:Al,PasswordField:Wf,Appearance:tr};gr.AcroForm;function sz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(M,O){var X,te,le,ne,Be,Z=e;if((O=O||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(W(M))for(Be in t)for(le=t[Be],X=0;X<le.length;X+=1){for(ne=!0,te=0;te<le[X].length;te+=1)if(le[X][te]!==void 0&&le[X][te]!==M[te]){ne=!1;break}if(ne===!0){Z=Be;break}}else for(Be in t)for(le=t[Be],X=0;X<le.length;X+=1){for(ne=!0,te=0;te<le[X].length;te+=1)if(le[X][te]!==void 0&&le[X][te]!==M.charCodeAt(te)){ne=!1;break}if(ne===!0){Z=Be;break}}return Z===e&&O!==e&&(Z=O),Z},o=function M(O){for(var X=this.internal.write,te=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:O.width}),ne.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var Be="",Z=0,se=O.transparency.length;Z<se;Z++)Be+=O.transparency[Z]+" "+O.transparency[Z]+" ";ne.push({key:"Mask",value:"["+Be+"]"})}O.sMask!==void 0&&ne.push({key:"SMask",value:O.objectId+1+" 0 R"});var ce=O.filter!==void 0?["/"+O.filter]:void 0;if(te({data:O.data,additionalKeyValues:ne,alreadyAppliedFilters:ce,objectId:O.objectId}),X("endobj"),"sMask"in O&&O.sMask!==void 0){var be="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,x={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:be,data:O.sMask};"filter"in O&&(x.filter=O.filter),M.call(this,x)}if(O.colorSpace===y.INDEXED){var F=this.internal.newObject();te({data:H(new Uint8Array(O.palette)),objectId:F}),X("endobj")}},s=function(){var M=this.internal.collections.addImage_images;for(var O in M)o.call(this,M[O])},i=function(){var M,O=this.internal.collections.addImage_images,X=this.internal.write;for(var te in O)X("/I"+(M=O[te]).index,M.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},A=function(){var M=this.internal.collections.addImage_images;return a.call(this),M},d=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(M){return typeof n["process"+M.toUpperCase()]=="function"},u=function(M){return dn(M)==="object"&&M.nodeType===1},h=function(M,O){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var X=""+M.getAttribute("src");if(X.indexOf("data:image/")===0)return uu(unescape(X).split("base64,").pop());var te=n.loadFile(X,!0);if(te!==void 0)return te}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var le;switch(O){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;case"JPEG":case"JPG":default:le="image/jpeg"}return uu(M.toDataURL(le,1).split("base64,").pop())}},f=function(M){var O=this.internal.collections.addImage_images;if(O){for(var X in O)if(M===O[X].alias)return O[X]}},g=function(M,O,X){return M||O||(M=-96,O=-96),M<0&&(M=-1*X.width*72/M/this.internal.scaleFactor),O<0&&(O=-1*X.height*72/O/this.internal.scaleFactor),M===0&&(M=O*X.width/X.height),O===0&&(O=M*X.height/X.width),[M,O]},m=function(M,O,X,te,le,ne){var Be=g.call(this,X,te,le),Z=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ce=A.call(this);if(X=Be[0],te=Be[1],ce[le.index]=le,ne){ne*=Math.PI/180;var be=Math.cos(ne),x=Math.sin(ne),F=function(U){return U.toFixed(4)},E=[F(be),F(x),F(-1*x),F(be),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,Z(M),se(O+te),"cm"].join(" ")),this.internal.write(E.join(" ")),this.internal.write([Z(X),"0","0",Z(te),"0","0","cm"].join(" "))):this.internal.write([Z(X),"0","0",Z(te),Z(M),se(O+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(M){var O,X,te=0;if(typeof M=="string")for(X=M.length,O=0;O<X;O++)te=(te<<5)-te+M.charCodeAt(O),te|=0;else if(W(M))for(X=M.byteLength/2,O=0;O<X;O++)te=(te<<5)-te+M[O],te|=0;return te},I=n.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var O=!0;return M.length===0&&(O=!1),M.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(O=!1),O},N=n.__addimage__.extractImageFromDataUrl=function(M){var O=(M=M||"").split("base64,"),X=null;if(O.length===2){var te=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(te)&&(X={mimeType:te[1],charset:te[2],data:O[1]})}return X},k=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(M){return k()&&M instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(M){return k()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},V=n.__addimage__.binaryStringToUint8Array=function(M){for(var O=M.length,X=new Uint8Array(O),te=0;te<O;te++)X[te]=M.charCodeAt(te);return X},H=n.__addimage__.arrayBufferToBinaryString=function(M){for(var O="",X=W(M)?M:new Uint8Array(M),te=0;te<X.length;te+=8192)O+=String.fromCharCode.apply(null,X.subarray(te,te+8192));return O};n.addImage=function(){var M,O,X,te,le,ne,Be,Z,se;if(typeof arguments[1]=="number"?(O=e,X=arguments[1],te=arguments[2],le=arguments[3],ne=arguments[4],Be=arguments[5],Z=arguments[6],se=arguments[7]):(O=arguments[1],X=arguments[2],te=arguments[3],le=arguments[4],ne=arguments[5],Be=arguments[6],Z=arguments[7],se=arguments[8]),dn(M=arguments[0])==="object"&&!u(M)&&"imageData"in M){var ce=M;M=ce.imageData,O=ce.format||O||e,X=ce.x||X||0,te=ce.y||te||0,le=ce.w||ce.width||le,ne=ce.h||ce.height||ne,Be=ce.alias||Be,Z=ce.compression||Z,se=ce.rotation||ce.angle||se}var be=this.internal.getFilters();if(Z===void 0&&be.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(X)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var x=J.call(this,M,O,Be,Z);return m.call(this,X,te,le,ne,x,se),this};var J=function(M,O,X,te){var le,ne,Be;if(typeof M=="string"&&r(M)===e){M=unescape(M);var Z=xe(M,!1);(Z!==""||(Z=n.loadFile(M,!0))!==void 0)&&(M=Z)}if(u(M)&&(M=h(M,O)),O=r(M,O),!c(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((Be=X)==null||Be.length===0)&&(X=function(se){return typeof se=="string"||W(se)?C(se):W(se.data)?C(se.data):null}(M)),(le=f.call(this,X))||(k()&&(M instanceof Uint8Array||O==="RGBA"||(ne=M,M=V(M))),le=this["process"+O.toUpperCase()](M,d.call(this),X,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:_.NONE}(te),ne)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},xe=n.__addimage__.convertBase64ToBinaryString=function(M,O){var X;O=typeof O!="boolean"||O;var te,le="";if(typeof M=="string"){te=(X=N(M))!==null?X.data:M;try{le=uu(te)}catch(ne){if(O)throw I(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};n.getImageProperties=function(M){var O,X,te="";if(u(M)&&(M=h(M)),typeof M=="string"&&r(M)===e&&((te=xe(M,!1))===""&&(te=n.loadFile(M)||""),M=te),X=r(M),!c(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(!k()||M instanceof Uint8Array||(M=V(M)),!(O=this["process"+X.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=X,O}})(gr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};gr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,c=!1,u=0;u<d.length&&!c;u++)switch((r=d[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){r=d[h];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(m.objId),C=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(_(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+f(_(C))+") >>",m.content=s;var I=m.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+i(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(m.objId,"0 R",y.objId,"0 R");break;case"freetext":o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+f(g(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var W=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,s,i){var a=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:A(t),y:d(r),w:A(t+o),h:d(r+s)},options:i,type:"link"})},n.textWithLink=function(t,r,o,s){var i,a,A=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;i=Math.ceil(d*c)}else a=A,i=d;return this.text(t,r,o,s),o+=.2*d,s.align==="center"&&(r-=A/2),s.align==="right"&&(r-=A),this.link(r,o-d,a,i,s),A},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(gr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=n.__arabicParser__.isArabicEndLetter=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length<=2},A=n.__arabicParser__.isArabicAlfLetter=function(m){return i(m)&&o.indexOf(m.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length==4},u=n.__arabicParser__.resolveLigatures=function(m){var y=0,_=t,C="",I=0;for(y=0;y<m.length;y+=1)_[m.charCodeAt(y)]!==void 0?(I++,typeof(_=_[m.charCodeAt(y)])=="number"&&(C+=String.fromCharCode(_),_=t,I=0),y===m.length-1&&(_=t,C+=m.charAt(y-(I-1)),y-=I-1,I=0)):(_=t,C+=m.charAt(y-I),y-=I,I=0);return C};n.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(m,y,_){return i(m)?s(m)===!1?-1:!d(m)||!i(y)&&!i(_)||!i(_)&&a(y)||a(m)&&!i(y)||a(m)&&A(y)||a(m)&&a(y)?0:c(m)&&i(y)&&!a(y)&&i(_)&&d(_)?3:a(m)||!i(_)?1:2:-1},f=function(m){var y=0,_=0,C=0,I="",N="",k="",W=(m=m||"").split("\\s+"),V=[];for(y=0;y<W.length;y+=1){for(V.push(""),_=0;_<W[y].length;_+=1)I=W[y][_],N=W[y][_-1],k=W[y][_+1],i(I)?(C=h(I,N,k),V[y]+=C!==-1?String.fromCharCode(e[I.charCodeAt(0)][C]):I):V[y]+=I;V[y]=u(V[y])}return V.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var m,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(y)){var C=0;for(_=[],C=0;C<y.length;C+=1)Array.isArray(y[C])?_.push([f(y[C][0]),y[C][1],y[C][2]]):_.push([f(y[C])]);m=_}else m=f(y);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};n.events.push(["preProcessText",g])}(gr.API),gr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(m){A=m}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},n.getTextDimensions=function(A,d){r.call(this);var c=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,f=0,g=0,m=0,y=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var _=d.maxWidth;_>0?typeof A=="string"?A=this.splitTextToSize(A,_):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,N){return I.concat(y.splitTextToSize(N,_))},[])):A=Array.isArray(A)?A:[A];for(var C=0;C<A.length;C++)f<(m=this.getStringUnitWidth(A[C],{font:u})*c)&&(f=m);return f!==0&&(g=A.length),{w:f/=h,h:Math.max((g*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===A.lineNumber?(A.x=(d.x||0)+(d.width||0),A.y=d.y||0):d.y+d.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,f&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=d.y+d.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};n.table=function(A,d,c,u,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var f,g,m,y,_=[],C=[],I=[],N={},k={},W=[],V=[],H=(h=h||{}).autoSize||!1,J=h.printHeaders!==!1,xe=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,M=h.margins||Object.assign({width:this.getPageWidth()},e),O=typeof h.padding=="number"?h.padding:3,X=h.headerBackgroundColor||"#c8c8c8",te=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=te,this.setFontSize(xe),u==null)C=_=Object.keys(c[0]),I=_.map(function(){return"left"});else if(Array.isArray(u)&&dn(u[0])==="object")for(_=u.map(function(ce){return ce.name}),C=u.map(function(ce){return ce.prompt||ce.name||""}),I=u.map(function(ce){return ce.align||"left"}),f=0;f<u.length;f+=1)k[u[f].name]=u[f].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(C=_=u,I=_.map(function(){return"left"}));if(H||Array.isArray(u)&&typeof u[0]=="string")for(f=0;f<_.length;f+=1){for(N[y=_[f]]=c.map(function(ce){return ce[y]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(C[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=N[y],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)W.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[y]=Math.max.apply(null,W)+O+O,W=[]}if(J){var le={};for(f=0;f<_.length;f+=1)le[_[f]]={},le[_[f]].text=C[f],le[_[f]].align=I[f];var ne=a.call(this,le,k);V=_.map(function(ce){return new s(A,d,k[ce],ne,le[ce].text,void 0,le[ce].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var Be=u.reduce(function(ce,be){return ce[be.name]=be.align,ce},{});for(f=0;f<c.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:c[f]},this);var Z=a.call(this,c[f],k);for(m=0;m<_.length;m+=1){var se=c[f][_[m]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:m,data:se},this),i.call(this,new s(A,d,k[_[m]],Z,se,f+2,Be[_[m]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=d,this};var a=function(A,d){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(f){var g=A[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[f]-c-c)},this).map(function(f){return this.getLineHeightFactor()*f.length*u/h+c+c},this).reduce(function(f,g){return Math.max(f,g)},0)};n.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},n.printHeaderRow=function(A,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){c=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,c),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(gr.API);var iz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},az=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zm=sz(az),Az=[100,200,300,400,500,600,700,800,900],tN=sz(Az);function Cm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return iz[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(s){return typeof zm[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function ub(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var rN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fb(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function nN(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},rN,t.genericFontFamilies||{}),s=null,i=null,a=0;a<e.length;++a)if(o[(s=Cm(e[a])).family]&&(s.family=o[s.family]),n.hasOwnProperty(s.family)){i=n[s.family];break}if(!(i=i||n[r]))throw new Error("Could not find a font-family for the rule '"+fb(s)+"' and default family '"+r+"'.");if(i=function(A,d){if(d[A])return d[A];var c=zm[A],u=c<=zm.normal?-1:1,h=ub(d,az,c,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+A);return h}(s.stretch,i),i=function(A,d){if(d[A])return d[A];for(var c=iz[A],u=0;u<c.length;++u)if(d[c[u]])return d[c[u]];throw new Error("Could not find a matching font-style for "+A)}(s.style,i),!(i=function(A,d){if(d[A])return d[A];if(A===400&&d[500])return d[500];if(A===500&&d[400])return d[400];var c=tN[A],u=ub(d,Az,c,A<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+A);return u}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+fb(s)+"'.");return i}function pb(n){return n.trimLeft()}function oN(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function sN(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Uf,gb,vb,tv=["times"];(function(n){var e,t,r,o,s,i,a,A,d,c=function(x){return x=x||{},this.isStrokeTransparent=x.isStrokeTransparent||!1,this.strokeOpacity=x.strokeOpacity||1,this.strokeStyle=x.strokeStyle||"#000000",this.fillStyle=x.fillStyle||"#000000",this.isFillTransparent=x.isFillTransparent||!1,this.fillOpacity=x.fillOpacity||1,this.font=x.font||"10px sans-serif",this.textBaseline=x.textBaseline||"alphabetic",this.textAlign=x.textAlign||"left",this.lineWidth=x.lineWidth||1,this.lineJoin=x.lineJoin||"miter",this.lineCap=x.lineCap||"butt",this.path=x.path||[],this.transform=x.transform!==void 0?x.transform.clone():new A,this.globalCompositeOperation=x.globalCompositeOperation||"normal",this.globalAlpha=x.globalAlpha||1,this.clip_path=x.clip_path||[],this.currentPoint=x.currentPoint||new i,this.miterLimit=x.miterLimit||10,this.lastPoint=x.lastPoint||new i,this.lineDashOffset=x.lineDashOffset||0,this.lineDash=x.lineDash||[],this.margin=x.margin||[0,0,0,0],this.prevPageLastElemOffset=x.prevPageLastElemOffset||0,this.ignoreClearRect=typeof x.ignoreClearRect!="boolean"||x.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,a=this.internal.Rectangle,A=this.internal.Matrix,d=new c}]);var u=function(x){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=x;Object.defineProperty(this,"pdf",{get:function(){return F}});var E=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return E},set:function(G){E=!!G}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(G){U=!!G}});var P=0;Object.defineProperty(this,"posX",{get:function(){return P},set:function(G){isNaN(G)||(P=G)}});var T=0;Object.defineProperty(this,"posY",{get:function(){return T},set:function(G){isNaN(G)||(T=G)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(G){var D;typeof G=="number"?D=[G,G,G,G]:((D=new Array(4))[0]=G[0],D[1]=G.length>=2?G[1]:D[0],D[2]=G.length>=3?G[2]:D[0],D[3]=G.length>=4?G[3]:D[1]),d.margin=D}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(G){R=G}});var q=0;Object.defineProperty(this,"lastBreak",{get:function(){return q},set:function(G){q=G}});var j=[];Object.defineProperty(this,"pageBreaks",{get:function(){return j},set:function(G){j=G}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(G){G instanceof c&&(d=G)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(G){d.path=G}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(G){Ae=G}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(G){var D;D=h(G),this.ctx.fillStyle=D.style,this.ctx.isFillTransparent=D.a===0,this.ctx.fillOpacity=D.a,this.pdf.setFillColor(D.r,D.g,D.b,{a:D.a}),this.pdf.setTextColor(D.r,D.g,D.b,{a:D.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(G){var D=h(G);this.ctx.strokeStyle=D.style,this.ctx.isStrokeTransparent=D.a===0,this.ctx.strokeOpacity=D.a,D.a===0?this.pdf.setDrawColor(255,255,255):(D.a,this.pdf.setDrawColor(D.r,D.g,D.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(G){["butt","round","square"].indexOf(G)!==-1&&(this.ctx.lineCap=G,this.pdf.setLineCap(G))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(G){isNaN(G)||(this.ctx.lineWidth=G,this.pdf.setLineWidth(G))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(G){["bevel","round","miter"].indexOf(G)!==-1&&(this.ctx.lineJoin=G,this.pdf.setLineJoin(G))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(G){isNaN(G)||(this.ctx.miterLimit=G,this.pdf.setMiterLimit(G))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(G){this.ctx.textBaseline=G}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(G){["right","end","center","left","start"].indexOf(G)!==-1&&(this.ctx.textAlign=G)}});var Ee=null;function _e(G,D){if(Ee===null){var ie=function(me){var pe=[];return Object.keys(me).forEach(function(oe){me[oe].forEach(function(ye){var Ne=null;switch(ye){case"bold":Ne={family:oe,weight:"bold"};break;case"italic":Ne={family:oe,style:"italic"};break;case"bolditalic":Ne={family:oe,weight:"bold",style:"italic"};break;case"":case"normal":Ne={family:oe}}Ne!==null&&(Ne.ref={name:oe,style:ye},pe.push(Ne))})}),pe}(G.getFontList());Ee=function(me){for(var pe={},oe=0;oe<me.length;++oe){var ye=Cm(me[oe]),Ne=ye.family,we=ye.stretch,Fe=ye.style,ue=ye.weight;pe[Ne]=pe[Ne]||{},pe[Ne][we]=pe[Ne][we]||{},pe[Ne][we][Fe]=pe[Ne][we][Fe]||{},pe[Ne][we][Fe][ue]=ye}return pe}(ie.concat(D))}return Ee}var Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(G){Ee=null,Oe=G}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(G){var D;if(this.ctx.font=G,(D=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(G))!==null){var ie=D[1],me=(D[2],D[3]),pe=D[4],oe=(D[5],D[6]),ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(pe)[2];pe=Math.floor(ye==="px"?parseFloat(pe)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(pe)*this.pdf.getFontSize():parseFloat(pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(pe);var Ne=function(ee){var ge,Se,Me=[],Qe=ee.trim();if(Qe==="")return tv;if(Qe in hb)return[hb[Qe]];for(;Qe!=="";){switch(Se=null,ge=(Qe=pb(Qe)).charAt(0)){case'"':case"'":Se=oN(Qe.substring(1),ge);break;default:Se=sN(Qe)}if(Se===null||(Me.push(Se[0]),(Qe=pb(Se[1]))!==""&&Qe.charAt(0)!==","))return tv;Qe=Qe.replace(/^,/,"")}return Me}(oe);if(this.fontFaces){var we=nN(_e(this.pdf,this.fontFaces),Ne.map(function(ee){return{family:ee,stretch:"normal",weight:me,style:ie}}));this.pdf.setFont(we.ref.name,we.ref.style)}else{var Fe="";(me==="bold"||parseInt(me,10)>=700||ie==="bold")&&(Fe="bold"),ie==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var ue="",De={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<Ne.length;Pe++){if(this.pdf.internal.getFont(Ne[Pe],Fe,{noFallback:!0,disableWarning:!0})!==void 0){ue=Ne[Pe];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(Ne[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ue=Ne[Pe],Fe="bold";else if(this.pdf.internal.getFont(Ne[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ue=Ne[Pe],Fe="normal";break}}if(ue===""){for(var he=0;he<Ne.length;he++)if(De[Ne[he]]){ue=De[Ne[he]];break}}ue=ue===""?"Times":ue,this.pdf.setFont(ue,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(G){this.ctx.globalCompositeOperation=G}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(G){this.ctx.globalAlpha=G}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(G){this.ctx.lineDashOffset=G,be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(G){this.ctx.lineDash=G,be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(G){this.ctx.ignoreClearRect=!!G}})};u.prototype.setLineDash=function(x){this.lineDash=x},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){N.call(this,"fill",!1)},u.prototype.stroke=function(){N.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(x,F){if(isNaN(x)||isNaN(F))throw wn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var E=this.ctx.transform.applyToPoint(new i(x,F));this.path.push({type:"mt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(x,F)},u.prototype.closePath=function(){var x=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&dn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){x=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(x.x,x.y)},u.prototype.lineTo=function(x,F){if(isNaN(x)||isNaN(F))throw wn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var E=this.ctx.transform.applyToPoint(new i(x,F));this.path.push({type:"lt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(E.x,E.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},u.prototype.quadraticCurveTo=function(x,F,E,U){if(isNaN(E)||isNaN(U)||isNaN(x)||isNaN(F))throw wn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var P=this.ctx.transform.applyToPoint(new i(E,U)),T=this.ctx.transform.applyToPoint(new i(x,F));this.path.push({type:"qct",x1:T.x,y1:T.y,x:P.x,y:P.y}),this.ctx.lastPoint=new i(P.x,P.y)},u.prototype.bezierCurveTo=function(x,F,E,U,P,T){if(isNaN(P)||isNaN(T)||isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U))throw wn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new i(P,T)),q=this.ctx.transform.applyToPoint(new i(x,F)),j=this.ctx.transform.applyToPoint(new i(E,U));this.path.push({type:"bct",x1:q.x,y1:q.y,x2:j.x,y2:j.y,x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},u.prototype.arc=function(x,F,E,U,P,T){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U)||isNaN(P))throw wn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(T=!!T,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new i(x,F));x=R.x,F=R.y;var q=this.ctx.transform.applyToPoint(new i(0,E)),j=this.ctx.transform.applyToPoint(new i(0,0));E=Math.sqrt(Math.pow(q.x-j.x,2)+Math.pow(q.y-j.y,2))}Math.abs(P-U)>=2*Math.PI&&(U=0,P=2*Math.PI),this.path.push({type:"arc",x,y:F,radius:E,startAngle:U,endAngle:P,counterclockwise:T})},u.prototype.arcTo=function(x,F,E,U,P){throw new Error("arcTo not implemented.")},u.prototype.rect=function(x,F,E,U){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U))throw wn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(x,F),this.lineTo(x+E,F),this.lineTo(x+E,F+U),this.lineTo(x,F+U),this.lineTo(x,F),this.lineTo(x+E,F),this.lineTo(x,F)},u.prototype.fillRect=function(x,F,E,U){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U))throw wn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var P={};this.lineCap!=="butt"&&(P.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(P.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(x,F,E,U),this.fill(),P.hasOwnProperty("lineCap")&&(this.lineCap=P.lineCap),P.hasOwnProperty("lineJoin")&&(this.lineJoin=P.lineJoin)}},u.prototype.strokeRect=function(x,F,E,U){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U))throw wn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(x,F,E,U),this.stroke())},u.prototype.clearRect=function(x,F,E,U){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U))throw wn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(x,F,E,U))},u.prototype.save=function(x){x=typeof x!="boolean"||x;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),x){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},u.prototype.restore=function(x){x=typeof x!="boolean"||x;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("Q");this.pdf.setPage(F),x&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(x){var F,E,U,P;if(x.isCanvasGradient===!0&&(x=x.getColor()),!x)return{r:0,g:0,b:0,a:0,style:x};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(x))F=0,E=0,U=0,P=0;else{var T=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(x);if(T!==null)F=parseInt(T[1]),E=parseInt(T[2]),U=parseInt(T[3]),P=1;else if((T=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(x))!==null)F=parseInt(T[1]),E=parseInt(T[2]),U=parseInt(T[3]),P=parseFloat(T[4]);else{if(P=1,typeof x=="string"&&x.charAt(0)!=="#"){var R=new Zx(x);x=R.ok?R.toHex():"#000000"}x.length===4?(F=x.substring(1,2),F+=F,E=x.substring(2,3),E+=E,U=x.substring(3,4),U+=U):(F=x.substring(1,3),E=x.substring(3,5),U=x.substring(5,7)),F=parseInt(F,16),E=parseInt(E,16),U=parseInt(U,16)}}return{r:F,g:E,b:U,a:P,style:x}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(x,F,E,U){if(isNaN(F)||isNaN(E)||typeof x!="string")throw wn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!f.call(this)){var P=Z(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;O.call(this,{text:x,x:F,y:E,scale:T,angle:P,align:this.textAlign,maxWidth:U})}},u.prototype.strokeText=function(x,F,E,U){if(isNaN(F)||isNaN(E)||typeof x!="string")throw wn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){U=isNaN(U)?void 0:U;var P=Z(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;O.call(this,{text:x,x:F,y:E,scale:T,renderingMode:"stroke",angle:P,align:this.textAlign,maxWidth:U})}},u.prototype.measureText=function(x){if(typeof x!="string")throw wn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,E=this.pdf.internal.scaleFactor,U=F.internal.getFontSize(),P=F.getStringUnitWidth(x)*U/F.internal.scaleFactor,T=function(R){var q=(R=R||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return q}}),this};return new T({width:P*=Math.round(96*E/72*1e4)/1e4})},u.prototype.scale=function(x,F){if(isNaN(x)||isNaN(F))throw wn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var E=new A(x,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.rotate=function(x){if(isNaN(x))throw wn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new A(Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.translate=function(x,F){if(isNaN(x)||isNaN(F))throw wn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var E=new A(1,0,0,1,x,F);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.transform=function(x,F,E,U,P,T){if(isNaN(x)||isNaN(F)||isNaN(E)||isNaN(U)||isNaN(P)||isNaN(T))throw wn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new A(x,F,E,U,P,T);this.ctx.transform=this.ctx.transform.multiply(R)},u.prototype.setTransform=function(x,F,E,U,P,T){x=isNaN(x)?1:x,F=isNaN(F)?0:F,E=isNaN(E)?0:E,U=isNaN(U)?1:U,P=isNaN(P)?0:P,T=isNaN(T)?0:T,this.ctx.transform=new A(x,F,E,U,P,T)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(x,F,E,U,P,T,R,q,j){var Ae=this.pdf.getImageProperties(x),Ee=1,_e=1,Oe=1,G=1;U!==void 0&&q!==void 0&&(Oe=q/U,G=j/P,Ee=Ae.width/U*q/U,_e=Ae.height/P*j/P),T===void 0&&(T=F,R=E,F=0,E=0),U!==void 0&&q===void 0&&(q=U,j=P),U===void 0&&q===void 0&&(q=Ae.width,j=Ae.height);for(var D,ie=this.ctx.transform.decompose(),me=Z(ie.rotate.shx),pe=new A,oe=(pe=(pe=(pe=pe.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale)).applyToRectangle(new a(T-F*Oe,R-E*G,U*Ee,P*_e)),ye=y.call(this,oe),Ne=[],we=0;we<ye.length;we+=1)Ne.indexOf(ye[we])===-1&&Ne.push(ye[we]);if(I(Ne),this.autoPaging)for(var Fe=Ne[0],ue=Ne[Ne.length-1],De=Fe;De<ue+1;De++){this.pdf.setPage(De);var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],he=De===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Se=De===1?0:ee+(De-2)*ge;if(this.ctx.clip_path.length!==0){var Me=this.path;D=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(D,this.posX+this.margin[3],-Se+he+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Me}var Qe=JSON.parse(JSON.stringify(oe));Qe=C([Qe],this.posX+this.margin[3],-Se+he+this.ctx.prevPageLastElemOffset)[0];var ot=(De>Fe||De<ue)&&m.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ge,null).clip().discardPath()),this.pdf.addImage(x,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,me),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(x,"JPEG",oe.x,oe.y,oe.w,oe.h,null,null,me)};var y=function(x,F,E){var U=[];F=F||this.pdf.internal.pageSize.width,E=E||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var P=this.posY+this.ctx.prevPageLastElemOffset;switch(x.type){default:case"mt":case"lt":U.push(Math.floor((x.y+P)/E)+1);break;case"arc":U.push(Math.floor((x.y+P-x.radius)/E)+1),U.push(Math.floor((x.y+P+x.radius)/E)+1);break;case"qct":var T=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x,x.y);U.push(Math.floor((T.y+P)/E)+1),U.push(Math.floor((T.y+T.h+P)/E)+1);break;case"bct":var R=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x2,x.y2,x.x,x.y);U.push(Math.floor((R.y+P)/E)+1),U.push(Math.floor((R.y+R.h+P)/E)+1);break;case"rect":U.push(Math.floor((x.y+P)/E)+1),U.push(Math.floor((x.y+x.h+P)/E)+1)}for(var q=0;q<U.length;q+=1)for(;this.pdf.internal.getNumberOfPages()<U[q];)_.call(this);return U},_=function(){var x=this.fillStyle,F=this.strokeStyle,E=this.font,U=this.lineCap,P=this.lineWidth,T=this.lineJoin;this.pdf.addPage(),this.fillStyle=x,this.strokeStyle=F,this.font=E,this.lineCap=U,this.lineWidth=P,this.lineJoin=T},C=function(x,F,E){for(var U=0;U<x.length;U++)switch(x[U].type){case"bct":x[U].x2+=F,x[U].y2+=E;case"qct":x[U].x1+=F,x[U].y1+=E;case"mt":case"lt":case"arc":default:x[U].x+=F,x[U].y+=E}return x},I=function(x){return x.sort(function(F,E){return F-E})},N=function(x,F){for(var E,U,P=this.fillStyle,T=this.strokeStyle,R=this.lineCap,q=this.lineWidth,j=Math.abs(q*this.ctx.transform.scaleX),Ae=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),Oe=[],G=0;G<_e.length;G++)if(_e[G].x!==void 0)for(var D=y.call(this,_e[G]),ie=0;ie<D.length;ie+=1)Oe.indexOf(D[ie])===-1&&Oe.push(D[ie]);for(var me=0;me<Oe.length;me++)for(;this.pdf.internal.getNumberOfPages()<Oe[me];)_.call(this);if(I(Oe),this.autoPaging)for(var pe=Oe[0],oe=Oe[Oe.length-1],ye=pe;ye<oe+1;ye++){this.pdf.setPage(ye),this.fillStyle=P,this.strokeStyle=T,this.lineCap=R,this.lineWidth=j,this.lineJoin=Ae;var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],we=ye===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=ye===1?0:Fe+(ye-2)*ue;if(this.ctx.clip_path.length!==0){var Pe=this.path;E=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(E,this.posX+this.margin[3],-De+we+this.ctx.prevPageLastElemOffset),k.call(this,x,!0),this.path=Pe}if(U=JSON.parse(JSON.stringify(Ee)),this.path=C(U,this.posX+this.margin[3],-De+we+this.ctx.prevPageLastElemOffset),F===!1||ye===0){var he=(ye>pe||ye<oe)&&m.call(this);he&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,ue,null).clip().discardPath()),k.call(this,x,F),he&&this.pdf.restoreGraphicsState()}this.lineWidth=q}else this.lineWidth=j,k.call(this,x,F),this.lineWidth=q;this.path=Ee},k=function(x,F){if((x!=="stroke"||F||!g.call(this))&&(x==="stroke"||F||!f.call(this))){for(var E,U,P=[],T=this.path,R=0;R<T.length;R++){var q=T[R];switch(q.type){case"begin":P.push({begin:!0});break;case"close":P.push({close:!0});break;case"mt":P.push({start:q,deltas:[],abs:[]});break;case"lt":var j=P.length;if(T[R-1]&&!isNaN(T[R-1].x)&&(E=[q.x-T[R-1].x,q.y-T[R-1].y],j>0)){for(;j>=0;j--)if(P[j-1].close!==!0&&P[j-1].begin!==!0){P[j-1].deltas.push(E),P[j-1].abs.push(q);break}}break;case"bct":E=[q.x1-T[R-1].x,q.y1-T[R-1].y,q.x2-T[R-1].x,q.y2-T[R-1].y,q.x-T[R-1].x,q.y-T[R-1].y],P[P.length-1].deltas.push(E);break;case"qct":var Ae=T[R-1].x+2/3*(q.x1-T[R-1].x),Ee=T[R-1].y+2/3*(q.y1-T[R-1].y),_e=q.x+2/3*(q.x1-q.x),Oe=q.y+2/3*(q.y1-q.y),G=q.x,D=q.y;E=[Ae-T[R-1].x,Ee-T[R-1].y,_e-T[R-1].x,Oe-T[R-1].y,G-T[R-1].x,D-T[R-1].y],P[P.length-1].deltas.push(E);break;case"arc":P.push({deltas:[],abs:[],arc:!0}),Array.isArray(P[P.length-1].abs)&&P[P.length-1].abs.push(q)}}U=F?null:x==="stroke"?"stroke":"fill";for(var ie=!1,me=0;me<P.length;me++)if(P[me].arc)for(var pe=P[me].abs,oe=0;oe<pe.length;oe++){var ye=pe[oe];ye.type==="arc"?H.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,F,!ie):X.call(this,ye.x,ye.y),ie=!0}else if(P[me].close===!0)this.pdf.internal.out("h"),ie=!1;else if(P[me].begin!==!0){var Ne=P[me].start.x,we=P[me].start.y;te.call(this,P[me].deltas,Ne,we),ie=!0}U&&J.call(this,U),F&&xe.call(this)}},W=function(x){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,E=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return x-E;case"top":return x+F-E;case"hanging":return x+F-2*E;case"middle":return x+F/2-E;case"ideographic":return x;case"alphabetic":default:return x}},V=function(x){return x+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var x=function(){};return x.colorStops=[],x.addColorStop=function(F,E){this.colorStops.push([F,E])},x.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},x.isCanvasGradient=!0,x},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(x,F,E,U,P,T,R,q,j){for(var Ae=ne.call(this,E,U,P,T),Ee=0;Ee<Ae.length;Ee++){var _e=Ae[Ee];Ee===0&&(j?M.call(this,_e.x1+x,_e.y1+F):X.call(this,_e.x1+x,_e.y1+F)),le.call(this,x,F,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}q?xe.call(this):J.call(this,R)},J=function(x){switch(x){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(x,F){this.pdf.internal.out(t(x)+" "+r(F)+" m")},O=function(x){var F;switch(x.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var E=this.pdf.getTextDimensions(x.text),U=W.call(this,x.y),P=V.call(this,U)-E.h,T=this.ctx.transform.applyToPoint(new i(x.x,U)),R=this.ctx.transform.decompose(),q=new A;q=(q=(q=q.multiply(R.translate)).multiply(R.skew)).multiply(R.scale);for(var j,Ae,Ee,_e=this.ctx.transform.applyToRectangle(new a(x.x,U,E.w,E.h)),Oe=q.applyToRectangle(new a(x.x,P,E.w,E.h)),G=y.call(this,Oe),D=[],ie=0;ie<G.length;ie+=1)D.indexOf(G[ie])===-1&&D.push(G[ie]);if(I(D),this.autoPaging)for(var me=D[0],pe=D[D.length-1],oe=me;oe<pe+1;oe++){this.pdf.setPage(oe);var ye=oe===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[2],Fe=we-this.margin[0],ue=this.pdf.internal.pageSize.width-this.margin[1],De=ue-this.margin[3],Pe=oe===1?0:Ne+(oe-2)*Fe;if(this.ctx.clip_path.length!==0){var he=this.path;j=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(j,this.posX+this.margin[3],-1*Pe+ye),k.call(this,"fill",!0),this.path=he}var ee=C([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Pe+ye+this.ctx.prevPageLastElemOffset)[0];x.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*x.scale),Ee=this.lineWidth,this.lineWidth=Ee*x.scale);var ge=this.autoPaging!=="text";if(ge||ee.y+ee.h<=we){if(ge||ee.y>=ye&&ee.x<=ue){var Se=ge?x.text:this.pdf.splitTextToSize(x.text,x.maxWidth||ue-ee.x)[0],Me=C([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Pe+ye+this.ctx.prevPageLastElemOffset)[0],Qe=ge&&(oe>me||oe<pe)&&m.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Fe,null).clip().discardPath()),this.pdf.text(Se,Me.x,Me.y,{angle:x.angle,align:F,renderingMode:x.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else ee.y<we&&(this.ctx.prevPageLastElemOffset+=we-ee.y);x.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Ee)}else x.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*x.scale),Ee=this.lineWidth,this.lineWidth=Ee*x.scale),this.pdf.text(x.text,T.x+this.posX,T.y+this.posY,{angle:x.angle,align:F,renderingMode:x.renderingMode,maxWidth:x.maxWidth}),x.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Ee)},X=function(x,F,E,U){E=E||0,U=U||0,this.pdf.internal.out(t(x+E)+" "+r(F+U)+" l")},te=function(x,F,E){return this.pdf.lines(x,F,E,null,null)},le=function(x,F,E,U,P,T,R,q){this.pdf.internal.out([e(o(E+x)),e(s(U+F)),e(o(P+x)),e(s(T+F)),e(o(R+x)),e(s(q+F)),"c"].join(" "))},ne=function(x,F,E,U){for(var P=2*Math.PI,T=Math.PI/2;F>E;)F-=P;var R=Math.abs(E-F);R<P&&U&&(R=P-R);for(var q=[],j=U?-1:1,Ae=F;R>1e-5;){var Ee=Ae+j*Math.min(R,T);q.push(Be.call(this,x,Ae,Ee)),R-=Math.abs(Ee-Ae),Ae=Ee}return q},Be=function(x,F,E){var U=(E-F)/2,P=x*Math.cos(U),T=x*Math.sin(U),R=P,q=-T,j=R*R+q*q,Ae=j+R*P+q*T,Ee=4/3*(Math.sqrt(2*j*Ae)-Ae)/(R*T-q*P),_e=R-Ee*q,Oe=q+Ee*R,G=_e,D=-Oe,ie=U+F,me=Math.cos(ie),pe=Math.sin(ie);return{x1:x*Math.cos(F),y1:x*Math.sin(F),x2:_e*me-Oe*pe,y2:_e*pe+Oe*me,x3:G*me-D*pe,y3:G*pe+D*me,x4:x*Math.cos(E),y4:x*Math.sin(E)}},Z=function(x){return 180*x/Math.PI},se=function(x,F,E,U,P,T){var R=x+.5*(E-x),q=F+.5*(U-F),j=P+.5*(E-P),Ae=T+.5*(U-T),Ee=Math.min(x,P,R,j),_e=Math.max(x,P,R,j),Oe=Math.min(F,T,q,Ae),G=Math.max(F,T,q,Ae);return new a(Ee,Oe,_e-Ee,G-Oe)},ce=function(x,F,E,U,P,T,R,q){var j,Ae,Ee,_e,Oe,G,D,ie,me,pe,oe,ye,Ne,we,Fe=E-x,ue=U-F,De=P-E,Pe=T-U,he=R-P,ee=q-T;for(Ae=0;Ae<41;Ae++)me=(D=(Ee=x+(j=Ae/40)*Fe)+j*((Oe=E+j*De)-Ee))+j*(Oe+j*(P+j*he-Oe)-D),pe=(ie=(_e=F+j*ue)+j*((G=U+j*Pe)-_e))+j*(G+j*(T+j*ee-G)-ie),Ae==0?(oe=me,ye=pe,Ne=me,we=pe):(oe=Math.min(oe,me),ye=Math.min(ye,pe),Ne=Math.max(Ne,me),we=Math.max(we,pe));return new a(Math.round(oe),Math.round(ye),Math.round(Ne-oe),Math.round(we-ye))},be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var x,F,E=(x=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:x,lineDashOffset:F}));this.prevLineDash!==E&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=E)}}})(gr.API),function(n){var e=function(s){var i,a,A,d,c,u,h,f,g,m;for(a=[],A=0,d=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;d>A;A+=4)(c=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(u=(c=((c=((c=((c=(c-(m=c%85))/85)-(g=c%85))/85)-(f=c%85))/85)-(h=c%85))/85)%85,a.push(u+33,h+33,f+33,g+33,m+33)):a.push(122);return function(y,_){for(var C=_;C>0;C--)y.pop()}(a,i.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var i,a,A,d,c,u=String,h="length",f=255,g="charCodeAt",m="slice",y="replace";for(s[m](-2),s=s[m](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),A=[],d=0,c=(s+=i="uuuuu"[m](s[h]%5||5))[h];c>d;d+=5)a=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),A.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(_,C){for(var I=C;I>0;I--)_.pop()}(A,i[h]),u.fromCharCode.apply(u,A)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var a="",A=0;A<s.length;A+=2)a+=String.fromCharCode("0x"+(s[A]+s[A+1]));return a},o=function(s){for(var i=new Uint8Array(s.length),a=s.length;a--;)i[a]=s.charCodeAt(a);return s=(i=ym(i)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,i){var a=0,A=s||"",d=[];for(typeof(i=i||[])=="string"&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":A=t(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=o(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(gr.API),function(n){n.loadFile=function(e,t,r){return function(o,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var a=void 0;try{a=function(A,d,c){var u=new XMLHttpRequest,h=0,f=function(g){var m=g.length,y=[],_=String.fromCharCode;for(h=0;h<m;h+=1)y.push(_(255&g.charCodeAt(h)));return y.join("")};if(u.open("GET",A,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?c(f(this.responseText)):c(void 0)}),u.send(null),d&&u.status===200)return f(u.responseText)}(o,s,i)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(gr.API),function(n){function e(){return(mr.html2canvas?Promise.resolve(mr.html2canvas):ps(()=>import("./html2canvas.esm.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(mr.DOMPurify?Promise.resolve(mr.DOMPurify):ps(()=>import("./purify.es.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var a=dn(i);return a==="undefined"?"undefined":a==="string"||i instanceof String?"string":a==="number"||i instanceof Number?"number":a==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(i,a){var A=document.createElement(i);for(var d in a.className&&(A.className=a.className),a.innerHTML&&a.dompurify&&(A.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)A.style[d]=a.style[d];return A},s=function i(a){var A=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),d=i.convert(Promise.resolve(),A);return d=(d=d.setProgress(1,i,1,[i])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,a){return i.__proto__=a||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,a){return this.then(function(){switch(a=a||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(A){return this.set({src:o("div",{innerHTML:i,dompurify:A})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function A(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(A(h,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,a(this.prop.container,A)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=this.opt.jsPDF,d=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var f=d[h],g=f.src.find(function(m){return m.format==="truetype"});g&&A.addFont(g.url,f.ref.name,f.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,A.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,a,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(i,a):this.outputPdf(i,a)},s.prototype.outputPdf=function(i,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,a)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var a=Object.keys(i||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=i[A]};switch(A){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[A]=i[A]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(i,a){return this.then(function(){var A=i in s.template.prop?this.prop[i]:this.opt[i];return a?a(A):A})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function a(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(i=i||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:a(i.inner.width,i.k),height:a(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,a,A,d){return i!=null&&(this.progress.val=i),a!=null&&(this.progress.state=a),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,a,A,d){return this.setProgress(i?this.progress.val+i:null,a||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(i,a){var A=this;return this.thenCore(i,a,function(d,c){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return A.updateProgress(null,d),u}).then(d,c).then(function(u){return A.updateProgress(1),u})})},s.prototype.thenCore=function(i,a,A){A=A||Promise.prototype.then,i&&(i=i.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=A.call(d,i,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(i,a){return Promise.prototype.then.call(this,i,a)},s.prototype.thenList=function(i){var a=this;return i.forEach(function(A){a=a.thenCore(A)}),a},s.prototype.catch=function(i){i&&(i=i.bind(this));var a=Promise.prototype.catch.call(this,i);return s.convert(a,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gr.getPageSize=function(i,a,A){if(dn(i)==="object"){var d=i;i=d.orientation,a=d.unit||a,A=d.format||A}a=a||"mm",A=A||"a4",i=(""+(i||"P")).toLowerCase();var c,u=(""+A).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var f,g=0,m=0;if(h.hasOwnProperty(u))g=h[u][1]/c,m=h[u][0]/c;else try{g=A[1],m=A[0]}catch{throw new Error("Invalid format: "+A)}if(i==="p"||i==="portrait")i="p",m>g&&(f=m,m=g,g=f);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>m&&(f=m,m=g,g=f)}return{width:m,height:g,unit:a,k:c,orientation:i}},n.html=function(i,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Cm):null;var A=new s(a);return a.worker?A:A.from(i).doCallback()}}(gr.API),gr.API.addJS=function(n){return vb=n,this.internal.events.subscribe("postPutResources",function(){Uf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Uf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Uf!==void 0&&gb!==void 0&&this.internal.out("/Names <</JavaScript "+Uf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var i=o[s],a=r.exec(i);if(a!=null){var A=a[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,c=[];for(s=0;s<d;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,s){var i={title:o,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var A=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var s=0;s<o.children.length;s++)r.count++,this.count_r(r,o.children[s]);return r.count}}])}(gr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,s,i,a){var A,d=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(A=function(u){for(var h,f=256*u.charCodeAt(4)+u.charCodeAt(5),g=u.length,m={width:0,height:0,numcomponents:1},y=4;y<g;y+=2){if(y+=f,e.indexOf(u.charCodeAt(y+1))!==-1){h=256*u.charCodeAt(y+5)+u.charCodeAt(y+6),m={width:256*u.charCodeAt(y+7)+u.charCodeAt(y+8),height:h,numcomponents:u.charCodeAt(y+9)};break}f=256*u.charCodeAt(y+2)+u.charCodeAt(y+3)}return m}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:a,bitsPerComponent:8,filter:d,index:r,alias:o}}return c}}(gr.API);var ad,Qf,mb,wb,yb,iN=function(){var n,e,t;function r(s){var i,a,A,d,c,u,h,f,g,m,y,_,C,I;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(i=this.readUInt32(),g=(function(){var N,k;for(k=[],N=0;N<4;++N)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*c/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(u!=null?u.data:void 0)||this.imgData,_=0;0<=i?_<i:_>i;0<=i?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((m=A-this.transparency.indexed.length)>0)for(C=0;0<=m?C<m:C>m;0<=m?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(y=this.read(i)).indexOf(0),f=String.fromCharCode.apply(String,y.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,a;for(a=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*i),A=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(u,h,f,g){var m,y,_,C,I,N,k,W,V,H,J,xe,M,O,X,te,le,ne,Be,Z,se,ce=Math.ceil((d.width-u)/f),be=Math.ceil((d.height-h)/g),x=d.width==ce&&d.height==be;for(O=i*ce,xe=x?a:new Uint8Array(O*be),N=s.length,M=0,y=0;M<be&&A<N;){switch(s[A++]){case 0:for(C=le=0;le<O;C=le+=1)xe[y++]=s[A++];break;case 1:for(C=ne=0;ne<O;C=ne+=1)m=s[A++],I=C<i?0:xe[y-i],xe[y++]=(m+I)%256;break;case 2:for(C=Be=0;Be<O;C=Be+=1)m=s[A++],_=(C-C%i)/i,X=M&&xe[(M-1)*O+_*i+C%i],xe[y++]=(X+m)%256;break;case 3:for(C=Z=0;Z<O;C=Z+=1)m=s[A++],_=(C-C%i)/i,I=C<i?0:xe[y-i],X=M&&xe[(M-1)*O+_*i+C%i],xe[y++]=(m+Math.floor((I+X)/2))%256;break;case 4:for(C=se=0;se<O;C=se+=1)m=s[A++],_=(C-C%i)/i,I=C<i?0:xe[y-i],M===0?X=te=0:(X=xe[(M-1)*O+_*i+C%i],te=_&&xe[(M-1)*O+(_-1)*i+C%i]),k=I+X-te,W=Math.abs(k-I),H=Math.abs(k-X),J=Math.abs(k-te),V=W<=H&&W<=J?I:H<=J?X:te,xe[y++]=(m+V)%256;break;default:throw new Error("Invalid filter algorithm: "+s[A-1])}if(!x){var F=((h+M*g)*d.width+u)*i,E=M*O;for(C=0;C<ce;C+=1){for(var U=0;U<i;U+=1)a[F++]=xe[E++];F+=(f-1)*i}}M++}}return s=DD(s),d.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,i,a,A,d,c,u,h,f;for(a=this.palette,c=this.transparency.indexed||[],d=new Uint8Array((c.length||0)+a.length),A=0,s=0,i=u=0,h=a.length;u<h;i=u+=3)d[A++]=a[i],d[A++]=a[i+1],d[A++]=a[i+2],d[A++]=(f=c[s++])!=null?f:255;return d},r.prototype.copyToImageData=function(s,i){var a,A,d,c,u,h,f,g,m,y,_;if(A=this.colors,m=null,a=this.hasAlphaChannel,this.palette.length&&(m=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),A=4,a=!0),g=(d=s.data||s).length,u=m||i,c=h=0,A===1)for(;c<g;)f=m?4*i[c/4]:h,y=u[f++],d[c++]=y,d[c++]=y,d[c++]=y,d[c++]=a?u[f++]:255,h=f;else for(;c<g;)f=m?4*i[c/4]:h,d[c++]=u[f++],d[c++]=u[f++],d[c++]=u[f++],d[c++]=a?u[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(mr)==="[object Window]"){try{e=mr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(s){var i;if(o()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,a,A,d,c,u,h,f;if(this.animation){for(f=[],a=c=0,u=(h=this.animation.frames).length;c<u;a=++c)i=h[a],A=s.createImageData(i.width,i.height),d=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(A,d),i.imageData=A,f.push(i.image=n(A));return f}},r.prototype.renderFrame=function(s,i){var a,A,d;return a=(A=this.animation.frames)[i],d=A[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var i,a,A,d,c,u,h=this;return a=0,u=this.animation,d=u.numFrames,A=u.frames,c=u.numPlays,(i=function(){var f,g;if(f=a++%d,g=A[f],h.renderFrame(s,f),d>1&&a/d<c)return h.animation._timeout=setTimeout(i,g.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(a=i.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),i.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function aN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],s=o>>7,i=1<<(7&o)+1;n[e++],n[e++];var a=null,A=null;s&&(a=e,A=i,e+=3*i);var d=!0,c=[],u=0,h=null,f=0,g=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,g=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=n[e++];u=n[e++]|n[e++]<<8,h=n[e++],!(1&m)&&(h=null),f=m>>2&7,e++;break;case 254:for(;;){if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,N=n[e++],k=N>>6&1,W=1<<(7&N)+1,V=a,H=A,J=!1;N>>7&&(J=!0,V=e,H=W,e+=3*W);var xe=e;for(e++;;){var M;if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}c.push({x:y,y:_,width:C,height:I,has_local_palette:J,palette_offset:V,palette_size:H,data_offset:xe,data_length:e-xe,transparent_index:h,interlaced:!!k,delay:u,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return g},this.frameInfo=function(O){if(O<0||O>=c.length)throw new Error("Frame index out of range.");return c[O]},this.decodeAndBlitFrameBGRA=function(O,X){var te=this.frameInfo(O),le=te.width*te.height,ne=new Uint8Array(le);bb(n,te.data_offset,ne,le);var Be=te.palette_offset,Z=te.transparent_index;Z===null&&(Z=256);var se=te.width,ce=t-se,be=se,x=4*(te.y*t+te.x),F=4*((te.y+te.height)*t+te.x),E=x,U=4*ce;te.interlaced===!0&&(U+=4*t*7);for(var P=8,T=0,R=ne.length;T<R;++T){var q=ne[T];if(be===0&&(be=se,(E+=U)>=F&&(U=4*ce+4*t*(P-1),E=x+(se+ce)*(P<<1),P>>=1)),q===Z)E+=4;else{var j=n[Be+3*q],Ae=n[Be+3*q+1],Ee=n[Be+3*q+2];X[E++]=Ee,X[E++]=Ae,X[E++]=j,X[E++]=255}--be}},this.decodeAndBlitFrameRGBA=function(O,X){var te=this.frameInfo(O),le=te.width*te.height,ne=new Uint8Array(le);bb(n,te.data_offset,ne,le);var Be=te.palette_offset,Z=te.transparent_index;Z===null&&(Z=256);var se=te.width,ce=t-se,be=se,x=4*(te.y*t+te.x),F=4*((te.y+te.height)*t+te.x),E=x,U=4*ce;te.interlaced===!0&&(U+=4*t*7);for(var P=8,T=0,R=ne.length;T<R;++T){var q=ne[T];if(be===0&&(be=se,(E+=U)>=F&&(U=4*ce+4*t*(P-1),E=x+(se+ce)*(P<<1),P>>=1)),q===Z)E+=4;else{var j=n[Be+3*q],Ae=n[Be+3*q+1],Ee=n[Be+3*q+2];X[E++]=j,X[E++]=Ae,X[E++]=Ee,X[E++]=255}--be}}}function bb(n,e,t,r){for(var o=n[e++],s=1<<o,i=s+1,a=i+1,A=o+1,d=(1<<A)-1,c=0,u=0,h=0,f=n[e++],g=new Int32Array(4096),m=null;;){for(;c<16&&f!==0;)u|=n[e++]<<c,c+=8,f===1?f=n[e++]:--f;if(c<A)break;var y=u&d;if(u>>=A,c-=A,y!==s){if(y===i)break;for(var _=y<a?y:m,C=0,I=_;I>s;)I=g[I]>>8,++C;var N=I;if(h+C+(_!==y?1:0)>r)return void wn.log("Warning, gif stream longer than expected.");t[h++]=N;var k=h+=C;for(_!==y&&(t[h++]=N),I=_;C--;)I=g[I],t[--k]=255&I,I>>=8;m!==null&&a<4096&&(g[a++]=m<<8|N,a>=d+1&&A<12&&(++A,d=d<<1|1)),m=y}else a=i+1,d=(1<<(A=o+1))-1,m=null}return h!==r&&wn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function rv(n){var e,t,r,o,s,i=Math.floor,a=new Array(64),A=new Array(64),d=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),g=new Array(64),m=[],y=0,_=7,C=new Array(64),I=new Array(64),N=new Array(64),k=new Array(256),W=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(x,F){for(var E=0,U=0,P=new Array,T=1;T<=16;T++){for(var R=1;R<=x[T];R++)P[F[U]]=[],P[F[U]][0]=E,P[F[U]][1]=T,U++,E++;E*=2}return P}function Be(x){for(var F=x[0],E=x[1]-1;E>=0;)F&1<<E&&(y|=1<<_),E--,--_<0&&(y==255?(Z(255),Z(0)):Z(y),_=7,y=0)}function Z(x){m.push(x)}function se(x){Z(x>>8&255),Z(255&x)}function ce(x,F,E,U,P){for(var T,R=P[0],q=P[240],j=function(pe,oe){var ye,Ne,we,Fe,ue,De,Pe,he,ee,ge,Se=0;for(ee=0;ee<8;++ee){ye=pe[Se],Ne=pe[Se+1],we=pe[Se+2],Fe=pe[Se+3],ue=pe[Se+4],De=pe[Se+5],Pe=pe[Se+6];var Me=ye+(he=pe[Se+7]),Qe=ye-he,ot=Ne+Pe,Ye=Ne-Pe,Ce=we+De,de=we-De,Te=Fe+ue,qe=Fe-ue,je=Me+Te,Re=Me-Te,Ve=ot+Ce,At=ot-Ce;pe[Se]=je+Ve,pe[Se+4]=je-Ve;var Ke=.707106781*(At+Re);pe[Se+2]=Re+Ke,pe[Se+6]=Re-Ke;var nt=.382683433*((je=qe+de)-(At=Ye+Qe)),ht=.5411961*je+nt,mt=1.306562965*At+nt,St=.707106781*(Ve=de+Ye),st=Qe+St,tt=Qe-St;pe[Se+5]=tt+ht,pe[Se+3]=tt-ht,pe[Se+1]=st+mt,pe[Se+7]=st-mt,Se+=8}for(Se=0,ee=0;ee<8;++ee){ye=pe[Se],Ne=pe[Se+8],we=pe[Se+16],Fe=pe[Se+24],ue=pe[Se+32],De=pe[Se+40],Pe=pe[Se+48];var Ft=ye+(he=pe[Se+56]),xt=ye-he,Ot=Ne+Pe,Ze=Ne-Pe,wt=we+De,gt=we-De,Dt=Fe+ue,qt=Fe-ue,zt=Ft+Dt,Mt=Ft-Dt,jt=Ot+wt,Ct=Ot-wt;pe[Se]=zt+jt,pe[Se+32]=zt-jt;var Et=.707106781*(Ct+Mt);pe[Se+16]=Mt+Et,pe[Se+48]=Mt-Et;var Nt=.382683433*((zt=qt+gt)-(Ct=Ze+xt)),Zt=.5411961*zt+Nt,nr=1.306562965*Ct+Nt,ir=.707106781*(jt=gt+Ze),sr=xt+ir,dr=xt-ir;pe[Se+40]=dr+Zt,pe[Se+24]=dr-Zt,pe[Se+8]=sr+nr,pe[Se+56]=sr-nr,Se++}for(ee=0;ee<64;++ee)ge=pe[ee]*oe[ee],f[ee]=ge>0?ge+.5|0:ge-.5|0;return f}(x,F),Ae=0;Ae<64;++Ae)g[V[Ae]]=j[Ae];var Ee=g[0]-E;E=g[0],Ee==0?Be(U[0]):(Be(U[h[T=32767+Ee]]),Be(u[T]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return Be(R),E;for(var Oe,G=1;G<=_e;){for(var D=G;g[G]==0&&G<=_e;)++G;var ie=G-D;if(ie>=16){Oe=ie>>4;for(var me=1;me<=Oe;++me)Be(q);ie&=15}T=32767+g[G],Be(P[(ie<<4)+h[T]]),Be(u[T]),G++}return _e!=63&&Be(R),E}function be(x){x=Math.min(Math.max(x,1),100),s!=x&&(function(F){for(var E=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var P=i((E[U]*F+50)/100);P=Math.min(Math.max(P,1),255),a[V[U]]=P}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var q=i((T[R]*F+50)/100);q=Math.min(Math.max(q,1),255),A[V[R]]=q}for(var j=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,Ee=0;Ee<8;Ee++)for(var _e=0;_e<8;_e++)d[Ae]=1/(a[V[Ae]]*j[Ee]*j[_e]*8),c[Ae]=1/(A[V[Ae]]*j[Ee]*j[_e]*8),Ae++}(x<50?Math.floor(5e3/x):Math.floor(200-2*x)),s=x)}this.encode=function(x,F){F&&be(F),m=new Array,y=0,_=7,se(65496),se(65504),se(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),se(1),se(1),Z(0),Z(0),function(){se(65499),se(132),Z(0);for(var Ne=0;Ne<64;Ne++)Z(a[Ne]);Z(1);for(var we=0;we<64;we++)Z(A[we])}(),function(Ne,we){se(65472),se(17),Z(8),se(we),se(Ne),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(x.width,x.height),function(){se(65476),se(418),Z(0);for(var Ne=0;Ne<16;Ne++)Z(H[Ne+1]);for(var we=0;we<=11;we++)Z(J[we]);Z(16);for(var Fe=0;Fe<16;Fe++)Z(xe[Fe+1]);for(var ue=0;ue<=161;ue++)Z(M[ue]);Z(1);for(var De=0;De<16;De++)Z(O[De+1]);for(var Pe=0;Pe<=11;Pe++)Z(X[Pe]);Z(17);for(var he=0;he<16;he++)Z(te[he+1]);for(var ee=0;ee<=161;ee++)Z(le[ee])}(),se(65498),se(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var E=0,U=0,P=0;y=0,_=7,this.encode.displayName="_encode_";for(var T,R,q,j,Ae,Ee,_e,Oe,G,D=x.data,ie=x.width,me=x.height,pe=4*ie,oe=0;oe<me;){for(T=0;T<pe;){for(Ae=pe*oe+T,_e=-1,Oe=0,G=0;G<64;G++)Ee=Ae+(Oe=G>>3)*pe+(_e=4*(7&G)),oe+Oe>=me&&(Ee-=pe*(oe+1+Oe-me)),T+_e>=pe&&(Ee-=T+_e-pe+4),R=D[Ee++],q=D[Ee++],j=D[Ee++],C[G]=(W[R]+W[q+256>>0]+W[j+512>>0]>>16)-128,I[G]=(W[R+768>>0]+W[q+1024>>0]+W[j+1280>>0]>>16)-128,N[G]=(W[R+1280>>0]+W[q+1536>>0]+W[j+1792>>0]>>16)-128;E=ce(C,d,E,e,r),U=ce(I,c,U,t,o),P=ce(N,c,P,t,o),T+=32}oe+=8}if(_>=0){var ye=[];ye[1]=_+1,ye[0]=(1<<_+1)-1,Be(ye)}return se(65497),new Uint8Array(m)},n=n||50,function(){for(var x=String.fromCharCode,F=0;F<256;F++)k[F]=x(F)}(),e=ne(H,J),t=ne(O,X),r=ne(xe,M),o=ne(te,le),function(){for(var x=1,F=2,E=1;E<=15;E++){for(var U=x;U<F;U++)h[32767+U]=E,u[32767+U]=[],u[32767+U][1]=E,u[32767+U][0]=U;for(var P=-(F-1);P<=-x;P++)h[32767+P]=E,u[32767+P]=[],u[32767+P][1]=E,u[32767+P][0]=F-1+P;x<<=1,F<<=1}}(),function(){for(var x=0;x<256;x++)W[x]=19595*x,W[x+256>>0]=38470*x,W[x+512>>0]=7471*x+32768,W[x+768>>0]=-11059*x,W[x+1024>>0]=-21709*x,W[x+1280>>0]=32768*x+8421375,W[x+1536>>0]=-27439*x,W[x+1792>>0]=-5329*x}(),be(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ci(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _b(n){function e(H){if(!H)throw Error("assert :P")}function t(H,J,xe){for(var M=0;4>M;M++)if(H[J+M]!=xe.charCodeAt(M))return!0;return!1}function r(H,J,xe,M,O){for(var X=0;X<O;X++)H[J+X]=xe[M+X]}function o(H,J,xe,M){for(var O=0;O<M;O++)H[J+O]=xe}function s(H){return new Int32Array(H)}function i(H,J){for(var xe=[],M=0;M<H;M++)xe.push(new J);return xe}function a(H,J){var xe=[];return function M(O,X,te){for(var le=te[X],ne=0;ne<le&&(O.push(te.length>X+1?[]:new J),!(te.length<X+1));ne++)M(O[ne],X+1,te)}(xe,0,H),xe}var A=function(){var H=this;function J(p,v){for(var S=1<<v-1>>>0;p&S;)S>>>=1;return S?(p&S-1)+S:p}function xe(p,v,S,Q,K){e(!(Q%S));do p[v+(Q-=S)]=K;while(0<Q)}function M(p,v,S,Q,K){if(e(2328>=K),512>=K)var re=s(512);else if((re=s(K))==null)return 0;return function(ae,fe,ve,Ie,Ge,ct){var ut,rt,Tt=fe,bt=1<<ve,We=s(16),et=s(16);for(e(Ge!=0),e(Ie!=null),e(ae!=null),e(0<ve),rt=0;rt<Ge;++rt){if(15<Ie[rt])return 0;++We[Ie[rt]]}if(We[0]==Ge)return 0;for(et[1]=0,ut=1;15>ut;++ut){if(We[ut]>1<<ut)return 0;et[ut+1]=et[ut]+We[ut]}for(rt=0;rt<Ge;++rt)ut=Ie[rt],0<Ie[rt]&&(ct[et[ut]++]=rt);if(et[15]==1)return(Ie=new O).g=0,Ie.value=ct[0],xe(ae,Tt,1,bt,Ie),bt;var Ut,Lt=-1,Qt=bt-1,Wt=0,Ht=1,ur=1,Rt=1<<ve;for(rt=0,ut=1,Ge=2;ut<=ve;++ut,Ge<<=1){if(Ht+=ur<<=1,0>(ur-=We[ut]))return 0;for(;0<We[ut];--We[ut])(Ie=new O).g=ut,Ie.value=ct[rt++],xe(ae,Tt+Wt,Ge,Rt,Ie),Wt=J(Wt,ut)}for(ut=ve+1,Ge=2;15>=ut;++ut,Ge<<=1){if(Ht+=ur<<=1,0>(ur-=We[ut]))return 0;for(;0<We[ut];--We[ut]){if(Ie=new O,(Wt&Qt)!=Lt){for(Tt+=Rt,Ut=1<<(Lt=ut)-ve;15>Lt&&!(0>=(Ut-=We[Lt]));)++Lt,Ut<<=1;bt+=Rt=1<<(Ut=Lt-ve),ae[fe+(Lt=Wt&Qt)].g=Ut+ve,ae[fe+Lt].value=Tt-fe-Lt}Ie.g=ut-ve,Ie.value=ct[rt++],xe(ae,Tt+(Wt>>ve),Ge,Rt,Ie),Wt=J(Wt,ut)}}return Ht!=2*et[15]-1?0:bt}(p,v,S,Q,K,re)}function O(){this.value=this.g=0}function X(){this.value=this.g=0}function te(){this.G=i(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Co,X)}function le(p,v,S,Q){e(p!=null),e(v!=null),e(2147483648>Q),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=S,p.Jd=v,p.Yc=S+Q,p.Zc=4<=Q?S+Q-4+1:S,T(p)}function ne(p,v){for(var S=0;0<v--;)S|=q(p,128)<<v;return S}function Be(p,v){var S=ne(p,v);return R(p)?-S:S}function Z(p,v,S,Q){var K,re=0;for(e(p!=null),e(v!=null),e(4294967288>Q),p.Sb=Q,p.Ra=0,p.u=0,p.h=0,4<Q&&(Q=4),K=0;K<Q;++K)re+=v[S+K]<<8*K;p.Ra=re,p.bb=Q,p.oa=v,p.pa=S}function se(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ul-8>>>0,++p.bb,p.u-=8;E(p)&&(p.h=1,p.u=0)}function ce(p,v){if(e(0<=v),!p.h&&v<=Il){var S=F(p)&Fl[v];return p.u+=v,se(p),S}return p.h=1,p.u=0}function be(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(p){return p.Ra>>>(p.u&Ul-1)>>>0}function E(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ul}function U(p,v){p.u=v,p.h=E(p)}function P(p){p.u>=wc&&(e(p.u>=wc),se(p))}function T(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function R(p){return ne(p,1)}function q(p,v){var S=p.Ca;0>p.b&&T(p);var Q=p.b,K=S*v>>>8,re=(p.I>>>Q>K)+0;for(re?(S-=K,p.I-=K+1<<Q>>>0):S=K+1,Q=S,K=0;256<=Q;)K+=8,Q>>=8;return Q=7^K+As[Q],p.b-=Q,p.Ca=(S<<Q)-1,re}function j(p,v,S){p[v+0]=S>>24&255,p[v+1]=S>>16&255,p[v+2]=S>>8&255,p[v+3]=S>>0&255}function Ae(p,v){return p[v+0]<<0|p[v+1]<<8}function Ee(p,v){return Ae(p,v)|p[v+2]<<16}function _e(p,v){return Ae(p,v)|Ae(p,v+2)<<16}function Oe(p,v){var S=1<<v;return e(p!=null),e(0<v),p.X=s(S),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function G(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),r(v.X,0,p.X,0,1<<v.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function ie(p,v,S,Q){e(S!=null),e(Q!=null);var K=S[0],re=Q[0];return K==0&&(K=(p*re+v/2)/v),re==0&&(re=(v*K+p/2)/p),0>=K||0>=re?0:(S[0]=K,Q[0]=re,1)}function me(p,v){return p+(1<<v)-1>>>v}function pe(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function oe(p,v){H[v]=function(S,Q,K,re,ae,fe,ve){var Ie;for(Ie=0;Ie<ae;++Ie){var Ge=H[p](fe[ve+Ie-1],K,re+Ie);fe[ve+Ie]=pe(S[Q+Ie],Ge)}}}function ye(){this.ud=this.hd=this.jd=0}function Ne(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function we(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Fe(p,v){return we(p+(p-v+.5>>1))}function ue(p,v,S){return Math.abs(v-S)-Math.abs(p-S)}function De(p,v,S,Q,K,re,ae){for(Q=re[ae-1],S=0;S<K;++S)re[ae+S]=Q=pe(p[v+S],Q)}function Pe(p,v,S,Q,K){var re;for(re=0;re<S;++re){var ae=p[v+re],fe=ae>>8&255,ve=16711935&(ve=(ve=16711935&ae)+((fe<<16)+fe));Q[K+re]=(4278255360&ae)+ve>>>0}}function he(p,v){v.jd=p>>0&255,v.hd=p>>8&255,v.ud=p>>16&255}function ee(p,v,S,Q,K,re){var ae;for(ae=0;ae<Q;++ae){var fe=v[S+ae],ve=fe>>>8,Ie=fe,Ge=255&(Ge=(Ge=fe>>>16)+((p.jd<<24>>24)*(ve<<24>>24)>>>5));Ie=255&(Ie=(Ie=Ie+((p.hd<<24>>24)*(ve<<24>>24)>>>5))+((p.ud<<24>>24)*(Ge<<24>>24)>>>5)),K[re+ae]=(4278255360&fe)+(Ge<<16)+Ie}}function ge(p,v,S,Q,K){H[v]=function(re,ae,fe,ve,Ie,Ge,ct,ut,rt){for(ve=ct;ve<ut;++ve)for(ct=0;ct<rt;++ct)Ie[Ge++]=K(fe[Q(re[ae++])])},H[p]=function(re,ae,fe,ve,Ie,Ge,ct){var ut=8>>re.b,rt=re.Ea,Tt=re.K[0],bt=re.w;if(8>ut)for(re=(1<<re.b)-1,bt=(1<<ut)-1;ae<fe;++ae){var We,et=0;for(We=0;We<rt;++We)We&re||(et=Q(ve[Ie++])),Ge[ct++]=K(Tt[et&bt]),et>>=ut}else H["VP8LMapColor"+S](ve,Ie,Tt,bt,Ge,ct,ae,fe,rt)}}function Se(p,v,S,Q,K){for(S=v+S;v<S;){var re=p[v++];Q[K++]=re>>16&255,Q[K++]=re>>8&255,Q[K++]=re>>0&255}}function Me(p,v,S,Q,K){for(S=v+S;v<S;){var re=p[v++];Q[K++]=re>>16&255,Q[K++]=re>>8&255,Q[K++]=re>>0&255,Q[K++]=re>>24&255}}function Qe(p,v,S,Q,K){for(S=v+S;v<S;){var re=(ae=p[v++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;Q[K++]=re,Q[K++]=ae}}function ot(p,v,S,Q,K){for(S=v+S;v<S;){var re=(ae=p[v++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;Q[K++]=re,Q[K++]=ae}}function Ye(p,v,S,Q,K){for(S=v+S;v<S;){var re=p[v++];Q[K++]=re>>0&255,Q[K++]=re>>8&255,Q[K++]=re>>16&255}}function Ce(p,v,S,Q,K,re){if(re==0)for(S=v+S;v<S;)j(Q,((re=p[v++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),K+=32;else r(Q,K,p,v,S)}function de(p,v){H[v][0]=H[p+"0"],H[v][1]=H[p+"1"],H[v][2]=H[p+"2"],H[v][3]=H[p+"3"],H[v][4]=H[p+"4"],H[v][5]=H[p+"5"],H[v][6]=H[p+"6"],H[v][7]=H[p+"7"],H[v][8]=H[p+"8"],H[v][9]=H[p+"9"],H[v][10]=H[p+"10"],H[v][11]=H[p+"11"],H[v][12]=H[p+"12"],H[v][13]=H[p+"13"],H[v][14]=H[p+"0"],H[v][15]=H[p+"0"]}function Te(p){return p==Kg||p==$g||p==hh||p==Vg}function qe(){this.eb=[],this.size=this.A=this.fb=0}function je(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Re(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qe,this.f.kb=new je,this.sd=null}function Ve(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function At(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ke(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function nt(p,v){var S=p.T,Q=v.ba.f.RGBA,K=Q.eb,re=Q.fb+p.ka*Q.A,ae=$s[v.ba.S],fe=p.y,ve=p.O,Ie=p.f,Ge=p.N,ct=p.ea,ut=p.W,rt=v.cc,Tt=v.dc,bt=v.Mc,We=v.Nc,et=p.ka,Ut=p.ka+p.T,Lt=p.U,Qt=Lt+1>>1;for(et==0?ae(fe,ve,null,null,Ie,Ge,ct,ut,Ie,Ge,ct,ut,K,re,null,null,Lt):(ae(v.ec,v.fc,fe,ve,rt,Tt,bt,We,Ie,Ge,ct,ut,K,re-Q.A,K,re,Lt),++S);et+2<Ut;et+=2)rt=Ie,Tt=Ge,bt=ct,We=ut,Ge+=p.Rc,ut+=p.Rc,re+=2*Q.A,ae(fe,(ve+=2*p.fa)-p.fa,fe,ve,rt,Tt,bt,We,Ie,Ge,ct,ut,K,re-Q.A,K,re,Lt);return ve+=p.fa,p.j+Ut<p.o?(r(v.ec,v.fc,fe,ve,Lt),r(v.cc,v.dc,Ie,Ge,Qt),r(v.Mc,v.Nc,ct,ut,Qt),S--):1&Ut||ae(fe,ve,null,null,Ie,Ge,ct,ut,Ie,Ge,ct,ut,K,re+Q.A,null,null,Lt),S}function ht(p,v,S){var Q=p.F,K=[p.J];if(Q!=null){var re=p.U,ae=v.ba.S,fe=ae==uh||ae==hh;v=v.ba.f.RGBA;var ve=[0],Ie=p.ka;ve[0]=p.T,p.Kb&&(Ie==0?--ve[0]:(--Ie,K[0]-=p.width),p.j+p.ka+p.T==p.o&&(ve[0]=p.o-p.j-Ie));var Ge=v.eb;Ie=v.fb+Ie*v.A,p=Bn(Q,K[0],p.width,re,ve,Ge,Ie+(fe?0:3),v.A),e(S==ve),p&&Te(ae)&&qs(Ge,Ie,fe,re,ve,v.A)}return 0}function mt(p){var v=p.ma,S=v.ba.S,Q=11>S,K=S==dh||S==ch||S==uh||S==qg||S==12||Te(S);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!vc(v.Oa,p,K?11:12))return 0;if(K&&Te(S)&&Pt(),p.da)alert("todo:use_scaling");else{if(Q){if(v.Ib=Ke,p.Kb){if(S=p.U+1>>1,v.memory=s(p.U+2*S),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+S,v.Ib=nt,Pt()}}else alert("todo:EmitYUV");K&&(v.Jb=ht,Q&&it())}if(Q&&!g2){for(p=0;256>p;++p)lC[p]=89858*(p-128)+ph>>fh,uC[p]=-22014*(p-128)+ph,cC[p]=-45773*(p-128),dC[p]=113618*(p-128)+ph>>fh;for(p=Cc;p<Xg;++p)v=76283*(p-16)+ph>>fh,hC[p-Cc]=zs(v,255),fC[p-Cc]=zs(v+8>>4,15);g2=1}return 1}function St(p){var v=p.ma,S=p.U,Q=p.T;return e(!(1&p.ka)),0>=S||0>=Q?0:(S=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,S),v.Dc+=S,1)}function st(p){p.ma.memory=null}function tt(p,v,S,Q){return ce(p,8)!=47?0:(v[0]=ce(p,14)+1,S[0]=ce(p,14)+1,Q[0]=ce(p,1),ce(p,3)!=0?0:!p.h)}function Ft(p,v){if(4>p)return p+1;var S=p-2>>1;return(2+(1&p)<<S)+ce(v,S)+1}function xt(p,v){return 120<v?v-120:1<=(S=((S=Wz[v-1])>>4)*p+(8-(15&S)))?S:1;var S}function Ot(p,v,S){var Q=F(S),K=p[v+=255&Q].g-8;return 0<K&&(U(S,S.u+8),Q=F(S),v+=p[v].value,v+=Q&(1<<K)-1),U(S,S.u+p[v].g),p[v].value}function Ze(p,v,S){return S.g+=p.g,S.value+=p.value<<v>>>0,e(8>=S.g),p.g}function wt(p,v,S){var Q=p.xc;return e((v=Q==0?0:p.vc[p.md*(S>>Q)+(v>>Q)])<p.Wb),p.Ya[v]}function gt(p,v,S,Q){var K=p.ab,re=p.c*v,ae=p.C;v=ae+v;var fe=S,ve=Q;for(Q=p.Ta,S=p.Ua;0<K--;){var Ie=p.gc[K],Ge=ae,ct=v,ut=fe,rt=ve,Tt=(ve=Q,fe=S,Ie.Ea);switch(e(Ge<ct),e(ct<=Ie.nc),Ie.hc){case 2:nh(ut,rt,(ct-Ge)*Tt,ve,fe);break;case 0:var bt=Ge,We=ct,et=ve,Ut=fe,Lt=(Rt=Ie).Ea;bt==0&&(jg(ut,rt,null,null,1,et,Ut),De(ut,rt+1,0,0,Lt-1,et,Ut+1),rt+=Lt,Ut+=Lt,++bt);for(var Qt=1<<Rt.b,Wt=Qt-1,Ht=me(Lt,Rt.b),ur=Rt.K,Rt=Rt.w+(bt>>Rt.b)*Ht;bt<We;){var Yr=ur,an=Rt,Kr=1;for(yc(ut,rt,et,Ut-Lt,1,et,Ut);Kr<Lt;){var Tr=(Kr&~Wt)+Qt;Tr>Lt&&(Tr=Lt),(0,Da[Yr[an++]>>8&15])(ut,rt+ +Kr,et,Ut+Kr-Lt,Tr-Kr,et,Ut+Kr),Kr=Tr}rt+=Lt,Ut+=Lt,++bt&Wt||(Rt+=Ht)}ct!=Ie.nc&&r(ve,fe-Tt,ve,fe+(ct-Ge-1)*Tt,Tt);break;case 1:for(Tt=ut,We=rt,Lt=(ut=Ie.Ea)-(Ut=ut&~(et=(rt=1<<Ie.b)-1)),bt=me(ut,Ie.b),Qt=Ie.K,Ie=Ie.w+(Ge>>Ie.b)*bt;Ge<ct;){for(Wt=Qt,Ht=Ie,ur=new ye,Rt=We+Ut,Yr=We+ut;We<Rt;)he(Wt[Ht++],ur),TA(ur,Tt,We,rt,ve,fe),We+=rt,fe+=rt;We<Yr&&(he(Wt[Ht++],ur),TA(ur,Tt,We,Lt,ve,fe),We+=Lt,fe+=Lt),++Ge&et||(Ie+=bt)}break;case 3:if(ut==ve&&rt==fe&&0<Ie.b){for(We=ve,ut=Tt=fe+(ct-Ge)*Tt-(Ut=(ct-Ge)*me(Ie.Ea,Ie.b)),rt=ve,et=fe,bt=[],Ut=(Lt=Ut)-1;0<=Ut;--Ut)bt[Ut]=rt[et+Ut];for(Ut=Lt-1;0<=Ut;--Ut)We[ut+Ut]=bt[Ut];Hs(Ie,Ge,ct,ve,Tt,ve,fe)}else Hs(Ie,Ge,ct,ut,rt,ve,fe)}fe=Q,ve=S}ve!=S&&r(Q,S,fe,ve,re)}function Dt(p,v){var S=p.V,Q=p.Ba+p.c*p.C,K=v-p.C;if(e(v<=p.l.o),e(16>=K),0<K){var re=p.l,ae=p.Ta,fe=p.Ua,ve=re.width;if(gt(p,K,S,Q),K=fe=[fe],e((S=p.C)<(Q=v)),e(re.v<re.va),Q>re.o&&(Q=re.o),S<re.j){var Ie=re.j-S;S=re.j,K[0]+=Ie*ve}if(S>=Q?S=0:(K[0]+=4*re.v,re.ka=S-re.j,re.U=re.va-re.v,re.T=Q-S,S=1),S){if(fe=fe[0],11>(S=p.ca).S){var Ge=S.f.RGBA,ct=(Q=S.S,K=re.U,re=re.T,Ie=Ge.eb,Ge.A),ut=re;for(Ge=Ge.fb+p.Ma*Ge.A;0<ut--;){var rt=ae,Tt=fe,bt=K,We=Ie,et=Ge;switch(Q){case lh:ls(rt,Tt,bt,We,et);break;case dh:Go(rt,Tt,bt,We,et);break;case Kg:Go(rt,Tt,bt,We,et),qs(We,et,0,bt,1,0);break;case a2:oa(rt,Tt,bt,We,et);break;case ch:Ce(rt,Tt,bt,We,et,1);break;case $g:Ce(rt,Tt,bt,We,et,1),qs(We,et,0,bt,1,0);break;case uh:Ce(rt,Tt,bt,We,et,0);break;case hh:Ce(rt,Tt,bt,We,et,0),qs(We,et,1,bt,1,0);break;case qg:Na(rt,Tt,bt,We,et);break;case Vg:Na(rt,Tt,bt,We,et),_n(We,et,bt,1,0);break;case A2:na(rt,Tt,bt,We,et);break;default:e(0)}fe+=ve,Ge+=ct}p.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=S.height)}}p.C=v,e(p.C<=p.i)}function qt(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var S=p.Ya[v].G,Q=p.Ya[v].H;if(0<S[1][Q[1]+0].g||0<S[2][Q[2]+0].g||0<S[3][Q[3]+0].g)return 0}return 1}function zt(p,v,S,Q,K,re){if(p.Z!=0){var ae=p.qd,fe=p.rd;for(e(Ra[p.Z]!=null);v<S;++v)Ra[p.Z](ae,fe,Q,K,Q,K,re),ae=Q,fe=K,K+=re;p.qd=ae,p.rd=fe}}function Mt(p,v){var S=p.l.ma,Q=S.Z==0||S.Z==1?p.l.j:p.C;if(Q=p.C<Q?Q:p.C,e(v<=p.l.o),v>Q){var K=p.l.width,re=S.ca,ae=S.tb+K*Q,fe=p.V,ve=p.Ba+p.c*Q,Ie=p.gc;e(p.ab==1),e(Ie[0].hc==3),oh(Ie[0],Q,v,fe,ve,re,ae),zt(S,Q,v,re,ae,K)}p.C=p.Ma=v}function jt(p,v,S,Q,K,re,ae){var fe=p.$/Q,ve=p.$%Q,Ie=p.m,Ge=p.s,ct=S+p.$,ut=ct;K=S+Q*K;var rt=S+Q*re,Tt=280+Ge.ua,bt=p.Pb?fe:16777216,We=0<Ge.ua?Ge.Wa:null,et=Ge.wc,Ut=ct<rt?wt(Ge,ve,fe):null;e(p.C<re),e(rt<=K);var Lt=!1;e:for(;;){for(;Lt||ct<rt;){var Qt=0;if(fe>=bt){var Wt=ct-S;e((bt=p).Pb),bt.wd=bt.m,bt.xd=Wt,0<bt.s.ua&&G(bt.s.Wa,bt.s.vb),bt=fe+Yz}if(ve&et||(Ut=wt(Ge,ve,fe)),e(Ut!=null),Ut.Qb&&(v[ct]=Ut.qb,Lt=!0),!Lt)if(P(Ie),Ut.jc){Qt=Ie,Wt=v;var Ht=ct,ur=Ut.pd[F(Qt)&Co-1];e(Ut.jc),256>ur.g?(U(Qt,Qt.u+ur.g),Wt[Ht]=ur.value,Qt=0):(U(Qt,Qt.u+ur.g-256),e(256<=ur.value),Qt=ur.value),Qt==0&&(Lt=!0)}else Qt=Ot(Ut.G[0],Ut.H[0],Ie);if(Ie.h)break;if(Lt||256>Qt){if(!Lt)if(Ut.nd)v[ct]=(Ut.qb|Qt<<8)>>>0;else{if(P(Ie),Lt=Ot(Ut.G[1],Ut.H[1],Ie),P(Ie),Wt=Ot(Ut.G[2],Ut.H[2],Ie),Ht=Ot(Ut.G[3],Ut.H[3],Ie),Ie.h)break;v[ct]=(Ht<<24|Lt<<16|Qt<<8|Wt)>>>0}if(Lt=!1,++ct,++ve>=Q&&(ve=0,++fe,ae!=null&&fe<=re&&!(fe%16)&&ae(p,fe),We!=null))for(;ut<ct;)Qt=v[ut++],We.X[(506832829*Qt&4294967295)>>>We.Mb]=Qt}else if(280>Qt){if(Qt=Ft(Qt-256,Ie),Wt=Ot(Ut.G[4],Ut.H[4],Ie),P(Ie),Wt=xt(Q,Wt=Ft(Wt,Ie)),Ie.h)break;if(ct-S<Wt||K-ct<Qt)break e;for(Ht=0;Ht<Qt;++Ht)v[ct+Ht]=v[ct+Ht-Wt];for(ct+=Qt,ve+=Qt;ve>=Q;)ve-=Q,++fe,ae!=null&&fe<=re&&!(fe%16)&&ae(p,fe);if(e(ct<=K),ve&et&&(Ut=wt(Ge,ve,fe)),We!=null)for(;ut<ct;)Qt=v[ut++],We.X[(506832829*Qt&4294967295)>>>We.Mb]=Qt}else{if(!(Qt<Tt))break e;for(Lt=Qt-280,e(We!=null);ut<ct;)Qt=v[ut++],We.X[(506832829*Qt&4294967295)>>>We.Mb]=Qt;Qt=ct,e(!(Lt>>>(Wt=We).Xa)),v[Qt]=Wt.X[Lt],Lt=!0}Lt||e(Ie.h==E(Ie))}if(p.Pb&&Ie.h&&ct<K)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&G(p.s.vb,p.s.Wa);else{if(Ie.h)break e;ae!=null&&ae(p,fe>re?re:fe),p.a=0,p.$=ct-S}return 1}return p.a=3,0}function Ct(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function Et(){var p=new Hg;return p==null?null:(p.a=0,p.xb=c2,de("Predictor","VP8LPredictors"),de("Predictor","VP8LPredictors_C"),de("PredictorAdd","VP8LPredictorsAdd"),de("PredictorAdd","VP8LPredictorsAdd_C"),nh=Pe,TA=ee,ls=Se,Go=Me,Na=Qe,na=ot,oa=Ye,H.VP8LMapColor32b=Ql,H.VP8LMapColor8b=sh,p)}function Nt(p,v,S,Q,K){var re=1,ae=[p],fe=[v],ve=Q.m,Ie=Q.s,Ge=null,ct=0;e:for(;;){if(S)for(;re&&ce(ve,1);){var ut=ae,rt=fe,Tt=Q,bt=1,We=Tt.m,et=Tt.gc[Tt.ab],Ut=ce(We,2);if(Tt.Oc&1<<Ut)re=0;else{switch(Tt.Oc|=1<<Ut,et.hc=Ut,et.Ea=ut[0],et.nc=rt[0],et.K=[null],++Tt.ab,e(4>=Tt.ab),Ut){case 0:case 1:et.b=ce(We,3)+2,bt=Nt(me(et.Ea,et.b),me(et.nc,et.b),0,Tt,et.K),et.K=et.K[0];break;case 3:var Lt,Qt=ce(We,8)+1,Wt=16<Qt?0:4<Qt?1:2<Qt?2:3;if(ut[0]=me(et.Ea,Wt),et.b=Wt,Lt=bt=Nt(Qt,1,0,Tt,et.K)){var Ht,ur=Qt,Rt=et,Yr=1<<(8>>Rt.b),an=s(Yr);if(an==null)Lt=0;else{var Kr=Rt.K[0],Tr=Rt.w;for(an[0]=Rt.K[0][0],Ht=1;Ht<1*ur;++Ht)an[Ht]=pe(Kr[Tr+Ht],an[Ht-1]);for(;Ht<4*Yr;++Ht)an[Ht]=0;Rt.K[0]=null,Rt.K[0]=an,Lt=1}}bt=Lt;break;case 2:break;default:e(0)}re=bt}}if(ae=ae[0],fe=fe[0],re&&ce(ve,1)&&!(re=1<=(ct=ce(ve,4))&&11>=ct)){Q.a=3;break e}var mn;if(mn=re)t:{var hn,Sr,so,ds=Q,io=ae,cs=fe,An=ct,Ss=S,Es=ds.m,vo=ds.s,So=[null],Xo=1,Vs=0,Qi=Xz[An];r:for(;;){if(Ss&&ce(Es,1)){var mo=ce(Es,3)+2,Aa=me(io,mo),DA=me(cs,mo),Ol=Aa*DA;if(!Nt(Aa,DA,0,ds,So))break r;for(So=So[0],vo.xc=mo,hn=0;hn<Ol;++hn){var qa=So[hn]>>8&65535;So[hn]=qa,qa>=Xo&&(Xo=qa+1)}}if(Es.h)break r;for(Sr=0;5>Sr;++Sr){var Hn=l2[Sr];!Sr&&0<An&&(Hn+=1<<An),Vs<Hn&&(Vs=Hn)}var Yg=i(Xo*Qi,O),w2=Xo,y2=i(w2,te);if(y2==null)var vh=null;else e(65536>=w2),vh=y2;var Sc=s(Vs);if(vh==null||Sc==null||Yg==null){ds.a=1;break r}var mh=Yg;for(hn=so=0;hn<Xo;++hn){var Ai=vh[hn],Dl=Ai.G,Nl=Ai.H,b2=0,wh=1,_2=0;for(Sr=0;5>Sr;++Sr){Hn=l2[Sr],Dl[Sr]=mh,Nl[Sr]=so,!Sr&&0<An&&(Hn+=1<<An);o:{var yh,Jg=Hn,bh=ds,Ec=Sc,vC=mh,mC=so,Zg=0,Ka=bh.m,wC=ce(Ka,1);if(o(Ec,0,0,Jg),wC){var yC=ce(Ka,1)+1,bC=ce(Ka,1),B2=ce(Ka,bC==0?1:8);Ec[B2]=1,yC==2&&(Ec[B2=ce(Ka,8)]=1);var _h=1}else{var x2=s(19),z2=ce(Ka,4)+4;if(19<z2){bh.a=3;var Bh=0;break o}for(yh=0;yh<z2;++yh)x2[Gz[yh]]=ce(Ka,3);var e0=void 0,Fc=void 0,C2=bh,_C=x2,xh=Jg,S2=Ec,t0=0,$a=C2.m,E2=8,F2=i(128,O);n:for(;M(F2,0,7,_C,19);){if(ce($a,1)){var BC=2+2*ce($a,3);if((e0=2+ce($a,BC))>xh)break n}else e0=xh;for(Fc=0;Fc<xh&&e0--;){P($a);var I2=F2[0+(127&F($a))];U($a,$a.u+I2.g);var Ml=I2.value;if(16>Ml)S2[Fc++]=Ml,Ml!=0&&(E2=Ml);else{var xC=Ml==16,U2=Ml-16,zC=$z[U2],Q2=ce($a,Kz[U2])+zC;if(Fc+Q2>xh)break n;for(var CC=xC?E2:0;0<Q2--;)S2[Fc++]=CC}}t0=1;break n}t0||(C2.a=3),_h=t0}(_h=_h&&!Ka.h)&&(Zg=M(vC,mC,8,Ec,Jg)),_h&&Zg!=0?Bh=Zg:(bh.a=3,Bh=0)}if(Bh==0)break r;if(wh&&Vz[Sr]==1&&(wh=mh[so].g==0),b2+=mh[so].g,so+=Bh,3>=Sr){var Ic,r0=Sc[0];for(Ic=1;Ic<Hn;++Ic)Sc[Ic]>r0&&(r0=Sc[Ic]);_2+=r0}}if(Ai.nd=wh,Ai.Qb=0,wh&&(Ai.qb=(Dl[3][Nl[3]+0].value<<24|Dl[1][Nl[1]+0].value<<16|Dl[2][Nl[2]+0].value)>>>0,b2==0&&256>Dl[0][Nl[0]+0].value&&(Ai.Qb=1,Ai.qb+=Dl[0][Nl[0]+0].value<<8)),Ai.jc=!Ai.Qb&&6>_2,Ai.jc){var zh,la=Ai;for(zh=0;zh<Co;++zh){var Va=zh,Ga=la.pd[Va],Ch=la.G[0][la.H[0]+Va];256<=Ch.value?(Ga.g=Ch.g+256,Ga.value=Ch.value):(Ga.g=0,Ga.value=0,Va>>=Ze(Ch,8,Ga),Va>>=Ze(la.G[1][la.H[1]+Va],16,Ga),Va>>=Ze(la.G[2][la.H[2]+Va],0,Ga),Ze(la.G[3][la.H[3]+Va],24,Ga))}}}vo.vc=So,vo.Wb=Xo,vo.Ya=vh,vo.yc=Yg,mn=1;break t}mn=0}if(!(re=mn)){Q.a=3;break e}if(0<ct){if(Ie.ua=1<<ct,!Oe(Ie.Wa,ct)){Q.a=1,re=0;break e}}else Ie.ua=0;var n0=Q,T2=ae,SC=fe,o0=n0.s,s0=o0.xc;if(n0.c=T2,n0.i=SC,o0.md=me(T2,s0),o0.wc=s0==0?-1:(1<<s0)-1,S){Q.xb=oC;break e}if((Ge=s(ae*fe))==null){Q.a=1,re=0;break e}re=(re=jt(Q,Ge,0,ae,fe,fe,null))&&!ve.h;break e}return re?(K!=null?K[0]=Ge:(e(Ge==null),e(S)),Q.$=0,S||Ct(Ie)):Ct(Ie),re}function Zt(p,v){var S=p.c*p.i,Q=S+v+16*v;return e(p.c<=v),p.V=s(Q),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+S+v,1)}function nr(p,v){var S=p.C,Q=v-S,K=p.V,re=p.Ba+p.c*S;for(e(v<=p.l.o);0<Q;){var ae=16<Q?16:Q,fe=p.l.ma,ve=p.l.width,Ie=ve*ae,Ge=fe.ca,ct=fe.tb+ve*S,ut=p.Ta,rt=p.Ua;gt(p,ae,K,re),$n(ut,rt,Ge,ct,Ie),zt(fe,S,S+ae,Ge,ct,ve),Q-=ae,K+=ae*p.c,S+=ae}e(S==v),p.C=p.Ma=v}function ir(){this.ub=this.yd=this.td=this.Rb=0}function sr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Jr(){this.Yb=function(){var p=[];return function v(S,Q,K){for(var re=K[Q],ae=0;ae<re&&(S.push(K.length>Q+1?[]:0),!(K.length<Q+1));ae++)v(S[ae],Q+1,K)}(p,0,[3,11]),p}()}function sn(){this.jb=s(3),this.Wc=a([4,8],Jr),this.Xc=a([4,17],Jr)}function lr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function qr(){this.Na=this.la=0}function Pr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _r(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wr(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new _r),this.aa=0,this.l=new vn}function Qr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Wr(){this.cb=this.a=0,this.sc="",this.m=new be,this.Od=new ir,this.Kc=new sr,this.ed=new lr,this.Qa=new dr,this.Ic=this.$c=this.Aa=0,this.D=new wr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,be),this.ia=0,this.pb=i(4,Pr),this.Pa=new sn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qr),this.Hd=0,this.rb=Array(new qr),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _r),this.L=this.aa=0,this.gd=a([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hr(){var p=new Wr;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,zc||(zc=ro)),p}function pr(p,v,S){return p.a==0&&(p.a=v,p.sc=S,p.cb=0),0}function In(p,v,S){return 3<=S&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function To(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return pr(p,2,"null VP8Io passed to VP8GetHeaders()");var S=v.data,Q=v.w,K=v.ha;if(4>K)return pr(p,7,"Truncated header.");var re=S[Q+0]|S[Q+1]<<8|S[Q+2]<<16,ae=p.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return pr(p,3,"Incorrect keyframe parameters.");if(!ae.yd)return pr(p,4,"Frame not displayable.");Q+=3,K-=3;var fe=p.Kc;if(ae.Rb){if(7>K)return pr(p,7,"cannot parse picture header");if(!In(S,Q,K))return pr(p,3,"Bad code word");fe.c=16383&(S[Q+4]<<8|S[Q+3]),fe.Td=S[Q+4]>>6,fe.i=16383&(S[Q+6]<<8|S[Q+5]),fe.Ud=S[Q+6]>>6,Q+=7,K-=7,p.za=fe.c+15>>4,p.Ub=fe.i+15>>4,v.width=fe.c,v.height=fe.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((re=p.Pa).jb,0,255,re.jb.length),e((re=p.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,o(re.Zb,0,0,re.Zb.length),o(re.Lb,0,0,re.Lb)}if(ae.ub>K)return pr(p,7,"bad partition length");le(re=p.m,S,Q,ae.ub),Q+=ae.ub,K-=ae.ub,ae.Rb&&(fe.Ld=R(re),fe.Kd=R(re)),fe=p.Qa;var ve,Ie=p.Pa;if(e(re!=null),e(fe!=null),fe.Cb=R(re),fe.Cb){if(fe.Bb=R(re),R(re)){for(fe.Fb=R(re),ve=0;4>ve;++ve)fe.Zb[ve]=R(re)?Be(re,7):0;for(ve=0;4>ve;++ve)fe.Lb[ve]=R(re)?Be(re,6):0}if(fe.Bb)for(ve=0;3>ve;++ve)Ie.jb[ve]=R(re)?ne(re,8):255}else fe.Bb=0;if(re.Ka)return pr(p,3,"cannot parse segment header");if((fe=p.ed).zd=R(re),fe.Tb=ne(re,6),fe.wb=ne(re,3),fe.Pc=R(re),fe.Pc&&R(re)){for(Ie=0;4>Ie;++Ie)R(re)&&(fe.vd[Ie]=Be(re,6));for(Ie=0;4>Ie;++Ie)R(re)&&(fe.od[Ie]=Be(re,6))}if(p.L=fe.Tb==0?0:fe.zd?1:2,re.Ka)return pr(p,3,"cannot parse filter header");var Ge=K;if(K=ve=Q,Q=ve+Ge,fe=Ge,p.Xb=(1<<ne(p.m,2))-1,Ge<3*(Ie=p.Xb))S=7;else{for(ve+=3*Ie,fe-=3*Ie,Ge=0;Ge<Ie;++Ge){var ct=S[K+0]|S[K+1]<<8|S[K+2]<<16;ct>fe&&(ct=fe),le(p.Jc[+Ge],S,ve,ct),ve+=ct,fe-=ct,K+=3}le(p.Jc[+Ie],S,ve,fe),S=ve<Q?0:5}if(S!=0)return pr(p,S,"cannot parse partitions");for(S=ne(ve=p.m,7),K=R(ve)?Be(ve,4):0,Q=R(ve)?Be(ve,4):0,fe=R(ve)?Be(ve,4):0,Ie=R(ve)?Be(ve,4):0,ve=R(ve)?Be(ve,4):0,Ge=p.Qa,ct=0;4>ct;++ct){if(Ge.Cb){var ut=Ge.Zb[ct];Ge.Fb||(ut+=S)}else{if(0<ct){p.pb[ct]=p.pb[0];continue}ut=S}var rt=p.pb[ct];rt.Sc[0]=Gg[zs(ut+K,127)],rt.Sc[1]=Wg[zs(ut+0,127)],rt.Eb[0]=2*Gg[zs(ut+Q,127)],rt.Eb[1]=101581*Wg[zs(ut+fe,127)]>>16,8>rt.Eb[1]&&(rt.Eb[1]=8),rt.Qc[0]=Gg[zs(ut+Ie,117)],rt.Qc[1]=Wg[zs(ut+ve,127)],rt.lc=ut+ve}if(!ae.Rb)return pr(p,4,"Not a key frame.");for(R(re),ae=p.Pa,S=0;4>S;++S){for(K=0;8>K;++K)for(Q=0;3>Q;++Q)for(fe=0;11>fe;++fe)Ie=q(re,rC[S][K][Q][fe])?ne(re,8):eC[S][K][Q][fe],ae.Wc[S][K].Yb[Q][fe]=Ie;for(K=0;17>K;++K)ae.Xc[S][K]=ae.Wc[S][nC[K]]}return p.kc=R(re),p.kc&&(p.Bd=ne(re,8)),p.cb=1}function ro(p,v,S,Q,K,re,ae){var fe=v[K].Yb[S];for(S=0;16>K;++K){if(!q(p,fe[S+0]))return K;for(;!q(p,fe[S+1]);)if(fe=v[++K].Yb[0],S=0,K==16)return 16;var ve=v[K+1].Yb;if(q(p,fe[S+2])){var Ie=p,Ge=0;if(q(Ie,(ut=fe)[(ct=S)+3]))if(q(Ie,ut[ct+6])){for(fe=0,ct=2*(Ge=q(Ie,ut[ct+8]))+(ut=q(Ie,ut[ct+9+Ge])),Ge=0,ut=Jz[ct];ut[fe];++fe)Ge+=Ge+q(Ie,ut[fe]);Ge+=3+(8<<ct)}else q(Ie,ut[ct+7])?(Ge=7+2*q(Ie,165),Ge+=q(Ie,145)):Ge=5+q(Ie,159);else Ge=q(Ie,ut[ct+4])?3+q(Ie,ut[ct+5]):2;fe=ve[2]}else Ge=1,fe=ve[1];ve=ae+Zz[K],0>(Ie=p).b&&T(Ie);var ct,ut=Ie.b,rt=(ct=Ie.Ca>>1)-(Ie.I>>ut)>>31;--Ie.b,Ie.Ca+=rt,Ie.Ca|=1,Ie.I-=(ct+1&rt)<<ut,re[ve]=((Ge^rt)-rt)*Q[(0<K)+0]}return 16}function xo(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function as(p,v){if(p==null)return 0;if(v==null)return pr(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!To(p,v))return 0;if(e(p.cb),v.ac==null||v.ac(v)){v.ob&&(p.L=0);var S=gh[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=v.v-S>>4,p.zb=v.j-S>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=v.o+15+S>>4,p.Hb=v.va+15+S>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var Q=p.ed;for(S=0;4>S;++S){var K;if(p.Qa.Cb){var re=p.Qa.Lb[S];p.Qa.Fb||(re+=Q.Tb)}else re=Q.Tb;for(K=0;1>=K;++K){var ae=p.gd[S][K],fe=re;if(Q.Pc&&(fe+=Q.vd[0],K&&(fe+=Q.od[0])),0<(fe=0>fe?0:63<fe?63:fe)){var ve=fe;0<Q.wb&&(ve=4<Q.wb?ve>>2:ve>>1)>9-Q.wb&&(ve=9-Q.wb),1>ve&&(ve=1),ae.dd=ve,ae.tc=2*fe+ve,ae.ld=40<=fe?2:15<=fe?1:0}else ae.tc=0;ae.La=K}}}S=0}else pr(p,6,"Frame setup failed"),S=p.a;if(S=S==0){if(S){p.$c=0,0<p.Aa||(p.Ic=gC);e:{S=p.Ic,Q=4*(ve=p.za);var Ie=32*ve,Ge=ve+1,ct=0<p.L?ve*(0<p.Aa?2:1):0,ut=(p.Aa==2?2:1)*ve;if((ae=Q+832+(K=3*(16*S+gh[p.L])/2*Ie)+(re=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=ae)S=0;else{if(ae>p.Vb){if(p.Vb=0,p.Ec=s(ae),p.Fc=0,p.Ec==null){S=pr(p,1,"no memory during frame initialization.");break e}p.Vb=ae}ae=p.Ec,fe=p.Fc,p.Ac=ae,p.Bc=fe,fe+=Q,p.Gd=i(Ie,Qr),p.Hd=0,p.rb=i(Ge+1,qr),p.sb=1,p.wa=ct?i(ct,cr):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=ve),e(!0),p.oc=ae,p.pc=fe,fe+=832,p.ya=i(ut,_r),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=ve),p.R=16*ve,p.B=8*ve,ve=(Ie=gh[p.L])*p.R,Ie=Ie/2*p.B,p.sa=ae,p.ta=fe+ve,p.qa=p.sa,p.ra=p.ta+16*S*p.R+Ie,p.Ha=p.qa,p.Ia=p.ra+8*S*p.B+Ie,p.$c=0,fe+=K,p.mb=re?ae:null,p.nb=re?fe:null,e(fe+re<=p.Fc+p.Vb),xo(p),o(p.Ac,p.Bc,0,Q),S=1}}if(S){if(v.ka=0,v.y=p.sa,v.O=p.ta,v.f=p.qa,v.N=p.ra,v.ea=p.Ha,v.Vd=p.Ia,v.fa=p.R,v.Rc=p.B,v.F=null,v.J=0,!ah){for(S=-255;255>=S;++S)co[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)ia[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)xc[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)kl[255+S]=0>S?0:255<S?255:S;ah=1}Tl=bn,sa=ta,bc=Ds,Wo=or,js=Vr,Kn=ri,Ll=Ac,ih=UA,_c=Mg,LA=lc,PA=Ng,Ma=xl,kA=dc,Pl=eh,OA=Zu,Ha=Ii,Bc=ra,Rs=Dg,ai[0]=un,ai[1]=no,ai[2]=Ir,ai[3]=Xr,ai[4]=xs,ai[5]=Ms,ai[6]=oi,ai[7]=Fi,ai[8]=sc,ai[9]=oc,ja[0]=Ns,ja[1]=Gt,ja[2]=kr,ja[3]=zn,ja[4]=Pn,ja[5]=ni,ja[6]=La,aa[0]=Pa,aa[1]=Vo,aa[2]=kg,aa[3]=ic,aa[4]=IA,aa[5]=Og,aa[6]=ac,S=1}else S=0}S&&(S=function(rt,Tt){for(rt.M=0;rt.M<rt.Va;++rt.M){var bt,We=rt.Jc[rt.M&rt.Xb],et=rt.m,Ut=rt;for(bt=0;bt<Ut.za;++bt){var Lt=et,Qt=Ut,Wt=Qt.Ac,Ht=Qt.Bc+4*bt,ur=Qt.zc,Rt=Qt.ya[Qt.aa+bt];if(Qt.Qa.Bb?Rt.$b=q(Lt,Qt.Pa.jb[0])?2+q(Lt,Qt.Pa.jb[2]):q(Lt,Qt.Pa.jb[1]):Rt.$b=0,Qt.kc&&(Rt.Ad=q(Lt,Qt.Bd)),Rt.Za=!q(Lt,145)+0,Rt.Za){var Yr=Rt.Ob,an=0;for(Qt=0;4>Qt;++Qt){var Kr,Tr=ur[0+Qt];for(Kr=0;4>Kr;++Kr){Tr=tC[Wt[Ht+Kr]][Tr];for(var mn=d2[q(Lt,Tr[0])];0<mn;)mn=d2[2*mn+q(Lt,Tr[mn])];Tr=-mn,Wt[Ht+Kr]=Tr}r(Yr,an,Wt,Ht,4),an+=4,ur[0+Qt]=Tr}}else Tr=q(Lt,156)?q(Lt,128)?1:3:q(Lt,163)?2:0,Rt.Ob[0]=Tr,o(Wt,Ht,Tr,4),o(ur,0,Tr,4);Rt.Dd=q(Lt,142)?q(Lt,114)?q(Lt,183)?1:3:2:0}if(Ut.m.Ka)return pr(rt,7,"Premature end-of-partition0 encountered.");for(;rt.ja<rt.za;++rt.ja){if(Ut=We,Lt=(et=rt).rb[et.sb-1],Wt=et.rb[et.sb+et.ja],bt=et.ya[et.aa+et.ja],Ht=et.kc?bt.Ad:0)Lt.la=Wt.la=0,bt.Za||(Lt.Na=Wt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var hn,Sr;if(Lt=Wt,Wt=Ut,Ht=et.Pa.Xc,ur=et.ya[et.aa+et.ja],Rt=et.pb[ur.$b],Qt=ur.ad,Yr=0,an=et.rb[et.sb-1],Tr=Kr=0,o(Qt,Yr,0,384),ur.Za)var so=0,ds=Ht[3];else{mn=s(16);var io=Lt.Na+an.Na;if(io=zc(Wt,Ht[1],io,Rt.Eb,0,mn,0),Lt.Na=an.Na=(0<io)+0,1<io)Tl(mn,0,Qt,Yr);else{var cs=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)Qt[Yr+mn]=cs}so=1,ds=Ht[0]}var An=15&Lt.la,Ss=15&an.la;for(mn=0;4>mn;++mn){var Es=1&Ss;for(cs=Sr=0;4>cs;++cs)An=An>>1|(Es=(io=zc(Wt,ds,io=Es+(1&An),Rt.Sc,so,Qt,Yr))>so)<<7,Sr=Sr<<2|(3<io?3:1<io?2:Qt[Yr+0]!=0),Yr+=16;An>>=4,Ss=Ss>>1|Es<<7,Kr=(Kr<<8|Sr)>>>0}for(ds=An,so=Ss>>4,hn=0;4>hn;hn+=2){for(Sr=0,An=Lt.la>>4+hn,Ss=an.la>>4+hn,mn=0;2>mn;++mn){for(Es=1&Ss,cs=0;2>cs;++cs)io=Es+(1&An),An=An>>1|(Es=0<(io=zc(Wt,Ht[2],io,Rt.Qc,0,Qt,Yr)))<<3,Sr=Sr<<2|(3<io?3:1<io?2:Qt[Yr+0]!=0),Yr+=16;An>>=2,Ss=Ss>>1|Es<<5}Tr|=Sr<<4*hn,ds|=An<<4<<hn,so|=(240&Ss)<<hn}Lt.la=ds,an.la=so,ur.Hc=Kr,ur.Gc=Tr,ur.ia=43690&Tr?0:Rt.ia,Ht=!(Kr|Tr)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[bt.$b][bt.Za],et.wa[et.Y+et.ja].La|=!Ht),Ut.Ka)return pr(rt,7,"Premature end-of-file encountered.")}if(xo(rt),et=Tt,Ut=1,bt=(We=rt).D,Lt=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(bt.M=We.M,bt.uc=Lt,gc(We,bt),Ut=1,bt=(Sr=We.D).Nb,Lt=(Tr=gh[We.L])*We.R,Wt=Tr/2*We.B,mn=16*bt*We.R,cs=8*bt*We.B,Ht=We.sa,ur=We.ta-Lt+mn,Rt=We.qa,Qt=We.ra-Wt+cs,Yr=We.Ha,an=We.Ia-Wt+cs,Ss=(An=Sr.M)==0,Kr=An>=We.Va-1,We.Aa==2&&gc(We,Sr),Sr.uc)for(Es=(io=We).D.M,e(io.D.uc),Sr=io.yb;Sr<io.Hb;++Sr){so=Sr,ds=Es;var vo=(So=(Hn=io).D).Nb;hn=Hn.R;var So=So.wa[So.Y+so],Xo=Hn.sa,Vs=Hn.ta+16*vo*hn+16*so,Qi=So.dd,mo=So.tc;if(mo!=0)if(e(3<=mo),Hn.L==1)0<so&&Ha(Xo,Vs,hn,mo+4),So.La&&Rs(Xo,Vs,hn,mo),0<ds&&OA(Xo,Vs,hn,mo+4),So.La&&Bc(Xo,Vs,hn,mo);else{var Aa=Hn.B,DA=Hn.qa,Ol=Hn.ra+8*vo*Aa+8*so,qa=Hn.Ha,Hn=Hn.Ia+8*vo*Aa+8*so;vo=So.ld,0<so&&(ih(Xo,Vs,hn,mo+4,Qi,vo),LA(DA,Ol,qa,Hn,Aa,mo+4,Qi,vo)),So.La&&(Ma(Xo,Vs,hn,mo,Qi,vo),Pl(DA,Ol,qa,Hn,Aa,mo,Qi,vo)),0<ds&&(Ll(Xo,Vs,hn,mo+4,Qi,vo),_c(DA,Ol,qa,Hn,Aa,mo+4,Qi,vo)),So.La&&(PA(Xo,Vs,hn,mo,Qi,vo),kA(DA,Ol,qa,Hn,Aa,mo,Qi,vo))}}if(We.ia&&alert("todo:DitherRow"),et.put!=null){if(Sr=16*An,An=16*(An+1),Ss?(et.y=We.sa,et.O=We.ta+mn,et.f=We.qa,et.N=We.ra+cs,et.ea=We.Ha,et.W=We.Ia+cs):(Sr-=Tr,et.y=Ht,et.O=ur,et.f=Rt,et.N=Qt,et.ea=Yr,et.W=an),Kr||(An-=Tr),An>et.o&&(An=et.o),et.F=null,et.J=null,We.Fa!=null&&0<We.Fa.length&&Sr<An&&(et.J=fc(We,et,Sr,An-Sr),et.F=We.mb,et.F==null&&et.F.length==0)){Ut=pr(We,3,"Could not decode alpha data.");break e}Sr<et.j&&(Tr=et.j-Sr,Sr=et.j,e(!(1&Tr)),et.O+=We.R*Tr,et.N+=We.B*(Tr>>1),et.W+=We.B*(Tr>>1),et.F!=null&&(et.J+=et.width*Tr)),Sr<An&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=Sr-et.j,et.U=et.va-et.v,et.T=An-Sr,Ut=et.put(et))}bt+1!=We.Ic||Kr||(r(We.sa,We.ta-Lt,Ht,ur+16*We.R,Lt),r(We.qa,We.ra-Wt,Rt,Qt+8*We.B,Wt),r(We.Ha,We.Ia-Wt,Yr,an+8*We.B,Wt))}if(!Ut)return pr(rt,6,"Output aborted.")}return 1}(p,v)),v.bc!=null&&v.bc(v),S&=1}return S?(p.cb=0,S):0}function Tn(p,v,S,Q,K){K=p[v+S+32*Q]+(K>>3),p[v+S+32*Q]=-256&K?0>K?0:255:K}function Lo(p,v,S,Q,K,re){Tn(p,v,0,S,Q+K),Tn(p,v,1,S,Q+re),Tn(p,v,2,S,Q-re),Tn(p,v,3,S,Q-K)}function Ln(p){return(20091*p>>16)+p}function Po(p,v,S,Q){var K,re=0,ae=s(16);for(K=0;4>K;++K){var fe=p[v+0]+p[v+8],ve=p[v+0]-p[v+8],Ie=(35468*p[v+4]>>16)-Ln(p[v+12]),Ge=Ln(p[v+4])+(35468*p[v+12]>>16);ae[re+0]=fe+Ge,ae[re+1]=ve+Ie,ae[re+2]=ve-Ie,ae[re+3]=fe-Ge,re+=4,v++}for(K=re=0;4>K;++K)fe=(p=ae[re+0]+4)+ae[re+8],ve=p-ae[re+8],Ie=(35468*ae[re+4]>>16)-Ln(ae[re+12]),Tn(S,Q,0,0,fe+(Ge=Ln(ae[re+4])+(35468*ae[re+12]>>16))),Tn(S,Q,1,0,ve+Ie),Tn(S,Q,2,0,ve-Ie),Tn(S,Q,3,0,fe-Ge),re++,Q+=32}function ri(p,v,S,Q){var K=p[v+0]+4,re=35468*p[v+4]>>16,ae=Ln(p[v+4]),fe=35468*p[v+1]>>16;Lo(S,Q,0,K+ae,p=Ln(p[v+1]),fe),Lo(S,Q,1,K+re,p,fe),Lo(S,Q,2,K-re,p,fe),Lo(S,Q,3,K-ae,p,fe)}function ta(p,v,S,Q,K){Po(p,v,S,Q),K&&Po(p,v+16,S,Q+4)}function Ds(p,v,S,Q){sa(p,v+0,S,Q,1),sa(p,v+32,S,Q+128,1)}function or(p,v,S,Q){var K;for(p=p[v+0]+4,K=0;4>K;++K)for(v=0;4>v;++v)Tn(S,Q,v,K,p)}function Vr(p,v,S,Q){p[v+0]&&Wo(p,v+0,S,Q),p[v+16]&&Wo(p,v+16,S,Q+4),p[v+32]&&Wo(p,v+32,S,Q+128),p[v+48]&&Wo(p,v+48,S,Q+128+4)}function bn(p,v,S,Q){var K,re=s(16);for(K=0;4>K;++K){var ae=p[v+0+K]+p[v+12+K],fe=p[v+4+K]+p[v+8+K],ve=p[v+4+K]-p[v+8+K],Ie=p[v+0+K]-p[v+12+K];re[0+K]=ae+fe,re[8+K]=ae-fe,re[4+K]=Ie+ve,re[12+K]=Ie-ve}for(K=0;4>K;++K)ae=(p=re[0+4*K]+3)+re[3+4*K],fe=re[1+4*K]+re[2+4*K],ve=re[1+4*K]-re[2+4*K],Ie=p-re[3+4*K],S[Q+0]=ae+fe>>3,S[Q+16]=Ie+ve>>3,S[Q+32]=ae-fe>>3,S[Q+48]=Ie-ve>>3,Q+=64}function lo(p,v,S){var Q,K=v-32,re=Cs,ae=255-p[K-1];for(Q=0;Q<S;++Q){var fe,ve=re,Ie=ae+p[v-1];for(fe=0;fe<S;++fe)p[v+fe]=ve[Ie+p[K+fe]];v+=32}}function no(p,v){lo(p,v,4)}function Vo(p,v){lo(p,v,8)}function Gt(p,v){lo(p,v,16)}function kr(p,v){var S;for(S=0;16>S;++S)r(p,v+32*S,p,v-32,16)}function zn(p,v){var S;for(S=16;0<S;--S)o(p,v,p[v-1],16),v+=32}function zo(p,v,S){var Q;for(Q=0;16>Q;++Q)o(v,S+32*Q,p,16)}function Ns(p,v){var S,Q=16;for(S=0;16>S;++S)Q+=p[v-1+32*S]+p[v+S-32];zo(Q>>5,p,v)}function Pn(p,v){var S,Q=8;for(S=0;16>S;++S)Q+=p[v-1+32*S];zo(Q>>4,p,v)}function ni(p,v){var S,Q=8;for(S=0;16>S;++S)Q+=p[v+S-32];zo(Q>>4,p,v)}function La(p,v){zo(128,p,v)}function br(p,v,S){return p+2*v+S+2>>2}function Ir(p,v){var S,Q=v-32;for(Q=new Uint8Array([br(p[Q-1],p[Q+0],p[Q+1]),br(p[Q+0],p[Q+1],p[Q+2]),br(p[Q+1],p[Q+2],p[Q+3]),br(p[Q+2],p[Q+3],p[Q+4])]),S=0;4>S;++S)r(p,v+32*S,Q,0,Q.length)}function Xr(p,v){var S=p[v-1],Q=p[v-1+32],K=p[v-1+64],re=p[v-1+96];j(p,v+0,16843009*br(p[v-1-32],S,Q)),j(p,v+32,16843009*br(S,Q,K)),j(p,v+64,16843009*br(Q,K,re)),j(p,v+96,16843009*br(K,re,re))}function un(p,v){var S,Q=4;for(S=0;4>S;++S)Q+=p[v+S-32]+p[v-1+32*S];for(Q>>=3,S=0;4>S;++S)o(p,v+32*S,Q,4)}function xs(p,v){var S=p[v-1+0],Q=p[v-1+32],K=p[v-1+64],re=p[v-1-32],ae=p[v+0-32],fe=p[v+1-32],ve=p[v+2-32],Ie=p[v+3-32];p[v+0+96]=br(Q,K,p[v-1+96]),p[v+1+96]=p[v+0+64]=br(S,Q,K),p[v+2+96]=p[v+1+64]=p[v+0+32]=br(re,S,Q),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=br(ae,re,S),p[v+3+64]=p[v+2+32]=p[v+1+0]=br(fe,ae,re),p[v+3+32]=p[v+2+0]=br(ve,fe,ae),p[v+3+0]=br(Ie,ve,fe)}function oi(p,v){var S=p[v+1-32],Q=p[v+2-32],K=p[v+3-32],re=p[v+4-32],ae=p[v+5-32],fe=p[v+6-32],ve=p[v+7-32];p[v+0+0]=br(p[v+0-32],S,Q),p[v+1+0]=p[v+0+32]=br(S,Q,K),p[v+2+0]=p[v+1+32]=p[v+0+64]=br(Q,K,re),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=br(K,re,ae),p[v+3+32]=p[v+2+64]=p[v+1+96]=br(re,ae,fe),p[v+3+64]=p[v+2+96]=br(ae,fe,ve),p[v+3+96]=br(fe,ve,ve)}function Ms(p,v){var S=p[v-1+0],Q=p[v-1+32],K=p[v-1+64],re=p[v-1-32],ae=p[v+0-32],fe=p[v+1-32],ve=p[v+2-32],Ie=p[v+3-32];p[v+0+0]=p[v+1+64]=re+ae+1>>1,p[v+1+0]=p[v+2+64]=ae+fe+1>>1,p[v+2+0]=p[v+3+64]=fe+ve+1>>1,p[v+3+0]=ve+Ie+1>>1,p[v+0+96]=br(K,Q,S),p[v+0+64]=br(Q,S,re),p[v+0+32]=p[v+1+96]=br(S,re,ae),p[v+1+32]=p[v+2+96]=br(re,ae,fe),p[v+2+32]=p[v+3+96]=br(ae,fe,ve),p[v+3+32]=br(fe,ve,Ie)}function Fi(p,v){var S=p[v+0-32],Q=p[v+1-32],K=p[v+2-32],re=p[v+3-32],ae=p[v+4-32],fe=p[v+5-32],ve=p[v+6-32],Ie=p[v+7-32];p[v+0+0]=S+Q+1>>1,p[v+1+0]=p[v+0+64]=Q+K+1>>1,p[v+2+0]=p[v+1+64]=K+re+1>>1,p[v+3+0]=p[v+2+64]=re+ae+1>>1,p[v+0+32]=br(S,Q,K),p[v+1+32]=p[v+0+96]=br(Q,K,re),p[v+2+32]=p[v+1+96]=br(K,re,ae),p[v+3+32]=p[v+2+96]=br(re,ae,fe),p[v+3+64]=br(ae,fe,ve),p[v+3+96]=br(fe,ve,Ie)}function oc(p,v){var S=p[v-1+0],Q=p[v-1+32],K=p[v-1+64],re=p[v-1+96];p[v+0+0]=S+Q+1>>1,p[v+2+0]=p[v+0+32]=Q+K+1>>1,p[v+2+32]=p[v+0+64]=K+re+1>>1,p[v+1+0]=br(S,Q,K),p[v+3+0]=p[v+1+32]=br(Q,K,re),p[v+3+32]=p[v+1+64]=br(K,re,re),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=re}function sc(p,v){var S=p[v-1+0],Q=p[v-1+32],K=p[v-1+64],re=p[v-1+96],ae=p[v-1-32],fe=p[v+0-32],ve=p[v+1-32],Ie=p[v+2-32];p[v+0+0]=p[v+2+32]=S+ae+1>>1,p[v+0+32]=p[v+2+64]=Q+S+1>>1,p[v+0+64]=p[v+2+96]=K+Q+1>>1,p[v+0+96]=re+K+1>>1,p[v+3+0]=br(fe,ve,Ie),p[v+2+0]=br(ae,fe,ve),p[v+1+0]=p[v+3+32]=br(S,ae,fe),p[v+1+32]=p[v+3+64]=br(Q,S,ae),p[v+1+64]=p[v+3+96]=br(K,Q,S),p[v+1+96]=br(re,K,Q)}function kg(p,v){var S;for(S=0;8>S;++S)r(p,v+32*S,p,v-32,8)}function ic(p,v){var S;for(S=0;8>S;++S)o(p,v,p[v-1],8),v+=32}function FA(p,v,S){var Q;for(Q=0;8>Q;++Q)o(v,S+32*Q,p,8)}function Pa(p,v){var S,Q=8;for(S=0;8>S;++S)Q+=p[v+S-32]+p[v-1+32*S];FA(Q>>4,p,v)}function Og(p,v){var S,Q=4;for(S=0;8>S;++S)Q+=p[v+S-32];FA(Q>>3,p,v)}function IA(p,v){var S,Q=4;for(S=0;8>S;++S)Q+=p[v-1+32*S];FA(Q>>3,p,v)}function ac(p,v){FA(128,p,v)}function Bl(p,v,S){var Q=p[v-S],K=p[v+0],re=3*(K-Q)+Rg[1020+p[v-2*S]-p[v+S]],ae=Ah[112+(re+4>>3)];p[v-S]=Cs[255+Q+Ah[112+(re+3>>3)]],p[v+0]=Cs[255+K-ae]}function Xu(p,v,S,Q){var K=p[v+0],re=p[v+S];return Ks[255+p[v-2*S]-p[v-S]]>Q||Ks[255+re-K]>Q}function Yu(p,v,S,Q){return 4*Ks[255+p[v-S]-p[v+0]]+Ks[255+p[v-2*S]-p[v+S]]<=Q}function Ju(p,v,S,Q,K){var re=p[v-3*S],ae=p[v-2*S],fe=p[v-S],ve=p[v+0],Ie=p[v+S],Ge=p[v+2*S],ct=p[v+3*S];return 4*Ks[255+fe-ve]+Ks[255+ae-Ie]>Q?0:Ks[255+p[v-4*S]-re]<=K&&Ks[255+re-ae]<=K&&Ks[255+ae-fe]<=K&&Ks[255+ct-Ge]<=K&&Ks[255+Ge-Ie]<=K&&Ks[255+Ie-ve]<=K}function Zu(p,v,S,Q){var K=2*Q+1;for(Q=0;16>Q;++Q)Yu(p,v+Q,S,K)&&Bl(p,v+Q,S)}function Ii(p,v,S,Q){var K=2*Q+1;for(Q=0;16>Q;++Q)Yu(p,v+Q*S,1,K)&&Bl(p,v+Q*S,1)}function ra(p,v,S,Q){var K;for(K=3;0<K;--K)Zu(p,v+=4*S,S,Q)}function Dg(p,v,S,Q){var K;for(K=3;0<K;--K)Ii(p,v+=4,S,Q)}function ka(p,v,S,Q,K,re,ae,fe){for(re=2*re+1;0<K--;){if(Ju(p,v,S,re,ae))if(Xu(p,v,S,fe))Bl(p,v,S);else{var ve=p,Ie=v,Ge=S,ct=ve[Ie-2*Ge],ut=ve[Ie-Ge],rt=ve[Ie+0],Tt=ve[Ie+Ge],bt=ve[Ie+2*Ge],We=27*(Ut=Rg[1020+3*(rt-ut)+Rg[1020+ct-Tt]])+63>>7,et=18*Ut+63>>7,Ut=9*Ut+63>>7;ve[Ie-3*Ge]=Cs[255+ve[Ie-3*Ge]+Ut],ve[Ie-2*Ge]=Cs[255+ct+et],ve[Ie-Ge]=Cs[255+ut+We],ve[Ie+0]=Cs[255+rt-We],ve[Ie+Ge]=Cs[255+Tt-et],ve[Ie+2*Ge]=Cs[255+bt-Ut]}v+=Q}}function si(p,v,S,Q,K,re,ae,fe){for(re=2*re+1;0<K--;){if(Ju(p,v,S,re,ae))if(Xu(p,v,S,fe))Bl(p,v,S);else{var ve=p,Ie=v,Ge=S,ct=ve[Ie-Ge],ut=ve[Ie+0],rt=ve[Ie+Ge],Tt=Ah[112+((bt=3*(ut-ct))+4>>3)],bt=Ah[112+(bt+3>>3)],We=Tt+1>>1;ve[Ie-2*Ge]=Cs[255+ve[Ie-2*Ge]+We],ve[Ie-Ge]=Cs[255+ct+bt],ve[Ie+0]=Cs[255+ut-Tt],ve[Ie+Ge]=Cs[255+rt-We]}v+=Q}}function Ac(p,v,S,Q,K,re){ka(p,v,S,1,16,Q,K,re)}function UA(p,v,S,Q,K,re){ka(p,v,1,S,16,Q,K,re)}function Ng(p,v,S,Q,K,re){var ae;for(ae=3;0<ae;--ae)si(p,v+=4*S,S,1,16,Q,K,re)}function xl(p,v,S,Q,K,re){var ae;for(ae=3;0<ae;--ae)si(p,v+=4,1,S,16,Q,K,re)}function Mg(p,v,S,Q,K,re,ae,fe){ka(p,v,K,1,8,re,ae,fe),ka(S,Q,K,1,8,re,ae,fe)}function lc(p,v,S,Q,K,re,ae,fe){ka(p,v,1,K,8,re,ae,fe),ka(S,Q,1,K,8,re,ae,fe)}function dc(p,v,S,Q,K,re,ae,fe){si(p,v+4*K,K,1,8,re,ae,fe),si(S,Q+4*K,K,1,8,re,ae,fe)}function eh(p,v,S,Q,K,re,ae,fe){si(p,v+4,1,K,8,re,ae,fe),si(S,Q+4,1,K,8,re,ae,fe)}function zl(){this.ba=new Re,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new At,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function cc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function uc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function th(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new te,this.yc=new O}function Hg(){this.xb=this.a=0,this.l=new vn,this.ca=new Re,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new th,this.ab=0,this.gc=i(4,uc),this.Oc=0}function Cl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function QA(p,v,S,Q,K,re,ae){for(p=p==null?0:p[v+0],v=0;v<ae;++v)K[re+v]=p+S[Q+v]&255,p=K[re+v]}function hc(p,v,S,Q,K,re,ae){var fe;if(p==null)QA(null,null,S,Q,K,re,ae);else for(fe=0;fe<ae;++fe)K[re+fe]=p[v+fe]+S[Q+fe]&255}function Oa(p,v,S,Q,K,re,ae){if(p==null)QA(null,null,S,Q,K,re,ae);else{var fe,ve=p[v+0],Ie=ve,Ge=ve;for(fe=0;fe<ae;++fe)Ie=Ge+(ve=p[v+fe])-Ie,Ge=S[Q+fe]+(-256&Ie?0>Ie?0:255:Ie)&255,Ie=ve,K[re+fe]=Ge}}function fc(p,v,S,Q){var K=v.width,re=v.o;if(e(p!=null&&v!=null),0>S||0>=Q||S+Q>re)return null;if(!p.Cc){if(p.ga==null){var ae;if(p.ga=new Cl,(ae=p.ga==null)||(ae=v.width*v.o,e(p.Gb.length==0),p.Gb=s(ae),p.Uc=0,p.Gb==null?ae=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,ae=1),ae=!ae),!ae){ae=p.ga;var fe=p.Fa,ve=p.P,Ie=p.qc,Ge=p.mb,ct=p.nb,ut=ve+1,rt=Ie-1,Tt=ae.l;if(e(fe!=null&&Ge!=null&&v!=null),Ra[0]=null,Ra[1]=QA,Ra[2]=hc,Ra[3]=Oa,ae.ca=Ge,ae.tb=ct,ae.c=v.width,ae.i=v.height,e(0<ae.c&&0<ae.i),1>=Ie)v=0;else if(ae.$a=fe[ve+0]>>0&3,ae.Z=fe[ve+0]>>2&3,ae.Lc=fe[ve+0]>>4&3,ve=fe[ve+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||ve)v=0;else if(Tt.put=St,Tt.ac=mt,Tt.bc=st,Tt.ma=ae,Tt.width=v.width,Tt.height=v.height,Tt.Da=v.Da,Tt.v=v.v,Tt.va=v.va,Tt.j=v.j,Tt.o=v.o,ae.$a)e:{e(ae.$a==1),v=Et();t:for(;;){if(v==null){v=0;break e}if(e(ae!=null),ae.mc=v,v.c=ae.c,v.i=ae.i,v.l=ae.l,v.l.ma=ae,v.l.width=ae.c,v.l.height=ae.i,v.a=0,Z(v.m,fe,ut,rt),!Nt(ae.c,ae.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&qt(v.s)?(ae.ic=1,fe=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(fe),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(ae.ic=0,v=Zt(v,ae.c)),!v))break t;v=1;break e}ae.mc=null,v=0}else v=rt>=ae.c*ae.i;ae=!v}if(ae)return null;p.ga.Lc!=1?p.Ga=0:Q=re-S}e(p.ga!=null),e(S+Q<=re);e:{if(v=(fe=p.ga).c,re=fe.l.o,fe.$a==0){if(ut=p.rc,rt=p.Vc,Tt=p.Fa,ve=p.P+1+S*v,Ie=p.mb,Ge=p.nb+S*v,e(ve<=p.P+p.qc),fe.Z!=0)for(e(Ra[fe.Z]!=null),ae=0;ae<Q;++ae)Ra[fe.Z](ut,rt,Tt,ve,Ie,Ge,v),ut=Ie,rt=Ge,Ge+=v,ve+=v;else for(ae=0;ae<Q;++ae)r(Ie,Ge,Tt,ve,v),ut=Ie,rt=Ge,Ge+=v,ve+=v;p.rc=ut,p.Vc=rt}else{if(e(fe.mc!=null),v=S+Q,e((ae=fe.mc)!=null),e(v<=ae.i),ae.C>=v)v=1;else if(fe.ic||it(),fe.ic){fe=ae.V,ut=ae.Ba,rt=ae.c;var bt=ae.i,We=(Tt=1,ve=ae.$/rt,Ie=ae.$%rt,Ge=ae.m,ct=ae.s,ae.$),et=rt*bt,Ut=rt*v,Lt=ct.wc,Qt=We<Ut?wt(ct,Ie,ve):null;e(We<=et),e(v<=bt),e(qt(ct));t:for(;;){for(;!Ge.h&&We<Ut;){if(Ie&Lt||(Qt=wt(ct,Ie,ve)),e(Qt!=null),P(Ge),256>(bt=Ot(Qt.G[0],Qt.H[0],Ge)))fe[ut+We]=bt,++We,++Ie>=rt&&(Ie=0,++ve<=v&&!(ve%16)&&Mt(ae,ve));else{if(!(280>bt)){Tt=0;break t}bt=Ft(bt-256,Ge);var Wt,Ht=Ot(Qt.G[4],Qt.H[4],Ge);if(P(Ge),!(We>=(Ht=xt(rt,Ht=Ft(Ht,Ge)))&&et-We>=bt)){Tt=0;break t}for(Wt=0;Wt<bt;++Wt)fe[ut+We+Wt]=fe[ut+We+Wt-Ht];for(We+=bt,Ie+=bt;Ie>=rt;)Ie-=rt,++ve<=v&&!(ve%16)&&Mt(ae,ve);We<Ut&&Ie&Lt&&(Qt=wt(ct,Ie,ve))}e(Ge.h==E(Ge))}Mt(ae,ve>v?v:ve);break t}!Tt||Ge.h&&We<et?(Tt=0,ae.a=Ge.h?5:3):ae.$=We,v=Tt}else v=jt(ae,ae.V,ae.Ba,ae.c,ae.i,v,nr);if(!v){Q=0;break e}}S+Q>=re&&(p.Cc=1),Q=1}if(!Q)return null;if(p.Cc&&((Q=p.ga)!=null&&(Q.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+S*K}function B(p,v,S,Q,K,re){for(;0<K--;){var ae,fe=p,ve=v+(S?1:0),Ie=p,Ge=v+(S?0:3);for(ae=0;ae<Q;++ae){var ct=Ie[Ge+4*ae];ct!=255&&(ct*=32897,fe[ve+4*ae+0]=fe[ve+4*ae+0]*ct>>23,fe[ve+4*ae+1]=fe[ve+4*ae+1]*ct>>23,fe[ve+4*ae+2]=fe[ve+4*ae+2]*ct>>23)}v+=re}}function $(p,v,S,Q,K){for(;0<Q--;){var re;for(re=0;re<S;++re){var ae=p[v+2*re+0],fe=15&(Ie=p[v+2*re+1]),ve=4369*fe,Ie=(240&Ie|Ie>>4)*ve>>16;p[v+2*re+0]=(240&ae|ae>>4)*ve>>16&240|(15&ae|ae<<4)*ve>>16>>4&15,p[v+2*re+1]=240&Ie|fe}v+=K}}function ke(p,v,S,Q,K,re,ae,fe){var ve,Ie,Ge=255;for(Ie=0;Ie<K;++Ie){for(ve=0;ve<Q;++ve){var ct=p[v+ve];re[ae+4*ve]=ct,Ge&=ct}v+=S,ae+=fe}return Ge!=255}function $e(p,v,S,Q,K){var re;for(re=0;re<K;++re)S[Q+re]=p[v+re]>>8}function it(){qs=B,_n=$,Bn=ke,$n=$e}function Bt(p,v,S){H[p]=function(Q,K,re,ae,fe,ve,Ie,Ge,ct,ut,rt,Tt,bt,We,et,Ut,Lt){var Qt,Wt=Lt-1>>1,Ht=fe[ve+0]|Ie[Ge+0]<<16,ur=ct[ut+0]|rt[Tt+0]<<16;e(Q!=null);var Rt=3*Ht+ur+131074>>2;for(v(Q[K+0],255&Rt,Rt>>16,bt,We),re!=null&&(Rt=3*ur+Ht+131074>>2,v(re[ae+0],255&Rt,Rt>>16,et,Ut)),Qt=1;Qt<=Wt;++Qt){var Yr=fe[ve+Qt]|Ie[Ge+Qt]<<16,an=ct[ut+Qt]|rt[Tt+Qt]<<16,Kr=Ht+Yr+ur+an+524296,Tr=Kr+2*(Yr+ur)>>3;Rt=Tr+Ht>>1,Ht=(Kr=Kr+2*(Ht+an)>>3)+Yr>>1,v(Q[K+2*Qt-1],255&Rt,Rt>>16,bt,We+(2*Qt-1)*S),v(Q[K+2*Qt-0],255&Ht,Ht>>16,bt,We+(2*Qt-0)*S),re!=null&&(Rt=Kr+ur>>1,Ht=Tr+an>>1,v(re[ae+2*Qt-1],255&Rt,Rt>>16,et,Ut+(2*Qt-1)*S),v(re[ae+2*Qt+0],255&Ht,Ht>>16,et,Ut+(2*Qt+0)*S)),Ht=Yr,ur=an}1&Lt||(Rt=3*Ht+ur+131074>>2,v(Q[K+Lt-1],255&Rt,Rt>>16,bt,We+(Lt-1)*S),re!=null&&(Rt=3*ur+Ht+131074>>2,v(re[ae+Lt-1],255&Rt,Rt>>16,et,Ut+(Lt-1)*S)))}}function Pt(){$s[lh]=sC,$s[dh]=u2,$s[a2]=iC,$s[ch]=h2,$s[uh]=f2,$s[qg]=p2,$s[A2]=aC,$s[Kg]=u2,$s[$g]=h2,$s[hh]=f2,$s[Vg]=p2}function Vt(p){return p&-16384?0>p?0:255:p>>AC}function ar(p,v){return Vt((19077*p>>8)+(26149*v>>8)-14234)}function zr(p,v,S){return Vt((19077*p>>8)-(6419*v>>8)-(13320*S>>8)+8708)}function Br(p,v){return Vt((19077*p>>8)+(33050*v>>8)-17685)}function jr(p,v,S,Q,K){Q[K+0]=ar(p,S),Q[K+1]=zr(p,v,S),Q[K+2]=Br(p,v)}function kn(p,v,S,Q,K){Q[K+0]=Br(p,v),Q[K+1]=zr(p,v,S),Q[K+2]=ar(p,S)}function Mn(p,v,S,Q,K){var re=zr(p,v,S);v=re<<3&224|Br(p,v)>>3,Q[K+0]=248&ar(p,S)|re>>5,Q[K+1]=v}function oo(p,v,S,Q,K){var re=240&Br(p,v)|15;Q[K+0]=240&ar(p,S)|zr(p,v,S)>>4,Q[K+1]=re}function ko(p,v,S,Q,K){Q[K+0]=255,jr(p,v,S,Q,K+1)}function go(p,v,S,Q,K){kn(p,v,S,Q,K),Q[K+3]=255}function ii(p,v,S,Q,K){jr(p,v,S,Q,K),Q[K+3]=255}function zs(p,v){return 0>p?0:p>v?v:p}function Ui(p,v,S){H[p]=function(Q,K,re,ae,fe,ve,Ie,Ge,ct){for(var ut=Ge+(-2&ct)*S;Ge!=ut;)v(Q[K+0],re[ae+0],fe[ve+0],Ie,Ge),v(Q[K+1],re[ae+0],fe[ve+0],Ie,Ge+S),K+=2,++ae,++ve,Ge+=2*S;1&ct&&v(Q[K+0],re[ae+0],fe[ve+0],Ie,Ge)}}function rh(p,v,S){return S==0?p==0?v==0?6:5:v==0?4:0:S}function pc(p,v,S,Q,K){switch(p>>>30){case 3:sa(v,S,Q,K,0);break;case 2:Kn(v,S,Q,K);break;case 1:Wo(v,S,Q,K)}}function gc(p,v){var S,Q,K=v.M,re=v.Nb,ae=p.oc,fe=p.pc+40,ve=p.oc,Ie=p.pc+584,Ge=p.oc,ct=p.pc+600;for(S=0;16>S;++S)ae[fe+32*S-1]=129;for(S=0;8>S;++S)ve[Ie+32*S-1]=129,Ge[ct+32*S-1]=129;for(0<K?ae[fe-1-32]=ve[Ie-1-32]=Ge[ct-1-32]=129:(o(ae,fe-32-1,127,21),o(ve,Ie-32-1,127,9),o(Ge,ct-32-1,127,9)),Q=0;Q<p.za;++Q){var ut=v.ya[v.aa+Q];if(0<Q){for(S=-1;16>S;++S)r(ae,fe+32*S-4,ae,fe+32*S+12,4);for(S=-1;8>S;++S)r(ve,Ie+32*S-4,ve,Ie+32*S+4,4),r(Ge,ct+32*S-4,Ge,ct+32*S+4,4)}var rt=p.Gd,Tt=p.Hd+Q,bt=ut.ad,We=ut.Hc;if(0<K&&(r(ae,fe-32,rt[Tt].y,0,16),r(ve,Ie-32,rt[Tt].f,0,8),r(Ge,ct-32,rt[Tt].ea,0,8)),ut.Za){var et=ae,Ut=fe-32+16;for(0<K&&(Q>=p.za-1?o(et,Ut,rt[Tt].y[15],4):r(et,Ut,rt[Tt+1].y,0,4)),S=0;4>S;S++)et[Ut+128+S]=et[Ut+256+S]=et[Ut+384+S]=et[Ut+0+S];for(S=0;16>S;++S,We<<=2)et=ae,Ut=fe+v2[S],ai[ut.Ob[S]](et,Ut),pc(We,bt,16*+S,et,Ut)}else if(et=rh(Q,K,ut.Ob[0]),ja[et](ae,fe),We!=0)for(S=0;16>S;++S,We<<=2)pc(We,bt,16*+S,ae,fe+v2[S]);for(S=ut.Gc,et=rh(Q,K,ut.Dd),aa[et](ve,Ie),aa[et](Ge,ct),We=bt,et=ve,Ut=Ie,255&(ut=S>>0)&&(170&ut?bc(We,256,et,Ut):js(We,256,et,Ut)),ut=Ge,We=ct,255&(S>>=8)&&(170&S?bc(bt,320,ut,We):js(bt,320,ut,We)),K<p.Ub-1&&(r(rt[Tt].y,0,ae,fe+480,16),r(rt[Tt].f,0,ve,Ie+224,8),r(rt[Tt].ea,0,Ge,ct+224,8)),S=8*re*p.B,rt=p.sa,Tt=p.ta+16*Q+16*re*p.R,bt=p.qa,ut=p.ra+8*Q+S,We=p.Ha,et=p.Ia+8*Q+S,S=0;16>S;++S)r(rt,Tt+S*p.R,ae,fe+32*S,16);for(S=0;8>S;++S)r(bt,ut+S*p.B,ve,Ie+32*S,8),r(We,et+S*p.B,Ge,ct+32*S,8)}}function Sl(p,v,S,Q,K,re,ae,fe,ve){var Ie=[0],Ge=[0],ct=0,ut=ve!=null?ve.kd:0,rt=ve??new cc;if(p==null||12>S)return 7;rt.data=p,rt.w=v,rt.ha=S,v=[v],S=[S],rt.gb=[rt.gb];e:{var Tt=v,bt=S,We=rt.gb;if(e(p!=null),e(bt!=null),e(We!=null),We[0]=0,12<=bt[0]&&!t(p,Tt[0],"RIFF")){if(t(p,Tt[0]+8,"WEBP")){We=3;break e}var et=_e(p,Tt[0]+4);if(12>et||4294967286<et){We=3;break e}if(ut&&et>bt[0]-8){We=7;break e}We[0]=et,Tt[0]+=12,bt[0]-=12}We=0}if(We!=0)return We;for(et=0<rt.gb[0],S=S[0];;){e:{var Ut=p;bt=v,We=S;var Lt=Ie,Qt=Ge,Wt=Tt=[0];if((Rt=ct=[ct])[0]=0,8>We[0])We=7;else{if(!t(Ut,bt[0],"VP8X")){if(_e(Ut,bt[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Ht=_e(Ut,bt[0]+8),ur=1+Ee(Ut,bt[0]+12);if(2147483648<=ur*(Ut=1+Ee(Ut,bt[0]+15))){We=3;break e}Wt!=null&&(Wt[0]=Ht),Lt!=null&&(Lt[0]=ur),Qt!=null&&(Qt[0]=Ut),bt[0]+=18,We[0]-=18,Rt[0]=1}We=0}}if(ct=ct[0],Tt=Tt[0],We!=0)return We;if(bt=!!(2&Tt),!et&&ct)return 3;if(re!=null&&(re[0]=!!(16&Tt)),ae!=null&&(ae[0]=bt),fe!=null&&(fe[0]=0),ae=Ie[0],Tt=Ge[0],ct&&bt&&ve==null){We=0;break}if(4>S){We=7;break}if(et&&ct||!et&&!ct&&!t(p,v[0],"ALPH")){S=[S],rt.na=[rt.na],rt.P=[rt.P],rt.Sa=[rt.Sa];e:{Ht=p,We=v,et=S;var Rt=rt.gb;Lt=rt.na,Qt=rt.P,Wt=rt.Sa,ur=22,e(Ht!=null),e(et!=null),Ut=We[0];var Yr=et[0];for(e(Lt!=null),e(Wt!=null),Lt[0]=null,Qt[0]=null,Wt[0]=0;;){if(We[0]=Ut,et[0]=Yr,8>Yr){We=7;break e}var an=_e(Ht,Ut+4);if(4294967286<an){We=3;break e}var Kr=8+an+1&-2;if(ur+=Kr,0<Rt&&ur>Rt){We=3;break e}if(!t(Ht,Ut,"VP8 ")||!t(Ht,Ut,"VP8L")){We=0;break e}if(Yr[0]<Kr){We=7;break e}t(Ht,Ut,"ALPH")||(Lt[0]=Ht,Qt[0]=Ut+8,Wt[0]=an),Ut+=Kr,Yr-=Kr}}if(S=S[0],rt.na=rt.na[0],rt.P=rt.P[0],rt.Sa=rt.Sa[0],We!=0)break}S=[S],rt.Ja=[rt.Ja],rt.xa=[rt.xa];e:if(Rt=p,We=v,et=S,Lt=rt.gb[0],Qt=rt.Ja,Wt=rt.xa,Ht=We[0],Ut=!t(Rt,Ht,"VP8 "),ur=!t(Rt,Ht,"VP8L"),e(Rt!=null),e(et!=null),e(Qt!=null),e(Wt!=null),8>et[0])We=7;else{if(Ut||ur){if(Rt=_e(Rt,Ht+4),12<=Lt&&Rt>Lt-12){We=3;break e}if(ut&&Rt>et[0]-8){We=7;break e}Qt[0]=Rt,We[0]+=8,et[0]-=8,Wt[0]=ur}else Wt[0]=5<=et[0]&&Rt[Ht+0]==47&&!(Rt[Ht+4]>>5),Qt[0]=et[0];We=0}if(S=S[0],rt.Ja=rt.Ja[0],rt.xa=rt.xa[0],v=v[0],We!=0)break;if(4294967286<rt.Ja)return 3;if(fe==null||bt||(fe[0]=rt.xa?2:1),ae=[ae],Tt=[Tt],rt.xa){if(5>S){We=7;break}fe=ae,ut=Tt,bt=re,p==null||5>S?p=0:5<=S&&p[v+0]==47&&!(p[v+4]>>5)?(et=[0],Rt=[0],Lt=[0],Z(Qt=new x,p,v,S),tt(Qt,et,Rt,Lt)?(fe!=null&&(fe[0]=et[0]),ut!=null&&(ut[0]=Rt[0]),bt!=null&&(bt[0]=Lt[0]),p=1):p=0):p=0}else{if(10>S){We=7;break}fe=Tt,p==null||10>S||!In(p,v+3,S-3)?p=0:(ut=p[v+0]|p[v+1]<<8|p[v+2]<<16,bt=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=rt.Ja||!bt||!p?p=0:(ae&&(ae[0]=bt),fe&&(fe[0]=p),p=1))}if(!p||(ae=ae[0],Tt=Tt[0],ct&&(Ie[0]!=ae||Ge[0]!=Tt)))return 3;ve!=null&&(ve[0]=rt,ve.offset=v-ve.w,e(4294967286>v-ve.w),e(ve.offset==ve.ha-S));break}return We==0||We==7&&ct&&ve==null?(re!=null&&(re[0]|=rt.na!=null&&0<rt.na.length),Q!=null&&(Q[0]=ae),K!=null&&(K[0]=Tt),0):We}function vc(p,v,S){var Q=v.width,K=v.height,re=0,ae=0,fe=Q,ve=K;if(v.Da=p!=null&&0<p.Da,v.Da&&(fe=p.cd,ve=p.bd,re=p.v,ae=p.j,11>S||(re&=-2,ae&=-2),0>re||0>ae||0>=fe||0>=ve||re+fe>Q||ae+ve>K))return 0;if(v.v=re,v.j=ae,v.va=re+fe,v.o=ae+ve,v.U=fe,v.T=ve,v.da=p!=null&&0<p.da,v.da){if(!ie(fe,ve,S=[p.ib],re=[p.hb]))return 0;v.ib=S[0],v.hb=re[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*Q/4&&v.hb<3*K/4,v.Kb=0),1}function mc(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function El(p,v,S,Q){if(Q==null||0>=p||0>=v)return 2;if(S!=null){if(S.Da){var K=S.cd,re=S.bd,ae=-2&S.v,fe=-2&S.j;if(0>ae||0>fe||0>=K||0>=re||ae+K>p||fe+re>v)return 2;p=K,v=re}if(S.da){if(!ie(p,v,K=[S.ib],re=[S.hb]))return 2;p=K[0],v=re[0]}}Q.width=p,Q.height=v;e:{var ve=Q.width,Ie=Q.height;if(p=Q.S,0>=ve||0>=Ie||!(p>=lh&&13>p))p=2;else{if(0>=Q.Rd&&Q.sd==null){ae=re=K=v=0;var Ge=(fe=ve*m2[p])*Ie;if(11>p||(re=(Ie+1)/2*(v=(ve+1)/2),p==12&&(ae=(K=ve)*Ie)),(Ie=s(Ge+2*re+ae))==null){p=1;break e}Q.sd=Ie,11>p?((ve=Q.f.RGBA).eb=Ie,ve.fb=0,ve.A=fe,ve.size=Ge):((ve=Q.f.kb).y=Ie,ve.O=0,ve.fa=fe,ve.Fd=Ge,ve.f=Ie,ve.N=0+Ge,ve.Ab=v,ve.Cd=re,ve.ea=Ie,ve.W=0+Ge+re,ve.Db=v,ve.Ed=re,p==12&&(ve.F=Ie,ve.J=0+Ge+2*re),ve.Tc=ae,ve.lb=K)}if(v=1,K=Q.S,re=Q.width,ae=Q.height,K>=lh&&13>K)if(11>K)p=Q.f.RGBA,v&=(fe=Math.abs(p.A))*(ae-1)+re<=p.size,v&=fe>=re*m2[K],v&=p.eb!=null;else{p=Q.f.kb,fe=(re+1)/2,Ge=(ae+1)/2,ve=Math.abs(p.fa),Ie=Math.abs(p.Ab);var ct=Math.abs(p.Db),ut=Math.abs(p.lb),rt=ut*(ae-1)+re;v&=ve*(ae-1)+re<=p.Fd,v&=Ie*(Ge-1)+fe<=p.Cd,v=(v&=ct*(Ge-1)+fe<=p.Ed)&ve>=re&Ie>=fe&ct>=fe,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,K==12&&(v&=ut>=re,v&=rt<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||S!=null&&S.fd&&(p=mc(Q)),p}var Co=64,Fl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Il=24,Ul=32,wc=8,As=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];oe("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(p){return p},H.Predictor2=function(p,v,S){return v[S+0]},H.Predictor3=function(p,v,S){return v[S+1]},H.Predictor4=function(p,v,S){return v[S-1]},H.Predictor5=function(p,v,S){return Ne(Ne(p,v[S+1]),v[S+0])},H.Predictor6=function(p,v,S){return Ne(p,v[S-1])},H.Predictor7=function(p,v,S){return Ne(p,v[S+0])},H.Predictor8=function(p,v,S){return Ne(v[S-1],v[S+0])},H.Predictor9=function(p,v,S){return Ne(v[S+0],v[S+1])},H.Predictor10=function(p,v,S){return Ne(Ne(p,v[S-1]),Ne(v[S+0],v[S+1]))},H.Predictor11=function(p,v,S){var Q=v[S+0];return 0>=ue(Q>>24&255,p>>24&255,(v=v[S-1])>>24&255)+ue(Q>>16&255,p>>16&255,v>>16&255)+ue(Q>>8&255,p>>8&255,v>>8&255)+ue(255&Q,255&p,255&v)?Q:p},H.Predictor12=function(p,v,S){var Q=v[S+0];return(we((p>>24&255)+(Q>>24&255)-((v=v[S-1])>>24&255))<<24|we((p>>16&255)+(Q>>16&255)-(v>>16&255))<<16|we((p>>8&255)+(Q>>8&255)-(v>>8&255))<<8|we((255&p)+(255&Q)-(255&v)))>>>0},H.Predictor13=function(p,v,S){var Q=v[S-1];return(Fe((p=Ne(p,v[S+0]))>>24&255,Q>>24&255)<<24|Fe(p>>16&255,Q>>16&255)<<16|Fe(p>>8&255,Q>>8&255)<<8|Fe(p>>0&255,Q>>0&255))>>>0};var jg=H.PredictorAdd0;H.PredictorAdd1=De,oe("Predictor2","PredictorAdd2"),oe("Predictor3","PredictorAdd3"),oe("Predictor4","PredictorAdd4"),oe("Predictor5","PredictorAdd5"),oe("Predictor6","PredictorAdd6"),oe("Predictor7","PredictorAdd7"),oe("Predictor8","PredictorAdd8"),oe("Predictor9","PredictorAdd9"),oe("Predictor10","PredictorAdd10"),oe("Predictor11","PredictorAdd11"),oe("Predictor12","PredictorAdd12"),oe("Predictor13","PredictorAdd13");var yc=H.PredictorAdd2;ge("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var nh,Hs=H.ColorIndexInverseTransform,Ql=H.MapARGB,oh=H.VP8LColorIndexInverseTransformAlpha,sh=H.MapAlpha,Da=H.VP8LPredictorsAdd=[];Da.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var TA,ls,Go,Na,na,oa,Tl,sa,Kn,bc,Wo,js,Ll,ih,_c,LA,PA,Ma,kA,Pl,OA,Ha,Bc,Rs,qs,_n,Bn,$n,co=s(511),ia=s(2041),xc=s(225),kl=s(767),ah=0,Rg=ia,Ah=xc,Cs=kl,Ks=co,lh=0,dh=1,a2=2,ch=3,uh=4,qg=5,A2=6,Kg=7,$g=8,hh=9,Vg=10,Kz=[2,3,7],$z=[3,3,11],l2=[280,256,256,256,40],Vz=[0,1,1,1,0],Gz=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Wz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xz=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yz=8,Gg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zc=null,Jz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zz=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],d2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],eC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ja=[],ai=[],aa=[],oC=1,c2=2,Ra=[],$s=[];Bt("UpsampleRgbLinePair",jr,3),Bt("UpsampleBgrLinePair",kn,3),Bt("UpsampleRgbaLinePair",ii,4),Bt("UpsampleBgraLinePair",go,4),Bt("UpsampleArgbLinePair",ko,4),Bt("UpsampleRgba4444LinePair",oo,2),Bt("UpsampleRgb565LinePair",Mn,2);var sC=H.UpsampleRgbLinePair,iC=H.UpsampleBgrLinePair,u2=H.UpsampleRgbaLinePair,h2=H.UpsampleBgraLinePair,f2=H.UpsampleArgbLinePair,p2=H.UpsampleRgba4444LinePair,aC=H.UpsampleRgb565LinePair,fh=16,ph=1<<fh-1,Cc=-227,Xg=482,AC=6,g2=0,lC=s(256),dC=s(256),cC=s(256),uC=s(256),hC=s(Xg-Cc),fC=s(Xg-Cc);Ui("YuvToRgbRow",jr,3),Ui("YuvToBgrRow",kn,3),Ui("YuvToRgbaRow",ii,4),Ui("YuvToBgraRow",go,4),Ui("YuvToArgbRow",ko,4),Ui("YuvToRgba4444Row",oo,2),Ui("YuvToRgb565Row",Mn,2);var v2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gh=[0,2,8],pC=[8,7,6,4,4,2,2,2,1,1,1,1],gC=1;this.WebPDecodeRGBA=function(p,v,S,Q,K){var re=dh,ae=new zl,fe=new Re;ae.ba=fe,fe.S=re,fe.width=[fe.width],fe.height=[fe.height];var ve=fe.width,Ie=fe.height,Ge=new Ve;if(Ge==null||p==null)var ct=2;else e(Ge!=null),ct=Sl(p,v,S,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(ct!=0?ve=0:(ve!=null&&(ve[0]=Ge.width[0]),Ie!=null&&(Ie[0]=Ge.height[0]),ve=1),ve){fe.width=fe.width[0],fe.height=fe.height[0],Q!=null&&(Q[0]=fe.width),K!=null&&(K[0]=fe.height);e:{if(Q=new vn,(K=new cc).data=p,K.w=v,K.ha=S,K.kd=1,v=[0],e(K!=null),((p=Sl(K.data,K.w,K.ha,null,null,null,v,null,K))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(ae!=null),Q.data=K.data,Q.w=K.w+K.offset,Q.ha=K.ha-K.offset,Q.put=St,Q.ac=mt,Q.bc=st,Q.ma=ae,K.xa){if((p=Et())==null){ae=1;break e}if(function(ut,rt){var Tt=[0],bt=[0],We=[0];t:for(;;){if(ut==null)return 0;if(rt==null)return ut.a=2,0;if(ut.l=rt,ut.a=0,Z(ut.m,rt.data,rt.w,rt.ha),!tt(ut.m,Tt,bt,We)){ut.a=3;break t}if(ut.xb=c2,rt.width=Tt[0],rt.height=bt[0],!Nt(Tt[0],bt[0],1,ut,null))break t;return 1}return e(ut.a!=0),0}(p,Q)){if(Q=(v=El(Q.width,Q.height,ae.Oa,ae.ba))==0){t:{Q=p;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((S=Q.l)!=null),e((K=S.ma)!=null),Q.xb!=0){if(Q.ca=K.ba,Q.tb=K.tb,e(Q.ca!=null),!vc(K.Oa,S,ch)){Q.a=2;break r}if(!Zt(Q,S.width)||S.da)break r;if((S.da||Te(Q.ca.S))&&it(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&it()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Oe(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!jt(Q,Q.V,Q.Ba,Q.c,Q.i,S.o,Dt))break r;K.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(v=p.a)}else v=p.a}else{if((p=new Hr)==null){ae=1;break e}if(p.Fa=K.na,p.P=K.P,p.qc=K.Sa,To(p,Q)){if((v=El(Q.width,Q.height,ae.Oa,ae.ba))==0){if(p.Aa=0,S=ae.Oa,e((K=p)!=null),S!=null){if(0<(ve=0>(ve=S.Md)?0:100<ve?255:255*ve/100)){for(Ie=Ge=0;4>Ie;++Ie)12>(ct=K.pb[Ie]).lc&&(ct.ia=ve*pC[0>ct.lc?0:ct.lc]>>3),Ge|=ct.ia;Ge&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=S.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}as(p,Q)||(v=p.a)}}else v=p.a}v==0&&ae.Oa!=null&&ae.Oa.fd&&(v=mc(ae.ba))}ae=v}re=ae!=0?null:11>re?fe.f.RGBA.eb:fe.f.kb.y}else re=null;return re};var m2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(H,J){for(var xe="",M=0;M<4;M++)xe+=String.fromCharCode(H[J++]);return xe}function c(H,J){return(H[J+0]<<0|H[J+1]<<8|H[J+2]<<16)>>>0}function u(H,J){return(H[J+0]<<0|H[J+1]<<8|H[J+2]<<16|H[J+3]<<24)>>>0}new A;var h=[0],f=[0],g=[],m=new A,y=n,_=function(H,J){var xe={},M=0,O=!1,X=0,te=0;if(xe.frames=[],!function(F,E,U,P){for(var T=0;T<P;T++)if(F[E+T]!=U.charCodeAt(T))return!0;return!1}(H,J,"RIFF",4)){var le,ne;for(u(H,J+=4),J+=8;J<H.length;){var Be=d(H,J),Z=u(H,J+=4);J+=4;var se=Z+(1&Z);switch(Be){case"VP8 ":case"VP8L":xe.frames[M]===void 0&&(xe.frames[M]={}),(x=xe.frames[M]).src_off=O?te:J-8,x.src_size=X+Z+8,M++,O&&(O=!1,X=0,te=0);break;case"VP8X":(x=xe.header={}).feature_flags=H[J];var ce=J+4;x.canvas_width=1+c(H,ce),ce+=3,x.canvas_height=1+c(H,ce),ce+=3;break;case"ALPH":O=!0,X=se+8,te=J-8;break;case"ANIM":(x=xe.header).bgcolor=u(H,J),ce=J+4,x.loop_count=(le=H)[(ne=ce)+0]<<0|le[ne+1]<<8,ce+=2;break;case"ANMF":var be,x;(x=xe.frames[M]={}).offset_x=2*c(H,J),J+=3,x.offset_y=2*c(H,J),J+=3,x.width=1+c(H,J),J+=3,x.height=1+c(H,J),J+=3,x.duration=c(H,J),J+=3,be=H[J++],x.dispose=1&be,x.blend=be>>1&1}Be!="ANMF"&&(J+=se)}return xe}}(y,0);_.response=y,_.rgbaoutput=!0,_.dataurl=!1;var C=_.header?_.header:null,I=_.frames?_.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],f=[C.canvas_width];for(var N=0;N<I.length&&I[N].blend!=0;N++);}var k=I[0],W=m.WebPDecodeRGBA(y,k.src_off,k.src_size,f,h);k.rgba=W,k.imgwidth=f[0],k.imgheight=h[0];for(var V=0;V<f[0]*h[0]*4;V++)g[V]=W[V];return this.width=f,this.height=h,this.data=g,this}(function(n){var e=function(){return typeof ym=="function"},t=function(h,f,g,m){var y=4,_=i;switch(m){case n.image_compression.FAST:y=1,_=s;break;case n.image_compression.MEDIUM:y=6,_=a;break;case n.image_compression.SLOW:y=9,_=A}h=r(h,f,g,_);var C=ym(h,{level:y});return n.__addimage__.arrayBufferToBinaryString(C)},r=function(h,f,g,m){for(var y,_,C,I=h.length/f,N=new Uint8Array(h.length+I),k=c(),W=0;W<I;W+=1){if(C=W*f,y=h.subarray(C,C+f),m)N.set(m(y,g,_),C+W);else{for(var V,H=k.length,J=[];V<H;V+=1)J[V]=k[V](y,g,_);var xe=u(J.concat());N.set(J[xe],C+W)}_=y}return N},o=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var g,m=[],y=h.length;m[0]=1;for(var _=0;_<y;_+=1)g=h[_-f]||0,m[_+1]=h[_]-g+256&255;return m},i=function(h,f,g){var m,y=[],_=h.length;y[0]=2;for(var C=0;C<_;C+=1)m=g&&g[C]||0,y[C+1]=h[C]-m+256&255;return y},a=function(h,f,g){var m,y,_=[],C=h.length;_[0]=3;for(var I=0;I<C;I+=1)m=h[I-f]||0,y=g&&g[I]||0,_[I+1]=h[I]+256-(m+y>>>1)&255;return _},A=function(h,f,g){var m,y,_,C,I=[],N=h.length;I[0]=4;for(var k=0;k<N;k+=1)m=h[k-f]||0,y=g&&g[k]||0,_=g&&g[k-f]||0,C=d(m,y,_),I[k+1]=h[k]-C+256&255;return I},d=function(h,f,g){if(h===f&&f===g)return h;var m=Math.abs(f-g),y=Math.abs(h-g),_=Math.abs(h+f-g-g);return m<=y&&m<=_?h:y<=_?f:g},c=function(){return[o,s,i,a,A]},u=function(h){var f=h.map(function(g){return g.reduce(function(m,y){return m+Math.abs(y)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(h,f,g,m){var y,_,C,I,N,k,W,V,H,J,xe,M,O,X,te,le=this.decode.FLATE_DECODE,ne="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(C=new iN(h)).imgData,_=C.bits,y=C.colorSpace,N=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){H=(V=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,xe=new Uint8Array(H*C.colors),J=new Uint8Array(H);var Be,Z=C.pixelBitlength-C.bits;for(X=0,te=0;X<H;X++){for(O=V[X],Be=0;Be<Z;)xe[te++]=O>>>Be&255,Be+=C.bits;J[X]=O>>>Be&255}}if(C.bits===16){H=(V=new Uint32Array(C.decodePixels().buffer)).length,xe=new Uint8Array(H*(32/C.pixelBitlength)*C.colors),J=new Uint8Array(H*(32/C.pixelBitlength)),M=C.colors>1,X=0,te=0;for(var se=0;X<H;)O=V[X++],xe[te++]=O>>>0&255,M&&(xe[te++]=O>>>16&255,O=V[X++],xe[te++]=O>>>0&255),J[se++]=O>>>16&255;_=8}m!==n.image_compression.NONE&&e()?(h=t(xe,C.width*C.colors,C.colors,m),W=t(J,C.width,1,m)):(h=xe,W=J,le=void 0)}if(C.colorType===3&&(y=this.color_spaces.INDEXED,k=C.palette,C.transparency.indexed)){var ce=C.transparency.indexed,be=0;for(X=0,H=ce.length;X<H;++X)be+=ce[X];if((be/=255)===H-1&&ce.indexOf(0)!==-1)I=[ce.indexOf(0)];else if(be!==H){for(V=C.decodePixels(),J=new Uint8Array(V.length),X=0,H=V.length;X<H;X++)J[X]=ce[V[X]];W=t(J,C.width,1)}}var x=function(F){var E;switch(F){case n.image_compression.FAST:E=11;break;case n.image_compression.MEDIUM:E=13;break;case n.image_compression.SLOW:E=14;break;default:E=12}return E}(m);return le===this.decode.FLATE_DECODE&&(ne="/Predictor "+x+" "),ne+="/Colors "+N+" /BitsPerComponent "+_+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:g,data:h,index:f,filter:le,decodeParameters:ne,transparency:I,palette:k,sMask:W,predictor:x,width:C.width,height:C.height,bitsPerComponent:_,colorSpace:y}}}})(gr.API),function(n){n.processGIF89A=function(e,t,r,o){var s=new aN(e),i=s.width,a=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var d={data:A,width:i,height:a},c=new rv(100).encode(d,100);return n.processJPEG.call(this,c,t,r,o)},n.processGIF87A=n.processGIF89A}(gr.API),ci.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ci.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){wn.log("bit decode error:"+t)}},ci.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var A=this.palette[s>>7-a&1];this.data[i+4*a]=A.blue,this.data[i+4*a+1]=A.green,this.data[i+4*a+2]=A.red,this.data[i+4*a+3]=255}t!==0&&(this.pos+=4-t)}},ci.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,a=s>>4,A=15&s,d=this.palette[a];if(this.data[i]=d.blue,this.data[i+1]=d.green,this.data[i+2]=d.red,this.data[i+3]=255,2*o+1>=this.width)break;d=this.palette[A],this.data[i+4]=d.blue,this.data[i+4+1]=d.green,this.data[i+4+2]=d.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},ci.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},ci.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,d=s>>15?255:0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=d}this.pos+=n}},ci.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&t)/t*255|0,d=(i>>11)/e*255|0,c=o*this.width*4+4*s;this.data[c]=d,this.data[c+1]=A,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},ci.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=s,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},ci.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=i}},ci.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var s=new ci(e,!1),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new rv(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(gr.API),_b.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var s=new _b(e),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new rv(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(gr.API),gr.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,s=new Uint8Array(o/4*3),i=new Uint8Array(o/4),a=0,A=0,d=0;d<o;d+=4){var c=r[d],u=r[d+1],h=r[d+2],f=r[d+3];s[a++]=c,s[a++]=u,s[a++]=h,i[A++]=f}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},gr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ad=gr.API,Qf=ad.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,A=a.fof?a.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,c=d.fof?d.fof:1,u=e.doKerning!==!1,h=0,f=n.length,g=0,m=a[0]||A,y=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?y.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=u&&dn(d[r])==="object"&&!isNaN(parseInt(d[r][g],10))?d[r][g]/c:0,y.push((a[r]||m)/A+h)),g=r;return y},mb=ad.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return ad.processArabic&&(n=ad.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:Qf.apply(this,arguments).reduce(function(s,i){return s+i},0)},wb=function(n,e,t,r){for(var o=[],s=0,i=n.length,a=0;s!==i&&a+e[s]<t;)a+=e[s],s++;o.push(n.slice(0,s));var A=s;for(a=0;s!==i;)a+e[s]>r&&(o.push(n.slice(A,s)),a=0,A=s),a+=e[s],s++;return A!==s&&o.push(n.slice(A,s)),o},yb=function(n,e,t){t||(t={});var r,o,s,i,a,A,d,c=[],u=[c],h=t.textIndent||0,f=0,g=0,m=n.split(" "),y=Qf.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?m[0].length+2:t.lineIndent||0){var _=Array(A).join(" "),C=[];m.map(function(N){(N=N.split(/\s*\n/)).length>1?C=C.concat(N.map(function(k,W){return(W&&k.length?`
`:"")+k})):C.push(N[0])}),m=C,A=mb.apply(this,[_,t])}for(s=0,i=m.length;s<i;s++){var I=0;if(r=m[s],A&&r[0]==`
`&&(r=r.substr(1),I=1),h+f+(g=(o=Qf.apply(this,[r,t])).reduce(function(N,k){return N+k},0))>e||I){if(g>e){for(a=wb.apply(this,[r,o,e-(h+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);g=o.slice(r.length-(c[0]?c[0].length:0)).reduce(function(N,k){return N+k},0)}else c=[r];u.push(c),h=g+A,f=y}else c.push(r),h+=f+g,f=y}return d=A?function(N,k){return(k?_:"")+N.join(" ")}:function(N){return N.join(" ")},u.map(d)},ad.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var a,A,d=[];for(a=0,A=r.length;a<A;a++)d=d.concat(yb.apply(this,[r[a],i,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(u){return"0x"+parseInt(u,10).toString(16)},i=n.__fontmetrics__.compress=function(u){var h,f,g,m,y=["{"];for(var _ in u){if(h=u[_],isNaN(parseInt(_,10))?f="'"+_+"'":(_=parseInt(_,10),f=(f=s(_).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),m="-"):(g=s(h).slice(2),m=""),g=m+g.slice(0,-1)+r[g.slice(-1)];else{if(dn(h)!=="object")throw new Error("Don't know what to do with value type "+dn(h)+".");g=i(h)}y.push(f+g)}return y.push("}"),y.join("")},a=n.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,g,m,y={},_=1,C=y,I=[],N="",k="",W=u.length-1,V=1;V<W;V+=1)(m=u[V])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(m):m=="{"?(I.push([C,g]),C={},g=void 0):m=="}"?((f=I.pop())[0][f[1]]=C,g=void 0,C=f[0]):m=="-"?_=-1:g===void 0?t.hasOwnProperty(m)?(N+=t[m],g=parseInt(N,16)*_,_=1,N=""):N+=m:t.hasOwnProperty(m)?(k+=t[m],C[g]=parseInt(k,16)*_,_=1,g=void 0,k=""):k+=m;return y},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(u){var h=u.font,f=c.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(gr.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=t.charCodeAt(s);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(i,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(uu(a)),i.metadata=n.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(o,r)}}])}(gr),function(n){function e(){return(mr.canvg?Promise.resolve(mr.canvg):ps(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}gr.API.addSvgAsImage=function(t,r,o,s,i,a,A,d){if(isNaN(r)||isNaN(o))throw wn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw wn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(g){return g.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),r,o,s,i,A,d)})}}(),gr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},gr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(i),A=[],d=0,c=0,u=0;function h(g,m){var y,_=!1;for(y=0;y<g.length;y+=1)g[y]===m&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=a.length;for(u=0;u<f;u+=1)t[a[u]].value=t[a[u]].defaultValue,t[a[u]].explicitSet=!1}if(dn(n)==="object"){for(o in n)if(s=n[o],h(a,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&h(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")A.push(String(s[d]-1));else if(s[d].length>1){for(c=0;c<s[d].length;c+=1)typeof s[d][c]!="number"&&(r=!1);r===!0&&A.push([s[d][0]-1,s[d][1]-1].join(" "))}t[o].value="["+A.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?m.push("/"+g+" /"+t[g].value):m.push("/"+g+" "+t[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+i.length+a.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+s+i+a+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(gr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,i){for(var a,A=i.metadata.Unicode.widths,d=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(a=i.metadata.characterToGlyph(s.charCodeAt(u)),i.metadata.glyIdsUsed.push(a),i.metadata.toUnicode[a]=s.charCodeAt(u),A.indexOf(a)==-1&&(A.push(a),A.push([parseInt(i.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(d[4-a.length],a)}return c.join("")},r=function(s){var i,a,A,d,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(a=Object.keys(s).sort(function(f,g){return f-g})).length;u<h;u++)i=a[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(d=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),A.push("<"+i+"><"+d+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",g=0;g<h.length;g++)f+=String.fromCharCode(h[g]);var m=d();c({data:f,addLength1:!0,objectId:m}),A("endobj");var y=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var _=d();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+hd(a.fontName)),A("/FontFile2 "+m+" 0 R"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/Flags "+a.metadata.flags),A("/StemV "+a.metadata.stemV),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A(">>"),A("endobj");var C=d();A("<<"),A("/Type /Font"),A("/BaseFont /"+hd(a.fontName)),A("/FontDescriptor "+_+" 0 R"),A("/W "+n.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+a.encoding+")"),A(">>"),A(">>"),A("endobj"),a.objectNumber=d(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+y+" 0 R"),A("/BaseFont /"+hd(a.fontName)),A("/Encoding /"+a.encoding),A("/DescendantFonts ["+C+" 0 R]"),A(">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",f=0;f<u.length;f++)h+=String.fromCharCode(u[f]);var g=d();c({data:h,addLength1:!0,objectId:g}),A("endobj");var m=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),A("endobj");var y=d();A("<<"),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A("/StemV "+a.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+g+" 0 R"),A("/Flags 96"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/FontName /"+hd(a.fontName)),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A(">>"),A("endobj"),a.objectNumber=d();for(var _=0;_<a.metadata.hmtx.widths.length;_++)a.metadata.hmtx.widths[_]=parseInt(a.metadata.hmtx.widths[_]*(1e3/a.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+hd(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]);var o=function(s){var i,a=s.text||"",A=s.x,d=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,f=u.activeFontKey,g=u.fonts,m=f,y="",_=0,C="",I=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:a,x:A,y:d,options:c,mutex:u};for(C=a,m=f,Array.isArray(a)&&(C=a[0]),_=0;_<C.length;_+=1)g[m].metadata.hasOwnProperty("cmap")&&(i=g[m].metadata.cmap.unicode.codeMap[C[_].charCodeAt(0)]),i||C[_].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?y+=C[_]:y+="";var N="";return parseInt(m.slice(1))<14||I==="WinAnsiEncoding"?N=h(y,m).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(N=t(y,g[m])),u.isHex=!0,{text:N,x:A,y:d,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var i=s.text||"",a=[],A={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var d=0;for(d=0;d<i.length;d+=1)Array.isArray(i[d])&&i[d].length===3?a.push([o(Object.assign({},A,{text:i[d][0]})).text,i[d][1],i[d][2]]):a.push(o(Object.assign({},A,{text:i[d]})).text);s.text=a}else s.text=o(Object.assign({},A,{text:i})).text}])}(gr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(gr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,s,i,a,A,d,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,I=0;this.__bidiEngine__={};var N=function(M){var O=M.charCodeAt(),X=O>>8,te=m[X];return te!==void 0?u[256*te+(255&O)]:X===252||X===253?"AL":_.test(X)?"L":X===8?"R":"N"},k=function(M){for(var O,X=0;X<M.length;X++){if((O=N(M.charAt(X)))==="L")return!1;if(O==="R")return!0}return!1},W=function(M,O,X,te){var le,ne,Be,Z,se=O[te];switch(se){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(se="AN");break;case"AL":C=!0,se="R";break;case"WS":se="N";break;case"CS":te<1||te+1>=O.length||(le=X[te-1])!=="EN"&&le!=="AN"||(ne=O[te+1])!=="EN"&&ne!=="AN"?se="N":C&&(ne="AN"),se=ne===le?ne:"N";break;case"ES":se=(le=te>0?X[te-1]:"B")==="EN"&&te+1<O.length&&O[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&X[te-1]==="EN"){se="EN";break}if(C){se="N";break}for(Be=te+1,Z=O.length;Be<Z&&O[Be]==="ET";)Be++;se=Be<Z&&O[Be]==="EN"?"EN":"N";break;case"NSM":if(i&&!a){for(Z=O.length,Be=te+1;Be<Z&&O[Be]==="NSM";)Be++;if(Be<Z){var ce=M[te],be=ce>=1425&&ce<=2303||ce===64286;if(le=O[Be],be&&(le==="R"||le==="AL")){se="R";break}}}se=te<1||(le=O[te-1])==="B"?"N":X[te-1];break;case"B":C=!1,o=!0,se=I;break;case"S":s=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":se="N"}return se},V=function(M,O,X){var te=M.split("");return X&&H(te,X,{hiLevel:I}),te.reverse(),O&&O.reverse(),te.join("")},H=function(M,O,X){var te,le,ne,Be,Z,se=-1,ce=M.length,be=0,x=[],F=I?f:h,E=[];for(C=!1,o=!1,s=!1,le=0;le<ce;le++)E[le]=N(M[le]);for(ne=0;ne<ce;ne++){if(Z=be,x[ne]=W(M,E,x,ne),te=240&(be=F[Z][g[x[ne]]]),be&=15,O[ne]=Be=F[be][5],te>0)if(te===16){for(le=se;le<ne;le++)O[le]=1;se=-1}else se=-1;if(F[be][6])se===-1&&(se=ne);else if(se>-1){for(le=se;le<ne;le++)O[le]=Be;se=-1}E[ne]==="B"&&(O[ne]=0),X.hiLevel|=Be}s&&function(U,P,T){for(var R=0;R<T;R++)if(U[R]==="S"){P[R]=I;for(var q=R-1;q>=0&&U[q]==="WS";q--)P[q]=I}}(E,O,ce)},J=function(M,O,X,te,le){if(!(le.hiLevel<M)){if(M===1&&I===1&&!o)return O.reverse(),void(X&&X.reverse());for(var ne,Be,Z,se,ce=O.length,be=0;be<ce;){if(te[be]>=M){for(Z=be+1;Z<ce&&te[Z]>=M;)Z++;for(se=be,Be=Z-1;se<Be;se++,Be--)ne=O[se],O[se]=O[Be],O[Be]=ne,X&&(ne=X[se],X[se]=X[Be],X[Be]=ne);be=Z}be++}}},xe=function(M,O,X){var te=M.split(""),le={hiLevel:I};return X||(X=[]),H(te,X,le),function(ne,Be,Z){if(Z.hiLevel!==0&&c)for(var se,ce=0;ce<ne.length;ce++)Be[ce]===1&&(se=y.indexOf(ne[ce]))>=0&&(ne[ce]=y[se+1])}(te,X,le),J(2,te,O,X,le),J(1,te,O,X,le),te.join("")};return this.__bidiEngine__.doBidiReorder=function(M,O,X){if(function(le,ne){if(ne)for(var Be=0;Be<le.length;Be++)ne[Be]=Be;a===void 0&&(a=k(le)),d===void 0&&(d=k(le))}(M,O),i||!A||d)if(i&&A&&a^d)I=a?1:0,M=V(M,O,X);else if(!i&&A&&d)I=a?1:0,M=xe(M,O,X),M=V(M,O);else if(!i||a||A||d){if(i&&!A&&a^d)M=V(M,O),a?(I=0,M=xe(M,O,X)):(I=1,M=xe(M,O,X),M=V(M,O));else if(i&&a&&!A&&d)I=1,M=xe(M,O,X),M=V(M,O);else if(!i&&!A&&a^d){var te=c;a?(I=1,M=xe(M,O,X),I=0,c=!1,M=xe(M,O,X),c=te):(I=0,M=xe(M,O,X),M=V(M,O),I=1,c=!1,M=xe(M,O,X),c=te,M=V(M,O))}}else I=0,M=xe(M,O,X);else I=a?1:0,M=xe(M,O,X);return M},this.__bidiEngine__.setOptions=function(M){M&&(i=M.isInputVisual,A=M.isOutputVisual,a=M.isInputRtl,d=M.isOutputRtl,c=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(i=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?i.push([t.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):i.push([t.doBidiReorder(o[a])]);r.text=i}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new xA(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new _N(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new AN(this.contents),this.head=new dN(this),this.name=new pN(this),this.cmap=new lz(this),this.toUnicode={},this.hhea=new cN(this),this.maxp=new gN(this),this.hmtx=new vN(this),this.post=new hN(this),this.os2=new uN(this),this.loca=new bN(this),this.glyf=new mN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,a,A,d;for(d=[],i=0,a=(A=this.bbox).length;i<a;i++)e=A[i],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)o=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Si,xA=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,s,i,a,A;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*s+65536*i+256*a+A},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),AN=function(){var n;function e(t){var r,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,s,i,a,A,d,c,u,h,f,g,m;for(m in f=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(f)/A),i=Math.floor(u/A),c=16*f-u,(o=new xA).writeInt(this.scalarType),o.writeShort(f),o.writeShort(u),o.writeShort(i),o.writeShort(c),s=16*f,d=o.pos+s,a=null,g=[],t)for(h=t[m],o.writeString(m),o.writeInt(n(h)),o.writeInt(d),o.writeInt(h.length),g=g.concat(h),m==="head"&&(a=d),d+=h.length;d%4;)g.push(0),d++;return o.write(g),r=2981146554-n(o.data),o.pos=a+8,o.writeUInt32(r),o.data},n=function(t){var r,o,s,i;for(t=dz.call(t);t.length%4;)t.push(0);for(s=new xA(t),o=0,r=0,i=t.length;r<i;r=r+=4)o+=s.readUInt32();return 4294967295&o},e}(),lN={}.hasOwnProperty,ea=function(n,e){for(var t in e)lN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Si=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var dN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new xA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Bb=function(){function n(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,_,C,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),e.pos+=2,m=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),d=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),c=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),o=(this.length-e.pos+this.offset)/2,a=function(){var N,k;for(k=[],A=N=0;0<=o?N<o:N>o;A=0<=o?++N:--N)k.push(e.readUInt16());return k}(),A=_=0,I=s.length;_<I;A=++_)for(y=s[A],r=C=g=m[A];g<=y?C<=y:C>=y;r=g<=y?++C:--C)c[A]===0?i=r+d[A]:(i=a[c[A]/2+(r-g)-(h-A)]||0)!==0&&(i+=d[A]),this.codeMap[r]=65535&i}e.pos=u}return n.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,_,C,I,N,k,W,V,H,J,xe,M,O,X,te,le,ne,Be,Z,se,ce,be,x,F,E,U,P,T,R,q,j,Ae,Ee;switch(te=new xA,i=Object.keys(e).sort(function(_e,Oe){return _e-Oe}),t){case"macroman":for(m=0,y=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),C={0:0},s={},le=0,se=i.length;le<se;le++)C[q=e[o=i[le]]]==null&&(C[q]=++m),s[o]={old:e[o],new:C[e[o]]},y[o]=C[e[o]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(y),{charMap:s,subtable:te.data,maxGlyphID:m+1};case"unicode":for(O=[],u=[],I=0,C={},r={},_=d=null,ne=0,ce=i.length;ne<ce;ne++)C[k=e[o=i[ne]]]==null&&(C[k]=++I),r[o]={old:k,new:C[k]},a=C[k]-o,_!=null&&a===d||(_&&u.push(_),O.push(o),d=a),_=o;for(_&&u.push(_),u.push(65535),O.push(65535),xe=2*(J=O.length),H=2*Math.pow(Math.log(J)/Math.LN2,2),h=Math.log(H/2)/Math.LN2,V=2*J-H,A=[],W=[],f=[],g=Be=0,be=O.length;Be<be;g=++Be){if(M=O[g],c=u[g],M===65535){A.push(0),W.push(0);break}if(M-(X=r[M].new)>=32768)for(A.push(0),W.push(2*(f.length+J-g)),o=Z=M;M<=c?Z<=c:Z>=c;o=M<=c?++Z:--Z)f.push(r[o].new);else A.push(X-M),W.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*J+2*f.length),te.writeUInt16(0),te.writeUInt16(xe),te.writeUInt16(H),te.writeUInt16(h),te.writeUInt16(V),T=0,x=u.length;T<x;T++)o=u[T],te.writeUInt16(o);for(te.writeUInt16(0),R=0,F=O.length;R<F;R++)o=O[R],te.writeUInt16(o);for(j=0,E=A.length;j<E;j++)a=A[j],te.writeUInt16(a);for(Ae=0,U=W.length;Ae<U;Ae++)N=W[Ae],te.writeUInt16(N);for(Ee=0,P=f.length;Ee<P;Ee++)m=f[Ee],te.writeUInt16(m);return{charMap:r,subtable:te.data,maxGlyphID:I+1}}},n}(),lz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r=new Bb(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,s;return r==null&&(r="macroman"),o=Bb.encode(t,r),(s=new xA).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),cN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),uN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),hN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(o=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=(function(){var a,A,d;for(d=[],i=a=0,A=this.file.maxp.numGlyphs;0<=A?a<A:a>A;i=0<=A?++a:--a)d.push(t.readUInt32());return d}).call(this)}},e}(),fN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,s,i,a,A,d,c,u,h,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),A=t.readShort(),o=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=u=0,h=o.length;u<h;i=++u)s=o[i],t.pos=s.offset,c=t.readString(s.length),a=new fN(c,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),gN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),vN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,s,i,a,A,d;for(t.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.metrics).length;c<u;c++)i=h[c],f.push(i.advance);return f}).call(this),o=this.widths[this.widths.length-1],d=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)d.push(this.widths.push(o));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),dz=[].slice,mN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,s,i,a,A,d,c,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,o=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,a=(A=new xA(r.read(s))).readShort(),c=A.readShort(),h=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[t]=a===-1?new yN(A,c,h,d,u):new wN(A,a,c,h,d,u),this.cache[t]))},e.prototype.encode=function(t,r,o){var s,i,a,A,d;for(a=[],i=[],A=0,d=r.length;A<d;A++)s=t[r[A]],i.push(a.length),s&&(a=a.concat(s.encode(o)));return i.push(a.length),{table:a,offsets:i}},e}(),wN=function(){function n(e,t,r,o,s,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=s,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),yN=function(){function n(e,t,r,o,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new xA(dz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),bN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ea(e,Si),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<o.length;++a)if(o[a]=s,i<r.length&&r[i]==a){++i,o[a]=s;var A=this.offsets[a],d=this.offsets[a+1]-A;d>0&&(s+=d)}for(var c=new Array(4*o.length),u=0;u<o.length;++u)c[4*u+3]=255&o[u],c[4*u+2]=(65280&o[u])>>8,c[4*u+1]=(16711680&o[u])>>16,c[4*u]=(4278190080&o[u])>>24;return c},e}(),_N=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,s,i,a,A;for(o={},i=0,a=e.length;i<a;i++)o[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(r=o[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))r=A[s],o[s]=r;return o},n.prototype.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,_;for(o in r=lz.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},_=r.charMap)f[(A=_[o]).old]=A.new;for(g in h=r.maxGlyphID,i)g in f||(f[g]=h++);return c=function(C){var I,N;for(I in N={},C)N[C[I]]=I;return N}(f),u=Object.keys(c).sort(function(C,I){return C-I}),m=function(){var C,I,N;for(N=[],C=0,I=u.length;C<I;C++)a=u[C],N.push(c[a]);return N}(),s=this.font.glyf.encode(i,m,f),d=this.font.loca.encode(s.offsets,m),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n}();gr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,s,i;if(Array.isArray(t))return"["+function(){var a,A,d;for(d=[],a=0,A=t.length;a<A;a++)r=t[a],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)i=t[o],s.push("/"+o+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+t},e}();var BN=Y('<tr><td class="odz-text-xs"></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),xN=Y('<tr><td></td><td colspan="5" class="odz-text-xs"> <!> <!></td><td> </td></tr>'),zN=Y('<tr><td></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),CN=Y("<!> <!> <!>",1),SN=Y('<tr><td></td><td class="odz-text-xs">[]  </td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td> </td></tr>'),EN=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-p-8 odz-print-area"><h1 class="odz-text-center odz-text-3xl odz-font-bold odz-mb-8"></h1> <table class="odz-table odz-w-full odz-border odz-border-gray-400"><tbody><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200 odz-w-32"> </td><td>101-86-83287</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td>()</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"> </td><td colspan="3">  22 19-15</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td>02-6499-2267</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td colspan="3"><div class="odz-flex odz-justify-between"><span></span> <span></span></div></td></tr></tbody></table> <div class="odz-my-4"><div class="odz-font-bold">  (+)</div> <div class="odz-text-right"> </div></div> <table class="odz-table odz-table-bordered odz-w-full"><thead><tr class="odz-bg-base-200"><th></th><th>/</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><!><!><tr><td colspan="3" class="odz-text-center odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"> </td></tr></tbody></table> <div class="odz-mt-4 odz-p-4 odz-bg-base-200 odz-rounded"><div class="odz-font-bold odz-mb-2"></div> <ul class="odz-list-disc odz-list-inside odz-text-sm"><li>   20 (   )</li> <li>      .</li> <li>   .</li> <li>   .</li> <li>       ,  .</li></ul></div> <div class="odz-flex odz-justify-end odz-gap-2 odz-mt-6 print:odz-hidden"><button class="odz-btn odz-btn-primary"></button> <button class="odz-btn odz-btn-secondary">PDF </button> <button class="odz-btn"></button></div></div></dialog>');function FN(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t);let s=vt(e,"isOpen",12);function i(){s(!1)}function a(){window.print()}console.log("paper estimateStore",o());const A=new Date,d=`${A.getFullYear()} ${String(A.getMonth()+1).padStart(2,"0")} ${String(A.getDate()).padStart(2,"0")}`;async function c(){const ce=document.querySelector(".odz-print-area");if(ce)try{const be=ce.querySelector(".print\\:odz-hidden");let x="";be&&(x=be.style.display,be.style.display="none");const F=ce.scrollHeight,E=ce.scrollWidth,U=ce.scrollTop;ce.scrollTop=0;const P=await BD(ce,{useCORS:!0,scale:2,x:0,y:0,width:E,height:F,backgroundColor:"#ffffff",logging:!1,allowTaint:!0,windowHeight:F});ce.scrollTop=U,be&&(be.style.display=x);const T=P.toDataURL("image/png",1),R=new gr({orientation:"portrait",unit:"mm",format:"a4"}),q=R.internal.pageSize.getWidth(),j=R.internal.pageSize.getHeight(),Ae=10,Ee=q-Ae*2,_e=j-Ae*2,Oe=P.height/P.width;let D=Ee*Oe;if(D>_e){const ie=Math.ceil(D/_e),me=P.height/D,pe=_e*me;for(let oe=0;oe<ie;oe++){oe>0&&R.addPage();const ye=-oe*pe/me;R.addImage(T,"PNG",Ae,ye+Ae,Ee,P.height*(Ee/P.width))}}else R.addImage(T,"PNG",Ae,Ae,Ee,D);R.save(".pdf")}catch(be){console.error("PDF    :",be)}}Rr();var u=EN(),h=w(u),f=z(w(h),2),g=w(f),m=w(g),y=z(w(m),3);y.textContent=d;var _=z(f,2),C=z(w(_),2),I=w(C),N=z(_,2),k=z(w(N)),W=w(k);Yt(W,1,()=>o().products,Ar,(ce,be,x)=>{var F=CN(),E=ft(F);Yt(E,1,()=>l(be).variants,Ar,(q,j,Ae)=>{var Ee=BN();const _e=dt(()=>l(j).prices[0].amount),Oe=dt(()=>l(be).variants.reduce((ge,Se)=>ge+(Se.quantity||0),0)),G=dt(()=>{var ge;return(ge=l(be).discountInfo)!=null&&ge.hasDiscount?(l(be).discountInfo.originalAmount-l(be).discountInfo.discountAmount)/l(Oe):l(_e)}),D=dt(()=>l(G)*l(j).quantity);var ie=w(Ee);ie.textContent=`${x+1}-${Ae+1}`;var me=z(ie),pe=w(me),oe=z(me),ye=w(oe),Ne=z(oe),we=w(Ne),Fe=z(Ne),ue=w(Fe),De=z(Fe),Pe=w(De),he=z(De),ee=w(he);He((ge,Se)=>{Le(pe,l(be).product.title),Le(ye,l(j).title||""),Le(we,l(j).quantity),Le(ue,ge),Le(Pe,Se),Le(ee,Se)},[()=>vr(l(G)),()=>vr(l(D))],dt),L(q,Ee)});var U=z(E,2);{var P=q=>{var j=kt(),Ae=ft(j);Yt(Ae,1,()=>l(be).prints,Ar,(Ee,_e)=>{var Oe=xN(),G=z(w(Oe)),D=w(G),ie=z(D);{var me=we=>{var Fe=en();He(ue=>Le(Fe,`- ${ue??""}`),[()=>l(_e).parentTemplates.map(ue=>ue.name).join(" > ")],dt),L(we,Fe)};ze(ie,we=>{l(_e).parentTemplates&&we(me)})}var pe=z(ie,2);{var oe=we=>{var Fe=en();He(()=>Le(Fe,`- ${l(_e).colors.length??""}`)),L(we,Fe)};ze(pe,we=>{l(_e).colors&&we(oe)})}var ye=z(G),Ne=w(ye);He(we=>{Le(D,`: ${l(_e).title??""} `),Le(Ne,we)},[()=>vr(l(_e).price||0)],dt),L(Ee,Oe)}),L(q,j)};ze(U,q=>{l(be).prints&&l(be).prints.length>0&&q(P)})}var T=z(U,2);{var R=q=>{var j=kt(),Ae=ft(j);Yt(Ae,1,()=>Object.entries(l(be).addons),Ar,(Ee,_e)=>{let Oe=()=>l(_e)[1];var G=kt();const D=dt(()=>l(be).addonProductsMap[Oe().productId]),ie=dt(()=>{var oe,ye;return(ye=(oe=l(D))==null?void 0:oe.variants)==null?void 0:ye.find(Ne=>Ne.id===Oe().variantId)});var me=ft(G);{var pe=oe=>{var ye=zN(),Ne=z(w(ye)),we=w(Ne),Fe=z(Ne),ue=w(Fe),De=z(Fe),Pe=w(De),he=z(De),ee=w(he),ge=z(he),Se=w(ge),Me=z(ge),Qe=w(Me);He((ot,Ye)=>{Le(we,`[] ${l(D).title??""}`),Le(ue,l(ie).title||""),Le(Pe,l(be).quantity),Le(ee,ot),Le(Se,Ye),Le(Qe,Ye)},[()=>vr(l(ie).prices[0].amount),()=>vr(l(ie).prices[0].amount*l(be).quantity)],dt),L(oe,ye)};ze(me,oe=>{l(D)&&l(ie)&&oe(pe)})}L(Ee,G)}),L(q,j)};ze(T,q=>{l(be).addons&&l(be).addonProductsMap&&Object.keys(l(be).addons).length>0&&q(R)})}L(ce,F)});var V=z(W);{var H=ce=>{var be=SN(),x=z(w(be),6),F=w(x);He(E=>Le(F,E),[()=>vr(o().totalAdditionalAmount)],dt),L(ce,be)};ze(V,ce=>{o().totalAdditionalAmount>0&&ce(H)})}var J=z(V),xe=z(w(J)),M=w(xe),O=z(xe,2),X=w(O),te=z(O),le=w(te),ne=z(N,4),Be=w(ne),Z=z(Be,2),se=z(Z,2);He((ce,be)=>{Le(I,` (  ${ce??""} )`),Le(M,`${o().totalQuantity??""}`),Le(X,be),Le(le,ce)},[()=>vr(o().totalAmount),()=>vr(o().totalProductAmount+o().totalPrintAmount+o().totalAddonAmount+o().totalAdditionalAmount)],dt),at("click",Be,a),at("click",Z,c),at("click",se,i),L(n,u),Mr(),r()}var IN=Y("<!> <button> </button>",1),UN=Y("<button> </button>"),QN=Y('<div class="odz-flex odz-flex-wrap odz-gap-1.5"></div>'),TN=Y('<div class="odz-flex odz-justify-center odz-items-center odz-h-32"><div class="odz-loading odz-loading-spinner odz-loading-md"></div></div>'),LN=Y('<div class="odz-text-error odz-text-center odz-py-4"> </div>'),PN=Y('<div class="odz-text-center odz-py-4 odz-text-gray-500">  .</div>'),kN=Y('<img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0">'),ON=Y('<div class="odz-w-12 odz-h-12 odz-bg-gray-100 odz-rounded odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><span class="odz-text-gray-400 odz-text-xs"></span></div>'),DN=Y('<div class="odz-flex odz-items-center odz-gap-3 odz-p-2 odz-bg-base-100 odz-rounded-lg odz-border odz-border-gray-100 hover:odz-bg-gray-50"><!> <div class="odz-flex-1 odz-min-w-0"><h3 class="odz-text-sm odz-font-medium odz-truncate"> </h3> <div class="odz-text-xs odz-text-gray-500"><!></div></div> <button class="odz-btn odz-btn-primary odz-btn-xs odz-flex-shrink-0"></button></div>'),NN=Y('<div class="odz-flex odz-justify-center odz-items-center odz-py-3"><div class="odz-loading odz-loading-spinner odz-loading-sm"></div></div>'),MN=Y('<div class="odz-flex odz-flex-col odz-gap-2"></div> <!>',1),HN=Y('<div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-bg-white odz-rounded-lg odz-w-full odz-max-w-2xl odz-mx-4 odz-max-h-[80vh] odz-overflow-hidden odz-flex odz-flex-col"><div class="odz-p-4 odz-border-b odz-flex odz-justify-between odz-items-center"><h2 class="odz-text-lg odz-font-bold"> </h2> <button class="odz-btn odz-btn-ghost odz-btn-sm"><!></button></div> <div class="odz-p-3 odz-border-b odz-space-y-3"><div class="odz-relative"><input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-input-sm"> <!></div> <div class="odz-flex odz-items-center odz-gap-1.5 odz-text-xs odz-text-gray-500"><button></button> <!></div> <!></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-3"><!></div></div></div>');function W1(n,e){Nr(e,!1);const t=Ue();let r=vt(e,"addProduct",8),o=vt(e,"isProductSearchOpen",12),s=vt(e,"productType",8,""),i=vt(e,"excludeNoProcess",8,!1),a=Ue(""),A=Ue([]),d=Ue([]),c=Ue(""),u=Ue([]),h=Ue(!1),f=Ue(null),g,m=!0,y=1;const _=20;let C=Ue();Fn(async()=>{document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(Ae=>{Ae instanceof HTMLElement&&(Ae.scrollTop=0)});try{b(d,await Y_()),await I()}catch(Ae){console.error("     :",Ae)}}),Qo(()=>{document.body.style.overflow=""});async function I(){b(h,!0),b(f,null);try{const{products:j,total:Ae}=await Pf("",void 0,1,_,s(),i());b(A,j),m=l(A).length<Ae}catch(j){console.error("    :",j),b(f,"    .")}finally{b(h,!1)}}async function N(){if(!(l(h)||!m)){b(h,!0),y++;try{const{products:j,total:Ae}=await Pf(l(a),l(c),y,_,s(),i());j.length>0?(b(A,[...l(A),...j]),m=l(A).length<Ae):m=!1}catch(j){console.error("     :",j),b(f,"    .")}finally{b(h,!1)}}}async function k(){if(!l(a).trim()&&!l(c)){await I();return}b(h,!0),b(f,null),y=1,b(A,[]);try{const{products:j,total:Ae}=await Pf(l(a),l(c),1,_,s(),i());b(A,j),m=l(A).length<Ae}catch(j){console.error("    :",j),b(f,"    .")}finally{b(h,!1)}}function W(){clearTimeout(g),g=setTimeout(k,300)}function V(j){b(c,j.id),b(u,[...l(u),j]),k()}function H(j){b(u,l(u).slice(0,j+1)),b(c,l(u)[j].id),k()}function J(j){r()(j.id)}function xe(){o(!1),b(a,""),b(c,""),b(u,[]),b(A,[]),b(f,null),y=1,m=!0}function M(){if(!l(C))return;const{scrollTop:j,scrollHeight:Ae,clientHeight:Ee}=l(C);Ae-j<=Ee*1.5&&N()}Jt(()=>(l(u),l(d)),()=>{var j;b(t,l(u).length===0?l(d):((j=l(u)[l(u).length-1])==null?void 0:j.children)||[])}),to(),Rr();var O=HN(),X=w(O),te=w(X),le=z(w(te),2),ne=w(le);Hu(ne,{class:"odz-w-5 odz-h-5"});var Be=z(te,2),Z=w(Be),se=w(Z),ce=z(se,2);Z_(ce,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var be=z(Z,2),x=w(be),F=z(x,2);Yt(F,1,()=>l(u),Ar,(j,Ae,Ee)=>{var _e=IN(),Oe=ft(_e);rE(Oe,{class:"odz-w-3 odz-h-3"});var G=z(Oe,2),D=w(G);He(()=>{Cr(G,`hover:odz-text-primary odz-transition-colors ${(Ee===l(u).length-1?"odz-text-gray-900 odz-font-medium":"")??""}`),Le(D,l(Ae).name)}),at("click",G,()=>H(Ee)),L(j,_e)});var E=z(be,2);{var U=j=>{var Ae=QN();Yt(Ae,5,()=>l(t),Ar,(Ee,_e)=>{var Oe=UN(),G=w(Oe);He(()=>{Cr(Oe,`odz-px-3 odz-py-1 odz-text-xs odz-rounded-full odz-transition-all odz-duration-200
                ${(l(c)===l(_e).id?"odz-bg-primary odz-text-primary-content odz-shadow-sm":"odz-bg-gray-100 odz-text-gray-600 hover:odz-bg-gray-200 hover:odz-text-gray-800")??""}`),Le(G,l(_e).name)}),at("click",Oe,()=>V(l(_e))),L(Ee,Oe)}),L(j,Ae)};ze(E,j=>{l(t).length>0&&j(U)})}var P=z(Be,2),T=w(P);{var R=j=>{var Ae=TN();L(j,Ae)},q=j=>{var Ae=kt(),Ee=ft(Ae);{var _e=G=>{var D=LN(),ie=w(D);He(()=>Le(ie,l(f))),L(G,D)},Oe=G=>{var D=kt(),ie=ft(D);{var me=oe=>{var ye=PN();L(oe,ye)},pe=oe=>{var ye=MN(),Ne=ft(ye);Yt(Ne,5,()=>l(A),Ar,(ue,De)=>{var Pe=DN(),he=w(Pe);{var ee=qe=>{var je=kN();He(()=>{rr(je,"src",l(De).thumbnail),rr(je,"alt",l(De).title)}),L(qe,je)},ge=qe=>{var je=ON();L(qe,je)};ze(he,qe=>{l(De).thumbnail?qe(ee):qe(ge,!1)})}var Se=z(he,2),Me=w(Se),Qe=w(Me),ot=z(Me,2),Ye=w(ot);{var Ce=qe=>{var je=kt(),Re=ft(je);{var Ve=Ke=>{var nt=en();He(ht=>Le(nt,`${ht??""}`),[()=>vr(l(De).variants[0].prices[0].amount)],dt),L(Ke,nt)},At=Ke=>{var nt=en();He(ht=>Le(nt,`${ht??""} ~`),[()=>vr(Math.min(...l(De).variants.map(ht=>ht.prices[0].amount)))],dt),L(Ke,nt)};ze(Re,Ke=>{l(De).variants.length===1?Ke(Ve):Ke(At,!1)})}L(qe,je)},de=qe=>{var je=en("  ");L(qe,je)};ze(Ye,qe=>{l(De).variants&&l(De).variants.length>0?qe(Ce):qe(de,!1)})}var Te=z(Se,2);He(()=>Le(Qe,l(De).title)),at("click",Te,()=>J(l(De))),L(ue,Pe)});var we=z(Ne,2);{var Fe=ue=>{var De=NN();L(ue,De)};ze(we,ue=>{l(h)&&l(A).length>0&&ue(Fe)})}L(oe,ye)};ze(ie,oe=>{l(A).length===0&&(l(a)||l(c))?oe(me):oe(pe,!1)},!0)}L(G,D)};ze(Ee,G=>{l(f)?G(_e):G(Oe,!1)},!0)}L(j,Ae)};ze(T,j=>{l(h)&&l(A).length===0?j(R):j(q,!1)})}ss(P,j=>b(C,j),()=>l(C)),He(()=>Cr(x,`hover:odz-text-primary odz-transition-colors ${(l(u).length===0?"odz-text-gray-900 odz-font-medium":"")??""}`)),at("click",le,xe),yr(se,()=>l(a),j=>b(a,j)),at("input",se,W),at("click",x,()=>{b(u,[]),b(c,""),k()}),at("scroll",P,M),L(n,O),Mr()}var jN=Y('<div class="odz-text-sm odz-text-gray-600 odz-mt-1"> </div>'),RN=Y('<div class="odz-flex odz-items-center odz-justify-between odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><div class="odz-flex-1"><div class="odz-font-semibold odz-text-gray-800"> </div> <!></div> <div class="odz-text-right"><div class="odz-font-bold odz-text-lg odz-text-gray-800"> </div></div></div>'),qN=Y('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><h2 class="odz-text-lg odz-font-bold odz-mb-4 odz-flex odz-items-center odz-gap-2"></h2> <div class="odz-space-y-3"></div> <div class="odz-divider odz-my-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><span class="odz-font-bold odz-text-lg odz-text-gray-800"> </span> <span class="odz-font-bold odz-text-xl odz-text-gray-800"> </span></div></div></div>');function KN(n,e){Nr(e,!1);const t=Ue();let r=vt(e,"additionalCosts",24,()=>[]);vt(e,"isEditable",8,!0),Jt(()=>Cn(r()),()=>{b(t,r().reduce((a,A)=>a+Number(A.amount),0))}),to(),Rr();var o=kt(),s=ft(o);{var i=a=>{var A=qN(),d=w(A),c=z(w(d),2);Yt(c,5,r,g=>g.id,(g,m)=>{var y=RN(),_=w(y),C=w(_),I=w(C),N=z(C,2);{var k=J=>{var xe=jN(),M=w(xe);He(()=>Le(M,l(m).description)),L(J,xe)};ze(N,J=>{l(m).description&&J(k)})}var W=z(_,2),V=w(W),H=w(V);He(J=>{Le(I,l(m).name),Le(H,`+${J??""}`)},[()=>vr(Number(l(m).amount))],dt),L(g,y)});var u=z(c,4),h=z(w(u),2),f=w(h);He(g=>Le(f,`+${g??""}`),[()=>vr(l(t))],dt),L(a,A)};ze(s,a=>{r().length>0&&a(i)})}L(n,o),Mr()}var $N=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-bg-gray-50 odz-rounded-lg"><div class="odz-text-6xl odz-mb-4"></div> <h3 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-6">      </p> <button class="odz-btn odz-btn-primary odz-gap-2"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </button></div>'),VN=Y("<div><!></div>"),GN=Y("<div><!></div>"),WN=Y("<div></div>"),XN=Y('<div class="odz-mt-5"><div role="tablist" class="odz-tabs odz-tabs-boxed"><button role="tab"></button> <button role="tab"></button></div></div> <!>',1),YN=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-text-lg odz-font-medium odz-mt-4">   ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2"> ,  ,    .</p></div>'),JN=Y('<button class="odz-btn odz-btn-primary"><!>  </button>'),ZN=Y('<div><h2 class="odz-text-2xl odz-font-bold odz-mb-4"> </h2> <!> <div class="odz-flex odz-justify-end odz-mt-4"><!></div> <!></div>'),eM=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-md odz-text-primary"></div> <p class="odz-text-base odz-font-medium odz-mt-3">   ...</p></div>'),tM=Y('<span class="odz-badge odz-badge-warning"> </span>'),rM=Y('<div class="odz-flex odz-items-center odz-gap-2"><span> </span> <!></div>'),nM=Y('<div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="password-input"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input id="password-input" type="password" class="odz-input odz-input-bordered odz-w-full" placeholder="     "> <label class="odz-label" for="password-input"><span class="odz-label-text-alt">     .  !</span></label></div>'),oM=Y(`<div class="odz-flex odz-justify-between odz-items-center odz-mb-4"><h2 class="odz-text-lg odz-font-bold odz-flex odz-items-center odz-gap-1">  <div class="odz-flex odz-items-center odz-gap-1"><!> <span class="odz-text-xs odz-text-gray-500 odz-ml-1">  </span></div></h2> <!></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="   . ) ' 000  '" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="  " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="010" class="odz-input odz-input-bordered odz-w-1/4" maxlength="3"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <span class="odz-text-xs odz-self-center">   ,     .</span></div></div></div> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="address-section"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!>  </span></label> <div class="odz-flex odz-gap-2 odz-mb-2"><input type="text" id="postcode" placeholder="" readonly="" class="odz-input odz-input-bordered odz-w-1/4"> <button class="odz-btn odz-btn-secondary"></button> <button class="odz-btn odz-btn-outline"> </button></div> <input type="text" id="address1" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-mb-2"> <input type="text" id="address2" placeholder=" " class="odz-input odz-input-bordered odz-w-full"> <p class="odz-text-xs odz-mt-1">       .</p></div> <div class="odz-form-control odz-w-full odz-mt-4"><div class="odz-flex odz-gap-4 odz-items-center"><button class="odz-btn odz-btn-outline odz-flex-1"></button> <p class="odz-text-xs">      .</p></div></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-mt-4"><div class="odz-form-control odz-w-full"><label class="odz-label" for="shipping-method"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <select id="shipping-method" class="odz-select odz-select-bordered odz-w-full"><option disabled selected>==   ==</option><option></option><option></option><option></option></select></div> <div class="odz-form-control odz-w-full"><label class="odz-label" for="pref-delivery-date"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"></span></label> <input id="pref-delivery-date" type="date" class="odz-input odz-input-bordered odz-w-full"> <label class="odz-label" for="pref-delivery-date-note"><span class="odz-label-text-alt">        .</span></label></div></div> <!> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="request-notes"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"> </span></label> <textarea id="request-notes" class="odz-textarea odz-textarea-bordered odz-h-24 odz-w-full" placeholder="   ."></textarea></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-outline odz-btn-secondary"><!>  </button> <button class="odz-btn odz-w-full odz-btn-primary md:odz-w-auto disabled:bg-primary/50 disabled:odz-bg-secondary/20"><!> <!></button></div>`,1),sM=Y('<!> <!> <div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><!></div></div>',1),iM=Y('<div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-ml-3 odz-text-lg odz-font-medium">  ...</span></div>'),aM=Y('<div class="odz-text-xs odz-text-gray-400 odz-line-through"> </div> <div class="odz-text-xs odz-text-green-600 odz-font-medium"> </div>',1),AM=Y('<div class="odz-text-xs odz-text-gray-400"> </div>'),lM=Y('<span class="odz-text-gray-400"></span>'),dM=Y('<div class="odz-text-xs odz-text-green-600">   </div>'),cM=Y('<div class="odz-text-xs odz-text-blue-600">   -  </div>'),uM=Y('<div class="odz-text-xs odz-text-gray-400"> </div>'),hM=Y('<div class="odz-text-xs odz-text-gray-500">    </div>'),fM=Y('<div class="odz-grid odz-grid-cols-2 md:odz-grid-cols-5 odz-gap-3 md:odz-gap-4 odz-p-4 md:odz-p-6 odz-bg-white"><div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">1  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"><!></div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">    </div></div> <div class="odz-text-center md:odz-col-span-1 odz-col-span-2"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-3xl md:odz-text-2xl odz-font-bold odz-text-red-600 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400"> <!> <!></div></div></div>'),pM=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <div class="odz-space-y-4 odz-py-4"><div><ul class="odz-list-disc odz-ml-5 odz-space-y-2"><li>                     </li> <li>   .       .</li> <li>( :   22 19-15 3)</li></ul></div> <div><table class="odz-table odz-table-zebra odz-w-full"><tbody><tr><td>*Name:</td><td></td></tr><tr><td>*Country:</td><td></td></tr><tr><td>*ZipCode:</td><td></td></tr><tr><td>*Address:</td><td></td></tr><tr><td>*Tel.No.():</td><td></td></tr><tr><td>*E-mail:</td><td></td></tr></tbody></table></div></div> <div class="odz-modal-action"><button class="odz-btn"></button></div></div></dialog>'),gM=Y('<!> <div class="odz-sticky odz-bottom-0 odz-left-0 odz-right-0 odz-mt-6 odz-bg-white odz-border-t odz-shadow-lg"><!></div> <!> <!> <!> <!>',1);function vM(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=()=>Gr(ks,"$shopStore",t),i=()=>Gr(ol,"$customerStore",t);let a=vt(e,"productId",12),A=vt(e,"isEstimateModal",12),d=vt(e,"estimate",12),c=Ue(null),u=Ue(!1),h=Ue(""),f=Ue(""),g=Ue(0),m=Ue(!1),y=Ue(""),_=Ue(""),C=Ue(""),I=!1,N=Ue(!1),k=Ue(""),W=Ue(""),V=Ue(""),H=Ue(),J=Ue(),xe=Ue(),M=Ue(""),O=Ue(!1),X=Ue(!0),te=Ue([]),le=Ue(!1);function ne(){var we;if(b(g,0),(we=d())!=null&&we.id&&(console.log(" Edit mode - clearing sessionStorage before DB load"),_E()),Kt(It,lt(o).estimateName=d().name||"",lt(o)),Kt(It,lt(o).organizationName=d().organization_name||"",lt(o)),Kt(It,lt(o).orderName=d().order_name||"",lt(o)),Kt(It,lt(o).orderPhone=d().order_phone||"",lt(o)),Kt(It,lt(o).postcode=d().postcode||"",lt(o)),Kt(It,lt(o).address1=d().address1||"",lt(o)),Kt(It,lt(o).address2=d().address2||"",lt(o)),Kt(It,lt(o).comment=d().comment||"",lt(o)),Kt(It,lt(o).shippingMethod=d().shipping_method||"",lt(o)),Kt(It,lt(o).prefDeliveryDate=d().pref_delivery_date||"",lt(o)),Kt(It,lt(o).estDeliveryDate=d().est_delivery_date||"",lt(o)),Kt(It,lt(o).uploadMemo=d().upload_memo||"",lt(o)),Kt(It,lt(o).designUploads=d().design_uploads&&typeof d().design_uploads=="object"&&Array.isArray(d().design_uploads.files)?d().design_uploads.files.map(Fe=>Fe.url):[],lt(o)),Kt(It,lt(o).designConfirm=d().design_confirm||"",lt(o)),o().prefDeliveryDate&&b(M,new Date(o().prefDeliveryDate).toISOString().split("T")[0]),b(y,d().postcode||""),b(_,d().address1||""),b(C,d().address2||""),b(X,zd(d().status)),d().order_phone){const Fe=d().order_phone;Fe.length>=3&&b(k,Fe.slice(0,3)),Fe.length>=7&&b(W,Fe.slice(3,7)),Fe.length>=11&&b(V,Fe.slice(7,11))}T(d().id)}function Be(we){a(o().products[we].product.id),Kt(It,lt(o).index=we,lt(o)),b(g,1)}function Z(){var we,Fe;if(b(g,1),(!a()||a().trim()==="")&&(o().products.length>0&&o().index>=0&&((Fe=(we=o().products[o().index])==null?void 0:we.product)!=null&&Fe.id)?(a(o().products[o().index].product.id),console.log("   productId :",a())):console.log(" productId     ")),typeof window<"u"&&a()){const ue=`extended-product-data-cache-${a()}`;try{const De=window.sessionStorage.getItem(ue);if(De){const Pe=JSON.parse(De);Pe.printSelection&&!Pe.printSelection.isCompleted&&(Pe.printSelection.currentMethod="selection",window.sessionStorage.setItem(ue,JSON.stringify(Pe)),console.log("     "))}}catch(De){console.warn("     :",De)}}}function se(){if(!o().products||o().products.length===0||o().index<0||!o().products[o().index]){b(u,!0),b(h," "),b(f,"  .");return}if(o().products[o().index].variants.length<1){b(u,!0),b(h," "),b(f,"1   .");return}if(o().products[o().index].variants.some(Fe=>Fe.quantity===0)){b(u,!0),b(h," "),b(f," 1  ");return}b(g,2)}function ce(){b(m,!0)}function be(){return I?Promise.resolve():new Promise(we=>{const Fe=document.createElement("script");Fe.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",Fe.onload=()=>{I=!0,we()},document.head.appendChild(Fe)})}async function x(){await be(),new window.daum.Postcode({oncomplete(we){if(b(y,we.zonecode),b(_,we.roadAddress||we.jibunAddress),we.userSelectedType==="R"){let Fe="";we.bname!==""&&/[||]$/g.test(we.bname)&&(Fe+=we.bname),we.buildingName!==""&&we.apartment==="Y"&&(Fe+=Fe!==""?", "+we.buildingName:we.buildingName),Fe!==""&&b(_,l(_)+(" ("+Fe+")"))}}}).open()}function F(){b(N,!0)}function E(we,Fe){const ue=we.target;ue.value.length>=parseInt(ue.getAttribute("maxlength")||"0")&&Fe&&Fe.focus()}function U(we){return we?we.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}async function P(){var we,Fe,ue,De,Pe,he,ee,ge,Se,Me,Qe,ot,Ye,Ce,de,Te,qe,je,Re,Ve;try{if(!o().estimateName||!o().organizationName||!o().orderName||!o().orderPhone||!o().shippingMethod){b(u,!0),b(h,"  "),b(f,", ,    .");return}if(!s().customer_id){const nt=U(o().password);if(!nt.valid){b(u,!0),b(h," "),b(f,nt.message);return}}const At={name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:l(y),address1:l(_),address2:l(C),comment:o().comment,password:s().customer_id?null:o().password,shipping_method:o().shippingMethod,pref_delivery_date:o().prefDeliveryDate,upload_memo:o().uploadMemo,sess:s().sess,customer_id:s().customer_id,mall_type:i().mallType,shop_id:s().id};let Ke;if((we=d())!=null&&we.id){Ke=await Od(d().id,At);const nt=await Bu(d().id);for(const mt of nt)mt.id&&await e5(mt.id);const ht=await Dd(d().id);for(const mt of ht)mt.id&&await t5(mt.id);for(let mt=0;mt<o().products.length;mt++)await h5(d().id,mt)}else Ke=await s1(At);if(!Ke.id)throw new Error("  .");for(let nt=0;nt<o().products.length;nt++){const ht=o().products[nt],mt=ht.discountInfo,St=mt==null?void 0:mt.discountDetails;for(const st of ht.variants)if(st.quantity>0){const tt=st.prices[0].amount;let Ft=tt,xt=0;const Ot=ht.variants.reduce((Dt,qt)=>Dt+(qt.quantity||0),0),Ze=bi(Ot,tt,ht.product.quantity_discounts);Ze.hasDiscount&&(Ft=Ze.discountedPrice,xt=Ze.discountAmount);const wt=ht.prints&&ht.prints.length>0?"detailed":ht.simplePrints&&ht.simplePrints.length>0?"simple":"none",gt={estimate_id:Ke.id,product_id:ht.product.id,variant_id:st.id,quantity:st.quantity,idx:nt,price:Ft,original_price:tt,discount_amount:xt,discount_type:((Fe=Ze==null?void 0:Ze.discountInfo)==null?void 0:Fe.type)||null,discount_value:((ue=Ze==null?void 0:Ze.discountInfo)==null?void 0:ue.value)||null,discount_direction:((De=Ze==null?void 0:Ze.discountInfo)==null?void 0:De.direction)||null,discount_min_quantity:((Pe=Ze==null?void 0:Ze.discountInfo)==null?void 0:Pe.min_quantity)||null,discount_max_quantity:((he=Ze==null?void 0:Ze.discountInfo)==null?void 0:he.max_quantity)||null,print_type:wt};await i1(gt)}if(ht.prints&&ht.prints.length>0)for(const st of ht.prints){const tt={estimate_id:Ke.id,idx:nt,template_id:st.template.id,variant_id:st.variant_id,price:st.price||0,colors:st.colors||null,uploads:st.uploads||null,name_sheet:st.nameSheet||null,object_id:st.objectId||null,original_price:((ee=st.discountInfo)==null?void 0:ee.originalPrice)||null,discount_amount:((ge=st.discountInfo)==null?void 0:ge.discountAmount)||null,discount_type:((Me=(Se=st.discountInfo)==null?void 0:Se.discountDetails)==null?void 0:Me.type)||null,discount_value:((ot=(Qe=st.discountInfo)==null?void 0:Qe.discountDetails)==null?void 0:ot.value)||null,discount_direction:((Ce=(Ye=st.discountInfo)==null?void 0:Ye.discountDetails)==null?void 0:Ce.direction)||null,discount_min_quantity:((Te=(de=st.discountInfo)==null?void 0:de.discountDetails)==null?void 0:Te.min_quantity)||null,discount_max_quantity:((je=(qe=st.discountInfo)==null?void 0:qe.discountDetails)==null?void 0:je.max_quantity)||null};await A1(tt)}if(ht.addons)for(const[st,tt]of Object.entries(ht.addons)){if(!tt.variantId||tt.variantId.trim()===""){console.warn("  variantId    :",tt);continue}let Ft=0;if(ht.addonProductsMap&&ht.addonProductsMap[tt.productId]){const Ze=ht.addonProductsMap[tt.productId].variants.find(wt=>wt.id===tt.variantId);Ze&&Ze.prices&&Ze.prices.length>0&&(Ft=Ze.prices[0].amount)}const xt={estimate_id:Ke.id,idx:nt,addon_id:st,selected_product_id:tt.productId,selected_variant_id:tt.variantId,price:Ft,quantity:ht.quantity||0};await u1(xt)}}console.log(" Estimate    ..."),await f1(Ke.id),console.log(" Estimate    "),b(u,!0),b(h,(Re=d())!=null&&Re.id?"  ":"  "),b(f,(Ve=d())!=null&&Ve.id?"  .":s().customer_id?"  .":"  .      ."),A(!1),i().mallType==="godo5"&&(window.location.href="/odiz/odiz_list.php")}catch(At){console.error("    :",At),b(u,!0),b(h," "),b(f,"    .  .")}}Fn(()=>{var we,Fe;if(Kt(It,lt(o).index=o().products.length,lt(o)),(we=d())!=null&&we.id){ne();const ue=Zp(d().id,De=>{d(De),b(X,zd(De.status))});return()=>{ue.unsubscribe()}}else a()&&R(a());if(!((Fe=d())!=null&&Fe.id)&&i())if(Kt(It,lt(o).orderName=i().name,lt(o)),Kt(It,lt(o).orderPhone=i().phone.replace(/-/g,""),lt(o)),b(_,i().address1),b(C,i().address2),b(y,i().postcode),i().phone){const ue=i().phone.replace(/-/g,"");Kt(It,lt(o).orderPhone=ue,lt(o)),ue.length>=3&&b(k,ue.slice(0,3)),ue.length>=7&&b(W,ue.slice(3,7)),ue.length>=11&&b(V,ue.slice(7,11))}else Kt(It,lt(o).orderPhone="",lt(o));be()});async function T(we){var Fe;b(le,!0);try{const ue=await Bu(we),De=await Dd(we),Pe=await eg(we);b(te,await h1(we));const he=[],ee={};for(const de of ue)if(de.product_id&&de.product){const Te=de.idx||0;if(ee[Te]||(ee[Te]={product:de.product,variants:[],quantity:0,prints:[],addons:{}}),de.variant_id&&de.quantity){const qe={id:de.variant_id,quantity:de.quantity,prices:[{amount:de.original_price||de.price||0}],thumbnail:((Fe=de.variant)==null?void 0:Fe.thumbnail)||null,title:de.variant_title||` ${de.variant_id.substring(0,4)}`};ee[Te].variants.push(qe),ee[Te].quantity+=de.quantity}}const ge=[];for(const de of De)if(de.template_id&&de.estimate_id){const Te=de.idx||0;if(ee[Te]){const qe=(async()=>{try{const je=await ju(de.template_id);let Re=null;try{Re=await Vd(de.template_id)}catch(Ke){console.warn("templateProduct  :",Ke)}const At={template:{id:de.template_id,name:je.length>0&&je[je.length-1].name||"",templateProduct:Re},parentTemplates:je,price:de.price||0,colors:de.colors?typeof de.colors=="string"?JSON.parse(de.colors):de.colors:[],uploads:de.uploads?typeof de.uploads=="string"?JSON.parse(de.uploads):de.uploads:null,nameSheet:de.name_sheet?typeof de.name_sheet=="string"?JSON.parse(de.name_sheet):de.name_sheet:null,title:je.length>0?je[0].name:"",objectId:de.object_id||null,variant_id:de.variant_id||null,discountInfo:de.original_price?{originalPrice:de.original_price,discountAmount:de.discount_amount||0,discountDetails:de.discount_type?{type:de.discount_type,value:de.discount_value||0,direction:de.discount_direction||null,min_quantity:de.discount_min_quantity||null,max_quantity:de.discount_max_quantity||null}:void 0,hasDiscount:(de.discount_amount||0)>0}:void 0};ee[Te].prints.push(At)}catch(je){console.error("    :",je);const Ve={template:{id:de.template_id,name:"",templateProduct:null},parentTemplates:[],price:de.price||0,colors:de.colors?typeof de.colors=="string"?JSON.parse(de.colors):de.colors:[],uploads:de.uploads?typeof de.uploads=="string"?JSON.parse(de.uploads):de.uploads:null,title:"",objectId:de.object_id||null,variant_id:de.variant_id||null,nameSheet:de.name_sheet?typeof de.name_sheet=="string"?JSON.parse(de.name_sheet):de.name_sheet:null,discountInfo:de.original_price?{originalPrice:de.original_price,discountAmount:de.discount_amount||0,discountDetails:de.discount_type?{type:de.discount_type,value:de.discount_value||0,direction:de.discount_direction||null,min_quantity:de.discount_min_quantity||null,max_quantity:de.discount_max_quantity||null}:void 0,hasDiscount:(de.discount_amount||0)>0}:void 0};ee[Te].prints.push(Ve)}})();ge.push(qe)}}await Promise.all(ge),Pe.forEach(de=>{const Te=de.idx||0;ee[Te]?(ee[Te].addons||(ee[Te].addons={}),ee[Te].addons[de.addon_id]={productId:de.selected_product_id,variantId:de.selected_variant_id||""}):console.log(`productGroups[${Te}]  `)});const Se=[];for(const de in ee){const Te=ee[de];if(Te.product&&Object.keys(Te.addons||{}).length>0){const qe=(async()=>{try{const je=await Mu(Te.product.id);Te.addonProductsMap={},je.forEach(Re=>{Re.items.forEach(Ve=>{var At,Ke,nt;Ve.addon_product&&((nt=(Ke=(At=Ve.addon_product.variants)==null?void 0:At[0])==null?void 0:Ke.prices)!=null&&nt[0])&&(Te.addonProductsMap[Ve.addon_product.id]={price:Ve.addon_product.variants[0].prices[0].amount,title:Ve.addon_product.title,variants:Ve.addon_product.variants})})})}catch(je){console.error(`idx ${de}    :`,je),Te.addonProductsMap={}}})();Se.push(qe)}he.push(Te)}await Promise.all(Se),U_(It,{...o(),products:he,index:(he.length>0,0)});const Me=he.reduce((de,Te)=>de+Te.quantity,0),Qe=he.reduce((de,Te)=>de+(Te.variants||[]).reduce((qe,je)=>{const Re=je.quantity||0;return qe+je.prices[0].amount*Re},0),0),ot=he.reduce((de,Te)=>de+(Te.prints||[]).reduce((qe,je)=>qe+(je.price||0),0),0),Ye=he.reduce((de,Te)=>{if(!Te.addons||Object.keys(Te.addons).length===0||!Te.addonProductsMap)return de;const qe=Te.quantity||0,je=Object.values(Te.addons).reduce((Re,Ve)=>{const At=Te.addonProductsMap[Ve.productId];if(At&&Ve.variantId){const Ke=At.variants.find(nt=>nt.id===Ve.variantId);if(Ke&&Ke.prices&&Ke.prices.length>0){const nt=Ke.prices[0].amount*qe;return Re+nt}}return Re},0);return de+je},0),Ce=l(te).reduce((de,Te)=>de+Number(Te.amount),0);Kt(It,lt(o).totalQuantity=Me,lt(o)),Kt(It,lt(o).totalProductAmount=Qe,lt(o)),Kt(It,lt(o).totalPrintAmount=ot,lt(o)),Kt(It,lt(o).totalAddonAmount=Ye,lt(o)),Kt(It,lt(o).totalAdditionalAmount=Ce,lt(o)),Kt(It,lt(o).totalAmount=Qe+ot+Ye+Ce,lt(o)),setTimeout(()=>{It.updateTotalAmounts()},200)}catch(ue){console.error("     :",ue),Kt(It,lt(o).products=[],lt(o))}finally{b(le,!1)}}function R(we){b(O,!1),a(we),Kt(It,lt(o).index=o().products.length,lt(o)),b(g,1)}Jt(()=>(l(N),l(m),l(c)),()=>{var we;(l(N)||l(m))&&(b(c,(we=document.getElementById("estimate-modal"))==null?void 0:we.querySelector(".odz-modal-box")),l(c)&&fr(c,l(c).scrollTop=0))}),Jt(()=>(o(),l(k),l(W),l(V)),()=>{if(o().orderPhone&&!l(k)&&!l(W)&&!l(V)){const we=o().orderPhone;we.length>=3&&b(k,we.slice(0,3)),we.length>=7&&b(W,we.slice(3,7)),we.length>=11&&b(V,we.slice(7,11))}}),Jt(()=>(l(k),l(W),l(V)),()=>{Kt(It,lt(o).orderPhone=`${l(k)}${l(W)}${l(V)}`,lt(o))}),Jt(()=>(l(u),l(c)),()=>{var we;l(u)&&(b(c,(we=document.getElementById("estimate-modal"))==null?void 0:we.querySelector(".odz-modal-box")),l(c)&&fr(c,l(c).scrollTop=0))}),Jt(()=>l(M),()=>{l(M)&&Kt(It,lt(o).prefDeliveryDate=new Date(l(M)).toISOString(),lt(o))}),to(),Rr();var q=gM(),j=ft(q);{var Ae=we=>{var Fe=XN(),ue=ft(Fe),De=w(ue),Pe=w(De),he=z(Pe,2),ee=z(ue,2);{var ge=Me=>{var Qe=VN(),ot=w(Qe);{var Ye=de=>{hF(de,{get productId(){return a()},get step(){return l(g)},set step(Te){b(g,Te)},$$legacy:!0})},Ce=de=>{var Te=$N(),qe=z(w(Te),6);at("click",qe,()=>b(O,!0)),L(de,Te)};ze(ot,de=>{a()&&a().trim()!==""?de(Ye):de(Ce,!1)})}L(Me,Qe)},Se=Me=>{var Qe=kt(),ot=ft(Qe);{var Ye=de=>{var Te=GN(),qe=w(Te);const je=dt(()=>{var Re;return(Re=d())==null?void 0:Re.id});TB(qe,{get productId(){return a()},get estimateId(){return l(je)},get idx(){return o().index},get step(){return l(g)},set step(Re){b(g,Re)},$$legacy:!0}),L(de,Te)},Ce=de=>{var Te=kt(),qe=ft(Te);{var je=Re=>{var Ve=WN();L(Re,Ve)};ze(qe,Re=>{l(g)===3&&Re(je)},!0)}L(de,Te)};ze(ot,de=>{l(g)===2?de(Ye):de(Ce,!1)},!0)}L(Me,Qe)};ze(ee,Me=>{l(g)===1?Me(ge):Me(Se,!1)})}He(()=>{Cr(Pe,`odz-tab ${(l(g)===1?"odz-tab-active":"")??""}`),Cr(he,`odz-tab ${(l(g)===2?"odz-tab-active":"")??""}`)}),at("click",Pe,Z),at("click",he,se),L(we,Fe)},Ee=we=>{var Fe=sM(),ue=ft(Fe);{var De=Ye=>{var Ce=YN();L(Ye,Ce)},Pe=Ye=>{var Ce=ZN(),de=z(w(Ce),2);z5(de,{onSelectProduct:Be,get isEditable(){return l(X)},set isEditable(Ve){b(X,Ve)},$$legacy:!0});var Te=z(de,2),qe=w(Te);{var je=Ve=>{var At=JN(),Ke=w(At);yu(Ke,{class:"odz-w-5 odz-h-5 odz-mr-2"}),at("click",At,()=>b(O,!0)),L(Ve,At)};ze(qe,Ve=>{l(X)&&Ve(je)})}var Re=z(Te,2);KN(Re,{get additionalCosts(){return l(te)},get isEditable(){return l(X)}}),L(Ye,Ce)};ze(ue,Ye=>{l(le)?Ye(De):Ye(Pe,!1)})}var he=z(ue,2);{var ee=Ye=>{W1(Ye,{addProduct:R,productType:"godo",get isProductSearchOpen(){return l(O)},set isProductSearchOpen(Ce){b(O,Ce)},$$legacy:!0})};ze(he,Ye=>{l(O)&&Ye(ee)})}var ge=z(he,2),Se=w(ge),Me=w(Se);{var Qe=Ye=>{var Ce=eM();L(Ye,Ce)},ot=Ye=>{var Ce=oM(),de=ft(Ce),Te=w(de),qe=z(w(Te)),je=w(qe);Wa(je,{class:"odz-text-error",size:10});var Re=z(Te,2);{var Ve=Gt=>{var kr=rM(),zn=w(kr),zo=w(zn),Ns=z(zn,2);{var Pn=ni=>{var La=tM();L(ni,La)};ze(Ns,ni=>{l(X)||ni(Pn)})}He(()=>{Cr(zn,`odz-badge odz-badge-${(d().status==="pending"?"warning":d().status==="progress"?"info":d().status==="completed"?"success":"error")??""}`),Le(zo,d().status==="pending"?"":d().status==="progress"?"":d().status==="completed"?"":"")}),L(Gt,kr)};ze(Re,Gt=>{var kr;(kr=d())!=null&&kr.id&&Gt(Ve)})}var At=z(de,2),Ke=w(At),nt=w(Ke),ht=w(nt),mt=w(ht);Wa(mt,{class:"odz-text-error",size:12});var St=z(nt,2),st=z(Ke,2),tt=w(st),Ft=w(tt),xt=w(Ft);Wa(xt,{class:"odz-text-error",size:12});var Ot=z(tt,2),Ze=z(st,2),wt=w(Ze),gt=w(wt),Dt=w(gt);Wa(Dt,{class:"odz-text-error",size:12});var qt=z(wt,2),zt=z(Ze,2),Mt=w(zt),jt=w(Mt),Ct=w(jt);Wa(Ct,{class:"odz-text-error",size:12});var Et=z(Mt,2),Nt=w(Et);ss(Nt,Gt=>b(H,Gt),()=>l(H));var Zt=z(Nt,2);ss(Zt,Gt=>b(J,Gt),()=>l(J));var nr=z(Zt,2);ss(nr,Gt=>b(xe,Gt),()=>l(xe));var ir=z(At,2),sr=w(ir),dr=w(sr),Jr=w(dr);Wa(Jr,{class:"odz-text-error",size:12});var sn=z(sr,2),lr=w(sn),cr=z(lr,2),qr=z(cr,2),Pr=z(sn,2),_r=z(Pr,2),wr=z(ir,4),Qr=w(wr),Wr=w(Qr),vn=w(Wr),Hr=w(vn);Wa(Hr,{class:"odz-text-error",size:12});var pr=z(Wr,2);He(()=>{o(),sp(()=>{l(X)})});var In=w(pr);In.value=((In.__value="")==null,"");var To=z(In);To.value=(To.__value="delivery")==null?"":"delivery";var ro=z(To);ro.value=(ro.__value="pickup")==null?"":"pickup";var xo=z(ro);xo.value=(xo.__value="quick")==null?"":"quick";var as=z(Qr,2),Tn=z(w(as),2),Lo=z(wr,2);{var Ln=Gt=>{var kr=nM(),zn=w(kr),zo=w(zn),Ns=w(zo);Wa(Ns,{class:"odz-text-error",size:12});var Pn=z(zn,2);He(()=>Pn.readOnly=!l(X)),yr(Pn,()=>o().password,ni=>Kt(It,lt(o).password=ni,lt(o))),L(Gt,kr)};ze(Lo,Gt=>{s().customer_id||Gt(Ln)})}var Po=z(Lo,2),ri=z(w(Po),2),ta=z(Po,2),Ds=w(ta),or=w(Ds);mw(or,{class:"odz-w-5 odz-h-5 odz-mr-2"});var Vr=z(Ds,2),bn=w(Vr);mw(bn,{class:"odz-w-5 odz-h-5 odz-mr-2"});var lo=z(bn,2);{var no=Gt=>{var kr=en(" ");L(Gt,kr)},Vo=Gt=>{var kr=en(" ");L(Gt,kr)};ze(lo,Gt=>{var kr;(kr=d())!=null&&kr.id?Gt(no):Gt(Vo,!1)})}He(Gt=>{St.readOnly=!l(X),Ot.readOnly=!l(X),qt.readOnly=!l(X),Nt.readOnly=!l(X),Zt.readOnly=!l(X),nr.readOnly=!l(X),Pr.readOnly=!l(X),_r.readOnly=!l(X),pr.disabled=!l(X),Tn.disabled=!l(X),rr(Tn,"min",Gt),ri.readOnly=!l(X),Vr.disabled=!l(X)},[()=>new Date().toISOString().split("T")[0]],dt),yr(St,()=>o().estimateName,Gt=>Kt(It,lt(o).estimateName=Gt,lt(o))),yr(Ot,()=>o().organizationName,Gt=>Kt(It,lt(o).organizationName=Gt,lt(o))),yr(qt,()=>o().orderName,Gt=>Kt(It,lt(o).orderName=Gt,lt(o))),yr(Nt,()=>l(k),Gt=>b(k,Gt)),at("input",Nt,Gt=>E(Gt,l(J))),yr(Zt,()=>l(W),Gt=>b(W,Gt)),at("input",Zt,Gt=>E(Gt,l(xe))),yr(nr,()=>l(V),Gt=>b(V,Gt)),at("input",nr,Gt=>E(Gt)),yr(lr,()=>l(y),Gt=>b(y,Gt)),at("click",cr,x),at("click",qr,F),yr(Pr,()=>l(_),Gt=>b(_,Gt)),yr(_r,()=>l(C),Gt=>b(C,Gt)),ip(pr,()=>o().shippingMethod,Gt=>Kt(It,lt(o).shippingMethod=Gt,lt(o))),yr(Tn,()=>l(M),Gt=>b(M,Gt)),yr(ri,()=>o().comment,Gt=>Kt(It,lt(o).comment=Gt,lt(o))),at("click",Ds,ce),at("click",Vr,P),L(Ye,Ce)};ze(Me,Ye=>{l(le)?Ye(Qe):Ye(ot,!1)})}L(we,Fe)};ze(j,we=>{l(g)>0?we(Ae):we(Ee,!1)})}var _e=z(j,2),Oe=w(_e);{var G=we=>{var Fe=iM();L(we,Fe)},D=we=>{var Fe=fM(),ue=w(Fe),De=z(w(ue),2),Pe=w(De),he=z(ue,2),ee=z(w(he),2),ge=w(ee),Se=z(ee,2);{var Me=Ze=>{var wt=aM();const gt=dt(()=>o().products.reduce((Ct,Et)=>{var Nt;return Ct+(((Nt=Et.discountInfo)==null?void 0:Nt.originalAmount)||0)},0)),Dt=dt(()=>o().products.reduce((Ct,Et)=>{var Nt;return Ct+(((Nt=Et.discountInfo)==null?void 0:Nt.discountAmount)||0)},0));var qt=ft(wt),zt=w(qt),Mt=z(qt,2),jt=w(Mt);He((Ct,Et)=>{Le(zt,`${Ct??""}`),Le(jt,`-${Et??""} `)},[()=>vr(l(gt)),()=>vr(l(Dt))],dt),L(Ze,wt)},Qe=Ze=>{var wt=AM();L(Ze,wt)};ze(Se,Ze=>{o().products.some(wt=>{var gt;return(gt=wt.discountInfo)==null?void 0:gt.hasDiscount})?Ze(Me):Ze(Qe,!1)})}var ot=z(he,2),Ye=z(w(ot),2),Ce=w(Ye);{var de=Ze=>{var wt=lM();L(Ze,wt)},Te=Ze=>{var wt=en();He(gt=>Le(wt,`${gt??""}`),[()=>vr(o().totalPrintAmount)],dt),L(Ze,wt)};ze(Ce,Ze=>{o().totalPrintAmount===0?Ze(de):Ze(Te,!1)})}var qe=z(Ye,2);{var je=Ze=>{var wt=dM();L(Ze,wt)},Re=Ze=>{var wt=kt(),gt=ft(wt);{var Dt=zt=>{var Mt=cM();L(zt,Mt)},qt=zt=>{var Mt=kt(),jt=ft(Mt);{var Ct=Nt=>{var Zt=uM();L(Nt,Zt)},Et=Nt=>{var Zt=hM();L(Nt,Zt)};ze(jt,Nt=>{o().products.some(Zt=>Zt.print_type==="none")?Nt(Ct):Nt(Et,!1)},!0)}L(zt,Mt)};ze(gt,zt=>{o().products.some(Mt=>Mt.print_type==="simple")?zt(Dt):zt(qt,!1)},!0)}L(Ze,wt)};ze(qe,Ze=>{o().totalPrintAmount>0?Ze(je):Ze(Re,!1)})}var Ve=z(ot,2),At=z(w(Ve),2),Ke=w(At),nt=z(Ve,2),ht=z(w(nt),2),mt=w(ht),St=z(ht,2),st=w(St),tt=z(st);{var Ft=Ze=>{var wt=en("+ ( )");L(Ze,wt)};ze(tt,Ze=>{o().totalPrintAmount>0&&Ze(Ft)})}var xt=z(tt,2);{var Ot=Ze=>{var wt=en();He(gt=>Le(wt,`+ ${gt??""}`),[()=>vr(o().totalAdditionalAmount)],dt),L(Ze,wt)};ze(xt,Ze=>{o().totalAdditionalAmount>0&&Ze(Ot)})}He((Ze,wt,gt)=>{Le(Pe,`${o().totalQuantity||0}`),Le(ge,`${Ze??""}`),Le(Ke,`${wt??""}`),Le(mt,`${gt??""}`),Le(st,` ${Ze??""} + 
          ${wt??""} `)},[()=>vr(o().totalProductAmount),()=>vr(o().totalAddonAmount),()=>vr(o().totalAmount)],dt),L(we,Fe)};ze(Oe,we=>{l(le)?we(G):we(D,!1)})}var ie=z(_e,2);{var me=we=>{var Fe=pM(),ue=w(Fe),De=z(w(ue),4),Pe=w(De);at("click",Pe,()=>b(N,!1)),L(we,Fe)};ze(ie,we=>{l(N)&&we(me)})}var pe=z(ie,2);{var oe=we=>{FN(we,{get isOpen(){return l(m)},set isOpen(Fe){b(m,Fe)},$$legacy:!0})};ze(pe,we=>{l(m)&&we(oe)})}var ye=z(pe,2);Gd(ye,{get isOpen(){return l(u)},set isOpen(we){b(u,we)},get title(){return l(h)},set title(we){b(h,we)},get message(){return l(f)},set message(we){b(f,we)},$$legacy:!0});var Ne=z(ye,2);Wd(Ne,{get isLoading(){return l(le)},set isLoading(we){b(le,we)},$$legacy:!0}),L(n,q),Mr(),r()}var mM=Y('<div class="odz-alert odz-alert-error"> </div>'),wM=Y('<div class="odz-mb-4"><!></div>'),yM=Y('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),bM=Y('<div><h4 class="odz-font-semibold odz-mb-2"> </h4> <div class="odz-flex odz-flex-col odz-justify-center"></div></div>'),_M=Y('<p class="odz-text-base odz-font-semibold odz-mb-3"> </p>'),BM=Y('<div class="odz-border odz-rounded-lg odz-p-2 odz-w-full sm:odz-w-48 md:odz-w-56 odz-flex odz-items-center odz-gap-3"><img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0"> <div class="odz-flex-grow odz-min-w-0"><p class="odz-text-xs odz-font-medium odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div>'),xM=Y('<div class="odz-mb-4"><!> <div class="odz-flex odz-flex-wrap odz-gap-3"></div></div>'),zM=Y('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),CM=Y('<div class="odz-flex odz-flex-col odz-justify-center"></div>'),SM=Y('<p class="odz-text-xs odz-text-gray-500">     .</p>'),EM=Y('<div class="odz-mb-2"><h6 class="odz-font-medium odz-text-sm odz-mb-2"> </h6> <!></div>'),FM=Y('<div class="odz-mb-6 odz-p-4 odz-border odz-rounded-lg"><h5 class="odz-font-medium odz-text-base odz-mb-3"> </h5> <!> <!></div>'),IM=Y("<div></div>"),UM=Y('<p class="odz-text-center odz-text-gray-500 odz-py-4">   .</p>'),QM=Y('<div class="odz-mt-4"><!></div>'),TM=Y('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1">[]</div> <div class="odz-chat-bubble odz-text-sm odz-chat-bubble-success odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),LM=Y('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"></div> <div class="odz-chat-bubble odz-chat-bubble-secondary odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),PM=Y('<div class="odz-chat odz-chat-start"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"> </div> <div class="odz-chat-bubble odz-chat-bubble-gray"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),kM=Y('<p class="odz-text-center odz-text-sm odz-text-gray-500">  .</p>'),OM=Y('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),DM=Y('<div role="alert" class="odz-alert odz-alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> :    .</span></div>'),NM=Y('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),MM=Y('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),HM=Y('<div role="alert" class="odz-alert odz-alert-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),jM=Y('<div role="alert" class="odz-alert odz-alert-success odz-alert-outline"><span> :   .</span></div>'),RM=Y('<button class="odz-btn odz-btn-success"> </button> <button class="odz-btn odz-btn-error"> </button>',1),qM=Y('<div class="odz-space-y-6"><!> <!> <!> <!></div> <div class="odz-divider odz-my-6"></div> <div class="odz-space-y-4"><div class="odz-max-h-60 odz-overflow-y-auto odz-p-2 odz-bg-base-200 odz-rounded-lg odz-space-y-3"></div> <div class="odz-flex odz-gap-2 odz-items-center"><input type="text" placeholder=" ..." class="odz-input odz-input-bordered odz-flex-grow"> <button class="odz-btn odz-btn-primary"><!> </button></div></div> <div class="odz-mt-6"><!></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <!></div>',1),KM=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4"> </h3> <!></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),$M=Y('<div class="odz-flex odz-gap-4"><label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label> <label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label></div>'),VM=Y('<input type="checkbox" class="odz-checkbox odz-checkbox-sm">'),GM=Y('<div class="odz-form-control"><label class="odz-label odz-cursor-pointer odz-gap-4"><span class="odz-label-text odz-text-xs"> </span> <!></label></div>'),WM=Y('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>   ...',1),XM=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-font-bold odz-text-lg">    </h3> <p class="odz-py-4 odz-text-sm">       .</p> <div class="odz-form-control odz-mb-4"><label class="odz-label odz-cursor-pointer"><span class="odz-label-text odz-font-semibold"> .</span> <input type="checkbox" class="odz-checkbox odz-checkbox-primary"></label></div> <div class="odz-space-y-2 odz-border-t odz-border-b odz-py-4 odz-max-h-60 odz-overflow-y-auto"></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <button class="odz-btn odz-btn-primary"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),YM=Y('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>  ...',1),JM=Y('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box"><h3 class="odz-font-bold odz-text-lg odz-mb-4">   </h3> <textarea class="odz-textarea odz-textarea-bordered odz-w-full odz-h-32" placeholder="   ..."></textarea> <div class="odz-modal-action odz-mt-4"><button class="odz-btn"></button> <button class="odz-btn odz-btn-error"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),ZM=Y("<!> <!> <!> <!>",1);function e7(n,e){Nr(e,!1);let t=vt(e,"estimateId",8),r=vt(e,"isOpen",12),o=Ue(null),s=Ue(!0),i=Ue(null),a=Ue({}),A=Ue([]),d=Ue(""),c=Ue(""),u=null,h=null,f=null,g=Ue(!1),m=Ue(""),y=Ue(""),_=Ue([]),C=Ue(""),I=Ue(!1),N=Ue(),k=Ue(!1),W=Ue(""),V=Ue(!1),H=Ue(!1),J=Ue([!1,!1,!1,!1,!1,!1,!1]),xe=Ue(!1),M=Ue(!1);const O=["     .","          .","    .","    ,    ?","           .","   , ,       .","    ? ( ,  3 )"];function X(G){if(!G)return null;try{return typeof G=="object"&&G!==null?G:JSON.parse(G)}catch(D){return console.error("Failed to parse JSON:",D,"Input:",G),null}}async function te(){await Oi(),l(N)&&fr(N,l(N).scrollTop=l(N).scrollHeight)}function le(){var D;if(!l(o))return;if((D=l(o).estimate)!=null&&D.design_uploads){const ie=typeof l(o).estimate.design_uploads=="string"?X(l(o).estimate.design_uploads):l(o).estimate.design_uploads;ie&&Array.isArray(ie.files)?b(A,ie.files.map(me=>({url:me.url,name:me.name}))):b(A,[]),b(d,(ie==null?void 0:ie.topHTML)||""),b(c,(ie==null?void 0:ie.bottomHTML)||"")}else b(A,[]),b(d,""),b(c,"");const G={};l(o).items.length>0&&(l(o).items.forEach(ie=>{const me=ie.idx??0;G[me]||(G[me]={items:[],prints:[]}),G[me].items.push(ie)}),l(o).prints.forEach(ie=>{const me=ie.idx??0;G[me]||(console.warn(`Print found for idx ${me} but no corresponding item group exists.`),G[me]={items:[],prints:[]});const pe=typeof ie.design_uploads=="string"?X(ie.design_uploads):ie.design_uploads;ie.parsed_uploads=(pe==null?void 0:pe.files)||[],G[me].prints.find(ye=>ye.id===ie.id)||G[me].prints.push(ie)})),b(a,G),console.log("Processed and grouped data:",l(a)),Object.entries(l(a)).forEach(([ie,me])=>{console.log(`idx ${ie}: ${me.prints.length} print(s)`,me.prints.map(pe=>{var oe;return{id:pe.id,parsed_uploads_count:(oe=pe.parsed_uploads)==null?void 0:oe.length}}))})}Fn(async()=>{if(!t()){b(i," ID  ."),b(s,!1);return}b(s,!0),b(i,null);try{const[G,D]=await Promise.all([l1(t()),o5(t())]);b(o,G),b(_,D),console.log("Fetched initial details in component:",l(o)),console.log("Fetched initial comments in component:",l(_)),le(),u=Zp(t(),ie=>{console.log("Received estimate update:",ie),l(o)&&(fr(o,l(o).estimate={...l(o).estimate,...ie}),le())}),console.log("Subscribed to estimate changes:",u),h=d1(t(),ie=>{console.log("Received comment update payload:",ie),ie.eventType==="INSERT"&&ie.new?b(_,[...l(_),ie.new]):ie.eventType==="DELETE"&&ie.old?b(_,l(_).filter(me=>me.id!==ie.old.id)):ie.eventType==="UPDATE"&&ie.new&&b(_,l(_).map(me=>{var pe;return me.id===((pe=ie.new)==null?void 0:pe.id)?{...me,...ie.new}:me})),te()}),console.log("Subscribed to comment changes:",h),f=c1(t(),ie=>{if(console.log("Received print update payload:",ie),l(o)){let me=!1;if(ie.eventType==="INSERT"&&ie.new)fr(o,l(o).prints=[...l(o).prints,ie.new]),me=!0;else if(ie.eventType==="DELETE"&&ie.old){const pe=l(o).prints.length;fr(o,l(o).prints=l(o).prints.filter(oe=>oe.id!==ie.old.id)),l(o).prints.length<pe&&(me=!0)}else if(ie.eventType==="UPDATE"&&ie.new){const pe=l(o).prints.findIndex(oe=>{var ye;return oe.id===((ye=ie.new)==null?void 0:ye.id)});pe!==-1&&(fr(o,l(o).prints[pe]={...l(o).prints[pe],...ie.new}),me=!0)}me&&(le(),console.log("Prints array updated, re-processed data"))}}),console.log("Subscribed to print changes:",f),te()}catch(G){console.error("Error loading initial data or subscribing:",G),b(i,"        .")}finally{b(s,!1)}}),Qo(()=>{u&&(console.log("Unsubscribing from estimate changes"),u.unsubscribe()),h&&(console.log("Unsubscribing from comment changes"),h.unsubscribe()),f&&(console.log("Unsubscribing from print changes"),f.unsubscribe())});function ne(){r(!1)}function Be(){b(J,Array(O.length).fill(!1)),b(xe,!1),b(H,!0)}function Z(){b(H,!1)}function se(){for(let G=0;G<O.length-1;G++)fr(J,l(J)[G]=l(xe));b(J,[...l(J)]),console.log({confirmationChecks:l(J)})}function ce(G,D){fr(J,l(J)[G]=D),G<O.length-1&&b(xe,l(J).slice(0,-1).every(ie=>ie===!0)),b(J,[...l(J)])}function be(){b(W,""),b(k,!0)}function x(){b(k,!1)}async function F(){var me,pe;if(!l(W).trim()){b(m," "),b(y,"   ."),b(g,!0);return}if(!((pe=(me=l(o))==null?void 0:me.estimate)!=null&&pe.id))return;const G=l(o).estimate.id;b(V,!0);let D=null,ie=null;try{try{await kf({estimate_id:G,comment:`[] ${l(W)}`,system:!1,writer:"customer"}),console.log("Rejection comment added successfully.")}catch(oe){throw D=oe,console.error("Error adding rejection comment:",D),new Error("     .")}try{await Od(G,{design_confirm:"processing"}),console.log("Estimate status updated to processing.")}catch(oe){throw ie=oe,console.error("Error updating estimate status after rejection:",ie),new Error("    .")}x(),ne()}catch(oe){console.error("Error during rejection process:",oe),b(m,""),b(y,oe.message||"     ."),b(g,!0)}finally{b(V,!1)}}async function E(){var pe,oe;if(!((oe=(pe=l(o))==null?void 0:pe.estimate)!=null&&oe.id))return;const G=l(o).estimate.id,D=l(J)[O.length-1];b(M,!0);let ie=null,me=null;try{await Od(G,{design_confirm:"completed",use_reorder:D,...l(o).estimate.auto_complete_on_approval?{status:"completed"}:{}}),console.log(`Estimate status updated to completed with use_reorder: ${D}.`);try{await kf({estimate_id:G,comment:"",system:!0,writer:"customer"}),console.log("System comment added successfully with writer as customer.")}catch(ye){me=ye,console.error("Error adding system comment after approval:",me)}}catch(ye){ie=ye,console.error("Error approving design:",ie)}finally{b(M,!1),ie?(b(m,""),b(y,"      ."),b(g,!0)):me?(b(m,""),b(y," ,      ."),b(g,!0)):(Z(),ne())}}async function U(){var G,D;if(!(!l(C).trim()||!((D=(G=l(o))==null?void 0:G.estimate)!=null&&D.id))){b(I,!0);try{await kf({estimate_id:l(o).estimate.id,comment:l(C),system:!1,writer:"customer"}),b(C,"")}catch(ie){console.error("Error sending comment:",ie),b(m,""),b(y,"    ."),b(g,!0)}finally{b(I,!1)}}}function P(G){if(!G)return"";try{return new Date(G).toLocaleString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return G}}Rr();var T=ZM(),R=ft(T);{var q=G=>{var D=KM(),ie=w(D),me=w(ie),pe=z(me,2),oe=w(pe),ye=z(pe,2);{var Ne=De=>{Wd(De,{get isLoading(){return l(s)},set isLoading(Pe){b(s,Pe)},$$legacy:!0})},we=De=>{var Pe=kt(),he=ft(Pe);{var ee=Se=>{var Me=mM(),Qe=w(Me);He(()=>Le(Qe,l(i))),L(Se,Me)},ge=Se=>{var Me=kt(),Qe=ft(Me);{var ot=Ye=>{var Ce=qM(),de=ft(Ce),Te=w(de);{var qe=Ct=>{var Et=wM(),Nt=w(Et);gv(Nt,()=>l(d),!1,!1),L(Ct,Et)};ze(Te,Ct=>{l(d)&&Ct(qe)})}var je=z(Te,2);{var Re=Ct=>{var Et=bM(),Nt=z(w(Et),2);Yt(Nt,5,()=>l(A),Ar,(Zt,nr)=>{var ir=yM(),sr=w(ir);He(()=>{rr(sr,"src",l(nr).url),rr(sr,"alt",l(nr).name)}),L(Zt,ir)}),L(Ct,Et)};ze(je,Ct=>{l(A).length>0&&Ct(Re)})}var Ve=z(je,2);{var At=Ct=>{var Et=IM();Yt(Et,5,()=>Object.entries(l(a)),Ar,(Nt,Zt)=>{let nr=()=>l(Zt)[0],ir=()=>l(Zt)[1];var sr=FM(),dr=w(sr),Jr=w(dr),sn=z(dr,2);{var lr=Pr=>{var _r=xM(),wr=w(_r);{var Qr=vn=>{var Hr=_M(),pr=w(Hr);He(()=>Le(pr,ir().items[0].product.title)),L(vn,Hr)};ze(wr,vn=>{var Hr;(Hr=ir().items[0].product)!=null&&Hr.title&&vn(Qr)})}var Wr=z(wr,2);Yt(Wr,5,()=>ir().items,Ar,(vn,Hr)=>{var pr=BM(),In=w(pr),To=z(In,2),ro=w(To),xo=w(ro),as=z(ro,2),Tn=w(as);He(()=>{var Lo,Ln,Po;rr(In,"src",((Lo=l(Hr).variant)==null?void 0:Lo.thumbnail)||l(Hr).thumbnail||"/placeholder.png"),rr(In,"alt",l(Hr).variant_title||((Ln=l(Hr).variant)==null?void 0:Ln.title)),Le(xo,l(Hr).variant_title||((Po=l(Hr).variant)==null?void 0:Po.title)||"  "),Le(Tn,`${l(Hr).quantity??""}`)}),L(vn,pr)}),L(Pr,_r)};ze(sn,Pr=>{ir().items.length>0&&Pr(lr)})}var cr=z(sn,2);{var qr=Pr=>{var _r=EM();const wr=dt(()=>ir().prints[0]),Qr=dt(()=>{var pr;return((pr=l(wr))==null?void 0:pr.parsed_uploads)||[]});var Wr=z(w(_r),2);{var vn=pr=>{var In=CM();Yt(In,5,()=>l(Qr),Ar,(To,ro)=>{var xo=zM(),as=w(xo);He(()=>{rr(as,"src",l(ro).url),rr(as,"alt",l(ro).name)}),L(To,xo)}),L(pr,In)},Hr=pr=>{var In=SM();L(pr,In)};ze(Wr,pr=>{l(Qr).length>0?pr(vn):pr(Hr,!1)})}L(Pr,_r)};ze(cr,Pr=>{ir().prints.length>0&&Pr(qr)})}He(Pr=>{rr(sr,"data-idx",nr()),Le(Jr,` ${Pr??""}`)},[()=>Number(nr())+1],dt),L(Nt,sr)}),L(Ct,Et)},Ke=Ct=>{var Et=kt(),Nt=ft(Et);{var Zt=nr=>{var ir=UM();L(nr,ir)};ze(Nt,nr=>{l(A).length===0&&nr(Zt)},!0)}L(Ct,Et)};ze(Ve,Ct=>{Object.keys(l(a)).length>0?Ct(At):Ct(Ke,!1)})}var nt=z(Ve,2);{var ht=Ct=>{var Et=QM(),Nt=w(Et);gv(Nt,()=>l(c),!1,!1),L(Ct,Et)};ze(nt,Ct=>{l(c)&&Ct(ht)})}var mt=z(de,4),St=w(mt);Yt(St,5,()=>l(_),Ct=>Ct.id,(Ct,Et)=>{var Nt=kt(),Zt=ft(Nt);{var nr=sr=>{var dr=TM(),Jr=z(w(dr),2),sn=w(Jr),lr=z(sn),cr=w(lr);He(qr=>{Le(sn,`${l(Et).comment??""} `),Le(cr,qr)},[()=>P(l(Et).created_at)],dt),L(sr,dr)},ir=sr=>{var dr=kt(),Jr=ft(dr);{var sn=cr=>{var qr=LM(),Pr=z(w(qr),2),_r=w(Pr),wr=z(_r),Qr=w(wr);He(Wr=>{Le(_r,`${l(Et).comment??""} `),Le(Qr,Wr)},[()=>P(l(Et).created_at)],dt),L(cr,qr)},lr=cr=>{var qr=PM(),Pr=w(qr),_r=w(Pr),wr=z(Pr,2),Qr=w(wr),Wr=z(Qr),vn=w(Wr);He(Hr=>{Le(_r,l(Et).writer||""),Le(Qr,`${l(Et).comment??""} `),Le(vn,Hr)},[()=>P(l(Et).created_at)],dt),L(cr,qr)};ze(Jr,cr=>{l(Et).writer==="customer"?cr(sn):cr(lr,!1)},!0)}L(sr,dr)};ze(Zt,sr=>{l(Et).system?sr(nr):sr(ir,!1)})}L(Ct,Nt)},Ct=>{var Et=kM();L(Ct,Et)}),ss(St,Ct=>b(N,Ct),()=>l(N));var st=z(St,2),tt=w(st),Ft=z(tt,2),xt=w(Ft);{var Ot=Ct=>{var Et=OM();L(Ct,Et)};ze(xt,Ct=>{l(I)&&Ct(Ot)})}var Ze=z(mt,2),wt=w(Ze);{var gt=Ct=>{var Et=DM();L(Ct,Et)},Dt=Ct=>{var Et=kt(),Nt=ft(Et);{var Zt=ir=>{var sr=NM();L(ir,sr)},nr=ir=>{var sr=kt(),dr=ft(sr);{var Jr=lr=>{var cr=MM();L(lr,cr)},sn=lr=>{var cr=kt(),qr=ft(cr);{var Pr=wr=>{var Qr=HM();L(wr,Qr)},_r=wr=>{var Qr=kt(),Wr=ft(Qr);{var vn=Hr=>{var pr=jM();L(Hr,pr)};ze(Wr,Hr=>{var pr,In;((In=(pr=l(o))==null?void 0:pr.estimate)==null?void 0:In.design_confirm)==="completed"&&Hr(vn)},!0)}L(wr,Qr)};ze(qr,wr=>{var Qr,Wr;((Wr=(Qr=l(o))==null?void 0:Qr.estimate)==null?void 0:Wr.design_confirm)==="confirming"?wr(Pr):wr(_r,!1)},!0)}L(lr,cr)};ze(dr,lr=>{var cr,qr;((qr=(cr=l(o))==null?void 0:cr.estimate)==null?void 0:qr.design_confirm)==="processing"?lr(Jr):lr(sn,!1)},!0)}L(ir,sr)};ze(Nt,ir=>{var sr,dr;((dr=(sr=l(o))==null?void 0:sr.estimate)==null?void 0:dr.design_confirm)==="waiting"?ir(Zt):ir(nr,!1)},!0)}L(Ct,Et)};ze(wt,Ct=>{var Et,Nt;((Nt=(Et=l(o))==null?void 0:Et.estimate)==null?void 0:Nt.design_confirm)==="none"?Ct(gt):Ct(Dt,!1)})}var qt=z(Ze,2),zt=w(qt),Mt=z(zt,2);{var jt=Ct=>{var Et=RM(),Nt=ft(Et),Zt=z(Nt,2);He(()=>{Nt.disabled=l(M),Zt.disabled=l(M)}),at("click",Nt,Be),at("click",Zt,be),L(Ct,Et)};ze(Mt,Ct=>{var Et,Nt;((Nt=(Et=l(o))==null?void 0:Et.estimate)==null?void 0:Nt.design_confirm)==="confirming"&&Ct(jt)})}He(Ct=>{tt.disabled=l(I),Ft.disabled=Ct,zt.disabled=l(M)},[()=>l(I)||!l(C).trim()],dt),yr(tt,()=>l(C),Ct=>b(C,Ct)),at("keydown",tt,Ct=>Ct.key==="Enter"&&!Ct.isComposing&&U()),at("click",Ft,U),at("click",zt,ne),L(Ye,Ce)};ze(Qe,Ye=>{l(o)&&Ye(ot)},!0)}L(Se,Me)};ze(he,Se=>{l(i)?Se(ee):Se(ge,!1)},!0)}L(De,Pe)};ze(ye,De=>{l(s)?De(Ne):De(we,!1)})}var Fe=z(ie,2),ue=w(Fe);He(()=>{var De,Pe;return Le(oe,`  - ${((Pe=(De=l(o))==null?void 0:De.estimate)==null?void 0:Pe.name)||""}`)}),at("click",me,ne),at("click",ue,ne),L(G,D)};ze(R,G=>{r()&&G(q)})}var j=z(R,2);{var Ae=G=>{var D=XM(),ie=w(D),me=z(w(ie),4),pe=w(me),oe=z(w(pe),2),ye=z(me,2);Yt(ye,5,()=>O,Ar,(ge,Se,Me)=>{var Qe=GM(),ot=w(Qe),Ye=w(ot),Ce=w(Ye),de=z(Ye,2);{var Te=je=>{var Re=$M(),Ve=w(Re),At=z(w(Ve),2);rr(At,"name",`reorder-${Me??""}`);var Ke=z(Ve,2),nt=z(w(Ke),2);rr(nt,"name",`reorder-${Me??""}`),He(()=>{vu(At,l(J)[Me]),vu(nt,!l(J)[Me])}),at("change",At,ht=>ce(Me,ht.target.checked)),at("change",nt,ht=>ce(Me,!ht.target.checked)),L(je,Re)},qe=je=>{var Re=VM();mv(Re,()=>l(J)[Me],Ve=>fr(J,l(J)[Me]=Ve)),at("change",Re,Ve=>ce(Me,Ve.target.checked)),L(je,Re)};ze(de,je=>{Me===6?je(Te):je(qe,!1)})}He(()=>Le(Ce,l(Se))),L(ge,Qe)});var Ne=z(ye,2),we=w(Ne),Fe=z(we,2),ue=w(Fe);{var De=ge=>{var Se=WM();L(ge,Se)},Pe=ge=>{var Se=en("");L(ge,Se)};ze(ue,ge=>{l(M)?ge(De):ge(Pe,!1)})}var he=z(ie,2),ee=w(he);He(()=>{we.disabled=l(M),Fe.disabled=!l(xe)||l(M)}),mv(oe,()=>l(xe),ge=>b(xe,ge)),at("change",oe,se),at("click",we,Z),at("click",Fe,E),at("click",ee,Z),L(G,D)};ze(j,G=>{l(H)&&G(Ae)})}var Ee=z(j,2);{var _e=G=>{var D=JM(),ie=w(D),me=z(w(ie),2),pe=z(me,2),oe=w(pe),ye=z(oe,2),Ne=w(ye);{var we=Pe=>{var he=YM();L(Pe,he)},Fe=Pe=>{var he=en(" ");L(Pe,he)};ze(Ne,Pe=>{l(V)?Pe(we):Pe(Fe,!1)})}var ue=z(ie,2),De=w(ue);He(Pe=>{me.disabled=l(V),oe.disabled=l(V),ye.disabled=Pe},[()=>l(V)||!l(W).trim()],dt),yr(me,()=>l(W),Pe=>b(W,Pe)),at("click",oe,x),at("click",ye,F),at("click",De,x),L(G,D)};ze(Ee,G=>{l(k)&&G(_e)})}var Oe=z(Ee,2);Gd(Oe,{get isOpen(){return l(g)},set isOpen(G){b(g,G)},get title(){return l(m)},set title(G){b(m,G)},get message(){return l(y)},set message(G){b(y,G)},$$legacy:!0}),L(n,T),Mr()}function cz(n,e){return function(){return n.apply(e,arguments)}}const{toString:t7}=Object.prototype,{getPrototypeOf:X1}=Object,{iterator:Eg,toStringTag:uz}=Symbol,Fg=(n=>e=>{const t=t7.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ei=n=>(n=n.toLowerCase(),e=>Fg(e)===n),Ig=n=>e=>typeof e===n,{isArray:rc}=Array,Tu=Ig("undefined");function r7(n){return n!==null&&!Tu(n)&&n.constructor!==null&&!Tu(n.constructor)&&ws(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const hz=Ei("ArrayBuffer");function n7(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&hz(n.buffer),e}const o7=Ig("string"),ws=Ig("function"),fz=Ig("number"),Ug=n=>n!==null&&typeof n=="object",s7=n=>n===!0||n===!1,Xf=n=>{if(Fg(n)!=="object")return!1;const e=X1(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(uz in n)&&!(Eg in n)},i7=Ei("Date"),a7=Ei("File"),A7=Ei("Blob"),l7=Ei("FileList"),d7=n=>Ug(n)&&ws(n.pipe),c7=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ws(n.append)&&((e=Fg(n))==="formdata"||e==="object"&&ws(n.toString)&&n.toString()==="[object FormData]"))},u7=Ei("URLSearchParams"),[h7,f7,p7,g7]=["ReadableStream","Request","Response","Headers"].map(Ei),v7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),rc(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,n[a],a,n)}}function pz(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const rl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gz=n=>!Tu(n)&&n!==rl;function Sm(){const{caseless:n}=gz(this)&&this||{},e={},t=(r,o)=>{const s=n&&pz(e,o)||o;Xf(e[s])&&Xf(r)?e[s]=Sm(e[s],r):Xf(r)?e[s]=Sm({},r):rc(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Gu(arguments[r],t);return e}const m7=(n,e,t,{allOwnKeys:r}={})=>(Gu(e,(o,s)=>{t&&ws(o)?n[s]=cz(o,t):n[s]=o},{allOwnKeys:r}),n),w7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),y7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},b7=(n,e,t,r)=>{let o,s,i;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)i=o[s],(!r||r(i,n,e))&&!a[i]&&(e[i]=n[i],a[i]=!0);n=t!==!1&&X1(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},_7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},B7=n=>{if(!n)return null;if(rc(n))return n;let e=n.length;if(!fz(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},x7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&X1(Uint8Array)),z7=(n,e)=>{const r=(n&&n[Eg]).call(n);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(n,s[0],s[1])}},C7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},S7=Ei("HTMLFormElement"),E7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),xb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),F7=Ei("RegExp"),vz=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Gu(t,(o,s)=>{let i;(i=e(o,s,n))!==!1&&(r[s]=i||o)}),Object.defineProperties(n,r)},I7=n=>{vz(n,(e,t)=>{if(ws(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ws(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},U7=(n,e)=>{const t={},r=o=>{o.forEach(s=>{t[s]=!0})};return rc(n)?r(n):r(String(n).split(e)),t},Q7=()=>{},T7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function L7(n){return!!(n&&ws(n.append)&&n[uz]==="FormData"&&n[Eg])}const P7=n=>{const e=new Array(10),t=(r,o)=>{if(Ug(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=rc(r)?[]:{};return Gu(r,(i,a)=>{const A=t(i,o+1);!Tu(A)&&(s[a]=A)}),e[o]=void 0,s}}return r};return t(n,0)},k7=Ei("AsyncFunction"),O7=n=>n&&(Ug(n)||ws(n))&&ws(n.then)&&ws(n.catch),mz=((n,e)=>n?setImmediate:e?((t,r)=>(rl.addEventListener("message",({source:o,data:s})=>{o===rl&&s===t&&r.length&&r.shift()()},!1),o=>{r.push(o),rl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ws(rl.postMessage)),D7=typeof queueMicrotask<"u"?queueMicrotask.bind(rl):typeof process<"u"&&process.nextTick||mz,N7=n=>n!=null&&ws(n[Eg]),yt={isArray:rc,isArrayBuffer:hz,isBuffer:r7,isFormData:c7,isArrayBufferView:n7,isString:o7,isNumber:fz,isBoolean:s7,isObject:Ug,isPlainObject:Xf,isReadableStream:h7,isRequest:f7,isResponse:p7,isHeaders:g7,isUndefined:Tu,isDate:i7,isFile:a7,isBlob:A7,isRegExp:F7,isFunction:ws,isStream:d7,isURLSearchParams:u7,isTypedArray:x7,isFileList:l7,forEach:Gu,merge:Sm,extend:m7,trim:v7,stripBOM:w7,inherits:y7,toFlatObject:b7,kindOf:Fg,kindOfTest:Ei,endsWith:_7,toArray:B7,forEachEntry:z7,matchAll:C7,isHTMLForm:S7,hasOwnProperty:xb,hasOwnProp:xb,reduceDescriptors:vz,freezeMethods:I7,toObjectSet:U7,toCamelCase:E7,noop:Q7,toFiniteNumber:T7,findKey:pz,global:rl,isContextDefined:gz,isSpecCompliantForm:L7,toJSONObject:P7,isAsyncFn:k7,isThenable:O7,setImmediate:mz,asap:D7,isIterable:N7};function Er(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}yt.inherits(Er,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yt.toJSONObject(this.config),code:this.code,status:this.status}}});const wz=Er.prototype,yz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yz[n]={value:n}});Object.defineProperties(Er,yz);Object.defineProperty(wz,"isAxiosError",{value:!0});Er.from=(n,e,t,r,o,s)=>{const i=Object.create(wz);return yt.toFlatObject(n,i,function(A){return A!==Error.prototype},a=>a!=="isAxiosError"),Er.call(i,n.message,e,t,r,o),i.cause=n,i.name=n.name,s&&Object.assign(i,s),i};const M7=null;function Em(n){return yt.isPlainObject(n)||yt.isArray(n)}function bz(n){return yt.endsWith(n,"[]")?n.slice(0,-2):n}function zb(n,e,t){return n?n.concat(e).map(function(o,s){return o=bz(o),!t&&s?"["+o+"]":o}).join(t?".":""):e}function H7(n){return yt.isArray(n)&&!n.some(Em)}const j7=yt.toFlatObject(yt,{},null,function(e){return/^is[A-Z]/.test(e)});function Qg(n,e,t){if(!yt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=yt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!yt.isUndefined(y[m])});const r=t.metaTokens,o=t.visitor||c,s=t.dots,i=t.indexes,A=(t.Blob||typeof Blob<"u"&&Blob)&&yt.isSpecCompliantForm(e);if(!yt.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(yt.isDate(g))return g.toISOString();if(!A&&yt.isBlob(g))throw new Er("Blob is not supported. Use a Buffer instead.");return yt.isArrayBuffer(g)||yt.isTypedArray(g)?A&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,m,y){let _=g;if(g&&!y&&typeof g=="object"){if(yt.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(yt.isArray(g)&&H7(g)||(yt.isFileList(g)||yt.endsWith(m,"[]"))&&(_=yt.toArray(g)))return m=bz(m),_.forEach(function(I,N){!(yt.isUndefined(I)||I===null)&&e.append(i===!0?zb([m],N,s):i===null?m:m+"[]",d(I))}),!1}return Em(g)?!0:(e.append(zb(y,m,s),d(g)),!1)}const u=[],h=Object.assign(j7,{defaultVisitor:c,convertValue:d,isVisitable:Em});function f(g,m){if(!yt.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(g),yt.forEach(g,function(_,C){(!(yt.isUndefined(_)||_===null)&&o.call(e,_,yt.isString(C)?C.trim():C,m,h))===!0&&f(_,m?m.concat(C):[C])}),u.pop()}}if(!yt.isObject(n))throw new TypeError("data must be an object");return f(n),e}function Cb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Y1(n,e){this._pairs=[],n&&Qg(n,this,e)}const _z=Y1.prototype;_z.append=function(e,t){this._pairs.push([e,t])};_z.toString=function(e){const t=e?function(r){return e.call(this,r,Cb)}:Cb;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function R7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Bz(n,e,t){if(!e)return n;const r=t&&t.encode||R7;yt.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let s;if(o?s=o(e,t):s=yt.isURLSearchParams(e)?e.toString():new Y1(e,t).toString(r),s){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Sb{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q7=typeof URLSearchParams<"u"?URLSearchParams:Y1,K7=typeof FormData<"u"?FormData:null,$7=typeof Blob<"u"?Blob:null,V7={isBrowser:!0,classes:{URLSearchParams:q7,FormData:K7,Blob:$7},protocols:["http","https","file","blob","url","data"]},J1=typeof window<"u"&&typeof document<"u",Fm=typeof navigator=="object"&&navigator||void 0,G7=J1&&(!Fm||["ReactNative","NativeScript","NS"].indexOf(Fm.product)<0),W7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",X7=J1&&window.location.href||"http://localhost",Y7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J1,hasStandardBrowserEnv:G7,hasStandardBrowserWebWorkerEnv:W7,navigator:Fm,origin:X7},Symbol.toStringTag,{value:"Module"})),Ko={...Y7,...V7};function J7(n,e){return Qg(n,new Ko.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,s){return Ko.isNode&&yt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Z7(n){return yt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eH(n){const e={},t=Object.keys(n);let r;const o=t.length;let s;for(r=0;r<o;r++)s=t[r],e[s]=n[s];return e}function zz(n){function e(t,r,o,s){let i=t[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),A=s>=t.length;return i=!i&&yt.isArray(o)?o.length:i,A?(yt.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!yt.isObject(o[i]))&&(o[i]=[]),e(t,r,o[i],s)&&yt.isArray(o[i])&&(o[i]=eH(o[i])),!a)}if(yt.isFormData(n)&&yt.isFunction(n.entries)){const t={};return yt.forEachEntry(n,(r,o)=>{e(Z7(r),o,t,0)}),t}return null}function tH(n,e,t){if(yt.isString(n))try{return(e||JSON.parse)(n),yt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Wu={transitional:xz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,s=yt.isObject(e);if(s&&yt.isHTMLForm(e)&&(e=new FormData(e)),yt.isFormData(e))return o?JSON.stringify(zz(e)):e;if(yt.isArrayBuffer(e)||yt.isBuffer(e)||yt.isStream(e)||yt.isFile(e)||yt.isBlob(e)||yt.isReadableStream(e))return e;if(yt.isArrayBufferView(e))return e.buffer;if(yt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J7(e,this.formSerializer).toString();if((a=yt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return Qg(a?{"files[]":e}:e,A&&new A,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),tH(e)):e}],transformResponse:[function(e){const t=this.transitional||Wu.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(yt.isResponse(e)||yt.isReadableStream(e))return e;if(e&&yt.isString(e)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Er.from(a,Er.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ko.classes.FormData,Blob:Ko.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yt.forEach(["delete","get","head","post","put","patch"],n=>{Wu.headers[n]={}});const rH=yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nH=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||e[t]&&rH[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Eb=Symbol("internals");function jc(n){return n&&String(n).trim().toLowerCase()}function Yf(n){return n===!1||n==null?n:yt.isArray(n)?n.map(Yf):String(n)}function oH(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const sH=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function nv(n,e,t,r,o){if(yt.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!yt.isString(e)){if(yt.isString(r))return e.indexOf(r)!==-1;if(yt.isRegExp(r))return r.test(e)}}function iH(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function aH(n,e){const t=yt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}let ys=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function s(a,A,d){const c=jc(A);if(!c)throw new Error("header name must be a non-empty string");const u=yt.findKey(o,c);(!u||o[u]===void 0||d===!0||d===void 0&&o[u]!==!1)&&(o[u||A]=Yf(a))}const i=(a,A)=>yt.forEach(a,(d,c)=>s(d,c,A));if(yt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(yt.isString(e)&&(e=e.trim())&&!sH(e))i(nH(e),t);else if(yt.isObject(e)&&yt.isIterable(e)){let a={},A,d;for(const c of e){if(!yt.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(A=a[d])?yt.isArray(A)?[...A,c[1]]:[A,c[1]]:c[1]}i(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=jc(e),e){const r=yt.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return oH(o);if(yt.isFunction(t))return t.call(this,o,r);if(yt.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jc(e),e){const r=yt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||nv(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function s(i){if(i=jc(i),i){const a=yt.findKey(r,i);a&&(!t||nv(r,r[a],a,t))&&(delete r[a],o=!0)}}return yt.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const s=t[r];(!e||nv(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const t=this,r={};return yt.forEach(this,(o,s)=>{const i=yt.findKey(r,s);if(i){t[i]=Yf(o),delete t[s];return}const a=e?iH(s):String(s).trim();a!==s&&delete t[s],t[a]=Yf(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return yt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&yt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[Eb]=this[Eb]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=jc(i);r[a]||(aH(o,i),r[a]=!0)}return yt.isArray(e)?e.forEach(s):s(e),this}};ys.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);yt.reduceDescriptors(ys.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});yt.freezeMethods(ys);function ov(n,e){const t=this||Wu,r=e||t,o=ys.from(r.headers);let s=r.data;return yt.forEach(n,function(a){s=a.call(t,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function Cz(n){return!!(n&&n.__CANCEL__)}function nc(n,e,t){Er.call(this,n??"canceled",Er.ERR_CANCELED,e,t),this.name="CanceledError"}yt.inherits(nc,Er,{__CANCEL__:!0});function Sz(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Er("Request failed with status code "+t.status,[Er.ERR_BAD_REQUEST,Er.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function AH(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function lH(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(A){const d=Date.now(),c=r[s];i||(i=d),t[o]=A,r[o]=d;let u=s,h=0;for(;u!==o;)h+=t[u++],u=u%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-i<e)return;const f=c&&d-c;return f?Math.round(h*1e3/f):void 0}}function dH(n,e){let t=0,r=1e3/e,o,s;const i=(d,c=Date.now())=>{t=c,o=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const c=Date.now(),u=c-t;u>=r?i(d,c):(o=d,s||(s=setTimeout(()=>{s=null,i(o)},r-u)))},()=>o&&i(o)]}const Op=(n,e,t=3)=>{let r=0;const o=lH(50,250);return dH(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,A=i-r,d=o(A),c=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:A,rate:d||void 0,estimated:d&&a&&c?(a-i)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},Fb=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Ib=n=>(...e)=>yt.asap(()=>n(...e)),cH=Ko.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ko.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ko.origin),Ko.navigator&&/(msie|trident)/i.test(Ko.navigator.userAgent)):()=>!0,uH=Ko.hasStandardBrowserEnv?{write(n,e,t,r,o,s){const i=[n+"="+encodeURIComponent(e)];yt.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),yt.isString(r)&&i.push("path="+r),yt.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hH(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function fH(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ez(n,e,t){let r=!hH(e);return n&&(r||t==!1)?fH(n,e):e}const Ub=n=>n instanceof ys?{...n}:n;function hl(n,e){e=e||{};const t={};function r(d,c,u,h){return yt.isPlainObject(d)&&yt.isPlainObject(c)?yt.merge.call({caseless:h},d,c):yt.isPlainObject(c)?yt.merge({},c):yt.isArray(c)?c.slice():c}function o(d,c,u,h){if(yt.isUndefined(c)){if(!yt.isUndefined(d))return r(void 0,d,u,h)}else return r(d,c,u,h)}function s(d,c){if(!yt.isUndefined(c))return r(void 0,c)}function i(d,c){if(yt.isUndefined(c)){if(!yt.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,u){if(u in e)return r(d,c);if(u in n)return r(void 0,d)}const A={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,c,u)=>o(Ub(d),Ub(c),u,!0)};return yt.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=A[c]||o,h=u(n[c],e[c],c);yt.isUndefined(h)&&u!==a||(t[c]=h)}),t}const Fz=n=>{const e=hl({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=ys.from(i),e.url=Bz(Ez(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let A;if(yt.isFormData(t)){if(Ko.hasStandardBrowserEnv||Ko.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((A=i.getContentType())!==!1){const[d,...c]=A?A.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...c].join("; "))}}if(Ko.hasStandardBrowserEnv&&(r&&yt.isFunction(r)&&(r=r(e)),r||r!==!1&&cH(e.url))){const d=o&&s&&uH.read(s);d&&i.set(o,d)}return e},pH=typeof XMLHttpRequest<"u",gH=pH&&function(n){return new Promise(function(t,r){const o=Fz(n);let s=o.data;const i=ys.from(o.headers).normalize();let{responseType:a,onUploadProgress:A,onDownloadProgress:d}=o,c,u,h,f,g;function m(){f&&f(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function _(){if(!y)return;const I=ys.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:I,config:n,request:y};Sz(function(V){t(V),m()},function(V){r(V),m()},k),y=null}"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(r(new Er("Request aborted",Er.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new Er("Network Error",Er.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let N=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const k=o.transitional||xz;o.timeoutErrorMessage&&(N=o.timeoutErrorMessage),r(new Er(N,k.clarifyTimeoutError?Er.ETIMEDOUT:Er.ECONNABORTED,n,y)),y=null},s===void 0&&i.setContentType(null),"setRequestHeader"in y&&yt.forEach(i.toJSON(),function(N,k){y.setRequestHeader(k,N)}),yt.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),a&&a!=="json"&&(y.responseType=o.responseType),d&&([h,g]=Op(d,!0),y.addEventListener("progress",h)),A&&y.upload&&([u,f]=Op(A),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(c=I=>{y&&(r(!I||I.type?new nc(null,n,y):I),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const C=AH(o.url);if(C&&Ko.protocols.indexOf(C)===-1){r(new Er("Unsupported protocol "+C+":",Er.ERR_BAD_REQUEST,n));return}y.send(s||null)})},vH=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const s=function(d){if(!o){o=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof Er?c:new nc(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,s(new Er(`timeout ${e} of ms exceeded`,Er.ETIMEDOUT))},e);const a=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:A}=r;return A.unsubscribe=()=>yt.asap(a),A}},mH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},wH=async function*(n,e){for await(const t of yH(n))yield*mH(t,e)},yH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Qb=(n,e,t,r)=>{const o=wH(n,e);let s=0,i,a=A=>{i||(i=!0,r&&r(A))};return new ReadableStream({async pull(A){try{const{done:d,value:c}=await o.next();if(d){a(),A.close();return}let u=c.byteLength;if(t){let h=s+=u;t(h)}A.enqueue(new Uint8Array(c))}catch(d){throw a(d),d}},cancel(A){return a(A),o.return()}},{highWaterMark:2})},Tg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Iz=Tg&&typeof ReadableStream=="function",bH=Tg&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Uz=(n,...e)=>{try{return!!n(...e)}catch{return!1}},_H=Iz&&Uz(()=>{let n=!1;const e=new Request(Ko.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Tb=64*1024,Im=Iz&&Uz(()=>yt.isReadableStream(new Response("").body)),Dp={stream:Im&&(n=>n.body)};Tg&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Dp[e]&&(Dp[e]=yt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Er(`Response type '${e}' is not supported`,Er.ERR_NOT_SUPPORT,r)})})})(new Response);const BH=async n=>{if(n==null)return 0;if(yt.isBlob(n))return n.size;if(yt.isSpecCompliantForm(n))return(await new Request(Ko.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(yt.isArrayBufferView(n)||yt.isArrayBuffer(n))return n.byteLength;if(yt.isURLSearchParams(n)&&(n=n+""),yt.isString(n))return(await bH(n)).byteLength},xH=async(n,e)=>{const t=yt.toFiniteNumber(n.getContentLength());return t??BH(e)},zH=Tg&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:A,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=Fz(n);d=d?(d+"").toLowerCase():"text";let f=vH([o,s&&s.toAbortSignal()],i),g;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(A&&_H&&t!=="get"&&t!=="head"&&(y=await xH(c,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),W;if(yt.isFormData(r)&&(W=k.headers.get("content-type"))&&c.setContentType(W),k.body){const[V,H]=Fb(y,Op(Ib(A)));r=Qb(k.body,Tb,V,H)}}yt.isString(u)||(u=u?"include":"omit");const _="credentials"in Request.prototype;g=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:_?u:void 0});let C=await fetch(g);const I=Im&&(d==="stream"||d==="response");if(Im&&(a||I&&m)){const k={};["status","statusText","headers"].forEach(J=>{k[J]=C[J]});const W=yt.toFiniteNumber(C.headers.get("content-length")),[V,H]=a&&Fb(W,Op(Ib(a),!0))||[];C=new Response(Qb(C.body,Tb,V,()=>{H&&H(),m&&m()}),k)}d=d||"text";let N=await Dp[yt.findKey(Dp,d)||"text"](C,n);return!I&&m&&m(),await new Promise((k,W)=>{Sz(k,W,{data:N,headers:ys.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:g})})}catch(_){throw m&&m(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Er("Network Error",Er.ERR_NETWORK,n,g),{cause:_.cause||_}):Er.from(_,_&&_.code,n,g)}}),Um={http:M7,xhr:gH,fetch:zH};yt.forEach(Um,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Lb=n=>`- ${n}`,CH=n=>yt.isFunction(n)||n===null||n===!1,Qz={getAdapter:n=>{n=yt.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let s=0;s<e;s++){t=n[s];let i;if(r=t,!CH(t)&&(r=Um[(i=String(t)).toLowerCase()],r===void 0))throw new Er(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,A])=>`adapter ${a} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(Lb).join(`
`):" "+Lb(s[0]):"as no adapter specified";throw new Er("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Um};function sv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new nc(null,n)}function Pb(n){return sv(n),n.headers=ys.from(n.headers),n.data=ov.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Qz.getAdapter(n.adapter||Wu.adapter)(n).then(function(r){return sv(n),r.data=ov.call(n,n.transformResponse,r),r.headers=ys.from(r.headers),r},function(r){return Cz(r)||(sv(n),r&&r.response&&(r.response.data=ov.call(n,n.transformResponse,r.response),r.response.headers=ys.from(r.response.headers))),Promise.reject(r)})}const Tz="1.9.0",Lg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Lg[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const kb={};Lg.transitional=function(e,t,r){function o(s,i){return"[Axios v"+Tz+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new Er(o(i," has been removed"+(t?" in "+t:"")),Er.ERR_DEPRECATED);return t&&!kb[i]&&(kb[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,a):!0}};Lg.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function SH(n,e,t){if(typeof n!="object")throw new Er("options must be an object",Er.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=n[s],A=a===void 0||i(a,s,n);if(A!==!0)throw new Er("option "+s+" must be "+A,Er.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Er("Unknown option "+s,Er.ERR_BAD_OPTION)}}const Jf={assertOptions:SH,validators:Lg},Li=Jf.validators;let ll=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Sb,response:new Sb}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=hl(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:s}=t;r!==void 0&&Jf.assertOptions(r,{silentJSONParsing:Li.transitional(Li.boolean),forcedJSONParsing:Li.transitional(Li.boolean),clarifyTimeoutError:Li.transitional(Li.boolean)},!1),o!=null&&(yt.isFunction(o)?t.paramsSerializer={serialize:o}:Jf.assertOptions(o,{encode:Li.function,serialize:Li.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Jf.assertOptions(t,{baseUrl:Li.spelling("baseURL"),withXsrfToken:Li.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&yt.merge(s.common,s[t.method]);s&&yt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=ys.concat(i,s);const a=[];let A=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(A=A&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let c,u=0,h;if(!A){const g=[Pb.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,c=Promise.resolve(t);u<h;)c=c.then(g[u++],g[u++]);return c}h=a.length;let f=t;for(u=0;u<h;){const g=a[u++],m=a[u++];try{f=g(f)}catch(y){m.call(this,y);break}}try{c=Pb.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=hl(this.defaults,e);const t=Ez(e.baseURL,e.url,e.allowAbsoluteUrls);return Bz(t,e.params,e.paramsSerializer)}};yt.forEach(["delete","get","head","options"],function(e){ll.prototype[e]=function(t,r){return this.request(hl(r||{},{method:e,url:t,data:(r||{}).data}))}});yt.forEach(["post","put","patch"],function(e){function t(r){return function(s,i,a){return this.request(hl(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}ll.prototype[e]=t(),ll.prototype[e+"Form"]=t(!0)});let EH=class Lz{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new nc(s,i,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Lz(function(o){e=o}),cancel:e}}};function FH(n){return function(t){return n.apply(null,t)}}function IH(n){return yt.isObject(n)&&n.isAxiosError===!0}const Qm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qm).forEach(([n,e])=>{Qm[e]=n});function Pz(n){const e=new ll(n),t=cz(ll.prototype.request,e);return yt.extend(t,ll.prototype,e,{allOwnKeys:!0}),yt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Pz(hl(n,o))},t}const Nn=Pz(Wu);Nn.Axios=ll;Nn.CanceledError=nc;Nn.CancelToken=EH;Nn.isCancel=Cz;Nn.VERSION=Tz;Nn.toFormData=Qg;Nn.AxiosError=Er;Nn.Cancel=Nn.CanceledError;Nn.all=function(e){return Promise.all(e)};Nn.spread=FH;Nn.isAxiosError=IH;Nn.mergeConfig=hl;Nn.AxiosHeaders=ys;Nn.formToJSON=n=>zz(yt.isHTMLForm(n)?new FormData(n):n);Nn.getAdapter=Qz.getAdapter;Nn.HttpStatusCode=Qm;Nn.default=Nn;const{Axios:WK,AxiosError:XK,CanceledError:YK,isCancel:JK,CancelToken:ZK,VERSION:e$,all:t$,Cancel:r$,isAxiosError:n$,spread:o$,toFormData:s$,AxiosHeaders:i$,HttpStatusCode:a$,formToJSON:A$,getAdapter:l$,mergeConfig:d$}=Nn,kz=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",UH=kz+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",QH="["+kz+"]["+UH+"]*",TH=new RegExp("^"+QH+"$");function Oz(n,e){const t=[];let r=e.exec(n);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let i=0;i<s;i++)o.push(r[i]);t.push(o),r=e.exec(n)}return t}const Z1=function(n){const e=TH.exec(n);return!(e===null||typeof e>"u")};function LH(n){return typeof n<"u"}const PH={allowBooleanAttributes:!1,unpairedTags:[]};function kH(n,e){e=Object.assign({},PH,e);const t=[];let r=!1,o=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=Db(n,s),s.err)return s}else if(n[s]==="<"){let i=s;if(s++,n[s]==="!"){s=Nb(n,s);continue}else{let a=!1;n[s]==="/"&&(a=!0,s++);let A="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)A+=n[s];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),s--),!qH(A)){let u;return A.trim().length===0?u="Invalid space after '<'.":u="Tag '"+A+"' is an invalid name.",Gn("InvalidTag",u,Jo(n,s))}const d=NH(n,s);if(d===!1)return Gn("InvalidAttr","Attributes for '"+A+"' have open quote.",Jo(n,s));let c=d.value;if(s=d.index,c[c.length-1]==="/"){const u=s-c.length;c=c.substring(0,c.length-1);const h=Mb(c,e);if(h===!0)r=!0;else return Gn(h.err.code,h.err.msg,Jo(n,u+h.err.line))}else if(a)if(d.tagClosed){if(c.trim().length>0)return Gn("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",Jo(n,i));if(t.length===0)return Gn("InvalidTag","Closing tag '"+A+"' has not been opened.",Jo(n,i));{const u=t.pop();if(A!==u.tagName){let h=Jo(n,u.tagStartPos);return Gn("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+A+"'.",Jo(n,i))}t.length==0&&(o=!0)}}else return Gn("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",Jo(n,s));else{const u=Mb(c,e);if(u!==!0)return Gn(u.err.code,u.err.msg,Jo(n,s-c.length+u.err.line));if(o===!0)return Gn("InvalidXml","Multiple possible root nodes found.",Jo(n,s));e.unpairedTags.indexOf(A)!==-1||t.push({tagName:A,tagStartPos:i}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=Nb(n,s);continue}else if(n[s+1]==="?"){if(s=Db(n,++s),s.err)return s}else break;else if(n[s]==="&"){const u=jH(n,s);if(u==-1)return Gn("InvalidChar","char '&' is not expected.",Jo(n,s));s=u}else if(o===!0&&!Ob(n[s]))return Gn("InvalidXml","Extra text at the end",Jo(n,s));n[s]==="<"&&s--}}else{if(Ob(n[s]))continue;return Gn("InvalidChar","char '"+n[s]+"' is not expected.",Jo(n,s))}if(r){if(t.length==1)return Gn("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Jo(n,t[0].tagStartPos));if(t.length>0)return Gn("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Gn("InvalidXml","Start tag expected.",1);return!0}function Ob(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Db(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return Gn("InvalidXml","XML declaration allowed only at the start of the document.",Jo(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function Nb(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const OH='"',DH="'";function NH(n,e){let t="",r="",o=!1;for(;e<n.length;e++){if(n[e]===OH||n[e]===DH)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){o=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:o}}const MH=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Mb(n,e){const t=Oz(n,MH),r={};for(let o=0;o<t.length;o++){if(t[o][1].length===0)return Gn("InvalidAttr","Attribute '"+t[o][2]+"' has no space in starting.",Rc(t[o]));if(t[o][3]!==void 0&&t[o][4]===void 0)return Gn("InvalidAttr","Attribute '"+t[o][2]+"' is without value.",Rc(t[o]));if(t[o][3]===void 0&&!e.allowBooleanAttributes)return Gn("InvalidAttr","boolean attribute '"+t[o][2]+"' is not allowed.",Rc(t[o]));const s=t[o][2];if(!RH(s))return Gn("InvalidAttr","Attribute '"+s+"' is an invalid name.",Rc(t[o]));if(!r.hasOwnProperty(s))r[s]=1;else return Gn("InvalidAttr","Attribute '"+s+"' is repeated.",Rc(t[o]))}return!0}function HH(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function jH(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,HH(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function Gn(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function RH(n){return Z1(n)}function qH(n){return Z1(n)}function Jo(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function Rc(n){return n.startIndex+n[1].length}const KH={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},$H=function(n){return Object.assign({},KH,n)};let Np;typeof Symbol!="function"?Np="@@xmlMetadata":Np=Symbol("XML Node Metadata");class WA{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][Np]={startIndex:t})}static getMetaDataSymbol(){return Np}}function VH(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,o=!1,s=!1,i="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(o&&XA(n,"!ENTITY",e)){e+=7;let a,A;[a,A,e]=GH(n,e+1),A.indexOf("&")===-1&&(t[a]={regx:RegExp(`&${a};`,"g"),val:A})}else if(o&&XA(n,"!ELEMENT",e)){e+=8;const{index:a}=XH(n,e+1);e=a}else if(o&&XA(n,"!ATTLIST",e))e+=8;else if(o&&XA(n,"!NOTATION",e)){e+=9;const{index:a}=WH(n,e+1);e=a}else if(XA(n,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,i=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?o=!0:i+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const hA=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function GH(n,e){e=hA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(e2(t),e=hA(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=Zf(n,e,"entity"),e--,[t,r,e]}function WH(n,e){e=hA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;e2(t),e=hA(n,e);const r=n.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=hA(n,e);let o=null,s=null;if(r==="PUBLIC")[e,o]=Zf(n,e,"publicIdentifier"),e=hA(n,e),(n[e]==='"'||n[e]==="'")&&([e,s]=Zf(n,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=Zf(n,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:o,systemIdentifier:s,index:--e}}function Zf(n,e,t){let r="";const o=n[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<n.length&&n[e]!==o;)r+=n[e],e++;if(n[e]!==o)throw new Error(`Unterminated ${t} value`);return e++,[e,r]}function XH(n,e){e=hA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!e2(t))throw new Error(`Invalid element name: "${t}"`);e=hA(n,e);let r="";if(n[e]==="E"&&XA(n,"MPTY",e))e+=6;else if(n[e]==="A"&&XA(n,"NY",e))e+=4;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)r+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:r.trim(),index:e}}function XA(n,e,t){for(let r=0;r<e.length;r++)if(e[r]!==n[t+r+1])return!1;return!0}function e2(n){if(Z1(n))return n;throw new Error(`Invalid entity name ${n}`)}const YH=/^[-+]?0x[a-fA-F0-9]+$/,JH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,ZH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ej(n,e={}){if(e=Object.assign({},ZH,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&YH.test(t))return oj(t,16);if(t.search(/.+[eE].+/)!==-1)return rj(n,t,e);{const r=JH.exec(t);if(r){const o=r[1]||"",s=r[2];let i=nj(r[3]);const a=o?n[s.length+1]===".":n[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!a))return n;{const A=Number(t),d=String(A);if(A===0||A===-0)return A;if(d.search(/[eE]/)!==-1)return e.eNotation?A:n;if(t.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?A:n;let c=s?i:t;return s?c===d||o+c===d?A:n:c===d||c===o+d?A:n}}else return n}}const tj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function rj(n,e,t){if(!t.eNotation)return n;const r=e.match(tj);if(r){let o=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",i=r[2],a=o?n[i.length+1]===s:n[i.length]===s;return i.length>1&&a?n:i.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):t.leadingZeros&&!a?(e=(r[1]||"")+r[3],Number(e)):n}else return n}function nj(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function oj(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function sj(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class ij{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=aj,this.parseXml=uj,this.parseTextData=Aj,this.resolveNameSpace=lj,this.buildAttributesMap=cj,this.isItStopNode=gj,this.replaceEntitiesValue=fj,this.readStopNodeData=mj,this.saveTextToParentTag=pj,this.addChild=hj,this.ignoreAttributesFn=sj(this.options.ignoreAttributes)}}function aj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function Aj(n,e,t,r,o,s,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const a=this.options.tagValueProcessor(e,n,t,o,s);return a==null?n:typeof a!=typeof n||a!==n?a:this.options.trimValues?Lm(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Lm(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function lj(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const dj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function cj(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Oz(n,dj),o=r.length,s={};for(let i=0;i<o;i++){const a=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(a,e))continue;let A=r[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);const c=this.options.attributeValueProcessor(a,A,e);c==null?s[d]=A:typeof c!=typeof A||c!==A?s[d]=c:s[d]=Lm(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=s,i}return s}}const uj=function(n){n=n.replace(/\r\n?/g,`
`);const e=new WA("!xml");let t=e,r="",o="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const a=nl(n,">",s,"Closing Tag is not closed.");let A=n.substring(s+2,a).trim();if(this.options.removeNSPrefix){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&(r=this.saveTextToParentTag(r,t,o));const d=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let c=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),t=this.tagsNodeStack.pop(),r="",s=a}else if(n[s+1]==="?"){let a=Tm(n,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const A=new WA(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(t,A,o,s)}s=a.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const a=nl(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const A=n.substring(s+4,a-2);r=this.saveTextToParentTag(r,t,o),t.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}s=a}else if(n.substr(s+1,2)==="!D"){const a=VH(n,s);this.docTypeEntities=a.entities,s=a.i}else if(n.substr(s+1,2)==="!["){const a=nl(n,"]]>",s,"CDATA is not closed.")-2,A=n.substring(s+9,a);r=this.saveTextToParentTag(r,t,o);let d=this.parseTextData(A,t.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):t.add(this.options.textNodeName,d),s=a+2}else{let a=Tm(n,s,this.options.removeNSPrefix),A=a.tagName;const d=a.rawTagName;let c=a.tagExp,u=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,o,!1));const f=t;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(t=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==e.tagname&&(o+=o?"."+A:A);const g=s;if(this.isItStopNode(this.options.stopNodes,o,A)){let m="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)s=a.closeIndex;else{const _=this.readStopNodeData(n,d,h+1);if(!_)throw new Error(`Unexpected end of ${d}`);s=_.i,m=_.tagContent}const y=new WA(A);A!==c&&u&&(y[":@"]=this.buildAttributesMap(c,o,A)),m&&(m=this.parseTextData(m,A,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),y.add(this.options.textNodeName,m),this.addChild(t,y,o,g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));const m=new WA(A);A!==c&&u&&(m[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,m,o,g),o=o.substr(0,o.lastIndexOf("."))}else{const m=new WA(A);this.tagsNodeStack.push(t),A!==c&&u&&(m[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,m,o,g),t=m}r="",s=h}}else r+=n[s];return e.child};function hj(n,e,t,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(e.tagname,t,e[":@"]);o===!1||(typeof o=="string"&&(e.tagname=o),n.addChild(e,r))}const fj=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function pj(n,e,t,r){return n&&(r===void 0&&(r=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function gj(n,e,t){const r="*."+t;for(const o in n){const s=n[o];if(r===s||e===s)return!0}return!1}function vj(n,e,t=">"){let r,o="";for(let s=e;s<n.length;s++){let i=n[s];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===t[0])if(t[1]){if(n[s+1]===t[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function nl(n,e,t,r){const o=n.indexOf(e,t);if(o===-1)throw new Error(r);return o+e.length-1}function Tm(n,e,t,r=">"){const o=vj(n,e+1,r);if(!o)return;let s=o.data;const i=o.index,a=s.search(/\s/);let A=s,d=!0;a!==-1&&(A=s.substring(0,a),s=s.substring(a+1).trimStart());const c=A;if(t){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1),d=A!==o.data.substr(u+1))}return{tagName:A,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:c}}function mj(n,e,t){const r=t;let o=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=nl(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(o--,o===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=nl(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=nl(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=nl(n,"]]>",t,"StopNode is not closed.")-2;else{const s=Tm(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,t=s.closeIndex)}}function Lm(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:ej(n,t)}else return LH(n)?n:""}const iv=WA.getMetaDataSymbol();function wj(n,e){return Dz(n,e)}function Dz(n,e,t){let r;const o={};for(let s=0;s<n.length;s++){const i=n[s],a=yj(i);let A="";if(t===void 0?A=a:A=t+"."+a,a===e.textNodeName)r===void 0?r=i[a]:r+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Dz(i[a],e,A);const c=_j(d,e);i[iv]!==void 0&&(d[iv]=i[iv]),i[":@"]?bj(d,i[":@"],A,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,A,c)?o[a]=[d]:o[a]=d}}}return typeof r=="string"?r.length>0&&(o[e.textNodeName]=r):r!==void 0&&(o[e.textNodeName]=r),o}function yj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function bj(n,e,t,r){if(e){const o=Object.keys(e),s=o.length;for(let i=0;i<s;i++){const a=o[i];r.isArray(a,t+"."+a,!0,!0)?n[a]=[e[a]]:n[a]=e[a]}}}function _j(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class Bj{constructor(e){this.externalEntities={},this.options=$H(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=kH(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new ij(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(e);return this.options.preserveOrder||o===void 0?o:wj(o,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return WA.getMetaDataSymbol()}}class Nz{constructor(){this.partner_key="JUZFJThGJUQ0JUQ0JUNCUVBD",this.key="JUI5JTgyR3QlMTMtUSVBRiUxMyVEQUslQzclN0ZHJTBCVzQlOUUyLSUxMiUwRmMlODQlNUMlRTglQTYlRjUlMTVMJThBVTclRTIlOTElM0E=",this.parser=new Bj({ignoreAttributes:!1,trimValues:!0})}async getProduct(e){var t,r;try{const o=await Nn.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Search.php",{params:{partner_key:this.partner_key,key:this.key,goodsNo:e}});if(typeof o.data!="string")throw new Error("XML    .");const i=this.parser.parse(o.data).data.return.goods_data,a=((t=i.optionName)==null?void 0:t.split("^|^").map(d=>d))||[];console.log({godoProduct:i});const A=a.map((d,c)=>{var g;const u=((g=i.optionData)==null?void 0:g.map(m=>m[`optionValue${c+1}`]).filter(m=>m))||[],h=[...new Set(u)],f=h.map(m=>{var y,_;if(c===0){const I=(((_=(y=i.optionData)==null?void 0:y.find(k=>k[`optionValue${c+1}`]===m))==null?void 0:_.optionImage)||"").split("http").pop();return I?"http"+I:""}return""});return{title:d,values:h,images:f}});return{title:i.goodsNm,description:i.goodsDescription,handle:i.goodsNo,thumbnail:i.listImageData?i.listImageData["#text"]:"",goodsNo:i.goodsNo,goodsNm:i.goodsNm,goodsDescription:i.goodsDescription.replace(/\\r\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\/g,"")||"",status:"draft",productOptionValues:A,variants:((r=i.optionData)==null?void 0:r.map(d=>{const c=Array.from({length:5},(g,m)=>d[`optionValue${m+1}`]).filter(g=>g!==void 0&&g!==""),h=(d.optionImage||"").split("http").pop(),f=h?"http"+h:"";return{title:c.join(" / "),sku:d.optionCode||`${i.goodsNo}-${c.join("-")}`,thumbnail:f,barcode:"",inventory_quantity:parseInt(d.stockCnt||"0"),price:parseInt(i.goodsPrice+d.optionPrice||"0")}}))||[],mallType:"godo5",mallProductId:e,textOptionData:i.textOptionData}}catch(o){throw console.error("Godo5 API Error:",o),new Error("5    .")}}async getAddProduct(e){try{const t=await Nn.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Add_Search.php",{params:{partner_key:this.partner_key,key:this.key,addGoodsNo:e}});if(typeof t.data!="string")throw new Error("XML    .");console.log({response:t});const r=this.parser.parse(t.data);console.log({result:r});const o=r.data.return.goods_data;return console.log({addGoodsData:o}),{addGoodsNo:o.addGoodsNo,goodsNm:o.goodsNm,goodsPrice:parseInt(o.goodsPrice||"0"),stockCnt:parseInt(o.stockCnt||"0"),listImageData:o.listImageData,soldOutFl:o.soldOutFl==="y"}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}parseOptionInfo(e){try{return JSON.parse(e).map(r=>({name:r[0]||"",value:r[1]||"",code:r[2]||"",stock:r[3]||"",price:parseInt(r[3]||"0")})).filter(r=>r.name&&r.value)}catch(t){return console.error("   :",t),[]}}getOptionCode(e){try{return JSON.parse(e)[0][2]||""}catch(t){return console.error("   :",t),""}}async getOrder(e){try{const t=await Nn.get("https://openhub.godo.co.kr/godomall5/order/Order_Search.php",{params:{partner_key:this.partner_key,key:this.key,orderNo:e}});if(typeof t.data!="string")throw new Error("XML    .");const o=this.parser.parse(t.data).data.return.order_data;return console.log({orderData:o}),{orderNo:o.orderNo,orderDate:o.orderDate,orderStatus:o.orderStatus,orderName:o.orderInfoData.orderName,orderEmail:o.orderInfoData.orderEmail,orderPhone:o.orderInfoData.orderPhone,receiverName:o.orderInfoData.receiverName,receiverPhone:o.orderInfoData.receiverPhone,receiverAddress:`${o.orderInfoData.receiverZonecode} ${o.orderInfoData.receiverAddress} ${o.orderInfoData.receiverAddressSub}`,totalPrice:parseInt(o.settlePrice),orderGoodsData:Array.isArray(o.orderGoodsData)?o.orderGoodsData.map(s=>({goodsNo:s.goodsNo||"",goodsNm:s.goodsNm||"",goodsType:"orderGoods",goodsCnt:s.goodsCnt||0,goodsPrice:s.goodsPrice||0,listImageData:s.listImageData||"",exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[],addGoodsData:Array.isArray(o.addGoodsData)?o.addGoodsData.map(s=>({goodsNm:s.goodsNm,addGoodsNo:s.addGoodsNo,goodsType:"addGoods",goodsCnt:parseInt(String(s.goodsCnt)),goodsPrice:parseInt(String(s.goodsPrice)),listImageData:s.listImageData,exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[]}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}}new Nz;async function xj(n,e){const t=[],r=n.filter(o=>o.product&&o.product.mall_type==="godo5"&&o.product.mall_product_id);if(r.length===0)return console.log("5  ."),t;console.log(`${r.length} 5  .`);try{const o=document.createElement("form");o.method="POST",o.action="/order/cart_ps.php",o.style.display="none";const s=(i,a)=>{const A=document.createElement("input");A.type="hidden",A.name=i,A.value=a,o.appendChild(A)};s("mode","cartIn"),s("cartMode","d"),s("useBundleGoods","1"),s("scmNo","1");for(const i of r)try{const A=i.product.mall_product_id,d=i.idx;let c=1;i.isAdditionalCost?c=1:c=Array.isArray(i.items)?i.items.reduce((f,g)=>f+(g.quantity||0),0):1;let u="";e&&d!==void 0&&(i.isAdditionalCost?u=`${e}-add-${i.id}`:u=`${e}-${d}`);const h=await Cj(i.product.mall_product_id);console.log(`   (${i.isAdditionalCost?"":""}):`,h),s("goodsNo[]",A),s("goodsCnt[]",c.toString()),s("optionFl[]","n"),s("displayOptionkey[]",""),s("goodsPriceSum[]","0"),s("addGoodsPriceSum[]","0"),u&&h.textOptionData.optionName==="odiz"&&s(`optionText[${d}][${h.textOptionData.sno}]`,u),t.push(A)}catch(a){console.error("    :",a)}return document.body.appendChild(o),console.log(o),o.submit(),console.log(`${r.length} 5     `),t}catch(o){return console.error("    :",o),t}}async function zj(n){var t,r,o,s;const e={success:!1,submittedOrders:[]};try{const i=((t=n[0])==null?void 0:t.estimate_id)||((s=(o=(r=n[0])==null?void 0:r.items)==null?void 0:o[0])==null?void 0:s.estimate_id),a=await xj(n,i);a.length>0&&(e.submittedOrders.push({mallType:"godo5",productIds:a}),e.success=!0)}catch(i){console.error("    :",i)}return e}async function Cj(n){return await new Nz().getProduct(n)}var Sj=Y('<button class="odz-btn odz-btn-outline odz-ml-2"></button>'),Ej=Y('<div class="odz-text-xs odz-text-gray-500 odz-mt-2"> </div>'),Fj=Y('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm"> </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button> <!></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"><button class="odz-btn odz-btn-xs odz-btn-outline">1</button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline">6</button> <button class="odz-btn odz-btn-xs odz-btn-outline">1</button></div> <!></div></fieldset></div></div>'),Ij=Y('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm">  </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button></div></div> <div class="odz-text-xs odz-text-gray-500 odz-mt-2">* /      .</div></div></fieldset></div></div>'),Uj=Y('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),Qj=Y('<div class="odz-alert odz-alert-error"><span> </span></div>'),Tj=Y('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8"><!></div>'),Lj=Y('<img loading="lazy" class="odz-w-24 odz-h-24 odz-rounded-xl odz-object-cover odz-ring-2 odz-ring-gray-100 odz-transition-transform odz-duration-300 group-hover:odz-scale-105"> <div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100" style="display: none;"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>',1),Pj=Y('<div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),kj=Y('<div class="odz-absolute -odz-bottom-2 -odz-right-2 odz-bg-indigo-600 odz-text-white odz-text-xs odz-font-bold odz-px-2.5 odz-py-1 odz-rounded-full odz-shadow-lg odz-ring-2 odz-ring-white"> </div>'),Oj=Y('<p class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-truncate"> <!></p>'),Dj=Y('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-medium odz-border odz-border-indigo-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> </span>'),Nj=Y('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-amber-50 odz-text-amber-700 odz-text-xs odz-font-medium odz-border odz-border-amber-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </span>'),Mj=Xp('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>'),Hj=Xp('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>',1),jj=Y('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> </button>'),Rj=Y('<article class="odz-group odz-relative odz-flex odz-flex-col odz-overflow-hidden odz-bg-white odz-border odz-border-gray-200 odz-rounded-2xl odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all odz-duration-300 hover:odz-shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:odz-border-indigo-200"><div class="odz-absolute odz-top-4 odz-right-4 odz-z-10"><span><svg class="odz-w-2 odz-h-2 odz-fill-current svelte-1arj5vx" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" class="svelte-1arj5vx"></circle></svg> </span></div> <div class="odz-flex odz-flex-col lg:odz-flex-row"><div class="odz-flex odz-flex-1 odz-flex-col odz-p-6"><div class="odz-flex odz-items-start odz-gap-5 odz-mb-5"><div class="odz-relative odz-flex-shrink-0"><!> <!></div> <div class="odz-flex-1 odz-min-w-0 odz-pt-1"><h3 class="odz-text-xl odz-font-bold odz-text-slate-900 odz-mb-2 odz-line-clamp-2 odz-leading-tight"> </h3> <!> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mb-5"><!> <!></div> <div class="odz-grid odz-grid-cols-2 odz-gap-4 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-flex-col odz-gap-1"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-3 odz-p-5 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-xl odz-border odz-border-slate-200"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5 odz-col-span-2 sm:odz-col-span-1"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"> </span> <span class="odz-text-lg odz-font-bold odz-text-indigo-600"> </span></div></div></div> <div class="odz-flex odz-flex-col odz-gap-4 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-gray-50 odz-border-t lg:odz-border-t-0 lg:odz-border-l odz-border-gray-200 lg:odz-w-56 odz-justify-between"><div class="odz-flex odz-flex-col odz-gap-2"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"> </span> <button type="button"><svg class="odz-w-4 odz-h-4 svelte-1arj5vx" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" class="svelte-1arj5vx"></path></svg> </button></div> <div class="odz-flex odz-flex-col odz-gap-2.5"><button class="odz-btn odz-btn-primary odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <!></div></div></div></article>'),qj=Y('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),Kj=Y('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),$j=Y('<div class="odz-fixed odz-inset-0 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50 odz-z-50"><div class="odz-bg-white odz-p-6 odz-rounded-lg odz-shadow-xl"><div class="odz-flex odz-flex-col odz-items-center"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-mb-4"></span> <p class="odz-text-lg odz-font-medium">  ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2">  </p></div></div></div>'),Vj=Y('<div class="odz-w-full"><h2 class="odz-text-xl odz-font-bold odz-mb-4"> </h2> <!> <!> <!></div> <!> <dialog id="password_confirm_modal"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg odz-mb-4">  </h3> <p class="odz-text-sm odz-mb-4">     .</p> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text"></span></label> <input type="password" placeholder=" "> <!></div> <div class="odz-modal-action"><button class="odz-btn odz-btn-outline"></button> <button class="odz-btn odz-btn-primary"></button></div></div> <div class="odz-modal-backdrop"></div></dialog> <!>',1);function Gj(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(ks,"$shopStore",t),s=()=>Gr(ol,"$customerStore",t);let i=vt(e,"openEstimateModal",8,()=>{}),a=Ue([]),A=Ue(!0),d=Ue(null),c,u=Ue(!1),h=Ue(null),f=Ue(""),g=Ue(""),m=Ue(!1),y=Ue(!1),_=Ue(""),C=Ue(""),I=Ue(!1),N=Ue(!1),k=Ue(""),W=null,V=Ue(""),H=Ue(!1),J=null,xe=Ue(null);const M={thumbnail:null,productNames:[],itemCount:0,totalQuantity:0};let O={};Fn(async()=>{try{if(l(m)){b(A,!0);try{console.log("[ODIZ Debug]   "),console.log("[ODIZ Debug] shop_id:",o().id),console.log("[ODIZ Debug] sess:",o().sess),console.log("[ODIZ Debug] mallType:",s().mallType);const Ce=await pt.from("estimates").select("*").eq("shop_id",o().id).is("customer_id",null).eq("sess",o().sess).neq("status","temp").order("created_at",{ascending:!1});if(Ce.error)throw Ce.error;b(a,Ce.data||[]),s().mallType&&s().mallType.trim()!==""&&b(a,l(a).filter(de=>de.mall_type===s().mallType)),await Be(l(a))}catch(Ce){console.error("    :",Ce),b(a,[])}b(A,!1)}else{const Ce=new Date,de=new Date(Ce);de.setMonth(de.getMonth()-1),b(_,te(de)),b(C,te(Ce)),b(I,!0);const{getEstimatesWithDateFilter:Te}=await ps(async()=>{const{getEstimatesWithDateFilter:qe}=await Promise.resolve().then(()=>h0);return{getEstimatesWithDateFilter:qe}},void 0);b(a,await Te(o().sess,o().customer_id,o().id,l(_),l(C))),await Be(l(a)),c=n5(o().sess,o().id,async qe=>{var je,Re,Ve,At,Ke,nt;qe.eventType==="UPDATE"?((je=qe.new)==null?void 0:je.status)!=="temp"?(b(a,l(a).map(ht=>ht.id===qe.new.id?{...ht,...qe.new}:ht)),await Z((Re=qe.new)==null?void 0:Re.id)):(b(a,l(a).filter(ht=>ht.id!==qe.new.id)),se((Ve=qe.new)==null?void 0:Ve.id)):qe.eventType==="INSERT"?((At=qe.new)==null?void 0:At.status)!=="temp"&&(b(a,[qe.new,...l(a)]),await Z((Ke=qe.new)==null?void 0:Ke.id)):qe.eventType==="DELETE"&&(b(a,l(a).filter(ht=>ht.id!==qe.old.id)),se((nt=qe.old)==null?void 0:nt.id))},o().customer_id)}}catch(Ce){b(d,Ce.message||"     ."),O={}}finally{b(A,!1)}}),Qo(()=>{c&&c.unsubscribe()});function X(Ce){if(!Ce)return"";const de=new Date(Ce);return`${de.getFullYear()}-${String(de.getMonth()+1).padStart(2,"0")}-${String(de.getDate()).padStart(2,"0")}`}function te(Ce){const de=Ce.getFullYear(),Te=String(Ce.getMonth()+1).padStart(2,"0"),qe=String(Ce.getDate()).padStart(2,"0");return`${de}-${Te}-${qe}`}function le(Ce){const de=new Date,Te=te(de);let qe=new Date(de);switch(Ce){case"1week":qe.setDate(qe.getDate()-7);break;case"1month":qe.setMonth(qe.getMonth()-1);break;case"6months":qe.setMonth(qe.getMonth()-6);break;case"1year":qe.setFullYear(qe.getFullYear()-1);break}b(_,te(qe)),b(C,Te)}function ne(Ce){const de=new Set;let Te=null,qe=0,je=0;return(Ce||[]).forEach((Ve,At)=>{var ht,mt;if(!Ve)return;je+=1,qe+=Ve.quantity||0;const Ke=(ht=Ve.product)==null?void 0:ht.title;Ke&&de.add(Ke);const nt=(mt=Ve.product)==null?void 0:mt.thumbnail;!Te&&nt&&(Te=nt)}),{thumbnail:Te,productNames:Array.from(de),itemCount:je,totalQuantity:qe}}async function Be(Ce){const de=Ce.map(Te=>Te.id).filter(Te=>!!Te);if(de.length===0){O={};return}try{const{data:Te,error:qe}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).in("estimate_id",de);if(qe){console.error("    :",qe);return}const je={};(Te||[]).forEach(Ve=>{Ve!=null&&Ve.estimate_id&&(je[Ve.estimate_id]||(je[Ve.estimate_id]=[]),je[Ve.estimate_id].push(Ve))});const Re={};de.forEach(Ve=>{Re[Ve]=ne(je[Ve])}),O=Re}catch(Te){console.error("     :",Te)}}async function Z(Ce){if(Ce)try{const{data:de,error:Te}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).eq("estimate_id",Ce);if(Te){console.error("[ERROR]      :",Te),console.error("[ERROR] estimateId:",Ce);return}const qe=ne(de);O={...O,[Ce]:qe}}catch(de){console.error("[ERROR]       :",de),console.error("[ERROR] estimateId:",Ce)}}function se(Ce){if(!Ce)return;const{[Ce]:de,...Te}=O;O=Te}function ce(Ce){return Ce&&O[Ce]||M}function be(Ce){switch(Ce){case"pending":return"";case"progress":return"";case"completed":return"";case"temp":return"";case"canceled":return"";case"hold":return"";default:return""}}function x(Ce){switch(Ce){case"pending":return"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200";case"progress":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"canceled":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";case"hold":case"temp":return"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function F(Ce){switch(Ce){case"none":return" ";case"waiting":return" ";case"processing":return" ";case"confirming":return" ";case"completed":return" ";case"rejected":return" ";default:return"-"}}function E(Ce){switch(Ce){case"none":return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200";case"waiting":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"processing":return"odz-bg-indigo-100 odz-text-indigo-700 odz-border-indigo-200";case"confirming":return"odz-bg-purple-100 odz-text-purple-700 odz-border-purple-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"rejected":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function U(Ce){b(h,Ce),b(u,!0)}async function P(){b(A,!0),b(d,null),b(y,!0);try{b(a,await d5(o().id,l(f),l(g),o().sess,s().mallType)),await Be(l(a)),l(a).length===0&&(!l(f)&&!l(g)?b(d,"   ."):b(d,"    ."))}catch(Ce){b(d,Ce.message||"    ."),b(a,[]),O={}}finally{b(A,!1)}}async function T(){if(!l(_)&&!l(C)){b(d,"   .");return}b(A,!0),b(d,null),b(I,!0);try{const{getEstimatesWithDateFilter:Ce}=await ps(async()=>{const{getEstimatesWithDateFilter:de}=await Promise.resolve().then(()=>h0);return{getEstimatesWithDateFilter:de}},void 0);b(a,await Ce(o().sess,o().customer_id,o().id,l(_),l(C))),await Be(l(a)),l(a).length===0&&b(d,"   .")}catch(Ce){b(d,Ce.message||"    ."),b(a,[]),O={}}finally{b(A,!1)}}async function R(){b(d,null);const Ce=new Date,de=new Date(Ce);de.setMonth(de.getMonth()-1),b(_,te(de)),b(C,te(Ce)),b(I,!0),b(A,!0);try{const{getEstimatesWithDateFilter:Te}=await ps(async()=>{const{getEstimatesWithDateFilter:qe}=await Promise.resolve().then(()=>h0);return{getEstimatesWithDateFilter:qe}},void 0);b(a,await Te(o().sess,o().customer_id,o().id,l(_),l(C))),await Be(l(a))}catch(Te){b(d,Te.message||"     ."),O={}}finally{b(A,!1)}}function q(Ce){l(m)&&Ce.status==="pending"?(W=Ce,b(k,""),b(V,""),b(N,!0)):window.location.href=`?mode=register&estimateId=${Ce.id}`}async function j(){if(!W||!l(k).trim()){b(V," .");return}try{const{data:Ce,error:de}=await pt.from("estimates").select("id").eq("id",W.id).eq("password",l(k)).single();if(de||!Ce){b(V,"  .");return}b(N,!1),i()(!0,W)}catch(Ce){b(V,"    ."),console.error("  :",Ce)}}function Ae(){b(N,!1),b(k,""),b(V,""),W=null}async function Ee(Ce){if(!(!Ce||!Ce.id))try{b(H,!0),b(xe,Ce.id);const de=await c5(Ce.id);let Te=[...de];const qe=await f5(Ce.id);if((qe==null?void 0:qe.length)>0){const Re=de.length>0?Math.max(...de.map(At=>At.idx||0)):0,Ve=qe.map((At,Ke)=>({...At,idx:Re+Ke+1,items:At.items.map(nt=>({...nt,idx:Re+Ke+1}))}));Te=[...Te,...Ve]}if(!Te.some(Re=>Re.product&&Re.product.mall_type==="godo5"&&Re.product.mall_product_id)){alert("5    .");return}if(J=await zj(Te),J.success){const Re=J.submittedOrders.reduce((Ve,At)=>Ve+At.productIds.length,0);alert(` .  ${Re}  .`)}else alert("  .   .")}catch(de){console.error("    :",de),alert("    : "+de.message)}finally{b(H,!1)}}Jt(()=>o(),()=>{b(m,!o().customer_id)}),to(),Rr();var _e=Vj(),Oe=ft(_e),G=z(w(Oe),2);{var D=Ce=>{var de=Fj(),Te=w(de),qe=w(Te),je=z(w(qe),2),Re=w(je),Ve=w(Re),At=z(w(Ve),2),Ke=z(Ve,2),nt=z(w(Ke),2),ht=z(Ke,2),mt=w(ht),St=z(mt,2);{var st=Dt=>{var qt=Sj();He(()=>qt.disabled=l(A)),at("click",qt,R),L(Dt,qt)};ze(St,Dt=>{l(I)&&Dt(st)})}var tt=z(Re,2),Ft=w(tt),xt=z(Ft,2),Ot=z(xt,2),Ze=z(Ot,2),wt=z(tt,2);{var gt=Dt=>{var qt=Ej(),zt=w(qt);He(()=>Le(zt,`*  ${l(_)||""} ~ ${l(C)||""}   `)),L(Dt,qt)};ze(wt,Dt=>{l(I)&&Dt(gt)})}He(()=>{mt.disabled=l(A),Ft.disabled=l(A),xt.disabled=l(A),Ot.disabled=l(A),Ze.disabled=l(A)}),yr(At,()=>l(_),Dt=>b(_,Dt)),yr(nt,()=>l(C),Dt=>b(C,Dt)),at("click",mt,T),at("click",Ft,()=>le("1week")),at("click",xt,()=>le("1month")),at("click",Ot,()=>le("6months")),at("click",Ze,()=>le("1year")),L(Ce,de)};ze(G,Ce=>{l(m)||Ce(D)})}var ie=z(G,2);{var me=Ce=>{var de=Ij(),Te=w(de),qe=w(Te),je=z(w(qe),2),Re=w(je),Ve=w(Re),At=z(w(Ve),2),Ke=z(Ve,2),nt=z(w(Ke),2),ht=z(Ke,2),mt=w(ht);yr(At,()=>l(f),St=>b(f,St)),yr(nt,()=>l(g),St=>b(g,St)),at("click",mt,P),L(Ce,de)};ze(ie,Ce=>{l(m)&&Ce(me)})}var pe=z(ie,2);{var oe=Ce=>{var de=Uj();L(Ce,de)},ye=Ce=>{var de=kt(),Te=ft(de);{var qe=Re=>{var Ve=Qj(),At=w(Ve),Ke=w(At);He(()=>Le(Ke,l(d))),L(Re,Ve)},je=Re=>{var Ve=kt(),At=ft(Ve);{var Ke=ht=>{var mt=Tj(),St=w(mt);{var st=Ft=>{var xt=en("    .");L(Ft,xt)},tt=Ft=>{var xt=kt(),Ot=ft(xt);{var Ze=gt=>{var Dt=en("   .    .");L(gt,Dt)},wt=gt=>{var Dt=en("  .");L(gt,Dt)};ze(Ot,gt=>{l(m)?gt(Ze):gt(wt,!1)},!0)}L(Ft,xt)};ze(St,Ft=>{l(m)&&l(y)?Ft(st):Ft(tt,!1)})}L(ht,mt)},nt=ht=>{var mt=qj();Yt(mt,5,()=>l(a),St=>St.id??St.created_at,(St,st)=>{var tt=Rj();const Ft=dt(()=>ce(l(st).id)),xt=dt(()=>l(st).design_confirm==="confirming"||l(st).design_confirm==="completed");var Ot=w(tt),Ze=w(Ot),wt=z(w(Ze)),gt=z(Ot,2),Dt=w(gt),qt=w(Dt),zt=w(qt),Mt=w(zt);{var jt=Ir=>{var Xr=Lj(),un=ft(Xr);He(()=>{rr(un,"src",l(Ft).thumbnail),rr(un,"alt",(l(st).name||"")+"  ")}),z_(un),at("error",un,xs=>{xs.currentTarget.style.display="none";const oi=xs.currentTarget.nextElementSibling;oi&&(oi.style.display="flex")}),L(Ir,Xr)},Ct=Ir=>{var Xr=Pj();L(Ir,Xr)};ze(Mt,Ir=>{l(Ft).thumbnail?Ir(jt):Ir(Ct,!1)})}var Et=z(Mt,2);{var Nt=Ir=>{var Xr=kj(),un=w(Xr);He(()=>Le(un,`${l(Ft).totalQuantity??""}`)),L(Ir,Xr)};ze(Et,Ir=>{l(Ft).totalQuantity>0&&Ir(Nt)})}var Zt=z(zt,2),nr=w(Zt),ir=w(nr),sr=z(nr,2);{var dr=Ir=>{var Xr=Oj(),un=w(Xr),xs=z(un);{var oi=Ms=>{var Fi=en();He(()=>Le(Fi,` ${l(Ft).productNames.length-1}`)),L(Ms,Fi)};ze(xs,Ms=>{l(Ft).productNames.length>1&&Ms(oi)})}He(()=>Le(un,l(Ft).productNames[0])),L(Ir,Xr)};ze(sr,Ir=>{l(Ft).productNames.length>0&&Ir(dr)})}var Jr=z(sr,2),sn=z(w(Jr)),lr=z(qt,2),cr=w(lr);{var qr=Ir=>{var Xr=Dj(),un=z(w(Xr));He(()=>Le(un,` ${l(st).estimate_no??""}`)),L(Ir,Xr)};ze(cr,Ir=>{l(st).estimate_no&&Ir(qr)})}var Pr=z(cr,2);{var _r=Ir=>{var Xr=Nj(),un=z(w(Xr));He(xs=>Le(un,`  ${xs??""}`),[()=>X(l(st).pref_delivery_date)],dt),L(Ir,Xr)};ze(Pr,Ir=>{l(st).pref_delivery_date&&Ir(_r)})}var wr=z(lr,2),Qr=w(wr),Wr=z(w(Qr),2),vn=w(Wr),Hr=z(Qr,2),pr=z(w(Hr),2),In=w(pr),To=z(wr,2),ro=w(To),xo=z(w(ro),2),as=w(xo),Tn=z(ro,2),Lo=z(w(Tn),2),Ln=w(Lo),Po=z(Tn,2),ri=z(w(Po),2),ta=w(ri),Ds=z(Po,2),or=z(w(Ds),2),Vr=w(or),bn=z(Dt,2),lo=w(bn),no=z(w(lo),2),Vo=z(w(no)),Gt=z(lo,2),kr=w(Gt),zn=w(kr),zo=w(zn);{var Ns=Ir=>{var Xr=Mj();L(Ir,Xr)},Pn=Ir=>{var Xr=Hj();L(Ir,Xr)};ze(zo,Ir=>{l(st).status==="pending"?Ir(Ns):Ir(Pn,!1)})}var ni=z(zn),La=z(kr,2);{var br=Ir=>{var Xr=jj(),un=z(w(Xr));He(()=>{Xr.disabled=l(H)||l(xe)===l(st).id,Le(un,` ${(l(H)&&l(xe)===l(st).id?"...":"")??""}`)}),at("click",Xr,()=>Ee(l(st))),L(Ir,Xr)};ze(La,Ir=>{l(st).status==="completed"&&Ir(br)})}He((Ir,Xr,un,xs,oi,Ms,Fi,oc,sc)=>{Cr(Ze,`${Ir??""} svelte-1arj5vx`),Le(wt,` ${Xr??""}`),Le(ir,l(st).name||"  "),Le(sn,` ${un??""}`),Le(vn,l(st).organization_name||"-"),Le(In,l(st).order_name||"-"),Le(as,xs),Le(Ln,oi),Le(ta,Ms),Le(Vr,Fi),Cr(no,`${oc??""} svelte-1arj5vx`),no.disabled=!l(xt),Le(Vo,` ${sc??""}`),Le(ni,` ${(l(st).status==="pending"?"":"")??""}`)},[()=>`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-backdrop-blur-sm ${x(l(st).status)}`,()=>be(l(st).status),()=>X(l(st).created_at),()=>l(st).product_amount!==null&&l(st).product_amount!==void 0?`${vr(l(st).product_amount)}`:"-",()=>l(st).print_amount!==null&&l(st).print_amount!==void 0?`${vr(l(st).print_amount)}`:"-",()=>l(st).addon_amount!==null&&l(st).addon_amount!==void 0?`${vr(l(st).addon_amount)}`:"-",()=>l(st).total_amount!==null&&l(st).total_amount!==void 0?`${vr(l(st).total_amount)}`:"-",()=>`odz-inline-flex odz-items-center odz-justify-center odz-gap-2 odz-px-4 odz-py-2.5 odz-rounded-lg odz-text-sm odz-font-semibold odz-transition-all odz-duration-200 ${E(l(st).design_confirm)} ${l(xt)?"hover:odz-shadow-md hover:odz-scale-105":"odz-opacity-60 odz-cursor-not-allowed"}`,()=>F(l(st).design_confirm)],dt),at("click",no,()=>{l(xt)&&U(l(st).id)}),at("click",kr,()=>q(l(st))),L(St,tt)}),L(ht,mt)};ze(At,ht=>{l(a).length===0?ht(Ke):ht(nt,!1)},!0)}L(Re,Ve)};ze(Te,Re=>{l(d)?Re(qe):Re(je,!1)},!0)}L(Ce,de)};ze(pe,Ce=>{l(A)?Ce(oe):Ce(ye,!1)})}var Ne=z(Oe,2);{var we=Ce=>{var de=kt(),Te=ft(de);Q4(Te,()=>l(h),qe=>{e7(qe,{get estimateId(){return l(h)},get isOpen(){return l(u)},set isOpen(je){b(u,je)},$$legacy:!0})}),L(Ce,de)};ze(Ne,Ce=>{l(h)&&Ce(we)})}var Fe=z(Ne,2),ue=w(Fe),De=z(w(ue),4),Pe=z(w(De),2),he=z(Pe,2);{var ee=Ce=>{var de=Kj(),Te=w(de),qe=w(Te);He(()=>Le(qe,l(V))),L(Ce,de)};ze(he,Ce=>{l(V)&&Ce(ee)})}var ge=z(De,2),Se=w(ge),Me=z(Se,2),Qe=z(ue,2),ot=z(Fe,2);{var Ye=Ce=>{var de=$j();L(Ce,de)};ze(ot,Ce=>{l(H)&&Ce(Ye)})}He(()=>{Cr(Fe,`odz-modal ${(l(N)?"odz-modal-open":"")??""}`),Cr(Pe,`odz-input odz-input-bordered odz-w-full ${(l(V)?"odz-input-error":"")??""}`)}),yr(Pe,()=>l(k),Ce=>b(k,Ce)),at("keydown",Pe,Ce=>{Ce.key==="Enter"&&j()}),at("click",Se,Ae),at("click",Me,j),at("click",Qe,Ae),L(n,_e),Mr(),r()}var Wj=Y('<div class="odz-text-sm odz-text-gray-600 odz-leading-relaxed"> </div>'),Xj=Y('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-justify-between odz-items-start odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-text-base odz-font-semibold odz-text-gray-800 odz-mb-1"> </div> <!></div> <div class="odz-text-lg odz-font-bold odz-text-gray-900 odz-ml-4"> </div></div></div>'),Yj=Y('<div class="odz-bg-white odz-border odz-border-gray-300 odz-rounded odz-px-2 odz-py-1 odz-text-xs odz-text-gray-700"> </div>'),Jj=Y('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-px-4 odz-py-3 odz-flex-shrink-0"><div class="odz-text-sm odz-font-semibold odz-text-gray-800 odz-mb-2"> </div> <div class="odz-flex odz-flex-wrap odz-gap-1"></div></div>'),Zj=Y('<div class="odz-text-xs odz-text-blue-600 odz-mt-1"><!></div>'),eR=Y('<div class="odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-md odz-p-3 odz-mb-3"><div class="odz-flex odz-justify-between odz-items-center odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="odz-font-medium odz-text-blue-700">  </span></div> <div class="odz-text-right"><div class="odz-text-xs odz-text-gray-500 odz-line-through"> </div> <div class="odz-text-sm odz-font-semibold odz-text-red-600"> </div></div></div> <!></div>'),tR=Y('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-3 odz-mb-4"></div> <div class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-text-right"> </div> <!> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),rR=Y('<span class="odz-w-6 odz-h-6 odz-rounded-full odz-border-2 odz-border-white odz-shadow-sm"></span>'),nR=Y('<div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-gap-1"></div> <div class="odz-text-sm odz-text-gray-800"> </div></div></div>'),oR=Y('<div class="odz-bg-white odz-border odz-border-gray-100 odz-rounded-xl odz-p-5 odz-shadow-sm odz-hover:shadow-md odz-transition-all odz-duration-200"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-blue-100 odz-text-blue-600 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-text-sm odz-font-semibold"></div> <span class="odz-font-medium odz-text-gray-900"> </span></div> <div class="odz-text-right"><div class="odz-text-lg odz-font-bold odz-text-gray-900"> </div></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"><!> <div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-text-sm odz-text-gray-800 odz-leading-relaxed"> </div></div></div></div>'),sR=Y('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-6"> </h3> <div class="odz-space-y-4"></div></div>'),iR=Y('<span class="odz-text-gray-600"> </span>'),aR=Y('<div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-font-medium odz-text-gray-800 odz-mb-1"> <!></div> <div class="odz-text-sm odz-text-gray-600"> </div></div> <div class="odz-font-semibold odz-text-gray-900"> </div></div>'),AR=Y('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-col odz-gap-3 odz-mb-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),lR=Y("<!> <!> <!>",1),dR=Y('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-p-4 odz-animate-in odz-fade-in odz-duration-300"><div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-60 odz-backdrop-blur-sm odz-cursor-pointer"></div> <div class="odz-relative odz-bg-white odz-rounded-xl odz-shadow-2xl odz-max-w-2xl odz-max-h-[90vh] odz-w-full odz-overflow-hidden odz-flex odz-flex-col odz-animate-in odz-zoom-in-95 odz-slide-in-from-bottom-4 odz-duration-300 odz-cursor-default"><div class="odz-flex odz-justify-between odz-items-center odz-p-6 odz-border-b odz-border-gray-200 odz-bg-gradient-to-r odz-from-slate-50 odz-to-slate-100 odz-sticky odz-top-0 odz-z-10"><h2 class="odz-text-2xl odz-font-bold odz-text-gray-900">  </h2> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-hover:odz-bg-gray-100 odz-transition-all odz-duration-200"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-6"><!> <div class="odz-border-t-2 odz-border-gray-200 odz-pt-6 odz-mt-6"><div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-900 odz-rounded-lg odz-p-4"><span class="odz-text-lg odz-font-semibold odz-text-white"> </span> <span class="odz-text-2xl odz-font-bold odz-text-white"> </span></div></div></div></div></div>');function cR(n,e){Nr(e,!1);let t=vt(e,"estimateDetails",8),r=vt(e,"productAmount",8);vt(e,"printAmount",8);let o=vt(e,"addonAmount",8),s=vt(e,"totalAmount",8),i=vt(e,"printInfoList",8),a=vt(e,"addonItems",8),A=vt(e,"addCostItems",8,null),d=vt(e,"isAddCost",8,!1),c=vt(e,"addonProductsMap",24,()=>({}));const u=Yp();let h=Ue([]);function f(){if(!t()||!t().items||t().items.length===0)return;const Be=new Map;t().items.forEach(se=>{const be=(se.variant||{}).title||se.variant_title||" ",x=be.match(/(.+)\s*-\s*(.+)/),F=x?x[1]:be,E=x?x[2]:"";Be.has(F)||Be.set(F,{name:F,sizes:new Map});const U=Be.get(F);U.sizes.has(E)||U.sizes.set(E,{size:E,quantity:0});const P=U.sizes.get(E);P.quantity+=se.quantity||1}),b(h,Array.from(Be.values()).map(se=>({name:se.name,sizes:Array.from(se.sizes.values())}))),b(h,l(h).filter(se=>se.name!==""));const Z=new Set;l(h).forEach(se=>{se.sizes.forEach(ce=>{Z.add(ce.size)})}),Array.from(Z)}function g(Be){return`background-color: ${Be.hex};`}function m(Be,Z){const se=[];if(Be&&se.push(`: ${Be}`),Z&&Z.length>0){const ce=Z.map(be=>be.name).join(" > ");se.push(`: ${ce}`)}return se.length>0?se.join(" | "):" "}function y(){return A()&&A().amount||0}function _(){u("close")}Jt(()=>Cn(t()),()=>{t()&&f()}),to(),Rr();var C=dR(),I=w(C),N=z(I,2),k=w(N),W=z(w(k),2),V=z(k,2),H=w(V);{var J=Be=>{var Z=Xj(),se=z(w(Z),2),ce=w(se),be=w(ce),x=w(be),F=z(be,2);{var E=T=>{var R=Wj(),q=w(R);He(()=>Le(q,A().description)),L(T,R)};ze(F,T=>{A().description&&T(E)})}var U=z(ce,2),P=w(U);He(T=>{Le(x,A().name),Le(P,`${T??""}`)},[()=>A().amount.toLocaleString()],dt),L(Be,Z)},xe=Be=>{var Z=kt(),se=ft(Z);{var ce=be=>{var x=lR(),F=ft(x);{var E=q=>{var j=tR(),Ae=z(w(j),2);Yt(Ae,5,()=>l(h),Ar,(pe,oe)=>{var ye=Jj(),Ne=w(ye),we=w(Ne),Fe=z(Ne,2);Yt(Fe,5,()=>l(oe).sizes,Ar,(ue,De)=>{var Pe=Yj(),he=w(Pe);He(()=>Le(he,`${l(De).size??""}: ${l(De).quantity??""}`)),L(ue,Pe)}),He(()=>Le(we,l(oe).name)),L(pe,ye)});var Ee=z(Ae,2),_e=w(Ee),Oe=z(Ee,2);{var G=pe=>{var oe=eR();const ye=dt(()=>t().items.reduce((Se,Me)=>Se+(Me.discount_amount||0)*(Me.quantity||0),0)),Ne=dt(()=>t().items.find(Se=>Se.discount_amount&&Se.discount_amount>0));var we=w(oe),Fe=z(w(we),2),ue=w(Fe),De=w(ue),Pe=z(ue,2),he=w(Pe),ee=z(we,2);{var ge=Se=>{var Me=Zj(),Qe=w(Me);{var ot=Ce=>{var de=en();He(Te=>Le(de,`${l(Ne).discount_value??""}%  ( ${Te??""})`),[()=>(l(Ne).discount_amount||0).toLocaleString()],dt),L(Ce,de)},Ye=Ce=>{var de=en();He(Te=>Le(de,` ${Te??""} `),[()=>l(Ne).discount_value.toLocaleString()],dt),L(Ce,de)};ze(Qe,Ce=>{l(Ne).discount_type==="percentage"?Ce(ot):Ce(Ye,!1)})}L(Se,Me)};ze(ee,Se=>{l(Ne)&&l(Ne).discount_type&&l(Ne).discount_value&&Se(ge)})}He((Se,Me)=>{Le(De,`${Se??""}`),Le(he,`-${Me??""}`)},[()=>t().items.reduce((Se,Me)=>Se+(Me.original_price||Me.price||0)*(Me.quantity||0),0).toLocaleString(),()=>l(ye).toLocaleString()],dt),L(pe,oe)};ze(Oe,pe=>{t().items&&t().items.some(oe=>oe.discount_amount&&oe.discount_amount>0)&&pe(G)})}var D=z(Oe,2),ie=z(w(D),2),me=w(ie);He((pe,oe)=>{Le(_e,` : ${pe??""}`),Le(me,`${oe??""}`)},[()=>l(h).reduce((pe,oe)=>pe+oe.sizes.reduce((ye,Ne)=>ye+Ne.quantity,0),0),()=>r().toLocaleString()],dt),L(q,j)};ze(F,q=>{l(h).length>0&&q(E)})}var U=z(F,2);{var P=q=>{var j=sR(),Ae=z(w(j),2);Yt(Ae,5,i,Ar,(Ee,_e,Oe)=>{var G=oR(),D=w(G),ie=w(D),me=w(ie);me.textContent=Oe+1;var pe=z(ie,2),oe=w(pe),ye=w(oe),Ne=z(D,2),we=w(Ne);{var Fe=he=>{var ee=nR(),ge=z(w(ee),2),Se=w(ge);Yt(Se,5,()=>l(_e).colorInfo,Ar,(ot,Ye)=>{var Ce=rR();He(de=>{rr(Ce,"style",de),rr(Ce,"title",l(Ye).name)},[()=>g(l(Ye))],dt),L(ot,Ce)});var Me=z(Se,2),Qe=w(Me);He(ot=>Le(Qe,ot),[()=>l(_e).colorInfo.map(ot=>ot.name).join(", ")],dt),L(he,ee)};ze(we,he=>{l(_e).colorInfo&&l(_e).colorInfo.length>0&&he(Fe)})}var ue=z(we,2),De=z(w(ue),2),Pe=w(De);He((he,ee)=>{Le(ye,`${he??""}`),Le(Pe,ee)},[()=>l(_e).price.toLocaleString(),()=>m(l(_e).printAreaTitle,l(_e).parentTemplates)],dt),L(Ee,G)}),L(q,j)};ze(U,q=>{i().length>0&&q(P)})}var T=z(U,2);{var R=q=>{var j=AR(),Ae=z(w(j),2);Yt(Ae,5,a,Ar,(G,D)=>{var ie=aR();const me=dt(()=>`${l(D).selected_product_id}_${l(D).selected_variant_id}`),pe=dt(()=>c()[l(me)]);var oe=w(ie),ye=w(oe),Ne=w(ye),we=z(Ne);{var Fe=ee=>{var ge=iR(),Se=w(ge);He(()=>Le(Se,`- ${l(pe).variantTitle??""}`)),L(ee,ge)};ze(we,ee=>{var ge;(ge=l(pe))!=null&&ge.variantTitle&&ee(Fe)})}var ue=z(ye,2),De=w(ue),Pe=z(oe,2),he=w(Pe);He(ee=>{var ge;Le(Ne,`${((ge=l(pe))==null?void 0:ge.productTitle)||""} `),Le(De,`${l(D).quantity??""}`),Le(he,`${ee??""}`)},[()=>(l(D).price*l(D).quantity).toLocaleString()],dt),L(G,ie)});var Ee=z(Ae,2),_e=z(w(Ee),2),Oe=w(_e);He(G=>Le(Oe,`${G??""}`),[()=>o().toLocaleString()],dt),L(q,j)};ze(T,q=>{a().length>0&&q(R)})}L(be,x)};ze(se,be=>{t()&&t().estimate&&be(ce)},!0)}L(Be,Z)};ze(H,Be=>{d()&&A()?Be(J):Be(xe,!1)})}var M=z(H,2),O=w(M),X=w(O),te=w(X),le=z(X,2),ne=w(le);He(Be=>{Le(te,d()?" ":" "),Le(ne,`${Be??""}`)},[()=>d()?y().toLocaleString():s().toLocaleString()],dt),at("click",I,_),at("click",W,_),L(n,C),Mr()}var uR=Y('<p class="odiz-loading"> ...</p>'),hR=Y('<p class="odiz-error"> </p>'),fR=Y('<div class="odiz-addcost-description"> </div>'),pR=Y('<div class="odiz-addcost-detailed"><div class="odiz-addcost-header"><h3 class="odiz-addcost-title"> </h3></div> <div class="odiz-addcost-items"><div class="odiz-addcost-item"><div class="odiz-addcost-info"><div class="odiz-addcost-name"> </div> <!></div> <div class="odiz-addcost-amount"> </div></div></div> <div class="odiz-divider"></div> <div class="odiz-total-price"><div class="odiz-price-label"> </div> <div class="odiz-price-value odiz-total-value"> </div></div></div>'),gR=Y('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"><!></span></div>'),vR=Y('<span class="odz-color-dot-compact"></span>'),mR=Y('<span class="odz-color-count"> </span>'),wR=Y('<span class="odz-color-dots-compact"><!> <!></span>'),yR=Y('<span class="odz-print-area-compact"> </span>'),bR=Y("<!> <!>",1),_R=Y('<span class="odz-print-count"> </span>'),BR=Y('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value odz-print-inline"><!> <!></span></div>'),xR=Y('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"> </span></div>'),zR=Y('<div class="odiz-estimate-detailed"><div class="odz-estimate-summary"><div class="odz-summary-content"><!> <!> <!></div> <div class="odz-summary-actions"><button class="odz-detail-btn" type="button">  </button></div></div> <div class="odz-price-summary"><div class="odz-price-label"></div> <div class="odz-price-value"><span class="odz-text-lg odz-font-bold"> </span></div></div></div>'),CR=Y('<p class="odiz-empty">  .</p>'),SR=Y('<div class="odiz-estimate-preview"><!></div> <!>',1);function ER(n,e){Nr(e,!1);let t=vt(e,"uuid",8),r=vt(e,"idx",8);vt(e,"appType",8);let o=vt(e,"isAddCost",8),s=Ue(!0),i=Ue(null),a=Ue(null),A=Ue(0),d=Ue(0),c=Ue(0),u=Ue(0),h=Ue([]),f=Ue([]),g=Ue(null),m=Ue({}),y=Ue([]),_=Ue(!1);async function C(){var ne,Be;b(m,{});for(const Z of l(f)){const se=`${Z.selected_product_id}_${Z.selected_variant_id}`;if(!l(m)[se])try{if(Z.selected_variant_id){const ce=await wA(Z.selected_variant_id);if(ce){const{data:be}=await pt.from("products").select("id, title").eq("id",Z.selected_product_id).single();fr(m,l(m)[se]={productTitle:(be==null?void 0:be.title)||"",variantTitle:ce.title||"",price:((Be=(ne=ce.prices)==null?void 0:ne[0])==null?void 0:Be.amount)||0})}}else{const{data:ce}=await pt.from("products").select("id, title").eq("id",Z.selected_product_id).single();fr(m,l(m)[se]={productTitle:(ce==null?void 0:ce.title)||"",variantTitle:null,price:Z.price||0})}}catch{fr(m,l(m)[se]={productTitle:"",variantTitle:null,price:Z.price||0})}}}async function I(){try{b(s,!0),b(i,null),b(a,await l1(t()));const ne=await eg(t());if(o()&&(b(g,await u5(r())),console.log("addCostItems",l(g))),l(a)){fr(a,l(a).items=l(a).items.filter(Z=>{var se;return((se=Z.idx)==null?void 0:se.toString())===r()}));const Be=l(a).prints.filter(Z=>{var se;return((se=Z.idx)==null?void 0:se.toString())===r()});fr(a,l(a).prints=l(a).prints.filter(Z=>{var se;return((se=Z.idx)==null?void 0:se.toString())===r()})),b(f,ne.filter(Z=>{var se;return((se=Z.idx)==null?void 0:se.toString())===r()})),await C(),k(),N(),b(h,[]);for(const Z of Be){const se={id:Z.id||0,price:Z.price||0,templateId:Z.template_id,objectId:Z.object_id,colorInfo:[]};try{if(Z.template_id&&(console.log("template_id:",Z.template_id),se.parentTemplates=await ju(Z.template_id),console.log("template_id   :",se.parentTemplates)),Z.object_id){console.log("object_id:",Z.object_id);const ce=await p1(Z.object_id);ce&&(se.printAreaTitle=ce.title,console.log(" :",ce.title))}}catch(ce){console.error("    :",ce)}if(Z.colors)try{let ce=null;if(typeof Z.colors=="string"?ce=JSON.parse(Z.colors):ce=Z.colors,Array.isArray(ce)){let be=[];if(ce.length>0&&Array.isArray(ce[0]))for(const x of ce)Array.isArray(x)&&(be=be.concat(x));else be=ce;be.length>0&&(typeof be[0]=="object"&&be[0]!==null?se.colorInfo=be:se.colorInfo=be.map(x=>({hex:x,name:x})))}console.log("  :",se.colorInfo)}catch(ce){console.error("    :",ce)}l(h).push(se)}console.log("   :",l(h))}}catch(ne){console.error("    :",ne),b(i,"     .")}finally{b(s,!1)}}function N(){if(!l(a)||!l(a).items||l(a).items.length===0)return;const ne=new Map;l(a).items.forEach(Z=>{const ce=(Z.variant||{}).title||Z.variant_title||" ",be=ce.match(/(.+)\s*-\s*(.+)/),x=be?be[1]:ce,F=be?be[2]:"";ne.has(x)||ne.set(x,{name:x,sizes:new Map});const E=ne.get(x);E.sizes.has(F)||E.sizes.set(F,{size:F,quantity:0});const U=E.sizes.get(F);U.quantity+=Z.quantity||1}),b(y,Array.from(ne.values()).map(Z=>({name:Z.name,sizes:Array.from(Z.sizes.values())}))),b(y,l(y).filter(Z=>Z.name!==""));const Be=new Set;l(y).forEach(Z=>{Z.sizes.forEach(se=>{Be.add(se.size)})}),Array.from(Be)}function k(){if(l(a)){b(A,0),b(d,0),b(c,0);for(const ne of l(a).items)ne.quantity&&ne.price&&b(A,l(A)+ne.quantity*ne.price);for(const ne of l(a).prints)ne.price&&b(d,l(d)+ne.price);for(const ne of l(f))ne.price&&ne.quantity&&b(c,l(c)+ne.price*ne.quantity);b(u,l(A)+l(d)+l(c))}}function W(){return l(g)&&l(g).amount||0}Fn(()=>{I()});function V(){b(_,!0)}function H(){b(_,!1)}Rr();var J=SR(),xe=ft(J),M=w(xe);{var O=ne=>{var Be=uR();L(ne,Be)},X=ne=>{var Be=kt(),Z=ft(Be);{var se=be=>{var x=hR(),F=w(x);He(()=>Le(F,l(i))),L(be,x)},ce=be=>{var x=kt(),F=ft(x);{var E=P=>{var T=pR(),R=z(w(T),2),q=w(R),j=w(q),Ae=w(j),Ee=w(Ae),_e=z(Ae,2);{var Oe=oe=>{var ye=fR(),Ne=w(ye);He(()=>Le(Ne,l(g).description)),L(oe,ye)};ze(_e,oe=>{l(g).description&&oe(Oe)})}var G=z(j,2),D=w(G),ie=z(R,4),me=z(w(ie),2),pe=w(me);He((oe,ye)=>{Le(Ee,l(g).name),Le(D,`${oe??""}`),Le(pe,`${ye??""}`)},[()=>l(g).amount.toLocaleString(),()=>W().toLocaleString()],dt),L(P,T)},U=P=>{var T=kt(),R=ft(T);{var q=Ae=>{var Ee=zR(),_e=w(Ee),Oe=w(_e),G=w(Oe);{var D=Pe=>{var he=gR(),ee=z(w(he),2),ge=w(ee);{var Se=Qe=>{var ot=en();He(Ye=>Le(ot,`${l(y)[0].name??""} (${Ye??""})`),[()=>l(y).reduce((Ye,Ce)=>Ye+Ce.sizes.reduce((de,Te)=>de+Te.quantity,0),0)],dt),L(Qe,ot)},Me=Qe=>{var ot=en();He(Ye=>Le(ot,`${l(y)[0].name??""}  ${l(y).length-1} (${Ye??""})`),[()=>l(y).reduce((Ye,Ce)=>Ye+Ce.sizes.reduce((de,Te)=>de+Te.quantity,0),0)],dt),L(Qe,ot)};ze(ge,Qe=>{l(y).length===1?Qe(Se):Qe(Me,!1)})}L(Pe,he)};ze(G,Pe=>{l(y).length>0&&Pe(D)})}var ie=z(G,2);{var me=Pe=>{var he=BR(),ee=z(w(he),2),ge=w(ee);Yt(ge,1,()=>l(h).slice(0,1),Ar,(Qe,ot)=>{var Ye=bR(),Ce=ft(Ye);{var de=je=>{var Re=wR(),Ve=w(Re);Yt(Ve,1,()=>l(ot).colorInfo.slice(0,3),Ar,(nt,ht)=>{var mt=vR();He(()=>{rr(mt,"style",`background-color: ${l(ht).hex??""};`),rr(mt,"title",l(ht).name)}),L(nt,mt)});var At=z(Ve,2);{var Ke=nt=>{var ht=mR(),mt=w(ht);He(()=>Le(mt,`+${l(ot).colorInfo.length-3}`)),L(nt,ht)};ze(At,nt=>{l(ot).colorInfo.length>3&&nt(Ke)})}L(je,Re)};ze(Ce,je=>{l(ot).colorInfo&&l(ot).colorInfo.length>0&&je(de)})}var Te=z(Ce,2);{var qe=je=>{var Re=yR(),Ve=w(Re);He(()=>Le(Ve,l(ot).printAreaTitle)),L(je,Re)};ze(Te,je=>{l(ot).printAreaTitle&&je(qe)})}L(Qe,Ye)});var Se=z(ge,2);{var Me=Qe=>{var ot=_R(),Ye=w(ot);He(()=>Le(Ye,` ${l(h).length-1}`)),L(Qe,ot)};ze(Se,Qe=>{l(h).length>1&&Qe(Me)})}L(Pe,he)};ze(ie,Pe=>{l(h).length>0&&Pe(me)})}var pe=z(ie,2);{var oe=Pe=>{var he=xR(),ee=z(w(he),2),ge=w(ee);He(()=>Le(ge,`${l(f).length??""}`)),L(Pe,he)};ze(pe,Pe=>{l(f).length>0&&Pe(oe)})}var ye=z(Oe,2),Ne=w(ye),we=z(_e,2),Fe=z(w(we),2),ue=w(Fe),De=w(ue);He(Pe=>Le(De,`${Pe??""}`),[()=>l(u).toLocaleString()],dt),at("click",Ne,V),L(Ae,Ee)},j=Ae=>{var Ee=CR();L(Ae,Ee)};ze(R,Ae=>{l(a)&&l(a).estimate?Ae(q):Ae(j,!1)},!0)}L(P,T)};ze(F,P=>{o()&&l(g)?P(E):P(U,!1)},!0)}L(be,x)};ze(Z,be=>{l(i)?be(se):be(ce,!1)},!0)}L(ne,Be)};ze(M,ne=>{l(s)?ne(O):ne(X,!1)})}var te=z(xe,2);{var le=ne=>{cR(ne,{get estimateDetails(){return l(a)},get productAmount(){return l(A)},get printAmount(){return l(d)},get addonAmount(){return l(c)},get totalAmount(){return l(u)},get printInfoList(){return l(h)},get addonItems(){return l(f)},get addCostItems(){return l(g)},get isAddCost(){return o()},get addonProductsMap(){return l(m)},$$events:{close:H}})};ze(te,ne=>{l(_)&&l(a)&&ne(le)})}L(n,J),Mr()}var FR=Y('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),IR=Y('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),UR=Y('<span class="odz-text-red-500 odz-ml-2"> </span>'),QR=Y('<div class="odz-text-sm odz-text-gray-600"> <!></div>'),TR=Y('<div class="odz-absolute -odz-top-1 -odz-right-1 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),LR=Y("<img> <!>",1),PR=Y('<div class="odz-flex odz-items-center odz-gap-1 odz-bg-red-100 odz-px-2 odz-py-1 odz-rounded-full"><span class="odz-text-xs odz-font-medium odz-text-red-600"> </span></div>'),kR=Y('<button><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-relative odz-flex-shrink-0"><!></div> <span> </span> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-shrink-0"><!> <div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path></svg></div></div></div></button>'),OR=Y('<div><h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-text-gray-800"> </h3> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 lg:odz-grid-cols-4 xl:odz-grid-cols-5 odz-gap-3"></div></div>'),DR=Y('<div class="odz-relative"><img class="odz-w-12 odz-h-12 odz-rounded-lg odz-object-cover odz-shadow-md odz-ring-2 odz-ring-white"></div>'),NR=Y('<div class="odz-absolute -odz-top-2 -odz-right-2"><div class="odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-shadow-lg"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>'),MR=Y('<span class="odz-text-sm odz-font-semibold odz-text-gray-700"> </span>'),HR=Y(`<div class="odz-group odz-relative"><div><!> <div class="odz-text-center odz-mb-3"><div> </div> <div class="odz-mt-2 odz-min-h-[2rem] odz-flex odz-flex-col odz-items-center odz-justify-center"><!></div></div> <div class="odz-flex odz-items-center odz-bg-gray-50 odz-rounded-lg odz-p-1 odz-gap-1"><button aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <input type="number" class="odz-flex-1 odz-text-center odz-bg-transparent odz-border-0 odz-text-xs sm:odz-text-sm odz-font-bold odz-text-gray-800
                                                           focus:odz-outline-none focus:odz-ring-0 odz-min-w-0" min="0" placeholder="0"> <button class="odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150 hover:odz-scale-110" aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path></svg></button></div></div></div>`),jR=Y('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),RR=Y('<div class="odz-text-center odz-py-8"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="odz-text-sm odz-text-gray-500">     .</p></div>'),qR=Y('<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-4 odz-mb-6"><!> <div><h4 class="odz-text-xl odz-font-bold odz-text-gray-800"> </h4> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <!></div>'),KR=Y('<div class="odz-space-y-6 odz-mt-6"></div>'),$R=Y('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <!></div></div> <!> <!> <!>',1),VR=Y('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!>',1);function GR(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(hr,"$fixedEstimateStore",t),s=()=>Gr(It,"$estimateStore",t),i=()=>Gr(ks,"$shopStore",t),a=Ue();let A=vt(e,"productId",8),d=vt(e,"estimateId",8,void 0),c=vt(e,"idx",8,void 0),u=vt(e,"onNext",8,void 0),h=Ue(null),f=Ue(!1),g=Ue(null),m=Ue(!1),y=Ue(""),_=Ue(""),C=Ue([]),I=Ue({}),N=Ue({}),k=Ue({}),W=Ue(0),V=Ue(0),H=null;function J(j){var ie,me,pe,oe,ye,Ne;if(!l(a)||!l(a).variants||!l(a).options||l(a).options.length===0)return;const Ae=o();if((me=(ie=Ae==null?void 0:Ae.productSelection)==null?void 0:ie.quantityByVariant)!=null&&me[j]&&Object.keys(Ae.productSelection.quantityByVariant[j]).length>0,(((oe=(pe=Ae==null?void 0:Ae.productSelection)==null?void 0:pe.quantityByVariant)==null?void 0:oe[j])!==void 0||l(C).includes(j))&&d()&&d()!=="temp"){if(l(C).includes(j)){b(C,l(C).filter(ue=>ue!==j));const we={...l(N)};delete we[j],b(N,we);const Fe={...l(I)};Fe[j]&&Object.keys(Fe[j]).forEach(ue=>{Fe[j][ue]=0}),b(I,Fe),hr.update(ue=>{if(!ue||!ue.productSelection)return ue;const De={...ue.productSelection.quantityByVariant};De[j]&&Object.keys(De[j]).forEach(he=>{De[j][he]=0});const Pe=Object.values(De).reduce((he,ee)=>he+Object.values(ee).reduce((ge,Se)=>ge+Se,0),0);return{...ue,productSelection:{...ue.productSelection,selectedColors:l(C),variantsByColor:we,quantityByVariant:De,totalQuantity:Pe}}}),Be(),pa(V);return}if(!l(C).includes(j)){const we=l(a).options[0].id,Fe=l(a).variants.filter(ue=>{var De;return!ue.option_values||!Array.isArray(ue.option_values)?!1:(De=ue.option_values)==null?void 0:De.some(Pe=>Pe.option_value&&Pe.option_value.option?Pe.option_value.option.id===we&&Pe.option_value.value===j:Pe.option_id?Pe.option_id===we&&Pe.value===j:!1)});Fe.length>0&&(b(N,{...l(N),[j]:Fe}),b(C,[...l(C),j]),hr.update(ue=>!ue||!ue.productSelection?ue:{...ue,productSelection:{...ue.productSelection,selectedColors:[...ue.productSelection.selectedColors,j],variantsByColor:{...ue.productSelection.variantsByColor,[j]:Fe},quantityByVariant:{...ue.productSelection.quantityByVariant,[j]:ue.productSelection.quantityByVariant[j]||{}}}}),pa(V))}return}const _e=l(a).options[0].id,Oe=l(a).variants.filter(we=>{var Fe;return!we.option_values||!Array.isArray(we.option_values)?!1:(Fe=we.option_values)==null?void 0:Fe.some(ue=>ue.option_value&&ue.option_value.option?ue.option_value.option.id===_e&&ue.option_value.value===j:ue.option_id?ue.option_id===_e&&ue.value===j:!1)}),G={...l(N)};if(Oe.length>0&&(G[j]=Oe),d()&&d()!=="temp"){const we=o();((Ne=(ye=we==null?void 0:we.productSelection)==null?void 0:ye.selectedColors)==null?void 0:Ne.includes(j))?(b(N,{...l(N),...G}),hr.update(ue=>!ue||!ue.productSelection?ue:{...ue,productSelection:{...ue.productSelection,variantsByColor:{...ue.productSelection.variantsByColor,...G}}})):(l(C).includes(j)||b(C,[...l(C),j]),b(N,{...l(N),...G}),hr.update(ue=>{var ge,Se,Me,Qe,ot;if(!ue||!ue.productSelection)return ue;const De=Object.keys(ue.productSelection.quantityByVariant||{}),Pe=new Set([...De,j]),he=Array.from(Pe),ee={...((ge=ue.productSelection)==null?void 0:ge.variantsByColor)||{},...G};return console.log(" Edit :   (  ):",{colorValue:j,colorsWithQuantity:De,newSelectedColors:he,variantsInColor:((Se=G[j])==null?void 0:Se.length)||0,quantityByVariant:ue.productSelection.quantityByVariant}),{...ue,productSelection:{...ue.productSelection,selectedColors:he,variantsByColor:ee,quantityByVariant:{...((Me=ue.productSelection)==null?void 0:Me.quantityByVariant)||{},[j]:((ot=(Qe=ue.productSelection)==null?void 0:Qe.quantityByVariant)==null?void 0:ot[j])||{}}}}}))}else hr.toggleColorSelection(j,G)}function xe(j){var _e;if(!l(a)||l(a).options.length<2||!j||!j.option_values||!Array.isArray(j.option_values))return"";const Ae=l(a).options[1].id,Ee=j.option_values.find(Oe=>Oe.option_value&&Oe.option_value.option?Oe.option_value.option.id===Ae:Oe.option_id?Oe.option_id===Ae:!1);return((_e=Ee==null?void 0:Ee.option_value)==null?void 0:_e.value)||(Ee==null?void 0:Ee.value)||""}function M(j,Ae){var Oe;const Ee=((Oe=l(I)[j])==null?void 0:Oe[Ae])||0,_e=Ee+1;o(),hr.updateQuantity(j,Ae,_e),te("increase",j,Ae,Ee,_e)}function O(j,Ae){var _e;const Ee=((_e=l(I)[j])==null?void 0:_e[Ae])||0;if(Ee>0){const Oe=Ee-1;hr.updateQuantity(j,Ae,Oe),te("decrease",j,Ae,Ee,Oe)}}function X(j,Ae,Ee){var D;const _e=parseInt(j.target.value)||0,Oe=Math.max(0,_e),G=((D=l(I)[Ae])==null?void 0:D[Ee])||0;hr.updateQuantity(Ae,Ee,Oe),te("input",Ae,Ee,G,Oe)}function te(j,Ae,Ee,_e,Oe){var G;if(typeof window<"u"){const D=Object.values(l(I)).reduce((ie,me)=>ie+Object.values(me).reduce((pe,oe)=>pe+oe,0),0)-_e+Oe;window.dispatchEvent(new CustomEvent("productQuantityUpdate",{detail:{productId:(G=l(a))==null?void 0:G.id,action:j,color:Ae,variantId:Ee,oldQuantity:_e,newQuantity:Oe,newTotalQuantity:D,timestamp:Date.now(),source:"product.svelte"}}))}}let le=!1,ne=!1;function Be(){const j=Object.values(l(I)).reduce((Ae,Ee)=>Ae+Object.values(Ee).reduce((_e,Oe)=>_e+Oe,0),0);l(W)!==j&&(b(W,j),Z())}function Z(){var j,Ae;if(!le){le=!0;try{const Ee={};if(!((j=l(a))!=null&&j.quantity_discounts)||l(W)===0){Object.keys(l(k)).length>0&&(b(k,{}),hr.updateVariantDiscounts({}));return}const _e=Object.keys(l(I)),Oe=Object.keys(l(N));_e.filter(pe=>!Oe.includes(pe)).length>0;for(const pe in l(I))for(const oe in l(I)[pe])if(l(I)[pe][oe]>0){const Ne=(Ae=l(N)[pe])==null?void 0:Ae.find(we=>we.id===oe);if(Ne&&Ne.prices&&Ne.prices.length>0){const we=Ne.prices[0].amount,Fe=bi(l(W),we,l(a).quantity_discounts);Fe!=null&&Fe.hasDiscount&&(Ee[oe]=Fe)}}const D=Object.keys(l(k)).sort(),ie=Object.keys(Ee).sort();(JSON.stringify(D)!==JSON.stringify(ie)||Object.keys(Ee).some(pe=>JSON.stringify(l(k)[pe])!==JSON.stringify(Ee[pe])))&&(b(k,Ee),hr.updateVariantDiscounts(l(k)))}finally{le=!1}}}function se(){var _e;let j=0,Ae=0,Ee=!1;for(const Oe in l(I))for(const G in l(I)[Oe]){const D=l(I)[Oe][G];if(D>0){const ie=(_e=l(N)[Oe])==null?void 0:_e.find(me=>me.id===G);if(ie&&ie.prices&&ie.prices.length>0){const me=ie.prices[0].amount,pe=l(k)[G];j+=me*D,pe!=null&&pe.hasDiscount?(Ae+=pe.discountedPrice*D,Ee=!0):Ae+=me*D}}}return{originalTotal:j,discountedTotal:Ee?Ae:j,hasDiscount:Ee}}function ce(){if(l(W)===0){b(m,!0),b(y," "),b(_," 1   .");return}hr.completeProductSelection();const j=[];for(const Ee in l(I))for(const _e in l(I)[Ee]){const Oe=l(I)[Ee][_e];if(Oe>0){const G=l(N)[Ee].find(D=>D.id===_e);G&&j.push({...G,quantity:Oe})}}const Ae=s().products.findIndex(Ee=>{var _e;return((_e=Ee.product)==null?void 0:_e.id)===l(a).id});Ae>=0?Kt(It,lt(s).products[Ae]={product:l(a),variants:j,quantity:l(W),prints:[],addons:{},addonProductsMap:{}},lt(s)):Kt(It,lt(s).products=[...s().products,{product:l(a),variants:j,quantity:l(W),prints:[],addons:{},addonProductsMap:{}}],lt(s)),It.updateTotalAmounts(),b(m,!0),b(y," "),b(_,`${l(W)}  .`),u()&&u()()}async function be(){var Ae,Ee,_e,Oe,G,D,ie,me,pe;if(!A())return;const j=o().productSelection;if(j&&j.product&&j.productId===A()){b(f,!0),b(g,null);try{b(h,await fd.loadIntegratedProductData(A(),i().id)),console.log(" Edit : productDataStore   ( variants ):",{productId:A(),variantsCount:((_e=(Ee=(Ae=l(h))==null?void 0:Ae.product)==null?void 0:Ee.variants)==null?void 0:_e.length)||0,hasOptionValues:(ie=(D=(G=(Oe=l(h))==null?void 0:Oe.product)==null?void 0:G.variants)==null?void 0:D[0])!=null&&ie.option_values?"yes":"no"}),(me=l(h))!=null&&me.product&&Rn.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]})}catch(oe){b(g,oe instanceof Error?oe.message:"   .")}finally{b(f,!1)}return}b(f,!0),b(g,null);try{if(b(h,await fd.loadIntegratedProductData(A(),i().id)),(pe=l(h))!=null&&pe.product){const oe=s().products.find(ye=>{var Ne;return((Ne=ye.product)==null?void 0:Ne.id)===l(h).product.id});if(oe&&oe.variants.length>0){const ye={},Ne=l(h).product.options[0].id;oe.variants.forEach(we=>{var ue;if(!we||!we.option_values||!Array.isArray(we.option_values))return;const Fe=we.option_values.find(De=>De.option_value&&De.option_value.option?De.option_value.option.id===Ne:De.option_id?De.option_id===Ne:!1);if(Fe){const De=((ue=Fe.option_value)==null?void 0:ue.value)||Fe.value||"";ye[De]||(ye[De]=[]),ye[De].push(we)}});for(const we in ye)J(we),ye[we].forEach(Fe=>{l(I)[we]&&fr(I,l(I)[we][Fe.id]=Fe.quantity||0)});b(I,{...l(I)}),Be()}}}catch(oe){b(g,oe instanceof Error?oe.message:"   .")}finally{b(f,!1)}}function x(){const j=o();if(!(j!=null&&j.productSelection)||!l(a))return;const Ae=j.productSelection;if(b(C,[...Ae.selectedColors]),b(I,{...Ae.quantityByVariant}),b(W,Ae.totalQuantity),d()&&d(),l(C).length>0&&l(a)&&l(a).variants){b(N,{});const Ee=l(a).options[0].id;Object.keys(Ae.quantityByVariant||{}).forEach(Oe=>{const G=l(a).variants.filter(D=>{var ie;return(ie=D.option_values)==null?void 0:ie.some(me=>me.option_value&&me.option_value.option?me.option_value.option.id===Ee&&me.option_value.value===Oe:me.option_id?me.option_id===Ee&&me.value===Oe:!1)});G.length>0&&fr(N,l(N)[Oe]=G)})}b(N,{...l(N)}),pa(V),Object.keys(l(N)).length>0&&hr.update(Ee=>!Ee||!Ee.productSelection?Ee:{...Ee,productSelection:{...Ee.productSelection,variantsByColor:l(N)}}),l(W)>0&&Z()}function F(){H=hr.subscribe(j=>{if(j!=null&&j.productSelection&&j.productId===A()){const Ae=j.productSelection;if(!l(a)||!l(a).variants)return;if(b(C,[...Ae.selectedColors]),b(I,{...Ae.quantityByVariant}),b(W,Ae.totalQuantity),l(a)&&l(a).variants&&l(C).length>0){d()&&d();const Ee={},_e=l(a).options[0].id;if(Object.keys(Ae.quantityByVariant||{}).forEach(G=>{const D=l(a).variants.filter(ie=>{var me;return(me=ie.option_values)==null?void 0:me.some(pe=>pe.option_value&&pe.option_value.option?pe.option_value.option.id===_e&&pe.option_value.value===G:pe.option_id?pe.option_id===_e&&pe.value===G:!1)});D.length>0&&(Ee[G]=D)}),b(N,Ee),pa(V),!ne){const G=Object.keys(Ae.variantsByColor||{}).sort(),D=Object.keys(Ee).sort();if(JSON.stringify(G)!==JSON.stringify(D)){ne=!0;try{console.log(" Store variantsByColor  ( ):",{before:G.length,after:D.length,beforeKeys:G,afterKeys:D}),hr.update(me=>!me||!me.productSelection?me:{...me,productSelection:{...me.productSelection,variantsByColor:Ee}})}finally{setTimeout(()=>{ne=!1},0)}}}}else l(C).length===0&&(b(N,{}),pa(V));Ae.needsDiscountRecalculation&&l(W)>0&&setTimeout(()=>{Z()},0)}})}Fn(async()=>{d()&&d()!=="temp"||hr.initialize(A(),d()),F(),await be(),x()}),Qo(()=>{H&&H()}),Jt(()=>(o(),Cn(A()),l(h)),()=>{var j,Ae,Ee;(Ae=(j=o())==null?void 0:j.productSelection)!=null&&Ae.product&&o().productSelection.productId===A()&&(!l(h)||((Ee=l(h).product)==null?void 0:Ee.id)!==o().productSelection.product.id)&&b(h,{product:o().productSelection.product,addons:o().productSelection.addons||[],addonItems:o().productSelection.addonItems||[]})}),Jt(()=>l(h),()=>{var j;b(a,((j=l(h))==null?void 0:j.product)||null)}),Jt(()=>(l(a),l(C),Cn(d()),l(V)),()=>{var j,Ae;if(l(a)&&l(a).variants&&l(C).length>0){const Ee=d()&&d()!=="temp";console.log(` Reactive: product  , variantsByColor  (${Ee?"Edit":"Create"} )`,{productId:l(a).id,variantsCount:l(a).variants.length,selectedColors:l(C),firstVariant:l(a).variants[0],hasOptionValues:!!((j=l(a).variants[0])!=null&&j.option_values)});const _e={},Oe=(Ae=l(a).options[0])==null?void 0:Ae.id;Oe&&(l(C).forEach(G=>{const D=l(a).variants.filter(ie=>{var me;return l(C).indexOf(G)===0&&l(a).variants.indexOf(ie),(me=ie.option_values)==null?void 0:me.some(pe=>pe.option_value&&pe.option_value.option?pe.option_value.option.id===Oe&&pe.option_value.value===G:pe.option_id?pe.option_id===Oe&&pe.value===G:!1)});D.length>0&&(_e[G]=D)}),b(N,_e),pa(V))}}),Jt(()=>(o(),l(k),l(V)),()=>{var j,Ae;if((Ae=(j=o())==null?void 0:j.productSelection)!=null&&Ae.variantDiscounts){const Ee=o().productSelection.variantDiscounts,_e=Object.keys(l(k)).sort(),Oe=Object.keys(Ee).sort();(JSON.stringify(_e)!==JSON.stringify(Oe)||Object.keys(Ee).some(D=>JSON.stringify(l(k)[D])!==JSON.stringify(Ee[D])))&&(b(k,{...Ee}),pa(V))}}),to(),Rr();var E=VR(),U=ft(E),P=w(U);{var T=j=>{var Ae=FR();L(j,Ae)},R=j=>{var Ae=kt(),Ee=ft(Ae);{var _e=G=>{var D=IR(),ie=w(D),me=z(w(ie),2),pe=z(w(me),2),oe=w(pe),ye=z(ie,2);He(()=>Le(oe,l(g))),at("click",ye,be),L(G,D)},Oe=G=>{var D=kt(),ie=ft(D);{var me=pe=>{var oe=$R(),ye=ft(oe),Ne=w(ye),we=w(Ne),Fe=z(Ne,2),ue=w(Fe),De=w(ue),Pe=z(ue,2);{var he=de=>{var Te=QR();const qe=dt(se);var je=w(Te),Re=z(je);{var Ve=At=>{var Ke=UR();L(At,Ke)};ze(Re,At=>{l(qe).hasDiscount&&At(Ve)})}He(()=>Le(je,` : ${l(W)??""} `)),L(de,Te)};ze(Pe,de=>{l(W)>0&&de(he)})}var ee=z(ye,2);{var ge=de=>{var Te=OR(),qe=z(w(Te),2);Yt(qe,5,()=>l(a).options[0].values,Ar,(je,Re)=>{var Ve=kR();const At=dt(()=>l(C).includes(l(Re).value));var Ke=w(Ve),nt=w(Ke),ht=w(nt);{var mt=wt=>{var gt=LR(),Dt=ft(gt),qt=z(Dt,2);{var zt=Mt=>{var jt=TR();L(Mt,jt)};ze(qt,Mt=>{l(At)&&Mt(zt)})}He(()=>{rr(Dt,"src",l(Re).image),rr(Dt,"alt",l(Re).value),Cr(Dt,`odz-w-12 odz-h-12 odz-object-cover odz-rounded-lg odz-shadow-sm
                                                   ${(l(At)?"odz-ring-2 odz-ring-red-400 odz-ring-offset-2":"")??""}`)}),L(wt,gt)};ze(ht,wt=>{l(Re).image&&wt(mt)})}var St=z(nt,2),st=w(St),tt=z(St,2),Ft=w(tt);{var xt=wt=>{var gt=kt();const Dt=dt(()=>Object.values(l(I)[l(Re).value]||{}).reduce((Mt,jt)=>Mt+jt,0));var qt=ft(gt);{var zt=Mt=>{var jt=PR(),Ct=w(jt),Et=w(Ct);He(()=>Le(Et,`${l(Dt)??""}`)),L(Mt,jt)};ze(qt,Mt=>{l(Dt)>0&&Mt(zt)})}L(wt,gt)};ze(Ft,wt=>{var gt;l(At)&&((gt=l(N)[l(Re).value])==null?void 0:gt.length)>0&&l(V)>=0&&wt(xt)})}var Ot=z(Ft,2),Ze=w(Ot);He(()=>{Cr(Ve,`odz-w-full odz-transition-all odz-duration-200 odz-ease-in-out
                                   ${(l(At)?"odz-bg-gradient-to-r odz-from-red-50 odz-to-rose-50 odz-border-2 odz-border-red-400 odz-shadow-md":"odz-bg-white odz-border-2 odz-border-gray-200 hover:odz-border-gray-300 hover:odz-shadow-sm")??""}
                                   odz-rounded-xl odz-p-3`),Cr(St,`odz-flex-1 odz-text-sm odz-font-semibold odz-text-gray-700 odz-text-left
                                            ${(l(At)?"odz-text-red-700":"")??""}`),Le(st,l(Re).value),Cr(Ot,`odz-transition-transform odz-duration-300
                                               ${(l(At)?"odz-rotate-90":"")??""}`),M4(Ze,`odz-w-4 odz-h-4 odz-text-gray-400
                                                   ${(l(At)?"odz-text-red-500":"")??""}`)}),at("click",Ve,()=>J(l(Re).value)),L(je,Ve)}),L(de,Te)};ze(ee,de=>{l(a).options.length>0&&de(ge)})}var Se=z(ee,2);{var Me=de=>{var Te=KR();Yt(Te,5,()=>l(C),Ar,(qe,je)=>{var Re=qR();const Ve=dt(()=>l(N)[l(je)]||[]),At=dt(()=>l(a).options[0].values.find(Ot=>Ot.value===l(je)));var Ke=w(Re),nt=w(Ke);{var ht=Ot=>{var Ze=DR(),wt=w(Ze);He(()=>{rr(wt,"src",l(At).image),rr(wt,"alt",l(je))}),L(Ot,Ze)};ze(nt,Ot=>{var Ze;(Ze=l(At))!=null&&Ze.image&&Ot(ht)})}var mt=z(nt,2),St=w(mt),st=w(St),tt=z(Ke,2);{var Ft=Ot=>{var Ze=jR();Yt(Ze,5,()=>l(Ve),Ar,(wt,gt)=>{var Dt=HR();const qt=dt(()=>xe(l(gt))),zt=dt(()=>{var _r;return((_r=l(I)[l(je)])==null?void 0:_r[l(gt).id])||0}),Mt=dt(()=>l(k)[l(gt).id]),jt=dt(()=>l(zt)>0);var Ct=w(Dt),Et=w(Ct);{var Nt=_r=>{var wr=NR();L(_r,wr)};ze(Et,_r=>{var wr;l(jt)&&((wr=l(Mt))!=null&&wr.hasDiscount)&&_r(Nt)})}var Zt=z(Et,2),nr=w(Zt),ir=w(nr),sr=z(nr,2),dr=w(sr);{var Jr=_r=>{C5(_r,{get originalPrice(){return l(gt).prices[0].amount},get finalPrice(){return l(Mt).discountedPrice},hasDiscount:!0,size:"sm"})},sn=_r=>{var wr=MR(),Qr=w(wr);He(Wr=>Le(Qr,`${Wr??""}`),[()=>vr(l(gt).prices[0].amount)],dt),L(_r,wr)};ze(dr,_r=>{var wr;(wr=l(Mt))!=null&&wr.hasDiscount&&l(zt)>0?_r(Jr):_r(sn,!1)})}var lr=z(Zt,2),cr=w(lr),qr=z(cr,2),Pr=z(qr,2);He(()=>{Cr(Ct,`odz-bg-white odz-border-2 odz-rounded-xl odz-p-2 odz-transition-all odz-duration-200
                                                    ${(l(jt)?"odz-border-red-300 odz-shadow-lg odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md")??""}`),Cr(nr,`odz-bg-gradient-to-r odz-from-slate-600 odz-to-slate-800 odz-text-white
                                                           odz-px-3 odz-py-1 odz-rounded-lg odz-text-sm odz-font-bold odz-shadow-sm
                                                           ${(l(jt)?"odz-from-red-500 odz-to-red-700":"")??""}`),Le(ir,l(qt)),Cr(cr,`odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150
                                                           ${(l(zt)<=0?"odz-opacity-50 odz-cursor-not-allowed":"hover:odz-scale-110")??""}`),cr.disabled=l(zt)<=0,Wm(qr,l(zt))}),at("click",cr,()=>O(l(je),l(gt).id)),at("input",qr,_r=>X(_r,l(je),l(gt).id)),at("click",Pr,()=>M(l(je),l(gt).id)),L(wt,Dt)}),L(Ot,Ze)},xt=Ot=>{var Ze=RR();L(Ot,Ze)};ze(tt,Ot=>{l(Ve).length>0&&l(V)>=0?Ot(Ft):Ot(xt,!1)})}He(()=>Le(st,l(je))),L(qe,Re)}),L(de,Te)};ze(Se,de=>{l(C).length>0&&de(Me)})}var Qe=z(Se,2);const ot=dt(()=>d()||null),Ye=dt(()=>c()!==void 0?c():null),Ce=dt(()=>l(W)>0);_p(Qe,{get productId(){return A()},get estimateId(){return l(ot)},get idx(){return l(Ye)},debugSource:"product-tab",get showNextButton(){return l(Ce)},nextButtonText:"  ",onNext:ce}),He(()=>{rr(we,"src",l(a).thumbnail),rr(we,"alt",l(a).title),Le(De,l(a).title)}),L(pe,oe)};ze(ie,pe=>{l(a)&&pe(me)},!0)}L(G,D)};ze(Ee,G=>{l(g)?G(_e):G(Oe,!1)},!0)}L(j,Ae)};ze(P,j=>{l(f)?j(T):j(R,!1)})}var q=z(U,2);Gd(q,{get isOpen(){return l(m)},set isOpen(j){b(m,j)},get title(){return l(y)},set title(j){b(y,j)},get message(){return l(_)},set message(j){b(_,j)},$$legacy:!0}),L(n,E),Mr(),r()}var WR=Y('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),XR=Y('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div></div>'),YR=Y('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-overflow-hidden odz-rounded-lg odz-border odz-border-gray-200"><img class="odz-w-full odz-h-full odz-object-cover" loading="lazy"></div>'),JR=Y('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-bg-gray-100 odz-rounded-lg odz-border odz-border-gray-200 odz-flex odz-items-center odz-justify-center"><svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div>'),ZR=Y('<label><input type="radio" class="odz-w-4 odz-h-4 odz-text-red-600 odz-border-gray-300 odz-focus:ring-red-500"> <div class="odz-flex-1"><span class="odz-font-medium odz-text-gray-900"> </span> <div class="odz-text-sm odz-text-red-600 odz-font-semibold"> </div></div></label>'),e9=Y('<div class="odz-mt-4 odz-p-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><svg class="odz-w-4 odz-h-4 odz-text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="odz-text-green-800">: <strong> </strong> </span></div></div>'),t9=Y('<div class="odz-border odz-border-gray-200 odz-rounded-lg odz-p-6"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><!> <h4 class="odz-text-md odz-font-semibold odz-text-gray-800"> </h4></div> <fieldset class="odz-space-y-3"><legend class="odz-sr-only"> </legend> <!></fieldset> <!></div>'),r9=Y('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-mb-6 odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </h3> <div class="odz-space-y-8"></div></div>'),n9=Y('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-xl odz-p-8 odz-text-center"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <h3 class="odz-text-lg odz-font-semibold odz-text-gray-700 odz-mb-2"> </h3> <p class="odz-text-gray-500">     .</p></div>'),o9=Y("<!> <!>",1),s9=Y('<div class="odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-yellow-800">    </h3> <p class="odz-text-sm odz-text-yellow-600"> ID   .</p></div></div></div>'),i9=Y('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-md odz-p-8"><div class="odz-text-center odz-mb-8"><h3 class="odz-text-lg odz-font-medium odz-text-gray-800">   .</h3></div> <div class="odz-space-y-3"><button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-gray-900 hover:odz-bg-gray-800 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors odz-flex odz-items-center odz-justify-center odz-gap-3"><div class="odz-w-6 odz-h-6 odz-bg-green-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>   </button> <button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors">  </button></div></div></div>'),a9=Y('<div class="odz-addon-tab"><div class="odz-mb-6"><h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-600">  </p></div> <div class="odz-space-y-6"><!></div></div> <!>',1);function A9(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=()=>Gr(hr,"$fixedEstimateStore",t),i=()=>Gr(ks,"$shopStore",t);let a=vt(e,"productId",8),A=vt(e,"estimateId",8,void 0),d=vt(e,"idx",8,void 0),c=vt(e,"onSave",8,void 0);vt(e,"onNext",8,void 0);let u=vt(e,"onPrev",8,void 0),h=null,f=Ue(null),g=Ue(!1),m=Ue(null),y=Ue({}),_=Ue(!1),C="";function I(x,F,E){var U,P;hr.toggleAddonSelection(x,F,E),((U=l(y)[x])==null?void 0:U.productId)===F&&((P=l(y)[x])==null?void 0:P.variantId)===E?delete l(y)[x]:fr(y,l(y)[x]={productId:F,variantId:E}),b(y,{...l(y)}),N(),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("addonSelectionUpdate",{detail:{productId:F,addonId:x,variantId:E,selectedAddons:{...l(y)},timestamp:Date.now(),source:"addon.svelte"}})),console.log(" addonSelectionUpdate   (variantId ):",{productId:F,addonId:x,variantId:E,selectedAddonsCount:Object.keys(l(y)).length}))}function N(){const x=o().index;x>=0&&o().products[x]&&(Kt(It,lt(o).products[x].addons={...l(y)},lt(o)),U_(It,{...o()}))}async function k(){if(!a())return;const x=s().productSelection;if(x&&x.product&&x.productId===a()){b(f,{product:x.product,addons:x.addons||[],addonItems:x.addonItems||[]}),b(g,!1);return}b(g,!0),b(m,null);try{b(f,await Rn.loadIntegratedProductData(a(),i().id))}catch(F){b(m,F instanceof Error?F.message:"   .")}finally{b(g,!1)}}function W(){const x=s();if(x&&x.productId===a()&&x.addonSelection&&x.addonSelection.selectedAddons){const F={...x.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,b(y,F),b(y,{...l(y)})}}function V(){h=hr.subscribe(x=>{if(x&&x.productId===a())if(x.addonSelection&&x.addonSelection.selectedAddons){const F={...x.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,JSON.stringify(l(y))!==JSON.stringify(F)&&(b(y,F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("addonSelectionChanged",{detail:{selectedAddons:F}})))}else Object.keys(l(y)).length>0&&b(y,{})})}async function H(x){const F={printMethod:null,simplePrintState:null,detailedPrintState:null,simplePrintKeys:[],detailedPrintKeys:[],allProductKeys:[],otherData:{}},E=Object.keys(sessionStorage).filter(U=>U.includes(x));return F.allProductKeys=E,E.forEach(U=>{var T;const P=sessionStorage.getItem(U);if(U.startsWith(`simplePrint_${x}`)){if(F.simplePrintKeys.push(U),P)try{F.simplePrintState=JSON.parse(P)}catch{F.simplePrintState=null}return}if(U.startsWith(`detailedPrint_${x}`)){if(F.detailedPrintKeys.push(U),P)try{F.detailedPrintState=JSON.parse(P)}catch{F.detailedPrintState=null}return}if(U.startsWith(`fixedEstimate_${x}`)&&P)try{const R=JSON.parse(P);(T=R.printSelection)!=null&&T.currentMethod&&(F.printMethod=R.printSelection.currentMethod)}catch{}try{F.otherData[U]=P&&JSON.parse(P)}catch{F.otherData[U]=P}}),F}async function J(x,F,E,U){var we,Fe,ue,De,Pe,he;const{shopData:P,customerData:T,fixedEstimateData:R,estimateStoreData:q}=x,j=new Date().toISOString(),Ae={shop_id:(P==null?void 0:P.id)||null,sess:(P==null?void 0:P.sess)||null,customer_id:(P==null?void 0:P.customer_id)||null,name:(T==null?void 0:T.name)||(F==null?void 0:F.name)||null,order_name:(T==null?void 0:T.name)||(F==null?void 0:F.name)||null,order_phone:(T==null?void 0:T.phone)||(F==null?void 0:F.phone)||null,address1:(T==null?void 0:T.address1)||(F==null?void 0:F.address1)||null,address2:(T==null?void 0:T.address2)||(F==null?void 0:F.address2)||null,postcode:(T==null?void 0:T.postcode)||(F==null?void 0:F.postcode)||null,mall_type:(T==null?void 0:T.mallType)||(F==null?void 0:F.mallType)||null,upload_memo:(q==null?void 0:q.uploadMemo)||null,status:"temp",created_at:j,updated_at:j},Ee=[];let _e=((we=R==null?void 0:R.printSelection)==null?void 0:we.currentMethod)||(E==null?void 0:E.printMethod)||"none";if(_e==="selection"&&(console.warn(' [prepareDataForDatabase] print_type "selection" . "none" .'),_e="none"),["simple","detailed","self-design","none"].includes(_e)||(console.warn(` [prepareDataForDatabase]   print_type: "${_e}". "none" .`),_e="none"),(Fe=R==null?void 0:R.productSelection)!=null&&Fe.quantityByVariant&&((ue=R==null?void 0:R.productSelection)!=null&&ue.variantsByColor)){const ee=R.productSelection.quantityByVariant,ge=R.productSelection.variantsByColor,Se=R.productSelection.variantDiscounts||{};for(const Me in ee){const Qe=ee[Me],ot=ge[Me]||[];for(const Ye in Qe){const Ce=Qe[Ye];if(Ce>0){const de=ot.find(Te=>Te.id===Ye);if(de){const Te=de.prices&&de.prices.length>0?de.prices[0].amount:0,qe=Se[Ye];let je=Te,Re=0,Ve="amount",At=0,Ke="minus",nt=null,ht=null;if(qe&&qe.hasDiscount){je=qe.discountedPrice,Re=qe.discountAmount;const mt=qe.discountInfo;mt&&(Ve=mt.type||"amount",At=mt.value||0,Ke=mt.direction||"minus",nt=mt.min_quantity||null,ht=mt.max_quantity||null)}Ee.push({idx:0,variant_id:Ye,quantity:Ce,price:je,print_type:_e,original_price:Te,discount_amount:Re,discount_type:Ve,discount_value:At,discount_direction:Ke,discount_min_quantity:nt,discount_max_quantity:ht,product_id:U,created_at:j,updated_at:j})}}}}}if(Ee.length===0&&(q!=null&&q.products)){const ee=q.products.find(ge=>{var Se;return((Se=ge.product)==null?void 0:Se.id)===U});ee&&ee.variants&&ee.variants.length>0&&ee.variants.forEach((ge,Se)=>{var Me;if(ge.quantity>0){const Qe=ge.prices&&ge.prices.length>0?ge.prices[0].amount:0,ot=(Me=ge.product)==null?void 0:Me.quantity_discounts,Ye=bi(ge.quantity,Qe,ot),Ce=Ye.discountInfo;Ee.push({idx:Se,variant_id:ge.id,quantity:ge.quantity,price:Ye.discountedPrice,original_price:Qe,discount_amount:Ye.discountAmount,discount_type:(Ce==null?void 0:Ce.type)||"amount",discount_value:(Ce==null?void 0:Ce.value)||0,discount_direction:(Ce==null?void 0:Ce.direction)||"minus",discount_min_quantity:(Ce==null?void 0:Ce.min_quantity)||null,discount_max_quantity:(Ce==null?void 0:Ce.max_quantity)||null,product_id:U,created_at:j,updated_at:j})}})}const G=[];E.simplePrintState&&Array.isArray(E.simplePrintState)&&E.simplePrintState.forEach((ee,ge)=>{G.push({idx:0,object_id:ee.objectId||`area-${ge}`,title:ee.title||`  ${ge+1}`,print_method:ee.printMethod||null,uploaded_files:ee.uploadedFiles||null,file_metadata:ee.savedFileInfo||null,price:ee.price||0,created_at:j,updated_at:j})});const D=[],ie=new Set,me=((De=R==null?void 0:R.printSelection)==null?void 0:De.currentMethod)==="detailed"||Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0;async function pe(ee,ge){var qe,je,Re,Ve;if(!ee)return;const Se=((qe=ee.template)==null?void 0:qe.id)??ee.template_id??null,Me=ee.objectId??ee.object_id??null;if(!Se&&!Me||Me&&ie.has(Me))return;let Qe=0;const ot=ee.price??0,Ye=Number(ot);if(Number.isFinite(Ye)&&Ye>0)Qe=Ye;else try{const At=((je=R==null?void 0:R.productSelection)==null?void 0:je.totalQuantity)||0;let Ke=0,nt=0;if(ee.colors&&((Re=ee.template)!=null&&Re.templateProduct)){const ht=ee.colors.length,mt=ee.template.templateProduct.template_product_variants.find(St=>St.color_count===ht);if(mt){const St=await wA(mt.variant_id);if(St)if(Ke=St.prices[0].amount,mt.min_quantity<=At)if(nt=Ke*At,ee.template.templateProduct.product.quantity_discounts&&ee.template.templateProduct.product.quantity_discounts.length>0){const st=bi(At,Ke,ee.template.templateProduct.product.quantity_discounts);Qe=st.hasDiscount?st.discountedPrice*At:nt}else Qe=nt;else Qe=mt.plate_price}}else if((Ve=ee.template)!=null&&Ve.templateProduct){const ht=ee.template.templateProduct.template_product_variants[0];if(ht){const mt=await wA(ht.variant_id);if(mt)if(Ke=mt.prices[0].amount,ht.min_quantity<=At)if(nt=Ke*At,ee.template.templateProduct.product.quantity_discounts&&ee.template.templateProduct.product.quantity_discounts.length>0){const St=bi(At,Ke,ee.template.templateProduct.product.quantity_discounts);Qe=St.hasDiscount?St.discountedPrice*At:nt}else Qe=nt;else Qe=ht.plate_price}}}catch{Qe=0}const Ce=ee.discountInfo||{},de=Ce.discountDetails||Ce.discountInfo||{};D.push({idx:0,template_id:Se,variant_id:ee.variant_id??null,price:Qe,colors:ee.colors||null,uploads:ee.uploads||null,name_sheet:ee.nameSheet??ee.name_sheet??null,object_id:Me,original_price:Ce.originalPrice??ee.original_price??null,discount_amount:Ce.discountAmount??ee.discount_amount??null,discount_type:de.type??ee.discount_type??null,discount_value:de.value??ee.discount_value??null,discount_direction:de.direction??ee.discount_direction??null,discount_min_quantity:de.min_quantity??ee.discount_min_quantity??null,discount_max_quantity:de.max_quantity??ee.discount_max_quantity??null,created_at:j,updated_at:j}),Me&&ie.add(Me)}if(me){if(Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0)for(let ee=0;ee<E.detailedPrintState.length;ee++){const ge=E.detailedPrintState[ee];await pe(ge)}if(D.length===0&&(q!=null&&q.products)){const ee=q.products.find(ge=>{var Se;return((Se=ge.product)==null?void 0:Se.id)===U});if(ee!=null&&ee.prints&&ee.prints.length>0)for(let ge=0;ge<ee.prints.length;ge++)await pe(ee.prints[ge])}}const oe=[],ye=(Pe=R==null?void 0:R.addonSelection)==null?void 0:Pe.selectedAddons,Ne=((he=R==null?void 0:R.productSelection)==null?void 0:he.totalQuantity)||0;return ye&&Object.keys(ye).length>0&&Object.entries(ye).forEach(([ee,ge])=>{var Qe,ot,Ye;let Se=0,Me=0;if((ot=(Qe=l(f))==null?void 0:Qe.addonProductsMap)!=null&&ot[ge.productId]){const de=(Ye=l(f).addonProductsMap[ge.productId].variants)==null?void 0:Ye.find(Te=>Te.id===ge.variantId);de&&de.prices&&de.prices.length>0&&(Me=de.prices[0].amount||0,Se=Me)}oe.push({idx:0,addon_id:ee,selected_product_id:ge.productId,selected_variant_id:ge.variantId,quantity:Ne,price:Se,created_at:j,updated_at:j})}),{estimate:Ae,estimate_items:Ee,estimate_simple_prints:G,estimate_prints:D,estimate_addon_items:oe}}function xe(x){const F=[];return x.estimate.shop_id||F.push(" ID "),x.estimate_items.length===0&&F.push("  "),x.estimate_items.forEach((E,U)=>{E.variant_id||F.push(` ${U+1}:  ID `),(!E.quantity||E.quantity<=0)&&F.push(` ${U+1}:  `)}),x.estimate_simple_prints.forEach((E,U)=>{E.object_id||F.push(`  ${U+1}:  ID `)}),x.estimate_prints&&x.estimate_prints.length>0&&x.estimate_prints.forEach((E,U)=>{!E.template_id&&!E.object_id&&F.push(`  ${U+1}: template_id  object_id `)}),{isValid:F.length===0,errors:F}}async function M(){var x;try{let F=null,E=null,U=null,P=null,T=null;hr.subscribe(oe=>{F=oe})(),Rn.subscribe(oe=>{E=oe})(),It.subscribe(oe=>{U=oe})(),ol.subscribe(oe=>{P=oe})(),ks.subscribe(oe=>{T=oe})();const _e=await H(a()),Oe={shopData:T,customerData:P,fixedEstimateData:F,extendedProductData:E,estimateStoreData:U},G={name:P==null?void 0:P.name,phone:P==null?void 0:P.phone,address1:P==null?void 0:P.address1,address2:P==null?void 0:P.address2,postcode:P==null?void 0:P.postcode,mallType:P==null?void 0:P.mallType},D=await J(Oe,G,_e,a()),ie=xe(D);if(!ie.isValid){alert(`   :

${ie.errors.join(`
`)}

   .`);return}const me=await g5(D,(P==null?void 0:P.mallType)||(G==null?void 0:G.mallType),T==null?void 0:T.customer_id,T==null?void 0:T.sess);if(me.success){const oe=`
   !

  : ${((x=me.details)==null?void 0:x.estimateNumber)||"N/A"}
  ID: ${me.estimateId}
  ID: ${a()}
   : ${D.estimate_items.length}
   : ${D.estimate_simple_prints.length}
   : ${D.estimate_prints.length}
  : ${D.estimate_addon_items.length}

   : ${new Date().toLocaleString()}

   !
                `.trim();b(_,!0),C=me.estimateId}else{const oe=`
   !

  ID: ${a()}
  : ${me.error}

  : ${new Date().toLocaleString()}

    .
                `.trim();alert(oe)}const pe={version:"1.0.0",timestamp:new Date().toISOString(),productId:a(),databaseData:D,validationResult:ie,saveResult:me,stores:{shopStore:T,customerStore:P,fixedEstimateStore:F,extendedProductDataStore:E,estimateStore:U},sessionStorageBackup:_e,integratedProductData:l(f),selectedAddons:l(y),formData:G};window.lastEstimateDataPackage=pe}catch(F){const E=`
     !

  : ${F instanceof Error?F.message:"   "}
  ID: ${a()}
  : ${new Date().toLocaleString()}

   .
            `.trim();alert(E)}}function O(){b(_,!1),hr.reset(),Rn.reset(),It.reset(),b(y,{}),b(f,null),Object.keys(sessionStorage).filter(F=>F.includes(a())).forEach(F=>sessionStorage.removeItem(F)),hr.setCurrentStep("product"),setTimeout(()=>{window.location.href="/"},100)}function X(){b(_,!1);const x=Object.keys(sessionStorage).filter(F=>F.includes(a()));x.forEach(F=>sessionStorage.removeItem(F)),console.log(" SessionStorage   (  ):",x),window.location.href="/odiz/estimate.php"}Fn(async()=>{var E;const x=s();(!x||x.productId!==a())&&hr.initialize(a(),A()),V(),await k(),W();const F=o().index;if(F>=0&&((E=o().products[F])!=null&&E.addons)){const U=o().products[F].addons;Object.keys(U).length>0&&b(y,{...U})}}),Qo(()=>{h&&h()}),Rr();var te=a9(),le=ft(te),ne=z(w(le),2),Be=w(ne);{var Z=x=>{var F=WR();L(x,F)},se=x=>{var F=kt(),E=ft(F);{var U=T=>{var R=XR(),q=w(R),j=z(w(q),2),Ae=z(w(j),2),Ee=w(Ae);He(()=>Le(Ee,l(m))),L(T,R)},P=T=>{var R=kt(),q=ft(R);{var j=Ee=>{var _e=o9(),Oe=ft(_e);{var G=ye=>{var Ne=r9(),we=z(w(Ne),2);Yt(we,5,()=>l(f).addons,Fe=>Fe.id,(Fe,ue)=>{var De=t9(),Pe=w(De),he=w(Pe);{var ee=qe=>{var je=YR(),Re=w(je);He(()=>{rr(Re,"src",l(ue).items[0].addon_product.thumbnail),rr(Re,"alt",l(ue).name)}),z_(Re),at("error",Re,Ve=>{const At=Ve.target;At.style.display="none",At.parentElement&&(At.parentElement.innerHTML=`
                                                        <div class="odz-w-full odz-h-full odz-bg-gray-100 odz-flex odz-items-center odz-justify-center">
                                                            <svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                                            </svg>
                                                        </div>
                                                    `)}),L(qe,je)},ge=qe=>{var je=JR();L(qe,je)};ze(he,qe=>{l(ue).items&&l(ue).items.length>0&&l(ue).items[0].addon_product.thumbnail?qe(ee):qe(ge,!1)})}var Se=z(he,2),Me=w(Se),Qe=z(Pe,2),ot=w(Qe),Ye=w(ot),Ce=z(ot,2);Yt(Ce,1,()=>l(ue).items,qe=>qe.id,(qe,je)=>{var Re=kt(),Ve=ft(Re);{var At=Ke=>{var nt=kt(),ht=ft(nt);Yt(ht,1,()=>l(je).addon_product.variants,mt=>mt.id,(mt,St)=>{var st=ZR();const tt=dt(()=>{var zt,Mt;return((zt=l(y)[l(ue).id])==null?void 0:zt.productId)===l(je).addon_product.id&&((Mt=l(y)[l(ue).id])==null?void 0:Mt.variantId)===l(St).id}),Ft=dt(()=>l(St).prices&&l(St).prices.length>0?l(St).prices[0].amount:0);var xt=w(st),Ot=Pd(()=>(()=>{var nr,ir;const zt=l(ue).id,Mt=l(ue).name,jt=l(je).addon_product.id,Ct=l(je).addon_product.title,Et=l(St).id,Nt=l(St).title,Zt=(ir=(nr=l(St).prices)==null?void 0:nr[0])==null?void 0:ir.amount;return sr=>{console.log(" Radio button clicked ( ):",{addonId:zt,addonName:Mt,productId:jt,productTitle:Ct,variantId:Et,variantTitle:Nt,variantPrice:Zt,radioId:sr.target.id,timestamp:Date.now()}),I(zt,jt,Et)}})()),Ze=z(xt,2),wt=w(Ze),gt=w(wt),Dt=z(wt,2),qt=w(Dt);He(zt=>{rr(st,"for",`addon-${l(ue).id??""}-${l(je).id??""}-${l(St).id??""}`),Cr(st,`odz-flex odz-items-center odz-gap-4 odz-p-4 odz-border-2 odz-rounded-lg odz-cursor-pointer odz-transition-all
                                                           ${(l(tt)?"odz-border-red-500 odz-bg-red-50":"odz-border-gray-200 odz-bg-white hover:odz-border-gray-300")??""}`),rr(xt,"id",`addon-${l(ue).id??""}-${l(je).id??""}-${l(St).id??""}`),rr(xt,"name",`addon-${l(ue).id??""}`),vu(xt,l(tt)),Le(gt,l(St).title||l(je).addon_product.title),Le(qt,` ${zt??""}`)},[()=>vr(l(Ft))],dt),at("change",xt,function(...zt){var Mt;(Mt=l(Ot))==null||Mt.apply(this,zt)}),L(mt,st)}),L(Ke,nt)};ze(Ve,Ke=>{l(je).addon_product.variants&&l(je).addon_product.variants.length>0&&Ke(At)})}L(qe,Re)});var de=z(Qe,2);{var Te=qe=>{var je=kt();const Re=dt(()=>l(ue).items.find(nt=>nt.addon_product.id===l(y)[l(ue).id].productId)),Ve=dt(()=>{var nt,ht;return(ht=(nt=l(Re))==null?void 0:nt.addon_product.variants)==null?void 0:ht.find(mt=>mt.id===l(y)[l(ue).id].variantId)});var At=ft(je);{var Ke=nt=>{var ht=e9(),mt=w(ht),St=z(w(mt),2),st=z(w(St)),tt=w(st),Ft=z(st);He(xt=>{Le(tt,l(Ve).title||l(Re).addon_product.title),Le(Ft,` ( ${xt??""})`)},[()=>{var xt,Ot;return vr(((Ot=(xt=l(Ve).prices)==null?void 0:xt[0])==null?void 0:Ot.amount)||0)}],dt),L(nt,ht)};ze(At,nt=>{l(Re)&&l(Ve)&&nt(Ke)})}L(qe,je)};ze(de,qe=>{l(y)[l(ue).id]&&qe(Te)})}He(()=>{Le(Me,l(ue).name),Le(Ye,`${l(ue).name??""} `)}),L(Fe,De)}),L(ye,Ne)},D=ye=>{var Ne=n9();L(ye,Ne)};ze(Oe,ye=>{l(f).addons.length>0?ye(G):ye(D,!1)})}var ie=z(Oe,2);const me=dt(()=>A()||null),pe=dt(()=>d()!==void 0?d():null),oe=dt(()=>({type:"double",buttons:[{text:" ",action:u()||(()=>{}),style:"secondary",icon:"arrow-left"},{text:" ",action:A()&&typeof d()=="number"&&c()?c():M,style:"primary",icon:"save",size:"large"}]}));_p(ie,{get productId(){return a()},get estimateId(){return l(me)},get idx(){return l(pe)},debugSource:"addon-tab",get buttonConfig(){return l(oe)}}),L(Ee,_e)},Ae=Ee=>{var _e=s9();L(Ee,_e)};ze(q,Ee=>{l(f)?Ee(j):Ee(Ae,!1)},!0)}L(T,R)};ze(E,T=>{l(m)?T(U):T(P,!1)},!0)}L(x,F)};ze(Be,x=>{l(g)?x(Z):x(se,!1)})}var ce=z(le,2);{var be=x=>{var F=i9(),E=w(F),U=z(w(E),2),P=w(U),T=z(P,2);at("click",P,O),at("click",T,X),L(x,F)};ze(ce,x=>{l(_)&&x(be)})}L(n,te),Mr(),r()}var l9=Y('<button><div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><span class="odz-hidden sm:odz-inline"> </span></div></button>'),d9=Y('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><div class="odz-w-full"><div class="odz-flex odz-w-full odz-border-b odz-border-gray-200"></div></div>  <div><div><!></div> <div><!></div> <div><!></div></div></div>');function Mp(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(ks,"$shopStore",t);let s=vt(e,"productId",8),i=vt(e,"estimateId",8,void 0),a=vt(e,"idx",8,void 0),A=vt(e,"onSave",8,void 0),d=Ue("product"),c=null,u=null,h=!1,f=null;const g=[{id:"product",label:"",description:"   "},{id:"print",label:"",description:"   "},{id:"addon",label:"",description:"  "}];function m(X){var Be,Z;const te=l(d),le=X;if(b(d,le),hr.setCurrentStep(le),Rn.getProductData(s())&&(Rn.saveToSession(s()),typeof window<"u"))try{const se=`tab-state-${s()}`,ce={currentTab:le,previousTab:te,timestamp:Date.now(),productId:s()};window.sessionStorage.setItem(se,JSON.stringify(ce))}catch{}if(typeof window<"u")try{let se;const ce=[i()&&a()!==void 0?`fixedEstimate_${s()}_${i()}_${a()}`:null,i()?`fixedEstimate_${s()}_${i()}`:null,a()!==void 0?`fixedEstimate_${s()}_${a()}`:null,`fixedEstimate_${s()}`].filter(Boolean);console.log("   - sessionStorage  :",{estimateId:i(),idx:a(),productId:s(),storageKeys:ce});for(const x of ce)try{const F=window.sessionStorage.getItem(x);if(F){const E=JSON.parse(F);if(console.log(" sessionStorage  :",{key:x,currentMethod:(Be=E==null?void 0:E.printSelection)==null?void 0:Be.currentMethod}),(Z=E==null?void 0:E.printSelection)!=null&&Z.currentMethod&&E.printSelection.currentMethod!=="selection"){se=E.printSelection.currentMethod,console.log(" toMethod :",se);break}}}catch{}const be=new CustomEvent("printAmountRecalc",{detail:{productId:s(),fromTab:te,toTab:le,toMethod:se,estimateId:i(),idx:a(),timestamp:Date.now(),source:"tab-change"}});window.dispatchEvent(be)}catch{}console.log("   ( ):",{from:te,to:le,productId:s(),sessionSaved:!0})}function y(){l(d)==="product"?m("print"):l(d)==="print"&&m("addon")}function _(){if(typeof window>"u")return!1;try{const X=`tab-state-${s()}`,te=window.sessionStorage.getItem(X);if(te){const le=JSON.parse(te);if(le.productId===s()&&le.currentTab)return b(d,le.currentTab),!0}}catch{}return!1}async function C(){try{await Rn.loadIntegratedProductData(s(),o().id)}catch{}}Fn(async()=>{const X=i()&&i()!=="temp";await C();const te=_();h=te,X||hr.initialize(s()),te&&!X&&hr.setCurrentStep(l(d)),c=hr.subscribe(le=>{le&&le.productId===s()&&!h&&(le.currentStep,l(d))}),u=Rn.subscribe(le=>{}),f=le=>{const ne=le.detail;ne&&["product","print","addon"].includes(ne)&&m(ne)},typeof window<"u"&&window.addEventListener("changeTab",f)}),Qo(()=>{c&&c(),u&&u(),typeof window<"u"&&f&&window.removeEventListener("changeTab",f)}),Rr();var I=d9(),N=w(I),k=w(N);Yt(k,5,()=>g,Ar,(X,te)=>{var le=l9(),ne=w(le),Be=w(ne),Z=w(Be);He(()=>{Cr(le,`odz-flex-1 odz-px-4 odz-py-3 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2
                           ${(l(d)===l(te).id?"odz-text-red-600 odz-border-red-400 odz-bg-red-50":"odz-text-gray-600 odz-border-transparent hover:odz-text-gray-800 hover:odz-border-gray-300")??""}`),Le(Z,l(te).label)}),at("click",le,()=>m(l(te).id)),L(X,le)});var W=z(N,2),V=w(W),H=w(V);GR(H,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:()=>m("print")});var J=z(V,2),xe=w(J);TB(xe,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y});var M=z(J,2),O=w(M);A9(O,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y,get onSave(){return A()}}),He(()=>{fA(V,"odz-hidden",l(d)!=="product"),fA(J,"odz-hidden",l(d)!=="print"),fA(M,"odz-hidden",l(d)!=="addon")}),L(n,I),Mr(),r()}var c9=Y('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),u9=Y('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),h9=Y('<dialog class="odz-modal odz-modal-open odz-backdrop:odz-bg-black odz-backdrop:odz-bg-opacity-50"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900">  </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"></button></div></div></dialog>');function f9(n,e){Nr(e,!1);let t=vt(e,"isOpen",8,!1),r=vt(e,"estimateId",8),o=vt(e,"idx",8),s=vt(e,"productId",8),i=vt(e,"onClose",8),a=vt(e,"onSave",8),A=Ue(!0),d=Ue(""),c=Ue();async function u(){var O,X,te,le,ne;try{b(A,!0),b(d,"");const Be=await v5(r(),o());if(!Be.items||Be.items.length===0)throw new Error(`     . (estimateId: ${r()}, idx: ${o()})`);if(!((O=Be.items[0])!=null&&O.product_id))throw new Error(" ID   .");if(!Be.items.some(F=>F.variant&&F.variant.id)){const F=Be.items.map(E=>E.variant_id).filter(Boolean);throw F.length===0?new Error("    .  ."):new Error(`     . ( ID: ${F[0]})
     .  .`)}const se=w5(Be);if(typeof window<"u"){const F=r()||"temp";[`fixedEstimate_${s()}_${F}_${o()}`,`simplePrint_${s()}_${F}`,`detailedPrint_${s()}_${F}`,`fixedEstimate_${s()}`,`simplePrint_${s()}`,`detailedPrint_${s()}`].forEach(U=>{window.sessionStorage.removeItem(U)})}const ce=r()||"temp",be=Date.now().toString(36)+Math.random().toString(36).substr(2),x={productId:s(),productSelection:se.fixedEstimateData.productSelection,printSelection:se.fixedEstimateData.printSelection||null,addonSelection:se.fixedEstimateData.addonSelection||null,additionalInfo:se.fixedEstimateData.additionalInfo||null,currentStep:"product",isDebugMode:!0,sessionId:be,estimateId:ce};if(typeof window<"u"){const{sessionStorageData:F}=se,E=`fixedEstimate_${s()}_${ce}_${o()}`;if(window.sessionStorage.setItem(E,JSON.stringify(x)),console.log(" sessionStorage   ( FixedEstimateState ):",{key:E,idx:o(),sessionId:x.sessionId,hasProductId:!!x.productId,quantityByVariant:se.fixedEstimateData.productSelection.quantityByVariant}),F.simplePrintState){const U=`simplePrint_${s()}_${ce}`;window.sessionStorage.setItem(U,JSON.stringify(F.simplePrintState))}if(F.detailedPrintState.length>0&&((X=x.printSelection)==null?void 0:X.currentMethod)==="detailed"){const U=`detailedPrint_${s()}_${ce}`;window.sessionStorage.setItem(U,JSON.stringify(F.detailedPrintState))}}hr.set(x),console.log(" fixedEstimateStore   ( ),    ...",{sessionId:x.sessionId,hasProductId:!!x.productId,hasProductSelection:!!x.productSelection,selectedColorsCount:((le=(te=x.productSelection)==null?void 0:te.selectedColors)==null?void 0:le.length)||0,totalQuantity:((ne=x.productSelection)==null?void 0:ne.totalQuantity)||0}),await new Promise(F=>setTimeout(F,50)),b(A,!1)}catch(Be){Be instanceof Error?b(d,Be.message):b(d,"    ."),b(A,!1)}}function h(){if(typeof window<"u"){const O=r()||"temp";[`fixedEstimate_${s()}_${O}_${o()}`,`simplePrint_${s()}_${O}`,`detailedPrint_${s()}_${O}`,`tab-state-${s()}`].forEach(te=>{window.sessionStorage.removeItem(te)})}hr.reset(),i()()}function f(){a()()}function g(O){O.key==="Escape"&&h()}function m(O){O.target===l(c)&&h()}Qo(()=>{if(typeof window<"u"){const O=r()||"temp";[`fixedEstimate_${s()}_${O}_${o()}`,`simplePrint_${s()}_${O}`,`detailedPrint_${s()}_${O}`,`tab-state-${s()}`].forEach(te=>{window.sessionStorage.removeItem(te)})}hr.reset()}),Jt(()=>(l(c),Cn(t())),()=>{l(c)&&(t()?(l(c).showModal(),u()):l(c).close())}),to(),Rr();var y=h9(),_=w(y),C=w(_),I=z(w(C),2),N=w(I);Hu(N,{class:"odz-w-5 odz-h-5"});var k=z(C,2),W=w(k);{var V=O=>{var X=c9();L(O,X)},H=O=>{var X=kt(),te=ft(X);{var le=Be=>{var Z=u9(),se=z(w(Z),2),ce=w(se);He(()=>Le(ce,l(d))),L(Be,Z)},ne=Be=>{Mp(Be,{get productId(){return s()},get estimateId(){return r()},get idx(){return o()},onSave:f})};ze(te,Be=>{l(d)?Be(le):Be(ne,!1)},!0)}L(O,X)};ze(W,O=>{l(A)?O(V):O(H,!1)})}var J=z(k,2),xe=w(J),M=z(xe,2);ss(y,O=>b(c,O),()=>l(c)),He(()=>M.disabled=l(A)),at("click",I,h),at("click",xe,h),at("click",M,f),at("keydown",y,g),at("click",y,m),L(n,y),Mr()}var p9=Y('<div class="odz-flex odz-items-center odz-justify-center odz-min-h-screen"><div class="odz-text-center"><div class="odz-w-12 odz-h-12 odz-border-4 odz-border-red-500 odz-border-t-transparent odz-rounded-full odz-animate-spin odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">  ...</p></div></div>'),g9=Y('<div class="odz-mb-4"><button class="odz-flex odz-items-center odz-gap-2 odz-text-gray-600 hover:odz-text-gray-900 odz-transition-colors"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="odz-text-sm odz-font-medium"> </span></button></div>'),v9=Y('<div class="odz-fixed odz-top-4 odz-right-4 odz-z-50 odz-bg-green-500 odz-text-white odz-px-4 odz-py-3 odz-rounded-lg odz-shadow-lg odz-flex odz-items-center odz-gap-2"><!> <span class="odz-text-sm"></span></div>'),m9=Y('<button class="odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-px-6 odz-py-3 odz-rounded-lg odz-font-medium odz-text-sm odz-transition-colors"> </button>'),w9=Y('<div class="odz-text-center odz-py-12"><!> <p class="odz-text-sm odz-text-gray-500 odz-mb-4">  </p> <!></div>'),y9=Y('<p class="odz-mt-1 odz-text-xs odz-text-red-500"> </p>'),b9=Y('<p class="odz-mt-1 odz-text-xs odz-text-gray-500">  4  </p>'),_9=Y('<div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-relative"><!> <input type="password" placeholder="     "></div> <!></div>'),B9=Y('<div class="odz-flex odz-justify-between odz-text-sm odz-text-red-600"><span></span> <span class="odz-font-medium"> </span></div>'),x9=Y('<span class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-5 odz-h-5 odz-border-2 odz-border-white odz-border-t-transparent odz-rounded-full odz-animate-spin"></div>  ...</span>'),z9=Y('<div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-4 odz-border odz-border-gray-200 odz-sticky odz-bottom-0"><button class="odz-w-full odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-py-4 odz-rounded-lg odz-font-medium odz-text-base odz-transition-colors disabled:odz-opacity-50 disabled:odz-cursor-not-allowed"><!></button></div>'),C9=Y('<div class="odz-max-w-5xl odz-mx-auto odz-px-4 odz-py-6"><!> <!> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><!></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-4"><div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder="  ()" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><select class="odz-w-20 odz-px-3 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"><option>010</option><option>011</option><option>016</option><option>017</option><option>018</option><option>019</option></select> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"></div></div> <div class="odz-col-span-full odz-border-t odz-border-gray-200 odz-my-2"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="" readonly="" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"> <button type="button" class="odz-px-6 odz-py-2.5 odz-bg-gray-700 hover:odz-bg-gray-800 odz-text-white odz-rounded-lg odz-text-sm odz-font-medium odz-transition-colors odz-whitespace-nowrap disabled:odz-opacity-50"> </button></div></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder="    " readonly="" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <select class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"><option></option><option></option><option></option><option></option></select></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="date" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <!> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> </label> <textarea class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 odz-resize-none disabled:odz-bg-gray-50" rows="3" placeholder="  "></textarea></div></div></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-3"><div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"> </span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <!> <div class="odz-border-t odz-border-gray-200 odz-pt-3 odz-flex odz-justify-between"><span class="odz-font-semibold odz-text-gray-900"> </span> <span class="odz-text-xl odz-font-bold odz-text-red-600"> </span></div></div></div> <!></div>'),S9=Y('<div class="odz-min-h-screen odz-bg-gray-50"><!></div> <!> <!> <!> <!>',1);function E9(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(It,"$estimateStore",t),s=Ue();let i=vt(e,"mallType",8,""),a=vt(e,"customerId",8,""),A=vt(e,"sess",8,""),d=vt(e,"shopId",8,""),c=vt(e,"estimateId",12,void 0),u=vt(e,"returnTo",8,"list"),h=Ue(null),f=Ue(!1),g=Ue(!1),m=Ue(!1),y=Ue(!1),_=Ue(""),C=Ue(""),I=Ue(void 0),N=Ue(!1),k=Ue(!1),W=!1,V=Ue(""),H=Ue("");function J(he){return he?he.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}let xe=Ue(!1),M=-1,O=Ue(""),X=Ue(-1),te=[],le=null,ne=!1;async function Be(){var he;if(ne){console.log(" [Realtime]     ");return}if(!((he=l(h))!=null&&he.id)){console.log(" [Realtime]  ID ,  ");return}le&&clearTimeout(le),le=setTimeout(async()=>{try{console.log(" [Realtime]    :",l(h).id),await q(l(h).id),console.log(" [Realtime]    ")}catch(ee){console.error(" [Realtime]   :",ee)}},300)}function Z(he){console.log(" [Realtime]    :",he);const ee=Zp(he,Ce=>{console.log(" [Realtime] Estimate  :",Ce),b(h,Ce),b(m,zd(Ce.status))});te.push(()=>ee.unsubscribe());const ge=i5(he,Ce=>{console.log(" [Realtime] EstimateItems  :",Ce.eventType),Be()});te.push(()=>ge.unsubscribe());const Se=c1(he,Ce=>{console.log(" [Realtime] EstimatePrints  :",Ce.eventType),Be()});te.push(()=>Se.unsubscribe());const Me=a5(he,Ce=>{console.log(" [Realtime] EstimateSimplePrints  :",Ce.eventType),Be()});te.push(()=>Me.unsubscribe());const Qe=A5(he,Ce=>{console.log(" [Realtime] EstimateAddonItems  :",Ce.eventType),Be()});te.push(()=>Qe.unsubscribe());const ot=l5(he,Ce=>{console.log(" [Realtime] EstimateAdditionalCosts  :",Ce.eventType),Be()});te.push(()=>ot.unsubscribe());const Ye=d1(he,Ce=>{console.log(" [Realtime] EstimateComments  :",Ce.eventType)});te.push(()=>Ye.unsubscribe()),console.log(" [Realtime]     (7 )")}function se(){const{phone1:he,phone2:ee,phone3:ge}=o();he&&ee&&ge&&It.update(Se=>({...Se,orderPhone:`${he}-${ee}-${ge}`}))}function ce(he){if(he&&he.includes("-")){const ee=he.split("-");ee.length===3&&It.update(ge=>({...ge,phone1:ee[0]||"010",phone2:ee[1]||"",phone3:ee[2]||""}))}}function be(){return W?Promise.resolve():new Promise(he=>{const ee=document.createElement("script");ee.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",ee.onload=()=>{W=!0,he()},document.head.appendChild(ee)})}async function x(){try{await be(),new window.daum.Postcode({oncomplete(he){It.update(ee=>({...ee,postcode:he.zonecode,address1:he.roadAddress||he.jibunAddress}))},onresize(he){}}).open()}catch{b(y,!0),b(_,"  "),b(C,"     .    .")}}Fn(async()=>{ks.set({id:d(),name:"",sess:A(),customer_id:a()}),ol.set({name:"",phone:"",address1:"",address2:"",postcode:"",mallType:i()}),c()?await E(c()):await F()}),Qo(()=>{te.forEach(he=>{try{he()}catch(ee){console.error("   :",ee)}}),te=[]});async function F(){b(f,!0);try{const he=await o1(i(),a(),A());he?(b(h,he),b(m,zd(he.status)),await T(he),Z(he.id)):(It.reset(),b(m,!0))}catch{b(y,!0),b(_," "),b(C,"     .")}finally{b(f,!1)}}async function E(he){b(f,!0);try{let ee=await bu(he);if(ee){const ge=!!(A()||a());if(_5(ee)&&ge){console.log("[loadEstimateById]    ,   ...");const Me=await b5(he,d(),A()||null,a()||null,i()||null);if(Me.success&&Me.newEstimateId){if(console.log(`[loadEstimateById]   : ${he}  ${Me.newEstimateId}`),U(Me.newEstimateId),ee=await bu(Me.newEstimateId),!ee)throw new Error("    .");c(Me.newEstimateId)}else{console.error("[loadEstimateById]   :",Me.error),b(y,!0),b(_," "),b(C,`    : ${Me.error}`);return}}b(h,ee),b(m,zd(ee.status)),await T(ee),Z(ee.id)}else b(y,!0),b(_," "),b(C,"   .")}catch(ee){console.error("[loadEstimateById] :",ee),b(y,!0),b(_," "),b(C,"    .")}finally{b(f,!1)}}function U(he){try{const ee=new URL(window.location.href);ee.searchParams.set("estimateId",he),window.history.replaceState({},"",ee.toString()),console.log(`[updateUrlWithNewEstimateId] URL  : ${ee.toString()}`)}catch(ee){console.error("[updateUrlWithNewEstimateId] URL  :",ee)}}function P(he){const ee={delivery:"",pickup:"",quick:""};return he&&ee[he]||""}async function T(he){try{Kt(It,lt(o).estimateName=he.name||"",lt(o)),Kt(It,lt(o).organizationName=he.organization_name||"",lt(o)),Kt(It,lt(o).orderName=he.order_name||"",lt(o)),Kt(It,lt(o).orderPhone=he.order_phone||"",lt(o)),Kt(It,lt(o).postcode=he.postcode||"",lt(o)),Kt(It,lt(o).address1=he.address1||"",lt(o)),Kt(It,lt(o).address2=he.address2||"",lt(o)),Kt(It,lt(o).comment=he.comment||"",lt(o)),Kt(It,lt(o).shippingMethod=P(he.shipping_method),lt(o)),Kt(It,lt(o).prefDeliveryDate=he.pref_delivery_date||"",lt(o)),Kt(It,lt(o).uploadMemo=he.upload_memo||"",lt(o)),Kt(It,lt(o).designConfirm=he.design_confirm||"",lt(o)),he.order_phone&&ce(he.order_phone),await q(he.id)}catch(ee){ee instanceof SyntaxError&&ee.message.includes("JSON")?(b(y,!0),b(_," "),b(C,"    .  .")):(b(y,!0),b(_," "),b(C,"    ."))}}function R(he){if(he==null)return null;if(typeof he=="object")return he;if(typeof he=="string")try{return JSON.parse(he)}catch{return null}return he}async function q(he){var ee;try{const ge=await Bu(he),Se=await Dd(he),Me=await a1(he),Qe=await eg(he),ot=await h1(he),Ye=[],Ce={};for(const de of ge)if(de.product_id&&de.product){const Te=de.idx||0;if(Ce[Te]||(Ce[Te]={product:de.product,variants:[],quantity:0,prints:[],addons:{},print_type:de.print_type||"none",simplePrints:[]}),de.variant_id&&de.quantity){const qe=de.original_price?parseFloat(de.original_price.toString()):0,je=de.price?parseFloat(de.price.toString()):0,Re=qe>0,Ve=Re?qe:je,At={id:de.variant_id,quantity:de.quantity,prices:[{amount:Ve}],thumbnail:((ee=de.variant)==null?void 0:ee.thumbnail)||null,title:de.variant_title||` ${de.variant_id.substring(0,4)}`,discountInfo:Re&&de.discount_amount?{discountAmount:de.discount_amount,discountType:de.discount_type,discountValue:de.discount_value,discountDirection:de.discount_direction}:void 0,isDiscountedPrice:!Re};Ce[Te].variants.push(At),Ce[Te].quantity+=de.quantity}}for(const de of Se)if(de.template_id&&de.estimate_id){const Te=de.idx||0;if(Ce[Te]){const qe={template:{id:de.template_id,name:""},price:de.price||0,colors:R(de.colors)||[],uploads:R(de.uploads)||null,title:"",objectId:de.object_id||null,variant_id:de.variant_id||null};Ce[Te].prints.push(qe)}}for(const de of Me){const Te=de.idx||0;Ce[Te]&&(Ce[Te].simplePrints||(Ce[Te].simplePrints=[]),Ce[Te].simplePrints.push({object_id:de.object_id||null,title:de.title||" ",print_method:de.print_method||"none",uploaded_files:R(de.uploaded_files)||null,file_metadata:R(de.file_metadata)||null,price:de.price||0}))}Qe.forEach(de=>{const Te=de.idx||0;Ce[Te]&&(Ce[Te].addons||(Ce[Te].addons={}),Ce[Te].addons[de.addon_id]={productId:de.selected_product_id,variantId:de.selected_variant_id||"",price:de.price||0,quantity:de.quantity||1})});for(const de in Ce)Ye.push({...Ce[de],idx:parseInt(de)});Kt(It,lt(o).products=Ye,lt(o)),Kt(It,lt(o).index=(Ye.length>0,0),lt(o)),It.updateTotalAmounts()}catch(ge){throw ge instanceof SyntaxError&&ge.message.includes("JSON")?(b(y,!0),b(_," "),b(C,"     .  .")):(b(y,!0),b(_," "),b(C,"     .")),ge}}function j(he){b(g,!1)}function Ae(he){var ee,ge;try{const Se=o().products[he];if(!Se||Se.idx===void 0){b(y,!0),b(_," "),b(C,"    .");return}if(!((ee=Se.product)!=null&&ee.id)){b(y,!0),b(_," "),b(C," ID   .");return}if(!((ge=l(h))!=null&&ge.id)){b(y,!0),b(_," "),b(C,"    .");return}M=he,b(O,Se.product.id),b(X,Se.idx),ne=!0,console.log(" [Edit]    - Realtime   "),b(xe,!0)}catch{b(y,!0),b(_,""),b(C,"    .")}}function Ee(){b(xe,!1),M=-1,b(O,""),b(X,-1),ne=!1,console.log(" [Edit]    - Realtime   ")}async function _e(){var he,ee,ge,Se,Me,Qe,ot,Ye,Ce,de,Te,qe,je;b(N,!0);try{if(!((he=l(h))!=null&&he.id))throw new Error(" ID .");if(l(X)===-1)throw new Error(" idx  .");const Re=fn(hr);if(!Re||!Re.productSelection)throw new Error("  .");if(!Re.productSelection.quantityByVariant||Object.keys(Re.productSelection.quantityByVariant).length===0)throw new Error("   .");await Iv(l(h).id,l(X));const Ve=[],{quantityByVariant:At,variantDiscounts:Ke,variantsByColor:nt}=Re.productSelection;let ht="none";if(typeof window<"u"){const mt=l(h).id||"temp",St=`detailedPrint_${l(O)}_${mt}`,st=`simplePrint_${l(O)}_${mt}`,tt=window.sessionStorage.getItem(St),Ft=window.sessionStorage.getItem(st);if(tt)try{const xt=JSON.parse(tt);Array.isArray(xt)&&xt.length>0&&(ht="detailed")}catch{}if(ht==="none"&&Ft)try{const xt=JSON.parse(Ft);Array.isArray(xt)&&xt.length>0&&(ht="simple")}catch{}if(ht==="none"&&((ee=Re.printSelection)!=null&&ee.currentMethod)){const xt=Re.printSelection.currentMethod;(xt==="detailed"||xt==="simple"||xt==="self-design")&&(ht=xt)}}console.log(" [Edit ]  print_type:",ht),console.log(" [Edit ] currentStore.printSelection:",Re.printSelection);for(const mt in At)for(const St in At[mt]){const st=At[mt][St];if(st>0){const tt=Ke==null?void 0:Ke[St],Ft=(ge=nt[mt])==null?void 0:ge.find(Ze=>Ze.id===St),xt=((Me=(Se=Ft==null?void 0:Ft.prices)==null?void 0:Se[0])==null?void 0:Me.amount)||0,Ot=(tt==null?void 0:tt.discountedPrice)||xt;Ve.push({estimate_id:l(h).id,product_id:Re.productId,variant_id:St,quantity:st,price:Ot,original_price:xt,discount_amount:(tt==null?void 0:tt.discountAmount)||0,discount_type:((Qe=tt==null?void 0:tt.discountInfo)==null?void 0:Qe.type)||null,discount_value:((ot=tt==null?void 0:tt.discountInfo)==null?void 0:ot.value)||null,discount_direction:((Ye=tt==null?void 0:tt.discountInfo)==null?void 0:Ye.direction)||null,discount_min_quantity:((Ce=tt==null?void 0:tt.discountInfo)==null?void 0:Ce.min_quantity)||null,discount_max_quantity:((de=tt==null?void 0:tt.discountInfo)==null?void 0:de.max_quantity)||null,idx:l(X),print_type:ht})}}if(Ve.length>0){const{error:mt}=await pt.from("estimate_items").insert(Ve);if(mt)throw new Error(`  : ${mt.message}`)}if(typeof window<"u"){const mt=l(h).id||"temp",St=`detailedPrint_${l(O)}_${mt}`,st=window.sessionStorage.getItem(St);if(st){const xt=JSON.parse(st),Ot=((Te=Re.productSelection)==null?void 0:Te.totalQuantity)||0;async function Ze(gt,Dt){var qt,zt,Mt,jt;try{const Ct=((qt=gt.template)==null?void 0:qt.id)||gt.template_id;if(!Ct)return gt.price||0;const Et=await Vd(Ct);if(!(Et!=null&&Et.template_product_variants)||Et.template_product_variants.length===0)return gt.price||0;let Nt=null;gt.variant_id&&(Nt=Et.template_product_variants.find(dr=>dr.variant_id===gt.variant_id)),!Nt&&Array.isArray(gt.colors)&&gt.colors.length>0&&(Nt=Et.template_product_variants.find(dr=>dr.color_count===gt.colors.length)),Nt||(Nt=Et.template_product_variants[0]);const Zt=await wA(Nt.variant_id),nr=((Mt=(zt=Zt==null?void 0:Zt.prices)==null?void 0:zt[0])==null?void 0:Mt.amount)||0;if(Nt.min_quantity&&Dt<Nt.min_quantity)return Nt.plate_price||0;let ir=nr;const sr=((jt=Et.product)==null?void 0:jt.quantity_discounts)||[];if(sr.length>0){const dr=bi(Dt,nr,sr);dr!=null&&dr.hasDiscount&&(ir=dr.discountedPrice)}return ir*Dt}catch{return gt.price||0}}const wt=await Promise.all(xt.map(async gt=>{var qt,zt,Mt,jt,Ct,Et,Nt,Zt,nr,ir,sr,dr,Jr;const Dt=await Ze(gt,Ot);return{estimate_id:l(h).id,template_id:((qt=gt.template)==null?void 0:qt.id)||gt.template_id||null,colors:gt.colors||[],price:Dt,object_id:gt.objectId||gt.object_id||null,variant_id:gt.variant_id||null,name_sheet:gt.nameSheet||gt.name_sheet||null,uploads:gt.uploads||null,original_price:gt.original_price||((zt=gt.discountInfo)==null?void 0:zt.originalPrice)||Dt||0,discount_amount:gt.discount_amount||((Mt=gt.discountInfo)==null?void 0:Mt.discountAmount)||0,discount_type:gt.discount_type||((Ct=(jt=gt.discountInfo)==null?void 0:jt.discountDetails)==null?void 0:Ct.type)||null,discount_value:gt.discount_value||((Nt=(Et=gt.discountInfo)==null?void 0:Et.discountDetails)==null?void 0:Nt.value)||null,discount_direction:gt.discount_direction||((nr=(Zt=gt.discountInfo)==null?void 0:Zt.discountDetails)==null?void 0:nr.direction)||null,discount_min_quantity:gt.discount_min_quantity||((sr=(ir=gt.discountInfo)==null?void 0:ir.discountDetails)==null?void 0:sr.min_quantity)||null,discount_max_quantity:gt.discount_max_quantity||((Jr=(dr=gt.discountInfo)==null?void 0:dr.discountDetails)==null?void 0:Jr.max_quantity)||null,idx:l(X)}}));if(wt.length>0){const{error:gt}=await pt.from("estimate_prints").insert(wt);if(gt)throw new Error(`   : ${gt.message}`)}}const tt=`simplePrint_${l(O)}_${mt}`,Ft=window.sessionStorage.getItem(tt);if(Ft){const Ot=JSON.parse(Ft).map(Ze=>({estimate_id:l(h).id,object_id:Ze.objectId||Ze.object_id||null,title:Ze.title||null,print_method:Ze.printMethod||Ze.print_method||null,uploaded_files:Ze.uploadedFiles||Ze.uploaded_files||null,file_metadata:Ze.savedFileInfo||Ze.file_metadata||null,price:Ze.price||0,idx:l(X)}));if(Ot.length>0){const{error:Ze}=await pt.from("estimate_simple_prints").insert(Ot);if(Ze)throw new Error(`   : ${Ze.message}`)}}}if((qe=Re.addonSelection)!=null&&qe.selectedAddons){const mt=[],St=((je=Re.productSelection)==null?void 0:je.totalQuantity)||0;for(const[st,tt]of Object.entries(Re.addonSelection.selectedAddons)){const Ft=tt;let xt=0;if(Ft.variantId)try{const{data:Ot,error:Ze}=await pt.from("prices").select("amount").eq("variant_id",Ft.variantId).single();!Ze&&Ot&&(xt=Ot.amount)}catch{}mt.push({estimate_id:l(h).id,addon_id:st,selected_product_id:Ft.productId,selected_variant_id:Ft.variantId||null,price:xt,quantity:St,idx:l(X)})}if(mt.length>0){const{error:st}=await pt.from("estimate_addon_items").insert(mt);if(st)throw new Error(`  : ${st.message}`)}}b(k,!0),setTimeout(()=>{b(k,!1)},3e3),Ee(),await q(l(h).id)}catch(Re){let Ve="     .";Re instanceof Error&&(Ve=Re.message,Re.message.includes("duplicate key")?Ve="  .  .":Re.message.includes("foreign key")?Ve="   .     .":Re.message.includes("not null")?Ve="  .    .":Re.message.includes("permission")&&(Ve="   .  .")),b(y,!0),b(_," "),b(C,Ve)}finally{b(N,!1)}}async function Oe(he){var ee;try{const ge=o().products[he];if(!ge||ge.idx===void 0){b(y,!0),b(_," "),b(C,"    .");return}if(!((ee=l(h))!=null&&ee.id)){b(y,!0),b(_," "),b(C,"    .");return}await Iv(l(h).id,ge.idx),Kt(It,lt(o).products=o().products.filter((Se,Me)=>Me!==he),lt(o)),It.updateTotalAmounts()}catch{b(y,!0),b(_," "),b(C,"    .")}}function G(he){const ee={:"delivery",:"pickup",:"quick"};return he&&ee[he]||null}async function D(){var he;if(!l(s)){b(y,!0),b(_," "),b(C,"    .");return}if(!a()){const ee=J(l(V));if(!ee.valid){b(H,ee.message),b(y,!0),b(_," "),b(C,ee.message);return}b(H,"")}se(),b(N,!0);try{if(!((he=l(h))!=null&&he.id))throw new Error("  .");const ee=G(o().shippingMethod);await Od(l(h).id,{name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:o().postcode,address1:o().address1,address2:o().address2,comment:o().comment||null,shipping_method:ee,pref_delivery_date:o().prefDeliveryDate||null,upload_memo:o().uploadMemo||null,design_confirm:o().designConfirm||"none",password:a()?null:l(V)}),await r5(l(h).id,"pending"),b(k,!0),setTimeout(()=>{b(k,!1)},3e3),b(y,!0),b(_," "),b(C,"  ."),b(I,()=>{window.location.href="/odiz/list.php"})}catch(ee){b(y,!0),b(_," "),b(C,ee instanceof Error?ee.message:"    ."),b(I,void 0)}finally{b(N,!1)}}Jt(()=>o(),()=>{b(s,o().estimateName&&o().orderName&&o().phone1&&o().phone2&&o().phone3&&o().postcode&&o().address1)}),to(),Rr();var ie=S9(),me=ft(ie),pe=w(me);{var oe=he=>{var ee=p9();L(he,ee)},ye=he=>{var ee=C9(),ge=w(ee);{var Se=or=>{var Vr=g9(),bn=w(Vr);at("click",bn,()=>window.location.href=`?mode=${u()}`),L(or,Vr)};ze(ge,or=>{c()&&or(Se)})}var Me=z(ge,2);{var Qe=or=>{var Vr=v9(),bn=w(Vr);t1(bn,{class:"odz-w-4 odz-h-4"}),L(or,Vr)};ze(Me,or=>{l(k)&&or(Qe)})}var ot=z(Me,2),Ye=w(ot);{var Ce=or=>{z5(or,{onSelectProduct:Ae,onDeleteProduct:Oe,get isEditable(){return l(m)},set isEditable(Vr){b(m,Vr)},$$legacy:!0})},de=or=>{var Vr=w9(),bn=w(Vr);uE(bn,{class:"odz-w-16 odz-h-16 odz-text-gray-300 odz-mx-auto odz-mb-4"});var lo=z(bn,4);{var no=Vo=>{var Gt=m9();at("click",Gt,()=>b(g,!0)),L(Vo,Gt)};ze(lo,Vo=>{l(m)&&Vo(no)})}L(or,Vr)};ze(Ye,or=>{o().products&&o().products.length>0?or(Ce):or(de,!1)})}var Te=z(ot,2),qe=w(Te),je=w(qe),Re=z(w(je),2),Ve=z(je,2),At=z(w(Ve),2),Ke=z(Ve,2),nt=z(w(Ke),2),ht=z(Ke,2),mt=z(w(ht),2),St=w(mt);He(()=>{o(),sp(()=>{l(m)})});var st=w(St);st.value=(st.__value="010")==null?"":"010";var tt=z(st);tt.value=(tt.__value="011")==null?"":"011";var Ft=z(tt);Ft.value=(Ft.__value="016")==null?"":"016";var xt=z(Ft);xt.value=(xt.__value="017")==null?"":"017";var Ot=z(xt);Ot.value=(Ot.__value="018")==null?"":"018";var Ze=z(Ot);Ze.value=(Ze.__value="019")==null?"":"019";var wt=z(St,2),gt=z(wt,2),Dt=z(ht,4),qt=z(w(Dt),2),zt=w(qt),Mt=z(zt,2),jt=z(Dt,2),Ct=z(w(jt),2),Et=z(jt,2),Nt=z(w(Et),2),Zt=z(Et,2),nr=z(w(Zt),2);He(()=>{o(),sp(()=>{l(m)})});var ir=w(nr);ir.value=((ir.__value="")==null,"");var sr=z(ir);sr.value=(sr.__value="")==null?"":"";var dr=z(sr);dr.value=(dr.__value="")==null?"":"";var Jr=z(dr);Jr.value=(Jr.__value="")==null?"":"";var sn=z(Zt,2),lr=z(w(sn),2),cr=z(sn,2);{var qr=or=>{var Vr=_9(),bn=z(w(Vr),2),lo=w(bn);r1(lo,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform odz--translate-y-1/2 odz-w-5 odz-h-5 odz-text-gray-400"});var no=z(lo,2),Vo=z(bn,2);{var Gt=zn=>{var zo=y9(),Ns=w(zo);He(()=>Le(Ns,l(H))),L(zn,zo)},kr=zn=>{var zo=b9();L(zn,zo)};ze(Vo,zn=>{l(H)?zn(Gt):zn(kr,!1)})}He(()=>{Cr(no,`odz-w-full odz-pl-10 odz-pr-4 odz-py-2.5 odz-border ${(l(H)?"odz-border-red-500":"odz-border-gray-300")??""} odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50`),no.disabled=!l(m)}),yr(no,()=>l(V),zn=>b(V,zn)),L(or,Vr)};ze(cr,or=>{a()||or(qr)})}var Pr=z(cr,2),_r=z(w(Pr),2),wr=z(Te,2),Qr=w(wr),Wr=w(Qr),vn=z(w(Wr),2),Hr=w(vn),pr=z(Wr,2),In=z(w(pr),2),To=w(In),ro=z(pr,2),xo=z(w(ro),2),as=w(xo),Tn=z(ro,2);{var Lo=or=>{var Vr=B9(),bn=z(w(Vr),2),lo=w(bn);He(no=>Le(lo,`-${no??""}`),[()=>vr(o().totalDiscountAmount)],dt),L(or,Vr)};ze(Tn,or=>{o().totalDiscountAmount>0&&or(Lo)})}var Ln=z(Tn,2),Po=z(w(Ln),2),ri=w(Po),ta=z(wr,2);{var Ds=or=>{var Vr=z9(),bn=w(Vr),lo=w(bn);{var no=Gt=>{var kr=x9();L(Gt,kr)},Vo=Gt=>{var kr=en(" ");L(Gt,kr)};ze(lo,Gt=>{l(N)?Gt(no):Gt(Vo,!1)})}He(()=>bn.disabled=l(N)||!l(s)),at("click",bn,D),L(or,Vr)};ze(ta,or=>{l(m)&&or(Ds)})}He((or,Vr,bn)=>{Re.disabled=!l(m),At.disabled=!l(m),nt.disabled=!l(m),St.disabled=!l(m),wt.disabled=!l(m),gt.disabled=!l(m),Mt.disabled=!l(m),Nt.disabled=!l(m),nr.disabled=!l(m),lr.disabled=!l(m),_r.disabled=!l(m),Le(Hr,`${o().totalQuantity||0}`),Le(To,or),Le(as,Vr),Le(ri,bn)},[()=>vr(o().totalProductAmount),()=>vr(o().totalPrintAmount),()=>vr(o().totalAmount)],dt),yr(Re,()=>o().estimateName,or=>Kt(It,lt(o).estimateName=or,lt(o))),yr(At,()=>o().organizationName,or=>Kt(It,lt(o).organizationName=or,lt(o))),yr(nt,()=>o().orderName,or=>Kt(It,lt(o).orderName=or,lt(o))),ip(St,()=>o().phone1,or=>Kt(It,lt(o).phone1=or,lt(o))),at("change",St,se),yr(wt,()=>o().phone2,or=>Kt(It,lt(o).phone2=or,lt(o))),at("input",wt,se),yr(gt,()=>o().phone3,or=>Kt(It,lt(o).phone3=or,lt(o))),at("input",gt,se),yr(zt,()=>o().postcode,or=>Kt(It,lt(o).postcode=or,lt(o))),at("click",Mt,x),yr(Ct,()=>o().address1,or=>Kt(It,lt(o).address1=or,lt(o))),yr(Nt,()=>o().address2,or=>Kt(It,lt(o).address2=or,lt(o))),ip(nr,()=>o().shippingMethod,or=>Kt(It,lt(o).shippingMethod=or,lt(o))),yr(lr,()=>o().prefDeliveryDate,or=>Kt(It,lt(o).prefDeliveryDate=or,lt(o))),yr(_r,()=>o().comment,or=>Kt(It,lt(o).comment=or,lt(o))),L(he,ee)};ze(pe,he=>{l(f)?he(oe):he(ye,!1)})}var Ne=z(me,2);{var we=he=>{W1(he,{addProduct:j,productType:"godo",get isProductSearchOpen(){return l(g)},set isProductSearchOpen(ee){b(g,ee)},$$legacy:!0})};ze(Ne,he=>{l(g)&&he(we)})}var Fe=z(Ne,2);{var ue=he=>{f9(he,{get isOpen(){return l(xe)},get estimateId(){return l(h).id},get idx(){return l(X)},get productId(){return l(O)},onClose:Ee,onSave:_e})};ze(Fe,he=>{l(xe)&&l(h)&&he(ue)})}var De=z(Fe,2);Gd(De,{get onClose(){return l(I)},get isOpen(){return l(y)},set isOpen(he){b(y,he)},get title(){return l(_)},set title(he){b(_,he)},get message(){return l(C)},set message(he){b(C,he)},$$legacy:!0});var Pe=z(De,2);Wd(Pe,{get isLoading(){return l(f)},set isLoading(he){b(f,he)},$$legacy:!0}),L(n,ie),Mr(),r()}const Hb={qnaId:null,title:"",content:"",customerName:"",customerPhone:"",customerEmail:"",products:[],nextIdx:0,editingIdx:null,editingProductId:null,isLoading:!1,isSaving:!1};function F9(){const{subscribe:n,set:e,update:t}=gl({...Hb});return{subscribe:n,reset:()=>{e({...Hb})},setQnaId:r=>{t(o=>({...o,qnaId:r}))},setTitle:r=>{t(o=>({...o,title:r}))},setContent:r=>{t(o=>({...o,content:r}))},setCustomerInfo:(r,o,s)=>{t(i=>({...i,customerName:r,customerPhone:o,customerEmail:s}))},addProduct:r=>{t(o=>{const s={...r,idx:o.nextIdx};return{...o,products:[...o.products,s],nextIdx:o.nextIdx+1}})},updateProduct:(r,o)=>{t(s=>({...s,products:s.products.map(i=>i.idx===r?{...i,...o}:i)}))},removeProduct:r=>{t(o=>({...o,products:o.products.filter(s=>s.idx!==r)}))},setEditing:(r,o)=>{t(s=>({...s,editingIdx:r,editingProductId:o}))},clearEditing:()=>{t(r=>({...r,editingIdx:null,editingProductId:null}))},setLoading:r=>{t(o=>({...o,isLoading:r}))},setSaving:r=>{t(o=>({...o,isSaving:r}))},setState:r=>{t(o=>({...o,...r}))},getState:()=>fn({subscribe:n})}}const hi=F9();function Mz(n,e,t){return`qna_product_${e}_${n||"new"}_${t}`}function Hz(n,e,t,r){const o=Mz(n,e,t);try{sessionStorage.setItem(o,JSON.stringify(r))}catch(s){console.error("[QnaStore] Failed to save to session:",s)}}function I9(n,e,t){const r=Mz(n,e,t);try{const o=sessionStorage.getItem(r);return o?JSON.parse(o):null}catch(o){return console.error("[QnaStore] Failed to load from session:",o),null}}function av(n){try{const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&r.startsWith("qna_product_")&&r.includes(`_${n||"new"}_`)&&e.push(r)}e.forEach(t=>sessionStorage.removeItem(t))}catch(e){console.error("[QnaStore] Failed to clear all session:",e)}}async function U9(n){const{data:e,error:t}=await pt.rpc("hash_inquiry_password",{plain_password:n});if(t)throw console.error("[QnaService] hashPassword error:",t),t;return e}async function Q9(n,e){const{data:t,error:r}=await pt.rpc("verify_inquiry_password",{inquiry_id_param:n,plain_password:e});if(r)throw console.error("[QnaService] verifyPassword error:",r),r;return t===!0}async function T9(n,e){try{const t=await Pg(n);return t?t.customer_id?e&&t.customer_id===e?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!1,message:"     ."}:{canAccess:!1,requiresPassword:!0,message:" ."}:{canAccess:!1,requiresPassword:!1,message:"   ."}}catch(t){return console.error("[QnaService] checkQnaAccess error:",t),{canAccess:!1,requiresPassword:!1,message:"     ."}}}async function L9(n,e){try{return await Q9(n,e)?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!0,message:"  ."}}catch(t){return console.error("[QnaService] accessQnaWithPassword error:",t),{canAccess:!1,requiresPassword:!0,message:"    ."}}}function P9(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*1e3)).padStart(3,"0");return`Q${e}${t}${r}${o}${s}${i}`}async function k9(n){const e=P9();let t;!n.customer_id&&n.password&&(t=await U9(n.password));const{password:r,...o}=n,s={...o,inquiry_no:e,status:n.status||"pending"};t&&(s.password=t);const{data:i,error:a}=await pt.from("inquiries").insert(s).select().single();if(a)throw console.error("[QnaService] createQna error:",a),a;return i}async function Pg(n){const{data:e,error:t}=await pt.from("inquiries").select("*").eq("id",n).single();if(t){if(t.code==="PGRST116")return null;throw console.error("[QnaService] getQnaById error:",t),t}return e}async function O9(n,e,t){let r=pt.from("inquiries").select("*").eq("shop_id",n).order("created_at",{ascending:!1});const{data:o,error:s}=await r;if(s)throw console.error("[QnaService] getQnaList error:",s),s;return o||[]}async function t2(n,e){const{data:t,error:r}=await pt.from("inquiries").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(r)throw console.error("[QnaService] updateQna error:",r),r;return t}async function jz(n,e){return t2(n,{status:e})}async function D9(n){const{error:e}=await pt.from("inquiries").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQna error:",e),e}async function N9(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaItems error:",o),o;return r||[]}async function r2(n){const{data:e,error:t}=await pt.from("inquiry_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaItems error:",t),t;return e||[]}async function M9(n){const{error:e}=await pt.from("inquiry_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaItems error:",e),e}async function H9(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaPrints error:",o),o;return r||[]}async function n2(n){const{data:e,error:t}=await pt.from("inquiry_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaPrints error:",t),t;return e||[]}async function j9(n){const{error:e}=await pt.from("inquiry_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaPrints error:",e),e}async function Rz(n,e){const{data:t,error:r}=await pt.from("inquiry_comments").insert({...e,inquiry_id:n}).select().single();if(r)throw console.error("[QnaService] addQnaComment error:",r),r;return e.writer==="manager"&&await jz(n,"answered"),t}async function R9(n){const{data:e,error:t}=await pt.from("inquiry_comments").select("*").eq("inquiry_id",n).order("created_at",{ascending:!0});if(t)throw console.error("[QnaService] getQnaComments error:",t),t;return e||[]}async function q9(n){const{error:e}=await pt.from("inquiry_comments").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQnaComment error:",e),e}async function K9(n){const e=await Pg(n);if(!e)throw new Error("   .");const t=await r2(n),r=await n2(n),o=await s2(n),s=await i2(n),i=await s1({shop_id:e.shop_id,customer_id:e.customer_id,name:e.title,order_name:e.customer_name,phone:e.customer_phone,email:e.customer_email,status:"temp",memo:`: ${e.inquiry_no}

${e.content}`});if(!i.id)throw new Error("  .");for(const a of t)await i1({estimate_id:i.id,idx:a.idx,product_id:a.product_id,variant_id:a.variant_id,quantity:a.quantity});for(const a of r)a.print_type==="simple"?await Fv({estimate_id:i.id,idx:a.idx,object_id:a.object_id,title:a.title,print_method:a.print_method,uploaded_files:a.uploaded_files,file_metadata:a.file_metadata}):a.print_type==="detailed"&&await A1({estimate_id:i.id,idx:a.idx,object_id:a.object_id,template_id:a.template_id,colors:a.colors,uploads:a.uploaded_files});for(const a of o)await Fv({estimate_id:i.id,idx:a.idx,object_id:a.object_id,print_method:a.print_method,template_id:a.template_id,selected_colors:a.selected_colors,print_config:a.print_config,uploads:a.uploads,name_sheet:a.name_sheet,memo:a.memo});for(const a of s)await u1({estimate_id:i.id,idx:a.idx,addon_id:a.addon_id,selected_product_id:a.selected_product_id,selected_variant_id:a.selected_variant_id});return await t2(n,{converted_estimate_id:i.id,status:"closed"}),await Rz(n,{writer:"system",writer_name:"",content:` . (: ${i.estimate_no})`}),i.id}function $9(n,e){return pt.channel(`qna-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`id=eq.${n}`},e).subscribe()}function V9(n,e){return pt.channel(`qna-list-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`shop_id=eq.${n}`},e).subscribe()}function G9(n,e){return pt.channel(`qna-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiry_comments",filter:`inquiry_id=eq.${n}`},e).subscribe()}function o2(n){n&&pt.removeChannel(n)}async function W9(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_simple_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaSimplePrints error:",o),o;return r||[]}async function s2(n){const{data:e,error:t}=await pt.from("inquiry_simple_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaSimplePrints error:",t),t;return e||[]}async function X9(n){const{error:e}=await pt.from("inquiry_simple_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaSimplePrints error:",e),e}async function Y9(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_addon_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaAddonItems error:",o),o;return r||[]}async function i2(n){const{data:e,error:t}=await pt.from("inquiry_addon_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaAddonItems error:",t),t;if(!e||e.length===0)return[];const r=[...new Set(e.map(h=>h.addon_id).filter(Boolean))],o=[...new Set(e.map(h=>h.selected_product_id).filter(Boolean))],s=[...new Set(e.map(h=>h.selected_variant_id).filter(Boolean))],[i,a,A]=await Promise.all([r.length>0?pt.from("product_addons").select("id, name").in("id",r):{data:[]},o.length>0?pt.from("products").select("id, title").in("id",o):{data:[]},s.length>0?pt.from("product_variants").select("id, title").in("id",s):{data:[]}]),d=new Map((i.data||[]).map(h=>[h.id,h.name])),c=new Map((a.data||[]).map(h=>[h.id,h.title])),u=new Map((A.data||[]).map(h=>[h.id,h.title]));return e.map(h=>({...h,addon_name:d.get(h.addon_id)||null,selected_product_name:c.get(h.selected_product_id)||null,selected_variant_name:u.get(h.selected_variant_id)||null}))}async function J9(n){const{error:e}=await pt.from("inquiry_addon_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaAddonItems error:",e),e}async function Z9(n){const{data:e}=await pt.from("inquiry_items").select("quantity, price").eq("inquiry_id",n);let t=0,r=0;if(e)for(const h of e){const f=h.quantity||0,g=h.price||0;t+=f*g,r+=f}const{data:o}=await pt.from("inquiry_prints").select("price").eq("inquiry_id",n);let s=0;if(o)for(const h of o)s+=h.price||0;const{data:i}=await pt.from("inquiry_simple_prints").select("price").eq("inquiry_id",n);if(i)for(const h of i)s+=h.price||0;const{data:a}=await pt.from("inquiry_addon_items").select("price, quantity").eq("inquiry_id",n);let A=0;if(a)for(const h of a){const f=h.quantity||1,g=h.price||0;A+=f*g}const{data:d}=await pt.from("inquiry_additional_costs").select("amount").eq("inquiry_id",n);let c=0;if(d)for(const h of d)c+=h.amount||0;const u=t+s+A+c;return{product_amount:t,print_amount:s,addon_amount:A,additional_amount:c,total_quantity:r,total_amount:u}}async function eq(n){const e=await Z9(n),{error:t}=await pt.from("inquiries").update({product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,updated_at:new Date().toISOString()}).eq("id",n);if(t)throw console.error("[QnaService] updateInquirySummary error:",t),t}async function tq(n){const{data:e,error:t}=await pt.from("inquiry_estimates").select(`
      id,
      inquiry_id,
      estimate_id,
      created_at,
      created_by,
      memo,
      estimates:estimate_id (
        estimate_no,
        status,
        total_amount,
        created_at,
        name
      )
    `).eq("inquiry_id",n).order("created_at",{ascending:!1});if(t)throw console.error("[QnaService] getLinkedEstimates error:",t),t;return(e||[]).map(r=>({id:r.id,inquiry_id:r.inquiry_id,estimate_id:r.estimate_id,created_at:r.created_at,created_by:r.created_by,memo:r.memo,estimate:r.estimates}))}var rq=Y(`<div class="odz-text-center odz-py-12 odz-bg-slate-50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><!> <p class="odz-text-slate-500 odz-font-bold">  .</p> <p class="odz-text-sm odz-text-slate-400 odz-mt-1">   ' '  .</p></div>`),nq=Y('<div class="odz-flex odz-gap-1"><button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" title=""><!></button> <button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-error" title=""><!></button></div>'),oq=Y('<li class="odz-flex odz-justify-between"><span> </span> <span class="odz-font-bold odz-text-slate-800"> </span></li>'),sq=Y('<div class="odz-mt-4 odz-bg-slate-50 odz-rounded-xl odz-p-3 odz-border odz-border-slate-100"><ul class="odz-text-sm odz-text-gray-600 odz-space-y-1.5"></ul></div>'),iq=Y('<span class="odz-text-gray-400"></span>'),aq=Y('<span class="odz-text-blue-800"> </span> <!>',1),Aq=Y('<span class="odz-flex odz-items-center odz-gap-1"></span>'),lq=Y("<span> </span>"),dq=Y('<span class="odz-text-blue-500"> </span>'),cq=Y('<span class="odz-text-gray-500"> </span>'),uq=Y('<li class="odz-flex odz-flex-wrap odz-items-center odz-gap-1"><!> <!> <!></li>'),hq=Y('<div class="odz-mt-3 odz-bg-indigo-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-indigo-100"><p class="odz-text-xs odz-font-medium odz-text-blue-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-blue-700 odz-space-y-1"></ul></div>'),fq=Y('<span class="odz-text-green-600"> </span>'),pq=Y('<span class="odz-text-green-500"> </span>'),gq=Y('<span class="odz-text-gray-500"> </span>'),vq=Y('<li class="odz-flex odz-items-center odz-gap-1"><span> </span> <!> <!> <!></li>'),mq=Y('<div class="odz-mt-3 odz-bg-emerald-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-emerald-100"><p class="odz-text-xs odz-font-medium odz-text-green-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-green-700 odz-space-y-1"></ul></div>'),wq=Y('<span class="odz-text-purple-500"> </span>'),yq=Y('<span class="odz-text-purple-600"> </span>'),bq=Y('<span class="odz-text-purple-600 odz-font-medium odz-whitespace-nowrap"> </span>'),_q=Y('<li class="odz-flex odz-items-center odz-justify-between"><span class="odz-flex odz-items-center odz-gap-1 odz-flex-wrap"><span class="odz-font-medium"> </span> <!> <!></span> <!></li>'),Bq=Y('<div class="odz-mt-3 odz-bg-purple-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-purple-100"><p class="odz-text-xs odz-font-medium odz-text-purple-800 odz-mb-1"></p> <ul class="odz-text-xs odz-text-purple-700 odz-space-y-1"></ul></div>'),xq=Y('<div class="odz-group odz-relative odz-bg-white odz-rounded-2xl odz-border odz-border-slate-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all hover:odz-shadow-[0_8px_30px_rgba(0,0,0,0.1)] hover:odz-border-indigo-100"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-items-start odz-justify-between"><div class="odz-flex-1"><h4 class="odz-font-bold odz-text-slate-900 odz-text-xl odz-tracking-tight"> </h4> <p class="odz-text-base odz-text-slate-500 odz-mt-1.5 odz-flex odz-items-center odz-gap-1"> : <span class="odz-font-bold odz-text-indigo-600"> </span></p></div> <!></div> <div class="odz-mt-4 odz-pt-4 odz-border-t odz-border-gray-100 odz-space-y-3"><div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <!> <!> <!> <!></div></div></div>'),zq=Y('<div class="odz-modal odz-modal-open" style="z-index: 9999;"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error"></button></div></div> <button type="button" class="odz-modal-backdrop" aria-label=""></button></div>'),Cq=Y('<div class="odz-space-y-3"><!></div> <!>',1);function qz(n,e){Nr(e,!1);const t=Yp();let r=vt(e,"products",24,()=>[]),o=vt(e,"disabled",8,!1),s=Ue(!1),i=Ue(null);function a(k,W){k.stopPropagation(),k.preventDefault(),!o()&&t("edit",{idx:W.idx,productId:W.productId})}function A(k,W){k.stopPropagation(),k.preventDefault(),!o()&&(b(i,W),b(s,!0))}function d(){l(i)&&t("delete",{idx:l(i).idx}),b(s,!1),b(i,null)}function c(){b(s,!1),b(i,null)}function u(k){return!k.variants||k.variants.length===0?" ":k.variants.map(W=>`${W.variantName||W.variantId}: ${W.quantity}`).join(", ")}function h(k){const W=k.prints&&k.prints.length>0,V=k.simplePrints&&k.simplePrints.length>0;if(!W&&!V)return" ";const H=[];return W&&H.push(`  ${k.prints.length}`),V&&H.push(`  ${k.simplePrints.length}`),H.join(", ")}function f(k){return!k.addons||k.addons.length===0?" ":` ${k.addons.length}`}Rr();var g=Cq(),m=ft(g),y=w(m);{var _=k=>{var W=rq(),V=w(W);Ev(V,{class:"odz-w-16 odz-h-16 odz-mx-auto odz-text-slate-300 odz-mb-4"}),L(k,W)},C=k=>{var W=kt(),V=ft(W);Yt(V,1,r,H=>H.idx,(H,J)=>{var xe=xq(),M=w(xe),O=w(M),X=w(O),te=w(X),le=w(te),ne=z(te,2),Be=z(w(ne)),Z=w(Be),se=z(X,2);{var ce=ue=>{var De=nq(),Pe=w(De),he=w(Pe);J_(he,{class:"odz-w-4 odz-h-4"});var ee=z(Pe,2),ge=w(ee);n1(ge,{class:"odz-w-4 odz-h-4"}),at("click",Pe,Se=>a(Se,l(J))),at("click",ee,Se=>A(Se,l(J))),L(ue,De)};ze(se,ue=>{o()||ue(ce)})}var be=z(O,2),x=w(be),F=w(x);Ev(F,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var E=z(F,2),U=z(w(E),2),P=w(U),T=z(x,2),R=w(T);aE(R,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var q=z(R,2),j=z(w(q),2),Ae=w(j),Ee=z(T,2),_e=w(Ee);cE(_e,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var Oe=z(_e,2),G=z(w(Oe),2),D=w(G),ie=z(Ee,2);{var me=ue=>{var De=sq(),Pe=w(De);Yt(Pe,5,()=>l(J).variants,Ar,(he,ee)=>{var ge=oq(),Se=w(ge),Me=w(Se),Qe=z(Se,2),ot=w(Qe);He(()=>{Le(Me,l(ee).variantName||l(ee).variantId),Le(ot,`${l(ee).quantity??""}`)}),L(he,ge)}),L(ue,De)};ze(ie,ue=>{l(J).variants&&l(J).variants.length>0&&ue(me)})}var pe=z(ie,2);{var oe=ue=>{var De=hq(),Pe=z(w(De),2);Yt(Pe,5,()=>l(J).prints,Ar,(he,ee)=>{var ge=uq(),Se=w(ge);{var Me=Te=>{var qe=Aq();Yt(qe,5,()=>l(ee).parentTemplates,Ar,(je,Re,Ve)=>{var At=aq(),Ke=ft(At),nt=w(Ke),ht=z(Ke,2);{var mt=St=>{var st=iq();L(St,st)};ze(ht,St=>{Ve<l(ee).parentTemplates.length-1&&St(mt)})}He(()=>Le(nt,l(Re).name)),L(je,At)}),L(Te,qe)},Qe=Te=>{var qe=kt(),je=ft(qe);{var Re=Ve=>{var At=lq(),Ke=w(At);He(()=>Le(Ke,`: ${(l(ee).templateName||l(ee).templateId)??""}`)),L(Ve,At)};ze(je,Ve=>{l(ee).templateId&&Ve(Re)},!0)}L(Te,qe)};ze(Se,Te=>{l(ee).parentTemplates&&l(ee).parentTemplates.length>0?Te(Me):Te(Qe,!1)})}var ot=z(Se,2);{var Ye=Te=>{var qe=dq(),je=w(qe);He(()=>Le(je,`(${l(ee).colors.length??""})`)),L(Te,qe)};ze(ot,Te=>{l(ee).colors&&Array.isArray(l(ee).colors)&&l(ee).colors.length>0&&Te(Ye)})}var Ce=z(ot,2);{var de=Te=>{var qe=cq(),je=w(qe);He(()=>Le(je,`- ${l(ee).memo??""}`)),L(Te,qe)};ze(Ce,Te=>{l(ee).memo&&Te(de)})}L(he,ge)}),L(ue,De)};ze(pe,ue=>{l(J).prints&&l(J).prints.length>0&&ue(oe)})}var ye=z(pe,2);{var Ne=ue=>{var De=mq(),Pe=z(w(De),2);Yt(Pe,5,()=>l(J).simplePrints,Ar,(he,ee)=>{var ge=vq(),Se=w(ge),Me=w(Se),Qe=z(Se,2);{var ot=qe=>{var je=fq(),Re=w(je);He(()=>Le(Re,`(${l(ee).printMethod??""})`)),L(qe,je)};ze(Qe,qe=>{l(ee).printMethod&&qe(ot)})}var Ye=z(Qe,2);{var Ce=qe=>{var je=pq(),Re=w(je);He(()=>Le(Re,`(${l(ee).selectedColors.length??""})`)),L(qe,je)};ze(Ye,qe=>{l(ee).selectedColors&&Array.isArray(l(ee).selectedColors)&&l(ee).selectedColors.length>0&&qe(Ce)})}var de=z(Ye,2);{var Te=qe=>{var je=gq(),Re=w(je);He(()=>Le(Re,`- ${l(ee).memo??""}`)),L(qe,je)};ze(de,qe=>{l(ee).memo&&qe(Te)})}He(()=>Le(Me,l(ee).objectId||" ")),L(he,ge)}),L(ue,De)};ze(ye,ue=>{l(J).simplePrints&&l(J).simplePrints.length>0&&ue(Ne)})}var we=z(ye,2);{var Fe=ue=>{var De=Bq(),Pe=z(w(De),2);Yt(Pe,5,()=>l(J).addons,Ar,(he,ee)=>{var ge=_q(),Se=w(ge),Me=w(Se),Qe=w(Me),ot=z(Me,2);{var Ye=je=>{var Re=wq(),Ve=w(Re);He(()=>Le(Ve,`(${l(ee).selectedProductName||""}${(l(ee).selectedVariantName?` - ${l(ee).selectedVariantName}`:"")??""})`)),L(je,Re)};ze(ot,je=>{(l(ee).selectedProductName||l(ee).selectedVariantName)&&je(Ye)})}var Ce=z(ot,2);{var de=je=>{var Re=yq(),Ve=w(Re);He(()=>Le(Ve,`x${l(ee).quantity??""}`)),L(je,Re)};ze(Ce,je=>{l(ee).quantity&&l(ee).quantity>1&&je(de)})}var Te=z(Se,2);{var qe=je=>{var Re=bq(),Ve=w(Re);He(At=>Le(Ve,`${At??""}`),[()=>l(ee).price.toLocaleString()],dt),L(je,Re)};ze(Te,je=>{l(ee).price&&je(qe)})}He(()=>Le(Qe,l(ee).addonName||l(ee).addonId)),L(he,ge)}),L(ue,De)};ze(we,ue=>{l(J).addons&&l(J).addons.length>0&&ue(Fe)})}He((ue,De,Pe)=>{Le(le,l(J).productName||l(J).productId),Le(Z,l(J).totalQuantity),Le(P,ue),Le(Ae,De),Le(D,Pe)},[()=>u(l(J)),()=>h(l(J)),()=>f(l(J))],dt),L(H,xe)}),L(k,W)};ze(y,k=>{r().length===0?k(_):k(C,!1)})}var I=z(m,2);{var N=k=>{var W=zq(),V=w(W),H=z(w(V),2),J=w(H),xe=z(H,2),M=w(xe),O=z(M,2),X=z(V,2);He(()=>{var te,le;return Le(J,`'${(((te=l(i))==null?void 0:te.productName)||((le=l(i))==null?void 0:le.productId))??""}' 
        ?`)}),at("click",M,c),at("click",O,d),at("click",X,c),L(k,W)};ze(I,k=>{l(s)&&k(N)})}L(n,g),Mr()}var Sq=Y('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),Eq=Y('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Fq=Y('<dialog class="odz-modal odz-modal-open odiz-app odz-items-center odz-justify-center"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative odz-rounded-xl odz-shadow-2xl odz-bg-white"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"> </button></div></div></dialog>');function Iq(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(hi,"$qnaStore",t),s=Ue(),i=Ue(),a=Yp();let A=vt(e,"isOpen",8,!1),d=vt(e,"productId",8),c=vt(e,"shopId",8);vt(e,"mallType",8,"");let u=vt(e,"qnaId",8,null),h=vt(e,"editingIdx",8,null),f=Ue(!0),g=Ue(""),m=Ue(),y=Ue("");async function _(){try{b(f,!0),b(g,"");const E=await Nu(d(),c());if(b(y,(E==null?void 0:E.title)||(E==null?void 0:E.name)||d()),h()!==null){const U=I9(u(),d(),h());U?await I(U):await C()}else await C();b(f,!1)}catch(E){console.error("[QnaProductSelector]  :",E),E instanceof Error?b(g,E.message):b(g,"     ."),b(f,!1)}}async function C(){N();const E=Date.now().toString(36)+Math.random().toString(36).substr(2),U={productId:d(),productSelection:{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!1,sessionId:E,estimateId:l(s)};if(hr.set(U),typeof window<"u"){const P=`fixedEstimate_${d()}_${l(s)}_${l(i)}`;window.sessionStorage.setItem(P,JSON.stringify(U))}}async function I(E){const U=Date.now().toString(36)+Math.random().toString(36).substr(2),P={productId:d(),productSelection:E.productSelection||{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:E.printSelection||null,addonSelection:E.addonSelection||null,additionalInfo:E.additionalInfo||null,currentStep:"product",isDebugMode:!1,sessionId:U,estimateId:l(s)};if(typeof window<"u"){const T=`fixedEstimate_${d()}_${l(s)}_${l(i)}`,R=`simplePrint_${d()}_${l(s)}`,q=`detailedPrint_${d()}_${l(s)}`;window.sessionStorage.removeItem(R),window.sessionStorage.removeItem(q),window.sessionStorage.setItem(T,JSON.stringify(P)),E.simplePrintState&&(window.sessionStorage.setItem(R,JSON.stringify(E.simplePrintState)),console.log("[QnaProductSelector] simplePrint  :",E.simplePrintState)),E.detailedPrintState&&(window.sessionStorage.setItem(q,JSON.stringify(E.detailedPrintState)),console.log("[QnaProductSelector] detailedPrint  :",E.detailedPrintState))}hr.set(P),await new Promise(T=>setTimeout(T,50))}function N(){typeof window<"u"&&[`fixedEstimate_${d()}_${l(s)}_${l(i)}`,`simplePrint_${d()}_${l(s)}`,`detailedPrint_${d()}_${l(s)}`,`tab-state-${d()}`].forEach(U=>window.sessionStorage.removeItem(U))}function k(){var E,U,P;try{const T=fn(hr);if(!T.productSelection||T.productSelection.totalQuantity===0){alert("   .");return}const R=[],q=T.productSelection.quantityByVariant||{},j=T.productSelection.variantsByColor||{};for(const[D,ie]of Object.entries(q)){if(typeof ie!="object"||ie===null)continue;const me=j[D]||[];for(const[pe,oe]of Object.entries(ie))if(oe&&Number(oe)>0){const ye=me.find(we=>we.id===pe),Ne=((U=(E=ye==null?void 0:ye.prices)==null?void 0:E[0])==null?void 0:U.amount)||0;R.push({variantId:pe,variantName:(ye==null?void 0:ye.name)||(ye==null?void 0:ye.title)||`${D} - ${pe}`,quantity:Number(oe),price:Ne,optionValues:(ye==null?void 0:ye.optionValues)||{color:D}})}}const Ae=[],Ee=[],_e=[];if(T.printSelection){const D=T.printSelection.currentMethod;if(D==="simple"){const ie=`simplePrint_${d()}_${l(s)}`,me=window.sessionStorage.getItem(ie);if(me)try{const pe=JSON.parse(me);Array.isArray(pe)&&pe.forEach(oe=>{Ee.push({objectId:oe.objectId,printMethod:oe.printMethod,templateId:oe.templateId,selectedColors:oe.selectedColors,printConfig:oe.printConfig,uploads:oe.uploadedFiles||oe.uploads,nameSheet:oe.nameSheet,memo:oe.memo,price:oe.price||0})})}catch(pe){console.error("[QnaProductSelector]     :",pe)}}else if(D==="detailed"){const ie=`detailedPrint_${d()}_${l(s)}`,me=window.sessionStorage.getItem(ie);if(me)try{const pe=JSON.parse(me);Array.isArray(pe)&&pe.forEach(oe=>{var Ne,we,Fe;const ye=[];oe.parentTemplates&&Array.isArray(oe.parentTemplates)&&oe.parentTemplates.forEach(ue=>{ye.push({id:ue.id,name:ue.name||ue.id})}),(Ne=oe.template)!=null&&Ne.id&&ye.push({id:oe.template.id,name:oe.template.name||oe.template.id}),Ae.push({objectId:oe.objectId,printType:"detailed",templateId:(we=oe.template)==null?void 0:we.id,templateName:(Fe=oe.template)==null?void 0:Fe.name,parentTemplates:ye.length>0?ye:void 0,colors:oe.colors,uploadedFiles:oe.uploads,memo:oe.memo,price:oe.price||0})})}catch(pe){console.error("[QnaProductSelector]     :",pe)}}}if(console.log("[QnaProductSelector] currentState.addonSelection:",T.addonSelection),(P=T.addonSelection)!=null&&P.selectedAddons){const D=T.addonSelection.selectedAddons;console.log("[QnaProductSelector] selectedAddons entries:",Object.entries(D));for(const[ie,me]of Object.entries(D))if(console.log("[QnaProductSelector] Processing addon:",{addonId:ie,selection:me}),me&&typeof me=="object"){const pe=me;console.log("[QnaProductSelector] sel.productId:",pe.productId),pe.productId?(_e.push({addonId:ie,selectedProductId:pe.productId,selectedVariantId:pe.variantId,price:pe.price||0,quantity:pe.quantity||1}),console.log("[QnaProductSelector] Addon added to array:",_e[_e.length-1])):console.log("[QnaProductSelector] Addon skipped - no productId")}}else console.log("[QnaProductSelector] No selectedAddons in addonSelection");console.log("[QnaProductSelector] Final addons array:",_e);const Oe={productId:d(),productName:l(y),variants:R,prints:Ae,simplePrints:Ee,addons:_e,totalQuantity:T.productSelection.totalQuantity||0},G={productSelection:T.productSelection,printSelection:T.printSelection,addonSelection:T.addonSelection,additionalInfo:T.additionalInfo,simplePrintState:null,detailedPrintState:null};if(typeof window<"u"){const D=`simplePrint_${d()}_${l(s)}`,ie=window.sessionStorage.getItem(D);ie&&(G.simplePrintState=JSON.parse(ie));const me=`detailedPrint_${d()}_${l(s)}`,pe=window.sessionStorage.getItem(me);pe&&(G.detailedPrintState=JSON.parse(pe))}Hz(u(),d(),l(i),G),a("save",{idx:l(i),productData:Oe,isEdit:h()!==null}),W()}catch(T){console.error("[QnaProductSelector]  :",T),alert("   .")}}function W(){N(),hr.reset(),a("close")}function V(E){E.key==="Escape"&&W()}function H(E){E.target===l(m)&&W()}Qo(()=>{document.body.style.overflow="",N(),hr.reset()}),Jt(()=>Cn(u()),()=>{b(s,`qna_${u()||"new"}`)}),Jt(()=>(Cn(h()),o()),()=>{b(i,h()??o().nextIdx)}),Jt(()=>(l(m),Cn(A())),()=>{l(m)&&(A()?(document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(U=>{U instanceof HTMLElement&&(U.scrollTop=0)}),l(m).showModal(),_()):(document.body.style.overflow="",l(m).close()))}),to(),Rr();var J=Fq(),xe=w(J),M=w(xe),O=w(M),X=w(O),te=z(O,2),le=w(te);Hu(le,{class:"odz-w-5 odz-h-5"});var ne=z(M,2),Be=w(ne);{var Z=E=>{var U=Sq();L(E,U)},se=E=>{var U=kt(),P=ft(U);{var T=q=>{var j=Eq(),Ae=z(w(j),2),Ee=w(Ae);He(()=>Le(Ee,l(g))),L(q,j)},R=q=>{Mp(q,{get productId(){return d()},get estimateId(){return l(s)},get idx(){return l(i)},onSave:k})};ze(P,q=>{l(g)?q(T):q(R,!1)},!0)}L(E,U)};ze(Be,E=>{l(f)?E(Z):E(se,!1)})}var ce=z(ne,2),be=w(ce),x=z(be,2),F=w(x);ss(J,E=>b(m,E),()=>l(m)),He(()=>{Le(X,`${(h()!==null?" ":" ")??""} - ${(l(y)||d())??""}`),x.disabled=l(f),Le(F,h()!==null?"":"")}),at("click",te,W),at("click",be,W),at("click",x,k),at("keydown",J,V),at("click",J,H),L(n,J),Mr(),r()}var Uq=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-text-gray-500"><!> <p> ...</p></div>'),Qq=Y('<label class="odz-label"><span class="odz-text-xs odz-text-error">4  </span></label>'),Tq=Y('<label class="odz-label"><span class="odz-text-xs odz-text-error">  </span></label>'),Lq=Y('<div class="odz-mt-8 odz-p-6 odz-bg-amber-50/50 odz-border odz-border-amber-200 odz-rounded-2xl"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><!> <h4 class="odz-font-bold odz-text-amber-900">   </h4></div> <p class="odz-text-[13px] odz-text-amber-700 odz-mb-5 odz-leading-relaxed">     . (4~16)</p> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="password"><span class="odz-text-sm odz-font-bold odz-text-amber-900"> <span class="odz-text-error">*</span></span></label> <input type="password" id="password" placeholder=" " minlength="4" maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div> <div class="odz-form-control"><label class="odz-label" for="passwordConfirm"><span class="odz-text-sm odz-font-bold odz-text-amber-900">  <span class="odz-text-error">*</span></span></label> <input type="password" id="passwordConfirm" placeholder=" " maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div></div></div>'),Pq=Y('<div class="odz-mt-4"><!></div>'),kq=Y('<div class="odz-text-center odz-py-12 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><div class="odz-flex odz-justify-center odz-mb-3"><!></div> <p class="odz-text-slate-500">  .</p> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-mt-3 odz-text-indigo-600 hover:odz-bg-indigo-50 odz-rounded-lg"><!>  </button></div>'),Oq=Y("<!>  ...",1),Dq=Y("<!> ",1),Nq=Y('<div class="odz-space-y-6"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><h2 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-tracking-tight"> </h2></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="customerName"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="customerName" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-indigo-500 odz-transition-all"></div> <div class="odz-form-control"><label class="odz-label" for="customerPhone"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-flex odz-items-center odz-gap-2"><input type="text" placeholder="010" maxlength="3" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-indigo-500"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-indigo-500"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-indigo-500"></div></div> <div class="odz-form-control md:odz-col-span-2"><label class="odz-label" for="customerEmail"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-relative"><!> <input type="email" id="customerEmail" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-pl-11 odz-rounded-xl focus:odz-border-indigo-500"></div></div></div> <!></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-space-y-6"><div class="odz-form-control"><label class="odz-label" for="title"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="title" placeholder="  " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-indigo-500 odz-transition-all"></div> <div class="odz-form-control"><label class="odz-label" for="content"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <textarea id="content" placeholder="    " rows="8" class="odz-textarea odz-textarea-bordered odz-w-full odz-rounded-xl focus:odz-border-indigo-500 odz-transition-all odz-p-4"></textarea></div></div></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest">  <span class="odz-text-xs odz-font-normal odz-text-slate-400 odz-ml-1">()</span></h3></div> <button type="button" class="odz-btn odz-btn-sm odz-rounded-xl odz-btn-outline odz-border-slate-300 odz-text-slate-600 hover:odz-bg-slate-50 hover:odz-border-slate-400"><!>  </button></div> <!></div> <div class="odz-flex odz-justify-end odz-gap-4 odz-mt-10 odz-mb-10"><button type="button" class="odz-btn odz-btn-ghost odz-rounded-xl odz-px-8 hover:odz-bg-slate-100 odz-transition-all"></button> <button type="button" class="odz-btn odz-btn-primary odz-rounded-xl odz-px-10 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!></button></div></div>'),Mq=Y('<div class="odiz-app odz-max-w-4xl odz-mx-auto odz-p-4 odz-pb-20 svelte-fas30z"><!> <!> <!> <dialog class="cancel-confirm-dialog svelte-fas30z"><div class="cancel-confirm-box svelte-fas30z"><h3 class="odz-font-bold odz-text-lg"></h3> <p class="odz-py-4">    . ?</p> <div class="odz-flex odz-justify-end odz-gap-2"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error">, </button></div></div></dialog></div>');function Hq(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(hi,"$qnaStore",t),s=Ue(),i=Ue(),a=Ue(),A=Ue(),d=Ue();let c=vt(e,"mallType",8,""),u=vt(e,"customerId",8,"");vt(e,"sess",8,"");let h=vt(e,"shopId",8,""),f=vt(e,"qnaId",8,""),g=vt(e,"onSubmitSuccess",8,void 0),m=vt(e,"onCancel",8,void 0),y=Ue(""),_=Ue(""),C=Ue(""),I=Ue(""),N=Ue(""),k=Ue(""),W=Ue(""),V=Ue(!1),H=Ue(!1),J=Ue(!1),xe=Ue(!1),M=Ue(""),O=Ue(),X=null,te=Ue([]),le=Ue(""),ne=Ue("");Fn(async()=>{hi.reset(),f()&&await Be()}),Qo(()=>{hi.reset(),av(f()||null)});async function Be(){b(V,!0);try{if(X=await Pg(f()),X){if(b(y,X.title||""),b(_,X.content||""),b(C,X.customer_name||""),b(W,X.customer_email||""),X.customer_phone){const ue=X.customer_phone.split("-");ue.length===3&&(b(I,ue[0]),b(N,ue[1]),b(k,ue[2]))}const oe=await r2(f()),ye=await n2(f()),Ne=await s2(f()),we=await i2(f()),Fe=new Map;for(const ue of oe){const De=ue.idx||0;Fe.has(De)||Fe.set(De,{idx:De,productId:ue.product_id,productName:ue.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const Pe=Fe.get(De);Pe.variants.push({variantId:ue.variant_id,variantName:ue.variant_name,quantity:ue.quantity||1,optionValues:ue.option_values}),Pe.totalQuantity+=ue.quantity||1}for(const ue of ye){const De=ue.idx||0;if(Fe.has(De)){let Pe=[];if(ue.template_id)try{Pe=(await ju(ue.template_id)).map(ge=>({id:ge.id,name:ge.name,image_url:ge.image_url})),console.log("[QnaRegister] parentTemplates :",Pe)}catch(ee){console.warn("[QnaRegister] parentTemplates  :",ee)}let he=ue.title;if(!he&&ue.object_id)try{const ee=await p1(ue.object_id);ee&&(he=ee.title||ee.name,console.log("[QnaRegister] print area title :",he))}catch(ee){console.warn("[QnaRegister] print area  :",ee)}Fe.get(De).prints.push({objectId:ue.object_id,printType:ue.print_type,title:he,printMethod:ue.print_method,templateId:ue.template_id,colors:ue.colors,uploadedFiles:ue.uploaded_files,fileMetadata:ue.file_metadata,memo:ue.memo,parentTemplates:Pe})}}for(const ue of Ne){const De=ue.idx||0;Fe.has(De)&&Fe.get(De).simplePrints.push({objectId:ue.object_id,printMethod:ue.print_method,templateId:ue.template_id,selectedColors:ue.selected_colors,printConfig:ue.print_config,uploads:ue.uploads,nameSheet:ue.name_sheet,memo:ue.memo})}for(const ue of we){const De=ue.idx||0;Fe.has(De)&&Fe.get(De).addons.push({addonId:ue.addon_id,addonName:ue.addon_name||void 0,selectedProductId:ue.selected_product_id,selectedProductName:ue.selected_product_name||void 0,selectedVariantId:ue.selected_variant_id,selectedVariantName:ue.selected_variant_name||void 0,price:ue.price||0,quantity:ue.quantity||1})}b(te,Array.from(Fe.values())),hi.setState({qnaId:f(),title:l(y),content:l(_),customerName:l(C),customerPhone:l(d),customerEmail:l(W),products:l(te),nextIdx:l(te).length>0?Math.max(...l(te).map(ue=>ue.idx))+1:0})}}catch(oe){console.error("[QnaRegister] loadQna error:",oe),alert("   .")}finally{b(V,!1)}}function Z(){b(J,!0)}function se(oe){b(J,!1),b(M,oe),b(xe,!0)}function ce(oe){const{productData:ye,isEdit:Ne,idx:we}=oe.detail;ye&&(Ne&&we!==void 0?hi.updateProduct(we,ye):hi.addProduct(ye),b(te,[...o().products])),b(xe,!1),b(M,""),hi.clearEditing()}function be(oe){var Fe,ue;const{idx:ye,productId:Ne}=oe.detail,we=o().products.find(De=>De.idx===ye);if(we){const De={},Pe=[];for(const Qe of we.variants){const ot=((Fe=Qe.optionValues)==null?void 0:Fe.color)||((ue=Qe.optionValues)==null?void 0:ue.)||"default";De[ot]||(De[ot]={},Pe.push(ot)),De[ot][Qe.variantId]=Qe.quantity}const he={};for(const Qe of we.addons||[])he[Qe.addonId]={productId:Qe.selectedProductId,variantId:Qe.selectedVariantId,price:Qe.price||0,quantity:Qe.quantity||1};let ee=null,ge=null,Se=null;we.simplePrints&&we.simplePrints.length>0&&(ee=we.simplePrints.map(Qe=>({objectId:Qe.objectId,printMethod:Qe.printMethod,templateId:Qe.templateId,selectedColors:Qe.selectedColors,printConfig:Qe.printConfig,uploadedFiles:Qe.uploads,uploads:Qe.uploads,nameSheet:Qe.nameSheet,memo:Qe.memo,price:Qe.price||0})),Se={currentMethod:"simple"}),we.prints&&we.prints.length>0&&(ge=we.prints.map(Qe=>({objectId:Qe.objectId,title:Qe.title,template:Qe.templateId?{id:Qe.templateId,name:Qe.templateName||Qe.title}:null,parentTemplates:Qe.parentTemplates||[],colors:Qe.colors,uploads:Qe.uploadedFiles,memo:Qe.memo,price:Qe.price||0})),Se={currentMethod:"detailed"},console.log("[QnaRegister] detailedPrintState :",ge));const Me={productSelection:{selectedColors:Pe,quantityByVariant:De,totalQuantity:we.totalQuantity,variantsData:[]},printSelection:Se,addonSelection:{selectedAddons:he},additionalInfo:null,simplePrintState:ee,detailedPrintState:ge};Hz(o().qnaId,Ne,ye,Me),console.log("[QnaRegister]    sessionStorage :",{idx:ye,productId:Ne,sessionData:Me})}hi.setEditing(ye,Ne),b(M,Ne),b(xe,!0)}function x(oe){const{idx:ye}=oe.detail;hi.removeProduct(ye),b(te,[...o().products])}async function F(oe){if(oe&&(oe.stopPropagation(),oe.preventDefault()),!l(A)){l(s)&&!f()?l(le)?l(le).length<4?alert(" 4  ."):l(le)!==l(ne)?alert("  ."):alert(", ,    ."):alert("   ."):alert(", ,    .");return}b(H,!0);try{let ye;if(f()&&X?(ye=await t2(f(),{title:l(y),content:l(_),customer_name:l(C),customer_phone:l(d),customer_email:l(W)}),await M9(f()),await j9(f()),await X9(f()),await J9(f())):ye=await k9({shop_id:h(),customer_id:u()||void 0,customer_name:l(C),customer_phone:l(d),customer_email:l(W),title:l(y),content:l(_),password:l(s)?l(le):void 0}),!ye.id)throw new Error("  .");const Ne=o().products;if(Ne.length>0){const we=[];for(const Pe of Ne)for(const he of Pe.variants)we.push({idx:Pe.idx,product_id:Pe.productId,variant_id:he.variantId,quantity:he.quantity,price:he.price||0,product_name:Pe.productName,variant_name:he.variantName,option_values:he.optionValues});we.length>0&&await N9(ye.id,we);const Fe=[];for(const Pe of Ne)for(const he of Pe.prints||[])Fe.push({idx:Pe.idx,object_id:he.objectId,print_type:he.printType,title:he.title,print_method:he.printMethod,template_id:he.templateId,colors:he.colors,uploaded_files:he.uploadedFiles,file_metadata:he.fileMetadata,memo:he.memo,price:he.price||0});Fe.length>0&&await H9(ye.id,Fe);const ue=[];for(const Pe of Ne)for(const he of Pe.simplePrints||[])ue.push({idx:Pe.idx,object_id:he.objectId,print_method:he.printMethod,template_id:he.templateId,selected_colors:he.selectedColors,print_config:he.printConfig,uploads:he.uploads,name_sheet:he.nameSheet,memo:he.memo,price:he.price||0});ue.length>0&&await W9(ye.id,ue);const De=[];console.log("[QnaRegister] Processing addon save for products:",Ne.map(Pe=>{var he;return{idx:Pe.idx,productId:Pe.productId,addonsCount:((he=Pe.addons)==null?void 0:he.length)||0,addons:Pe.addons}}));for(const Pe of Ne){console.log("[QnaRegister] Product addons:",Pe.addons);for(const he of Pe.addons||[])De.push({idx:Pe.idx,addon_id:he.addonId,selected_product_id:he.selectedProductId,selected_variant_id:he.selectedVariantId,price:he.price||0,quantity:he.quantity||1})}console.log("[QnaRegister] addonsToSave:",De),De.length>0?(console.log("[QnaRegister] Saving addons to database..."),await Y9(ye.id,De),console.log("[QnaRegister] Addons saved successfully")):console.log("[QnaRegister] No addons to save"),await eq(ye.id)}if(av(f()||null),g()&&ye.id)g()(ye.id);else{const we=f()?`?qnaMode=detail&qnaId=${ye.id}`:"?qnaMode=list";window.location.href=window.location.pathname+we}}catch(ye){console.error("[QnaRegister] submitQna error:",ye),alert("  .  .")}finally{b(H,!1)}}function E(oe){oe.stopPropagation(),oe.preventDefault(),l(O)&&l(O).showModal()}function U(){l(O)&&l(O).close(),av(f()||null),m()?m()():window.location.href=window.location.pathname+"?qnaMode=list"}function P(){l(O)&&l(O).close()}Jt(()=>Cn(u()),()=>{b(s,!u())}),Jt(()=>(l(le),l(ne)),()=>{b(i,!l(le)||!l(ne)||l(le)===l(ne))}),Jt(()=>(l(s),Cn(f()),l(le),l(i)),()=>{b(a,!l(s)||!f()&&l(le).length>=4&&l(le).length<=16&&l(i))}),Jt(()=>(l(y),l(_),l(C),Cn(u()),Cn(f()),l(le),l(ne)),()=>{b(A,l(y).trim()&&l(_).trim()&&l(C).trim()&&(u()||f()||l(le).trim()&&l(le)===l(ne)&&l(le).length>=4))}),Jt(()=>(l(I),l(N),l(k)),()=>{b(d,l(I)&&l(N)&&l(k)?`${l(I)}-${l(N)}-${l(k)}`:"")}),to(),Rr();var T=Mq(),R=w(T);{var q=oe=>{var ye=Uq(),Ne=w(ye);xd(Ne,{class:"odz-w-8 odz-h-8 odz-animate-spin odz-mb-2"}),L(oe,ye)},j=oe=>{var ye=Nq(),Ne=w(ye),we=w(Ne),Fe=w(we),ue=z(Ne,2),De=z(w(ue),2),Pe=w(De),he=z(w(Pe),2),ee=z(Pe,2),ge=z(w(ee),2),Se=w(ge),Me=z(Se,4),Qe=z(Me,4),ot=z(ee,2),Ye=z(w(ot),2),Ce=w(Ye);sE(Ce,{class:"odz-w-4 odz-h-4 odz-absolute odz-left-4 odz-top-1/2 -odz-translate-y-1/2 odz-text-slate-400"});var de=z(Ce,2),Te=z(De,2);{var qe=zt=>{var Mt=Lq(),jt=w(Mt),Ct=w(jt);oE(Ct,{class:"odz-w-5 odz-h-5 odz-text-amber-600"});var Et=z(jt,4),Nt=w(Et),Zt=z(w(Nt),2),nr=z(Zt,2);{var ir=lr=>{var cr=Qq();L(lr,cr)};ze(nr,lr=>{l(le)&&l(le).length<4&&lr(ir)})}var sr=z(Nt,2),dr=z(w(sr),2),Jr=z(dr,2);{var sn=lr=>{var cr=Tq();L(lr,cr)};ze(Jr,lr=>{l(ne)&&!l(i)&&lr(sn)})}He(()=>{fA(Zt,"odz-input-error",l(le)&&l(le).length<4),fA(dr,"odz-input-error",l(ne)&&!l(i))}),yr(Zt,()=>l(le),lr=>b(le,lr)),yr(dr,()=>l(ne),lr=>b(ne,lr)),L(zt,Mt)};ze(Te,zt=>{l(s)&&!f()&&zt(qe)})}var je=z(ue,2),Re=z(w(je),2),Ve=w(Re),At=z(w(Ve),2),Ke=z(Ve,2),nt=z(w(Ke),2),ht=z(je,2),mt=w(ht),St=z(w(mt),2),st=w(St);yu(st,{class:"odz-w-4 odz-h-4 odz-mr-1"});var tt=z(mt,2);{var Ft=zt=>{var Mt=Pq(),jt=w(Mt);qz(jt,{get products(){return l(te)},$$events:{edit:be,delete:x}}),L(zt,Mt)},xt=zt=>{var Mt=kq(),jt=w(Mt),Ct=w(jt);Ev(Ct,{class:"odz-w-10 odz-h-10 odz-text-slate-300"});var Et=z(jt,4),Nt=w(Et);yu(Nt,{class:"odz-w-4 odz-h-4 odz-mr-1"}),at("click",Et,Z),L(zt,Mt)};ze(tt,zt=>{l(te).length>0?zt(Ft):zt(xt,!1)})}var Ot=z(ht,2),Ze=w(Ot),wt=z(Ze,2),gt=w(wt);{var Dt=zt=>{var Mt=Oq(),jt=ft(Mt);xd(jt,{class:"odz-w-5 odz-h-5 odz-animate-spin odz-mr-2"}),L(zt,Mt)},qt=zt=>{var Mt=Dq(),jt=ft(Mt);lE(jt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var Ct=z(jt);He(()=>Le(Ct,` ${(f()?" ":" ")??""}`)),L(zt,Mt)};ze(gt,zt=>{l(H)?zt(Dt):zt(qt,!1)})}He(()=>{Le(Fe,f()?" ":" "),wt.disabled=!l(A)||l(H)}),yr(he,()=>l(C),zt=>b(C,zt)),yr(Se,()=>l(I),zt=>b(I,zt)),yr(Me,()=>l(N),zt=>b(N,zt)),yr(Qe,()=>l(k),zt=>b(k,zt)),yr(de,()=>l(W),zt=>b(W,zt)),yr(At,()=>l(y),zt=>b(y,zt)),yr(nt,()=>l(_),zt=>b(_,zt)),at("click",St,Z),at("click",Ze,zt=>E(zt)),at("click",wt,zt=>F(zt)),L(oe,ye)};ze(R,oe=>{l(V)?oe(q):oe(j,!1)})}var Ae=z(R,2);{var Ee=oe=>{W1(oe,{addProduct:se,get productType(){return c()},excludeNoProcess:!0,get isProductSearchOpen(){return l(J)},set isProductSearchOpen(ye){b(J,ye)},$$legacy:!0})};ze(Ae,oe=>{l(J)&&oe(Ee)})}var _e=z(Ae,2);{var Oe=oe=>{const ye=dt(()=>f()||null);Iq(oe,{get isOpen(){return l(xe)},get productId(){return l(M)},get shopId(){return h()},get mallType(){return c()},get qnaId(){return l(ye)},get editingIdx(){return o().editingIdx},$$events:{save:ce,close:()=>{b(xe,!1),b(M,""),hi.clearEditing()}}})};ze(_e,oe=>{l(xe)&&oe(Oe)})}var G=z(_e,2),D=w(G),ie=z(w(D),4),me=w(ie),pe=z(me,2);ss(G,oe=>b(O,oe),()=>l(O)),at("click",me,P),at("click",pe,U),at("click",G,F_(P)),L(n,T),Mr(),r()}var jq=Y(' <span class="odz-font-mono odz-font-medium odz-text-primary"> </span>',1),Rq=Y('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),qq=Y("<!>  ...",1),Kq=Y('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-sm"><button type="button" class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"><!></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-flex odz-items-center odz-gap-2"><!>  </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-4"><!>  .</p> <div class="odz-form-control odz-mb-4"><input type="password" placeholder=" (4~16)" maxlength="16" class="odz-input odz-input-bordered odz-w-full"> <!></div> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div></div>');function $q(n,e){Nr(e,!1);let t=vt(e,"isOpen",8,!1),r=vt(e,"qnaId",8,""),o=vt(e,"inquiryNo",8,"");const s=Yp();let i=Ue(""),a=Ue(!1),A=Ue("");async function d(){if(!l(i).trim()){b(A," .");return}if(l(i).length<4){b(A," 4  .");return}b(a,!0),b(A,""),s("verify",{qnaId:r(),password:l(i)})}function c(y,_){b(a,!1),!y&&_&&b(A,_)}function u(){b(i,""),b(A,""),b(a,!1),s("cancel")}function h(y){y.key==="Enter"&&!l(a)?d():y.key==="Escape"&&u()}Jt(()=>Cn(t()),()=>{t()&&(b(i,""),b(A,""),b(a,!1))}),to(),Rr();var f=kt(),g=ft(f);{var m=y=>{var _=Kq(),C=w(_),I=w(C),N=w(I);Hu(N,{class:"odz-w-4 odz-h-4"});var k=z(I,2),W=w(k);r1(W,{class:"odz-w-5 odz-h-5 odz-text-warning"});var V=z(k,2),H=w(V);{var J=ce=>{var be=jq(),x=z(ft(be)),F=w(x);He(()=>Le(F,o())),L(ce,be)};ze(H,ce=>{o()&&ce(J)})}var xe=z(V,2),M=w(xe),O=z(M,2);{var X=ce=>{var be=Rq(),x=w(be),F=w(x);He(()=>Le(F,l(A))),L(ce,be)};ze(O,ce=>{l(A)&&ce(X)})}var te=z(xe,2),le=w(te),ne=z(le,2),Be=w(ne);{var Z=ce=>{var be=qq(),x=ft(be);xd(x,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),L(ce,be)},se=ce=>{var be=en("");L(ce,be)};ze(Be,ce=>{l(a)?ce(Z):ce(se,!1)})}He(ce=>{I.disabled=l(a),M.disabled=l(a),fA(M,"odz-input-error",l(A)),le.disabled=l(a),ne.disabled=ce},[()=>l(a)||!l(i).trim()],dt),at("click",I,u),yr(M,()=>l(i),ce=>b(i,ce)),at("keydown",M,h),at("click",le,u),at("click",ne,d),at("click",_,F_(u)),L(y,_)};ze(g,y=>{t()&&y(m)})}return L(n,f),S_(e,"setVerifyResult",c),Mr({setVerifyResult:c})}var Vq=Y('<button class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!>  </button>'),Gq=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),Wq=Y('<div class="odz-alert odz-alert-error odz-shadow-sm"><!> <span> </span> <button class="odz-btn odz-btn-sm odz-btn-ghost"> </button></div>'),Xq=Y('<button class="odz-btn odz-btn-primary odz-btn-sm odz-mt-4 odz-gap-1"><!>   </button>'),Yq=Y('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">  </p> <!>',1),Jq=Y('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   </p>',1),Zq=Y('<div class="odz-text-center odz-py-16 odz-bg-gray-50 odz-rounded-xl odz-border odz-border-dashed odz-border-gray-300"><!> <!></div>'),eK=Y('<span class="odz-badge odz-badge-xs odz-badge-info"></span>'),tK=Y('<tr class="odz-cursor-pointer hover:odz-bg-gray-50 odz-transition-colors"><td class="odz-text-center"><span class="odz-inline-flex odz-items-center odz-gap-1 odz-font-mono odz-text-xs odz-text-gray-500"> <!></span></td><td class="odz-text-center"><span><!> </span></td><td><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-font-medium odz-text-gray-900 odz-truncate odz-max-w-xs hover:odz-text-primary odz-transition-colors"> </span> <!></div></td><td class="odz-text-center odz-text-sm odz-text-gray-600 odz-hidden sm:odz-table-cell"> </td><td class="odz-text-center odz-text-xs odz-text-gray-400 odz-hidden md:odz-table-cell"> </td></tr>'),rK=Y('<span class="odz-text-gray-300"> </span>'),nK=Y('<div class="odz-bg-white odz-rounded-xl odz-border odz-border-gray-200 odz-overflow-hidden"><table class="odz-table odz-table-sm odz-w-full"><thead><tr class="odz-bg-gray-50 odz-border-b odz-border-gray-200"><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-20 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-left odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden sm:odz-table-cell"></th><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden md:odz-table-cell"></th></tr></thead><tbody class="odz-divide-y odz-divide-gray-100"></tbody></table></div> <div class="odz-text-center odz-text-xs odz-text-gray-400 odz-pt-2"> <!></div>',1),oK=Y('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2> <!></div> <div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2"><div class="odz-relative odz-flex-1"><!> <input type="text" placeholder=", ,  ..." class="odz-input odz-input-bordered odz-input-sm odz-w-full odz-pl-9"></div> <select class="odz-select odz-select-bordered odz-select-sm odz-w-full sm:odz-w-32"><option></option><option></option><option></option><option></option></select></div> <!></div> <!>',1);function sK(n,e){Nr(e,!1);let t=vt(e,"shopId",8),r=vt(e,"customerId",8,void 0),o=vt(e,"onSelectQna",8,void 0),s=vt(e,"onCreateNew",8,void 0),i=Ue([]),a=Ue([]),A=Ue(!0),d=Ue(""),c=Ue(""),u=Ue("all"),h=null,f=Ue(!1),g=Ue(null),m=Ue();Fn(async()=>{await y(),_()}),Qo(()=>{h&&o2(h)});async function y(){try{b(A,!0),b(d,""),b(i,await O9(t(),r()))}catch(R){console.error("[QnaList]   :",R),b(d,"     .")}finally{b(A,!1)}}function _(){h=V9(t(),async R=>{console.log("[QnaList]  :",R),await y()})}function C(R){switch(R){case"pending":return{label:"",class:"odz-badge-warning",icon:Ap};case"answered":return{label:"",class:"odz-badge-success",icon:t1};case"closed":return{label:"",class:"odz-badge-neutral",icon:wu};default:return{label:"",class:"odz-badge-ghost",icon:Ap}}}function I(R){return R?new Date(R).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}async function N(R){if(R.id)try{const q=await T9(R.id,r());q.canAccess?o()&&o()(R.id):q.requiresPassword?(b(g,R),b(f,!0)):alert(q.message||"  .")}catch(q){console.error("[QnaList]    :",q),alert("     .")}}async function k(R){const{qnaId:q,password:j}=R.detail;try{const Ae=await L9(q,j);Ae.canAccess?(b(f,!1),b(g,null),o()&&o()(q)):l(m)&&l(m).setVerifyResult(!1,Ae.message||"  .")}catch(Ae){console.error("[QnaList]   :",Ae),l(m)&&l(m).setVerifyResult(!1,"    .")}}function W(){b(f,!1),b(g,null)}function V(){s()&&s()()}Jt(()=>(l(i),l(c),l(u)),()=>{let R=l(i);if(l(c).trim()){const q=l(c).toLowerCase();R=R.filter(j=>{var Ae,Ee,_e;return((Ae=j.title)==null?void 0:Ae.toLowerCase().includes(q))||((Ee=j.customer_name)==null?void 0:Ee.toLowerCase().includes(q))||((_e=j.inquiry_no)==null?void 0:_e.toLowerCase().includes(q))})}l(u)!=="all"&&(R=R.filter(q=>q.status===l(u))),b(a,R)}),to(),Rr();var H=oK(),J=ft(H),xe=w(J),M=z(w(xe),2);{var O=R=>{var q=Vq(),j=w(q);yu(j,{class:"odz-w-4 odz-h-4"}),at("click",q,V),L(R,q)};ze(M,R=>{s()&&R(O)})}var X=z(xe,2),te=w(X),le=w(te);Z_(le,{class:"odz-absolute odz-left-3 odz-top-1/2 odz--translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var ne=z(le,2),Be=z(te,2);He(()=>{l(u),sp(()=>{})});var Z=w(Be);Z.value=(Z.__value="all")==null?"":"all";var se=z(Z);se.value=(se.__value="pending")==null?"":"pending";var ce=z(se);ce.value=(ce.__value="answered")==null?"":"answered";var be=z(ce);be.value=(be.__value="closed")==null?"":"closed";var x=z(X,2);{var F=R=>{var q=Gq();L(R,q)},E=R=>{var q=kt(),j=ft(q);{var Ae=_e=>{var Oe=Wq(),G=w(Oe);wu(G,{class:"odz-w-5 odz-h-5"});var D=z(G,2),ie=w(D),me=z(D,2);He(()=>Le(ie,l(d))),at("click",me,y),L(_e,Oe)},Ee=_e=>{var Oe=kt(),G=ft(Oe);{var D=me=>{var pe=Zq(),oe=w(pe);iE(oe,{class:"odz-w-12 odz-h-12 odz-mx-auto odz-text-gray-400 odz-mb-4"});var ye=z(oe,2);{var Ne=Fe=>{var ue=Yq(),De=z(ft(ue),4);{var Pe=he=>{var ee=Xq(),ge=w(ee);yu(ge,{class:"odz-w-4 odz-h-4"}),at("click",ee,V),L(he,ee)};ze(De,he=>{s()&&he(Pe)})}L(Fe,ue)},we=Fe=>{var ue=Jq();L(Fe,ue)};ze(ye,Fe=>{l(i).length===0?Fe(Ne):Fe(we,!1)})}L(me,pe)},ie=me=>{var pe=nK(),oe=ft(pe),ye=w(oe),Ne=z(w(ye));Yt(Ne,5,()=>l(a),Pe=>Pe.id,(Pe,he)=>{var ee=tK();const ge=dt(()=>C(l(he).status));var Se=w(ee),Me=w(Se),Qe=w(Me),ot=z(Qe);{var Ye=tt=>{r1(tt,{class:"odz-w-3 odz-h-3 odz-text-amber-500",title:" "})};ze(ot,tt=>{l(he).customer_id||tt(Ye)})}var Ce=z(Se),de=w(Ce),Te=w(de);Gm(Te,()=>l(ge).icon,(tt,Ft)=>{Ft(tt,{class:"odz-w-3 odz-h-3"})});var qe=z(Te),je=z(Ce),Re=w(je),Ve=w(Re),At=w(Ve),Ke=z(Ve,2);{var nt=tt=>{var Ft=eK();L(tt,Ft)};ze(Ke,tt=>{l(he).converted_estimate_id&&tt(nt)})}var ht=z(je),mt=w(ht),St=z(ht),st=w(St);He(tt=>{Le(Qe,`${l(he).inquiry_no??""} `),Cr(de,`odz-badge odz-badge-sm odz-gap-0.5 odz-whitespace-nowrap ${l(ge).class??""}`),Le(qe,` ${l(ge).label??""}`),Le(At,l(he).title||"( )"),Le(mt,l(he).customer_name),Le(st,tt)},[()=>I(l(he).created_at)],dt),at("click",ee,()=>N(l(he))),L(Pe,ee)});var we=z(oe,2),Fe=w(we),ue=z(Fe);{var De=Pe=>{var he=rK(),ee=w(he);He(()=>Le(ee,`/  ${l(i).length??""}`)),L(Pe,he)};ze(ue,Pe=>{l(a).length!==l(i).length&&Pe(De)})}He(()=>Le(Fe,` ${l(a).length??""} `)),L(me,pe)};ze(G,me=>{l(a).length===0?me(D):me(ie,!1)},!0)}L(_e,Oe)};ze(j,_e=>{l(d)?_e(Ae):_e(Ee,!1)},!0)}L(R,q)};ze(x,R=>{l(A)?R(F):R(E,!1)})}var U=z(J,2);const P=dt(()=>{var R;return((R=l(g))==null?void 0:R.id)||""}),T=dt(()=>{var R;return((R=l(g))==null?void 0:R.inquiry_no)||""});ss($q(U,{get qnaId(){return l(P)},get inquiryNo(){return l(T)},get isOpen(){return l(f)},set isOpen(R){b(f,R)},$$events:{verify:k,cancel:W},$$legacy:!0}),R=>b(m,R),()=>l(m)),yr(ne,()=>l(c),R=>b(c,R)),ip(Be,()=>l(u),R=>b(u,R)),L(n,H),Mr()}var iK=Y('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-dots odz-loading-md odz-text-gray-400"></div></div>'),aK=Y('<div class="odz-text-center odz-text-red-500 odz-py-4"> </div>'),AK=Y('<div class="odz-text-center odz-text-gray-500 odz-py-8"><p>  .</p> <p class="odz-text-sm odz-mt-1">   .</p></div>'),lK=Y('<div class="odz-flex odz-justify-center"><div class="odz-px-3.5 odz-py-2 odz-bg-gray-200 odz-text-gray-600 odz-text-sm odz-rounded-full"> </div></div>'),dK=Y("<button><!></button>"),cK=Y('<div><div class="odz-flex-shrink-0"><div><!></div></div> <div><span class="odz-text-sm odz-text-gray-500 odz-mb-1"> </span> <div class="odz-group odz-relative"><div> </div> <!></div> <span class="odz-text-xs odz-text-gray-400 odz-mt-1"> </span></div></div>'),uK=Y('<span class="odz-loading odz-loading-spinner odz-loading-sm"></span>'),hK=Y('<div class="odz-flex odz-flex-col odz-h-full odz-min-h-[300px]"><div class="odz-flex-1 odz-overflow-y-auto odz-space-y-4 odz-p-5 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-slate-100 odz-max-h-[500px] odz-shadow-inner"><!></div> <div class="odz-mt-4 odz-flex odz-gap-2"><textarea placeholder=" ..." class="odz-textarea odz-textarea-bordered odz-flex-1 odz-resize-none odz-h-14 odz-rounded-2xl odz-bg-white odz-border-slate-200 focus:odz-border-indigo-500 odz-shadow-sm odz-p-4"></textarea> <button class="odz-btn odz-btn-primary odz-rounded-2xl odz-h-14 odz-w-14 odz-p-0 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!></button></div></div>');function fK(n,e){Nr(e,!1);let t=vt(e,"qnaId",8),r=vt(e,"isManager",8,!1),o=vt(e,"customerName",8,""),s=Ue([]),i=Ue(""),a=Ue(!0),A=Ue(!1),d=Ue(""),c=null,u=Ue();Fn(async()=>{await h(),f()}),Qo(()=>{c&&o2(c)}),V4(()=>{g()});async function h(){try{b(a,!0),b(d,""),b(s,await R9(t()))}catch(le){console.error("[QnaComments]  :",le),b(d,"    .")}finally{b(a,!1)}}function f(){c=G9(t(),async le=>{console.log("[QnaComments]  :",le),await h()})}function g(){l(u)&&fr(u,l(u).scrollTop=l(u).scrollHeight)}async function m(){if(l(i).trim())try{b(A,!0);const le=r()?"manager":"customer",ne=r()?"":o();await Rz(t(),{writer:le,writer_name:ne,content:l(i).trim()}),b(i,"")}catch(le){console.error("[QnaComments]  :",le),alert("    .")}finally{b(A,!1)}}async function y(le){if(confirm("  ?"))try{await q9(le),b(s,l(s).filter(ne=>ne.id!==le))}catch(ne){console.error("[QnaComments]  :",ne),alert("    .")}}function _(le){le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),m())}function C(le){switch(r()?le.writer:le.writer,le.writer){case"customer":return{icon:ww,class:"odz-bg-blue-100 odz-text-blue-600",isMe:!r()};case"manager":return{icon:hE,class:"odz-bg-green-100 odz-text-green-600",isMe:r()};case"system":return{icon:tE,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1};default:return{icon:ww,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1}}}function I(le){if(!le)return"";const ne=new Date(le),Be=new Date;return ne.toDateString()===Be.toDateString()?ne.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):ne.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}Rr();var N=hK(),k=w(N),W=w(k);{var V=le=>{var ne=iK();L(le,ne)},H=le=>{var ne=kt(),Be=ft(ne);{var Z=ce=>{var be=aK(),x=w(be);He(()=>Le(x,l(d))),L(ce,be)},se=ce=>{var be=kt(),x=ft(be);{var F=U=>{var P=AK();L(U,P)},E=U=>{var P=kt(),T=ft(P);Yt(T,1,()=>l(s),R=>R.id,(R,q)=>{var j=kt();const Ae=dt(()=>C(l(q)));var Ee=ft(j);{var _e=G=>{var D=lK(),ie=w(D),me=w(ie);He(()=>Le(me,l(q).content)),L(G,D)},Oe=G=>{var D=cK(),ie=w(D),me=w(ie),pe=w(me);Gm(pe,()=>l(Ae).icon,(ge,Se)=>{Se(ge,{class:"odz-w-4 odz-h-4"})});var oe=z(ie,2),ye=w(oe),Ne=w(ye),we=z(ye,2),Fe=w(we),ue=w(Fe),De=z(Fe,2);{var Pe=ge=>{var Se=dK(),Me=w(Se);n1(Me,{class:"odz-w-3.5 odz-h-3.5 odz-text-gray-400 hover:odz-text-red-500"}),He(()=>Cr(Se,`odz-absolute odz-top-0 ${(l(Ae).isMe?"odz-left-0 -odz-translate-x-full odz-pr-1":"odz-right-0 odz-translate-x-full odz-pl-1")??""} odz-opacity-0 group-hover:odz-opacity-100 odz-transition-opacity`)),at("click",Se,()=>y(l(q).id)),L(ge,Se)};ze(De,ge=>{(l(Ae).isMe||r())&&l(q).writer!=="system"&&ge(Pe)})}var he=z(we,2),ee=w(he);He(ge=>{Cr(D,`odz-flex odz-gap-2 ${(l(Ae).isMe?"odz-flex-row-reverse":"")??""}`),Cr(me,`odz-w-8 odz-h-8 odz-rounded-full ${l(Ae).class??""} odz-flex odz-items-center odz-justify-center`),Cr(oe,`odz-flex odz-flex-col odz-max-w-[70%] ${(l(Ae).isMe?"odz-items-end":"odz-items-start")??""}`),Le(Ne,l(q).writer_name||l(q).writer),Cr(Fe,`odz-px-4 odz-py-2.5 odz-rounded-2xl odz-text-base odz-whitespace-pre-wrap odz-shadow-sm ${(l(Ae).isMe?"odz-bg-indigo-600 odz-text-white":"odz-bg-white odz-text-slate-800 odz-border odz-border-slate-200")??""}`),Le(ue,l(q).content),Le(ee,ge)},[()=>I(l(q).created_at)],dt),L(G,D)};ze(Ee,G=>{l(q).writer==="system"?G(_e):G(Oe,!1)})}L(R,j)}),L(U,P)};ze(x,U=>{l(s).length===0?U(F):U(E,!1)},!0)}L(ce,be)};ze(Be,ce=>{l(d)?ce(Z):ce(se,!1)},!0)}L(le,ne)};ze(W,le=>{l(a)?le(V):le(H,!1)})}ss(k,le=>b(u,le),()=>l(u));var J=z(k,2),xe=w(J),M=z(xe,2),O=w(M);{var X=le=>{var ne=uK();L(le,ne)},te=le=>{dE(le,{class:"odz-w-5 odz-h-5"})};ze(O,le=>{l(A)?le(X):le(te,!1)})}He(le=>{xe.disabled=l(A),M.disabled=le},[()=>l(A)||!l(i).trim()],dt),yr(xe,()=>l(i),le=>b(i,le)),at("keydown",xe,_),at("click",M,m),L(n,N),Mr()}var pK=Y('<button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-transition-transform hover:odz-rotate-90" title=""><!></button>'),gK=Y('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-20 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-indigo-600"></div> <span class="odz-text-gray-500 odz-animate-pulse">   ...</span></div>'),vK=Y('<div class="odz-alert odz-alert-error odz-shadow-sm odz-rounded-2xl"><!> <span> </span></div>'),mK=Y('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3.5 odz-py-1.5 odz-rounded-full odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-semibold odz-border odz-border-indigo-100 odz-shadow-sm"><!> </span>'),wK=Y('<button class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),yK=Y('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),bK=Y('<button class="odz-btn odz-btn-sm odz-btn-primary odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!> </button>'),_K=Y('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),BK=Y('<div class="odz-dropdown odz-dropdown-end"><button tabindex="0" role="button" class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button> <ul tabindex="0" class="odz-dropdown-content odz-z-[1] odz-menu odz-p-2 odz-shadow-xl odz-bg-base-100 odz-rounded-2xl odz-w-32 odz-mt-2 odz-border odz-border-gray-100 odz-backdrop-blur-sm"><li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li></ul></div> <!> <button class="odz-btn odz-btn-sm odz-btn-ghost odz-text-error odz-btn-square odz-rounded-xl hover:odz-bg-error/10 odz-transition-colors" title=""><!></button>',1),xK=Y('<button type="button" class="odz-w-full odz-text-left odz-bg-slate-50 odz-rounded-2xl odz-p-4 odz-border odz-border-slate-100 hover:odz-bg-white hover:odz-shadow-xl hover:odz-border-indigo-200 odz-transition-all odz-cursor-pointer odz-group"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-p-1.5 odz-rounded-lg odz-bg-white odz-border odz-border-slate-200 group-hover:odz-border-indigo-100 group-hover:odz-bg-indigo-50 odz-transition-colors"><!></div> <span class="odz-font-mono odz-text-sm odz-font-bold odz-text-slate-900"> </span></div> <span> </span></div> <div class="odz-flex odz-items-end odz-justify-between odz-gap-4"><p class="odz-text-sm odz-font-semibold odz-text-slate-700 odz-line-clamp-1 odz-flex-1"> </p> <span class="odz-text-[11px] odz-text-slate-400 odz-whitespace-nowrap"> </span></div></button>'),zK=Y('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-indigo-600 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><!>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-indigo-100 odz-text-indigo-800 odz-text-sm odz-font-bold"> </span></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-3"></div></div>'),CK=Y('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-slate-100 odz-text-slate-600 odz-text-sm odz-font-bold"> </span></div> <!></div>'),SK=Y('<div class="odz-relative odz-overflow-hidden odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-absolute odz-top-0 odz-right-0 odz-w-64 odz-h-64 odz-bg-gradient-to-bl odz-from-indigo-50/50 odz-to-transparent -odz-z-10 odz-rounded-full -odz-mr-20 -odz-mt-20"></div> <div class="odz-flex odz-flex-wrap odz-items-start odz-justify-between odz-gap-6"><div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><span class="odz-px-2.5 odz-py-1 odz-bg-slate-50 odz-rounded-lg odz-text-xs odz-font-mono odz-font-semibold odz-text-slate-600 odz-border odz-border-slate-200 odz-shadow-sm"> </span> <span><!> </span> <!></div> <h3 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-leading-tight"> </h3></div> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><!> <!></div></div> <div class="odz-divider odz-my-5"></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-6 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-2xl odz-border odz-border-slate-100"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900 odz-break-all"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900"> </p></div></div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-4 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <div class="odz-prose odz-prose-lg odz-max-w-none odz-text-slate-900 odz-whitespace-pre-wrap odz-leading-relaxed odz-bg-slate-50/50 odz-p-8 odz-rounded-2xl odz-border odz-text-base odz-border-slate-100"> </div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-5 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> </h4> <!></div>',1),EK=Y('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><div class="odz-flex odz-items-center odz-gap-3"><h2 class="odz-text-2xl odz-font-bold odz-text-slate-900 odz-tracking-tight"> </h2></div> <!></div> <!></div>');function FK(n,e){Nr(e,!1);const t=Ue();let r=vt(e,"qnaId",8);vt(e,"shopId",8);let o=vt(e,"isManager",8,!1),s=vt(e,"onBack",8,void 0),i=vt(e,"onEdit",8,void 0),a=vt(e,"onConvertToEstimate",8,void 0),A=vt(e,"onViewEstimate",8,void 0),d=Ue(null),c=[],u=[],h=Ue([]),f=Ue([]),g=Ue(!0),m=Ue(""),y=Ue(!1),_=Ue(!1),C=null;Fn(async()=>{await I(),N()}),Qo(()=>{C&&o2(C)});async function I(){try{if(b(g,!0),b(m,""),b(d,await Pg(r())),!l(d)){b(m,"   .");return}const[x,F,E,U]=await Promise.all([r2(r()),n2(r()),s2(r()),i2(r())]);c=x,u=F,b(h,k(c,u,E,U));try{b(f,await tq(r()))}catch(P){console.warn("[QnaDetail]    :",P),b(f,[])}}catch(x){console.error("[QnaDetail]  :",x),b(m,"     .")}finally{b(g,!1)}}function N(){C=$9(r(),async x=>{console.log("[QnaDetail]  :",x),await I()})}function k(x,F,E,U){const P=new Map;return x.forEach(T=>{const R=T.idx??0;P.has(R)||P.set(R,{idx:R,productId:T.product_id,productName:T.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const q=P.get(R);q.variants.push({variantId:T.variant_id||"",variantName:T.variant_name,quantity:T.quantity||0,optionValues:T.option_values}),q.totalQuantity+=T.quantity||0}),F.forEach(T=>{const R=T.idx??0,q=P.get(R);q&&q.prints.push({objectId:T.object_id||"",printType:T.print_type||"none",title:T.title,printMethod:T.print_method,templateId:T.template_id,colors:T.colors,uploadedFiles:T.uploaded_files,fileMetadata:T.file_metadata,memo:T.memo})}),E.forEach(T=>{const R=T.idx??0,q=P.get(R);q&&q.simplePrints&&q.simplePrints.push({objectId:T.object_id||"",printMethod:T.print_method,templateId:T.template_id,selectedColors:T.selected_colors,printConfig:T.print_config,uploads:T.uploads,nameSheet:T.name_sheet,memo:T.memo,price:T.price})}),U.forEach(T=>{const R=T.idx??0,q=P.get(R);q&&q.addons&&q.addons.push({addonId:T.addon_id,addonName:T.addon_name||"",selectedProductId:T.selected_product_id,selectedProductName:T.selected_product_name||"",selectedVariantId:T.selected_variant_id,selectedVariantName:T.selected_variant_name||"",quantity:T.quantity||0})}),Array.from(P.values())}function W(x){switch(x){case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200",icon:Ap};case"answered":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200",icon:t1};case"closed":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300",icon:wu};default:return{label:"",class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200",icon:Ap}}}function V(x){return x?new Date(x).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function H(x){switch(x){case"temp":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200"};case"progress":return{label:"",class:"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200"};case"completed":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200"};case"canceled":return{label:"",class:"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200"};case"hold":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};default:return{label:x,class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}}function J(){s()&&s()()}function xe(x){A()?A()(x):window.location.href=`/?mode=register&estimateId=${x}&returnTo=qna`}function M(){var x;i()&&((x=l(d))!=null&&x.id)&&i()(l(d).id)}async function O(){var x;if((x=l(d))!=null&&x.id&&confirm("  ?     ."))try{b(_,!0),await D9(l(d).id),alert(" ."),s()&&s()()}catch(F){console.error("[QnaDetail]  :",F),alert("   .")}finally{b(_,!1)}}async function X(){var x;if((x=l(d))!=null&&x.id&&confirm("   ?"))try{b(y,!0);const F=await K9(l(d).id);alert(" ."),a()&&a()(F)}catch(F){console.error("[QnaDetail]   :",F),alert("    .")}finally{b(y,!1)}}async function te(x){var F;if((F=l(d))!=null&&F.id)try{await jz(l(d).id,x),b(d,{...l(d),status:x})}catch(E){console.error("[QnaDetail]   :",E),alert("    .")}}Jt(()=>l(d),()=>{b(t,l(d)&&((l(d).product_amount??0)>0||(l(d).print_amount??0)>0||(l(d).addon_amount??0)>0||(l(d).additional_amount??0)>0))}),to(),Rr();var le=EK(),ne=w(le),Be=z(w(ne),2);{var Z=x=>{var F=pK(),E=w(F);Hu(E,{class:"odz-w-5 odz-h-5"}),at("click",F,J),L(x,F)};ze(Be,x=>{s()&&x(Z)})}var se=z(ne,2);{var ce=x=>{var F=gK();L(x,F)},be=x=>{var F=kt(),E=ft(F);{var U=T=>{var R=vK(),q=w(R);wu(q,{class:"odz-w-6 odz-h-6"});var j=z(q,2),Ae=w(j);He(()=>Le(Ae,l(m))),L(T,R)},P=T=>{var R=kt(),q=ft(R);{var j=Ae=>{var Ee=SK();const _e=dt(()=>W(l(d).status));var Oe=ft(Ee),G=z(w(Oe),2),D=w(G),ie=w(D),me=w(ie),pe=w(me),oe=z(me,2),ye=w(oe);Gm(ye,()=>l(_e).icon,(Ze,wt)=>{wt(Ze,{class:"odz-w-3 odz-h-3"})});var Ne=z(ye),we=z(oe,2);{var Fe=Ze=>{var wt=mK(),gt=w(wt);Th(gt,{class:"odz-w-3 odz-h-3"}),L(Ze,wt)};ze(we,Ze=>{l(d).converted_estimate_id&&Ze(Fe)})}var ue=z(ie,2),De=w(ue),Pe=z(D,2),he=w(Pe);{var ee=Ze=>{var wt=wK(),gt=w(wt);J_(gt,{class:"odz-w-4 odz-h-4"}),at("click",wt,M),L(Ze,wt)};ze(he,Ze=>{i()&&l(d).status==="pending"&&Ze(ee)})}var ge=z(he,2);{var Se=Ze=>{var wt=BK(),gt=ft(wt),Dt=w(gt),qt=w(Dt);AE(qt,{class:"odz-w-4 odz-h-4"});var zt=z(Dt,2),Mt=w(zt),jt=w(Mt),Ct=z(Mt,2),Et=w(Ct),Nt=z(Ct,2),Zt=w(Nt),nr=z(gt,2);{var ir=lr=>{var cr=bK(),qr=w(cr);{var Pr=wr=>{var Qr=yK();L(wr,Qr)},_r=wr=>{Th(wr,{class:"odz-w-4 odz-h-4"})};ze(qr,wr=>{l(y)?wr(Pr):wr(_r,!1)})}He(()=>cr.disabled=l(y)),at("click",cr,X),L(lr,cr)};ze(nr,lr=>{!l(d).converted_estimate_id&&l(h).length>0&&lr(ir)})}var sr=z(nr,2),dr=w(sr);{var Jr=lr=>{var cr=_K();L(lr,cr)},sn=lr=>{n1(lr,{class:"odz-w-4 odz-h-4"})};ze(dr,lr=>{l(_)?lr(Jr):lr(sn,!1)})}He(()=>{fA(jt,"odz-font-bold",l(d).status==="pending"),fA(Et,"odz-font-bold",l(d).status==="answered"),sr.disabled=l(_)}),at("click",jt,()=>te("pending")),at("click",Et,()=>te("answered")),at("click",Zt,()=>te("closed")),at("click",sr,O),L(Ze,wt)};ze(ge,Ze=>{o()&&l(d).status!=="closed"&&Ze(Se)})}var Me=z(G,4),Qe=w(Me),ot=z(w(Qe),2),Ye=w(ot),Ce=z(Qe,2),de=z(w(Ce),2),Te=w(de),qe=z(Ce,2),je=z(w(qe),2),Re=w(je),Ve=z(qe,2),At=z(w(Ve),2),Ke=w(At),nt=z(Oe,2);{var ht=Ze=>{var wt=zK(),gt=w(wt),Dt=w(gt),qt=w(Dt);Th(qt,{class:"odz-w-5 odz-h-5"});var zt=z(Dt,2),Mt=w(zt),jt=z(gt,2);Yt(jt,5,()=>l(f),Ar,(Ct,Et)=>{var Nt=xK();const Zt=dt(()=>{var Wr;return H(((Wr=l(Et).estimate)==null?void 0:Wr.status)||"")});var nr=w(Nt),ir=w(nr),sr=w(ir),dr=w(sr);Th(dr,{class:"odz-w-4 odz-h-4 odz-text-slate-400 group-hover:odz-text-indigo-600"});var Jr=z(sr,2),sn=w(Jr),lr=z(ir,2),cr=w(lr),qr=z(nr,2),Pr=w(qr),_r=w(Pr),wr=z(Pr,2),Qr=w(wr);He(Wr=>{var vn,Hr;Le(sn,((vn=l(Et).estimate)==null?void 0:vn.estimate_no)||"-"),Cr(lr,`odz-inline-flex odz-items-center odz-px-2 odz-py-1 odz-rounded-md odz-text-[10px] odz-font-bold odz-border ${l(Zt).class??""}`),Le(cr,l(Zt).label),Le(_r,((Hr=l(Et).estimate)==null?void 0:Hr.name)||"  "),Le(Qr,Wr)},[()=>V(l(Et).created_at)],dt),at("click",Nt,()=>xe(l(Et).estimate_id)),L(Ct,Nt)}),He(()=>Le(Mt,l(f).length)),L(Ze,wt)};ze(nt,Ze=>{l(f).length>0&&Ze(ht)})}var mt=z(nt,2),St=z(w(mt),2),st=w(St),tt=z(mt,2);{var Ft=Ze=>{var wt=CK(),gt=w(wt),Dt=z(w(gt),2),qt=w(Dt),zt=z(gt,2);qz(zt,{get products(){return l(h)},disabled:!0}),He(()=>Le(qt,`${l(h).length??""}`)),L(Ze,wt)};ze(tt,Ze=>{l(h).length>0&&Ze(Ft)})}var xt=z(tt,2),Ot=z(w(xt),2);fK(Ot,{get qnaId(){return r()},get isManager(){return o()}}),He(Ze=>{Le(pe,`#${l(d).inquiry_no??""}`),Cr(oe,`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-border ${l(_e).class??""}`),Le(Ne,` ${l(_e).label??""}`),Le(De,l(d).title||"( )"),Le(Ye,l(d).customer_name),Le(Te,l(d).customer_phone||"-"),Le(Re,l(d).customer_email||"-"),Le(Ke,Ze),Le(st,l(d).content||"( )")},[()=>V(l(d).created_at)],dt),L(Ae,Ee)};ze(q,Ae=>{l(d)&&Ae(j)},!0)}L(T,R)};ze(E,T=>{l(m)?T(U):T(P,!1)},!0)}L(x,F)};ze(se,x=>{l(g)?x(ce):x(be,!1)})}L(n,le),Mr()}var IK=Y('<dialog id="estimate-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-h-full main-estimate-modal-box"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),UK=Y("<main><!></main>");function QK(n,e){Nr(e,!1);const[t,r]=po(),o=()=>Gr(ol,"$customerStore",t);let s=Ue(""),i="",a="",A="",d="",c="",u="",h="",f="",g="",m="",y=Ue(!1),_=null,C=Ue(null),I=null,N=null,k="list",W=!1,V=null,H=null,J=null,xe=null;function M(){var U,P,T,R,q,j,Ae,Ee,_e,Oe;i=((U=document.getElementById("odiz-product-id"))==null?void 0:U.value)||"",A=((P=document.getElementById("odiz-shop-id"))==null?void 0:P.value)||"",d=((T=document.getElementById("odiz-sess"))==null?void 0:T.value)||"",c=((R=document.getElementById("odiz-customer-id"))==null?void 0:R.value)||"",a=((q=document.getElementById("odiz-mall_type"))==null?void 0:q.value)||"",u=((j=document.getElementById("odiz-customer-name"))==null?void 0:j.value)||"",h=((Ae=document.getElementById("odiz-customer-phone"))==null?void 0:Ae.value)||"",f=((Ee=document.getElementById("odiz-customer-address1"))==null?void 0:Ee.value)||"",g=((_e=document.getElementById("odiz-customer-address2"))==null?void 0:_e.value)||"",m=((Oe=document.getElementById("odiz-customer-postcode"))==null?void 0:Oe.value)||""}function O(){document.querySelectorAll("input.odiz-hidden-class").forEach(P=>{const T=P.value;if(T){const R=document.getElementsByClassName(T);for(let q=0;q<R.length;q++)R[q].style.display="none"}})}function X(U,P,T,R,q){const j=document.createElement("div");j.className="odiz-estimate-preview-container odiz-app";const Ae=T.closest("div");Ae&&(Ae.insertAdjacentElement("afterend",j),ha(ER,{target:j,props:{uuid:U,idx:P,appType:R,isAddCost:q}}))}function te(U,P=5e3){return new Promise(T=>{const R=document.getElementById(U);if(R)return T(R);const q=new MutationObserver(()=>{const j=document.getElementById(U);j&&(q.disconnect(),T(j))});q.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{q.disconnect(),T(null)},P)})}function le(U){let T=new URLSearchParams(window.location.search).get(U);if(T)return T;try{if(T=new URL(window.location.href).searchParams.get(U),T)return T}catch{}const R=document.getElementById(`odiz-${U}`);return R!=null&&R.value?R.value:null}Fn(async()=>{var _e,Oe,G;try{const D=await s5();D>0&&console.log(`[ODIZ]   : ${D}    .`)}catch(D){console.error("[ODIZ]    :",D)}const U=le("mode"),P=le("estimateId"),T=le("returnTo");console.log("[ODIZ] URL parameters:",{urlMode:U,urlEstimateId:P,urlReturnTo:T});let R=((_e=document.getElementById("odiz-app-type"))==null?void 0:_e.value)||"";(U==="register"||U==="list")&&(R=U,console.log("[ODIZ] AppType set from URL:",R)),P&&(I=P,console.log("[ODIZ] EditingEstimateId set:",I));const q=le("qnaId"),j=le("qnaMode"),Ae=le("isManager");if(q&&(N=q,console.log("[ODIZ] EditingQnaId set:",N)),(j==="register"||j==="list"||j==="detail")&&(k=j,console.log("[ODIZ] QnaMode set from URL:",k)),(Ae==="true"||Ae==="1")&&(W=!0,console.log("[ODIZ] IsQnaManager set:",W)),!R){console.warn("[ODIZ] No appType detected, exiting early");return}const Ee=document.getElementById("odiz-estimate");if(Ee&&Ee.addEventListener("click",Be),M(),O(),ks.set({id:A,name:"",sess:d,customer_id:c}),ol.set({name:u,phone:h,address1:f,address2:g,postcode:m,mallType:a}),_=document.getElementById("odiz-estimate-list"),R==="order"||R==="admin"){const D=document.getElementById("select-order-class"),ie=document.getElementById("select-order-class-uuid");if(D&&ie){const me=D.value,pe=ie.value,oe=document.getElementsByClassName(me);if(oe.length>0){const ye=oe[0].getElementsByClassName(pe);for(let Ne=0;Ne<ye.length;Ne++){const we=ye[Ne],Fe=((Oe=we.textContent)==null?void 0:Oe.trim())||"",ue=/odiz\s*:\s*([a-f0-9-]+)-(\d+)/i,De=Fe.match(ue);if(De){let Pe=De[1],he=!1;Pe.endsWith("-add")&&(Pe=Pe.slice(0,-4),he=!0);const ee=De[2];X(Pe,ee,we,R,he)}}}}}if(R==="list"&&_&&ha(Gj,{target:_,props:{openEstimateModal:(D,ie)=>{It.reset(),b(y,D),b(C,ie)}}}),R==="run"&&i){const D=document.getElementById("odiz-run-btn"),ie=((G=document.getElementById("odiz-run-btn-name"))==null?void 0:G.value)||" ";if(D){const me=document.createElement("button");me.textContent=ie,me.type="button",me.className="odz-btn odz-btn-primary",me.onclick=ne,D.appendChild(me)}}if(R==="fixed"){const D=document.getElementById("odiz-fixed-area");if(D&&i){const ie=document.createElement("div");if(ie.className="odiz-fixed-product-container odiz-app",D.appendChild(ie),a)try{const me=await Sv(a,i);me&&(b(s,me.id),ha(Mp,{target:ie,props:{productId:l(s)}}))}catch{}else i&&(b(s,i),ha(Mp,{target:ie,props:{productId:l(s)}}))}}if(R==="register"){console.log("[ODIZ] Register mode detected, waiting for container...");const D=await te("odiz-estimate-register-area");if(D){console.log("[ODIZ] Container found, mounting EstimateRegister with estimateId:",I);const ie=document.createElement("div");ie.className="odiz-estimate-register-container odiz-app",D.appendChild(ie),ha(E9,{target:ie,props:{mallType:a,customerId:c,sess:d,shopId:A,estimateId:I,returnTo:T||"list"}})}else console.error("[ODIZ] Failed to find #odiz-estimate-register-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-estimate-register-area"></div>')}if(R==="qna"){console.log("[ODIZ] QNA mode detected (dialog-based)");const D=await te("odiz-qna-area");if(D){console.log("[ODIZ] QNA container found, mounting QnaList as main view...");const ie=document.createElement("div");ie.className="odiz-qna-container odiz-app",D.appendChild(ie),ha(sK,{target:ie,props:{shopId:A,customerId:c||void 0,onSelectQna:me=>{H=me,be()},onCreateNew:()=>{V=null,ce()}}}),N?k==="detail"?(H=N,setTimeout(()=>be(),100)):k==="register"&&(V=N,setTimeout(()=>ce(),100)):k==="register"&&(V=null,setTimeout(()=>ce(),100))}else console.error("[ODIZ] Failed to find #odiz-qna-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-qna-area"></div>')}});async function ne(){It.reset(),b(C,null);try{a&&Kt(ol,lt(o).mallType=a,lt(o));const U=await Sv(a,i);U?(b(s,U.id),b(y,!0)):alert("     .")}catch{alert("     .")}}function Be(){b(s,""),It.reset(),b(C,null),b(y,!0)}function Z(U){U.style.cssText=`
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      background: transparent !important;
    `}function se(U){U.style.cssText="",U.close()}function ce(){const U=document.getElementById("qna-register-dialog-wrapper"),P=document.getElementById("qna-register-dialog");if(U&&P){if(U.classList.add("odiz-app"),J){try{H2(J)}catch(T){console.warn("[ODIZ] Failed to unmount previous QnaRegister instance:",T)}J=null}P.innerHTML="",U.oncancel=T=>{T.preventDefault()},J=ha(Hq,{target:P,props:{shopId:A,mallType:a,customerId:c||void 0,customerName:u,customerPhone:h,qnaId:V||"",onSubmitSuccess:T=>{se(U),H=T,be()},onCancel:()=>{se(U)}}}),U.showModal(),Z(U)}}function be(){const U=document.getElementById("qna-detail-dialog-wrapper"),P=document.getElementById("qna-detail-dialog");if(U&&P&&H){if(U.classList.add("odiz-app"),xe){try{H2(xe)}catch(T){console.warn("[ODIZ] Failed to unmount previous QnaDetail instance:",T)}xe=null}P.innerHTML="",U.oncancel=T=>{T.preventDefault()},xe=ha(FK,{target:P,props:{qnaId:H,shopId:A,isManager:W,onBack:()=>{se(U)},onEdit:T=>{se(U),V=T,ce()},onConvertToEstimate:T=>{console.log("[ODIZ] Converted to estimate:",T),alert(` . ( ID: ${T})`)}}}),U.showModal(),Z(U)}}Rr();var x=UK(),F=w(x);{var E=U=>{var P=IK(),T=w(P),R=w(T),q=w(R),j=z(R,2);vM(j,{get productId(){return l(s)},get estimate(){return l(C)},get isEstimateModal(){return l(y)},set isEstimateModal(Ae){b(y,Ae)},$$legacy:!0}),at("click",q,()=>b(y,!1)),L(U,P)};ze(F,U=>{l(y)&&U(E)})}L(n,x),Mr(),r()}ha(QK,{target:document.getElementById("odiz-app")});export{dn as _,TK as c,nS as g};
