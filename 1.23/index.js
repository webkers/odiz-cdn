(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const c0=!1;var Jp=Array.isArray,MC=Array.prototype.indexOf,Dm=Array.from,V_=Object.defineProperty,hA=Object.getOwnPropertyDescriptor,G_=Object.getOwnPropertyDescriptors,HC=Object.prototype,jC=Array.prototype,Nm=Object.getPrototypeOf;function Yc(n){return typeof n=="function"}const nc=()=>{};function RC(n){return n()}function u0(n){for(var e=0;e<n.length;e++)n[e]()}const Pi=2,W_=4,th=8,Mm=16,Da=32,xc=64,cp=128,Qa=256,up=512,xs=1024,bA=2048,id=4096,fA=8192,Zp=16384,$C=32768,rh=65536,X_=1<<17,qC=1<<19,Y_=1<<20,Ea=Symbol("$state"),J_=Symbol("legacy props"),h0=Symbol("");function Z_(n){return n===this.v}function Hm(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function KC(n,e){return n!==e}function jm(n){return!Hm(n,this.v)}function VC(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function GC(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function WC(n){throw new Error("https://svelte.dev/e/effect_orphan")}function XC(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function YC(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function JC(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function ZC(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function e4(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function t4(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function r4(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let zc=!1,n4=!1;function o4(){zc=!0}const Rm=1,$m=2,eb=4,s4=8,i4=16,a4=1,A4=2,tb=4,l4=8,d4=16,rb=1,c4=2,Is=Symbol(),nb="http://www.w3.org/2000/svg";function eg(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let yn=null;function O2(n){yn=n}function Jr(n,e=!1,t){yn={p:yn,c:null,e:null,m:!1,s:n,x:null,l:null},zc&&!e&&(yn.l={s:null,u:null,r1:[],r2:hi(!1)})}function Zr(n){const e=yn;if(e!==null){n!==void 0&&(e.x=n);const i=e.e;if(i!==null){var t=_n,r=Ln;e.e=null;try{for(var o=0;o<i.length;o++){var s=i[o];La(s.effect),ll(s.reaction),oh(s.fn)}}finally{La(t),ll(r)}}yn=e.p,e.m=!0}return n||{}}function Bc(){return!zc||yn!==null&&yn.l===null}function hi(n,e){var t={f:0,v:n,reactions:null,equals:Z_,rv:0,wv:0};return t}function tg(n,e=!1){var r;const t=hi(n);return e||(t.equals=jm),zc&&yn!==null&&yn.l!==null&&((r=yn.l).s??(r.s=[])).push(t),t}function Ie(n,e=!1){return u4(tg(n,e))}function u4(n){return Ln!==null&&!pA&&Ln.f&Pi&&(Fa===null?z4([n]):Fa.push(n)),n}function Cr(n,e){return _(n,dt(()=>l(n))),e}function _(n,e){return Ln!==null&&!pA&&Bc()&&Ln.f&(Pi|Mm)&&(Fa===null||!Fa.includes(n))&&r4(),Tu(n,e)}function Tu(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=mb(),ob(n,bA),Bc()&&_n!==null&&_n.f&xs&&!(_n.f&(Da|xc))&&(AA===null?B4([n]):AA.push(n))),e}function iA(n,e=1){var t=l(n),r=e===1?t++:t--;return _(n,t),r}function ob(n,e){var t=n.reactions;if(t!==null)for(var r=Bc(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;a&bA||!r&&i===_n||(ra(i,e),a&(xs|Qa)&&(a&Pi?ob(i,id):ig(i)))}}let qm=!1;function qd(n,e=null,t){if(typeof n!="object"||n===null||Ea in n)return n;const r=Nm(n);if(r!==HC&&r!==jC)return n;var o=new Map,s=Jp(n),i=hi(0);s&&o.set("length",hi(n.length));var a;return new Proxy(n,{defineProperty(A,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ZC();var u=o.get(d);return u===void 0?(u=hi(c.value),o.set(d,u)):_(u,qd(c.value,a)),!0},deleteProperty(A,d){var c=o.get(d);if(c===void 0)d in A&&o.set(d,hi(Is));else{if(s&&typeof d=="string"){var u=o.get("length"),h=Number(d);Number.isInteger(h)&&h<u.v&&_(u,h)}_(c,Is),D2(i)}return!0},get(A,d,c){var g;if(d===Ea)return n;var u=o.get(d),h=d in A;if(u===void 0&&(!h||(g=hA(A,d))!=null&&g.writable)&&(u=hi(qd(h?A[d]:Is,a)),o.set(d,u)),u!==void 0){var f=l(u);return f===Is?void 0:f}return Reflect.get(A,d,c)},getOwnPropertyDescriptor(A,d){var c=Reflect.getOwnPropertyDescriptor(A,d);if(c&&"value"in c){var u=o.get(d);u&&(c.value=l(u))}else if(c===void 0){var h=o.get(d),f=h==null?void 0:h.v;if(h!==void 0&&f!==Is)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(A,d){var f;if(d===Ea)return!0;var c=o.get(d),u=c!==void 0&&c.v!==Is||Reflect.has(A,d);if(c!==void 0||_n!==null&&(!u||(f=hA(A,d))!=null&&f.writable)){c===void 0&&(c=hi(u?qd(A[d],a):Is),o.set(d,c));var h=l(c);if(h===Is)return!1}return u},set(A,d,c,u){var I;var h=o.get(d),f=d in A;if(s&&d==="length")for(var g=c;g<h.v;g+=1){var w=o.get(g+"");w!==void 0?_(w,Is):g in A&&(w=hi(Is),o.set(g+"",w))}h===void 0?(!f||(I=hA(A,d))!=null&&I.writable)&&(h=hi(void 0),_(h,qd(c,a)),o.set(d,h)):(f=h.v!==Is,_(h,qd(c,a)));var y=Reflect.getOwnPropertyDescriptor(A,d);if(y!=null&&y.set&&y.set.call(u,c),!f){if(s&&typeof d=="string"){var x=o.get("length"),C=Number(d);Number.isInteger(C)&&C>=x.v&&_(x,C+1)}D2(i)}return!0},ownKeys(A){l(i);var d=Reflect.ownKeys(A).filter(h=>{var f=o.get(h);return f===void 0||f.v!==Is});for(var[c,u]of o)u.v!==Is&&!(c in A)&&d.push(c);return d},setPrototypeOf(){e4()}})}function D2(n,e=1){_(n,n.v+e)}function N2(n){return n!==null&&typeof n=="object"&&Ea in n?n[Ea]:n}function h4(n,e){return Object.is(N2(n),N2(e))}var M2,sb,ib;function f4(){if(M2===void 0){M2=window;var n=Element.prototype,e=Node.prototype;sb=hA(e,"firstChild").get,ib=hA(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function nh(n=""){return document.createTextNode(n)}function fi(n){return sb.call(n)}function rg(n){return ib.call(n)}function m(n,e){return fi(n)}function lt(n,e){{var t=fi(n);return t instanceof Comment&&t.data===""?rg(t):t}}function z(n,e=1,t=!1){let r=n;for(;e--;)r=rg(r);return r}function p4(n){n.textContent=""}function mc(n){var e=Pi|bA,t=Ln!==null&&Ln.f&Pi?Ln:null;return _n===null||t!==null&&t.f&Qa?e|=Qa:_n.f|=Y_,{ctx:yn,deps:null,effects:null,equals:Z_,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??_n}}function at(n){const e=mc(n);return e.equals=jm,e}function ab(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Ta(e[t])}}function g4(n){for(var e=n.parent;e!==null;){if(!(e.f&Pi))return e;e=e.parent}return null}function v4(n){var e,t=_n;La(g4(n));try{ab(n),e=yb(n)}finally{La(t)}return e}function Ab(n){var e=v4(n),t=(tl||n.f&Qa)&&n.deps!==null?id:xs;ra(n,t),n.equals(e)||(n.v=e,n.wv=mb())}function lb(n){_n===null&&Ln===null&&WC(),Ln!==null&&Ln.f&Qa&&_n===null&&GC(),Gm&&VC()}function m4(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Cc(n,e,t,r=!0){var o=(n&xc)!==0,s=_n,i={ctx:yn,deps:null,nodes_start:null,nodes_end:null,f:n|bA,first:null,fn:e,last:null,next:null,parent:o?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var a=oc;try{H2(!0),sg(i),i.f|=$C}catch(c){throw Ta(i),c}finally{H2(a)}}else e!==null&&ig(i);var A=t&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(Y_|cp))===0;if(!A&&!o&&r&&(s!==null&&m4(i,s),Ln!==null&&Ln.f&Pi)){var d=Ln;(d.effects??(d.effects=[])).push(i)}return i}function Km(n){const e=Cc(th,null,!1);return ra(e,xs),e.teardown=n,e}function f0(n){lb();var e=_n!==null&&(_n.f&Da)!==0&&yn!==null&&!yn.m;if(e){var t=yn;(t.e??(t.e=[])).push({fn:n,effect:_n,reaction:Ln})}else{var r=oh(n);return r}}function w4(n){return lb(),Sc(n)}function y4(n){const e=Cc(xc,n,!0);return(t={})=>new Promise(r=>{t.outro?Zl(e,()=>{Ta(e),r(void 0)}):(Ta(e),r(void 0))})}function oh(n){return Cc(W_,n,!1)}function tr(n,e){var t=yn,r={effect:null,ran:!1};t.l.r1.push(r),r.effect=Sc(()=>{n(),!r.ran&&(r.ran=!0,_(t.l.r2,!0),dt(e))})}function bo(){var n=yn;Sc(()=>{if(l(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&xs&&ra(t,id),Ec(t)&&sg(t),e.ran=!1}n.l.r2.v=!1}})}function Sc(n){return Cc(th,n,!0)}function ke(n,e=[],t=mc){const r=e.map(t);return ad(()=>n(...r.map(l)))}function ad(n,e=0){return Cc(th|Mm|e,n,!0)}function mA(n,e=!0){return Cc(th|Da,n,!0,e)}function db(n){var e=n.teardown;if(e!==null){const t=Gm,r=Ln;j2(!0),ll(null);try{e.call(null)}finally{j2(t),ll(r)}}}function cb(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;Ta(t,e),t=r}}function _4(n){for(var e=n.first;e!==null;){var t=e.next;e.f&Da||Ta(e),e=t}}function Ta(n,e=!0){var t=!1;if((e||n.f&qC)&&n.nodes_start!==null){for(var r=n.nodes_start,o=n.nodes_end;r!==null;){var s=r===o?null:rg(r);r.remove(),r=s}t=!0}cb(n,e&&!t),pp(n,0),ra(n,Zp);var i=n.transitions;if(i!==null)for(const A of i)A.stop();db(n);var a=n.parent;a!==null&&a.first!==null&&ub(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function ub(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function Zl(n,e){var t=[];Vm(n,t,!0),hb(t,()=>{Ta(n),e&&e()})}function hb(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function Vm(n,e,t){if(!(n.f&fA)){if(n.f^=fA,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&rh)!==0||(r.f&Da)!==0;Vm(r,e,s?t:!1),r=o}}}function Lu(n){fb(n,!0)}function fb(n,e){if(n.f&fA){n.f^=fA,n.f&xs||(n.f^=xs),Ec(n)&&(ra(n,bA),ig(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&rh)!==0||(t.f&Da)!==0;fb(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let hp=!1,p0=[];function pb(){hp=!1;const n=p0.slice();p0=[],u0(n)}function ng(n){hp||(hp=!0,queueMicrotask(pb)),p0.push(n)}function b4(){hp&&pb()}const gb=0,x4=1;let $f=!1,qf=gb,Pu=!1,ku=null,oc=!1,Gm=!1;function H2(n){oc=n}function j2(n){Gm=n}let Ml=[],sc=0;let Ln=null,pA=!1;function ll(n){Ln=n}let _n=null;function La(n){_n=n}let Fa=null;function z4(n){Fa=n}let Ts=null,ci=0,AA=null;function B4(n){AA=n}let vb=1,fp=0,tl=!1,ZA=null;function mb(){return++vb}function Ec(n){var d;var e=n.f;if(e&bA)return!0;if(e&id){var t=n.deps,r=(e&Qa)!==0;if(t!==null){var o,s,i=(e&up)!==0,a=r&&_n!==null&&!tl,A=t.length;if(i||a){for(o=0;o<A;o++)s=t[o],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);i&&(n.f^=up)}for(o=0;o<A;o++)if(s=t[o],Ec(s)&&Ab(s),s.wv>n.wv)return!0}(!r||_n!==null&&!tl)&&ra(n,xs)}return!1}function C4(n,e){for(var t=e;t!==null;){if(t.f&cp)try{t.fn(n);return}catch{t.f^=cp}t=t.parent}throw $f=!1,n}function S4(n){return(n.f&Zp)===0&&(n.parent===null||(n.parent.f&cp)===0)}function og(n,e,t,r){if($f){if(t===null&&($f=!1),S4(e))throw n;return}t!==null&&($f=!0);{C4(n,e);return}}function wb(n,e,t=0){var r=n.reactions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];s.f&Pi?wb(s,e,t+1):e===s&&(t===0?ra(s,bA):s.f&xs&&ra(s,id),ig(s))}}function yb(n){var f;var e=Ts,t=ci,r=AA,o=Ln,s=tl,i=Fa,a=yn,A=pA,d=n.f;Ts=null,ci=0,AA=null,Ln=d&(Da|xc)?null:n,tl=(d&Qa)!==0&&(!oc||o===null||A),Fa=null,O2(n.ctx),pA=!1,fp++;try{var c=(0,n.fn)(),u=n.deps;if(Ts!==null){var h;if(pp(n,ci),u!==null&&ci>0)for(u.length=ci+Ts.length,h=0;h<Ts.length;h++)u[ci+h]=Ts[h];else n.deps=u=Ts;if(!tl)for(h=ci;h<u.length;h++)((f=u[h]).reactions??(f.reactions=[])).push(n)}else u!==null&&ci<u.length&&(pp(n,ci),u.length=ci);if(Bc()&&AA!==null&&!(n.f&(Pi|id|bA)))for(h=0;h<AA.length;h++)wb(AA[h],n);return o!==null&&fp++,c}finally{Ts=e,ci=t,AA=r,Ln=o,tl=s,Fa=i,O2(a),pA=A}}function E4(n,e){let t=e.reactions;if(t!==null){var r=MC.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&Pi&&(Ts===null||!Ts.includes(e))&&(ra(e,id),e.f&(Qa|up)||(e.f^=up),ab(e),pp(e,0))}function pp(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)E4(n,t[r])}function sg(n){var e=n.f;if(!(e&Zp)){ra(n,xs);var t=_n,r=yn;_n=n;try{e&Mm?_4(n):cb(n),db(n);var o=yb(n);n.teardown=typeof o=="function"?o:null,n.wv=vb;var s=n.deps,i;c0&&n4&&n.f&bA}catch(a){og(a,n,t,r||n.ctx)}finally{_n=t}}}function _b(){if(sc>1e3){sc=0;try{XC()}catch(n){if(ku!==null)og(n,ku,null);else throw n}}sc++}function bb(n){var e=n.length;if(e!==0){_b();var t=oc;oc=!0;try{for(var r=0;r<e;r++){var o=n[r];o.f&xs||(o.f^=xs);var s=[];xb(o,s),F4(s)}}finally{oc=t}}}function F4(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(Zp|fA)))try{Ec(r)&&(sg(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?ub(r):r.fn=null))}catch(o){og(o,r,null,r.ctx)}}}function I4(){if(Pu=!1,sc>1001)return;const n=Ml;Ml=[],bb(n),Pu||(sc=0,ku=null)}function ig(n){qf===gb&&(Pu||(Pu=!0,queueMicrotask(I4))),ku=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(xc|Da)){if(!(t&xs))return;e.f^=xs}}Ml.push(e)}function xb(n,e){var t=n.first,r=[];e:for(;t!==null;){var o=t.f,s=(o&Da)!==0,i=s&&(o&xs)!==0,a=t.next;if(!i&&!(o&fA))if(o&th){if(s)t.f^=xs;else{var A=Ln;try{Ln=t,Ec(t)&&sg(t)}catch(h){og(h,t,null,t.ctx)}finally{Ln=A}}var d=t.first;if(d!==null){t=d;continue}}else o&W_&&r.push(t);if(a===null){let h=t.parent;for(;h!==null;){if(n===h)break e;var c=h.next;if(c!==null){t=c;continue e}h=h.parent}}t=a}for(var u=0;u<r.length;u++)d=r[u],e.push(d),xb(d,e)}function zb(n){var e=qf,t=Ml;try{_b();const o=[];qf=x4,Ml=o,Pu=!1,bb(t);var r=n==null?void 0:n();return b4(),(Ml.length>0||o.length>0)&&zb(),sc=0,ku=null,r}finally{qf=e,Ml=t}}async function za(){await Promise.resolve(),zb()}function l(n){var e=n.f,t=(e&Pi)!==0;if(ZA!==null&&ZA.add(n),Ln!==null&&!pA){Fa!==null&&Fa.includes(n)&&t4();var r=Ln.deps;n.rv<fp&&(n.rv=fp,Ts===null&&r!==null&&r[ci]===n?ci++:Ts===null?Ts=[n]:(!tl||!Ts.includes(n))&&Ts.push(n))}else if(t&&n.deps===null&&n.effects===null){var o=n,s=o.parent;s!==null&&!(s.f&Qa)&&(o.f^=Qa)}return t&&(o=n,Ec(o)&&Ab(o)),n.v}function U4(n){var e=ZA;ZA=new Set;var t=ZA,r;try{if(dt(n),e!==null)for(r of ZA)e.add(r)}finally{ZA=e}return t}function Ou(n){var e=U4(()=>dt(n));for(var t of e)if(t.f&X_)for(const r of t.deps||[])r.f&Pi||Tu(r,r.v);else Tu(t,t.v)}function dt(n){var e=pA;try{return pA=!0,n()}finally{pA=e}}const Q4=-7169;function ra(n,e){n.f=n.f&Q4|e}function Hn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ea in n)g0(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&Ea in t&&g0(t)}}}function g0(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{g0(n[r],e)}catch{}const t=Nm(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=G_(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function T4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const L4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function P4(n){return L4.includes(n)}const k4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function O4(n){return n=n.toLowerCase(),k4[n]??n}const D4=["touchstart","touchmove"];function N4(n){return D4.includes(n)}function M4(n,e){if(e){const t=document.body;n.autofocus=!0,ng(()=>{document.activeElement===t&&n.focus()})}}let R2=!1;function H4(){R2||(R2=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Bb(n){var e=Ln,t=_n;ll(null),La(null);try{return n()}finally{ll(e),La(t)}}function Wm(n,e,t,r=t){n.addEventListener(e,()=>Bb(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),H4()}const Cb=new Set,v0=new Set;function Sb(n,e,t,r={}){function o(s){if(r.capture||du.call(e,s),!s.cancelBubble)return Bb(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?ng(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function At(n,e,t,r,o){var s={capture:r,passive:o},i=Sb(n,e,t,s);(e===document.body||e===window||e===document)&&Km(()=>{e.removeEventListener(n,i,s)})}function Eb(n){for(var e=0;e<n.length;e++)Cb.add(n[e]);for(var t of v0)t(n)}function du(n){var C;var e=this,t=e.ownerDocument,r=n.type,o=((C=n.composedPath)==null?void 0:C.call(n))||[],s=o[0]||n.target,i=0,a=n.__root;if(a){var A=o.indexOf(a);if(A!==-1&&(e===document||e===window)){n.__root=e;return}var d=o.indexOf(e);if(d===-1)return;A<=d&&(i=A)}if(s=o[i]||n.target,s!==e){V_(n,"currentTarget",{configurable:!0,get(){return s||t}});var c=Ln,u=_n;ll(null),La(null);try{for(var h,f=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!==void 0&&!s.disabled)if(Jp(w)){var[y,...x]=w;y.apply(s,[n,...x])}else w.call(s,n)}catch(I){h?f.push(I):h=I}if(n.cancelBubble||g===e||g===null)break;s=g}if(h){for(let I of f)queueMicrotask(()=>{throw I});throw h}}finally{n.__root=e,delete n.currentTarget,ll(c),La(u)}}}function Xm(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function dl(n,e){var t=_n;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function V(n,e){var t=(e&rb)!==0,r=(e&c4)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=Xm(s?n:"<!>"+n),t||(o=fi(o)));var i=r?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=fi(i),A=i.lastChild;dl(a,A)}else dl(i,i);return i}}function ag(n,e,t="svg"){var r=!n.startsWith("<!>"),o=(e&rb)!==0,s=`<${t}>${r?n:"<!>"+n}</${t}>`,i;return()=>{if(!i){var a=Xm(s),A=fi(a);if(o)for(i=document.createDocumentFragment();fi(A);)i.appendChild(fi(A));else i=fi(A)}var d=i.cloneNode(!0);if(o){var c=fi(d),u=d.lastChild;dl(c,u)}else dl(d,d);return d}}function mn(n=""){{var e=nh(n+"");return dl(e,e),e}}function Lt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=nh();return n.append(e,t),dl(e,t),n}function U(n,e){n!==null&&n.before(e)}function Qe(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function oA(n,e){return j4(n,e)}const zd=new Map;function j4(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){f4();var a=new Set,A=u=>{for(var h=0;h<u.length;h++){var f=u[h];if(!a.has(f)){a.add(f);var g=N4(f);e.addEventListener(f,du,{passive:g});var w=zd.get(f);w===void 0?(document.addEventListener(f,du,{passive:g}),zd.set(f,1)):zd.set(f,w+1)}}};A(Dm(Cb)),v0.add(A);var d=void 0,c=y4(()=>{var u=t??e.appendChild(nh());return mA(()=>{if(s){Jr({});var h=yn;h.c=s}o&&(r.$$events=o),d=n(u,r)||{},s&&Zr()}),()=>{var g;for(var h of a){e.removeEventListener(h,du);var f=zd.get(h);--f===0?(document.removeEventListener(h,du),zd.delete(h)):zd.set(h,f)}v0.delete(A),u!==t&&((g=u.parentNode)==null||g.removeChild(u))}});return m0.set(d,c),d}let m0=new WeakMap;function $2(n,e){const t=m0.get(n);return t?(m0.delete(n),t(e)):Promise.resolve()}function be(n,e,t=!1){var r=n,o=null,s=null,i=Is,a=t?rh:0,A=!1;const d=(u,h=!0)=>{A=!0,c(h,u)},c=(u,h)=>{i!==(i=u)&&(i?(o?Lu(o):h&&(o=mA(()=>h(r))),s&&Zl(s,()=>{s=null})):(s?Lu(s):h&&(s=mA(()=>h(r))),o&&Zl(o,()=>{o=null})))};ad(()=>{A=!1,e(d),A||c(null,null)},a)}function R4(n,e,t){var r=n,o=Is,s,i=Bc()?KC:Hm;ad(()=>{i(o,o=e())&&(s&&Zl(s),s=mA(()=>t(r)))})}function gr(n,e){return e}function $4(n,e,t,r){for(var o=[],s=e.length,i=0;i<s;i++)Vm(e[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var A=t.parentNode;p4(A),A.append(t),r.clear(),XA(n,e[0].prev,e[s-1].next)}hb(o,()=>{for(var d=0;d<s;d++){var c=e[d];a||(r.delete(c.k),XA(n,c.prev,c.next)),Ta(c.e,!a)}})}function nr(n,e,t,r,o,s=null){var i=n,a={items:new Map,first:null},A=(e&eb)!==0;if(A){var d=n;i=d.appendChild(nh())}var c=null,u=!1,h=at(()=>{var f=t();return Jp(f)?f:f==null?[]:Dm(f)});ad(()=>{var f=l(h),g=f.length;u&&g===0||(u=g===0,q4(f,a,i,o,e,r,t),s!==null&&(g===0?c?Lu(c):c=mA(()=>s(i)):c!==null&&Zl(c,()=>{c=null})),l(h))})}function q4(n,e,t,r,o,s,i){var ne,ge,pe,xe;var a=(o&s4)!==0,A=(o&(Rm|$m))!==0,d=n.length,c=e.items,u=e.first,h=u,f,g=null,w,y=[],x=[],C,I,M,L;if(a)for(L=0;L<d;L+=1)C=n[L],I=s(C,L),M=c.get(I),M!==void 0&&((ne=M.a)==null||ne.measure(),(w??(w=new Set)).add(M));for(L=0;L<d;L+=1){if(C=n[L],I=s(C,L),M=c.get(I),M===void 0){var ee=h?h.e.nodes_start:t;g=V4(ee,e,g,g===null?e.first:g.next,C,I,L,r,o,i),c.set(I,g),y=[],x=[],h=g.next;continue}if(A&&K4(M,C,L,o),M.e.f&fA&&(Lu(M.e),a&&((ge=M.a)==null||ge.unfix(),(w??(w=new Set)).delete(M))),M!==h){if(f!==void 0&&f.has(M)){if(y.length<x.length){var W=x[0],R;g=W.prev;var Z=y[0],Be=y[y.length-1];for(R=0;R<y.length;R+=1)q2(y[R],W,t);for(R=0;R<x.length;R+=1)f.delete(x[R]);XA(e,Z.prev,Be.next),XA(e,g,Z),XA(e,Be,W),h=W,g=Be,L-=1,y=[],x=[]}else f.delete(M),q2(M,h,t),XA(e,M.prev,M.next),XA(e,M,g===null?e.first:g.next),XA(e,g,M),g=M;continue}for(y=[],x=[];h!==null&&h.k!==I;)h.e.f&fA||(f??(f=new Set)).add(h),x.push(h),h=h.next;if(h===null)continue;M=h}y.push(M),g=M,h=M.next}if(h!==null||f!==void 0){for(var N=f===void 0?[]:Dm(f);h!==null;)h.e.f&fA||N.push(h),h=h.next;var k=N.length;if(k>0){var J=o&eb&&d===0?t:null;if(a){for(L=0;L<k;L+=1)(pe=N[L].a)==null||pe.measure();for(L=0;L<k;L+=1)(xe=N[L].a)==null||xe.fix()}$4(e,N,J,c)}}a&&ng(()=>{var te;if(w!==void 0)for(M of w)(te=M.a)==null||te.apply()}),_n.first=e.first&&e.first.e,_n.last=g&&g.e}function K4(n,e,t,r){r&Rm&&Tu(n.v,e),r&$m?Tu(n.i,t):n.i=t}function V4(n,e,t,r,o,s,i,a,A,d){var c=(A&Rm)!==0,u=(A&i4)===0,h=c?u?tg(o):hi(o):o,f=A&$m?hi(i):i,g={i:f,v:h,k:s,a:null,e:null,prev:t,next:r};try{return g.e=mA(()=>a(n,h,f,d),qm),g.e.prev=t&&t.e,g.e.next=r&&r.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function q2(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var i=rg(s);o.before(s),s=i}}function XA(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function w0(n,e,t,r,o){var s=n,i="",a;ad(()=>{i!==(i=e()??"")&&(a!==void 0&&(Ta(a),a=void 0),i!==""&&(a=mA(()=>{var A=i+"";t&&(A=`<svg>${A}</svg>`);var d=Xm(A);if((t||r)&&(d=fi(d)),dl(fi(d),d.lastChild),t||r)for(;fi(d);)s.before(fi(d));else s.before(d)})))})}function An(n,e,t,r,o){var a;var s=(a=e.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=e.children,i=!0),s===void 0||s(n,i?()=>r:r)}function Ym(n,e,t){var r=n,o,s;ad(()=>{o!==(o=e())&&(s&&(Zl(s),s=null),o&&(s=mA(()=>t(r,o))))},rh)}function G4(n,e,t,r,o,s){var i,a,A=null,d=n,c;ad(()=>{const u=e()||null;var h=nb;u!==i&&(c&&(u===null?Zl(c,()=>{c=null,a=null}):u===a?Lu(c):Ta(c)),u&&u!==a&&(c=mA(()=>{if(A=document.createElementNS(h,u),dl(A,A),r){var f=A.appendChild(nh());r(A,f)}_n.nodes_end=A,d.before(A)})),i=u,i&&(a=i))},rh)}function Fb(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=Fb(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function W4(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=Fb(n))&&(r&&(r+=" "),r+=e);return r}function y0(n){return typeof n=="object"?W4(n):n??""}function Jm(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Du(n,e){var t=n.__attributes??(n.__attributes={});t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function X4(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function cr(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[h0]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Ib(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function K2(n,e,t,r,o=!1,s=!1,i=!1){var a=e||{},A=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class&&(t.class=y0(t.class));var c=Ib(n),u=n.__attributes??(n.__attributes={});for(const x in t){let C=t[x];if(A&&x==="value"&&C==null){n.value=n.__value="",a[x]=C;continue}var h=a[x];if(C!==h){a[x]=C;var f=x[0]+x[1];if(f!=="$$"){if(f==="on"){const I={},M="$$"+x;let L=x.slice(2);var g=P4(L);if(T4(L)&&(L=L.slice(0,-7),I.capture=!0),!g&&h){if(C!=null)continue;n.removeEventListener(L,a[M],I),a[M]=null}if(C!=null)if(g)n[`__${L}`]=C,Eb([L]);else{let ee=function(W){a[x].call(this,W)};a[M]=Sb(L,n,ee,I)}else g&&(n[`__${L}`]=void 0)}else if(x==="style"&&C!=null)n.style.cssText=C+"";else if(x==="autofocus")M4(n,!!C);else if(!s&&(x==="__value"||x==="value"&&C!=null))n.value=n.__value=C;else if(x==="selected"&&A)X4(n,C);else{var w=x;o||(w=O4(w));var y=w==="defaultValue"||w==="defaultChecked";if(C==null&&!s&&!y)if(u[x]=null,w==="value"||w==="checked"){let I=n;if(w==="value"){let M=I.defaultValue;I.removeAttribute(w),I.defaultValue=M}else{let M=I.defaultChecked;I.removeAttribute(w),I.defaultChecked=M}}else n.removeAttribute(x);else y||c.includes(w)&&(s||typeof C!="string")?n[w]=C:typeof C!="function"&&cr(n,w,C)}x==="style"&&"__styles"in n&&(n.__styles={})}}}return a}var V2=new Map;function Ib(n){var e=V2.get(n.nodeName);if(e)return e;V2.set(n.nodeName,e=[]);for(var t,r=n,o=Element.prototype;o!==r;){t=G_(r);for(var s in t)t[s].set&&e.push(s);r=Nm(r)}return e}function Ub(n){if(n.loading==="lazy"){var e=n.src;n[h0]=null,n.loading="eager",n.removeAttribute("src"),requestAnimationFrame(()=>{n[h0]!=="eager"&&(n.loading="lazy"),n.src=e})}}function Y4(n,e,t){var r=n.__className,o=Qb(e);(r!==o||qm)&&(o===""?n.removeAttribute("class"):n.setAttribute("class",o),n.__className=o)}function Tr(n,e,t){var r=n.__className,o=Qb(e);(r!==o||qm)&&(e==null?n.removeAttribute("class"):n.className=o,n.__className=o)}function Qb(n,e){return(n??"")+""}function il(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function Fr(n,e,t=e){var r=Bc();Wm(n,"input",o=>{var s=o?n.defaultValue:n.value;if(s=dv(n)?cv(s):s,t(s),r&&s!==(s=e())){var i=n.selectionStart,a=n.selectionEnd;n.value=s??"",a!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(a,n.value.length))}}),dt(e)==null&&n.value&&t(dv(n)?cv(n.value):n.value),Sc(()=>{var o=e();dv(n)&&o===cv(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function _0(n,e,t=e){Wm(n,"change",r=>{var o=r?n.defaultChecked:n.checked;t(o)}),dt(e)==null&&t(n.checked),Sc(()=>{var r=e();n.checked=!!r})}function dv(n){var e=n.type;return e==="number"||e==="range"}function cv(n){return n===""?null:+n}function Tb(n,e,t){var r=hA(n,e);r&&r.set&&(n[e]=t,Km(()=>{n[e]=null}))}function Lb(n,e,t){if(n.multiple)return Z4(n,e);for(var r of n.options){var o=yu(r);if(h4(o,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function J4(n,e){oh(()=>{var t=new MutationObserver(()=>{var r=n.__value;Lb(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Nu(n,e,t=e){var r=!0;Wm(n,"change",o=>{var s=o?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(s),yu);else{var a=n.querySelector(s)??n.querySelector("option:not([disabled])");i=a&&yu(a)}t(i)}),oh(()=>{var o=e();if(Lb(n,o,r),r&&o===void 0){var s=n.querySelector(":checked");s!==null&&(o=yu(s),t(o))}n.__value=o,r=!1}),J4(n)}function Z4(n,e){for(var t of n.options)t.selected=~e.indexOf(yu(t))}function yu(n){return"__value"in n?n.__value:n.value}function G2(n,e){return n===e||(n==null?void 0:n[Ea])===e}function ss(n={},e,t,r){return oh(()=>{var o,s;return Sc(()=>{o=s,s=[],dt(()=>{n!==t(...s)&&(e(n,...s),o&&G2(t(...o),n)&&e(null,...o))})}),()=>{ng(()=>{s&&G2(t(...s),n)&&e(null,...s)})}}),n}function Pb(n){return function(...e){var t=e[0];t.target===this&&(n==null||n.apply(this,e))}}function uv(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function nn(n=!1){const e=yn,t=e.l.u;if(!t)return;let r=()=>Hn(e.s);if(n){let o=0,s={};const i=mc(()=>{let a=!1;const A=e.s;for(const d in A)A[d]!==s[d]&&(s[d]=A[d],a=!0);return a&&o++,o});r=()=>l(i)}t.b.length&&w4(()=>{W2(e,r),u0(t.b)}),f0(()=>{const o=dt(()=>t.m.map(RC));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&f0(()=>{W2(e,r),u0(t.a)})}function W2(n,e){if(n.l.s)for(const t of n.l.s)l(t);e()}function kb(n,e,t){if(n==null)return e(void 0),nc;const r=dt(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const Bd=[];function Ad(n,e=nc){let t=null;const r=new Set;function o(a){if(Hm(n,a)&&(n=a,t)){const A=!Bd.length;for(const d of r)d[1](),Bd.push(d,n);if(A){for(let d=0;d<Bd.length;d+=2)Bd[d][0](Bd[d+1]);Bd.length=0}}}function s(a){o(a(n))}function i(a,A=nc){const d=[a,A];return r.add(d),r.size===1&&(t=e(o,s)||nc),a(n),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function Un(n){let e;return kb(n,t=>e=t)(),e}let Oh=!1,b0=Symbol();function dn(n,e,t){const r=t[e]??(t[e]={store:null,source:tg(void 0),unsubscribe:nc});if(r.store!==n&&!(b0 in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=nc;else{var o=!0;r.unsubscribe=kb(n,s=>{o?r.source.v=s:_(r.source,s)}),o=!1}return n&&b0 in t?Un(n):l(r.source)}function Ob(n,e){return n.set(e),e}function ko(){const n={};function e(){Km(()=>{for(var t in n)n[t].unsubscribe();V_(n,b0,{enumerable:!1,value:!0})})}return[n,e]}function er(n,e,t){return n.set(t),e}function eS(n){var e=Oh;try{return Oh=!1,[n(),Oh]}finally{Oh=e}}const tS={get(n,e){if(!n.exclude.includes(e))return l(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){return e in n.special||(n.special[e]=gt({get[e](){return n.props[e]}},e,tb)),n.special[e](t),iA(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),iA(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function rn(n,e){return new Proxy({props:n,exclude:e,special:{},version:hi(0)},tS)}const rS={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Yc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let o=n.props[r];Yc(o)&&(o=o());const s=hA(o,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Yc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=hA(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(n,e){if(e===Ea||e===J_)return!1;for(let t of n.props)if(Yc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Yc(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function cn(...n){return new Proxy({props:n},rS)}function X2(n){for(var e=_n,t=_n;e!==null&&!(e.f&(Da|xc));)e=e.parent;try{return La(e),n()}finally{La(t)}}function gt(n,e,t,r){var W;var o=(t&a4)!==0,s=!zc||(t&A4)!==0,i=(t&l4)!==0,a=(t&d4)!==0,A=!1,d;i?[d,A]=eS(()=>n[e]):d=n[e];var c=Ea in n||J_ in n,u=i&&(((W=hA(n,e))==null?void 0:W.set)??(c&&e in n&&(R=>n[e]=R)))||void 0,h=r,f=!0,g=!1,w=()=>(g=!0,f&&(f=!1,a?h=dt(r):h=r),h);d===void 0&&r!==void 0&&(u&&s&&JC(),d=w(),u&&u(d));var y;if(s)y=()=>{var R=n[e];return R===void 0?w():(f=!0,g=!1,R)};else{var x=X2(()=>(o?mc:at)(()=>n[e]));x.f|=X_,y=()=>{var R=l(x);return R!==void 0&&(h=void 0),R===void 0?h:R}}if(!(t&tb))return y;if(u){var C=n.$$legacy;return function(R,Z){return arguments.length>0?((!s||!Z||C||A)&&u(Z?y():R),R):y()}}var I=!1,M=!1,L=tg(d),ee=X2(()=>mc(()=>{var R=y(),Z=l(L);return I?(I=!1,M=!0,Z):(M=!1,L.v=R)}));return o||(ee.equals=jm),function(R,Z){if(ZA!==null&&(I=M,y(),l(L)),arguments.length>0){const Be=Z?l(ee):s&&i?qd(R):R;return ee.equals(Be)||(I=!0,_(L,Be),g&&h!==void 0&&(h=Be),dt(()=>l(ee))),R}return l(ee)}}function $n(n){yn===null&&eg(),zc&&yn.l!==null?Db(yn).m.push(n):f0(()=>{const e=dt(n);if(typeof e=="function")return e})}function as(n){yn===null&&eg(),$n(()=>()=>dt(n))}function nS(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function Ag(){const n=yn;return n===null&&eg(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=Jp(o)?o.slice():[o],a=nS(e,t,r);for(const A of i)A.call(n.x,a);return!a.defaultPrevented}return!0}}function oS(n){yn===null&&eg(),yn.l===null&&YC(),Db(yn).a.push(n)}function Db(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const sS="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sS);o4();const iS="modulepreload",aS=function(n){return"/"+n},Y2={},ks=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(t.map(A=>{if(A=aS(A),A in Y2)return;Y2[A]=!0;const d=A.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":iS,d||(u.as="script"),u.crossOrigin="",u.href=A,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},AS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Fc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Zm extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class lS extends Zm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dS extends Zm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cS extends Zm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var x0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(x0||(x0={}));var uS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class hS{constructor(e,{headers:t={},customFetch:r,region:o=x0.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=AS(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return uS(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=t;let a={},{region:A}=t;A||(A=this.region),A&&A!=="any"&&(a["x-region"]=A);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(g=>{throw new lS(g)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new dS(c);if(!c.ok)throw new cS(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="text/event-stream"?f=c:h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(o){return{data:null,error:o}}})}}var xK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var $o={},Cd={},Sd={},Ed={},Fd={},Id={},gS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wc=gS();const vS=wc.fetch,Nb=wc.fetch.bind(wc),Mb=wc.Headers,mS=wc.Request,wS=wc.Response,Fc=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mb,Request:mS,Response:wS,default:Nb,fetch:vS},Symbol.toStringTag,{value:"Module"})),yS=pS(Fc);var Dh={},J2;function Hb(){if(J2)return Dh;J2=1,Object.defineProperty(Dh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Dh.default=n,Dh}var Z2;function jb(){if(Z2)return Id;Z2=1;var n=Id&&Id.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Id,"__esModule",{value:!0});const e=n(yS),t=n(Hb());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let A=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,h;let f=null,g=null,w=null,y=d.status,x=d.statusText;if(d.ok){if(this.method!=="HEAD"){const L=await d.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=L:g=JSON.parse(L))}const I=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),M=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");I&&M&&M.length>1&&(w=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,y=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const I=await d.text();try{f=JSON.parse(I),Array.isArray(f)&&d.status===404&&(g=[],f=null,y=200,x="OK")}catch{d.status===404&&I===""?(y=204,x="No Content"):f={message:I}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,x="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:w,status:y,statusText:x}});return this.shouldThrowOnError||(A=A.catch(d=>{var c,u,h;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),A.then(s,i)}}return Id.default=r,Id}var ew;function Rb(){if(ew)return Fd;ew=1;var n=Fd&&Fd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fd,"__esModule",{value:!0});const e=n(jb());class t extends e.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:A=a}={}){const d=A?`${A}.order`:"order",c=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${c?`${c},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const A=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(A,`${o}`),this.url.searchParams.set(d,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:A=!1,format:d="text"}={}){var c;const u=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,A?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${u};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Fd.default=t,Fd}var tw;function e1(){if(tw)return Ed;tw=1;var n=Ed&&Ed.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ed,"__esModule",{value:!0});const e=n(Rb());class t extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let A="";a==="plain"?A="pl":a==="phrase"?A="ph":a==="websearch"&&(A="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${A}fts${d}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return Ed.default=t,Ed}var rw;function $b(){if(rw)return Sd;rw=1;var n=Sd&&Sd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sd,"__esModule",{value:!0});const e=n(e1());class t{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let A=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!A?"":(c==='"'&&(A=!A),c)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",A=[];if(this.headers.Prefer&&A.push(this.headers.Prefer),s&&A.push(`count=${s}`),i||A.push("missing=default"),this.headers.Prefer=A.join(","),Array.isArray(o)){const d=o.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:A=!0}={}){const d="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),A||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(o)){const u=o.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Sd.default=t,Sd}var Jc={},Zc={},nw;function _S(){return nw||(nw=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.version=void 0,Zc.version="0.0.0-automated"),Zc}var ow;function bS(){if(ow)return Jc;ow=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.DEFAULT_HEADERS=void 0;const n=_S();return Jc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Jc}var sw;function xS(){if(sw)return Cd;sw=1;var n=Cd&&Cd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Cd,"__esModule",{value:!0});const e=n($b()),t=n(e1()),r=bS();class o{constructor(i,{headers:a={},schema:A,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=A,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:A=!1,get:d=!1,count:c}={}){let u;const h=new URL(`${this.url}/rpc/${i}`);let f;A||d?(u=A?"HEAD":"GET",Object.entries(a).filter(([w,y])=>y!==void 0).map(([w,y])=>[w,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([w,y])=>{h.searchParams.append(w,y)})):(u="POST",f=a);const g=Object.assign({},this.headers);return c&&(g.Prefer=`count=${c}`),new t.default({method:u,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return Cd.default=o,Cd}var iw;function zS(){if(iw)return $o;iw=1;var n=$o&&$o.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty($o,"__esModule",{value:!0}),$o.PostgrestError=$o.PostgrestBuilder=$o.PostgrestTransformBuilder=$o.PostgrestFilterBuilder=$o.PostgrestQueryBuilder=$o.PostgrestClient=void 0;const e=n(xS());$o.PostgrestClient=e.default;const t=n($b());$o.PostgrestQueryBuilder=t.default;const r=n(e1());$o.PostgrestFilterBuilder=r.default;const o=n(Rb());$o.PostgrestTransformBuilder=o.default;const s=n(jb());$o.PostgrestBuilder=s.default;const i=n(Hb());return $o.PostgrestError=i.default,$o.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},$o}var BS=zS();const CS=fS(BS),{PostgrestClient:SS,PostgrestQueryBuilder:zK,PostgrestFilterBuilder:BK,PostgrestTransformBuilder:CK,PostgrestBuilder:SK,PostgrestError:EK}=CS,ES="2.11.2",FS={"X-Client-Info":`realtime-js/${ES}`},IS="1.0.0",qb=1e4,US=1e3;var ic;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ic||(ic={}));var ui;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ui||(ui={}));var Wi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Wi||(Wi={}));var z0;(function(n){n.websocket="websocket"})(z0||(z0={}));var Ql;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ql||(Ql={}));class QS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const A=r.decode(e.slice(i,i+s));i=i+s;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:A,payload:d}}}class Kb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Nn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Nn||(Nn={}));const aw=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=TS(i,n,e,o),s),{})},TS=(n,e,t,r)=>{const o=e.find(a=>a.name===n),s=o==null?void 0:o.type,i=t[n];return s&&!r.includes(s)?Vb(s,i):B0(i)},Vb=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return OS(e,t)}switch(n){case Nn.bool:return LS(e);case Nn.float4:case Nn.float8:case Nn.int2:case Nn.int4:case Nn.int8:case Nn.numeric:case Nn.oid:return PS(e);case Nn.json:case Nn.jsonb:return kS(e);case Nn.timestamp:return DS(e);case Nn.abstime:case Nn.date:case Nn.daterange:case Nn.int4range:case Nn.int8range:case Nn.money:case Nn.reltime:case Nn.text:case Nn.time:case Nn.timestamptz:case Nn.timetz:case Nn.tsrange:case Nn.tstzrange:return B0(e);default:return B0(e)}},B0=n=>n,LS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},PS=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},kS=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},OS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const i=n.slice(1,t);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>Vb(e,a))}return n},DS=n=>typeof n=="string"?n.replace(" ","T"):n,Gb=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hv{constructor(e,t,r={},o=qb){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Aw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Aw||(Aw={}));class _u{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_u.syncState(this.state,o,s,i),this.pendingDiffs.forEach(A=>{this.state=_u.syncDiff(this.state,A,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=_u.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const s=this.cloneDeep(e),i=this.transformState(t),a={},A={};return this.map(s,(d,c)=>{i[d]||(A[d]=c)}),this.map(i,(d,c)=>{const u=s[d];if(u){const h=c.map(y=>y.presence_ref),f=u.map(y=>y.presence_ref),g=c.filter(y=>f.indexOf(y.presence_ref)<0),w=u.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[d]=g),w.length>0&&(A[d]=w)}else a[d]=c}),this.syncDiff(s,{joins:a,leaves:A},r,o)}static syncDiff(e,t,r,o){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,A)=>{var d;const c=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(A),c.length>0){const u=e[a].map(f=>f.presence_ref),h=c.filter(f=>u.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,A)}),this.map(i,(a,A)=>{let d=e[a];if(!d)return;const c=A.map(u=>u.presence_ref);d=d.filter(u=>c.indexOf(u.presence_ref)<0),e[a]=d,o(a,d,A),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(lw||(lw={}));var dw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(dw||(dw={}));var aA;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(aA||(aA={}));class t1{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ui.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new hv(this,Wi.join,this.params,this.timeout),this.rejoinTimer=new Kb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ui.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ui.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ui.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ui.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wi.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new _u(this),this.broadcastEndpointURL=Gb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(c=>e==null?void 0:e(aA.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(aA.CLOSED));const A={},d={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},A)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var u;if(this.socket.setAuth(),c===void 0){e==null||e(aA.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,g=[];for(let w=0;w<f;w++){const y=h[w],{filter:{event:x,schema:C,table:I,filter:M}}=y,L=c&&c[w];if(L&&L.event===x&&L.schema===C&&L.table===I&&L.filter===M)g.push(Object.assign(Object.assign({},y),{id:L.id}));else{this.unsubscribe(),e==null||e(aA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(aA.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(aA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(aA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,A;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||A===void 0)&&A.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ui.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wi.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new hv(this,Wi.leave,{},e);o.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new hv(this,e,t,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:A,leave:d,join:c}=Wi;if(r&&[a,A,d,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var g,w,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(w=f.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(f=>f.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(f=>{var g,w,y,x,C,I;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const M=f.id,L=(g=f.filter)===null||g===void 0?void 0:g.event;return M&&((w=t.ids)===null||w===void 0?void 0:w.includes(M))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const M=(C=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return M==="*"||M===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:w,table:y,commit_timestamp:x,type:C,errors:I}=g;h=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:x,eventType:C,new:{},old:{},errors:I}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===ui.closed}_isJoined(){return this.state===ui.joined}_isJoining(){return this.state===ui.joining}_isLeaving(){return this.state===ui.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),s={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&t1.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wi.close,{},e)}_onError(e){this._on(Wi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ui.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=aw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=aw(e.columns,e.old_record)),t}}const NS=()=>{},MS=typeof WebSocket<"u",HS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jS{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=FS,this.params={},this.timeout=qb,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=NS,this.conn=null,this.sendBuffer=[],this.serializer=new QS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>ks(async()=>{const{default:A}=await Promise.resolve().then(()=>Fc);return{default:A}},void 0).then(({default:A})=>A(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${z0.websocket}`,this.httpEndpoint=Gb(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,i)=>i(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(MS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new RS(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ks(async()=>{const{default:e}=await import("./browser.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:IS}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ic.connecting:return Ql.Connecting;case ic.open:return Ql.Open;case ic.closing:return Ql.Closing;default:return Ql.Closed}}isConnected(){return this.connectionState()===Ql.Open}channel(e,t={config:{}}){const r=new t1(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var A;(A=this.conn)===null||A===void 0||A.send(a)})};this.log("push",`${t} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(Wi.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(US,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:o,payload:s,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([HS],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class RS{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ic.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class r1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ko(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class $S extends r1{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class C0 extends r1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const Wb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Fc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},KS=()=>qS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ks(()=>Promise.resolve().then(()=>Fc),void 0)).Response:Response}),S0=n=>{if(Array.isArray(n))return n.map(t=>S0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=S0(r)}),e};var ld=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const fv=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),VS=(n,e,t)=>ld(void 0,void 0,void 0,function*(){const r=yield KS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{e(new $S(fv(o),n.status||500))}).catch(o=>{e(new C0(fv(o),o))}):e(new C0(fv(n),n))}),GS=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),t))};function sh(n,e,t,r,o,s){return ld(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,GS(e,r,o,s)).then(A=>{if(!A.ok)throw A;return r!=null&&r.noResolveJson?A:A.json()}).then(A=>i(A)).catch(A=>VS(A,a,r))})})}function gp(n,e,t,r){return ld(this,void 0,void 0,function*(){return sh(n,"GET",e,t,r)})}function YA(n,e,t,r,o){return ld(this,void 0,void 0,function*(){return sh(n,"POST",e,r,o,t)})}function WS(n,e,t,r,o){return ld(this,void 0,void 0,function*(){return sh(n,"PUT",e,r,o,t)})}function XS(n,e,t,r){return ld(this,void 0,void 0,function*(){return sh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Xb(n,e,t,r,o){return ld(this,void 0,void 0,function*(){return sh(n,"DELETE",e,r,o,t)})}var Rs=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const YS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class JS{constructor(e,t={},r,o){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Wb(o)}uploadOrUpdate(e,t,r,o){return Rs(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},cw),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const A=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,A&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const d=this._removeEmptyFolders(t),c=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Ko(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return Rs(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let A;const d=Object.assign({upsert:cw.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",d.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",d.cacheControl)):(A=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:A,headers:c}),h=yield u.json();return u.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(A){if(Ko(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,t){return Rs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const s=yield YA(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new r1("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(Ko(r))return{data:null,error:r};throw r}})}update(e,t,r){return Rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Rs(this,void 0,void 0,function*(){try{return{data:yield YA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Ko(o))return{data:null,error:o};throw o}})}copy(e,t,r){return Rs(this,void 0,void 0,function*(){try{return{data:{path:(yield YA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Ko(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return Rs(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield YA(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(Ko(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return Rs(this,void 0,void 0,function*(){try{const o=yield YA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(Ko(o))return{data:null,error:o};throw o}})}download(e,t){return Rs(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gp(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ko(a))return{data:null,error:a};throw a}})}info(e){return Rs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield gp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:S0(r),error:null}}catch(r){if(Ko(r))return{data:null,error:r};throw r}})}exists(e){return Rs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield XS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ko(r)&&r instanceof C0){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&o.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});A!==""&&o.push(A);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return Rs(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ko(t))return{data:null,error:t};throw t}})}list(e,t,r){return Rs(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},YS),t),{prefix:e||""});return{data:yield YA(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(Ko(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ZS="2.7.1",e3={"X-Client-Info":`storage-js/${ZS}`};var Ud=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class t3{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},e3),t),this.fetch=Wb(r)}listBuckets(){return Ud(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ko(e))return{data:null,error:e};throw e}})}getBucket(e){return Ud(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ko(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ud(this,void 0,void 0,function*(){try{return{data:yield YA(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ko(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ud(this,void 0,void 0,function*(){try{return{data:yield WS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ko(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ud(this,void 0,void 0,function*(){try{return{data:yield YA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ko(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ud(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ko(t))return{data:null,error:t};throw t}})}}class r3 extends t3{constructor(e,t={},r){super(e,t,r)}from(e){return new JS(this.url,this.headers,e,this.fetch)}}const n3="2.48.1";let cu="";typeof Deno<"u"?cu="deno":typeof document<"u"?cu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cu="react-native":cu="node";const o3={"X-Client-Info":`supabase-js-${cu}/${n3}`},s3={headers:o3},i3={schema:"public"},a3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A3={};var l3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const d3=n=>{let e;return n?e=n:typeof fetch>"u"?e=Nb:e=fetch,(...t)=>e(...t)},c3=()=>typeof Headers>"u"?Mb:Headers,u3=(n,e,t)=>{const r=d3(t),o=c3();return(s,i)=>l3(void 0,void 0,void 0,function*(){var a;const A=(a=yield e())!==null&&a!==void 0?a:n;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${A}`),r(s,Object.assign(Object.assign({},i),{headers:d}))})};var h3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};function f3(n){return n.replace(/\/$/,"")}function p3(n,e){const{db:t,auth:r,realtime:o,global:s}=n,{db:i,auth:a,realtime:A,global:d}=e,c={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},A),o),global:Object.assign(Object.assign({},d),s),accessToken:()=>h3(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const Yb="2.67.3",g3="http://localhost:9999",v3="supabase.auth.token",m3={"X-Client-Info":`gotrue-js/${Yb}`},uw=10,E0="X-Supabase-Api-Version",Jb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function w3(n){return Math.round(Date.now()/1e3)+n}function y3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ba=()=>typeof window<"u"&&typeof document<"u",El={tested:!1,writable:!1},bu=()=>{if(!ba())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(El.tested)return El.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),El.tested=!0,El.writable=!0}catch{El.tested=!0,El.writable=!1}return El.writable};function _3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const Zb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Fc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},b3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",e5=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Nh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Mh=async(n,e)=>{await n.removeItem(e)};function x3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,o,s,i,a,A,d,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)i=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),A=e.indexOf(n.charAt(c++)),d=e.indexOf(n.charAt(c++)),r=i<<2|a>>4,o=(a&15)<<4|A>>2,s=(A&3)<<6|d,t=t+String.fromCharCode(r),A!=64&&o!=0&&(t=t+String.fromCharCode(o)),d!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class lg{constructor(){this.promise=new lg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}lg.promiseConstructor=Promise;function hw(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(x3(r))}async function z3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function B3(n,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await n(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function C3(n){return("0"+n.toString(16)).substr(-2)}function S3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let s=0;s<56;s++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,C3).join("")}async function E3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}function F3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function I3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await E3(n);return F3(t)}async function Qd(n,e,t=!1){const r=S3();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await e5(n,`${e}-code-verifier`,o);const s=await I3(r);return[s,r===s?"plain":"s256"]}const U3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q3(n){const e=n.headers.get(E0);if(!e||!e.match(U3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class n1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Nr(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class T3 extends n1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function L3(n){return Nr(n)&&n.name==="AuthApiError"}class t5 extends n1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class dd extends n1{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class KA extends dd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function P3(n){return Nr(n)&&n.name==="AuthSessionMissingError"}class pv extends dd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hh extends dd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jh extends dd{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k3(n){return Nr(n)&&n.name==="AuthImplicitGrantRedirectError"}class fw extends dd{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F0 extends dd{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function gv(n){return Nr(n)&&n.name==="AuthRetryableFetchError"}class pw extends dd{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var O3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};const Il=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),D3=[502,503,504];async function gw(n){var e;if(!b3(n))throw new F0(Il(n),0);if(D3.includes(n.status))throw new F0(Il(n),n.status);let t;try{t=await n.json()}catch(s){throw new t5(Il(s),s)}let r;const o=Q3(n);if(o&&o.getTime()>=Jb["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new pw(Il(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new KA}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new pw(Il(t),n.status,t.weak_password.reasons);throw new T3(Il(t),n.status||500,r)}const N3=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function Xr(n,e,t,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[E0]||(s[E0]=Jb["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",A=await M3(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(A):{data:Object.assign({},A),error:null}}async function M3(n,e,t,r,o,s){const i=N3(e,r,o,s);let a;try{a=await n(t,Object.assign({},i))}catch(A){throw console.error(A),new F0(Il(A),0)}if(a.ok||await gw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(A){await gw(A)}}function VA(n){var e;let t=null;$3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=w3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function vw(n){const e=VA(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function el(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function H3(n){return{data:n,error:null}}function j3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s}=n,i=O3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s},A=Object.assign({},i);return{data:{properties:a,user:A},error:null}}function R3(n){return n}function $3(n){return n.access_token&&n.refresh_token&&n.expires_in}var q3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};class K3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Zb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Xr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Nr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Xr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:el})}catch(r){if(Nr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=q3(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Xr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:j3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Nr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:el})}catch(t){if(Nr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,s,i,a,A;try{const d={nextPage:null,lastPage:0,total:0},c=await Xr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:R3});if(c.error)throw c.error;const u=await c.json(),h=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(A=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);d[`${y}Page`]=w}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Nr(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await Xr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:el})}catch(t){if(Nr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Xr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:el})}catch(r){if(Nr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Xr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:el})}catch(r){if(Nr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Xr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(Nr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Xr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Nr(t))return{data:null,error:t};throw t}}}const V3={getItem:n=>bu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{bu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{bu()&&globalThis.localStorage.removeItem(n)}};function mw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function G3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Td={debug:!!(globalThis&&bu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class r5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class W3 extends r5{}async function X3(n,e,t){Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Td.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Td.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new W3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Td.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}G3();const Y3={url:g3,storageKey:v3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:m3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},eu=30*1e3,ww=3;async function yw(n,e,t){return await t()}class Mu{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mu.nextInstanceID,Mu.nextInstanceID+=1,this.instanceID>0&&ba()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Y3),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new K3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Zb(o.fetch),this.lock=o.lock||yw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ba()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=X3:this.lock=yw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:bu()?this.storage=V3:(this.memoryStorage={},this.storage=mw(this.memoryStorage)):(this.memoryStorage={},this.storage=mw(this.memoryStorage)),ba()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=_3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ba()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),k3(s)){const A=(e=s.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Nr(t)?{error:t}:{error:new t5("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const s=await Xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:VA}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Nr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,o;try{let s;if("email"in e){const{email:c,password:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Qd(this.storage,this.storageKey)),s=await Xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:VA})}else if("phone"in e){const{phone:c,password:u,options:h}=e;s=await Xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:VA})}else throw new Hh("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Nr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:i,options:a}=e;t=await Xr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:vw})}else if("phone"in e){const{phone:s,password:i,options:a}=e;t=await Xr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:vw})}else throw new Hh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(Nr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Nh(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{const{data:s,error:i}=await Xr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:VA});if(await Mh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new pv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Nr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:s,nonce:i}=e,a=await Xr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:VA}),{data:A,error:d}=a;return d?{data:{user:null,session:null},error:d}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new pv}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:d})}catch(t){if(Nr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,s,i;try{if("email"in e){const{email:a,options:A}=e;let d=null,c=null;this.flowType==="pkce"&&([d,c]=await Qd(this.storage,this.storageKey));const{error:u}=await Xr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},create_user:(r=A==null?void 0:A.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:d,code_challenge_method:c},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:A}=e,{data:d,error:c}=await Xr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:c}}throw new Hh("You must provide either an email or phone number.")}catch(a){if(Nr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let o,s;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Xr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:VA});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const A=i.session,d=i.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(o){if(Nr(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await Qd(this.storage,this.storageKey)),await Xr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:H3})}catch(s){if(Nr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new KA;const{error:o}=await Xr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Nr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Xr(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await Xr(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Hh("You must provide either an email or phone number and a type")}catch(t){if(Nr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Nh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,d,c)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,d,c))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Xr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:el}):await this._useSession(async t=>{var r,o,s;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new KA}:await Xr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:el})})}catch(t){if(Nr(t))return P3(t)&&(await this._removeSession(),await Mh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new KA;const i=o.session;let a=null,A=null;this.flowType==="pkce"&&e.email!=null&&([a,A]=await Qd(this.storage,this.storageKey));const{data:d,error:c}=await Xr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:A}),jwt:i.access_token,xform:el});if(c)throw c;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Nr(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return hw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new KA;const t=Date.now()/1e3;let r=t,o=!0,s=null;const i=hw(e.access_token);if(i.exp&&(r=i.exp,o=r<=t),o){const{session:a,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:A}=await this._getUser(e.access_token);if(A)throw A;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Nr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new KA;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Nr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ba())throw new jh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fw("No code detected.");const{data:C,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:A,token_type:d}=e;if(!s||!a||!i||!d)throw new jh("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;A&&(h=parseInt(A));const f=h-c;f*1e3<=eu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=h-u;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:w,error:y}=await this._getUser(s);if(y)throw y;const x={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Nr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Nh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(L3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Mh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=y3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:s},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Qd(this.storage,this.storageKey,!0));try{return await Xr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Nr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Nr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,A,d,c;const{data:u,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Xr(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0})});if(o)throw o;return ba()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Nr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)throw i;return await Xr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(Nr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await B3(async o=>(o>0&&await z3(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await Xr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:VA})),(o,s)=>{const i=200*Math.pow(2,o);return s&&gv(s)&&Date.now()+i-r<eu})}catch(r){if(this._debug(t,"error",r),Nr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ba()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Nh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+uw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${uw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),gv(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new KA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new lg;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new KA;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),Nr(s)){const i={session:null,error:s};return gv(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(A){s.push(A)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await e5(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Mh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ba()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),eu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/eu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${eu}ms, refresh threshold is ${ww} ticks`),o<=ww&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof r5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ba()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await Qd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Xr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Nr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:A,error:d}=await Xr(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=A==null?void 0:A.totp)===null||o===void 0)&&o.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(t){if(Nr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await Xr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(Nr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Xr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Nr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let a=null;i.aal&&(a=i.aal);let A=a;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:A,currentAuthenticationMethods:c},error:null}}))}}Mu.nextInstanceID=0;const J3=Mu;class Z3 extends J3{constructor(e){super(e)}}var eE=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class tE{constructor(e,t,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=f3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const A=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:i3,realtime:A3,auth:Object.assign(Object.assign({},a3),{storageKey:A}),global:s3},c=p3(r??{},d);this.storageKey=(o=c.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=u3(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new SS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new hS(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new r3(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return eE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:A},d,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z3({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:A,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new jS(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rE=(n,e,t)=>new tE(n,e,t),nE="https://mprzyonufqescpcpusno.supabase.co",oE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wcnp5b251ZnFlc2NwY3B1c25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk3NjAwMzIsImV4cCI6MjA0NTMzNjAzMn0._EwKZZ9Yk-C6t96up66bvHDv_pLcE5HDD1TNpi2dWy4",pt=rE(nE,oE);async function ih(n,e){const{data:t,error:r}=await pt.from("products").select(`
            *,
            variants:product_variants(
                *,
                prices(*),
                option_values:product_variant_option_values(
                    option_value:product_option_values(
                        *,
                        option:product_options(*)
                    )
                )
            ),
            categories:categories(*),
            options:product_options(
                *,
                values:product_option_values(*)
            ),
            process:processes(*)
        `).eq("id",n).eq("shop",e).single();if(r)throw r;return t}async function cl(n){const{data:e,error:t}=await pt.from("product_variants").select(" *, prices(*)").eq("id",n).single();if(t)throw t;return e}async function n5(){const{data:n,error:e}=await pt.from("categories").select("*").order("name");if(e)throw e;const t=n||[],r=new Map,o=[];return t.forEach(s=>{r.set(s.id,{...s,children:[]})}),t.forEach(s=>{const i=r.get(s.id);if(i)if(s.parent_category_id){const a=r.get(s.parent_category_id);a&&(a.children=a.children||[],a.children.push(i))}else o.push(i)}),o}async function Kf(n,e,t=1,r=12,o,s=!1){const i=(t-1)*r,a=i+r-1;let A=pt.from("products").select(`
      *,
      variants:product_variants(
        *,
        prices(*)
      )
    `,{count:"exact"}).ilike("title",`%${n}%`).range(i,a).order("created_at",{ascending:!1});if(o==="godo"&&(A=A.not("godo_product","is",null)),s&&(A=A.not("process_id","is",null)),e){const{data:h}=await pt.from("product_categories").select("product_id").eq("category_id",e),f=(h==null?void 0:h.map(g=>g.product_id))||[];A=A.in("id",f)}const{data:d,error:c,count:u}=await A;if(c)throw c;return{products:d||[],total:u||0}}async function I0(n,e){if(!n||!e)return console.warn("getProductByMallInfo: mallType or mallProductNo is missing."),null;const{data:t,error:r}=await pt.from("products").select("*").eq("mall_type",n).eq("mall_product_id",e).maybeSingle();if(r)throw console.error("Error fetching product by mall info:",r),r;return t||console.log("Product not found for given mall info."),t}async function ah(n){const{data:e,error:t}=await pt.from("product_addons").select("*").eq("product_id",n).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching product addons:",t),t;if(!e||e.length===0)return[];const r=[];for(const o of e){const{data:s,error:i}=await pt.from("product_addon_items").select(`
        *,
        addon_product:products(
          *,
          variants:product_variants(
            *,
            prices(*)
          )
        )
      `).eq("addon_id",o.id);if(i){console.error("Error fetching addon items:",i);continue}r.push({...o,items:s||[]})}return r}const sE=Object.freeze(Object.defineProperty({__proto__:null,getCategories:n5,getProductAddons:ah,getProductById:ih,getProductByMallInfo:I0,getProductVariant:cl,searchProducts:Kf},Symbol.toStringTag,{value:"Module"}));function ea(n,e,t){if(!t||t.length===0)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};const r=t.find(i=>n>=i.min_quantity&&n<=i.max_quantity);if(!r)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};let o=e,s=0;if(r.type==="amount")r.direction==="minus"?(o=Math.max(0,e-r.value),s=e-o):(o=e+r.value,s=-r.value);else if(r.type==="percentage"){const i=r.value/100;r.direction==="minus"?(s=e*i,o=e-s):(s=-(e*i),o=e+Math.abs(s))}return{originalPrice:e,discountedPrice:o,discountAmount:s,discountInfo:r,hasDiscount:s!==0}}const iE={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1};function aE(){const{subscribe:n,set:e,update:t}=Ad(iE);return{subscribe:n,set:e,update:t,async loadIntegratedProductData(r,o){var i;const s=Un({subscribe:n});if((i=s.productDataCache[r])!=null&&i.isLoaded)return s.productDataCache[r];if(s.loadingProducts.has(r))return new Promise((a,A)=>{const d=setInterval(()=>{var u;const c=Un({subscribe:n});c.loadingProducts.has(r)||(clearInterval(d),(u=c.productDataCache[r])!=null&&u.isLoaded?a(c.productDataCache[r]):A(new Error("   ")))},100)});t(a=>({...a,loadingProducts:new Set([...a.loadingProducts,r]),isGlobalLoading:!0,productDataCache:{...a.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0}}}));try{const[a,A]=await Promise.all([ih(r,o),ah(r)]);if(!a)throw new Error("   ");const d={};A.forEach(u=>{u.items.forEach(h=>{h.addon_product.variants&&h.addon_product.variants.length>0&&(d[h.addon_product.id]={price:h.addon_product.variants[0].prices[0].amount,title:h.addon_product.title,variants:h.addon_product.variants,description:h.addon_product.description,thumbnail:h.addon_product.thumbnail})})});const c={id:r,product:a,addons:A,process:a.process,addonProductsMap:d,isLoaded:!0,isLoading:!1};return t(u=>{const h=new Set(u.loadingProducts);return h.delete(r),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[r]:c}}}),c}catch(a){throw console.error("   :",a),t(A=>{const d=new Set(A.loadingProducts);return d.delete(r),{...A,loadingProducts:d,isGlobalLoading:d.size>0,productDataCache:{...A.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:a instanceof Error?a.message:"   "}}}}),a}},async loadMultipleProductData(r,o){t(s=>({...s,isGlobalLoading:!0}));try{const s=r.map(a=>this.loadIntegratedProductData(a,o)),i=await Promise.all(s);return t(a=>({...a,isGlobalLoading:!1})),i}catch(s){throw t(i=>({...i,isGlobalLoading:!1})),s}},getProductData(r){return Un({subscribe:n}).productDataCache[r]||null},clearProductData(r){t(r?o=>{const s={...o.productDataCache};return delete s[r],{...o,productDataCache:s}}:o=>({...o,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1}))},isProductLoading(r){return Un({subscribe:n}).loadingProducts.has(r)},isGlobalLoading(){return Un({subscribe:n}).isGlobalLoading},isCached(r){var s;return((s=Un({subscribe:n}).productDataCache[r])==null?void 0:s.isLoaded)===!0}}}const Yd=aE(),gi=Ad(null);function AE(){const n={},e={products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null},{subscribe:t,set:r,update:o}=Ad(e),s=i=>{const a=i.products.map(h=>{var Z;let f=0,g={originalAmount:0,discountAmount:0,hasDiscount:!1,discountDetails:void 0};const w=(h.variants||[]).reduce((Be,N)=>Be+(N.quantity||0),0),y=(h.variants||[]).map(Be=>{const N=Be.quantity||0,k=Be.prices[0].amount;if(N>0){if(Be.isDiscountedPrice)return{originalAmount:k*N,discountedAmount:k*N,discountAmount:0,discountDetails:void 0,hasDiscount:!1};const J=ea(w,k,h.product.quantity_discounts);return{originalAmount:k*N,discountedAmount:J.discountedPrice*N,discountAmount:J.discountAmount*N,discountDetails:J.discountInfo,hasDiscount:J.hasDiscount}}else return{originalAmount:k*N,discountedAmount:k*N,discountAmount:0,discountDetails:void 0,hasDiscount:!1}});f=y.reduce((Be,N)=>Be+N.discountedAmount,0);const x=y.some(Be=>Be.hasDiscount),C=(Z=y.find(Be=>Be.hasDiscount))==null?void 0:Z.discountDetails;g={originalAmount:y.reduce((Be,N)=>Be+N.originalAmount,0),discountAmount:y.reduce((Be,N)=>Be+N.discountAmount,0),hasDiscount:x,discountDetails:C};let I=0;const M=h.prints&&h.prints.length>0,L=h.simplePrints&&h.simplePrints.length>0,ee=h.print_type==="simple"&&L||L&&!M;M&&!ee&&(I=(h.prints||[]).reduce((Be,N)=>Be+(N.price||0),0));let W=0;if(h.addons&&Object.keys(h.addons).length>0){const Be=h.quantity||0;W=Object.values(h.addons).reduce((N,k)=>{if(k.price!==void 0){const J=k.quantity||1;return N+k.price*J}if(h.addonProductsMap){const J=h.addonProductsMap[k.productId];if(J&&k.variantId){const ne=J.variants.find(ge=>ge.id===k.variantId);if(ne&&ne.prices&&ne.prices.length>0)return N+ne.prices[0].amount*Be}}return N},0)}const R=f+I+W;return{...h,productAmount:f,printAmount:I,addonAmount:W,totalAmount:R,discountInfo:g}}),A=a.reduce((h,f)=>h+f.quantity,0),d=a.reduce((h,f)=>h+(f.productAmount||0),0),c=a.reduce((h,f)=>h+(f.printAmount||0),0),u=a.reduce((h,f)=>h+(f.addonAmount||0),0);return{products:a,totalQuantity:A,totalProductAmount:d,totalPrintAmount:c,totalAddonAmount:u,totalAmount:d+c+u+(i.totalAdditionalAmount||0)}};return{subscribe:t,set:r,update:o,async addProductWithIntegratedData(i,a){try{const A=await Yd.loadIntegratedProductData(i,a),d={product:A.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:A.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};o(c=>({...c,products:[...c.products,d],index:c.products.length}))}catch(A){throw console.error("  :",A),A}},async preloadProductsForFixedMode(i,a){try{const d=(await Yd.loadMultipleProductData(i,a)).map(c=>({product:c.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:c.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0}));o(c=>({...c,products:d,index:0}))}catch(A){throw console.error("   :",A),A}},async refreshProductData(i,a){const d=Un({subscribe:t}).products[i];if(!d)throw new Error("   ");try{Yd.clearProductData(d.product.id);const c=await Yd.loadIntegratedProductData(d.product.id,a);o(u=>({...u,products:u.products.map((h,f)=>f===i?{...h,product:c.product,addonProductsMap:c.addonProductsMap,isLoaded:!0}:h)}))}catch(c){throw console.error("   :",c),c}},reset:()=>{r({products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null})},calculatePrintPrice:async(i,a=!1)=>{const A=Un(Et),d=A.products[i];if(console.log({product:d}),d.prints&&d.prints.length>0)for(const c of d.prints){console.log({print:c});let u=0,h=0;if(c.colors&&c.template.templateProduct){const f=c.template.templateProduct.template_product_variants.find(g=>g.color_count===c.colors.length);if(console.log({selectedVariant:f}),f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await cl(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=ea(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}else if(c.template.templateProduct){const f=c.template.templateProduct.template_product_variants[0];if(f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await cl(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=ea(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}}if(!a){const c=s(A);r({...A,...c,totalAdditionalAmount:A.totalAdditionalAmount})}},updateTotalAmounts:()=>{o(i=>{const a=s(i);return{...i,...a,totalAdditionalAmount:i.totalAdditionalAmount}})},cancelPrint:(i,a)=>{o(A=>{var c;A.products[i].prints=(c=A.products[i].prints)==null?void 0:c.filter(u=>u.objectId!==a);const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}})},updateSimplePrint:(i,a,A)=>{o(d=>{d.products[i].prints||(d.products[i].prints=[]);const c=d.products[i].prints.findIndex(u=>u.objectId===a);return c>=0?d.products[i].prints[c]={...d.products[i].prints[c],...A}:d.products[i].prints.push(A),d})},saveSimplePrintState:(i,a)=>{console.log("Store: saveSimplePrintState ",{productIndex:i,selectedAreasCount:a.length,selectedAreas:a}),o(A=>A.products[i]?(A.products[i].simplePrintState=a,console.log("Store: saveSimplePrintState ",{productIndex:i,savedState:A.products[i].simplePrintState}),A):(console.warn("Store: saveSimplePrintState -   :",i),A))},getSimplePrintState:i=>{var d;const a=Un(Et),A=((d=a.products[i])==null?void 0:d.simplePrintState)||[];return console.log("Store: getSimplePrintState ",{productIndex:i,hasProduct:!!a.products[i],result:A,resultType:typeof A,resultLength:Array.isArray(A)?A.length:"not array"}),A},updateProductPrintType:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateProductPrintType ",{idx:i,printType:a,previousPrintType:A.products[i].print_type}),A.products[i].print_type=a,(a==="simple"||a==="none")&&(A.products[i].prints=[],A.products[i].printAmount=0);const d=s(A);return{...A,totalProductAmount:d.totalProductAmount,totalPrintAmount:d.totalPrintAmount,totalAddonAmount:d.totalAddonAmount,totalAdditionalCostAmount:d.totalAdditionalCostAmount,totalAmount:d.totalAmount}}return A})}}}const Et=AE();function lE(){const n={name:"",phone:"",address1:"",address2:"",postcode:""},{subscribe:e,set:t,update:r}=Ad(n);return{subscribe:e,set:t,update:r,reset:()=>{console.log(" Customer Store "),t(n)}}}const Vl=lE(),Er=n=>n.toLocaleString("ko-KR");/**
* @license lucide-svelte v0.475.0 - ISC
*
* ISC License
* 
* Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
* 
* Permission to use, copy, modify, and/or distribute this software for any
* purpose with or without fee is hereby granted, provided that the above
* copyright notice and this permission notice appear in all copies.
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
* WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
* ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
* WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
* ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
* OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*/const dE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var cE=ag("<svg><!><!></svg>");function un(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]),r=rn(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Jr(e,!1);let o=gt(e,"name",8,void 0),s=gt(e,"color",8,"currentColor"),i=gt(e,"size",8,24),a=gt(e,"strokeWidth",8,2),A=gt(e,"absoluteStrokeWidth",8,!1),d=gt(e,"iconNode",24,()=>[]);const c=(...w)=>w.filter((y,x,C)=>!!y&&C.indexOf(y)===x).join(" ");nn();var u=cE();let h;var f=m(u);nr(f,1,d,gr,(w,y)=>{let x=()=>l(y)[0],C=()=>l(y)[1];var I=Lt(),M=lt(I);G4(M,x,!0,(L,ee)=>{let W;ke(()=>W=K2(L,W,{...C()},void 0,L.namespaceURI===nb,L.nodeName.includes("-")))}),U(w,I)});var g=z(f);An(g,e,"default",{}),ke((w,y)=>h=K2(u,h,{...dE,...r,width:i(),height:i(),stroke:s(),"stroke-width":w,class:y},void 0,!0),[()=>A()?Number(a())*24/Number(i()):a(),()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],at),U(n,u),Zr()}function HA(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"asterisk"},()=>t,{iconNode:[["path",{d:"M12 6v12"}],["path",{d:"M17.196 9 6.804 15"}],["path",{d:"m6.804 9 10.392 6"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function _w(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"book-text"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["path",{d:"M8 11h8"}],["path",{d:"M8 7h6"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function uE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"bot"},()=>t,{iconNode:[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function bw(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"building-2"},()=>t,{iconNode:[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}],["path",{d:"M10 6h4"}],["path",{d:"M10 10h4"}],["path",{d:"M10 14h4"}],["path",{d:"M10 18h4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function hE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function o1(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Hu(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"circle-x"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function vp(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"clock"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function o5(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"eye"},()=>t,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Rh(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"file-text"},()=>t,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function fE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"filter"},()=>t,{iconNode:[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function pE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"key"},()=>t,{iconNode:[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function ac(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"loader-circle"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function s1(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function gE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"mail"},()=>t,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function vE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"message-square"},()=>t,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function ju(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"package"},()=>t,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function s5(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function xw(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"phone"},()=>t,{iconNode:[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function Ru(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function mE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"printer"},()=>t,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function wE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"refresh-cw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function zw(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"rotate-ccw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function yE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function mp(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function _E(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"send"},()=>t,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function bE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"shopping-bag"},()=>t,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function xE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"shopping-cart"},()=>t,{iconNode:[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function i1(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"trash-2"},()=>t,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function zE(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"user-cog"},()=>t,{iconNode:[["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m21.7 16.4-.9-.3"}],["path",{d:"m15.2 13.9-.9-.3"}],["path",{d:"m16.6 18.7.3-.9"}],["path",{d:"m19.1 12.2.3-.9"}],["path",{d:"m19.6 18.7-.4-1"}],["path",{d:"m16.8 12.3-.4-1"}],["path",{d:"m14.3 16.6 1-.4"}],["path",{d:"m20.7 13.8 1-.4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function wp(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"user"},()=>t,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}function ed(n,e){const t=rn(e,["children","$$slots","$$events","$$legacy"]);un(n,cn({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,s)=>{var i=Lt(),a=lt(i);An(a,e,"default",{}),U(o,i)},$$slots:{default:!0}}))}async function BE(n,e,t,r,o){let s=pt.from("estimates").select("*").eq("is_delete",!1).neq("status","temp").order("created_at",{ascending:!1});t&&(s=s.eq("shop_id",t)),e?s=s.eq("customer_id",e):n&&(s=s.eq("sess",n)),r&&(s=s.gte("created_at",`${r}T00:00:00`)),o&&(s=s.lte("created_at",`${o}T23:59:59`));const{data:i,error:a}=await s;if(a)throw a;return i||[]}async function a1(n,e,t){if(n&&e){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("mall_type",n).eq("customer_id",e).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}if(t){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("sess",t).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}return null}async function td(n){const{data:e,error:t}=await pt.from("estimates").select("*").eq("id",n).eq("is_delete",!1).single();if(t)throw t;return e}function rd(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${e}${t}${r}${o}${s}${i}`}async function A1(n){const e={...n,estimate_no:rd(),customer_id:n.customer_id===""?null:n.customer_id,sess:n.sess===""?null:n.sess},{data:t,error:r}=await pt.from("estimates").insert(e).select().single();if(r)throw r;return t}async function yc(n,e){const{data:t,error:r}=await pt.from("estimates").select("estimate_no, customer_id, sess").eq("id",n).single();if(r)throw r;const o={...e};(e.customer_id===""||e.customer_id===void 0)&&((t==null?void 0:t.customer_id)===null?o.customer_id=null:e.customer_id===""&&delete o.customer_id),(e.sess===""||e.sess===void 0)&&(t!=null&&t.sess?delete o.sess:e.sess===""&&(o.sess=null)),t!=null&&t.estimate_no||(o.estimate_no=rd());const{error:s}=await pt.from("estimates").update(o).eq("id",n);if(s)throw s;const{data:i,error:a}=await pt.from("estimates").select("*").eq("id",n).single();if(a)throw a;if(!i)throw new Error("   .");return i}async function $u(n){const{data:e,error:t}=await pt.from("estimate_items").select(`
      *,
      product:products(*),
      variant:product_variants(id, title, thumbnail)
    `).eq("estimate_id",n);if(t)throw t;return(e||[]).map(r=>{var o;return{...r,variant_title:((o=r.variant)==null?void 0:o.title)||null}})}async function l1(n){const{data:e,error:t}=await pt.from("estimate_items").insert(n).select().single();if(t)throw t;return e}async function i5(n){const{error:e}=await pt.from("estimate_items").delete().eq("id",n);if(e)throw e}async function _c(n){const{data:e,error:t}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function d1(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function c1(n){const{data:e,error:t}=await pt.from("estimate_prints").insert(n).select().single();if(t)throw t;return e}async function a5(n){const{error:e}=await pt.from("estimate_prints").delete().eq("id",n);if(e)throw e}async function U0(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").insert(n).select().single();if(t)throw t;return e}async function A5(n,e){const{data:t,error:r}=await pt.from("estimates").update({status:e}).eq("id",n).select().single();if(r)throw r;return t}function dg(n,e){return pt.channel(`estimate-${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"estimates",filter:`id=eq.${n}`},t=>{e(t.new)}).subscribe()}function Q0(n,e,t,r){const o=r?`estimate-list-${e}-${r}`:`estimate-list-${n}-${e}`;let s=`shop_id=eq.${e}`;return r?s=`customer_id=eq.${r}`:n&&(s=`sess=eq.${n}`),pt.channel(o).on("postgres_changes",{event:"*",schema:"public",table:"estimates",filter:s},i=>{t({...i,eventType:i.eventType})}).subscribe()}function Ac(n){return n===void 0||n==="temp"||n==="pending"}async function u1(n){try{const e=td(n),t=$u(n),r=_c(n),[o,s,i]=await Promise.all([e,t,r]);return{estimate:o,items:s||[],prints:i||[]}}catch(e){throw e}}async function l5(n){const{data:e,error:t}=await pt.from("estimate_comments").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function Vf(n){const{data:e,error:t}=await pt.from("estimate_comments").insert(n).select().single();if(t)throw t;return e}function h1(n,e){return pt.channel(`estimate-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_comments",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}async function d5(){var n,e;try{const t=document.getElementById("odiz-customer-id"),r=document.getElementById("odiz-sess"),o=(n=t==null?void 0:t.value)==null?void 0:n.trim(),s=(e=r==null?void 0:r.value)==null?void 0:e.trim();if(!o||!s)return 0;const{data:i,error:a}=await pt.from("estimates").select("id").eq("sess",s).is("customer_id",null);if(a)throw a;if(!i||i.length===0)return 0;const{data:A,error:d}=await pt.from("estimates").update({customer_id:o}).eq("sess",s).is("customer_id",null).select();if(d)throw d;return(A==null?void 0:A.length)||0}catch{return 0}}function f1(n,e){return pt.channel(`estimate-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}function c5(n,e){return pt.channel(`estimate-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateItems  :",r)})}function u5(n,e){return pt.channel(`estimate-simple-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_simple_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateSimplePrints  :",r)})}function h5(n,e){return pt.channel(`estimate-addon-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_addon_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAddonItems  :",r)})}function f5(n,e){return pt.channel(`estimate-additional-costs-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_additional_costs",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAdditionalCosts  :",r)})}async function p5(n,e,t,r,o){const s=t?t.replace(/[\s\-\(\)\.]/g,""):"";let i=pt.from("estimates").select("*").eq("shop_id",n).or("customer_id.is.null,customer_id.eq.").neq("status","temp").order("created_at",{ascending:!1});r&&!e&&!s?i=i.eq("sess",r):(e&&(i=i.ilike("order_name",`%${e}%`)),s&&(i=i.filter("order_phone","ilike",`%${s}%`))),o&&(i=i.eq("mall_type",o));const{data:a,error:A}=await i;if(A)throw A;return a||[]}async function g5(n){try{const{data:e,error:t}=await pt.from("estimate_items").select(`
        *,
        product:products(*)
      `).eq("estimate_id",n).order("idx");if(t)throw t;const{data:r,error:o}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).order("idx");if(o)throw o;const s={};return(e||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,product:i.product,items:[],prints:[]}),s[a].items.push(i)}),(r||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,items:[],prints:[]}),s[a].prints.push(i)}),Object.values(s)}catch(e){throw e}}async function cg(n){const{data:e,error:t}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).order("idx");if(t)throw t;return e||[]}async function v5(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("id",n).single();if(t)throw t;return e||null}async function p1(n){const e={...n,selected_variant_id:n.selected_variant_id&&n.selected_variant_id.trim()!==""?n.selected_variant_id:null},{data:t,error:r}=await pt.from("estimate_addon_items").insert(e).select().single();if(r)throw r;return t}async function m5(n,e){const{error:t}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t}async function g1(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function w5(n){try{const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at");if(t)throw t;return(e||[]).map((o,s)=>({id:o.id,product:{name:o.name,title:o.name,mall_type:o.mall_type||null,mall_product_id:o.mall_product_id||null},items:[{estimate_id:n,quantity:1,price:o.amount}],additionalCosts:[o],isAdditionalCost:!0}))}catch(e){throw e}}async function y5(n){const{data:e,error:t}=await pt.from("estimate_items").select("idx").eq("estimate_id",n).order("idx",{ascending:!1}).limit(1).single();return t||!e?-1:e.idx}async function _5(n,e,t,r){try{const o=await a1(e,t,r);let s,i,a=!1,A=0;if(o&&o.id)s=o.id,i=o.estimate_no||rd(),await yc(s,{...n.estimate,estimate_no:i}),A=await y5(s)+1;else{const g={...n.estimate,estimate_no:rd(),status:"temp",customer_id:n.estimate.customer_id===""?null:n.estimate.customer_id,sess:n.estimate.sess===""?null:n.estimate.sess},{data:w,error:y}=await pt.from("estimates").insert(g).select().single();if(y)throw new Error(`  : ${y.message}`);s=w.id,i=w.estimate_no,a=!0}let d=0;if(n.estimate_items&&n.estimate_items.length>0){const g=n.estimate_items.map(x=>({...x,estimate_id:s,idx:A})),{data:w,error:y}=await pt.from("estimate_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);d=(w==null?void 0:w.length)||0}let c=0;if(n.estimate_simple_prints&&n.estimate_simple_prints.length>0){const g=n.estimate_simple_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:y}=await pt.from("estimate_simple_prints").insert(g).select();if(y)throw new Error(`   : ${y.message}`);c=(w==null?void 0:w.length)||0}let u=0;if(n.estimate_prints&&n.estimate_prints.length>0){const g=n.estimate_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:y}=await pt.from("estimate_prints").insert(g).select();if(y)throw new Error(`    : ${y.message}`);if(u=(w==null?void 0:w.length)||0,u>0){const{error:x}=await pt.from("estimate_items").update({print_type:"detailed"}).eq("estimate_id",s).eq("idx",A)}}let h=0;if(n.estimate_addon_items&&n.estimate_addon_items.length>0){const g=n.estimate_addon_items.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A,selected_variant_id:x.selected_variant_id&&x.selected_variant_id.trim()!==""?x.selected_variant_id:null})),{data:w,error:y}=await pt.from("estimate_addon_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);h=(w==null?void 0:w.length)||0}const f={success:!0,estimateId:s,details:{estimateCount:a?1:0,itemsCount:d,simplePrintsCount:c,detailedPrintsCount:u,addonItemsCount:h}};return await v1(s),f}catch(o){return{success:!1,error:o instanceof Error?o.message:"    ."}}}async function T0(n,e){try{const{error:t}=await pt.from("estimate_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t;const{error:r}=await pt.from("estimate_prints").delete().eq("estimate_id",n).eq("idx",e);if(r)throw r;const{error:o}=await pt.from("estimate_simple_prints").delete().eq("estimate_id",n).eq("idx",e);if(o)throw o;const{error:s}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(s)throw s}catch(t){throw t}}async function b5(n,e){try{const{data:t,error:r}=await pt.from("estimate_items").select(`
        *,
        product:products(
          *,
          options:product_options(
            *,
            values:product_option_values(*)
          ),
          variants:product_variants(*)
        )
      `).eq("estimate_id",n).eq("idx",e);if(r)throw r;if(t&&t.length>0)for(const h of t)if(h.variant_id)try{const{data:f,error:g}=await pt.from("product_variants").select("*").eq("id",h.variant_id).single();if(g)h.variant=null;else{h.variant=f;try{const{data:w,error:y}=await pt.from("prices").select("*").eq("variant_id",h.variant_id);y?h.variant.prices=[]:h.variant.prices=w||[]}catch{h.variant.prices=[]}try{const{data:w,error:y}=await pt.from("product_variant_option_values").select("option_value_id").eq("variant_id",h.variant_id);if(y||!w||w.length===0)h.variant.option_values=[];else{const x=w.map(I=>I.option_value_id).filter(Boolean),C=[];for(const I of x)try{const{data:M,error:L}=await pt.from("product_option_values").select("id, value, option_id").eq("id",I).single();if(L||!M)continue;let ee=null;if(M.option_id){const{data:W,error:R}=await pt.from("product_options").select("*").eq("id",M.option_id).single();!R&&W&&(ee={id:W.id,name:W.title})}C.push({option_value:{id:M.id,value:M.value,option_id:M.option_id,option:ee}})}catch{}h.variant.option_values=C}}catch{h.variant.option_values=[]}}}catch{h.variant=null}else h.variant=null;const{data:o,error:s}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).eq("idx",e);if(s)throw s;if(o&&o.length>0){const{getParentTemplates:h}=await ks(async()=>{const{getParentTemplates:f}=await Promise.resolve().then(()=>CE);return{getParentTemplates:f}},void 0);for(const f of o)if(f.template_id)try{const g=await h(f.template_id);f.parentTemplates=g}catch{f.parentTemplates=[]}else f.parentTemplates=[]}const{data:i,error:a}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("idx",e);if(a)throw a;const{data:A,error:d}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).eq("idx",e);if(d)throw d;const c=t&&t.length>0?t[0].product_id:null;let u=[];if(c)try{const{getProductAddons:h}=await ks(async()=>{const{getProductAddons:f}=await Promise.resolve().then(()=>sE);return{getProductAddons:f}},void 0);u=await h(c)}catch{u=[]}return{items:t||[],prints:o||[],simplePrints:i||[],addonItems:A||[],addons:u||[]}}catch(t){throw t}}function x5(n){const e={};return n.forEach((t,r)=>{if(!t.variant)return;const o=t.variant;let s="";if(o.option_values&&Array.isArray(o.option_values)&&o.option_values.length>0)try{const a=o.option_values.find(A=>{var c;if(!A||!A.option_value)return!1;const d=(c=A.option_value.option)==null?void 0:c.name;return d===""||d===""||d==="color"||d==="Color"});a&&a.option_value&&(s=a.option_value.value||"")}catch{}if(!s&&o.title){const a=o.title.split("/").map(A=>A.trim());a.length>0&&(s=a[0])}s||(s=""),e[s]||(e[s]=[]),e[s].some(a=>a.id===o.id)||e[s].push({id:o.id,title:o.title,thumbnail:o.thumbnail,product_id:o.product_id,prices:t.variant.prices||[],option_values:o.option_values||[]})}),e}function z5(n,e){var y,x,C;if(!n.items||n.items.length===0)throw new Error("estimate_items  ");const t=(y=n.items[0])==null?void 0:y.product_id;if(!t)throw new Error("Product ID   ");let r;r=x5(n.items),Object.keys(r).length;const o={},s={},i=new Set;let a=0;n.items.forEach((I,M)=>{const L=I.variant_id,ee=I.quantity||0;a+=ee;let W="";for(const[R,Z]of Object.entries(r))if(Z.some(Be=>Be.id===L)){W=R,i.add(R);break}W&&(o[W]||(o[W]={}),o[W][L]=ee),(I.discount_amount>0||I.discount_value>0)&&(s[L]={hasDiscount:!0,discountedPrice:I.price,discountAmount:I.discount_amount,discountInfo:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}})});const A={productId:t,product:(x=n.items[0])==null?void 0:x.product,addons:n.addons||[],addonItems:n.addonItems||[],selectedColors:Array.from(i),quantityByVariant:o,variantsByColor:r,variantDiscounts:s,totalQuantity:a,isCompleted:!0,lastUpdated:Date.now()},d=(n.simplePrints||[]).map(I=>({objectId:I.object_id,title:I.title,printMethod:I.print_method,uploadedFiles:I.uploaded_files,savedFileInfo:I.file_metadata,price:I.price})),c=n.prints.map((I,M)=>({template:{id:I.template_id},template_id:I.template_id,variant_id:I.variant_id,colors:I.colors,uploads:I.uploads,nameSheet:I.name_sheet,name_sheet:I.name_sheet,objectId:I.object_id,object_id:I.object_id,price:I.price,original_price:I.original_price,discount_amount:I.discount_amount,discount_type:I.discount_type,discount_value:I.discount_value,discount_direction:I.discount_direction,discount_min_quantity:I.discount_min_quantity,discount_max_quantity:I.discount_max_quantity,parentTemplates:I.parentTemplates||[],discountInfo:{originalPrice:I.original_price,discountAmount:I.discount_amount,discountDetails:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}}})),u={};n.addonItems.forEach(I=>{u[I.addon_id]={productId:I.selected_product_id,variantId:I.selected_variant_id}});const h={productId:t,selectedAddons:u,isCompleted:!0,lastUpdated:Date.now()};let f="none";const g=(C=n.items[0])==null?void 0:C.print_type;g&&["simple","detailed","self-design","none"].includes(g)?f=g:(f="selection",(d.length>0||c.length>0)&&console.warn("    print_type .    ."));const w={productId:t,currentMethod:f,isCompleted:!0,lastUpdated:Date.now()};return{productId:t,fixedEstimateData:{productId:t,productSelection:A,printSelection:w,addonSelection:h,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:Date.now().toString(36)+Math.random().toString(36).substr(2)},sessionStorageData:{fixedEstimateKey:`fixedEstimate_${t}`,simplePrintKey:`simplePrint_${t}`,detailedPrintKey:`detailedPrint_${t}`,printMethod:f,simplePrintState:d,detailedPrintState:c}}}async function B5(n){const{data:e,error:t}=await pt.from("estimate_items").select("quantity, price, print_type").eq("estimate_id",n);if(t)throw t;let r=0,o=0,s=!1;(e||[]).forEach(g=>{const w=g.quantity||0,y=g.price||0;r+=w*y,o+=w,g.print_type==="detailed"&&(s=!0)});let i=0;if(s){const{data:g,error:w}=await pt.from("estimate_prints").select("price").eq("estimate_id",n);if(w)throw w;i=(g||[]).reduce((y,x)=>y+(x.price||0),0)}const{data:a,error:A}=await pt.from("estimate_addon_items").select("price, quantity").eq("estimate_id",n);if(A)throw A;let d=0;(a||[]).forEach(g=>{const w=g.price||0,y=g.quantity||1;d+=w*y});const{data:c,error:u}=await pt.from("estimate_additional_costs").select("amount").eq("estimate_id",n);if(u)throw u;const h=(c||[]).reduce((g,w)=>g+(w.amount||0),0),f=r+i+d+h;return{product_amount:r,print_amount:i,addon_amount:d,additional_amount:h,total_quantity:o,total_amount:f}}async function v1(n){const e=await B5(n),{error:t}=await pt.from("estimates").update(e).eq("id",n);if(t)throw new Error(`Failed to update estimate summary: ${t.message}`)}async function C5(n,e,t,r,o){try{const s=await td(n);if(!s)throw new Error("    ");const i=new Date().toISOString(),a=rd(),A={shop_id:s.shop_id||e,name:s.name,organization_name:s.organization_name,order_name:s.order_name,order_phone:s.order_phone,postcode:s.postcode,address1:s.address1,address2:s.address2,comment:s.comment,shipping_method:s.shipping_method,pref_delivery_date:s.pref_delivery_date,upload_memo:s.upload_memo,product_amount:s.product_amount,print_amount:s.print_amount,addon_amount:s.addon_amount,additional_amount:s.additional_amount,total_quantity:s.total_quantity,total_amount:s.total_amount,delivery_fee:s.delivery_fee,memo:s.memo,use_reorder:s.use_reorder,sess:t||null,customer_id:r||null,mall_type:o||s.mall_type,estimate_no:a,status:"temp",design_confirm:"none",source_estimate_id:n,is_delete:!1,created_at:i,updated_at:i},{data:d,error:c}=await pt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);const u=d.id;return await E5(n,u),await F5(n,u),await I5(n,u),await U5(n,u),await Q5(n,u),console.log(`[copyEstimateForUser]   : ${n}  ${u}`),{success:!0,newEstimateId:u,newEstimateNo:a}}catch(s){return console.error("[copyEstimateForUser] :",s),{success:!1,newEstimateId:null,newEstimateNo:null,error:s instanceof Error?s.message:"    ."}}}async function S5(n){try{const e=await td(n);if(!e)throw new Error("    ");const t=new Date().toISOString(),r=rd(),o={shop_id:e.shop_id,customer_id:e.customer_id||null,sess:e.sess||null,mall_type:e.mall_type,name:e.name,organization_name:e.organization_name,order_name:e.order_name,order_phone:e.order_phone,phone:e.phone,email:e.email,postcode:e.postcode,address1:e.address1,address2:e.address2,comment:e.comment,shipping_method:e.shipping_method,pref_delivery_date:e.pref_delivery_date,upload_memo:e.upload_memo,memo:e.memo,use_reorder:e.use_reorder,delivery_fee:e.delivery_fee,product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,estimate_no:r,status:"pending",design_confirm:"none",is_payment:!1,source_estimate_id:n,design_uploads:null,is_delete:!1,created_at:t,updated_at:t},{data:s,error:i}=await pt.from("estimates").insert(o).select().single();if(i)throw new Error(`  : ${i.message}`);const a=s.id;return await E5(n,a),await F5(n,a),await I5(n,a),await U5(n,a),await Q5(n,a),console.log(`[reorderEstimate]    : ${n}  ${a}`),{success:!0,newEstimateId:a,newEstimateNo:r}}catch(e){return console.error("[reorderEstimate] :",e),{success:!1,newEstimateId:null,newEstimateNo:null,error:e instanceof Error?e.message:"    ."}}}async function E5(n,e){const{data:t,error:r}=await pt.from("estimate_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function F5(n,e){const{data:t,error:r}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_simple_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function I5(n,e){const{data:t,error:r}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function U5(n,e){const{data:t,error:r}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_addon_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function Q5(n,e){const{data:t,error:r}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_additional_costs").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function T5(n,e,t){try{const r=new Date().toISOString(),o=rd();let s=null;n.estimateGoods&&n.estimateGoods.length>0&&(s=n.estimateGoods.map(u=>({sno:u.sno,goodsNm:u.goodsNm||"",url:`http://dantee771.godomall.com/estimate/estimate_goods_design.php?estimateGoodsSno=${u.sno}`})));const i=e&&e.trim()!==""?e:null,a=t&&t.trim()!==""?t:null;if(!i)throw new Error("shop_id .");console.log("[reorderFromLegacyEstimate] shopId:",i,"customerId:",a);const A={shop_id:i,customer_id:a,estimate_no:o,name:n.estimateNm||` - ${n.estimateNo}`,organization_name:n.ex1||null,order_name:n.receiverName||n.memNm||null,order_phone:n.receiverCellPhone||null,legacy_estimate_no:String(n.estimateNo),legacy_design_urls:s,status:"pending",design_confirm:"none",is_payment:!1,is_delete:!1,product_amount:0,print_amount:0,addon_amount:0,additional_amount:0,total_quantity:0,total_amount:0,created_at:r,updated_at:r},{data:d,error:c}=await pt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);return{success:!0,newEstimateId:d.id,newEstimateNo:o}}catch(r){return console.error("[reorderFromLegacyEstimate] :",r),{success:!1,newEstimateId:null,newEstimateNo:null,error:r instanceof Error?r.message:"    ."}}}function L5(n){return n?!n.sess&&!n.customer_id:!1}const $h=Object.freeze(Object.defineProperty({__proto__:null,addEstimateAddonItem:p1,addEstimateComment:Vf,addEstimateItem:l1,addEstimatePrint:c1,addEstimateSimplePrint:U0,buildVariantsByColorFromDB:x5,calculateEstimateSummary:B5,canEditEstimate:Ac,convertDBDataToSessionStorage:z5,copyEstimateForUser:C5,createEstimate:A1,deleteEstimateAddonItemsByIdx:m5,deleteEstimateItem:i5,deleteEstimatePrint:a5,deleteEstimateProductByIdx:T0,getAdditionalItems:w5,getEstimateAdditionalCost:v5,getEstimateAdditionalCosts:g1,getEstimateAddonItems:cg,getEstimateById:td,getEstimateComments:l5,getEstimateItems:$u,getEstimateItemsGroupedByIdx:g5,getEstimatePrints:_c,getEstimateSimplePrints:d1,getEstimatesWithDateFilter:BE,getFullEstimateDetails:u1,getGuestEstimates:p5,getMaxEstimateItemIdx:y5,getTempEstimate:a1,isAdminCreatedEstimate:L5,loadEstimateItemDataByIdx:b5,migrateSessionEstimatesToCustomer:d5,reorderEstimate:S5,reorderFromLegacyEstimate:T5,saveCompleteEstimateData:_5,subscribeToEstimateAdditionalCostsChanges:f5,subscribeToEstimateAddonItemsChanges:h5,subscribeToEstimateChanges:dg,subscribeToEstimateCommentChanges:h1,subscribeToEstimateItemsChanges:c5,subscribeToEstimateListChanges:Q0,subscribeToEstimatePrintChanges:f1,subscribeToEstimateSimplePrintsChanges:u5,updateEstimate:yc,updateEstimateStatus:A5,updateEstimateSummary:v1},Symbol.toStringTag,{value:"Module"}));async function P5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("id",n).single();if(t)throw t;return e}async function k5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("parent_id",n).order("sort");if(t)throw t;return e||[]}async function yp(n){const{data:e,error:t}=await pt.from("process_print_areas").select(`
            id,
            title,
            process_print_area_templates!inner (
                id,
                print_area_id,
                template_id,
                group_cd,
                created_at,
                updated_at,
                template:templates (*)
            )
        `).eq("object_id",n).single();if(t)throw t;return e}async function Ah(n){const e=[],{data:t,error:r}=await pt.from("templates").select(" * ").eq("id",n).single();if(r)return console.error("   :",r),e;if(!t)return e;e.push(t);let o=t.parent_id;for(;o;){const{data:s,error:i}=await pt.from("templates").select(" * ").eq("id",o).single();if(i){console.error("   :",i);break}if(!s)break;e.push(s),o=s.parent_id}return e.reverse()}async function Ic(n){const{data:e,error:t}=await pt.from("template_products").select(`
            *,
            product:products (*),
            template_product_variants (
                id,
                variant_id,
                color_count,
                min_quantity,
                plate_price
            )
        `).eq("template_id",n).single();if(t)throw t;return e}async function m1(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("object_id",n).single();return t?(console.error("  :",t),null):e}const CE=Object.freeze(Object.defineProperty({__proto__:null,getChildTemplates:k5,getParentTemplates:Ah,getPrintAreaByObjectId:m1,getTemplate:P5,getTemplateProduct:Ic,getTemplatesByObjectId:yp},Symbol.toStringTag,{value:"Module"})),Ld={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1,currentSessionId:`session-${Date.now()}-${Math.random().toString(36).substring(2)}`,sessionStorageKey:"extended-product-data-cache"};function SE(){const{subscribe:n,set:e,update:t}=Ad(Ld),r={save(o,s){if(!(typeof window>"u"))try{const i=`${Ld.sessionStorageKey}-${o}`,a={...s,lastSavedToSession:Date.now()};window.sessionStorage.setItem(i,JSON.stringify(a))}catch(i){console.warn("   :",i)}},restore(o){if(typeof window>"u")return null;try{const s=`${Ld.sessionStorageKey}-${o}`,i=window.sessionStorage.getItem(s);if(i)return JSON.parse(i)}catch(s){console.warn("   :",s)}return null},clear(o){if(!(typeof window>"u"))if(o){const s=`${Ld.sessionStorageKey}-${o}`;window.sessionStorage.removeItem(s)}else Object.keys(window.sessionStorage).forEach(s=>{s.startsWith(Ld.sessionStorageKey)&&window.sessionStorage.removeItem(s)})}};return{subscribe:n,set:e,update:t,async loadIntegratedProductData(o,s){var d;const i={subscribe:n},a=Un(i),A=r.restore(o);if((d=a.productDataCache[o])!=null&&d.isLoaded||A!=null&&A.isLoaded){const c=A||a.productDataCache[o];return A&&t(u=>({...u,productDataCache:{...u.productDataCache,[o]:c}})),c}if(a.loadingProducts.has(o))return new Promise((c,u)=>{const h=setInterval(()=>{var g;const f=Un(i);f.loadingProducts.has(o)||(clearInterval(h),(g=f.productDataCache[o])!=null&&g.isLoaded?c(f.productDataCache[o]):u(new Error("   ")))},100)});t(c=>({...c,loadingProducts:new Set([...c.loadingProducts,o]),isGlobalLoading:!0,productDataCache:{...c.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0,sessionId:c.currentSessionId}}}));try{const[c,u]=await Promise.all([ih(o,s),ah(o)]);if(!c)throw new Error("   ");const h={};u.forEach(g=>{g.items.forEach(w=>{w.addon_product.variants&&w.addon_product.variants.length>0&&(h[w.addon_product.id]={price:w.addon_product.variants[0].prices[0].amount,title:w.addon_product.title,variants:w.addon_product.variants,description:w.addon_product.description,thumbnail:w.addon_product.thumbnail})})});const f={id:o,product:c,addons:u,process:c.process,addonProductsMap:h,productSelection:A==null?void 0:A.productSelection,printSelection:A==null?void 0:A.printSelection,addonSelection:A==null?void 0:A.addonSelection,isLoaded:!0,isLoading:!1,sessionId:a.currentSessionId};return t(g=>{const w=new Set(g.loadingProducts);return w.delete(o),{...g,loadingProducts:w,isGlobalLoading:w.size>0,productDataCache:{...g.productDataCache,[o]:f}}}),r.save(o,f),f}catch(c){throw console.error("   :",c),t(u=>{const h=new Set(u.loadingProducts);return h.delete(o),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:c instanceof Error?c.message:"   ",sessionId:u.currentSessionId}}}}),c}},updateProductSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedColors:[],quantityByVariant:{},variantsByColor:{},totalQuantity:0,isCompleted:!1,...a.productSelection,...s,lastUpdated:A},c={...a,productSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},updatePrintSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,currentMethod:"selection",isCompleted:!1,...a.printSelection,...s,lastUpdated:A},c={...a,printSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},selectPrintMethod(o,s){this.updatePrintSelection(o,{currentMethod:s,lastUpdated:Date.now()})},completePrintSelection(o){this.updatePrintSelection(o,{isCompleted:!0,lastUpdated:Date.now()})},updateAddonSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedAddons:{},isCompleted:!1,...a.addonSelection,...s,lastUpdated:A},c={...a,addonSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},getProductData(o){return Un({subscribe:n}).productDataCache[o]||null},restoreFromSession(o){const s=r.restore(o);return s&&t(i=>({...i,productDataCache:{...i.productDataCache,[o]:s}})),s},saveToSession(o){const a=Un({subscribe:n}).productDataCache[o];a&&r.save(o,a)},clearProductData(o){o?(r.clear(o),t(s=>{const i={...s.productDataCache};return delete i[o],{...s,productDataCache:i}})):(r.clear(),t(s=>({...s,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1})))},updateProduct(o,s){t(i=>{const A={...i.productDataCache[o]||{id:o,product:s.product,addons:s.addons,addonProductsMap:{},isLoaded:!0,isLoading:!1,sessionId:i.currentSessionId},product:s.product,addons:s.addons,isLoaded:!0,isLoading:!1};return r.save(o,A),{...i,productDataCache:{...i.productDataCache,[o]:A}}})},hasProductSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.productSelection)!=null&&i.isCompleted)},hasPrintSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.printSelection)!=null&&i.isCompleted)},hasAddonSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.addonSelection)!=null&&i.isCompleted)},reset(){console.log(" Extended Product Data Store  "),r.clear(),e(Ld),console.log(" Extended Product Data Store  ")}}}const Ao=SE();function EE(){if(typeof window>"u")return;const n=[];for(let e=0;e<window.sessionStorage.length;e++){const t=window.sessionStorage.key(e);if(!t)continue;(t.startsWith("fixedEstimate_")||t.startsWith("detailedPrint_")||t.startsWith("simplePrint_")||t.startsWith("extended-product-data-cache-"))&&n.push(t)}n.forEach(e=>window.sessionStorage.removeItem(e)),console.log(` Edit mode: Cleared ${n.length} sessionStorage keys`,n)}var FE=V('<div class="odz-gap-2 odz-mt-3 odz-flex odz-flex-col"><button class="odz-btn odz-btn-sm odz-btn-secondary"></button> <button class="odz-btn odz-btn-sm odz-btn-primary"></button></div>'),IE=V('<img class="odz-w-8 odz-h-8 odz-object-cover odz-rounded">'),UE=V('<div class="odz-flex odz-items-center odz-gap-2 odz-border odz-rounded-lg odz-p-2"><!> <div class="odz-text-xs"><span> </span> <span class="odz-ml-2 odz-font-semibold"> </span></div></div>'),QE=V('<div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><span class="odz-text-gray-600 odz-font-bold"> </span> <span class="odz-text-xs"> </span></div>'),TE=V('<div class="odz-mt-3"></div>'),LE=V('<span class="odz-text-gray-600"> </span> <span class="odz-text-primary odz-font-semibold odz-ml-auto"> </span>',1),PE=V('<div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-bg-gray-50 odz-p-2 odz-rounded odz-mb-1"><span class="odz-font-medium"> </span> <!></div>'),kE=V('<div class="odz-mt-3"><div class="odz-text-sm odz-font-bold odz-text-gray-600 odz-mb-2"> </div> <!></div>'),OE=V('<span class="odz-text-sm odz-font-bold odz-text-gray-500"></span>'),DE=V('<span class="odz-text-sm odz-font-bold"> </span>'),NE=V('<div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div>'),ME=V('<div class="odz-flex odz-flex-col odz-gap-1"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div> <div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <!></div> <!></div> <div class="odz-flex odz-flex-col odz-items-end"><span class="odz-font-bold"> </span> <span class="odz-font-bold odz-text-lg"> </span></div>',1),HE=V('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border"><div class="odz-card-body odz-p-3"><div class="odz-flex odz-gap-4"><div class="odz-flex odz-flex-col odz-justify-between"><img class="odz-w-24 odz-h-24 odz-object-cover odz-rounded"> <!></div> <div class="odz-flex-1"><h2 class="odz-text-lg odz-font-bold"> </h2> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"></div> <!> <!> <div class="odz-flex odz-justify-between odz-items-center odz-mt-4 odz-pt-3 odz-border-t"></div></div></div></div></div>'),jE=V('<div class="odz-text-center odz-py-8 odz-text-gray-500">  .</div>'),RE=V('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50"><div class="odz-bg-white odz-rounded-lg odz-shadow-xl odz-max-w-md odz-w-full odz-mx-4"><div class="odz-px-6 odz-py-4 odz-border-b odz-border-gray-200"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-900">  </h3></div> <div class="odz-px-6 odz-py-4"><p class="odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-gray-900"> </span>() ?</p> <p class="odz-text-xs odz-text-gray-500 odz-mt-2">    .</p></div> <div class="odz-px-6 odz-py-4 odz-border-t odz-border-gray-200 odz-flex odz-gap-3 odz-justify-end"><button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-gray-700 odz-bg-white odz-border odz-border-gray-300 odz-rounded-lg hover:odz-bg-gray-50 odz-transition-colors"></button> <button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-white odz-bg-red-500 odz-rounded-lg hover:odz-bg-red-600 odz-transition-colors"></button></div></div></div>'),$E=V('<div class="odz-flex odz-flex-col odz-gap-4"><!></div> <!>',1);function O5(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t);let s=gt(e,"onSelectProduct",8),i=gt(e,"onDeleteProduct",8,void 0),a=gt(e,"isEditable",8,!1),A=Ie(!1),d=null,c=Ie("");function u(W){return W.title?W.title:!W.option_values||!Array.isArray(W.option_values)?W.id||"":W.option_values.map(R=>{var Z;return((Z=R.option_value)==null?void 0:Z.value)||""}).join(" / ")}function h(W){const R=[];return W.parentTemplates&&R.push(W.parentTemplates.map(Z=>Z.name).join(" > ")),W.colors&&R.push(`${W.colors.length}`),R.join(" - ")}function f(W){var R,Z;d=W,_(c,((Z=(R=o().products[W])==null?void 0:R.product)==null?void 0:Z.title)||" "),_(A,!0)}async function g(){if(d===null)return;const W=d;_(A,!1),d=null,_(c,""),i()?await i()(W):er(Et,dt(o).products=o().products.filter((R,Z)=>Z!==W),dt(o))}function w(){_(A,!1),d=null,_(c,"")}nn();var y=$E(),x=lt(y),C=m(x);{var I=W=>{var R=Lt(),Z=lt(R);nr(Z,1,()=>o().products,gr,(Be,N,k)=>{var J=HE(),ne=m(J),ge=m(ne),pe=m(ge),xe=m(pe),te=z(xe,2);{var se=$=>{var H=FE(),Y=m(H),Ce=z(Y,2);At("click",Y,()=>s()(k)),At("click",Ce,()=>f(k)),U($,H)};be(te,$=>{a()&&$(se)})}var oe=z(pe,2),me=m(oe),B=m(me),F=z(me,2);nr(F,5,()=>l(N).variants,gr,($,H)=>{var Y=UE(),Ce=m(Y);{var fe=ae=>{var le=IE();ke(Ee=>{cr(le,"src",l(H).thumbnail),cr(le,"alt",Ee)},[()=>u(l(H))],at),U(ae,le)};be(Ce,ae=>{l(H).thumbnail&&ae(fe)})}var Le=z(Ce,2),X=m(Le),D=m(X),Ae=z(X,2),ye=m(Ae);ke(ae=>{Qe(D,ae),Qe(ye,`${l(H).quantity??""}`)},[()=>u(l(H))],at),U($,Y)});var E=z(F,2);{var T=$=>{var H=TE();nr(H,5,()=>l(N).prints,gr,(Y,Ce)=>{var fe=QE(),Le=m(fe),X=m(Le),D=z(Le,2),Ae=m(D);ke(ye=>{Qe(X,l(Ce).title),Qe(Ae,ye)},[()=>h(l(Ce))],at),U(Y,fe)}),U($,H)};be(E,$=>{l(N).prints&&l(N).prints.length>0&&$(T)})}var P=z(E,2);{var O=$=>{var H=kE(),Y=z(m(H),2);nr(Y,1,()=>Object.entries(l(N).addons),gr,(Ce,fe)=>{let Le=()=>l(fe)[1];var X=Lt();const D=at(()=>l(N).addonProductsMap[Le().productId]);var Ae=lt(X);{var ye=ae=>{var le=PE();const Ee=at(()=>l(D).variants.find(Oe=>Oe.id===Le().variantId));var Me=m(le),ze=m(Me),Se=z(Me,2);{var ve=Oe=>{var Ne=LE(),_e=lt(Ne),q=m(_e),de=z(_e,2),ue=m(de);ke(Fe=>{Qe(q,`- ${l(Ee).title||" "}`),Qe(ue,` ${Fe??""}`)},[()=>Er(l(Ee).prices[0].amount)],at),U(Oe,Ne)};be(Se,Oe=>{l(Ee)&&Oe(ve)})}ke(()=>Qe(ze,l(D).title)),U(ae,le)};be(Ae,ae=>{l(D)&&ae(ye)})}U(Ce,X)}),U($,H)};be(P,$=>{l(N).addons&&Object.keys(l(N).addons).length>0&&l(N).addonProductsMap&&$(O)})}var j=z(P,2);nr(j,5,()=>[l(N)],gr,($,H)=>{var Y=ME();const Ce=at(()=>l(H).productAmount||(l(H).variants||[]).reduce((Pe,it)=>Pe+it.prices[0].amount*it.quantity,0)),fe=at(()=>l(H).printAmount||(l(H).prints||[]).reduce((Pe,it)=>Pe+(it.price||0),0)),Le=at(()=>l(H).addonAmount||0),X=at(()=>l(H).totalAmount||l(Ce)+l(fe)+l(Le)),D=at(()=>l(H).prints&&l(H).prints.length>0),Ae=at(()=>l(H).simplePrints&&l(H).simplePrints.length>0),ye=at(()=>l(H).print_type==="simple"&&l(Ae)||l(Ae)&&!l(D)),ae=at(()=>!l(D)&&!l(Ae));var le=lt(Y),Ee=m(le),Me=z(m(Ee),2),ze=m(Me),Se=z(Ee,2),ve=z(m(Se),2);{var Oe=Pe=>{var it=OE();U(Pe,it)},Ne=Pe=>{var it=DE(),We=m(it);ke(je=>Qe(We,`${je??""}`),[()=>Er(l(fe))],at),U(Pe,it)};be(ve,Pe=>{l(ye)||l(ae)?Pe(Oe):Pe(Ne,!1)})}var _e=z(Se,2);{var q=Pe=>{var it=NE(),We=z(m(it),2),je=m(We);ke(he=>Qe(je,`${he??""}`),[()=>Er(l(Le))],at),U(Pe,it)};be(_e,Pe=>{l(Le)>0&&Pe(q)})}var de=z(le,2),ue=z(m(de),2),Fe=m(ue);ke((Pe,it)=>{Qe(ze,`${Pe??""}`),Qe(Fe,`${it??""}`)},[()=>Er(l(Ce)),()=>Er(l(X))],at),U($,Y)}),ke(()=>{cr(xe,"src",l(N).product.thumbnail),cr(xe,"alt",l(N).product.title),Qe(B,l(N).product.title)}),U(Be,J)}),U(W,R)},M=W=>{var R=jE();U(W,R)};be(C,W=>{o().products&&o().products.length>0?W(I):W(M,!1)})}var L=z(x,2);{var ee=W=>{var R=RE(),Z=m(R),Be=z(m(Z),2),N=m(Be),k=m(N),J=m(k),ne=z(Be,2),ge=m(ne),pe=z(ge,2);ke(()=>Qe(J,l(c))),At("click",ge,w),At("click",pe,g),U(W,R)};be(L,W=>{l(A)&&W(ee)})}U(n,y),Zr(),r()}var qE=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><form method="dialog"><button class="odz-btn"></button></form></div></div></dialog>');function Uc(n,e){Jr(e,!1);let t=gt(e,"isOpen",12),r=gt(e,"message",12),o=gt(e,"title",8,""),s=gt(e,"onClose",8,void 0);function i(){t(!1),r(""),s()&&s()()}nn();var a=Lt(),A=lt(a);{var d=c=>{var u=qE(),h=m(u),f=m(h),g=m(f),w=z(f,2),y=m(w),x=z(w,2),C=m(x),I=m(C);ke(()=>{Qe(g,o()),Qe(y,r())}),At("click",I,i),U(c,u)};be(A,c=>{t()&&c(d)})}U(n,a),Zr()}var KE=V('<div class="odz-fixed odz-inset-0 odz-bg-base-100 odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-rounded-lg odz-p-8 odz-flex odz-flex-col odz-items-center odz-gap-4"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></span> <p class="odz-text-base-content odz-font-medium"> </p></div></div>');function Qc(n,e){let t=gt(e,"isLoading",8,!1),r=gt(e,"message",8,"...");var o=Lt(),s=lt(o);{var i=a=>{var A=KE(),d=m(A),c=z(m(d),2),u=m(c);ke(()=>Qe(u,r())),U(a,A)};be(s,a=>{t()&&a(i)})}U(n,o)}var VE=V("<span> <span></span></span>"),GE=V('<div class="odz-flex odz-items-center odz-gap-2 odz-w-full odz-justify-center"><!> <span> <span></span></span> <!></div>');function D5(n,e){Jr(e,!1);const t=Ie();let r=gt(e,"originalPrice",8),o=gt(e,"finalPrice",8),s=gt(e,"hasDiscount",8,!1),i=gt(e,"size",8,"md"),a=gt(e,"showOriginal",8,!0);tr(()=>Hn(i()),()=>{_(t,{sm:{original:"odz-text-sm",final:"odz-text-sm odz-font-semibold",currency:"odz-text-xs"},md:{original:"odz-text-base",final:"odz-text-lg odz-font-bold",currency:"odz-text-sm"},lg:{original:"odz-text-lg",final:"odz-text-xl odz-font-bold",currency:"odz-text-base"}}[i()])}),bo(),nn();var A=GE(),d=m(A);{var c=y=>{var x=VE(),C=m(x),I=z(C);ke(M=>{Tr(x,`odz-text-gray-500 odz-line-through ${l(t).original??""}`),Qe(C,M),Tr(I,y0(l(t).currency))},[()=>r().toLocaleString()],at),U(y,x)};be(d,y=>{s()&&a()&&r()!==o()&&y(c)})}var u=z(d,2),h=m(u),f=z(h),g=z(u,2);{var w=y=>{var x=Lt();const C=at(()=>Math.round((r()-o())/r()*100));var I=lt(x);{var M=L=>{};be(I,L=>{l(C)>0&&L(M)})}U(y,x)};be(g,y=>{s()&&r()!==o()&&y(w)})}ke(y=>{Tr(u,`odz-text-gray-900 ${l(t).final??""}`),Qe(h,y),Tr(f,y0(l(t).currency))},[()=>o().toLocaleString()],at),U(n,A),Zr()}var WE=V('<img class="odz-w-8 odz-h-8 odz-object-cover odz-mb-1">'),XE=V('<span class="odz-ml-1"></span>'),YE=V('<span class="odz-ml-1"></span>'),JE=V("<button><!> <span> </span> <!></button>"),ZE=V('<div class="odz-flex odz-flex-col odz-gap-2 mb-4"><h3 class="odz-font-bold odz-text-sm"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),eF=V('<img class="odz-w-10 odz-h-10 odz-rounded odz-object-cover">'),tF=V('<!> <div class="odz-inline-flex odz-items-center odz-justify-center odz-w-5 odz-h-5 odz-bg-red-500 odz-text-white odz-rounded-full odz-text-xs odz-font-bold odz-flex-shrink-0" title=" ">%</div>',1),rF=V('<span class="odz-text-xs"> </span>'),nF=V('<div class="odz-flex odz-flex-col odz-border odz-rounded odz-overflow-hidden"><div class="odz-bg-gray-50 odz-px-3 odz-py-2 odz-border-b"><span class="odz-text-xs odz-font-medium odz-text-center odz-block"> </span></div> <div class="odz-flex odz-flex-col odz-p-3 odz-gap-2"><div class="odz-text-center"><div class="odz-flex odz-items-center odz-justify-center odz-gap-1"><!></div></div> <div class="odz-flex odz-items-center odz-border odz-rounded odz-mt-1"><button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">-</button> <input type="number" class="odz-input odz-input-sm odz-w-full odz-text-center odz-border-x-0 odz-border-y focus:odz-outline-none focus:odz-ring-0 focus:odz-border-x-0 focus:odz-border-y" min="0"> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">+</button></div></div></div>'),oF=V('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),sF=V(`<p class="odz-text-sm odz-text-gray-500">    ( )
                                .</p>`),iF=V('<div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-bg-gray-100 odz-p-2 odz-rounded"><!> <h3 class="odz-font-semibold odz-text-base"> </h3></div> <!></div>'),aF=V('<div class="odz-flex odz-flex-col odz-gap-6 mt-4"></div>'),AF=V('<img class="odz-w-16 odz-h-16 odz-object-cover odz-rounded">'),lF=V('<p class="odz-text-sm odz-text-gray-600 odz-mt-1"> </p>'),dF=V('<div class="odz-text-sm odz-font-semibold odz-text-primary"> </div>'),cF=V('<div role="button" tabindex="0"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><input type="radio" class="odz-radio odz-radio-primary odz-radio-sm"> <span class="odz-text-sm odz-font-medium"> </span></div> <!></div>'),uF=V('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 odz-gap-3"></div>'),hF=V('<div class="odz-border odz-rounded-lg odz-p-4 odz-bg-base-100"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-3"><!> <div><h5 class="odz-font-medium odz-text-base"> </h5> <!></div></div> <!></div>'),fF=V('<div class="odz-flex odz-flex-col odz-gap-4"><h4 class="odz-font-semibold odz-text-base odz-text-gray-700"> </h4> <!></div>'),pF=V('<div class="odz-flex odz-flex-col odz-gap-6 odz-mt-8"><h3 class="odz-font-bold odz-text-lg odz-border-b odz-pb-2"> </h3> <!></div>'),gF=V('<div class="odz-flex odz-justify-end odz-mt-6"><button class="odz-btn odz-btn-accent odz-w-full"></button></div>'),vF=V('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <div class="odz-card-actions odz-justify-end"></div></div></div> <!> <!> <!> <!>',1),mF=V('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!> <!>',1);function wF(n,e){var me;Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=()=>dn(gi,"$shopStore",t);let i=gt(e,"step",12,0),a=gt(e,"productId",8),A=Ie(null),d=Ie(!1),c=Ie(""),u=Ie(""),h=Ie(!1),f=Ie([]),g=Ie({}),w=Ie({}),y=Ie(((me=o().products[o().index])==null?void 0:me.variants.map(B=>({...B})))||[]),x=Ie({}),C=null,I=Ie({}),M=Ie([]),L=Ie({});function ee(B,F){console.log(" togglePenultimateSelection :",{optionId:B,value:F,penultimateOptionId:C}),!C&&l(A)&&l(A).options.length>=2&&(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",C)),B!==C&&console.log(" optionId :",{optionId:B,penultimateOptionId:C}),Cr(x,l(x)[B]=F),_(x,{...l(x)});const E=l(M).indexOf(F);if(console.log("  expandedPenultimateValues:",l(M),"index:",E),E===-1)if(_(M,[...l(M),F]),console.log("    expandedPenultimateValues:",l(M)),!l(L)[F]||l(L)[F].length===0){console.log(" variants  :",{value:F,optionId:B,penultimateOptionId:C});const T=l(A).variants.filter(P=>P.option_values?P.option_values.some(j=>{if(j.option_id&&j.value){const $=j.option_id===B&&j.value===F;return $&&console.log("   :",{variantId:P.id,ov:j}),$}else if(j.option_value&&j.option_value.option_id){const $=j.option_value.option_id===B&&j.option_value.value===F;return $&&console.log("   :",{variantId:P.id,ov:j}),$}return!1}):(console.log(" variant.option_values :",P.id),!1));console.log("  variants:",{value:F,count:T.length,variants:T.map(P=>({id:P.id,title:P.title}))}),Cr(L,l(L)[F]=T),_(L,{...l(L)}),T.forEach(P=>{l(y).some(O=>O.id===P.id)||_(y,[...l(y),{...P,quantity:0}])})}else console.log("  variants :",{value:F,count:l(L)[F].length});else _(M,l(M).filter(T=>T!==F)),console.log("    expandedPenultimateValues:",l(M));_(M,[...l(M)]),_(L,{...l(L)}),console.log(" togglePenultimateSelection :",{expandedPenultimateValues:l(M),variantsByGroup:Object.keys(l(L)),hasExpanded:l(M).length>0}),setTimeout(()=>{console.log(" 1   :",{expandedPenultimateValues:l(M).length,variantsByGroupKeys:Object.keys(l(L))})},1e3)}function W(B,F){var T;const E=((T=l(A))==null?void 0:T.options.findIndex(P=>P.id===B))??-1;if(!(!l(A)||E===-1||E>=l(A).options.length-1)){for(let P=E+1;P<l(A).options.length;P++)delete l(x)[l(A).options[P].id];Cr(x,l(x)[B]=F),_(x,{...l(x)}),_(M,[]),_(L,{}),C&&_(y,l(y).filter(P=>!P.option_values.some(O=>O.option_value.option_id===C)||(P.quantity||0)>0))}}function R(B){_(y,l(y).map(F=>F.id===B?{...F,quantity:(F.quantity||0)+1}:F))}function Z(B){_(y,l(y).map(F=>F.id===B&&(F.quantity||0)>0?{...F,quantity:(F.quantity||0)-1}:F))}function Be(){const B=l(y).filter(E=>(E.quantity||0)>0);if(B.length===0){_(d,!0),_(c," "),_(u,"1    .");return}const F=o().products[o().index];F&&(er(Et,dt(o).products[o().index]={...F,variants:B,quantity:B.reduce((E,T)=>E+(T.quantity||0),0)},dt(o)),Et.updateTotalAmounts()),i(2)}async function N(){var T,P;if(!((T=l(A))!=null&&T.quantity_discounts)){_(I,{});return}const B=l(y).reduce((O,j)=>O+(j.quantity||0),0);let F=null;if(B>0){const O=((P=l(y).find(j=>(j.quantity||0)>0))==null?void 0:P.prices[0].amount)||0;F=ea(B,O,l(A).quantity_discounts)}const E={};for(const O of l(y))(O.quantity||0)>0&&(F!=null&&F.hasDiscount)&&(E[O.id]=F);_(I,E)}let k=Ie(null);$n(async()=>{var B;_(h,!0);try{if(_(A,await ih(a(),s().id)),l(A)&&(_(f,await ah(l(A).id)),_(w,{}),l(f).forEach(F=>{F.items.forEach(E=>{E.addon_product.variants&&E.addon_product.variants.length>0&&Cr(w,l(w)[E.addon_product.id]={price:E.addon_product.variants[0].prices[0].amount,title:E.addon_product.title,variants:E.addon_product.variants})})}),(B=o().products[o().index])!=null&&B.addons)){const F=o().products[o().index].addons;_(g,{}),Object.entries(F).forEach(([E,T])=>{typeof T=="object"&&T.productId&&T.variantId?Cr(g,l(g)[E]={productId:T.productId,variantId:T.variantId}):typeof T=="string"&&Cr(g,l(g)[E]={productId:T,variantId:""})}),_(g,{...l(g)})}if(l(A)&&l(A).options.length>0&&(l(A).options.length>=2?(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",{penultimateOptionId:C,optionCount:l(A).options.length,allOptions:l(A).options.map(F=>({id:F.id,title:F.title}))})):console.log("  2 :",l(A).options.length)),o().products[o().index]&&o().products[o().index].variants.length>0){er(Et,dt(o).products[o().index].product=l(A),dt(o)),_(y,o().products[o().index].variants.map(E=>({...E})));const F=o().products[o().index].addons||{};if(_(g,{}),Object.entries(F).forEach(([E,T])=>{typeof T=="object"&&T.productId&&T.variantId?Cr(g,l(g)[E]={productId:T.productId,variantId:T.variantId}):typeof T=="string"&&Cr(g,l(g)[E]={productId:T,variantId:""})}),l(A)&&l(A).options.length>0){const E=l(y).filter(T=>(T.quantity||0)>0);if(E.length>0){const T=l(A).options.map(P=>P.id);if(l(A).options.length>=2){C=l(A).options[l(A).options.length-2].id;const P=[];if(E.forEach(O=>{if(O.title){const j=O.title.split(" / ");if(j.length>0){const $=j[0];P.includes($)||P.push($)}}O.option_values&&O.option_values.forEach(j=>{j.option_id&&j.value?j.option_id===C&&(P.includes(j.value)||P.push(j.value)):j.option_value&&j.option_value.option_id&&j.option_value.option_id===C&&(P.includes(j.option_value.value)||P.push(j.option_value.value))})}),P.length>0)P.forEach(O=>{ee(C,O)});else{const O=[];E.forEach(j=>{if(j.title){const $=j.title.split(" / ");if($.length>0){const H=$[0].trim();O.includes(H)||O.push(H)}}}),O.length>0?O.forEach(j=>{const $=l(A).options[l(A).options.length-2].values.find(H=>H.value.toLowerCase()===j.toLowerCase());if($)ee(C,$.value);else{const H=l(A).options[l(A).options.length-2].values.filter(Y=>Y.value.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(Y.value.toLowerCase()));H.length>0&&H.forEach(Y=>{ee(C,Y.value)})}}):l(A).options[l(A).options.length-2].values.forEach(j=>{ee(C,j.value)})}}else l(A).options.length}}}else l(A)&&er(Et,dt(o).products=[...o().products,{product:l(A),variants:[],quantity:0,prints:[],addons:{},addonProductsMap:l(w)}],dt(o));setTimeout(()=>{Et.updateTotalAmounts()},100)}catch(F){console.error("Product component  :",F)}finally{_(h,!1)}});function J(B,F,E){if(!E||E.trim()===""){console.error("Invalid variantId provided:",E);return}Cr(g,l(g)[B]={productId:F,variantId:E}),_(g,{...l(g)});const T=o().products[o().index];T&&(er(Et,dt(o).products[o().index]={...T,addons:l(g),addonProductsMap:l(w)},dt(o)),Et.updateTotalAmounts())}function ne(B){return B?B.replace(/<[^>]*>/g,"").trim():""}tr(()=>(o(),l(g)),()=>{var B;if((B=o().products[o().index])!=null&&B.addons&&Object.keys(o().products[o().index].addons).length>0&&Object.keys(l(g)).length===0){const F=o().products[o().index].addons;Object.entries(F).forEach(([E,T])=>{typeof T=="object"&&T.productId&&T.variantId&&Cr(g,l(g)[E]={productId:T.productId,variantId:T.variantId})}),_(g,{...l(g)})}}),tr(()=>(l(y),l(A),l(k),o(),l(g),l(w),Et),()=>{l(y)&&l(A)&&(l(k)&&clearTimeout(l(k)),_(k,setTimeout(()=>{const B=o().products[o().index];if(B){const F=l(y).reduce((P,O)=>P+(O.quantity||0),0),E=B.quantity||0,T=l(y).filter(P=>(P.quantity||0)>0);er(Et,dt(o).products[o().index]={...B,variants:T,quantity:F,addons:l(g),addonProductsMap:l(w)},dt(o)),N(),F!==E&&B.prints&&B.prints.length>0&&Et.calculatePrintPrice(o().index),Et.updateTotalAmounts()}},100)))}),bo(),nn();var ge=mF(),pe=lt(ge),xe=m(pe);{var te=B=>{var F=vF(),E=lt(F),T=m(E),P=m(T),O=z(T,2),j=m(O),$=m(j),H=z(E,2);nr(H,1,()=>l(A).options,gr,(Ae,ye,ae)=>{var le=Lt(),Ee=lt(le);{var Me=ze=>{var Se=ZE(),ve=m(Se),Oe=m(ve),Ne=z(ve,2);nr(Ne,5,()=>l(ye).values,gr,(_e,q)=>{var de=JE();const ue=at(()=>ae===l(A).options.length-2),Fe=at(()=>l(ue)&&l(M).includes(l(q).value)),Pe=at(()=>l(ue)?l(Fe):l(x)[l(ye).id]===l(q).value);var it=m(de);{var We=Je=>{var rt=WE();ke(()=>{cr(rt,"src",l(q).image),cr(rt,"alt",l(q).value)}),U(Je,rt)};be(it,Je=>{l(q).image&&Je(We)})}var je=z(it,2),he=m(je),De=z(je,2);{var ot=Je=>{var rt=XE();U(Je,rt)},Ge=Je=>{var rt=Lt(),ht=lt(rt);{var $e=st=>{var Bt=YE();U(st,Bt)};be(ht,st=>{l(ue)&&st($e)},!0)}U(Je,rt)};be(De,Je=>{l(ue)&&l(Fe)?Je(ot):Je(Ge,!1)})}ke(()=>{Tr(de,`odz-btn odz-btn-outline odz-h-auto odz-min-h-10 odz-border-gray-300 odz-w-44 odz-p-2 odz-text-xs ${(l(Pe)?"odz-border-2 odz-border-gray-800":"")??""}`),Qe(he,l(q).value)}),At("click",de,()=>{var Je;console.log("   :",{optionTitle:l(ye).title,optionId:l(ye).id,value:l(q).value,isPenultimateOption:l(ue),index:ae,totalOptions:(Je=l(A))==null?void 0:Je.options.length}),l(ue)?ee(l(ye).id,l(q).value):W(l(ye).id,l(q).value)}),U(_e,de)}),ke(()=>Qe(Oe,l(ye).title)),U(ze,Se)};be(Ee,ze=>{ae<l(A).options.length-1&&ze(Me)})}U(Ae,le)});var Y=z(H,2);{var Ce=Ae=>{var ye=aF();nr(ye,5,()=>l(M),ae=>ae,(ae,le)=>{var Ee=iF();const Me=at(()=>l(L)[l(le)]||[]),ze=at(()=>{var Fe;return(Fe=l(A).options[l(A).options.length-2])==null?void 0:Fe.values.find(Pe=>Pe.value===l(le))});var Se=m(Ee),ve=m(Se);{var Oe=Fe=>{var Pe=eF();ke(()=>{cr(Pe,"src",l(ze).image),cr(Pe,"alt",l(le))}),U(Fe,Pe)};be(ve,Fe=>{var Pe;(Pe=l(ze))!=null&&Pe.image&&Fe(Oe)})}var Ne=z(ve,2),_e=m(Ne),q=z(Se,2);{var de=Fe=>{var Pe=oF();nr(Pe,5,()=>l(Me),it=>it.id,(it,We)=>{var je=nF();const he=at(()=>l(y).find(et=>et.id===l(We).id)),De=at(()=>{var et;return((et=l(he))==null?void 0:et.quantity)||0}),ot=at(()=>{var et;return((et=l(We).option_values.find(yt=>yt.option_value.option_id===l(A).options[l(A).options.length-1].id))==null?void 0:et.option_value.value)||"N/A"}),Ge=at(()=>l(I)[l(We).id]);var Je=m(je),rt=m(Je),ht=m(rt),$e=z(Je,2),st=m($e),Bt=m(st),Ct=m(Bt);{var Tt=et=>{var yt=tF(),mt=lt(yt);D5(mt,{get originalPrice(){return l(We).prices[0].amount},get finalPrice(){return l(Ge).discountedPrice},hasDiscount:!0,size:"sm"}),U(et,yt)},wt=et=>{var yt=rF(),mt=m(yt);ke(Vt=>Qe(mt,`${Vt??""}`),[()=>Er(l(We).prices[0].amount)],at),U(et,yt)};be(Ct,et=>{var yt;(yt=l(Ge))!=null&&yt.hasDiscount&&l(De)>0?et(Tt):et(wt,!1)})}var Ze=z(st,2),kt=m(Ze),It=z(kt,2),jt=z(It,2);ke(()=>{Qe(ht,l(ot)),kt.disabled=l(De)<=0,Jm(It,l(De))}),At("click",kt,()=>Z(l(We).id)),At("input",It,et=>{const yt=parseInt(et.target.value)||0;_(y,l(y).map(mt=>mt.id===l(We).id?{...mt,quantity:yt>=0?yt:0}:mt))}),At("click",jt,()=>R(l(We).id)),U(it,je)}),U(Fe,Pe)},ue=Fe=>{var Pe=sF();U(Fe,Pe)};be(q,Fe=>{l(Me).length>0?Fe(de):Fe(ue,!1)})}ke(()=>Qe(_e,l(le))),U(ae,Ee)}),U(Ae,ye)};be(Y,Ae=>{l(M).length>0&&Ae(Ce)})}var fe=z(Y,2);{var Le=Ae=>{var ye=pF(),ae=z(m(ye),2);nr(ae,1,()=>l(f),le=>le.id,(le,Ee)=>{var Me=fF(),ze=m(Me),Se=m(ze),ve=z(ze,2);nr(ve,1,()=>l(Ee).items,Oe=>Oe.id,(Oe,Ne)=>{var _e=hF(),q=m(_e),de=m(q);{var ue=ot=>{var Ge=AF();ke(()=>{cr(Ge,"src",l(Ne).addon_product.thumbnail),cr(Ge,"alt",l(Ne).addon_product.title)}),U(ot,Ge)};be(de,ot=>{l(Ne).addon_product.thumbnail&&ot(ue)})}var Fe=z(de,2),Pe=m(Fe),it=m(Pe),We=z(Pe,2);{var je=ot=>{var Ge=lF(),Je=m(Ge);ke(rt=>Qe(Je,rt),[()=>ne(l(Ne).addon_product.description)],at),U(ot,Ge)};be(We,ot=>{l(Ne).addon_product.description&&ot(je)})}var he=z(q,2);{var De=ot=>{var Ge=uF();nr(Ge,5,()=>l(Ne).addon_product.variants,Je=>Je.id,(Je,rt)=>{var ht=cF();const $e=at(()=>l(g)[l(Ee).id]),st=at(()=>{var It,jt;return((It=l($e))==null?void 0:It.productId)===l(Ne).addon_product.id&&((jt=l($e))==null?void 0:jt.variantId)===l(rt).id});var Bt=m(ht),Ct=m(Bt),Tt=z(Ct,2),wt=m(Tt),Ze=z(Bt,2);{var kt=It=>{var jt=dF(),et=m(jt);ke(yt=>Qe(et,` ${yt??""}`),[()=>Er(l(rt).prices[0].amount)],at),U(It,jt)};be(Ze,It=>{l(rt).prices&&l(rt).prices.length>0&&It(kt)})}ke(It=>{Tr(ht,`odz-border odz-rounded odz-p-3 odz-cursor-pointer odz-transition-all odz-duration-200 ${(l(st)?"odz-border-primary odz-bg-primary/5":"odz-border-gray-300 hover:odz-border-gray-400")??""}`),cr(Ct,"name",`addon-${l(Ee).id??""}`),Du(Ct,l(st)),Qe(wt,It)},[()=>l(rt).title||` ${l(rt).id.substring(0,4)}`],at),At("change",Ct,()=>J(l(Ee).id,l(Ne).addon_product.id,l(rt).id)),At("click",ht,()=>J(l(Ee).id,l(Ne).addon_product.id,l(rt).id)),At("keydown",ht,It=>It.key==="Enter"&&J(l(Ee).id,l(Ne).addon_product.id,l(rt).id)),U(Je,ht)}),U(ot,Ge)};be(he,ot=>{l(Ne).addon_product.variants&&l(Ne).addon_product.variants.length>0&&ot(De)})}ke(()=>Qe(it,l(Ne).addon_product.title)),U(Oe,_e)}),ke(()=>Qe(Se,l(Ee).name)),U(le,Me)}),U(Ae,ye)};be(fe,Ae=>{l(f).length>0&&Ae(Le)})}var X=z(fe,2);{var D=Ae=>{var ye=gF(),ae=m(ye);At("click",ae,()=>Be()),U(Ae,ye)};be(X,Ae=>{l(y).filter(ye=>(ye.quantity||0)>0).length>0&&Ae(D)})}ke(()=>{cr(P,"src",l(A).thumbnail),cr(P,"alt",l(A).title),Qe($,l(A).title)}),U(B,F)};be(xe,B=>{l(A)&&B(te)})}var se=z(pe,2);Uc(se,{get isOpen(){return l(d)},set isOpen(B){_(d,B)},get title(){return l(c)},set title(B){_(c,B)},get message(){return l(u)},set message(B){_(u,B)},$$legacy:!0});var oe=z(se,2);Qc(oe,{get isLoading(){return l(h)},set isLoading(B){_(h,B)},$$legacy:!0}),U(n,ge),Zr(),r()}class yF{constructor(e){this.isEnabled=!0,this.sessionId=e}log(e,t,r){if(!this.isEnabled)return;const o=new Date().toISOString();`${this.sessionId}${o}`}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}function _F(n){const e=Date.now().toString(36)+Math.random().toString(36).substr(2);return{productId:n,productSelection:null,printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:e}}function bF(){const{subscribe:n,set:e,update:t}=Ad(null);let r=null,o=null,s=0;return{subscribe:n,set:e,update:t,saveToSessionStorage(i){!i||Date.now()-s<100||(o&&clearTimeout(o),o=setTimeout(()=>{try{[`fixedEstimate_${i.productId}`,`fixedEstimate_${i.productId}_${i.estimateId}`,`fixedEstimate_${i.productId}_${i.estimateId}_0`,`fixedEstimate_${i.productId}_${i.estimateId}_1`,`fixedEstimate_${i.productId}_${i.estimateId}_2`,`fixedEstimate_${i.productId}_${i.estimateId}_3`,`fixedEstimate_${i.productId}_${i.estimateId}_4`,`fixedEstimate_${i.productId}_${i.estimateId}_5`,`fixedEstimate_${i.productId}_0`,`fixedEstimate_${i.productId}_1`,`fixedEstimate_${i.productId}_2`,`fixedEstimate_${i.productId}_3`,`fixedEstimate_${i.productId}_4`,`fixedEstimate_${i.productId}_5`].forEach(c=>{try{sessionStorage.removeItem(c)}catch{}});let d=`fixedEstimate_${i.productId}`;i.estimateId&&(d+=`_${i.estimateId}`),i.idx!==void 0&&(d+=`_${i.idx}`),sessionStorage.setItem(d,JSON.stringify(i)),s=Date.now()}catch{}},10))},initialize(i,a,A){var h,f,g;let d=`fixedEstimate_${i}`;a&&(d+=`_${a}`),A!==void 0&&(d+=`_${A}`);let c=null;try{const w=sessionStorage.getItem(d);if(w){const y=JSON.parse(w);y.productId===i&&(c=y)}}catch{}const u=c||{..._F(i),estimateId:a,idx:A};r=new yF(u.sessionId),e(u),c?r.info("Fixed Estimate Store   ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId,selectedColors:((f=(h=u.productSelection)==null?void 0:h.selectedColors)==null?void 0:f.length)||0,totalQuantity:((g=u.productSelection)==null?void 0:g.totalQuantity)||0}):r.info("Fixed Estimate Store  ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId}),this.saveToSessionStorage(u)},reset(){r==null||r.info("Fixed Estimate Store "),e(null),r=null},setCurrentStep(i){t(a=>{if(!a)return a;r==null||r.info(" ",{from:a.currentStep,to:i});const A={...a,currentStep:i};return this.saveToSessionStorage(A),A})},updateProductSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.productSelection,c={productId:a.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,totalQuantity:c.totalQuantity,selectedColors:c.selectedColors.length}),{...a,productSelection:c}})},toggleColorSelection(i,a){t(A=>{var w;if(!A)return A;if(!A.productSelection){const y={productId:A.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,lastUpdated:Date.now()};A={...A,productSelection:y}}const d=[...A.productSelection.selectedColors],c={...A.productSelection.quantityByVariant},u={...A.productSelection.variantsByColor},h=d.indexOf(i);h===-1?(d.push(i),u[i]=a[i]||[],c[i]=c[i]||{},r==null||r.info("  ",{color:i,totalColors:d.length,variantCount:((w=a[i])==null?void 0:w.length)||0})):(d.splice(h,1),delete u[i],delete c[i],r==null||r.info("  ",{color:i,remainingColors:d.length}));const f=Object.values(c).reduce((y,x)=>y+Object.values(x).reduce((C,I)=>C+I,0),0),g={...A,productSelection:{...A.productSelection,selectedColors:d,quantityByVariant:c,variantsByColor:u,totalQuantity:f,lastUpdated:Date.now()}};return this.saveToSessionStorage(g),g})},updateQuantity(i,a,A){t(d=>{if(!d||!d.productSelection)return d;const c={...d.productSelection.quantityByVariant};c[i]||(c[i]={});const u=c[i][a]||0;c[i][a]=Math.max(0,A);const h=Object.values(c).reduce((g,w)=>g+Object.values(w).reduce((y,x)=>y+x,0),0);r==null||r.info(" ",{color:i,variantId:a,oldQuantity:u,newQuantity:c[i][a],totalQuantity:h,triggerDiscountUpdate:!0});const f={...d,productSelection:{...d.productSelection,quantityByVariant:c,totalQuantity:h,lastUpdated:Date.now(),needsDiscountRecalculation:!0}};return this.saveToSessionStorage(f),f})},updateVariantDiscounts(i){t(a=>{if(!a||!a.productSelection)return a;const A=a.productSelection.variantDiscounts||{},d=Object.keys(A).sort(),c=Object.keys(i).sort();if(!(JSON.stringify(d)!==JSON.stringify(c)||Object.keys(i).some(f=>JSON.stringify(A[f])!==JSON.stringify(i[f]))))return a;r==null||r.info("  ",{productId:a.productId,discountCount:Object.keys(i).length,changedVariants:Object.keys(i)});const h={...a,productSelection:{...a.productSelection,variantDiscounts:{...i},needsDiscountRecalculation:!1,lastUpdated:Date.now()}};return this.saveToSessionStorage(h),h})},completeProductSelection(){t(i=>{if(!i||!i.productSelection)return i;r==null||r.info("  ",{totalQuantity:i.productSelection.totalQuantity,selectedColors:i.productSelection.selectedColors.length});const a={...i,productSelection:{...i.productSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"print"};return this.saveToSessionStorage(a),a})},updatePrintSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.printSelection,c={productId:a.productId,currentMethod:"selection",isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,currentMethod:c.currentMethod}),{...a,printSelection:c}})},selectPrintMethod(i){t(a=>{if(!a)return a;r==null||r.info("  ",{method:i,productId:a.productId});const A={...a.printSelection,productId:a.productId,currentMethod:i,isCompleted:!1,lastUpdated:Date.now()},d={...a,printSelection:A};try{let c=`fixedEstimate_${d.productId}`;d.estimateId&&(c+=`_${d.estimateId}`),d.idx!==void 0&&(c+=`_${d.idx}`),sessionStorage.setItem(c,JSON.stringify(d)),console.log("    :",{method:i,storageKey:c,printSelection:d.printSelection})}catch(c){console.error("     :",c)}return d})},completePrintSelection(){t(i=>!i||!i.printSelection?i:(r==null||r.info("  ",{method:i.printSelection.currentMethod}),{...i,printSelection:{...i.printSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"addon"}))},updateAddonSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.addonSelection,c={productId:a.productId,selectedAddons:{},isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,addonCount:Object.keys(c.selectedAddons).length}),{...a,addonSelection:c}})},toggleAddonSelection(i,a,A){t(d=>{var g,w,y;if(!d)return d;const c={...((g=d.addonSelection)==null?void 0:g.selectedAddons)||{}};((w=c[i])==null?void 0:w.productId)===a&&((y=c[i])==null?void 0:y.variantId)===A?(delete c[i],r==null||r.info("  ",{addonId:i,productId:a,variantId:A,remainingAddons:Object.keys(c).length})):(c[i]={productId:a,variantId:A},r==null||r.info(" ",{addonId:i,productId:a,variantId:A,totalAddons:Object.keys(c).length}));const h={...d.addonSelection??{productId:d.productId,selectedAddons:{},isCompleted:!1,lastUpdated:Date.now()},productId:d.productId,selectedAddons:c,isCompleted:!1,lastUpdated:Date.now()},f={...d,addonSelection:h};try{const x=`fixedEstimate_${f.productId}`;sessionStorage.setItem(x,JSON.stringify(f))}catch{}return f})},completeAddonSelection(){t(i=>{var A;if(!i)return i;const a=Object.keys(((A=i.addonSelection)==null?void 0:A.selectedAddons)||{}).length;return r==null||r.info("  ",{addonCount:a}),{...i,addonSelection:{...i.addonSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"additional"}})},updateAdditionalInfo(i){t(a=>{if(!a)return a;const A=Date.now(),c={customerName:"",customerPhone:"",customerEmail:"",organizationName:"",postcode:"",address1:"",address2:"",shippingMethod:"standard",prefDeliveryDate:"",comment:"",designRequirement:"",isCompleted:!1,...a.additionalInfo,...i,lastUpdated:A};return r==null||r.info("  ",{changes:i,hasCustomerInfo:!!(c.customerName&&c.customerPhone),hasAddressInfo:!!c.address1}),{...a,additionalInfo:c}})},completeAdditionalInfo(){t(i=>!i||!i.additionalInfo?i:(r==null||r.info("  ",{customerName:i.additionalInfo.customerName,hasAddress:!!i.additionalInfo.address1}),{...i,additionalInfo:{...i.additionalInfo,isCompleted:!0,lastUpdated:Date.now()}}))},toggleDebugMode(){t(i=>{if(!i)return i;const a=!i.isDebugMode;return r&&(a?(r.enable(),r.info("  ")):(r.info("  "),r.disable())),{...i,isDebugMode:a}})},getSelectionSummary(){var A,d,c,u,h,f,g,w,y,x;const i=Un({subscribe:n});if(!i)return null;const a={productId:i.productId,sessionId:i.sessionId,currentStep:i.currentStep,completedSteps:{product:((A=i.productSelection)==null?void 0:A.isCompleted)||!1,print:((d=i.printSelection)==null?void 0:d.isCompleted)||!1,addon:((c=i.addonSelection)==null?void 0:c.isCompleted)||!1,additional:((u=i.additionalInfo)==null?void 0:u.isCompleted)||!1},statistics:{totalQuantity:((h=i.productSelection)==null?void 0:h.totalQuantity)||0,selectedColors:((f=i.productSelection)==null?void 0:f.selectedColors.length)||0,printMethod:((g=i.printSelection)==null?void 0:g.currentMethod)||"none",addonCount:Object.keys(((w=i.addonSelection)==null?void 0:w.selectedAddons)||{}).length,hasCustomerInfo:!!((y=i.additionalInfo)!=null&&y.customerName&&((x=i.additionalInfo)!=null&&x.customerPhone))}};return r==null||r.info("  ",a),a},toEstimateStoreFormat(){const i=Un({subscribe:n});if(!i)return null;r==null||r.info("EstimateStore   ");const a={productSelection:i.productSelection,printSelection:i.printSelection,addonSelection:i.addonSelection,additionalInfo:i.additionalInfo,metadata:{sessionId:i.sessionId,lastUpdated:Date.now()}};return r==null||r.info("EstimateStore   ",{hasProductSelection:!!i.productSelection,hasPrintSelection:!!i.printSelection,hasAddonSelection:!!i.addonSelection,hasAdditionalInfo:!!i.additionalInfo}),a},toDBFormat(i){const a=Un({subscribe:n});if(!a)return null;try{const{FixedEstimateDBConverter:A}=require("../types/fixedEstimateTypes"),d=i||`EST_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r==null||r.info("DB   ",{estimateId:d});const c=A.toDBFormat(a,d);return r==null||r.info("DB   ",{estimateId:d,hasProductSelection:!!c.productSelection,hasPrintSelection:!!c.printSelection,addonSelectionsCount:c.addonSelections.length,hasAdditionalInfo:!!c.additionalInfo}),c}catch(A){return r==null||r.error("DB   ",A),null}},fromDBFormat(i){try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes");r==null||r.info("DB    ");const A=a.fromDBFormat(i);return e(A),r==null||r.info("DB   ",{productId:A.productId,sessionId:A.sessionId,currentStep:A.currentStep}),!0}catch(a){return r==null||r.error("DB   ",a),!1}},validate(){const i=Un({subscribe:n});if(!i)return{isValid:!1,errors:["Store  ."]};try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes"),A=a.validateForDB(i);return r==null||r.info("  ",{isValid:A.isValid,errorCount:A.errors.length}),A.isValid||r==null||r.warn("  ",{errors:A.errors}),A}catch(a){return r==null||r.error("  ",a),{isValid:!1,errors:["    ."]}}},backup(){const i=Un({subscribe:n});if(!i)return null;const a={...i,backupTimestamp:Date.now()};return r==null||r.info("  ",{sessionId:i.sessionId,backupTimestamp:a.backupTimestamp}),a},restore(i){if(!i||!i.sessionId)return r==null||r.error("  "),!1;try{const{backupTimestamp:a,...A}=i;return e(A),r==null||r.info("    ",{sessionId:A.sessionId,backupTimestamp:a}),!0}catch(a){return r==null||r.error("  ",a),!1}}}}const zr=bF();async function N5(n,e){const{data:t,error:r}=await pt.from("products").select("process:processes( id, shop_id, name, description, image_url, created_at, updated_at, canvas_json)").eq("id",n).eq("shop",e).single();if(r)throw r;return t!=null&&t.process?t.process:null}async function M5(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("process_id",n);if(t)throw t;return e||[]}function Ve(n,e,t){return(e=function(r){var o=function(s,i){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var A=a.call(s,i);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}(r,"string");return typeof o=="symbol"?o:o+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Xe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bw(Object(t),!0).forEach(function(r){Ve(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xn(n,e){if(n==null)return{};var t,r,o=function(i,a){if(i==null)return{};var A={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(a.indexOf(d)>=0)continue;A[d]=i[d]}return A}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function vl(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let Cw=class{constructor(){Ve(this,"browserShadowBlurConstant",1),Ve(this,"DPI",96),Ve(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Ve(this,"perfLimitSizeTotal",2097152),Ve(this,"maxCacheSideLimit",4096),Ve(this,"minCacheSideLimit",256),Ve(this,"disableStyleCopyPaste",!1),Ve(this,"enableGLFiltering",!0),Ve(this,"textureSize",4096),Ve(this,"forceGLPutImageData",!1),Ve(this,"cachesBoundsOfCurve",!1),Ve(this,"fontPaths",{}),Ve(this,"NUM_FRACTION_DIGITS",4)}};const an=new class extends Cw{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Xe(Xe({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Cw,t=(n==null?void 0:n.reduce((r,o)=>(r[o]=e[o],r),{}))||e;this.configure(t)}},ul=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Ca=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},xF=class extends Ca{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},zF=class{},BF=class extends zF{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),o=e.createShader(e.FRAGMENT_SHADER);return!!o&&(e.shaderSource(o,r),e.compileShader(o),!!e.getShaderParameter(o,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),ul("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const CF={};let Sw;const Pa=()=>Sw||(Sw={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new BF,dispose(){},copyPasteData:CF}),Tc=()=>Pa().document,w1=()=>Pa().window,H5=()=>{var n;return Math.max((n=an.devicePixelRatio)!==null&&n!==void 0?n:w1().devicePixelRatio,1)},xu=new class{constructor(){Ve(this,"charWidthsCache",{}),Ve(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return o[s]||(o[s]={}),o[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=an,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},L0="6.5.4";function Gf(){}const lh=Math.PI/2,_p=2*Math.PI,y1=Math.PI/180,Os=Object.freeze([1,0,0,1,0,0]),_1=16,jA=.4477152502,jr="center",wn="left",Ks="top",P0="bottom",vo="right",Vs="none",b1=/\r?\n/,j5="moving",ug="scaling",R5="rotating",x1="rotate",$5="skewing",qu="resizing",SF="modifyPoly",EF="modifyPath",bp="changed",hg="scale",Ys="scaleX",ki="scaleY",Lc="skewX",Pc="skewY",Lo="fill",Gs="stroke",xp="modified",Pd="json",vv="svg",Ar=new class{constructor(){this[Pd]=new Map,this[vv]=new Map}has(n){return this[Pd].has(n)}getClass(n){const e=this[Pd].get(n);if(!e)throw new Ca("No class registered for ".concat(n));return e}setClass(n,e){e?this[Pd].set(e,n):(this[Pd].set(n.type,n),this[Pd].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[vv].get(n)}setSVGClass(n,e){this[vv].set(e??n.type.toLowerCase(),n)}},zp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let FF=class{constructor(){Ve(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[o,s]=r;this.on(o,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(o=>{let[s,i]=o;r.push(this.once(s,i))}),()=>r.forEach(o=>o())}if(t){const r=this.on(e,function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[o,s]=r;this._removeEventListener(o,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const o=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(o)for(let s=0;s<o.length;s++)o[s].call(this,t||{})}};const Kd=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},wA=n=>{if(n===0)return 1;switch(Math.abs(n)/lh){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},yA=n=>{if(n===0)return 0;const e=n/lh,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let zt=class Es{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Es(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Es(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Es(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Es(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Es(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Es(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Es(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Es(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Es(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Es(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Es(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Es(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z1;const r=yA(e),o=wA(e),s=this.subtract(t);return new Es(s.x*o-s.y*r,s.x*r+s.y*o).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Es(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const z1=new zt(0,0),Wf=n=>!!n&&Array.isArray(n._objects);function q5(n){class e extends n{constructor(){super(...arguments),Ve(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const i=this._objects.push(...o);return o.forEach(a=>this._onObjectAdded(a)),i}insertAt(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,o=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.forEach(A=>{const d=r.indexOf(A);d!==-1&&(r.splice(d,1),o.push(A),this._onObjectRemoved(A))}),o}forEachObject(r){this.getObjects().forEach((o,s,i)=>r(o,s,i))}getObjects(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length===0?[...this._objects]:this._objects.filter(i=>i.isType(...o))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,o){return!!this._objects.includes(r)||!!o&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,o)=>r+=o.complexity?o.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Kd(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Kd(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const i=this.findNewLowerIndex(r,s,o);return Kd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const i=this.findNewUpperIndex(r,s,o);return Kd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,o){return r!==this._objects[o]&&(Kd(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,o,s){let i;if(s){i=o;for(let a=o-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o-1;return i}findNewUpperIndex(r,o,s){let i;if(s){i=o;for(let a=o+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o+1;return i}collectObjects(r){let{left:o,top:s,width:i,height:a}=r,{includeIntersecting:A=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],c=new zt(o,s),u=c.add(new zt(i,a));for(let h=this._objects.length-1;h>=0;h--){const f=this._objects[h];f.selectable&&f.visible&&(A&&f.intersectsWithRect(c,u)||f.isContainedWithinRect(c,u)||A&&f.containsPoint(c)||A&&f.containsPoint(u))&&d.push(f)}return d}}return e}let K5=class extends FF{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function Xf(n){return w1().requestAnimationFrame(n)}function IF(n){return w1().cancelAnimationFrame(n)}let UF=0;const hl=()=>UF++,na=()=>{const n=Tc().createElement("canvas");if(!n||n.getContext===void 0)throw new Ca("Failed to create `canvas` element");return n},QF=()=>Tc().createElement("img"),ka=n=>{const e=na();return e.width=n.width,e.height=n.height,e},V5=(n,e,t)=>n.toDataURL("image/".concat(e),t),_o=n=>n*y1,nd=n=>n/y1,TF=n=>n.every((e,t)=>e===Os[t]),$s=(n,e,t)=>new zt(n).transform(e,t),Zi=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:o}=new zt(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-o,t},ns=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],B1=(n,e)=>n.reduceRight((t,r)=>r&&t?ns(r,t,e):r||t,void 0)||Os.concat(),G5=n=>{let[e,t]=n;return Math.atan2(t,e)},Bp=n=>{const e=G5(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),o=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:nd(e),scaleX:r,scaleY:o,skewX:nd(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},dh=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function ch(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=_o(n),o=wA(r),s=yA(r);return[o,s,-s,o,e?e-(o*e-s*t):0,t?t-(s*e+o*t):0]}const C1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},W5=n=>Math.tan(_o(n)),X5=n=>[1,0,W5(n),1,0,0],Y5=n=>[1,W5(n),0,1,0,0],fg=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:o=!1,skewX:s=0,skewY:i=0}=n,a=C1(r?-e:e,o?-t:t);return s&&(a=ns(a,X5(s),!0)),i&&(a=ns(a,Y5(i),!0)),a},LF=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let o=dh(e,t);r&&(o=ns(o,ch({angle:r})));const s=fg(n);return TF(s)||(o=ns(o,s)),o},Yf=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,o){if(e&&e.aborted)return o(new xF("loadImage"));const s=QF();let i;e&&(i=function(A){s.src="",o(A)},e.addEventListener("abort",i,{once:!0}));const a=function(){s.onload=s.onerror=null,i&&(e==null||e.removeEventListener("abort",i)),r(s)};n?(s.onload=a,s.onerror=function(){i&&(e==null||e.removeEventListener("abort",i)),o(new Ca("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},Ku=function(n){let{signal:e,reviver:t=Gf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,o)=>{const s=[];e&&e.addEventListener("abort",o,{once:!0}),Promise.all(n.map(i=>Ar.getClass(i.type).fromObject(i,{signal:e}).then(a=>(t(i,a),s.push(a),a)))).then(r).catch(i=>{s.forEach(a=>{a.dispose&&a.dispose()}),o(i)}).finally(()=>{e&&e.removeEventListener("abort",o)})})},pg=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&Ar.has(a.type)?Ku([a],{signal:e}).then(A=>{let[d]=A;return o.push(d),d}):a),i=Object.keys(n);Promise.all(s).then(a=>a.reduce((A,d,c)=>(A[i[c]]=d,A),{})).then(t).catch(a=>{o.forEach(A=>{A.dispose&&A.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},kc=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},S1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Ew={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},mv=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Fw=(n,e,t,r)=>{n/=255,e/=255,t/=255;const o=Math.max(n,e,t),s=Math.min(n,e,t);let i,a;const A=(o+s)/2;if(o===s)i=a=0;else{const d=o-s;switch(a=A>.5?d/(2-o-s):d/(o+s),o){case n:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-n)/d+2;break;case t:i=(n-e)/d+4}i/=6}return[Math.round(360*i),Math.round(100*a),Math.round(100*A),r]},Iw=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},qh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Uw=n=>{let[e,t,r,o=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,o]};let vi=class ms{constructor(e){if(Ve(this,"isUnrecognised",!1),e)if(e instanceof ms)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,o,s=1]=e;this.setSource([t,r,o,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Ew&&(e=Ew[e]),e==="transparent"?[255,255,255,0]:ms.sourceFromHex(e)||ms.sourceFromRgb(e)||ms.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Fw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,o]=Fw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(o,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,o]=this.getSource();return"".concat(qh(e)).concat(qh(t)).concat(qh(r)).concat(qh(Math.round(255*o)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Uw(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Uw(this.getSource()),o=t<(e||127)?0:255;return this.setSource([o,o,o,r]),this}overlayWith(e){e instanceof ms||(e=new ms(e));const t=this.getSource(),r=e.getSource(),[o,s,i]=t.map((a,A)=>Math.round(.5*a+.5*r[A]));return this.setSource([o,s,i,t[3]]),this}static fromRgb(e){return ms.fromRgba(e)}static fromRgba(e){return new ms(ms.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,o,s]=t.slice(1,4).map(i=>{const a=parseFloat(i);return i.endsWith("%")?Math.round(2.55*a):a});return[r,o,s,Iw(t[4])]}}static fromHsl(e){return ms.fromHsla(e)}static fromHsla(e){return new ms(ms.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ms.parseAngletoDegrees(t[1])%360+360)%360/360,o=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,a,A;if(o===0)i=a=A=s;else{const d=s<=.5?s*(o+1):s+o-s*o,c=2*s-d;i=mv(c,d,r+1/3),a=mv(c,d,r),A=mv(c,d,r-1/3)}return[Math.round(255*i),Math.round(255*a),Math.round(255*A),Iw(t[4])]}static fromHex(e){return new ms(ms.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(A=>A+A):t.match(/.{2}/g);const[o,s,i,a=255]=r.map(A=>parseInt(A,16));return[o,s,i,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?nd(r):t.includes("turn")?360*r:r}};const no=(n,e)=>parseFloat(Number(n).toFixed(e)),lc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),o=an.DPI;switch(t==null?void 0:t[0]){case"mm":return r*o/25.4;case"cm":return r*o/2.54;case"in":return r*o;case"pt":return r*o/72;case"pc":return r*o/72*12;case"em":return r*e;default:return r}},PF=n=>{const[e,t]=n.trim().split(" "),[r,o]=(s=e)&&s!==Vs?[s.slice(1,4),s.slice(5,8)]:s===Vs?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:o}},Cp=n=>"matrix("+n.map(e=>no(e,an.NUM_FRACTION_DIGITS)).join(" ")+")",Vu=function(n,e){let t,r,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new vi(e),i=s.getAlpha();t=s.toRgb(),i!==1&&(r=i.toString())}else t="none";return o?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},Qi=n=>!!n&&n.toLive!==void 0,Qw=n=>!!n&&typeof n.toObject=="function",Tw=n=>!!n&&n.offsetX!==void 0&&"source"in n,Tl=n=>!!n&&"multiSelectionStacking"in n;function J5(n){const e=n&&Ji(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let o=n;const s=e.documentElement,i=e.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===e?(t=i.scrollLeft||s.scrollLeft||0,r=i.scrollTop||s.scrollTop||0):(t+=o.scrollLeft||0,r+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:t,top:r}}const Ji=n=>n.ownerDocument||null,Z5=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},ex=function(n,e,t){let{width:r,height:o}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=o,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(o*s).toString()),e.scale(s,s))},k0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Lw(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Vs,n}let tx=class{constructor(e){Ve(this,"_originalCanvasStyle",void 0),Ve(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Tc().getElementById(e)||na();var r;if(t.hasAttribute("data-fabric"))throw new Ca("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(r)),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:o}=this.lower;ex(r,o,e,t)}setCSSDimensions(e){k0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&Ji(e),o={left:0,top:0};if(!r)return o;const s=((t=Z5(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};o.left+=parseInt(s.borderLeftWidth,10)||0,o.top+=parseInt(s.borderTopWidth,10)||0,o.left+=parseInt(s.paddingLeft,10)||0,o.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(i=e.getBoundingClientRect());const A=J5(e);return{left:i.left+A.left-(a.clientLeft||0)+o.left,top:i.top+A.top-(a.clientTop||0)+o.top}}(this.lower.el)}dispose(){Pa().dispose(this.lower.el),delete this.lower}};const kF={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Os]};let E1=class rx extends q5(K5){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return rx.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new tx(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(ul("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?H5():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const o=Xe({width:this.width,height:this.height},e);this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,o=[...this.viewportTransform],s=$s(e,Zi(o));o[0]=t,o[3]=t;const i=$s(s,o);o[4]+=r.x-i.x,o[5]+=r.y-i.y,this.setViewportTransform(o)}setZoom(e){this.zoomToPoint(new zt(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new zt(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Xf(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Zi(this.viewportTransform),o=$s({x:0,y:0},r),s=$s({x:e,y:t},r),i=o.min(s),a=o.max(s);return this.vptCoords={tl:i,tr:new zt(a.x,i.y),bl:new zt(i.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(IF(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,o)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,o=t.length;r<o;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],o=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!o)return;const a=Qi(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,i&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const A=r.gradientTransform||r.patternTransform;A&&e.transform(...A)}e.fill(),e.restore()}if(o){e.save();const{skipOffscreen:A}=this;this.skipOffscreen=i,i&&e.transform(...s),o.render(e),this.skipOffscreen=A,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new zt(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new zt(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new zt(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new zt(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new zt(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return $s(this.getCenterPoint(),Zi(this.viewportTransform))}_centerObject(e,t){e.setXY(t,jr,jr),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,o=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Xe(Xe(Xe({version:L0},kc(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),o?{clipPath:o}:null)}_toObject(e,t,r){let o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!o),s}__serializeBgOverlay(e,t){const r={},o=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,a=this.overlayColor;return Qi(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),Qi(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),o=t.height||"".concat(this.height),s=an.NUM_FRACTION_DIGITS,i=t.viewBox;let a;if(i)a='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const A=this.viewportTransform;a='viewBox="'.concat(no(-A[4]/A[0],s)," ").concat(no(-A[5]/A[3],s)," ").concat(no(this.width/A[0],s)," ").concat(no(this.height/A[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",L0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(hl()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Qi(t)){const r=this["".concat(e,"Vpt")],o=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?o[0]:1),height:this.height/(r?o[3]:1)};return t.toSVG(s,{additionalTransform:r?Cp(o):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=an.fontPaths;this._objects.forEach(function s(i){e.push(i),Wf(i)&&i._objects.forEach(s)}),e.forEach(s=>{if(!(i=s)||typeof i._renderText!="function")return;var i;const{styles:a,fontFamily:A}=s;!t[A]&&r[A]&&(t[A]=!0,a&&Object.values(a).forEach(d=>{Object.values(d).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const o=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return o?`	<style type="text/css"><![CDATA[
`.concat(o,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const o=this[t];o&&!o.excludeFromExport&&o.toSVG&&e.push(o.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Qi(r)){const o=r.repeat||"",s=this.width,i=this.height,a=this["".concat(t,"Vpt")]?Cp(Zi(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat(o!=="repeat-y"&&o!=="no-repeat"||!Tw(r)?s:r.source.width,'" height="').concat(o!=="repeat-x"&&o!=="no-repeat"||!Tw(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Ca("`json` is undefined"));const o=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:a,overlayImage:A,overlay:d,clipPath:c}=o,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ku(s,{reviver:t,signal:r}),pg({backgroundImage:i,backgroundColor:a,overlayImage:A,overlayColor:d,clipPath:c},{signal:r})]).then(h=>{let[f,g]=h;return this.clear(),this.add(...f),this.set(o),this.set(g),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ka(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:o=1,enableRetinaScaling:s=!1}=e,i=o*(s?this.getRetinaScaling():1);return V5(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:o,top:s,filter:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,A=(r||this.height)*e,d=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,f=d*e,g=this.viewportTransform,w=[f,0,0,f,(g[4]-(o||0))*e,(g[5]-(s||0))*e],y=this.enableRetinaScaling,x=ka({width:a,height:A}),C=i?this._objects.filter(I=>i(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=a,this.height=A,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),C),this.viewportTransform=g,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=h,x}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),zp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};Ve(E1,"ownDefaults",kF);const OF=["touchstart","touchmove","touchend"],DF=n=>{const e=J5(n.target),t=function(r){const o=r.changedTouches;return o&&o[0]?o[0]:r}(n);return new zt(t.clientX+e.left,t.clientY+e.top)},O0=n=>OF.includes(n.type)||n.pointerType==="touch",D0=n=>{n.preventDefault(),n.stopPropagation()},gA=n=>{let e=0,t=0,r=0,o=0;for(let s=0,i=n.length;s<i;s++){const{x:a,y:A}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(A>o||!s)&&(o=A),(A<t||!s)&&(t=A)}return{left:e,top:t,width:r-e,height:o-t}},NF=["translateX","translateY","scaleX","scaleY"],MF=(n,e)=>Sp(n,ns(e,n.calcOwnMatrix())),Sp=(n,e)=>{const t=Bp(e),{translateX:r,translateY:o,scaleX:s,scaleY:i}=t,a=Xn(t,NF),A=new zt(r,o);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:i}),n.setPositionByOrigin(A,jr,jr)},HF=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},nx=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),F1=(n,e,t)=>{const r=n/2,o=e/2,s=[new zt(-r,-o),new zt(r,-o),new zt(-r,o),new zt(r,o)].map(a=>a.transform(t)),i=gA(s);return new zt(i.width,i.height)},gg=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Os;return ns(Zi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os),n)},dc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Os;return n.transform(gg(e,t))},jF=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Os;return n.transform(gg(e,t),!0)},RF=(n,e,t)=>{const r=gg(e,t);return Sp(n,ns(r,n.calcOwnMatrix())),r},ox=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Xe(Xe({},e),{},{target:r})),r.fire(n,e)},$F={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Eo=n=>typeof n=="string"?$F[n]:n-.5,Ep="not-allowed";function sx(n){return Eo(n.originX)===Eo(jr)&&Eo(n.originY)===Eo(jr)}function Pw(n){return .5-Eo(n)}const ta=(n,e)=>n[e],ix=(n,e,t,r)=>({e:n,transform:e,pointer:new zt(t,r)});function ax(n,e){const t=n.getTotalAngle()+nd(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function I1(n,e,t,r,o){var s;let{target:i,corner:a}=n;const A=i.controls[a],d=((s=i.canvas)===null||s===void 0?void 0:s.getZoom())||1,c=i.padding/d,u=function(h,f,g,w){const y=h.getRelativeCenterPoint(),x=g!==void 0&&w!==void 0?h.translateToGivenOrigin(y,jr,jr,g,w):new zt(h.left,h.top);return(h.angle?f.rotate(-_o(h.angle),y):f).subtract(x)}(i,new zt(r,o),e,t);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=A.offsetX,u.y-=A.offsetY,u}const qF=(n,e,t,r)=>{const{target:o,offsetX:s,offsetY:i}=e,a=t-s,A=r-i,d=!ta(o,"lockMovementX")&&o.left!==a,c=!ta(o,"lockMovementY")&&o.top!==A;return d&&o.set(wn,a),c&&o.set(Ks,A),(d||c)&&ox(j5,ix(n,e,t,r)),d||c};class Ax{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):Vs,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=Vu(Lo,this.fill);return[Vu(Gs,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",h,"fill-rule: ",t,"; ","opacity: ",d,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'.concat(Cp(r));return"".concat(o).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=o,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:o,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",A=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=A&&A.absolutePositioned,u=this.stroke,h=this.fill,f=this.shadow,g=[],w=e.indexOf("COMMON_PARTS");let y;A&&(A.clipPathId="CLIPPATH_".concat(hl()),y='<clipPath id="'.concat(A.clipPathId,`" >
`).concat(A.toClipPathSVG(r),`</clipPath>
`)),c&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons(),` >
`);const x=[i,d,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[w]=x,Qi(h)&&g.push(h.toSVG(this)),Qi(u)&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),A&&g.push(y),g.push(e.join("")),g.push(`</g>
`),c&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Lo?' paint-order="'.concat(this.paintFirst,'" '):""}}function vg(n){return new RegExp("^("+n.join("|")+")\\b","i")}var kw;const od=String.raw(kw||(kw=vl(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),KF=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+od+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+od+"))?\\s+(.*)"),VF={cx:wn,x:wn,r:"radius",cy:Ks,y:Ks,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},wv="font-size",yv="clip-path";vg(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);vg(["symbol","image","marker","pattern","view","svg"]);const Ow=vg(["symbol","g","a","svg","clipPath","defs"]),GF=new zt(1,0),lx=new zt,dx=(n,e)=>n.rotate(e),N0=(n,e)=>new zt(e).subtract(n),M0=n=>n.distanceFrom(lx),H0=(n,e)=>Math.atan2(zu(n,e),XF(n,e)),WF=n=>H0(GF,n),U1=n=>n.eq(lx)?n:n.scalarDivide(M0(n)),cx=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return U1(new zt(-n.y,n.x).scalarMultiply(e?1:-1))},zu=(n,e)=>n.x*e.y-n.y*e.x,XF=(n,e)=>n.x*e.x+n.y*e.y,Dw=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=zu(e,t),o=zu(e,n),s=zu(t,n);return r>=0?o>=0&&s<=0:!(o<=0&&s>=0)},Nw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Mw=new RegExp("(?:\\s|^)"+Nw+Nw+"("+od+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class vA{constructor(e){const t=typeof e=="string"?vA.parseShadow(e):e;Object.assign(this,vA.ownDefaults,t),this.id=hl()}static parseShadow(e){const t=e.trim(),[,r=0,o=0,s=0]=(Mw.exec(t)||[]).map(i=>parseFloat(i)||0);return{color:(t.replace(Mw,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:o,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=dx(new zt(this.offsetX,this.offsetY),_o(-e.angle)),r=new vi(this.color);let o=40,s=40;return e.width&&e.height&&(o=100*no((Math.abs(t.x)+this.blur)/e.width,an.NUM_FRACTION_DIGITS)+20,s=100*no((Math.abs(t.y)+this.blur)/e.height,an.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(no(this.blur?this.blur/2:0,an.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(no(t.x,an.NUM_FRACTION_DIGITS),'" dy="').concat(no(t.y,an.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=vA.ownDefaults;return this.includeDefaultValues?e:S1(e,(r,o)=>r!==t[o])}static async fromObject(e){return new this(e)}}Ve(vA,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Ve(vA,"type","shadow"),Ar.setClass(vA,"shadow");const bc=(n,e,t)=>Math.max(n,Math.min(e,t)),YF=[Ks,wn,Ys,ki,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Lc,Pc],xA=[Lo,Gs,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],JF={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:wn,originY:Ks,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Lo,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},ZF=(n,e,t,r)=>-t*Math.cos(n/r*lh)+t+e,eI=()=>!1;class Q1{constructor(e){let{startValue:t,byValue:r,duration:o=500,delay:s=0,easing:i=ZF,onStart:a=Gf,onChange:A=Gf,onComplete:d=Gf,abort:c=eI,target:u}=e;Ve(this,"_state","pending"),Ve(this,"durationProgress",0),Ve(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=s,this.easing=i,this._onStart=a,this._onChange=A,this._onComplete=d,this._abort=c,this.target=u,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Xf(e),this.delay):Xf(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:o,valueProgress:s}=this.calculate(r);this.value=Object.freeze(o),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Xf(this.tick)))}register(){zp.push(this)}unregister(){zp.remove(this)}abort(){this._state="aborted",this.unregister()}}const tI=["startValue","endValue"];class rI extends Q1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Xe(Xe({},Xn(e,tI)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const nI=["startValue","endValue"];class oI extends Q1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Xe(Xe({},Xn(e,nI)),{},{startValue:t,byValue:r.map((o,s)=>o-t[s])}))}calculate(e){const t=this.startValue.map((r,o)=>this.easing(e,r,this.byValue[o],this.duration,o));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const sI=["startValue","endValue","easing","onChange","onComplete","abort"],iI=(n,e,t,r)=>e+t*(1-Math.cos(n/r*lh)),_v=n=>n&&((e,t,r)=>n(new vi(e).toRgba(),t,r));class aI extends Q1{constructor(e){let{startValue:t,endValue:r,easing:o=iI,onChange:s,onComplete:i,abort:a}=e,A=Xn(e,sI);const d=new vi(t).getSource(),c=new vi(r).getSource();super(Xe(Xe({},A),{},{startValue:d,byValue:c.map((u,h)=>u-d[h]),easing:o,onChange:_v(s),onComplete:_v(i),abort:_v(a)}))}calculate(e){const[t,r,o,s]=this.startValue.map((a,A)=>this.easing(e,a,this.byValue[A],this.duration,A)),i=[...[t,r,o].map(Math.round),bc(0,s,1)];return{value:i,valueProgress:i.map((a,A)=>this.byValue[A]!==0?Math.abs((a-this.startValue[A])/this.byValue[A]):0).find(a=>a!==0)||0}}}function ux(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new oI(n):new rI(n);return e.start(),e}function AI(n){const e=new aI(n);return e.start(),e}class ro{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(o=>!this.includes(o))),this}static isPointContained(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(o||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(o||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=N0(t,r),i=N0(t,e).divide(s);return o?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new zt(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let o=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;o+=+(i.status==="Intersection")}return o%2==1}static intersectLineLine(e,t,r,o){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],i=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,A=t.y-e.y,d=o.x-r.x,c=o.y-r.y,u=e.x-r.x,h=e.y-r.y,f=d*h-c*u,g=a*h-A*u,w=c*a-d*A;if(w!==0){const y=f/w,x=g/w;return(s||0<=y&&y<=1)&&(i||0<=x&&x<=1)?new ro("Intersection").append(new zt(e.x+y*a,e.y+y*A)):new ro}if(f===0||g===0){const y=s||i||ro.isPointContained(e,r,o)||ro.isPointContained(t,r,o)||ro.isPointContained(r,e,t)||ro.isPointContained(o,e,t);return new ro(y?"Coincident":void 0)}return new ro("Parallel")}static intersectSegmentLine(e,t,r,o){return ro.intersectLineLine(e,t,r,o,!1,!0)}static intersectSegmentSegment(e,t,r,o){return ro.intersectLineLine(e,t,r,o,!1,!1)}static intersectLinePolygon(e,t,r){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new ro,i=r.length;for(let a,A,d,c=0;c<i;c++){if(a=r[c],A=r[(c+1)%i],d=ro.intersectLineLine(e,t,a,A,o,!1),d.status==="Coincident")return d;s.append(...d.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return ro.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new ro,o=e.length,s=[];for(let i=0;i<o;i++){const a=e[i],A=e[(i+1)%o],d=ro.intersectSegmentPolygon(a,A,t);d.status==="Coincident"?(s.push(d),r.append(a,A)):r.append(...d.points)}return s.length>0&&s.length===e.length?new ro("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const o=t.min(r),s=t.max(r),i=new zt(s.x,o.y),a=new zt(o.x,s.y);return ro.intersectPolygonPolygon(e,[o,i,s,a])}}class lI extends K5{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?$s(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=$s(e,Zi(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new zt(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,o];if(this.group){const i=this.group.calcTransformMatrix();return s.map(a=>$s(a,i))}return s}intersectsWithRect(e,t){return ro.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=ro.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:o,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&o>=e.y&&o+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return ro.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return gA(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Ys,e),this._set(ki,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?nd(G5(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Os.concat()}calcACoords(){const e=ch({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),o=dh(t,r),s=ns(o,e),i=this._getTransformedDimensions(),a=i.x/2,A=i.y/2;return{tl:$s({x:-a,y:-A},s),tr:$s({x:a,y:-A},s),bl:$s({x:-a,y:A},s),br:$s({x:a,y:A},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Eo(this.originX),Eo(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),o=this.matrixCache;return o&&o.key.every((s,i)=>s===r[i])?o.value:(this.group&&(t=ns(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=LF(o);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new zt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Xe({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let o=r,s=0;this.strokeUniform&&(o=0,s=r);const i=t.width+o,a=t.height+o;let A;return A=t.skewX===0&&t.skewY===0?new zt(i*t.scaleX,a*t.scaleY):F1(i,a,fg(t)),A.scalarAdd(s)}translateToGivenOrigin(e,t,r,o,s){let i=e.x,a=e.y;const A=Eo(o)-Eo(t),d=Eo(s)-Eo(r);if(A||d){const c=this._getTransformedDimensions();i+=A*c.x,a+=d*c.y}return new zt(i,a)}translateToCenterPoint(e,t,r){if(t===jr&&r===jr)return e;const o=this.translateToGivenOrigin(e,t,r,jr,jr);return this.angle?o.rotate(_o(this.angle),e):o}translateToOriginPoint(e,t,r){const o=this.translateToGivenOrigin(e,jr,jr,t,r);return this.angle?o.rotate(_o(this.angle),e):o}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?$s(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new zt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const o=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),wn,Ks)}}const dI=["type"],cI=["extraParam"];let sA=class Jf extends lI{static getDefaults(){return Jf.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){ul("warn","Setting type has no effect",e)}constructor(e){super(),Ve(this,"_cacheContext",null),Object.assign(this,Jf.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=na(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,o=an.maxCacheSideLimit,s=an.minCacheSideLimit;if(t<=o&&r<=o&&t*r<=an.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[a,A]=xu.limitDimsByArea(i),d=bc(s,a,o),c=bc(s,A,o);return t>d&&(e.zoomX/=t/d,e.width=d,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,o=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(o+2),zoomX:e.x,zoomY:e.y,x:r,y:o}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:o,zoomX:s,zoomY:i,x:a,y:A}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=r!==e.width||o!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(d||c){r!==e.width||o!==e.height?(e.width=r,e.height=o):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const u=a/2,h=A/2;return this.cacheTranslationX=Math.round(e.width/2-u)+u,this.cacheTranslationY=Math.round(e.height/2-h)+h,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new zt(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Bp(this.calcTransformMatrix());return new zt(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Ys&&e!==ki||(t=this._constrainScale(t)),e===Ys&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof vA||(t=new vA(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s}=this,{width:i,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s,width:i,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Gs&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const o=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=o,this.stroke=s}createClipPathLayer(e,t){const r=ka(t),o=r.getContext("2d");if(o.translate(t.cacheTranslationX,t.cacheTranslationY),o.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(o)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=Zi(this.calcTransformMatrix());o.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(o),e.drawObject(o,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const o=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,o)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Qi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Qi(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,o=this.getCanvasRetinaScaling(),[s,,,i]=(r==null?void 0:r.viewportTransform)||Os,a=s*o,A=i*o,d=t.nonScaling?new zt(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*an.browserShadowBlurConstant*(a+A)*(d.x+d.y)/4,e.shadowOffsetX=t.offsetX*a*d.x,e.shadowOffsetY=t.offsetY*A*d.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Qi(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,o=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Gs?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=o.x/this.scaleX/s,a=o.y/this.scaleY/s,A=ka({width:Math.ceil(i),height:Math.ceil(a)}),d=A.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(i,0),d.lineTo(i,a),d.lineTo(0,a),d.closePath(),d.translate(i/2,a/2),d.scale(o.zoomX/this.scaleX/s,o.zoomY/this.scaleY/s),this._applyPatternGradientTransform(d,t),d.fillStyle=t.toLive(e),d.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/o.zoomX,s*this.scaleY/o.zoomY),e.strokeStyle=(r=d.createPattern(A,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new zt(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Ar.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=nx(this),r=this.group,o=this.shadow,s=Math.abs,i=e.enableRetinaScaling?H5():1,a=(e.multiplier||1)*i,A=e.canvasProvider||(C=>new E1(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&HF(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&RF(this,this.getViewportTransform()),this.setCoords();const d=na(),c=this.getBoundingRect(),u=this.shadow,h=new zt;if(u){const C=u.blur,I=u.nonScaling?new zt(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+C)*s(I.x),h.y=2*Math.round(s(u.offsetY)+C)*s(I.y)}const f=c.width+h.x,g=c.height+h.y;d.width=Math.ceil(f),d.height=Math.ceil(g);const w=A(d);e.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new zt(w.width/2,w.height/2),jr,jr);const y=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const x=w.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=o,r&&(this.group=r),this.set(t),this.setCoords(),w._objects=[],w.destroy(),x}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return V5(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:o}=this;if(t){const{x:s,y:i}=this.getRelativeCenterPoint();this.originX=jr,this.originY=jr,this.left=s,this.top=i}if(this.set("angle",e),t){const{x:s,y:i}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,o);this.left=s,this.top=i,this.originX=r,this.originY=o}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){zp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Pa().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,o)=>{let[s,i]=o;return r[s]=this._animate(s,i,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.split("."),s=this.constructor.colorProperties.includes(o[o.length-1]),{abort:i,startValue:a,onChange:A,onComplete:d}=r,c=Xe(Xe({},r),{},{target:this,startValue:a??o.reduce((u,h)=>u[h],this),endValue:t,abort:i==null?void 0:i.bind(this),onChange:(u,h,f)=>{o.reduce((g,w,y)=>(y===o.length-1&&(g[w]=u),g[w]),this),A&&A(u,h,f)},onComplete:(u,h,f)=>{this.setCoords(),d&&d(u,h,f)}});return s?AI(c):ux(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let o,s=0;s<t.length;s++){if(o=t[s],o===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(o===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const o=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(o),a=r._objects.indexOf(s);return i>-1&&i>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Jf.customProperties,this.constructor.customProperties||[]);let t;const r=an.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:i,shadow:a,strokeDashArray:A,left:d,top:c,originX:u,originY:h,width:f,height:g,strokeWidth:w,strokeLineCap:y,strokeDashOffset:x,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:M,scaleX:L,scaleY:ee,angle:W,flipX:R,flipY:Z,opacity:Be,visible:N,backgroundColor:k,fillRule:J,paintFirst:ne,globalCompositeOperation:ge,skewX:pe,skewY:xe}=this;o&&!o.excludeFromExport&&(t=o.toObject(e.concat("inverted","absolutePositioned")));const te=oe=>no(oe,r),se=Xe(Xe({},kc(this,e)),{},{type:this.constructor.type,version:L0,originX:u,originY:h,left:te(d),top:te(c),width:te(f),height:te(g),fill:Qw(s)?s.toObject():s,stroke:Qw(i)?i.toObject():i,strokeWidth:te(w),strokeDashArray:A&&A.concat(),strokeLineCap:y,strokeDashOffset:x,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:te(M),scaleX:te(L),scaleY:te(ee),angle:te(W),flipX:R,flipY:Z,opacity:te(Be),shadow:a&&a.toObject(),visible:N,backgroundColor:k,fillRule:J,paintFirst:ne,globalCompositeOperation:ge,skewX:te(pe),skewY:te(xe)},t?{clipPath:t}:null);return this.includeDefaultValues?se:this._removeDefaultValues(se)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return S1(e,(o,s)=>{if(s===wn||s===Ks||s==="type")return!0;const i=r[s];return o!==i&&!(Array.isArray(o)&&Array.isArray(i)&&o.length===0&&i.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Xn(e,dI),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:o}=r,s=Xn(r,cI);return pg(t,s).then(i=>o?(delete i[o],new this(t[o],i)):new this(i))}static fromObject(e,t){return this._fromObject(e,t)}};Ve(sA,"stateProperties",YF),Ve(sA,"cacheProperties",xA),Ve(sA,"ownDefaults",JF),Ve(sA,"type","FabricObject"),Ve(sA,"colorProperties",[Lo,Gs,"backgroundColor"]),Ve(sA,"customProperties",[]),Ar.setClass(sA),Ar.setClass(sA,"object");const Oc=(n,e,t)=>(r,o,s,i)=>{const a=e(r,o,s,i);return a&&ox(n,Xe(Xe({},ix(r,o,s,i)),t)),a};function Dc(n){return(e,t,r,o)=>{const{target:s,originX:i,originY:a}=t,A=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(A,i,a),c=n(e,t,r,o);return s.setPositionByOrigin(d,t.originX,t.originY),c}}const Hw=Oc(qu,Dc((n,e,t,r)=>{const o=I1(e,e.originX,e.originY,t,r);if(Eo(e.originX)===Eo(jr)||Eo(e.originX)===Eo(vo)&&o.x<0||Eo(e.originX)===Eo(wn)&&o.x>0){const{target:s}=e,i=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=sx(e)?2:1,A=s.width,d=Math.abs(o.x*a/s.scaleX)-i;return s.set("width",Math.max(d,1)),A!==s.width}return!1}));function uI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?Gs:Lo,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor);let c,u=e,h=t;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",s>i?(c=s,n.scale(1,i/s),h=t*s/i):i>s?(c=i,n.scale(s/i,1),u=e*i/s):c=s,n.beginPath(),n.arc(u,h,c/2,0,_p,!1),n[A](),d&&n.stroke(),n.restore()}function hI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?Gs:Lo,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor),c=s/2,u=i/2;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",n.translate(e,t);const h=o.getTotalAngle();n.rotate(_o(h)),n["".concat(A,"Rect")](-c,-u,s,i),d&&n.strokeRect(-c,-u,s,i),n.restore()}class Vi{constructor(e){Ve(this,"visible",!0),Ve(this,"actionName",hg),Ve(this,"angle",0),Ve(this,"x",0),Ve(this,"y",0),Ve(this,"offsetX",0),Ve(this,"offsetY",0),Ve(this,"sizeX",0),Ve(this,"sizeY",0),Ve(this,"touchSizeX",0),Ve(this,"touchSizeY",0),Ve(this,"cursorStyle","crosshair"),Ve(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,o){var s;let{tl:i,tr:a,br:A,bl:d}=o;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&ro.isPointInPolygon(r,[i,a,A,d])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,o;return(r=(o=e._controlsVisibility)===null||o===void 0?void 0:o[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,o){return new zt(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,o,s,i){const a=B1([dh(r,o),ch({angle:e}),C1((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new zt(-.5,-.5).transform(a),tr:new zt(.5,-.5).transform(a),br:new zt(.5,.5).transform(a),bl:new zt(-.5,.5).transform(a)}}render(e,t,r,o,s){((o=o||{}).cornerStyle||s.cornerStyle)==="circle"?uI.call(this,e,t,r,o,s):hI.call(this,e,t,r,o,s)}}const fI=(n,e,t)=>t.lockRotation?Ep:e.cursorStyle,pI=Oc(R5,Dc((n,e,t,r)=>{let{target:o,ex:s,ey:i,theta:a,originX:A,originY:d}=e;const c=o.translateToOriginPoint(o.getRelativeCenterPoint(),A,d);if(ta(o,"lockRotation"))return!1;const u=Math.atan2(i-c.y,s-c.x),h=Math.atan2(r-c.y,t-c.x);let f=nd(h-u+a);if(o.snapAngle&&o.snapAngle>0){const w=o.snapAngle,y=o.snapThreshold||w,x=Math.ceil(f/w)*w,C=Math.floor(f/w)*w;Math.abs(f-C)<y?f=C:Math.abs(f-x)<y&&(f=x)}f<0&&(f=360+f),f%=360;const g=o.angle!==f;return o.angle=f,g}));function hx(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function fx(n,e,t){const r=ta(n,"lockScalingX"),o=ta(n,"lockScalingY");if(r&&o||!e&&(r||o)&&t||r&&e==="x"||o&&e==="y")return!0;const{width:s,height:i,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||i===0&&a===0&&e!=="x"}const gI=["e","se","s","sw","w","nw","n","ne","e"],uu=(n,e,t)=>{const r=hx(n,t);if(fx(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Ep;const o=ax(t,e);return"".concat(gI[o],"-resize")};function T1(n,e,t,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,i=o.by,a=hx(n,s);let A,d,c,u,h,f;if(fx(s,i,a))return!1;if(e.gestureScale)d=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(A=I1(e,e.originX,e.originY,t,r),h=i!=="y"?Math.sign(A.x||e.signX||1):1,f=i!=="x"?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=h),e.signY||(e.signY=f),ta(s,"lockScalingFlip")&&(e.signX!==h||e.signY!==f))return!1;if(u=s._getTransformedDimensions(),a&&!i){const y=Math.abs(A.x)+Math.abs(A.y),{original:x}=e,C=y/(Math.abs(u.x*x.scaleX/s.scaleX)+Math.abs(u.y*x.scaleY/s.scaleY));d=x.scaleX*C,c=x.scaleY*C}else d=Math.abs(A.x*s.scaleX/u.x),c=Math.abs(A.y*s.scaleY/u.y);sx(e)&&(d*=2,c*=2),e.signX!==h&&i!=="y"&&(e.originX=Pw(e.originX),d*=-1,e.signX=h),e.signY!==f&&i!=="x"&&(e.originY=Pw(e.originY),c*=-1,e.signY=f)}const g=s.scaleX,w=s.scaleY;return i?(i==="x"&&s.set(Ys,d),i==="y"&&s.set(ki,c)):(!ta(s,"lockScalingX")&&s.set(Ys,d),!ta(s,"lockScalingY")&&s.set(ki,c)),g!==s.scaleX||w!==s.scaleY}const Kh=Oc(ug,Dc((n,e,t,r)=>T1(n,e,t,r))),vI=Oc(ug,Dc((n,e,t,r)=>T1(n,e,t,r,{by:"x"}))),mI=Oc(ug,Dc((n,e,t,r)=>T1(n,e,t,r,{by:"y"}))),wI=["target","ex","ey","skewingSide"],bv={x:{counterAxis:"y",scale:Ys,skew:Lc,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:ki,skew:Pc,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},yI=["ns","nesw","ew","nwse"],_I=(n,e,t)=>{if(e.x!==0&&ta(t,"lockSkewingY")||e.y!==0&&ta(t,"lockSkewingX"))return Ep;const r=ax(t,e)%4;return"".concat(yI[r],"-resize")};function px(n,e,t,r,o){const{target:s}=t,{counterAxis:i,origin:a,lockSkewing:A,skew:d,flip:c}=bv[n];if(ta(s,A))return!1;const{origin:u,flip:h}=bv[i],f=Eo(t[u])*(s[h]?-1:1),g=-Math.sign(f)*(s[c]?-1:1),w=.5*-((s[d]===0&&I1(t,jr,jr,r,o)[n]>0||s[d]>0?1:-1)*g)+.5;return Oc($5,Dc((x,C,I,M)=>function(L,ee,W){let{target:R,ex:Z,ey:Be,skewingSide:N}=ee,k=Xn(ee,wI);const{skew:J}=bv[L],ne=W.subtract(new zt(Z,Be)).divide(new zt(R.scaleX,R.scaleY))[L],ge=R[J],pe=k[J],xe=Math.tan(_o(pe)),te=L==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,se=2*ne*N/Math.max(te,1)+xe,oe=nd(Math.atan(se));R.set(J,oe);const me=ge!==R[J];if(me&&L==="y"){const{skewX:B,scaleX:F}=R,E=R._getTransformedDimensions({skewY:ge}),T=R._getTransformedDimensions(),P=B!==0?E.x/T.x:1;P!==1&&R.set(Ys,P*F)}return me}(n,C,new zt(I,M))))(e,Xe(Xe({},t),{},{[a]:w,skewingSide:g}),r,o)}const bI=(n,e,t,r)=>px("x",n,e,t,r),xI=(n,e,t,r)=>px("y",n,e,t,r);function mg(n,e){return n[e.canvas.altActionKey]}const Vh=(n,e,t)=>{const r=mg(n,t);return e.x===0?r?Lc:ki:e.y===0?r?Pc:Ys:""},Jd=(n,e,t)=>mg(n,t)?_I(0,e,t):uu(n,e,t),jw=(n,e,t,r)=>mg(n,e.target)?xI(n,e,t,r):vI(n,e,t,r),Rw=(n,e,t,r)=>mg(n,e.target)?bI(n,e,t,r):mI(n,e,t,r),gx=()=>({ml:new Vi({x:-.5,y:0,cursorStyleHandler:Jd,actionHandler:jw,getActionName:Vh}),mr:new Vi({x:.5,y:0,cursorStyleHandler:Jd,actionHandler:jw,getActionName:Vh}),mb:new Vi({x:0,y:.5,cursorStyleHandler:Jd,actionHandler:Rw,getActionName:Vh}),mt:new Vi({x:0,y:-.5,cursorStyleHandler:Jd,actionHandler:Rw,getActionName:Vh}),tl:new Vi({x:-.5,y:-.5,cursorStyleHandler:uu,actionHandler:Kh}),tr:new Vi({x:.5,y:-.5,cursorStyleHandler:uu,actionHandler:Kh}),bl:new Vi({x:-.5,y:.5,cursorStyleHandler:uu,actionHandler:Kh}),br:new Vi({x:.5,y:.5,cursorStyleHandler:uu,actionHandler:Kh}),mtr:new Vi({x:0,y:-.5,actionHandler:pI,cursorStyleHandler:fI,offsetY:-40,withConnection:!0,actionName:x1})}),zI=()=>({mr:new Vi({x:.5,y:0,actionHandler:Hw,cursorStyleHandler:Jd,actionName:qu}),ml:new Vi({x:-.5,y:0,actionHandler:Hw,cursorStyleHandler:Jd,actionName:qu})}),BI=()=>Xe(Xe({},gx()),zI());class Gu extends sA{static getDefaults(){return Xe(Xe({},super.getDefaults()),Gu.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Gu.ownDefaults),this.setOptions(e)}static createControls(){return{controls:gx()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,o=t.action;if(this===r&&o&&o.startsWith(hg))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let o=r.length-1;o>=0;o--){const[s,i]=r[o],a=this.controls[s];if(a.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=dh(t.x,t.y),o=ch({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=ns(r,o),i=ns(e,s),a=ns(i,[1/e[0],0,0,1/e[3],0,0]),A=this.group?Bp(this.calcTransformMatrix()):void 0;A&&(A.scaleX=Math.abs(A.scaleX),A.scaleY=Math.abs(A.scaleY));const d=this._calculateCurrentDimensions(A),c={};return this.forEachControl((u,h)=>{const f=u.positionHandler(d,a,this,u);c[h]=Object.assign(f,this._calcCornerCoords(u,f))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),o=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/o[0],1/o[3]),e.rotate(_o(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=Xe({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=o.borderColor,this._setLineDash(e,o.borderDashArray),this.strokeBorders(e,t),o.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:o}=this,s=Xe({hasBorders:r,hasControls:o},t),i=this.getViewportTransform(),a=s.hasBorders,A=s.hasControls,d=ns(i,this.calcTransformMatrix()),c=Bp(d);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(_o(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),A&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let o;if(r&&r.forActiveSelection||this.group){const s=F1(this.width,this.height,fg(t)),i=this.isStrokeAccountedForInDimensions()?z1:(this.strokeUniform?new zt().scalarAdd(this.canvas?this.canvas.getZoom():1):new zt(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);o=s.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,o,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((o,s)=>{o.withConnection&&o.getVisibility(this,s)&&(r=!0,e.moveTo(o.x*t.x,o.y*t.y),e.lineTo(o.x*t.x+o.offsetX,o.y*t.y+o.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:s,cornerColor:i}=this,a=Xe({cornerStrokeColor:o,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((A,d)=>{if(A.getVisibility(this,d)){const c=this.oCoords[d];A.render(e,c.x,c.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,o]=t;return this.setControlVisible(r,o)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const o=this.width+4,s=this.height+4;return t.clearRect(-o/2,-s/2,o,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function vx(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Ve(Gu,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Go extends Gu{}vx(Go,[Ax]),Ar.setClass(Go),Ar.setClass(Go,"object");const CI=(n,e,t,r)=>{const o=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,o,o);for(let i=3;i<s.length;i+=4)if(s[i]>0)return!1;return!0};class mx{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new zt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new zt(1/this.options.scaleX,1/this.options.scaleY):new zt(1,1)}createSideVector(e,t){const r=N0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new zt(e);return t.y+=t.x*Math.tan(_o(this.options.skewY)),t.x+=t.y*Math.tan(_o(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const SI=new zt;class cc extends mx{static getOrthogonalRotationFactor(e,t){const r=t?H0(e,t):WF(e);return Math.abs(r)<lh?-1:1}constructor(e,t,r,o){super(o),Ve(this,"AB",void 0),Ve(this,"AC",void 0),Ve(this,"alpha",void 0),Ve(this,"bisector",void 0),this.A=new zt(e),this.B=new zt(t),this.C=new zt(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=H0(this.AB,this.AC),this.bisector=U1(dx(this.AB.eq(SI)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t),s=cx(o),i=cc.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%_p==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?M0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return M0(o)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(o))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],o=new zt(cc.getOrthogonalRotationFactor(this.bisector),cc.getOrthogonalRotationFactor(new zt(this.bisector.y,this.bisector.x)));return[new zt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new zt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(s=>{Dw(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:o,skewY:s,scaleX:i,scaleY:a,strokeUniform:A}=this.options,d=new zt(Math.tan(_o(o)),Math.tan(_o(s))),c=this.strokeProjectionMagnitude,u=A?c/a/Math.sqrt(1/a**2+1/i**2*d.y**2):c/Math.sqrt(1+d.y**2),h=new zt(Math.sqrt(Math.max(c**2-u**2,0)),u),f=A?c/Math.sqrt(1+d.x**2*(1/a)**2/(1/i+1/i*d.x*d.y)**2):c/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),g=new zt(f,Math.sqrt(Math.max(c**2-f**2,0)));return[g,g.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(w=>this.applySkew(A?w.multiply(this.strokeUniformScalar):w)).forEach(w=>{Dw(w,e,t)&&r.push(this.applySkew(this.A).add(w))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%_p==0,r=this.applySkew(this.A),o=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=zu(o,i)>0,A=a?o:s,d=a?s:o;return this.isSkewed()?e.push(...this.projectRoundWithSkew(A,d)):e.push(...this.projectRoundNoSkew(A,d)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class $w extends mx{constructor(e,t,r){super(r),this.A=new zt(e),this.T=new zt(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t);return this.scaleUnitVector(cx(o),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new zt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new cc(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new zt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(U1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(r);e.push(o.add(t),o.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const EI=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const o=n.reduce((s,i)=>(s[s.length-1].eq(i)||s.push(new zt(i)),s),[new zt(n[0])]);if(o.length===1)t=!0;else if(!t){const s=o[0],i=((a,A)=>{for(let d=a.length-1;d>=0;d--)if(A(a[d],d,a))return d;return-1})(o,a=>!a.eq(s));o.splice(i+1)}return o.forEach((s,i,a)=>{let A,d;i===0?(d=a[1],A=t?s:a[a.length-1]):i===a.length-1?(A=a[i-1],d=t?s:a[0]):(A=a[i-1],d=a[i+1]),t&&a.length===1?r.push(...new $w(s,s,e).project()):!t||i!==0&&i!==a.length-1?r.push(...new cc(s,A,d,e).project()):r.push(...new $w(s,i===0?d:A,e).project())}),r},L1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Xe({},n[t][r])})}),e},FI=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),P1=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=II(n,r))!==!1&&e.push(t);return e},II=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(e+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},k1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},UI=(n,e)=>{const t=e.split(`
`),r=[];let o=-1,s={};n=L1(n);for(let i=0;i<t.length;i++){const a=P1(t[i]);if(n[i])for(let A=0;A<a.length;A++){o++;const d=n[i][A];d&&Object.keys(d).length>0&&(k1(s,d,!0)?r.push({start:o,end:o+1,style:d}):r[r.length-1].end++),s=d||{}}else o+=a.length,s={}}return r},QI=(n,e)=>{if(!Array.isArray(n))return L1(n);const t=e.split(b1),r={};let o=-1,s=0;for(let i=0;i<t.length;i++){const a=P1(t[i]);for(let A=0;A<a.length;A++)o++,n[s]&&n[s].start<=o&&o<n[s].end&&(r[i]=r[i]||{},r[i][A]=Xe({},n[s].style),o===n[s].end-1&&s++)}return r},ml=["display","transform",Lo,"fill-opacity","fill-rule","opacity",Gs,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function qw(n,e){const t=n.nodeName,r=n.getAttribute("class"),o=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+t,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+s,"i"),e=e.replace(i,"")),r&&e.length){const a=r.split(" ");for(let A=a.length;A--;)i=new RegExp("\\."+a[A]+s,"i"),e=e.replace(i,"")}return e.length===0}function TI(n,e){let t=!0;const r=qw(n,e.pop());return r&&e.length&&(t=function(o,s){let i,a=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&s.length;)a&&(i=s.pop()),a=qw(o=o.parentElement,i);return s.length===0}(n,e)),r&&t&&e.length===0}const LI=n=>{var e;return(e=VF[n])!==null&&e!==void 0?e:n},PI=new RegExp("(".concat(od,")"),"gi"),kI=n=>n.replace(PI," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Kw,Vw,Gw,Ww,Xw,Yw,Jw;const Ps="(".concat(od,")"),OI=String.raw(Kw||(Kw=vl(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ps),DI=String.raw(Vw||(Vw=vl(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ps),NI=String.raw(Gw||(Gw=vl(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ps,Ps,Ps),MI=String.raw(Ww||(Ww=vl(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ps,Ps),HI=String.raw(Xw||(Xw=vl(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ps,Ps),jI=String.raw(Yw||(Yw=vl(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ps,Ps,Ps,Ps,Ps,Ps),O1="(?:".concat(jI,"|").concat(HI,"|").concat(NI,"|").concat(MI,"|").concat(OI,"|").concat(DI,")"),RI="(?:".concat(O1,"*)"),$I=String.raw(Jw||(Jw=vl(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),RI),qI=new RegExp($I),KI=new RegExp(O1),VI=new RegExp(O1,"g");function j0(n){const e=[];if(!(n=kI(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!qI.test(n))return[...Os];for(const t of n.matchAll(VI)){const r=KI.exec(t[0]);if(!r)continue;let o=Os;const s=r.filter(g=>!!g),[,i,...a]=s,[A,d,c,u,h,f]=a.map(g=>parseFloat(g));switch(i){case"translate":o=dh(A,d);break;case x1:o=ch({angle:A},{x:d,y:c});break;case hg:o=C1(A,d);break;case Lc:o=X5(A);break;case Pc:o=Y5(A);break;case"matrix":o=[A,d,c,u,h,f]}e.push(o)}return B1(e)}function GI(n,e,t,r){const o=Array.isArray(e);let s,i=e;if(n!==Lo&&n!==Gs||e!==Vs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")i=e===Vs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")i=t&&t.transformMatrix?ns(t.transformMatrix,j0(e)):j0(e);else if(n==="visible")i=e!==Vs&&e!=="hidden",t&&t.visible===!1&&(i=!1);else if(n==="opacity")i=parseFloat(e),t&&t.opacity!==void 0&&(i*=t.opacity);else if(n==="textAnchor")i=e==="start"?wn:e==="end"?vo:jr;else if(n==="charSpacing")s=lc(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Lo),A=e.indexOf(Gs);i=Lo,(a>-1&&A>-1&&A<a||a===-1&&A>-1)&&(i=Gs)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=o?e.map(lc):lc(e,r)}}else i="";return!o&&isNaN(s)?i:s}function WI(n,e){const t=n.match(KF);if(!t)return;const r=t[1],o=t[3],s=t[4],i=t[5],a=t[6];r&&(e.fontStyle=r),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=lc(s)),a&&(e.fontFamily=a),i&&(e.lineHeight=i==="normal"?1:i)}function XI(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,o]=t.split(":");e[r.trim().toLowerCase()]=o.trim()})}function YI(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?XI(t,e):function(r,o){Object.entries(r).forEach(s=>{let[i,a]=s;a!==void 0&&(o[i.toLowerCase()]=a)})}(t,e)),e}const JI={stroke:"strokeOpacity",fill:"fillOpacity"};function zA(n,e,t){if(!n)return{};let r,o={},s=_1;n.parentNode&&Ow.test(n.parentNode.nodeName)&&(o=zA(n.parentElement,e,t),o.fontSize&&(r=s=lc(o.fontSize)));const i=Xe(Xe(Xe({},e.reduce((d,c)=>{const u=n.getAttribute(c);return u&&(d[c]=u),d},{})),function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const h in c)TI(d,h.split(" "))&&(u=Xe(Xe({},u),c[h]));return u}(n,t)),YI(n));i[yv]&&n.setAttribute(yv,i[yv]),i[wv]&&(r=lc(i[wv],s),i[wv]="".concat(r));const a={};for(const d in i){const c=LI(d),u=GI(c,i[d],o,r);a[c]=u}a&&a.font&&WI(a.font,a);const A=Xe(Xe({},o),a);return Ow.test(n.nodeName)?A:function(d){const c=Go.getDefaults();return Object.entries(JI).forEach(u=>{let[h,f]=u;if(d[f]===void 0||d[h]==="")return;if(d[h]===void 0){if(!c[h])return;d[h]=c[h]}if(d[h].indexOf("url(")===0)return;const g=new vi(d[h]);d[h]=g.setAlpha(no(g.getAlpha()*d[f],2)).toRgba()}),d}(A)}const ZI=["left","top","width","height","visible"],wx=["rx","ry"];class Yi extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),Yi.ownDefaults)}constructor(e){super(),Object.assign(this,Yi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,o=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,A=i!==0||a!==0;e.beginPath(),e.moveTo(o+i,s),e.lineTo(o+t-i,s),A&&e.bezierCurveTo(o+t-jA*i,s,o+t,s+jA*a,o+t,s+a),e.lineTo(o+t,s+r-a),A&&e.bezierCurveTo(o+t,s+r-jA*a,o+t-jA*i,s+r,o+t-i,s+r),e.lineTo(o+i,s+r),A&&e.bezierCurveTo(o+jA*i,s+r,o,s+r-jA*a,o,s+r-a),e.lineTo(o,s+a),A&&e.bezierCurveTo(o,s+jA*a,o+jA*i,s,o+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...wx,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:o}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(o,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const o=zA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:a=0,height:A=0,visible:d=!0}=o,c=Xn(o,ZI);return new this(Xe(Xe(Xe({},t),c),{},{left:s,top:i,width:a,height:A,visible:!!(d&&a&&A)}))}}Ve(Yi,"type","Rect"),Ve(Yi,"cacheProperties",[...xA,...wx]),Ve(Yi,"ownDefaults",{rx:0,ry:0}),Ve(Yi,"ATTRIBUTE_NAMES",[...ml,"x","y","rx","ry","width","height"]),Ar.setClass(Yi),Ar.setSVGClass(Yi);const cA="initialization",Fp="added",D1="removed",Ip="imperative",yx=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:o,height:s,group:i}=e,a=i&&i!==n?gg(i.calcTransformMatrix(),n.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),d=!e.isStrokeAccountedForInDimensions(),c=t&&d?jF(new zt(r,r),void 0,n.calcTransformMatrix()):z1,u=!t&&d?r:0,h=F1(o+u,s+u,B1([a,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[A.subtract(h),A.add(h)]};class wg{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:o}=e;return t===cA||t===Ip||!!r&&o!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==cA&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:o}=t;if(r===Ip&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:i,width:a,height:A}=gA(e.map(u=>yx(o,u)).reduce((u,h)=>u.concat(h),[])),d=new zt(a,A),c=new zt(s,i).add(d.scalarDivide(2));if(r===cA){const u=this.getInitialSize(t,{size:d,center:c});return{center:c,relativeCorrection:new zt(0,0),size:u}}return{center:c.transform(o.calcOwnMatrix()),size:d}}}Ve(wg,"type","strategy");class R0 extends wg{shouldPerformLayout(e){return!0}}Ve(R0,"type","fit-content"),Ar.setClass(R0);const eU=["strategy"],tU=["target","strategy","bubbles","prevStrategy"],_x="layoutManager";class Wu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new R0;Ve(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Xe(Xe({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[xp,j5,qu,R5,ug,$5,bp,SF,EF].map(o=>e.on(o,s=>this.performLayout(o===xp?{type:"object_modified",trigger:o,e:s,target:r}:{type:"object_modifying",trigger:o,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:o}=t;if(r===cA||r===Fp?this.subscribeTargets(e):r===D1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),o&&o.fire("object:layout:before",{target:t,context:e}),r===Ip&&e.deep){const s=Xn(e,eU);t.forEachObject(i=>i.layoutManager&&i.layoutManager.performLayout(Xe(Xe({},s),{},{bubbles:!1,target:i})))}}getLayoutResult(e){const{target:t,strategy:r,type:o}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=o===cA?new zt:t.getRelativeCenterPoint(),{center:a,correction:A=new zt,relativeCorrection:d=new zt}=s,c=i.subtract(a).add(A).transform(o===cA?Os:Zi(t.calcOwnMatrix()),!0).add(d);return{result:s,prevCenter:i,nextCenter:a,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:o},nextCenter:s}=t;var i,a;r.set({width:o.x,height:o.y}),this.layoutObjects(e,t),e.type===cA?r.set({left:(i=e.x)!==null&&i!==void 0?i:s.x+o.x*Eo(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+o.y*Eo(r.originY)}):(r.setPositionByOrigin(s,jr,jr),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(o=>{o.group===r&&this.layoutObject(e,t,o)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:o}=t;r.set({left:r.left+o.x,top:r.top+o.y})}onAfterLayout(e,t){const{target:r,strategy:o,bubbles:s,prevStrategy:i}=e,a=Xn(e,tU),{canvas:A}=r;r.fire("layout:after",{context:e,result:t}),A&&A.fire("object:layout:after",{context:e,result:t,target:r});const d=r.parent;s&&d!=null&&d.layoutManager&&((a.path||(a.path=[])).push(r),d.layoutManager.performLayout(Xe(Xe({},a),{},{target:d}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:_x,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Ar.setClass(Wu,_x);const rU=["type","objects","layoutManager"];class nU extends Wu{performLayout(){}}class Gl extends q5(Go){static getDefaults(){return Xe(Xe({},super.getDefaults()),Gl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ve(this,"_activeObjects",[]),Ve(this,"__objectSelectionTracker",void 0),Ve(this,"__objectSelectionDisposer",void 0),Object.assign(this,Gl.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Wu,this.layoutManager.performLayout({type:cA,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(ul("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(ul("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,o)=>this.canEnterGroup(t)&&o.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...o);return this._onAfterObjectsChange(Fp,o),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(Fp,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(D1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(o=>{o._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const o=this._activeObjects;if(e)o.push(r),this._set("dirty",!0);else if(o.length>0){const s=o.indexOf(r);s>-1&&(o.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Sp(e,ns(Zi(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Sp(e,ns(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Go.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var o;const i=this._objects[s];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&i.group!==this?(e.save(),e.transform(...Zi(this.calcTransformMatrix())),i.render(e),e.restore()):i.group===this&&i.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Xe({target:this,type:Ip},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const s=o.includeDefaultValues;o.includeDefaultValues=r;const i=o[e||"toObject"](t);return o.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Xe(Xe(Xe({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Yi.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const o=t.join("");return e?e(o):o}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let o=0;o<this._objects.length;o++)t.push("		",this._objects[o].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let o=0;o<this._objects.length;o++)t.push("	",this._objects[o].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:o=[],layoutManager:s}=e,i=Xn(e,rU);return Promise.all([Ku(o,t),pg(i,t)]).then(a=>{let[A,d]=a;const c=new this(A,Xe(Xe(Xe({},i),d),{},{layoutManager:new nU}));if(s){const u=Ar.getClass(s.type),h=Ar.getClass(s.strategy);c.layoutManager=new u(new h)}else c.layoutManager=new Wu;return c.layoutManager.subscribeTargets({type:cA,target:c,targets:c.getObjects()}),c.setCoords(),c})}}Ve(Gl,"type","Group"),Ve(Gl,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Ar.setClass(Gl);const oU=(n,e)=>Math.min(e.width/n.width,e.height/n.height),sU=(n,e)=>Math.max(e.width/n.width,e.height/n.height),$0="\\s*,?\\s*",tu="".concat($0,"(").concat(od,")"),iU="".concat(tu).concat(tu).concat(tu).concat($0,"([01])").concat($0,"([01])").concat(tu).concat(tu),aU={m:"l",M:"L"},AU=(n,e,t,r,o,s,i,a,A,d,c)=>{const u=wA(n),h=yA(n),f=wA(e),g=yA(e),w=t*o*f-r*s*g+i,y=r*o*f+t*s*g+a;return["C",d+A*(-t*o*h-r*s*u),c+A*(-r*o*h+t*s*u),w+A*(t*o*g+r*s*f),y+A*(r*o*g-t*s*f),w,y]},Zw=(n,e,t,r)=>{const o=Math.atan2(e,n),s=Math.atan2(r,t);return s>=o?s-o:2*Math.PI-(o-s)};function ey(n,e,t,r,o,s,i,a){let A;if(an.cachesBoundsOfCurve&&(A=[...arguments].join(),xu.boundsOfCurveCache[A]))return xu.boundsOfCurveCache[A];const d=Math.sqrt,c=Math.abs,u=[],h=[[0,0],[0,0]];let f=6*n-12*t+6*o,g=-3*n+9*t-9*o+3*i,w=3*t-3*n;for(let M=0;M<2;++M){if(M>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,w=3*r-3*e),c(g)<1e-12){if(c(f)<1e-12)continue;const Z=-w/f;0<Z&&Z<1&&u.push(Z);continue}const L=f*f-4*w*g;if(L<0)continue;const ee=d(L),W=(-f+ee)/(2*g);0<W&&W<1&&u.push(W);const R=(-f-ee)/(2*g);0<R&&R<1&&u.push(R)}let y=u.length;const x=y,C=bx(n,e,t,r,o,s,i,a);for(;y--;){const{x:M,y:L}=C(u[y]);h[0][y]=M,h[1][y]=L}h[0][x]=n,h[1][x]=e,h[0][x+1]=i,h[1][x+1]=a;const I=[new zt(Math.min(...h[0]),Math.min(...h[1])),new zt(Math.max(...h[0]),Math.max(...h[1]))];return an.cachesBoundsOfCurve&&(xu.boundsOfCurveCache[A]=I),I}const lU=(n,e,t)=>{let[r,o,s,i,a,A,d,c]=t;const u=((h,f,g,w,y,x,C)=>{if(g===0||w===0)return[];let I=0,M=0,L=0;const ee=Math.PI,W=C*y1,R=yA(W),Z=wA(W),Be=.5*(-Z*h-R*f),N=.5*(-Z*f+R*h),k=g**2,J=w**2,ne=N**2,ge=Be**2,pe=k*J-k*ne-J*ge;let xe=Math.abs(g),te=Math.abs(w);if(pe<0){const H=Math.sqrt(1-pe/(k*J));xe*=H,te*=H}else L=(y===x?-1:1)*Math.sqrt(pe/(k*ne+J*ge));const se=L*xe*N/te,oe=-L*te*Be/xe,me=Z*se-R*oe+.5*h,B=R*se+Z*oe+.5*f;let F=Zw(1,0,(Be-se)/xe,(N-oe)/te),E=Zw((Be-se)/xe,(N-oe)/te,(-Be-se)/xe,(-N-oe)/te);x===0&&E>0?E-=2*ee:x===1&&E<0&&(E+=2*ee);const T=Math.ceil(Math.abs(E/ee*2)),P=[],O=E/T,j=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2);let $=F+O;for(let H=0;H<T;H++)P[H]=AU(F,$,Z,R,xe,te,me,B,j,I,M),I=P[H][5],M=P[H][6],F=$,$+=O;return P})(d-n,c-e,o,s,a,A,i);for(let h=0,f=u.length;h<f;h++)u[h][1]+=n,u[h][2]+=e,u[h][3]+=n,u[h][4]+=e,u[h][5]+=n,u[h][6]+=e;return u},dU=n=>{let e=0,t=0,r=0,o=0;const s=[];let i,a=0,A=0;for(const d of n){const c=[...d];let u;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],u=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],u=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],u=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],o=c[2],u=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":a=c[3],A=c[4],e=c[5],t=c[6],u=["C",c[1],c[2],a,A,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":i==="C"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[3],t=c[4],u=["C",a,A,c[1],c[2],e,t],a=u[3],A=u[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":a=c[1],A=c[2],e=c[3],t=c[4],u=["Q",a,A,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":i==="Q"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[1],t=c[2],u=["Q",a,A,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":lU(e,t,c).forEach(h=>s.push(h)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=o,u=["Z"]}u?(s.push(u),i=u[0]):i=""}return s},Up=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),bx=(n,e,t,r,o,s,i,a)=>A=>{const d=A**3,c=(f=>3*f**2*(1-f))(A),u=(f=>3*f*(1-f)**2)(A),h=(f=>(1-f)**3)(A);return new zt(i*d+o*c+t*u+n*h,a*d+s*c+r*u+e*h)},xx=n=>n**2,zx=n=>2*n*(1-n),Bx=n=>(1-n)**2,cU=(n,e,t,r,o,s,i,a)=>A=>{const d=xx(A),c=zx(A),u=Bx(A),h=3*(u*(t-n)+c*(o-t)+d*(i-o)),f=3*(u*(r-e)+c*(s-r)+d*(a-s));return Math.atan2(f,h)},uU=(n,e,t,r,o,s)=>i=>{const a=xx(i),A=zx(i),d=Bx(i);return new zt(o*a+t*A+n*d,s*a+r*A+e*d)},hU=(n,e,t,r,o,s)=>i=>{const a=1-i,A=2*(a*(t-n)+i*(o-t)),d=2*(a*(r-e)+i*(s-r));return Math.atan2(d,A)},ty=(n,e,t)=>{let r=new zt(e,t),o=0;for(let s=1;s<=100;s+=1){const i=n(s/100);o+=Up(r.x,r.y,i.x,i.y),r=i}return o},fU=(n,e)=>{let t,r=0,o=0,s={x:n.x,y:n.y},i=Xe({},s),a=.01,A=0;const d=n.iterator,c=n.angleFinder;for(;o<e&&a>1e-4;)i=d(r),A=r,t=Up(s.x,s.y,i.x,i.y),t+o>e?(r-=a,a/=2):(s=i,r+=a,o+=t);return Xe(Xe({},i),{},{angle:c(A)})},Cx=n=>{let e,t,r=0,o=0,s=0,i=0,a=0;const A=[];for(const d of n){const c={x:o,y:s,command:d[0],length:0};switch(d[0]){case"M":t=c,t.x=i=o=d[1],t.y=a=s=d[2];break;case"L":t=c,t.length=Up(o,s,d[1],d[2]),o=d[1],s=d[2];break;case"C":e=bx(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t=c,t.iterator=e,t.angleFinder=cU(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t.length=ty(e,o,s),o=d[5],s=d[6];break;case"Q":e=uU(o,s,d[1],d[2],d[3],d[4]),t=c,t.iterator=e,t.angleFinder=hU(o,s,d[1],d[2],d[3],d[4]),t.length=ty(e,o,s),o=d[3],s=d[4];break;case"Z":t=c,t.destX=i,t.destY=a,t.length=Up(o,s,i,a),o=i,s=a}r+=t.length,A.push(t)}return A.push({length:r,x:o,y:s}),A},pU=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cx(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const o=t[r],s=e/o.length,i=n[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return Xe(Xe({},new zt(o.x,o.y).lerp(new zt(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return Xe(Xe({},new zt(o.x,o.y).lerp(new zt(i[1],i[2]),s)),{},{angle:Math.atan2(i[2]-o.y,i[1]-o.x)});case"C":case"Q":return fU(o,e)}},gU=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),ry=new RegExp(iU,"g"),vU=new RegExp(od,"gi"),mU={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},wU=n=>{var e;const t=[],r=(e=n.match(gU))!==null&&e!==void 0?e:[];for(const o of r){const s=o[0];if(s==="z"||s==="Z"){t.push([s]);continue}const i=mU[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){ry.lastIndex=0;for(let A=null;A=ry.exec(o);)a.push(...A.slice(1))}else a=o.match(vU)||[];for(let A=0;A<a.length;A+=i){const d=new Array(i),c=aU[s];d[0]=A>0&&c?c:s;for(let u=0;u<i;u++)d[u+1]=parseFloat(a[A+u]);t.push(d)}}return t},yU=(n,e)=>n.map(t=>t.map((r,o)=>o===0||e===void 0?r:no(r,e)).join(" ")).join(" ");function q0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[o,s]=r;return t.setProperty(o,s)}))}class _U extends tx{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Ve(this,"upper",void 0),Ve(this,"container",void 0);const{el:o}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),o.parentNode&&o.parentNode.replaceChild(i,o),i.append(o,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=na();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Tc().createElement("div");return e.setAttribute("data-fabric","wrapper"),q0(e,{position:"relative"}),Lw(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:o}=t;q0(e,Xe(Xe({},r),{},{"touch-action":o?"manipulation":Vs})),Lw(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:o}=this.upper;ex(r,o,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),k0(this.upper.el,e),k0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:o}=this.upper;super.cleanupDOM(e),t.removeChild(o),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Pa().dispose(this.upper.el),delete this.upper,delete this.container}}class yg extends E1{constructor(){super(...arguments),Ve(this,"targets",[]),Ve(this,"_hoveredTargets",[]),Ve(this,"_objectsToRender",void 0),Ve(this,"_currentTransform",null),Ve(this,"_groupSelector",null),Ve(this,"contextTopDirty",!1)}static getDefaults(){return Xe(Xe({},super.getDefaults()),yg.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new _U(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const o=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+o,-r+o),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const a=Math.round(o*this.getRetinaScaling());return CI(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),o=this._activeObject;return!!(!t||t&&o&&r.length>1&&r.indexOf(t)===-1&&o!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&o&&o!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let o;return t===hg||t===Ys||t===ki||t===qu?o=this.centeredScaling||e.centeredScaling:t===x1&&(o=this.centeredRotation||e.centeredRotation),o?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=vo:["mr","tr","br"].includes(t)&&(r.x=wn),["tl","mt","tr"].includes(t)?r.y=P0:["bl","mb","br"].includes(t)&&(r.y=Ks)),r}_setupCurrentTransform(e,t,r){var o;const s=t.group?dc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:a}=t.getActiveControl()||{},A=r&&a?(o=a.getActionHandler(e,t,a))===null||o===void 0?void 0:o.bind(a):qF,d=((f,g,w,y)=>{if(!g||!f)return"drag";const x=y.controls[g];return x.getActionName(w,x,y)})(r,i,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,d,c)?{x:jr,y:jr}:this._getOriginFromCorner(t,i),h={target:t,action:d,actionHandler:A,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:_o(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Xe(Xe({},nx(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=h,this.fire("before:transform",{e,transform:h})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new zt(t,r).transform(this.viewportTransform),a=new zt(t+o,r+s).transform(this.viewportTransform),A=this.selectionLineWidth/2;let d=Math.min(i.x,a.x),c=Math.min(i.y,a.y),u=Math.max(i.x,a.x),h=Math.max(i.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,c,u-d,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=A,c+=A,u-=A,h-=A,Go.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,c,u-d,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,o=this.getActiveObjects();if(this.targets=[],r&&o.length>=1){if(r.findControl(t,O0(e))||o.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&i&&i!==r?(this.targets=s,r):i}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const o=this.getZoom(),s=e.padding/o;if(s){const[i,a,A,d]=r,c=Math.atan2(a.y-i.y,a.x-i.x),u=wA(c)*s,h=yA(c)*s,f=u+h,g=u-h;r=[new zt(i.x-g,i.y-f),new zt(a.x+f,a.y-g),new zt(A.x+g,A.y+f),new zt(d.x-f,d.y+g)]}return ro.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,dc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const o=e[r];if(this._checkTarget(o,t)){if(Wf(o)&&o.subTargetCheck){const s=this._searchPossibleTargets(o._objects,t);s&&this.targets.push(s)}return o}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Wf(r)&&r.interactive&&this.targets[0]){const o=this.targets;for(let s=o.length-1;s>0;s--){const i=o[s];if(!Wf(i)||!i.interactive)return i}return o[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,o=r.getBoundingClientRect();let s=DF(e),i=o.width||0,a=o.height||0;i&&a||(Ks in o&&P0 in o&&(a=Math.abs(o.top-o.bottom)),vo in o&&wn in o&&(i=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=dc(s,void 0,this.viewportTransform));const A=this.getRetinaScaling();A!==1&&(s.x/=A,s.y/=A);const d=i===0||a===0?new zt(1,1):new zt(r.width/i,r.height/a);return s.multiply(d)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=na(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Tl(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,o=!1;const s=this.getActiveObjects(),i=[],a=[];e.forEach(A=>{s.includes(A)||(r=!0,A.fire("deselected",{e:t,target:A}),a.push(A))}),s.forEach(A=>{e.includes(A)||(r=!0,A.fire("selected",{e:t,target:A}),i.push(A))}),e.length>0&&s.length>0?(o=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:a})):s.length>0?(o=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(o=!0,this.fire("selection:cleared",{e:t,deselected:a})),o&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),o=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),o}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Tl(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Tl(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const o=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),o}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,o={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",o),r.fire(xp,o))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Tl(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const o=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(o),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Tl(t)&&this._activeObject===t){const r=kc(e,["angle","flipX","flipY",wn,Ys,ki,Lc,Pc,Ks]);return MF(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const o=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(o)}}Ve(yg,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class bU{constructor(e){Ve(this,"targets",[]),Ve(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:o}=e.getActiveObject()||{};o&&o.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Kd(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const xU=["target","oldTarget","fireCanvas","e"],li={passive:!1},kd=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},RA=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Fi=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},zU={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class K0 extends yg{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Ve(this,"_isClick",void 0),Ve(this,"textEditingManager",new bU(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(RA,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,o=this._getEventPrefix();e(Z5(r),"resize",this._onResize),e(r,o+"down",this._onMouseDown),e(r,"".concat(o,"move"),this._onMouseMove,li),e(r,"".concat(o,"out"),this._onMouseOut),e(r,"".concat(o,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,li)}removeListeners(){this.addOrRemove(Fi,"remove");const e=this._getEventPrefix(),t=Ji(this.upperCanvasEl);Fi(t,"".concat(e,"up"),this._onMouseUp),Fi(t,"touchend",this._onTouchEnd,li),Fi(t,"".concat(e,"move"),this._onMouseMove,li),Fi(t,"touchmove",this._onMouseMove,li),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Xe({e},kd(this,e));this.fire("mouse:out",Xe(Xe({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Xe({},r)),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",Xe(Xe({},r),{},{target:o})),o&&o.fire("mouseout",Xe({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Xe({e},kd(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void RA(this.upperCanvasEl,"drag",this._onDragProgress)}D0(e)}_renderDragEffects(e,t,r){let o=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),o=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),o=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),o=!0),i.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Vs,r=t?this._activeObject:void 0,o={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Fi(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",o),this._dragSource&&this._dragSource.fire("dragend",o),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:o}=this.findDragTargets(e),s=this._dragSource,i={e,target:r,subTargets:o,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(a=r),r.fire(t,i));for(let A=0;A<o.length;A++){const d=o[A];d.canDrop(e)&&(a=d),d.fire(t,i)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),o={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,o)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),o=this._basicEventHandler("drop:before",Xe({e,target:t,subTargets:r,dragSource:this._dragSource},kd(this,e)));o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],o=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&D0(e),this._basicEventHandler("contextmenu",o),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const o=this.upperCanvasEl,s=this._getEventPrefix(),i=Ji(o);RA(i,"touchend",this._onTouchEnd,li),t&&RA(i,"touchmove",this._onMouseMove,li),Fi(o,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Fi(t,"".concat(r,"move"),this._onMouseMove,li);const o=Ji(t);RA(o,"".concat(r,"up"),this._onMouseUp),RA(o,"".concat(r,"move"),this._onMouseMove,li)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=Ji(this.upperCanvasEl);Fi(r,"touchend",this._onTouchEnd,li),Fi(r,"touchmove",this._onMouseMove,li),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{RA(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const o=Ji(this.upperCanvasEl);Fi(o,"".concat(r,"up"),this._onMouseUp),Fi(o,"".concat(r,"move"),this._onMouseMove,li),RA(t,"".concat(r,"move"),this._onMouseMove,li)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,o=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,A,d=!1;if(r&&(this._finalizeCurrentTransform(e),d=r.actionPerformed),!o){const c=s===this._activeObject;this.handleSelection(e),d||(d=this._shouldRender(s)||!c&&s===this._activeObject)}if(s){const c=s.findControl(this.getViewportPoint(e),O0(e)),{key:u,control:h}=c||{};if(A=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),d=!0;else if(h){const f=h.getMouseUpHandler(e,s,h);f&&(a=this.getScenePoint(e),f.call(h,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==A)){const c=r.target&&r.target.controls[r.corner],u=c&&c.getMouseUpHandler(e,r.target,c);a=a||this.getScenePoint(e),u&&u.call(c,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),d?this.requestRenderAll():o||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:o=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<o.length;s++)o[s]!==r&&o[s].fire(e,t);return t}_handleEvent(e,t){const r=this._target,o=this.targets||[],s=Xe(Xe({e,target:r,subTargets:o},kd(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let i=0;i<o.length;i++)o[i]!==r&&o[i].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const i=this.getScenePoint(e);this._groupSelector={x:i.x,y:i.y,deltaY:0,deltaX:0}}if(t){const i=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),O0(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,i);const A=a?a.control:void 0,d=this.getScenePoint(e),c=A&&A.getMouseDownHandler(e,t,A);c&&c.call(A,e,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=dc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:o[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("drag",Xe(Xe({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("drag",Xe(Xe({},t),{},{target:s[a],oldTarget:o[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:o,fireCanvas:s,e:i}=t,a=Xn(t,xU);const{targetIn:A,targetOut:d,canvasIn:c,canvasOut:u}=zU[e],h=o!==r;if(o&&h){const f=Xe(Xe({},a),{},{e:i,target:o,nextTarget:r},kd(this,i));s&&this.fire(u,f),o.fire(d,f)}if(r&&h){const f=Xe(Xe({},a),{},{e:i,target:r,previousTarget:o},kd(this,i));s&&this.fire(c,f),r.fire(A,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,o=r.target,s=o.group?dc(t,void 0,o.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:o,actionHandler:s,target:i}=t,a=!!s&&s(e,t,r.x,r.y);a&&i.setCoords(),o==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const o=Tl(this._activeObject)?this._activeObject:null,s=(!o||t.group!==o)&&t.findControl(this.getViewportPoint(e));if(s){const i=s.control;this.setCursor(i.cursorStyleHandler(e,i,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(i=>{r=i.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,o=Tl(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||o)&&(o||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(o){const s=r.getObjects();if(t===r){const i=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,i)||this.searchPossibleTargets(this._objects,i))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Ar.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new zt(t,r),a=i.add(new zt(o,s)),A=i.min(a),d=i.max(a).subtract(A),c=this.collectObjects({left:A.x,top:A.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(h=>!h.onSelect({e})).reverse():c;if(u.length===1)this.setActiveObject(u[0],e);else if(u.length>1){const h=Ar.getClass("ActiveSelection");this.setActiveObject(new h(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Sx={x1:0,y1:0,x2:0,y2:0},BU=Xe(Xe({},Sx),{},{r1:0,r2:0}),Zd=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,CU=/^(\d+\.\d+)%|(\d+)%$/;function Ex(n){return n&&CU.test(n)}function Fx(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Ex(n)?100:1):NaN;return bc(0,Zd(t,e),1)}const SU=/\s*;\s*/,EU=/\s*:\s*/;function FU(n,e){let t,r;const o=n.getAttribute("style");if(o){const i=o.split(SU);i[i.length-1]===""&&i.pop();for(let a=i.length;a--;){const[A,d]=i[a].split(EU).map(c=>c.trim());A==="stop-color"?t=d:A==="stop-opacity"&&(r=d)}}const s=new vi(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Fx(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Zd(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function IU(n,e){const t=[],r=n.getElementsByTagName("stop"),o=Fx(e,1);for(let s=r.length;s--;)t.push(FU(r[s],o));return t}function Ix(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Ux(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function ji(n,e){return n.getAttribute(e)}function UU(n,e){return function(t,r){let o,{width:s,height:i,gradientUnits:a}=r;return Object.keys(t).reduce((A,d)=>{const c=t[d];return c==="Infinity"?o=1:c==="-Infinity"?o=0:(o=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&Ex(c)&&(o*=.01,a==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(o*=s),d!=="y1"&&d!=="y2"||(o*=i)))),A[d]=o,A},{})}(Ix(n)==="linear"?function(t){return{x1:ji(t,"x1")||0,y1:ji(t,"y1")||0,x2:ji(t,"x2")||"100%",y2:ji(t,"y2")||0}}(n):function(t){return{x1:ji(t,"fx")||ji(t,"cx")||"50%",y1:ji(t,"fy")||ji(t,"cy")||"50%",r1:0,x2:ji(t,"cx")||"50%",y2:ji(t,"cy")||"50%",r2:ji(t,"r")||"50%"}}(n),Xe(Xe({},e),{},{gradientUnits:Ux(n)}))}class Gh{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:o={},colorStops:s=[],offsetX:i=0,offsetY:a=0,gradientTransform:A,id:d}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Xe(Xe({},t==="radial"?BU:Sx),o),colorStops:s,offsetX:i,offsetY:a,gradientTransform:A,id:d?"".concat(d,"_").concat(hl()):hl()})}addColorStop(e){for(const t in e){const r=new vi(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Xe(Xe({},kc(this,e)),{},{type:this.type,coords:Xe({},this.coords),colorStops:this.colorStops.map(t=>Xe({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],o=this.gradientTransform?this.gradientTransform.concat():Os.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(u=>Xe({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,A=-this.offsetY;var d;s==="objectBoundingBox"?(a/=e.width,A/=e.height):(a+=e.width/2,A+=e.height/2),(d=e)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,A-=e.pathOffset.y),o[4]-=a,o[5]-=A;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Cp(o),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:f,y2:g}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:f,y2:g,r1:w,r2:y}=this.coords,x=w>y;r.push("<radialGradient ",c,' cx="',x?u:f,'" cy="',x?h:g,'" r="',x?w:y,'" fx="',x?f:u,'" fy="',x?g:h,`">
`),x&&(i.reverse(),i.forEach(I=>{I.offset=1-I.offset}));const C=Math.min(w,y);if(C>0){const I=C/Math.max(w,y);i.forEach(M=>{M.offset+=I*(1-M.offset)})}}return i.forEach(u=>{let{color:h,offset:f,opacity:g}=u;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',h,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:o,y2:s,r1:i,r2:a}=this.coords,A=this.type==="linear"?e.createLinearGradient(t,r,o,s):e.createRadialGradient(t,r,i,o,s,a);return this.colorStops.forEach(d=>{let{color:c,opacity:u,offset:h}=d;A.addColorStop(h,u!==void 0?new vi(c).setAlpha(u).toRgba():c)}),A}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Xe(Xe({},e),{},{colorStops:t?t.map(o=>Xe({},o)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const o=Ux(e),s=t._findCenterFromElement();return new this(Xe({id:e.getAttribute("id")||void 0,type:Ix(e),coords:UU(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:IU(e,r.opacity),gradientUnits:o,gradientTransform:j0(e.getAttribute("gradientTransform")||"")},o==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Ve(Gh,"type","Gradient"),Ar.setClass(Gh,"gradient"),Ar.setClass(Gh,"linear"),Ar.setClass(Gh,"radial");const QU=["type","source","patternTransform"];class xv{get type(){return"pattern"}set type(e){ul("warn","Setting type has no effect",e)}constructor(e){Ve(this,"repeat","repeat"),Ve(this,"offsetX",0),Ve(this,"offsetY",0),Ve(this,"crossOrigin",""),this.id=hl(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Xe(Xe({},kc(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:no(this.offsetX,an.NUM_FRACTION_DIGITS),offsetY:no(this.offsetY,an.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:o,repeat:s,id:i}=this,a=Zd(this.offsetX/t,0),A=Zd(this.offsetY/r,0),d=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Zd(o.width/t,0),c=s==="repeat-x"||s==="no-repeat"?1+Math.abs(A||0):Zd(o.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(a,'" y="').concat(A,'" width="').concat(d,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(o.width,'" height="').concat(o.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:o,patternTransform:s}=e,i=Xn(e,QU);const a=await Yf(o,Xe(Xe({},t),{},{crossOrigin:i.crossOrigin}));return new this(Xe(Xe({},i),{},{patternTransform:s&&s.slice(0),source:a}))}}Ve(xv,"type","Pattern"),Ar.setClass(xv),Ar.setClass(xv,"pattern");const TU=["path","left","top"],LU=["d"];class Ll extends Go{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:o,top:s}=t,i=Xn(t,TU);super(),Object.assign(this,Ll.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),typeof o=="number"&&this.set(wn,o),typeof s=="number"&&this.set(Ks,s)}_setPath(e,t){this.path=dU(Array.isArray(e)?e:wU(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new zt(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const o of this.path)switch(o[0]){case"L":e.lineTo(o[1]+t,o[2]+r);break;case"M":e.moveTo(o[1]+t,o[2]+r);break;case"C":e.bezierCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r,o[5]+t,o[6]+r);break;case"Q":e.quadraticCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Xe(Xe({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=yU(this.path,an.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=an.NUM_FRACTION_DIGITS;return" translate(".concat(no(-this.pathOffset.x,e),", ").concat(no(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:o}=this._calcDimensions();this.set({width:t,height:r,pathOffset:o}),e&&this.setPositionByOrigin(o,jr,jr)}_calcBoundsFromPath(){const e=[];let t=0,r=0,o=0,s=0;for(const i of this.path)switch(i[0]){case"L":o=i[1],s=i[2],e.push({x:t,y:r},{x:o,y:s});break;case"M":o=i[1],s=i[2],t=o,r=s;break;case"C":e.push(...ey(o,s,i[1],i[2],i[3],i[4],i[5],i[6])),o=i[5],s=i[6];break;case"Q":e.push(...ey(o,s,i[1],i[2],i[1],i[2],i[3],i[4])),o=i[3],s=i[4];break;case"Z":o=t,s=r}return gA(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Xe(Xe({},e),{},{pathOffset:new zt(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const o=zA(e,this.ATTRIBUTE_NAMES,r),{d:s}=o;return new this(s,Xe(Xe(Xe({},Xn(o,LU)),t),{},{left:void 0,top:void 0}))}}Ve(Ll,"type","Path"),Ve(Ll,"cacheProperties",[...xA,"path","fillRule"]),Ve(Ll,"ATTRIBUTE_NAMES",[...ml,"d"]),Ar.setClass(Ll),Ar.setSVGClass(Ll);const PU=["left","top","radius"],Qx=["radius","startAngle","endAngle","counterClockwise"];class lA extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),lA.ownDefaults)}constructor(e){super(),Object.assign(this,lA.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,_o(this.startAngle),_o(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Ys)}getRadiusY(){return this.get("radius")*this.get(ki)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Qx,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=_o(this.startAngle),o=_o(this.endAngle),s=wA(r)*t,i=yA(r)*t,a=wA(o)*t,A=yA(o)*t,d=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(d," ").concat(c," ").concat(a," ").concat(A,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const o=zA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:a=0}=o;return new this(Xe(Xe({},Xn(o,PU)),{},{radius:a,left:s-a,top:i-a}))}static fromObject(e){return super._fromObject(e)}}Ve(lA,"type","Circle"),Ve(lA,"cacheProperties",[...xA,...Qx]),Ve(lA,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Ve(lA,"ATTRIBUTE_NAMES",["cx","cy","r",...ml]),Ar.setClass(lA),Ar.setSVGClass(lA);const kU=["x1","y1","x2","y2"],OU=["x1","y1","x2","y2"],V0=["x1","x2","y1","y2"];class Pl extends Go{constructor(){let[e,t,r,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Pl.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=o,this._setWidthHeight();const{left:i,top:a}=s;typeof i=="number"&&this.set(wn,i),typeof a=="number"&&this.set(Ks,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:o}=this;this.width=Math.abs(r-e),this.height=Math.abs(o-t);const{left:s,top:i,width:a,height:A}=gA([{x:e,y:t},{x:r,y:o}]),d=new zt(s+a/2,i+A/2);this.setPositionByOrigin(d,jr,jr)}_set(e,t){return super._set(e,t),V0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var o;Qi(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new zt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Xe(Xe({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:o,width:s,height:i}=this,a=e<=t?-1:1,A=r<=o?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:A*i/2,y2:A*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(o,`" />
`)]}static async fromElement(e,t,r){const o=zA(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:a=0,y2:A=0}=o;return new this([s,i,a,A],Xn(o,kU))}static fromObject(e){let{x1:t,y1:r,x2:o,y2:s}=e,i=Xn(e,OU);return this._fromObject(Xe(Xe({},i),{},{points:[t,r,o,s]}),{extraParam:"points"})}}Ve(Pl,"type","Line"),Ve(Pl,"cacheProperties",[...xA,...V0]),Ve(Pl,"ATTRIBUTE_NAMES",ml.concat(V0)),Ar.setClass(Pl),Ar.setSVGClass(Pl);class Hl extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),Hl.ownDefaults)}constructor(e){super(),Object.assign(this,Hl.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Ve(Hl,"type","Triangle"),Ve(Hl,"ownDefaults",{width:100,height:100}),Ar.setClass(Hl),Ar.setSVGClass(Hl);const Tx=["rx","ry"];class dA extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),dA.ownDefaults)}constructor(e){super(),Object.assign(this,dA.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Ys)}getRy(){return this.get("ry")*this.get(ki)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Tx,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,_p,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const o=zA(e,this.ATTRIBUTE_NAMES,r);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}function DU(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Ve(dA,"type","Ellipse"),Ve(dA,"cacheProperties",[...xA,...Tx]),Ve(dA,"ownDefaults",{rx:0,ry:0}),Ve(dA,"ATTRIBUTE_NAMES",[...ml,"cx","cy","rx","ry"]),Ar.setClass(dA),Ar.setSVGClass(dA);const NU=["left","top"],Lx={exactBoundingBox:!1};class Xi extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),Xi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ve(this,"strokeDiff",void 0),Object.assign(this,Xi.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:o}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(wn,r),typeof o=="number"&&this.set(Ks,o)}isOpen(){return!0}_projectStrokeOnPoints(e){return EI(this.points,e,this.isOpen())}_calcDimensions(e){e=Xe({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(d=>d.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new zt,strokeOffset:new zt,strokeDiff:new zt};const r=gA(t),o=fg(Xe(Xe({},e),{},{scaleX:1,scaleY:1})),s=gA(this.points.map(d=>$s(d,o,!0))),i=new zt(this.scaleX,this.scaleY);let a=r.left+r.width/2,A=r.top+r.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(_o(this.skewX)),A-=a*Math.tan(_o(this.skewY))),Xe(Xe({},r),{},{pathOffset:new zt(a,A),strokeOffset:new zt(s.left,s.top).subtract(new zt(r.left,r.top)).multiply(i),strokeDiff:new zt(r.width,r.height).subtract(new zt(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=gA(this.points);return new zt(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}=this._calcDimensions();this.set({width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}),e&&this.setPositionByOrigin(new zt(t+o/2,r+s/2),jr,jr)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new zt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:A}=this._calcDimensions(e);i=new zt((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:A)}else{var o,s;i=new zt((o=e.width)!==null&&o!==void 0?o:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return i.multiply(new zt(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,o=super._set(e,t);return this.exactBoundingBox&&r&&((e===Ys||e===ki)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),o}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Xe(Xe({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:o}=t;return{x:r,y:o}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,o=an.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push(no(this.points[s].x-t,o),",",no(this.points[s].y-r,o)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(let s=0;s<t;s++){const i=this.points[s];e.lineTo(i.x-r,i.y-o)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(DU(e.getAttribute("points")),Xe(Xe({},Xn(zA(e,this.ATTRIBUTE_NAMES,r),NU)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Ve(Xi,"ownDefaults",Lx),Ve(Xi,"type","Polyline"),Ve(Xi,"layoutProperties",[Lc,Pc,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Ve(Xi,"cacheProperties",[...xA,"points"]),Ve(Xi,"ATTRIBUTE_NAMES",[...ml]),Ar.setClass(Xi),Ar.setSVGClass(Xi);class Wh extends Xi{isOpen(){return!1}}Ve(Wh,"ownDefaults",Lx),Ve(Wh,"type","Polygon"),Ar.setClass(Wh),Ar.setSVGClass(Wh);const Px=["fontSize","fontWeight","fontFamily","fontStyle"],kx=["underline","overline","linethrough"],Ox=[...Px,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Dx=[...Ox,...kx,"textBackgroundColor","direction"],MU=[...Px,...kx,Gs,"strokeWidth",Lo,"deltaY","textBackgroundColor"],HU={_reNewline:b1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:wn,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:wn,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Ba="justify",Qp="justify-left",Bu="justify-right",Cu="justify-center";class Nx extends Go{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const o in t[r])for(const s in t[r][o])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const o in r)for(const s in r[o])if(r[o][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,o,s=0,i=!0,a=0;for(const A in t){r=0;for(const d in t[A]){const c=t[A][d]||{};s++,c[e]!==void 0?(o?c[e]!==o&&(i=!1):o=c[e],c[e]===this[e]&&delete c[e]):i=!1,Object.keys(c).length!==0?r++:delete t[A][d]}r===0&&delete t[A]}for(let A=0;A<this._textLines.length;A++)a+=this._textLines[A].length;i&&s===a&&(this[e]=o,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,o,s;for(o in t){for(s in r=t[o],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[o]}}_extendStyles(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=S1(Xe(Xe({},this._getStyleDeclaration(r,o)),t),i=>i!==void 0);this._setStyleDeclaration(r,o,s)}getSelectionStyles(e,t,r){const o=[];for(let s=e;s<(t||e);s++)o.push(this.getStyleAtPosition(s,r));return o}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,o):this._getStyleDeclaration(r,o)}setSelectionStyles(e,t,r){for(let o=t;o<(r||t);o++)this._extendStyles(o,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const o=this.styles&&this.styles[e];return o&&(r=o[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Xe(Xe({},kc(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Ve(Nx,"_styleProperties",MU);const jU=/  +/g,RU=/"/g;function zv(n,e,t,r,o){return"		".concat(function(s,i){let{left:a,top:A,width:d,height:c}=i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:an.NUM_FRACTION_DIGITS;const h=Vu(Lo,s,!1),[f,g,w,y]=[a,A,d,c].map(x=>no(x,u));return"<rect ".concat(h,' x="').concat(f,'" y="').concat(g,'" width="').concat(w,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:o}),`
`)}const $U=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Bv;class Qs extends Nx{static getDefaults(){return Xe(Xe({},super.getDefaults()),Qs.ownDefaults)}constructor(e,t){super(),Ve(this,"__charBounds",[]),Object.assign(this,Qs.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Cx(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ba)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,o,s,i,a;for(let A=0,d=this._textLines.length;A<d;A++)if((this.textAlign===Ba||A!==d-1&&!this.isEndOfWrapping(A))&&(o=0,s=this._textLines[A],t=this.getLineWidth(A),t<this.width&&(a=this.textLines[A].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let c=0;c<=s.length;c++)i=this.__charBounds[A][c],this._reSpaceAndTab.test(s[c])?(i.width+=e,i.kernedWidth+=e,i.left+=o,o+=e):i.left+=o}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<r.length;o++){if(e<=r[o].length)return{lineIndex:o,charIndex:e};e-=r[o].length+this.missingNewlineOffset(o,t)}return{lineIndex:o-1,charIndex:r[o-1].length<e?r[o-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Gs?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case jr:e.textBaseline="middle";break;case"ascender":e.textBaseline=Ks;break;case"descender":e.textBaseline=P0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const o=this.getLineWidth(t);o>e&&(e=o)}return e}_renderTextLine(e,t,r,o,s,i){this._renderChars(e,t,r,o,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let o=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){o+=a;continue}const A=this._textLines[s].length,d=this._getLineLeftOffset(s);let c,u,h=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let w=0;w<A;w++){const y=this.__charBounds[s][w];u=this.getValueOfPropertyAt(s,w,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=u,u&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):u!==g?(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=g,g&&e.fillRect(c,o,h,a/this.lineHeight),f=y.left,h=y.width,g=u):h+=y.kernedWidth}u&&!this.path&&(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=u,e.fillRect(c,o,h,a/this.lineHeight)),o+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,o){const s=xu.getFontCache(t),i=this._getFontDeclaration(t),a=r+e,A=r&&i===this._getFontDeclaration(o),d=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,f;if(r&&s[r]!==void 0&&(h=s[r]),s[e]!==void 0&&(f=c=s[e]),A&&s[a]!==void 0&&(u=s[a],f=u-h),c===void 0||h===void 0||u===void 0){const g=function(){return Bv||(Bv=ka({width:0,height:0}).getContext("2d")),Bv}();this._setTextStyles(g,t,!0),c===void 0&&(f=c=g.measureText(e).width,s[e]=c),h===void 0&&A&&r&&(h=g.measureText(r).width,s[r]=h),A&&u===void 0&&(u=g.measureText(a).width,s[a]=u,f=u-h)}return{width:c*d,kernedWidth:f*d}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,o=0;const s=this.pathSide===vo,i=this.path,a=this._textLines[e],A=a.length,d=new Array(A);this.__charBounds[e]=d;for(let c=0;c<A;c++){const u=a[c];r=this._getGraphemeBox(u,e,c,t),d[c]=r,o+=r.kernedWidth,t=u}if(d[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let c=0;const u=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case wn:c=s?u-o:0;break;case jr:c=(u-o)/2;break;case vo:c=s?0:u-o}c+=this.pathStartOffset*(s?-1:1);for(let h=s?A-1:0;s?h>=0:h<A;s?h--:h++)r=d[h],c>u?c%=u:c<0&&(c+=u),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,o=this.path,s=pU(o.path,r,o.segmentsInfo);t.renderLeft=s.x-o.pathOffset.x,t.renderTop=s.y-o.pathOffset.y,t.angle=s.angle+(this.pathSide===vo?Math.PI:0)}_getGraphemeBox(e,t,r,o,s){const i=this.getCompleteStyleDeclaration(t,r),a=o?this.getCompleteStyleDeclaration(t,r-1):{},A=this._measureChar(e,i,o,a);let d,c=A.kernedWidth,u=A.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),u+=d,c+=d);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];h.left=f.left+f.width+A.kernedWidth-A.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,o=this._textLines[e].length;r<o;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),t+=r===o-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const o=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const A=this.getHeightOfLine(i),d=A/this.lineHeight,c=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],o+c,s+r+d,i),r+=A}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Lo))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,o,s,i){const a=this.getHeightOfLine(i),A=this.textAlign.includes(Ba),d=this.path,c=!A&&this.charSpacing===0&&this.isEmptyStyles(i)&&!d,u=this.direction==="ltr",h=this.direction==="ltr"?1:-1,f=t.direction;let g,w,y,x,C,I="",M=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?wn:vo),s-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),o,s),void t.restore();for(let L=0,ee=r.length-1;L<=ee;L++)x=L===ee||this.charSpacing||d,I+=r[L],y=this.__charBounds[i][L],M===0?(o+=h*(y.kernedWidth-y.width),M+=y.width):M+=y.kernedWidth,A&&!x&&this._reSpaceAndTab.test(r[L])&&(x=!0),x||(g=g||this.getCompleteStyleDeclaration(i,L),w=this.getCompleteStyleDeclaration(i,L+1),x=k1(g,w,!1)),x&&(d?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,i,L,I,-M/2,0),t.restore()):(C=o,this._renderChar(e,t,i,L,I,C,s)),I="",g=w,o+=h*M,M=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,o=ka({width:t,height:r}),s=o.getContext("2d");return o.width=t,o.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(o,"no-repeat")}handleFiller(e,t,r){let o,s;return Qi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:o}=t;return e.lineWidth=o,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,o,s,i,a){const A=this._getStyleDeclaration(r,o),d=this.getCompleteStyleDeclaration(r,o),c=e==="fillText"&&d.fill,u=e==="strokeText"&&d.stroke&&d.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(d),A.textBackgroundColor&&this._removeShadow(t),A.deltaY&&(a+=A.deltaY),c){const h=this._setFillStyles(t,d);t.fillText(s,i-h.offsetX,a-h.offsetY)}if(u){const h=this._setStrokeStyles(t,d);t.strokeText(s,i-h.offsetX,a-h.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),i=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,o=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let a=0;return o===Ba||o===Cu&&!i||o===Bu&&!i||o===Qp&&!i?0:(o===jr&&(a=r/2),o===vo&&(a=r),o===Cu&&(a=r/2),o===Bu&&(a=r),s==="rtl"&&(o===vo||o===Ba||o===Bu?a=0:o===wn||o===Qp?a=-r:o!==jr&&o!==Cu||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var o;return(o=this._getStyleDeclaration(e,t)[r])!==null&&o!==void 0?o:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const o=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let A=0,d=this._textLines.length;A<d;A++){const c=this.getHeightOfLine(A);if(!this[t]&&!this.styleHas(t,A)){r+=c;continue}const u=this._textLines[A],h=c/this.lineHeight,f=this._getLineLeftOffset(A);let g,w,y=0,x=0,C=this.getValueOfPropertyAt(A,0,t),I=this.getValueOfPropertyAt(A,0,Lo);const M=r+h*(1-this._fontSizeFraction);let L=this.getHeightOfChar(A,0),ee=this.getValueOfPropertyAt(A,0,"deltaY");for(let R=0,Z=u.length;R<Z;R++){const Be=this.__charBounds[A][R];g=this.getValueOfPropertyAt(A,R,t),w=this.getValueOfPropertyAt(A,R,Lo);const N=this.getHeightOfChar(A,R),k=this.getValueOfPropertyAt(A,R,"deltaY");if(s&&g&&w)e.save(),e.fillStyle=I,e.translate(Be.renderLeft,Be.renderTop),e.rotate(Be.angle),e.fillRect(-Be.kernedWidth/2,a*N+k,Be.kernedWidth,this.fontSize/15),e.restore();else if((g!==C||w!==I||N!==L||k!==ee)&&x>0){let J=o+f+y;this.direction==="rtl"&&(J=this.width-J-x),C&&I&&(e.fillStyle=I,e.fillRect(J,M+a*L+ee,x,this.fontSize/15)),y=Be.left,x=Be.width,C=g,I=w,L=N,ee=k}else x+=Be.kernedWidth}let W=o+f+y;this.direction==="rtl"&&(W=this.width-W-x),e.fillStyle=w,g&&w&&e.fillRect(W,M+a*L+ee,x-i,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||Qs.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:o,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return P1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),o=[`
`];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],o);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Xe(Xe({},super.toObject([...Dx,...e])),{},{styles:UI(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let o=!1,s=!1;if(typeof e=="object")for(const i in e)i==="path"&&this.setPathInfo(),o=o||r.includes(i),s=s||i==="path";else o=r.includes(e),s=e==="path";return s&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const o=zA(e,Qs.ATTRIBUTE_NAMES,r),s=Xe(Xe({},t),o),{textAnchor:i=wn,textDecoration:a="",dx:A=0,dy:d=0,top:c=0,left:u=0,fontSize:h=_1,strokeWidth:f=1}=s,g=Xn(s,$U),w=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Xe({left:u+A,top:c+d,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:h},g)),y=w.getScaledHeight()/w.height,x=((w.height+w.strokeWidth)*w.lineHeight-w.height)*y,C=w.getScaledHeight()+x;let I=0;return i===jr&&(I=w.getScaledWidth()/2),i===vo&&(I=w.getScaledWidth()),w.set({left:w.left-I,top:w.top-(C-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:f}),w}static fromObject(e){return this._fromObject(Xe(Xe({},e),{},{styles:QI(e.styles||{},e.text)}),{extraParam:"text"})}}Ve(Qs,"textLayoutProperties",Ox),Ve(Qs,"cacheProperties",[...xA,...Dx]),Ve(Qs,"ownDefaults",HU),Ve(Qs,"type","Text"),Ve(Qs,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ve(Qs,"ATTRIBUTE_NAMES",ml.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),vx(Qs,[class extends Ax{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(RU,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let o,s=n;this.backgroundColor&&r.push(...zv(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,a=this._textLines.length;i<a;i++)o=this._getLineLeftOffset(i),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,e+o,s),this._setSVGTextLineText(t,i,e+o,s),s+=this.getHeightOfLine(i);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(jU)),s=o?'style="'.concat(o,'"'):"",i=e.deltaY,a=i?' dy="'.concat(no(i,an.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(no(t,an.NUM_FRACTION_DIGITS),'" y="').concat(no(r,an.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(FI(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const o=this.getHeightOfLine(e),s=this.textAlign.includes(Ba),i=this._textLines[e];let a,A,d,c,u,h="",f=0;r+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,w=i.length-1;g<=w;g++)u=g===w||this.charSpacing,h+=i[g],d=this.__charBounds[e][g],f===0?(t+=d.kernedWidth-d.width,f+=d.width):f+=d.kernedWidth,s&&!u&&this._reSpaceAndTab.test(i[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(e,g),A=this.getCompleteStyleDeclaration(e,g+1),u=k1(a,A,!0)),u&&(c=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(h,c,t,r)),h="",a=A,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let i,a=0,A=0,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<o.length;c++){const{left:u,width:h,kernedWidth:f}=this.__charBounds[e][c];i=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),i!==d?(d&&n.push(...zv(d,t+A,r,a,s)),A=u,a=h,d=i):a+=f}i&&n.push(...zv(d,t+A,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:o,fill:s,fontSize:i,fontStyle:a,fontWeight:A,deltaY:d}=n,c=this.getSvgTextDecoration(n);return[o?Vu(Gs,o):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",c&&"text-decoration: ".concat(c,"; "),s?Vu(Lo,s):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Ar.setClass(Qs),Ar.setSVGClass(Qs);class qU{constructor(e){Ve(this,"target",void 0),Ve(this,"__mouseDownInPlace",!1),Ve(this,"__dragStartFired",!1),Ve(this,"__isDraggingOver",!1),Ve(this,"__dragStartSelection",void 0),Ve(this,"__dragImageDisposer",void 0),Ve(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:o,selectionEnd:s}=t;const i=this.target,a=i.canvas,A=new zt(i.flipX?-1:1,i.flipY?-1:1),d=i._getCursorBoundaries(o),c=new zt(d.left+d.leftOffset,d.top+d.topOffset).multiply(A).transform(i.calcTransformMatrix()),u=a.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),f=i.getBoundingRect(),g=c.subtract(new zt(f.left,f.top)),w=a.viewportTransform,y=g.add(u).transform(w,!0),x=i.backgroundColor,C=L1(i.styles);i.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(I,0,o),i.setSelectionStyles(I,s,i.text.length),i.dirty=!0;const M=i.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=x,i.styles=C,i.dirty=!0,q0(M,{position:"fixed",left:"".concat(-M.width,"px"),border:Vs,width:"".concat(M.width/h,"px"),height:"".concat(M.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{M.remove()},Ji(e.target||this.target.hiddenTextarea).body.appendChild(M),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(M,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const o=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(o.selectionStart,o.selectionEnd).join(""),i=Xe({text:t.text,value:s},o);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,i)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,o=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!o){const i=this.target,a=i.canvas;let A=i.getSelectionStartFromPointer(r);const{styles:d}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const h=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;A>h&&A<=f?A=h:A>f&&(A-=f-h),i.removeChars(h,f),delete this.__dragStartSelection}i._reNewline.test(c)&&(i._reNewline.test(i._text[A])||A===i._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=i,i.insertChars(s,d,A),a.setActiveObject(i),i.enterEditing(r),i.selectionStart=Math.min(A+u,i._text.length),i.selectionEnd=Math.min(i.selectionStart+s.length,i._text.length),i.hiddenTextarea.value=i.text,i._updateTextarea(),i.hiddenTextarea.focus(),i.fire(bp,{index:A+u,action:"drop"}),a.fire("text:changed",{target:i}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const o=this.target,s=this.target.canvas,{selectionStart:i,selectionEnd:a}=this.__dragStartSelection,A=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Vs;A===Vs?(o.selectionStart=i,o.selectionEnd=a,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),A==="move"&&(o.removeChars(i,a),o.selectionStart=o.selectionEnd=i,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(bp,{index:i,action:"dragend"}),s.fire("text:changed",{target:o}),s.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const ny=/[ \n\.,;!\?\-]/;class KU extends Qs{constructor(){super(...arguments),Ve(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:o,onComplete:s}=e;return ux({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:o,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:i=>{this._currentCursorOpacity=i,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let o=e>0&&this._reSpace.test(r[e])&&(t===-1||!b1.test(r[e-1]))?e-1:e,s=r[o];for(;o>0&&o<r.length&&!ny.test(s);)o+=t,s=r[o];return t===-1&&ny.test(s)&&o++,o}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Ji(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),o=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&o!==s||o!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const o=r.slice(0,e),s=this.graphemeSplit(o).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const o=r.slice(0,e).join("").length;return e===t?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,a=t.leftOffset,A=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,c=d.width/A,u=d.height/A,h=c-i,f=u-i,g=new zt(t.left+a,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new zt(d.clientWidth/c,d.clientHeight/u));return g.x<0&&(g.x=0),g.x>h&&(g.x=h),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(xp),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=i;a<this._unwrappedTextLines[s].length;a++){const A=this.styles[s][a];A&&(this.styles[r]||(this.styles[r]={}),this.styles[r][o+a-i]=A)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],A=i-o;for(let d=o;d<i;d++)delete a[d];for(const d in this.styles[r]){const c=parseInt(d,10);c>=i&&(a[c-A]=a[d],delete a[d])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const o in this.styles){const s=parseInt(o,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,o){const s={},i=this._unwrappedTextLines[e].length,a=i===t;let A=!1;r||(r=1),this.shiftLineStyles(e,r);const d=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(A=!0,s[h-t]=this.styles[e][u],a&&t===0||delete this.styles[e][u])}let c=!1;for(A&&!a&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)o&&o[r-1]?this.styles[e+r]={0:Xe({},o[r-1])}:d?this.styles[e+r]={0:Xe({},d)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,o){this.styles||(this.styles={});const s=this.styles[e],i=s?Xe({},s):{};r||(r=1);for(const A in i){const d=parseInt(A,10);d>=t&&(s[d+r]=i[d],i[d-r]||delete s[d])}if(this._forceClearCache=!0,o){for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Xe({},o[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=Xe({},a)}insertNewStyleBlock(e,t,r){const o=this.get2DCursorLocation(t,!0),s=[0];let i,a=0;for(let A=0;A<e.length;A++)e[A]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),i=1;i<a;i++)s[i]>0?this.insertCharStyleObject(o.lineIndex+i,0,s[i],r):r&&this.styles[o.lineIndex+i]&&r[0]&&(this.styles[o.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(o.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;o>r&&this.removeStyleFromTo(r,o);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=wn:this._selectionDirection===vo&&(this._selectionDirection=wn,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===vo?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=vo:this._selectionDirection===wn&&(this._selectionDirection=vo,this.selectionStart=t),this.selectionEnd=r)}}class VU extends KU{initHiddenTextarea(){const e=this.canvas&&Ji(this.canvas.getElement())||Tc(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(i=>{let[a,A]=i;return t.setAttribute(a,A)});const{top:r,left:o,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(o,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(i=>{let[a,A]=i;return t.addEventListener(a,this[A].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(bp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,i=o.length,a=this.selectionStart,A=this.selectionEnd,d=a!==A;let c,u,h,f,g=i-s;const w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>w.selectionStart;d?(u=this._text.slice(a,A),g+=A-a):i<s&&(u=y?this._text.slice(A+g,A):this._text.slice(a,a-g));const x=o.slice(w.selectionEnd-g,w.selectionEnd);if(u&&u.length&&(x.length&&(c=this.getSelectionStyles(a,a+1,!1),c=x.map(()=>c[0])),d?(h=a,f=A):y?(h=A-u.length,f=A):(h=A,f=A+u.length),this.removeStyleFromTo(h,f)),x.length){const{copyPasteData:C}=Pa();t&&x.join("")===C.copiedText&&!an.disableStyleCopyPaste&&(c=C.copiedTextStyle),this.insertNewStyleBlock(x,a,c)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:o}=t;this.compositionStart=r,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Pa();e.copiedText=this.getSelectedText(),an.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,o=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],o+=r.left+r.width),o}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(i).length+A+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s-1,a),d=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+A-d.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let o,s,i=this._getLineLeftOffset(e),a=0;for(let A=0,d=r.length;A<d;A++)if(o=this.__charBounds[e][A].width,i+=o,i>t){s=!0;const c=i-o,u=i,h=Math.abs(c-t);a=Math.abs(u-t)<h?A:A-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===vo);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const o=this.text.length;this.selectionStart=bc(0,this.selectionStart,o),this.selectionEnd=bc(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===wn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let o;if(e.altKey)o=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;o=this["findLineBoundary".concat(r)](this[t])}return o!==void 0&&this[t]!==o&&(this[t]=o,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=wn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===vo&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=wn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===wn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=vo,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=vo,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Cv=n=>!!n.button;class GU extends VU{constructor(){super(...arguments),Ve(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new qU(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),D0(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Cv(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Cv(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const o=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Cv(t)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Zi(this.calcTransformMatrix())).add(new zt(-this._getLeftOffset(),-this._getTopOffset()));let r=0,o=0,s=0;for(let d=0;d<this._textLines.length&&r<=t.y;d++)r+=this.getHeightOfLine(d),s=d,d>0&&(o+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let i=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,A=this.__charBounds[s];for(let d=0;d<a;d++){const c=i+A[d].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-i)&&o++;break}i=c,o++}return Math.min(this.flipX?a-o:o,this._text.length)}}const Xh="moveCursorUp",Yh="moveCursorDown",Jh="moveCursorLeft",Zh="moveCursorRight",ef="exitEditing",WU=Xe({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ef,27:ef,33:Xh,34:Yh,35:Zh,36:Jh,37:Jh,38:Xh,39:Zh,40:Yh},keysMapRtl:{9:ef,27:ef,33:Xh,34:Yh,35:Jh,36:Zh,37:Zh,38:Xh,39:Jh,40:Yh},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class uA extends GU{static getDefaults(){return Xe(Xe({},super.getDefaults()),uA.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Xe(Xe({},uA.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof K0&&this.canvas.textEditingManager.remove(this),t instanceof K0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),o=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:o,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:o,lineIndex:s}=this.get2DCursorLocation(e);for(let d=0;d<s;d++)t+=this.getHeightOfLine(d);const i=this._getLineLeftOffset(s),a=this.__charBounds[s][o];a&&(r=a.left),this.charSpacing!==0&&o===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const A={top:t,left:i+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===vo||this.textAlign===Ba||this.textAlign===Bu?A.left*=-1:this.textAlign===wn||this.textAlign===Qp?A.left=i-(r>0?r:0):this.textAlign!==jr&&this.textAlign!==Cu||(A.left=i-(r>0?r:0))),A}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(o,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),A=this.cursorWidth/a,d=this.getValueOfPropertyAt(o,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-A/2,top:c+t.top+d,width:A,height:i}}_renderCursor(e,t,r){const{color:o,opacity:s,left:i,top:a,width:A,height:d}=this.getCursorRenderingData(r,t);e.fillStyle=o,e.globalAlpha=s,e.fillRect(i,a,A,d)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const o=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(Ba),a=this.get2DCursorLocation(o),A=this.get2DCursorLocation(s),d=a.lineIndex,c=A.lineIndex,u=a.charIndex<0?0:a.charIndex,h=A.charIndex<0?0:A.charIndex;for(let f=d;f<=c;f++){const g=this._getLineLeftOffset(f)||0;let w=this.getHeightOfLine(f),y=0,x=0,C=0;if(f===d&&(x=this.__charBounds[d][u].left),f>=d&&f<c)C=i&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===c)if(h===0)C=this.__charBounds[c][h].left;else{const W=this._getWidthOfCharSpacing();C=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-W}y=w,(this.lineHeight<1||f===c&&this.lineHeight>1)&&(w/=this.lineHeight);let I=r.left+g+x,M=w,L=0;const ee=C-x;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",M=1,L=w):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===vo||this.textAlign===Ba||this.textAlign===Bu?I=this.width-I-ee:this.textAlign===wn||this.textAlign===Qp?I=r.left+g-C:this.textAlign!==jr&&this.textAlign!==Cu||(I=r.left+g-C)),e.fillRect(I,r.top+r.topOffset+L,ee,M),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Lo)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Ve(uA,"ownDefaults",WU),Ve(uA,"type","IText"),Ar.setClass(uA),Ar.setClass(uA,"i-text");class jl extends uA{static getDefaults(){return Xe(Xe({},super.getDefaults()),jl.ownDefaults)}constructor(e,t){super(e,Xe(Xe({},jl.ownDefaults),t))}static createControls(){return{controls:BI()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ba)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,o=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)e.graphemeText[o]===`
`&&i>0?(r=0,o++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&i>0&&(r++,o++),s[i]={line:t,offset:r},o+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,o=e+1,s=!1;const i=this._styleMap[e],a=this._styleMap[e+1];i&&(e=i.line,r=i.offset),a&&(o=a.line,s=o===e,t=a.offset);const A=e===void 0?this.styles:{line:this.styles[e]};for(const d in A)for(const c in A[d]){const u=parseInt(c,10);if(u>=r&&(!s||u<t))for(const h in A[d][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const o=this._styleMap[e];super._setStyleDeclaration(o.line,o.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),o=[];for(let s=0;s<r.wordsData.length;s++)o.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,o}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let o=0;return{wordsData:e.map((s,i)=>{let a=0;const A=t?this.graphemeSplit(s):this.wordSplit(s);return A.length===0?[{word:[],width:0}]:A.map(d=>{const c=t?[d]:this.graphemeSplit(d),u=this._measureWord(c,i,a);return o=Math.max(u,o),a+=c.length+r.length,{word:c,width:u}})}),largestWordWidth:o}}_measureWord(e,t){let r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let i=0,a=e.length;i<a;i++)s+=this._getGraphemeBox(e[i],t,i+o,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:o,wordsData:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),A=this.splitByGrapheme,d=[],c=A?"":" ";let u=0,h=[],f=0,g=0,w=!0;t-=i;const y=Math.max(t,o,this.dynamicMinWidth),x=s[e];let C;for(f=0,C=0;C<x.length;C++){const{word:I,width:M}=x[C];f+=I.length,u+=g+M-a,u>y&&!w?(d.push(h),h=[],u=M,w=!0):u+=a,w||A||h.push(c),h=h.concat(I),g=A?0:this._measureWord([c],e,f),f++,w=!1}return C&&d.push(h),o+i>this.dynamicMinWidth&&(this.dynamicMinWidth=o-a+i),d}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=r[s].join("");return t.lines=o,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const o=this._styleMap[t].line;e.set("".concat(o),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Ve(jl,"type","Textbox"),Ve(jl,"textLayoutProperties",[...uA.textLayoutProperties,"width"]),Ve(jl,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Ar.setClass(jl);class oy extends wg{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:o,group:s}=r;if(!o||!this.shouldPerformLayout(e))return;const{width:i,height:a}=gA(yx(r,o)),A=new zt(i,a);if(o.absolutePositioned)return{center:dc(o.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:A};{const d=o.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new zt,correction:u=new zt}=this.calcBoundingBox(t,e)||{};return{center:c.add(d),correction:u.subtract(d),size:A}}return{center:r.getRelativeCenterPoint().add(d),size:A}}}}Ve(oy,"type","clip-path"),Ar.setClass(oy);class sy extends wg{getInitialSize(e,t){let{target:r}=e,{size:o}=t;return new zt(r.width||o.x,r.height||o.y)}}Ve(sy,"type","fixed"),Ar.setClass(sy);class XU extends Wu{subscribeTargets(e){const t=e.target;e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((o,s)=>(s.parent&&o.add(s.parent),o),new Set).forEach(o=>{!r.some(s=>s.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[t]})})}}class Rl extends Gl{static getDefaults(){return Xe(Xe({},super.getDefaults()),Rl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Rl.ownDefaults),this.setOptions(t);const{left:r,top:o,layoutManager:s}=t;this.groupInit(e,{left:r,top:o,layoutManager:s??new XU})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(o=>{const s=this._objects.findIndex(a=>a.isInFrontOf(o)),i=s===-1?this.size():s;this.insertAt(i,o)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(ul("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(o=>{const{parent:s}=o;s&&r.add(s)}),e===D1?r.forEach(o=>{o._onAfterObjectsChange(Fp,t)}):r.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o=Xe(Xe({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,o);super._renderControls(e,t),e.restore()}}Ve(Rl,"type","ActiveSelection"),Ve(Rl,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Ar.setClass(Rl),Ar.setClass(Rl,"activeSelection");class YU{constructor(){Ve(this,"resources",{})}applyFilters(e,t,r,o,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,o);const a={sourceWidth:r,sourceHeight:o,imageData:i.getImageData(0,0,r,o),originalEl:t,originalImageData:i.getImageData(0,0,r,o),canvasEl:s,ctx:i,filterBackend:this};e.forEach(d=>{d.applyTo(a)});const{imageData:A}=a;return A.width===r&&A.height===o||(s.width=A.width,s.height=A.height),i.putImageData(A,0,0),a}}class Mx{constructor(){let{tileSize:e=an.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ve(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Ve(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=ka({width:e,height:t}),o=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)}applyFilters(e,t,r,o,s,i){const a=this.gl,A=s.getContext("2d");if(!a||!A)return;let d;i&&(d=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:a,sourceTexture:this.createTexture(a,r,o,d?void 0:t),targetTexture:this.createTexture(a,r,o),originalTexture:d||this.createTexture(a,r,o,d?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),e.forEach(h=>{h&&h.applyTo(c)}),function(h){const f=h.targetCanvas,g=f.width,w=f.height,y=h.destinationWidth,x=h.destinationHeight;g===y&&w===x||(f.width=y,f.height=x)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(u),A.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,o,s){const{NEAREST:i,TEXTURE_2D:a,RGBA:A,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,w=e.createTexture();return e.bindTexture(a,w),e.texParameteri(a,u,s||i),e.texParameteri(a,h,s||i),e.texParameteri(a,f,c),e.texParameteri(a,g,c),o?e.texImage2D(a,0,A,A,d,o):e.texImage2D(a,0,A,t,r,0,A,d,null),w}getCachedTexture(e,t,r){const{textureCache:o}=this;if(o[e])return o[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(o[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,o=t.targetCanvas,s=o.getContext("2d");if(!s)return;s.translate(0,o.height),s.scale(1,-1);const i=r.height-o.height;s.drawImage(r,0,i,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),o=t.destinationWidth,s=t.destinationHeight,i=o*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,i),A=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,a);const d=new ImageData(A,o,s);r.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(t.renderer=o.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Sv;function JU(){const{WebGLProbe:n}=Pa();return n.queryWebGL(na()),an.enableGLFiltering&&n.isSupported(an.textureSize)?new Mx({tileSize:an.textureSize}):new YU}function Ev(){return!Sv&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Sv=JU()),Sv}const ZU=["filters","resizeFilter","src","crossOrigin","type"],Hx=["cropX","cropY"];class Ls extends Go{static getDefaults(){return Xe(Xe({},super.getDefaults()),Ls.ownDefaults)}constructor(e,t){super(),Ve(this,"_lastScaleX",1),Ve(this,"_lastScaleY",1),Ve(this,"_filterScalingX",1),Ve(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Ls.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(hl()),this.setElement(typeof e=="string"?(this.canvas&&Ji(this.canvas.getElement())||Tc()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Ls.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Ev(!1);t instanceof Mx&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Pa().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Xe(Xe({},super.toObject([...Hx,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,o=-this.height/2;let s=[],i=[],a="",A="";if(!t)return[];if(this.hasCrop()){const d=hl();s.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(A=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(o-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(A).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,i=['	<rect x="'.concat(r,'" y="').concat(o,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return s=this.paintFirst!==Lo?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yf(e,{crossOrigin:t,signal:r}).then(o=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(o)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);const a=ka(i),{width:A,height:d}=i;this._element=a,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,Ev().applyFilters([e],i,A,d,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=ka({width:r,height:o});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1);Ev().applyFilters(e,this._originalElement,r,o,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,o=this._filterScalingY,s=this.width,i=this.height,a=Math.max(this.cropX,0),A=Math.max(this.cropY,0),d=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=a*r,h=A*o,f=Math.min(s*r,d-u),g=Math.min(i*o,c-h),w=-s/2,y=-i/2,x=Math.min(s,d/r-a),C=Math.min(i,c/o-A);t&&e.drawImage(t,u,h,f,g,w,y,x,C)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=PF(this.preserveAspectRatio||""),t=this.width,r=this.height,o={width:t,height:r};let s,i=this._element.width,a=this._element.height,A=1,d=1,c=0,u=0,h=0,f=0;return!e||e.alignX===Vs&&e.alignY===Vs?(A=t/i,d=r/a):(e.meetOrSlice==="meet"&&(A=d=oU(this._element,o),s=(t-i*A)/2,e.alignX==="Min"&&(c=-s),e.alignX==="Max"&&(c=s),s=(r-a*d)/2,e.alignY==="Min"&&(u=-s),e.alignY==="Max"&&(u=s)),e.meetOrSlice==="slice"&&(A=d=sU(this._element,o),s=i-t/A,e.alignX==="Mid"&&(h=s/2),e.alignX==="Max"&&(h=s),s=a-r/d,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),i=t/A,a=r/d)),{width:i,height:a,scaleX:A,scaleY:d,offsetLeft:c,offsetTop:u,cropX:h,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:o,src:s,crossOrigin:i,type:a}=e,A=Xn(e,ZU);return Promise.all([Yf(s,Xe(Xe({},t),{},{crossOrigin:i})),r&&Ku(r,t),o&&Ku([o],t),pg(A,t)]).then(d=>{let[c,u=[],[h]=[],f={}]=d;return new this(c,Xe(Xe({},A),{},{src:s,filters:u,resizeFilter:h},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return Yf(e,{crossOrigin:t,signal:r}).then(s=>new this(s,o))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const o=zA(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"],t,o).catch(s=>(ul("log","Unable to parse Image",s),null))}}Ve(Ls,"type","Image"),Ve(Ls,"cacheProperties",[...xA,...Hx]),Ve(Ls,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Ve(Ls,"CSS_CANVAS","canvas-img"),Ve(Ls,"ATTRIBUTE_NAMES",[...ml,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),Ar.setClass(Ls),Ar.setSVGClass(Ls);vg(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const _g=n=>n.webgl!==void 0,N1="precision highp float",eQ=`
    `.concat(N1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),tQ=["type"],rQ=["type"],nQ=new RegExp(N1,"g");class Po{get type(){return this.constructor.type}constructor(){let e=Xn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tQ);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return eQ}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=Pa();o!=="highp"&&(t=t.replace(nQ,N1.replace("highp",o)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!i||!a)throw new Ca("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Ca("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Ca("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(a,s),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Ca('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const A=this.getUniformLocations(e,a)||{};return A.uStepW=e.getUniformLocation(a,"uStepW"),A.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:A}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,o={};for(let s=0;s<r.length;s++)o[r[s]]=e.getUniformLocation(t,r[s]);return o}sendAttributeData(e,t,r){const o=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,o=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===o||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,o)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){_g(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,o=ka({width:t,height:r});e.helpLayer=o}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Xe({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Xn(e,rQ))}}Ve(Po,"type","BaseFilter"),Ve(Po,"uniformLocations",[]);const oQ={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class tf extends Po{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(oQ[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new vi(this.color).getSource(),o=this.alpha,s=r[0]*o,i=r[1]*o,a=r[2]*o,A=1-o;for(let d=0;d<t.length;d+=4){const c=t[d],u=t[d+1],h=t[d+2];let f,g,w;switch(this.mode){case"multiply":f=c*s/255,g=u*i/255,w=h*a/255;break;case"screen":f=255-(255-c)*(255-s)/255,g=255-(255-u)*(255-i)/255,w=255-(255-h)*(255-a)/255;break;case"add":f=c+s,g=u+i,w=h+a;break;case"difference":f=Math.abs(c-s),g=Math.abs(u-i),w=Math.abs(h-a);break;case"subtract":f=c-s,g=u-i,w=h-a;break;case"darken":f=Math.min(c,s),g=Math.min(u,i),w=Math.min(h,a);break;case"lighten":f=Math.max(c,s),g=Math.max(u,i),w=Math.max(h,a);break;case"overlay":f=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,g=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,w=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255;break;case"exclusion":f=s+c-2*s*c/255,g=i+u-2*i*u/255,w=a+h-2*a*h/255;break;case"tint":f=s+c*A,g=i+u*A,w=a+h*A}t[d]=f,t[d+1]=g,t[d+2]=w}}sendUniformData(e,t){const r=new vi(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Ve(tf,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Ve(tf,"type","BlendColor"),Ve(tf,"uniformLocations",["uColor"]),Ar.setClass(tf);const sQ={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},iQ=["type","image"];class rf extends Po{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return sQ[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:o},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=na());const a=s.blendImage,A=a.getContext("2d");a.width!==r||a.height!==o?(a.width=r,a.height=o):A.clearRect(0,0,r,o),A.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),A.drawImage(i.getElement(),0,0,r,o);const d=A.getImageData(0,0,r,o).data;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],f=t[c+2],g=t[c+3],w=d[c],y=d[c+1],x=d[c+2],C=d[c+3];switch(this.mode){case"multiply":t[c]=u*w/255,t[c+1]=h*y/255,t[c+2]=f*x/255,t[c+3]=g*C/255;break;case"mask":t[c+3]=C}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Xe(Xe({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:o}=e,s=Xn(e,iQ);return Ls.fromObject(o,t).then(i=>new this(Xe(Xe({},s),{},{image:i})))}}Ve(rf,"type","BlendImage"),Ve(rf,"defaults",{mode:"multiply",alpha:1}),Ve(rf,"uniformLocations",["uTransformMatrix","uImage"]),Ar.setClass(rf);class nf extends Po{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){_g(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:o}}=e;const{width:s,height:i}=r;o.blurLayer1||(o.blurLayer1=na(),o.blurLayer2=na());const a=o.blurLayer1,A=o.blurLayer2;a.width===s&&a.height===i||(A.width=a.width=s,A.height=a.height=i);const d=a.getContext("2d"),c=A.getContext("2d"),u=15,h=.06*this.blur*.5;let f,g,w,y;for(d.putImageData(r,0,0),c.clearRect(0,0,s,i),y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,w=h*g*s+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,w,f),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);for(y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,w=h*g*i+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,f,w),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);t.drawImage(a,0,0);const x=t.getImageData(0,0,a.width,a.height);return d.globalAlpha=1,d.clearRect(0,0,a.width,a.height),x}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Ve(nf,"type","Blur"),Ve(nf,"defaults",{blur:0}),Ve(nf,"uniformLocations",["uDelta"]),Ar.setClass(nf);class of extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let o=0;o<t.length;o+=4)t[o]+=r,t[o+1]+=r,t[o+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Ve(of,"type","Brightness"),Ve(of,"defaults",{brightness:0}),Ve(of,"uniformLocations",["uBrightness"]),Ar.setClass(of);const jx={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class ec extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,o=this.colorsOnly;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],A=t[s+2];if(t[s]=i*r[0]+a*r[1]+A*r[2]+255*r[4],t[s+1]=i*r[5]+a*r[6]+A*r[7]+255*r[9],t[s+2]=i*r[10]+a*r[11]+A*r[12]+255*r[14],!o){const d=t[s+3];t[s]+=d*r[3],t[s+1]+=d*r[8],t[s+2]+=d*r[13],t[s+3]=i*r[15]+a*r[16]+A*r[17]+d*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,o),e.uniform4fv(t.uConstants,s)}toObject(){return Xe(Xe({},super.toObject()),{},{matrix:[...this.matrix]})}}function cd(n,e){var t;const r=(Ve(t=class extends ec{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Ve(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Ar.setClass(r,n),r}Ve(ec,"type","ColorMatrix"),Ve(ec,"defaults",jx),Ve(ec,"uniformLocations",["uColorMatrix","uConstants"]),Ar.setClass(ec);cd("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);cd("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);cd("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);cd("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);cd("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);cd("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);cd("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class iy extends Po{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){_g(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>Ar.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Ve(iy,"type","Composed"),Ar.setClass(iy);class sf extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=o*(t[s]-128)+128,t[s+1]=o*(t[s+1]-128)+128,t[s+2]=o*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Ve(sf,"type","Contrast"),Ve(sf,"defaults",{contrast:0}),Ve(sf,"uniformLocations",["uContrast"]),Ar.setClass(sf);const aQ={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class af extends Po{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return aQ[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,o=this.matrix,s=Math.round(Math.sqrt(o.length)),i=Math.floor(s/2),a=t.width,A=t.height,d=e.ctx.createImageData(a,A),c=d.data,u=this.opaque?1:0;let h,f,g,w,y,x,C,I,M,L,ee,W,R;for(ee=0;ee<A;ee++)for(L=0;L<a;L++){for(y=4*(ee*a+L),h=0,f=0,g=0,w=0,R=0;R<s;R++)for(W=0;W<s;W++)C=ee+R-i,x=L+W-i,C<0||C>=A||x<0||x>=a||(I=4*(C*a+x),M=o[R*s+W],h+=r[I]*M,f+=r[I+1]*M,g+=r[I+2]*M,u||(w+=r[I+3]*M));c[y]=h,c[y+1]=f,c[y+2]=g,c[y+3]=u?r[y+3]:w}e.imageData=d}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Xe(Xe({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Ve(af,"type","Convolute"),Ve(af,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Ve(af,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Ar.setClass(af);const Rx="Gamma";class Af extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,o=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let A=0;A<256;A++)a.r[A]=255*Math.pow(A/255,o),a.g[A]=255*Math.pow(A/255,s),a.b[A]=255*Math.pow(A/255,i);for(let A=0;A<t.length;A+=4)t[A]=a.r[t[A]],t[A+1]=a.g[t[A+1]],t[A+2]=a.b[t[A+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Rx,gamma:this.gamma.concat()}}}Ve(Af,"type",Rx),Ve(Af,"defaults",{gamma:[1,1,1]}),Ve(Af,"uniformLocations",["uGamma"]),Ar.setClass(Af);const AQ={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class lf extends Po{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2];switch(this.mode){case"average":r=(s+i+a)/3;break;case"lightness":r=(Math.min(s,i,a)+Math.max(s,i,a))/2;break;case"luminosity":r=.21*s+.72*i+.07*a}t[o+2]=t[o+1]=t[o]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return AQ[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Ve(lf,"type","Grayscale"),Ve(lf,"defaults",{mode:"average"}),Ve(lf,"uniformLocations",["uMode"]),Ar.setClass(lf);const lQ=Xe(Xe({},jx),{},{rotation:0});class Fv extends ec{calculateMatrix(){const e=this.rotation*Math.PI,t=wA(e),r=yA(e),o=1/3,s=Math.sqrt(o)*r,i=1-t;this.matrix=[t+i/3,o*i-s,o*i+s,0,0,o*i+s,t+o*i,o*i-s,0,0,o*i-s,o*i+s,t+o*i,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Ve(Fv,"type","HueRotation"),Ve(Fv,"defaults",lQ),Ar.setClass(Fv);class df extends Po{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Ve(df,"type","Invert"),Ve(df,"defaults",{alpha:!1,invert:!0}),Ve(df,"uniformLocations",["uInvert","uAlpha"]),Ar.setClass(df);class cf extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let o=0;o<t.length;o+=4){const s=(.5-Math.random())*r;t[o]+=s,t[o+1]+=s,t[o+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Ve(cf,"type","Noise"),Ve(cf,"defaults",{noise:0}),Ve(cf,"uniformLocations",["uNoise","uSeed"]),Ar.setClass(cf);class uf extends Po{applyTo2d(e){let{imageData:{data:t,width:r,height:o}}=e;for(let s=0;s<o;s+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const a=4*s*r+4*i,A=t[a],d=t[a+1],c=t[a+2],u=t[a+3];for(let h=s;h<Math.min(s+this.blocksize,o);h++)for(let f=i;f<Math.min(i+this.blocksize,r);f++){const g=4*h*r+4*f;t[g]=A,t[g+1]=d,t[g+2]=c,t[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Ve(uf,"type","Pixelate"),Ve(uf,"defaults",{blocksize:4}),Ve(uf,"uniformLocations",["uBlocksize"]),Ar.setClass(uf);class hf extends Po{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,o=new vi(this.color).getSource(),s=[o[0]-r,o[1]-r,o[2]-r],i=[o[0]+r,o[1]+r,o[2]+r];for(let a=0;a<t.length;a+=4){const A=t[a],d=t[a+1],c=t[a+2];A>s[0]&&d>s[1]&&c>s[2]&&A<i[0]&&d<i[1]&&c<i[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new vi(this.color).getSource(),o=this.distance,s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],i=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}Ve(hf,"type","RemoveColor"),Ve(hf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Ve(hf,"uniformLocations",["uLow","uHigh"]),Ar.setClass(hf);class ff extends Po{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),o=new Array(r);for(let s=1;s<=r;s++)o[s-1]=e(s*t);return o}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,o)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(o,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(o,`];
              sum += 2.0 * uTaps[`).concat(o,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){_g(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;const s=t.width,i=t.height,a=Math.round(s*r),A=Math.round(i*o);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,i,a,A):this.resizeType==="hermite"?this.hermiteFastResize(e,s,i,a,A):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,i,a,A):this.resizeType==="lanczos"?this.lanczosResize(e,s,i,a,A):new ImageData(a,A),e.imageData=d}sliceByTwo(e,t,r,o,s){const i=e.imageData,a=.5;let A=!1,d=!1,c=t*a,u=r*a;const h=e.filterBackend.resources;let f=0,g=0;const w=t;let y=0;h.sliceByTwo||(h.sliceByTwo=na());const x=h.sliceByTwo;(x.width<1.5*t||x.height<r)&&(x.width=1.5*t,x.height=r);const C=x.getContext("2d");for(C.clearRect(0,0,1.5*t,r),C.putImageData(i,0,0),o=Math.floor(o),s=Math.floor(s);!A||!d;)t=c,r=u,o<Math.floor(c*a)?c=Math.floor(c*a):(c=o,A=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,d=!0),C.drawImage(x,f,g,t,r,w,y,c,u),f=w,g=y,y+=u;return C.getImageData(f,g,o,s)}lanczosResize(e,t,r,o,s){const i=e.imageData.data,a=e.ctx.createImageData(o,s),A=a.data,d=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(c*this.lanczosLobes/2),w=Math.ceil(u*this.lanczosLobes/2),y={},x={x:0,y:0},C={x:0,y:0};return function I(M){let L,ee,W,R,Z,Be,N,k,J,ne,ge;for(x.x=(M+.5)*c,C.x=Math.floor(x.x),L=0;L<s;L++){for(x.y=(L+.5)*u,C.y=Math.floor(x.y),Z=0,Be=0,N=0,k=0,J=0,ee=C.x-g;ee<=C.x+g;ee++)if(!(ee<0||ee>=t)){ne=Math.floor(1e3*Math.abs(ee-x.x)),y[ne]||(y[ne]={});for(let pe=C.y-w;pe<=C.y+w;pe++)pe<0||pe>=r||(ge=Math.floor(1e3*Math.abs(pe-x.y)),y[ne][ge]||(y[ne][ge]=d(Math.sqrt(Math.pow(ne*h,2)+Math.pow(ge*f,2))/1e3)),W=y[ne][ge],W>0&&(R=4*(pe*t+ee),Z+=W,Be+=W*i[R],N+=W*i[R+1],k+=W*i[R+2],J+=W*i[R+3]))}R=4*(L*o+M),A[R]=Be/Z,A[R+1]=N/Z,A[R+2]=k/Z,A[R+3]=J/Z}return++M<o?I(M):a}(0)}bilinearFiltering(e,t,r,o,s){let i,a,A,d,c,u,h,f,g,w,y,x,C,I=0;const M=this.rcpScaleX,L=this.rcpScaleY,ee=4*(t-1),W=e.imageData.data,R=e.ctx.createImageData(o,s),Z=R.data;for(h=0;h<s;h++)for(f=0;f<o;f++)for(c=Math.floor(M*f),u=Math.floor(L*h),g=M*f-c,w=L*h-u,C=4*(u*t+c),y=0;y<4;y++)i=W[C+y],a=W[C+4+y],A=W[C+ee+y],d=W[C+ee+4+y],x=i*(1-g)*(1-w)+a*g*(1-w)+A*w*(1-g)+d*g*w,Z[I++]=x;return R}hermiteFastResize(e,t,r,o,s){const i=this.rcpScaleX,a=this.rcpScaleY,A=Math.ceil(i/2),d=Math.ceil(a/2),c=e.imageData.data,u=e.ctx.createImageData(o,s),h=u.data;for(let f=0;f<s;f++)for(let g=0;g<o;g++){const w=4*(g+f*o);let y=0,x=0,C=0,I=0,M=0,L=0,ee=0;const W=(f+.5)*a;for(let R=Math.floor(f*a);R<(f+1)*a;R++){const Z=Math.abs(W-(R+.5))/d,Be=(g+.5)*i,N=Z*Z;for(let k=Math.floor(g*i);k<(g+1)*i;k++){let J=Math.abs(Be-(k+.5))/A;const ne=Math.sqrt(N+J*J);ne>1&&ne<-1||(y=2*ne*ne*ne-3*ne*ne+1,y>0&&(J=4*(k+R*t),ee+=y*c[J+3],C+=y,c[J+3]<255&&(y=y*c[J+3]/250),I+=y*c[J],M+=y*c[J+1],L+=y*c[J+2],x+=y))}}h[w]=I/x,h[w+1]=M/x,h[w+2]=L/x,h[w+3]=ee/C}return u}}Ve(ff,"type","Resize"),Ve(ff,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Ve(ff,"uniformLocations",["uDelta","uTaps"]),Ar.setClass(ff);class pf extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a);t[o]+=A!==s?(A-s)*r:0,t[o+1]+=A!==i?(A-i)*r:0,t[o+2]+=A!==a?(A-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Ve(pf,"type","Saturation"),Ve(pf,"defaults",{saturation:0}),Ve(pf,"uniformLocations",["uSaturation"]),Ar.setClass(pf);class gf extends Po{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a),d=(s+i+a)/3,c=2*Math.abs(A-d)/255*r;t[o]+=A!==s?(A-s)*c:0,t[o+1]+=A!==i?(A-i)*c:0,t[o+2]+=A!==a?(A-a)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Ve(gf,"type","Vibrance"),Ve(gf,"defaults",{vibrance:0}),Ve(gf,"uniformLocations",["uVibrance"]),Ar.setClass(gf);Go.prototype.toObject=function(n){return function(e=[]){return n.call(this,["data",...e])}}(Go.prototype.toObject);class $x{constructor(e,t){this.currentScale=1,this.SNAP_THRESHOLD=10,this.resizeTimeout=null,this.originalWidth=t.width,this.originalHeight=t.height,this.aspectRatio=this.originalHeight/this.originalWidth,this.containerElement=t.containerElement,this.containerElement.style.height=`${this.containerElement.offsetWidth*this.aspectRatio}px`,this.canvas=new K0(e,{width:this.originalWidth,height:this.originalHeight,controlsAboveOverlay:!0,preserveObjectStacking:!0,selection:!0}),this.setupResizeObserver(),this.setupSnapBehavior(),this.setupSelectionBehavior()}toOriginalCoordinate(e){return e/this.currentScale}toScaledCoordinate(e){return e*this.currentScale}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.containerElement)}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.updateCanvasSize(),this.canvas.requestRenderAll()},100)}updateCanvasSize(){const e=this.containerElement.offsetWidth,t=this.canvas.backgroundImage?this.canvas.backgroundImage.height/this.canvas.backgroundImage.width:this.canvas.overlayImage?this.canvas.overlayImage.height/this.canvas.overlayImage.width:this.aspectRatio,r=e*t;this.containerElement.style.height=`${r}px`;const o=e/this.originalWidth;this.currentScale=o,this.canvas.setDimensions({width:e,height:r}),this.canvas.setViewportTransform([o,0,0,o,0,0]),this.canvas.requestRenderAll()}setupSnapBehavior(){this.canvas.on("object:moving",e=>{var A;const t=e.target;if(!t||((A=t.data)==null?void 0:A.editType)==="print")return;const o=this.canvas.getObjects().filter(d=>{var c;return((c=d.data)==null?void 0:c.editType)==="print"});let s=null,i=null;const a={left:t.left/this.currentScale,right:(t.left+t.width*t.scaleX)/this.currentScale,top:t.top,bottom:t.top+t.height*t.scaleY,centerX:t.left+t.width*t.scaleX/2,centerY:t.top+t.height*t.scaleY/2};for(const d of o){const c={left:d.left/this.currentScale,right:(d.left+d.width*d.scaleX)/this.currentScale,top:d.top,bottom:d.top+d.height*d.scaleY,centerX:d.left+d.width*d.scaleX/2,centerY:d.top+d.height*d.scaleY/2};Math.abs(a.left-c.left)<this.SNAP_THRESHOLD?s=c.left:Math.abs(a.right-c.right)<this.SNAP_THRESHOLD?s=c.right-t.width*t.scaleX:Math.abs(a.centerX-c.centerX)<this.SNAP_THRESHOLD&&(s=c.centerX-t.width*t.scaleX/2),Math.abs(a.top-c.top)<this.SNAP_THRESHOLD?i=c.top:Math.abs(a.bottom-c.bottom)<this.SNAP_THRESHOLD?i=c.bottom-t.height*t.scaleY:Math.abs(a.centerY-c.centerY)<this.SNAP_THRESHOLD&&(i=c.centerY-t.height*t.scaleY/2)}s!==null&&t.set("left",s),i!==null&&t.set("top",i)})}setupSelectionBehavior(){this.canvas.on("selection:created",e=>{var r,o;const t=(r=e.selected)==null?void 0:r[0];((o=t==null?void 0:t.data)==null?void 0:o.editType)==="print"&&this.canvas.discardActiveObject()}),this.canvas.on("mouse:down",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&t.data.objectId&&this.onPrintAreaClick&&this.onPrintAreaClick(t.data.objectId)}),this.canvas.on("mouse:over",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="pointer")}),this.canvas.on("mouse:out",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="default")})}setPrintAreaClickListener(e){this.onPrintAreaClick=e}async setCanvasJSON(e){console.log("json",e),await this.canvas.loadFromJSON(e),this.canvas.requestRenderAll()}addEditableArea(e){if(e.type==="rect"){const t=new Yi({left:e.properties.x,top:e.properties.y,width:e.properties.width,height:e.properties.height,fill:"rgba(0,216,255,0.3)",stroke:"rgba(0,203,239,1)",strokeWidth:1,cornerStyle:"circle",transparentCorners:!1,cornerColor:"rgba(0,203,239,0.5)",cornerSize:10,lockRotation:!0,hasControls:!0,data:{editType:e.properties.editType,objectId:e.properties.objectId}});return this.canvas.add(t),this.canvas.requestRenderAll(),t}}removeObject(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(this.canvas.remove(r),this.canvas.requestRenderAll())}setSelectionListener(e){this.canvas.on("selection:created",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:updated",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:cleared",()=>e(null))}zoomToPoint(e,t){const s=Math.min(Math.max(t,.1),3),i=new zt(e.x,e.y);this.canvas.zoomToPoint(i,s),this.canvas.requestRenderAll()}getCurrentScale(){return this.currentScale}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.canvas.dispose()}getCanvas(){return this.canvas}getObjects(){return this.canvas.getObjects()}getCanvasJson(){return this.canvas.toJSON()}getCanvasImage(){return this.canvas.toDataURL({format:"png",quality:1,multiplier:1})}async setImage(e){return new Promise((t,r)=>{const o=new Image;o.onload=()=>{const s={width:o.width,height:o.height,dataUrl:e},i=800;let a=o.width,A=o.height;(a>i||A>i)&&(a>A?(A=i*A/a,a=i):(a=i*a/A,A=i));const d=document.createElement("canvas");d.width=a,d.height=A;const c=d.getContext("2d");c==null||c.drawImage(o,0,0,a,A);const u=d.toDataURL("image/jpeg",.9);Ls.fromURL(u,{crossOrigin:"anonymous"}).then(h=>{const f=this.canvas.getWidth(),g=this.canvas.getHeight(),w=A/a,y=g/f;w>y?h.scaleToHeight(g):h.scaleToWidth(f),this.canvas.getObjects().filter(C=>{var I;return((I=C.data)==null?void 0:I.editType)==="print"}).forEach(async C=>{const I=C;I.absolutePositioned=!0,I.fill="transparent";const M=C.width/h.width,L=C.height/h.height,ee=Math.max(M,L),W=h.width*ee,R=h.height*ee;h.left=C.left+(C.width-W)/2,h.top=C.top+(C.height-R)/2,h.scaleToWidth(W),h.scaleToHeight(R),h.clipPath=I}),this.canvas.add(h),this.canvas.requestRenderAll(),t({thumbnail:{width:a,height:A,dataUrl:u},original:s})}).catch(r)},o.onerror=()=>{r(new Error("  "))},o.src=e})}async setOverlay(e){try{const t=await Ls.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.overlayImage=t,this.canvas.renderAll()}catch(t){throw console.error("     :",t),t}}async setBackground(e){try{const t=await Ls.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.backgroundImage=t,this.canvas.requestRenderAll()}catch(t){throw console.error("     :",t),t}}async setBackgroundOverlaySize(e){const t=this.containerElement.offsetWidth,r=t*(e.height/e.width);this.originalWidth=t,this.originalHeight=r,this.aspectRatio=r/t,this.containerElement.style.height=`${r}px`,e.scaleToWidth(t),e.scaleToHeight(r),e.set({top:0,left:0,originX:"left",originY:"top"})}updateObjectDisabled(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(r.set("fill","#cccccc"),r.set("opacity",.5),r.set("stroke","#cccccc"),r.set("strokeWidth",0),r.set("evented",!1)),this.canvas.requestRenderAll()}updateAllObjectEnabled(){this.canvas.getObjects().forEach(t=>{t.set("fill","rgba(0,216,255,0.3)"),t.set("opacity",1),t.set("stroke","rgba(0,203,239,1)"),t.set("strokeWidth",1),t.set("evented",!0)}),this.canvas.requestRenderAll()}}async function dQ(n,e="estimates",t){try{console.log("   :",{name:n.name,size:n.size,type:n.type,folder:e});const r=hQ(n);if(!r.isValid)return console.error("   :",r.errors),{success:!1,error:r.errors.join(", ")};const o=Date.now(),s=Math.random().toString(36).substring(2,8),i=fQ(n.name),a=`${o}_${s}_${i}`,A=`${e}/${a}`;console.log("   :",{fileName:a,filePath:A});const{data:d,error:c}=await pt.storage.from("uploads").upload(A,n,{cacheControl:"3600",upsert:!1});if(c)return console.error(" Storage  :",c),{success:!1,error:`  : ${c.message}`};console.log(" Storage  :",d);const{data:u}=pt.storage.from("uploads").getPublicUrl(A);if(!u.publicUrl)return console.error("  URL  "),{success:!1,error:"  URL  ."};console.log("  URL  :",u.publicUrl);const h={id:s,name:n.name,size:n.size,type:n.type,url:u.publicUrl,path:A,uploadedAt:new Date().toISOString()};return console.log("   :",h),{success:!0,file:h}}catch(r){return console.error("      :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}async function cQ(n,e="estimates",t){console.log("    :",{count:n.length,folder:e});const r=[];for(let s=0;s<n.length;s++){const i=n[s];console.log(`  ${s+1}/${n.length}  :`,i.name);const a=await dQ(i,e);if(r.push(a),t){const A=s+1,d=n.length,c=Math.round(A/d*100);t(A,d,c)}a.success||console.warn(`    (${s+1}/${n.length}):`,{fileName:i.name,error:a.error})}const o=r.filter(s=>s.success).length;return console.log("    :",{total:n.length,success:o,failed:n.length-o}),r}async function uQ(n){try{console.log("   :",n);const{error:e}=await pt.storage.from("uploads").remove([n]);return e?(console.error("   :",e),!1):(console.log("   :",n),!0)}catch(e){return console.error("    :",e),!1}}async function ay(n,e,t){try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e,fileCount:t.length});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("object_id",e).single();if(o&&o.code!=="PGRST116")return console.error("    :",o),{success:!1,error:`   : ${o.message}`};const s={files:t,updatedAt:new Date().toISOString(),totalFiles:t.length,totalSize:t.reduce((i,a)=>i+a.size,0)};if(r){const{error:i}=await pt.from("estimate_simple_prints").update({uploaded_files:s,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)return console.error("   :",i),{success:!1,error:`  : ${i.message}`};console.log("    :",r.id)}else{const{error:i}=await pt.from("estimate_simple_prints").insert({estimate_id:n,object_id:e,title:` ${e}`,print_method:"file-upload",uploaded_files:s,price:0,original_price:0,discount_amount:0});if(i)return console.error("    :",i),{success:!1,error:`   : ${i.message}`};console.log("    ")}return{success:!0}}catch(r){return console.error(" estimate_simple_prints   :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}function hQ(n){const e=[];n.size>52428800&&e.push(`   .  50MB  . (: ${Math.round(n.size/1024/1024)}MB)`);const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/postscript","application/illustrator","image/vnd.adobe.photoshop"],o=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".eps",".ai",".psd"],s=n.name.toLowerCase(),i=o.some(A=>s.endsWith(A)),a=r.includes(n.type);return!i&&!a&&e.push("   . ( : JPG, PNG, GIF, PDF, AI, EPS, PSD, SVG)"),n.name.length>255&&e.push("  . 255  ."),{isValid:e.length===0,errors:e}}function fQ(n){return n.replace(/[^-a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"")}function pQ(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}async function gQ(n,e){var t;try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("uploaded_files, file_metadata").eq("estimate_id",n).eq("object_id",e).single();if(o)return o.code==="PGRST116"?{success:!0,files:[]}:(console.error("    :",o),{success:!1,files:[],error:`   : ${o.message}`});const s=r==null?void 0:r.uploaded_files;let i=(s==null?void 0:s.files)||[];return console.log(" DB  :",{hasUploadedFiles:!!s,uploadedFilesType:typeof s,uploadedFilesHasFiles:!!(s!=null&&s.files),uploadedFilesLength:((t=s==null?void 0:s.files)==null?void 0:t.length)||0,hasFileMetadata:!!(r!=null&&r.file_metadata),fileMetadataType:typeof(r==null?void 0:r.file_metadata),fileMetadataLength:Array.isArray(r==null?void 0:r.file_metadata)?r.file_metadata.length:0}),i.length===0&&(r!=null&&r.file_metadata)&&(console.log(" uploaded_files  - file_metadata  "),i=(Array.isArray(r.file_metadata)?r.file_metadata:[]).map(A=>({id:Math.random().toString(36).substring(2,8),name:A.name||"",size:A.size||0,type:A.type||"",url:A.url||"#",path:A.path||"",uploadedAt:new Date().toISOString()})),console.log(" file_metadata   :",{fileCount:i.length,files:i.map(A=>({name:A.name,hasUrl:A.url!=="#"}))})),console.log("    :",{fileCount:i.length,source:i.length>0&&(s!=null&&s.files)?"uploaded_files":"file_metadata"}),{success:!0,files:i}}catch(r){return console.error("     :",r),{success:!1,files:[],error:r instanceof Error?r.message:"    ."}}}var vQ=V('<div class="odz-absolute -odz-top-2 -odz-right-2 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),mQ=V('<button><!> <div class="odz-text-center"><span> </span></div></button>'),wQ=V('<div class="odz-mt-3 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><svg class="odz-w-4 odz-h-4 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-w-full odz-bg-blue-200 odz-rounded-full odz-h-2"><div class="odz-bg-blue-600 odz-h-2 odz-rounded-full odz-transition-all odz-duration-300"></div></div></div>'),yQ=V('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-red-700"> </span></div>'),_Q=V('<a target="_blank" rel="noopener noreferrer" class="odz-p-1 odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></a>'),bQ=V('<button class="odz-p-1 odz-text-gray-400 odz-cursor-not-allowed odz-rounded" disabled title="  .   ."><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg></button>'),xQ=V('<div class="odz-flex odz-items-center odz-justify-between odz-bg-white odz-border odz-border-gray-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-min-w-0 odz-flex-1"><svg class="odz-w-4 odz-h-4 odz-text-gray-500 odz-flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <div class="odz-min-w-0 odz-flex-1"><p class="odz-text-sm odz-font-medium odz-text-gray-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div> <div class="odz-flex odz-items-center odz-gap-2"><!> <button class="odz-p-1 odz-text-red-600 hover:odz-text-red-800 hover:odz-bg-red-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),zQ=V('<div class="odz-mt-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-green-700"> </span></div> <div class="odz-space-y-2"></div></div>'),BQ=V('<div class="odz-flex odz-items-center odz-gap-1 odz-text-xs odz-text-gray-600 odz-bg-gray-50 odz-px-2 odz-py-1 odz-rounded odz-min-w-0"><span class="odz-flex-shrink-0"></span> <span class="odz-truncate odz-min-w-0"> </span> <span class="odz-flex-shrink-0"> </span></div>'),CQ=V('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-mt-2 odz-space-y-1"></div>',1),SQ=V(`<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><span class="odz-text-white odz-font-bold odz-text-sm"></span></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800"> </h3> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <button class="odz-w-8 odz-h-8 odz-flex odz-items-center odz-justify-center odz-text-gray-400 hover:odz-text-red-500
                                   hover:odz-bg-red-50 odz-rounded-full odz-transition-all odz-duration-200" aria-label="  "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-mb-6"><div class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3"> </div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div></div> <div class="odz-mb-4"><label class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3">  </label> <div class="odz-relative"><input type="file" multiple accept="image/*,.pdf,.ai,.eps" class="odz-absolute odz-inset-0 odz-w-full odz-h-full odz-opacity-0 odz-cursor-pointer"> <div class="odz-bg-white odz-border-2 odz-border-dashed odz-border-gray-300 odz-rounded-xl odz-p-6
                                       hover:odz-border-red-300 hover:odz-bg-red-50 odz-transition-colors odz-duration-200"><div class="odz-text-center"><svg class="odz-w-8 odz-h-8 odz-text-gray-400 odz-mx-auto odz-mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <p class="odz-text-sm odz-text-gray-600 odz-mb-1">   </p> <p class="odz-text-xs odz-text-gray-500">, PDF, AI, EPS  </p></div></div></div> <!> <!> <!> <!></div></div>`),EQ=V('<div class="odz-mt-2 odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3 odz-h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span> </span></div>'),FQ=V(`<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"></div> <div class="odz-mt-6"><div class="odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><div class="odz-w-8 odz-h-8 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800">  </h3> <p class="odz-text-sm odz-text-gray-600">    </p></div></div> <textarea class="odz-w-full odz-h-24 odz-p-4 odz-border-2 odz-border-gray-200 odz-rounded-xl
                           odz-resize-none odz-text-sm odz-text-gray-700
                           focus:odz-border-blue-400 focus:odz-ring-2 focus:odz-ring-blue-100 focus:odz-outline-none
                           placeholder:odz-text-gray-400 odz-transition-all odz-duration-200" placeholder=":    ,     ,     "></textarea> <!></div></div></div>`),IQ=V('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>      .</p></div></div>'),UQ=V('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">  <span class="odz-text-sm odz-font-normal odz-text-gray-500">   .</span></h1> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas></div> <p class="odz-text-sm odz-text-gray-500 odz-mt-4">          .</p></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function QQ(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=()=>dn(gi,"$shopStore",t);let i=gt(e,"productId",8),a=gt(e,"estimateId",8,void 0);gt(e,"idx",8,void 0);let A=gt(e,"onComplete",8),d=gt(e,"onCancel",8,()=>{}),c=null,u=[],h=Ie(),f=Ie(),g=Ie(),w=Ie([]),y=Ie(!1);$n(async()=>{let E=!1;try{await Promise.race([x(),new Promise((P,O)=>setTimeout(()=>O(new Error("  timeout (10)")),1e4))]),E=!0}catch{}try{E&&(await za(),await new Promise(P=>setTimeout(P,100))),await C()}catch{}const T=P=>{P.detail.productId===i()&&(console.log(" SimplePrint   :",i()),L())};return window.addEventListener("saveSimplePrintState",T),()=>{window.removeEventListener("saveSimplePrintState",T)}}),as(()=>{try{if(l(w).length>0){const E=l(w).map(O=>({objectId:O.objectId,title:O.title,printMethod:O.printMethod,savedFileInfo:O.savedFileInfo||O.uploadedFiles.map(j=>({name:j.name,size:j.size,type:j.type,url:j.url,path:j.path}))})),T=o().estimateId||"temp",P=`simplePrint_${i()}_${T}`;sessionStorage.setItem(P,JSON.stringify(E))}}catch{}l(g)&&l(g).destroy()});async function x(){await za();let E=0;const T=50;for(;E<T&&!l(f);)await new Promise(P=>setTimeout(P,100)),E++;if(!l(f))throw new Error("    .");try{if(c=await N5(i(),s().id),c!=null&&c.id&&(u=await M5(c.id)),c!=null&&c.canvas_json){const P=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,O=P.backgroundImage.width*P.backgroundImage.scaleX,j=P.backgroundImage.height*P.backgroundImage.scaleY;_(g,new $x(l(f),{width:O,height:j,containerElement:l(h)})),l(g).setPrintAreaClickListener(async $=>{ee($)}),await l(g).setCanvasJSON(P),await new Promise($=>setTimeout($,200))}}catch(P){throw P}}async function C(){var E,T;if(l(g)){let P=0;const O=30;for(;P<O;){try{if((((T=(E=l(g)).getObjects)==null?void 0:T.call(E))||[]).length>0)break}catch{}P++,await new Promise(j=>setTimeout(j,100))}}try{const P=a()||o().estimateId||"temp",O=P!=="temp";let j=[];const $=`simplePrint_${i()}_${P}`,H=sessionStorage.getItem($);H&&(j=JSON.parse(H)),j&&Array.isArray(j)&&j.length>0&&(_(y,!0),_(w,j.map(Y=>({objectId:Y.objectId,title:Y.title,printMethod:Y.printMethod||"",uploadedFiles:[],savedFileInfo:Y.savedFileInfo||[]}))),await I(),l(g)&&(await za(),await new Promise(Y=>setTimeout(Y,50)),W()),_(y,!1))}catch{_(y,!1)}}async function I(){for(const E of l(w))try{if(o().estimateId){const T=await gQ(o().estimateId,E.objectId);if(T.success&&T.files.length>0){_(w,l(w).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:T.files}:P));continue}}if(E.savedFileInfo&&E.savedFileInfo.length>0){const T=E.savedFileInfo.map(P=>({id:Math.random().toString(36).substring(2,8),name:P.name,size:P.size,type:P.type,url:P.url||"#",path:P.path||"",uploadedAt:new Date().toISOString()}));_(w,l(w).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:T}:P))}}catch{if(E.savedFileInfo&&E.savedFileInfo.length>0){const P=E.savedFileInfo.map(O=>({id:Math.random().toString(36).substring(2,8),name:O.name,size:O.size,type:O.type,url:O.url||"#",path:O.path||"",uploadedAt:new Date().toISOString()}));_(w,l(w).map(O=>O.objectId===E.objectId?{...O,uploadedFiles:P}:O))}}}async function M(E,T){try{if(!await uQ(T.path))throw new Error("Storage   .");if(_(w,l(w).map(O=>{var j;return O.objectId===E?{...O,uploadedFiles:O.uploadedFiles.filter($=>$.id!==T.id),savedFileInfo:(j=O.savedFileInfo)==null?void 0:j.filter($=>$.name!==T.name)}:O})),o().estimateId){const O=l(w).find(j=>j.objectId===E);O&&await ay(o().estimateId,E,O.uploadedFiles)}L()}catch(P){_(w,l(w).map(O=>O.objectId===E?{...O,uploadError:`  : ${P instanceof Error?P.message:"   "}`}:O)),setTimeout(()=>{_(w,l(w).map(O=>O.objectId===E?{...O,uploadError:void 0}:O))},3e3)}}function L(){if(!l(y))try{const E=l(w).map(O=>({objectId:O.objectId,title:O.title,printMethod:O.printMethod,savedFileInfo:O.savedFileInfo||O.uploadedFiles.map(j=>({name:j.name,size:j.size,type:j.type,url:j.url,path:j.path}))})),T=o().estimateId||"temp",P=`simplePrint_${i()}_${T}`;if(sessionStorage.setItem(P,JSON.stringify(E)),typeof window<"u")try{const O=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.saveCurrentState"}});window.dispatchEvent(O)}catch{}}catch{}}function ee(E){if(l(w).find($=>$.objectId===E))return;const P=u.find($=>$.object_id===E),O=P?P.title:`${E} `,j={objectId:E,title:O,printMethod:"",uploadedFiles:[],isUploading:!1,uploadProgress:0,uploadError:void 0,savedFileInfo:[]};_(w,[...l(w),j]),W(),L()}function W(){if(l(g))try{l(g).updateAllObjectEnabled(),l(w).forEach(E=>{l(g).updateObjectDisabled(E.objectId)})}catch{}}function R(E){if(_(w,l(w).filter(T=>T.objectId!==E)),Et.cancelPrint(o().index,E),W(),L(),typeof window<"u")try{const T=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.removePrintFromArea"}});window.dispatchEvent(T)}catch{}}function Z(E,T){if(_(w,l(w).map(P=>P.objectId===E?{...P,printMethod:T}:P)),L(),typeof window<"u")try{const P=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.updatePrintMethod"}});window.dispatchEvent(P)}catch{}}async function Be(E,T){const P=Array.from(T);_(w,l(w).map(O=>O.objectId===E?{...O,isUploading:!0,uploadProgress:0,uploadError:void 0}:O));try{const O=await cQ(P,`estimates/${o().estimateId||"temp"}`,(Y,Ce,fe)=>{_(w,l(w).map(Le=>Le.objectId===E?{...Le,uploadProgress:fe}:Le))}),j=O.filter(Y=>Y.success&&Y.file).map(Y=>Y.file),$=O.filter(Y=>!Y.success);if(j.length>0&&o().estimateId){const Y=await ay(o().estimateId,E,j);if(!Y.success)throw new Error(Y.error||"  .")}const H=P.map(Y=>({name:Y.name,size:Y.size,type:Y.type}));if(_(w,l(w).map(Y=>Y.objectId===E?{...Y,uploadedFiles:j,isUploading:!1,uploadProgress:100,uploadError:$.length>0?`${$.length}   `:void 0,savedFileInfo:H}:Y)),L(),typeof window<"u")try{const Y=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.handleFileUpload"}});window.dispatchEvent(Y)}catch{}if($.length>0){const Y=$.map(Ce=>Ce.error).join(", ")}}catch(O){_(w,l(w).map(j=>j.objectId===E?{...j,isUploading:!1,uploadProgress:0,uploadError:O instanceof Error?O.message:"  ."}:j))}}function N(E){const P=E.target.value;Et.update(O=>({...O,uploadMemo:P}))}tr(()=>(l(w),l(g),l(y)),()=>{l(w)&&l(g)&&!l(y)&&W()}),bo(),nn();var k=UQ(),J=z(m(k),2),ne=m(J),ge=m(ne),pe=m(ge);ss(pe,E=>_(f,E),()=>l(f)),ss(ge,E=>_(h,E),()=>l(h));var xe=z(ne,2),te=m(xe);{var se=E=>{var T=FQ(),P=m(T),O=z(m(P),2),j=z(m(O),2),$=m(j),H=z(P,2);nr(H,5,()=>l(w),gr,(D,Ae,ye)=>{var ae=SQ(),le=m(ae),Ee=m(le),Me=m(Ee),ze=m(Me);ze.textContent=ye+1;var Se=z(Me,2),ve=m(Se),Oe=m(ve),Ne=z(Ee,2),_e=z(le,2),q=z(m(_e),2);nr(q,4,()=>["","","",""," "],gr,(rt,ht)=>{var $e=mQ();const st=at(()=>l(Ae).printMethod===ht);var Bt=m($e);{var Ct=kt=>{var It=vQ();U(kt,It)};be(Bt,kt=>{l(st)&&kt(Ct)})}var Tt=z(Bt,2),wt=m(Tt),Ze=m(wt);ke(()=>{Tr($e,`odz-group odz-relative odz-bg-white odz-border-2 odz-rounded-xl odz-p-3 odz-transition-all odz-duration-200
                                           ${(l(st)?"odz-border-red-400 odz-bg-gradient-to-br odz-from-red-50 odz-to-rose-50 odz-shadow-md odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md hover:odz-scale-[1.02]")??""}`),Tr(wt,`odz-text-sm odz-font-semibold ${(l(st)?"odz-text-red-700":"odz-text-gray-700")??""}`),Qe(Ze,ht)}),At("click",$e,()=>Z(l(Ae).objectId,ht)),U(rt,$e)});var de=z(_e,2),ue=m(de),Fe=z(ue,2),Pe=m(Fe),it=z(Fe,2);{var We=rt=>{var ht=wQ(),$e=m(ht),st=z(m($e),2),Bt=m(st),Ct=z($e,2),Tt=m(Ct);ke(()=>{Qe(Bt,`  ... ${l(Ae).uploadProgress||0}%`),cr(Tt,"style",`width: ${l(Ae).uploadProgress||0}%`)}),U(rt,ht)};be(it,rt=>{l(Ae).isUploading&&rt(We)})}var je=z(it,2);{var he=rt=>{var ht=yQ(),$e=z(m(ht),2),st=m($e);ke(()=>Qe(st,l(Ae).uploadError)),U(rt,ht)};be(je,rt=>{l(Ae).uploadError&&rt(he)})}var De=z(je,2);{var ot=rt=>{var ht=zQ(),$e=m(ht),st=z(m($e),2),Bt=m(st),Ct=z($e,2);nr(Ct,5,()=>l(Ae).uploadedFiles,gr,(Tt,wt)=>{var Ze=xQ(),kt=m(Ze),It=z(m(kt),2),jt=m(It),et=m(jt),yt=z(jt,2),mt=m(yt),Vt=z(kt,2),ir=m(Vt);{var qt=St=>{var ft=_Q();ke(()=>cr(ft,"href",l(wt).url)),U(St,ft)},Gt=St=>{var ft=bQ();U(St,ft)};be(ir,St=>{l(wt).url&&l(wt).url!=="#"?St(qt):St(Gt,!1)})}var ar=z(ir,2);ke(St=>{cr(jt,"title",l(wt).name),Qe(et,l(wt).name),Qe(mt,St)},[()=>pQ(l(wt).size)],at),At("click",ar,()=>M(l(Ae).objectId,l(wt))),U(Tt,Ze)}),ke(()=>Qe(Bt,`${l(Ae).uploadedFiles.length??""}  `)),U(rt,ht)};be(De,rt=>{l(Ae).uploadedFiles.length>0&&rt(ot)})}var Ge=z(De,2);{var Je=rt=>{var ht=CQ(),$e=lt(ht),st=z(m($e),2),Bt=m(st),Ct=z($e,2);nr(Ct,5,()=>l(Ae).savedFileInfo,gr,(Tt,wt)=>{var Ze=BQ(),kt=z(m(Ze),2),It=m(kt),jt=z(kt,2),et=m(jt);ke(yt=>{cr(kt,"title",l(wt).name),Qe(It,l(wt).name),Qe(et,`(${yt??""}KB)`)},[()=>Math.round(l(wt).size/1024)],at),U(Tt,Ze)}),ke(()=>Qe(Bt,`  ${l(Ae).savedFileInfo.length??""}    (  )`)),U(rt,ht)};be(Ge,rt=>{l(Ae).savedFileInfo&&l(Ae).savedFileInfo.length>0&&l(Ae).uploadedFiles.length===0&&rt(Je)})}ke(()=>{Qe(Oe,l(Ae).title),cr(ue,"for",`file-upload-${l(Ae).objectId??""}`),cr(Pe,"id",`file-upload-${l(Ae).objectId??""}`)}),At("click",Ne,()=>R(l(Ae).objectId)),At("change",Pe,rt=>Be(l(Ae).objectId,rt.target.files)),U(D,ae)});var Y=z(H,2),Ce=m(Y),fe=z(m(Ce),2),Le=z(fe,2);{var X=D=>{var Ae=EQ(),ye=z(m(Ae),2),ae=m(ye);ke(le=>Qe(ae,`${le??""} `),[()=>o().uploadMemo.trim().length],at),U(D,Ae)};be(Le,D=>{o().uploadMemo&&o().uploadMemo.trim().length>0&&D(X)})}ke(()=>Qe($,`${l(w).length??""}  `)),Fr(fe,()=>o().uploadMemo,D=>er(Et,dt(o).uploadMemo=D,dt(o))),At("input",fe,N),U(E,T)},oe=E=>{var T=IQ();U(E,T)};be(te,E=>{l(w).length>0?E(se):E(oe,!1)})}var me=z(J,2),B=m(me),F=z(B,2);At("click",B,function(...E){var T;(T=d())==null||T.apply(this,E)}),At("click",F,function(...E){var T;(T=A())==null||T.apply(this,E)}),U(n,k),Zr(),r()}const Su="uploads";function TQ(n){try{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e||e.length!==3)return console.error("Invalid base64 data URL format"),null;const t=e[1],r=e[2],o=atob(r),s=new Array(o.length);for(let A=0;A<o.length;A++)s[A]=o.charCodeAt(A);const i=new Uint8Array(s);return{blob:new Blob([i],{type:t}),contentType:t}}catch(e){return console.error("Error converting base64 to Blob:",e),null}}function LQ(n){const e=n.lastIndexOf("."),t=e>0?n.substring(0,e):n,r=e>0?n.substring(e):"";let o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"").replace(/_{2,}/g,"_").replace(/^_|_$/g,"").substring(0,200);o||(o=`file_${Date.now()}`);const s=r.replace(/[^\x00-\x7F]/g,"").toLowerCase();return o+s}async function PQ(n,e){var t;try{let r,o,s={};if(n instanceof File)o=n,s.contentType=n.type;else if(typeof n=="string"&&n.startsWith("data:")){const a=TQ(n);if(!a)throw new Error("Failed to convert base64 string to Blob.");o=a.blob,s.contentType=a.contentType}else throw new Error("Invalid data type provided. Must be a File object or a base64 data URL string.");if(console.log(`Uploading to bucket: ${Su}, path: ${e}, contentType: ${s.contentType}`),r=await pt.storage.from(Su).upload(e,o,{cacheControl:"3600",upsert:!0,contentType:s.contentType}),r.error)throw console.error("Supabase upload error:",r.error),r.error;if(!((t=r.data)!=null&&t.path))throw new Error("Upload successful but no path returned.");const{data:i}=pt.storage.from(Su).getPublicUrl(r.data.path);return i!=null&&i.publicUrl?(console.log("File uploaded successfully:",i.publicUrl),i.publicUrl):(console.warn("Could not get public URL after upload."),null)}catch(r){return console.error("Error in uploadImage function:",r),null}}async function kQ(n){if(!n)return console.error("deleteImage: filePath is required."),!1;console.log(`Attempting to delete file from bucket: ${Su}, path: ${n}`);try{const{data:e,error:t}=await pt.storage.from(Su).remove([n]);if(t)throw console.error("Supabase delete error:",t),t;return e&&e.length>0?(console.log(`File deleted successfully: ${n}`),!0):(console.warn(`File deletion response for ${n} was successful but no data returned. It might have already been deleted or the path was incorrect.`),!0)}catch(e){return console.error("Error in deleteImage function:",e),!1}}var OQ=V('<th class="odz-bg-base-200"> </th>'),DQ=V('<td><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder=" "></td>'),NQ=V('<tr><td><input type="checkbox" class="odz-checkbox"></td><th class="odz-text-sm odz-font-normal odz-whitespace-nowrap"> </th><!></tr>'),MQ=V('<td><div class="odz-flex odz-gap-1"><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder="  "> <button class="odz-btn odz-btn-secondary odz-btn-sm"></button></div></td>'),HQ=V('<div class="odz-overflow-x-auto odz-mt-4"><table class="odz-table odz-table-zebra odz-w-full"><thead><tr><th class="odz-bg-base-200 odz-w-10"><input type="checkbox" class="odz-checkbox"></th><th class="odz-bg-base-200"></th><!></tr></thead><tbody><!><tr class="odz-bg-base-100"><td colspan="2" class="odz-font-bold">  </td><!></tr></tbody></table> <div class="odz-mt-4"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>');function jQ(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=Ie(),i=Ie(),a=Ie(),A=Ie();let d=gt(e,"onComplete",8,()=>{}),c=gt(e,"nameSheet",28,()=>({})),u=Ie({});$n(()=>{_(u,JSON.parse(JSON.stringify(c())))});let h=Ie({}),f=Ie({});function g(pe){const xe={...l(h)};l(a).forEach(te=>{xe[te.id]=pe}),_(h,xe)}function w(pe){const xe=l(f)[pe]||"",te={...l(u)};l(a).forEach(se=>{l(h)[se.id]&&(te[se.title]||(te[se.title]={}),te[se.title][l(y)[pe]||pe]=xe)}),_(u,te)}let y=Ie({});function x(pe,xe,te,se,oe){l(u)[xe]||Cr(u,l(u)[xe]={}),Cr(u,l(u)[xe][se]=oe)}function C(){l(a).forEach(pe=>{l(u)[pe.title]||Cr(u,l(u)[pe.title]={}),l(A).forEach(xe=>{const te=l(y)[xe.objectId]||xe.objectId;l(u)[pe.title][te]===void 0&&Cr(u,l(u)[pe.title][te]="")})}),c(JSON.parse(JSON.stringify(l(u)))),console.log("  :",c()),d()(c())}tr(()=>o(),()=>{_(s,o().products[o().index])}),tr(()=>l(s),()=>{var pe;_(i,((pe=l(s))==null?void 0:pe.variants)||[])}),tr(()=>l(i),()=>{_(a,[...l(i)].sort((pe,xe)=>pe.title.localeCompare(xe.title)))}),tr(()=>l(s),()=>{var pe;_(A,((pe=l(s))==null?void 0:pe.prints)||[])}),tr(()=>(l(A),l(y),yp),()=>{l(A)&&l(A).length>0&&l(A).forEach(async pe=>{if(pe.objectId&&!l(y)[pe.objectId])try{const xe=await yp(pe.objectId);_(y,{...l(y),[pe.objectId]:(xe==null?void 0:xe.title)||pe.objectId})}catch{_(y,{...l(y),[pe.objectId]:pe.objectId})}})}),tr(()=>(l(a),l(A),l(u),l(y),Hn(c())),()=>{if(l(a).length>0&&l(A).length>0){const pe={...l(u)};l(a).forEach(xe=>{pe[xe.title]||(pe[xe.title]={}),l(A).forEach(te=>{var oe;const se=l(y)[te.objectId]||te.objectId;pe[xe.title][se]===void 0&&(pe[xe.title][se]=((oe=c()[xe.title])==null?void 0:oe[se])||"")})}),_(u,pe)}}),tr(()=>(l(a),l(h)),()=>{l(a)&&l(a).length>0&&l(a).forEach(pe=>{l(h)[pe.id]===void 0&&_(h,{...l(h),[pe.id]:!0})})}),bo(),nn();var I=HQ(),M=m(I),L=m(M),ee=m(L),W=m(ee),R=m(W),Z=z(W,2);nr(Z,1,()=>l(A),gr,(pe,xe)=>{var te=OQ(),se=m(te);ke(()=>Qe(se,l(y)[l(xe).objectId]||l(xe).objectId)),U(pe,te)});var Be=z(L),N=m(Be);nr(N,1,()=>l(a),gr,(pe,xe)=>{var te=NQ(),se=m(te),oe=m(se),me=z(se),B=m(me),F=z(me);nr(F,1,()=>l(A),gr,(E,T)=>{var P=DQ(),O=m(P);ke(()=>{var j;return Jm(O,((j=l(u)[l(xe).title])==null?void 0:j[l(y)[l(T).objectId]||l(T).objectId])||"")}),At("input",O,j=>x(l(xe).id,l(xe).title,l(T).objectId,l(y)[l(T).objectId]||l(T).objectId,j.target.value)),U(E,P)}),ke(()=>Qe(B,l(xe).title)),_0(oe,()=>l(h)[l(xe).id],E=>Cr(h,l(h)[l(xe).id]=E)),U(pe,te)});var k=z(N),J=z(m(k));nr(J,1,()=>l(A),gr,(pe,xe)=>{var te=MQ(),se=m(te),oe=m(se),me=z(oe,2);Fr(oe,()=>l(f)[l(xe).objectId],B=>Cr(f,l(f)[l(xe).objectId]=B)),At("click",me,()=>w(l(xe).objectId)),U(pe,te)});var ne=z(M,2),ge=m(ne);ke(pe=>Du(R,pe),[()=>Object.values(l(h)).every(pe=>pe)],at),At("change",R,pe=>g(pe.target.checked)),At("click",ge,C),U(n,I),Zr(),r()}var RQ=V('<span class="odz-text-info odz-inline-flex odz-items-center odz-gap-1"><!>  ...</span>'),$Q=V('<span class="odz-text-success"> </span>'),qQ=V('<span class="odz-text-error"> </span>'),KQ=V('<span class="odz-text-gray-500"> </span>'),VQ=V('<a target="_blank" rel="noopener noreferrer" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50" aria-label=" " title="   "><!></a>'),GQ=V('<div class="odz-flex odz-items-center odz-gap-4 odz-p-3 odz-bg-base-200 odz-rounded-lg odz-relative"><div class="odz-flex-1 odz-min-w-0"><p class="odz-font-medium odz-truncate"> </p> <p class="odz-text-sm odz-text-base-content/70"><!> <!></p></div> <!> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" aria-label=" "><!></button></div>'),WQ=V('<div class="odz-mt-4 odz-flex odz-flex-col odz-gap-2"></div>'),XQ=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),YQ=V('<label for="nameSheet" class="odz-label odz-label-text odz-text-sm odz-mt-4 odz-ml-4 odz-font-bold">       .</label> <div class="odz-card-actions odz-p-4 odz-justify-start"><button class="odz-btn odz-btn-secondary odz-min-w-32"> </button></div> <!>',1),JQ=V("<!>  ...",1),ZQ=V("<!>  ...",1),eT=V('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base"> </h2> <div role="presentation"><div class="odz-flex odz-flex-col odz-items-center odz-gap-4"><svg xmlns="http://www.w3.org/2000/svg" class="odz-w-12 odz-h-12 odz-text-base-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <div class="odz-text-base-content"><p class="odz-font-medium">   </p> <label class="odz-btn odz-btn-primary odz-btn-sm odz-mt-2">  <input type="file" multiple class="odz-hidden" accept="image/*"></label></div></div></div> <!> <h2 class="odz-card-title odz-text-base odz-mt-4"> </h2> <textarea name="" id="" rows="5" class="odz-textarea odz-text-sm odz-textarea-bordered odz-textarea-lg odz-w-full odz-mt-4"></textarea></div> <!> <div class="odz-card-actions odz-p-4 odz-justify-center"><button class="odz-btn odz-btn-primary odz-min-w-32"><!></button></div></div>');function tT(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(gi,"$shopStore",t),s=Ie(),i=Ie(),a=Ie();let A=gt(e,"fileUploadTitle",8," "),d=gt(e,"callback",8),c=gt(e,"uploadMemo",12,""),u=gt(e,"initialFiles",24,()=>[]),h=gt(e,"useNameSheet",8,!1),f=gt(e,"nameSheet",28,()=>({})),g=Ie([]),w=Ie(),y=Ie(!1),x=Ie(!1),C=Ie(!1);async function I($){const H=Array.from($);for(const Y of H){const Ce=crypto.randomUUID(),fe=LQ(Y.name),Le=`estimate-uploads/${o().id}/${Date.now()}-${fe}`,X={id:Ce,file:Y,status:"uploading",path:Le};_(g,[...l(g),X]);try{const D=await PQ(Y,Le);_(g,l(g).map(Ae=>Ae.id===Ce?{...Ae,status:D?"uploaded":"error",url:D,error:D?null:"Upload failed to return URL"}:Ae))}catch(D){console.error("Upload error for file:",Y.name,D),_(g,l(g).map(Ae=>Ae.id===Ce?{...Ae,status:"error",error:D.message||"Unknown upload error"}:Ae))}}}function M($){$.preventDefault(),_(y,!0)}function L($){$.preventDefault(),_(y,!1)}function ee($){var Y;$.preventDefault(),_(y,!1);const H=(Y=$.dataTransfer)==null?void 0:Y.files;H&&I(H)}function W($){const H=$.target;H.files&&(I(H.files),H.value="")}async function R($){const H=l(g).find(Ce=>Ce.id===$);if(!H)return;const Y=[...l(g)];if(_(g,l(g).filter(Ce=>Ce.id!==$)),H.status==="uploaded"&&H.path)try{await kQ(H.path)||(console.warn(`Failed to delete file from storage: ${H.path}`),alert("   ."),_(g,Y))}catch(Ce){console.error("Error deleting file from storage:",Ce),alert("     ."),_(g,Y)}else H.status==="uploading"?console.log("Deleting an item that was still uploading."):console.log("Deleting an item not present in storage or in error state.")}function Z(){_(x,!0);const $=l(g).filter(Y=>Y.status==="uploaded"&&Y.url),H={uploadTitle:A(),uploadMemo:c(),files:$.map(Y=>{var Ce;return{name:((Ce=Y.file)==null?void 0:Ce.name)||Y.initialName||"Unknown File",url:Y.url}})};try{d()(H,f())}catch(Y){console.error("Error executing callback:",Y),alert("     .")}finally{_(x,!1)}}$n(()=>{console.log("upload component mounted"),u()&&u().length>0&&_(g,u().map($=>({id:$.path||crypto.randomUUID(),file:null,initialName:$.name,status:"uploaded",url:$.url,path:$.path,error:null})))}),tr(()=>l(g),()=>{_(s,l(g).every($=>$.status==="uploaded"||$.status==="error"))}),tr(()=>l(g),()=>{_(i,l(g).some($=>$.status==="error"))}),tr(()=>l(g),()=>{_(a,l(g).some($=>$.status==="uploading"))}),bo(),nn();var Be=eT(),N=m(Be),k=z(m(N),2),J=m(k),ne=z(m(J),2),ge=z(m(ne),2),pe=z(m(ge));ss(pe,$=>_(w,$),()=>l(w));var xe=z(k,2);{var te=$=>{var H=WQ();nr(H,5,()=>l(g),Y=>Y.id,(Y,Ce)=>{var fe=GQ(),Le=m(fe),X=m(Le),D=m(X),Ae=z(X,2),ye=m(Ae);{var ae=Ne=>{var _e=mn();ke(q=>Qe(_e,`${q??""} MB -`),[()=>(l(Ce).file.size/1024/1024).toFixed(2)],at),U(Ne,_e)};be(ye,Ne=>{l(Ce).file&&Ne(ae)})}var le=z(ye,2);{var Ee=Ne=>{var _e=RQ(),q=m(_e);ac(q,{class:"odz-animate-spin odz-w-3 odz-h-3"}),U(Ne,_e)},Me=Ne=>{var _e=Lt(),q=lt(_e);{var de=Fe=>{var Pe=$Q();U(Fe,Pe)},ue=Fe=>{var Pe=Lt(),it=lt(Pe);{var We=he=>{var De=qQ();ke(()=>cr(De,"title",l(Ce).error||"Unknown error")),U(he,De)},je=he=>{var De=KQ();U(he,De)};be(it,he=>{l(Ce).status==="error"?he(We):he(je,!1)},!0)}U(Fe,Pe)};be(q,Fe=>{l(Ce).status==="uploaded"?Fe(de):Fe(ue,!1)},!0)}U(Ne,_e)};be(le,Ne=>{l(Ce).status==="uploading"?Ne(Ee):Ne(Me,!1)})}var ze=z(Le,2);{var Se=Ne=>{var _e=VQ(),q=m(_e);o5(q,{class:"odz-w-5 odz-h-5"}),ke(()=>cr(_e,"href",l(Ce).url)),U(Ne,_e)};be(ze,Ne=>{l(Ce).status==="uploaded"&&l(Ce).url&&Ne(Se)})}var ve=z(ze,2),Oe=m(ve);Hu(Oe,{class:"odz-w-5 odz-h-5"}),ke(()=>{var Ne;Qe(D,((Ne=l(Ce).file)==null?void 0:Ne.name)||l(Ce).initialName||"Unknown File"),ve.disabled=l(Ce).status==="uploading"}),At("click",ve,()=>R(l(Ce).id)),U(Y,fe)}),U($,H)};be(xe,$=>{l(g)&&l(g).length>0&&$(te)})}var se=z(xe,2),oe=m(se),me=z(se,2),B=z(N,2);{var F=$=>{var H=YQ(),Y=z(lt(H),2),Ce=m(Y),fe=z(Y,2);{var Le=X=>{var D=XQ(),Ae=m(D),ye=m(Ae),ae=m(ye),le=z(ye,2);jQ(le,{get nameSheet(){return f()},onComplete:Ee=>{f(Ee),_(C,!1)}}),At("click",ae,()=>_(C,!1)),U(X,D)};be(fe,X=>{l(C)&&X(Le)})}At("click",Ce,()=>_(C,!0)),U($,H)};be(B,$=>{h()&&$(F)})}var E=z(B,2),T=m(E),P=m(T);{var O=$=>{var H=mn("");U($,H)},j=$=>{var H=Lt(),Y=lt(H);{var Ce=Le=>{var X=JQ(),D=lt(X);ac(D,{class:"odz-animate-spin odz-mr-2"}),U(Le,X)},fe=Le=>{var X=Lt(),D=lt(X);{var Ae=ae=>{var le=ZQ(),Ee=lt(le);ac(Ee,{class:"odz-animate-spin odz-mr-2"}),U(ae,le)},ye=ae=>{var le=mn("");U(ae,le)};be(D,ae=>{l(a)?ae(Ae):ae(ye,!1)},!0)}U(Le,X)};be(Y,Le=>{l(x)?Le(Ce):Le(fe,!1)},!0)}U($,H)};be(P,$=>{l(g).length===0&&!l(x)&&!l(a)?$(O):$(j,!1)})}ke(()=>{Tr(k,`odz-border-2 odz-border-dashed odz-rounded-lg odz-p-5 odz-text-center odz-mt-4 odz-transition-colors ${(l(y)?"odz-border-primary odz-bg-primary/5":"odz-border-base-300")??""}`),Qe(oe,A()),cr(me,"placeholder",A()),T.disabled=l(x)||l(a)}),At("change",pe,W),At("dragover",k,M),At("dragleave",k,L),At("drop",k,ee),Fr(me,c),At("click",T,Z),U(n,Be),Zr(),r()}async function rT(n){const{data:e,error:t}=await pt.from("color_groups").select("*").eq("id",n).single();if(t)throw t;return e}var nT=V('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),oT=V('<div class="odz-tooltip odz-tooltip-secondary"><button><!></button></div>'),sT=V('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2">  </h3> <div class="odz-flex odz-items-center odz-gap-2"><input type="color" class="odz-h-10 odz-w-10 odz-p-0.5 odz-rounded-full odz-cursor-pointer odz-border odz-border-base-300 [&amp;::-webkit-color-swatch-wrapper]:odz-p-0 [&amp;::-webkit-color-swatch]:odz-rounded-full [&amp;::-moz-color-swatch]:odz-rounded-full"> <input type="text" placeholder="   " class="odz-input odz-input-bordered odz-flex-1"> <button class="odz-btn odz-btn-primary"></button></div></div>'),iT=V('<div class="odz-flex odz-items-center odz-gap-2 odz-bg-base-200 odz-rounded-full odz-px-3 odz-py-1"><div class="odz-w-4 odz-h-4 odz-rounded-full"></div> <span class="odz-text-sm"> </span> <button class="odz-btn odz-btn-ghost odz-btn-xs odz-rounded-full"></button></div>'),aT=V('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),AT=V('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base odz-mb-4">  <span class="odz-text-sm odz-font-normal"> </span></h2> <div class="odz-flex odz-flex-wrap odz-gap-2"></div> <!> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div> <!> <!>',1);function lT(n,e){Jr(e,!1);let t=gt(e,"colorGroupId",8,null),r=gt(e,"selectedTemplateId",8,null),o=gt(e,"callback",8),s=gt(e,"selectedColors",28,()=>[]),i=Ie(!1),a=Ie([]),A=Ie(0),d=Ie(!1),c=Ie("#000000"),u=Ie(""),h=Ie(!1),f=Ie("");async function g(){if(t()){_(i,!0);try{const te=await rT(t());_(a,(te==null?void 0:te.colors)||[]),_(d,(te==null?void 0:te.use_custom)||!1)}finally{_(i,!1)}}}async function w(){if(!r())return;const te=await Ic(r());console.log({templateProduct:te}),_(A,Math.max(...te.template_product_variants.map(se=>se.color_count))),console.log({colorCount:l(A)})}function y(te){if(s().findIndex(oe=>oe.hex===te.hex)===-1){if(s().length>=l(A))return;s([...s(),te])}else s(s().filter(oe=>oe.hex!==te.hex))}function x(te){const se=te.replace("#",""),oe=parseInt(se.substr(0,2),16),me=parseInt(se.substr(2,2),16),B=parseInt(se.substr(4,2),16);return(oe*299+me*587+B*114)/1e3<128}function C(){if(s().length===0){_(h,!0),_(f,"  .");return}console.log("selectedColors",s()),o()(s())}$n(async()=>{await g(),await w()}),nn();var I=AT(),M=lt(I),L=m(M),ee=m(L),W=z(m(ee)),R=m(W),Z=z(ee,2);nr(Z,5,()=>l(a),gr,(te,se)=>{var oe=oT(),me=m(oe),B=m(me);{var F=E=>{var T=nT(),P=m(T);ke(O=>cr(P,"stroke",O),[()=>x(l(se).hex)?"white":"black"],at),U(E,T)};be(B,E=>{s().some(T=>T.hex===l(se).hex)&&E(F)})}ke(E=>{cr(oe,"data-tip",l(se).name),Tr(me,`odz-relative odz-w-10 odz-h-10 odz-rounded-full odz-transition-all odz-border hover:odz-scale-110 ${E??""}`),cr(me,"style",`background-color: ${l(se).hex??""};`)},[()=>s().some(E=>E.hex===l(se).hex)?"odz-border-primary odz-scale-110":"odz-border"],at),At("click",me,()=>y(l(se))),U(te,oe)});var Be=z(Z,2);{var N=te=>{var se=sT(),oe=z(m(se),2),me=m(oe),B=z(me,2),F=z(B,2);Fr(me,()=>l(c),E=>_(c,E)),Fr(B,()=>l(u),E=>_(u,E)),At("click",F,()=>{if(l(u).trim()){const E={name:l(u),hex:l(c)};y(E),_(u,""),_(c,"#000000")}}),U(te,se)};be(Be,te=>{l(d)&&te(N)})}var k=z(Be,2);{var J=te=>{var se=aT(),oe=z(m(se),2);nr(oe,5,s,gr,(me,B)=>{var F=iT(),E=m(F),T=z(E,2),P=m(T),O=z(T,2);ke(()=>{cr(E,"style",`background-color: ${l(B).hex??""};`),Qe(P,l(B).name)}),At("click",O,()=>y(l(B))),U(me,F)}),U(te,se)};be(k,te=>{s().length>0&&te(J)})}var ne=z(L,2),ge=m(ne),pe=z(M,2);Qc(pe,{get isLoading(){return l(i)}});var xe=z(pe,2);Uc(xe,{get isOpen(){return l(h)},set isOpen(te){_(h,te)},get message(){return l(f)},set message(te){_(f,te)},$$legacy:!0}),ke(()=>Qe(R,`(${s().length??""}/${l(A)??""}   .)`)),At("click",ge,C),U(n,I),Zr()}var dT=V('<li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"> </button></li>'),cT=V('<div class="odz-text-sm odz-breadcrumbs odz-mb-6"><ul><li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"></button></li> <!></ul></div>'),uT=V('<figure><img class="odz-h-48 odz-w-full odz-object-cover"></figure>'),hT=V('<div class="odz-h-48 odz-bg-base-200 odz-flex odz-items-center odz-justify-center"><span class="odz-text-base-content/50"> </span></div>'),fT=V('<p class="odz-text-sm odz-text-sm odz-text-base-content/70"> </p>'),pT=V('<button class="odz-btn odz-btn-outline odz-w-full odz-mb-2"> </button>'),gT=V('<div class="odz-card odz-bg-base-100 odz-shadow hover:odz-shadow-lg odz-rounded-lg odz-transition-shadow odz-cursor-pointer"><!> <div class="odz-card-body odz-p-5"><h2 class="odz-card-title odz-text-base"> </h2> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><!> <button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>'),vT=V('<div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"></div>'),mT=V('<div class="p-4"><h1 class="odz-text-2xl odz-font-bold odz-mb-6"> </h1> <!> <!></div> <!>',1);function wT(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t);let s=gt(e,"objectId",12),i=gt(e,"isTemplateModal",12),a=gt(e,"updateObjectDisabled",8),A=gt(e,"selectedPrintIndex",12),d=gt(e,"productId",8,null),c=gt(e,"estimateId",8,void 0),u=Ie(!1),h=Ie(null),f=Ie([]),g=Ie([]),w=Ie(!1),y=Ie(!1),x=Ie(null),C="",I=Ie({uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}}),M=null;function L(me){if(d()){const B=me.products.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===d()});if(B!==-1)return B}return me.index??0}async function ee(me){var E,T;const B=await P5(me.id);if(_(f,await Ah(me.id)),console.log("selectTemplate called:",{template:me,selectedPrintIndex:A()}),_(h,{...B}),l(h).is_last){_(w,l(h).use_file_upload),_(y,l(h).use_color),_(x,l(h).color_group_id);const P=await Ic(l(h).id),O=o(),j=L(O),$=O.products[j],H=A()!==null?(E=$==null?void 0:$.prints)==null?void 0:E[A()]:(T=$==null?void 0:$.prints)==null?void 0:T.find(Y=>Y.objectId===s());M={...H?{...H}:{},parentTemplates:l(f),template:{...me,templateProduct:P},objectId:s(),title:C},H!=null&&H.uploads?(Cr(I,l(I).uploads=H.uploads),Cr(I,l(I).nameSheet=H.nameSheet||{})):(Cr(I,l(I).uploads=null),Cr(I,l(I).nameSheet={})),H!=null&&H.colors?Cr(I,l(I).colors=H.colors):Cr(I,l(I).colors=null),l(w)||(M={...M,uploads:null,nameSheet:{}},Cr(I,l(I).uploads=null),Cr(I,l(I).nameSheet={})),l(y)||(M={...M,colors:null},Cr(I,l(I).colors=null)),!l(w)&&!l(y)&&(await k(),N())}else{_(w,!1),_(y,!1);const P=await k5(me.id);_(g,P)}}async function W(){R()}async function R(){var me,B,F;_(u,!0),_(w,!1),_(y,!1),_(f,[]),M=null;try{if(A()!==null){const T=L(o()),P=o().products[T],O=(me=P==null?void 0:P.prints)==null?void 0:me[A()];O?(console.log({print:O}),O.uploads&&Cr(I,l(I).uploads=O.uploads),O.colors&&Cr(I,l(I).colors=O.colors),(B=O.uploads)!=null&&B.uploadMemo&&Cr(I,l(I).uploadMemo=O.uploads.uploadMemo),O.nameSheet&&Cr(I,l(I).nameSheet=O.nameSheet)):A(null)}const E=await yp(s());if(_(g,E.process_print_area_templates.map(({template:T})=>T)),C=E.title,A()!==null){const T=L(o()),P=o().products[T],O=(F=P==null?void 0:P.prints)==null?void 0:F[A()];O!=null&&O.template}}catch(E){console.error(E)}finally{console.log("isUpload",l(w)),_(u,!1)}}async function Z(me,B){if(_(w,!1),Cr(I,l(I).uploads=me),Cr(I,l(I).nameSheet=B),!M){console.warn("selectUpload: pendingPrintData ");return}M={...M,uploads:me,nameSheet:B},l(y)===!1&&(await k(),N())}async function Be(me){if(_(y,!1),Cr(I,l(I).colors=me),!M){console.warn("selectColor: pendingPrintData ");return}M={...M,colors:me},await k(),N()}function N(){!l(w)&&!l(y)&&(i(!1),s(null),M=null,_(I,{uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}})),a()()}async function k(){var B;if(!M)return;Et.update(F=>{const E=L(F),T=[...F.products];if(!T[E])return F;const P=[...T[E].prints||[]];if(A()===null){const O=P.findIndex(j=>j.objectId===M.objectId);O!==-1?P[O]=M:P.push(M)}else P[A()]=M;return T[E]={...T[E],prints:P},{...F,products:T}});const me=L(o());if(await Et.calculatePrintPrice(me),await new Promise(F=>setTimeout(F,50)),typeof window<"u"&&d())try{const F=((B=o().products[me])==null?void 0:B.prints)||[],E=c()||o().estimateId||"temp",T=`detailedPrint_${d()}_${E}`,P=JSON.stringify(F);window.sessionStorage.setItem(T,P),console.log(" Templates.svelte - SessionStorage :",{key:T,printsCount:F.length,productId:d(),estimateId:E,mode:c()?"Edit":"Create"});const O=new CustomEvent("detailedPrintUpdate",{detail:{productId:d(),timestamp:Date.now(),source:"Templates",estimateId:E}});window.dispatchEvent(O),console.log(" Templates.svelte -    :",{productId:d(),estimateId:E,timestamp:Date.now()})}catch(F){console.error(" Templates.svelte - SessionStorage  :",F)}console.log("Decision point - finalized",{selectedPrintIndex:A(),objectId:M.objectId}),M=null}$n(async()=>{R()}),nn();var J=mT(),ne=lt(J),ge=z(m(ne),2);{var pe=me=>{var B=cT(),F=m(B),E=m(F),T=m(E),P=z(E,2);nr(P,1,()=>l(f),gr,(O,j)=>{var $=dT(),H=m($),Y=m(H);ke(()=>Qe(Y,l(j).name)),At("click",H,uv(()=>ee(l(j)))),U(O,$)}),At("click",T,uv(()=>W())),U(me,B)};be(ge,me=>{l(h)&&me(pe)})}var xe=z(ge,2);{var te=me=>{const B=at(()=>{var P;return(P=l(h))==null?void 0:P.file_upload_title}),F=at(()=>l(I).uploadMemo||""),E=at(()=>{var P;return((P=l(I).uploads)==null?void 0:P.files)||[]}),T=at(()=>{var P;return(P=l(h))==null?void 0:P.use_name_list});tT(me,{get fileUploadTitle(){return l(B)},callback:Z,get uploadMemo(){return l(F)},get initialFiles(){return l(E)},get nameSheet(){return l(I).nameSheet},get useNameSheet(){return l(T)}})},se=me=>{var B=Lt(),F=lt(B);{var E=P=>{const O=at(()=>{var $;return($=l(h))==null?void 0:$.id}),j=at(()=>l(I).colors||[]);lT(P,{get colorGroupId(){return l(x)},get selectedTemplateId(){return l(O)},callback:Be,get selectedColors(){return l(j)}})},T=P=>{var O=vT();nr(O,5,()=>l(g),gr,(j,$)=>{var H=gT(),Y=m(H);{var Ce=ze=>{var Se=uT(),ve=m(Se);ke(()=>{cr(ve,"src",l($).image_url),cr(ve,"alt",l($).name)}),U(ze,Se)},fe=ze=>{var Se=hT();U(ze,Se)};be(Y,ze=>{l($).image_url?ze(Ce):ze(fe,!1)})}var Le=z(Y,2),X=m(Le),D=m(X),Ae=z(X,2);{var ye=ze=>{var Se=fT(),ve=m(Se);ke(()=>Qe(ve,l($).description)),U(ze,Se)};be(Ae,ze=>{l($).description&&ze(ye)})}var ae=z(Le,2),le=m(ae);{var Ee=ze=>{var Se=pT();At("click",Se,uv(()=>window.open(l($).detail_url,"_blank","width=800,height=600"))),U(ze,Se)};be(le,ze=>{l($).detail_url&&ze(Ee)})}var Me=z(le,2);ke(()=>Qe(D,l($).name)),At("click",Me,()=>ee(l($))),U(j,H)}),U(P,O)};be(F,P=>{l(y)?P(E):P(T,!1)},!0)}U(me,B)};be(xe,me=>{l(w)?me(te):me(se,!1)})}var oe=z(ne,2);Qc(oe,{get isLoading(){return l(u)},set isLoading(me){_(u,me)},$$legacy:!0}),U(n,J),Zr(),r()}var yT=V('<div class="odz-alert odz-alert-error odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <button class="odz-btn odz-btn-sm odz-btn-outline"> </button></div>'),_T=V('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-gray-600">  ...</span></div></div>'),bT=V('<img class="odz-h-6 odz-w-6 odz-rounded-md odz-object-cover">'),xT=V('<div class="odz-inline-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2"><!> <span class="odz-text-xs odz-font-medium odz-text-slate-700"> </span></div>'),zT=V('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"> </p> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),BT=V('<span class="odz-inline-flex odz-items-center odz-gap-1 odz-rounded-full odz-bg-slate-100 odz-px-2 odz-py-1"><span class="odz-h-3.5 odz-w-3.5 odz-rounded-full odz-border odz-border-slate-300"></span> <span class="odz-text-[11px] odz-text-slate-600"> </span></span>'),CT=V('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-flex-wrap odz-gap-1.5"></div></div>'),ST=V('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2 odz-text-xs odz-text-slate-600"><svg class="odz-h-3.5 odz-w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 9.828m-2.828-2.828L16 5l3 3-1.828 1.828m-2.828-2.828L9 5l3 3"></path></svg> <span> </span></div></div>'),ET=V('<div class="odz-grid odz-gap-3 sm:odz-grid-cols-2"><!> <!></div>'),FT=V('<div class="odz-rounded-2xl odz-border odz-border-slate-200 odz-bg-white odz-shadow-sm odz-transition-shadow hover:odz-shadow-md"><div class="odz-flex odz-items-start odz-justify-between odz-gap-4 odz-border-b odz-border-slate-100 odz-bg-slate-50 odz-rounded-t-2xl odz-px-5 odz-py-4"><div class="odz-space-y-1"><span class="odz-inline-flex odz-items-center odz-gap-2 odz-text-xs odz-font-semibold odz-text-slate-500"><span class="odz-inline-flex odz-h-5 odz-w-5 odz-items-center odz-justify-center odz-rounded-full odz-bg-slate-200 odz-text-[10px] odz-font-bold odz-text-slate-700"></span>  </span> <h3 class="odz-text-base odz-font-semibold odz-text-slate-900"> </h3></div> <div class="odz-flex odz-shrink-0 odz-items-center odz-gap-2"><button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button></div></div> <div class="odz-space-y-4 odz-p-5"><!> <!></div></div>'),IT=V('<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-5"></div></div>'),UT=V('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>         .</p></div></div>'),QT=V('<div class="odz-mb-4"><h2 class="odz-text-lg odz-font-semibold"> </h2></div>'),TT=V('<dialog id="detailed-print-template-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl max-h-100 overflow-y-auto"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!> <!></div></dialog>'),LT=V('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">   <span class="odz-text-sm odz-font-normal odz-text-gray-500">     .</span></h1> <!> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas> <!></div> <p class="odz-text-sm odz-text-gray-500">         .</p></div></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div> <!>',1);function PT(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(gi,"$shopStore",t),s=()=>dn(Et,"$estimateStore",t);let i=gt(e,"productId",8),a=gt(e,"estimateId",8,void 0),A=gt(e,"onComplete",8),d=gt(e,"onCancel",8,()=>{}),c=null,u=[],h=Ie(),f=Ie(),g=Ie(),w=Ie(!0),y=Ie(null),x=Ie(!1),C=Ie(null),I=Ie(null),M=Ie(""),L=Ie(null),ee=Ie([]),W=Ie(!1),R=Ie(""),Z=Ie(!1),Be=Ie(null),N=Ie(""),k=Ie(null),J=Ie(!1),ne=Ie(!1),ge=Ie(!1);const pe=".main-estimate-modal-box";function xe(){if(typeof window<"u")try{const de=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"DetailedPrint"}});window.dispatchEvent(de),console.log(" DetailedPrint -    :",{productId:i(),timestamp:Date.now()})}catch(de){console.error(" DetailedPrint -    :",de)}}$n(async()=>{try{await j(),await te(),F()}finally{_(ne,!0)}}),as(()=>{var de;(de=l(g))==null||de.destroy(),O()});async function te(){try{_(w,!0),_(y,null),await se(),await za(),F()}catch(de){console.error("DetailedPrint initialize failed:",de),_(y,de instanceof Error?de.message:"   .")}finally{_(w,!1)}}async function se(){await za();let de=0;const ue=50;for(;!l(f)&&de<ue;)await new Promise(We=>setTimeout(We,100)),de++;if(!l(f))throw new Error("    .");if(c=await N5(i(),o().id),c!=null&&c.id&&(u=await M5(c.id)),!(c!=null&&c.canvas_json))throw new Error("    .");const Fe=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,Pe=Fe.backgroundImage.width*Fe.backgroundImage.scaleX,it=Fe.backgroundImage.height*Fe.backgroundImage.scaleY;_(g,new $x(l(f),{width:Pe,height:it,containerElement:l(h)})),l(g).setPrintAreaClickListener(We=>{oe(We)}),await l(g).setCanvasJSON(Fe)}function oe(de){var it,We,je;if(!l(g))return;_(C,de),_(M,((it=u.find(he=>he.object_id===de))==null?void 0:it.title)||`${de} `);const Fe=(((je=(We=l(g)).getObjects)==null?void 0:je.call(We))||[]).find(he=>{var De;return((De=he==null?void 0:he.data)==null?void 0:De.objectId)===de});Fe?_(L,{x:Math.round(Fe.left||0),y:Math.round(Fe.top||0),width:Math.round((Fe.width||0)*(Fe.scaleX||1)),height:Math.round((Fe.height||0)*(Fe.scaleY||1))}):_(L,null);const Pe=l(ee).findIndex(he=>he.objectId===de);_(I,Pe>=0?Pe:null),_(x,!0),me()}function me(){const de=document.querySelector(pe);de&&(de.scrollTop=0)}function B(de){if(!de)return;const ue=s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()});if(ue===-1){console.warn("DetailedPrint cancelPrint:     .",{productId:i()});return}Et.cancelPrint(ue,de),F(),O(),xe()}function F(){l(g)&&(l(g).updateAllObjectEnabled(),l(ee).forEach(de=>{de.objectId&&l(g).updateObjectDisabled(de.objectId)}))}function E(de){const ue=l(ee)[de];ue!=null&&ue.objectId&&(_(C,ue.objectId),_(I,de),_(M,ue.title||`${ue.objectId} `),_(L,null),_(x,!0),me())}function T(){_(x,!1)}function P(){const de=a()||"temp";return`detailedPrint_${i()}_${de}`}function O(de){if(!(typeof window>"u"))try{const ue=de??JSON.stringify(l(ee)??[]),Fe=P();window.sessionStorage.setItem(Fe,ue),_(R,ue);try{_(k,JSON.parse(ue)),console.log("DetailedPrint session ",{storageKey:Fe,printsCount:Array.isArray(l(k))?l(k).length:"invalid"}),xe();try{zr.selectPrintMethod("detailed")}catch(Pe){console.warn("fixedEstimateStore selectPrintMethod :",Pe)}try{Ao.selectPrintMethod(i(),"detailed")}catch(Pe){console.warn("extendedProductDataStore selectPrintMethod :",Pe)}}catch(Pe){console.error("DetailedPrint fallback  :",Pe)}}catch(ue){console.error("DetailedPrint session  :",ue)}}async function j(){var it,We,je,he,De,ot,Ge;if(typeof window>"u")return;const ue=(a()||"temp")!=="temp";let Fe=null,Pe=null;if(ue&&console.log(" Edit mode detected - will use sessionStorage populated from DB"),!Fe||Fe.length===0){const Je=P();if(Pe=window.sessionStorage.getItem(Je),Pe)try{console.log(" Raw sessionStorage data:",Pe),Fe=JSON.parse(Pe),console.log(" Parsed printsToRestore:",Fe),console.log(" First print colors detail:",{exists:Fe.length>0,colorsArray:(it=Fe[0])==null?void 0:it.colors,colorsLength:(je=(We=Fe[0])==null?void 0:We.colors)==null?void 0:je.length,colorsType:typeof((he=Fe[0])==null?void 0:he.colors),isArray:Array.isArray((De=Fe[0])==null?void 0:De.colors),allColors:(Ge=(ot=Fe[0])==null?void 0:ot.colors)==null?void 0:Ge.map((rt,ht)=>({idx:ht,name:rt.name,hex:rt.hex}))}),console.log(" Using sessionStorage detailed prints:",{printsCount:Fe.length,colorsPerPrint:Fe.map((rt,ht)=>{var $e;return{printIndex:ht,colorsCount:(($e=rt.colors)==null?void 0:$e.length)||0,colors:rt.colors,objectId:rt.objectId}})})}catch(rt){console.error("Failed to parse sessionStorage prints:",rt)}}if(!(!Fe||!Array.isArray(Fe)))try{const Je=Fe;_(k,[...Je]),_(ee,[...Je]),console.log(" sessionFallbackPrints updated:",{printsCount:l(k).length,colors:l(k).map($e=>$e.colors)});const ht=Un(Et).products.findIndex($e=>{var st;return((st=$e==null?void 0:$e.product)==null?void 0:st.id)===i()});if(_(R,Pe),ht===-1){console.warn("DetailedPrint   :    .",{productId:i()}),_(Be,Je),_(N,Pe),_(Z,!0);return}if(_(Z,!0),$(Je),await za(),Array.isArray(Je)&&Je.length>0){try{zr.selectPrintMethod("detailed")}catch($e){console.warn("fixedEstimateStore selectPrintMethod  (restore):",$e)}try{Ao.selectPrintMethod(i(),"detailed")}catch($e){console.warn("extendedProductDataStore selectPrintMethod  (restore):",$e)}xe()}}catch(Je){console.error("DetailedPrint   :",Je)}finally{l(Be)||_(Z,!1)}}function $(de){if(!de||de.length===0)return;const ue=s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()});if(ue===-1){console.warn("DetailedPrint applyPrintsToStore:    .",{productId:i()});return}_(J,!0),console.log("DetailedPrint applyPrintsToStore ",{productId:i(),printsCount:de.length}),_(ge,!1),Et.update(Fe=>{const Pe=[...Fe.products];return Pe[ue]={...Pe[ue],prints:de},{...Fe,products:Pe,index:ue}}),_(R,JSON.stringify(de??[])),za().then(()=>{_(J,!1)})}tr(()=>(l(k),s(),l(ee)),()=>{var de;l(k)&&l(k).length>0&&(((de=s())==null?void 0:de.estimateId)||"temp")!=="temp"&&(_(ee,[...l(k)]),console.log(" Edit  (reactive): Supabase DB  :",{printsCount:l(ee).length,colors:l(ee).map(Pe=>{var it,We;return{colorsCount:((it=Pe.colors)==null?void 0:it.length)||0,colorNames:(We=Pe.colors)==null?void 0:We.map(je=>je.name)}})}))}),tr(()=>(s(),l(k),Hn(i())),()=>{var Pe;if(!((((Pe=s())==null?void 0:Pe.estimateId)||"temp")!=="temp"&&l(k)&&l(k).length>0)){const it=s().products.find(je=>{var he;return((he=je==null?void 0:je.product)==null?void 0:he.id)===i()}),We=(it==null?void 0:it.prints)??[];We.length>0?_(ee,[...We]):l(k)&&l(k).length>0&&_(ee,[...l(k)])}}),tr(()=>(l(Be),s(),Hn(i()),l(N),za),()=>{if(l(Be)&&s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()})!==-1){const Fe=l(Be),Pe=l(N)||JSON.stringify(Fe??[]);_(Z,!0),$(Fe),_(R,Pe),_(Be,null),_(N,""),za().then(()=>{_(Z,!1)})}}),tr(()=>(l(Z),l(J),l(k),s(),Hn(i())),()=>{var de;if(!l(Z)&&!l(J)&&((de=l(k))!=null&&de.length)){const ue=s().products.find(Pe=>{var it;return((it=Pe==null?void 0:Pe.product)==null?void 0:it.id)===i()}),Fe=(ue==null?void 0:ue.prints)??[];(!Fe||Fe.length===0)&&$(l(k))}}),tr(()=>(l(x),l(Z),l(J),l(ee),l(R)),()=>{if(l(x)&&!l(Z)&&!l(J))try{JSON.stringify(l(ee)??[])!==l(R)&&_(ge,!0)}catch(de){console.error("DetailedPrint    :",de)}}),tr(()=>l(g),()=>{l(g)&&F()}),tr(()=>l(x),()=>{_(W,l(x))}),tr(()=>(l(x),l(W),l(ge),l(ne)),()=>{!l(x)&&l(W)&&(_(C,null),_(I,null),_(M,""),_(L,null),l(ge)&&l(ne)&&O(),_(ge,!1),F())}),tr(()=>(l(ne),l(x),l(Z),l(J),l(ee),l(R)),()=>{if(l(ne)&&!l(x)&&!l(Z)&&!l(J))try{const de=JSON.stringify(l(ee)??[]);de!==l(R)&&O(de)}catch(de){console.error("DetailedPrint   :",de)}}),bo(),nn();var H=LT(),Y=lt(H),Ce=z(m(Y),2);{var fe=de=>{var ue=yT(),Fe=m(ue),Pe=z(m(Fe),2),it=m(Pe),We=z(Fe,2);ke(()=>Qe(it,l(y))),At("click",We,te),U(de,ue)};be(Ce,de=>{l(y)&&de(fe)})}var Le=z(Ce,2),X=m(Le),D=m(X),Ae=m(D),ye=m(Ae);ss(ye,de=>_(f,de),()=>l(f));var ae=z(ye,2);{var le=de=>{var ue=_T();U(de,ue)};be(ae,de=>{l(w)&&!l(y)&&de(le)})}ss(Ae,de=>_(h,de),()=>l(h));var Ee=z(X,2),Me=m(Ee);{var ze=de=>{var ue=IT(),Fe=m(ue),Pe=z(m(Fe),2),it=z(m(Pe),2),We=m(it),je=z(Fe,2);nr(je,5,()=>l(ee),gr,(he,De,ot)=>{var Ge=FT(),Je=m(Ge),rt=m(Je),ht=m(rt),$e=m(ht);$e.textContent=ot+1;var st=z(ht,2),Bt=m(st),Ct=z(rt,2),Tt=m(Ct),wt=z(Tt,2),Ze=z(Je,2),kt=m(Ze);{var It=yt=>{var mt=zT(),Vt=z(m(mt),2);nr(Vt,5,()=>l(De).parentTemplates,gr,(ir,qt)=>{var Gt=xT(),ar=m(Gt);{var St=Yt=>{var dr=bT();ke(()=>{cr(dr,"src",l(qt).image_url),cr(dr,"alt",l(qt).name)}),U(Yt,dr)};be(ar,Yt=>{l(qt).image_url&&Yt(St)})}var ft=z(ar,2),Dt=m(ft);ke(()=>Qe(Dt,l(qt).name)),U(ir,Gt)}),U(yt,mt)};be(kt,yt=>{var mt;(mt=l(De).parentTemplates)!=null&&mt.length&&yt(It)})}var jt=z(kt,2);{var et=yt=>{var mt=ET(),Vt=m(mt);{var ir=ar=>{var St=CT(),ft=z(m(St),2);nr(ft,5,()=>l(De).colors,gr,(Dt,Yt)=>{var dr=BT(),ur=m(dr),hr=z(ur,2),vr=m(hr);ke(()=>{cr(ur,"style",`background-color: ${l(Yt).hex??""};`),Qe(vr,l(Yt).name)}),U(Dt,dr)}),U(ar,St)};be(Vt,ar=>{var St;(St=l(De).colors)!=null&&St.length&&ar(ir)})}var qt=z(Vt,2);{var Gt=ar=>{var St=ST(),ft=z(m(St),2),Dt=z(m(ft),2),Yt=m(Dt);ke(()=>Qe(Yt,` ${l(De).uploads.files.length??""}`)),U(ar,St)};be(qt,ar=>{var St,ft;(ft=(St=l(De).uploads)==null?void 0:St.files)!=null&&ft.length&&ar(Gt)})}U(yt,mt)};be(jt,yt=>{var mt,Vt,ir;((mt=l(De).colors)!=null&&mt.length||(ir=(Vt=l(De).uploads)==null?void 0:Vt.files)!=null&&ir.length)&&yt(et)})}ke(()=>Qe(Bt,l(De).title)),At("click",Tt,()=>E(ot)),At("click",wt,()=>B(l(De).objectId)),U(he,Ge)}),ke(()=>Qe(We,`${l(ee).length??""}  `)),U(de,ue)},Se=de=>{var ue=UT();U(de,ue)};be(Me,de=>{l(ee).length>0?de(ze):de(Se,!1)})}var ve=z(Y,2),Oe=m(ve),Ne=z(Oe,2),_e=z(ve,2);{var q=de=>{var ue=TT(),Fe=m(ue),Pe=m(Fe),it=m(Pe),We=z(Pe,2);{var je=De=>{var ot=QT(),Ge=m(ot),Je=m(Ge);ke(()=>Qe(Je,l(M))),U(De,ot)};be(We,De=>{l(M)&&De(je)})}var he=z(We,2);wT(he,{get productId(){return i()},get estimateId(){return a()},updateObjectDisabled:F,get objectId(){return l(C)},set objectId(De){_(C,De)},get isTemplateModal(){return l(x)},set isTemplateModal(De){_(x,De)},get selectedPrintIndex(){return l(I)},set selectedPrintIndex(De){_(I,De)},$$legacy:!0}),At("click",it,T),U(de,ue)};be(_e,de=>{l(x)&&de(q)})}ke(()=>Tr(D,`odz-space-y-4 ${l(w)?"odz-opacity-50":""}`)),At("click",Oe,function(...de){var ue;(ue=d())==null||ue.apply(this,de)}),At("click",Ne,function(...de){var ue;(ue=A())==null||ue.apply(this,de)}),U(n,H),Zr(),r()}var kT=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-10"><div class="odz-text-center"><h2 class="odz-text-xl odz-font-bold odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-500">      </p></div> <div class="odz-bg-gray-50 odz-p-8 odz-rounded-lg odz-border-2 odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-600 odz-text-center">    </p></div> <button class="odz-btn odz-btn-secondary odz-px-8"> </button></div>');function OT(n,e){let t=gt(e,"productId",8),r=gt(e,"onComplete",8);console.log("    - productId:",t());var o=kT(),s=z(m(o),4);At("click",s,function(...i){var a;(a=r())==null||a.apply(this,i)}),U(n,o)}var DT=V('<p class="odz-text-[11px] odz-text-gray-400 odz-line-through odz-mt-1"> </p> <p class="odz-text-[11px] odz-text-emerald-600 odz-font-semibold odz-mt-0.5"> </p>',1),NT=V('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p><!></p>',1),MT=V('<p class="odz-mt-1 odz-text-[11px] odz-text-blue-600">   -  </p>'),HT=V('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">     </p>'),jT=V('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <!>',1),RT=V('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">    </p>',1),$T=V('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">   </p>',1),qT=V('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!></p>'),KT=V('<span class="odz-text-blue-600">+ ( )</span>'),VT=V("<span>+ ( )</span>"),GT=V('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> <!></p>'),WT=V('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> + ( )</p>'),XT=ag('<svg class="odz-w-4 odz-h-4 sm:odz-w-5 sm:odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),YT=V("<button><!> <span> </span></button>"),JT=V('<div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2.5"></div>'),ZT=V('<button class="odz-w-full odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-semibold odz-py-2.5 odz-px-4 odz-rounded-xl odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2"><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg> <span> </span></button>'),e6=V('<div class="odz-mt-5 odz-border-t odz-border-gray-200/70 odz-pt-3.5"><!></div>'),t6=V('<div class="odz-mt-5 odz-px-4"><div class="odz-sticky odz-bottom-4 md:odz-static md:odz-bottom-auto"><div class="odz-rounded-3xl odz-border odz-border-gray-200 odz-bg-white/90 odz-backdrop-blur-md odz-shadow-xl odz-p-4 sm:odz-p-5 lg:odz-p-6"><div class="odz-grid sm:odz-grid-cols-2 lg:odz-grid-cols-5 odz-gap-2.5 lg:odz-gap-3"><div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-xs odz-text-gray-500"> </p></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-red-600"> </p> <!></div></div> <!></div></div></div>');function Tp(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(zr,"$fixedEstimateStore",t),s=()=>dn(Ao,"$extendedProductDataStore",t),i=Ie(),a=Ie(),A=Ie(),d=Ie(),c=Ie(),u=Ie(),h=Ie(),f=Ie(),g=Ie(),w=Ie(),y=Ie(),x=Ie(),C=Ie(),I=Ie(),M=Ie();let L=gt(e,"productId",8),ee=gt(e,"showNextButton",8,!1),W=gt(e,"nextButtonText",8,"  "),R=gt(e,"onNext",8,void 0),Z=gt(e,"estimateId",8,null),Be=gt(e,"idx",8,null),N=gt(e,"buttonConfig",8,null),k=Ie(0),J=Ie(null);function ne(){var fe,Le;if(((fe=l(i))==null?void 0:fe.productId)===L()&&l(i).printSelection&&l(i).printSelection.currentMethod!=="selection")return l(i).printSelection;if(typeof window<"u")try{let X=null,D="";if(Z()&&Be()!==null){const Ae=`fixedEstimate_${L()}_${Z()}_${Be()}`;X=sessionStorage.getItem(Ae),X&&(D=Ae),console.log(" resolvePrintSelection -    (estimateId + idx):",{exactKey:Ae,hasData:!!X})}if(!X&&Z()){const Ae=`fixedEstimate_${L()}_${Z()}`;X=sessionStorage.getItem(Ae),X&&(D=Ae)}if(!X&&Be()!==null){const Ae=`fixedEstimate_${L()}_${Be()}`;X=sessionStorage.getItem(Ae),X&&(D=Ae)}if(!X){const Ae=`fixedEstimate_${L()}`;X=sessionStorage.getItem(Ae),X&&(D=Ae)}if(X||console.log(" resolvePrintSelection - sessionStorage     (, DB Store ):",{triedKeys:[`fixedEstimate_${L()}`,`fixedEstimate_${L()}_${Be()}`,`fixedEstimate_${L()}_${Z()}`],currentIdx:Be(),currentEstimateId:Z()}),X){const Ae=JSON.parse(X);if(Ae.printSelection&&Ae.printSelection.currentMethod!=="selection")return Ae.printSelection}}catch{}return(Le=l(A))!=null&&Le.printSelection&&l(A).printSelection.currentMethod!=="selection"?l(A).printSelection:null}async function ge(fe,Le,X,D){if((D||(Le?"detailed":"none"))!=="detailed")return null;if(typeof window<"u")try{const ye=Z()||"temp",ae=`detailedPrint_${L()}_${ye}`;let le=window.sessionStorage.getItem(ae);if(!le&&Be()!==null){const Ee=`detailedPrint_${L()}_${ye}_${Be()}`;le=window.sessionStorage.getItem(Ee)}if(!le){const Ee=`detailedPrint_${L()}`;le=window.sessionStorage.getItem(Ee)}if(le){const Ee=JSON.parse(le);if(console.log(" sessionStorage     ( ):",{key:ae,parsedData:Ee,dataLength:Ee==null?void 0:Ee.length,currentTab:"unknown"}),Array.isArray(Ee)&&Ee.length>0){const Me=X;if(Me<=0)return null;let ze=0;for(const Se of Ee){const ve=await pe(Se,Me);ve!==null?ze+=ve:Se.price&&typeof Se.price=="number"&&(ze+=Se.price,console.log("      ():",{title:Se.title,fallbackPrice:Se.price,currentTotal:ze}))}if(ze>0)return ze}}}catch{}if(Z()&&Be()!==null)try{const ae=(await _c(Z())).filter(le=>le.idx===Be());if(ae.length>0){const le=X;if(le<=0)return null;let Ee=0;for(const Me of ae){const ze={id:Me.id,template:{id:Me.template_id},colors:Me.colors||[],price:Me.price},Se=await pe(ze,le);Se!==null?Ee+=Se:(Ee+=Me.price||0,console.log("   - DB   ():",{objectId:Me.object_id,dbPrice:Me.price}))}return Ee}}catch{}if(fe!=null&&fe.printConfig){let ye=null;if(typeof fe.printConfig=="string")try{ye=JSON.parse(fe.printConfig)}catch{return null}else typeof fe.printConfig=="object"&&fe.printConfig!==null&&(ye=fe.printConfig);if(ye){const ae=["totalAmount","total","totalPrice","price","amount"];for(const Ee of ae){const Me=ye[Ee];if(typeof Me=="number"&&!Number.isNaN(Me))return Me}const le=ye.summary;if(le&&typeof le=="object")for(const Ee of ae){const Me=le[Ee];if(typeof Me=="number"&&!Number.isNaN(Me))return Me}}}return null}async function pe(fe,Le){var X,D;try{if(!((X=fe.template)!=null&&X.id))return null;let Ae=fe.template.templateProduct;if(Ae||(Ae=await Ic(fe.template.id)),!(Ae!=null&&Ae.template_product_variants))return null;let ye;if(fe.variant_id?(ye=Ae.template_product_variants.find(Ee=>Ee.variant_id===fe.variant_id),console.log(" STEP 4  (variant_id ):",{found:!!ye,selectedVariant:ye})):fe.colors&&fe.colors.length>0?(ye=Ae.template_product_variants.find(Ee=>Ee.color_count===fe.colors.length),console.log(" STEP 4  (  ):",{found:!!ye,selectedVariant:ye})):(ye=Ae.template_product_variants[0],console.log(" STEP 4  ():",{selectedVariant:ye})),!ye)return null;const ae=await cl(ye.variant_id);if(!ae||!ae.prices||ae.prices.length===0)return null;const le=ae.prices[0].amount;if(ye.min_quantity<=Le){let Ee=le*Le;if((D=Ae.product)!=null&&D.quantity_discounts&&Ae.product.quantity_discounts.length>0){const Me=ea(Le,le,Ae.product.quantity_discounts);if(Me.hasDiscount){const ze=Me.discountedPrice*Le;return console.log(" =====   ( ) =====:",{discountedUnitPrice:Me.discountedPrice,quantity:Le,finalPrice:ze}),ze}}return Ee}else{const Ee=ye.plate_price||0;return console.log(" =====   (  , plate_price ) =====:",{min_quantity:ye.min_quantity,productQuantity:Le,platePrice:Ee}),Ee}}catch{return null}}function xe(fe,Le,X){if(typeof window>"u")return!1;try{const D=Le||"temp",Ae=[X!==null&&D?`detailedPrint_${fe}_${D}_${X}`:null,D?`detailedPrint_${fe}_${D}`:null,`detailedPrint_${fe}`].filter(Boolean);for(const ye of Ae){const ae=window.sessionStorage.getItem(ye);if(ae)try{const le=JSON.parse(ae);if(Array.isArray(le)&&le.length>0)return!0}catch{}}}catch{return!1}return!1}let te=Ie(0),se=Ie(!1),oe=Ie(null);$n(()=>{if(typeof window<"u"){const fe=Ae=>{const{productId:ye,timestamp:ae,source:le}=Ae.detail;ye===L()&&(_(k,Date.now()),_(te,Date.now()))},Le=async Ae=>{var ze,Se,ve;const{productId:ye,addonId:ae,selectedAddons:le,timestamp:Ee,source:Me}=Ae.detail;if(ye===L()){console.log(" SelectedProductSummary -     ():",{eventProductId:ye,addonId:ae,selectedAddonsCount:Object.keys(le||{}).length,timestamp:Ee,source:Me,currentProductId:L()}),await new Promise(q=>setTimeout(q,50));let Oe=Un(zr),Ne=0;const _e=5;for(;Ne<_e&&Oe;){const q=(Se=(ze=Oe==null?void 0:Oe.addonSelection)==null?void 0:ze.selectedAddons)==null?void 0:Se[ae];if(q&&q.variantId===Ae.detail.variantId)break;console.log(` Store    (${Ne+1}/${_e}):`,{storeVariantId:q==null?void 0:q.variantId,expectedVariantId:Ae.detail.variantId}),await new Promise(de=>setTimeout(de,25)),Oe=Un(zr),Ne++}if(Oe&&l(c)&&l(A)){const q=T(Oe,l(c),Date.now(),(ve=Oe.addonSelection)==null?void 0:ve.selectedAddons);_(C,q)}_(k,Date.now()),_(te,Date.now())}},X=Ae=>{const{productId:ye,action:ae,color:le,variantId:Ee,oldQuantity:Me,newQuantity:ze,newTotalQuantity:Se,timestamp:ve,source:Oe}=Ae.detail;ye===L()&&(_(k,Date.now()),_(te,Date.now()))},D=async Ae=>{const{productId:ye,toMethod:ae,idx:le,estimateId:Ee,source:Me}=Ae.detail;ye===L()&&(_(J,ae||null),ae&&zr.updatePrintSelection({currentMethod:ae,isCompleted:ae==="none",lastUpdated:Date.now()}),_(k,Date.now()),_(te,Date.now()),await new Promise(ze=>setTimeout(ze,100)),F(ae))};return window.addEventListener("detailedPrintUpdate",fe),window.addEventListener("addonSelectionUpdate",Le),window.addEventListener("productQuantityUpdate",X),window.addEventListener("printAmountRecalc",D),setTimeout(()=>{_(te,Date.now())},100),()=>{window.removeEventListener("detailedPrintUpdate",fe),window.removeEventListener("addonSelectionUpdate",Le),window.removeEventListener("productQuantityUpdate",X),window.removeEventListener("printAmountRecalc",D)}}});let me=Ie(null),B=!1;async function F(fe){if(!B)try{B=!0,_(me,await ge(l(u),l(se),l(c).totalQuantity,fe))}catch{_(me,null)}finally{B=!1}}let E=null;function T(fe,Le,X,D){var Ee,Me,ze;let Ae=fe;if(typeof window<"u"&&L())try{const Se=Un(zr);Se&&Se.productId===L()&&(Ae=Se)}catch{}if(X&&typeof window<"u"&&L())try{const Se=Un(zr);Se&&Se.productId===L()&&(Ae=Se)}catch{}let ye=D||((Ee=Ae==null?void 0:Ae.addonSelection)==null?void 0:Ee.selectedAddons);if(typeof window<"u"&&X)try{const Se=Un(zr);if(Se&&Se.productId===L()){const ve=(Me=Se.addonSelection)==null?void 0:Me.selectedAddons;ve&&Object.keys(ve).length>0&&(ye=ve)}}catch{}if(!ye||!((ze=l(A))!=null&&ze.addons))return 0;const ae=Le.totalQuantity;let le=0;return Object.entries(ye).forEach(([Se,ve])=>{var Fe,Pe,it;if(!ve||typeof ve!="object"||!("productId"in ve)||!("variantId"in ve))return;const Oe=ve,Ne=l(A).addons.find(We=>We.id===Se);if(!Ne)return;const _e=Ne.items.find(We=>We.addon_product.id===Oe.productId);if(!_e)return;(Fe=_e.addon_product.variants)!=null&&Fe.map(We=>{var je,he;return{id:We.id,title:We.title,price:(he=(je=We.prices)==null?void 0:je[0])==null?void 0:he.amount}});let q=(Pe=_e.addon_product.variants)==null?void 0:Pe.find(We=>We.id===Oe.variantId);if(!q){(it=_e.addon_product.variants)==null||it.forEach((We,je)=>{});return}if(!q.prices||q.prices.length===0)return;const de=q.prices[0].amount,ue=de*ae;le+=ue,console.log("    ():",{addonName:Ne.name,variantTitle:q.title||_e.addon_product.title,selectedVariantId:Oe.variantId,foundVariantId:q.id,addonUnitPrice:de,totalQuantity:ae,addonItemTotal:ue,currentAddonTotal:le,calculationValid:q.id===Oe.variantId})}),le}function P(fe){var ze,Se;if(!((ze=l(i))!=null&&ze.productSelection)||!l(d)||l(i).productId!==L())return{totalQuantity:0,selectedColors:[],totalAmount:{originalTotal:0,discountedTotal:0,hasDiscount:!1}};const{quantityByVariant:Le,variantsByColor:X={},variantDiscounts:D}=l(i).productSelection,Ae=Object.values(Le||{}).reduce((ve,Oe)=>ve+Object.values(Oe||{}).reduce((Ne,_e)=>Ne+_e,0),0),ye=Object.keys(Le||{}).filter(ve=>Object.values(Le[ve]||{}).some(Oe=>Oe>0));let ae=0,le=0,Ee=!1;for(const ve in Le||{})for(const Oe in Le[ve]||{}){const Ne=Le[ve][Oe];if(Ne>0){const _e=(Se=X[ve])==null?void 0:Se.find(q=>q.id===Oe);if(_e&&_e.prices&&_e.prices.length>0){const q=_e.prices[0].amount,de=D==null?void 0:D[Oe];ae+=q*Ne,de!=null&&de.hasDiscount?(le+=de.discountedPrice*Ne,Ee=!0):le+=q*Ne}}}return{totalQuantity:Ae,selectedColors:ye,totalAmount:{originalTotal:ae,discountedTotal:Ee?le:ae,hasDiscount:Ee}}}$n(()=>{E=zr.subscribe(fe=>{(fe==null?void 0:fe.productId)===L()&&_(k,Date.now())})}),as(()=>{E&&E()});function O(){R()&&R()()}function j(fe){switch(fe){case"arrow-left":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>';case"arrow-right":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>';case"check":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';case"save":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path>';default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>'}}function $(fe,Le="normal"){const X="odz-font-semibold odz-rounded-lg odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2",D=Le==="large"?"odz-py-3 odz-px-5 odz-text-base":"odz-py-2.5 odz-px-4 odz-text-sm";return fe==="primary"?`${X} ${D} odz-bg-red-600 hover:odz-bg-red-700 odz-text-white`:`${X} ${D} odz-bg-gray-100 hover:odz-bg-gray-200 odz-text-gray-700 hover:odz-text-gray-800 odz-border odz-border-gray-300`}tr(()=>o(),()=>{_(i,o())}),tr(()=>s(),()=>{_(a,s())}),tr(()=>(l(a),Hn(L())),()=>{var fe,Le;_(A,(Le=(fe=l(a))==null?void 0:fe.productDataCache)==null?void 0:Le[L()])}),tr(()=>l(A),()=>{var fe;_(d,(fe=l(A))==null?void 0:fe.product)}),tr(()=>l(k),()=>{_(c,P(l(k)))}),tr(()=>{},()=>{_(u,ne())}),tr(()=>l(u),()=>{var fe;_(h,((fe=l(u))==null?void 0:fe.currentMethod)??"selection")}),tr(()=>(l(te),l(J),l(h),l(u),Hn(L()),Hn(Z()),Hn(Be()),l(oe),l(se)),()=>{l(te);const fe=l(J)||l(h),Le=!!l(u),X=xe(L(),Z(),Be());let D=!1;fe==="detailed"?D=!0:fe==="simple"||fe==="none"?D=!1:fe==="selection"&&(D=X);const Ae=`${fe}|${Le}|${X}`;Ae!==l(oe)&&_(oe,Ae),l(se)!==D&&_(se,D)}),tr(()=>l(me),()=>{_(f,l(me)??0)}),tr(()=>l(c),()=>{_(g,l(c).totalAmount.hasDiscount?l(c).totalAmount.discountedTotal:l(c).totalAmount.originalTotal)}),tr(()=>l(c),()=>{_(w,l(c).totalAmount.hasDiscount?l(c).totalAmount.originalTotal-l(c).totalAmount.discountedTotal:0)}),tr(()=>l(w),()=>{_(y,l(w)>0)}),tr(()=>o(),()=>{var fe,Le;_(x,(Le=(fe=o())==null?void 0:fe.addonSelection)==null?void 0:Le.selectedAddons)}),tr(()=>(l(i),l(c),l(k),l(x)),()=>{_(C,T(l(i),l(c),l(k),l(x)))}),tr(()=>(l(se),l(f),l(g),l(C)),()=>{_(I,l(se)&&l(f)>0?l(g)+l(f)+l(C):l(g)+l(C))}),tr(()=>(l(u),l(se),l(c),l(k)),()=>{(l(u)||l(se)||l(c).totalQuantity||l(k))&&F()}),tr(()=>{},()=>{}),tr(()=>(Hn(N()),Hn(ee())),()=>{_(M,N()||ee())}),bo(),nn();var H=Lt(),Y=lt(H);{var Ce=fe=>{var Le=t6(),X=m(Le),D=m(X),Ae=m(D),ye=m(Ae),ae=z(m(ye),2),le=m(ae),Ee=z(ae,2),Me=m(Ee),ze=z(ye,2),Se=z(m(ze),2),ve=m(Se),Oe=z(Se,2);{var Ne=$e=>{var st=DT(),Bt=lt(st),Ct=m(Bt),Tt=z(Bt,2),wt=m(Tt);ke((Ze,kt)=>{Qe(Ct,`${Ze??""}`),Qe(wt,`-${kt??""} `)},[()=>Er(l(c).totalAmount.originalTotal),()=>Er(l(w))],at),U($e,st)};be(Oe,$e=>{l(y)&&$e(Ne)})}var _e=z(ze,2),q=z(m(_e),2);{var de=$e=>{var st=NT(),Bt=lt(st),Ct=m(Bt),Tt=z(Bt,2),wt=m(Tt);{var Ze=It=>{var jt=mn("    .");U(It,jt)},kt=It=>{var jt=mn("    .");U(It,jt)};be(wt,It=>{l(f)>0?It(Ze):It(kt,!1)})}ke(It=>{Qe(Ct,`${It??""}`),Tr(Tt,`odz-mt-1 odz-text-[11px] ${l(f)>0?"odz-text-gray-500":"odz-text-orange-500"}`)},[()=>Er(l(f))],at),U($e,st)},ue=$e=>{var st=jT(),Bt=z(lt(st),2);{var Ct=wt=>{var Ze=MT();U(wt,Ze)},Tt=wt=>{var Ze=HT();U(wt,Ze)};be(Bt,wt=>{(l(J)||l(h))==="simple"?wt(Ct):wt(Tt,!1)})}U($e,st)};be(q,$e=>{l(se)?$e(de):$e(ue,!1)})}var Fe=z(_e,2),Pe=z(m(Fe),2);{var it=$e=>{var st=RT(),Bt=lt(st),Ct=m(Bt);ke(Tt=>Qe(Ct,`${Tt??""}`),[()=>Er(l(C))],at),U($e,st)},We=$e=>{var st=$T();U($e,st)};be(Pe,$e=>{l(C)>0?$e(it):$e(We,!1)})}var je=z(Fe,2),he=z(m(je),2),De=m(he),ot=z(he,2);{var Ge=$e=>{var st=qT(),Bt=m(st),Ct=z(Bt);{var Tt=wt=>{var Ze=mn();ke(kt=>Qe(Ze,`+ ${kt??""}`),[()=>Er(l(C))],at),U(wt,Ze)};be(Ct,wt=>{l(C)>0&&wt(Tt)})}ke((wt,Ze)=>Qe(Bt,`${wt??""} + ${Ze??""} `),[()=>Er(l(g)),()=>Er(l(f))],at),U($e,st)},Je=$e=>{var st=Lt(),Bt=lt(st);{var Ct=wt=>{var Ze=GT(),kt=m(Ze),It=z(kt);{var jt=Vt=>{var ir=mn();ke(qt=>Qe(ir,`+  ${qt??""}`),[()=>Er(l(C))],at),U(Vt,ir)};be(It,Vt=>{l(C)>0&&Vt(jt)})}var et=z(It,2);{var yt=Vt=>{var ir=KT();U(Vt,ir)},mt=Vt=>{var ir=VT();U(Vt,ir)};be(et,Vt=>{l(h)==="simple"?Vt(yt):Vt(mt,!1)})}ke(Vt=>Qe(kt,` ${Vt??""} `),[()=>Er(l(g))],at),U(wt,Ze)},Tt=wt=>{var Ze=WT(),kt=m(Ze),It=z(kt);{var jt=et=>{var yt=mn();ke(mt=>Qe(yt,`+  ${mt??""}`),[()=>Er(l(C))],at),U(et,yt)};be(It,et=>{l(C)>0&&et(jt)})}ke(et=>Qe(kt,` ${et??""} `),[()=>Er(l(g))],at),U(wt,Ze)};be(Bt,wt=>{l(se)?wt(Tt,!1):wt(Ct)},!0)}U($e,st)};be(ot,$e=>{l(se)&&l(f)>0?$e(Ge):$e(Je,!1)})}var rt=z(Ae,2);{var ht=$e=>{var st=e6(),Bt=m(st);{var Ct=wt=>{var Ze=JT();nr(Ze,5,()=>N().buttons,gr,(kt,It,jt)=>{var et=YT(),yt=m(et);{var mt=qt=>{var Gt=XT(),ar=m(Gt);w0(ar,()=>j(l(It).icon),!0,!1),U(qt,Gt)};be(yt,qt=>{l(It).icon&&qt(mt)})}var Vt=z(yt,2),ir=m(Vt);ke(qt=>{Tr(et,qt),Qe(ir,l(It).text)},[()=>`${N().type==="single"?"odz-w-full":jt===0?"odz-flex-1":"odz-flex-1 sm:odz-flex-[1.35]"} ${$(l(It).style,l(It).size||"normal")}`],at),At("click",et,function(...qt){var Gt;(Gt=l(It).action)==null||Gt.apply(this,qt)}),U(kt,et)}),U(wt,Ze)},Tt=wt=>{var Ze=ZT(),kt=z(m(Ze),2),It=m(kt);ke(()=>Qe(It,W())),At("click",Ze,O),U(wt,Ze)};be(Bt,wt=>{N()?wt(Ct):wt(Tt,!1)})}U($e,st)};be(rt,$e=>{l(M)&&$e(ht)})}ke(($e,st)=>{Qe(le,`${l(c).totalQuantity??""}`),Qe(Me,`${l(c).selectedColors.length??""}  `),Qe(ve,`${$e??""}`),Qe(De,`${st??""}`)},[()=>Er(l(g)),()=>Er(l(I))],at),U(fe,Le)};be(Y,fe=>{l(c).totalQuantity>0&&l(d)&&fe(Ce)})}U(n,H),Zr(),r()}var r6=V('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),n6=V('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),o6=V('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-green-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">    ...</p></div></div></div>'),s6=V('<div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-1.5 odz-h-1.5 odz-bg-gray-400 odz-rounded-full"></div> <span class="odz-text-xs odz-text-gray-600"> </span></div>'),i6=V(`<button class="odz-group odz-cursor-pointer odz-w-full odz-text-left"><div class="odz-relative odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-xl odz-p-6
                               odz-transition-all odz-duration-300 odz-shadow-sm
                               hover:odz-border-gray-300 hover:odz-shadow-lg hover:odz-scale-105"><div></div> <div class="odz-relative odz-z-10"><div class="odz-text-4xl odz-mb-4 odz-text-center"> </div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-800 odz-text-center odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-text-center odz-mb-4"> </p> <div class="odz-space-y-2"></div></div> <div class="odz-relative odz-z-10 odz-mt-6"><div></div></div></div></button>`),a6=V('<div class="odz-flex odz-flex-col odz-gap-6 odz-p-4 odz-pb-48"><div class="odz-text-center odz-mb-6"><h1 class="odz-text-2xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h1> <p class="odz-text-sm odz-text-gray-600">   </p></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-px-2"></div> <!></div>'),A6=V('<div class="odz-relative"><!></div>'),l6=V('<div class="odz-relative"><!></div>'),d6=V('<div class="odz-relative odz-pb-48"><!> <!></div>'),c6=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-16"><div class="odz-text-center"><div class="odz-text-6xl odz-mb-4"></div> <h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h2> <p class="odz-text-sm odz-text-gray-600">        </p></div> <div class="odz-w-full odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function qx(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(zr,"$fixedEstimateStore",t),s=()=>dn(gi,"$shopStore",t),i=()=>dn(Et,"$estimateStore",t),a=Ie();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"step",12,0),h=gt(e,"onNext",8,void 0),f=Ie(null),g=Ie(!1),w=Ie(null),y=Ie(!1);function x(){var oe;if(d()&&d()!=="temp")return console.log(" getInitialMethod: Edit  - selection  (DB  )"),"selection";if(typeof window<"u"&&A())try{let me=`fixedEstimate_${A()}_${d()||"temp"}_${c()}`,B=window.sessionStorage.getItem(me);if(B||(me=`fixedEstimate_${A()}_${d()||"temp"}`,B=window.sessionStorage.getItem(me)),B){const F=JSON.parse(B);if((oe=F.printSelection)!=null&&oe.currentMethod)return F.printSelection.currentMethod}}catch{}return"selection"}let C=Ie(x()),I=null;const M=[{id:"simple",title:"  ",description:"   ",icon:"",features:[" ","  "," "],color:"from-green-500 to-emerald-600"},{id:"detailed",title:"  ",description:"  ",icon:"",features:[" "," "," /"],color:"from-blue-500 to-indigo-600"},{id:"self-design",title:" ",description:"  ",icon:"",features:[" "," "," "],color:"from-purple-500 to-pink-600"},{id:"none",title:"  ",description:"    ",icon:"",features:[" ","  "," "],color:"from-gray-500 to-slate-600"}];function L(se){const oe=se;if(_(C,oe),oe!=="selection"&&Ao.selectPrintMethod(A(),oe),oe!=="selection"&&zr.selectPrintMethod(oe),oe!=="selection"&&c()!==void 0&&Et.updateProductPrintType(c(),oe),typeof window<"u"&&(oe==="simple"||oe==="none")){try{const me=d()||"temp";[`detailedPrint_${A()}_${me}`,`detailedPrint_${A()}_${me}_${c()}`,`detailedPrint_${A()}`].forEach(F=>{try{sessionStorage.removeItem(F)}catch{}})}catch(me){console.error(" detailedPrint    :",me)}d()&&c()!==null&&pt.from("estimate_prints").delete().eq("estimate_id",d()).eq("idx",c()).then(({error:me})=>{me?console.error(" estimate_prints  :",me):console.log(" estimate_prints   (/ )")})}if(typeof window<"u"&&oe!=="selection"){const me=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:oe,idx:c(),estimateId:d(),source:"printMethodChange"}});window.dispatchEvent(me)}oe==="none"&&(u(0),Ao.completePrintSelection(A()),zr.completePrintSelection(),h()&&h()())}function ee(){_(C,"selection"),Ao.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1}),zr.updatePrintSelection({currentMethod:"selection",isCompleted:!1,lastUpdated:Date.now()})}function W(){_(C,"selection"),A()&&Ao.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1})}function R(){u(0),Ao.completePrintSelection(A()),zr.completePrintSelection(),h()&&h()()}function Z(se){se!=null&&se.product&&Et.update(oe=>{const me=[...oe.products];let B=me.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===se.product.id});if(B===-1){const F={product:se.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:se.addonProductsMap||{},productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};me.push(F),B=me.length-1}else me[B].prints||(me[B]={...me[B],prints:[]});return{...oe,products:me,index:B}})}async function Be(se=!1){var oe,me;if(A()){_(g,!0),_(w,null);try{const B=o().productSelection;if(se&&B&&B.product&&B.productId===A()){if(_(f,{product:B.product,addons:B.addons||[],addonItems:B.addonItems||[]}),Z(l(f)),typeof window<"u"&&d())try{const E=d(),T=`fixedEstimate_${A()}_${E}`,P=window.sessionStorage.getItem(T);if(P){const O=JSON.parse(P);(oe=O.printSelection)!=null&&oe.currentMethod&&(_(C,O.printSelection.currentMethod),console.log(" Edit  (print.svelte): sessionStorage   :",{currentMethod:l(C),key:T}))}}catch{}return}if(!se){const E=Ao.restoreFromSession(A());if(E!=null&&E.isLoaded){_(f,E),Z(l(f)),E.printSelection&&_(C,E.printSelection.currentMethod);return}}const F=Ao.getProductData(A());F!=null&&F.isLoaded?(_(f,F),Z(l(f)),!se&&F.printSelection&&_(C,F.printSelection.currentMethod)):(_(f,await Ao.loadIntegratedProductData(A(),s().id)),Z(l(f))),(me=l(f))!=null&&me.process}catch(B){_(w,B instanceof Error?B.message:"   .")}finally{_(g,!1)}}}function N(){const se=Ao.getProductData(A());if(!(se!=null&&se.printSelection))return;const oe=se.printSelection;_(C,oe.currentMethod)}function k(){I=Ao.subscribe(se=>{const oe=se.productDataCache[A()];if(oe!=null&&oe.printSelection){const B=oe.printSelection.currentMethod;B!==l(C)&&_(C,B)}})}async function J(){if(typeof window>"u"||!d()||d()==="temp")return"selection";console.log(" populateSessionStorageFromDB :",{productId:A(),estimateId:d(),idx:c()});let se="selection";try{const oe=await d1(d()),me=c()??i().index??0,B=oe.filter(T=>T.idx===me);if(B.length>0){console.log(" SimplePrint DB  :",B.length,"");const T=B.map(O=>({objectId:O.object_id||"",title:O.title||"",printMethod:O.print_method||"",savedFileInfo:O.uploads?typeof O.uploads=="string"?JSON.parse(O.uploads):O.uploads:[]})),P=`simplePrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(T)),console.log(" SimplePrint sessionStorage  :",P),se="simple"}const E=i().products[me];if(E!=null&&E.prints&&E.prints.length>0){console.log(" DetailedPrint   :",E.prints.length,"");const T=E.prints.map(O=>({template:O.template,parentTemplates:O.parentTemplates||[],uploads:O.uploads||null,objectId:O.objectId||"",title:O.title||"",colors:O.colors||[],price:O.price||0,variant_id:O.variant_id||null,nameSheet:O.nameSheet||null,discountInfo:O.discountInfo||null})),P=`detailedPrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(T)),console.log(" DetailedPrint sessionStorage  :",P,T),se="detailed"}if(se!=="selection"){const T=`fixedEstimate_${A()}_${d()}_${me}`,P=window.sessionStorage.getItem(T);let O=P?JSON.parse(P):{};O.printSelection={...O.printSelection,currentMethod:se,isCompleted:!0,lastUpdated:Date.now()},window.sessionStorage.setItem(T,JSON.stringify(O)),console.log(" fixedEstimate sessionStorage  :",T,se)}return console.log(" populateSessionStorageFromDB .  :",se),se}catch(oe){return console.error(" populateSessionStorageFromDB :",oe),"selection"}}$n(async()=>{var oe,me;const se=d()&&d()!=="temp";if(se){_(y,!0),console.log(" Edit : DB   ");try{const B=await J();B!=="selection"&&(_(C,B),console.log(" Edit : DB    :",B))}finally{_(y,!1),console.log(" Edit : DB   , currentMethod:",l(C))}}if(zr.initialize(A(),d(),c()),k(),await Be(se),se||N(),!se){const B=i().products.find(E=>{var T;return((T=E==null?void 0:E.product)==null?void 0:T.id)===A()});if((!((oe=l(f))!=null&&oe.printSelection)||!l(f).printSelection.currentMethod||l(f).printSelection.currentMethod==="selection")&&(B!=null&&B.prints)&&B.prints.length>0)try{const E=B.prints[0],T=(E==null?void 0:E.method)??((me=E==null?void 0:E.parentTemplates)!=null&&me.length?"detailed":"simple");Ao.updatePrintSelection(A(),{currentMethod:T??l(C),selectedTemplate:E==null?void 0:E.template,selectedColors:E==null?void 0:E.colors,printConfig:E==null?void 0:E.config}),_(C,T??l(C)),console.log("      (currentMethod ):",{derivedMethod:T,fallbackMethod:l(C)})}catch{}}}),as(()=>{I&&I()}),tr(()=>l(f),()=>{_(a,M.filter(se=>{var oe,me;return se.id==="self-design"?((me=(oe=l(f))==null?void 0:oe.product)==null?void 0:me.self_design_enabled)===!0:!0}))}),tr(()=>(l(C),l(a)),()=>{l(C)!=="selection"&&(l(a).some(oe=>oe.id===l(C))||_(C,"selection"))}),bo(),nn();var ne=Lt(),ge=lt(ne);{var pe=se=>{var oe=r6();U(se,oe)},xe=se=>{var oe=Lt(),me=lt(oe);{var B=E=>{var T=n6(),P=m(T),O=z(m(P),2),j=z(m(O),2),$=m(j),H=z(P,2);ke(()=>Qe($,l(w))),At("click",H,()=>Be(d()&&d()!=="temp")),U(E,T)},F=E=>{var T=Lt(),P=lt(T);{var O=$=>{var H=o6();U($,H)},j=$=>{var H=Lt(),Y=lt(H);{var Ce=Le=>{var X=a6(),D=z(m(X),2);nr(D,5,()=>l(a),gr,(le,Ee)=>{var Me=i6(),ze=m(Me),Se=m(ze),ve=z(Se,2),Oe=m(ve),Ne=m(Oe),_e=z(Oe,2),q=m(_e),de=z(_e,2),ue=m(de),Fe=z(de,2);nr(Fe,5,()=>l(Ee).features,gr,(We,je)=>{var he=s6(),De=z(m(he),2),ot=m(De);ke(()=>Qe(ot,l(je))),U(We,he)});var Pe=z(ve,2),it=m(Pe);ke(()=>{Tr(Se,`odz-absolute odz-inset-0 odz-bg-gradient-to-br ${l(Ee).color??""}
                                   odz-rounded-xl odz-opacity-0 group-hover:odz-opacity-10 odz-transition-opacity odz-duration-300`),Qe(Ne,l(Ee).icon),Qe(q,l(Ee).title),Qe(ue,l(Ee).description),Tr(it,`odz-w-full odz-bg-gradient-to-r ${l(Ee).color??""}
                                          odz-text-white odz-font-semibold odz-py-2 odz-px-4 odz-rounded-lg
                                          odz-transition-all odz-duration-200 hover:odz-shadow-md
                                          group-hover:odz-shadow-lg odz-text-center`)}),At("click",Me,()=>L(l(Ee).id)),U(le,Me)});var Ae=z(D,2);const ye=at(()=>d()||null),ae=at(()=>c()!==void 0?c():null);Tp(Ae,{get productId(){return A()},get estimateId(){return l(ye)},get idx(){return l(ae)},debugSource:"print-selection",buttonConfig:{type:"double",buttons:[{text:" ",action:()=>{if(typeof window<"u"){const le=new CustomEvent("changeTab",{detail:"product"});window.dispatchEvent(le)}},style:"secondary",icon:"arrow-left"},{text:"",action:R,style:"primary",icon:"check"}]}}),U(Le,X)},fe=Le=>{var X=Lt(),D=lt(X);{var Ae=ae=>{var le=A6(),Ee=m(le);QQ(Ee,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:R,onCancel:ee}),U(ae,le)},ye=ae=>{var le=Lt(),Ee=lt(le);{var Me=Se=>{var ve=l6(),Oe=m(ve);PT(Oe,{get productId(){return A()},get estimateId(){return d()},onComplete:R,onCancel:ee}),U(Se,ve)},ze=Se=>{var ve=Lt(),Oe=lt(ve);{var Ne=q=>{var de=d6(),ue=m(de);OT(ue,{get productId(){return A()},onComplete:R});var Fe=z(ue,2);const Pe=at(()=>d()||null),it=at(()=>c()!==void 0?c():null);Tp(Fe,{get productId(){return A()},get estimateId(){return l(Pe)},get idx(){return l(it)},debugSource:"print-self-design",buttonConfig:{type:"single",buttons:[{text:"",action:R,style:"primary",icon:"check",size:"large"}]}}),U(q,de)},_e=q=>{var de=Lt(),ue=lt(de);{var Fe=Pe=>{var it=c6(),We=z(m(it),2),je=m(We),he=z(je,2);At("click",je,ee),At("click",he,R),U(Pe,it)};be(ue,Pe=>{l(C)==="none"&&Pe(Fe)},!0)}U(q,de)};be(Oe,q=>{l(C)==="self-design"?q(Ne):q(_e,!1)},!0)}U(Se,ve)};be(Ee,Se=>{l(C)==="detailed"?Se(Me):Se(ze,!1)},!0)}U(ae,le)};be(D,ae=>{l(C)==="simple"?ae(Ae):ae(ye,!1)},!0)}U(Le,X)};be(Y,Le=>{l(C)==="selection"?Le(Ce):Le(fe,!1)},!0)}U($,H)};be(P,$=>{l(y)?$(O):$(j,!1)},!0)}U(E,T)};be(me,E=>{l(w)?E(B):E(F,!1)},!0)}U(se,oe)};be(ge,se=>{l(g)?se(pe):se(xe,!1)})}U(n,ne),Tb(e,"resetPrintTab",W);var te=Zr({resetPrintTab:W});return r(),te}/*!
* html2canvas-pro 1.5.8 <https://yorickshan.github.io/html2canvas-pro/>
* Copyright (c) 2024 yorickshan <https://github.com/yorickshan>
* Released under MIT License
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G0=function(n,e){return G0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},G0(n,e)};function oa(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");G0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var W0=function(){return W0=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},W0.apply(this,arguments)};function Us(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,[])).next())})}function ws(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(c){return A([d,c])}}function A(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],o=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function vf(n,e,t){if(arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var _A=function(){function n(e,t,r,o){this.left=e,this.top=t,this.width=r,this.height=o}return n.prototype.add=function(e,t,r,o){return new n(this.left+e,this.top+t,this.width+r,this.height+o)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(o){return o.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),bg=function(n,e){return _A.fromClientRect(n,e.getBoundingClientRect())},u6=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),o=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new _A(0,0,r,o)},xg=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},go=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mf=0;mf<Ay.length;mf++)h6[Ay.charCodeAt(mf)]=mf;var ly="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wf=0;wf<ly.length;wf++)hu[ly.charCodeAt(wf)]=wf;var f6=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=hu[n.charCodeAt(r)],i=hu[n.charCodeAt(r+1)],a=hu[n.charCodeAt(r+2)],A=hu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},p6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},g6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Wl=5,M1=11,Iv=2,v6=M1-Wl,Kx=65536>>Wl,m6=1<<Wl,Uv=m6-1,w6=1024>>Wl,y6=Kx+w6,_6=y6,b6=32,x6=_6+b6,z6=65536>>M1,B6=1<<v6,C6=B6-1,dy=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},S6=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},E6=function(n,e){var t=f6(n),r=Array.isArray(t)?g6(t):new Uint32Array(t),o=Array.isArray(t)?p6(t):new Uint16Array(t),s=24,i=dy(o,s/2,r[4]/2),a=r[5]===2?dy(o,(s+r[4])/2):S6(r,Math.ceil((s+r[4])/4));return new F6(r[0],r[1],r[2],r[3],i,a)},F6=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Wl],t=(t<<Iv)+(e&Uv),this.data[t];if(e<=65535)return t=this.index[Kx+(e-55296>>Wl)],t=(t<<Iv)+(e&Uv),this.data[t];if(e<this.highStart)return t=x6-z6+(e>>M1),t=this.index[t],t+=e>>Wl&C6,t=this.index[t],t=(t<<Iv)+(e&Uv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),cy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yf=0;yf<cy.length;yf++)I6[cy.charCodeAt(yf)]=yf;var U6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",uy=50,Q6=1,Vx=2,Gx=3,T6=4,L6=5,hy=7,Wx=8,fy=9,rl=10,X0=11,py=12,Y0=13,P6=14,fu=15,J0=16,_f=17,ru=18,k6=19,gy=20,Z0=21,nu=22,Qv=23,Od=24,di=25,pu=26,gu=27,Dd=28,O6=29,kl=30,D6=31,bf=32,xf=33,em=34,tm=35,rm=36,Xu=37,nm=38,Zf=39,ep=40,Tv=41,Xx=42,N6=43,M6=[9001,65288],Yx="!",Kr="",zf="",om=E6(U6),tA=[kl,rm],sm=[Q6,Vx,Gx,L6],Jx=[rl,Wx],vy=[gu,pu],H6=sm.concat(Jx),my=[nm,Zf,ep,em,tm],j6=[fu,Y0],R6=function(n,e){e===void 0&&(e="strict");var t=[],r=[],o=[];return n.forEach(function(s,i){var a=om.get(s);if(a>uy?(o.push(!0),a-=uy):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),t.push(J0);if(a===T6||a===X0){if(i===0)return r.push(i),t.push(kl);var A=t[i-1];return H6.indexOf(A)===-1?(r.push(r[i-1]),t.push(A)):(r.push(i),t.push(kl))}if(r.push(i),a===D6)return t.push(e==="strict"?Z0:Xu);if(a===Xx||a===O6)return t.push(kl);if(a===N6)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Xu):t.push(kl);t.push(a)}),[r,t,o]},Lv=function(n,e,t,r){var o=r[t];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var s=t;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==rl)break}if(o===rl)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==rl)break}if(a!==rl)break}return!1},wy=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===rl)t--;else return r}return 0},$6=function(n,e,t,r,o){if(t[r]===0)return Kr;var s=r-1;if(Array.isArray(o)&&o[s]===!0)return Kr;var i=s-1,a=s+1,A=e[s],d=i>=0?e[i]:0,c=e[a];if(A===Vx&&c===Gx)return Kr;if(sm.indexOf(A)!==-1)return Yx;if(sm.indexOf(c)!==-1||Jx.indexOf(c)!==-1)return Kr;if(wy(s,e)===Wx)return zf;if(om.get(n[s])===X0||(A===bf||A===xf)&&om.get(n[a])===X0||A===hy||c===hy||A===fy||[rl,Y0,fu].indexOf(A)===-1&&c===fy||[_f,ru,k6,Od,Dd].indexOf(c)!==-1||wy(s,e)===nu||Lv(Qv,nu,s,e)||Lv([_f,ru],Z0,s,e)||Lv(py,py,s,e))return Kr;if(A===rl)return zf;if(A===Qv||c===Qv)return Kr;if(c===J0||A===J0)return zf;if([Y0,fu,Z0].indexOf(c)!==-1||A===P6||d===rm&&j6.indexOf(A)!==-1||A===Dd&&c===rm||c===gy||tA.indexOf(c)!==-1&&A===di||tA.indexOf(A)!==-1&&c===di||A===gu&&[Xu,bf,xf].indexOf(c)!==-1||[Xu,bf,xf].indexOf(A)!==-1&&c===pu||tA.indexOf(A)!==-1&&vy.indexOf(c)!==-1||vy.indexOf(A)!==-1&&tA.indexOf(c)!==-1||[gu,pu].indexOf(A)!==-1&&(c===di||[nu,fu].indexOf(c)!==-1&&e[a+1]===di)||[nu,fu].indexOf(A)!==-1&&c===di||A===di&&[di,Dd,Od].indexOf(c)!==-1)return Kr;if([di,Dd,Od,_f,ru].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===di)return Kr;if([Dd,Od].indexOf(h)!==-1)u--;else break}if([gu,pu].indexOf(c)!==-1)for(var u=[_f,ru].indexOf(A)!==-1?i:s;u>=0;){var h=e[u];if(h===di)return Kr;if([Dd,Od].indexOf(h)!==-1)u--;else break}if(nm===A&&[nm,Zf,em,tm].indexOf(c)!==-1||[Zf,em].indexOf(A)!==-1&&[Zf,ep].indexOf(c)!==-1||[ep,tm].indexOf(A)!==-1&&c===ep||my.indexOf(A)!==-1&&[gy,pu].indexOf(c)!==-1||my.indexOf(c)!==-1&&A===gu||tA.indexOf(A)!==-1&&tA.indexOf(c)!==-1||A===Od&&tA.indexOf(c)!==-1||tA.concat(di).indexOf(A)!==-1&&c===nu&&M6.indexOf(n[a])===-1||tA.concat(di).indexOf(c)!==-1&&A===ru)return Kr;if(A===Tv&&c===Tv){for(var f=t[s],g=1;f>0&&(f--,e[f]===Tv);)g++;if(g%2!==0)return Kr}return A===bf&&c===xf?Kr:zf},q6=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=R6(n,e.lineBreak),r=t[0],o=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[di,kl,Xx].indexOf(a)!==-1?Xu:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,o,i]},K6=function(){function n(e,t,r,o){this.codePoints=e,this.required=t===Yx,this.start=r,this.end=o}return n.prototype.slice=function(){return go.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),V6=function(n,e){var t=xg(n),r=q6(t,e),o=r[0],s=r[1],i=r[2],a=t.length,A=0,d=0;return{next:function(){if(d>=a)return{done:!0,value:null};for(var c=Kr;d<a&&(c=$6(t,s,o,++d,i))===Kr;);if(c!==Kr||d===a){var u=new K6(t,c,A,d);return A=d,{value:u,done:!1}}return{done:!0,value:null}}}},G6=1,W6=2,uh=4,yy=8,Lp=10,_y=47,Eu=92,X6=9,Y6=32,Bf=34,ou=61,J6=35,Z6=36,eL=37,Cf=39,Sf=40,su=41,tL=95,qs=45,rL=33,nL=60,oL=62,sL=64,iL=91,aL=93,AL=61,lL=123,Ef=63,dL=125,by=124,cL=126,uL=128,xy=65533,Pv=42,$l=43,hL=44,fL=58,pL=59,Yu=46,gL=0,vL=8,mL=11,wL=14,yL=31,_L=127,ya=-1,Zx=48,ez=97,tz=101,bL=102,xL=117,zL=122,rz=65,nz=69,oz=70,BL=85,CL=90,ys=function(n){return n>=Zx&&n<=57},SL=function(n){return n>=55296&&n<=57343},Nd=function(n){return ys(n)||n>=rz&&n<=oz||n>=ez&&n<=bL},EL=function(n){return n>=ez&&n<=zL},FL=function(n){return n>=rz&&n<=CL},IL=function(n){return EL(n)||FL(n)},UL=function(n){return n>=uL},Ff=function(n){return n===Lp||n===X6||n===Y6},Pp=function(n){return IL(n)||UL(n)||n===tL},zy=function(n){return Pp(n)||ys(n)||n===qs},QL=function(n){return n>=gL&&n<=vL||n===mL||n>=wL&&n<=yL||n===_L},JA=function(n,e){return n!==Eu?!1:e!==Lp},If=function(n,e,t){return n===qs?Pp(e)||JA(e,t):Pp(n)?!0:!!(n===Eu&&JA(n,e))},kv=function(n,e,t){return n===$l||n===qs?ys(e)?!0:e===Yu&&ys(t):ys(n===Yu?e:n)},TL=function(n){var e=0,t=1;(n[e]===$l||n[e]===qs)&&(n[e]===qs&&(t=-1),e++);for(var r=[];ys(n[e]);)r.push(n[e++]);var o=r.length?parseInt(go.apply(void 0,r),10):0;n[e]===Yu&&e++;for(var s=[];ys(n[e]);)s.push(n[e++]);var i=s.length,a=i?parseInt(go.apply(void 0,s),10):0;(n[e]===nz||n[e]===tz)&&e++;var A=1;(n[e]===$l||n[e]===qs)&&(n[e]===qs&&(A=-1),e++);for(var d=[];ys(n[e]);)d.push(n[e++]);var c=d.length?parseInt(go.apply(void 0,d),10):0;return t*(o+a*Math.pow(10,-i))*Math.pow(10,A*c)},LL={type:2},PL={type:3},kL={type:4},OL={type:13},DL={type:8},NL={type:21},ML={type:9},HL={type:10},jL={type:11},RL={type:12},$L={type:14},Uf={type:23},qL={type:1},KL={type:25},VL={type:24},GL={type:26},WL={type:27},XL={type:28},YL={type:29},JL={type:31},im={type:32},sz=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(xg(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==im;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Bf:return this.consumeStringToken(Bf);case J6:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(zy(t)||JA(r,o)){var s=If(t,r,o)?W6:G6,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Z6:if(this.peekCodePoint(0)===ou)return this.consumeCodePoint(),OL;break;case Cf:return this.consumeStringToken(Cf);case Sf:return LL;case su:return PL;case Pv:if(this.peekCodePoint(0)===ou)return this.consumeCodePoint(),$L;break;case $l:if(kv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case hL:return kL;case qs:var a=e,A=this.peekCodePoint(0),d=this.peekCodePoint(1);if(kv(a,A,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(If(a,A,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===qs&&d===oL)return this.consumeCodePoint(),this.consumeCodePoint(),VL;break;case Yu:if(kv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _y:if(this.peekCodePoint(0)===Pv)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Pv&&(c=this.consumeCodePoint(),c===_y))return this.consumeToken();if(c===ya)return this.consumeToken()}break;case fL:return GL;case pL:return WL;case nL:if(this.peekCodePoint(0)===rL&&this.peekCodePoint(1)===qs&&this.peekCodePoint(2)===qs)return this.consumeCodePoint(),this.consumeCodePoint(),KL;break;case sL:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(If(u,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case iL:return XL;case Eu:if(JA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case aL:return YL;case AL:if(this.peekCodePoint(0)===ou)return this.consumeCodePoint(),DL;break;case lL:return jL;case dL:return RL;case xL:case BL:var g=this.peekCodePoint(0),w=this.peekCodePoint(1);return g===$l&&(Nd(w)||w===Ef)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case by:if(this.peekCodePoint(0)===ou)return this.consumeCodePoint(),ML;if(this.peekCodePoint(0)===by)return this.consumeCodePoint(),NL;break;case cL:if(this.peekCodePoint(0)===ou)return this.consumeCodePoint(),HL;break;case ya:return im}return Ff(e)?(this.consumeWhiteSpace(),JL):ys(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Pp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:go(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Nd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Ef&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(go.apply(void 0,e.map(function(A){return A===Ef?Zx:A})),16),s=parseInt(go.apply(void 0,e.map(function(A){return A===Ef?oz:A})),16);return{type:30,start:o,end:s}}var i=parseInt(go.apply(void 0,e),16);if(this.peekCodePoint(0)===qs&&Nd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];Nd(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(go.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Sf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Sf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ya)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Cf||t===Bf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ya||this.peekCodePoint(0)===su)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Uf)}for(;;){var o=this.consumeCodePoint();if(o===ya||o===su)return{type:22,value:go.apply(void 0,e)};if(Ff(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ya||this.peekCodePoint(0)===su?(this.consumeCodePoint(),{type:22,value:go.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Uf);if(o===Bf||o===Cf||o===Sf||QL(o))return this.consumeBadUrlRemnants(),Uf;if(o===Eu)if(JA(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Uf;else e.push(o)}},n.prototype.consumeWhiteSpace=function(){for(;Ff(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===su||e===ya)return;JA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var o=Math.min(t,e);r+=go.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var o=this._value[r];if(o===ya||o===void 0||o===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(o===Lp)return this._value.splice(0,r),qL;if(o===Eu){var s=this._value[r+1];s!==ya&&s!==void 0&&(s===Lp?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):JA(o,s)&&(t+=this.consumeStringSlice(r),t+=go(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=uh,r=this.peekCodePoint(0);for((r===$l||r===qs)&&e.push(this.consumeCodePoint());ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===Yu&&ys(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=yy;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===nz||r===tz)&&((o===$l||o===qs)&&ys(s)||ys(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=yy;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[TL(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],o=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(If(o,s,i)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return o===eL?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Nd(e)){for(var t=go(e);Nd(this.peekCodePoint(0))&&t.length<6;)t+=go(this.consumeCodePoint());Ff(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||SL(r)||r>1114111?xy:r}return e===ya?xy:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(zy(t))e+=go(t);else if(JA(t,this.peekCodePoint(0)))e+=go(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),iz=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new sz;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||eP(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?im:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),wl=function(n){return n.type===15},So=function(n){return n.type===17},Yr=function(n){return n.type===20},ZL=function(n){return n.type===0},am=function(n,e){return Yr(n)&&n.value===e},az=function(n){return n.type!==31},is=function(n){return n.type!==31&&n.type!==4},Na=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},eP=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},fl=function(n){return n.type===17||n.type===15},jn=function(n){return n.type===16||fl(n)},Az=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},os={type:17,number:0,flags:uh},H1={type:16,number:50,flags:uh},nl={type:16,number:100,flags:uh},vu=function(n,e,t){var r=n[0],o=n[1];return[Cn(r,e),Cn(typeof o<"u"?o:r,t)]},Cn=function(n,e){if(n.type===16)return n.number/100*e;if(wl(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},lz="deg",dz="grad",cz="rad",uz="turn",zg={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case lz:return Math.PI*e.number/180;case dz:return Math.PI/200*e.number;case cz:return e.number;case uz:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},hz=function(n){return n.type===15&&(n.unit===lz||n.unit===dz||n.unit===cz||n.unit===uz)},fz=function(n){var e=n.filter(Yr).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[os,os];case"to top":case"bottom":return Ti(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[os,nl];case"to right":case"left":return Ti(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[nl,nl];case"to bottom":case"top":return Ti(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[nl,os];case"to left":case"right":return Ti(270)}return 0},Ti=function(n){return Math.PI*n/180},al=function(n){return(255&n)===0},qo=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,o=255&n>>24;return e<255?"rgba(".concat(o,",").concat(r,",").concat(t,",").concat(e/255,")"):"rgb(".concat(o,",").concat(r,",").concat(t,")")},Oa=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},kp=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},ud=function(n){return(n[0].type===20?n[0].value:"unknown")==="from"},lo=function(n,e,t){return Math.min(Math.max(n,e),t)},Js=function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[3]*e[0]+n[4]*e[1]+n[5]*e[2],n[6]*e[0]+n[7]*e[1]+n[8]*e[2]]},tP=function(n){return Oa(lo(Math.round(n[0]*255),0,255),lo(Math.round(n[1]*255),0,255),lo(Math.round(n[2]*255),0,255),lo(n[3],0,1))},j1=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],s=hd([e,t,r]);return Oa(lo(Math.round(s[0]*255),0,255),lo(Math.round(s[1]*255),0,255),lo(Math.round(s[2]*255),0,255),o)},hh=function(n){var e=yl([n[0],n[1],n[2]]);return j1([e[0],e[1],e[2],n[3]])},rP=function(n,e){if(ud(e.filter(is)))throw new Error("Relative color not supported for lab()");var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=hd(yl(Eg([r,o,s])));return Oa(lo(Math.round(a[0]*255),0,255),lo(Math.round(a[1]*255),0,255),lo(Math.round(a[2]*255),0,255),i)},nP=function(n,e){if(ud(e.filter(is)))throw new Error("Relative color not supported for oklab()");var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=hd(yl(Sg([r,o,s])));return Oa(lo(Math.round(a[0]*255),0,255),lo(Math.round(a[1]*255),0,255),lo(Math.round(a[2]*255),0,255),i)},oP=function(n,e){if(ud(e.filter(is)))throw new Error("Relative color not supported for oklch()");var t=vz(e),r=t[0],o=t[1],s=t[2],i=t[3],a=hd(yl(Sg(Cg([r,o,s]))));return Oa(lo(Math.round(a[0]*255),0,255),lo(Math.round(a[1]*255),0,255),lo(Math.round(a[2]*255),0,255),i)},sP=function(n,e){if(ud(e.filter(is)))throw new Error("Relative color not supported for lch()");var t=gz(e),r=t[0],o=t[1],s=t[2],i=t[3],a=hd(yl(Eg(Cg([r,o,s]))));return Oa(lo(Math.round(a[0]*255),0,255),lo(Math.round(a[1]*255),0,255),lo(Math.round(a[2]*255),0,255),i)},pz=function(n,e){var t=e.filter(is),r=t[0],o=t[1],s=t[2],i=t[3],a=(r.type===17?Ti(r.number):zg.parse(n,r))/(Math.PI*2),A=jn(o)?o.number/100:0,d=jn(s)?s.number/100:0,c=typeof i<"u"&&jn(i)?Cn(i,1):1;return[a,A,d,c]},By=function(n,e){if(ud(e))throw new Error("Relative color not supported for hsl()");var t=pz(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=wz([r,o,s]);return Oa(a[0]*255,a[1]*255,a[2]*255,o===0?1:i)},gz=function(n){var e=n.filter(is),t=jn(e[0])?e[0].number:0,r=jn(e[1])?e[1].number:0,o=So(e[2])||wl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&jn(e[4])?Cn(e[4],1):1;return[t,r,o,s]},Bg=function(n){var e=n.filter(is),t=e[0].type===16?e[0].number/100:So(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:So(e[1])?e[1].number:0,o=So(e[2])||wl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&jn(e[4])?Cn(e[4],1):1;return[t,r,o,s]},vz=function(n){var e=n.filter(is),t=e[0].type===16?e[0].number/100:So(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:So(e[1])?e[1].number:0,o=So(e[2])||wl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&jn(e[4])?Cn(e[4],1):1;return[t,r,o,s]},mz=function(n){return Js([1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371],n)},R1=function(n){return Js([.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124],n)},Ov=function(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n},wz=function(n){var e=n[0],t=n[1],r=n[2];if(t===0)return[r*255,r*255,r*255];var o=r<=.5?r*(t+1):r+t-r*t,s=r*2-o,i=Ov(s,o,e+1/3),a=Ov(s,o,e),A=Ov(s,o,e-1/3);return[i,a,A]},Cg=function(n){var e=n[0],t=n[1],r=n[2];return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},Sg=function(n){var e=Js([1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092],n),t=e.map(function(r){return Math.pow(r,3)});return Js([1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],t)},Eg=function(n){var e=(n[0]+16)/116,t=n[1]/500+e,r=e-n[2]/200,o=24389/27,s=24/116,i=[(t>s?Math.pow(t,3):(116*t-16)/o)*.3457/.3585,n[0]>8?Math.pow(e,3):n[0]/o,(r>s?Math.pow(r,3):(116*r-16)/o)*(1-.3457-.3585)/.3585];return R1([i[0],i[1],i[2]])},iP=function(n,e){var t=e.filter(is);if(t.length===3){var r=t.map(kp),o=r[0],s=r[1],i=r[2],a=lm([o/255,s/255,i/255]),A=Am([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,1]}if(t.length===4){var h=t.map(kp),o=h[0],s=h[1],i=h[2],f=h[3],a=lm([o/255,s/255,i/255]),g=Am([a[0],a[1],a[2]]),d=g[0],c=g[1],u=g[2];return[d,c,u,f]}return[0,0,0,1]},aP=function(n,e){var t=pz(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=lm(wz([r,o,s])),A=Am([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,i]},AP=function(n,e){var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Eg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},lP=function(n,e){var t=gz(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Eg(Cg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},dP=function(n,e){var t=vz(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Sg(Cg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},cP=function(n,e){var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Sg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},uP=function(n){return R1([n[0],n[1],n[2]])},Cy=function(n){return n},hP=function(n){var e=mz([n[0],n[2],n[3]]),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},Sy=function(n){return hh([n[0],n[1],n[2],n[3]])},fP=function(n){var e=uP([n[0],n[1],n[2]]);return hh([e[0],e[1],e[2],n[3]])},yl=function(n){return Js([3.2409699419045226,-1.537383177570094,-.4986107602930034,-.9692436362808796,1.8759675015077202,.04155505740717559,.05563007969699366,-.20397695888897652,1.0569715142428786],n)},Am=function(n){return Js([.41239079926595934,.357584339383878,.1804807884018343,.21263900587151027,.715168678767756,.07219231536073371,.01933081871559182,.11919477979462598,.9505321522496607],n)},hd=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r>.0031308?t*(1.055*Math.pow(r,1/2.4)-.055):12.92*e})},lm=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r<=.04045?e/12.92:t*Math.pow((r+.055)/1.055,2.4)})},pP=function(n){var e=hd(yl([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},gP=function(n){var e=yl([n[0],n[1],n[2]]),t=e[0],r=e[1],o=e[2];return[lo(Math.round(t*255),0,255),lo(Math.round(r*255),0,255),lo(Math.round(o*255),0,255),n[3]]},vP=function(n){return Js([.4865709486482162,.26566769316909306,.1982172852343625,.2289745640697488,.6917385218365064,.079286914093745,0,.04511338185890264,1.043944368900976],n)},mP=function(n){return Js([2.493496911941425,-.9313836179191239,-.40271078445071684,-.8294889695615747,1.7626640603183463,.023624685841943577,.03584583024378447,-.07617238926804182,.9568845240076872],n)},wP=function(n){return n.map(function(e){var t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*Math.pow((e+.055)/1.055,2.4)||0})},yP=function(n){return hd(n)},_P=function(n){var e=wP([n[0],n[1],n[2]]);return vP([e[0],e[1],e[2]])},bP=function(n){var e=yP(mP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},xP=function(n){var e=_P([n[0],n[1],n[2]]);return hh([e[0],e[1],e[2],n[3]])},zP=function(n){return Js([2.0415879038107465,-.5650069742788596,-.34473135077832956,-.9692436362808795,1.8759675015077202,.04155505740717557,.013444280632031142,-.11836239223101838,1.0151749943912054],n)},BP=function(n){return Js([.5766690429101305,.1855582379065463,.1882286462349947,.29734497525053605,.6273635662554661,.0752914584939978,.02703136138641234,.07068885253582723,.9913375368376388],n)},CP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,2.19921875)});return[e[0],e[1],e[2]]},SP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,.4547069271758437)});return[e[0],e[1],e[2]]},EP=function(n){var e=SP(zP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},FP=function(n){var e=yl(BP(CP([n[0],n[1],n[2]])));return j1([e[0],e[1],e[2],n[3]])},IP=function(n){return Js([.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602],n)},UP=function(n){return Js([1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452],n)},QP=function(n){return n.map(function(e){return e<16/512?e/16:Math.pow(e,1.8)})},TP=function(n){return n.map(function(e){return e>1/512?Math.pow(e,1/1.8):e*16})},LP=function(n){var e=QP([n[0],n[1],n[2]]);return R1(IP([e[0],e[1],e[2]]))},PP=function(n){var e=TP(UP(mz([n[0],n[1],n[2]]))),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},kP=function(n){var e=LP([n[0],n[1],n[2]]);return hh([e[0],e[1],e[2],n[3]])},Op=1.09929682680944,yz=.018053968510807,OP=function(n){return n.map(function(e){return e<yz*4.5?e/4.5:Math.pow((e+Op-1)/Op,1/.45)})},DP=function(n){return n.map(function(e){return e>=yz?Op*Math.pow(e,.45)-(Op-1):4.5*e})},NP=function(n){return Js([.6369580483012914,.14461690358620832,.1688809751641721,.2627002120112671,.6779980715188708,.05930171646986196,0,.028072693049087428,1.060985057710791],n)},MP=function(n){return Js([1.716651187971268,-.355670783776392,-.25336628137366,-.666684351832489,1.616481236634939,.0157685458139111,.017639857445311,-.042770613257809,.942103121235474],n)},HP=function(n){var e=OP([n[0],n[1],n[2]]);return NP([e[0],e[1],e[2]])},jP=function(n){var e=DP(MP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},RP=function(n){var e=HP([n[0],n[1],n[2]]);return hh([e[0],e[1],e[2],n[3]])},Al={name:"color",parse:function(n,e){if(e.type===18){var t=VP[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'.concat(e.name,'"'));return t(n,e.values)}if(e.type===5){var r=_z(e),o=r[0],s=r[1],i=r[2],a=r[3];return Oa(o,s,i,a)}if(e.type===20){var A=Ia[e.value.toUpperCase()];if(typeof A<"u")return A}return Ia.TRANSPARENT}},_z=function(n){if(n.value.length===3){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),1]}if(n.value.length===4){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3),o=n.value.substring(3,4);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),parseInt(o+o,16)/255]}if(n.value.length===6){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),1]}if(n.value.length===8){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6),o=n.value.substring(6,8);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),parseInt(o,16)/255]}return[0,0,0,1]},Ey=function(n,e){var t=e.filter(is);if(ud(t))throw new Error("Relative color not supported for rgb()");if(t.length===3){var r=t.map(kp),o=r[0],s=r[1],i=r[2];return Oa(o,s,i,1)}if(t.length===4){var a=t.map(kp),o=a[0],s=a[1],i=a[2],A=a[3];return Oa(o,s,i,A)}return 0},$P=function(n,e){var t=e.filter(is),r=t[0].type===20?t[0].value:"unknown",o=!ud(t);if(o){var s=r,i=Fy[s];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(s,'" for color() function'));var a=So(t[1])?t[1].number:0,A=So(t[2])?t[2].number:0,d=So(t[3])?t[3].number:0,c=t.length>4&&t[4].type===6&&t[4].value==="/"&&So(t[5])?t[5].number:1;return i([a,A,d,c])}else{var u=function(ge,pe){if(So(pe))return pe.number;var xe=function(B){return B==="r"||B==="x"?0:B==="g"||B==="y"?1:2};if(Yr(pe)){var te=xe(pe.value);return ge[te]}var se=function(B){for(var F=B.filter(is),E="(",T=0,P=F;T<P.length;T++){var O=P[T];E+=O.type===18&&O.name==="calc"?se(O.values):So(O)?O.number:O.type===6||Yr(O)?O.value:""}return E+=")",E};if(pe.type===18){var oe=pe.values.filter(is);if(pe.name==="calc"){var me=se(oe).replace(/r|x/,ge[0].toString()).replace(/g|y/,ge[1].toString()).replace(/b|z/,ge[2].toString());return new Function("return "+me)()}}return null},h=t[1].type===18?t[1].name:Yr(t[1])||t[1].type===5?"rgb":"unknown",f=Yr(t[2])?t[2].value:"unknown",g=t[1].type===18?t[1].values:Yr(t[1])?[t[1]]:[];if(Yr(t[1])){var w=Ia[t[1].value.toUpperCase()];if(typeof w>"u")throw new Error("Attempting to use unknown color in relative color 'from'");var y=uc(n,t[1].value),x=255&y,C=255&y>>8,I=255&y>>16,M=255&y>>24;g=[{type:17,number:M,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}else if(t[1].type===5){var L=_z(t[1]),M=L[0],I=L[1],C=L[2],x=L[3];g=[{type:17,number:M,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}if(g.length===0)throw new Error("Attempting to use unknown color in relative color 'from'");if(f==="unknown")throw new Error("Attempting to use unknown colorspace in relative color 'to'");var ee=qP[h],W=KP[f],R=Fy[f];if(typeof ee>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(h,'" for color() function'));if(typeof W>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(f,'" for color() function'));var Z=ee(n,g),Be=W(Z),a=u(Be,t[3]),A=u(Be,t[4]),d=u(Be,t[5]),c=t.length>6&&t[6].type===6&&t[6].value==="/"&&So(t[7])?t[7].number:1;if(a===null||A===null||d===null)throw new Error("Invalid relative color in color() function");return R([a,A,d,c])}},Fy={srgb:tP,"srgb-linear":j1,"display-p3":xP,"a98-rgb":FP,"prophoto-rgb":kP,xyz:Sy,"xyz-d50":fP,"xyz-d65":Sy,rec2020:RP},qP={rgb:iP,hsl:aP,lab:AP,lch:lP,oklab:cP,oklch:dP},KP={srgb:pP,"srgb-linear":gP,"display-p3":bP,"a98-rgb":EP,"prophoto-rgb":PP,xyz:Cy,"xyz-d50":hP,"xyz-d65":Cy,rec2020:jP},VP={hsl:By,hsla:By,rgb:Ey,rgba:Ey,lch:sP,oklch:oP,oklab:nP,lab:rP,color:$P},uc=function(n,e){return Al.parse(n,iz.create(e).parseComponentValue())},Ia={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},GP={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Yr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WP={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fg=function(n,e){var t=Al.parse(n,e[0]),r=e[1];return r&&jn(r)?{color:t,stop:r}:{color:t,stop:null}},Iy=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=os),r.stop===null&&(r.stop=nl);for(var o=[],s=0,i=0;i<n.length;i++){var a=n[i].stop;if(a!==null){var A=Cn(a,e);A>s?o.push(A):o.push(s),s=A}else o.push(null)}for(var d=null,i=0;i<o.length;i++){var c=o[i];if(c===null)d===null&&(d=i);else if(d!==null){for(var u=i-d,h=o[d-1],f=(c-h)/(u+1),g=1;g<=u;g++)o[d+g-1]=f*g;d=null}}return n.map(function(w,y){var x=w.color;return{color:x,stop:Math.max(Math.min(1,o[y]/e),0)}})},XP=function(n,e,t){var r=e/2,o=t/2,s=Cn(n[0],e)-r,i=o-Cn(n[1],t);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},YP=function(n,e,t){var r=typeof n=="number"?n:XP(n,e,t),o=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,i=t/2,a=o/2,A=Math.sin(r-Math.PI/2)*a,d=Math.cos(r-Math.PI/2)*a;return[o,s-d,s+d,i-A,i+A]},qi=function(n,e){return Math.sqrt(n*n+e*e)},Uy=function(n,e,t,r,o){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(i,a){var A=a[0],d=a[1],c=qi(t-A,r-d);return(o?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:a,optimumDistance:c}:i},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},JP=function(n,e,t,r,o){var s=0,i=0;switch(n.size){case 0:n.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(t),Math.abs(t-o)));break;case 2:if(n.shape===0)s=i=Math.min(qi(e,t),qi(e,t-o),qi(e-r,t),qi(e-r,t-o));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-o))/Math.min(Math.abs(e),Math.abs(e-r)),A=Uy(r,o,e,t,!0),d=A[0],c=A[1];s=qi(d-e,(c-t)/a),i=a*s}break;case 1:n.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(t),Math.abs(t-o)));break;case 3:if(n.shape===0)s=i=Math.max(qi(e,t),qi(e,t-o),qi(e-r,t),qi(e-r,t-o));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-o))/Math.max(Math.abs(e),Math.abs(e-r)),u=Uy(r,o,e,t,!1),d=u[0],c=u[1];s=qi(d-e,(c-t)/a),i=a*s}break}return Array.isArray(n.size)&&(s=Cn(n.size[0],r),i=n.size.length===2?Cn(n.size[1],o):s),[s,i]},ZP=function(n,e){var t=Ti(180),r=[];return Na(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&i.value==="to"){t=fz(o);return}else if(hz(i)){t=zg.parse(n,i);return}}var a=Fg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},Qf=function(n,e){var t=Ti(180),r=[];return Na(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=fz(o);return}else if(hz(i)){t=(zg.parse(n,i)+Ti(270))%Ti(360);return}}var a=Fg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},ek=function(n,e){var t=Ti(180),r=[],o=1,s=0,i=3,a=[];return Na(e).forEach(function(A,d){var c=A[0];if(d===0){if(Yr(c)&&c.value==="linear"){o=1;return}else if(Yr(c)&&c.value==="radial"){o=2;return}}if(c.type===18){if(c.name==="from"){var u=Al.parse(n,c.values[0]);r.push({stop:os,color:u})}else if(c.name==="to"){var u=Al.parse(n,c.values[0]);r.push({stop:nl,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(is);if(h.length===2){var u=Al.parse(n,h[1]),f=h[0];So(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:u})}}}}),o===1?{angle:(t+Ti(180))%Ti(360),stops:r,type:o}:{size:i,shape:s,stops:r,position:a,type:o}},bz="closest-side",xz="farthest-side",zz="closest-corner",Bz="farthest-corner",Cz="circle",Sz="ellipse",Ez="cover",Fz="contain",tk=function(n,e){var t=0,r=3,o=[],s=[];return Na(e).forEach(function(i,a){var A=!0;if(a===0){var d=!1;A=i.reduce(function(u,h){if(d)if(Yr(h))switch(h.value){case"center":return s.push(H1),u;case"top":case"left":return s.push(os),u;case"right":case"bottom":return s.push(nl),u}else(jn(h)||fl(h))&&s.push(h);else if(Yr(h))switch(h.value){case Cz:return t=0,!1;case Sz:return t=1,!1;case"at":return d=!0,!1;case bz:return r=0,!1;case Ez:case xz:return r=1,!1;case Fz:case zz:return r=2,!1;case Bz:return r=3,!1}else if(fl(h)||jn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},A)}if(A){var c=Fg(n,i);o.push(c)}}),{size:r,shape:t,stops:o,position:s,type:2}},Tf=function(n,e){var t=0,r=3,o=[],s=[];return Na(e).forEach(function(i,a){var A=!0;if(a===0?A=i.reduce(function(c,u){if(Yr(u))switch(u.value){case"center":return s.push(H1),!1;case"top":case"left":return s.push(os),!1;case"right":case"bottom":return s.push(nl),!1}else if(jn(u)||fl(u))return s.push(u),!1;return c},A):a===1&&(A=i.reduce(function(c,u){if(Yr(u))switch(u.value){case Cz:return t=0,!1;case Sz:return t=1,!1;case Fz:case bz:return r=0,!1;case xz:return r=1,!1;case zz:return r=2,!1;case Ez:case Bz:return r=3,!1}else if(fl(u)||jn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var d=Fg(n,i);o.push(d)}}),{size:r,shape:t,stops:o,position:s,type:2}},rk=function(n){return n.type===1},nk=function(n){return n.type===2},$1={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=Iz[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'.concat(e.name,'"'));return r(n,e.values)}throw new Error("Unsupported image type ".concat(e.type))}};function ok(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Iz[n.name])}var Iz={"linear-gradient":ZP,"-moz-linear-gradient":Qf,"-ms-linear-gradient":Qf,"-o-linear-gradient":Qf,"-webkit-linear-gradient":Qf,"radial-gradient":tk,"-moz-radial-gradient":Tf,"-ms-radial-gradient":Tf,"-o-radial-gradient":Tf,"-webkit-radial-gradient":Tf,"-webkit-gradient":ek},sk={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return is(r)&&ok(r)}).map(function(r){return $1.parse(n,r)})}},ik={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Yr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ak={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Na(e).map(function(t){return t.filter(jn)}).map(Az)}},Ak={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Na(e).map(function(t){return t.filter(Yr).map(function(r){return r.value}).join(" ")}).map(lk)}},lk=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hc;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(hc||(hc={}));var dk={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Na(e).map(function(t){return t.filter(ck)})}},ck=function(n){return Yr(n)||jn(n)},Ig=function(n){return{name:"border-".concat(n,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},uk=Ig("top"),hk=Ig("right"),fk=Ig("bottom"),pk=Ig("left"),Ug=function(n){return{name:"border-radius-".concat(n),initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Az(t.filter(jn))}}},gk=Ug("top-left"),vk=Ug("top-right"),mk=Ug("bottom-right"),wk=Ug("bottom-left"),Qg=function(n){return{name:"border-".concat(n,"-style"),initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},yk=Qg("top"),_k=Qg("right"),bk=Qg("bottom"),xk=Qg("left"),Tg=function(n){return{name:"border-".concat(n,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e,t){return wl(t)?t.number:0}}},zk=Tg("top"),Bk=Tg("right"),Ck=Tg("bottom"),Sk=Tg("left"),Ek={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Ik={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Yr).reduce(function(t,r){return t|Uk(r.value)},0)}},Uk=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Qk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Tk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Dp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Dp||(Dp={}));var Lk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Dp.STRICT;case"normal":default:return Dp.NORMAL}}},Pk={name:"line-height",initialValue:"normal",prefix:!1,type:4},Qy=function(n,e){return Yr(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:jn(n)?Cn(n,e):e},kk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:$1.parse(n,e)}},Ok={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},dm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Lg=function(n){return{name:"margin-".concat(n),initialValue:"0",prefix:!1,type:4}},Dk=Lg("top"),Nk=Lg("right"),Mk=Lg("bottom"),Hk=Lg("left"),jk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Yr).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Rk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pg=function(n){return{name:"padding-".concat(n),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},$k=Pg("top"),qk=Pg("right"),Kk=Pg("bottom"),Vk=Pg("left"),Gk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Wk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&am(e[0],"none")?[]:Na(e).map(function(t){for(var r={color:Ia.TRANSPARENT,offsetX:os,offsetY:os,blur:os},o=0,s=0;s<t.length;s++){var i=t[s];fl(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:r.blur=i,o++):r.color=Al.parse(n,i)}return r})}},Yk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Jk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=tO[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return t(e.values)}return null}},Zk=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},eO=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var o=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,o,s,i,a]:null},tO={matrix:Zk,matrix3d:eO},Ty={type:16,number:50,flags:uh},rO=[Ty,Ty],nO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(jn);return t.length!==2?rO:[t[0],t[1]]}},oO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Fu;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Fu||(Fu={}));var sO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Fu.BREAK_ALL;case"keep-all":return Fu.KEEP_ALL;case"normal":default:return Fu.NORMAL}}},iO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(So(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Uz={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},aO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return So(e)?e.number:1}},AO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Yr).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},dO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:t.push(o.value);break;case 17:t.push(o.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'".concat(o,"'")})}},cO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},uO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(So(e))return e.number;if(Yr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},hO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Yr).map(function(t){return t.value})}},fO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},To=function(n,e){return(n&e)!==0},pO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},gO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],o=e.filter(az),s=0;s<o.length;s++){var i=o[s],a=o[s+1];if(i.type===20){var A=a&&So(a)?a.number:1;r.push({counter:i.value,increment:A})}}return r}},vO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(az),o=0;o<r.length;o++){var s=r[o],i=r[o+1];if(Yr(s)&&s.value!=="none"){var a=i&&So(i)?i.number:0;t.push({counter:s.value,reset:a})}}return t}},mO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(wl).map(function(t){return Uz.parse(n,t)})}},wO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],o=e.filter(ZL);if(o.length%2!==0)return null;for(var s=0;s<o.length;s+=2){var i=o[s].value,a=o[s+1].value;r.push({open:i,close:a})}return r}},Ly=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},yO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&am(e[0],"none")?[]:Na(e).map(function(t){for(var r={color:255,offsetX:os,offsetY:os,blur:os,spread:os,inset:!1},o=0,s=0;s<t.length;s++){var i=t[s];am(i,"inset")?r.inset=!0:fl(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:o===2?r.blur=i:r.spread=i,o++):r.color=Al.parse(n,i)}return r})}},_O={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Yr).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},bO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},xO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return wl(e)?e.number:0}},zO={name:"objectFit",initialValue:"fill",prefix:!1,type:1,parse:function(n,e){return e.filter(Yr).reduce(function(t,r){return t|BO(r.value)},0)}},BO=function(n){switch(n){case"contain":return 2;case"cover":return 4;case"none":return 8;case"scale-down":return 16}return 0},CO=function(){function n(e,t){var r,o;this.animationDuration=sr(e,mO,t.animationDuration),this.backgroundClip=sr(e,GP,t.backgroundClip),this.backgroundColor=sr(e,WP,t.backgroundColor),this.backgroundImage=sr(e,sk,t.backgroundImage),this.backgroundOrigin=sr(e,ik,t.backgroundOrigin),this.backgroundPosition=sr(e,ak,t.backgroundPosition),this.backgroundRepeat=sr(e,Ak,t.backgroundRepeat),this.backgroundSize=sr(e,dk,t.backgroundSize),this.borderTopColor=sr(e,uk,t.borderTopColor),this.borderRightColor=sr(e,hk,t.borderRightColor),this.borderBottomColor=sr(e,fk,t.borderBottomColor),this.borderLeftColor=sr(e,pk,t.borderLeftColor),this.borderTopLeftRadius=sr(e,gk,t.borderTopLeftRadius),this.borderTopRightRadius=sr(e,vk,t.borderTopRightRadius),this.borderBottomRightRadius=sr(e,mk,t.borderBottomRightRadius),this.borderBottomLeftRadius=sr(e,wk,t.borderBottomLeftRadius),this.borderTopStyle=sr(e,yk,t.borderTopStyle),this.borderRightStyle=sr(e,_k,t.borderRightStyle),this.borderBottomStyle=sr(e,bk,t.borderBottomStyle),this.borderLeftStyle=sr(e,xk,t.borderLeftStyle),this.borderTopWidth=sr(e,zk,t.borderTopWidth),this.borderRightWidth=sr(e,Bk,t.borderRightWidth),this.borderBottomWidth=sr(e,Ck,t.borderBottomWidth),this.borderLeftWidth=sr(e,Sk,t.borderLeftWidth),this.boxShadow=sr(e,yO,t.boxShadow),this.color=sr(e,Ek,t.color),this.direction=sr(e,Fk,t.direction),this.display=sr(e,Ik,t.display),this.float=sr(e,Qk,t.cssFloat),this.fontFamily=sr(e,dO,t.fontFamily),this.fontSize=sr(e,cO,t.fontSize),this.fontStyle=sr(e,fO,t.fontStyle),this.fontVariant=sr(e,hO,t.fontVariant),this.fontWeight=sr(e,uO,t.fontWeight),this.letterSpacing=sr(e,Tk,t.letterSpacing),this.lineBreak=sr(e,Lk,t.lineBreak),this.lineHeight=sr(e,Pk,t.lineHeight),this.listStyleImage=sr(e,kk,t.listStyleImage),this.listStylePosition=sr(e,Ok,t.listStylePosition),this.listStyleType=sr(e,dm,t.listStyleType),this.marginTop=sr(e,Dk,t.marginTop),this.marginRight=sr(e,Nk,t.marginRight),this.marginBottom=sr(e,Mk,t.marginBottom),this.marginLeft=sr(e,Hk,t.marginLeft),this.opacity=sr(e,aO,t.opacity);var s=sr(e,jk,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sr(e,Rk,t.overflowWrap),this.paddingTop=sr(e,$k,t.paddingTop),this.paddingRight=sr(e,qk,t.paddingRight),this.paddingBottom=sr(e,Kk,t.paddingBottom),this.paddingLeft=sr(e,Vk,t.paddingLeft),this.paintOrder=sr(e,_O,t.paintOrder),this.position=sr(e,Wk,t.position),this.textAlign=sr(e,Gk,t.textAlign),this.textDecorationColor=sr(e,AO,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=sr(e,lO,(o=t.textDecorationLine)!==null&&o!==void 0?o:t.textDecoration),this.textShadow=sr(e,Xk,t.textShadow),this.textTransform=sr(e,Yk,t.textTransform),this.transform=sr(e,Jk,t.transform),this.transformOrigin=sr(e,nO,t.transformOrigin),this.visibility=sr(e,oO,t.visibility),this.webkitTextStrokeColor=sr(e,bO,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=sr(e,xO,t.webkitTextStrokeWidth),this.wordBreak=sr(e,sO,t.wordBreak),this.zIndex=sr(e,iO,t.zIndex),this.objectFit=sr(e,zO,t.objectFit)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return al(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return To(this.display,4)||To(this.display,33554432)||To(this.display,268435456)||To(this.display,536870912)||To(this.display,67108864)||To(this.display,134217728)},n}(),SO=function(){function n(e,t){this.content=sr(e,pO,t.content),this.quotes=sr(e,wO,t.quotes)}return n}(),Py=function(){function n(e,t){this.counterIncrement=sr(e,gO,t.counterIncrement),this.counterReset=sr(e,vO,t.counterReset)}return n}(),sr=function(n,e,t){var r=new sz,o=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(o);var s=new iz(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(n,Yr(i)?i.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return zg.parse(n,s.parseComponentValue());case"color":return Al.parse(n,s.parseComponentValue());case"image":return $1.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return fl(a)?a:os;case"length-percentage":var A=s.parseComponentValue();return jn(A)?A:os;case"time":return Uz.parse(n,s.parseComponentValue())}break}},EO="data-html2canvas-debug",FO=function(n){var e=n.getAttribute(EO);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},cm=function(n,e){var t=FO(n);return t===1||e===t},Ma=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,cm(t,3))debugger;this.styles=new CO(e,window.getComputedStyle(t,null)),fm(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=bg(this.context,t),cm(t,4)&&(this.flags|=16)}return n}(),IO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ky="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lf=0;Lf<ky.length;Lf++)mu[ky.charCodeAt(Lf)]=Lf;var UO=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=mu[n.charCodeAt(r)],i=mu[n.charCodeAt(r+1)],a=mu[n.charCodeAt(r+2)],A=mu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},QO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},TO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Xl=5,q1=11,Dv=2,LO=q1-Xl,Qz=65536>>Xl,PO=1<<Xl,Nv=PO-1,kO=1024>>Xl,OO=Qz+kO,DO=OO,NO=32,MO=DO+NO,HO=65536>>q1,jO=1<<LO,RO=jO-1,Oy=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},$O=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},qO=function(n,e){var t=UO(n),r=Array.isArray(t)?TO(t):new Uint32Array(t),o=Array.isArray(t)?QO(t):new Uint16Array(t),s=24,i=Oy(o,s/2,r[4]/2),a=r[5]===2?Oy(o,(s+r[4])/2):$O(r,Math.ceil((s+r[4])/4));return new KO(r[0],r[1],r[2],r[3],i,a)},KO=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Xl],t=(t<<Dv)+(e&Nv),this.data[t];if(e<=65535)return t=this.index[Qz+(e-55296>>Xl)],t=(t<<Dv)+(e&Nv),this.data[t];if(e<this.highStart)return t=MO-HO+(e>>q1),t=this.index[t],t+=e>>Xl&RO,t=this.index[t],t=(t<<Dv)+(e&Nv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Dy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",VO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pf=0;Pf<Dy.length;Pf++)VO[Dy.charCodeAt(Pf)]=Pf;var GO=1,Mv=2,Hv=3,Ny=4,My=5,WO=7,Hy=8,jv=9,Rv=10,jy=11,Ry=12,$y=13,qy=14,$v=15,XO=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},YO=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},JO=qO(IO),Ii="",qv="",ZO=function(n){return JO.get(n)},e8=function(n,e,t){var r=t-2,o=e[r],s=e[t-1],i=e[t];if(s===Mv&&i===Hv)return Ii;if(s===Mv||s===Hv||s===Ny||i===Mv||i===Hv||i===Ny)return qv;if(s===Hy&&[Hy,jv,jy,Ry].indexOf(i)!==-1||(s===jy||s===jv)&&(i===jv||i===Rv)||(s===Ry||s===Rv)&&i===Rv||i===$y||i===My||i===WO||s===GO)return Ii;if(s===$y&&i===qy){for(;o===My;)o=e[--r];if(o===qy)return Ii}if(s===$v&&i===$v){for(var a=0;o===$v;)a++,o=e[--r];if(a%2===0)return Ii}return qv},t8=function(n){var e=XO(n),t=e.length,r=0,o=0,s=e.map(ZO);return{next:function(){if(r>=t)return{done:!0,value:null};for(var i=Ii;r<t&&(i=e8(e,s,++r))===Ii;);if(i!==Ii||r===t){var a=YO.apply(null,e.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},r8=function(n){for(var e=t8(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},n8=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height="".concat(e,"px"),r.style.display="block",n.body.appendChild(r),t.selectNode(r);var o=t.getBoundingClientRect(),s=Math.round(o.height);if(n.body.removeChild(r),s===e)return!0}}return!1},o8=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=xg(r.data).map(function(A){return go(A)}),s=0,i={},a=o.every(function(A,d){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>i.x||c.y>i.y;return i=c,d===0?!0:u});return n.body.removeChild(e),a},s8=function(){return typeof new Image().crossOrigin<"u"},i8=function(){return typeof new XMLHttpRequest().responseType=="string"},a8=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Ky=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},A8=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var o=new Image,s=e.toDataURL();o.src=s;var i=um(t,t,0,0,o);return r.fillStyle="red",r.fillRect(0,0,t,t),Vy(i).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=n.createElement("div");return d.style.backgroundImage="url(".concat(s,")"),d.style.height="".concat(t,"px"),Ky(A)?Vy(um(t,t,0,0,d)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),Ky(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},um=function(n,e,t,r,o){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),i},Vy=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},rs={get SUPPORT_RANGE_BOUNDS(){var n=n8(document);return Object.defineProperty(rs,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=rs.SUPPORT_RANGE_BOUNDS&&o8(document);return Object.defineProperty(rs,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=a8(document);return Object.defineProperty(rs,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?A8(document):Promise.resolve(!1);return Object.defineProperty(rs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=s8();return Object.defineProperty(rs,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=i8();return Object.defineProperty(rs,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rs,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Iu=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),l8=function(n,e,t,r){var o=u8(e,t),s=[],i=0;return o.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(rs.SUPPORT_RANGE_BOUNDS){var A=Gy(r,i,a.length).getClientRects();if(A.length>1){var d=K1(a),c=0;d.forEach(function(h){s.push(new Iu(h,_A.fromDOMRectList(n,Gy(r,c+i,h.length).getClientRects()))),c+=h.length})}else s.push(new Iu(a,_A.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new Iu(a,d8(n,r))),r=u}else rs.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),s},d8=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var s=bg(n,r);return r.firstChild&&o.replaceChild(r.firstChild,r),s}}return _A.EMPTY},Gy=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(n,e),o.setEnd(n,e+t),o},K1=function(n){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return r8(n)},c8=function(n,e){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return f8(n,e)},u8=function(n,e){return e.letterSpacing!==0?K1(n):c8(n,e)},h8=[32,160,4961,65792,65793,4153,4241],f8=function(n,e){for(var t=V6(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,s=function(){if(o.value){var i=o.value.slice(),a=xg(i),A="";a.forEach(function(d){h8.indexOf(d)===-1?A+=go(d):(A.length&&r.push(A),r.push(go(d)),A="")}),A.length&&r.push(A)}};!(o=t.next()).done;)s();return r},p8=function(){function n(e,t,r){this.text=g8(t.data,r.textTransform),this.textBounds=l8(e,this.text,r,t)}return n}(),g8=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(v8,m8);case 2:return n.toUpperCase();default:return n}},v8=/(^|\s|:|-|\(|\))([a-z])/g,m8=function(n,e,t){return n.length>0?e+t.toUpperCase():n},Tz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}(Ma),Lz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}(Ma),Pz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=new XMLSerializer,i=bg(t,r);return r.setAttribute("width","".concat(i.width,"px")),r.setAttribute("height","".concat(i.height,"px")),o.svg="data:image/svg+xml,".concat(encodeURIComponent(s.serializeToString(r))),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(Ma),kz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Ma),hm=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}(Ma),w8=[{type:15,flags:0,unit:"px",number:3}],y8=[{type:16,flags:0,number:50}],_8=function(n){return n.width>n.height?new _A(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new _A(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},b8=function(n){var e=n.type===x8?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Np="checkbox",Mp="radio",x8="password",Wy=707406591,V1=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=b8(r),(o.type===Np||o.type===Mp)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=_8(o.bounds)),o.type){case Np:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=w8;break;case Mp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=y8;break}return o}return e}(Ma),Oz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return o.value=s&&s.text||"",o}return e}(Ma),Dz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Ma),Nz=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=Hz(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?uc(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ia.TRANSPARENT,i=r.contentWindow.document.body?uc(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ia.TRANSPARENT;o.backgroundColor=al(s)?al(i)?o.styles.backgroundColor:i:s}}catch{}return o}return e}(Ma),z8=["OL","UL","MENU"],tp=function(n,e,t,r){for(var o=e.firstChild,s=void 0;o;o=s)if(s=o.nextSibling,jz(o)&&o.data.length>0)t.textNodes.push(new p8(n,o,t.styles));else if(tc(o))if(Kz(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return tp(n,a,t,r)});else{var i=Mz(n,o);i.styles.isVisible()&&(B8(o,i,r)?i.flags|=4:C8(i.styles)&&(i.flags|=2),z8.indexOf(o.tagName)!==-1&&(i.flags|=8),t.elements.push(i),o.slot,o.shadowRoot?tp(n,o.shadowRoot,i,r):!Hp(o)&&!Rz(o)&&!jp(o)&&tp(n,o,i,r))}},Mz=function(n,e){return pm(e)?new Tz(n,e):$z(e)?new Lz(n,e):Rz(e)?new Pz(n,e):S8(e)?new kz(n,e):E8(e)?new hm(n,e):F8(e)?new V1(n,e):jp(e)?new Oz(n,e):Hp(e)?new Dz(n,e):qz(e)?new Nz(n,e):new Ma(n,e)},Hz=function(n,e){var t=Mz(n,e);return t.flags|=4,tp(n,e,t,t),t},B8=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||G1(n)&&t.styles.isTransparent()},C8=function(n){return n.isPositioned()||n.isFloating()},jz=function(n){return n.nodeType===Node.TEXT_NODE},tc=function(n){return n.nodeType===Node.ELEMENT_NODE},fm=function(n){return tc(n)&&typeof n.style<"u"&&!rp(n)},rp=function(n){return typeof n.className=="object"},S8=function(n){return n.tagName==="LI"},E8=function(n){return n.tagName==="OL"},F8=function(n){return n.tagName==="INPUT"},I8=function(n){return n.tagName==="HTML"},Rz=function(n){return n.tagName==="svg"},G1=function(n){return n.tagName==="BODY"},$z=function(n){return n.tagName==="CANVAS"},Xy=function(n){return n.tagName==="VIDEO"},pm=function(n){return n.tagName==="IMG"},qz=function(n){return n.tagName==="IFRAME"},Yy=function(n){return n.tagName==="STYLE"},U8=function(n){return n.tagName==="SCRIPT"},Hp=function(n){return n.tagName==="TEXTAREA"},jp=function(n){return n.tagName==="SELECT"},Kz=function(n){return n.tagName==="SLOT"},Jy=function(n){return n.tagName.indexOf("-")>0},Q8=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,o=e.counterReset,s=!0;r!==null&&r.forEach(function(a){var A=t.counters[a.counter];A&&a.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=a.increment)});var i=[];return s&&o.forEach(function(a){var A=t.counters[a.counter];i.push(a.counter),A||(A=t.counters[a.counter]=[]),A.push(a.reset)}),i},n}(),Zy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},e_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},T8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},L8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Md=function(n,e,t,r,o,s){return n<e||n>t?Ju(n,o,s.length>0):r.integers.reduce(function(i,a,A){for(;n>=a;)n-=a,i+=r.values[A];return i},"")+s},Vz=function(n,e,t,r){var o="";do t||n--,o=r(n)+o,n/=e;while(n*e>=e);return o},fo=function(n,e,t,r,o){var s=t-e+1;return(n<0?"-":"")+(Vz(Math.abs(n),s,r,function(i){return go(Math.floor(i%s)+e)})+o)},Fl=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return Vz(Math.abs(n),r,!1,function(o){return e[Math.floor(o%r)]})+t},Vd=1,GA=2,WA=4,wu=8,rA=function(n,e,t,r,o,s){if(n<-9999||n>9999)return Ju(n,4,o.length>0);var i=Math.abs(n),a=o;if(i===0)return e[0]+a;for(var A=0;i>0&&A<=4;A++){var d=i%10;d===0&&To(s,Vd)&&a!==""?a=e[d]+a:d>1||d===1&&A===0||d===1&&A===1&&To(s,GA)||d===1&&A===1&&To(s,WA)&&n>100||d===1&&A>1&&To(s,wu)?a=e[d]+(A>0?t[A-1]:"")+a:d===1&&A>0&&(a=t[A-1]+a),i=Math.floor(i/10)}return(n<0?r:"")+a},t_="",r_="",n_="",Kv="",Ju=function(n,e,t){var r=t?". ":"",o=t?"":"",s=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=fo(n,48,57,!0,r);return a.length<4?"0".concat(a):a;case 4:return Fl(n,"",o);case 6:return Md(n,1,3999,Zy,3,r).toLowerCase();case 7:return Md(n,1,3999,Zy,3,r);case 8:return fo(n,945,969,!1,r);case 9:return fo(n,97,122,!1,r);case 10:return fo(n,65,90,!1,r);case 11:return fo(n,1632,1641,!0,r);case 12:case 49:return Md(n,1,9999,e_,3,r);case 35:return Md(n,1,9999,e_,3,r).toLowerCase();case 13:return fo(n,2534,2543,!0,r);case 14:case 30:return fo(n,6112,6121,!0,r);case 15:return Fl(n,"",o);case 16:return Fl(n,"",o);case 17:case 48:return rA(n,"",t_,"",o,GA|WA|wu);case 47:return rA(n,"",r_,"",o,Vd|GA|WA|wu);case 42:return rA(n,"",t_,"",o,GA|WA|wu);case 41:return rA(n,"",r_,"",o,Vd|GA|WA|wu);case 26:return rA(n,"","",n_,o,0);case 25:return rA(n,"","",n_,o,Vd|GA|WA);case 31:return rA(n,"","",Kv,s,Vd|GA|WA);case 33:return rA(n,"","",Kv,s,0);case 32:return rA(n,"","",Kv,s,Vd|GA|WA);case 18:return fo(n,2406,2415,!0,r);case 20:return Md(n,1,19999,L8,3,r);case 21:return fo(n,2790,2799,!0,r);case 22:return fo(n,2662,2671,!0,r);case 22:return Md(n,1,10999,T8,3,r);case 23:return Fl(n,"");case 24:return Fl(n,"");case 27:return fo(n,3302,3311,!0,r);case 28:return Fl(n,"",o);case 29:return Fl(n,"",o);case 34:return fo(n,3792,3801,!0,r);case 37:return fo(n,6160,6169,!0,r);case 38:return fo(n,4160,4169,!0,r);case 39:return fo(n,2918,2927,!0,r);case 40:return fo(n,1776,1785,!0,r);case 43:return fo(n,3046,3055,!0,r);case 44:return fo(n,3174,3183,!0,r);case 45:return fo(n,3664,3673,!0,r);case 46:return fo(n,3872,3881,!0,r);case 3:default:return fo(n,48,57,!0,r)}},Gz="data-html2canvas-ignore",o_=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new Q8,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,o=P8(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=o.contentWindow,A=a.document,d=D8(o).then(function(){return Us(r,void 0,void 0,function(){var u,h;return ws(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(j8),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the ".concat(this.referenceElement.nodeName," in the cloned document"))]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,O8(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,h)}).then(function(){return o})]:[2,o]}})})}),c=A.adoptNode(this.documentElement);return V8(c,A),A.open(),A.write("".concat(M8(document.doctype),"<html></html>")),H8(this.referenceElement.ownerDocument,s,i),A.replaceChild(c,A.documentElement),A.close(),d},n.prototype.createElementClone=function(e){if(cm(e,2))debugger;if($z(e))return this.createCanvasClone(e);if(Xy(e))return this.createVideoClone(e);if(Yy(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return pm(t)&&(pm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Jy(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Vv(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var s=e.getContext("2d"),i=o.getContext("2d",{willReadFrequently:!0});if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var A=a.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},n.prototype.appendChildNode=function(e,t,r){(!tc(t)||!U8(t)&&!t.hasAttribute(Gz)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!tc(t)||!Yy(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var o=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(tc(s)&&Kz(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return o.appendChildNode(t,a,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(jz(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&tc(e)&&(fm(e)||rp(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&fm(o)&&(this.clonedReferenceElement=o),G1(o)&&q8(o);var A=this.counters.parse(new Py(this.context,s)),d=this.resolvePseudoContent(e,o,i,Uu.BEFORE);Jy(e)&&(t=!0),Xy(e)||this.cloneChildNodes(e,o,t),d&&o.insertBefore(d,o.firstChild);var c=this.resolvePseudoContent(e,o,a,Uu.AFTER);return c&&o.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||rp(e))&&!qz(e)||t)&&Vv(s,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(Hp(e)||jp(e))&&(Hp(o)||jp(o))&&(o.value=e.value),o}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,o){var s=this;if(r){var i=r.content,a=t.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Py(this.context,r));var A=new SO(this.context,r),d=a.createElement("html2canvaspseudoelement");Vv(r,d),A.content.forEach(function(u){if(u.type===0)d.appendChild(a.createTextNode(u.value));else if(u.type===22){var h=a.createElement("img");h.src=u.value,h.style.opacity="1",d.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var f=u.values.filter(Yr);f.length&&d.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(u.name==="counter"){var g=u.values.filter(is),w=g[0],y=g[1];if(w&&Yr(w)){var x=s.counters.getCounterValue(w.value),C=y&&Yr(y)?dm.parse(s.context,y.value):3;d.appendChild(a.createTextNode(Ju(x,C,!1)))}}else if(u.name==="counters"){var I=u.values.filter(is),w=I[0],M=I[1],y=I[2];if(w&&Yr(w)){var L=s.counters.getCounterValues(w.value),ee=y&&Yr(y)?dm.parse(s.context,y.value):3,W=M&&M.type===0?M.value:"",R=L.map(function(N){return Ju(N,ee,!1)}).join(W);d.appendChild(a.createTextNode(R))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(a.createTextNode(Ly(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(a.createTextNode(Ly(A.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(a.createTextNode(u.value))}}),d.className="".concat(gm," ").concat(vm);var c=o===Uu.BEFORE?" ".concat(gm):" ".concat(vm);return rp(t)?t.className.baseValue+=c:t.className+=c,d}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Uu;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Uu||(Uu={}));var P8=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(Gz,"true"),n.body.appendChild(t),t},k8=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},O8=function(n){return Promise.all([].slice.call(n.images,0).map(k8))},D8=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var o=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},N8=["all","d","content"],Vv=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);N8.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},M8=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'.concat(n.publicId,'"')),n.systemId&&(e+='"'.concat(n.systemId,'"')),e+=">"),e},H8=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},j8=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},R8=":before",$8=":after",gm="___html2canvas___pseudoelement_before",vm="___html2canvas___pseudoelement_after",s_=`{
    content: "" !important;
    display: none !important;
}`,q8=function(n){K8(n,".".concat(gm).concat(R8).concat(s_,`
         .`).concat(vm).concat($8).concat(s_))},K8=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},V8=function(n,e){var t,r=e.createElement("base");r.href=e.baseURI;var o=n.getElementsByTagName("head").item(0);o==null||o.insertBefore(r,(t=o==null?void 0:o.firstChild)!==null&&t!==void 0?t:null)},Wz=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),G8=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Wv(e)||J8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return Us(this,void 0,void 0,function(){var t,r,o,s,i=this;return ws(this,function(a){switch(a.label){case 0:return t=Wz.isSameOrigin(e),r=!Gv(e)&&this._options.useCORS===!0&&rs.SUPPORT_CORS_IMAGES&&!t,o=!Gv(e)&&!t&&!Wv(e)&&typeof this._options.proxy=="string"&&rs.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!Gv(e)&&!Wv(e)&&!o&&!r?[2]:(s=e,o?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image ".concat(e.substring(0,256))),[4,new Promise(function(A,d){var c=new Image;c.onload=function(){return A(c)},c.onerror=d,(Z8(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return d("Timed out (".concat(i._options.imageTimeout,"ms) loading image"))},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(s,i){var a=rs.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(a==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return i(h)},!1),u.readAsDataURL(A.response)}else i("Failed to proxy resource ".concat(o," with status code ").concat(A.status))},A.onerror=i;var d=r.indexOf("?")>-1?"&":"?";if(A.open("GET","".concat(r).concat(d,"url=").concat(encodeURIComponent(e),"&responseType=").concat(a)),a!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return i("Timed out (".concat(c,"ms) proxying ").concat(o))}}A.send()})},n}(),W8=/^data:image\/svg\+xml/i,X8=/^data:image\/.*;base64,/i,Y8=/^data:image\/.*/i,J8=function(n){return rs.SUPPORT_SVG_DRAWING||!eD(n)},Gv=function(n){return Y8.test(n)},Z8=function(n){return X8.test(n)},Wv=function(n){return n.substr(0,4)==="blob"},eD=function(n){return n.substr(-3).toLowerCase()==="svg"||W8.test(n)},rr=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),Hd=function(n,e,t){return new rr(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},kf=function(){function n(e,t,r,o){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=o}return n.prototype.subdivide=function(e,t){var r=Hd(this.start,this.startControl,e),o=Hd(this.startControl,this.endControl,e),s=Hd(this.endControl,this.end,e),i=Hd(r,o,e),a=Hd(o,s,e),A=Hd(i,a,e);return t?new n(this.start,r,i,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Ui=function(n){return n.type===1},tD=function(){function n(e){var t=e.styles,r=e.bounds,o=vu(t.borderTopLeftRadius,r.width,r.height),s=o[0],i=o[1],a=vu(t.borderTopRightRadius,r.width,r.height),A=a[0],d=a[1],c=vu(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],f=vu(t.borderBottomLeftRadius,r.width,r.height),g=f[0],w=f[1],y=[];y.push((s+A)/r.width),y.push((g+u)/r.width),y.push((i+w)/r.height),y.push((d+h)/r.height);var x=Math.max.apply(Math,y);x>1&&(s/=x,i/=x,A/=x,d/=x,u/=x,h/=x,g/=x,w/=x);var C=r.width-A,I=r.height-h,M=r.width-u,L=r.height-w,ee=t.borderTopWidth,W=t.borderRightWidth,R=t.borderBottomWidth,Z=t.borderLeftWidth,Be=Cn(t.paddingTop,e.bounds.width),N=Cn(t.paddingRight,e.bounds.width),k=Cn(t.paddingBottom,e.bounds.width),J=Cn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Wn(r.left+Z/3,r.top+ee/3,s-Z/3,i-ee/3,vn.TOP_LEFT):new rr(r.left+Z/3,r.top+ee/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Wn(r.left+C,r.top+ee/3,A-W/3,d-ee/3,vn.TOP_RIGHT):new rr(r.left+r.width-W/3,r.top+ee/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Wn(r.left+M,r.top+I,u-W/3,h-R/3,vn.BOTTOM_RIGHT):new rr(r.left+r.width-W/3,r.top+r.height-R/3),this.bottomLeftBorderDoubleOuterBox=g>0||w>0?Wn(r.left+Z/3,r.top+L,g-Z/3,w-R/3,vn.BOTTOM_LEFT):new rr(r.left+Z/3,r.top+r.height-R/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Wn(r.left+Z*2/3,r.top+ee*2/3,s-Z*2/3,i-ee*2/3,vn.TOP_LEFT):new rr(r.left+Z*2/3,r.top+ee*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Wn(r.left+C,r.top+ee*2/3,A-W*2/3,d-ee*2/3,vn.TOP_RIGHT):new rr(r.left+r.width-W*2/3,r.top+ee*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Wn(r.left+M,r.top+I,u-W*2/3,h-R*2/3,vn.BOTTOM_RIGHT):new rr(r.left+r.width-W*2/3,r.top+r.height-R*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||w>0?Wn(r.left+Z*2/3,r.top+L,g-Z*2/3,w-R*2/3,vn.BOTTOM_LEFT):new rr(r.left+Z*2/3,r.top+r.height-R*2/3),this.topLeftBorderStroke=s>0||i>0?Wn(r.left+Z/2,r.top+ee/2,s-Z/2,i-ee/2,vn.TOP_LEFT):new rr(r.left+Z/2,r.top+ee/2),this.topRightBorderStroke=s>0||i>0?Wn(r.left+C,r.top+ee/2,A-W/2,d-ee/2,vn.TOP_RIGHT):new rr(r.left+r.width-W/2,r.top+ee/2),this.bottomRightBorderStroke=u>0||h>0?Wn(r.left+M,r.top+I,u-W/2,h-R/2,vn.BOTTOM_RIGHT):new rr(r.left+r.width-W/2,r.top+r.height-R/2),this.bottomLeftBorderStroke=g>0||w>0?Wn(r.left+Z/2,r.top+L,g-Z/2,w-R/2,vn.BOTTOM_LEFT):new rr(r.left+Z/2,r.top+r.height-R/2),this.topLeftBorderBox=s>0||i>0?Wn(r.left,r.top,s,i,vn.TOP_LEFT):new rr(r.left,r.top),this.topRightBorderBox=A>0||d>0?Wn(r.left+C,r.top,A,d,vn.TOP_RIGHT):new rr(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?Wn(r.left+M,r.top+I,u,h,vn.BOTTOM_RIGHT):new rr(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=g>0||w>0?Wn(r.left,r.top+L,g,w,vn.BOTTOM_LEFT):new rr(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?Wn(r.left+Z,r.top+ee,Math.max(0,s-Z),Math.max(0,i-ee),vn.TOP_LEFT):new rr(r.left+Z,r.top+ee),this.topRightPaddingBox=A>0||d>0?Wn(r.left+Math.min(C,r.width-W),r.top+ee,C>r.width+W?0:Math.max(0,A-W),Math.max(0,d-ee),vn.TOP_RIGHT):new rr(r.left+r.width-W,r.top+ee),this.bottomRightPaddingBox=u>0||h>0?Wn(r.left+Math.min(M,r.width-Z),r.top+Math.min(I,r.height-R),Math.max(0,u-W),Math.max(0,h-R),vn.BOTTOM_RIGHT):new rr(r.left+r.width-W,r.top+r.height-R),this.bottomLeftPaddingBox=g>0||w>0?Wn(r.left+Z,r.top+Math.min(L,r.height-R),Math.max(0,g-Z),Math.max(0,w-R),vn.BOTTOM_LEFT):new rr(r.left+Z,r.top+r.height-R),this.topLeftContentBox=s>0||i>0?Wn(r.left+Z+J,r.top+ee+Be,Math.max(0,s-(Z+J)),Math.max(0,i-(ee+Be)),vn.TOP_LEFT):new rr(r.left+Z+J,r.top+ee+Be),this.topRightContentBox=A>0||d>0?Wn(r.left+Math.min(C,r.width+Z+J),r.top+ee+Be,C>r.width+Z+J?0:A-Z+J,d-(ee+Be),vn.TOP_RIGHT):new rr(r.left+r.width-(W+N),r.top+ee+Be),this.bottomRightContentBox=u>0||h>0?Wn(r.left+Math.min(M,r.width-(Z+J)),r.top+Math.min(I,r.height+ee+Be),Math.max(0,u-(W+N)),h-(R+k),vn.BOTTOM_RIGHT):new rr(r.left+r.width-(W+N),r.top+r.height-(R+k)),this.bottomLeftContentBox=g>0||w>0?Wn(r.left+Z+J,r.top+L,Math.max(0,g-(Z+J)),w-(R+k),vn.BOTTOM_LEFT):new rr(r.left+Z+J,r.top+r.height-(R+k))}return n}(),vn;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vn||(vn={}));var Wn=function(n,e,t,r,o){var s=4*((Math.sqrt(2)-1)/3),i=t*s,a=r*s,A=n+t,d=e+r;switch(o){case vn.TOP_LEFT:return new kf(new rr(n,d),new rr(n,d-a),new rr(A-i,e),new rr(A,e));case vn.TOP_RIGHT:return new kf(new rr(n,e),new rr(n+i,e),new rr(A,d-a),new rr(A,d));case vn.BOTTOM_RIGHT:return new kf(new rr(A,e),new rr(A,e+a),new rr(n+i,d),new rr(n,d));case vn.BOTTOM_LEFT:default:return new kf(new rr(A,d),new rr(A-i,d),new rr(n,e+a),new rr(n,e))}},Rp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},rD=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},$p=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},nD=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),Of=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),oD=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),sD=function(n){return n.type===0},Xz=function(n){return n.type===1},iD=function(n){return n.type===2},i_=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},aD=function(n,e,t,r,o){return n.map(function(s,i){switch(i){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+o);case 3:return s.add(e,t+o)}return s})},Yz=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),Jz=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new tD(this.container),this.container.styles.opacity<1&&this.effects.push(new oD(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new nD(r,o,s))}if(this.container.styles.overflowX!==0){var i=Rp(this.curves),a=$p(this.curves);i_(i,a)?this.effects.push(new Of(i,6)):(this.effects.push(new Of(i,2)),this.effects.push(new Of(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!Xz(A)});if(t||r.container.styles.position!==0||!r.parent){if(t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=Rp(r.curves),a=$p(r.curves);i_(i,a)||o.unshift(new Of(a,6))}o.unshift.apply(o,s)}else o.unshift.apply(o,s);r=r.parent}return o.filter(function(A){return To(A.target,e)})},n}(),mm=function(n,e,t,r){n.container.elements.forEach(function(o){var s=To(o.flags,4),i=To(o.flags,2),a=new Jz(o,n);To(o.styles.display,2048)&&r.push(a);var A=To(o.flags,8)?[]:r;if(s||i){var d=s||o.styles.isPositioned()?t:e,c=new Yz(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var u=o.styles.zIndex.order;if(u<0){var h=0;d.negativeZIndex.some(function(g,w){return u>g.element.container.styles.zIndex.order?(h=w,!1):h>0}),d.negativeZIndex.splice(h,0,c)}else if(u>0){var f=0;d.positiveZIndex.some(function(g,w){return u>=g.element.container.styles.zIndex.order?(f=w+1,!1):f>0}),d.positiveZIndex.splice(f,0,c)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else o.styles.isFloating()?d.nonPositionedFloats.push(c):d.nonPositionedInlineLevel.push(c);mm(a,c,s?c:t,A)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),mm(a,e,t,A);To(o.flags,8)&&Zz(o,A)})},Zz=function(n,e){for(var t=n instanceof hm?n.start:1,r=n instanceof hm?n.reversed:!1,o=0;o<e.length;o++){var s=e[o];s.container instanceof kz&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Ju(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},AD=function(n){var e=new Jz(n,null),t=new Yz(e),r=[];return mm(e,t,t,r),Zz(e.container,r),t},a_=function(n,e){switch(e){case 0:return Li(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Li(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Li(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Li(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},lD=function(n,e){switch(e){case 0:return Li(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Li(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Li(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Li(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},dD=function(n,e){switch(e){case 0:return Li(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Li(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Li(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Li(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},cD=function(n,e){switch(e){case 0:return Df(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Df(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Df(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Df(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Df=function(n,e){var t=[];return Ui(n)?t.push(n.subdivide(.5,!1)):t.push(n),Ui(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Li=function(n,e,t,r){var o=[];return Ui(n)?o.push(n.subdivide(.5,!1)):o.push(n),Ui(t)?o.push(t.subdivide(.5,!0)):o.push(t),Ui(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),Ui(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},eB=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},qp=function(n){var e=n.styles,t=n.bounds,r=Cn(e.paddingLeft,t.width),o=Cn(e.paddingRight,t.width),s=Cn(e.paddingTop,t.width),i=Cn(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+s+i))},uD=function(n,e){return n===0?e.bounds:n===2?qp(e):eB(e)},hD=function(n,e){return n===0?e.bounds:n===2?qp(e):eB(e)},Xv=function(n,e,t){var r=uD(Gd(n.styles.backgroundOrigin,e),n),o=hD(Gd(n.styles.backgroundClip,e),n),s=fD(Gd(n.styles.backgroundSize,e),t,r),i=s[0],a=s[1],A=vu(Gd(n.styles.backgroundPosition,e),r.width-i,r.height-a),d=pD(Gd(n.styles.backgroundRepeat,e),A,s,r,o),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return i=Math.max(1,i),a=Math.max(1,a),[d,c,u,i,a]},jd=function(n){return Yr(n)&&n.value===hc.AUTO},Nf=function(n){return typeof n=="number"},fD=function(n,e,t){var r=e[0],o=e[1],s=e[2],i=n[0],a=n[1];if(!i)return[0,0];if(jn(i)&&a&&jn(a))return[Cn(i,t.width),Cn(a,t.height)];var A=Nf(s);if(Yr(i)&&(i.value===hc.CONTAIN||i.value===hc.COVER)){if(Nf(s)){var d=t.width/t.height;return d<s!=(i.value===hc.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=Nf(r),u=Nf(o),h=c||u;if(jd(i)&&(!a||jd(a))){if(c&&u)return[r,o];if(!A&&!h)return[t.width,t.height];if(h&&A){var f=c?r:o*s,g=u?o:r/s;return[f,g]}var w=c?r:t.width,y=u?o:t.height;return[w,y]}if(A){var x=0,C=0;return jn(i)?x=Cn(i,t.width):jn(a)&&(C=Cn(a,t.height)),jd(i)?x=C*s:(!a||jd(a))&&(C=x/s),[x,C]}var I=null,M=null;if(jn(i)?I=Cn(i,t.width):a&&jn(a)&&(M=Cn(a,t.height)),I!==null&&(!a||jd(a))&&(M=c&&u?I/r*o:t.height),M!==null&&jd(i)&&(I=c&&u?M/o*r:t.width),I!==null&&M!==null)return[I,M];throw new Error("Unable to calculate background-size for element")},Gd=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},pD=function(n,e,t,r,o){var s=e[0],i=e[1],a=t[0],A=t[1];switch(n){case 2:return[new rr(Math.round(r.left),Math.round(r.top+i)),new rr(Math.round(r.left+r.width),Math.round(r.top+i)),new rr(Math.round(r.left+r.width),Math.round(A+r.top+i)),new rr(Math.round(r.left),Math.round(A+r.top+i))];case 3:return[new rr(Math.round(r.left+s),Math.round(r.top)),new rr(Math.round(r.left+s+a),Math.round(r.top)),new rr(Math.round(r.left+s+a),Math.round(r.height+r.top)),new rr(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new rr(Math.round(r.left+s),Math.round(r.top+i)),new rr(Math.round(r.left+s+a),Math.round(r.top+i)),new rr(Math.round(r.left+s+a),Math.round(r.top+i+A)),new rr(Math.round(r.left+s),Math.round(r.top+i+A))];default:return[new rr(Math.round(o.left),Math.round(o.top)),new rr(Math.round(o.left+o.width),Math.round(o.top)),new rr(Math.round(o.left+o.width),Math.round(o.height+o.top)),new rr(Math.round(o.left),Math.round(o.height+o.top))]}},gD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",A_="Hidden Text",vD=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),o=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),o.src=gD,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(A_)),r.appendChild(s),r.appendChild(o);var a=o.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(A_)),r.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r="".concat(e," ").concat(t);return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),tB=function(){function n(e,t){this.context=e,this.options=t}return n}(),mD=1e4,wD=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px")),o.fontMetrics=new vD(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized (".concat(r.width,"x").concat(r.height,") with scale ").concat(r.scale)),o}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(t){this.ctx.save(),iD(t)&&(this.ctx.globalAlpha=t.opacity),sD(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Xz(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Us(this,void 0,void 0,function(){var r;return ws(this,function(o){switch(o.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Us(this,void 0,void 0,function(){return ws(this,function(r){switch(r.label){case 0:if(To(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,o){var s=this;if(r===0)navigator.userAgent.indexOf("Firefox")===-1?(this.ctx.textBaseline="ideographic",this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)):this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+o);else{var i=K1(t.text);i.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+o),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),o=zD(t.fontFamily).join(", "),s=wl(t.fontSize)?"".concat(t.fontSize.number).concat(t.fontSize.unit):"".concat(t.fontSize.number,"px");return[[t.fontStyle,r,t.fontWeight,s,o].join(" "),o,s]},e.prototype.renderTextNode=function(t,r){return Us(this,void 0,void 0,function(){var o,s,i=this;return ws(this,function(a){return o=this.createFontStyle(r)[0],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=r.paintOrder,t.textBounds.forEach(function(A){s.forEach(function(d){switch(d){case 0:i.ctx.fillStyle=qo(r.color),i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number);var c=r.textShadow;if(c.length&&A.text.trim().length&&(c.slice(0).reverse().forEach(function(h){i.ctx.shadowColor=qo(h.color),i.ctx.shadowOffsetX=h.offsetX.number*i.options.scale,i.ctx.shadowOffsetY=h.offsetY.number*i.options.scale,i.ctx.shadowBlur=h.blur.number,i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number)}),i.ctx.shadowColor="",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0),r.textDecorationLine.length){i.ctx.fillStyle=qo(r.textDecorationColor||r.color);var u=1;r.textDecorationLine.forEach(function(h){switch(h){case 1:i.ctx.fillRect(A.bounds.left,A.bounds.top+A.bounds.height-u,A.bounds.width,u);break;case 2:i.ctx.fillRect(A.bounds.left,A.bounds.top,A.bounds.width,u);break;case 3:i.ctx.fillRect(A.bounds.left,A.bounds.top+(A.bounds.height/2-u/2),A.bounds.width,u);break}})}break;case 1:r.webkitTextStrokeWidth&&A.text.trim().length&&(i.ctx.strokeStyle=qo(r.webkitTextStrokeColor),i.ctx.lineWidth=r.webkitTextStrokeWidth,i.ctx.lineJoin=window.chrome?"miter":"round",i.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)),i.ctx.strokeStyle="",i.ctx.lineWidth=0,i.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,o){var s=o.naturalWidth||t.intrinsicWidth,i=o.naturalHeight||t.intrinsicHeight;if(o&&s>0&&i>0){var a=qp(t),A=$p(r);this.path(A),this.ctx.save(),this.ctx.clip();var d=0,c=0,u=s,h=i,f=a.left,g=a.top,w=a.width,y=a.height,x=t.styles.objectFit,C=w/y,I=u/h;if(x===2)I>C?(y=w/I,g+=(a.height-y)/2):(w=y*I,f+=(a.width-w)/2);else if(x===4)I>C?(u=h*C,d+=(s-u)/2):(h=u/C,c+=(i-h)/2);else if(x===8)u>w?(d+=(u-w)/2,u=w):(f+=(w-u)/2,w=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h);else if(x===16){var M=I>C?w:y*I,L=u>w?u:w;M<L?I>C?(y=w/I,g+=(a.height-y)/2):(w=y*I,f+=(a.width-w)/2):(u>w?(d+=(u-w)/2,u=w):(f+=(w-u)/2,w=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h))}this.ctx.drawImage(o,d,c,u,h,f,g,w,y),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Us(this,void 0,void 0,function(){var r,o,s,i,a,A,C,C,d,c,u,h,M,f,g,L,w,y,x,C,I,M,L;return ws(this,function(ee){switch(ee.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,o=t.curves,s=r.styles,i=0,a=r.textNodes,ee.label=1;case 1:return i<a.length?(A=a[i],[4,this.renderTextNode(A,s)]):[3,4];case 2:ee.sent(),ee.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof Tz))return[3,8];ee.label=5;case 5:return ee.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return C=ee.sent(),this.renderReplacedElement(r,o,C),[3,8];case 7:return ee.sent(),this.context.logger.error("Error loading image ".concat(r.src)),[3,8];case 8:if(r instanceof Lz&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof Pz))return[3,12];ee.label=9;case 9:return ee.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return C=ee.sent(),this.renderReplacedElement(r,o,C),[3,12];case 11:return ee.sent(),this.context.logger.error("Error loading svg ".concat(r.svg.substring(0,255))),[3,12];case 12:return r instanceof Nz&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:c=ee.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),ee.label=14;case 14:if(r instanceof V1&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Np?r.checked&&(this.ctx.save(),this.path([new rr(r.bounds.left+u*.39363,r.bounds.top+u*.79),new rr(r.bounds.left+u*.16,r.bounds.top+u*.5549),new rr(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new rr(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new rr(r.bounds.left+u*.72983,r.bounds.top+u*.23),new rr(r.bounds.left+u*.84,r.bounds.top+u*.34085),new rr(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=qo(Wy),this.ctx.fill(),this.ctx.restore()):r.type===Mp&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=qo(Wy),this.ctx.fill(),this.ctx.restore())),yD(r)&&r.value.length){switch(h=this.createFontStyle(s),M=h[0],f=h[1],g=this.fontMetrics.getMetrics(M,f).baseline,this.ctx.font=M,this.ctx.fillStyle=qo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=bD(r.styles.textAlign),L=qp(r),w=0,r.styles.textAlign){case 1:w+=L.width/2;break;case 2:w+=L.width;break}y=L.add(w,0,0,-L.height/2+1),this.ctx.save(),this.path([new rr(L.left,L.top),new rr(L.left+L.width,L.top),new rr(L.left+L.width,L.top+L.height),new rr(L.left,L.top+L.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Iu(r.value,y),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!To(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(x=r.styles.listStyleImage,x.type!==0)return[3,18];C=void 0,I=x.url,ee.label=15;case 15:return ee.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return C=ee.sent(),this.ctx.drawImage(C,r.bounds.left-(C.width+10),r.bounds.top),[3,18];case 17:return ee.sent(),this.context.logger.error("Error loading list-style-image ".concat(I)),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(M=this.createFontStyle(s)[0],this.ctx.font=M,this.ctx.fillStyle=qo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",L=new _A(r.bounds.left,r.bounds.top+Cn(r.styles.paddingTop,r.bounds.width),r.bounds.width,Qy(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Iu(t.listValue,L),s.letterSpacing,Qy(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ee.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Us(this,void 0,void 0,function(){var r,o,x,s,i,x,a,A,x,d,c,x,u,h,x,f,g,x,w,y,x;return ws(this,function(C){switch(C.label){case 0:if(To(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:C.sent(),r=0,o=t.negativeZIndex,C.label=2;case 2:return r<o.length?(x=o[r],[4,this.renderStack(x)]):[3,5];case 3:C.sent(),C.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:C.sent(),s=0,i=t.nonInlineLevel,C.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:C.sent(),C.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,C.label=11;case 11:return a<A.length?(x=A[a],[4,this.renderStack(x)]):[3,14];case 12:C.sent(),C.label=13;case 13:return a++,[3,11];case 14:d=0,c=t.nonPositionedInlineLevel,C.label=15;case 15:return d<c.length?(x=c[d],[4,this.renderStack(x)]):[3,18];case 16:C.sent(),C.label=17;case 17:return d++,[3,15];case 18:u=0,h=t.inlineLevel,C.label=19;case 19:return u<h.length?(x=h[u],[4,this.renderNode(x)]):[3,22];case 20:C.sent(),C.label=21;case 21:return u++,[3,19];case 22:f=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return f<g.length?(x=g[f],[4,this.renderStack(x)]):[3,26];case 24:C.sent(),C.label=25;case 25:return f++,[3,23];case 26:w=0,y=t.positiveZIndex,C.label=27;case 27:return w<y.length?(x=y[w],[4,this.renderStack(x)]):[3,30];case 28:C.sent(),C.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(o,s){var i=Ui(o)?o.start:o;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Ui(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(t,r,o,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},e.prototype.resizeImage=function(t,r,o){var s,i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,o);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,o),a},e.prototype.renderBackgroundImage=function(t){return Us(this,void 0,void 0,function(){var r,o,s,i,a,A;return ws(this,function(d){switch(d.label){case 0:r=t.styles.backgroundImage.length-1,o=function(c){var u,h,f,g,w,k,te,se,ge,pe,Be,y,k,te,se,ge,pe,x,C,I,M,L,ee,W,R,Z,Be,N,k,J,ne,ge,pe,xe,te,se,oe,me,B,F,E,T,P,O;return ws(this,function(j){switch(j.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,j.label=1;case 1:return j.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=j.sent(),[3,4];case 3:return j.sent(),s.context.logger.error("Error loading background-image ".concat(h)),[3,4];case 4:return u&&(f=isNaN(u.width)||u.width===0?1:u.width,g=isNaN(u.height)||u.height===0?1:u.height,w=Xv(t,r,[f,g,f/g]),k=w[0],te=w[1],se=w[2],ge=w[3],pe=w[4],Be=s.ctx.createPattern(s.resizeImage(u,ge,pe),"repeat"),s.renderRepeat(k,Be,te,se)),[3,6];case 5:rk(c)?(y=Xv(t,r,[null,null,null]),k=y[0],te=y[1],se=y[2],ge=y[3],pe=y[4],x=YP(c.angle,ge,pe),C=x[0],I=x[1],M=x[2],L=x[3],ee=x[4],W=document.createElement("canvas"),W.width=ge,W.height=pe,R=W.getContext("2d"),Z=R.createLinearGradient(I,L,M,ee),Iy(c.stops,C).forEach(function($){return Z.addColorStop($.stop,qo($.color))}),R.fillStyle=Z,R.fillRect(0,0,ge,pe),ge>0&&pe>0&&(Be=s.ctx.createPattern(W,"repeat"),s.renderRepeat(k,Be,te,se))):nk(c)&&(N=Xv(t,r,[null,null,null]),k=N[0],J=N[1],ne=N[2],ge=N[3],pe=N[4],xe=c.position.length===0?[H1]:c.position,te=Cn(xe[0],ge),se=Cn(xe[xe.length-1],pe),oe=JP(c,te,se,ge,pe),me=oe[0],B=oe[1],me>0&&B>0&&(F=s.ctx.createRadialGradient(J+te,ne+se,0,J+te,ne+se,me),Iy(c.stops,me*2).forEach(function($){return F.addColorStop($.stop,qo($.color))}),s.path(k),s.ctx.fillStyle=F,me!==B?(E=t.bounds.left+.5*t.bounds.width,T=t.bounds.top+.5*t.bounds.height,P=B/me,O=1/P,s.ctx.save(),s.ctx.translate(E,T),s.ctx.transform(1,0,0,P,0,0),s.ctx.translate(-E,-T),s.ctx.fillRect(J,O*(ne-T)+T,ge,pe*O),s.ctx.restore()):s.ctx.fill())),j.label=6;case 6:return r--,[2]}})},s=this,i=0,a=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return i<a.length?(A=a[i],[5,o(A)]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,o){return Us(this,void 0,void 0,function(){return ws(this,function(s){return this.path(a_(o,r)),this.ctx.fillStyle=qo(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,o,s){return Us(this,void 0,void 0,function(){var i,a;return ws(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,o,s)]:[3,2];case 1:return A.sent(),[2];case 2:return i=lD(s,o),this.path(i),this.ctx.fillStyle=qo(t),this.ctx.fill(),a=dD(s,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Us(this,void 0,void 0,function(){var r,o,s,i,a,A,d,c,u=this;return ws(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,o=!al(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=_D(Gd(r.backgroundClip,0),t.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),al(r.backgroundColor)||(this.ctx.fillStyle=qo(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){u.ctx.save();var g=Rp(t.curves),w=f.inset?0:mD,y=aD(g,-w+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(u.path(g),u.ctx.clip(),u.mask(y)):(u.mask(g),u.ctx.clip(),u.path(y)),u.ctx.shadowOffsetX=f.offsetX.number+w,u.ctx.shadowOffsetY=f.offsetY.number,u.ctx.shadowColor=qo(f.color),u.ctx.shadowBlur=f.blur.number,u.ctx.fillStyle=f.inset?qo(f.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,A=0,d=s,h.label=3;case 3:return A<d.length?(c=d[A],c.style!==0&&!al(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,o,s,i){return Us(this,void 0,void 0,function(){var a,A,d,c,u,h,f,g,w,y,x,C,I,M,L,ee,L,ee;return ws(this,function(W){return this.ctx.save(),a=cD(s,o),A=a_(s,o),i===2&&(this.path(A),this.ctx.clip()),Ui(A[0])?(d=A[0].start.x,c=A[0].start.y):(d=A[0].x,c=A[0].y),Ui(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),o===0||o===2?f=Math.abs(d-u):f=Math.abs(c-h),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(A.slice(0,2)),g=r<3?r*3:r*2,w=r<3?r*2:r,i===3&&(g=r,w=r),y=!0,f<=g*2?y=!1:f<=g*2+w?(x=f/(2*g+w),g*=x,w*=x):(C=Math.floor((f+w)/(g+w)),I=(f-C*g)/(C-1),M=(f-(C+1)*g)/C,w=M<=0||Math.abs(w-I)<Math.abs(w-M)?I:M),y&&(i===3?this.ctx.setLineDash([0,g+w]):this.ctx.setLineDash([g,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=qo(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Ui(A[0])&&(L=A[3],ee=A[0],this.ctx.beginPath(),this.formatPath([new rr(L.end.x,L.end.y),new rr(ee.start.x,ee.start.y)]),this.ctx.stroke()),Ui(A[1])&&(L=A[1],ee=A[2],this.ctx.beginPath(),this.formatPath([new rr(L.end.x,L.end.y),new rr(ee.start.x,ee.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Us(this,void 0,void 0,function(){var r;return ws(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=qo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=AD(t),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(tB),yD=function(n){return n instanceof Dz||n instanceof Oz?!0:n instanceof V1&&n.type!==Mp&&n.type!==Np},_D=function(n,e){switch(n){case 0:return Rp(e);case 2:return rD(e);case 1:default:return $p(e)}},bD=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},xD=["-apple-system","system-ui"],zD=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return xD.indexOf(e)===-1}):n},BD=function(n){oa(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px"),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (".concat(r.width,"x").concat(r.height," at ").concat(r.x,",").concat(r.y,") with scale ").concat(r.scale)),o}return e.prototype.render=function(t){return Us(this,void 0,void 0,function(){var r,o;return ws(this,function(s){switch(s.label){case 0:return r=um(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,CD(r)];case 1:return o=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=qo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(tB),CD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},SD=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,vf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,vf([this.id,"".concat(this.getTime(),"ms")],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,vf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,vf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.instances={},n}(),ED=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#".concat(n.instanceCount++),this.logger=new SD({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new G8(this,e)}return n.instanceCount=1,n}(),FD=function(n,e){return e===void 0&&(e={}),ID(n,e)};typeof window<"u"&&Wz.setContext(window);var ID=function(n,e){return Us(void 0,void 0,void 0,function(){var t,r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I,M,L,W,ee,W,R,Z,Be,N,k,J,ne,ge,pe,xe,te,se,oe,me,B,F,E;return ws(this,function(T){switch(T.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(R=e.allowTaint)!==null&&R!==void 0?R:!1,imageTimeout:(Z=e.imageTimeout)!==null&&Z!==void 0?Z:15e3,proxy:e.proxy,useCORS:(Be=e.useCORS)!==null&&Be!==void 0?Be:!1},s=W0({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},o),i={windowWidth:(k=e.windowWidth)!==null&&k!==void 0?k:r.innerWidth,windowHeight:(J=e.windowHeight)!==null&&J!==void 0?J:r.innerHeight,scrollX:(ne=e.scrollX)!==null&&ne!==void 0?ne:r.pageXOffset,scrollY:(ge=e.scrollY)!==null&&ge!==void 0?ge:r.pageYOffset},a=new _A(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new ED(s,a),d=(pe=e.foreignObjectRendering)!==null&&pe!==void 0?pe:!1,c={allowTaint:(xe=e.allowTaint)!==null&&xe!==void 0?xe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},A.logger.debug("Starting document clone with size ".concat(a.width,"x").concat(a.height," scrolled to ").concat(-a.left,",").concat(-a.top)),u=new o_(A,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=T.sent(),g=G1(h)||I8(h)?u6(h.ownerDocument):bg(A,h),w=g.width,y=g.height,x=g.left,C=g.top,I=UD(A,h,e.backgroundColor),M={canvas:e.canvas,backgroundColor:I,scale:(se=(te=e.scale)!==null&&te!==void 0?te:r.devicePixelRatio)!==null&&se!==void 0?se:1,x:((oe=e.x)!==null&&oe!==void 0?oe:0)+x,y:((me=e.y)!==null&&me!==void 0?me:0)+C,width:(B=e.width)!==null&&B!==void 0?B:Math.ceil(w),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(y)},d?(A.logger.debug("Document cloned, using foreign object rendering"),W=new BD(A,M),[4,W.render(h)]):[3,3];case 2:return L=T.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at ".concat(x,",").concat(C," with size ").concat(w,"x").concat(y," using computed rendering")),A.logger.debug("Starting DOM parsing"),ee=Hz(A,h),I===ee.styles.backgroundColor&&(ee.styles.backgroundColor=Ia.TRANSPARENT),A.logger.debug("Starting renderer for element at ".concat(M.x,",").concat(M.y," with size ").concat(M.width,"x").concat(M.height)),W=new wD(A,M),[4,W.render(ee)];case 4:L=T.sent(),T.label=5;case 5:return(!((E=e.removeContainer)!==null&&E!==void 0)||E)&&(o_.destroy(f)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,L]}})})},UD=function(n,e,t){var r=e.ownerDocument,o=r.documentElement?uc(n,getComputedStyle(r.documentElement).backgroundColor):Ia.TRANSPARENT,s=r.body?uc(n,getComputedStyle(r.body).backgroundColor):Ia.TRANSPARENT,i=typeof t=="string"?uc(n,t):t===null?Ia.TRANSPARENT:4294967295;return e===r.documentElement?al(o)?al(s)?i:s:o:i};function Sn(n){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(n)}var _s=Uint8Array,pi=Uint16Array,W1=Int32Array,kg=new _s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Og=new _s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wm=new _s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rB=function(n,e){for(var t=new pi(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new W1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)o[s]=s-t[r]<<5|r;return{b:t,r:o}},nB=rB(kg,2),oB=nB.b,ym=nB.r;oB[28]=258,ym[258]=28;var sB=rB(Og,0),QD=sB.b,l_=sB.r,_m=new pi(32768);for(var Rn=0;Rn<32768;++Rn){var $A=(Rn&43690)>>1|(Rn&21845)<<1;$A=($A&52428)>>2|($A&13107)<<2,$A=($A&61680)>>4|($A&3855)<<4,_m[Rn]=(($A&65280)>>8|($A&255)<<8)>>1}var Ua=function(n,e,t){for(var r=n.length,o=0,s=new pi(e);o<r;++o)n[o]&&++s[n[o]-1];var i=new pi(e);for(o=1;o<e;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(t){a=new pi(1<<e);var A=15-e;for(o=0;o<r;++o)if(n[o])for(var d=o<<4|n[o],c=e-n[o],u=i[n[o]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[_m[u]>>A]=d}else for(a=new pi(r),o=0;o<r;++o)n[o]&&(a[o]=_m[i[n[o]-1]++]>>15-n[o]);return a},pl=new _s(288);for(var Rn=0;Rn<144;++Rn)pl[Rn]=8;for(var Rn=144;Rn<256;++Rn)pl[Rn]=9;for(var Rn=256;Rn<280;++Rn)pl[Rn]=7;for(var Rn=280;Rn<288;++Rn)pl[Rn]=8;var Zu=new _s(32);for(var Rn=0;Rn<32;++Rn)Zu[Rn]=5;var TD=Ua(pl,9,0),LD=Ua(pl,9,1),PD=Ua(Zu,5,0),kD=Ua(Zu,5,1),Yv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ri=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Jv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},X1=function(n){return(n+7)/8|0},iB=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new _s(n.subarray(e,t))},OD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Gi=function(n,e,t){var r=new Error(e||OD[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Gi),!t)throw r;return r},DD=function(n,e,t,r){var o=n.length,s=0;if(!o||e.f&&!e.l)return t||new _s(0);var i=!t,a=i||e.i!=2,A=e.i;i&&(t=new _s(o*3));var d=function(Y){var Ce=t.length;if(Y>Ce){var fe=new _s(Math.max(Ce*2,Y));fe.set(t),t=fe}},c=e.f||0,u=e.p||0,h=e.b||0,f=e.l,g=e.d,w=e.m,y=e.n,x=o*8;do{if(!f){c=Ri(n,u,1);var C=Ri(n,u+1,3);if(u+=3,C)if(C==1)f=LD,g=kD,w=9,y=5;else if(C==2){var ee=Ri(n,u,31)+257,W=Ri(n,u+10,15)+4,R=ee+Ri(n,u+5,31)+1;u+=14;for(var Z=new _s(R),Be=new _s(19),N=0;N<W;++N)Be[wm[N]]=Ri(n,u+N*3,7);u+=W*3;for(var k=Yv(Be),J=(1<<k)-1,ne=Ua(Be,k,1),N=0;N<R;){var ge=ne[Ri(n,u,J)];u+=ge&15;var I=ge>>4;if(I<16)Z[N++]=I;else{var pe=0,xe=0;for(I==16?(xe=3+Ri(n,u,3),u+=2,pe=Z[N-1]):I==17?(xe=3+Ri(n,u,7),u+=3):I==18&&(xe=11+Ri(n,u,127),u+=7);xe--;)Z[N++]=pe}}var te=Z.subarray(0,ee),se=Z.subarray(ee);w=Yv(te),y=Yv(se),f=Ua(te,w,1),g=Ua(se,y,1)}else Gi(1);else{var I=X1(u)+4,M=n[I-4]|n[I-3]<<8,L=I+M;if(L>o){A&&Gi(0);break}a&&d(h+M),t.set(n.subarray(I,L),h),e.b=h+=M,e.p=u=L*8,e.f=c;continue}if(u>x){A&&Gi(0);break}}a&&d(h+131072);for(var oe=(1<<w)-1,me=(1<<y)-1,B=u;;B=u){var pe=f[Jv(n,u)&oe],F=pe>>4;if(u+=pe&15,u>x){A&&Gi(0);break}if(pe||Gi(2),F<256)t[h++]=F;else if(F==256){B=u,f=null;break}else{var E=F-254;if(F>264){var N=F-257,T=kg[N];E=Ri(n,u,(1<<T)-1)+oB[N],u+=T}var P=g[Jv(n,u)&me],O=P>>4;P||Gi(3),u+=P&15;var se=QD[O];if(O>3){var T=Og[O];se+=Jv(n,u)&(1<<T)-1,u+=T}if(u>x){A&&Gi(0);break}a&&d(h+131072);var j=h+E;if(h<se){var $=s-se,H=Math.min(se,j);for($+h<0&&Gi(3);h<H;++h)t[h]=r[$+h]}for(;h<j;++h)t[h]=t[h-se]}}e.l=f,e.p=B,e.b=h,e.f=c,f&&(c=1,e.m=w,e.d=g,e.n=y)}while(!c);return h!=t.length&&i?iB(t,0,h):t.subarray(0,h)},nA=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},iu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Zv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,s=t.slice();if(!o)return{t:AB,l:0};if(o==1){var i=new _s(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(L,ee){return L.f-ee.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],d=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=o-1;)a=t[t[d].f<t[u].f?d++:u++],A=t[d!=c&&t[d].f<t[u].f?d++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var h=s[0].s,r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var f=new pi(h+1),g=bm(t[c-1],f,0);if(g>e){var r=0,w=0,y=g-e,x=1<<y;for(s.sort(function(ee,W){return f[W.s]-f[ee.s]||ee.f-W.f});r<o;++r){var C=s[r].s;if(f[C]>e)w+=x-(1<<g-f[C]),f[C]=e;else break}for(w>>=y;w>0;){var I=s[r].s;f[I]<e?w-=1<<e-f[I]++-1:++r}for(;r>=0&&w;--r){var M=s[r].s;f[M]==e&&(--f[M],++w)}g=e}return{t:new _s(f),l:g}},bm=function(n,e,t){return n.s==-1?Math.max(bm(n.l,e,t+1),bm(n.r,e,t+1)):e[n.s]=t},d_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new pi(++e),r=0,o=n[0],s=1,i=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==o&&a!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=n[a]}return{c:t.subarray(0,r),n:e}},au=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},aB=function(n,e,t){var r=t.length,o=X1(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var s=0;s<r;++s)n[o+s+4]=t[s];return(o+4+r)*8},c_=function(n,e,t,r,o,s,i,a,A,d,c){nA(e,c++,t),++o[256];for(var u=Zv(o,15),h=u.t,f=u.l,g=Zv(s,15),w=g.t,y=g.l,x=d_(h),C=x.c,I=x.n,M=d_(w),L=M.c,ee=M.n,W=new pi(19),R=0;R<C.length;++R)++W[C[R]&31];for(var R=0;R<L.length;++R)++W[L[R]&31];for(var Z=Zv(W,7),Be=Z.t,N=Z.l,k=19;k>4&&!Be[wm[k-1]];--k);var J=d+5<<3,ne=au(o,pl)+au(s,Zu)+i,ge=au(o,h)+au(s,w)+i+14+3*k+au(W,Be)+2*W[16]+3*W[17]+7*W[18];if(A>=0&&J<=ne&&J<=ge)return aB(e,c,n.subarray(A,A+d));var pe,xe,te,se;if(nA(e,c,1+(ge<ne)),c+=2,ge<ne){pe=Ua(h,f,0),xe=h,te=Ua(w,y,0),se=w;var oe=Ua(Be,N,0);nA(e,c,I-257),nA(e,c+5,ee-1),nA(e,c+10,k-4),c+=14;for(var R=0;R<k;++R)nA(e,c+3*R,Be[wm[R]]);c+=3*k;for(var me=[C,L],B=0;B<2;++B)for(var F=me[B],R=0;R<F.length;++R){var E=F[R]&31;nA(e,c,oe[E]),c+=Be[E],E>15&&(nA(e,c,F[R]>>5&127),c+=F[R]>>12)}}else pe=TD,xe=pl,te=PD,se=Zu;for(var R=0;R<a;++R){var T=r[R];if(T>255){var E=T>>18&31;iu(e,c,pe[E+257]),c+=xe[E+257],E>7&&(nA(e,c,T>>23&31),c+=kg[E]);var P=T&31;iu(e,c,te[P]),c+=se[P],P>3&&(iu(e,c,T>>5&8191),c+=Og[P])}else iu(e,c,pe[T]),c+=xe[T]}return iu(e,c,pe[256]),c+xe[256]},ND=new W1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AB=new _s(0),MD=function(n,e,t,r,o,s){var i=s.z||n.length,a=new _s(r+i+5*(1+Math.ceil(i/7e3))+o),A=a.subarray(r,a.length-o),d=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=ND[e-1],h=u>>13,f=u&8191,g=(1<<t)-1,w=s.p||new pi(32768),y=s.h||new pi(g+1),x=Math.ceil(t/3),C=2*x,I=function(Le){return(n[Le]^n[Le+1]<<x^n[Le+2]<<C)&g},M=new W1(25e3),L=new pi(288),ee=new pi(32),W=0,R=0,Z=s.i||0,Be=0,N=s.w||0,k=0;Z+2<i;++Z){var J=I(Z),ne=Z&32767,ge=y[J];if(w[ne]=ge,y[J]=ne,N<=Z){var pe=i-Z;if((W>7e3||Be>24576)&&(pe>423||!d)){c=c_(n,A,0,M,L,ee,R,Be,k,Z-k,c),Be=W=R=0,k=Z;for(var xe=0;xe<286;++xe)L[xe]=0;for(var xe=0;xe<30;++xe)ee[xe]=0}var te=2,se=0,oe=f,me=ne-ge&32767;if(pe>2&&J==I(Z-me))for(var B=Math.min(h,pe)-1,F=Math.min(32767,Z),E=Math.min(258,pe);me<=F&&--oe&&ne!=ge;){if(n[Z+te]==n[Z+te-me]){for(var T=0;T<E&&n[Z+T]==n[Z+T-me];++T);if(T>te){if(te=T,se=me,T>B)break;for(var P=Math.min(me,T-2),O=0,xe=0;xe<P;++xe){var j=Z-me+xe&32767,$=w[j],H=j-$&32767;H>O&&(O=H,ge=j)}}}ne=ge,ge=w[ne],me+=ne-ge&32767}if(se){M[Be++]=268435456|ym[te]<<18|l_[se];var Y=ym[te]&31,Ce=l_[se]&31;R+=kg[Y]+Og[Ce],++L[257+Y],++ee[Ce],N=Z+te,++W}else M[Be++]=n[Z],++L[n[Z]]}}for(Z=Math.max(Z,N);Z<i;++Z)M[Be++]=n[Z],++L[n[Z]];c=c_(n,A,d,M,L,ee,R,Be,k,Z-k,c),d||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=y,s.p=w,s.i=Z,s.w=N)}else{for(var Z=s.w||0;Z<i+d;Z+=65535){var fe=Z+65535;fe>=i&&(A[c/8|0]=d,fe=i),c=aB(A,c+1,n.subarray(Z,fe))}s.i=i}return iB(a,0,r+X1(c)+o)},lB=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,s=t.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=t[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},HD=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new _s(s.length+n.length);i.set(s),i.set(n,s.length),n=i,o.w=s.length}return MD(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},dB=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},jD=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=lB();o.p(e.dictionary),dB(n,2,o.d())}},RD=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Gi(6,"invalid zlib data"),(n[1]>>5&1)==1&&Gi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function xm(n,e){e||(e={});var t=lB();t.p(n);var r=HD(n,e,e.dictionary?6:2,4);return jD(r,e),dB(r,r.length-4,t.d()),r}function $D(n,e){return DD(n.subarray(RD(n),-4),{i:2},e,e)}var qD=typeof TextDecoder<"u"&&new TextDecoder,KD=0;try{qD.decode(AB,{stream:!0}),KD=1}catch{}var Ir=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function e0(){Ir.console&&typeof Ir.console.log=="function"&&Ir.console.log.apply(Ir.console,arguments)}var Tn={log:e0,warn:function(n){Ir.console&&(typeof Ir.console.warn=="function"?Ir.console.warn.apply(Ir.console,arguments):e0.call(null,arguments))},error:function(n){Ir.console&&(typeof Ir.console.error=="function"?Ir.console.error.apply(Ir.console,arguments):e0(n))}};function t0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Ul(r.response,e,t)},r.onerror=function(){Tn.error("could not download file")},r.send()}function u_(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Mf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Qu,zm,Ul=Ir.saveAs||((typeof window>"u"?"undefined":Sn(window))!=="object"||window!==Ir?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ir.URL||Ir.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?u_(o.href)?t0(n,e,t):Mf(o,o.target="_blank"):Mf(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Mf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(u_(n))t0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Mf(r)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:Sn(s)!=="object"&&(Tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return t0(n,e,t);var o=n.type==="application/octet-stream",s=/constructor/i.test(Ir.HTMLElement)||Ir.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&s)&&(typeof FileReader>"u"?"undefined":Sn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=i?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var A=Ir.URL||Ir.webkitURL,d=A.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){A.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cB(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,s=t[r].process,i=o.exec(n);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),A=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),"#"+a+A+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function r0(n,e){var t=n[0],r=n[1],o=n[2],s=n[3];t=fs(t,r,o,s,e[0],7,-680876936),s=fs(s,t,r,o,e[1],12,-389564586),o=fs(o,s,t,r,e[2],17,606105819),r=fs(r,o,s,t,e[3],22,-1044525330),t=fs(t,r,o,s,e[4],7,-176418897),s=fs(s,t,r,o,e[5],12,1200080426),o=fs(o,s,t,r,e[6],17,-1473231341),r=fs(r,o,s,t,e[7],22,-45705983),t=fs(t,r,o,s,e[8],7,1770035416),s=fs(s,t,r,o,e[9],12,-1958414417),o=fs(o,s,t,r,e[10],17,-42063),r=fs(r,o,s,t,e[11],22,-1990404162),t=fs(t,r,o,s,e[12],7,1804603682),s=fs(s,t,r,o,e[13],12,-40341101),o=fs(o,s,t,r,e[14],17,-1502002290),t=ps(t,r=fs(r,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=ps(s,t,r,o,e[6],9,-1069501632),o=ps(o,s,t,r,e[11],14,643717713),r=ps(r,o,s,t,e[0],20,-373897302),t=ps(t,r,o,s,e[5],5,-701558691),s=ps(s,t,r,o,e[10],9,38016083),o=ps(o,s,t,r,e[15],14,-660478335),r=ps(r,o,s,t,e[4],20,-405537848),t=ps(t,r,o,s,e[9],5,568446438),s=ps(s,t,r,o,e[14],9,-1019803690),o=ps(o,s,t,r,e[3],14,-187363961),r=ps(r,o,s,t,e[8],20,1163531501),t=ps(t,r,o,s,e[13],5,-1444681467),s=ps(s,t,r,o,e[2],9,-51403784),o=ps(o,s,t,r,e[7],14,1735328473),t=gs(t,r=ps(r,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=gs(s,t,r,o,e[8],11,-2022574463),o=gs(o,s,t,r,e[11],16,1839030562),r=gs(r,o,s,t,e[14],23,-35309556),t=gs(t,r,o,s,e[1],4,-1530992060),s=gs(s,t,r,o,e[4],11,1272893353),o=gs(o,s,t,r,e[7],16,-155497632),r=gs(r,o,s,t,e[10],23,-1094730640),t=gs(t,r,o,s,e[13],4,681279174),s=gs(s,t,r,o,e[0],11,-358537222),o=gs(o,s,t,r,e[3],16,-722521979),r=gs(r,o,s,t,e[6],23,76029189),t=gs(t,r,o,s,e[9],4,-640364487),s=gs(s,t,r,o,e[12],11,-421815835),o=gs(o,s,t,r,e[15],16,530742520),t=vs(t,r=gs(r,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=vs(s,t,r,o,e[7],10,1126891415),o=vs(o,s,t,r,e[14],15,-1416354905),r=vs(r,o,s,t,e[5],21,-57434055),t=vs(t,r,o,s,e[12],6,1700485571),s=vs(s,t,r,o,e[3],10,-1894986606),o=vs(o,s,t,r,e[10],15,-1051523),r=vs(r,o,s,t,e[1],21,-2054922799),t=vs(t,r,o,s,e[8],6,1873313359),s=vs(s,t,r,o,e[15],10,-30611744),o=vs(o,s,t,r,e[6],15,-1560198380),r=vs(r,o,s,t,e[13],21,1309151649),t=vs(t,r,o,s,e[4],6,-145523070),s=vs(s,t,r,o,e[11],10,-1120210379),o=vs(o,s,t,r,e[2],15,718787259),r=vs(r,o,s,t,e[9],21,-343485551),n[0]=ol(t,n[0]),n[1]=ol(r,n[1]),n[2]=ol(o,n[2]),n[3]=ol(s,n[3])}function Dg(n,e,t,r,o,s){return e=ol(ol(e,n),ol(r,s)),ol(e<<o|e>>>32-o,t)}function fs(n,e,t,r,o,s,i){return Dg(e&t|~e&r,n,e,o,s,i)}function ps(n,e,t,r,o,s,i){return Dg(e&r|t&~r,n,e,o,s,i)}function gs(n,e,t,r,o,s,i){return Dg(e^t^r,n,e,o,s,i)}function vs(n,e,t,r,o,s,i){return Dg(t^(e|~r),n,e,o,s,i)}function uB(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)r0(r,VD(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(r0(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,r0(r,o),r}function VD(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Qu=Ir.atob.bind(Ir),zm=Ir.btoa.bind(Ir);var h_="0123456789abcdef".split("");function GD(n){for(var e="",t=0;t<4;t++)e+=h_[n>>8*t+4&15]+h_[n>>8*t&15];return e}function WD(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Bm(n){return uB(n).map(WD).join("")}var XD=function(n){for(var e=0;e<n.length;e++)n[e]=GD(n[e]);return n.join("")}(uB("hello"))!="5d41402abc4b2a76b9719d911017c592";function ol(n,e){if(XD){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Cm(n,e){var t,r,o,s;if(n!==t){for(var i=(o=n,s=1+(256/n.length>>0),new Array(s+1).join(o)),a=[],A=0;A<256;A++)a[A]=A;var d=0;for(A=0;A<256;A++){var c=a[A];d=(d+c+i.charCodeAt(A))%256,a[A]=a[d],a[d]=c}t=n,r=a}else a=r;var u=e.length,h=0,f=0,g="";for(A=0;A<u;A++)f=(f+(c=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=c,i=a[(a[h]+a[f])%256],g+=String.fromCharCode(e.charCodeAt(A)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var f_={print:4,modify:8,copy:16,"annot-forms":32};function Wd(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(a){if(f_.perm!==void 0)throw new Error("Invalid permission: "+a);o+=f_[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^o)),this.encryptionKey=Bm(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Cm(this.encryptionKey,this.padding)}function Xd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function p_(n){if(Sn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!o],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var i=e[t][s];try{i[0].apply(n,r)}catch(a){Ir.console&&Tn.error("jsPDF PubSub Error",a.message,a)}i[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kp(n){if(!(this instanceof Kp))return new Kp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function hB(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ol(n,e,t,r,o){if(!(this instanceof Ol))return new Ol(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,hB.call(this,r,o)}function rc(n,e,t,r,o){if(!(this instanceof rc))return new rc(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,hB.call(this,r,o)}function Sr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],i=[],a=1,A=16,d="S",c=null;Sn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(A=n.floatPrecision),d=n.defaultPathOperation||"S"),i=n.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",t=(""+(t||"P")).toLowerCase();var u=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=p_;var g="1.3",w=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(b){g=b};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var x=f.__private__.getPageFormat=function(b){return y[b]};o=o||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},I=C.COMPAT;function M(){this.saveGraphicsState(),D(new Ze(ue,0,0,-ue,0,bi()*ue).toString()+" cm"),this.setFontSize(this.getFontSize()/ue),d="n",I=C.ADVANCED}function L(){this.restoreGraphicsState(),d="S",I=C.COMPAT}var ee=f.__private__.combineFontStyleAndFontWeight=function(b,K){if(b=="bold"&&K=="normal"||b=="bold"&&K==400||b=="normal"&&K=="italic"||b=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(b=K==400||K==="normal"?b==="italic"?"italic":"normal":K!=700&&K!=="bold"||b!=="normal"?(K==700?"bold":K)+""+b:"bold"),b};f.advancedAPI=function(b){var K=I===C.COMPAT;return K&&M.call(this),typeof b!="function"||(b(this),K&&L.call(this)),this},f.compatAPI=function(b){var K=I===C.ADVANCED;return K&&L.call(this),typeof b!="function"||(b(this),K&&M.call(this)),this},f.isAdvancedAPI=function(){return I===C.ADVANCED};var W,R=function(b){if(I!==C.ADVANCED)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=f.roundToPrecision=f.__private__.roundToPrecision=function(b,K){var Te=e||K;if(isNaN(b)||isNaN(Te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(Te).replace(/0+$/,"")};W=f.hpf=f.__private__.hpf=typeof A=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(b,A)}:A==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(b,16)};var Be=f.f2=f.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return Z(b,2)},N=f.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return Z(b,3)},k=f.scale=f.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return I===C.COMPAT?b*ue:I===C.ADVANCED?b:void 0},J=function(b){return I===C.COMPAT?bi()-b:I===C.ADVANCED?b:void 0},ne=function(b){return k(J(b))};f.__private__.setPrecision=f.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var ge,pe="00000000000000000000000000000000",xe=f.__private__.getFileId=function(){return pe},te=f.__private__.setFileId=function(b){return pe=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Mr=new Wd(c.userPermissions,c.userPassword,c.ownerPassword,pe)),pe};f.setFileId=function(b){return te(b),this},f.getFileId=function(){return xe()};var se=f.__private__.convertDateToPDFDate=function(b){var K=b.getTimezoneOffset(),Te=K<0?"+":"-",He=Math.floor(Math.abs(K/60)),nt=Math.abs(K%60),xt=[Te,E(He),"'",E(nt),"'"].join("");return["D:",b.getFullYear(),E(b.getMonth()+1),E(b.getDate()),E(b.getHours()),E(b.getMinutes()),E(b.getSeconds()),xt].join("")},oe=f.__private__.convertPDFDateToDate=function(b){var K=parseInt(b.substr(2,4),10),Te=parseInt(b.substr(6,2),10)-1,He=parseInt(b.substr(8,2),10),nt=parseInt(b.substr(10,2),10),xt=parseInt(b.substr(12,2),10),Pt=parseInt(b.substr(14,2),10);return new Date(K,Te,He,nt,xt,Pt,0)},me=f.__private__.setCreationDate=function(b){var K;if(b===void 0&&(b=new Date),b instanceof Date)K=se(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=b}return ge=K},B=f.__private__.getCreationDate=function(b){var K=ge;return b==="jsDate"&&(K=oe(ge)),K};f.setCreationDate=function(b){return me(b),this},f.getCreationDate=function(b){return B(b)};var F,E=f.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},T=f.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},P=0,O=[],j=[],$=0,H=[],Y=[],Ce=!1,fe=j,Le=function(){P=0,$=0,j=[],O=[],H=[],ir=yt(),qt=yt()};f.__private__.setCustomOutputDestination=function(b){Ce=!0,fe=b};var X=function(b){Ce||(fe=b)};f.__private__.resetCustomOutputDestination=function(){Ce=!1,fe=j};var D=f.__private__.out=function(b){return b=b.toString(),$+=b.length+1,fe.push(b),fe},Ae=f.__private__.write=function(b){return D(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},ye=f.__private__.getArrayBuffer=function(b){for(var K=b.length,Te=new ArrayBuffer(K),He=new Uint8Array(Te);K--;)He[K]=b.charCodeAt(K);return Te},ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ae};var le=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(b){return le=I===C.ADVANCED?b/ue:b,this};var Ee,Me=f.__private__.getFontSize=f.getFontSize=function(){return I===C.COMPAT?le:le*ue},ze=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(b){return ze=b,this},f.__private__.getR2L=f.getR2L=function(){return ze};var Se,ve=f.__private__.setZoomMode=function(b){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))Ee=b;else if(isNaN(b)){if(K.indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');Ee=b}else Ee=parseInt(b,10)};f.__private__.getZoomMode=function(){return Ee};var Oe,Ne=f.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');Se=b};f.__private__.getPageMode=function(){return Se};var _e=f.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');Oe=b};f.__private__.getLayoutMode=function(){return Oe},f.__private__.setDisplayMode=f.setDisplayMode=function(b,K,Te){return ve(b),_e(K),Ne(Te),this};var q={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(b){if(Object.keys(q).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return q[b]},f.__private__.getDocumentProperties=function(){return q},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(b){for(var K in q)q.hasOwnProperty(K)&&b[K]&&(q[K]=b[K]);return this},f.__private__.setDocumentProperty=function(b,K){if(Object.keys(q).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return q[b]=K};var de,ue,Fe,Pe,it,We={},je={},he=[],De={},ot={},Ge={},Je={},rt=null,ht=0,$e=[],st=new p_(f),Bt=n.hotfixes||[],Ct={},Tt={},wt=[],Ze=function b(K,Te,He,nt,xt,Pt){if(!(this instanceof b))return new b(K,Te,He,nt,xt,Pt);isNaN(K)&&(K=1),isNaN(Te)&&(Te=0),isNaN(He)&&(He=0),isNaN(nt)&&(nt=1),isNaN(xt)&&(xt=0),isNaN(Pt)&&(Pt=0),this._matrix=[K,Te,He,nt,xt,Pt]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(b)},Ze.prototype.multiply=function(b){var K=b.sx*this.sx+b.shy*this.shx,Te=b.sx*this.shy+b.shy*this.sy,He=b.shx*this.sx+b.sy*this.shx,nt=b.shx*this.shy+b.sy*this.sy,xt=b.tx*this.sx+b.ty*this.shx+this.tx,Pt=b.tx*this.shy+b.ty*this.sy+this.ty;return new Ze(K,Te,He,nt,xt,Pt)},Ze.prototype.decompose=function(){var b=this.sx,K=this.shy,Te=this.shx,He=this.sy,nt=this.tx,xt=this.ty,Pt=Math.sqrt(b*b+K*K),Zt=(b/=Pt)*Te+(K/=Pt)*He;Te-=b*Zt,He-=K*Zt;var fr=Math.sqrt(Te*Te+He*He);return Zt/=fr,b*(He/=fr)<K*(Te/=fr)&&(b=-b,K=-K,Zt=-Zt,Pt=-Pt),{scale:new Ze(Pt,0,0,fr,0,0),translate:new Ze(1,0,0,1,nt,xt),rotate:new Ze(b,K,-K,b,0,0),skew:new Ze(1,0,Zt,1,0,0)}},Ze.prototype.toString=function(b){return this.join(" ")},Ze.prototype.inversed=function(){var b=this.sx,K=this.shy,Te=this.shx,He=this.sy,nt=this.tx,xt=this.ty,Pt=1/(b*He-K*Te),Zt=He*Pt,fr=-K*Pt,Ur=-Te*Pt,Qr=b*Pt;return new Ze(Zt,fr,Ur,Qr,-Zt*nt-Ur*xt,-fr*nt-Qr*xt)},Ze.prototype.applyToPoint=function(b){var K=b.x*this.sx+b.y*this.shx+this.tx,Te=b.x*this.shy+b.y*this.sy+this.ty;return new _i(K,Te)},Ze.prototype.applyToRectangle=function(b){var K=this.applyToPoint(b),Te=this.applyToPoint(new _i(b.x+b.w,b.y+b.h));return new ca(K.x,K.y,Te.x-K.x,Te.y-K.y)},Ze.prototype.clone=function(){var b=this.sx,K=this.shy,Te=this.shx,He=this.sy,nt=this.tx,xt=this.ty;return new Ze(b,K,Te,He,nt,xt)},f.Matrix=Ze;var kt=f.matrixMult=function(b,K){return K.multiply(b)},It=new Ze(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=It;var jt=function(b,K){if(!ot[b]){var Te=(K instanceof Ol?"Sh":"P")+(Object.keys(De).length+1).toString(10);K.id=Te,ot[b]=Te,De[Te]=K,st.publish("addPattern",K)}};f.ShadingPattern=Ol,f.TilingPattern=rc,f.addShadingPattern=function(b,K){return R("addShadingPattern()"),jt(b,K),this},f.beginTilingPattern=function(b){R("beginTilingPattern()"),Ka(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},f.endTilingPattern=function(b,K){R("endTilingPattern()"),K.stream=Y[F].join(`
`),jt(b,K),st.publish("endTilingPattern",K),wt.pop().restore()};var et=f.__private__.newObject=function(){var b=yt();return mt(b,!0),b},yt=f.__private__.newObjectDeferred=function(){return P++,O[P]=function(){return $},P},mt=function(b,K){return K=typeof K=="boolean"&&K,O[b]=$,K&&D(b+" 0 obj"),b},Vt=f.__private__.newAdditionalObject=function(){var b={objId:yt(),content:""};return H.push(b),b},ir=yt(),qt=yt(),Gt=f.__private__.decodeColorString=function(b){var K=b.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var Te=parseFloat(K[0]);K=[Te,Te,Te,"r"]}for(var He="#",nt=0;nt<3;nt++)He+=("0"+Math.floor(255*parseFloat(K[nt])).toString(16)).slice(-2);return He},ar=f.__private__.encodeColorString=function(b){var K;typeof b=="string"&&(b={ch1:b});var Te=b.ch1,He=b.ch2,nt=b.ch3,xt=b.ch4,Pt=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Te=="string"&&Te.charAt(0)!=="#"){var Zt=new cB(Te);if(Zt.ok)Te=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Te))throw new Error('Invalid color "'+Te+'" passed to jsPDF.encodeColorString.')}if(typeof Te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Te)&&(Te="#"+Te[1]+Te[1]+Te[2]+Te[2]+Te[3]+Te[3]),typeof Te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Te)){var fr=parseInt(Te.substr(1),16);Te=fr>>16&255,He=fr>>8&255,nt=255&fr}if(He===void 0||xt===void 0&&Te===He&&He===nt)if(typeof Te=="string")K=Te+" "+Pt[0];else switch(b.precision){case 2:K=Be(Te/255)+" "+Pt[0];break;case 3:default:K=N(Te/255)+" "+Pt[0]}else if(xt===void 0||Sn(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return K=["1.","1.","1.",Pt[1]].join(" ");if(typeof Te=="string")K=[Te,He,nt,Pt[1]].join(" ");else switch(b.precision){case 2:K=[Be(Te/255),Be(He/255),Be(nt/255),Pt[1]].join(" ");break;default:case 3:K=[N(Te/255),N(He/255),N(nt/255),Pt[1]].join(" ")}}else if(typeof Te=="string")K=[Te,He,nt,xt,Pt[2]].join(" ");else switch(b.precision){case 2:K=[Be(Te),Be(He),Be(nt),Be(xt),Pt[2]].join(" ");break;case 3:default:K=[N(Te),N(He),N(nt),N(xt),Pt[2]].join(" ")}return K},St=f.__private__.getFilters=function(){return i},ft=f.__private__.putStream=function(b){var K=(b=b||{}).data||"",Te=b.filters||St(),He=b.alreadyAppliedFilters||[],nt=b.addLength1||!1,xt=K.length,Pt=b.objectId,Zt=function(zo){return zo};if(c!==null&&Pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Zt=Mr.encryptor(Pt,0));var fr={};Te===!0&&(Te=["FlateEncode"]);var Ur=b.additionalKeyValues||[],Qr=(fr=Sr.API.processDataByFilters!==void 0?Sr.API.processDataByFilters(K,Te):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(He)?He.join(" "):He.toString());if(fr.data.length!==0&&(Ur.push({key:"Length",value:fr.data.length}),nt===!0&&Ur.push({key:"Length1",value:xt})),Qr.length!=0)if(Qr.split("/").length-1==1)Ur.push({key:"Filter",value:Qr});else{Ur.push({key:"Filter",value:"["+Qr+"]"});for(var Hr=0;Hr<Ur.length;Hr+=1)if(Ur[Hr].key==="DecodeParms"){for(var Fn=[],Pn=0;Pn<fr.reverseChain.split("/").length-1;Pn+=1)Fn.push("null");Fn.push(Ur[Hr].value),Ur[Hr].value="["+Fn.join(" ")+"]"}}D("<<");for(var Gn=0;Gn<Ur.length;Gn++)D("/"+Ur[Gn].key+" "+Ur[Gn].value);D(">>"),fr.data.length!==0&&(D("stream"),D(Zt(fr.data)),D("endstream"))},Dt=f.__private__.putPage=function(b){var K=b.number,Te=b.data,He=b.objId,nt=b.contentsObjId;mt(He,!0),D("<</Type /Page"),D("/Parent "+b.rootDictionaryObjId+" 0 R"),D("/Resources "+b.resourceDictionaryObjId+" 0 R"),D("/MediaBox ["+parseFloat(W(b.mediaBox.bottomLeftX))+" "+parseFloat(W(b.mediaBox.bottomLeftY))+" "+W(b.mediaBox.topRightX)+" "+W(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&D("/CropBox ["+W(b.cropBox.bottomLeftX)+" "+W(b.cropBox.bottomLeftY)+" "+W(b.cropBox.topRightX)+" "+W(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&D("/BleedBox ["+W(b.bleedBox.bottomLeftX)+" "+W(b.bleedBox.bottomLeftY)+" "+W(b.bleedBox.topRightX)+" "+W(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&D("/TrimBox ["+W(b.trimBox.bottomLeftX)+" "+W(b.trimBox.bottomLeftY)+" "+W(b.trimBox.topRightX)+" "+W(b.trimBox.topRightY)+"]"),b.artBox!==null&&D("/ArtBox ["+W(b.artBox.bottomLeftX)+" "+W(b.artBox.bottomLeftY)+" "+W(b.artBox.topRightX)+" "+W(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&D("/UserUnit "+b.userUnit),st.publish("putPage",{objId:He,pageContext:$e[K],pageNumber:K,page:Te}),D("/Contents "+nt+" 0 R"),D(">>"),D("endobj");var xt=Te.join(`
`);return I===C.ADVANCED&&(xt+=`
Q`),mt(nt,!0),ft({data:xt,filters:St(),objectId:nt}),D("endobj"),He},Yt=f.__private__.putPages=function(){var b,K,Te=[];for(b=1;b<=ht;b++)$e[b].objId=yt(),$e[b].contentsObjId=yt();for(b=1;b<=ht;b++)Te.push(Dt({number:b,data:Y[b],objId:$e[b].objId,contentsObjId:$e[b].contentsObjId,mediaBox:$e[b].mediaBox,cropBox:$e[b].cropBox,bleedBox:$e[b].bleedBox,trimBox:$e[b].trimBox,artBox:$e[b].artBox,userUnit:$e[b].userUnit,rootDictionaryObjId:ir,resourceDictionaryObjId:qt}));mt(ir,!0),D("<</Type /Pages");var He="/Kids [";for(K=0;K<ht;K++)He+=Te[K]+" 0 R ";D(He+"]"),D("/Count "+ht),D(">>"),D("endobj"),st.publish("postPutPages")},dr=function(b){st.publish("putFont",{font:b,out:D,newObject:et,putStream:ft}),b.isAlreadyPutted!==!0&&(b.objectNumber=et(),D("<<"),D("/Type /Font"),D("/BaseFont /"+Xd(b.postScriptName)),D("/Subtype /Type1"),typeof b.encoding=="string"&&D("/Encoding /"+b.encoding),D("/FirstChar 32"),D("/LastChar 255"),D(">>"),D("endobj"))},ur=function(){for(var b in We)We.hasOwnProperty(b)&&(u===!1||u===!0&&h.hasOwnProperty(b))&&dr(We[b])},hr=function(b){b.objectNumber=et();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[W(b.x),W(b.y),W(b.x+b.width),W(b.y+b.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var Te=b.pages[1].join(`
`);ft({data:Te,additionalKeyValues:K,objectId:b.objectNumber}),D("endobj")},vr=function(){for(var b in Ct)Ct.hasOwnProperty(b)&&hr(Ct[b])},fn=function(b,K){var Te,He=[],nt=1/(K-1);for(Te=0;Te<1;Te+=nt)He.push(Te);if(He.push(1),b[0].offset!=0){var xt={offset:0,color:b[0].color};b.unshift(xt)}if(b[b.length-1].offset!=1){var Pt={offset:1,color:b[b.length-1].color};b.push(Pt)}for(var Zt="",fr=0,Ur=0;Ur<He.length;Ur++){for(Te=He[Ur];Te>b[fr+1].offset;)fr++;var Qr=b[fr].offset,Hr=(Te-Qr)/(b[fr+1].offset-Qr),Fn=b[fr].color,Pn=b[fr+1].color;Zt+=T(Math.round((1-Hr)*Fn[0]+Hr*Pn[0]).toString(16))+T(Math.round((1-Hr)*Fn[1]+Hr*Pn[1]).toString(16))+T(Math.round((1-Hr)*Fn[2]+Hr*Pn[2]).toString(16))}return Zt.trim()},pn=function(b,K){K||(K=21);var Te=et(),He=fn(b.colors,K),nt=[];nt.push({key:"FunctionType",value:"0"}),nt.push({key:"Domain",value:"[0.0 1.0]"}),nt.push({key:"Size",value:"["+K+"]"}),nt.push({key:"BitsPerSample",value:"8"}),nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:He,additionalKeyValues:nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Te}),D("endobj"),b.objectNumber=et(),D("<< /ShadingType "+b.type),D("/ColorSpace /DeviceRGB");var xt="/Coords ["+W(parseFloat(b.coords[0]))+" "+W(parseFloat(b.coords[1]))+" ";b.type===2?xt+=W(parseFloat(b.coords[2]))+" "+W(parseFloat(b.coords[3])):xt+=W(parseFloat(b.coords[2]))+" "+W(parseFloat(b.coords[3]))+" "+W(parseFloat(b.coords[4]))+" "+W(parseFloat(b.coords[5])),D(xt+="]"),b.matrix&&D("/Matrix ["+b.matrix.toString()+"]"),D("/Function "+Te+" 0 R"),D("/Extend [true true]"),D(">>"),D("endobj")},kr=function(b,K){var Te=yt(),He=et();K.push({resourcesOid:Te,objectOid:He}),b.objectNumber=He;var nt=[];nt.push({key:"Type",value:"/Pattern"}),nt.push({key:"PatternType",value:"1"}),nt.push({key:"PaintType",value:"1"}),nt.push({key:"TilingType",value:"1"}),nt.push({key:"BBox",value:"["+b.boundingBox.map(W).join(" ")+"]"}),nt.push({key:"XStep",value:W(b.xStep)}),nt.push({key:"YStep",value:W(b.yStep)}),nt.push({key:"Resources",value:Te+" 0 R"}),b.matrix&&nt.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),ft({data:b.stream,additionalKeyValues:nt,objectId:b.objectNumber}),D("endobj")},wr=function(b){var K;for(K in De)De.hasOwnProperty(K)&&(De[K]instanceof Ol?pn(De[K]):De[K]instanceof rc&&kr(De[K],b))},Vr=function(b){for(var K in b.objectNumber=et(),D("<<"),b)switch(K){case"opacity":D("/ca "+Be(b[K]));break;case"stroke-opacity":D("/CA "+Be(b[K]))}D(">>"),D("endobj")},Rr=function(){var b;for(b in Ge)Ge.hasOwnProperty(b)&&Vr(Ge[b])},pr=function(){for(var b in D("/XObject <<"),Ct)Ct.hasOwnProperty(b)&&Ct[b].objectNumber>=0&&D("/"+b+" "+Ct[b].objectNumber+" 0 R");st.publish("putXobjectDict"),D(">>")},yr=function(){Mr.oid=et(),D("<<"),D("/Filter /Standard"),D("/V "+Mr.v),D("/R "+Mr.r),D("/U <"+Mr.toHexString(Mr.U)+">"),D("/O <"+Mr.toHexString(Mr.O)+">"),D("/P "+Mr.P),D(">>"),D("endobj")},Gr=function(){for(var b in D("/Font <<"),We)We.hasOwnProperty(b)&&(u===!1||u===!0&&h.hasOwnProperty(b))&&D("/"+b+" "+We[b].objectNumber+" 0 R");D(">>")},on=function(){if(Object.keys(De).length>0){for(var b in D("/Shading <<"),De)De.hasOwnProperty(b)&&De[b]instanceof Ol&&De[b].objectNumber>=0&&D("/"+b+" "+De[b].objectNumber+" 0 R");st.publish("putShadingPatternDict"),D(">>")}},En=function(b){if(Object.keys(De).length>0){for(var K in D("/Pattern <<"),De)De.hasOwnProperty(K)&&De[K]instanceof f.TilingPattern&&De[K].objectNumber>=0&&De[K].objectNumber<b&&D("/"+K+" "+De[K].objectNumber+" 0 R");st.publish("putTilingPatternDict"),D(">>")}},Wr=function(){if(Object.keys(Ge).length>0){var b;for(b in D("/ExtGState <<"),Ge)Ge.hasOwnProperty(b)&&Ge[b].objectNumber>=0&&D("/"+b+" "+Ge[b].objectNumber+" 0 R");st.publish("putGStateDict"),D(">>")}},mr=function(b){mt(b.resourcesOid,!0),D("<<"),D("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Gr(),on(),En(b.objectOid),Wr(),pr(),D(">>"),D("endobj")},qn=function(){var b=[];ur(),Rr(),vr(),wr(b),st.publish("putResources"),b.forEach(mr),mr({resourcesOid:qt,objectOid:Number.MAX_SAFE_INTEGER}),st.publish("postPutResources")},As=function(){st.publish("putAdditionalObjects");for(var b=0;b<H.length;b++){var K=H[b];mt(K.objId,!0),D(K.content),D("endobj")}st.publish("postPutAdditionalObjects")},Fo=function(b){je[b.fontName]=je[b.fontName]||{},je[b.fontName][b.fontStyle]=b.id},Oo=function(b,K,Te,He,nt){var xt={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:b,fontName:K,fontStyle:Te,encoding:He,isStandardFont:nt||!1,metadata:{}};return st.publish("addFont",{font:xt,instance:this}),We[xt.id]=xt,Fo(xt),xt.id},Ds=function(b){for(var K=0,Te=ae.length;K<Te;K++){var He=Oo.call(this,b[K][0],b[K][1],b[K][2],ae[K][3],!0);u===!1&&(h[He]=!0);var nt=b[K][0].split("-");Fo({id:He,fontName:nt[0],fontStyle:nt[1]||""})}st.publish("addFonts",{fonts:We,dictionary:je})},so=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(He){var K=He.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var Te="Error in function "+K.split(`
`)[0].split("<")[0]+": "+He.message;if(!Ir.console)throw new Error(Te);Ir.console.error(Te,He),Ir.alert&&alert(Te)}},b.foo.bar=b,b.foo},ls=function(b,K){var Te,He,nt,xt,Pt,Zt,fr,Ur,Qr;if(nt=(K=K||{}).sourceEncoding||"Unicode",Pt=K.outputEncoding,(K.autoencode||Pt)&&We[de].metadata&&We[de].metadata[nt]&&We[de].metadata[nt].encoding&&(xt=We[de].metadata[nt].encoding,!Pt&&We[de].encoding&&(Pt=We[de].encoding),!Pt&&xt.codePages&&(Pt=xt.codePages[0]),typeof Pt=="string"&&(Pt=xt[Pt]),Pt)){for(fr=!1,Zt=[],Te=0,He=b.length;Te<He;Te++)(Ur=Pt[b.charCodeAt(Te)])?Zt.push(String.fromCharCode(Ur)):Zt.push(b[Te]),Zt[Te].charCodeAt(0)>>8&&(fr=!0);b=Zt.join("")}for(Te=b.length;fr===void 0&&Te!==0;)b.charCodeAt(Te-1)>>8&&(fr=!0),Te--;if(!fr)return b;for(Zt=K.noBOM?[]:[254,255],Te=0,He=b.length;Te<He;Te++){if((Qr=(Ur=b.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+b+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(Qr),Zt.push(Ur-(Qr<<8))}return String.fromCharCode.apply(void 0,Zt)},Yn=f.__private__.pdfEscape=f.pdfEscape=function(b,K){return ls(b,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qe=f.__private__.beginPage=function(b){Y[++ht]=[],$e[ht]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},Rt(ht),X(Y[F])},vt=function(b,K){var Te,He,nt;switch(t=K||t,typeof b=="string"&&(Te=x(b.toLowerCase()),Array.isArray(Te)&&(He=Te[0],nt=Te[1])),Array.isArray(b)&&(He=b[0]*ue,nt=b[1]*ue),isNaN(He)&&(He=o[0],nt=o[1]),(He>14400||nt>14400)&&(Tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),He=Math.min(14400,He),nt=Math.min(14400,nt)),o=[He,nt],t.substr(0,1)){case"l":nt>He&&(o=[nt,He]);break;case"p":He>nt&&(o=[nt,He])}qe(o),ln(cs),D(us),$a!==0&&D($a+" J"),qa!==0&&D(qa+" j"),st.publish("addPage",{pageNumber:ht})},$t=function(b){b>0&&b<=ht&&(Y.splice(b,1),$e.splice(b,1),ht--,F>ht&&(F=ht),this.setPage(F))},Rt=function(b){b>0&&b<=ht&&(F=b)},Mt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Y.length-1},Wt=function(b,K,Te){var He,nt=void 0;return Te=Te||{},b=b!==void 0?b:We[de].fontName,K=K!==void 0?K:We[de].fontStyle,He=b.toLowerCase(),je[He]!==void 0&&je[He][K]!==void 0?nt=je[He][K]:je[b]!==void 0&&je[b][K]!==void 0?nt=je[b][K]:Te.disableWarning===!1&&Tn.warn("Unable to look up font label for font '"+b+"', '"+K+"'. Refer to getFontList() for available fonts."),nt||Te.noFallback||(nt=je.times[K])==null&&(nt=je.times.normal),nt},Kt=f.__private__.putInfo=function(){var b=et(),K=function(He){return He};for(var Te in c!==null&&(K=Mr.encryptor(b,0)),D("<<"),D("/Producer ("+Yn(K("jsPDF "+Sr.version))+")"),q)q.hasOwnProperty(Te)&&q[Te]&&D("/"+Te.substr(0,1).toUpperCase()+Te.substr(1)+" ("+Yn(K(q[Te]))+")");D("/CreationDate ("+Yn(K(ge))+")"),D(">>"),D("endobj")},_r=f.__private__.putCatalog=function(b){var K=(b=b||{}).rootDictionaryObjId||ir;switch(et(),D("<<"),D("/Type /Catalog"),D("/Pages "+K+" 0 R"),Ee||(Ee="fullwidth"),Ee){case"fullwidth":D("/OpenAction [3 0 R /FitH null]");break;case"fullheight":D("/OpenAction [3 0 R /FitV null]");break;case"fullpage":D("/OpenAction [3 0 R /Fit]");break;case"original":D("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Te=""+Ee;Te.substr(Te.length-1)==="%"&&(Ee=parseInt(Ee)/100),typeof Ee=="number"&&D("/OpenAction [3 0 R /XYZ null null "+Be(Ee)+"]")}switch(Oe||(Oe="continuous"),Oe){case"continuous":D("/PageLayout /OneColumn");break;case"single":D("/PageLayout /SinglePage");break;case"two":case"twoleft":D("/PageLayout /TwoColumnLeft");break;case"tworight":D("/PageLayout /TwoColumnRight")}Se&&D("/PageMode /"+Se),st.publish("putCatalog"),D(">>"),D("endobj")},Br=f.__private__.putTrailer=function(){D("trailer"),D("<<"),D("/Size "+(P+1)),D("/Root "+P+" 0 R"),D("/Info "+(P-1)+" 0 R"),c!==null&&D("/Encrypt "+Mr.oid+" 0 R"),D("/ID [ <"+pe+"> <"+pe+"> ]"),D(">>")},bn=f.__private__.putHeader=function(){D("%PDF-"+g),D("%")},Nt=f.__private__.putXRef=function(){var b="0000000000";D("xref"),D("0 "+(P+1)),D("0000000000 65535 f ");for(var K=1;K<=P;K++)typeof O[K]=="function"?D((b+O[K]()).slice(-10)+" 00000 n "):O[K]!==void 0?D((b+O[K]).slice(-10)+" 00000 n "):D("0000000000 00000 n ")},br=f.__private__.buildDocument=function(){Le(),X(j),st.publish("buildDocument"),bn(),Yt(),As(),qn(),c!==null&&yr(),Kt(),_r();var b=$;return Nt(),Br(),D("startxref"),D(""+b),D("%%EOF"),X(Y[F]),j.join(`
`)},$r=f.__private__.getBlob=function(b){return new Blob([ye(b)],{type:"application/pdf"})},Mn=f.output=f.__private__.output=so(function(b,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",b){case void 0:return br();case"save":f.save(K.filename);break;case"arraybuffer":return ye(br());case"blob":return $r(br());case"bloburi":case"bloburl":if(Ir.URL!==void 0&&typeof Ir.URL.createObjectURL=="function")return Ir.URL&&Ir.URL.createObjectURL($r(br()))||void 0;Tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Te="",He=br();try{Te=zm(He)}catch{Te=zm(unescape(encodeURIComponent(He)))}return"data:application/pdf;filename="+K.filename+";base64,"+Te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(nt=K.pdfObjectUrl,xt="");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+nt+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Zt=Ir.open();return Zt!==null&&Zt.document.write(Pt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Ur=Ir.open();if(Ur!==null){Ur.document.write(fr);var Qr=this;Ur.document.documentElement.querySelector("#pdfViewer").onload=function(){Ur.document.title=K.filename,Ur.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qr.output("bloburl"))}}return Ur}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ir)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',Fn=Ir.open();if(Fn!==null&&(Fn.document.write(Hr),Fn.document.title=K.filename),Fn||typeof safari>"u")return Fn;break;case"datauri":case"dataurl":return Ir.document.location.href=this.output("datauristring",K);default:return null}}),Wo=function(b){return Array.isArray(Bt)===!0&&Bt.indexOf(b)>-1};switch(r){case"pt":ue=1;break;case"mm":ue=72/25.4;break;case"cm":ue=72/2.54;break;case"in":ue=72;break;case"px":ue=Wo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ue=12;break;case"ex":ue=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ue=r}var Mr=null;me(),te();var Kn=function(b){return c!==null?Mr.encryptor(b,0):function(K){return K}},xo=f.__private__.getPageInfo=f.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:$e[b].objId,pageNumber:b,pageContext:$e[b]}},Ht=f.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in $e)if($e[K].objId===b)break;return xo(K)},mi=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:$e[F].objId,pageNumber:F,pageContext:$e[F]}};f.addPage=function(){return vt.apply(this,arguments),this},f.setPage=function(){return Rt.apply(this,arguments),X.call(this,Y[F]),this},f.insertPage=function(b){return this.addPage(),this.movePage(F,b),this},f.movePage=function(b,K){var Te,He;if(b>K){Te=Y[b],He=$e[b];for(var nt=b;nt>K;nt--)Y[nt]=Y[nt-1],$e[nt]=$e[nt-1];Y[K]=Te,$e[K]=He,this.setPage(K)}else if(b<K){Te=Y[b],He=$e[b];for(var xt=b;xt<K;xt++)Y[xt]=Y[xt+1],$e[xt]=$e[xt+1];Y[K]=Te,$e[K]=He,this.setPage(K)}return this},f.deletePage=function(){return $t.apply(this,arguments),this},f.__private__.text=f.text=function(b,K,Te,He,nt){var xt,Pt,Zt,fr,Ur,Qr,Hr,Fn,Pn,Gn=(He=He||{}).scope||this;if(typeof b=="number"&&typeof K=="number"&&(typeof Te=="string"||Array.isArray(Te))){var zo=Te;Te=K,K=b,b=zo}if(arguments[3]instanceof Ze?(R("The transform parameter of text() with a Matrix value"),Pn=nt):(Zt=arguments[4],fr=arguments[5],Sn(Hr=arguments[3])==="object"&&Hr!==null||(typeof Zt=="string"&&(fr=Zt,Zt=null),typeof Hr=="string"&&(fr=Hr,Hr=null),typeof Hr=="number"&&(Zt=Hr,Hr=null),He={flags:Hr,angle:Zt,align:fr})),isNaN(K)||isNaN(Te)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return Gn;var Zn="",No=!1,Xo=typeof He.lineHeightFactor=="number"?He.lineHeightFactor:Vn,hs=Gn.internal.scaleFactor;function ga(On){return On=On.split("	").join(Array(He.TabLen||9).join(" ")),Yn(On,Hr)}function va(On){for(var Dn,ho=On.concat(),Qo=[],Ya=ho.length;Ya--;)typeof(Dn=ho.shift())=="string"?Qo.push(Dn):Array.isArray(On)&&(Dn.length===1||Dn[1]===void 0&&Dn[2]===void 0)?Qo.push(Dn[0]):Qo.push([Dn[0],Dn[1],Dn[2]]);return Qo}function Va(On,Dn){var ho;if(typeof On=="string")ho=Dn(On)[0];else if(Array.isArray(On)){for(var Qo,Ya,$c=On.concat(),wd=[],vh=$c.length;vh--;)typeof(Qo=$c.shift())=="string"?wd.push(Dn(Qo)[0]):Array.isArray(Qo)&&typeof Qo[0]=="string"&&(Ya=Dn(Qo[0],Qo[1],Qo[2]),wd.push([Ya[0],Ya[1],Ya[2]]));ho=wd}return ho}var xn=!1,eo=!0;if(typeof b=="string")xn=!0;else if(Array.isArray(b)){var Mo=b.concat();Pt=[];for(var Yo,co=Mo.length;co--;)(typeof(Yo=Mo.shift())!="string"||Array.isArray(Yo)&&typeof Yo[0]!="string")&&(eo=!1);xn=eo}if(xn===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Lr=le/Gn.internal.scaleFactor,tn=Lr*(Xo-1);switch(He.baseline){case"bottom":Te-=tn;break;case"top":Te+=Lr-tn;break;case"hanging":Te+=Lr-2*tn;break;case"middle":Te+=Lr/2-tn}if((Qr=He.maxWidth||0)>0&&(typeof b=="string"?b=Gn.splitTextToSize(b,Qr):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(On,Dn){return On.concat(Gn.splitTextToSize(Dn,Qr))},[]))),xt={text:b,x:K,y:Te,options:He,mutex:{pdfEscape:Yn,activeFontKey:de,fonts:We,activeFontSize:le}},st.publish("preProcessText",xt),b=xt.text,Zt=(He=xt.options).angle,!(Pn instanceof Ze)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,He.rotationDirection===0&&(Zt=-Zt),I===C.ADVANCED&&(Zt=-Zt);var gn=Math.cos(Zt),Io=Math.sin(Zt);Pn=new Ze(gn,Io,-Io,gn,0,0)}else Zt&&Zt instanceof Ze&&(Pn=Zt);I!==C.ADVANCED||Pn||(Pn=It),(Ur=He.charSpace||Di)!==void 0&&(Zn+=W(k(Ur))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fn=He.horizontalScale)!==void 0&&(Zn+=W(100*Fn)+` Tz
`),He.lang;var kn=-1,Uo=He.renderingMode!==void 0?He.renderingMode:He.stroke,to=Gn.internal.getCurrentPageInfo().pageContext;switch(Uo){case 0:case!1:case"fill":kn=0;break;case 1:case!0:case"stroke":kn=1;break;case 2:case"fillThenStroke":kn=2;break;case 3:case"invisible":kn=3;break;case 4:case"fillAndAddForClipping":kn=4;break;case 5:case"strokeAndAddPathForClipping":kn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":kn=6;break;case 7:case"addToPathForClipping":kn=7}var oi=to.usedRenderingMode!==void 0?to.usedRenderingMode:-1;kn!==-1?Zn+=kn+` Tr
`:oi!==-1&&(Zn+=`0 Tr
`),kn!==-1&&(to.usedRenderingMode=kn),fr=He.align||"left";var Ho,Ga=le*Xo,bl=Gn.internal.pageSize.getWidth(),pd=We[de];Ur=He.charSpace||Di,Qr=He.maxWidth||0,Hr=Object.assign({autoencode:!0,noBOM:!0},He.flags);var ma=[],Wa=function(On){return Gn.getStringUnitWidth(On,{font:pd,charSpace:Ur,fontSize:le,doKerning:!1})*le/hs};if(Object.prototype.toString.call(b)==="[object Array]"){var Jo;Pt=va(b),fr!=="left"&&(Ho=Pt.map(Wa));var Zo,Bs=0;if(fr==="right"){K-=Ho[0],b=[],co=Pt.length;for(var es=0;es<co;es++)es===0?(Zo=Ns(K),Jo=Ms(Te)):(Zo=k(Bs-Ho[es]),Jo=-Ga),b.push([Pt[es],Zo,Jo]),Bs=Ho[es]}else if(fr==="center"){K-=Ho[0]/2,b=[],co=Pt.length;for(var si=0;si<co;si++)si===0?(Zo=Ns(K),Jo=Ms(Te)):(Zo=k((Bs-Ho[si])/2),Jo=-Ga),b.push([Pt[si],Zo,Jo]),Bs=Ho[si]}else if(fr==="left"){b=[],co=Pt.length;for(var gd=0;gd<co;gd++)b.push(Pt[gd])}else if(fr==="justify"&&pd.encoding==="Identity-H"){b=[],co=Pt.length,Qr=Qr!==0?Qr:bl;for(var Xa=0,uo=0;uo<co;uo++)if(Jo=uo===0?Ms(Te):-Ga,Zo=uo===0?Ns(K):Xa,uo<co-1){var Hc=k((Qr-Ho[uo])/(Pt[uo].split(" ").length-1)),Cs=Pt[uo].split(" ");b.push([Cs[0]+" ",Zo,Jo]),Xa=0;for(var xi=1;xi<Cs.length;xi++){var vd=(Wa(Cs[xi-1]+" "+Cs[xi])-Wa(Cs[xi]))*hs+Hc;xi==Cs.length-1?b.push([Cs[xi],vd,0]):b.push([Cs[xi]+" ",vd,0]),Xa-=vd}}else b.push([Pt[uo],Zo,Jo]);b.push(["",Xa,0])}else{if(fr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],co=Pt.length,Qr=Qr!==0?Qr:bl,uo=0;uo<co;uo++)Jo=uo===0?Ms(Te):-Ga,Zo=uo===0?Ns(K):0,uo<co-1?ma.push(W(k((Qr-Ho[uo])/(Pt[uo].split(" ").length-1)))):ma.push(0),b.push([Pt[uo],Zo,Jo])}}var gh=typeof He.R2L=="boolean"?He.R2L:ze;gh===!0&&(b=Va(b,function(On,Dn,ho){return[On.split("").reverse().join(""),Dn,ho]})),xt={text:b,x:K,y:Te,options:He,mutex:{pdfEscape:Yn,activeFontKey:de,fonts:We,activeFontSize:le}},st.publish("postProcessText",xt),b=xt.text,No=xt.mutex.isHex||!1;var jc=We[de].encoding;jc!=="WinAnsiEncoding"&&jc!=="StandardEncoding"||(b=Va(b,function(On,Dn,ho){return[ga(On),Dn,ho]})),Pt=va(b),b=[];for(var xl,zl,QA,Bl=0,md=1,Cl=Array.isArray(Pt[0])?md:Bl,TA="",Rc=function(On,Dn,ho){var Qo="";return ho instanceof Ze?(ho=typeof He.angle=="number"?kt(ho,new Ze(1,0,0,1,On,Dn)):kt(new Ze(1,0,0,1,On,Dn),ho),I===C.ADVANCED&&(ho=kt(new Ze(1,0,0,-1,0,0),ho)),Qo=ho.join(" ")+` Tm
`):Qo=W(On)+" "+W(Dn)+` Td
`,Qo},zi=0;zi<Pt.length;zi++){switch(TA="",Cl){case md:QA=(No?"<":"(")+Pt[zi][0]+(No?">":")"),xl=parseFloat(Pt[zi][1]),zl=parseFloat(Pt[zi][2]);break;case Bl:QA=(No?"<":"(")+Pt[zi]+(No?">":")"),xl=Ns(K),zl=Ms(Te)}ma!==void 0&&ma[zi]!==void 0&&(TA=ma[zi]+` Tw
`),zi===0?b.push(TA+Rc(xl,zl,Pn)+QA):Cl===Bl?b.push(TA+QA):Cl===md&&b.push(TA+Rc(xl,zl,Pn)+QA)}b=Cl===Bl?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Bi=`BT
/`;return Bi+=de+" "+le+` Tf
`,Bi+=W(le*Xo)+` TL
`,Bi+=ni+`
`,Bi+=Zn,Bi+=b,D(Bi+="ET"),h[de]=!0,Gn};var Jn=f.__private__.clip=f.clip=function(b){return D(b==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Jn("evenodd")},f.__private__.discardPath=f.discardPath=function(){return D("n"),this};var en=f.__private__.isValidStyle=function(b){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(K=!0),K};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(b){return en(b)&&(d=b),this};var Do=f.__private__.getStyle=f.getStyle=function(b){var K=d;switch(b){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=b}return K},zs=f.close=function(){return D("h"),this};f.stroke=function(){return D("S"),this},f.fill=function(b){return wi("f",b),this},f.fillEvenOdd=function(b){return wi("f*",b),this},f.fillStroke=function(b){return wi("B",b),this},f.fillStrokeEvenOdd=function(b){return wi("B*",b),this};var wi=function(b,K){Sn(K)==="object"?BA(K,b):D(b)},ds=function(b){b===null||I===C.ADVANCED&&b===void 0||(b=Do(b),D(b))};function ei(b,K,Te,He,nt){var xt=new rc(K||this.boundingBox,Te||this.xStep,He||this.yStep,this.gState,nt||this.matrix);xt.stream=this.stream;var Pt=b+"$$"+this.cloneIndex+++"$$";return jt(Pt,xt),xt}var BA=function(b,K){var Te=ot[b.key],He=De[Te];if(He instanceof Ol)D("q"),D(CA(K)),He.gState&&f.setGState(He.gState),D(b.matrix.toString()+" cm"),D("/"+Te+" sh"),D("Q");else if(He instanceof rc){var nt=new Ze(1,0,0,-1,0,bi());b.matrix&&(nt=nt.multiply(b.matrix||It),Te=ei.call(He,b.key,b.boundingBox,b.xStep,b.yStep,nt).id),D("q"),D("/Pattern cs"),D("/"+Te+" scn"),He.gState&&f.setGState(He.gState),D(K),D("Q")}},CA=function(b){switch(b){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Aa=f.moveTo=function(b,K){return D(W(k(b))+" "+W(ne(K))+" m"),this},Oi=f.lineTo=function(b,K){return D(W(k(b))+" "+W(ne(K))+" l"),this},yi=f.curveTo=function(b,K,Te,He,nt,xt){return D([W(k(b)),W(ne(K)),W(k(Te)),W(ne(He)),W(k(nt)),W(ne(xt)),"c"].join(" ")),this};f.__private__.line=f.line=function(b,K,Te,He,nt){if(isNaN(b)||isNaN(K)||isNaN(Te)||isNaN(He)||!en(nt))throw new Error("Invalid arguments passed to jsPDF.line");return I===C.COMPAT?this.lines([[Te-b,He-K]],b,K,[1,1],nt||"S"):this.lines([[Te-b,He-K]],b,K,[1,1]).stroke()},f.__private__.lines=f.lines=function(b,K,Te,He,nt,xt){var Pt,Zt,fr,Ur,Qr,Hr,Fn,Pn,Gn,zo,Zn,No;if(typeof b=="number"&&(No=Te,Te=K,K=b,b=No),He=He||[1,1],xt=xt||!1,isNaN(K)||isNaN(Te)||!Array.isArray(b)||!Array.isArray(He)||!en(nt)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Aa(K,Te),Pt=He[0],Zt=He[1],Ur=b.length,zo=K,Zn=Te,fr=0;fr<Ur;fr++)(Qr=b[fr]).length===2?(zo=Qr[0]*Pt+zo,Zn=Qr[1]*Zt+Zn,Oi(zo,Zn)):(Hr=Qr[0]*Pt+zo,Fn=Qr[1]*Zt+Zn,Pn=Qr[2]*Pt+zo,Gn=Qr[3]*Zt+Zn,zo=Qr[4]*Pt+zo,Zn=Qr[5]*Zt+Zn,yi(Hr,Fn,Pn,Gn,zo,Zn));return xt&&zs(),ds(nt),this},f.path=function(b){for(var K=0;K<b.length;K++){var Te=b[K],He=Te.c;switch(Te.op){case"m":Aa(He[0],He[1]);break;case"l":Oi(He[0],He[1]);break;case"c":yi.apply(this,He);break;case"h":zs()}}return this},f.__private__.rect=f.rect=function(b,K,Te,He,nt){if(isNaN(b)||isNaN(K)||isNaN(Te)||isNaN(He)||!en(nt))throw new Error("Invalid arguments passed to jsPDF.rect");return I===C.COMPAT&&(He=-He),D([W(k(b)),W(ne(K)),W(k(Te)),W(k(He)),"re"].join(" ")),ds(nt),this},f.__private__.triangle=f.triangle=function(b,K,Te,He,nt,xt,Pt){if(isNaN(b)||isNaN(K)||isNaN(Te)||isNaN(He)||isNaN(nt)||isNaN(xt)||!en(Pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Te-b,He-K],[nt-Te,xt-He],[b-nt,K-xt]],b,K,[1,1],Pt,!0),this},f.__private__.roundedRect=f.roundedRect=function(b,K,Te,He,nt,xt,Pt){if(isNaN(b)||isNaN(K)||isNaN(Te)||isNaN(He)||isNaN(nt)||isNaN(xt)||!en(Pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return nt=Math.min(nt,.5*Te),xt=Math.min(xt,.5*He),this.lines([[Te-2*nt,0],[nt*Zt,0,nt,xt-xt*Zt,nt,xt],[0,He-2*xt],[0,xt*Zt,-nt*Zt,xt,-nt,xt],[2*nt-Te,0],[-nt*Zt,0,-nt,-xt*Zt,-nt,-xt],[0,2*xt-He],[0,-xt*Zt,nt*Zt,-xt,nt,-xt]],b+nt,K,[1,1],Pt,!0),this},f.__private__.ellipse=f.ellipse=function(b,K,Te,He,nt){if(isNaN(b)||isNaN(K)||isNaN(Te)||isNaN(He)||!en(nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Te,Pt=4/3*(Math.SQRT2-1)*He;return Aa(b+Te,K),yi(b+Te,K-Pt,b+xt,K-He,b,K-He),yi(b-xt,K-He,b-Te,K-Pt,b-Te,K),yi(b-Te,K+Pt,b-xt,K+He,b,K+He),yi(b+xt,K+He,b+Te,K+Pt,b+Te,K),ds(nt),this},f.__private__.circle=f.circle=function(b,K,Te,He){if(isNaN(b)||isNaN(K)||isNaN(Te)||!en(He))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,K,Te,Te,He)},f.setFont=function(b,K,Te){return Te&&(K=ee(K,Te)),de=Wt(b,K,{disableWarning:!1}),this};var _l=f.__private__.getFont=f.getFont=function(){return We[Wt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var b,K,Te={};for(b in je)if(je.hasOwnProperty(b))for(K in Te[b]=[],je[b])je[b].hasOwnProperty(K)&&Te[b].push(K);return Te},f.addFont=function(b,K,Te,He,nt){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?nt=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Te=ee(Te,He)),nt=nt||"Identity-H",Oo.call(this,b,K,Te,nt)};var Vn,cs=n.lineWidth||.200025,ti=f.__private__.getLineWidth=f.getLineWidth=function(){return cs},ln=f.__private__.setLineWidth=f.setLineWidth=function(b){return cs=b,D(W(k(b))+" w"),this};f.__private__.setLineDash=Sr.API.setLineDash=Sr.API.setLineDashPattern=function(b,K){if(b=b||[],K=K||0,isNaN(K)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(Te){return W(k(Te))}).join(" "),K=W(k(K)),D("["+b+"] "+K+" d"),this};var la=f.__private__.getLineHeight=f.getLineHeight=function(){return le*Vn};f.__private__.getLineHeight=f.getLineHeight=function(){return le*Vn};var ja=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(Vn=b),this},da=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Vn};ja(n.lineHeight);var Ns=f.__private__.getHorizontalCoordinate=function(b){return k(b)},Ms=f.__private__.getVerticalCoordinate=function(b){return I===C.ADVANCED?b:$e[F].mediaBox.topRightY-$e[F].mediaBox.bottomLeftY-k(b)},SA=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(b){return W(Ns(b))},ri=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(b){return W(Ms(b))},us=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Gt(us)},f.__private__.setStrokeColor=f.setDrawColor=function(b,K,Te,He){return us=ar({ch1:b,ch2:K,ch3:Te,ch4:He,pdfColorType:"draw",precision:2}),D(us),this};var Ra=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Gt(Ra)},f.__private__.setFillColor=f.setFillColor=function(b,K,Te,He){return Ra=ar({ch1:b,ch2:K,ch3:Te,ch4:He,pdfColorType:"fill",precision:2}),D(Ra),this};var ni=n.textColor||"0 g",EA=f.__private__.getTextColor=f.getTextColor=function(){return Gt(ni)};f.__private__.setTextColor=f.setTextColor=function(b,K,Te,He){return ni=ar({ch1:b,ch2:K,ch3:Te,ch4:He,pdfColorType:"text",precision:3}),this};var Di=n.charSpace,FA=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Di||0)};f.__private__.setCharSpace=f.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Di=b,this};var $a=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(b){var K=f.CapJoinStyles[b];if(K===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $a=K,D(K+" J"),this};var qa=0;f.__private__.setLineJoin=f.setLineJoin=function(b){var K=f.CapJoinStyles[b];if(K===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qa=K,D(K+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return D(W(k(b))+" M"),this},f.GState=Kp,f.setGState=function(b){(b=typeof b=="string"?Ge[Je[b]]:IA(null,b)).equals(rt)||(D("/"+b.id+" gs"),rt=b)};var IA=function(b,K){if(!b||!Je[b]){var Te=!1;for(var He in Ge)if(Ge.hasOwnProperty(He)&&Ge[He].equals(K)){Te=!0;break}if(Te)K=Ge[He];else{var nt="GS"+(Object.keys(Ge).length+1).toString(10);Ge[nt]=K,K.id=nt}return b&&(Je[b]=K.id),st.publish("addGState",K),K}};f.addGState=function(b,K){return IA(b,K),this},f.saveGraphicsState=function(){return D("q"),he.push({key:de,size:le,color:ni}),this},f.restoreGraphicsState=function(){D("Q");var b=he.pop();return de=b.key,le=b.size,ni=b.color,rt=null,this},f.setCurrentTransformationMatrix=function(b){return D(b.toString()+" cm"),this},f.comment=function(b){return D("#"+b),this};var _i=function(b,K){var Te=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Te},set:function(xt){isNaN(xt)||(Te=parseFloat(xt))}});var He=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return He},set:function(xt){isNaN(xt)||(He=parseFloat(xt))}});var nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return nt},set:function(xt){nt=xt.toString()}}),this},ca=function(b,K,Te,He){_i.call(this,b,K),this.type="rect";var nt=Te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return nt},set:function(Pt){isNaN(Pt)||(nt=parseFloat(Pt))}});var xt=He||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Pt){isNaN(Pt)||(xt=parseFloat(Pt))}}),this},ua=function(){this.page=ht,this.currentPage=F,this.pages=Y.slice(0),this.pagesContext=$e.slice(0),this.x=Fe,this.y=Pe,this.matrix=it,this.width=Ni(F),this.height=bi(F),this.outputDestination=fe,this.id="",this.objectNumber=-1};ua.prototype.restore=function(){ht=this.page,F=this.currentPage,$e=this.pagesContext,Y=this.pages,Fe=this.x,Pe=this.y,it=this.matrix,fa(F,this.width),pa(F,this.height),fe=this.outputDestination};var Ka=function(b,K,Te,He,nt){wt.push(new ua),ht=F=0,Y=[],Fe=b,Pe=K,it=nt,qe([Te,He])},UA=function(b){if(Tt[b])wt.pop().restore();else{var K=new ua,Te="Xo"+(Object.keys(Ct).length+1).toString(10);K.id=Te,Tt[b]=Te,Ct[Te]=K,st.publish("addFormObject",K),wt.pop().restore()}};for(var ha in f.beginFormObject=function(b,K,Te,He,nt){return Ka(b,K,Te,He,nt),this},f.endFormObject=function(b){return UA(b),this},f.doFormObject=function(b,K){var Te=Ct[Tt[b]];return D("q"),D(K.toString()+" cm"),D("/"+Te.id+" Do"),D("Q"),this},f.getFormObject=function(b){var K=Ct[Tt[b]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},f.save=function(b,K){return b=b||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Ul($r(br()),b),typeof Ul.unload=="function"&&Ir.setTimeout&&setTimeout(Ul.unload,911),this):new Promise(function(Te,He){try{var nt=Ul($r(br()),b);typeof Ul.unload=="function"&&Ir.setTimeout&&setTimeout(Ul.unload,911),Te(nt)}catch(xt){He(xt.message)}})},Sr.API)Sr.API.hasOwnProperty(ha)&&(ha==="events"&&Sr.API.events.length?function(b,K){var Te,He,nt;for(nt=K.length-1;nt!==-1;nt--)Te=K[nt][0],He=K[nt][1],b.subscribe.apply(b,[Te].concat(typeof He=="function"?[He]:He))}(st,Sr.API.events):f[ha]=Sr.API[ha]);var Ni=f.getPageWidth=function(b){return($e[b=b||F].mediaBox.topRightX-$e[b].mediaBox.bottomLeftX)/ue},fa=f.setPageWidth=function(b,K){$e[b].mediaBox.topRightX=K*ue+$e[b].mediaBox.bottomLeftX},bi=f.getPageHeight=function(b){return($e[b=b||F].mediaBox.topRightY-$e[b].mediaBox.bottomLeftY)/ue},pa=f.setPageHeight=function(b,K){$e[b].mediaBox.topRightY=K*ue+$e[b].mediaBox.bottomLeftY};return f.internal={pdfEscape:Yn,getStyle:Do,getFont:_l,getFontSize:Me,getCharSpace:FA,getTextColor:EA,getLineHeight:la,getLineHeightFactor:da,getLineWidth:ti,write:Ae,getHorizontalCoordinate:Ns,getVerticalCoordinate:Ms,getCoordinateString:SA,getVerticalCoordinateString:ri,collections:{},newObject:et,newAdditionalObject:Vt,newObjectDeferred:yt,newObjectDeferredBegin:mt,getFilters:St,putStream:ft,events:st,scaleFactor:ue,pageSize:{getWidth:function(){return Ni(F)},setWidth:function(b){fa(F,b)},getHeight:function(){return bi(F)},setHeight:function(b){pa(F,b)}},encryptionOptions:c,encryption:Mr,getEncryptor:Kn,output:Mn,getNumberOfPages:Mt,pages:Y,out:D,f2:Be,f3:N,getPageInfo:xo,getPageInfoByObjId:Ht,getCurrentPageInfo:mi,getPDFVersion:w,Point:_i,Rectangle:ca,Matrix:Ze,hasHotfix:Wo},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ni(F)},set:function(b){fa(F,b)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return bi(F)},set:function(b){pa(F,b)},enumerable:!0,configurable:!0}),Ds.call(f,ae),de="F1",vt(o,t),st.publish("initialized"),f}Wd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Wd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Wd.prototype.processOwnerPassword=function(n,e){return Cm(Bm(e).substr(0,5),n)},Wd.prototype.encryptor=function(n,e){var t=Bm(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Cm(t,r)}},Kp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Sn(n)!==Sn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Sr.API={events:[]},Sr.version="3.0.0";var ao=Sr.API,Y1=1,fd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Pr=function(n){return n.toFixed(2)},qA=function(n){return n.toFixed(5)};ao.__acroform__={};var Zs=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},g_=function(n){return n*Y1},xa=function(n){var e=new pB,t=lr.internal.getHeight(n)||0,r=lr.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Pr(r)),Number(Pr(t))],e},YD=ao.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},JD=ao.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},ZD=ao.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},mo=ao.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ZD(n,e-1)},wo=ao.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return YD(n,e-1)},yo=ao.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return JD(n,e-1)},eN=ao.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],s=n[1],i=n[2],a=n[3],A={};return A.lowerLeft_X=t(o)||0,A.lowerLeft_Y=r(s+a)||0,A.upperRight_X=t(o+i)||0,A.upperRight_Y=r(s)||0,[Number(Pr(A.lowerLeft_X)),Number(Pr(A.lowerLeft_Y)),Number(Pr(A.upperRight_X)),Number(Pr(A.upperRight_Y))]},tN=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Sm(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Pr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=xa(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Sm=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(N){return N.split(`
`)}):o.map(function(N){return[N]});var s=t,i=lr.internal.getHeight(n)||0;i=i<0?-i:i;var a=lr.internal.getWidth(n)||0;a=a<0?-a:a;var A=function(N,k,J){if(N+1<o.length){var ne=k+" "+o[N+1][0];return Hf(ne,n,J).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var d,c,u=Hf("3",n,s).height,h=n.multiline?i-s:(i-u)/2,f=h+=2,g=0,w=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Hf(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",C=0,I=0;I<o.length;I++)if(o.hasOwnProperty(I)){var M=!1;if(o[I].length!==1&&y!==o[I].length-1){if((u+2)*(C+2)+2>i)continue e;x+=o[I][y],M=!0,w=I,I--}else{x=(x+=o[I][y]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var L=parseInt(I),ee=A(L,x,s),W=I>=o.length-1;if(ee&&!W){x+=" ",y=0;continue}if(ee||W){if(W)w=L;else if(n.multiline&&(u+2)*(C+2)+2>i)continue e}else{if(!n.multiline||(u+2)*(C+2)+2>i)continue e;w=L}}for(var R="",Z=g;Z<=w;Z++){var Be=o[Z];if(n.multiline){if(Z===w){R+=Be[y]+" ",y=(y+1)%Be.length;continue}if(Z===g){R+=Be[Be.length-1]+" ";continue}}R+=Be[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,c=Hf(R,n,s).width,n.textAlign){case"right":d=a-c-2;break;case"center":d=(a-c)/2;break;case"left":default:d=2}e+=Pr(d)+" "+Pr(f)+` Td
`,e+="("+fd(R)+`) Tj
`,e+=-Pr(d)+` 0 Td
`,f=-(s+2),c=0,g=M?w:w+1,C++,x=""}break}return r.text=e,r.fontSize=s,r},Hf=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},rN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nN=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},oN=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),Sn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},sN=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(sa.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(rN)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Y1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new gB,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.objId=void 0,s.hasAnnotation&&nN(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var s=!r;for(var i in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var a=r[i],A=[],d=a.Rect;if(a.Rect&&(a.Rect=eN(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=lr.createDefaultAppearanceStream(a),Sn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(A=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=tN(a);A.push({key:"AP",value:"<</N "+c+">>"}),o.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var g=f[i];typeof g=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g+" ",o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g,o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:a.objId}),o.internal.out("endobj")}s&&oN(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},fB=ao.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(i){return i};if(Array.isArray(n)){for(var o="[",s=0;s<n.length;s++)switch(s!==0&&(o+=" "),Sn(n[s])){case"boolean":case"number":case"object":o+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+fd(r(n[s].toString()))+")"):o+=n[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},n0=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+fd(r(n))+")"},Sa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Sa.prototype.toString=function(){return this.objId+" 0 R"},Sa.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Sa.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:fB(o,this.objId,this.scope)}):o instanceof Sa?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var pB=function(){Sa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Zs(pB,Sa);var gB=function(){Sa.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+fd(t(n))+")"}},set:function(t){n=t}})};Zs(gB,Sa);var sa=function n(){Sa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mo(e,3)},set:function(x){x?this.F=wo(e,3):this.F=yo(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Vp)return;s="FieldObject"+n.FieldNum++}var x=function(C){return C};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+fd(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Y1:d},set:function(x){d=x}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Vp||this instanceof Yl))return n0(u,this.objId,this.scope)},set:function(x){x=x.toString(),u=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vo?h:n0(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof Vo?x:x.substr(0,1)==="("?Rd(x.substr(1,x.length-2)):Rd(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vo?Rd(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Vo?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vo?f:n0(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof Vo?x:x.substr(0,1)==="("?Rd(x.substr(1,x.length-2)):Rd(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vo?Rd(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Vo?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(x){g=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,1)},set:function(x){x?this.Ff=wo(this.Ff,1):this.Ff=yo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,2)},set:function(x){x?this.Ff=wo(this.Ff,2):this.Ff=yo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,3)},set:function(x){x?this.Ff=wo(this.Ff,3):this.Ff=yo(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');y=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(y){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};Zs(sa,Sa);var fc=function(){sa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fB(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(s,i,a){a||(a=1);for(var A,d=[];A=i.exec(s);)d.push(A[a]);return d}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,18)},set:function(t){t?this.Ff=wo(this.Ff,18):this.Ff=yo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=wo(this.Ff,19):this.Ff=yo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,20)},set:function(t){t?(this.Ff=wo(this.Ff,20),e.sort()):this.Ff=yo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,22)},set:function(t){t?this.Ff=wo(this.Ff,22):this.Ff=yo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,23)},set:function(t){t?this.Ff=wo(this.Ff,23):this.Ff=yo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,27)},set:function(t){t?this.Ff=wo(this.Ff,27):this.Ff=yo(this.Ff,27)}}),this.hasAppearanceStream=!1};Zs(fc,sa);var pc=function(){fc.call(this),this.fontName="helvetica",this.combo=!1};Zs(pc,fc);var gc=function(){pc.call(this),this.combo=!0};Zs(gc,pc);var np=function(){gc.call(this),this.edit=!0};Zs(np,gc);var Vo=function(){sa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,15)},set:function(t){t?this.Ff=wo(this.Ff,15):this.Ff=yo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,16)},set:function(t){t?this.Ff=wo(this.Ff,16):this.Ff=yo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,17)},set:function(t){t?this.Ff=wo(this.Ff,17):this.Ff=yo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,26)},set:function(t){t?this.Ff=wo(this.Ff,26):this.Ff=yo(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+fd(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){Sn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Zs(Vo,sa);var op=function(){Vo.call(this),this.pushButton=!0};Zs(op,Vo);var vc=function(){Vo.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Zs(vc,Vo);var Vp=function(){var n,e;sa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+fd(o(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(o){Sn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zs(Vp,sa),vc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},vc.prototype.createOption=function(n){var e=new Vp;return e.Parent=this,e.optionName=n,this.Kids.push(e),iN.call(this.scope,e),e};var sp=function(){Vo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=lr.CheckBox.createAppearanceStream()};Zs(sp,Vo);var Yl=function(){sa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,13)},set:function(e){e?this.Ff=wo(this.Ff,13):this.Ff=yo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,21)},set:function(e){e?this.Ff=wo(this.Ff,21):this.Ff=yo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,23)},set:function(e){e?this.Ff=wo(this.Ff,23):this.Ff=yo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,24)},set:function(e){e?this.Ff=wo(this.Ff,24):this.Ff=yo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,25)},set:function(e){e?this.Ff=wo(this.Ff,25):this.Ff=yo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,26)},set:function(e){e?this.Ff=wo(this.Ff,26):this.Ff=yo(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zs(Yl,sa);var ip=function(){Yl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mo(this.Ff,14)},set:function(n){n?this.Ff=wo(this.Ff,14):this.Ff=yo(this.Ff,14)}}),this.password=!0};Zs(ip,Yl);var lr={CheckBox:{createAppearanceStream:function(){return{N:{On:lr.CheckBox.YesNormal},D:{On:lr.CheckBox.YesPushDown,Off:lr.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),s=Sm(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Pr(lr.internal.getWidth(n))+" "+Pr(lr.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Pr(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=xa(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],s=lr.internal.getHeight(n),i=lr.internal.getWidth(n),a=Sm(n,n.caption);return o.push("1 g"),o.push("0 0 "+Pr(i)+" "+Pr(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Pr(i-1)+" "+Pr(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+Pr(a.fontSize)+" Tf "+r),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pr(lr.internal.getWidth(n))+" "+Pr(lr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:lr.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=lr.RadioButton.Circle.YesNormal,e.D[n]=lr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=xa(n);e.scope=n.scope;var t=[],r=lr.internal.getWidth(n)<=lr.internal.getHeight(n)?lr.internal.getWidth(n)/4:lr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=lr.internal.Bezier_C,s=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+qA(lr.internal.getWidth(n)/2)+" "+qA(lr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=[],r=lr.internal.getWidth(n)<=lr.internal.getHeight(n)?lr.internal.getWidth(n)/4:lr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*lr.internal.Bezier_C).toFixed(5)),i=Number((r*lr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qA(lr.internal.getWidth(n)/2)+" "+qA(lr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+qA(lr.internal.getWidth(n)/2)+" "+qA(lr.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=[],r=lr.internal.getWidth(n)<=lr.internal.getHeight(n)?lr.internal.getWidth(n)/4:lr.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*lr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qA(lr.internal.getWidth(n)/2)+" "+qA(lr.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:lr.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=lr.RadioButton.Cross.YesNormal,e.D[n]=lr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=xa(n);e.scope=n.scope;var t=[],r=lr.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Pr(lr.internal.getWidth(n)-2)+" "+Pr(lr.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Pr(r.x1.x)+" "+Pr(r.x1.y)+" m"),t.push(Pr(r.x2.x)+" "+Pr(r.x2.y)+" l"),t.push(Pr(r.x4.x)+" "+Pr(r.x4.y)+" m"),t.push(Pr(r.x3.x)+" "+Pr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=lr.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Pr(lr.internal.getWidth(n))+" "+Pr(lr.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Pr(lr.internal.getWidth(n)-2)+" "+Pr(lr.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Pr(t.x1.x)+" "+Pr(t.x1.y)+" m"),r.push(Pr(t.x2.x)+" "+Pr(t.x2.y)+" l"),r.push(Pr(t.x4.x)+" "+Pr(t.x4.y)+" m"),r.push(Pr(t.x3.x)+" "+Pr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=xa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pr(lr.internal.getWidth(n))+" "+Pr(lr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};lr.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=lr.internal.getWidth(n),t=lr.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},lr.internal.getWidth=function(n){var e=0;return Sn(n)==="object"&&(e=g_(n.Rect[2])),e},lr.internal.getHeight=function(n){var e=0;return Sn(n)==="object"&&(e=g_(n.Rect[3])),e};var iN=ao.addField=function(n){if(sN(this,n),!(n instanceof sa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ao.AcroFormChoiceField=fc,ao.AcroFormListBox=pc,ao.AcroFormComboBox=gc,ao.AcroFormEditBox=np,ao.AcroFormButton=Vo,ao.AcroFormPushButton=op,ao.AcroFormRadioButton=vc,ao.AcroFormCheckBox=sp,ao.AcroFormTextField=Yl,ao.AcroFormPasswordField=ip,ao.AcroFormAppearance=lr,ao.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:gc,EditBox:np,Button:Vo,PushButton:op,RadioButton:vc,CheckBox:sp,TextField:Yl,PasswordField:ip,Appearance:lr},Sr.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:gc,EditBox:np,Button:Vo,PushButton:op,RadioButton:vc,CheckBox:sp,TextField:Yl,PasswordField:ip,Appearance:lr};Sr.AcroForm;function vB(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(N,k){var J,ne,ge,pe,xe,te=e;if((k=k||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(ee(N))for(xe in t)for(ge=t[xe],J=0;J<ge.length;J+=1){for(pe=!0,ne=0;ne<ge[J].length;ne+=1)if(ge[J][ne]!==void 0&&ge[J][ne]!==N[ne]){pe=!1;break}if(pe===!0){te=xe;break}}else for(xe in t)for(ge=t[xe],J=0;J<ge.length;J+=1){for(pe=!0,ne=0;ne<ge[J].length;ne+=1)if(ge[J][ne]!==void 0&&ge[J][ne]!==N.charCodeAt(ne)){pe=!1;break}if(pe===!0){te=xe;break}}return te===e&&k!==e&&(te=k),te},o=function N(k){for(var J=this.internal.write,ne=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:k.width}),pe.push({key:"Height",value:k.height}),k.colorSpace===y.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===y.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var xe="",te=0,se=k.transparency.length;te<se;te++)xe+=k.transparency[te]+" "+k.transparency[te]+" ";pe.push({key:"Mask",value:"["+xe+"]"})}k.sMask!==void 0&&pe.push({key:"SMask",value:k.objectId+1+" 0 R"});var oe=k.filter!==void 0?["/"+k.filter]:void 0;if(ne({data:k.data,additionalKeyValues:pe,alreadyAppliedFilters:oe,objectId:k.objectId}),J("endobj"),"sMask"in k&&k.sMask!==void 0){var me="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,B={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:me,data:k.sMask};"filter"in k&&(B.filter=k.filter),N.call(this,B)}if(k.colorSpace===y.INDEXED){var F=this.internal.newObject();ne({data:R(new Uint8Array(k.palette)),objectId:F}),J("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var k in N)o.call(this,N[k])},i=function(){var N,k=this.internal.collections.addImage_images,J=this.internal.write;for(var ne in k)J("/I"+(N=k[ne]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},A=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},d=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(N){return typeof n["process"+N.toUpperCase()]=="function"},u=function(N){return Sn(N)==="object"&&N.nodeType===1},h=function(N,k){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var J=""+N.getAttribute("src");if(J.indexOf("data:image/")===0)return Qu(unescape(J).split("base64,").pop());var ne=n.loadFile(J,!0);if(ne!==void 0)return ne}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ge;switch(k){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;case"JPEG":case"JPG":default:ge="image/jpeg"}return Qu(N.toDataURL(ge,1).split("base64,").pop())}},f=function(N){var k=this.internal.collections.addImage_images;if(k){for(var J in k)if(N===k[J].alias)return k[J]}},g=function(N,k,J){return N||k||(N=-96,k=-96),N<0&&(N=-1*J.width*72/N/this.internal.scaleFactor),k<0&&(k=-1*J.height*72/k/this.internal.scaleFactor),N===0&&(N=k*J.width/J.height),k===0&&(k=N*J.height/J.width),[N,k]},w=function(N,k,J,ne,ge,pe){var xe=g.call(this,J,ne,ge),te=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,oe=A.call(this);if(J=xe[0],ne=xe[1],oe[ge.index]=ge,pe){pe*=Math.PI/180;var me=Math.cos(pe),B=Math.sin(pe),F=function(T){return T.toFixed(4)},E=[F(me),F(B),F(-1*B),F(me),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,te(N),se(k+ne),"cm"].join(" ")),this.internal.write(E.join(" ")),this.internal.write([te(J),"0","0",te(ne),"0","0","cm"].join(" "))):this.internal.write([te(J),"0","0",te(ne),te(N),se(k+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(N){var k,J,ne=0;if(typeof N=="string")for(J=N.length,k=0;k<J;k++)ne=(ne<<5)-ne+N.charCodeAt(k),ne|=0;else if(ee(N))for(J=N.byteLength/2,k=0;k<J;k++)ne=(ne<<5)-ne+N[k],ne|=0;return ne},I=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var k=!0;return N.length===0&&(k=!1),N.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(k=!1),k},M=n.__addimage__.extractImageFromDataUrl=function(N){var k=(N=N||"").split("base64,"),J=null;if(k.length===2){var ne=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(ne)&&(J={mimeType:ne[1],charset:ne[2],data:k[1]})}return J},L=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(N){return L()&&N instanceof ArrayBuffer};var ee=n.__addimage__.isArrayBufferView=function(N){return L()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},W=n.__addimage__.binaryStringToUint8Array=function(N){for(var k=N.length,J=new Uint8Array(k),ne=0;ne<k;ne++)J[ne]=N.charCodeAt(ne);return J},R=n.__addimage__.arrayBufferToBinaryString=function(N){for(var k="",J=ee(N)?N:new Uint8Array(N),ne=0;ne<J.length;ne+=8192)k+=String.fromCharCode.apply(null,J.subarray(ne,ne+8192));return k};n.addImage=function(){var N,k,J,ne,ge,pe,xe,te,se;if(typeof arguments[1]=="number"?(k=e,J=arguments[1],ne=arguments[2],ge=arguments[3],pe=arguments[4],xe=arguments[5],te=arguments[6],se=arguments[7]):(k=arguments[1],J=arguments[2],ne=arguments[3],ge=arguments[4],pe=arguments[5],xe=arguments[6],te=arguments[7],se=arguments[8]),Sn(N=arguments[0])==="object"&&!u(N)&&"imageData"in N){var oe=N;N=oe.imageData,k=oe.format||k||e,J=oe.x||J||0,ne=oe.y||ne||0,ge=oe.w||oe.width||ge,pe=oe.h||oe.height||pe,xe=oe.alias||xe,te=oe.compression||te,se=oe.rotation||oe.angle||se}var me=this.internal.getFilters();if(te===void 0&&me.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(J)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var B=Z.call(this,N,k,xe,te);return w.call(this,J,ne,ge,pe,B,se),this};var Z=function(N,k,J,ne){var ge,pe,xe;if(typeof N=="string"&&r(N)===e){N=unescape(N);var te=Be(N,!1);(te!==""||(te=n.loadFile(N,!0))!==void 0)&&(N=te)}if(u(N)&&(N=h(N,k)),k=r(N,k),!c(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((xe=J)==null||xe.length===0)&&(J=function(se){return typeof se=="string"||ee(se)?C(se):ee(se.data)?C(se.data):null}(N)),(ge=f.call(this,J))||(L()&&(N instanceof Uint8Array||k==="RGBA"||(pe=N,N=W(N))),ge=this["process"+k.toUpperCase()](N,d.call(this),J,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:x.NONE}(ne),pe)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},Be=n.__addimage__.convertBase64ToBinaryString=function(N,k){var J;k=typeof k!="boolean"||k;var ne,ge="";if(typeof N=="string"){ne=(J=M(N))!==null?J.data:N;try{ge=Qu(ne)}catch(pe){if(k)throw I(ne)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};n.getImageProperties=function(N){var k,J,ne="";if(u(N)&&(N=h(N)),typeof N=="string"&&r(N)===e&&((ne=Be(N,!1))===""&&(ne=n.loadFile(N)||""),N=ne),J=r(N),!c(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!L()||N instanceof Uint8Array||(N=W(N)),!(k=this["process"+J.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=J,k}})(Sr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Sr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,c=!1,u=0;u<d.length&&!c;u++)switch((r=d[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){r=d[h];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),C=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(x(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+f(x(C))+") >>",w.content=s;var I=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+i(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(w.objId,"0 R",y.objId,"0 R");break;case"freetext":o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+f(g(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var L=this.annotations._nameMap[r.options.name];r.options.pageNumber=L.page,r.options.top=L.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ee=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,s,i){var a=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:A(t),y:d(r),w:A(t+o),h:d(r+s)},options:i,type:"link"})},n.textWithLink=function(t,r,o,s){var i,a,A=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;i=Math.ceil(d*c)}else a=A,i=d;return this.text(t,r,o,s),o+=.2*d,s.align==="center"&&(r-=A/2),s.align==="right"&&(r-=A),this.link(r,o-d,a,i,s),A},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Sr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},A=n.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&o.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length==4},u=n.__arabicParser__.resolveLigatures=function(w){var y=0,x=t,C="",I=0;for(y=0;y<w.length;y+=1)x[w.charCodeAt(y)]!==void 0?(I++,typeof(x=x[w.charCodeAt(y)])=="number"&&(C+=String.fromCharCode(x),x=t,I=0),y===w.length-1&&(x=t,C+=w.charAt(y-(I-1)),y-=I-1,I=0)):(x=t,C+=w.charAt(y-I),y-=I,I=0);return C};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(w,y,x){return i(w)?s(w)===!1?-1:!d(w)||!i(y)&&!i(x)||!i(x)&&a(y)||a(w)&&!i(y)||a(w)&&A(y)||a(w)&&a(y)?0:c(w)&&i(y)&&!a(y)&&i(x)&&d(x)?3:a(w)||!i(x)?1:2:-1},f=function(w){var y=0,x=0,C=0,I="",M="",L="",ee=(w=w||"").split("\\s+"),W=[];for(y=0;y<ee.length;y+=1){for(W.push(""),x=0;x<ee[y].length;x+=1)I=ee[y][x],M=ee[y][x-1],L=ee[y][x+1],i(I)?(C=h(I,M,L),W[y]+=C!==-1?String.fromCharCode(e[I.charCodeAt(0)][C]):I):W[y]+=I;W[y]=u(W[y])}return W.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var w,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(y)){var C=0;for(x=[],C=0;C<y.length;C+=1)Array.isArray(y[C])?x.push([f(y[C][0]),y[C][1],y[C][2]]):x.push([f(y[C])]);w=x}else w=f(y);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",g])}(Sr.API),Sr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Sr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(w){A=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(w){g=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},n.getTextDimensions=function(A,d){r.call(this);var c=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,f=0,g=0,w=0,y=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var x=d.maxWidth;x>0?typeof A=="string"?A=this.splitTextToSize(A,x):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,M){return I.concat(y.splitTextToSize(M,x))},[])):A=Array.isArray(A)?A:[A];for(var C=0;C<A.length;C++)f<(w=this.getStringUnitWidth(A[C],{font:u})*c)&&(f=w);return f!==0&&(g=A.length),{w:f/=h,h:Math.max((g*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===A.lineNumber?(A.x=(d.x||0)+(d.width||0),A.y=d.y||0):d.y+d.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,f&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=d.y+d.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};n.table=function(A,d,c,u,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var f,g,w,y,x=[],C=[],I=[],M={},L={},ee=[],W=[],R=(h=h||{}).autoSize||!1,Z=h.printHeaders!==!1,Be=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,N=h.margins||Object.assign({width:this.getPageWidth()},e),k=typeof h.padding=="number"?h.padding:3,J=h.headerBackgroundColor||"#c8c8c8",ne=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=Be,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=ne,this.setFontSize(Be),u==null)C=x=Object.keys(c[0]),I=x.map(function(){return"left"});else if(Array.isArray(u)&&Sn(u[0])==="object")for(x=u.map(function(oe){return oe.name}),C=u.map(function(oe){return oe.prompt||oe.name||""}),I=u.map(function(oe){return oe.align||"left"}),f=0;f<u.length;f+=1)L[u[f].name]=u[f].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(C=x=u,I=x.map(function(){return"left"}));if(R||Array.isArray(u)&&typeof u[0]=="string")for(f=0;f<x.length;f+=1){for(M[y=x[f]]=c.map(function(oe){return oe[y]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(C[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=M[y],this.setFont(void 0,"normal"),w=0;w<g.length;w+=1)ee.push(this.getTextDimensions(g[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[y]=Math.max.apply(null,ee)+k+k,ee=[]}if(Z){var ge={};for(f=0;f<x.length;f+=1)ge[x[f]]={},ge[x[f]].text=C[f],ge[x[f]].align=I[f];var pe=a.call(this,ge,L);W=x.map(function(oe){return new s(A,d,L[oe],pe,ge[oe].text,void 0,ge[oe].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var xe=u.reduce(function(oe,me){return oe[me.name]=me.align,oe},{});for(f=0;f<c.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:c[f]},this);var te=a.call(this,c[f],L);for(w=0;w<x.length;w+=1){var se=c[f][x[w]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:w,data:se},this),i.call(this,new s(A,d,L[x[w]],te,se,f+2,xe[x[w]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=d,this};var a=function(A,d){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(f){var g=A[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[f]-c-c)},this).map(function(f){return this.getLineHeightFactor()*f.length*u/h+c+c},this).reduce(function(f,g){return Math.max(f,g)},0)};n.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},n.printHeaderRow=function(A,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){c=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,c),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Sr.API);var mB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},wB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Em=vB(wB),yB=[100,200,300,400,500,600,700,800,900],aN=vB(yB);function Fm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return mB[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(s){return typeof Em[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function v_(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var AN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},m_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function w_(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function lN(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},AN,t.genericFontFamilies||{}),s=null,i=null,a=0;a<e.length;++a)if(o[(s=Fm(e[a])).family]&&(s.family=o[s.family]),n.hasOwnProperty(s.family)){i=n[s.family];break}if(!(i=i||n[r]))throw new Error("Could not find a font-family for the rule '"+w_(s)+"' and default family '"+r+"'.");if(i=function(A,d){if(d[A])return d[A];var c=Em[A],u=c<=Em.normal?-1:1,h=v_(d,wB,c,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+A);return h}(s.stretch,i),i=function(A,d){if(d[A])return d[A];for(var c=mB[A],u=0;u<c.length;++u)if(d[c[u]])return d[c[u]];throw new Error("Could not find a matching font-style for "+A)}(s.style,i),!(i=function(A,d){if(d[A])return d[A];if(A===400&&d[500])return d[500];if(A===500&&d[400])return d[400];var c=aN[A],u=v_(d,yB,c,A<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+A);return u}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+w_(s)+"'.");return i}function y_(n){return n.trimLeft()}function dN(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function cN(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var jf,__,b_,o0=["times"];(function(n){var e,t,r,o,s,i,a,A,d,c=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new A,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new i,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new i,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,a=this.internal.Rectangle,A=this.internal.Matrix,d=new c}]);var u=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=B;Object.defineProperty(this,"pdf",{get:function(){return F}});var E=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return E},set:function(X){E=!!X}});var T=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return T},set:function(X){T=!!X}});var P=0;Object.defineProperty(this,"posX",{get:function(){return P},set:function(X){isNaN(X)||(P=X)}});var O=0;Object.defineProperty(this,"posY",{get:function(){return O},set:function(X){isNaN(X)||(O=X)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(X){var D;typeof X=="number"?D=[X,X,X,X]:((D=new Array(4))[0]=X[0],D[1]=X.length>=2?X[1]:D[0],D[2]=X.length>=3?X[2]:D[0],D[3]=X.length>=4?X[3]:D[1]),d.margin=D}});var j=!1;Object.defineProperty(this,"autoPaging",{get:function(){return j},set:function(X){j=X}});var $=0;Object.defineProperty(this,"lastBreak",{get:function(){return $},set:function(X){$=X}});var H=[];Object.defineProperty(this,"pageBreaks",{get:function(){return H},set:function(X){H=X}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(X){X instanceof c&&(d=X)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(X){d.path=X}});var Y=[];Object.defineProperty(this,"ctxStack",{get:function(){return Y},set:function(X){Y=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var D;D=h(X),this.ctx.fillStyle=D.style,this.ctx.isFillTransparent=D.a===0,this.ctx.fillOpacity=D.a,this.pdf.setFillColor(D.r,D.g,D.b,{a:D.a}),this.pdf.setTextColor(D.r,D.g,D.b,{a:D.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var D=h(X);this.ctx.strokeStyle=D.style,this.ctx.isStrokeTransparent=D.a===0,this.ctx.strokeOpacity=D.a,D.a===0?this.pdf.setDrawColor(255,255,255):(D.a,this.pdf.setDrawColor(D.r,D.g,D.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var Ce=null;function fe(X,D){if(Ce===null){var Ae=function(ye){var ae=[];return Object.keys(ye).forEach(function(le){ye[le].forEach(function(Ee){var Me=null;switch(Ee){case"bold":Me={family:le,weight:"bold"};break;case"italic":Me={family:le,style:"italic"};break;case"bolditalic":Me={family:le,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:le}}Me!==null&&(Me.ref={name:le,style:Ee},ae.push(Me))})}),ae}(X.getFontList());Ce=function(ye){for(var ae={},le=0;le<ye.length;++le){var Ee=Fm(ye[le]),Me=Ee.family,ze=Ee.stretch,Se=Ee.style,ve=Ee.weight;ae[Me]=ae[Me]||{},ae[Me][ze]=ae[Me][ze]||{},ae[Me][ze][Se]=ae[Me][ze][Se]||{},ae[Me][ze][Se][ve]=Ee}return ae}(Ae.concat(D))}return Ce}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(X){Ce=null,Le=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var D;if(this.ctx.font=X,(D=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(X))!==null){var Ae=D[1],ye=(D[2],D[3]),ae=D[4],le=(D[5],D[6]),Ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ae)[2];ae=Math.floor(Ee==="px"?parseFloat(ae)*this.pdf.internal.scaleFactor:Ee==="em"?parseFloat(ae)*this.pdf.getFontSize():parseFloat(ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ae);var Me=function(q){var de,ue,Fe=[],Pe=q.trim();if(Pe==="")return o0;if(Pe in m_)return[m_[Pe]];for(;Pe!=="";){switch(ue=null,de=(Pe=y_(Pe)).charAt(0)){case'"':case"'":ue=dN(Pe.substring(1),de);break;default:ue=cN(Pe)}if(ue===null||(Fe.push(ue[0]),(Pe=y_(ue[1]))!==""&&Pe.charAt(0)!==","))return o0;Pe=Pe.replace(/^,/,"")}return Fe}(le);if(this.fontFaces){var ze=lN(fe(this.pdf,this.fontFaces),Me.map(function(q){return{family:q,stretch:"normal",weight:ye,style:Ae}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Se="";(ye==="bold"||parseInt(ye,10)>=700||Ae==="bold")&&(Se="bold"),Ae==="italic"&&(Se+="italic"),Se.length===0&&(Se="normal");for(var ve="",Oe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ne=0;Ne<Me.length;Ne++){if(this.pdf.internal.getFont(Me[Ne],Se,{noFallback:!0,disableWarning:!0})!==void 0){ve=Me[Ne];break}if(Se==="bolditalic"&&this.pdf.internal.getFont(Me[Ne],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ve=Me[Ne],Se="bold";else if(this.pdf.internal.getFont(Me[Ne],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ve=Me[Ne],Se="normal";break}}if(ve===""){for(var _e=0;_e<Me.length;_e++)if(Oe[Me[_e]]){ve=Oe[Me[_e]];break}}ve=ve===""?"Times":ve,this.pdf.setFont(ve,Se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};u.prototype.setLineDash=function(B){this.lineDash=B},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){M.call(this,"fill",!1)},u.prototype.stroke=function(){M.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(B,F){if(isNaN(B)||isNaN(F))throw Tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var E=this.ctx.transform.applyToPoint(new i(B,F));this.path.push({type:"mt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(B,F)},u.prototype.closePath=function(){var B=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Sn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){B=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(B.x,B.y)},u.prototype.lineTo=function(B,F){if(isNaN(B)||isNaN(F))throw Tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var E=this.ctx.transform.applyToPoint(new i(B,F));this.path.push({type:"lt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(E.x,E.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},u.prototype.quadraticCurveTo=function(B,F,E,T){if(isNaN(E)||isNaN(T)||isNaN(B)||isNaN(F))throw Tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var P=this.ctx.transform.applyToPoint(new i(E,T)),O=this.ctx.transform.applyToPoint(new i(B,F));this.path.push({type:"qct",x1:O.x,y1:O.y,x:P.x,y:P.y}),this.ctx.lastPoint=new i(P.x,P.y)},u.prototype.bezierCurveTo=function(B,F,E,T,P,O){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T))throw Tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var j=this.ctx.transform.applyToPoint(new i(P,O)),$=this.ctx.transform.applyToPoint(new i(B,F)),H=this.ctx.transform.applyToPoint(new i(E,T));this.path.push({type:"bct",x1:$.x,y1:$.y,x2:H.x,y2:H.y,x:j.x,y:j.y}),this.ctx.lastPoint=new i(j.x,j.y)},u.prototype.arc=function(B,F,E,T,P,O){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T)||isNaN(P))throw Tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(O=!!O,!this.ctx.transform.isIdentity){var j=this.ctx.transform.applyToPoint(new i(B,F));B=j.x,F=j.y;var $=this.ctx.transform.applyToPoint(new i(0,E)),H=this.ctx.transform.applyToPoint(new i(0,0));E=Math.sqrt(Math.pow($.x-H.x,2)+Math.pow($.y-H.y,2))}Math.abs(P-T)>=2*Math.PI&&(T=0,P=2*Math.PI),this.path.push({type:"arc",x:B,y:F,radius:E,startAngle:T,endAngle:P,counterclockwise:O})},u.prototype.arcTo=function(B,F,E,T,P){throw new Error("arcTo not implemented.")},u.prototype.rect=function(B,F,E,T){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T))throw Tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,F),this.lineTo(B+E,F),this.lineTo(B+E,F+T),this.lineTo(B,F+T),this.lineTo(B,F),this.lineTo(B+E,F),this.lineTo(B,F)},u.prototype.fillRect=function(B,F,E,T){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T))throw Tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var P={};this.lineCap!=="butt"&&(P.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(P.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,F,E,T),this.fill(),P.hasOwnProperty("lineCap")&&(this.lineCap=P.lineCap),P.hasOwnProperty("lineJoin")&&(this.lineJoin=P.lineJoin)}},u.prototype.strokeRect=function(B,F,E,T){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T))throw Tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(B,F,E,T),this.stroke())},u.prototype.clearRect=function(B,F,E,T){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T))throw Tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,F,E,T))},u.prototype.save=function(B){B=typeof B!="boolean"||B;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var T=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=T}},u.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("Q");this.pdf.setPage(F),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(B){var F,E,T,P;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))F=0,E=0,T=0,P=0;else{var O=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(O!==null)F=parseInt(O[1]),E=parseInt(O[2]),T=parseInt(O[3]),P=1;else if((O=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)F=parseInt(O[1]),E=parseInt(O[2]),T=parseInt(O[3]),P=parseFloat(O[4]);else{if(P=1,typeof B=="string"&&B.charAt(0)!=="#"){var j=new cB(B);B=j.ok?j.toHex():"#000000"}B.length===4?(F=B.substring(1,2),F+=F,E=B.substring(2,3),E+=E,T=B.substring(3,4),T+=T):(F=B.substring(1,3),E=B.substring(3,5),T=B.substring(5,7)),F=parseInt(F,16),E=parseInt(E,16),T=parseInt(T,16)}}return{r:F,g:E,b:T,a:P,style:B}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(B,F,E,T){if(isNaN(F)||isNaN(E)||typeof B!="string")throw Tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(T=isNaN(T)?void 0:T,!f.call(this)){var P=te(this.ctx.transform.rotation),O=this.ctx.transform.scaleX;k.call(this,{text:B,x:F,y:E,scale:O,angle:P,align:this.textAlign,maxWidth:T})}},u.prototype.strokeText=function(B,F,E,T){if(isNaN(F)||isNaN(E)||typeof B!="string")throw Tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){T=isNaN(T)?void 0:T;var P=te(this.ctx.transform.rotation),O=this.ctx.transform.scaleX;k.call(this,{text:B,x:F,y:E,scale:O,renderingMode:"stroke",angle:P,align:this.textAlign,maxWidth:T})}},u.prototype.measureText=function(B){if(typeof B!="string")throw Tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,E=this.pdf.internal.scaleFactor,T=F.internal.getFontSize(),P=F.getStringUnitWidth(B)*T/F.internal.scaleFactor,O=function(j){var $=(j=j||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return $}}),this};return new O({width:P*=Math.round(96*E/72*1e4)/1e4})},u.prototype.scale=function(B,F){if(isNaN(B)||isNaN(F))throw Tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var E=new A(B,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.rotate=function(B){if(isNaN(B))throw Tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new A(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.translate=function(B,F){if(isNaN(B)||isNaN(F))throw Tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var E=new A(1,0,0,1,B,F);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.transform=function(B,F,E,T,P,O){if(isNaN(B)||isNaN(F)||isNaN(E)||isNaN(T)||isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var j=new A(B,F,E,T,P,O);this.ctx.transform=this.ctx.transform.multiply(j)},u.prototype.setTransform=function(B,F,E,T,P,O){B=isNaN(B)?1:B,F=isNaN(F)?0:F,E=isNaN(E)?0:E,T=isNaN(T)?1:T,P=isNaN(P)?0:P,O=isNaN(O)?0:O,this.ctx.transform=new A(B,F,E,T,P,O)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(B,F,E,T,P,O,j,$,H){var Y=this.pdf.getImageProperties(B),Ce=1,fe=1,Le=1,X=1;T!==void 0&&$!==void 0&&(Le=$/T,X=H/P,Ce=Y.width/T*$/T,fe=Y.height/P*H/P),O===void 0&&(O=F,j=E,F=0,E=0),T!==void 0&&$===void 0&&($=T,H=P),T===void 0&&$===void 0&&($=Y.width,H=Y.height);for(var D,Ae=this.ctx.transform.decompose(),ye=te(Ae.rotate.shx),ae=new A,le=(ae=(ae=(ae=ae.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new a(O-F*Le,j-E*X,T*Ce,P*fe)),Ee=y.call(this,le),Me=[],ze=0;ze<Ee.length;ze+=1)Me.indexOf(Ee[ze])===-1&&Me.push(Ee[ze]);if(I(Me),this.autoPaging)for(var Se=Me[0],ve=Me[Me.length-1],Oe=Se;Oe<ve+1;Oe++){this.pdf.setPage(Oe);var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_e=Oe===1?this.posY+this.margin[0]:this.margin[0],q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ue=Oe===1?0:q+(Oe-2)*de;if(this.ctx.clip_path.length!==0){var Fe=this.path;D=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(D,this.posX+this.margin[3],-ue+_e+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Fe}var Pe=JSON.parse(JSON.stringify(le));Pe=C([Pe],this.posX+this.margin[3],-ue+_e+this.ctx.prevPageLastElemOffset)[0];var it=(Oe>Se||Oe<ve)&&w.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,de,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,ye),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",le.x,le.y,le.w,le.h,null,null,ye)};var y=function(B,F,E){var T=[];F=F||this.pdf.internal.pageSize.width,E=E||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var P=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":T.push(Math.floor((B.y+P)/E)+1);break;case"arc":T.push(Math.floor((B.y+P-B.radius)/E)+1),T.push(Math.floor((B.y+P+B.radius)/E)+1);break;case"qct":var O=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);T.push(Math.floor((O.y+P)/E)+1),T.push(Math.floor((O.y+O.h+P)/E)+1);break;case"bct":var j=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);T.push(Math.floor((j.y+P)/E)+1),T.push(Math.floor((j.y+j.h+P)/E)+1);break;case"rect":T.push(Math.floor((B.y+P)/E)+1),T.push(Math.floor((B.y+B.h+P)/E)+1)}for(var $=0;$<T.length;$+=1)for(;this.pdf.internal.getNumberOfPages()<T[$];)x.call(this);return T},x=function(){var B=this.fillStyle,F=this.strokeStyle,E=this.font,T=this.lineCap,P=this.lineWidth,O=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=F,this.font=E,this.lineCap=T,this.lineWidth=P,this.lineJoin=O},C=function(B,F,E){for(var T=0;T<B.length;T++)switch(B[T].type){case"bct":B[T].x2+=F,B[T].y2+=E;case"qct":B[T].x1+=F,B[T].y1+=E;case"mt":case"lt":case"arc":default:B[T].x+=F,B[T].y+=E}return B},I=function(B){return B.sort(function(F,E){return F-E})},M=function(B,F){for(var E,T,P=this.fillStyle,O=this.strokeStyle,j=this.lineCap,$=this.lineWidth,H=Math.abs($*this.ctx.transform.scaleX),Y=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),fe=JSON.parse(JSON.stringify(this.path)),Le=[],X=0;X<fe.length;X++)if(fe[X].x!==void 0)for(var D=y.call(this,fe[X]),Ae=0;Ae<D.length;Ae+=1)Le.indexOf(D[Ae])===-1&&Le.push(D[Ae]);for(var ye=0;ye<Le.length;ye++)for(;this.pdf.internal.getNumberOfPages()<Le[ye];)x.call(this);if(I(Le),this.autoPaging)for(var ae=Le[0],le=Le[Le.length-1],Ee=ae;Ee<le+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=P,this.strokeStyle=O,this.lineCap=j,this.lineWidth=H,this.lineJoin=Y;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=Ee===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=Ee===1?0:Se+(Ee-2)*ve;if(this.ctx.clip_path.length!==0){var Ne=this.path;E=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(E,this.posX+this.margin[3],-Oe+ze+this.ctx.prevPageLastElemOffset),L.call(this,B,!0),this.path=Ne}if(T=JSON.parse(JSON.stringify(Ce)),this.path=C(T,this.posX+this.margin[3],-Oe+ze+this.ctx.prevPageLastElemOffset),F===!1||Ee===0){var _e=(Ee>ae||Ee<le)&&w.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ve,null).clip().discardPath()),L.call(this,B,F),_e&&this.pdf.restoreGraphicsState()}this.lineWidth=$}else this.lineWidth=H,L.call(this,B,F),this.lineWidth=$;this.path=Ce},L=function(B,F){if((B!=="stroke"||F||!g.call(this))&&(B==="stroke"||F||!f.call(this))){for(var E,T,P=[],O=this.path,j=0;j<O.length;j++){var $=O[j];switch($.type){case"begin":P.push({begin:!0});break;case"close":P.push({close:!0});break;case"mt":P.push({start:$,deltas:[],abs:[]});break;case"lt":var H=P.length;if(O[j-1]&&!isNaN(O[j-1].x)&&(E=[$.x-O[j-1].x,$.y-O[j-1].y],H>0)){for(;H>=0;H--)if(P[H-1].close!==!0&&P[H-1].begin!==!0){P[H-1].deltas.push(E),P[H-1].abs.push($);break}}break;case"bct":E=[$.x1-O[j-1].x,$.y1-O[j-1].y,$.x2-O[j-1].x,$.y2-O[j-1].y,$.x-O[j-1].x,$.y-O[j-1].y],P[P.length-1].deltas.push(E);break;case"qct":var Y=O[j-1].x+2/3*($.x1-O[j-1].x),Ce=O[j-1].y+2/3*($.y1-O[j-1].y),fe=$.x+2/3*($.x1-$.x),Le=$.y+2/3*($.y1-$.y),X=$.x,D=$.y;E=[Y-O[j-1].x,Ce-O[j-1].y,fe-O[j-1].x,Le-O[j-1].y,X-O[j-1].x,D-O[j-1].y],P[P.length-1].deltas.push(E);break;case"arc":P.push({deltas:[],abs:[],arc:!0}),Array.isArray(P[P.length-1].abs)&&P[P.length-1].abs.push($)}}T=F?null:B==="stroke"?"stroke":"fill";for(var Ae=!1,ye=0;ye<P.length;ye++)if(P[ye].arc)for(var ae=P[ye].abs,le=0;le<ae.length;le++){var Ee=ae[le];Ee.type==="arc"?R.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,F,!Ae):J.call(this,Ee.x,Ee.y),Ae=!0}else if(P[ye].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(P[ye].begin!==!0){var Me=P[ye].start.x,ze=P[ye].start.y;ne.call(this,P[ye].deltas,Me,ze),Ae=!0}T&&Z.call(this,T),F&&Be.call(this)}},ee=function(B){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,E=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-E;case"top":return B+F-E;case"hanging":return B+F-2*E;case"middle":return B+F/2-E;case"ideographic":return B;case"alphabetic":default:return B}},W=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(F,E){this.colorStops.push([F,E])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(B,F,E,T,P,O,j,$,H){for(var Y=pe.call(this,E,T,P,O),Ce=0;Ce<Y.length;Ce++){var fe=Y[Ce];Ce===0&&(H?N.call(this,fe.x1+B,fe.y1+F):J.call(this,fe.x1+B,fe.y1+F)),ge.call(this,B,F,fe.x2,fe.y2,fe.x3,fe.y3,fe.x4,fe.y4)}$?Be.call(this):Z.call(this,j)},Z=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Be=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(B,F){this.pdf.internal.out(t(B)+" "+r(F)+" m")},k=function(B){var F;switch(B.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var E=this.pdf.getTextDimensions(B.text),T=ee.call(this,B.y),P=W.call(this,T)-E.h,O=this.ctx.transform.applyToPoint(new i(B.x,T)),j=this.ctx.transform.decompose(),$=new A;$=($=($=$.multiply(j.translate)).multiply(j.skew)).multiply(j.scale);for(var H,Y,Ce,fe=this.ctx.transform.applyToRectangle(new a(B.x,T,E.w,E.h)),Le=$.applyToRectangle(new a(B.x,P,E.w,E.h)),X=y.call(this,Le),D=[],Ae=0;Ae<X.length;Ae+=1)D.indexOf(X[Ae])===-1&&D.push(X[Ae]);if(I(D),this.autoPaging)for(var ye=D[0],ae=D[D.length-1],le=ye;le<ae+1;le++){this.pdf.setPage(le);var Ee=le===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Se=ze-this.margin[0],ve=this.pdf.internal.pageSize.width-this.margin[1],Oe=ve-this.margin[3],Ne=le===1?0:Me+(le-2)*Se;if(this.ctx.clip_path.length!==0){var _e=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(H,this.posX+this.margin[3],-1*Ne+Ee),L.call(this,"fill",!0),this.path=_e}var q=C([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Ne+Ee+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*B.scale),Ce=this.lineWidth,this.lineWidth=Ce*B.scale);var de=this.autoPaging!=="text";if(de||q.y+q.h<=ze){if(de||q.y>=Ee&&q.x<=ve){var ue=de?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||ve-q.x)[0],Fe=C([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-Ne+Ee+this.ctx.prevPageLastElemOffset)[0],Pe=de&&(le>ye||le<ae)&&w.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,Se,null).clip().discardPath()),this.pdf.text(ue,Fe.x,Fe.y,{angle:B.angle,align:F,renderingMode:B.renderingMode}),Pe&&this.pdf.restoreGraphicsState()}}else q.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-q.y);B.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=Ce)}else B.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*B.scale),Ce=this.lineWidth,this.lineWidth=Ce*B.scale),this.pdf.text(B.text,O.x+this.posX,O.y+this.posY,{angle:B.angle,align:F,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=Ce)},J=function(B,F,E,T){E=E||0,T=T||0,this.pdf.internal.out(t(B+E)+" "+r(F+T)+" l")},ne=function(B,F,E){return this.pdf.lines(B,F,E,null,null)},ge=function(B,F,E,T,P,O,j,$){this.pdf.internal.out([e(o(E+B)),e(s(T+F)),e(o(P+B)),e(s(O+F)),e(o(j+B)),e(s($+F)),"c"].join(" "))},pe=function(B,F,E,T){for(var P=2*Math.PI,O=Math.PI/2;F>E;)F-=P;var j=Math.abs(E-F);j<P&&T&&(j=P-j);for(var $=[],H=T?-1:1,Y=F;j>1e-5;){var Ce=Y+H*Math.min(j,O);$.push(xe.call(this,B,Y,Ce)),j-=Math.abs(Ce-Y),Y=Ce}return $},xe=function(B,F,E){var T=(E-F)/2,P=B*Math.cos(T),O=B*Math.sin(T),j=P,$=-O,H=j*j+$*$,Y=H+j*P+$*O,Ce=4/3*(Math.sqrt(2*H*Y)-Y)/(j*O-$*P),fe=j-Ce*$,Le=$+Ce*j,X=fe,D=-Le,Ae=T+F,ye=Math.cos(Ae),ae=Math.sin(Ae);return{x1:B*Math.cos(F),y1:B*Math.sin(F),x2:fe*ye-Le*ae,y2:fe*ae+Le*ye,x3:X*ye-D*ae,y3:X*ae+D*ye,x4:B*Math.cos(E),y4:B*Math.sin(E)}},te=function(B){return 180*B/Math.PI},se=function(B,F,E,T,P,O){var j=B+.5*(E-B),$=F+.5*(T-F),H=P+.5*(E-P),Y=O+.5*(T-O),Ce=Math.min(B,P,j,H),fe=Math.max(B,P,j,H),Le=Math.min(F,O,$,Y),X=Math.max(F,O,$,Y);return new a(Ce,Le,fe-Ce,X-Le)},oe=function(B,F,E,T,P,O,j,$){var H,Y,Ce,fe,Le,X,D,Ae,ye,ae,le,Ee,Me,ze,Se=E-B,ve=T-F,Oe=P-E,Ne=O-T,_e=j-P,q=$-O;for(Y=0;Y<41;Y++)ye=(D=(Ce=B+(H=Y/40)*Se)+H*((Le=E+H*Oe)-Ce))+H*(Le+H*(P+H*_e-Le)-D),ae=(Ae=(fe=F+H*ve)+H*((X=T+H*Ne)-fe))+H*(X+H*(O+H*q-X)-Ae),Y==0?(le=ye,Ee=ae,Me=ye,ze=ae):(le=Math.min(le,ye),Ee=Math.min(Ee,ae),Me=Math.max(Me,ye),ze=Math.max(ze,ae));return new a(Math.round(le),Math.round(Ee),Math.round(Me-le),Math.round(ze-Ee))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,F,E=(B=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:F}));this.prevLineDash!==E&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=E)}}})(Sr.API),function(n){var e=function(s){var i,a,A,d,c,u,h,f,g,w;for(a=[],A=0,d=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;d>A;A+=4)(c=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(u=(c=((c=((c=((c=(c-(w=c%85))/85)-(g=c%85))/85)-(f=c%85))/85)-(h=c%85))/85)%85,a.push(u+33,h+33,f+33,g+33,w+33)):a.push(122);return function(y,x){for(var C=x;C>0;C--)y.pop()}(a,i.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var i,a,A,d,c,u=String,h="length",f=255,g="charCodeAt",w="slice",y="replace";for(s[w](-2),s=s[w](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),A=[],d=0,c=(s+=i="uuuuu"[w](s[h]%5||5))[h];c>d;d+=5)a=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),A.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(x,C){for(var I=C;I>0;I--)x.pop()}(A,i[h]),u.fromCharCode.apply(u,A)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var a="",A=0;A<s.length;A+=2)a+=String.fromCharCode("0x"+(s[A]+s[A+1]));return a},o=function(s){for(var i=new Uint8Array(s.length),a=s.length;a--;)i[a]=s.charCodeAt(a);return s=(i=xm(i)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,i){var a=0,A=s||"",d=[];for(typeof(i=i||[])=="string"&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":A=t(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=o(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(Sr.API),function(n){n.loadFile=function(e,t,r){return function(o,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var a=void 0;try{a=function(A,d,c){var u=new XMLHttpRequest,h=0,f=function(g){var w=g.length,y=[],x=String.fromCharCode;for(h=0;h<w;h+=1)y.push(x(255&g.charCodeAt(h)));return y.join("")};if(u.open("GET",A,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?c(f(this.responseText)):c(void 0)}),u.send(null),d&&u.status===200)return f(u.responseText)}(o,s,i)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Sr.API),function(n){function e(){return(Ir.html2canvas?Promise.resolve(Ir.html2canvas):ks(()=>import("./html2canvas.esm.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(Ir.DOMPurify?Promise.resolve(Ir.DOMPurify):ks(()=>import("./purify.es.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var a=Sn(i);return a==="undefined"?"undefined":a==="string"||i instanceof String?"string":a==="number"||i instanceof Number?"number":a==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(i,a){var A=document.createElement(i);for(var d in a.className&&(A.className=a.className),a.innerHTML&&a.dompurify&&(A.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)A.style[d]=a.style[d];return A},s=function i(a){var A=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),d=i.convert(Promise.resolve(),A);return d=(d=d.setProgress(1,i,1,[i])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,a){return i.__proto__=a||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,a){return this.then(function(){switch(a=a||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(A){return this.set({src:o("div",{innerHTML:i,dompurify:A})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function A(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(A(h,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,a(this.prop.container,A)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=this.opt.jsPDF,d=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var f=d[h],g=f.src.find(function(w){return w.format==="truetype"});g&&A.addFont(g.url,f.ref.name,f.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,A.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,a,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(i,a):this.outputPdf(i,a)},s.prototype.outputPdf=function(i,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,a)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var a=Object.keys(i||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=i[A]};switch(A){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[A]=i[A]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(i,a){return this.then(function(){var A=i in s.template.prop?this.prop[i]:this.opt[i];return a?a(A):A})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function a(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(i=i||Sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:a(i.inner.width,i.k),height:a(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,a,A,d){return i!=null&&(this.progress.val=i),a!=null&&(this.progress.state=a),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,a,A,d){return this.setProgress(i?this.progress.val+i:null,a||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(i,a){var A=this;return this.thenCore(i,a,function(d,c){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return A.updateProgress(null,d),u}).then(d,c).then(function(u){return A.updateProgress(1),u})})},s.prototype.thenCore=function(i,a,A){A=A||Promise.prototype.then,i&&(i=i.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=A.call(d,i,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(i,a){return Promise.prototype.then.call(this,i,a)},s.prototype.thenList=function(i){var a=this;return i.forEach(function(A){a=a.thenCore(A)}),a},s.prototype.catch=function(i){i&&(i=i.bind(this));var a=Promise.prototype.catch.call(this,i);return s.convert(a,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Sr.getPageSize=function(i,a,A){if(Sn(i)==="object"){var d=i;i=d.orientation,a=d.unit||a,A=d.format||A}a=a||"mm",A=A||"a4",i=(""+(i||"P")).toLowerCase();var c,u=(""+A).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var f,g=0,w=0;if(h.hasOwnProperty(u))g=h[u][1]/c,w=h[u][0]/c;else try{g=A[1],w=A[0]}catch{throw new Error("Invalid format: "+A)}if(i==="p"||i==="portrait")i="p",w>g&&(f=w,w=g,g=f);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>w&&(f=w,w=g,g=f)}return{width:w,height:g,unit:a,k:c,orientation:i}},n.html=function(i,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Fm):null;var A=new s(a);return a.worker?A:A.from(i).doCallback()}}(Sr.API),Sr.API.addJS=function(n){return b_=n,this.internal.events.subscribe("postPutResources",function(){jf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),__=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+b_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jf!==void 0&&__!==void 0&&this.internal.out("/Names <</JavaScript "+jf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var i=o[s],a=r.exec(i);if(a!=null){var A=a[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,c=[];for(s=0;s<d;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,s){var i={title:o,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var A=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var s=0;s<o.children.length;s++)r.count++,this.count_r(r,o.children[s]);return r.count}}])}(Sr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,s,i,a){var A,d=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(A=function(u){for(var h,f=256*u.charCodeAt(4)+u.charCodeAt(5),g=u.length,w={width:0,height:0,numcomponents:1},y=4;y<g;y+=2){if(y+=f,e.indexOf(u.charCodeAt(y+1))!==-1){h=256*u.charCodeAt(y+5)+u.charCodeAt(y+6),w={width:256*u.charCodeAt(y+7)+u.charCodeAt(y+8),height:h,numcomponents:u.charCodeAt(y+9)};break}f=256*u.charCodeAt(y+2)+u.charCodeAt(y+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:a,bitsPerComponent:8,filter:d,index:r,alias:o}}return c}}(Sr.API);var $d,Rf,x_,z_,B_,uN=function(){var n,e,t;function r(s){var i,a,A,d,c,u,h,f,g,w,y,x,C,I;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(i=this.readUInt32(),g=(function(){var M,L;for(L=[],M=0;M<4;++M)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*c/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(u!=null?u.data:void 0)||this.imgData,x=0;0<=i?x<i:x>i;0<=i?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((w=A-this.transparency.indexed.length)>0)for(C=0;0<=w?C<w:C>w;0<=w?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(y=this.read(i)).indexOf(0),f=String.fromCharCode.apply(String,y.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,a;for(a=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*i),A=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(u,h,f,g){var w,y,x,C,I,M,L,ee,W,R,Z,Be,N,k,J,ne,ge,pe,xe,te,se,oe=Math.ceil((d.width-u)/f),me=Math.ceil((d.height-h)/g),B=d.width==oe&&d.height==me;for(k=i*oe,Be=B?a:new Uint8Array(k*me),M=s.length,N=0,y=0;N<me&&A<M;){switch(s[A++]){case 0:for(C=ge=0;ge<k;C=ge+=1)Be[y++]=s[A++];break;case 1:for(C=pe=0;pe<k;C=pe+=1)w=s[A++],I=C<i?0:Be[y-i],Be[y++]=(w+I)%256;break;case 2:for(C=xe=0;xe<k;C=xe+=1)w=s[A++],x=(C-C%i)/i,J=N&&Be[(N-1)*k+x*i+C%i],Be[y++]=(J+w)%256;break;case 3:for(C=te=0;te<k;C=te+=1)w=s[A++],x=(C-C%i)/i,I=C<i?0:Be[y-i],J=N&&Be[(N-1)*k+x*i+C%i],Be[y++]=(w+Math.floor((I+J)/2))%256;break;case 4:for(C=se=0;se<k;C=se+=1)w=s[A++],x=(C-C%i)/i,I=C<i?0:Be[y-i],N===0?J=ne=0:(J=Be[(N-1)*k+x*i+C%i],ne=x&&Be[(N-1)*k+(x-1)*i+C%i]),L=I+J-ne,ee=Math.abs(L-I),R=Math.abs(L-J),Z=Math.abs(L-ne),W=ee<=R&&ee<=Z?I:R<=Z?J:ne,Be[y++]=(w+W)%256;break;default:throw new Error("Invalid filter algorithm: "+s[A-1])}if(!B){var F=((h+N*g)*d.width+u)*i,E=N*k;for(C=0;C<oe;C+=1){for(var T=0;T<i;T+=1)a[F++]=Be[E++];F+=(f-1)*i}}N++}}return s=$D(s),d.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,i,a,A,d,c,u,h,f;for(a=this.palette,c=this.transparency.indexed||[],d=new Uint8Array((c.length||0)+a.length),A=0,s=0,i=u=0,h=a.length;u<h;i=u+=3)d[A++]=a[i],d[A++]=a[i+1],d[A++]=a[i+2],d[A++]=(f=c[s++])!=null?f:255;return d},r.prototype.copyToImageData=function(s,i){var a,A,d,c,u,h,f,g,w,y,x;if(A=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),A=4,a=!0),g=(d=s.data||s).length,u=w||i,c=h=0,A===1)for(;c<g;)f=w?4*i[c/4]:h,y=u[f++],d[c++]=y,d[c++]=y,d[c++]=y,d[c++]=a?u[f++]:255,h=f;else for(;c<g;)f=w?4*i[c/4]:h,d[c++]=u[f++],d[c++]=u[f++],d[c++]=u[f++],d[c++]=a?u[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(Ir)==="[object Window]"){try{e=Ir.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(s){var i;if(o()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,a,A,d,c,u,h,f;if(this.animation){for(f=[],a=c=0,u=(h=this.animation.frames).length;c<u;a=++c)i=h[a],A=s.createImageData(i.width,i.height),d=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(A,d),i.imageData=A,f.push(i.image=n(A));return f}},r.prototype.renderFrame=function(s,i){var a,A,d;return a=(A=this.animation.frames)[i],d=A[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var i,a,A,d,c,u,h=this;return a=0,u=this.animation,d=u.numFrames,A=u.frames,c=u.numPlays,(i=function(){var f,g;if(f=a++%d,g=A[f],h.renderFrame(s,f),d>1&&a/d<c)return h.animation._timeout=setTimeout(i,g.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(a=i.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),i.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],s=o>>7,i=1<<(7&o)+1;n[e++],n[e++];var a=null,A=null;s&&(a=e,A=i,e+=3*i);var d=!0,c=[],u=0,h=null,f=0,g=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,g=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];u=n[e++]|n[e++]<<8,h=n[e++],!(1&w)&&(h=null),f=w>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,M=n[e++],L=M>>6&1,ee=1<<(7&M)+1,W=a,R=A,Z=!1;M>>7&&(Z=!0,W=e,R=ee,e+=3*ee);var Be=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}c.push({x:y,y:x,width:C,height:I,has_local_palette:Z,palette_offset:W,palette_size:R,data_offset:Be,data_length:e-Be,transparent_index:h,interlaced:!!L,delay:u,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=c.length)throw new Error("Frame index out of range.");return c[k]},this.decodeAndBlitFrameBGRA=function(k,J){var ne=this.frameInfo(k),ge=ne.width*ne.height,pe=new Uint8Array(ge);C_(n,ne.data_offset,pe,ge);var xe=ne.palette_offset,te=ne.transparent_index;te===null&&(te=256);var se=ne.width,oe=t-se,me=se,B=4*(ne.y*t+ne.x),F=4*((ne.y+ne.height)*t+ne.x),E=B,T=4*oe;ne.interlaced===!0&&(T+=4*t*7);for(var P=8,O=0,j=pe.length;O<j;++O){var $=pe[O];if(me===0&&(me=se,(E+=T)>=F&&(T=4*oe+4*t*(P-1),E=B+(se+oe)*(P<<1),P>>=1)),$===te)E+=4;else{var H=n[xe+3*$],Y=n[xe+3*$+1],Ce=n[xe+3*$+2];J[E++]=Ce,J[E++]=Y,J[E++]=H,J[E++]=255}--me}},this.decodeAndBlitFrameRGBA=function(k,J){var ne=this.frameInfo(k),ge=ne.width*ne.height,pe=new Uint8Array(ge);C_(n,ne.data_offset,pe,ge);var xe=ne.palette_offset,te=ne.transparent_index;te===null&&(te=256);var se=ne.width,oe=t-se,me=se,B=4*(ne.y*t+ne.x),F=4*((ne.y+ne.height)*t+ne.x),E=B,T=4*oe;ne.interlaced===!0&&(T+=4*t*7);for(var P=8,O=0,j=pe.length;O<j;++O){var $=pe[O];if(me===0&&(me=se,(E+=T)>=F&&(T=4*oe+4*t*(P-1),E=B+(se+oe)*(P<<1),P>>=1)),$===te)E+=4;else{var H=n[xe+3*$],Y=n[xe+3*$+1],Ce=n[xe+3*$+2];J[E++]=H,J[E++]=Y,J[E++]=Ce,J[E++]=255}--me}}}function C_(n,e,t,r){for(var o=n[e++],s=1<<o,i=s+1,a=i+1,A=o+1,d=(1<<A)-1,c=0,u=0,h=0,f=n[e++],g=new Int32Array(4096),w=null;;){for(;c<16&&f!==0;)u|=n[e++]<<c,c+=8,f===1?f=n[e++]:--f;if(c<A)break;var y=u&d;if(u>>=A,c-=A,y!==s){if(y===i)break;for(var x=y<a?y:w,C=0,I=x;I>s;)I=g[I]>>8,++C;var M=I;if(h+C+(x!==y?1:0)>r)return void Tn.log("Warning, gif stream longer than expected.");t[h++]=M;var L=h+=C;for(x!==y&&(t[h++]=M),I=x;C--;)I=g[I],t[--L]=255&I,I>>=8;w!==null&&a<4096&&(g[a++]=w<<8|M,a>=d+1&&A<12&&(++A,d=d<<1|1)),w=y}else a=i+1,d=(1<<(A=o+1))-1,w=null}return h!==r&&Tn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function s0(n){var e,t,r,o,s,i=Math.floor,a=new Array(64),A=new Array(64),d=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),g=new Array(64),w=[],y=0,x=7,C=new Array(64),I=new Array(64),M=new Array(64),L=new Array(256),ee=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],Be=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(B,F){for(var E=0,T=0,P=new Array,O=1;O<=16;O++){for(var j=1;j<=B[O];j++)P[F[T]]=[],P[F[T]][0]=E,P[F[T]][1]=O,T++,E++;E*=2}return P}function xe(B){for(var F=B[0],E=B[1]-1;E>=0;)F&1<<E&&(y|=1<<x),E--,--x<0&&(y==255?(te(255),te(0)):te(y),x=7,y=0)}function te(B){w.push(B)}function se(B){te(B>>8&255),te(255&B)}function oe(B,F,E,T,P){for(var O,j=P[0],$=P[240],H=function(ae,le){var Ee,Me,ze,Se,ve,Oe,Ne,_e,q,de,ue=0;for(q=0;q<8;++q){Ee=ae[ue],Me=ae[ue+1],ze=ae[ue+2],Se=ae[ue+3],ve=ae[ue+4],Oe=ae[ue+5],Ne=ae[ue+6];var Fe=Ee+(_e=ae[ue+7]),Pe=Ee-_e,it=Me+Ne,We=Me-Ne,je=ze+Oe,he=ze-Oe,De=Se+ve,ot=Se-ve,Ge=Fe+De,Je=Fe-De,rt=it+je,ht=it-je;ae[ue]=Ge+rt,ae[ue+4]=Ge-rt;var $e=.707106781*(ht+Je);ae[ue+2]=Je+$e,ae[ue+6]=Je-$e;var st=.382683433*((Ge=ot+he)-(ht=We+Pe)),Bt=.5411961*Ge+st,Ct=1.306562965*ht+st,Tt=.707106781*(rt=he+We),wt=Pe+Tt,Ze=Pe-Tt;ae[ue+5]=Ze+Bt,ae[ue+3]=Ze-Bt,ae[ue+1]=wt+Ct,ae[ue+7]=wt-Ct,ue+=8}for(ue=0,q=0;q<8;++q){Ee=ae[ue],Me=ae[ue+8],ze=ae[ue+16],Se=ae[ue+24],ve=ae[ue+32],Oe=ae[ue+40],Ne=ae[ue+48];var kt=Ee+(_e=ae[ue+56]),It=Ee-_e,jt=Me+Ne,et=Me-Ne,yt=ze+Oe,mt=ze-Oe,Vt=Se+ve,ir=Se-ve,qt=kt+Vt,Gt=kt-Vt,ar=jt+yt,St=jt-yt;ae[ue]=qt+ar,ae[ue+32]=qt-ar;var ft=.707106781*(St+Gt);ae[ue+16]=Gt+ft,ae[ue+48]=Gt-ft;var Dt=.382683433*((qt=ir+mt)-(St=et+It)),Yt=.5411961*qt+Dt,dr=1.306562965*St+Dt,ur=.707106781*(ar=mt+et),hr=It+ur,vr=It-ur;ae[ue+40]=vr+Yt,ae[ue+24]=vr-Yt,ae[ue+8]=hr+dr,ae[ue+56]=hr-dr,ue++}for(q=0;q<64;++q)de=ae[q]*le[q],f[q]=de>0?de+.5|0:de-.5|0;return f}(B,F),Y=0;Y<64;++Y)g[W[Y]]=H[Y];var Ce=g[0]-E;E=g[0],Ce==0?xe(T[0]):(xe(T[h[O=32767+Ce]]),xe(u[O]));for(var fe=63;fe>0&&g[fe]==0;)fe--;if(fe==0)return xe(j),E;for(var Le,X=1;X<=fe;){for(var D=X;g[X]==0&&X<=fe;)++X;var Ae=X-D;if(Ae>=16){Le=Ae>>4;for(var ye=1;ye<=Le;++ye)xe($);Ae&=15}O=32767+g[X],xe(P[(Ae<<4)+h[O]]),xe(u[O]),X++}return fe!=63&&xe(j),E}function me(B){B=Math.min(Math.max(B,1),100),s!=B&&(function(F){for(var E=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],T=0;T<64;T++){var P=i((E[T]*F+50)/100);P=Math.min(Math.max(P,1),255),a[W[T]]=P}for(var O=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],j=0;j<64;j++){var $=i((O[j]*F+50)/100);$=Math.min(Math.max($,1),255),A[W[j]]=$}for(var H=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Y=0,Ce=0;Ce<8;Ce++)for(var fe=0;fe<8;fe++)d[Y]=1/(a[W[Y]]*H[Ce]*H[fe]*8),c[Y]=1/(A[W[Y]]*H[Ce]*H[fe]*8),Y++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),s=B)}this.encode=function(B,F){F&&me(F),w=new Array,y=0,x=7,se(65496),se(65504),se(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),se(1),se(1),te(0),te(0),function(){se(65499),se(132),te(0);for(var Me=0;Me<64;Me++)te(a[Me]);te(1);for(var ze=0;ze<64;ze++)te(A[ze])}(),function(Me,ze){se(65472),se(17),te(8),se(ze),se(Me),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(B.width,B.height),function(){se(65476),se(418),te(0);for(var Me=0;Me<16;Me++)te(R[Me+1]);for(var ze=0;ze<=11;ze++)te(Z[ze]);te(16);for(var Se=0;Se<16;Se++)te(Be[Se+1]);for(var ve=0;ve<=161;ve++)te(N[ve]);te(1);for(var Oe=0;Oe<16;Oe++)te(k[Oe+1]);for(var Ne=0;Ne<=11;Ne++)te(J[Ne]);te(17);for(var _e=0;_e<16;_e++)te(ne[_e+1]);for(var q=0;q<=161;q++)te(ge[q])}(),se(65498),se(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var E=0,T=0,P=0;y=0,x=7,this.encode.displayName="_encode_";for(var O,j,$,H,Y,Ce,fe,Le,X,D=B.data,Ae=B.width,ye=B.height,ae=4*Ae,le=0;le<ye;){for(O=0;O<ae;){for(Y=ae*le+O,fe=-1,Le=0,X=0;X<64;X++)Ce=Y+(Le=X>>3)*ae+(fe=4*(7&X)),le+Le>=ye&&(Ce-=ae*(le+1+Le-ye)),O+fe>=ae&&(Ce-=O+fe-ae+4),j=D[Ce++],$=D[Ce++],H=D[Ce++],C[X]=(ee[j]+ee[$+256>>0]+ee[H+512>>0]>>16)-128,I[X]=(ee[j+768>>0]+ee[$+1024>>0]+ee[H+1280>>0]>>16)-128,M[X]=(ee[j+1280>>0]+ee[$+1536>>0]+ee[H+1792>>0]>>16)-128;E=oe(C,d,E,e,r),T=oe(I,c,T,t,o),P=oe(M,c,P,t,o),O+=32}le+=8}if(x>=0){var Ee=[];Ee[1]=x+1,Ee[0]=(1<<x+1)-1,xe(Ee)}return se(65497),new Uint8Array(w)},n=n||50,function(){for(var B=String.fromCharCode,F=0;F<256;F++)L[F]=B(F)}(),e=pe(R,Z),t=pe(k,J),r=pe(Be,N),o=pe(ne,ge),function(){for(var B=1,F=2,E=1;E<=15;E++){for(var T=B;T<F;T++)h[32767+T]=E,u[32767+T]=[],u[32767+T][1]=E,u[32767+T][0]=T;for(var P=-(F-1);P<=-B;P++)h[32767+P]=E,u[32767+P]=[],u[32767+P][1]=E,u[32767+P][0]=F-1+P;B<<=1,F<<=1}}(),function(){for(var B=0;B<256;B++)ee[B]=19595*B,ee[B+256>>0]=38470*B,ee[B+512>>0]=7471*B+32768,ee[B+768>>0]=-11059*B,ee[B+1024>>0]=-21709*B,ee[B+1280>>0]=32768*B+8421375,ee[B+1536>>0]=-27439*B,ee[B+1792>>0]=-5329*B}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $i(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function S_(n){function e(R){if(!R)throw Error("assert :P")}function t(R,Z,Be){for(var N=0;4>N;N++)if(R[Z+N]!=Be.charCodeAt(N))return!0;return!1}function r(R,Z,Be,N,k){for(var J=0;J<k;J++)R[Z+J]=Be[N+J]}function o(R,Z,Be,N){for(var k=0;k<N;k++)R[Z+k]=Be}function s(R){return new Int32Array(R)}function i(R,Z){for(var Be=[],N=0;N<R;N++)Be.push(new Z);return Be}function a(R,Z){var Be=[];return function N(k,J,ne){for(var ge=ne[J],pe=0;pe<ge&&(k.push(ne.length>J+1?[]:new Z),!(ne.length<J+1));pe++)N(k[pe],J+1,ne)}(Be,0,R),Be}var A=function(){var R=this;function Z(p,v){for(var S=1<<v-1>>>0;p&S;)S>>>=1;return S?(p&S-1)+S:p}function Be(p,v,S,Q,G){e(!(Q%S));do p[v+(Q-=S)]=G;while(0<Q)}function N(p,v,S,Q,G){if(e(2328>=G),512>=G)var re=s(512);else if((re=s(G))==null)return 0;return function(ie,ce,we,Ue,Re,ct){var ut,tt,Qt=ce,bt=1<<we,Ke=s(16),Ye=s(16);for(e(Re!=0),e(Ue!=null),e(ie!=null),e(0<we),tt=0;tt<Re;++tt){if(15<Ue[tt])return 0;++Ke[Ue[tt]]}if(Ke[0]==Re)return 0;for(Ye[1]=0,ut=1;15>ut;++ut){if(Ke[ut]>1<<ut)return 0;Ye[ut+1]=Ye[ut]+Ke[ut]}for(tt=0;tt<Re;++tt)ut=Ue[tt],0<Ue[tt]&&(ct[Ye[ut]++]=tt);if(Ye[15]==1)return(Ue=new k).g=0,Ue.value=ct[0],Be(ie,Qt,1,bt,Ue),bt;var Ft,Ot=-1,Ut=bt-1,or=0,Xt=1,xr=1,Jt=1<<we;for(tt=0,ut=1,Re=2;ut<=we;++ut,Re<<=1){if(Xt+=xr<<=1,0>(xr-=Ke[ut]))return 0;for(;0<Ke[ut];--Ke[ut])(Ue=new k).g=ut,Ue.value=ct[tt++],Be(ie,Qt+or,Re,Jt,Ue),or=Z(or,ut)}for(ut=we+1,Re=2;15>=ut;++ut,Re<<=1){if(Xt+=xr<<=1,0>(xr-=Ke[ut]))return 0;for(;0<Ke[ut];--Ke[ut]){if(Ue=new k,(or&Ut)!=Ot){for(Qt+=Jt,Ft=1<<(Ot=ut)-we;15>Ot&&!(0>=(Ft-=Ke[Ot]));)++Ot,Ft<<=1;bt+=Jt=1<<(Ft=Ot-we),ie[ce+(Ot=or&Ut)].g=Ft+we,ie[ce+Ot].value=Qt-ce-Ot}Ue.g=ut-we,Ue.value=ct[tt++],Be(ie,Qt+(or>>we),Re,Jt,Ue),or=Z(or,ut)}}return Xt!=2*Ye[15]-1?0:bt}(p,v,S,Q,G,re)}function k(){this.value=this.g=0}function J(){this.value=this.g=0}function ne(){this.G=i(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(co,J)}function ge(p,v,S,Q){e(p!=null),e(v!=null),e(2147483648>Q),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=S,p.Jd=v,p.Yc=S+Q,p.Zc=4<=Q?S+Q-4+1:S,O(p)}function pe(p,v){for(var S=0;0<v--;)S|=$(p,128)<<v;return S}function xe(p,v){var S=pe(p,v);return j(p)?-S:S}function te(p,v,S,Q){var G,re=0;for(e(p!=null),e(v!=null),e(4294967288>Q),p.Sb=Q,p.Ra=0,p.u=0,p.h=0,4<Q&&(Q=4),G=0;G<Q;++G)re+=v[S+G]<<8*G;p.Ra=re,p.bb=Q,p.oa=v,p.pa=S}function se(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<gn-8>>>0,++p.bb,p.u-=8;E(p)&&(p.h=1,p.u=0)}function oe(p,v){if(e(0<=v),!p.h&&v<=tn){var S=F(p)&Lr[v];return p.u+=v,se(p),S}return p.h=1,p.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(p){return p.Ra>>>(p.u&gn-1)>>>0}function E(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>gn}function T(p,v){p.u=v,p.h=E(p)}function P(p){p.u>=Io&&(e(p.u>=Io),se(p))}function O(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function j(p){return pe(p,1)}function $(p,v){var S=p.Ca;0>p.b&&O(p);var Q=p.b,G=S*v>>>8,re=(p.I>>>Q>G)+0;for(re?(S-=G,p.I-=G+1<<Q>>>0):S=G+1,Q=S,G=0;256<=Q;)G+=8,Q>>=8;return Q=7^G+kn[Q],p.b-=Q,p.Ca=(S<<Q)-1,re}function H(p,v,S){p[v+0]=S>>24&255,p[v+1]=S>>16&255,p[v+2]=S>>8&255,p[v+3]=S>>0&255}function Y(p,v){return p[v+0]<<0|p[v+1]<<8}function Ce(p,v){return Y(p,v)|p[v+2]<<16}function fe(p,v){return Y(p,v)|Y(p,v+2)<<16}function Le(p,v){var S=1<<v;return e(p!=null),e(0<v),p.X=s(S),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function X(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),r(v.X,0,p.X,0,1<<v.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function Ae(p,v,S,Q){e(S!=null),e(Q!=null);var G=S[0],re=Q[0];return G==0&&(G=(p*re+v/2)/v),re==0&&(re=(v*G+p/2)/p),0>=G||0>=re?0:(S[0]=G,Q[0]=re,1)}function ye(p,v){return p+(1<<v)-1>>>v}function ae(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function le(p,v){R[v]=function(S,Q,G,re,ie,ce,we){var Ue;for(Ue=0;Ue<ie;++Ue){var Re=R[p](ce[we+Ue-1],G,re+Ue);ce[we+Ue]=ae(S[Q+Ue],Re)}}}function Ee(){this.ud=this.hd=this.jd=0}function Me(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function ze(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Se(p,v){return ze(p+(p-v+.5>>1))}function ve(p,v,S){return Math.abs(v-S)-Math.abs(p-S)}function Oe(p,v,S,Q,G,re,ie){for(Q=re[ie-1],S=0;S<G;++S)re[ie+S]=Q=ae(p[v+S],Q)}function Ne(p,v,S,Q,G){var re;for(re=0;re<S;++re){var ie=p[v+re],ce=ie>>8&255,we=16711935&(we=(we=16711935&ie)+((ce<<16)+ce));Q[G+re]=(4278255360&ie)+we>>>0}}function _e(p,v){v.jd=p>>0&255,v.hd=p>>8&255,v.ud=p>>16&255}function q(p,v,S,Q,G,re){var ie;for(ie=0;ie<Q;++ie){var ce=v[S+ie],we=ce>>>8,Ue=ce,Re=255&(Re=(Re=ce>>>16)+((p.jd<<24>>24)*(we<<24>>24)>>>5));Ue=255&(Ue=(Ue=Ue+((p.hd<<24>>24)*(we<<24>>24)>>>5))+((p.ud<<24>>24)*(Re<<24>>24)>>>5)),G[re+ie]=(4278255360&ce)+(Re<<16)+Ue}}function de(p,v,S,Q,G){R[v]=function(re,ie,ce,we,Ue,Re,ct,ut,tt){for(we=ct;we<ut;++we)for(ct=0;ct<tt;++ct)Ue[Re++]=G(ce[Q(re[ie++])])},R[p]=function(re,ie,ce,we,Ue,Re,ct){var ut=8>>re.b,tt=re.Ea,Qt=re.K[0],bt=re.w;if(8>ut)for(re=(1<<re.b)-1,bt=(1<<ut)-1;ie<ce;++ie){var Ke,Ye=0;for(Ke=0;Ke<tt;++Ke)Ke&re||(Ye=Q(we[Ue++])),Re[ct++]=G(Qt[Ye&bt]),Ye>>=ut}else R["VP8LMapColor"+S](we,Ue,Qt,bt,Re,ct,ie,ce,tt)}}function ue(p,v,S,Q,G){for(S=v+S;v<S;){var re=p[v++];Q[G++]=re>>16&255,Q[G++]=re>>8&255,Q[G++]=re>>0&255}}function Fe(p,v,S,Q,G){for(S=v+S;v<S;){var re=p[v++];Q[G++]=re>>16&255,Q[G++]=re>>8&255,Q[G++]=re>>0&255,Q[G++]=re>>24&255}}function Pe(p,v,S,Q,G){for(S=v+S;v<S;){var re=(ie=p[v++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;Q[G++]=re,Q[G++]=ie}}function it(p,v,S,Q,G){for(S=v+S;v<S;){var re=(ie=p[v++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;Q[G++]=re,Q[G++]=ie}}function We(p,v,S,Q,G){for(S=v+S;v<S;){var re=p[v++];Q[G++]=re>>0&255,Q[G++]=re>>8&255,Q[G++]=re>>16&255}}function je(p,v,S,Q,G,re){if(re==0)for(S=v+S;v<S;)H(Q,((re=p[v++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),G+=32;else r(Q,G,p,v,S)}function he(p,v){R[v][0]=R[p+"0"],R[v][1]=R[p+"1"],R[v][2]=R[p+"2"],R[v][3]=R[p+"3"],R[v][4]=R[p+"4"],R[v][5]=R[p+"5"],R[v][6]=R[p+"6"],R[v][7]=R[p+"7"],R[v][8]=R[p+"8"],R[v][9]=R[p+"9"],R[v][10]=R[p+"10"],R[v][11]=R[p+"11"],R[v][12]=R[p+"12"],R[v][13]=R[p+"13"],R[v][14]=R[p+"0"],R[v][15]=R[p+"0"]}function De(p){return p==Wg||p==Xg||p==xh||p==Yg}function ot(){this.eb=[],this.size=this.A=this.fb=0}function Ge(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ot,this.f.kb=new Ge,this.sd=null}function rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $e(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function st(p,v){var S=p.T,Q=v.ba.f.RGBA,G=Q.eb,re=Q.fb+p.ka*Q.A,ie=Si[v.ba.S],ce=p.y,we=p.O,Ue=p.f,Re=p.N,ct=p.ea,ut=p.W,tt=v.cc,Qt=v.dc,bt=v.Mc,Ke=v.Nc,Ye=p.ka,Ft=p.ka+p.T,Ot=p.U,Ut=Ot+1>>1;for(Ye==0?ie(ce,we,null,null,Ue,Re,ct,ut,Ue,Re,ct,ut,G,re,null,null,Ot):(ie(v.ec,v.fc,ce,we,tt,Qt,bt,Ke,Ue,Re,ct,ut,G,re-Q.A,G,re,Ot),++S);Ye+2<Ft;Ye+=2)tt=Ue,Qt=Re,bt=ct,Ke=ut,Re+=p.Rc,ut+=p.Rc,re+=2*Q.A,ie(ce,(we+=2*p.fa)-p.fa,ce,we,tt,Qt,bt,Ke,Ue,Re,ct,ut,G,re-Q.A,G,re,Ot);return we+=p.fa,p.j+Ft<p.o?(r(v.ec,v.fc,ce,we,Ot),r(v.cc,v.dc,Ue,Re,Ut),r(v.Mc,v.Nc,ct,ut,Ut),S--):1&Ft||ie(ce,we,null,null,Ue,Re,ct,ut,Ue,Re,ct,ut,G,re+Q.A,null,null,Ot),S}function Bt(p,v,S){var Q=p.F,G=[p.J];if(Q!=null){var re=p.U,ie=v.ba.S,ce=ie==bh||ie==xh;v=v.ba.f.RGBA;var we=[0],Ue=p.ka;we[0]=p.T,p.Kb&&(Ue==0?--we[0]:(--Ue,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(we[0]=p.o-p.j-Ue));var Re=v.eb;Ue=v.fb+Ue*v.A,p=Dn(Q,G[0],p.width,re,we,Re,Ue+(ce?0:3),v.A),e(S==we),p&&De(ie)&&Bi(Re,Ue,ce,re,we,v.A)}return 0}function Ct(p){var v=p.ma,S=v.ba.S,Q=11>S,G=S==yh||S==_h||S==bh||S==Gg||S==12||De(S);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!eo(v.Oa,p,G?11:12))return 0;if(G&&De(S)&&Pt(),p.da)alert("todo:use_scaling");else{if(Q){if(v.Ib=$e,p.Kb){if(S=p.U+1>>1,v.memory=s(p.U+2*S),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+S,v.Ib=st,Pt()}}else alert("todo:EmitYUV");G&&(v.Jb=Bt,Q&&nt())}if(Q&&!w2){for(p=0;256>p;++p)_C[p]=89858*(p-128)+Bh>>zh,zC[p]=-22014*(p-128)+Bh,xC[p]=-45773*(p-128),bC[p]=113618*(p-128)+Bh>>zh;for(p=Kc;p<ev;++p)v=76283*(p-16)+Bh>>zh,BC[p-Kc]=Xo(v,255),CC[p-Kc]=Xo(v+8>>4,15);w2=1}return 1}function Tt(p){var v=p.ma,S=p.U,Q=p.T;return e(!(1&p.ka)),0>=S||0>=Q?0:(S=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,S),v.Dc+=S,1)}function wt(p){p.ma.memory=null}function Ze(p,v,S,Q){return oe(p,8)!=47?0:(v[0]=oe(p,14)+1,S[0]=oe(p,14)+1,Q[0]=oe(p,1),oe(p,3)!=0?0:!p.h)}function kt(p,v){if(4>p)return p+1;var S=p-2>>1;return(2+(1&p)<<S)+oe(v,S)+1}function It(p,v){return 120<v?v-120:1<=(S=((S=aC[v-1])>>4)*p+(8-(15&S)))?S:1;var S}function jt(p,v,S){var Q=F(S),G=p[v+=255&Q].g-8;return 0<G&&(T(S,S.u+8),Q=F(S),v+=p[v].value,v+=Q&(1<<G)-1),T(S,S.u+p[v].g),p[v].value}function et(p,v,S){return S.g+=p.g,S.value+=p.value<<v>>>0,e(8>=S.g),p.g}function yt(p,v,S){var Q=p.xc;return e((v=Q==0?0:p.vc[p.md*(S>>Q)+(v>>Q)])<p.Wb),p.Ya[v]}function mt(p,v,S,Q){var G=p.ab,re=p.c*v,ie=p.C;v=ie+v;var ce=S,we=Q;for(Q=p.Ta,S=p.Ua;0<G--;){var Ue=p.gc[G],Re=ie,ct=v,ut=ce,tt=we,Qt=(we=Q,ce=S,Ue.Ea);switch(e(Re<ct),e(ct<=Ue.nc),Ue.hc){case 2:oi(ut,tt,(ct-Re)*Qt,we,ce);break;case 0:var bt=Re,Ke=ct,Ye=we,Ft=ce,Ot=(Jt=Ue).Ea;bt==0&&(Uo(ut,tt,null,null,1,Ye,Ft),Oe(ut,tt+1,0,0,Ot-1,Ye,Ft+1),tt+=Ot,Ft+=Ot,++bt);for(var Ut=1<<Jt.b,or=Ut-1,Xt=ye(Ot,Jt.b),xr=Jt.K,Jt=Jt.w+(bt>>Jt.b)*Xt;bt<Ke;){var hn=xr,zn=Jt,sn=1;for(to(ut,tt,Ye,Ft-Ot,1,Ye,Ft);sn<Ot;){var qr=(sn&~or)+Ut;qr>Ot&&(qr=Ot),(0,ma[hn[zn++]>>8&15])(ut,tt+ +sn,Ye,Ft+sn-Ot,qr-sn,Ye,Ft+sn),sn=qr}tt+=Ot,Ft+=Ot,++bt&or||(Jt+=Xt)}ct!=Ue.nc&&r(we,ce-Qt,we,ce+(ct-Re-1)*Qt,Qt);break;case 1:for(Qt=ut,Ke=tt,Ot=(ut=Ue.Ea)-(Ft=ut&~(Ye=(tt=1<<Ue.b)-1)),bt=ye(ut,Ue.b),Ut=Ue.K,Ue=Ue.w+(Re>>Ue.b)*bt;Re<ct;){for(or=Ut,Xt=Ue,xr=new Ee,Jt=Ke+Ft,hn=Ke+ut;Ke<Jt;)_e(or[Xt++],xr),Wa(xr,Qt,Ke,tt,we,ce),Ke+=tt,ce+=tt;Ke<hn&&(_e(or[Xt++],xr),Wa(xr,Qt,Ke,Ot,we,ce),Ke+=Ot,ce+=Ot),++Re&Ye||(Ue+=bt)}break;case 3:if(ut==we&&tt==ce&&0<Ue.b){for(Ke=we,ut=Qt=ce+(ct-Re)*Qt-(Ft=(ct-Re)*ye(Ue.Ea,Ue.b)),tt=we,Ye=ce,bt=[],Ft=(Ot=Ft)-1;0<=Ft;--Ft)bt[Ft]=tt[Ye+Ft];for(Ft=Ot-1;0<=Ft;--Ft)Ke[ut+Ft]=bt[Ft];Ho(Ue,Re,ct,we,Qt,we,ce)}else Ho(Ue,Re,ct,ut,tt,we,ce)}ce=Q,we=S}we!=S&&r(Q,S,ce,we,re)}function Vt(p,v){var S=p.V,Q=p.Ba+p.c*p.C,G=v-p.C;if(e(v<=p.l.o),e(16>=G),0<G){var re=p.l,ie=p.Ta,ce=p.Ua,we=re.width;if(mt(p,G,S,Q),G=ce=[ce],e((S=p.C)<(Q=v)),e(re.v<re.va),Q>re.o&&(Q=re.o),S<re.j){var Ue=re.j-S;S=re.j,G[0]+=Ue*we}if(S>=Q?S=0:(G[0]+=4*re.v,re.ka=S-re.j,re.U=re.va-re.v,re.T=Q-S,S=1),S){if(ce=ce[0],11>(S=p.ca).S){var Re=S.f.RGBA,ct=(Q=S.S,G=re.U,re=re.T,Ue=Re.eb,Re.A),ut=re;for(Re=Re.fb+p.Ma*Re.A;0<ut--;){var tt=ie,Qt=ce,bt=G,Ke=Ue,Ye=Re;switch(Q){case wh:Jo(tt,Qt,bt,Ke,Ye);break;case yh:Zo(tt,Qt,bt,Ke,Ye);break;case Wg:Zo(tt,Qt,bt,Ke,Ye),Bi(Ke,Ye,0,bt,1,0);break;case d2:si(tt,Qt,bt,Ke,Ye);break;case _h:je(tt,Qt,bt,Ke,Ye,1);break;case Xg:je(tt,Qt,bt,Ke,Ye,1),Bi(Ke,Ye,0,bt,1,0);break;case bh:je(tt,Qt,bt,Ke,Ye,0);break;case xh:je(tt,Qt,bt,Ke,Ye,0),Bi(Ke,Ye,1,bt,1,0);break;case Gg:Bs(tt,Qt,bt,Ke,Ye);break;case Yg:Bs(tt,Qt,bt,Ke,Ye),On(Ke,Ye,bt,1,0);break;case c2:es(tt,Qt,bt,Ke,Ye);break;default:e(0)}ce+=we,Re+=ct}p.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=S.height)}}p.C=v,e(p.C<=p.i)}function ir(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var S=p.Ya[v].G,Q=p.Ya[v].H;if(0<S[1][Q[1]+0].g||0<S[2][Q[2]+0].g||0<S[3][Q[3]+0].g)return 0}return 1}function qt(p,v,S,Q,G,re){if(p.Z!=0){var ie=p.qd,ce=p.rd;for(e(PA[p.Z]!=null);v<S;++v)PA[p.Z](ie,ce,Q,G,Q,G,re),ie=Q,ce=G,G+=re;p.qd=ie,p.rd=ce}}function Gt(p,v){var S=p.l.ma,Q=S.Z==0||S.Z==1?p.l.j:p.C;if(Q=p.C<Q?Q:p.C,e(v<=p.l.o),v>Q){var G=p.l.width,re=S.ca,ie=S.tb+G*Q,ce=p.V,we=p.Ba+p.c*Q,Ue=p.gc;e(p.ab==1),e(Ue[0].hc==3),bl(Ue[0],Q,v,ce,we,re,ie),qt(S,Q,v,re,ie,G)}p.C=p.Ma=v}function ar(p,v,S,Q,G,re,ie){var ce=p.$/Q,we=p.$%Q,Ue=p.m,Re=p.s,ct=S+p.$,ut=ct;G=S+Q*G;var tt=S+Q*re,Qt=280+Re.ua,bt=p.Pb?ce:16777216,Ke=0<Re.ua?Re.Wa:null,Ye=Re.wc,Ft=ct<tt?yt(Re,we,ce):null;e(p.C<re),e(tt<=G);var Ot=!1;e:for(;;){for(;Ot||ct<tt;){var Ut=0;if(ce>=bt){var or=ct-S;e((bt=p).Pb),bt.wd=bt.m,bt.xd=or,0<bt.s.ua&&X(bt.s.Wa,bt.s.vb),bt=ce+lC}if(we&Ye||(Ft=yt(Re,we,ce)),e(Ft!=null),Ft.Qb&&(v[ct]=Ft.qb,Ot=!0),!Ot)if(P(Ue),Ft.jc){Ut=Ue,or=v;var Xt=ct,xr=Ft.pd[F(Ut)&co-1];e(Ft.jc),256>xr.g?(T(Ut,Ut.u+xr.g),or[Xt]=xr.value,Ut=0):(T(Ut,Ut.u+xr.g-256),e(256<=xr.value),Ut=xr.value),Ut==0&&(Ot=!0)}else Ut=jt(Ft.G[0],Ft.H[0],Ue);if(Ue.h)break;if(Ot||256>Ut){if(!Ot)if(Ft.nd)v[ct]=(Ft.qb|Ut<<8)>>>0;else{if(P(Ue),Ot=jt(Ft.G[1],Ft.H[1],Ue),P(Ue),or=jt(Ft.G[2],Ft.H[2],Ue),Xt=jt(Ft.G[3],Ft.H[3],Ue),Ue.h)break;v[ct]=(Xt<<24|Ot<<16|Ut<<8|or)>>>0}if(Ot=!1,++ct,++we>=Q&&(we=0,++ce,ie!=null&&ce<=re&&!(ce%16)&&ie(p,ce),Ke!=null))for(;ut<ct;)Ut=v[ut++],Ke.X[(506832829*Ut&4294967295)>>>Ke.Mb]=Ut}else if(280>Ut){if(Ut=kt(Ut-256,Ue),or=jt(Ft.G[4],Ft.H[4],Ue),P(Ue),or=It(Q,or=kt(or,Ue)),Ue.h)break;if(ct-S<or||G-ct<Ut)break e;for(Xt=0;Xt<Ut;++Xt)v[ct+Xt]=v[ct+Xt-or];for(ct+=Ut,we+=Ut;we>=Q;)we-=Q,++ce,ie!=null&&ce<=re&&!(ce%16)&&ie(p,ce);if(e(ct<=G),we&Ye&&(Ft=yt(Re,we,ce)),Ke!=null)for(;ut<ct;)Ut=v[ut++],Ke.X[(506832829*Ut&4294967295)>>>Ke.Mb]=Ut}else{if(!(Ut<Qt))break e;for(Ot=Ut-280,e(Ke!=null);ut<ct;)Ut=v[ut++],Ke.X[(506832829*Ut&4294967295)>>>Ke.Mb]=Ut;Ut=ct,e(!(Ot>>>(or=Ke).Xa)),v[Ut]=or.X[Ot],Ot=!0}Ot||e(Ue.h==E(Ue))}if(p.Pb&&Ue.h&&ct<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&X(p.s.vb,p.s.Wa);else{if(Ue.h)break e;ie!=null&&ie(p,ce>re?re:ce),p.a=0,p.$=ct-S}return 1}return p.a=3,0}function St(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function ft(){var p=new UA;return p==null?null:(p.a=0,p.xb=f2,he("Predictor","VP8LPredictors"),he("Predictor","VP8LPredictors_C"),he("PredictorAdd","VP8LPredictorsAdd"),he("PredictorAdd","VP8LPredictorsAdd_C"),oi=Ne,Wa=q,Jo=ue,Zo=Fe,Bs=Pe,es=it,si=We,R.VP8LMapColor32b=Ga,R.VP8LMapColor8b=pd,p)}function Dt(p,v,S,Q,G){var re=1,ie=[p],ce=[v],we=Q.m,Ue=Q.s,Re=null,ct=0;e:for(;;){if(S)for(;re&&oe(we,1);){var ut=ie,tt=ce,Qt=Q,bt=1,Ke=Qt.m,Ye=Qt.gc[Qt.ab],Ft=oe(Ke,2);if(Qt.Oc&1<<Ft)re=0;else{switch(Qt.Oc|=1<<Ft,Ye.hc=Ft,Ye.Ea=ut[0],Ye.nc=tt[0],Ye.K=[null],++Qt.ab,e(4>=Qt.ab),Ft){case 0:case 1:Ye.b=oe(Ke,3)+2,bt=Dt(ye(Ye.Ea,Ye.b),ye(Ye.nc,Ye.b),0,Qt,Ye.K),Ye.K=Ye.K[0];break;case 3:var Ot,Ut=oe(Ke,8)+1,or=16<Ut?0:4<Ut?1:2<Ut?2:3;if(ut[0]=ye(Ye.Ea,or),Ye.b=or,Ot=bt=Dt(Ut,1,0,Qt,Ye.K)){var Xt,xr=Ut,Jt=Ye,hn=1<<(8>>Jt.b),zn=s(hn);if(zn==null)Ot=0;else{var sn=Jt.K[0],qr=Jt.w;for(zn[0]=Jt.K[0][0],Xt=1;Xt<1*xr;++Xt)zn[Xt]=ae(sn[qr+Xt],zn[Xt-1]);for(;Xt<4*hn;++Xt)zn[Xt]=0;Jt.K[0]=null,Jt.K[0]=zn,Ot=1}}bt=Ot;break;case 2:break;default:e(0)}re=bt}}if(ie=ie[0],ce=ce[0],re&&oe(we,1)&&!(re=1<=(ct=oe(we,4))&&11>=ct)){Q.a=3;break e}var Qn;if(Qn=re)t:{var In,Or,Bo,Hs=Q,Co=ie,js=ce,Bn=ct,ai=S,Ai=Hs.m,jo=Hs.s,ts=[null],Ss=1,Ei=0,wa=AC[Bn];r:for(;;){if(ai&&oe(Ai,1)){var Ro=oe(Ai,3)+2,Za=ye(Co,Ro),Sl=ye(js,Ro),yd=Za*Sl;if(!Dt(Za,Sl,0,Hs,ts))break r;for(ts=ts[0],jo.xc=Ro,In=0;In<yd;++In){var kA=ts[In]>>8&65535;ts[In]=kA,kA>=Ss&&(Ss=kA+1)}}if(Ai.h)break r;for(Or=0;5>Or;++Or){var io=u2[Or];!Or&&0<Bn&&(io+=1<<Bn),Ei<io&&(Ei=io)}var tv=i(Ss*wa,k),b2=Ss,x2=i(b2,ne);if(x2==null)var Sh=null;else e(65536>=b2),Sh=x2;var Vc=s(Ei);if(Sh==null||Vc==null||tv==null){Hs.a=1;break r}var Eh=tv;for(In=Bo=0;In<Ss;++In){var Hi=Sh[In],_d=Hi.G,bd=Hi.H,z2=0,Fh=1,B2=0;for(Or=0;5>Or;++Or){io=u2[Or],_d[Or]=Eh,bd[Or]=Bo,!Or&&0<Bn&&(io+=1<<Bn);o:{var Ih,rv=io,Uh=Hs,Gc=Vc,FC=Eh,IC=Bo,nv=0,OA=Uh.m,UC=oe(OA,1);if(o(Gc,0,0,rv),UC){var QC=oe(OA,1)+1,TC=oe(OA,1),C2=oe(OA,TC==0?1:8);Gc[C2]=1,QC==2&&(Gc[C2=oe(OA,8)]=1);var Qh=1}else{var S2=s(19),E2=oe(OA,4)+4;if(19<E2){Uh.a=3;var Th=0;break o}for(Ih=0;Ih<E2;++Ih)S2[iC[Ih]]=oe(OA,3);var ov=void 0,Wc=void 0,F2=Uh,LC=S2,Lh=rv,I2=Gc,sv=0,DA=F2.m,U2=8,Q2=i(128,k);n:for(;N(Q2,0,7,LC,19);){if(oe(DA,1)){var PC=2+2*oe(DA,3);if((ov=2+oe(DA,PC))>Lh)break n}else ov=Lh;for(Wc=0;Wc<Lh&&ov--;){P(DA);var T2=Q2[0+(127&F(DA))];T(DA,DA.u+T2.g);var xd=T2.value;if(16>xd)I2[Wc++]=xd,xd!=0&&(U2=xd);else{var kC=xd==16,L2=xd-16,OC=oC[L2],P2=oe(DA,nC[L2])+OC;if(Wc+P2>Lh)break n;for(var DC=kC?U2:0;0<P2--;)I2[Wc++]=DC}}sv=1;break n}sv||(F2.a=3),Qh=sv}(Qh=Qh&&!OA.h)&&(nv=N(FC,IC,8,Gc,rv)),Qh&&nv!=0?Th=nv:(Uh.a=3,Th=0)}if(Th==0)break r;if(Fh&&sC[Or]==1&&(Fh=Eh[Bo].g==0),z2+=Eh[Bo].g,Bo+=Th,3>=Or){var Xc,iv=Vc[0];for(Xc=1;Xc<io;++Xc)Vc[Xc]>iv&&(iv=Vc[Xc]);B2+=iv}}if(Hi.nd=Fh,Hi.Qb=0,Fh&&(Hi.qb=(_d[3][bd[3]+0].value<<24|_d[1][bd[1]+0].value<<16|_d[2][bd[2]+0].value)>>>0,z2==0&&256>_d[0][bd[0]+0].value&&(Hi.Qb=1,Hi.qb+=_d[0][bd[0]+0].value<<8)),Hi.jc=!Hi.Qb&&6>B2,Hi.jc){var Ph,eA=Hi;for(Ph=0;Ph<co;++Ph){var NA=Ph,MA=eA.pd[NA],kh=eA.G[0][eA.H[0]+NA];256<=kh.value?(MA.g=kh.g+256,MA.value=kh.value):(MA.g=0,MA.value=0,NA>>=et(kh,8,MA),NA>>=et(eA.G[1][eA.H[1]+NA],16,MA),NA>>=et(eA.G[2][eA.H[2]+NA],0,MA),et(eA.G[3][eA.H[3]+NA],24,MA))}}}jo.vc=ts,jo.Wb=Ss,jo.Ya=Sh,jo.yc=tv,Qn=1;break t}Qn=0}if(!(re=Qn)){Q.a=3;break e}if(0<ct){if(Ue.ua=1<<ct,!Le(Ue.Wa,ct)){Q.a=1,re=0;break e}}else Ue.ua=0;var av=Q,k2=ie,NC=ce,Av=av.s,lv=Av.xc;if(av.c=k2,av.i=NC,Av.md=ye(k2,lv),Av.wc=lv==0?-1:(1<<lv)-1,S){Q.xb=gC;break e}if((Re=s(ie*ce))==null){Q.a=1,re=0;break e}re=(re=ar(Q,Re,0,ie,ce,ce,null))&&!we.h;break e}return re?(G!=null?G[0]=Re:(e(Re==null),e(S)),Q.$=0,S||St(Ue)):St(Ue),re}function Yt(p,v){var S=p.c*p.i,Q=S+v+16*v;return e(p.c<=v),p.V=s(Q),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+S+v,1)}function dr(p,v){var S=p.C,Q=v-S,G=p.V,re=p.Ba+p.c*S;for(e(v<=p.l.o);0<Q;){var ie=16<Q?16:Q,ce=p.l.ma,we=p.l.width,Ue=we*ie,Re=ce.ca,ct=ce.tb+we*S,ut=p.Ta,tt=p.Ua;mt(p,ie,G,re),ho(ut,tt,Re,ct,Ue),qt(ce,S,S+ie,Re,ct,we),Q-=ie,G+=ie*p.c,S+=ie}e(S==v),p.C=p.Ma=v}function ur(){this.ub=this.yd=this.td=this.Rb=0}function hr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function vr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function fn(){this.Yb=function(){var p=[];return function v(S,Q,G){for(var re=G[Q],ie=0;ie<re&&(S.push(G.length>Q+1?[]:0),!(G.length<Q+1));ie++)v(S[ie],Q+1,G)}(p,0,[3,11]),p}()}function pn(){this.jb=s(3),this.Wc=a([4,8],fn),this.Xc=a([4,17],fn)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function wr(){this.ld=this.La=this.dd=this.tc=0}function Vr(){this.Na=this.la=0}function Rr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function yr(){this.uc=this.M=this.Nb=0,this.wa=Array(new wr),this.Y=0,this.ya=Array(new pr),this.aa=0,this.l=new En}function Gr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function on(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new ur,this.Kc=new hr,this.ed=new kr,this.Qa=new vr,this.Ic=this.$c=this.Aa=0,this.D=new yr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,me),this.ia=0,this.pb=i(4,Rr),this.Pa=new pn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gr),this.Hd=0,this.rb=Array(new Vr),this.sb=0,this.wa=Array(new wr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pr),this.L=this.aa=0,this.gd=a([4,2],wr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function En(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wr(){var p=new on;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,qc||(qc=Fo)),p}function mr(p,v,S){return p.a==0&&(p.a=v,p.sc=S,p.cb=0),0}function qn(p,v,S){return 3<=S&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function As(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return mr(p,2,"null VP8Io passed to VP8GetHeaders()");var S=v.data,Q=v.w,G=v.ha;if(4>G)return mr(p,7,"Truncated header.");var re=S[Q+0]|S[Q+1]<<8|S[Q+2]<<16,ie=p.Od;if(ie.Rb=!(1&re),ie.td=re>>1&7,ie.yd=re>>4&1,ie.ub=re>>5,3<ie.td)return mr(p,3,"Incorrect keyframe parameters.");if(!ie.yd)return mr(p,4,"Frame not displayable.");Q+=3,G-=3;var ce=p.Kc;if(ie.Rb){if(7>G)return mr(p,7,"cannot parse picture header");if(!qn(S,Q,G))return mr(p,3,"Bad code word");ce.c=16383&(S[Q+4]<<8|S[Q+3]),ce.Td=S[Q+4]>>6,ce.i=16383&(S[Q+6]<<8|S[Q+5]),ce.Ud=S[Q+6]>>6,Q+=7,G-=7,p.za=ce.c+15>>4,p.Ub=ce.i+15>>4,v.width=ce.c,v.height=ce.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((re=p.Pa).jb,0,255,re.jb.length),e((re=p.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,o(re.Zb,0,0,re.Zb.length),o(re.Lb,0,0,re.Lb)}if(ie.ub>G)return mr(p,7,"bad partition length");ge(re=p.m,S,Q,ie.ub),Q+=ie.ub,G-=ie.ub,ie.Rb&&(ce.Ld=j(re),ce.Kd=j(re)),ce=p.Qa;var we,Ue=p.Pa;if(e(re!=null),e(ce!=null),ce.Cb=j(re),ce.Cb){if(ce.Bb=j(re),j(re)){for(ce.Fb=j(re),we=0;4>we;++we)ce.Zb[we]=j(re)?xe(re,7):0;for(we=0;4>we;++we)ce.Lb[we]=j(re)?xe(re,6):0}if(ce.Bb)for(we=0;3>we;++we)Ue.jb[we]=j(re)?pe(re,8):255}else ce.Bb=0;if(re.Ka)return mr(p,3,"cannot parse segment header");if((ce=p.ed).zd=j(re),ce.Tb=pe(re,6),ce.wb=pe(re,3),ce.Pc=j(re),ce.Pc&&j(re)){for(Ue=0;4>Ue;++Ue)j(re)&&(ce.vd[Ue]=xe(re,6));for(Ue=0;4>Ue;++Ue)j(re)&&(ce.od[Ue]=xe(re,6))}if(p.L=ce.Tb==0?0:ce.zd?1:2,re.Ka)return mr(p,3,"cannot parse filter header");var Re=G;if(G=we=Q,Q=we+Re,ce=Re,p.Xb=(1<<pe(p.m,2))-1,Re<3*(Ue=p.Xb))S=7;else{for(we+=3*Ue,ce-=3*Ue,Re=0;Re<Ue;++Re){var ct=S[G+0]|S[G+1]<<8|S[G+2]<<16;ct>ce&&(ct=ce),ge(p.Jc[+Re],S,we,ct),we+=ct,ce-=ct,G+=3}ge(p.Jc[+Ue],S,we,ce),S=we<Q?0:5}if(S!=0)return mr(p,S,"cannot parse partitions");for(S=pe(we=p.m,7),G=j(we)?xe(we,4):0,Q=j(we)?xe(we,4):0,ce=j(we)?xe(we,4):0,Ue=j(we)?xe(we,4):0,we=j(we)?xe(we,4):0,Re=p.Qa,ct=0;4>ct;++ct){if(Re.Cb){var ut=Re.Zb[ct];Re.Fb||(ut+=S)}else{if(0<ct){p.pb[ct]=p.pb[0];continue}ut=S}var tt=p.pb[ct];tt.Sc[0]=Jg[Xo(ut+G,127)],tt.Sc[1]=Zg[Xo(ut+0,127)],tt.Eb[0]=2*Jg[Xo(ut+Q,127)],tt.Eb[1]=101581*Zg[Xo(ut+ce,127)]>>16,8>tt.Eb[1]&&(tt.Eb[1]=8),tt.Qc[0]=Jg[Xo(ut+Ue,117)],tt.Qc[1]=Zg[Xo(ut+we,127)],tt.lc=ut+we}if(!ie.Rb)return mr(p,4,"Not a key frame.");for(j(re),ie=p.Pa,S=0;4>S;++S){for(G=0;8>G;++G)for(Q=0;3>Q;++Q)for(ce=0;11>ce;++ce)Ue=$(re,fC[S][G][Q][ce])?pe(re,8):uC[S][G][Q][ce],ie.Wc[S][G].Yb[Q][ce]=Ue;for(G=0;17>G;++G)ie.Xc[S][G]=ie.Wc[S][pC[G]]}return p.kc=j(re),p.kc&&(p.Bd=pe(re,8)),p.cb=1}function Fo(p,v,S,Q,G,re,ie){var ce=v[G].Yb[S];for(S=0;16>G;++G){if(!$(p,ce[S+0]))return G;for(;!$(p,ce[S+1]);)if(ce=v[++G].Yb[0],S=0,G==16)return 16;var we=v[G+1].Yb;if($(p,ce[S+2])){var Ue=p,Re=0;if($(Ue,(ut=ce)[(ct=S)+3]))if($(Ue,ut[ct+6])){for(ce=0,ct=2*(Re=$(Ue,ut[ct+8]))+(ut=$(Ue,ut[ct+9+Re])),Re=0,ut=dC[ct];ut[ce];++ce)Re+=Re+$(Ue,ut[ce]);Re+=3+(8<<ct)}else $(Ue,ut[ct+7])?(Re=7+2*$(Ue,165),Re+=$(Ue,145)):Re=5+$(Ue,159);else Re=$(Ue,ut[ct+4])?3+$(Ue,ut[ct+5]):2;ce=we[2]}else Re=1,ce=we[1];we=ie+cC[G],0>(Ue=p).b&&O(Ue);var ct,ut=Ue.b,tt=(ct=Ue.Ca>>1)-(Ue.I>>ut)>>31;--Ue.b,Ue.Ca+=tt,Ue.Ca|=1,Ue.I-=(ct+1&tt)<<ut,re[we]=((Re^tt)-tt)*Q[(0<G)+0]}return 16}function Oo(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Ds(p,v){if(p==null)return 0;if(v==null)return mr(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!As(p,v))return 0;if(e(p.cb),v.ac==null||v.ac(v)){v.ob&&(p.L=0);var S=Ch[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=v.v-S>>4,p.zb=v.j-S>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=v.o+15+S>>4,p.Hb=v.va+15+S>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var Q=p.ed;for(S=0;4>S;++S){var G;if(p.Qa.Cb){var re=p.Qa.Lb[S];p.Qa.Fb||(re+=Q.Tb)}else re=Q.Tb;for(G=0;1>=G;++G){var ie=p.gd[S][G],ce=re;if(Q.Pc&&(ce+=Q.vd[0],G&&(ce+=Q.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var we=ce;0<Q.wb&&(we=4<Q.wb?we>>2:we>>1)>9-Q.wb&&(we=9-Q.wb),1>we&&(we=1),ie.dd=we,ie.tc=2*ce+we,ie.ld=40<=ce?2:15<=ce?1:0}else ie.tc=0;ie.La=G}}}S=0}else mr(p,6,"Frame setup failed"),S=p.a;if(S=S==0){if(S){p.$c=0,0<p.Aa||(p.Ic=EC);e:{S=p.Ic,Q=4*(we=p.za);var Ue=32*we,Re=we+1,ct=0<p.L?we*(0<p.Aa?2:1):0,ut=(p.Aa==2?2:1)*we;if((ie=Q+832+(G=3*(16*S+Ch[p.L])/2*Ue)+(re=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=ie)S=0;else{if(ie>p.Vb){if(p.Vb=0,p.Ec=s(ie),p.Fc=0,p.Ec==null){S=mr(p,1,"no memory during frame initialization.");break e}p.Vb=ie}ie=p.Ec,ce=p.Fc,p.Ac=ie,p.Bc=ce,ce+=Q,p.Gd=i(Ue,Gr),p.Hd=0,p.rb=i(Re+1,Vr),p.sb=1,p.wa=ct?i(ct,wr):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=we),e(!0),p.oc=ie,p.pc=ce,ce+=832,p.ya=i(ut,pr),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=we),p.R=16*we,p.B=8*we,we=(Ue=Ch[p.L])*p.R,Ue=Ue/2*p.B,p.sa=ie,p.ta=ce+we,p.qa=p.sa,p.ra=p.ta+16*S*p.R+Ue,p.Ha=p.qa,p.Ia=p.ra+8*S*p.B+Ue,p.$c=0,ce+=G,p.mb=re?ie:null,p.nb=re?ce:null,e(ce+re<=p.Fc+p.Vb),Oo(p),o(p.Ac,p.Bc,0,Q),S=1}}if(S){if(v.ka=0,v.y=p.sa,v.O=p.ta,v.f=p.qa,v.N=p.ra,v.ea=p.Ha,v.Vd=p.Ia,v.fa=p.R,v.Rc=p.B,v.F=null,v.J=0,!vh){for(S=-255;255>=S;++S)Qo[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Ya[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)$c[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)wd[255+S]=0>S?0:255<S?255:S;vh=1}gd=Kt,Xa=$t,Hc=Rt,Cs=Mt,xi=Wt,uo=vt,vd=Ra,gh=ni,jc=FA,xl=$a,zl=EA,QA=Di,Bl=qa,md=IA,Cl=da,TA=Ns,Rc=Ms,zi=SA,Mi[0]=en,Mi[1]=Br,Mi[2]=mi,Mi[3]=Jn,Mi[4]=Do,Mi[5]=wi,Mi[6]=zs,Mi[7]=ds,Mi[8]=BA,Mi[9]=ei,LA[0]=Wo,LA[1]=Nt,LA[2]=br,LA[3]=$r,LA[4]=Mr,LA[5]=Kn,LA[6]=xo,Ja[0]=yi,Ja[1]=bn,Ja[2]=CA,Ja[3]=Aa,Ja[4]=Vn,Ja[5]=_l,Ja[6]=cs,S=1}else S=0}S&&(S=function(tt,Qt){for(tt.M=0;tt.M<tt.Va;++tt.M){var bt,Ke=tt.Jc[tt.M&tt.Xb],Ye=tt.m,Ft=tt;for(bt=0;bt<Ft.za;++bt){var Ot=Ye,Ut=Ft,or=Ut.Ac,Xt=Ut.Bc+4*bt,xr=Ut.zc,Jt=Ut.ya[Ut.aa+bt];if(Ut.Qa.Bb?Jt.$b=$(Ot,Ut.Pa.jb[0])?2+$(Ot,Ut.Pa.jb[2]):$(Ot,Ut.Pa.jb[1]):Jt.$b=0,Ut.kc&&(Jt.Ad=$(Ot,Ut.Bd)),Jt.Za=!$(Ot,145)+0,Jt.Za){var hn=Jt.Ob,zn=0;for(Ut=0;4>Ut;++Ut){var sn,qr=xr[0+Ut];for(sn=0;4>sn;++sn){qr=hC[or[Xt+sn]][qr];for(var Qn=h2[$(Ot,qr[0])];0<Qn;)Qn=h2[2*Qn+$(Ot,qr[Qn])];qr=-Qn,or[Xt+sn]=qr}r(hn,zn,or,Xt,4),zn+=4,xr[0+Ut]=qr}}else qr=$(Ot,156)?$(Ot,128)?1:3:$(Ot,163)?2:0,Jt.Ob[0]=qr,o(or,Xt,qr,4),o(xr,0,qr,4);Jt.Dd=$(Ot,142)?$(Ot,114)?$(Ot,183)?1:3:2:0}if(Ft.m.Ka)return mr(tt,7,"Premature end-of-partition0 encountered.");for(;tt.ja<tt.za;++tt.ja){if(Ft=Ke,Ot=(Ye=tt).rb[Ye.sb-1],or=Ye.rb[Ye.sb+Ye.ja],bt=Ye.ya[Ye.aa+Ye.ja],Xt=Ye.kc?bt.Ad:0)Ot.la=or.la=0,bt.Za||(Ot.Na=or.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var In,Or;if(Ot=or,or=Ft,Xt=Ye.Pa.Xc,xr=Ye.ya[Ye.aa+Ye.ja],Jt=Ye.pb[xr.$b],Ut=xr.ad,hn=0,zn=Ye.rb[Ye.sb-1],qr=sn=0,o(Ut,hn,0,384),xr.Za)var Bo=0,Hs=Xt[3];else{Qn=s(16);var Co=Ot.Na+zn.Na;if(Co=qc(or,Xt[1],Co,Jt.Eb,0,Qn,0),Ot.Na=zn.Na=(0<Co)+0,1<Co)gd(Qn,0,Ut,hn);else{var js=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)Ut[hn+Qn]=js}Bo=1,Hs=Xt[0]}var Bn=15&Ot.la,ai=15&zn.la;for(Qn=0;4>Qn;++Qn){var Ai=1&ai;for(js=Or=0;4>js;++js)Bn=Bn>>1|(Ai=(Co=qc(or,Hs,Co=Ai+(1&Bn),Jt.Sc,Bo,Ut,hn))>Bo)<<7,Or=Or<<2|(3<Co?3:1<Co?2:Ut[hn+0]!=0),hn+=16;Bn>>=4,ai=ai>>1|Ai<<7,sn=(sn<<8|Or)>>>0}for(Hs=Bn,Bo=ai>>4,In=0;4>In;In+=2){for(Or=0,Bn=Ot.la>>4+In,ai=zn.la>>4+In,Qn=0;2>Qn;++Qn){for(Ai=1&ai,js=0;2>js;++js)Co=Ai+(1&Bn),Bn=Bn>>1|(Ai=0<(Co=qc(or,Xt[2],Co,Jt.Qc,0,Ut,hn)))<<3,Or=Or<<2|(3<Co?3:1<Co?2:Ut[hn+0]!=0),hn+=16;Bn>>=2,ai=ai>>1|Ai<<5}qr|=Or<<4*In,Hs|=Bn<<4<<In,Bo|=(240&ai)<<In}Ot.la=Hs,zn.la=Bo,xr.Hc=sn,xr.Gc=qr,xr.ia=43690&qr?0:Jt.ia,Xt=!(sn|qr)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[bt.$b][bt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!Xt),Ft.Ka)return mr(tt,7,"Premature end-of-file encountered.")}if(Oo(tt),Ye=Qt,Ft=1,bt=(Ke=tt).D,Ot=0<Ke.L&&Ke.M>=Ke.zb&&Ke.M<=Ke.Va,Ke.Aa==0)e:{if(bt.M=Ke.M,bt.uc=Ot,Va(Ke,bt),Ft=1,bt=(Or=Ke.D).Nb,Ot=(qr=Ch[Ke.L])*Ke.R,or=qr/2*Ke.B,Qn=16*bt*Ke.R,js=8*bt*Ke.B,Xt=Ke.sa,xr=Ke.ta-Ot+Qn,Jt=Ke.qa,Ut=Ke.ra-or+js,hn=Ke.Ha,zn=Ke.Ia-or+js,ai=(Bn=Or.M)==0,sn=Bn>=Ke.Va-1,Ke.Aa==2&&Va(Ke,Or),Or.uc)for(Ai=(Co=Ke).D.M,e(Co.D.uc),Or=Co.yb;Or<Co.Hb;++Or){Bo=Or,Hs=Ai;var jo=(ts=(io=Co).D).Nb;In=io.R;var ts=ts.wa[ts.Y+Bo],Ss=io.sa,Ei=io.ta+16*jo*In+16*Bo,wa=ts.dd,Ro=ts.tc;if(Ro!=0)if(e(3<=Ro),io.L==1)0<Bo&&TA(Ss,Ei,In,Ro+4),ts.La&&zi(Ss,Ei,In,Ro),0<Hs&&Cl(Ss,Ei,In,Ro+4),ts.La&&Rc(Ss,Ei,In,Ro);else{var Za=io.B,Sl=io.qa,yd=io.ra+8*jo*Za+8*Bo,kA=io.Ha,io=io.Ia+8*jo*Za+8*Bo;jo=ts.ld,0<Bo&&(gh(Ss,Ei,In,Ro+4,wa,jo),xl(Sl,yd,kA,io,Za,Ro+4,wa,jo)),ts.La&&(QA(Ss,Ei,In,Ro,wa,jo),md(Sl,yd,kA,io,Za,Ro,wa,jo)),0<Hs&&(vd(Ss,Ei,In,Ro+4,wa,jo),jc(Sl,yd,kA,io,Za,Ro+4,wa,jo)),ts.La&&(zl(Ss,Ei,In,Ro,wa,jo),Bl(Sl,yd,kA,io,Za,Ro,wa,jo))}}if(Ke.ia&&alert("todo:DitherRow"),Ye.put!=null){if(Or=16*Bn,Bn=16*(Bn+1),ai?(Ye.y=Ke.sa,Ye.O=Ke.ta+Qn,Ye.f=Ke.qa,Ye.N=Ke.ra+js,Ye.ea=Ke.Ha,Ye.W=Ke.Ia+js):(Or-=qr,Ye.y=Xt,Ye.O=xr,Ye.f=Jt,Ye.N=Ut,Ye.ea=hn,Ye.W=zn),sn||(Bn-=qr),Bn>Ye.o&&(Bn=Ye.o),Ye.F=null,Ye.J=null,Ke.Fa!=null&&0<Ke.Fa.length&&Or<Bn&&(Ye.J=pa(Ke,Ye,Or,Bn-Or),Ye.F=Ke.mb,Ye.F==null&&Ye.F.length==0)){Ft=mr(Ke,3,"Could not decode alpha data.");break e}Or<Ye.j&&(qr=Ye.j-Or,Or=Ye.j,e(!(1&qr)),Ye.O+=Ke.R*qr,Ye.N+=Ke.B*(qr>>1),Ye.W+=Ke.B*(qr>>1),Ye.F!=null&&(Ye.J+=Ye.width*qr)),Or<Bn&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=Or-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=Bn-Or,Ft=Ye.put(Ye))}bt+1!=Ke.Ic||sn||(r(Ke.sa,Ke.ta-Ot,Xt,xr+16*Ke.R,Ot),r(Ke.qa,Ke.ra-or,Jt,Ut+8*Ke.B,or),r(Ke.Ha,Ke.Ia-or,hn,zn+8*Ke.B,or))}if(!Ft)return mr(tt,6,"Output aborted.")}return 1}(p,v)),v.bc!=null&&v.bc(v),S&=1}return S?(p.cb=0,S):0}function so(p,v,S,Q,G){G=p[v+S+32*Q]+(G>>3),p[v+S+32*Q]=-256&G?0>G?0:255:G}function ls(p,v,S,Q,G,re){so(p,v,0,S,Q+G),so(p,v,1,S,Q+re),so(p,v,2,S,Q-re),so(p,v,3,S,Q-G)}function Yn(p){return(20091*p>>16)+p}function qe(p,v,S,Q){var G,re=0,ie=s(16);for(G=0;4>G;++G){var ce=p[v+0]+p[v+8],we=p[v+0]-p[v+8],Ue=(35468*p[v+4]>>16)-Yn(p[v+12]),Re=Yn(p[v+4])+(35468*p[v+12]>>16);ie[re+0]=ce+Re,ie[re+1]=we+Ue,ie[re+2]=we-Ue,ie[re+3]=ce-Re,re+=4,v++}for(G=re=0;4>G;++G)ce=(p=ie[re+0]+4)+ie[re+8],we=p-ie[re+8],Ue=(35468*ie[re+4]>>16)-Yn(ie[re+12]),so(S,Q,0,0,ce+(Re=Yn(ie[re+4])+(35468*ie[re+12]>>16))),so(S,Q,1,0,we+Ue),so(S,Q,2,0,we-Ue),so(S,Q,3,0,ce-Re),re++,Q+=32}function vt(p,v,S,Q){var G=p[v+0]+4,re=35468*p[v+4]>>16,ie=Yn(p[v+4]),ce=35468*p[v+1]>>16;ls(S,Q,0,G+ie,p=Yn(p[v+1]),ce),ls(S,Q,1,G+re,p,ce),ls(S,Q,2,G-re,p,ce),ls(S,Q,3,G-ie,p,ce)}function $t(p,v,S,Q,G){qe(p,v,S,Q),G&&qe(p,v+16,S,Q+4)}function Rt(p,v,S,Q){Xa(p,v+0,S,Q,1),Xa(p,v+32,S,Q+128,1)}function Mt(p,v,S,Q){var G;for(p=p[v+0]+4,G=0;4>G;++G)for(v=0;4>v;++v)so(S,Q,v,G,p)}function Wt(p,v,S,Q){p[v+0]&&Cs(p,v+0,S,Q),p[v+16]&&Cs(p,v+16,S,Q+4),p[v+32]&&Cs(p,v+32,S,Q+128),p[v+48]&&Cs(p,v+48,S,Q+128+4)}function Kt(p,v,S,Q){var G,re=s(16);for(G=0;4>G;++G){var ie=p[v+0+G]+p[v+12+G],ce=p[v+4+G]+p[v+8+G],we=p[v+4+G]-p[v+8+G],Ue=p[v+0+G]-p[v+12+G];re[0+G]=ie+ce,re[8+G]=ie-ce,re[4+G]=Ue+we,re[12+G]=Ue-we}for(G=0;4>G;++G)ie=(p=re[0+4*G]+3)+re[3+4*G],ce=re[1+4*G]+re[2+4*G],we=re[1+4*G]-re[2+4*G],Ue=p-re[3+4*G],S[Q+0]=ie+ce>>3,S[Q+16]=Ue+we>>3,S[Q+32]=ie-ce>>3,S[Q+48]=Ue-we>>3,Q+=64}function _r(p,v,S){var Q,G=v-32,re=ii,ie=255-p[G-1];for(Q=0;Q<S;++Q){var ce,we=re,Ue=ie+p[v-1];for(ce=0;ce<S;++ce)p[v+ce]=we[Ue+p[G+ce]];v+=32}}function Br(p,v){_r(p,v,4)}function bn(p,v){_r(p,v,8)}function Nt(p,v){_r(p,v,16)}function br(p,v){var S;for(S=0;16>S;++S)r(p,v+32*S,p,v-32,16)}function $r(p,v){var S;for(S=16;0<S;--S)o(p,v,p[v-1],16),v+=32}function Mn(p,v,S){var Q;for(Q=0;16>Q;++Q)o(v,S+32*Q,p,16)}function Wo(p,v){var S,Q=16;for(S=0;16>S;++S)Q+=p[v-1+32*S]+p[v+S-32];Mn(Q>>5,p,v)}function Mr(p,v){var S,Q=8;for(S=0;16>S;++S)Q+=p[v-1+32*S];Mn(Q>>4,p,v)}function Kn(p,v){var S,Q=8;for(S=0;16>S;++S)Q+=p[v+S-32];Mn(Q>>4,p,v)}function xo(p,v){Mn(128,p,v)}function Ht(p,v,S){return p+2*v+S+2>>2}function mi(p,v){var S,Q=v-32;for(Q=new Uint8Array([Ht(p[Q-1],p[Q+0],p[Q+1]),Ht(p[Q+0],p[Q+1],p[Q+2]),Ht(p[Q+1],p[Q+2],p[Q+3]),Ht(p[Q+2],p[Q+3],p[Q+4])]),S=0;4>S;++S)r(p,v+32*S,Q,0,Q.length)}function Jn(p,v){var S=p[v-1],Q=p[v-1+32],G=p[v-1+64],re=p[v-1+96];H(p,v+0,16843009*Ht(p[v-1-32],S,Q)),H(p,v+32,16843009*Ht(S,Q,G)),H(p,v+64,16843009*Ht(Q,G,re)),H(p,v+96,16843009*Ht(G,re,re))}function en(p,v){var S,Q=4;for(S=0;4>S;++S)Q+=p[v+S-32]+p[v-1+32*S];for(Q>>=3,S=0;4>S;++S)o(p,v+32*S,Q,4)}function Do(p,v){var S=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],re=p[v-1-32],ie=p[v+0-32],ce=p[v+1-32],we=p[v+2-32],Ue=p[v+3-32];p[v+0+96]=Ht(Q,G,p[v-1+96]),p[v+1+96]=p[v+0+64]=Ht(S,Q,G),p[v+2+96]=p[v+1+64]=p[v+0+32]=Ht(re,S,Q),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=Ht(ie,re,S),p[v+3+64]=p[v+2+32]=p[v+1+0]=Ht(ce,ie,re),p[v+3+32]=p[v+2+0]=Ht(we,ce,ie),p[v+3+0]=Ht(Ue,we,ce)}function zs(p,v){var S=p[v+1-32],Q=p[v+2-32],G=p[v+3-32],re=p[v+4-32],ie=p[v+5-32],ce=p[v+6-32],we=p[v+7-32];p[v+0+0]=Ht(p[v+0-32],S,Q),p[v+1+0]=p[v+0+32]=Ht(S,Q,G),p[v+2+0]=p[v+1+32]=p[v+0+64]=Ht(Q,G,re),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=Ht(G,re,ie),p[v+3+32]=p[v+2+64]=p[v+1+96]=Ht(re,ie,ce),p[v+3+64]=p[v+2+96]=Ht(ie,ce,we),p[v+3+96]=Ht(ce,we,we)}function wi(p,v){var S=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],re=p[v-1-32],ie=p[v+0-32],ce=p[v+1-32],we=p[v+2-32],Ue=p[v+3-32];p[v+0+0]=p[v+1+64]=re+ie+1>>1,p[v+1+0]=p[v+2+64]=ie+ce+1>>1,p[v+2+0]=p[v+3+64]=ce+we+1>>1,p[v+3+0]=we+Ue+1>>1,p[v+0+96]=Ht(G,Q,S),p[v+0+64]=Ht(Q,S,re),p[v+0+32]=p[v+1+96]=Ht(S,re,ie),p[v+1+32]=p[v+2+96]=Ht(re,ie,ce),p[v+2+32]=p[v+3+96]=Ht(ie,ce,we),p[v+3+32]=Ht(ce,we,Ue)}function ds(p,v){var S=p[v+0-32],Q=p[v+1-32],G=p[v+2-32],re=p[v+3-32],ie=p[v+4-32],ce=p[v+5-32],we=p[v+6-32],Ue=p[v+7-32];p[v+0+0]=S+Q+1>>1,p[v+1+0]=p[v+0+64]=Q+G+1>>1,p[v+2+0]=p[v+1+64]=G+re+1>>1,p[v+3+0]=p[v+2+64]=re+ie+1>>1,p[v+0+32]=Ht(S,Q,G),p[v+1+32]=p[v+0+96]=Ht(Q,G,re),p[v+2+32]=p[v+1+96]=Ht(G,re,ie),p[v+3+32]=p[v+2+96]=Ht(re,ie,ce),p[v+3+64]=Ht(ie,ce,we),p[v+3+96]=Ht(ce,we,Ue)}function ei(p,v){var S=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],re=p[v-1+96];p[v+0+0]=S+Q+1>>1,p[v+2+0]=p[v+0+32]=Q+G+1>>1,p[v+2+32]=p[v+0+64]=G+re+1>>1,p[v+1+0]=Ht(S,Q,G),p[v+3+0]=p[v+1+32]=Ht(Q,G,re),p[v+3+32]=p[v+1+64]=Ht(G,re,re),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=re}function BA(p,v){var S=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],re=p[v-1+96],ie=p[v-1-32],ce=p[v+0-32],we=p[v+1-32],Ue=p[v+2-32];p[v+0+0]=p[v+2+32]=S+ie+1>>1,p[v+0+32]=p[v+2+64]=Q+S+1>>1,p[v+0+64]=p[v+2+96]=G+Q+1>>1,p[v+0+96]=re+G+1>>1,p[v+3+0]=Ht(ce,we,Ue),p[v+2+0]=Ht(ie,ce,we),p[v+1+0]=p[v+3+32]=Ht(S,ie,ce),p[v+1+32]=p[v+3+64]=Ht(Q,S,ie),p[v+1+64]=p[v+3+96]=Ht(G,Q,S),p[v+1+96]=Ht(re,G,Q)}function CA(p,v){var S;for(S=0;8>S;++S)r(p,v+32*S,p,v-32,8)}function Aa(p,v){var S;for(S=0;8>S;++S)o(p,v,p[v-1],8),v+=32}function Oi(p,v,S){var Q;for(Q=0;8>Q;++Q)o(v,S+32*Q,p,8)}function yi(p,v){var S,Q=8;for(S=0;8>S;++S)Q+=p[v+S-32]+p[v-1+32*S];Oi(Q>>4,p,v)}function _l(p,v){var S,Q=4;for(S=0;8>S;++S)Q+=p[v+S-32];Oi(Q>>3,p,v)}function Vn(p,v){var S,Q=4;for(S=0;8>S;++S)Q+=p[v-1+32*S];Oi(Q>>3,p,v)}function cs(p,v){Oi(128,p,v)}function ti(p,v,S){var Q=p[v-S],G=p[v+0],re=3*(G-Q)+Vg[1020+p[v-2*S]-p[v+S]],ie=mh[112+(re+4>>3)];p[v-S]=ii[255+Q+mh[112+(re+3>>3)]],p[v+0]=ii[255+G-ie]}function ln(p,v,S,Q){var G=p[v+0],re=p[v+S];return Ci[255+p[v-2*S]-p[v-S]]>Q||Ci[255+re-G]>Q}function la(p,v,S,Q){return 4*Ci[255+p[v-S]-p[v+0]]+Ci[255+p[v-2*S]-p[v+S]]<=Q}function ja(p,v,S,Q,G){var re=p[v-3*S],ie=p[v-2*S],ce=p[v-S],we=p[v+0],Ue=p[v+S],Re=p[v+2*S],ct=p[v+3*S];return 4*Ci[255+ce-we]+Ci[255+ie-Ue]>Q?0:Ci[255+p[v-4*S]-re]<=G&&Ci[255+re-ie]<=G&&Ci[255+ie-ce]<=G&&Ci[255+ct-Re]<=G&&Ci[255+Re-Ue]<=G&&Ci[255+Ue-we]<=G}function da(p,v,S,Q){var G=2*Q+1;for(Q=0;16>Q;++Q)la(p,v+Q,S,G)&&ti(p,v+Q,S)}function Ns(p,v,S,Q){var G=2*Q+1;for(Q=0;16>Q;++Q)la(p,v+Q*S,1,G)&&ti(p,v+Q*S,1)}function Ms(p,v,S,Q){var G;for(G=3;0<G;--G)da(p,v+=4*S,S,Q)}function SA(p,v,S,Q){var G;for(G=3;0<G;--G)Ns(p,v+=4,S,Q)}function ri(p,v,S,Q,G,re,ie,ce){for(re=2*re+1;0<G--;){if(ja(p,v,S,re,ie))if(ln(p,v,S,ce))ti(p,v,S);else{var we=p,Ue=v,Re=S,ct=we[Ue-2*Re],ut=we[Ue-Re],tt=we[Ue+0],Qt=we[Ue+Re],bt=we[Ue+2*Re],Ke=27*(Ft=Vg[1020+3*(tt-ut)+Vg[1020+ct-Qt]])+63>>7,Ye=18*Ft+63>>7,Ft=9*Ft+63>>7;we[Ue-3*Re]=ii[255+we[Ue-3*Re]+Ft],we[Ue-2*Re]=ii[255+ct+Ye],we[Ue-Re]=ii[255+ut+Ke],we[Ue+0]=ii[255+tt-Ke],we[Ue+Re]=ii[255+Qt-Ye],we[Ue+2*Re]=ii[255+bt-Ft]}v+=Q}}function us(p,v,S,Q,G,re,ie,ce){for(re=2*re+1;0<G--;){if(ja(p,v,S,re,ie))if(ln(p,v,S,ce))ti(p,v,S);else{var we=p,Ue=v,Re=S,ct=we[Ue-Re],ut=we[Ue+0],tt=we[Ue+Re],Qt=mh[112+((bt=3*(ut-ct))+4>>3)],bt=mh[112+(bt+3>>3)],Ke=Qt+1>>1;we[Ue-2*Re]=ii[255+we[Ue-2*Re]+Ke],we[Ue-Re]=ii[255+ct+bt],we[Ue+0]=ii[255+ut-Qt],we[Ue+Re]=ii[255+tt-Ke]}v+=Q}}function Ra(p,v,S,Q,G,re){ri(p,v,S,1,16,Q,G,re)}function ni(p,v,S,Q,G,re){ri(p,v,1,S,16,Q,G,re)}function EA(p,v,S,Q,G,re){var ie;for(ie=3;0<ie;--ie)us(p,v+=4*S,S,1,16,Q,G,re)}function Di(p,v,S,Q,G,re){var ie;for(ie=3;0<ie;--ie)us(p,v+=4,1,S,16,Q,G,re)}function FA(p,v,S,Q,G,re,ie,ce){ri(p,v,G,1,8,re,ie,ce),ri(S,Q,G,1,8,re,ie,ce)}function $a(p,v,S,Q,G,re,ie,ce){ri(p,v,1,G,8,re,ie,ce),ri(S,Q,1,G,8,re,ie,ce)}function qa(p,v,S,Q,G,re,ie,ce){us(p,v+4*G,G,1,8,re,ie,ce),us(S,Q+4*G,G,1,8,re,ie,ce)}function IA(p,v,S,Q,G,re,ie,ce){us(p,v+4,1,G,8,re,ie,ce),us(S,Q+4,1,G,8,re,ie,ce)}function _i(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ca(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ua(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ka(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ne,this.yc=new k}function UA(){this.xb=this.a=0,this.l=new En,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ka,this.ab=0,this.gc=i(4,ua),this.Oc=0}function ha(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new En,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ni(p,v,S,Q,G,re,ie){for(p=p==null?0:p[v+0],v=0;v<ie;++v)G[re+v]=p+S[Q+v]&255,p=G[re+v]}function fa(p,v,S,Q,G,re,ie){var ce;if(p==null)Ni(null,null,S,Q,G,re,ie);else for(ce=0;ce<ie;++ce)G[re+ce]=p[v+ce]+S[Q+ce]&255}function bi(p,v,S,Q,G,re,ie){if(p==null)Ni(null,null,S,Q,G,re,ie);else{var ce,we=p[v+0],Ue=we,Re=we;for(ce=0;ce<ie;++ce)Ue=Re+(we=p[v+ce])-Ue,Re=S[Q+ce]+(-256&Ue?0>Ue?0:255:Ue)&255,Ue=we,G[re+ce]=Re}}function pa(p,v,S,Q){var G=v.width,re=v.o;if(e(p!=null&&v!=null),0>S||0>=Q||S+Q>re)return null;if(!p.Cc){if(p.ga==null){var ie;if(p.ga=new ha,(ie=p.ga==null)||(ie=v.width*v.o,e(p.Gb.length==0),p.Gb=s(ie),p.Uc=0,p.Gb==null?ie=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,ie=1),ie=!ie),!ie){ie=p.ga;var ce=p.Fa,we=p.P,Ue=p.qc,Re=p.mb,ct=p.nb,ut=we+1,tt=Ue-1,Qt=ie.l;if(e(ce!=null&&Re!=null&&v!=null),PA[0]=null,PA[1]=Ni,PA[2]=fa,PA[3]=bi,ie.ca=Re,ie.tb=ct,ie.c=v.width,ie.i=v.height,e(0<ie.c&&0<ie.i),1>=Ue)v=0;else if(ie.$a=ce[we+0]>>0&3,ie.Z=ce[we+0]>>2&3,ie.Lc=ce[we+0]>>4&3,we=ce[we+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||we)v=0;else if(Qt.put=Tt,Qt.ac=Ct,Qt.bc=wt,Qt.ma=ie,Qt.width=v.width,Qt.height=v.height,Qt.Da=v.Da,Qt.v=v.v,Qt.va=v.va,Qt.j=v.j,Qt.o=v.o,ie.$a)e:{e(ie.$a==1),v=ft();t:for(;;){if(v==null){v=0;break e}if(e(ie!=null),ie.mc=v,v.c=ie.c,v.i=ie.i,v.l=ie.l,v.l.ma=ie,v.l.width=ie.c,v.l.height=ie.i,v.a=0,te(v.m,ce,ut,tt),!Dt(ie.c,ie.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&ir(v.s)?(ie.ic=1,ce=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(ce),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(ie.ic=0,v=Yt(v,ie.c)),!v))break t;v=1;break e}ie.mc=null,v=0}else v=tt>=ie.c*ie.i;ie=!v}if(ie)return null;p.ga.Lc!=1?p.Ga=0:Q=re-S}e(p.ga!=null),e(S+Q<=re);e:{if(v=(ce=p.ga).c,re=ce.l.o,ce.$a==0){if(ut=p.rc,tt=p.Vc,Qt=p.Fa,we=p.P+1+S*v,Ue=p.mb,Re=p.nb+S*v,e(we<=p.P+p.qc),ce.Z!=0)for(e(PA[ce.Z]!=null),ie=0;ie<Q;++ie)PA[ce.Z](ut,tt,Qt,we,Ue,Re,v),ut=Ue,tt=Re,Re+=v,we+=v;else for(ie=0;ie<Q;++ie)r(Ue,Re,Qt,we,v),ut=Ue,tt=Re,Re+=v,we+=v;p.rc=ut,p.Vc=tt}else{if(e(ce.mc!=null),v=S+Q,e((ie=ce.mc)!=null),e(v<=ie.i),ie.C>=v)v=1;else if(ce.ic||nt(),ce.ic){ce=ie.V,ut=ie.Ba,tt=ie.c;var bt=ie.i,Ke=(Qt=1,we=ie.$/tt,Ue=ie.$%tt,Re=ie.m,ct=ie.s,ie.$),Ye=tt*bt,Ft=tt*v,Ot=ct.wc,Ut=Ke<Ft?yt(ct,Ue,we):null;e(Ke<=Ye),e(v<=bt),e(ir(ct));t:for(;;){for(;!Re.h&&Ke<Ft;){if(Ue&Ot||(Ut=yt(ct,Ue,we)),e(Ut!=null),P(Re),256>(bt=jt(Ut.G[0],Ut.H[0],Re)))ce[ut+Ke]=bt,++Ke,++Ue>=tt&&(Ue=0,++we<=v&&!(we%16)&&Gt(ie,we));else{if(!(280>bt)){Qt=0;break t}bt=kt(bt-256,Re);var or,Xt=jt(Ut.G[4],Ut.H[4],Re);if(P(Re),!(Ke>=(Xt=It(tt,Xt=kt(Xt,Re)))&&Ye-Ke>=bt)){Qt=0;break t}for(or=0;or<bt;++or)ce[ut+Ke+or]=ce[ut+Ke+or-Xt];for(Ke+=bt,Ue+=bt;Ue>=tt;)Ue-=tt,++we<=v&&!(we%16)&&Gt(ie,we);Ke<Ft&&Ue&Ot&&(Ut=yt(ct,Ue,we))}e(Re.h==E(Re))}Gt(ie,we>v?v:we);break t}!Qt||Re.h&&Ke<Ye?(Qt=0,ie.a=Re.h?5:3):ie.$=Ke,v=Qt}else v=ar(ie,ie.V,ie.Ba,ie.c,ie.i,v,dr);if(!v){Q=0;break e}}S+Q>=re&&(p.Cc=1),Q=1}if(!Q)return null;if(p.Cc&&((Q=p.ga)!=null&&(Q.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+S*G}function b(p,v,S,Q,G,re){for(;0<G--;){var ie,ce=p,we=v+(S?1:0),Ue=p,Re=v+(S?0:3);for(ie=0;ie<Q;++ie){var ct=Ue[Re+4*ie];ct!=255&&(ct*=32897,ce[we+4*ie+0]=ce[we+4*ie+0]*ct>>23,ce[we+4*ie+1]=ce[we+4*ie+1]*ct>>23,ce[we+4*ie+2]=ce[we+4*ie+2]*ct>>23)}v+=re}}function K(p,v,S,Q,G){for(;0<Q--;){var re;for(re=0;re<S;++re){var ie=p[v+2*re+0],ce=15&(Ue=p[v+2*re+1]),we=4369*ce,Ue=(240&Ue|Ue>>4)*we>>16;p[v+2*re+0]=(240&ie|ie>>4)*we>>16&240|(15&ie|ie<<4)*we>>16>>4&15,p[v+2*re+1]=240&Ue|ce}v+=G}}function Te(p,v,S,Q,G,re,ie,ce){var we,Ue,Re=255;for(Ue=0;Ue<G;++Ue){for(we=0;we<Q;++we){var ct=p[v+we];re[ie+4*we]=ct,Re&=ct}v+=S,ie+=ce}return Re!=255}function He(p,v,S,Q,G){var re;for(re=0;re<G;++re)S[Q+re]=p[v+re]>>8}function nt(){Bi=b,On=K,Dn=Te,ho=He}function xt(p,v,S){R[p]=function(Q,G,re,ie,ce,we,Ue,Re,ct,ut,tt,Qt,bt,Ke,Ye,Ft,Ot){var Ut,or=Ot-1>>1,Xt=ce[we+0]|Ue[Re+0]<<16,xr=ct[ut+0]|tt[Qt+0]<<16;e(Q!=null);var Jt=3*Xt+xr+131074>>2;for(v(Q[G+0],255&Jt,Jt>>16,bt,Ke),re!=null&&(Jt=3*xr+Xt+131074>>2,v(re[ie+0],255&Jt,Jt>>16,Ye,Ft)),Ut=1;Ut<=or;++Ut){var hn=ce[we+Ut]|Ue[Re+Ut]<<16,zn=ct[ut+Ut]|tt[Qt+Ut]<<16,sn=Xt+hn+xr+zn+524296,qr=sn+2*(hn+xr)>>3;Jt=qr+Xt>>1,Xt=(sn=sn+2*(Xt+zn)>>3)+hn>>1,v(Q[G+2*Ut-1],255&Jt,Jt>>16,bt,Ke+(2*Ut-1)*S),v(Q[G+2*Ut-0],255&Xt,Xt>>16,bt,Ke+(2*Ut-0)*S),re!=null&&(Jt=sn+xr>>1,Xt=qr+zn>>1,v(re[ie+2*Ut-1],255&Jt,Jt>>16,Ye,Ft+(2*Ut-1)*S),v(re[ie+2*Ut+0],255&Xt,Xt>>16,Ye,Ft+(2*Ut+0)*S)),Xt=hn,xr=zn}1&Ot||(Jt=3*Xt+xr+131074>>2,v(Q[G+Ot-1],255&Jt,Jt>>16,bt,Ke+(Ot-1)*S),re!=null&&(Jt=3*xr+Xt+131074>>2,v(re[ie+Ot-1],255&Jt,Jt>>16,Ye,Ft+(Ot-1)*S)))}}function Pt(){Si[wh]=vC,Si[yh]=p2,Si[d2]=mC,Si[_h]=g2,Si[bh]=v2,Si[Gg]=m2,Si[c2]=wC,Si[Wg]=p2,Si[Xg]=g2,Si[xh]=v2,Si[Yg]=m2}function Zt(p){return p&-16384?0>p?0:255:p>>yC}function fr(p,v){return Zt((19077*p>>8)+(26149*v>>8)-14234)}function Ur(p,v,S){return Zt((19077*p>>8)-(6419*v>>8)-(13320*S>>8)+8708)}function Qr(p,v){return Zt((19077*p>>8)+(33050*v>>8)-17685)}function Hr(p,v,S,Q,G){Q[G+0]=fr(p,S),Q[G+1]=Ur(p,v,S),Q[G+2]=Qr(p,v)}function Fn(p,v,S,Q,G){Q[G+0]=Qr(p,v),Q[G+1]=Ur(p,v,S),Q[G+2]=fr(p,S)}function Pn(p,v,S,Q,G){var re=Ur(p,v,S);v=re<<3&224|Qr(p,v)>>3,Q[G+0]=248&fr(p,S)|re>>5,Q[G+1]=v}function Gn(p,v,S,Q,G){var re=240&Qr(p,v)|15;Q[G+0]=240&fr(p,S)|Ur(p,v,S)>>4,Q[G+1]=re}function zo(p,v,S,Q,G){Q[G+0]=255,Hr(p,v,S,Q,G+1)}function Zn(p,v,S,Q,G){Fn(p,v,S,Q,G),Q[G+3]=255}function No(p,v,S,Q,G){Hr(p,v,S,Q,G),Q[G+3]=255}function Xo(p,v){return 0>p?0:p>v?v:p}function hs(p,v,S){R[p]=function(Q,G,re,ie,ce,we,Ue,Re,ct){for(var ut=Re+(-2&ct)*S;Re!=ut;)v(Q[G+0],re[ie+0],ce[we+0],Ue,Re),v(Q[G+1],re[ie+0],ce[we+0],Ue,Re+S),G+=2,++ie,++we,Re+=2*S;1&ct&&v(Q[G+0],re[ie+0],ce[we+0],Ue,Re)}}function ga(p,v,S){return S==0?p==0?v==0?6:5:v==0?4:0:S}function va(p,v,S,Q,G){switch(p>>>30){case 3:Xa(v,S,Q,G,0);break;case 2:uo(v,S,Q,G);break;case 1:Cs(v,S,Q,G)}}function Va(p,v){var S,Q,G=v.M,re=v.Nb,ie=p.oc,ce=p.pc+40,we=p.oc,Ue=p.pc+584,Re=p.oc,ct=p.pc+600;for(S=0;16>S;++S)ie[ce+32*S-1]=129;for(S=0;8>S;++S)we[Ue+32*S-1]=129,Re[ct+32*S-1]=129;for(0<G?ie[ce-1-32]=we[Ue-1-32]=Re[ct-1-32]=129:(o(ie,ce-32-1,127,21),o(we,Ue-32-1,127,9),o(Re,ct-32-1,127,9)),Q=0;Q<p.za;++Q){var ut=v.ya[v.aa+Q];if(0<Q){for(S=-1;16>S;++S)r(ie,ce+32*S-4,ie,ce+32*S+12,4);for(S=-1;8>S;++S)r(we,Ue+32*S-4,we,Ue+32*S+4,4),r(Re,ct+32*S-4,Re,ct+32*S+4,4)}var tt=p.Gd,Qt=p.Hd+Q,bt=ut.ad,Ke=ut.Hc;if(0<G&&(r(ie,ce-32,tt[Qt].y,0,16),r(we,Ue-32,tt[Qt].f,0,8),r(Re,ct-32,tt[Qt].ea,0,8)),ut.Za){var Ye=ie,Ft=ce-32+16;for(0<G&&(Q>=p.za-1?o(Ye,Ft,tt[Qt].y[15],4):r(Ye,Ft,tt[Qt+1].y,0,4)),S=0;4>S;S++)Ye[Ft+128+S]=Ye[Ft+256+S]=Ye[Ft+384+S]=Ye[Ft+0+S];for(S=0;16>S;++S,Ke<<=2)Ye=ie,Ft=ce+y2[S],Mi[ut.Ob[S]](Ye,Ft),va(Ke,bt,16*+S,Ye,Ft)}else if(Ye=ga(Q,G,ut.Ob[0]),LA[Ye](ie,ce),Ke!=0)for(S=0;16>S;++S,Ke<<=2)va(Ke,bt,16*+S,ie,ce+y2[S]);for(S=ut.Gc,Ye=ga(Q,G,ut.Dd),Ja[Ye](we,Ue),Ja[Ye](Re,ct),Ke=bt,Ye=we,Ft=Ue,255&(ut=S>>0)&&(170&ut?Hc(Ke,256,Ye,Ft):xi(Ke,256,Ye,Ft)),ut=Re,Ke=ct,255&(S>>=8)&&(170&S?Hc(bt,320,ut,Ke):xi(bt,320,ut,Ke)),G<p.Ub-1&&(r(tt[Qt].y,0,ie,ce+480,16),r(tt[Qt].f,0,we,Ue+224,8),r(tt[Qt].ea,0,Re,ct+224,8)),S=8*re*p.B,tt=p.sa,Qt=p.ta+16*Q+16*re*p.R,bt=p.qa,ut=p.ra+8*Q+S,Ke=p.Ha,Ye=p.Ia+8*Q+S,S=0;16>S;++S)r(tt,Qt+S*p.R,ie,ce+32*S,16);for(S=0;8>S;++S)r(bt,ut+S*p.B,we,Ue+32*S,8),r(Ke,Ye+S*p.B,Re,ct+32*S,8)}}function xn(p,v,S,Q,G,re,ie,ce,we){var Ue=[0],Re=[0],ct=0,ut=we!=null?we.kd:0,tt=we??new ca;if(p==null||12>S)return 7;tt.data=p,tt.w=v,tt.ha=S,v=[v],S=[S],tt.gb=[tt.gb];e:{var Qt=v,bt=S,Ke=tt.gb;if(e(p!=null),e(bt!=null),e(Ke!=null),Ke[0]=0,12<=bt[0]&&!t(p,Qt[0],"RIFF")){if(t(p,Qt[0]+8,"WEBP")){Ke=3;break e}var Ye=fe(p,Qt[0]+4);if(12>Ye||4294967286<Ye){Ke=3;break e}if(ut&&Ye>bt[0]-8){Ke=7;break e}Ke[0]=Ye,Qt[0]+=12,bt[0]-=12}Ke=0}if(Ke!=0)return Ke;for(Ye=0<tt.gb[0],S=S[0];;){e:{var Ft=p;bt=v,Ke=S;var Ot=Ue,Ut=Re,or=Qt=[0];if((Jt=ct=[ct])[0]=0,8>Ke[0])Ke=7;else{if(!t(Ft,bt[0],"VP8X")){if(fe(Ft,bt[0]+4)!=10){Ke=3;break e}if(18>Ke[0]){Ke=7;break e}var Xt=fe(Ft,bt[0]+8),xr=1+Ce(Ft,bt[0]+12);if(2147483648<=xr*(Ft=1+Ce(Ft,bt[0]+15))){Ke=3;break e}or!=null&&(or[0]=Xt),Ot!=null&&(Ot[0]=xr),Ut!=null&&(Ut[0]=Ft),bt[0]+=18,Ke[0]-=18,Jt[0]=1}Ke=0}}if(ct=ct[0],Qt=Qt[0],Ke!=0)return Ke;if(bt=!!(2&Qt),!Ye&&ct)return 3;if(re!=null&&(re[0]=!!(16&Qt)),ie!=null&&(ie[0]=bt),ce!=null&&(ce[0]=0),ie=Ue[0],Qt=Re[0],ct&&bt&&we==null){Ke=0;break}if(4>S){Ke=7;break}if(Ye&&ct||!Ye&&!ct&&!t(p,v[0],"ALPH")){S=[S],tt.na=[tt.na],tt.P=[tt.P],tt.Sa=[tt.Sa];e:{Xt=p,Ke=v,Ye=S;var Jt=tt.gb;Ot=tt.na,Ut=tt.P,or=tt.Sa,xr=22,e(Xt!=null),e(Ye!=null),Ft=Ke[0];var hn=Ye[0];for(e(Ot!=null),e(or!=null),Ot[0]=null,Ut[0]=null,or[0]=0;;){if(Ke[0]=Ft,Ye[0]=hn,8>hn){Ke=7;break e}var zn=fe(Xt,Ft+4);if(4294967286<zn){Ke=3;break e}var sn=8+zn+1&-2;if(xr+=sn,0<Jt&&xr>Jt){Ke=3;break e}if(!t(Xt,Ft,"VP8 ")||!t(Xt,Ft,"VP8L")){Ke=0;break e}if(hn[0]<sn){Ke=7;break e}t(Xt,Ft,"ALPH")||(Ot[0]=Xt,Ut[0]=Ft+8,or[0]=zn),Ft+=sn,hn-=sn}}if(S=S[0],tt.na=tt.na[0],tt.P=tt.P[0],tt.Sa=tt.Sa[0],Ke!=0)break}S=[S],tt.Ja=[tt.Ja],tt.xa=[tt.xa];e:if(Jt=p,Ke=v,Ye=S,Ot=tt.gb[0],Ut=tt.Ja,or=tt.xa,Xt=Ke[0],Ft=!t(Jt,Xt,"VP8 "),xr=!t(Jt,Xt,"VP8L"),e(Jt!=null),e(Ye!=null),e(Ut!=null),e(or!=null),8>Ye[0])Ke=7;else{if(Ft||xr){if(Jt=fe(Jt,Xt+4),12<=Ot&&Jt>Ot-12){Ke=3;break e}if(ut&&Jt>Ye[0]-8){Ke=7;break e}Ut[0]=Jt,Ke[0]+=8,Ye[0]-=8,or[0]=xr}else or[0]=5<=Ye[0]&&Jt[Xt+0]==47&&!(Jt[Xt+4]>>5),Ut[0]=Ye[0];Ke=0}if(S=S[0],tt.Ja=tt.Ja[0],tt.xa=tt.xa[0],v=v[0],Ke!=0)break;if(4294967286<tt.Ja)return 3;if(ce==null||bt||(ce[0]=tt.xa?2:1),ie=[ie],Qt=[Qt],tt.xa){if(5>S){Ke=7;break}ce=ie,ut=Qt,bt=re,p==null||5>S?p=0:5<=S&&p[v+0]==47&&!(p[v+4]>>5)?(Ye=[0],Jt=[0],Ot=[0],te(Ut=new B,p,v,S),Ze(Ut,Ye,Jt,Ot)?(ce!=null&&(ce[0]=Ye[0]),ut!=null&&(ut[0]=Jt[0]),bt!=null&&(bt[0]=Ot[0]),p=1):p=0):p=0}else{if(10>S){Ke=7;break}ce=Qt,p==null||10>S||!qn(p,v+3,S-3)?p=0:(ut=p[v+0]|p[v+1]<<8|p[v+2]<<16,bt=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=tt.Ja||!bt||!p?p=0:(ie&&(ie[0]=bt),ce&&(ce[0]=p),p=1))}if(!p||(ie=ie[0],Qt=Qt[0],ct&&(Ue[0]!=ie||Re[0]!=Qt)))return 3;we!=null&&(we[0]=tt,we.offset=v-we.w,e(4294967286>v-we.w),e(we.offset==we.ha-S));break}return Ke==0||Ke==7&&ct&&we==null?(re!=null&&(re[0]|=tt.na!=null&&0<tt.na.length),Q!=null&&(Q[0]=ie),G!=null&&(G[0]=Qt),0):Ke}function eo(p,v,S){var Q=v.width,G=v.height,re=0,ie=0,ce=Q,we=G;if(v.Da=p!=null&&0<p.Da,v.Da&&(ce=p.cd,we=p.bd,re=p.v,ie=p.j,11>S||(re&=-2,ie&=-2),0>re||0>ie||0>=ce||0>=we||re+ce>Q||ie+we>G))return 0;if(v.v=re,v.j=ie,v.va=re+ce,v.o=ie+we,v.U=ce,v.T=we,v.da=p!=null&&0<p.da,v.da){if(!Ae(ce,we,S=[p.ib],re=[p.hb]))return 0;v.ib=S[0],v.hb=re[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*Q/4&&v.hb<3*G/4,v.Kb=0),1}function Mo(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function Yo(p,v,S,Q){if(Q==null||0>=p||0>=v)return 2;if(S!=null){if(S.Da){var G=S.cd,re=S.bd,ie=-2&S.v,ce=-2&S.j;if(0>ie||0>ce||0>=G||0>=re||ie+G>p||ce+re>v)return 2;p=G,v=re}if(S.da){if(!Ae(p,v,G=[S.ib],re=[S.hb]))return 2;p=G[0],v=re[0]}}Q.width=p,Q.height=v;e:{var we=Q.width,Ue=Q.height;if(p=Q.S,0>=we||0>=Ue||!(p>=wh&&13>p))p=2;else{if(0>=Q.Rd&&Q.sd==null){ie=re=G=v=0;var Re=(ce=we*_2[p])*Ue;if(11>p||(re=(Ue+1)/2*(v=(we+1)/2),p==12&&(ie=(G=we)*Ue)),(Ue=s(Re+2*re+ie))==null){p=1;break e}Q.sd=Ue,11>p?((we=Q.f.RGBA).eb=Ue,we.fb=0,we.A=ce,we.size=Re):((we=Q.f.kb).y=Ue,we.O=0,we.fa=ce,we.Fd=Re,we.f=Ue,we.N=0+Re,we.Ab=v,we.Cd=re,we.ea=Ue,we.W=0+Re+re,we.Db=v,we.Ed=re,p==12&&(we.F=Ue,we.J=0+Re+2*re),we.Tc=ie,we.lb=G)}if(v=1,G=Q.S,re=Q.width,ie=Q.height,G>=wh&&13>G)if(11>G)p=Q.f.RGBA,v&=(ce=Math.abs(p.A))*(ie-1)+re<=p.size,v&=ce>=re*_2[G],v&=p.eb!=null;else{p=Q.f.kb,ce=(re+1)/2,Re=(ie+1)/2,we=Math.abs(p.fa),Ue=Math.abs(p.Ab);var ct=Math.abs(p.Db),ut=Math.abs(p.lb),tt=ut*(ie-1)+re;v&=we*(ie-1)+re<=p.Fd,v&=Ue*(Re-1)+ce<=p.Cd,v=(v&=ct*(Re-1)+ce<=p.Ed)&we>=re&Ue>=ce&ct>=ce,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,G==12&&(v&=ut>=re,v&=tt<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||S!=null&&S.fd&&(p=Mo(Q)),p}var co=64,Lr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tn=24,gn=32,Io=8,kn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];le("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(p){return p},R.Predictor2=function(p,v,S){return v[S+0]},R.Predictor3=function(p,v,S){return v[S+1]},R.Predictor4=function(p,v,S){return v[S-1]},R.Predictor5=function(p,v,S){return Me(Me(p,v[S+1]),v[S+0])},R.Predictor6=function(p,v,S){return Me(p,v[S-1])},R.Predictor7=function(p,v,S){return Me(p,v[S+0])},R.Predictor8=function(p,v,S){return Me(v[S-1],v[S+0])},R.Predictor9=function(p,v,S){return Me(v[S+0],v[S+1])},R.Predictor10=function(p,v,S){return Me(Me(p,v[S-1]),Me(v[S+0],v[S+1]))},R.Predictor11=function(p,v,S){var Q=v[S+0];return 0>=ve(Q>>24&255,p>>24&255,(v=v[S-1])>>24&255)+ve(Q>>16&255,p>>16&255,v>>16&255)+ve(Q>>8&255,p>>8&255,v>>8&255)+ve(255&Q,255&p,255&v)?Q:p},R.Predictor12=function(p,v,S){var Q=v[S+0];return(ze((p>>24&255)+(Q>>24&255)-((v=v[S-1])>>24&255))<<24|ze((p>>16&255)+(Q>>16&255)-(v>>16&255))<<16|ze((p>>8&255)+(Q>>8&255)-(v>>8&255))<<8|ze((255&p)+(255&Q)-(255&v)))>>>0},R.Predictor13=function(p,v,S){var Q=v[S-1];return(Se((p=Me(p,v[S+0]))>>24&255,Q>>24&255)<<24|Se(p>>16&255,Q>>16&255)<<16|Se(p>>8&255,Q>>8&255)<<8|Se(p>>0&255,Q>>0&255))>>>0};var Uo=R.PredictorAdd0;R.PredictorAdd1=Oe,le("Predictor2","PredictorAdd2"),le("Predictor3","PredictorAdd3"),le("Predictor4","PredictorAdd4"),le("Predictor5","PredictorAdd5"),le("Predictor6","PredictorAdd6"),le("Predictor7","PredictorAdd7"),le("Predictor8","PredictorAdd8"),le("Predictor9","PredictorAdd9"),le("Predictor10","PredictorAdd10"),le("Predictor11","PredictorAdd11"),le("Predictor12","PredictorAdd12"),le("Predictor13","PredictorAdd13");var to=R.PredictorAdd2;de("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),de("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var oi,Ho=R.ColorIndexInverseTransform,Ga=R.MapARGB,bl=R.VP8LColorIndexInverseTransformAlpha,pd=R.MapAlpha,ma=R.VP8LPredictorsAdd=[];ma.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Wa,Jo,Zo,Bs,es,si,gd,Xa,uo,Hc,Cs,xi,vd,gh,jc,xl,zl,QA,Bl,md,Cl,TA,Rc,zi,Bi,On,Dn,ho,Qo=s(511),Ya=s(2041),$c=s(225),wd=s(767),vh=0,Vg=Ya,mh=$c,ii=wd,Ci=Qo,wh=0,yh=1,d2=2,_h=3,bh=4,Gg=5,c2=6,Wg=7,Xg=8,xh=9,Yg=10,nC=[2,3,7],oC=[3,3,11],u2=[280,256,256,256,40],sC=[0,1,1,1,0],iC=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],aC=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],AC=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lC=8,Jg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qc=null,dC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],h2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],uC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],pC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],LA=[],Mi=[],Ja=[],gC=1,f2=2,PA=[],Si=[];xt("UpsampleRgbLinePair",Hr,3),xt("UpsampleBgrLinePair",Fn,3),xt("UpsampleRgbaLinePair",No,4),xt("UpsampleBgraLinePair",Zn,4),xt("UpsampleArgbLinePair",zo,4),xt("UpsampleRgba4444LinePair",Gn,2),xt("UpsampleRgb565LinePair",Pn,2);var vC=R.UpsampleRgbLinePair,mC=R.UpsampleBgrLinePair,p2=R.UpsampleRgbaLinePair,g2=R.UpsampleBgraLinePair,v2=R.UpsampleArgbLinePair,m2=R.UpsampleRgba4444LinePair,wC=R.UpsampleRgb565LinePair,zh=16,Bh=1<<zh-1,Kc=-227,ev=482,yC=6,w2=0,_C=s(256),bC=s(256),xC=s(256),zC=s(256),BC=s(ev-Kc),CC=s(ev-Kc);hs("YuvToRgbRow",Hr,3),hs("YuvToBgrRow",Fn,3),hs("YuvToRgbaRow",No,4),hs("YuvToBgraRow",Zn,4),hs("YuvToArgbRow",zo,4),hs("YuvToRgba4444Row",Gn,2),hs("YuvToRgb565Row",Pn,2);var y2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ch=[0,2,8],SC=[8,7,6,4,4,2,2,2,1,1,1,1],EC=1;this.WebPDecodeRGBA=function(p,v,S,Q,G){var re=yh,ie=new _i,ce=new Je;ie.ba=ce,ce.S=re,ce.width=[ce.width],ce.height=[ce.height];var we=ce.width,Ue=ce.height,Re=new rt;if(Re==null||p==null)var ct=2;else e(Re!=null),ct=xn(p,v,S,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(ct!=0?we=0:(we!=null&&(we[0]=Re.width[0]),Ue!=null&&(Ue[0]=Re.height[0]),we=1),we){ce.width=ce.width[0],ce.height=ce.height[0],Q!=null&&(Q[0]=ce.width),G!=null&&(G[0]=ce.height);e:{if(Q=new En,(G=new ca).data=p,G.w=v,G.ha=S,G.kd=1,v=[0],e(G!=null),((p=xn(G.data,G.w,G.ha,null,null,null,v,null,G))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(ie!=null),Q.data=G.data,Q.w=G.w+G.offset,Q.ha=G.ha-G.offset,Q.put=Tt,Q.ac=Ct,Q.bc=wt,Q.ma=ie,G.xa){if((p=ft())==null){ie=1;break e}if(function(ut,tt){var Qt=[0],bt=[0],Ke=[0];t:for(;;){if(ut==null)return 0;if(tt==null)return ut.a=2,0;if(ut.l=tt,ut.a=0,te(ut.m,tt.data,tt.w,tt.ha),!Ze(ut.m,Qt,bt,Ke)){ut.a=3;break t}if(ut.xb=f2,tt.width=Qt[0],tt.height=bt[0],!Dt(Qt[0],bt[0],1,ut,null))break t;return 1}return e(ut.a!=0),0}(p,Q)){if(Q=(v=Yo(Q.width,Q.height,ie.Oa,ie.ba))==0){t:{Q=p;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((S=Q.l)!=null),e((G=S.ma)!=null),Q.xb!=0){if(Q.ca=G.ba,Q.tb=G.tb,e(Q.ca!=null),!eo(G.Oa,S,_h)){Q.a=2;break r}if(!Yt(Q,S.width)||S.da)break r;if((S.da||De(Q.ca.S))&&nt(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&nt()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Le(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!ar(Q,Q.V,Q.Ba,Q.c,Q.i,S.o,Vt))break r;G.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(v=p.a)}else v=p.a}else{if((p=new Wr)==null){ie=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,As(p,Q)){if((v=Yo(Q.width,Q.height,ie.Oa,ie.ba))==0){if(p.Aa=0,S=ie.Oa,e((G=p)!=null),S!=null){if(0<(we=0>(we=S.Md)?0:100<we?255:255*we/100)){for(Ue=Re=0;4>Ue;++Ue)12>(ct=G.pb[Ue]).lc&&(ct.ia=we*SC[0>ct.lc?0:ct.lc]>>3),Re|=ct.ia;Re&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=S.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}Ds(p,Q)||(v=p.a)}}else v=p.a}v==0&&ie.Oa!=null&&ie.Oa.fd&&(v=Mo(ie.ba))}ie=v}re=ie!=0?null:11>re?ce.f.RGBA.eb:ce.f.kb.y}else re=null;return re};var _2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(R,Z){for(var Be="",N=0;N<4;N++)Be+=String.fromCharCode(R[Z++]);return Be}function c(R,Z){return(R[Z+0]<<0|R[Z+1]<<8|R[Z+2]<<16)>>>0}function u(R,Z){return(R[Z+0]<<0|R[Z+1]<<8|R[Z+2]<<16|R[Z+3]<<24)>>>0}new A;var h=[0],f=[0],g=[],w=new A,y=n,x=function(R,Z){var Be={},N=0,k=!1,J=0,ne=0;if(Be.frames=[],!function(F,E,T,P){for(var O=0;O<P;O++)if(F[E+O]!=T.charCodeAt(O))return!0;return!1}(R,Z,"RIFF",4)){var ge,pe;for(u(R,Z+=4),Z+=8;Z<R.length;){var xe=d(R,Z),te=u(R,Z+=4);Z+=4;var se=te+(1&te);switch(xe){case"VP8 ":case"VP8L":Be.frames[N]===void 0&&(Be.frames[N]={}),(B=Be.frames[N]).src_off=k?ne:Z-8,B.src_size=J+te+8,N++,k&&(k=!1,J=0,ne=0);break;case"VP8X":(B=Be.header={}).feature_flags=R[Z];var oe=Z+4;B.canvas_width=1+c(R,oe),oe+=3,B.canvas_height=1+c(R,oe),oe+=3;break;case"ALPH":k=!0,J=se+8,ne=Z-8;break;case"ANIM":(B=Be.header).bgcolor=u(R,Z),oe=Z+4,B.loop_count=(ge=R)[(pe=oe)+0]<<0|ge[pe+1]<<8,oe+=2;break;case"ANMF":var me,B;(B=Be.frames[N]={}).offset_x=2*c(R,Z),Z+=3,B.offset_y=2*c(R,Z),Z+=3,B.width=1+c(R,Z),Z+=3,B.height=1+c(R,Z),Z+=3,B.duration=c(R,Z),Z+=3,me=R[Z++],B.dispose=1&me,B.blend=me>>1&1}xe!="ANMF"&&(Z+=se)}return Be}}(y,0);x.response=y,x.rgbaoutput=!0,x.dataurl=!1;var C=x.header?x.header:null,I=x.frames?x.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],f=[C.canvas_width];for(var M=0;M<I.length&&I[M].blend!=0;M++);}var L=I[0],ee=w.WebPDecodeRGBA(y,L.src_off,L.src_size,f,h);L.rgba=ee,L.imgwidth=f[0],L.imgheight=h[0];for(var W=0;W<f[0]*h[0]*4;W++)g[W]=ee[W];return this.width=f,this.height=h,this.data=g,this}(function(n){var e=function(){return typeof xm=="function"},t=function(h,f,g,w){var y=4,x=i;switch(w){case n.image_compression.FAST:y=1,x=s;break;case n.image_compression.MEDIUM:y=6,x=a;break;case n.image_compression.SLOW:y=9,x=A}h=r(h,f,g,x);var C=xm(h,{level:y});return n.__addimage__.arrayBufferToBinaryString(C)},r=function(h,f,g,w){for(var y,x,C,I=h.length/f,M=new Uint8Array(h.length+I),L=c(),ee=0;ee<I;ee+=1){if(C=ee*f,y=h.subarray(C,C+f),w)M.set(w(y,g,x),C+ee);else{for(var W,R=L.length,Z=[];W<R;W+=1)Z[W]=L[W](y,g,x);var Be=u(Z.concat());M.set(Z[Be],C+ee)}x=y}return M},o=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var g,w=[],y=h.length;w[0]=1;for(var x=0;x<y;x+=1)g=h[x-f]||0,w[x+1]=h[x]-g+256&255;return w},i=function(h,f,g){var w,y=[],x=h.length;y[0]=2;for(var C=0;C<x;C+=1)w=g&&g[C]||0,y[C+1]=h[C]-w+256&255;return y},a=function(h,f,g){var w,y,x=[],C=h.length;x[0]=3;for(var I=0;I<C;I+=1)w=h[I-f]||0,y=g&&g[I]||0,x[I+1]=h[I]+256-(w+y>>>1)&255;return x},A=function(h,f,g){var w,y,x,C,I=[],M=h.length;I[0]=4;for(var L=0;L<M;L+=1)w=h[L-f]||0,y=g&&g[L]||0,x=g&&g[L-f]||0,C=d(w,y,x),I[L+1]=h[L]-C+256&255;return I},d=function(h,f,g){if(h===f&&f===g)return h;var w=Math.abs(f-g),y=Math.abs(h-g),x=Math.abs(h+f-g-g);return w<=y&&w<=x?h:y<=x?f:g},c=function(){return[o,s,i,a,A]},u=function(h){var f=h.map(function(g){return g.reduce(function(w,y){return w+Math.abs(y)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(h,f,g,w){var y,x,C,I,M,L,ee,W,R,Z,Be,N,k,J,ne,ge=this.decode.FLATE_DECODE,pe="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(C=new uN(h)).imgData,x=C.bits,y=C.colorSpace,M=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){R=(W=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,Be=new Uint8Array(R*C.colors),Z=new Uint8Array(R);var xe,te=C.pixelBitlength-C.bits;for(J=0,ne=0;J<R;J++){for(k=W[J],xe=0;xe<te;)Be[ne++]=k>>>xe&255,xe+=C.bits;Z[J]=k>>>xe&255}}if(C.bits===16){R=(W=new Uint32Array(C.decodePixels().buffer)).length,Be=new Uint8Array(R*(32/C.pixelBitlength)*C.colors),Z=new Uint8Array(R*(32/C.pixelBitlength)),N=C.colors>1,J=0,ne=0;for(var se=0;J<R;)k=W[J++],Be[ne++]=k>>>0&255,N&&(Be[ne++]=k>>>16&255,k=W[J++],Be[ne++]=k>>>0&255),Z[se++]=k>>>16&255;x=8}w!==n.image_compression.NONE&&e()?(h=t(Be,C.width*C.colors,C.colors,w),ee=t(Z,C.width,1,w)):(h=Be,ee=Z,ge=void 0)}if(C.colorType===3&&(y=this.color_spaces.INDEXED,L=C.palette,C.transparency.indexed)){var oe=C.transparency.indexed,me=0;for(J=0,R=oe.length;J<R;++J)me+=oe[J];if((me/=255)===R-1&&oe.indexOf(0)!==-1)I=[oe.indexOf(0)];else if(me!==R){for(W=C.decodePixels(),Z=new Uint8Array(W.length),J=0,R=W.length;J<R;J++)Z[J]=oe[W[J]];ee=t(Z,C.width,1)}}var B=function(F){var E;switch(F){case n.image_compression.FAST:E=11;break;case n.image_compression.MEDIUM:E=13;break;case n.image_compression.SLOW:E=14;break;default:E=12}return E}(w);return ge===this.decode.FLATE_DECODE&&(pe="/Predictor "+B+" "),pe+="/Colors "+M+" /BitsPerComponent "+x+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:g,data:h,index:f,filter:ge,decodeParameters:pe,transparency:I,palette:L,sMask:ee,predictor:B,width:C.width,height:C.height,bitsPerComponent:x,colorSpace:y}}}})(Sr.API),function(n){n.processGIF89A=function(e,t,r,o){var s=new hN(e),i=s.width,a=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var d={data:A,width:i,height:a},c=new s0(100).encode(d,100);return n.processJPEG.call(this,c,t,r,o)},n.processGIF87A=n.processGIF89A}(Sr.API),$i.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$i.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Tn.log("bit decode error:"+t)}},$i.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var A=this.palette[s>>7-a&1];this.data[i+4*a]=A.blue,this.data[i+4*a+1]=A.green,this.data[i+4*a+2]=A.red,this.data[i+4*a+3]=255}t!==0&&(this.pos+=4-t)}},$i.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,a=s>>4,A=15&s,d=this.palette[a];if(this.data[i]=d.blue,this.data[i+1]=d.green,this.data[i+2]=d.red,this.data[i+3]=255,2*o+1>=this.width)break;d=this.palette[A],this.data[i+4]=d.blue,this.data[i+4+1]=d.green,this.data[i+4+2]=d.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},$i.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},$i.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,d=s>>15?255:0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=d}this.pos+=n}},$i.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&t)/t*255|0,d=(i>>11)/e*255|0,c=o*this.width*4+4*s;this.data[c]=d,this.data[c+1]=A,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},$i.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=s,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},$i.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=i}},$i.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var s=new $i(e,!1),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new s0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),S_.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var s=new S_(e),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new s0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),Sr.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,s=new Uint8Array(o/4*3),i=new Uint8Array(o/4),a=0,A=0,d=0;d<o;d+=4){var c=r[d],u=r[d+1],h=r[d+2],f=r[d+3];s[a++]=c,s[a++]=u,s[a++]=h,i[A++]=f}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Sr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$d=Sr.API,Rf=$d.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,A=a.fof?a.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,c=d.fof?d.fof:1,u=e.doKerning!==!1,h=0,f=n.length,g=0,w=a[0]||A,y=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?y.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=u&&Sn(d[r])==="object"&&!isNaN(parseInt(d[r][g],10))?d[r][g]/c:0,y.push((a[r]||w)/A+h)),g=r;return y},x_=$d.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return $d.processArabic&&(n=$d.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:Rf.apply(this,arguments).reduce(function(s,i){return s+i},0)},z_=function(n,e,t,r){for(var o=[],s=0,i=n.length,a=0;s!==i&&a+e[s]<t;)a+=e[s],s++;o.push(n.slice(0,s));var A=s;for(a=0;s!==i;)a+e[s]>r&&(o.push(n.slice(A,s)),a=0,A=s),a+=e[s],s++;return A!==s&&o.push(n.slice(A,s)),o},B_=function(n,e,t){t||(t={});var r,o,s,i,a,A,d,c=[],u=[c],h=t.textIndent||0,f=0,g=0,w=n.split(" "),y=Rf.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var x=Array(A).join(" "),C=[];w.map(function(M){(M=M.split(/\s*\n/)).length>1?C=C.concat(M.map(function(L,ee){return(ee&&L.length?`
`:"")+L})):C.push(M[0])}),w=C,A=x_.apply(this,[x,t])}for(s=0,i=w.length;s<i;s++){var I=0;if(r=w[s],A&&r[0]==`
`&&(r=r.substr(1),I=1),h+f+(g=(o=Rf.apply(this,[r,t])).reduce(function(M,L){return M+L},0))>e||I){if(g>e){for(a=z_.apply(this,[r,o,e-(h+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);g=o.slice(r.length-(c[0]?c[0].length:0)).reduce(function(M,L){return M+L},0)}else c=[r];u.push(c),h=g+A,f=y}else c.push(r),h+=f+g,f=y}return d=A?function(M,L){return(L?x:"")+M.join(" ")}:function(M){return M.join(" ")},u.map(d)},$d.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var a,A,d=[];for(a=0,A=r.length;a<A;a++)d=d.concat(B_.apply(this,[r[a],i,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(u){return"0x"+parseInt(u,10).toString(16)},i=n.__fontmetrics__.compress=function(u){var h,f,g,w,y=["{"];for(var x in u){if(h=u[x],isNaN(parseInt(x,10))?f="'"+x+"'":(x=parseInt(x,10),f=(f=s(x).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),w="-"):(g=s(h).slice(2),w=""),g=w+g.slice(0,-1)+r[g.slice(-1)];else{if(Sn(h)!=="object")throw new Error("Don't know what to do with value type "+Sn(h)+".");g=i(h)}y.push(f+g)}return y.push("}"),y.join("")},a=n.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,g,w,y={},x=1,C=y,I=[],M="",L="",ee=u.length-1,W=1;W<ee;W+=1)(w=u[W])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(w):w=="{"?(I.push([C,g]),C={},g=void 0):w=="}"?((f=I.pop())[0][f[1]]=C,g=void 0,C=f[0]):w=="-"?x=-1:g===void 0?t.hasOwnProperty(w)?(M+=t[w],g=parseInt(M,16)*x,x=1,M=""):M+=w:t.hasOwnProperty(w)?(L+=t[w],C[g]=parseInt(L,16)*x,x=1,g=void 0,L=""):L+=w;return y},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(u){var h=u.font,f=c.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(Sr.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=t.charCodeAt(s);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(i,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Qu(a)),i.metadata=n.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(o,r)}}])}(Sr),function(n){function e(){return(Ir.canvg?Promise.resolve(Ir.canvg):ks(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Sr.API.addSvgAsImage=function(t,r,o,s,i,a,A,d){if(isNaN(r)||isNaN(o))throw Tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(g){return g.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),r,o,s,i,A,d)})}}(),Sr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},Sr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(i),A=[],d=0,c=0,u=0;function h(g,w){var y,x=!1;for(y=0;y<g.length;y+=1)g[y]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=a.length;for(u=0;u<f;u+=1)t[a[u]].value=t[a[u]].defaultValue,t[a[u]].explicitSet=!1}if(Sn(n)==="object"){for(o in n)if(s=n[o],h(a,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&h(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")A.push(String(s[d]-1));else if(s[d].length>1){for(c=0;c<s[d].length;c+=1)typeof s[d][c]!="number"&&(r=!1);r===!0&&A.push([s[d][0]-1,s[d][1]-1].join(" "))}t[o].value="["+A.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,w=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?w.push("/"+g+" /"+t[g].value):w.push("/"+g+" "+t[g].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+i.length+a.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+s+i+a+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Sr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,i){for(var a,A=i.metadata.Unicode.widths,d=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(a=i.metadata.characterToGlyph(s.charCodeAt(u)),i.metadata.glyIdsUsed.push(a),i.metadata.toUnicode[a]=s.charCodeAt(u),A.indexOf(a)==-1&&(A.push(a),A.push([parseInt(i.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(d[4-a.length],a)}return c.join("")},r=function(s){var i,a,A,d,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(a=Object.keys(s).sort(function(f,g){return f-g})).length;u<h;u++)i=a[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(d=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),A.push("<"+i+"><"+d+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",g=0;g<h.length;g++)f+=String.fromCharCode(h[g]);var w=d();c({data:f,addLength1:!0,objectId:w}),A("endobj");var y=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var x=d();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Xd(a.fontName)),A("/FontFile2 "+w+" 0 R"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/Flags "+a.metadata.flags),A("/StemV "+a.metadata.stemV),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A(">>"),A("endobj");var C=d();A("<<"),A("/Type /Font"),A("/BaseFont /"+Xd(a.fontName)),A("/FontDescriptor "+x+" 0 R"),A("/W "+n.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+a.encoding+")"),A(">>"),A(">>"),A("endobj"),a.objectNumber=d(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+y+" 0 R"),A("/BaseFont /"+Xd(a.fontName)),A("/Encoding /"+a.encoding),A("/DescendantFonts ["+C+" 0 R]"),A(">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",f=0;f<u.length;f++)h+=String.fromCharCode(u[f]);var g=d();c({data:h,addLength1:!0,objectId:g}),A("endobj");var w=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),A("endobj");var y=d();A("<<"),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A("/StemV "+a.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+g+" 0 R"),A("/Flags 96"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/FontName /"+Xd(a.fontName)),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A(">>"),A("endobj"),a.objectNumber=d();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Xd(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]);var o=function(s){var i,a=s.text||"",A=s.x,d=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,f=u.activeFontKey,g=u.fonts,w=f,y="",x=0,C="",I=g[w].encoding;if(g[w].encoding!=="Identity-H")return{text:a,x:A,y:d,options:c,mutex:u};for(C=a,w=f,Array.isArray(a)&&(C=a[0]),x=0;x<C.length;x+=1)g[w].metadata.hasOwnProperty("cmap")&&(i=g[w].metadata.cmap.unicode.codeMap[C[x].charCodeAt(0)]),i||C[x].charCodeAt(0)<256&&g[w].metadata.hasOwnProperty("Unicode")?y+=C[x]:y+="";var M="";return parseInt(w.slice(1))<14||I==="WinAnsiEncoding"?M=h(y,w).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(M=t(y,g[w])),u.isHex=!0,{text:M,x:A,y:d,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var i=s.text||"",a=[],A={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var d=0;for(d=0;d<i.length;d+=1)Array.isArray(i[d])&&i[d].length===3?a.push([o(Object.assign({},A,{text:i[d][0]})).text,i[d][1],i[d][2]]):a.push(o(Object.assign({},A,{text:i[d]})).text);s.text=a}else s.text=o(Object.assign({},A,{text:i})).text}])}(Sr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Sr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,s,i,a,A,d,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,I=0;this.__bidiEngine__={};var M=function(N){var k=N.charCodeAt(),J=k>>8,ne=w[J];return ne!==void 0?u[256*ne+(255&k)]:J===252||J===253?"AL":x.test(J)?"L":J===8?"R":"N"},L=function(N){for(var k,J=0;J<N.length;J++){if((k=M(N.charAt(J)))==="L")return!1;if(k==="R")return!0}return!1},ee=function(N,k,J,ne){var ge,pe,xe,te,se=k[ne];switch(se){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(se="AN");break;case"AL":C=!0,se="R";break;case"WS":se="N";break;case"CS":ne<1||ne+1>=k.length||(ge=J[ne-1])!=="EN"&&ge!=="AN"||(pe=k[ne+1])!=="EN"&&pe!=="AN"?se="N":C&&(pe="AN"),se=pe===ge?pe:"N";break;case"ES":se=(ge=ne>0?J[ne-1]:"B")==="EN"&&ne+1<k.length&&k[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&J[ne-1]==="EN"){se="EN";break}if(C){se="N";break}for(xe=ne+1,te=k.length;xe<te&&k[xe]==="ET";)xe++;se=xe<te&&k[xe]==="EN"?"EN":"N";break;case"NSM":if(i&&!a){for(te=k.length,xe=ne+1;xe<te&&k[xe]==="NSM";)xe++;if(xe<te){var oe=N[ne],me=oe>=1425&&oe<=2303||oe===64286;if(ge=k[xe],me&&(ge==="R"||ge==="AL")){se="R";break}}}se=ne<1||(ge=k[ne-1])==="B"?"N":J[ne-1];break;case"B":C=!1,o=!0,se=I;break;case"S":s=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":se="N"}return se},W=function(N,k,J){var ne=N.split("");return J&&R(ne,J,{hiLevel:I}),ne.reverse(),k&&k.reverse(),ne.join("")},R=function(N,k,J){var ne,ge,pe,xe,te,se=-1,oe=N.length,me=0,B=[],F=I?f:h,E=[];for(C=!1,o=!1,s=!1,ge=0;ge<oe;ge++)E[ge]=M(N[ge]);for(pe=0;pe<oe;pe++){if(te=me,B[pe]=ee(N,E,B,pe),ne=240&(me=F[te][g[B[pe]]]),me&=15,k[pe]=xe=F[me][5],ne>0)if(ne===16){for(ge=se;ge<pe;ge++)k[ge]=1;se=-1}else se=-1;if(F[me][6])se===-1&&(se=pe);else if(se>-1){for(ge=se;ge<pe;ge++)k[ge]=xe;se=-1}E[pe]==="B"&&(k[pe]=0),J.hiLevel|=xe}s&&function(T,P,O){for(var j=0;j<O;j++)if(T[j]==="S"){P[j]=I;for(var $=j-1;$>=0&&T[$]==="WS";$--)P[$]=I}}(E,k,oe)},Z=function(N,k,J,ne,ge){if(!(ge.hiLevel<N)){if(N===1&&I===1&&!o)return k.reverse(),void(J&&J.reverse());for(var pe,xe,te,se,oe=k.length,me=0;me<oe;){if(ne[me]>=N){for(te=me+1;te<oe&&ne[te]>=N;)te++;for(se=me,xe=te-1;se<xe;se++,xe--)pe=k[se],k[se]=k[xe],k[xe]=pe,J&&(pe=J[se],J[se]=J[xe],J[xe]=pe);me=te}me++}}},Be=function(N,k,J){var ne=N.split(""),ge={hiLevel:I};return J||(J=[]),R(ne,J,ge),function(pe,xe,te){if(te.hiLevel!==0&&c)for(var se,oe=0;oe<pe.length;oe++)xe[oe]===1&&(se=y.indexOf(pe[oe]))>=0&&(pe[oe]=y[se+1])}(ne,J,ge),Z(2,ne,k,J,ge),Z(1,ne,k,J,ge),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(N,k,J){if(function(ge,pe){if(pe)for(var xe=0;xe<ge.length;xe++)pe[xe]=xe;a===void 0&&(a=L(ge)),d===void 0&&(d=L(ge))}(N,k),i||!A||d)if(i&&A&&a^d)I=a?1:0,N=W(N,k,J);else if(!i&&A&&d)I=a?1:0,N=Be(N,k,J),N=W(N,k);else if(!i||a||A||d){if(i&&!A&&a^d)N=W(N,k),a?(I=0,N=Be(N,k,J)):(I=1,N=Be(N,k,J),N=W(N,k));else if(i&&a&&!A&&d)I=1,N=Be(N,k,J),N=W(N,k);else if(!i&&!A&&a^d){var ne=c;a?(I=1,N=Be(N,k,J),I=0,c=!1,N=Be(N,k,J),c=ne):(I=0,N=Be(N,k,J),N=W(N,k),I=1,c=!1,N=Be(N,k,J),c=ne,N=W(N,k))}}else I=0,N=Be(N,k,J);else I=a?1:0,N=Be(N,k,J);return N},this.__bidiEngine__.setOptions=function(N){N&&(i=N.isInputVisual,A=N.isOutputVisual,a=N.isInputRtl,d=N.isOutputRtl,c=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(i=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?i.push([t.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):i.push([t.doBidiReorder(o[a])]);r.text=i}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(Sr),Sr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new gl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new EN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new fN(this.contents),this.head=new gN(this),this.name=new _N(this),this.cmap=new _B(this),this.toUnicode={},this.hhea=new vN(this),this.maxp=new bN(this),this.hmtx=new xN(this),this.post=new wN(this),this.os2=new mN(this),this.loca=new SN(this),this.glyf=new zN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,a,A,d;for(d=[],i=0,a=(A=this.bbox).length;i<a;i++)e=A[i],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)o=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ia,gl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,s,i,a,A;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*s+65536*i+256*a+A},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),fN=function(){var n;function e(t){var r,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,s,i,a,A,d,c,u,h,f,g,w;for(w in f=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(f)/A),i=Math.floor(u/A),c=16*f-u,(o=new gl).writeInt(this.scalarType),o.writeShort(f),o.writeShort(u),o.writeShort(i),o.writeShort(c),s=16*f,d=o.pos+s,a=null,g=[],t)for(h=t[w],o.writeString(w),o.writeInt(n(h)),o.writeInt(d),o.writeInt(h.length),g=g.concat(h),w==="head"&&(a=d),d+=h.length;d%4;)g.push(0),d++;return o.write(g),r=2981146554-n(o.data),o.pos=a+8,o.writeUInt32(r),o.data},n=function(t){var r,o,s,i;for(t=bB.call(t);t.length%4;)t.push(0);for(s=new gl(t),o=0,r=0,i=t.length;r<i;r=r+=4)o+=s.readUInt32();return 4294967295&o},e}(),pN={}.hasOwnProperty,Ha=function(n,e){for(var t in e)pN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ia=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var gN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new gl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),E_=function(){function n(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var M,L;for(L=[],A=M=0;0<=h?M<h:M>h;A=0<=h?++M:--M)L.push(e.readUInt16());return L}(),e.pos+=2,w=function(){var M,L;for(L=[],A=M=0;0<=h?M<h:M>h;A=0<=h?++M:--M)L.push(e.readUInt16());return L}(),d=function(){var M,L;for(L=[],A=M=0;0<=h?M<h:M>h;A=0<=h?++M:--M)L.push(e.readUInt16());return L}(),c=function(){var M,L;for(L=[],A=M=0;0<=h?M<h:M>h;A=0<=h?++M:--M)L.push(e.readUInt16());return L}(),o=(this.length-e.pos+this.offset)/2,a=function(){var M,L;for(L=[],A=M=0;0<=o?M<o:M>o;A=0<=o?++M:--M)L.push(e.readUInt16());return L}(),A=x=0,I=s.length;x<I;A=++x)for(y=s[A],r=C=g=w[A];g<=y?C<=y:C>=y;r=g<=y?++C:--C)c[A]===0?i=r+d[A]:(i=a[c[A]/2+(r-g)-(h-A)]||0)!==0&&(i+=d[A]),this.codeMap[r]=65535&i}e.pos=u}return n.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I,M,L,ee,W,R,Z,Be,N,k,J,ne,ge,pe,xe,te,se,oe,me,B,F,E,T,P,O,j,$,H,Y,Ce;switch(ne=new gl,i=Object.keys(e).sort(function(fe,Le){return fe-Le}),t){case"macroman":for(w=0,y=function(){var fe=[];for(g=0;g<256;++g)fe.push(0);return fe}(),C={0:0},s={},ge=0,se=i.length;ge<se;ge++)C[$=e[o=i[ge]]]==null&&(C[$]=++w),s[o]={old:e[o],new:C[e[o]]},y[o]=C[e[o]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(y),{charMap:s,subtable:ne.data,maxGlyphID:w+1};case"unicode":for(k=[],u=[],I=0,C={},r={},x=d=null,pe=0,oe=i.length;pe<oe;pe++)C[L=e[o=i[pe]]]==null&&(C[L]=++I),r[o]={old:L,new:C[L]},a=C[L]-o,x!=null&&a===d||(x&&u.push(x),k.push(o),d=a),x=o;for(x&&u.push(x),u.push(65535),k.push(65535),Be=2*(Z=k.length),R=2*Math.pow(Math.log(Z)/Math.LN2,2),h=Math.log(R/2)/Math.LN2,W=2*Z-R,A=[],ee=[],f=[],g=xe=0,me=k.length;xe<me;g=++xe){if(N=k[g],c=u[g],N===65535){A.push(0),ee.push(0);break}if(N-(J=r[N].new)>=32768)for(A.push(0),ee.push(2*(f.length+Z-g)),o=te=N;N<=c?te<=c:te>=c;o=N<=c?++te:--te)f.push(r[o].new);else A.push(J-N),ee.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*Z+2*f.length),ne.writeUInt16(0),ne.writeUInt16(Be),ne.writeUInt16(R),ne.writeUInt16(h),ne.writeUInt16(W),O=0,B=u.length;O<B;O++)o=u[O],ne.writeUInt16(o);for(ne.writeUInt16(0),j=0,F=k.length;j<F;j++)o=k[j],ne.writeUInt16(o);for(H=0,E=A.length;H<E;H++)a=A[H],ne.writeUInt16(a);for(Y=0,T=ee.length;Y<T;Y++)M=ee[Y],ne.writeUInt16(M);for(Ce=0,P=f.length;Ce<P;Ce++)w=f[Ce],ne.writeUInt16(w);return{charMap:r,subtable:ne.data,maxGlyphID:I+1}}},n}(),_B=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r=new E_(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,s;return r==null&&(r="macroman"),o=E_.encode(t,r),(s=new gl).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),vN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),mN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),wN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(o=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=(function(){var a,A,d;for(d=[],i=a=0,A=this.file.maxp.numGlyphs;0<=A?a<A:a>A;i=0<=A?++a:--a)d.push(t.readUInt32());return d}).call(this)}},e}(),yN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},_N=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,s,i,a,A,d,c,u,h,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),A=t.readShort(),o=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=u=0,h=o.length;u<h;i=++u)s=o[i],t.pos=s.offset,c=t.readString(s.length),a=new yN(c,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),bN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),xN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,s,i,a,A,d;for(t.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.metrics).length;c<u;c++)i=h[c],f.push(i.advance);return f}).call(this),o=this.widths[this.widths.length-1],d=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)d.push(this.widths.push(o));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),bB=[].slice,zN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,s,i,a,A,d,c,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,o=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,a=(A=new gl(r.read(s))).readShort(),c=A.readShort(),h=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[t]=a===-1?new CN(A,c,h,d,u):new BN(A,a,c,h,d,u),this.cache[t]))},e.prototype.encode=function(t,r,o){var s,i,a,A,d;for(a=[],i=[],A=0,d=r.length;A<d;A++)s=t[r[A]],i.push(a.length),s&&(a=a.concat(s.encode(o)));return i.push(a.length),{table:a,offsets:i}},e}(),BN=function(){function n(e,t,r,o,s,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=s,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),CN=function(){function n(e,t,r,o,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new gl(bB.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),SN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ha(e,ia),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<o.length;++a)if(o[a]=s,i<r.length&&r[i]==a){++i,o[a]=s;var A=this.offsets[a],d=this.offsets[a+1]-A;d>0&&(s+=d)}for(var c=new Array(4*o.length),u=0;u<o.length;++u)c[4*u+3]=255&o[u],c[4*u+2]=(65280&o[u])>>8,c[4*u+1]=(16711680&o[u])>>16,c[4*u]=(4278190080&o[u])>>24;return c},e}(),EN=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,s,i,a,A;for(o={},i=0,a=e.length;i<a;i++)o[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(r=o[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))r=A[s],o[s]=r;return o},n.prototype.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x;for(o in r=_B.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},x=r.charMap)f[(A=x[o]).old]=A.new;for(g in h=r.maxGlyphID,i)g in f||(f[g]=h++);return c=function(C){var I,M;for(I in M={},C)M[C[I]]=I;return M}(f),u=Object.keys(c).sort(function(C,I){return C-I}),w=function(){var C,I,M;for(M=[],C=0,I=u.length;C<I;C++)a=u[C],M.push(c[a]);return M}(),s=this.font.glyf.encode(i,w,f),d=this.font.loca.encode(s.offsets,w),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n}();Sr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,s,i;if(Array.isArray(t))return"["+function(){var a,A,d;for(d=[],a=0,A=t.length;a<A;a++)r=t[a],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)i=t[o],s.push("/"+o+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+t},e}();var FN=V('<tr><td class="odz-text-xs"></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),IN=V('<tr><td></td><td colspan="5" class="odz-text-xs"> <!> <!></td><td> </td></tr>'),UN=V('<tr><td></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),QN=V("<!> <!> <!>",1),TN=V('<tr><td></td><td class="odz-text-xs">[]  </td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td> </td></tr>'),LN=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-p-8 odz-print-area"><h1 class="odz-text-center odz-text-3xl odz-font-bold odz-mb-8"></h1> <table class="odz-table odz-w-full odz-border odz-border-gray-400"><tbody><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200 odz-w-32"> </td><td>101-86-83287</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td>()</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"> </td><td colspan="3">  22 19-15</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td>02-6499-2267</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td colspan="3"><div class="odz-flex odz-justify-between"><span></span> <span></span></div></td></tr></tbody></table> <div class="odz-my-4"><div class="odz-font-bold">  (+)</div> <div class="odz-text-right"> </div></div> <table class="odz-table odz-table-bordered odz-w-full"><thead><tr class="odz-bg-base-200"><th></th><th>/</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><!><!><tr><td colspan="3" class="odz-text-center odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"> </td></tr></tbody></table> <div class="odz-mt-4 odz-p-4 odz-bg-base-200 odz-rounded"><div class="odz-font-bold odz-mb-2"></div> <ul class="odz-list-disc odz-list-inside odz-text-sm"><li>   20 (   )</li> <li>      .</li> <li>   .</li> <li>   .</li> <li>       ,  .</li></ul></div> <div class="odz-flex odz-justify-end odz-gap-2 odz-mt-6 print:odz-hidden"><button class="odz-btn odz-btn-primary"></button> <button class="odz-btn odz-btn-secondary">PDF </button> <button class="odz-btn"></button></div></div></dialog>');function PN(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t);let s=gt(e,"isOpen",12);function i(){s(!1)}function a(){window.print()}console.log("paper estimateStore",o());const A=new Date,d=`${A.getFullYear()} ${String(A.getMonth()+1).padStart(2,"0")} ${String(A.getDate()).padStart(2,"0")}`;async function c(){const oe=document.querySelector(".odz-print-area");if(oe)try{const me=oe.querySelector(".print\\:odz-hidden");let B="";me&&(B=me.style.display,me.style.display="none");const F=oe.scrollHeight,E=oe.scrollWidth,T=oe.scrollTop;oe.scrollTop=0;const P=await FD(oe,{useCORS:!0,scale:2,x:0,y:0,width:E,height:F,backgroundColor:"#ffffff",logging:!1,allowTaint:!0,windowHeight:F});oe.scrollTop=T,me&&(me.style.display=B);const O=P.toDataURL("image/png",1),j=new Sr({orientation:"portrait",unit:"mm",format:"a4"}),$=j.internal.pageSize.getWidth(),H=j.internal.pageSize.getHeight(),Y=10,Ce=$-Y*2,fe=H-Y*2,Le=P.height/P.width;let D=Ce*Le;if(D>fe){const Ae=Math.ceil(D/fe),ye=P.height/D,ae=fe*ye;for(let le=0;le<Ae;le++){le>0&&j.addPage();const Ee=-le*ae/ye;j.addImage(O,"PNG",Y,Ee+Y,Ce,P.height*(Ce/P.width))}}else j.addImage(O,"PNG",Y,Y,Ce,D);j.save(".pdf")}catch(me){console.error("PDF    :",me)}}nn();var u=LN(),h=m(u),f=z(m(h),2),g=m(f),w=m(g),y=z(m(w),3);y.textContent=d;var x=z(f,2),C=z(m(x),2),I=m(C),M=z(x,2),L=z(m(M)),ee=m(L);nr(ee,1,()=>o().products,gr,(oe,me,B)=>{var F=QN(),E=lt(F);nr(E,1,()=>l(me).variants,gr,($,H,Y)=>{var Ce=FN();const fe=at(()=>l(H).prices[0].amount),Le=at(()=>l(me).variants.reduce((de,ue)=>de+(ue.quantity||0),0)),X=at(()=>{var de;return(de=l(me).discountInfo)!=null&&de.hasDiscount?(l(me).discountInfo.originalAmount-l(me).discountInfo.discountAmount)/l(Le):l(fe)}),D=at(()=>l(X)*l(H).quantity);var Ae=m(Ce);Ae.textContent=`${B+1}-${Y+1}`;var ye=z(Ae),ae=m(ye),le=z(ye),Ee=m(le),Me=z(le),ze=m(Me),Se=z(Me),ve=m(Se),Oe=z(Se),Ne=m(Oe),_e=z(Oe),q=m(_e);ke((de,ue)=>{Qe(ae,l(me).product.title),Qe(Ee,l(H).title||""),Qe(ze,l(H).quantity),Qe(ve,de),Qe(Ne,ue),Qe(q,ue)},[()=>Er(l(X)),()=>Er(l(D))],at),U($,Ce)});var T=z(E,2);{var P=$=>{var H=Lt(),Y=lt(H);nr(Y,1,()=>l(me).prints,gr,(Ce,fe)=>{var Le=IN(),X=z(m(Le)),D=m(X),Ae=z(D);{var ye=ze=>{var Se=mn();ke(ve=>Qe(Se,`- ${ve??""}`),[()=>l(fe).parentTemplates.map(ve=>ve.name).join(" > ")],at),U(ze,Se)};be(Ae,ze=>{l(fe).parentTemplates&&ze(ye)})}var ae=z(Ae,2);{var le=ze=>{var Se=mn();ke(()=>Qe(Se,`- ${l(fe).colors.length??""}`)),U(ze,Se)};be(ae,ze=>{l(fe).colors&&ze(le)})}var Ee=z(X),Me=m(Ee);ke(ze=>{Qe(D,`: ${l(fe).title??""} `),Qe(Me,ze)},[()=>Er(l(fe).price||0)],at),U(Ce,Le)}),U($,H)};be(T,$=>{l(me).prints&&l(me).prints.length>0&&$(P)})}var O=z(T,2);{var j=$=>{var H=Lt(),Y=lt(H);nr(Y,1,()=>Object.entries(l(me).addons),gr,(Ce,fe)=>{let Le=()=>l(fe)[1];var X=Lt();const D=at(()=>l(me).addonProductsMap[Le().productId]),Ae=at(()=>{var le,Ee;return(Ee=(le=l(D))==null?void 0:le.variants)==null?void 0:Ee.find(Me=>Me.id===Le().variantId)});var ye=lt(X);{var ae=le=>{var Ee=UN(),Me=z(m(Ee)),ze=m(Me),Se=z(Me),ve=m(Se),Oe=z(Se),Ne=m(Oe),_e=z(Oe),q=m(_e),de=z(_e),ue=m(de),Fe=z(de),Pe=m(Fe);ke((it,We)=>{Qe(ze,`[] ${l(D).title??""}`),Qe(ve,l(Ae).title||""),Qe(Ne,l(me).quantity),Qe(q,it),Qe(ue,We),Qe(Pe,We)},[()=>Er(l(Ae).prices[0].amount),()=>Er(l(Ae).prices[0].amount*l(me).quantity)],at),U(le,Ee)};be(ye,le=>{l(D)&&l(Ae)&&le(ae)})}U(Ce,X)}),U($,H)};be(O,$=>{l(me).addons&&l(me).addonProductsMap&&Object.keys(l(me).addons).length>0&&$(j)})}U(oe,F)});var W=z(ee);{var R=oe=>{var me=TN(),B=z(m(me),6),F=m(B);ke(E=>Qe(F,E),[()=>Er(o().totalAdditionalAmount)],at),U(oe,me)};be(W,oe=>{o().totalAdditionalAmount>0&&oe(R)})}var Z=z(W),Be=z(m(Z)),N=m(Be),k=z(Be,2),J=m(k),ne=z(k),ge=m(ne),pe=z(M,4),xe=m(pe),te=z(xe,2),se=z(te,2);ke((oe,me)=>{Qe(I,` (  ${oe??""} )`),Qe(N,`${o().totalQuantity??""}`),Qe(J,me),Qe(ge,oe)},[()=>Er(o().totalAmount),()=>Er(o().totalProductAmount+o().totalPrintAmount+o().totalAddonAmount+o().totalAdditionalAmount)],at),At("click",xe,a),At("click",te,c),At("click",se,i),U(n,u),Zr(),r()}var kN=V("<!> <button> </button>",1),ON=V("<button> </button>"),DN=V('<div class="odz-flex odz-flex-wrap odz-gap-1.5"></div>'),NN=V('<div class="odz-flex odz-justify-center odz-items-center odz-h-32"><div class="odz-loading odz-loading-spinner odz-loading-md"></div></div>'),MN=V('<div class="odz-text-error odz-text-center odz-py-4"> </div>'),HN=V('<div class="odz-text-center odz-py-4 odz-text-gray-500">  .</div>'),jN=V('<img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0">'),RN=V('<div class="odz-w-12 odz-h-12 odz-bg-gray-100 odz-rounded odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><span class="odz-text-gray-400 odz-text-xs"></span></div>'),$N=V('<div class="odz-flex odz-items-center odz-gap-3 odz-p-2 odz-bg-base-100 odz-rounded-lg odz-border odz-border-gray-100 hover:odz-bg-gray-50"><!> <div class="odz-flex-1 odz-min-w-0"><h3 class="odz-text-sm odz-font-medium odz-truncate"> </h3> <div class="odz-text-xs odz-text-gray-500"><!></div></div> <button class="odz-btn odz-btn-primary odz-btn-xs odz-flex-shrink-0"></button></div>'),qN=V('<div class="odz-flex odz-justify-center odz-items-center odz-py-3"><div class="odz-loading odz-loading-spinner odz-loading-sm"></div></div>'),KN=V('<div class="odz-flex odz-flex-col odz-gap-2"></div> <!>',1),VN=V('<div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-bg-white odz-rounded-lg odz-w-full odz-max-w-2xl odz-mx-4 odz-max-h-[80vh] odz-overflow-hidden odz-flex odz-flex-col"><div class="odz-p-4 odz-border-b odz-flex odz-justify-between odz-items-center"><h2 class="odz-text-lg odz-font-bold"> </h2> <button class="odz-btn odz-btn-ghost odz-btn-sm"><!></button></div> <div class="odz-p-3 odz-border-b odz-space-y-3"><div class="odz-relative"><input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-input-sm"> <!></div> <div class="odz-flex odz-items-center odz-gap-1.5 odz-text-xs odz-text-gray-500"><button></button> <!></div> <!></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-3"><!></div></div></div>');function J1(n,e){Jr(e,!1);const t=Ie();let r=gt(e,"addProduct",8),o=gt(e,"isProductSearchOpen",12),s=gt(e,"productType",8,""),i=gt(e,"excludeNoProcess",8,!1),a=Ie(""),A=Ie([]),d=Ie([]),c=Ie(""),u=Ie([]),h=Ie(!1),f=Ie(null),g,w=!0,y=1;const x=20;let C=Ie();$n(async()=>{document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(Y=>{Y instanceof HTMLElement&&(Y.scrollTop=0)});try{_(d,await n5()),await I()}catch(Y){console.error("     :",Y)}}),as(()=>{document.body.style.overflow=""});async function I(){_(h,!0),_(f,null);try{const{products:H,total:Y}=await Kf("",void 0,1,x,s(),i());_(A,H),w=l(A).length<Y}catch(H){console.error("    :",H),_(f,"    .")}finally{_(h,!1)}}async function M(){if(!(l(h)||!w)){_(h,!0),y++;try{const{products:H,total:Y}=await Kf(l(a),l(c),y,x,s(),i());H.length>0?(_(A,[...l(A),...H]),w=l(A).length<Y):w=!1}catch(H){console.error("     :",H),_(f,"    .")}finally{_(h,!1)}}}async function L(){if(!l(a).trim()&&!l(c)){await I();return}_(h,!0),_(f,null),y=1,_(A,[]);try{const{products:H,total:Y}=await Kf(l(a),l(c),1,x,s(),i());_(A,H),w=l(A).length<Y}catch(H){console.error("    :",H),_(f,"    .")}finally{_(h,!1)}}function ee(){clearTimeout(g),g=setTimeout(L,300)}function W(H){_(c,H.id),_(u,[...l(u),H]),L()}function R(H){_(u,l(u).slice(0,H+1)),_(c,l(u)[H].id),L()}function Z(H){r()(H.id)}function Be(){o(!1),_(a,""),_(c,""),_(u,[]),_(A,[]),_(f,null),y=1,w=!0}function N(){if(!l(C))return;const{scrollTop:H,scrollHeight:Y,clientHeight:Ce}=l(C);Y-H<=Ce*1.5&&M()}tr(()=>(l(u),l(d)),()=>{var H;_(t,l(u).length===0?l(d):((H=l(u)[l(u).length-1])==null?void 0:H.children)||[])}),bo(),nn();var k=VN(),J=m(k),ne=m(J),ge=z(m(ne),2),pe=m(ge);ed(pe,{class:"odz-w-5 odz-h-5"});var xe=z(ne,2),te=m(xe),se=m(te),oe=z(se,2);mp(oe,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var me=z(te,2),B=m(me),F=z(B,2);nr(F,1,()=>l(u),gr,(H,Y,Ce)=>{var fe=kN(),Le=lt(fe);hE(Le,{class:"odz-w-3 odz-h-3"});var X=z(Le,2),D=m(X);ke(()=>{Tr(X,`hover:odz-text-primary odz-transition-colors ${(Ce===l(u).length-1?"odz-text-gray-900 odz-font-medium":"")??""}`),Qe(D,l(Y).name)}),At("click",X,()=>R(Ce)),U(H,fe)});var E=z(me,2);{var T=H=>{var Y=DN();nr(Y,5,()=>l(t),gr,(Ce,fe)=>{var Le=ON(),X=m(Le);ke(()=>{Tr(Le,`odz-px-3 odz-py-1 odz-text-xs odz-rounded-full odz-transition-all odz-duration-200
                ${(l(c)===l(fe).id?"odz-bg-primary odz-text-primary-content odz-shadow-sm":"odz-bg-gray-100 odz-text-gray-600 hover:odz-bg-gray-200 hover:odz-text-gray-800")??""}`),Qe(X,l(fe).name)}),At("click",Le,()=>W(l(fe))),U(Ce,Le)}),U(H,Y)};be(E,H=>{l(t).length>0&&H(T)})}var P=z(xe,2),O=m(P);{var j=H=>{var Y=NN();U(H,Y)},$=H=>{var Y=Lt(),Ce=lt(Y);{var fe=X=>{var D=MN(),Ae=m(D);ke(()=>Qe(Ae,l(f))),U(X,D)},Le=X=>{var D=Lt(),Ae=lt(D);{var ye=le=>{var Ee=HN();U(le,Ee)},ae=le=>{var Ee=KN(),Me=lt(Ee);nr(Me,5,()=>l(A),gr,(ve,Oe)=>{var Ne=$N(),_e=m(Ne);{var q=ot=>{var Ge=jN();ke(()=>{cr(Ge,"src",l(Oe).thumbnail),cr(Ge,"alt",l(Oe).title)}),U(ot,Ge)},de=ot=>{var Ge=RN();U(ot,Ge)};be(_e,ot=>{l(Oe).thumbnail?ot(q):ot(de,!1)})}var ue=z(_e,2),Fe=m(ue),Pe=m(Fe),it=z(Fe,2),We=m(it);{var je=ot=>{var Ge=Lt(),Je=lt(Ge);{var rt=$e=>{var st=mn();ke(Bt=>Qe(st,`${Bt??""}`),[()=>Er(l(Oe).variants[0].prices[0].amount)],at),U($e,st)},ht=$e=>{var st=mn();ke(Bt=>Qe(st,`${Bt??""} ~`),[()=>Er(Math.min(...l(Oe).variants.map(Bt=>Bt.prices[0].amount)))],at),U($e,st)};be(Je,$e=>{l(Oe).variants.length===1?$e(rt):$e(ht,!1)})}U(ot,Ge)},he=ot=>{var Ge=mn("  ");U(ot,Ge)};be(We,ot=>{l(Oe).variants&&l(Oe).variants.length>0?ot(je):ot(he,!1)})}var De=z(ue,2);ke(()=>Qe(Pe,l(Oe).title)),At("click",De,()=>Z(l(Oe))),U(ve,Ne)});var ze=z(Me,2);{var Se=ve=>{var Oe=qN();U(ve,Oe)};be(ze,ve=>{l(h)&&l(A).length>0&&ve(Se)})}U(le,Ee)};be(Ae,le=>{l(A).length===0&&(l(a)||l(c))?le(ye):le(ae,!1)},!0)}U(X,D)};be(Ce,X=>{l(f)?X(fe):X(Le,!1)},!0)}U(H,Y)};be(O,H=>{l(h)&&l(A).length===0?H(j):H($,!1)})}ss(P,H=>_(C,H),()=>l(C)),ke(()=>Tr(B,`hover:odz-text-primary odz-transition-colors ${(l(u).length===0?"odz-text-gray-900 odz-font-medium":"")??""}`)),At("click",ge,Be),Fr(se,()=>l(a),H=>_(a,H)),At("input",se,ee),At("click",B,()=>{_(u,[]),_(c,""),L()}),At("scroll",P,N),U(n,k),Zr()}var GN=V('<div class="odz-text-sm odz-text-gray-600 odz-mt-1"> </div>'),WN=V('<div class="odz-flex odz-items-center odz-justify-between odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><div class="odz-flex-1"><div class="odz-font-semibold odz-text-gray-800"> </div> <!></div> <div class="odz-text-right"><div class="odz-font-bold odz-text-lg odz-text-gray-800"> </div></div></div>'),XN=V('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><h2 class="odz-text-lg odz-font-bold odz-mb-4 odz-flex odz-items-center odz-gap-2"></h2> <div class="odz-space-y-3"></div> <div class="odz-divider odz-my-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><span class="odz-font-bold odz-text-lg odz-text-gray-800"> </span> <span class="odz-font-bold odz-text-xl odz-text-gray-800"> </span></div></div></div>');function YN(n,e){Jr(e,!1);const t=Ie();let r=gt(e,"additionalCosts",24,()=>[]);gt(e,"isEditable",8,!0),tr(()=>Hn(r()),()=>{_(t,r().reduce((a,A)=>a+Number(A.amount),0))}),bo(),nn();var o=Lt(),s=lt(o);{var i=a=>{var A=XN(),d=m(A),c=z(m(d),2);nr(c,5,r,g=>g.id,(g,w)=>{var y=WN(),x=m(y),C=m(x),I=m(C),M=z(C,2);{var L=Z=>{var Be=GN(),N=m(Be);ke(()=>Qe(N,l(w).description)),U(Z,Be)};be(M,Z=>{l(w).description&&Z(L)})}var ee=z(x,2),W=m(ee),R=m(W);ke(Z=>{Qe(I,l(w).name),Qe(R,`+${Z??""}`)},[()=>Er(Number(l(w).amount))],at),U(g,y)});var u=z(c,4),h=z(m(u),2),f=m(h);ke(g=>Qe(f,`+${g??""}`),[()=>Er(l(t))],at),U(a,A)};be(s,a=>{r().length>0&&a(i)})}U(n,o),Zr()}var JN=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-bg-gray-50 odz-rounded-lg"><div class="odz-text-6xl odz-mb-4"></div> <h3 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-6">      </p> <button class="odz-btn odz-btn-primary odz-gap-2"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </button></div>'),ZN=V("<div><!></div>"),eM=V("<div><!></div>"),tM=V("<div></div>"),rM=V('<div class="odz-mt-5"><div role="tablist" class="odz-tabs odz-tabs-boxed"><button role="tab"></button> <button role="tab"></button></div></div> <!>',1),nM=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-text-lg odz-font-medium odz-mt-4">   ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2"> ,  ,    .</p></div>'),oM=V('<button class="odz-btn odz-btn-primary"><!>  </button>'),sM=V('<div><h2 class="odz-text-2xl odz-font-bold odz-mb-4"> </h2> <!> <div class="odz-flex odz-justify-end odz-mt-4"><!></div> <!></div>'),iM=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-md odz-text-primary"></div> <p class="odz-text-base odz-font-medium odz-mt-3">   ...</p></div>'),aM=V('<span class="odz-badge odz-badge-warning"> </span>'),AM=V('<div class="odz-flex odz-items-center odz-gap-2"><span> </span> <!></div>'),lM=V('<div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="password-input"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input id="password-input" type="password" class="odz-input odz-input-bordered odz-w-full" placeholder="     "> <label class="odz-label" for="password-input"><span class="odz-label-text-alt">     .  !</span></label></div>'),dM=V(`<div class="odz-flex odz-justify-between odz-items-center odz-mb-4"><h2 class="odz-text-lg odz-font-bold odz-flex odz-items-center odz-gap-1">  <div class="odz-flex odz-items-center odz-gap-1"><!> <span class="odz-text-xs odz-text-gray-500 odz-ml-1">  </span></div></h2> <!></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="   . ) ' 000  '" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="  " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="010" class="odz-input odz-input-bordered odz-w-1/4" maxlength="3"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <span class="odz-text-xs odz-self-center">   ,     .</span></div></div></div> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="address-section"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!>  </span></label> <div class="odz-flex odz-gap-2 odz-mb-2"><input type="text" id="postcode" placeholder="" readonly="" class="odz-input odz-input-bordered odz-w-1/4"> <button class="odz-btn odz-btn-secondary"></button> <button class="odz-btn odz-btn-outline"> </button></div> <input type="text" id="address1" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-mb-2"> <input type="text" id="address2" placeholder=" " class="odz-input odz-input-bordered odz-w-full"> <p class="odz-text-xs odz-mt-1">       .</p></div> <div class="odz-form-control odz-w-full odz-mt-4"><div class="odz-flex odz-gap-4 odz-items-center"><button class="odz-btn odz-btn-outline odz-flex-1"></button> <p class="odz-text-xs">      .</p></div></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-mt-4"><div class="odz-form-control odz-w-full"><label class="odz-label" for="shipping-method"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <select id="shipping-method" class="odz-select odz-select-bordered odz-w-full"><option disabled selected>==   ==</option><option></option><option></option><option></option></select></div> <div class="odz-form-control odz-w-full"><label class="odz-label" for="pref-delivery-date"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"></span></label> <input id="pref-delivery-date" type="date" class="odz-input odz-input-bordered odz-w-full"> <label class="odz-label" for="pref-delivery-date-note"><span class="odz-label-text-alt">        .</span></label></div></div> <!> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="request-notes"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"> </span></label> <textarea id="request-notes" class="odz-textarea odz-textarea-bordered odz-h-24 odz-w-full" placeholder="   ."></textarea></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-outline odz-btn-secondary"><!>  </button> <button class="odz-btn odz-w-full odz-btn-primary md:odz-w-auto disabled:bg-primary/50 disabled:odz-bg-secondary/20"><!> <!></button></div>`,1),cM=V('<!> <!> <div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><!></div></div>',1),uM=V('<div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-ml-3 odz-text-lg odz-font-medium">  ...</span></div>'),hM=V('<div class="odz-text-xs odz-text-gray-400 odz-line-through"> </div> <div class="odz-text-xs odz-text-green-600 odz-font-medium"> </div>',1),fM=V('<div class="odz-text-xs odz-text-gray-400"> </div>'),pM=V('<span class="odz-text-gray-400"></span>'),gM=V('<div class="odz-text-xs odz-text-green-600">   </div>'),vM=V('<div class="odz-text-xs odz-text-blue-600">   -  </div>'),mM=V('<div class="odz-text-xs odz-text-gray-400"> </div>'),wM=V('<div class="odz-text-xs odz-text-gray-500">    </div>'),yM=V('<div class="odz-grid odz-grid-cols-2 md:odz-grid-cols-5 odz-gap-3 md:odz-gap-4 odz-p-4 md:odz-p-6 odz-bg-white"><div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">1  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"><!></div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">    </div></div> <div class="odz-text-center md:odz-col-span-1 odz-col-span-2"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-3xl md:odz-text-2xl odz-font-bold odz-text-red-600 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400"> <!> <!></div></div></div>'),_M=V(`<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <div class="odz-space-y-4 odz-py-4"><div><ul class="odz-list-disc odz-ml-5 odz-space-y-2"><li>        
                     
                  </li> <li>   .     
               .</li> <li>( :   22 19-15 3)</li></ul></div> <div><table class="odz-table odz-table-zebra odz-w-full"><tbody><tr><td>*Name:</td><td></td></tr><tr><td>*Country:</td><td></td></tr><tr><td>*ZipCode:</td><td></td></tr><tr><td>*Address:</td><td></td></tr><tr><td>*Tel.No.():</td><td></td></tr><tr><td>*E-mail:</td><td></td></tr></tbody></table></div></div> <div class="odz-modal-action"><button class="odz-btn"></button></div></div></dialog>`),bM=V('<!> <div class="odz-sticky odz-bottom-0 odz-left-0 odz-right-0 odz-mt-6 odz-bg-white odz-border-t odz-shadow-lg"><!></div> <!> <!> <!> <!>',1);function xM(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=()=>dn(gi,"$shopStore",t),i=()=>dn(Vl,"$customerStore",t);let a=gt(e,"productId",12),A=gt(e,"isEstimateModal",12),d=gt(e,"estimate",12),c=Ie(null),u=Ie(!1),h=Ie(""),f=Ie(""),g=Ie(0),w=Ie(!1),y=Ie(""),x=Ie(""),C=Ie(""),I=!1,M=Ie(!1),L=Ie(""),ee=Ie(""),W=Ie(""),R=Ie(),Z=Ie(),Be=Ie(),N=Ie(""),k=Ie(!1),J=Ie(!0),ne=Ie([]),ge=Ie(!1);function pe(){var ze;if(_(g,0),(ze=d())!=null&&ze.id&&(console.log(" Edit mode - clearing sessionStorage before DB load"),EE()),er(Et,dt(o).estimateName=d().name||"",dt(o)),er(Et,dt(o).organizationName=d().organization_name||"",dt(o)),er(Et,dt(o).orderName=d().order_name||"",dt(o)),er(Et,dt(o).orderPhone=d().order_phone||"",dt(o)),er(Et,dt(o).postcode=d().postcode||"",dt(o)),er(Et,dt(o).address1=d().address1||"",dt(o)),er(Et,dt(o).address2=d().address2||"",dt(o)),er(Et,dt(o).comment=d().comment||"",dt(o)),er(Et,dt(o).shippingMethod=d().shipping_method||"",dt(o)),er(Et,dt(o).prefDeliveryDate=d().pref_delivery_date||"",dt(o)),er(Et,dt(o).estDeliveryDate=d().est_delivery_date||"",dt(o)),er(Et,dt(o).uploadMemo=d().upload_memo||"",dt(o)),er(Et,dt(o).designUploads=d().design_uploads&&typeof d().design_uploads=="object"&&Array.isArray(d().design_uploads.files)?d().design_uploads.files.map(Se=>Se.url):[],dt(o)),er(Et,dt(o).designConfirm=d().design_confirm||"",dt(o)),o().prefDeliveryDate&&_(N,new Date(o().prefDeliveryDate).toISOString().split("T")[0]),_(y,d().postcode||""),_(x,d().address1||""),_(C,d().address2||""),_(J,Ac(d().status)),d().order_phone){const Se=d().order_phone;Se.length>=3&&_(L,Se.slice(0,3)),Se.length>=7&&_(ee,Se.slice(3,7)),Se.length>=11&&_(W,Se.slice(7,11))}O(d().id)}function xe(ze){a(o().products[ze].product.id),er(Et,dt(o).index=ze,dt(o)),_(g,1)}function te(){var ze,Se;if(_(g,1),(!a()||a().trim()==="")&&(o().products.length>0&&o().index>=0&&((Se=(ze=o().products[o().index])==null?void 0:ze.product)!=null&&Se.id)?(a(o().products[o().index].product.id),console.log("   productId :",a())):console.log(" productId     ")),typeof window<"u"&&a()){const ve=`extended-product-data-cache-${a()}`;try{const Oe=window.sessionStorage.getItem(ve);if(Oe){const Ne=JSON.parse(Oe);Ne.printSelection&&!Ne.printSelection.isCompleted&&(Ne.printSelection.currentMethod="selection",window.sessionStorage.setItem(ve,JSON.stringify(Ne)),console.log("     "))}}catch(Oe){console.warn("     :",Oe)}}}function se(){if(!o().products||o().products.length===0||o().index<0||!o().products[o().index]){_(u,!0),_(h," "),_(f,"  .");return}if(o().products[o().index].variants.length<1){_(u,!0),_(h," "),_(f,"1   .");return}if(o().products[o().index].variants.some(Se=>Se.quantity===0)){_(u,!0),_(h," "),_(f," 1  ");return}_(g,2)}function oe(){_(w,!0)}function me(){return I?Promise.resolve():new Promise(ze=>{const Se=document.createElement("script");Se.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",Se.onload=()=>{I=!0,ze()},document.head.appendChild(Se)})}async function B(){await me(),new window.daum.Postcode({oncomplete(ze){if(_(y,ze.zonecode),_(x,ze.roadAddress||ze.jibunAddress),ze.userSelectedType==="R"){let Se="";ze.bname!==""&&/[||]$/g.test(ze.bname)&&(Se+=ze.bname),ze.buildingName!==""&&ze.apartment==="Y"&&(Se+=Se!==""?", "+ze.buildingName:ze.buildingName),Se!==""&&_(x,l(x)+(" ("+Se+")"))}}}).open()}function F(){_(M,!0)}function E(ze,Se){const ve=ze.target;ve.value.length>=parseInt(ve.getAttribute("maxlength")||"0")&&Se&&Se.focus()}function T(ze){return ze?ze.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}async function P(){var ze,Se,ve,Oe,Ne,_e,q,de,ue,Fe,Pe,it,We,je,he,De,ot,Ge,Je,rt;try{if(!o().estimateName||!o().organizationName||!o().orderName||!o().orderPhone||!o().shippingMethod){_(u,!0),_(h,"  "),_(f,", ,    .");return}if(!s().customer_id){const st=T(o().password);if(!st.valid){_(u,!0),_(h," "),_(f,st.message);return}}const ht={name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:l(y),address1:l(x),address2:l(C),comment:o().comment,password:s().customer_id?null:o().password,shipping_method:o().shippingMethod,pref_delivery_date:o().prefDeliveryDate,upload_memo:o().uploadMemo,sess:s().sess,customer_id:s().customer_id,mall_type:i().mallType,shop_id:s().id};let $e;if((ze=d())!=null&&ze.id){$e=await yc(d().id,ht);const st=await $u(d().id);for(const Ct of st)Ct.id&&await i5(Ct.id);const Bt=await _c(d().id);for(const Ct of Bt)Ct.id&&await a5(Ct.id);for(let Ct=0;Ct<o().products.length;Ct++)await m5(d().id,Ct)}else $e=await A1(ht);if(!$e.id)throw new Error("  .");for(let st=0;st<o().products.length;st++){const Bt=o().products[st],Ct=Bt.discountInfo,Tt=Ct==null?void 0:Ct.discountDetails;for(const wt of Bt.variants)if(wt.quantity>0){const Ze=wt.prices[0].amount;let kt=Ze,It=0;const jt=Bt.variants.reduce((Vt,ir)=>Vt+(ir.quantity||0),0),et=ea(jt,Ze,Bt.product.quantity_discounts);et.hasDiscount&&(kt=et.discountedPrice,It=et.discountAmount);const yt=Bt.prints&&Bt.prints.length>0?"detailed":Bt.simplePrints&&Bt.simplePrints.length>0?"simple":"none",mt={estimate_id:$e.id,product_id:Bt.product.id,variant_id:wt.id,quantity:wt.quantity,idx:st,price:kt,original_price:Ze,discount_amount:It,discount_type:((Se=et==null?void 0:et.discountInfo)==null?void 0:Se.type)||null,discount_value:((ve=et==null?void 0:et.discountInfo)==null?void 0:ve.value)||null,discount_direction:((Oe=et==null?void 0:et.discountInfo)==null?void 0:Oe.direction)||null,discount_min_quantity:((Ne=et==null?void 0:et.discountInfo)==null?void 0:Ne.min_quantity)||null,discount_max_quantity:((_e=et==null?void 0:et.discountInfo)==null?void 0:_e.max_quantity)||null,print_type:yt};await l1(mt)}if(Bt.prints&&Bt.prints.length>0)for(const wt of Bt.prints){const Ze={estimate_id:$e.id,idx:st,template_id:wt.template.id,variant_id:wt.variant_id,price:wt.price||0,colors:wt.colors||null,uploads:wt.uploads||null,name_sheet:wt.nameSheet||null,object_id:wt.objectId||null,original_price:((q=wt.discountInfo)==null?void 0:q.originalPrice)||null,discount_amount:((de=wt.discountInfo)==null?void 0:de.discountAmount)||null,discount_type:((Fe=(ue=wt.discountInfo)==null?void 0:ue.discountDetails)==null?void 0:Fe.type)||null,discount_value:((it=(Pe=wt.discountInfo)==null?void 0:Pe.discountDetails)==null?void 0:it.value)||null,discount_direction:((je=(We=wt.discountInfo)==null?void 0:We.discountDetails)==null?void 0:je.direction)||null,discount_min_quantity:((De=(he=wt.discountInfo)==null?void 0:he.discountDetails)==null?void 0:De.min_quantity)||null,discount_max_quantity:((Ge=(ot=wt.discountInfo)==null?void 0:ot.discountDetails)==null?void 0:Ge.max_quantity)||null};await c1(Ze)}if(Bt.addons)for(const[wt,Ze]of Object.entries(Bt.addons)){if(!Ze.variantId||Ze.variantId.trim()===""){console.warn("  variantId    :",Ze);continue}let kt=0;if(Bt.addonProductsMap&&Bt.addonProductsMap[Ze.productId]){const et=Bt.addonProductsMap[Ze.productId].variants.find(yt=>yt.id===Ze.variantId);et&&et.prices&&et.prices.length>0&&(kt=et.prices[0].amount)}const It={estimate_id:$e.id,idx:st,addon_id:wt,selected_product_id:Ze.productId,selected_variant_id:Ze.variantId,price:kt,quantity:Bt.quantity||0};await p1(It)}}console.log(" Estimate    ..."),await v1($e.id),console.log(" Estimate    "),_(u,!0),_(h,(Je=d())!=null&&Je.id?"  ":"  "),_(f,(rt=d())!=null&&rt.id?"  .":s().customer_id?"  .":"  .      ."),A(!1),i().mallType==="godo5"&&(window.location.href="/odiz/list.php")}catch(ht){console.error("    :",ht),_(u,!0),_(h," "),_(f,"    .  .")}}$n(()=>{var ze,Se;if(er(Et,dt(o).index=o().products.length,dt(o)),(ze=d())!=null&&ze.id){pe();const ve=dg(d().id,Oe=>{d(Oe),_(J,Ac(Oe.status))});return()=>{ve.unsubscribe()}}else a()&&j(a());if(!((Se=d())!=null&&Se.id)&&i())if(er(Et,dt(o).orderName=i().name,dt(o)),er(Et,dt(o).orderPhone=i().phone.replace(/-/g,""),dt(o)),_(x,i().address1),_(C,i().address2),_(y,i().postcode),i().phone){const ve=i().phone.replace(/-/g,"");er(Et,dt(o).orderPhone=ve,dt(o)),ve.length>=3&&_(L,ve.slice(0,3)),ve.length>=7&&_(ee,ve.slice(3,7)),ve.length>=11&&_(W,ve.slice(7,11))}else er(Et,dt(o).orderPhone="",dt(o));me()});async function O(ze){var Se;_(ge,!0);try{const ve=await $u(ze),Oe=await _c(ze),Ne=await cg(ze);_(ne,await g1(ze));const _e=[],q={};for(const he of ve)if(he.product_id&&he.product){const De=he.idx||0;if(q[De]||(q[De]={product:he.product,variants:[],quantity:0,prints:[],addons:{}}),he.variant_id&&he.quantity){const ot={id:he.variant_id,quantity:he.quantity,prices:[{amount:he.original_price||he.price||0}],thumbnail:((Se=he.variant)==null?void 0:Se.thumbnail)||null,title:he.variant_title||` ${he.variant_id.substring(0,4)}`};q[De].variants.push(ot),q[De].quantity+=he.quantity}}const de=[];for(const he of Oe)if(he.template_id&&he.estimate_id){const De=he.idx||0;if(q[De]){const ot=(async()=>{try{const Ge=await Ah(he.template_id);let Je=null;try{Je=await Ic(he.template_id)}catch($e){console.warn("templateProduct  :",$e)}const ht={template:{id:he.template_id,name:Ge.length>0&&Ge[Ge.length-1].name||"",templateProduct:Je},parentTemplates:Ge,price:he.price||0,colors:he.colors?typeof he.colors=="string"?JSON.parse(he.colors):he.colors:[],uploads:he.uploads?typeof he.uploads=="string"?JSON.parse(he.uploads):he.uploads:null,nameSheet:he.name_sheet?typeof he.name_sheet=="string"?JSON.parse(he.name_sheet):he.name_sheet:null,title:Ge.length>0?Ge[0].name:"",objectId:he.object_id||null,variant_id:he.variant_id||null,discountInfo:he.original_price?{originalPrice:he.original_price,discountAmount:he.discount_amount||0,discountDetails:he.discount_type?{type:he.discount_type,value:he.discount_value||0,direction:he.discount_direction||null,min_quantity:he.discount_min_quantity||null,max_quantity:he.discount_max_quantity||null}:void 0,hasDiscount:(he.discount_amount||0)>0}:void 0};q[De].prints.push(ht)}catch(Ge){console.error("    :",Ge);const rt={template:{id:he.template_id,name:"",templateProduct:null},parentTemplates:[],price:he.price||0,colors:he.colors?typeof he.colors=="string"?JSON.parse(he.colors):he.colors:[],uploads:he.uploads?typeof he.uploads=="string"?JSON.parse(he.uploads):he.uploads:null,title:"",objectId:he.object_id||null,variant_id:he.variant_id||null,nameSheet:he.name_sheet?typeof he.name_sheet=="string"?JSON.parse(he.name_sheet):he.name_sheet:null,discountInfo:he.original_price?{originalPrice:he.original_price,discountAmount:he.discount_amount||0,discountDetails:he.discount_type?{type:he.discount_type,value:he.discount_value||0,direction:he.discount_direction||null,min_quantity:he.discount_min_quantity||null,max_quantity:he.discount_max_quantity||null}:void 0,hasDiscount:(he.discount_amount||0)>0}:void 0};q[De].prints.push(rt)}})();de.push(ot)}}await Promise.all(de),Ne.forEach(he=>{const De=he.idx||0;q[De]?(q[De].addons||(q[De].addons={}),q[De].addons[he.addon_id]={productId:he.selected_product_id,variantId:he.selected_variant_id||""}):console.log(`productGroups[${De}]  `)});const ue=[];for(const he in q){const De=q[he];if(De.product&&Object.keys(De.addons||{}).length>0){const ot=(async()=>{try{const Ge=await ah(De.product.id);De.addonProductsMap={},Ge.forEach(Je=>{Je.items.forEach(rt=>{var ht,$e,st;rt.addon_product&&((st=($e=(ht=rt.addon_product.variants)==null?void 0:ht[0])==null?void 0:$e.prices)!=null&&st[0])&&(De.addonProductsMap[rt.addon_product.id]={price:rt.addon_product.variants[0].prices[0].amount,title:rt.addon_product.title,variants:rt.addon_product.variants})})})}catch(Ge){console.error(`idx ${he}    :`,Ge),De.addonProductsMap={}}})();ue.push(ot)}_e.push(De)}await Promise.all(ue),Ob(Et,{...o(),products:_e,index:(_e.length>0,0)});const Fe=_e.reduce((he,De)=>he+De.quantity,0),Pe=_e.reduce((he,De)=>he+(De.variants||[]).reduce((ot,Ge)=>{const Je=Ge.quantity||0;return ot+Ge.prices[0].amount*Je},0),0),it=_e.reduce((he,De)=>he+(De.prints||[]).reduce((ot,Ge)=>ot+(Ge.price||0),0),0),We=_e.reduce((he,De)=>{if(!De.addons||Object.keys(De.addons).length===0||!De.addonProductsMap)return he;const ot=De.quantity||0,Ge=Object.values(De.addons).reduce((Je,rt)=>{const ht=De.addonProductsMap[rt.productId];if(ht&&rt.variantId){const $e=ht.variants.find(st=>st.id===rt.variantId);if($e&&$e.prices&&$e.prices.length>0){const st=$e.prices[0].amount*ot;return Je+st}}return Je},0);return he+Ge},0),je=l(ne).reduce((he,De)=>he+Number(De.amount),0);er(Et,dt(o).totalQuantity=Fe,dt(o)),er(Et,dt(o).totalProductAmount=Pe,dt(o)),er(Et,dt(o).totalPrintAmount=it,dt(o)),er(Et,dt(o).totalAddonAmount=We,dt(o)),er(Et,dt(o).totalAdditionalAmount=je,dt(o)),er(Et,dt(o).totalAmount=Pe+it+We+je,dt(o)),setTimeout(()=>{Et.updateTotalAmounts()},200)}catch(ve){console.error("     :",ve),er(Et,dt(o).products=[],dt(o))}finally{_(ge,!1)}}function j(ze){_(k,!1),a(ze),er(Et,dt(o).index=o().products.length,dt(o)),_(g,1)}tr(()=>(l(M),l(w),l(c)),()=>{var ze;(l(M)||l(w))&&(_(c,(ze=document.getElementById("estimate-modal"))==null?void 0:ze.querySelector(".odz-modal-box")),l(c)&&Cr(c,l(c).scrollTop=0))}),tr(()=>(o(),l(L),l(ee),l(W)),()=>{if(o().orderPhone&&!l(L)&&!l(ee)&&!l(W)){const ze=o().orderPhone;ze.length>=3&&_(L,ze.slice(0,3)),ze.length>=7&&_(ee,ze.slice(3,7)),ze.length>=11&&_(W,ze.slice(7,11))}}),tr(()=>(l(L),l(ee),l(W)),()=>{er(Et,dt(o).orderPhone=`${l(L)}${l(ee)}${l(W)}`,dt(o))}),tr(()=>(l(u),l(c)),()=>{var ze;l(u)&&(_(c,(ze=document.getElementById("estimate-modal"))==null?void 0:ze.querySelector(".odz-modal-box")),l(c)&&Cr(c,l(c).scrollTop=0))}),tr(()=>l(N),()=>{l(N)&&er(Et,dt(o).prefDeliveryDate=new Date(l(N)).toISOString(),dt(o))}),bo(),nn();var $=bM(),H=lt($);{var Y=ze=>{var Se=rM(),ve=lt(Se),Oe=m(ve),Ne=m(Oe),_e=z(Ne,2),q=z(ve,2);{var de=Fe=>{var Pe=ZN(),it=m(Pe);{var We=he=>{wF(he,{get productId(){return a()},get step(){return l(g)},set step(De){_(g,De)},$$legacy:!0})},je=he=>{var De=JN(),ot=z(m(De),6);At("click",ot,()=>_(k,!0)),U(he,De)};be(it,he=>{a()&&a().trim()!==""?he(We):he(je,!1)})}U(Fe,Pe)},ue=Fe=>{var Pe=Lt(),it=lt(Pe);{var We=he=>{var De=eM(),ot=m(De);const Ge=at(()=>{var Je;return(Je=d())==null?void 0:Je.id});qx(ot,{get productId(){return a()},get estimateId(){return l(Ge)},get idx(){return o().index},get step(){return l(g)},set step(Je){_(g,Je)},$$legacy:!0}),U(he,De)},je=he=>{var De=Lt(),ot=lt(De);{var Ge=Je=>{var rt=tM();U(Je,rt)};be(ot,Je=>{l(g)===3&&Je(Ge)},!0)}U(he,De)};be(it,he=>{l(g)===2?he(We):he(je,!1)},!0)}U(Fe,Pe)};be(q,Fe=>{l(g)===1?Fe(de):Fe(ue,!1)})}ke(()=>{Tr(Ne,`odz-tab ${(l(g)===1?"odz-tab-active":"")??""}`),Tr(_e,`odz-tab ${(l(g)===2?"odz-tab-active":"")??""}`)}),At("click",Ne,te),At("click",_e,se),U(ze,Se)},Ce=ze=>{var Se=cM(),ve=lt(Se);{var Oe=We=>{var je=nM();U(We,je)},Ne=We=>{var je=sM(),he=z(m(je),2);O5(he,{onSelectProduct:xe,get isEditable(){return l(J)},set isEditable(rt){_(J,rt)},$$legacy:!0});var De=z(he,2),ot=m(De);{var Ge=rt=>{var ht=oM(),$e=m(ht);Ru($e,{class:"odz-w-5 odz-h-5 odz-mr-2"}),At("click",ht,()=>_(k,!0)),U(rt,ht)};be(ot,rt=>{l(J)&&rt(Ge)})}var Je=z(De,2);YN(Je,{get additionalCosts(){return l(ne)},get isEditable(){return l(J)}}),U(We,je)};be(ve,We=>{l(ge)?We(Oe):We(Ne,!1)})}var _e=z(ve,2);{var q=We=>{J1(We,{addProduct:j,productType:"godo",get isProductSearchOpen(){return l(k)},set isProductSearchOpen(je){_(k,je)},$$legacy:!0})};be(_e,We=>{l(k)&&We(q)})}var de=z(_e,2),ue=m(de),Fe=m(ue);{var Pe=We=>{var je=iM();U(We,je)},it=We=>{var je=dM(),he=lt(je),De=m(he),ot=z(m(De)),Ge=m(ot);HA(Ge,{class:"odz-text-error",size:10});var Je=z(De,2);{var rt=Nt=>{var br=AM(),$r=m(br),Mn=m($r),Wo=z($r,2);{var Mr=Kn=>{var xo=aM();U(Kn,xo)};be(Wo,Kn=>{l(J)||Kn(Mr)})}ke(()=>{Tr($r,`odz-badge odz-badge-${(d().status==="pending"?"warning":d().status==="progress"?"info":d().status==="completed"?"success":"error")??""}`),Qe(Mn,d().status==="pending"?"":d().status==="progress"?"":d().status==="completed"?"":"")}),U(Nt,br)};be(Je,Nt=>{var br;(br=d())!=null&&br.id&&Nt(rt)})}var ht=z(he,2),$e=m(ht),st=m($e),Bt=m(st),Ct=m(Bt);HA(Ct,{class:"odz-text-error",size:12});var Tt=z(st,2),wt=z($e,2),Ze=m(wt),kt=m(Ze),It=m(kt);HA(It,{class:"odz-text-error",size:12});var jt=z(Ze,2),et=z(wt,2),yt=m(et),mt=m(yt),Vt=m(mt);HA(Vt,{class:"odz-text-error",size:12});var ir=z(yt,2),qt=z(et,2),Gt=m(qt),ar=m(Gt),St=m(ar);HA(St,{class:"odz-text-error",size:12});var ft=z(Gt,2),Dt=m(ft);ss(Dt,Nt=>_(R,Nt),()=>l(R));var Yt=z(Dt,2);ss(Yt,Nt=>_(Z,Nt),()=>l(Z));var dr=z(Yt,2);ss(dr,Nt=>_(Be,Nt),()=>l(Be));var ur=z(ht,2),hr=m(ur),vr=m(hr),fn=m(vr);HA(fn,{class:"odz-text-error",size:12});var pn=z(hr,2),kr=m(pn),wr=z(kr,2),Vr=z(wr,2),Rr=z(pn,2),pr=z(Rr,2),yr=z(ur,4),Gr=m(yr),on=m(Gr),En=m(on),Wr=m(En);HA(Wr,{class:"odz-text-error",size:12});var mr=z(on,2);ke(()=>{o(),Ou(()=>{l(J)})});var qn=m(mr);qn.value=((qn.__value="")==null,"");var As=z(qn);As.value=(As.__value="delivery")==null?"":"delivery";var Fo=z(As);Fo.value=(Fo.__value="pickup")==null?"":"pickup";var Oo=z(Fo);Oo.value=(Oo.__value="quick")==null?"":"quick";var Ds=z(Gr,2),so=z(m(Ds),2),ls=z(yr,2);{var Yn=Nt=>{var br=lM(),$r=m(br),Mn=m($r),Wo=m(Mn);HA(Wo,{class:"odz-text-error",size:12});var Mr=z($r,2);ke(()=>Mr.readOnly=!l(J)),Fr(Mr,()=>o().password,Kn=>er(Et,dt(o).password=Kn,dt(o))),U(Nt,br)};be(ls,Nt=>{s().customer_id||Nt(Yn)})}var qe=z(ls,2),vt=z(m(qe),2),$t=z(qe,2),Rt=m($t),Mt=m(Rt);_w(Mt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var Wt=z(Rt,2),Kt=m(Wt);_w(Kt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var _r=z(Kt,2);{var Br=Nt=>{var br=mn(" ");U(Nt,br)},bn=Nt=>{var br=mn(" ");U(Nt,br)};be(_r,Nt=>{var br;(br=d())!=null&&br.id?Nt(Br):Nt(bn,!1)})}ke(Nt=>{Tt.readOnly=!l(J),jt.readOnly=!l(J),ir.readOnly=!l(J),Dt.readOnly=!l(J),Yt.readOnly=!l(J),dr.readOnly=!l(J),Rr.readOnly=!l(J),pr.readOnly=!l(J),mr.disabled=!l(J),so.disabled=!l(J),cr(so,"min",Nt),vt.readOnly=!l(J),Wt.disabled=!l(J)},[()=>new Date().toISOString().split("T")[0]],at),Fr(Tt,()=>o().estimateName,Nt=>er(Et,dt(o).estimateName=Nt,dt(o))),Fr(jt,()=>o().organizationName,Nt=>er(Et,dt(o).organizationName=Nt,dt(o))),Fr(ir,()=>o().orderName,Nt=>er(Et,dt(o).orderName=Nt,dt(o))),Fr(Dt,()=>l(L),Nt=>_(L,Nt)),At("input",Dt,Nt=>E(Nt,l(Z))),Fr(Yt,()=>l(ee),Nt=>_(ee,Nt)),At("input",Yt,Nt=>E(Nt,l(Be))),Fr(dr,()=>l(W),Nt=>_(W,Nt)),At("input",dr,Nt=>E(Nt)),Fr(kr,()=>l(y),Nt=>_(y,Nt)),At("click",wr,B),At("click",Vr,F),Fr(Rr,()=>l(x),Nt=>_(x,Nt)),Fr(pr,()=>l(C),Nt=>_(C,Nt)),Nu(mr,()=>o().shippingMethod,Nt=>er(Et,dt(o).shippingMethod=Nt,dt(o))),Fr(so,()=>l(N),Nt=>_(N,Nt)),Fr(vt,()=>o().comment,Nt=>er(Et,dt(o).comment=Nt,dt(o))),At("click",Rt,oe),At("click",Wt,P),U(We,je)};be(Fe,We=>{l(ge)?We(Pe):We(it,!1)})}U(ze,Se)};be(H,ze=>{l(g)>0?ze(Y):ze(Ce,!1)})}var fe=z(H,2),Le=m(fe);{var X=ze=>{var Se=uM();U(ze,Se)},D=ze=>{var Se=yM(),ve=m(Se),Oe=z(m(ve),2),Ne=m(Oe),_e=z(ve,2),q=z(m(_e),2),de=m(q),ue=z(q,2);{var Fe=et=>{var yt=hM();const mt=at(()=>o().products.reduce((St,ft)=>{var Dt;return St+(((Dt=ft.discountInfo)==null?void 0:Dt.originalAmount)||0)},0)),Vt=at(()=>o().products.reduce((St,ft)=>{var Dt;return St+(((Dt=ft.discountInfo)==null?void 0:Dt.discountAmount)||0)},0));var ir=lt(yt),qt=m(ir),Gt=z(ir,2),ar=m(Gt);ke((St,ft)=>{Qe(qt,`${St??""}`),Qe(ar,`-${ft??""} `)},[()=>Er(l(mt)),()=>Er(l(Vt))],at),U(et,yt)},Pe=et=>{var yt=fM();U(et,yt)};be(ue,et=>{o().products.some(yt=>{var mt;return(mt=yt.discountInfo)==null?void 0:mt.hasDiscount})?et(Fe):et(Pe,!1)})}var it=z(_e,2),We=z(m(it),2),je=m(We);{var he=et=>{var yt=pM();U(et,yt)},De=et=>{var yt=mn();ke(mt=>Qe(yt,`${mt??""}`),[()=>Er(o().totalPrintAmount)],at),U(et,yt)};be(je,et=>{o().totalPrintAmount===0?et(he):et(De,!1)})}var ot=z(We,2);{var Ge=et=>{var yt=gM();U(et,yt)},Je=et=>{var yt=Lt(),mt=lt(yt);{var Vt=qt=>{var Gt=vM();U(qt,Gt)},ir=qt=>{var Gt=Lt(),ar=lt(Gt);{var St=Dt=>{var Yt=mM();U(Dt,Yt)},ft=Dt=>{var Yt=wM();U(Dt,Yt)};be(ar,Dt=>{o().products.some(Yt=>Yt.print_type==="none")?Dt(St):Dt(ft,!1)},!0)}U(qt,Gt)};be(mt,qt=>{o().products.some(Gt=>Gt.print_type==="simple")?qt(Vt):qt(ir,!1)},!0)}U(et,yt)};be(ot,et=>{o().totalPrintAmount>0?et(Ge):et(Je,!1)})}var rt=z(it,2),ht=z(m(rt),2),$e=m(ht),st=z(rt,2),Bt=z(m(st),2),Ct=m(Bt),Tt=z(Bt,2),wt=m(Tt),Ze=z(wt);{var kt=et=>{var yt=mn("+ ( )");U(et,yt)};be(Ze,et=>{o().totalPrintAmount>0&&et(kt)})}var It=z(Ze,2);{var jt=et=>{var yt=mn();ke(mt=>Qe(yt,`+ ${mt??""}`),[()=>Er(o().totalAdditionalAmount)],at),U(et,yt)};be(It,et=>{o().totalAdditionalAmount>0&&et(jt)})}ke((et,yt,mt)=>{Qe(Ne,`${o().totalQuantity||0}`),Qe(de,`${et??""}`),Qe($e,`${yt??""}`),Qe(Ct,`${mt??""}`),Qe(wt,` ${et??""} + 
          ${yt??""} `)},[()=>Er(o().totalProductAmount),()=>Er(o().totalAddonAmount),()=>Er(o().totalAmount)],at),U(ze,Se)};be(Le,ze=>{l(ge)?ze(X):ze(D,!1)})}var Ae=z(fe,2);{var ye=ze=>{var Se=_M(),ve=m(Se),Oe=z(m(ve),4),Ne=m(Oe);At("click",Ne,()=>_(M,!1)),U(ze,Se)};be(Ae,ze=>{l(M)&&ze(ye)})}var ae=z(Ae,2);{var le=ze=>{PN(ze,{get isOpen(){return l(w)},set isOpen(Se){_(w,Se)},$$legacy:!0})};be(ae,ze=>{l(w)&&ze(le)})}var Ee=z(ae,2);Uc(Ee,{get isOpen(){return l(u)},set isOpen(ze){_(u,ze)},get title(){return l(h)},set title(ze){_(h,ze)},get message(){return l(f)},set message(ze){_(f,ze)},$$legacy:!0});var Me=z(Ee,2);Qc(Me,{get isLoading(){return l(ge)},set isLoading(ze){_(ge,ze)},$$legacy:!0}),U(n,$),Zr(),r()}var zM=V('<div class="odz-alert odz-alert-error"> </div>'),BM=V('<div class="odz-mb-4"><!></div>'),CM=V('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),SM=V('<div><h4 class="odz-font-semibold odz-mb-2"> </h4> <div class="odz-flex odz-flex-col odz-justify-center"></div></div>'),EM=V('<p class="odz-text-base odz-font-semibold odz-mb-3"> </p>'),FM=V('<div class="odz-border odz-rounded-lg odz-p-2 odz-w-full sm:odz-w-48 md:odz-w-56 odz-flex odz-items-center odz-gap-3"><img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0"> <div class="odz-flex-grow odz-min-w-0"><p class="odz-text-xs odz-font-medium odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div>'),IM=V('<div class="odz-mb-4"><!> <div class="odz-flex odz-flex-wrap odz-gap-3"></div></div>'),UM=V('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),QM=V('<div class="odz-flex odz-flex-col odz-justify-center"></div>'),TM=V('<p class="odz-text-xs odz-text-gray-500">     .</p>'),LM=V('<div class="odz-mb-2"><h6 class="odz-font-medium odz-text-sm odz-mb-2"> </h6> <!></div>'),PM=V('<div class="odz-mb-6 odz-p-4 odz-border odz-rounded-lg"><h5 class="odz-font-medium odz-text-base odz-mb-3"> </h5> <!> <!></div>'),kM=V("<div></div>"),OM=V('<p class="odz-text-center odz-text-gray-500 odz-py-4">   .</p>'),DM=V('<div class="odz-mt-4"><!></div>'),NM=V('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1">[]</div> <div class="odz-chat-bubble odz-text-sm odz-chat-bubble-success odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),MM=V('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"></div> <div class="odz-chat-bubble odz-chat-bubble-secondary odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),HM=V('<div class="odz-chat odz-chat-start"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"> </div> <div class="odz-chat-bubble odz-chat-bubble-gray"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),jM=V('<p class="odz-text-center odz-text-sm odz-text-gray-500">  .</p>'),RM=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),$M=V('<div role="alert" class="odz-alert odz-alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> :    .</span></div>'),qM=V('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),KM=V('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),VM=V('<div role="alert" class="odz-alert odz-alert-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),GM=V('<div role="alert" class="odz-alert odz-alert-success odz-alert-outline"><span> :   .</span></div>'),WM=V('<button class="odz-btn odz-btn-success"> </button> <button class="odz-btn odz-btn-error"> </button>',1),XM=V('<div class="odz-space-y-6"><!> <!> <!> <!></div> <div class="odz-divider odz-my-6"></div> <div class="odz-space-y-4"><div class="odz-max-h-60 odz-overflow-y-auto odz-p-2 odz-bg-base-200 odz-rounded-lg odz-space-y-3"></div> <div class="odz-flex odz-gap-2 odz-items-center"><input type="text" placeholder=" ..." class="odz-input odz-input-bordered odz-flex-grow"> <button class="odz-btn odz-btn-primary"><!> </button></div></div> <div class="odz-mt-6"><!></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <!></div>',1),YM=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4"> </h3> <!></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),JM=V('<div class="odz-flex odz-gap-4"><label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label> <label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label></div>'),ZM=V('<input type="checkbox" class="odz-checkbox odz-checkbox-sm">'),e7=V('<div class="odz-form-control"><label class="odz-label odz-cursor-pointer odz-gap-4"><span class="odz-label-text odz-text-xs"> </span> <!></label></div>'),t7=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>   ...',1),r7=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-font-bold odz-text-lg">    </h3> <p class="odz-py-4 odz-text-sm">       .</p> <div class="odz-form-control odz-mb-4"><label class="odz-label odz-cursor-pointer"><span class="odz-label-text odz-font-semibold"> .</span> <input type="checkbox" class="odz-checkbox odz-checkbox-primary"></label></div> <div class="odz-space-y-2 odz-border-t odz-border-b odz-py-4 odz-max-h-60 odz-overflow-y-auto"></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <button class="odz-btn odz-btn-primary"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),n7=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>  ...',1),o7=V('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box"><h3 class="odz-font-bold odz-text-lg odz-mb-4">   </h3> <textarea class="odz-textarea odz-textarea-bordered odz-w-full odz-h-32" placeholder="   ..."></textarea> <div class="odz-modal-action odz-mt-4"><button class="odz-btn"></button> <button class="odz-btn odz-btn-error"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),s7=V("<!> <!> <!> <!>",1);function i7(n,e){Jr(e,!1);let t=gt(e,"estimateId",8),r=gt(e,"isOpen",12),o=Ie(null),s=Ie(!0),i=Ie(null),a=Ie({}),A=Ie([]),d=Ie(""),c=Ie(""),u=null,h=null,f=null,g=Ie(!1),w=Ie(""),y=Ie(""),x=Ie([]),C=Ie(""),I=Ie(!1),M=Ie(),L=Ie(!1),ee=Ie(""),W=Ie(!1),R=Ie(!1),Z=Ie([!1,!1,!1,!1,!1,!1,!1]),Be=Ie(!1),N=Ie(!1);const k=["     .","          .","    .","    ,    ?","           .","   , ,       .","    ? ( ,  3 )"];function J(X){if(!X)return null;try{return typeof X=="object"&&X!==null?X:JSON.parse(X)}catch(D){return console.error("Failed to parse JSON:",D,"Input:",X),null}}async function ne(){await za(),l(M)&&Cr(M,l(M).scrollTop=l(M).scrollHeight)}function ge(){var D;if(!l(o))return;if((D=l(o).estimate)!=null&&D.design_uploads){const Ae=typeof l(o).estimate.design_uploads=="string"?J(l(o).estimate.design_uploads):l(o).estimate.design_uploads;Ae&&Array.isArray(Ae.files)?_(A,Ae.files.map(ye=>({url:ye.url,name:ye.name}))):_(A,[]),_(d,(Ae==null?void 0:Ae.topHTML)||""),_(c,(Ae==null?void 0:Ae.bottomHTML)||"")}else _(A,[]),_(d,""),_(c,"");const X={};l(o).items.length>0&&(l(o).items.forEach(Ae=>{const ye=Ae.idx??0;X[ye]||(X[ye]={items:[],prints:[]}),X[ye].items.push(Ae)}),l(o).prints.forEach(Ae=>{const ye=Ae.idx??0;X[ye]||(console.warn(`Print found for idx ${ye} but no corresponding item group exists.`),X[ye]={items:[],prints:[]});const ae=typeof Ae.design_uploads=="string"?J(Ae.design_uploads):Ae.design_uploads;Ae.parsed_uploads=(ae==null?void 0:ae.files)||[],X[ye].prints.find(Ee=>Ee.id===Ae.id)||X[ye].prints.push(Ae)})),_(a,X),console.log("Processed and grouped data:",l(a)),Object.entries(l(a)).forEach(([Ae,ye])=>{console.log(`idx ${Ae}: ${ye.prints.length} print(s)`,ye.prints.map(ae=>{var le;return{id:ae.id,parsed_uploads_count:(le=ae.parsed_uploads)==null?void 0:le.length}}))})}$n(async()=>{if(!t()){_(i," ID  ."),_(s,!1);return}_(s,!0),_(i,null);try{const[X,D]=await Promise.all([u1(t()),l5(t())]);_(o,X),_(x,D),console.log("Fetched initial details in component:",l(o)),console.log("Fetched initial comments in component:",l(x)),ge(),u=dg(t(),Ae=>{console.log("Received estimate update:",Ae),l(o)&&(Cr(o,l(o).estimate={...l(o).estimate,...Ae}),ge())}),console.log("Subscribed to estimate changes:",u),h=h1(t(),Ae=>{console.log("Received comment update payload:",Ae),Ae.eventType==="INSERT"&&Ae.new?_(x,[...l(x),Ae.new]):Ae.eventType==="DELETE"&&Ae.old?_(x,l(x).filter(ye=>ye.id!==Ae.old.id)):Ae.eventType==="UPDATE"&&Ae.new&&_(x,l(x).map(ye=>{var ae;return ye.id===((ae=Ae.new)==null?void 0:ae.id)?{...ye,...Ae.new}:ye})),ne()}),console.log("Subscribed to comment changes:",h),f=f1(t(),Ae=>{if(console.log("Received print update payload:",Ae),l(o)){let ye=!1;if(Ae.eventType==="INSERT"&&Ae.new)Cr(o,l(o).prints=[...l(o).prints,Ae.new]),ye=!0;else if(Ae.eventType==="DELETE"&&Ae.old){const ae=l(o).prints.length;Cr(o,l(o).prints=l(o).prints.filter(le=>le.id!==Ae.old.id)),l(o).prints.length<ae&&(ye=!0)}else if(Ae.eventType==="UPDATE"&&Ae.new){const ae=l(o).prints.findIndex(le=>{var Ee;return le.id===((Ee=Ae.new)==null?void 0:Ee.id)});ae!==-1&&(Cr(o,l(o).prints[ae]={...l(o).prints[ae],...Ae.new}),ye=!0)}ye&&(ge(),console.log("Prints array updated, re-processed data"))}}),console.log("Subscribed to print changes:",f),ne()}catch(X){console.error("Error loading initial data or subscribing:",X),_(i,"        .")}finally{_(s,!1)}}),as(()=>{u&&(console.log("Unsubscribing from estimate changes"),u.unsubscribe()),h&&(console.log("Unsubscribing from comment changes"),h.unsubscribe()),f&&(console.log("Unsubscribing from print changes"),f.unsubscribe())});function pe(){r(!1)}function xe(){_(Z,Array(k.length).fill(!1)),_(Be,!1),_(R,!0)}function te(){_(R,!1)}function se(){for(let X=0;X<k.length-1;X++)Cr(Z,l(Z)[X]=l(Be));_(Z,[...l(Z)]),console.log({confirmationChecks:l(Z)})}function oe(X,D){Cr(Z,l(Z)[X]=D),X<k.length-1&&_(Be,l(Z).slice(0,-1).every(Ae=>Ae===!0)),_(Z,[...l(Z)])}function me(){_(ee,""),_(L,!0)}function B(){_(L,!1)}async function F(){var ye,ae;if(!l(ee).trim()){_(w," "),_(y,"   ."),_(g,!0);return}if(!((ae=(ye=l(o))==null?void 0:ye.estimate)!=null&&ae.id))return;const X=l(o).estimate.id;_(W,!0);let D=null,Ae=null;try{try{await Vf({estimate_id:X,comment:`[] ${l(ee)}`,system:!1,writer:"customer"}),console.log("Rejection comment added successfully.")}catch(le){throw D=le,console.error("Error adding rejection comment:",D),new Error("     .")}try{await yc(X,{design_confirm:"processing"}),console.log("Estimate status updated to processing.")}catch(le){throw Ae=le,console.error("Error updating estimate status after rejection:",Ae),new Error("    .")}B(),pe()}catch(le){console.error("Error during rejection process:",le),_(w,""),_(y,le.message||"     ."),_(g,!0)}finally{_(W,!1)}}async function E(){var ae,le;if(!((le=(ae=l(o))==null?void 0:ae.estimate)!=null&&le.id))return;const X=l(o).estimate.id,D=l(Z)[k.length-1];_(N,!0);let Ae=null,ye=null;try{await yc(X,{design_confirm:"completed",use_reorder:D,...l(o).estimate.auto_complete_on_approval?{status:"completed"}:{}}),console.log(`Estimate status updated to completed with use_reorder: ${D}.`);try{await Vf({estimate_id:X,comment:"",system:!0,writer:"customer"}),console.log("System comment added successfully with writer as customer.")}catch(Ee){ye=Ee,console.error("Error adding system comment after approval:",ye)}}catch(Ee){Ae=Ee,console.error("Error approving design:",Ae)}finally{_(N,!1),Ae?(_(w,""),_(y,"      ."),_(g,!0)):ye?(_(w,""),_(y," ,      ."),_(g,!0)):(te(),pe())}}async function T(){var X,D;if(!(!l(C).trim()||!((D=(X=l(o))==null?void 0:X.estimate)!=null&&D.id))){_(I,!0);try{await Vf({estimate_id:l(o).estimate.id,comment:l(C),system:!1,writer:"customer"}),_(C,"")}catch(Ae){console.error("Error sending comment:",Ae),_(w,""),_(y,"    ."),_(g,!0)}finally{_(I,!1)}}}function P(X){if(!X)return"";try{return new Date(X).toLocaleString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return X}}nn();var O=s7(),j=lt(O);{var $=X=>{var D=YM(),Ae=m(D),ye=m(Ae),ae=z(ye,2),le=m(ae),Ee=z(ae,2);{var Me=Oe=>{Qc(Oe,{get isLoading(){return l(s)},set isLoading(Ne){_(s,Ne)},$$legacy:!0})},ze=Oe=>{var Ne=Lt(),_e=lt(Ne);{var q=ue=>{var Fe=zM(),Pe=m(Fe);ke(()=>Qe(Pe,l(i))),U(ue,Fe)},de=ue=>{var Fe=Lt(),Pe=lt(Fe);{var it=We=>{var je=XM(),he=lt(je),De=m(he);{var ot=St=>{var ft=BM(),Dt=m(ft);w0(Dt,()=>l(d),!1,!1),U(St,ft)};be(De,St=>{l(d)&&St(ot)})}var Ge=z(De,2);{var Je=St=>{var ft=SM(),Dt=z(m(ft),2);nr(Dt,5,()=>l(A),gr,(Yt,dr)=>{var ur=CM(),hr=m(ur);ke(()=>{cr(hr,"src",l(dr).url),cr(hr,"alt",l(dr).name)}),U(Yt,ur)}),U(St,ft)};be(Ge,St=>{l(A).length>0&&St(Je)})}var rt=z(Ge,2);{var ht=St=>{var ft=kM();nr(ft,5,()=>Object.entries(l(a)),gr,(Dt,Yt)=>{let dr=()=>l(Yt)[0],ur=()=>l(Yt)[1];var hr=PM(),vr=m(hr),fn=m(vr),pn=z(vr,2);{var kr=Rr=>{var pr=IM(),yr=m(pr);{var Gr=En=>{var Wr=EM(),mr=m(Wr);ke(()=>Qe(mr,ur().items[0].product.title)),U(En,Wr)};be(yr,En=>{var Wr;(Wr=ur().items[0].product)!=null&&Wr.title&&En(Gr)})}var on=z(yr,2);nr(on,5,()=>ur().items,gr,(En,Wr)=>{var mr=FM(),qn=m(mr),As=z(qn,2),Fo=m(As),Oo=m(Fo),Ds=z(Fo,2),so=m(Ds);ke(()=>{var ls,Yn,qe;cr(qn,"src",((ls=l(Wr).variant)==null?void 0:ls.thumbnail)||l(Wr).thumbnail||"/placeholder.png"),cr(qn,"alt",l(Wr).variant_title||((Yn=l(Wr).variant)==null?void 0:Yn.title)),Qe(Oo,l(Wr).variant_title||((qe=l(Wr).variant)==null?void 0:qe.title)||"  "),Qe(so,`${l(Wr).quantity??""}`)}),U(En,mr)}),U(Rr,pr)};be(pn,Rr=>{ur().items.length>0&&Rr(kr)})}var wr=z(pn,2);{var Vr=Rr=>{var pr=LM();const yr=at(()=>ur().prints[0]),Gr=at(()=>{var mr;return((mr=l(yr))==null?void 0:mr.parsed_uploads)||[]});var on=z(m(pr),2);{var En=mr=>{var qn=QM();nr(qn,5,()=>l(Gr),gr,(As,Fo)=>{var Oo=UM(),Ds=m(Oo);ke(()=>{cr(Ds,"src",l(Fo).url),cr(Ds,"alt",l(Fo).name)}),U(As,Oo)}),U(mr,qn)},Wr=mr=>{var qn=TM();U(mr,qn)};be(on,mr=>{l(Gr).length>0?mr(En):mr(Wr,!1)})}U(Rr,pr)};be(wr,Rr=>{ur().prints.length>0&&Rr(Vr)})}ke(Rr=>{cr(hr,"data-idx",dr()),Qe(fn,` ${Rr??""}`)},[()=>Number(dr())+1],at),U(Dt,hr)}),U(St,ft)},$e=St=>{var ft=Lt(),Dt=lt(ft);{var Yt=dr=>{var ur=OM();U(dr,ur)};be(Dt,dr=>{l(A).length===0&&dr(Yt)},!0)}U(St,ft)};be(rt,St=>{Object.keys(l(a)).length>0?St(ht):St($e,!1)})}var st=z(rt,2);{var Bt=St=>{var ft=DM(),Dt=m(ft);w0(Dt,()=>l(c),!1,!1),U(St,ft)};be(st,St=>{l(c)&&St(Bt)})}var Ct=z(he,4),Tt=m(Ct);nr(Tt,5,()=>l(x),St=>St.id,(St,ft)=>{var Dt=Lt(),Yt=lt(Dt);{var dr=hr=>{var vr=NM(),fn=z(m(vr),2),pn=m(fn),kr=z(pn),wr=m(kr);ke(Vr=>{Qe(pn,`${l(ft).comment??""} `),Qe(wr,Vr)},[()=>P(l(ft).created_at)],at),U(hr,vr)},ur=hr=>{var vr=Lt(),fn=lt(vr);{var pn=wr=>{var Vr=MM(),Rr=z(m(Vr),2),pr=m(Rr),yr=z(pr),Gr=m(yr);ke(on=>{Qe(pr,`${l(ft).comment??""} `),Qe(Gr,on)},[()=>P(l(ft).created_at)],at),U(wr,Vr)},kr=wr=>{var Vr=HM(),Rr=m(Vr),pr=m(Rr),yr=z(Rr,2),Gr=m(yr),on=z(Gr),En=m(on);ke(Wr=>{Qe(pr,l(ft).writer||""),Qe(Gr,`${l(ft).comment??""} `),Qe(En,Wr)},[()=>P(l(ft).created_at)],at),U(wr,Vr)};be(fn,wr=>{l(ft).writer==="customer"?wr(pn):wr(kr,!1)},!0)}U(hr,vr)};be(Yt,hr=>{l(ft).system?hr(dr):hr(ur,!1)})}U(St,Dt)},St=>{var ft=jM();U(St,ft)}),ss(Tt,St=>_(M,St),()=>l(M));var wt=z(Tt,2),Ze=m(wt),kt=z(Ze,2),It=m(kt);{var jt=St=>{var ft=RM();U(St,ft)};be(It,St=>{l(I)&&St(jt)})}var et=z(Ct,2),yt=m(et);{var mt=St=>{var ft=$M();U(St,ft)},Vt=St=>{var ft=Lt(),Dt=lt(ft);{var Yt=ur=>{var hr=qM();U(ur,hr)},dr=ur=>{var hr=Lt(),vr=lt(hr);{var fn=kr=>{var wr=KM();U(kr,wr)},pn=kr=>{var wr=Lt(),Vr=lt(wr);{var Rr=yr=>{var Gr=VM();U(yr,Gr)},pr=yr=>{var Gr=Lt(),on=lt(Gr);{var En=Wr=>{var mr=GM();U(Wr,mr)};be(on,Wr=>{var mr,qn;((qn=(mr=l(o))==null?void 0:mr.estimate)==null?void 0:qn.design_confirm)==="completed"&&Wr(En)},!0)}U(yr,Gr)};be(Vr,yr=>{var Gr,on;((on=(Gr=l(o))==null?void 0:Gr.estimate)==null?void 0:on.design_confirm)==="confirming"?yr(Rr):yr(pr,!1)},!0)}U(kr,wr)};be(vr,kr=>{var wr,Vr;((Vr=(wr=l(o))==null?void 0:wr.estimate)==null?void 0:Vr.design_confirm)==="processing"?kr(fn):kr(pn,!1)},!0)}U(ur,hr)};be(Dt,ur=>{var hr,vr;((vr=(hr=l(o))==null?void 0:hr.estimate)==null?void 0:vr.design_confirm)==="waiting"?ur(Yt):ur(dr,!1)},!0)}U(St,ft)};be(yt,St=>{var ft,Dt;((Dt=(ft=l(o))==null?void 0:ft.estimate)==null?void 0:Dt.design_confirm)==="none"?St(mt):St(Vt,!1)})}var ir=z(et,2),qt=m(ir),Gt=z(qt,2);{var ar=St=>{var ft=WM(),Dt=lt(ft),Yt=z(Dt,2);ke(()=>{Dt.disabled=l(N),Yt.disabled=l(N)}),At("click",Dt,xe),At("click",Yt,me),U(St,ft)};be(Gt,St=>{var ft,Dt;((Dt=(ft=l(o))==null?void 0:ft.estimate)==null?void 0:Dt.design_confirm)==="confirming"&&St(ar)})}ke(St=>{Ze.disabled=l(I),kt.disabled=St,qt.disabled=l(N)},[()=>l(I)||!l(C).trim()],at),Fr(Ze,()=>l(C),St=>_(C,St)),At("keydown",Ze,St=>St.key==="Enter"&&!St.isComposing&&T()),At("click",kt,T),At("click",qt,pe),U(We,je)};be(Pe,We=>{l(o)&&We(it)},!0)}U(ue,Fe)};be(_e,ue=>{l(i)?ue(q):ue(de,!1)},!0)}U(Oe,Ne)};be(Ee,Oe=>{l(s)?Oe(Me):Oe(ze,!1)})}var Se=z(Ae,2),ve=m(Se);ke(()=>{var Oe,Ne;return Qe(le,`  - ${((Ne=(Oe=l(o))==null?void 0:Oe.estimate)==null?void 0:Ne.name)||""}`)}),At("click",ye,pe),At("click",ve,pe),U(X,D)};be(j,X=>{r()&&X($)})}var H=z(j,2);{var Y=X=>{var D=r7(),Ae=m(D),ye=z(m(Ae),4),ae=m(ye),le=z(m(ae),2),Ee=z(ye,2);nr(Ee,5,()=>k,gr,(de,ue,Fe)=>{var Pe=e7(),it=m(Pe),We=m(it),je=m(We),he=z(We,2);{var De=Ge=>{var Je=JM(),rt=m(Je),ht=z(m(rt),2);cr(ht,"name",`reorder-${Fe??""}`);var $e=z(rt,2),st=z(m($e),2);cr(st,"name",`reorder-${Fe??""}`),ke(()=>{Du(ht,l(Z)[Fe]),Du(st,!l(Z)[Fe])}),At("change",ht,Bt=>oe(Fe,Bt.target.checked)),At("change",st,Bt=>oe(Fe,!Bt.target.checked)),U(Ge,Je)},ot=Ge=>{var Je=ZM();_0(Je,()=>l(Z)[Fe],rt=>Cr(Z,l(Z)[Fe]=rt)),At("change",Je,rt=>oe(Fe,rt.target.checked)),U(Ge,Je)};be(he,Ge=>{Fe===6?Ge(De):Ge(ot,!1)})}ke(()=>Qe(je,l(ue))),U(de,Pe)});var Me=z(Ee,2),ze=m(Me),Se=z(ze,2),ve=m(Se);{var Oe=de=>{var ue=t7();U(de,ue)},Ne=de=>{var ue=mn("");U(de,ue)};be(ve,de=>{l(N)?de(Oe):de(Ne,!1)})}var _e=z(Ae,2),q=m(_e);ke(()=>{ze.disabled=l(N),Se.disabled=!l(Be)||l(N)}),_0(le,()=>l(Be),de=>_(Be,de)),At("change",le,se),At("click",ze,te),At("click",Se,E),At("click",q,te),U(X,D)};be(H,X=>{l(R)&&X(Y)})}var Ce=z(H,2);{var fe=X=>{var D=o7(),Ae=m(D),ye=z(m(Ae),2),ae=z(ye,2),le=m(ae),Ee=z(le,2),Me=m(Ee);{var ze=Ne=>{var _e=n7();U(Ne,_e)},Se=Ne=>{var _e=mn(" ");U(Ne,_e)};be(Me,Ne=>{l(W)?Ne(ze):Ne(Se,!1)})}var ve=z(Ae,2),Oe=m(ve);ke(Ne=>{ye.disabled=l(W),le.disabled=l(W),Ee.disabled=Ne},[()=>l(W)||!l(ee).trim()],at),Fr(ye,()=>l(ee),Ne=>_(ee,Ne)),At("click",le,B),At("click",Ee,F),At("click",Oe,B),U(X,D)};be(Ce,X=>{l(L)&&X(fe)})}var Le=z(Ce,2);Uc(Le,{get isOpen(){return l(g)},set isOpen(X){_(g,X)},get title(){return l(w)},set title(X){_(w,X)},get message(){return l(y)},set message(X){_(y,X)},$$legacy:!0}),U(n,O),Zr()}function xB(n,e){return function(){return n.apply(e,arguments)}}const{toString:a7}=Object.prototype,{getPrototypeOf:Z1}=Object,{iterator:Ng,toStringTag:zB}=Symbol,Mg=(n=>e=>{const t=a7.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),aa=n=>(n=n.toLowerCase(),e=>Mg(e)===n),Hg=n=>e=>typeof e===n,{isArray:Nc}=Array,eh=Hg("undefined");function A7(n){return n!==null&&!eh(n)&&n.constructor!==null&&!eh(n.constructor)&&Ws(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const BB=aa("ArrayBuffer");function l7(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&BB(n.buffer),e}const d7=Hg("string"),Ws=Hg("function"),CB=Hg("number"),jg=n=>n!==null&&typeof n=="object",c7=n=>n===!0||n===!1,ap=n=>{if(Mg(n)!=="object")return!1;const e=Z1(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(zB in n)&&!(Ng in n)},u7=aa("Date"),h7=aa("File"),f7=aa("Blob"),p7=aa("FileList"),g7=n=>jg(n)&&Ws(n.pipe),v7=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ws(n.append)&&((e=Mg(n))==="formdata"||e==="object"&&Ws(n.toString)&&n.toString()==="[object FormData]"))},m7=aa("URLSearchParams"),[w7,y7,_7,b7]=["ReadableStream","Request","Response","Headers"].map(aa),x7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),Nc(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,n[a],a,n)}}function SB(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,EB=n=>!eh(n)&&n!==ql;function Im(){const{caseless:n}=EB(this)&&this||{},e={},t=(r,o)=>{const s=n&&SB(e,o)||o;ap(e[s])&&ap(r)?e[s]=Im(e[s],r):ap(r)?e[s]=Im({},r):Nc(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&fh(arguments[r],t);return e}const z7=(n,e,t,{allOwnKeys:r}={})=>(fh(e,(o,s)=>{t&&Ws(o)?n[s]=xB(o,t):n[s]=o},{allOwnKeys:r}),n),B7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),C7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},S7=(n,e,t,r)=>{let o,s,i;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)i=o[s],(!r||r(i,n,e))&&!a[i]&&(e[i]=n[i],a[i]=!0);n=t!==!1&&Z1(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},E7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},F7=n=>{if(!n)return null;if(Nc(n))return n;let e=n.length;if(!CB(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},I7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Z1(Uint8Array)),U7=(n,e)=>{const r=(n&&n[Ng]).call(n);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(n,s[0],s[1])}},Q7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},T7=aa("HTMLFormElement"),L7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),F_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),P7=aa("RegExp"),FB=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};fh(t,(o,s)=>{let i;(i=e(o,s,n))!==!1&&(r[s]=i||o)}),Object.defineProperties(n,r)},k7=n=>{FB(n,(e,t)=>{if(Ws(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Ws(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},O7=(n,e)=>{const t={},r=o=>{o.forEach(s=>{t[s]=!0})};return Nc(n)?r(n):r(String(n).split(e)),t},D7=()=>{},N7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function M7(n){return!!(n&&Ws(n.append)&&n[zB]==="FormData"&&n[Ng])}const H7=n=>{const e=new Array(10),t=(r,o)=>{if(jg(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=Nc(r)?[]:{};return fh(r,(i,a)=>{const A=t(i,o+1);!eh(A)&&(s[a]=A)}),e[o]=void 0,s}}return r};return t(n,0)},j7=aa("AsyncFunction"),R7=n=>n&&(jg(n)||Ws(n))&&Ws(n.then)&&Ws(n.catch),IB=((n,e)=>n?setImmediate:e?((t,r)=>(ql.addEventListener("message",({source:o,data:s})=>{o===ql&&s===t&&r.length&&r.shift()()},!1),o=>{r.push(o),ql.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ws(ql.postMessage)),$7=typeof queueMicrotask<"u"?queueMicrotask.bind(ql):typeof process<"u"&&process.nextTick||IB,q7=n=>n!=null&&Ws(n[Ng]),_t={isArray:Nc,isArrayBuffer:BB,isBuffer:A7,isFormData:v7,isArrayBufferView:l7,isString:d7,isNumber:CB,isBoolean:c7,isObject:jg,isPlainObject:ap,isReadableStream:w7,isRequest:y7,isResponse:_7,isHeaders:b7,isUndefined:eh,isDate:u7,isFile:h7,isBlob:f7,isRegExp:P7,isFunction:Ws,isStream:g7,isURLSearchParams:m7,isTypedArray:I7,isFileList:p7,forEach:fh,merge:Im,extend:z7,trim:x7,stripBOM:B7,inherits:C7,toFlatObject:S7,kindOf:Mg,kindOfTest:aa,endsWith:E7,toArray:F7,forEachEntry:U7,matchAll:Q7,isHTMLForm:T7,hasOwnProperty:F_,hasOwnProp:F_,reduceDescriptors:FB,freezeMethods:k7,toObjectSet:O7,toCamelCase:L7,noop:D7,toFiniteNumber:N7,findKey:SB,global:ql,isContextDefined:EB,isSpecCompliantForm:M7,toJSONObject:H7,isAsyncFn:j7,isThenable:R7,setImmediate:IB,asap:$7,isIterable:q7};function Dr(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}_t.inherits(Dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_t.toJSONObject(this.config),code:this.code,status:this.status}}});const UB=Dr.prototype,QB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{QB[n]={value:n}});Object.defineProperties(Dr,QB);Object.defineProperty(UB,"isAxiosError",{value:!0});Dr.from=(n,e,t,r,o,s)=>{const i=Object.create(UB);return _t.toFlatObject(n,i,function(A){return A!==Error.prototype},a=>a!=="isAxiosError"),Dr.call(i,n.message,e,t,r,o),i.cause=n,i.name=n.name,s&&Object.assign(i,s),i};const K7=null;function Um(n){return _t.isPlainObject(n)||_t.isArray(n)}function TB(n){return _t.endsWith(n,"[]")?n.slice(0,-2):n}function I_(n,e,t){return n?n.concat(e).map(function(o,s){return o=TB(o),!t&&s?"["+o+"]":o}).join(t?".":""):e}function V7(n){return _t.isArray(n)&&!n.some(Um)}const G7=_t.toFlatObject(_t,{},null,function(e){return/^is[A-Z]/.test(e)});function Rg(n,e,t){if(!_t.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=_t.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,y){return!_t.isUndefined(y[w])});const r=t.metaTokens,o=t.visitor||c,s=t.dots,i=t.indexes,A=(t.Blob||typeof Blob<"u"&&Blob)&&_t.isSpecCompliantForm(e);if(!_t.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(_t.isDate(g))return g.toISOString();if(!A&&_t.isBlob(g))throw new Dr("Blob is not supported. Use a Buffer instead.");return _t.isArrayBuffer(g)||_t.isTypedArray(g)?A&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,w,y){let x=g;if(g&&!y&&typeof g=="object"){if(_t.endsWith(w,"{}"))w=r?w:w.slice(0,-2),g=JSON.stringify(g);else if(_t.isArray(g)&&V7(g)||(_t.isFileList(g)||_t.endsWith(w,"[]"))&&(x=_t.toArray(g)))return w=TB(w),x.forEach(function(I,M){!(_t.isUndefined(I)||I===null)&&e.append(i===!0?I_([w],M,s):i===null?w:w+"[]",d(I))}),!1}return Um(g)?!0:(e.append(I_(y,w,s),d(g)),!1)}const u=[],h=Object.assign(G7,{defaultVisitor:c,convertValue:d,isVisitable:Um});function f(g,w){if(!_t.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));u.push(g),_t.forEach(g,function(x,C){(!(_t.isUndefined(x)||x===null)&&o.call(e,x,_t.isString(C)?C.trim():C,w,h))===!0&&f(x,w?w.concat(C):[C])}),u.pop()}}if(!_t.isObject(n))throw new TypeError("data must be an object");return f(n),e}function U_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function e2(n,e){this._pairs=[],n&&Rg(n,this,e)}const LB=e2.prototype;LB.append=function(e,t){this._pairs.push([e,t])};LB.toString=function(e){const t=e?function(r){return e.call(this,r,U_)}:U_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function W7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function PB(n,e,t){if(!e)return n;const r=t&&t.encode||W7;_t.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let s;if(o?s=o(e,t):s=_t.isURLSearchParams(e)?e.toString():new e2(e,t).toString(r),s){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Q_{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_t.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},X7=typeof URLSearchParams<"u"?URLSearchParams:e2,Y7=typeof FormData<"u"?FormData:null,J7=typeof Blob<"u"?Blob:null,Z7={isBrowser:!0,classes:{URLSearchParams:X7,FormData:Y7,Blob:J7},protocols:["http","https","file","blob","url","data"]},t2=typeof window<"u"&&typeof document<"u",Qm=typeof navigator=="object"&&navigator||void 0,eH=t2&&(!Qm||["ReactNative","NativeScript","NS"].indexOf(Qm.product)<0),tH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rH=t2&&window.location.href||"http://localhost",nH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t2,hasStandardBrowserEnv:eH,hasStandardBrowserWebWorkerEnv:tH,navigator:Qm,origin:rH},Symbol.toStringTag,{value:"Module"})),bs={...nH,...Z7};function oH(n,e){return Rg(n,new bs.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,s){return bs.isNode&&_t.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function sH(n){return _t.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iH(n){const e={},t=Object.keys(n);let r;const o=t.length;let s;for(r=0;r<o;r++)s=t[r],e[s]=n[s];return e}function OB(n){function e(t,r,o,s){let i=t[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),A=s>=t.length;return i=!i&&_t.isArray(o)?o.length:i,A?(_t.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!_t.isObject(o[i]))&&(o[i]=[]),e(t,r,o[i],s)&&_t.isArray(o[i])&&(o[i]=iH(o[i])),!a)}if(_t.isFormData(n)&&_t.isFunction(n.entries)){const t={};return _t.forEachEntry(n,(r,o)=>{e(sH(r),o,t,0)}),t}return null}function aH(n,e,t){if(_t.isString(n))try{return(e||JSON.parse)(n),_t.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const ph={transitional:kB,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,s=_t.isObject(e);if(s&&_t.isHTMLForm(e)&&(e=new FormData(e)),_t.isFormData(e))return o?JSON.stringify(OB(e)):e;if(_t.isArrayBuffer(e)||_t.isBuffer(e)||_t.isStream(e)||_t.isFile(e)||_t.isBlob(e)||_t.isReadableStream(e))return e;if(_t.isArrayBufferView(e))return e.buffer;if(_t.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oH(e,this.formSerializer).toString();if((a=_t.isFileList(e))||r.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return Rg(a?{"files[]":e}:e,A&&new A,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),aH(e)):e}],transformResponse:[function(e){const t=this.transitional||ph.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(_t.isResponse(e)||_t.isReadableStream(e))return e;if(e&&_t.isString(e)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Dr.from(a,Dr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bs.classes.FormData,Blob:bs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_t.forEach(["delete","get","head","post","put","patch"],n=>{ph.headers[n]={}});const AH=_t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lH=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||e[t]&&AH[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},T_=Symbol("internals");function Au(n){return n&&String(n).trim().toLowerCase()}function Ap(n){return n===!1||n==null?n:_t.isArray(n)?n.map(Ap):String(n)}function dH(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const cH=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function i0(n,e,t,r,o){if(_t.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!_t.isString(e)){if(_t.isString(r))return e.indexOf(r)!==-1;if(_t.isRegExp(r))return r.test(e)}}function uH(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function hH(n,e){const t=_t.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}let Xs=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function s(a,A,d){const c=Au(A);if(!c)throw new Error("header name must be a non-empty string");const u=_t.findKey(o,c);(!u||o[u]===void 0||d===!0||d===void 0&&o[u]!==!1)&&(o[u||A]=Ap(a))}const i=(a,A)=>_t.forEach(a,(d,c)=>s(d,c,A));if(_t.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(_t.isString(e)&&(e=e.trim())&&!cH(e))i(lH(e),t);else if(_t.isObject(e)&&_t.isIterable(e)){let a={},A,d;for(const c of e){if(!_t.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(A=a[d])?_t.isArray(A)?[...A,c[1]]:[A,c[1]]:c[1]}i(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Au(e),e){const r=_t.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return dH(o);if(_t.isFunction(t))return t.call(this,o,r);if(_t.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Au(e),e){const r=_t.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||i0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function s(i){if(i=Au(i),i){const a=_t.findKey(r,i);a&&(!t||i0(r,r[a],a,t))&&(delete r[a],o=!0)}}return _t.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const s=t[r];(!e||i0(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const t=this,r={};return _t.forEach(this,(o,s)=>{const i=_t.findKey(r,s);if(i){t[i]=Ap(o),delete t[s];return}const a=e?uH(s):String(s).trim();a!==s&&delete t[s],t[a]=Ap(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _t.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&_t.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[T_]=this[T_]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=Au(i);r[a]||(hH(o,i),r[a]=!0)}return _t.isArray(e)?e.forEach(s):s(e),this}};Xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_t.reduceDescriptors(Xs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});_t.freezeMethods(Xs);function a0(n,e){const t=this||ph,r=e||t,o=Xs.from(r.headers);let s=r.data;return _t.forEach(n,function(a){s=a.call(t,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function DB(n){return!!(n&&n.__CANCEL__)}function Mc(n,e,t){Dr.call(this,n??"canceled",Dr.ERR_CANCELED,e,t),this.name="CanceledError"}_t.inherits(Mc,Dr,{__CANCEL__:!0});function NB(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Dr("Request failed with status code "+t.status,[Dr.ERR_BAD_REQUEST,Dr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fH(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function pH(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(A){const d=Date.now(),c=r[s];i||(i=d),t[o]=A,r[o]=d;let u=s,h=0;for(;u!==o;)h+=t[u++],u=u%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-i<e)return;const f=c&&d-c;return f?Math.round(h*1e3/f):void 0}}function gH(n,e){let t=0,r=1e3/e,o,s;const i=(d,c=Date.now())=>{t=c,o=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const c=Date.now(),u=c-t;u>=r?i(d,c):(o=d,s||(s=setTimeout(()=>{s=null,i(o)},r-u)))},()=>o&&i(o)]}const Gp=(n,e,t=3)=>{let r=0;const o=pH(50,250);return gH(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,A=i-r,d=o(A),c=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:A,rate:d||void 0,estimated:d&&a&&c?(a-i)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},L_=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},P_=n=>(...e)=>_t.asap(()=>n(...e)),vH=bs.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,bs.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(bs.origin),bs.navigator&&/(msie|trident)/i.test(bs.navigator.userAgent)):()=>!0,mH=bs.hasStandardBrowserEnv?{write(n,e,t,r,o,s){const i=[n+"="+encodeURIComponent(e)];_t.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),_t.isString(r)&&i.push("path="+r),_t.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wH(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function yH(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function MB(n,e,t){let r=!wH(e);return n&&(r||t==!1)?yH(n,e):e}const k_=n=>n instanceof Xs?{...n}:n;function sd(n,e){e=e||{};const t={};function r(d,c,u,h){return _t.isPlainObject(d)&&_t.isPlainObject(c)?_t.merge.call({caseless:h},d,c):_t.isPlainObject(c)?_t.merge({},c):_t.isArray(c)?c.slice():c}function o(d,c,u,h){if(_t.isUndefined(c)){if(!_t.isUndefined(d))return r(void 0,d,u,h)}else return r(d,c,u,h)}function s(d,c){if(!_t.isUndefined(c))return r(void 0,c)}function i(d,c){if(_t.isUndefined(c)){if(!_t.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,u){if(u in e)return r(d,c);if(u in n)return r(void 0,d)}const A={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,c,u)=>o(k_(d),k_(c),u,!0)};return _t.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=A[c]||o,h=u(n[c],e[c],c);_t.isUndefined(h)&&u!==a||(t[c]=h)}),t}const HB=n=>{const e=sd({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=Xs.from(i),e.url=PB(MB(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let A;if(_t.isFormData(t)){if(bs.hasStandardBrowserEnv||bs.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((A=i.getContentType())!==!1){const[d,...c]=A?A.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...c].join("; "))}}if(bs.hasStandardBrowserEnv&&(r&&_t.isFunction(r)&&(r=r(e)),r||r!==!1&&vH(e.url))){const d=o&&s&&mH.read(s);d&&i.set(o,d)}return e},_H=typeof XMLHttpRequest<"u",bH=_H&&function(n){return new Promise(function(t,r){const o=HB(n);let s=o.data;const i=Xs.from(o.headers).normalize();let{responseType:a,onUploadProgress:A,onDownloadProgress:d}=o,c,u,h,f,g;function w(){f&&f(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function x(){if(!y)return;const I=Xs.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),L={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:I,config:n,request:y};NB(function(W){t(W),w()},function(W){r(W),w()},L),y=null}"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(x)},y.onabort=function(){y&&(r(new Dr("Request aborted",Dr.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new Dr("Network Error",Dr.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let M=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const L=o.transitional||kB;o.timeoutErrorMessage&&(M=o.timeoutErrorMessage),r(new Dr(M,L.clarifyTimeoutError?Dr.ETIMEDOUT:Dr.ECONNABORTED,n,y)),y=null},s===void 0&&i.setContentType(null),"setRequestHeader"in y&&_t.forEach(i.toJSON(),function(M,L){y.setRequestHeader(L,M)}),_t.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),a&&a!=="json"&&(y.responseType=o.responseType),d&&([h,g]=Gp(d,!0),y.addEventListener("progress",h)),A&&y.upload&&([u,f]=Gp(A),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(c=I=>{y&&(r(!I||I.type?new Mc(null,n,y):I),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const C=fH(o.url);if(C&&bs.protocols.indexOf(C)===-1){r(new Dr("Unsupported protocol "+C+":",Dr.ERR_BAD_REQUEST,n));return}y.send(s||null)})},xH=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const s=function(d){if(!o){o=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof Dr?c:new Mc(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,s(new Dr(`timeout ${e} of ms exceeded`,Dr.ETIMEDOUT))},e);const a=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:A}=r;return A.unsubscribe=()=>_t.asap(a),A}},zH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},BH=async function*(n,e){for await(const t of CH(n))yield*zH(t,e)},CH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},O_=(n,e,t,r)=>{const o=BH(n,e);let s=0,i,a=A=>{i||(i=!0,r&&r(A))};return new ReadableStream({async pull(A){try{const{done:d,value:c}=await o.next();if(d){a(),A.close();return}let u=c.byteLength;if(t){let h=s+=u;t(h)}A.enqueue(new Uint8Array(c))}catch(d){throw a(d),d}},cancel(A){return a(A),o.return()}},{highWaterMark:2})},$g=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jB=$g&&typeof ReadableStream=="function",SH=$g&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),RB=(n,...e)=>{try{return!!n(...e)}catch{return!1}},EH=jB&&RB(()=>{let n=!1;const e=new Request(bs.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),D_=64*1024,Tm=jB&&RB(()=>_t.isReadableStream(new Response("").body)),Wp={stream:Tm&&(n=>n.body)};$g&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Wp[e]&&(Wp[e]=_t.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Dr(`Response type '${e}' is not supported`,Dr.ERR_NOT_SUPPORT,r)})})})(new Response);const FH=async n=>{if(n==null)return 0;if(_t.isBlob(n))return n.size;if(_t.isSpecCompliantForm(n))return(await new Request(bs.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(_t.isArrayBufferView(n)||_t.isArrayBuffer(n))return n.byteLength;if(_t.isURLSearchParams(n)&&(n=n+""),_t.isString(n))return(await SH(n)).byteLength},IH=async(n,e)=>{const t=_t.toFiniteNumber(n.getContentLength());return t??FH(e)},UH=$g&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:A,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=HB(n);d=d?(d+"").toLowerCase():"text";let f=xH([o,s&&s.toAbortSignal()],i),g;const w=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(A&&EH&&t!=="get"&&t!=="head"&&(y=await IH(c,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),ee;if(_t.isFormData(r)&&(ee=L.headers.get("content-type"))&&c.setContentType(ee),L.body){const[W,R]=L_(y,Gp(P_(A)));r=O_(L.body,D_,W,R)}}_t.isString(u)||(u=u?"include":"omit");const x="credentials"in Request.prototype;g=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:x?u:void 0});let C=await fetch(g);const I=Tm&&(d==="stream"||d==="response");if(Tm&&(a||I&&w)){const L={};["status","statusText","headers"].forEach(Z=>{L[Z]=C[Z]});const ee=_t.toFiniteNumber(C.headers.get("content-length")),[W,R]=a&&L_(ee,Gp(P_(a),!0))||[];C=new Response(O_(C.body,D_,W,()=>{R&&R(),w&&w()}),L)}d=d||"text";let M=await Wp[_t.findKey(Wp,d)||"text"](C,n);return!I&&w&&w(),await new Promise((L,ee)=>{NB(L,ee,{data:M,headers:Xs.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:g})})}catch(x){throw w&&w(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Dr("Network Error",Dr.ERR_NETWORK,n,g),{cause:x.cause||x}):Dr.from(x,x&&x.code,n,g)}}),Lm={http:K7,xhr:bH,fetch:UH};_t.forEach(Lm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const N_=n=>`- ${n}`,QH=n=>_t.isFunction(n)||n===null||n===!1,$B={getAdapter:n=>{n=_t.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let s=0;s<e;s++){t=n[s];let i;if(r=t,!QH(t)&&(r=Lm[(i=String(t)).toLowerCase()],r===void 0))throw new Dr(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,A])=>`adapter ${a} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(N_).join(`
`):" "+N_(s[0]):"as no adapter specified";throw new Dr("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Lm};function A0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Mc(null,n)}function M_(n){return A0(n),n.headers=Xs.from(n.headers),n.data=a0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$B.getAdapter(n.adapter||ph.adapter)(n).then(function(r){return A0(n),r.data=a0.call(n,n.transformResponse,r),r.headers=Xs.from(r.headers),r},function(r){return DB(r)||(A0(n),r&&r.response&&(r.response.data=a0.call(n,n.transformResponse,r.response),r.response.headers=Xs.from(r.response.headers))),Promise.reject(r)})}const qB="1.9.0",qg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{qg[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const H_={};qg.transitional=function(e,t,r){function o(s,i){return"[Axios v"+qB+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new Dr(o(i," has been removed"+(t?" in "+t:"")),Dr.ERR_DEPRECATED);return t&&!H_[i]&&(H_[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,a):!0}};qg.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function TH(n,e,t){if(typeof n!="object")throw new Dr("options must be an object",Dr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=n[s],A=a===void 0||i(a,s,n);if(A!==!0)throw new Dr("option "+s+" must be "+A,Dr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Dr("Unknown option "+s,Dr.ERR_BAD_OPTION)}}const lp={assertOptions:TH,validators:qg},_a=lp.validators;let Jl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Q_,response:new Q_}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=sd(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:s}=t;r!==void 0&&lp.assertOptions(r,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1),o!=null&&(_t.isFunction(o)?t.paramsSerializer={serialize:o}:lp.assertOptions(o,{encode:_a.function,serialize:_a.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),lp.assertOptions(t,{baseUrl:_a.spelling("baseURL"),withXsrfToken:_a.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&_t.merge(s.common,s[t.method]);s&&_t.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Xs.concat(i,s);const a=[];let A=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(A=A&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let c,u=0,h;if(!A){const g=[M_.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,c=Promise.resolve(t);u<h;)c=c.then(g[u++],g[u++]);return c}h=a.length;let f=t;for(u=0;u<h;){const g=a[u++],w=a[u++];try{f=g(f)}catch(y){w.call(this,y);break}}try{c=M_.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=sd(this.defaults,e);const t=MB(e.baseURL,e.url,e.allowAbsoluteUrls);return PB(t,e.params,e.paramsSerializer)}};_t.forEach(["delete","get","head","options"],function(e){Jl.prototype[e]=function(t,r){return this.request(sd(r||{},{method:e,url:t,data:(r||{}).data}))}});_t.forEach(["post","put","patch"],function(e){function t(r){return function(s,i,a){return this.request(sd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Jl.prototype[e]=t(),Jl.prototype[e+"Form"]=t(!0)});let LH=class KB{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new Mc(s,i,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new KB(function(o){e=o}),cancel:e}}};function PH(n){return function(t){return n.apply(null,t)}}function kH(n){return _t.isObject(n)&&n.isAxiosError===!0}const Pm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pm).forEach(([n,e])=>{Pm[e]=n});function VB(n){const e=new Jl(n),t=xB(Jl.prototype.request,e);return _t.extend(t,Jl.prototype,e,{allOwnKeys:!0}),_t.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return VB(sd(n,o))},t}const oo=VB(ph);oo.Axios=Jl;oo.CanceledError=Mc;oo.CancelToken=LH;oo.isCancel=DB;oo.VERSION=qB;oo.toFormData=Rg;oo.AxiosError=Dr;oo.Cancel=oo.CanceledError;oo.all=function(e){return Promise.all(e)};oo.spread=PH;oo.isAxiosError=kH;oo.mergeConfig=sd;oo.AxiosHeaders=Xs;oo.formToJSON=n=>OB(_t.isHTMLForm(n)?new FormData(n):n);oo.getAdapter=$B.getAdapter;oo.HttpStatusCode=Pm;oo.default=oo;const{Axios:NK,AxiosError:MK,CanceledError:HK,isCancel:jK,CancelToken:RK,VERSION:$K,all:qK,Cancel:KK,isAxiosError:VK,spread:GK,toFormData:WK,AxiosHeaders:XK,HttpStatusCode:YK,formToJSON:JK,getAdapter:ZK,mergeConfig:eV}=oo,GB=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",OH=GB+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",DH="["+GB+"]["+OH+"]*",NH=new RegExp("^"+DH+"$");function WB(n,e){const t=[];let r=e.exec(n);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let i=0;i<s;i++)o.push(r[i]);t.push(o),r=e.exec(n)}return t}const r2=function(n){const e=NH.exec(n);return!(e===null||typeof e>"u")};function MH(n){return typeof n<"u"}const HH={allowBooleanAttributes:!1,unpairedTags:[]};function jH(n,e){e=Object.assign({},HH,e);const t=[];let r=!1,o=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=R_(n,s),s.err)return s}else if(n[s]==="<"){let i=s;if(s++,n[s]==="!"){s=$_(n,s);continue}else{let a=!1;n[s]==="/"&&(a=!0,s++);let A="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)A+=n[s];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),s--),!XH(A)){let u;return A.trim().length===0?u="Invalid space after '<'.":u="Tag '"+A+"' is an invalid name.",po("InvalidTag",u,Fs(n,s))}const d=qH(n,s);if(d===!1)return po("InvalidAttr","Attributes for '"+A+"' have open quote.",Fs(n,s));let c=d.value;if(s=d.index,c[c.length-1]==="/"){const u=s-c.length;c=c.substring(0,c.length-1);const h=q_(c,e);if(h===!0)r=!0;else return po(h.err.code,h.err.msg,Fs(n,u+h.err.line))}else if(a)if(d.tagClosed){if(c.trim().length>0)return po("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",Fs(n,i));if(t.length===0)return po("InvalidTag","Closing tag '"+A+"' has not been opened.",Fs(n,i));{const u=t.pop();if(A!==u.tagName){let h=Fs(n,u.tagStartPos);return po("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+A+"'.",Fs(n,i))}t.length==0&&(o=!0)}}else return po("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",Fs(n,s));else{const u=q_(c,e);if(u!==!0)return po(u.err.code,u.err.msg,Fs(n,s-c.length+u.err.line));if(o===!0)return po("InvalidXml","Multiple possible root nodes found.",Fs(n,s));e.unpairedTags.indexOf(A)!==-1||t.push({tagName:A,tagStartPos:i}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=$_(n,s);continue}else if(n[s+1]==="?"){if(s=R_(n,++s),s.err)return s}else break;else if(n[s]==="&"){const u=GH(n,s);if(u==-1)return po("InvalidChar","char '&' is not expected.",Fs(n,s));s=u}else if(o===!0&&!j_(n[s]))return po("InvalidXml","Extra text at the end",Fs(n,s));n[s]==="<"&&s--}}else{if(j_(n[s]))continue;return po("InvalidChar","char '"+n[s]+"' is not expected.",Fs(n,s))}if(r){if(t.length==1)return po("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Fs(n,t[0].tagStartPos));if(t.length>0)return po("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return po("InvalidXml","Start tag expected.",1);return!0}function j_(n){return n===" "||n==="	"||n===`
`||n==="\r"}function R_(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return po("InvalidXml","XML declaration allowed only at the start of the document.",Fs(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function $_(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const RH='"',$H="'";function qH(n,e){let t="",r="",o=!1;for(;e<n.length;e++){if(n[e]===RH||n[e]===$H)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){o=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:o}}const KH=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function q_(n,e){const t=WB(n,KH),r={};for(let o=0;o<t.length;o++){if(t[o][1].length===0)return po("InvalidAttr","Attribute '"+t[o][2]+"' has no space in starting.",lu(t[o]));if(t[o][3]!==void 0&&t[o][4]===void 0)return po("InvalidAttr","Attribute '"+t[o][2]+"' is without value.",lu(t[o]));if(t[o][3]===void 0&&!e.allowBooleanAttributes)return po("InvalidAttr","boolean attribute '"+t[o][2]+"' is not allowed.",lu(t[o]));const s=t[o][2];if(!WH(s))return po("InvalidAttr","Attribute '"+s+"' is an invalid name.",lu(t[o]));if(!r.hasOwnProperty(s))r[s]=1;else return po("InvalidAttr","Attribute '"+s+"' is repeated.",lu(t[o]))}return!0}function VH(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function GH(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,VH(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function po(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function WH(n){return r2(n)}function XH(n){return r2(n)}function Fs(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function lu(n){return n.startIndex+n[1].length}const YH={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},JH=function(n){return Object.assign({},YH,n)};let Xp;typeof Symbol!="function"?Xp="@@xmlMetadata":Xp=Symbol("XML Node Metadata");class Dl{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][Xp]={startIndex:t})}static getMetaDataSymbol(){return Xp}}function ZH(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,o=!1,s=!1,i="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(o&&Nl(n,"!ENTITY",e)){e+=7;let a,A;[a,A,e]=ej(n,e+1),A.indexOf("&")===-1&&(t[a]={regx:RegExp(`&${a};`,"g"),val:A})}else if(o&&Nl(n,"!ELEMENT",e)){e+=8;const{index:a}=rj(n,e+1);e=a}else if(o&&Nl(n,"!ATTLIST",e))e+=8;else if(o&&Nl(n,"!NOTATION",e)){e+=9;const{index:a}=tj(n,e+1);e=a}else if(Nl(n,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,i=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?o=!0:i+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const sl=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function ej(n,e){e=sl(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(n2(t),e=sl(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=dp(n,e,"entity"),e--,[t,r,e]}function tj(n,e){e=sl(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;n2(t),e=sl(n,e);const r=n.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=sl(n,e);let o=null,s=null;if(r==="PUBLIC")[e,o]=dp(n,e,"publicIdentifier"),e=sl(n,e),(n[e]==='"'||n[e]==="'")&&([e,s]=dp(n,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=dp(n,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:o,systemIdentifier:s,index:--e}}function dp(n,e,t){let r="";const o=n[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<n.length&&n[e]!==o;)r+=n[e],e++;if(n[e]!==o)throw new Error(`Unterminated ${t} value`);return e++,[e,r]}function rj(n,e){e=sl(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!n2(t))throw new Error(`Invalid element name: "${t}"`);e=sl(n,e);let r="";if(n[e]==="E"&&Nl(n,"MPTY",e))e+=6;else if(n[e]==="A"&&Nl(n,"NY",e))e+=4;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)r+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:r.trim(),index:e}}function Nl(n,e,t){for(let r=0;r<e.length;r++)if(e[r]!==n[t+r+1])return!1;return!0}function n2(n){if(r2(n))return n;throw new Error(`Invalid entity name ${n}`)}const nj=/^[-+]?0x[a-fA-F0-9]+$/,oj=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,sj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ij(n,e={}){if(e=Object.assign({},sj,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&nj.test(t))return dj(t,16);if(t.search(/.+[eE].+/)!==-1)return Aj(n,t,e);{const r=oj.exec(t);if(r){const o=r[1]||"",s=r[2];let i=lj(r[3]);const a=o?n[s.length+1]===".":n[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!a))return n;{const A=Number(t),d=String(A);if(A===0||A===-0)return A;if(d.search(/[eE]/)!==-1)return e.eNotation?A:n;if(t.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?A:n;let c=s?i:t;return s?c===d||o+c===d?A:n:c===d||c===o+d?A:n}}else return n}}const aj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Aj(n,e,t){if(!t.eNotation)return n;const r=e.match(aj);if(r){let o=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",i=r[2],a=o?n[i.length+1]===s:n[i.length]===s;return i.length>1&&a?n:i.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):t.leadingZeros&&!a?(e=(r[1]||"")+r[3],Number(e)):n}else return n}function lj(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function dj(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function cj(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class uj{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=hj,this.parseXml=mj,this.parseTextData=fj,this.resolveNameSpace=pj,this.buildAttributesMap=vj,this.isItStopNode=bj,this.replaceEntitiesValue=yj,this.readStopNodeData=zj,this.saveTextToParentTag=_j,this.addChild=wj,this.ignoreAttributesFn=cj(this.options.ignoreAttributes)}}function hj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function fj(n,e,t,r,o,s,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const a=this.options.tagValueProcessor(e,n,t,o,s);return a==null?n:typeof a!=typeof n||a!==n?a:this.options.trimValues?Om(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Om(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function pj(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const gj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function vj(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=WB(n,gj),o=r.length,s={};for(let i=0;i<o;i++){const a=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(a,e))continue;let A=r[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);const c=this.options.attributeValueProcessor(a,A,e);c==null?s[d]=A:typeof c!=typeof A||c!==A?s[d]=c:s[d]=Om(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=s,i}return s}}const mj=function(n){n=n.replace(/\r\n?/g,`
`);const e=new Dl("!xml");let t=e,r="",o="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const a=Kl(n,">",s,"Closing Tag is not closed.");let A=n.substring(s+2,a).trim();if(this.options.removeNSPrefix){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&(r=this.saveTextToParentTag(r,t,o));const d=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let c=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),t=this.tagsNodeStack.pop(),r="",s=a}else if(n[s+1]==="?"){let a=km(n,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const A=new Dl(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(t,A,o,s)}s=a.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const a=Kl(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const A=n.substring(s+4,a-2);r=this.saveTextToParentTag(r,t,o),t.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}s=a}else if(n.substr(s+1,2)==="!D"){const a=ZH(n,s);this.docTypeEntities=a.entities,s=a.i}else if(n.substr(s+1,2)==="!["){const a=Kl(n,"]]>",s,"CDATA is not closed.")-2,A=n.substring(s+9,a);r=this.saveTextToParentTag(r,t,o);let d=this.parseTextData(A,t.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):t.add(this.options.textNodeName,d),s=a+2}else{let a=km(n,s,this.options.removeNSPrefix),A=a.tagName;const d=a.rawTagName;let c=a.tagExp,u=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,o,!1));const f=t;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(t=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==e.tagname&&(o+=o?"."+A:A);const g=s;if(this.isItStopNode(this.options.stopNodes,o,A)){let w="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)s=a.closeIndex;else{const x=this.readStopNodeData(n,d,h+1);if(!x)throw new Error(`Unexpected end of ${d}`);s=x.i,w=x.tagContent}const y=new Dl(A);A!==c&&u&&(y[":@"]=this.buildAttributesMap(c,o,A)),w&&(w=this.parseTextData(w,A,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),y.add(this.options.textNodeName,w),this.addChild(t,y,o,g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));const w=new Dl(A);A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,g),o=o.substr(0,o.lastIndexOf("."))}else{const w=new Dl(A);this.tagsNodeStack.push(t),A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,g),t=w}r="",s=h}}else r+=n[s];return e.child};function wj(n,e,t,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(e.tagname,t,e[":@"]);o===!1||(typeof o=="string"&&(e.tagname=o),n.addChild(e,r))}const yj=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function _j(n,e,t,r){return n&&(r===void 0&&(r=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function bj(n,e,t){const r="*."+t;for(const o in n){const s=n[o];if(r===s||e===s)return!0}return!1}function xj(n,e,t=">"){let r,o="";for(let s=e;s<n.length;s++){let i=n[s];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===t[0])if(t[1]){if(n[s+1]===t[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Kl(n,e,t,r){const o=n.indexOf(e,t);if(o===-1)throw new Error(r);return o+e.length-1}function km(n,e,t,r=">"){const o=xj(n,e+1,r);if(!o)return;let s=o.data;const i=o.index,a=s.search(/\s/);let A=s,d=!0;a!==-1&&(A=s.substring(0,a),s=s.substring(a+1).trimStart());const c=A;if(t){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1),d=A!==o.data.substr(u+1))}return{tagName:A,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:c}}function zj(n,e,t){const r=t;let o=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=Kl(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(o--,o===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=Kl(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Kl(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Kl(n,"]]>",t,"StopNode is not closed.")-2;else{const s=km(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,t=s.closeIndex)}}function Om(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:ij(n,t)}else return MH(n)?n:""}const l0=Dl.getMetaDataSymbol();function Bj(n,e){return XB(n,e)}function XB(n,e,t){let r;const o={};for(let s=0;s<n.length;s++){const i=n[s],a=Cj(i);let A="";if(t===void 0?A=a:A=t+"."+a,a===e.textNodeName)r===void 0?r=i[a]:r+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=XB(i[a],e,A);const c=Ej(d,e);i[l0]!==void 0&&(d[l0]=i[l0]),i[":@"]?Sj(d,i[":@"],A,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,A,c)?o[a]=[d]:o[a]=d}}}return typeof r=="string"?r.length>0&&(o[e.textNodeName]=r):r!==void 0&&(o[e.textNodeName]=r),o}function Cj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function Sj(n,e,t,r){if(e){const o=Object.keys(e),s=o.length;for(let i=0;i<s;i++){const a=o[i];r.isArray(a,t+"."+a,!0,!0)?n[a]=[e[a]]:n[a]=e[a]}}}function Ej(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class Fj{constructor(e){this.externalEntities={},this.options=JH(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=jH(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new uj(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(e);return this.options.preserveOrder||o===void 0?o:Bj(o,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return Dl.getMetaDataSymbol()}}class YB{constructor(){this.partner_key="JUZFJThGJUQ0JUQ0JUNCUVBD",this.key="JUI5JTgyR3QlMTMtUSVBRiUxMyVEQUslQzclN0ZHJTBCVzQlOUUyLSUxMiUwRmMlODQlNUMlRTglQTYlRjUlMTVMJThBVTclRTIlOTElM0E=",this.parser=new Fj({ignoreAttributes:!1,trimValues:!0})}async getProduct(e){var t,r;try{const o=await oo.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Search.php",{params:{partner_key:this.partner_key,key:this.key,goodsNo:e}});if(typeof o.data!="string")throw new Error("XML    .");const i=this.parser.parse(o.data).data.return.goods_data,a=((t=i.optionName)==null?void 0:t.split("^|^").map(d=>d))||[];console.log({godoProduct:i});const A=a.map((d,c)=>{var g;const u=((g=i.optionData)==null?void 0:g.map(w=>w[`optionValue${c+1}`]).filter(w=>w))||[],h=[...new Set(u)],f=h.map(w=>{var y,x;if(c===0){const I=(((x=(y=i.optionData)==null?void 0:y.find(L=>L[`optionValue${c+1}`]===w))==null?void 0:x.optionImage)||"").split("http").pop();return I?"http"+I:""}return""});return{title:d,values:h,images:f}});return{title:i.goodsNm,description:i.goodsDescription,handle:i.goodsNo,thumbnail:i.listImageData?i.listImageData["#text"]:"",goodsNo:i.goodsNo,goodsNm:i.goodsNm,goodsDescription:i.goodsDescription.replace(/\\r\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\/g,"")||"",status:"draft",productOptionValues:A,variants:((r=i.optionData)==null?void 0:r.map(d=>{const c=Array.from({length:5},(g,w)=>d[`optionValue${w+1}`]).filter(g=>g!==void 0&&g!==""),h=(d.optionImage||"").split("http").pop(),f=h?"http"+h:"";return{title:c.join(" / "),sku:d.optionCode||`${i.goodsNo}-${c.join("-")}`,thumbnail:f,barcode:"",inventory_quantity:parseInt(d.stockCnt||"0"),price:parseInt(i.goodsPrice+d.optionPrice||"0")}}))||[],mallType:"godo5",mallProductId:e,textOptionData:i.textOptionData}}catch(o){throw console.error("Godo5 API Error:",o),new Error("5    .")}}async getAddProduct(e){try{const t=await oo.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Add_Search.php",{params:{partner_key:this.partner_key,key:this.key,addGoodsNo:e}});if(typeof t.data!="string")throw new Error("XML    .");console.log({response:t});const r=this.parser.parse(t.data);console.log({result:r});const o=r.data.return.goods_data;return console.log({addGoodsData:o}),{addGoodsNo:o.addGoodsNo,goodsNm:o.goodsNm,goodsPrice:parseInt(o.goodsPrice||"0"),stockCnt:parseInt(o.stockCnt||"0"),listImageData:o.listImageData,soldOutFl:o.soldOutFl==="y"}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}parseOptionInfo(e){try{return JSON.parse(e).map(r=>({name:r[0]||"",value:r[1]||"",code:r[2]||"",stock:r[3]||"",price:parseInt(r[3]||"0")})).filter(r=>r.name&&r.value)}catch(t){return console.error("   :",t),[]}}getOptionCode(e){try{return JSON.parse(e)[0][2]||""}catch(t){return console.error("   :",t),""}}async getOrder(e){try{const t=await oo.get("https://openhub.godo.co.kr/godomall5/order/Order_Search.php",{params:{partner_key:this.partner_key,key:this.key,orderNo:e}});if(typeof t.data!="string")throw new Error("XML    .");const o=this.parser.parse(t.data).data.return.order_data;return console.log({orderData:o}),{orderNo:o.orderNo,orderDate:o.orderDate,orderStatus:o.orderStatus,orderName:o.orderInfoData.orderName,orderEmail:o.orderInfoData.orderEmail,orderPhone:o.orderInfoData.orderPhone,receiverName:o.orderInfoData.receiverName,receiverPhone:o.orderInfoData.receiverPhone,receiverAddress:`${o.orderInfoData.receiverZonecode} ${o.orderInfoData.receiverAddress} ${o.orderInfoData.receiverAddressSub}`,totalPrice:parseInt(o.settlePrice),orderGoodsData:Array.isArray(o.orderGoodsData)?o.orderGoodsData.map(s=>({goodsNo:s.goodsNo||"",goodsNm:s.goodsNm||"",goodsType:"orderGoods",goodsCnt:s.goodsCnt||0,goodsPrice:s.goodsPrice||0,listImageData:s.listImageData||"",exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[],addGoodsData:Array.isArray(o.addGoodsData)?o.addGoodsData.map(s=>({goodsNm:s.goodsNm,addGoodsNo:s.addGoodsNo,goodsType:"addGoods",goodsCnt:parseInt(String(s.goodsCnt)),goodsPrice:parseInt(String(s.goodsPrice)),listImageData:s.listImageData,exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[]}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}}new YB;async function Ij(n,e){const t=[],r=n.filter(o=>o.product&&o.product.mall_type==="godo5"&&o.product.mall_product_id);if(r.length===0)return console.log("5  ."),t;console.log(`${r.length} 5  .`);try{const o=document.createElement("form");o.method="POST",o.action="/order/cart_ps.php",o.style.display="none";const s=(i,a)=>{const A=document.createElement("input");A.type="hidden",A.name=i,A.value=a,o.appendChild(A)};s("mode","cartIn"),s("cartMode","d"),s("useBundleGoods","1"),s("scmNo","1");for(const i of r)try{const A=i.product.mall_product_id,d=i.idx;let c=1;i.isAdditionalCost?c=1:c=Array.isArray(i.items)?i.items.reduce((f,g)=>f+(g.quantity||0),0):1;let u="";e&&d!==void 0&&(i.isAdditionalCost?u=`${e}-add-${i.id}`:u=`${e}-${d}`);const h=await Qj(i.product.mall_product_id);console.log(`   (${i.isAdditionalCost?"":""}):`,h),s("goodsNo[]",A),s("goodsCnt[]",c.toString()),s("optionFl[]","n"),s("displayOptionkey[]",""),s("goodsPriceSum[]","0"),s("addGoodsPriceSum[]","0"),u&&h.textOptionData.optionName==="odiz"&&s(`optionText[${d}][${h.textOptionData.sno}]`,u),t.push(A)}catch(a){console.error("    :",a)}return document.body.appendChild(o),console.log(o),o.submit(),console.log(`${r.length} 5     `),t}catch(o){return console.error("    :",o),t}}async function Uj(n){var t,r,o,s;const e={success:!1,submittedOrders:[]};try{const i=((t=n[0])==null?void 0:t.estimate_id)||((s=(o=(r=n[0])==null?void 0:r.items)==null?void 0:o[0])==null?void 0:s.estimate_id),a=await Ij(n,i);a.length>0&&(e.submittedOrders.push({mallType:"godo5",productIds:a}),e.success=!0)}catch(i){console.error("    :",i)}return e}async function Qj(n){return await new YB().getProduct(n)}function Tj(n,e,t,r){_(e,""),_(t,""),_(r,"")}var Lj=(n,e,t)=>{_(e,""),_(t,"")},Pj=V('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600 odz-transition-colors"><!></button>'),kj=V('<button type="button" class="odz-btn odz-btn-outline odz-btn-sm sm:odz-btn-md"></button>'),Oj=V('<div class="odz-mt-3 odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-indigo-600"> </span>  .</div>'),Dj=V('<button class="odz-btn odz-btn-outline odz-ml-2"></button>'),Nj=(n,e)=>e("1week"),Mj=(n,e)=>e("1month"),Hj=(n,e)=>e("6months"),jj=(n,e)=>e("1year"),Rj=V('<div class="odz-text-xs odz-text-gray-500 odz-mt-2"> </div>'),$j=V('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm"> </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button> <!></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"><button class="odz-btn odz-btn-xs odz-btn-outline">1</button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline">6</button> <button class="odz-btn odz-btn-xs odz-btn-outline">1</button></div> <!></div></fieldset></div></div>'),qj=V('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm">  </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button></div></div> <div class="odz-text-xs odz-text-gray-500 odz-mt-2">* /      .</div></div></fieldset></div></div>'),Kj=(n,e)=>e("current"),Vj=(n,e)=>e("previous"),Gj=V('<div class="odz-flex odz-gap-2 odz-mb-4 odz-border-b odz-border-gray-200"><button type="button"> </button> <button type="button">  (2026 )</button></div>'),Wj=V('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),Xj=V('<div class="odz-alert odz-alert-error"><span> </span></div>'),Yj=V('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8"><!></div>'),Jj=V('<img loading="lazy" class="odz-w-24 odz-h-24 odz-rounded-xl odz-object-cover odz-ring-2 odz-ring-gray-100 odz-transition-transform odz-duration-300 group-hover:odz-scale-105"> <div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100" style="display: none;"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>',1),Zj=V('<div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),eR=V('<div class="odz-absolute -odz-bottom-2 -odz-right-2 odz-bg-indigo-600 odz-text-white odz-text-xs odz-font-bold odz-px-2.5 odz-py-1 odz-rounded-full odz-shadow-lg odz-ring-2 odz-ring-white"> </div>'),tR=V('<p class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-truncate"> <!></p>'),rR=V('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-medium odz-border odz-border-indigo-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> </span>'),nR=V('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-amber-50 odz-text-amber-700 odz-text-xs odz-font-medium odz-border odz-border-amber-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </span>'),oR=(n,e,t,r)=>{l(e)&&t(l(r).id)},sR=(n,e,t)=>e(l(t)),iR=ag('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>'),aR=ag('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>',1),AR=(n,e,t)=>e(l(t)),lR=V('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),dR=(n,e,t)=>e(l(t)),cR=V('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> </button>'),uR=V('<article class="odz-group odz-relative odz-flex odz-flex-col odz-overflow-hidden odz-bg-white odz-border odz-border-gray-200 odz-rounded-2xl odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all odz-duration-300 hover:odz-shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:odz-border-indigo-200"><div class="odz-absolute odz-top-4 odz-right-4 odz-z-10"><span><svg class="odz-w-2 odz-h-2 odz-fill-current svelte-ryvuky" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" class="svelte-ryvuky"></circle></svg> </span></div> <div class="odz-flex odz-flex-col lg:odz-flex-row"><div class="odz-flex odz-flex-1 odz-flex-col odz-p-6"><div class="odz-flex odz-items-start odz-gap-5 odz-mb-5"><div class="odz-relative odz-flex-shrink-0"><!> <!></div> <div class="odz-flex-1 odz-min-w-0 odz-pt-1"><h3 class="odz-text-xl odz-font-bold odz-text-slate-900 odz-mb-2 odz-line-clamp-2 odz-leading-tight"> </h3> <!> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mb-5"><!> <!></div> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-amber-100 odz-text-amber-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-3 odz-p-5 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-xl odz-border odz-border-slate-200"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5 odz-col-span-2 sm:odz-col-span-1"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"> </span> <span class="odz-text-lg odz-font-bold odz-text-indigo-600"> </span></div></div></div> <div class="odz-flex odz-flex-col odz-gap-4 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-gray-50 odz-border-t lg:odz-border-t-0 lg:odz-border-l odz-border-gray-200 lg:odz-w-56 odz-justify-between"><div class="odz-flex odz-flex-col odz-gap-2"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"> </span> <button type="button"><svg class="odz-w-4 odz-h-4 svelte-ryvuky" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" class="svelte-ryvuky"></path></svg> </button></div> <div class="odz-flex odz-flex-col odz-gap-2.5"><button class="odz-btn odz-btn-primary odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <!></div></div></div></article>'),hR=V('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),fR=V('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),pR=V('<div class="odz-alert odz-alert-error"><span> </span></div>'),gR=V('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),vR=(n,e,t)=>{_(e,""),_(t,"")},mR=V('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600"><!></button>'),wR=V('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),yR=V('<span class="odz-text-gray-300">|</span> <span> </span>',1),_R=V('<img class="odz-w-12 odz-h-12 odz-rounded odz-object-cover odz-flex-shrink-0">'),bR=V('<div class="odz-w-12 odz-h-12 odz-rounded odz-bg-gray-200 odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><!></div>'),xR=(n,e,t)=>e(l(t).sno),zR=V('<div class="odz-flex odz-items-center odz-gap-3 odz-p-3 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-gray-100"><!> <div class="odz-flex-1 odz-min-w-0"><p class="odz-text-sm odz-font-medium odz-text-slate-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500 odz-truncate"> </p></div> <button type="button" class="odz-btn odz-btn-xs odz-btn-outline odz-flex-shrink-0"><!> </button></div>'),BR=V('<div class="odz-px-5 odz-mb-4"><div class="odz-text-xs odz-font-medium odz-text-gray-500 odz-mb-2 odz-flex odz-items-center odz-gap-1"><!> </div> <div class="odz-flex odz-flex-col odz-gap-2"></div></div>'),CR=V("<span> </span>"),SR=(n,e,t)=>e(l(t)),ER=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span> ...',1),FR=V("<!> ",1),IR=V('<div class="odz-card odz-bg-white odz-border odz-border-gray-200 odz-shadow-sm odz-rounded-2xl odz-overflow-hidden"><div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-pt-5"><span> </span> <span class="odz-text-sm odz-text-gray-500"> </span></div> <div class="odz-p-5"><h3 class="odz-font-bold odz-text-lg odz-text-slate-900 odz-mb-1"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-3"> </p> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><span> </span> <!></div></div> <!> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mx-5 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-sky-100 odz-text-sky-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-py-4 odz-border-t odz-border-gray-100 odz-bg-gray-50/50"><div class="odz-text-sm odz-text-gray-500"><!></div> <div class="odz-text-right"><span class="odz-text-xs odz-text-gray-500"></span> <p class="odz-text-lg odz-font-bold odz-text-primary"> </p></div></div> <div class="odz-flex odz-justify-end odz-px-5 odz-pb-5"><button type="button" class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!></button></div></div>'),UR=V('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),QR=V(`<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="search" placeholder=", , , , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10" autocomplete="off" readonly=""> <!></div></div></div></div> <div class="odz-bg-emerald-50 odz-border odz-border-emerald-200 odz-rounded-lg odz-p-4 odz-mb-4"><p class="odz-text-sm odz-text-emerald-800"><strong></strong>    <strong> </strong>
          .</p></div> <!>`,1),TR=(n,e)=>{n.key==="Enter"&&e()},LR=V('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),PR=V('<div class="odz-fixed odz-inset-0 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50 odz-z-50"><div class="odz-bg-white odz-p-6 odz-rounded-lg odz-shadow-xl"><div class="odz-flex odz-flex-col odz-items-center"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-mb-4"></span> <p class="odz-text-lg odz-font-medium">  ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2">  </p></div></div></div>'),kR=V('<div class="odz-w-full"><h2 class="odz-text-xl odz-font-bold odz-mb-4"> </h2> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="search" placeholder=", , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10" autocomplete="off" readonly=""> <!></div> <div class="odz-relative odz-min-w-[140px]"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <select class="odz-select odz-select-bordered odz-w-full odz-pl-9"><option> </option><option></option><option></option><option></option><option></option><option></option></select></div> <!></div> <!></div></div> <!> <!> <!> <!> <!></div> <!> <dialog id="password_confirm_modal"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg odz-mb-4">  </h3> <p class="odz-text-sm odz-mb-4">     .</p> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text"></span></label> <input type="password" placeholder=" "> <!></div> <div class="odz-modal-action"><button class="odz-btn odz-btn-outline"></button> <button class="odz-btn odz-btn-primary"></button></div></div> <div class="odz-modal-backdrop"></div></dialog> <!>',1);function OR(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(gi,"$shopStore",t),s=()=>dn(Vl,"$customerStore",t),i=Ie(),a=Ie();let A=gt(e,"openEstimateModal",8,()=>{}),d=Ie([]),c=Ie(!0),u=Ie(null),h,f=Ie(!1),g=Ie(null),w=Ie(""),y=Ie(""),x=Ie(null),C=Ie(""),I=Ie(""),M=Ie(""),L=Ie(!1),ee=Ie(!1),W=Ie(""),R=Ie(""),Z=Ie(!1),Be=Ie(!1),N=Ie(""),k=null,J=Ie(""),ne=Ie(!1),ge=Ie(!1),pe=null,xe=Ie(null),te=Ie("current"),se=Ie([]),oe=Ie(!1),me=Ie(null),B=!1,F=Ie(""),E=Ie(""),T=Ie(null),P=Ie(!1),O=Ie(null);const j={thumbnail:null,productNames:[],itemCount:0,totalQuantity:0};let $={};$n(async()=>{try{if(l(L)){_(c,!0);try{console.log("[ODIZ Debug]   "),console.log("[ODIZ Debug] shop_id:",o().id),console.log("[ODIZ Debug] sess:",o().sess),console.log("[ODIZ Debug] mallType:",s().mallType);const qe=await pt.from("estimates").select("*").eq("shop_id",o().id).is("customer_id",null).eq("sess",o().sess).neq("status","temp").order("created_at",{ascending:!1});if(qe.error)throw qe.error;_(d,qe.data||[]),s().mallType&&s().mallType.trim()!==""&&_(d,l(d).filter(vt=>vt.mall_type===s().mallType)),await Ee(l(d)),h=Q0(o().sess,o().id,async vt=>{var $t,Rt,Mt,Wt,Kt,_r;vt.eventType==="UPDATE"?(($t=vt.new)==null?void 0:$t.status)!=="temp"?(_(d,l(d).map(Br=>Br.id===vt.new.id?{...Br,...vt.new}:Br)),await Me((Rt=vt.new)==null?void 0:Rt.id)):(_(d,l(d).filter(Br=>Br.id!==vt.new.id)),ze((Mt=vt.new)==null?void 0:Mt.id)):vt.eventType==="INSERT"?((Wt=vt.new)==null?void 0:Wt.status)!=="temp"&&(!s().mallType||s().mallType.trim()===""||vt.new.mall_type===s().mallType)&&(_(d,[vt.new,...l(d)]),await Me((Kt=vt.new)==null?void 0:Kt.id)):vt.eventType==="DELETE"&&(_(d,l(d).filter(Br=>Br.id!==vt.old.id)),ze((_r=vt.old)==null?void 0:_r.id))},void 0)}catch(qe){console.error("    :",qe),_(d,[])}_(c,!1)}else{const qe=new Date,vt=new Date(qe);vt.setMonth(vt.getMonth()-1),_(W,Y(vt)),_(R,Y(qe)),_(Z,!0);const{getEstimatesWithDateFilter:$t}=await ks(async()=>{const{getEstimatesWithDateFilter:Rt}=await Promise.resolve().then(()=>$h);return{getEstimatesWithDateFilter:Rt}},void 0);_(d,await $t(o().sess,o().customer_id,o().id,l(W),l(R))),await Ee(l(d)),h=Q0(o().sess,o().id,async Rt=>{var Mt,Wt,Kt,_r,Br,bn;Rt.eventType==="UPDATE"?((Mt=Rt.new)==null?void 0:Mt.status)!=="temp"?(_(d,l(d).map(Nt=>Nt.id===Rt.new.id?{...Nt,...Rt.new}:Nt)),await Me((Wt=Rt.new)==null?void 0:Wt.id)):(_(d,l(d).filter(Nt=>Nt.id!==Rt.new.id)),ze((Kt=Rt.new)==null?void 0:Kt.id)):Rt.eventType==="INSERT"?((_r=Rt.new)==null?void 0:_r.status)!=="temp"&&(_(d,[Rt.new,...l(d)]),await Me((Br=Rt.new)==null?void 0:Br.id)):Rt.eventType==="DELETE"&&(_(d,l(d).filter(Nt=>Nt.id!==Rt.old.id)),ze((bn=Rt.old)==null?void 0:bn.id))},o().customer_id)}}catch(qe){_(u,qe.message||"     ."),$={}}finally{_(c,!1)}}),as(()=>{h&&h.unsubscribe()});function H(qe){if(!qe)return"";const vt=new Date(qe);return`${vt.getFullYear()}-${String(vt.getMonth()+1).padStart(2,"0")}-${String(vt.getDate()).padStart(2,"0")}`}function Y(qe){const vt=qe.getFullYear(),$t=String(qe.getMonth()+1).padStart(2,"0"),Rt=String(qe.getDate()).padStart(2,"0");return`${vt}-${$t}-${Rt}`}function Ce(qe){const vt=new Date,$t=Y(vt);let Rt=new Date(vt);switch(qe){case"1week":Rt.setDate(Rt.getDate()-7);break;case"1month":Rt.setMonth(Rt.getMonth()-1);break;case"6months":Rt.setMonth(Rt.getMonth()-6);break;case"1year":Rt.setFullYear(Rt.getFullYear()-1);break}_(W,Y(Rt)),_(R,$t)}function fe(qe){return{1:"",2:"",3:"",4:"",5:"",6:""}[qe]||`${qe}`}function Le(qe){return{1:"odz-badge-warning",2:"odz-badge-info",3:"odz-badge-success",4:"odz-badge-primary",5:"odz-badge-neutral",6:"odz-badge-error"}[qe]||"odz-badge-ghost"}function X(qe){return!qe||qe==="0000-00-00 00:00:00"?"-":new Date(qe).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})}function D(qe){const vt=typeof qe=="string"?parseFloat(qe):qe;return isNaN(vt)?"0":vt.toLocaleString("ko-KR")+""}function Ae(qe){return!qe.imageStorage||!qe.imagePath||!qe.imageName?"":`${qe.imageStorage}/${qe.imagePath}${qe.imageName}`}function ye(qe){try{if(!qe)return{summary:"-",totalQty:0};const vt=qe.replace(/\\"/g,'"'),$t=JSON.parse(vt);if(!Array.isArray($t)||$t.length===0)return{summary:"-",totalQty:0};const Rt=$t.reduce((_r,Br)=>_r+(Br.ea||0),0),Mt=$t[0],Wt=[Mt.optionValue1,Mt.optionValue2].filter(Boolean).join(" / ");return{summary:$t.length>1?`${Wt}  ${$t.length-1} `:Wt,totalQty:Rt}}catch{return{summary:"-",totalQty:0}}}function ae(qe){const vt=`http://dantee771.godomall.com/estimate/estimate_goods_design.php?estimateGoodsSno=${qe}`;window.open(vt,`design_${qe}`,"width=900,height=700,scrollbars=yes,resizable=yes")}function le(qe){const vt=new Set;let $t=null,Rt=0,Mt=0;return(qe||[]).forEach((Kt,_r)=>{var Nt,br;if(!Kt)return;Mt+=1,Rt+=Kt.quantity||0;const Br=(Nt=Kt.product)==null?void 0:Nt.title;Br&&vt.add(Br);const bn=(br=Kt.product)==null?void 0:br.thumbnail;!$t&&bn&&($t=bn)}),{thumbnail:$t,productNames:Array.from(vt),itemCount:Mt,totalQuantity:Rt}}async function Ee(qe){const vt=qe.map($t=>$t.id).filter($t=>!!$t);if(vt.length===0){$={};return}try{const{data:$t,error:Rt}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).in("estimate_id",vt);if(Rt){console.error("    :",Rt);return}const Mt={};($t||[]).forEach(Kt=>{Kt!=null&&Kt.estimate_id&&(Mt[Kt.estimate_id]||(Mt[Kt.estimate_id]=[]),Mt[Kt.estimate_id].push(Kt))});const Wt={};vt.forEach(Kt=>{Wt[Kt]=le(Mt[Kt])}),$=Wt}catch($t){console.error("     :",$t)}}async function Me(qe){if(qe)try{const{data:vt,error:$t}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).eq("estimate_id",qe);if($t){console.error("[ERROR]      :",$t),console.error("[ERROR] estimateId:",qe);return}const Rt=le(vt);$={...$,[qe]:Rt}}catch(vt){console.error("[ERROR]       :",vt),console.error("[ERROR] estimateId:",qe)}}function ze(qe){if(!qe)return;const{[qe]:vt,...$t}=$;$=$t}function Se(qe){return qe&&$[qe]||j}function ve(qe){switch(qe){case"pending":return"";case"progress":return"";case"completed":return"";case"temp":return"";case"canceled":return"";case"hold":return"";default:return""}}function Oe(qe){switch(qe){case"pending":return"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200";case"progress":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"canceled":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";case"hold":case"temp":return"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function Ne(qe){switch(qe){case"none":return" ";case"waiting":return" ";case"processing":return" ";case"confirming":return" ";case"completed":return" ";case"rejected":return" ";default:return"-"}}function _e(qe){switch(qe){case"none":return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200";case"waiting":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"processing":return"odz-bg-indigo-100 odz-text-indigo-700 odz-border-indigo-200";case"confirming":return"odz-bg-purple-100 odz-text-purple-700 odz-border-purple-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"rejected":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function q(qe){_(g,qe),_(f,!0)}async function de(){_(c,!0),_(u,null),_(ee,!0);try{_(d,await p5(o().id,l(I),l(M),o().sess,s().mallType)),await Ee(l(d)),l(d).length===0&&(!l(I)&&!l(M)?_(u,"   ."):_(u,"    ."))}catch(qe){_(u,qe.message||"    ."),_(d,[]),$={}}finally{_(c,!1)}}async function ue(){if(!l(W)&&!l(R)){_(u,"   .");return}_(c,!0),_(u,null),_(Z,!0);try{const{getEstimatesWithDateFilter:qe}=await ks(async()=>{const{getEstimatesWithDateFilter:vt}=await Promise.resolve().then(()=>$h);return{getEstimatesWithDateFilter:vt}},void 0);_(d,await qe(o().sess,o().customer_id,o().id,l(W),l(R))),await Ee(l(d)),l(d).length===0&&_(u,"   .")}catch(qe){_(u,qe.message||"    ."),_(d,[]),$={}}finally{_(c,!1)}}async function Fe(){_(u,null);const qe=new Date,vt=new Date(qe);vt.setMonth(vt.getMonth()-1),_(W,Y(vt)),_(R,Y(qe)),_(Z,!0),_(c,!0);try{const{getEstimatesWithDateFilter:$t}=await ks(async()=>{const{getEstimatesWithDateFilter:Rt}=await Promise.resolve().then(()=>$h);return{getEstimatesWithDateFilter:Rt}},void 0);_(d,await $t(o().sess,o().customer_id,o().id,l(W),l(R))),await Ee(l(d))}catch($t){_(u,$t.message||"     ."),$={}}finally{_(c,!1)}}async function Pe(){_(c,!0),_(u,null);try{const qe=new Date,vt=new Date(qe);vt.setMonth(vt.getMonth()-1),_(W,Y(vt)),_(R,Y(qe)),_(Z,!0);const{getEstimatesWithDateFilter:$t}=await ks(async()=>{const{getEstimatesWithDateFilter:Rt}=await Promise.resolve().then(()=>$h);return{getEstimatesWithDateFilter:Rt}},void 0);_(d,await $t(o().sess,o().customer_id,o().id,l(W),l(R))),await Ee(l(d)),console.log("[loadEstimates]    -  :",l(d).length)}catch(qe){console.error("[loadEstimates] :",qe),_(u,qe.message||"     ."),$={}}finally{_(c,!1)}}function it(qe){l(L)&&qe.status==="pending"?(k=qe,_(N,""),_(J,""),_(Be,!0)):window.location.href=`?mode=register&estimateId=${qe.id}`}async function We(){if(!k||!l(N).trim()){_(J," .");return}try{const{data:qe,error:vt}=await pt.from("estimates").select("id").eq("id",k.id).eq("password",l(N)).single();if(vt||!qe){_(J,"  .");return}_(Be,!1),A()(!0,k)}catch(qe){_(J,"    ."),console.error("  :",qe)}}function je(){_(Be,!1),_(N,""),_(J,""),k=null}async function he(qe){if(!(!qe||!qe.id))try{_(ne,!0),_(xe,qe.id);const vt=await g5(qe.id);let $t=[...vt];const Rt=await w5(qe.id);if((Rt==null?void 0:Rt.length)>0){const Wt=vt.length>0?Math.max(...vt.map(_r=>_r.idx||0)):0,Kt=Rt.map((_r,Br)=>({..._r,idx:Wt+Br+1,items:_r.items.map(bn=>({...bn,idx:Wt+Br+1}))}));$t=[...$t,...Kt]}if(!$t.some(Wt=>Wt.product&&Wt.product.mall_type==="godo5"&&Wt.product.mall_product_id)){alert("5    .");return}if(pe=await Uj($t),pe.success){const Wt=pe.submittedOrders.reduce((Kt,_r)=>Kt+_r.productIds.length,0);alert(` .  ${Wt}  .`)}else alert("  .   .")}catch(vt){console.error("    :",vt),alert("    : "+vt.message)}finally{_(ne,!1)}}async function De(qe){if(qe!=null&&qe.id)try{_(ge,!0),_(xe,qe.id);const vt=await S5(qe.id);if(vt.success&&vt.newEstimateId){const $t=await td(vt.newEstimateId);$t&&(alert(" ."),A()(!0,$t))}else alert(vt.error||"    .")}catch(vt){console.error("   :",vt),alert("    .")}finally{_(ge,!1),_(xe,null)}}async function ot(qe){var Wt;if(!(qe!=null&&qe.estimateNo))return;const vt=document.getElementById("odiz-shop-id"),$t=vt==null?void 0:vt.value;if(console.log("[handleLegacyReorder]  - shopIdElement:",vt,"shopId:",$t),!$t||$t.trim()===""){console.error("[handleLegacyReorder] shopId . HTML   :",{elementExists:!!vt,value:$t}),alert(`    .
(    )`);return}const Rt=(Wt=document.getElementById("odiz-customer-id"))==null?void 0:Wt.value,Mt=Rt&&Rt.trim()!==""?Rt:null;console.log("[handleLegacyReorder] shopId:",$t,"customerId:",Mt);try{_(P,!0),_(O,qe.estimateNo);const Kt=await T5(qe,$t,Mt);Kt.success?(alert(` .
 : ${Kt.newEstimateNo}`),_(te,"current"),await Pe()):alert(Kt.error||"    .")}catch(Kt){console.error("[handleLegacyReorder] :",Kt),alert("    .")}finally{_(P,!1),_(O,null)}}async function Ge(){var Rt,Mt,Wt;const qe=(Rt=document.getElementById("odiz-customer-id"))==null?void 0:Rt.value,vt=(Mt=document.getElementById("odiz-customer-name"))==null?void 0:Mt.value,$t=(Wt=document.getElementById("odiz-customer-phone"))==null?void 0:Wt.value;if(console.log("[ODIZ Debug]    "),console.log("[ODIZ Debug] customerId:",qe),console.log("[ODIZ Debug] customerName:",vt),console.log("[ODIZ Debug] customerPhone:",$t),!qe&&!vt&&!$t){_(me,"    ."),alert("    .");return}_(oe,!0),_(me,null);try{const Kt=`https://dantee7728.godomall.com/proxy/api_proxy.php?endpoint=estimate/get_data&memId=${encodeURIComponent(qe)}&orderName=${encodeURIComponent(vt)}&orderPhone=${encodeURIComponent($t)}`;console.log("[ODIZ Debug] API URL:",Kt);const _r=await fetch(Kt);if(!_r.ok)throw new Error(`API  : ${_r.status}`);const Br=await _r.json();console.log("[ODIZ Debug] API :",Br),_(se,Array.isArray(Br)?Br:Br.data||Br.estimates||[Br]),B=!0}catch(Kt){console.error("Previous estimates API error:",Kt),_(me,"     .")}finally{_(oe,!1)}}async function Je(qe){_(te,qe),qe==="previous"&&!B&&await Ge()}tr(()=>(l(x),l(w)),()=>{l(x)&&clearTimeout(l(x)),_(x,setTimeout(()=>{_(y,l(w))},300))}),tr(()=>(l(te),l(d),l(C),l(y)),()=>{_(i,(l(te),l(d).filter(qe=>{if(l(C)&&qe.status!==l(C))return!1;if(l(y)){const vt=l(y).toLowerCase().trim(),Rt=Se(qe.id).productNames.join(" ").toLowerCase();return String(qe.estimate_no||"").toLowerCase().includes(vt)||String(qe.name||"").toLowerCase().includes(vt)||String(qe.organization_name||"").toLowerCase().includes(vt)||String(qe.order_name||"").toLowerCase().includes(vt)||String(qe.order_phone||"").includes(vt)||Rt.includes(vt)}return!0})))}),tr(()=>(l(T),l(F)),()=>{l(T)&&clearTimeout(l(T)),_(T,setTimeout(()=>{_(E,l(F))},300))}),tr(()=>(l(se),l(E)),()=>{_(a,l(se).filter(qe=>{var vt,$t,Rt,Mt,Wt,Kt;if(qe.state!==3)return!1;if(l(E)){const _r=l(E).toLowerCase().trim();return String(qe.estimateNo).includes(_r)||((vt=qe.estimateNm)==null?void 0:vt.toLowerCase().includes(_r))||(($t=qe.ex1)==null?void 0:$t.toLowerCase().includes(_r))||((Rt=qe.receiverName)==null?void 0:Rt.toLowerCase().includes(_r))||((Mt=qe.memNm)==null?void 0:Mt.toLowerCase().includes(_r))||((Wt=qe.receiverCellPhone)==null?void 0:Wt.includes(_r))||((Kt=qe.orderGoodsNm)==null?void 0:Kt.toLowerCase().includes(_r))}return!0}))}),tr(()=>o(),()=>{_(L,!o().customer_id)}),bo(),nn();var rt=kR(),ht=lt(rt),$e=z(m(ht),2),st=m($e),Bt=m(st),Ct=m(Bt),Tt=m(Ct),wt=m(Tt);mp(wt,{size:18});var Ze=z(Tt,2),kt=z(Ze,2);{var It=qe=>{var vt=Pj();vt.__click=[Lj,w,y];var $t=m(vt);ed($t,{size:16}),U(qe,vt)};be(kt,qe=>{l(w)&&qe(It)})}var jt=z(Ct,2),et=m(jt),yt=m(et);fE(yt,{size:16});var mt=z(et,2);ke(()=>{l(C),Ou(()=>{})});var Vt=m(mt);Vt.value=((Vt.__value="")==null,"");var ir=z(Vt);ir.value=(ir.__value="pending")==null?"":"pending";var qt=z(ir);qt.value=(qt.__value="progress")==null?"":"progress";var Gt=z(qt);Gt.value=(Gt.__value="completed")==null?"":"completed";var ar=z(Gt);ar.value=(ar.__value="hold")==null?"":"hold";var St=z(ar);St.value=(St.__value="canceled")==null?"":"canceled";var ft=z(jt,2);{var Dt=qe=>{var vt=kj();vt.__click=[Tj,w,y,C],U(qe,vt)};be(ft,qe=>{(l(w)||l(C))&&qe(Dt)})}var Yt=z(Bt,2);{var dr=qe=>{var vt=Oj(),$t=m(vt),Rt=m($t);ke(()=>Qe(Rt,l(i).length)),U(qe,vt)};be(Yt,qe=>{!l(c)&&(l(w)||l(C))&&qe(dr)})}var ur=z($e,2);{var hr=qe=>{var vt=$j(),$t=m(vt),Rt=m($t),Mt=z(m(Rt),2),Wt=m(Mt),Kt=m(Wt),_r=z(m(Kt),2),Br=z(Kt,2),bn=z(m(Br),2),Nt=z(Br,2),br=m(Nt);br.__click=ue;var $r=z(br,2);{var Mn=en=>{var Do=Dj();Do.__click=Fe,ke(()=>Do.disabled=l(c)),U(en,Do)};be($r,en=>{l(Z)&&en(Mn)})}var Wo=z(Wt,2),Mr=m(Wo);Mr.__click=[Nj,Ce];var Kn=z(Mr,2);Kn.__click=[Mj,Ce];var xo=z(Kn,2);xo.__click=[Hj,Ce];var Ht=z(xo,2);Ht.__click=[jj,Ce];var mi=z(Wo,2);{var Jn=en=>{var Do=Rj(),zs=m(Do);ke(()=>Qe(zs,`*  ${l(W)||""} ~ ${l(R)||""} 
                 `)),U(en,Do)};be(mi,en=>{l(Z)&&en(Jn)})}ke(()=>{br.disabled=l(c),Mr.disabled=l(c),Kn.disabled=l(c),xo.disabled=l(c),Ht.disabled=l(c)}),Fr(_r,()=>l(W),en=>_(W,en)),Fr(bn,()=>l(R),en=>_(R,en)),U(qe,vt)};be(ur,qe=>{l(L)||qe(hr)})}var vr=z(ur,2);{var fn=qe=>{var vt=qj(),$t=m(vt),Rt=m($t),Mt=z(m(Rt),2),Wt=m(Mt),Kt=m(Wt),_r=z(m(Kt),2),Br=z(Kt,2),bn=z(m(Br),2),Nt=z(Br,2),br=m(Nt);br.__click=de,Fr(_r,()=>l(I),$r=>_(I,$r)),Fr(bn,()=>l(M),$r=>_(M,$r)),U(qe,vt)};be(vr,qe=>{l(L)&&qe(fn)})}var pn=z(vr,2);{var kr=qe=>{var vt=Gj(),$t=m(vt);$t.__click=[Kj,Je];var Rt=z($t,2);Rt.__click=[Vj,Je],ke(()=>{Tr($t,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(te)==="current"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`),Tr(Rt,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(te)==="previous"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`)}),U(qe,vt)};be(pn,qe=>{l(L)||qe(kr)})}var wr=z(pn,2);{var Vr=qe=>{var vt=Lt(),$t=lt(vt);{var Rt=Wt=>{var Kt=Wj();U(Wt,Kt)},Mt=Wt=>{var Kt=Lt(),_r=lt(Kt);{var Br=Nt=>{var br=Xj(),$r=m(br),Mn=m($r);ke(()=>Qe(Mn,l(u))),U(Nt,br)},bn=Nt=>{var br=Lt(),$r=lt(br);{var Mn=Mr=>{var Kn=Yj(),xo=m(Kn);{var Ht=Jn=>{var en=mn("    .");U(Jn,en)},mi=Jn=>{var en=Lt(),Do=lt(en);{var zs=ds=>{var ei=mn("   .    .");U(ds,ei)},wi=ds=>{var ei=mn("  .");U(ds,ei)};be(Do,ds=>{l(L)?ds(zs):ds(wi,!1)},!0)}U(Jn,en)};be(xo,Jn=>{l(L)&&l(ee)?Jn(Ht):Jn(mi,!1)})}U(Mr,Kn)},Wo=Mr=>{var Kn=hR();nr(Kn,5,()=>l(i),xo=>xo.id??xo.created_at,(xo,Ht)=>{var mi=uR();const Jn=at(()=>Se(l(Ht).id)),en=at(()=>l(Ht).design_confirm==="confirming"||l(Ht).design_confirm==="completed");var Do=m(mi),zs=m(Do),wi=z(m(zs)),ds=z(Do,2),ei=m(ds),BA=m(ei),CA=m(BA),Aa=m(CA);{var Oi=Lr=>{var tn=Jj(),gn=lt(tn);ke(()=>{cr(gn,"src",l(Jn).thumbnail),cr(gn,"alt",(l(Ht).name||"")+"  ")}),At("error",gn,Io=>{Io.currentTarget.style.display="none";const kn=Io.currentTarget.nextElementSibling;kn&&(kn.style.display="flex")}),Ub(gn),U(Lr,tn)},yi=Lr=>{var tn=Zj();U(Lr,tn)};be(Aa,Lr=>{l(Jn).thumbnail?Lr(Oi):Lr(yi,!1)})}var _l=z(Aa,2);{var Vn=Lr=>{var tn=eR(),gn=m(tn);ke(()=>Qe(gn,`${l(Jn).totalQuantity??""}`)),U(Lr,tn)};be(_l,Lr=>{l(Jn).totalQuantity>0&&Lr(Vn)})}var cs=z(CA,2),ti=m(cs),ln=m(ti),la=z(ti,2);{var ja=Lr=>{var tn=tR(),gn=m(tn),Io=z(gn);{var kn=Uo=>{var to=mn();ke(()=>Qe(to,` ${l(Jn).productNames.length-1}`)),U(Uo,to)};be(Io,Uo=>{l(Jn).productNames.length>1&&Uo(kn)})}ke(()=>Qe(gn,l(Jn).productNames[0])),U(Lr,tn)};be(la,Lr=>{l(Jn).productNames.length>0&&Lr(ja)})}var da=z(la,2),Ns=z(m(da)),Ms=z(BA,2),SA=m(Ms);{var ri=Lr=>{var tn=rR(),gn=z(m(tn));ke(()=>Qe(gn,` ${l(Ht).estimate_no??""}`)),U(Lr,tn)};be(SA,Lr=>{l(Ht).estimate_no&&Lr(ri)})}var us=z(SA,2);{var Ra=Lr=>{var tn=nR(),gn=z(m(tn));ke(Io=>Qe(gn,`  ${Io??""}`),[()=>H(l(Ht).pref_delivery_date)],at),U(Lr,tn)};be(us,Lr=>{l(Ht).pref_delivery_date&&Lr(Ra)})}var ni=z(Ms,2),EA=m(ni),Di=m(EA),FA=m(Di);bw(FA,{size:18});var $a=z(Di,2),qa=z(m($a),2),IA=m(qa),_i=z(EA,2),ca=m(_i),ua=m(ca);wp(ua,{size:18});var Ka=z(ca,2),UA=z(m(Ka),2),ha=m(UA),Ni=z(_i,2),fa=m(Ni),bi=m(fa);xw(bi,{size:18});var pa=z(fa,2),b=z(m(pa),2),K=m(b),Te=z(ni,2),He=m(Te),nt=z(m(He),2),xt=m(nt),Pt=z(He,2),Zt=z(m(Pt),2),fr=m(Zt),Ur=z(Pt,2),Qr=z(m(Ur),2),Hr=m(Qr),Fn=z(Ur,2),Pn=z(m(Fn),2),Gn=m(Pn),zo=z(ei,2),Zn=m(zo),No=z(m(Zn),2);No.__click=[oR,en,q,Ht];var Xo=z(m(No)),hs=z(Zn,2),ga=m(hs);ga.__click=[sR,it,Ht];var va=m(ga),Va=m(va);{var xn=Lr=>{var tn=iR();U(Lr,tn)},eo=Lr=>{var tn=aR();U(Lr,tn)};be(Va,Lr=>{l(Ht).status==="pending"?Lr(xn):Lr(eo,!1)})}var Mo=z(va),Yo=z(ga,2);{var co=Lr=>{var tn=Lt(),gn=lt(tn);{var Io=Uo=>{var to=lR();to.__click=[AR,De,Ht];var oi=m(to);zw(oi,{class:"odz-w-4 odz-h-4 odz-mr-1.5"});var Ho=z(oi);ke(()=>{to.disabled=l(ge)||l(xe)===l(Ht).id,Qe(Ho,` ${(l(ge)&&l(xe)===l(Ht).id?"...":"")??""}`)}),U(Uo,to)},kn=Uo=>{var to=cR();to.__click=[dR,he,Ht];var oi=z(m(to));ke(()=>{to.disabled=l(ne)||l(xe)===l(Ht).id,Qe(oi,` ${(l(ne)&&l(xe)===l(Ht).id?"...":"")??""}`)}),U(Uo,to)};be(gn,Uo=>{l(Ht).is_payment?Uo(Io):Uo(kn,!1)})}U(Lr,tn)};be(Yo,Lr=>{l(Ht).status==="completed"&&Lr(co)})}ke((Lr,tn,gn,Io,kn,Uo,to,oi,Ho)=>{Tr(zs,`${Lr??""} svelte-ryvuky`),Qe(wi,` ${tn??""}`),Qe(ln,l(Ht).name||"  "),Qe(Ns,` ${gn??""}`),Qe(IA,l(Ht).organization_name||"-"),Qe(ha,l(Ht).order_name||"-"),Qe(K,l(Ht).order_phone||"-"),Qe(xt,Io),Qe(fr,kn),Qe(Hr,Uo),Qe(Gn,to),Tr(No,`${oi??""} svelte-ryvuky`),No.disabled=!l(en),Qe(Xo,` ${Ho??""}`),Qe(Mo,` ${(l(Ht).status==="pending"?"":"")??""}`)},[()=>`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-backdrop-blur-sm ${Oe(l(Ht).status)}`,()=>ve(l(Ht).status),()=>H(l(Ht).created_at),()=>l(Ht).product_amount!==null&&l(Ht).product_amount!==void 0?`${Er(l(Ht).product_amount)}`:"-",()=>l(Ht).print_amount!==null&&l(Ht).print_amount!==void 0?`${Er(l(Ht).print_amount)}`:"-",()=>l(Ht).addon_amount!==null&&l(Ht).addon_amount!==void 0?`${Er(l(Ht).addon_amount)}`:"-",()=>l(Ht).total_amount!==null&&l(Ht).total_amount!==void 0?`${Er(l(Ht).total_amount)}`:"-",()=>`odz-inline-flex odz-items-center odz-justify-center odz-gap-2 odz-px-4 odz-py-2.5 odz-rounded-lg odz-text-sm odz-font-semibold odz-transition-all odz-duration-200 ${_e(l(Ht).design_confirm)} ${l(en)?"hover:odz-shadow-md hover:odz-scale-105":"odz-opacity-60 odz-cursor-not-allowed"}`,()=>Ne(l(Ht).design_confirm)],at),U(xo,mi)}),U(Mr,Kn)};be($r,Mr=>{l(d).length===0?Mr(Mn):Mr(Wo,!1)},!0)}U(Nt,br)};be(_r,Nt=>{l(u)?Nt(Br):Nt(bn,!1)},!0)}U(Wt,Kt)};be($t,Wt=>{l(c)?Wt(Rt):Wt(Mt,!1)})}U(qe,vt)};be(wr,qe=>{(l(te)==="current"||l(L))&&qe(Vr)})}var Rr=z(wr,2);{var pr=qe=>{var vt=Lt(),$t=lt(vt);{var Rt=Wt=>{var Kt=fR();U(Wt,Kt)},Mt=Wt=>{var Kt=Lt(),_r=lt(Kt);{var Br=Nt=>{var br=pR(),$r=m(br),Mn=m($r);ke(()=>Qe(Mn,l(me))),U(Nt,br)},bn=Nt=>{var br=Lt(),$r=lt(br);{var Mn=Mr=>{var Kn=gR();U(Mr,Kn)},Wo=Mr=>{var Kn=QR(),xo=lt(Kn),Ht=m(xo),mi=m(Ht),Jn=m(mi),en=m(Jn),Do=m(en);mp(Do,{size:18});var zs=z(en,2),wi=z(zs,2);{var ds=Vn=>{var cs=mR();cs.__click=[vR,F,E];var ti=m(cs);ed(ti,{size:16}),U(Vn,cs)};be(wi,Vn=>{l(F)&&Vn(ds)})}var ei=z(xo,2),BA=m(ei),CA=z(m(BA),2),Aa=m(CA),Oi=z(ei,2);{var yi=Vn=>{var cs=wR();U(Vn,cs)},_l=Vn=>{var cs=UR();nr(cs,5,()=>l(a),gr,(ti,ln)=>{var la=IR(),ja=m(la),da=m(ja),Ns=m(da),Ms=z(da,2),SA=m(Ms),ri=z(ja,2),us=m(ri),Ra=m(us),ni=z(us,2),EA=m(ni),Di=z(ni,2),FA=m(Di),$a=m(FA),qa=z(FA,2);{var IA=xn=>{var eo=yR(),Mo=z(lt(eo),2),Yo=m(Mo);ke(()=>Qe(Yo,`: ${l(ln).goodsCnt??""}`)),U(xn,eo)};be(qa,xn=>{l(ln).goodsCnt&&l(ln).goodsCnt!=="0"&&xn(IA)})}var _i=z(ri,2);{var ca=xn=>{var eo=BR(),Mo=m(eo),Yo=m(Mo);ju(Yo,{size:14});var co=z(Yo),Lr=z(Mo,2);nr(Lr,5,()=>l(ln).estimateGoods,gr,(tn,gn)=>{var Io=zR();const kn=at(()=>ye(l(gn).selectOptions)),Uo=at(()=>Ae(l(gn)));var to=m(Io);{var oi=Bs=>{var es=_R();ke(()=>{cr(es,"src",l(Uo)),cr(es,"alt",l(gn).goodsNm)}),At("error",es,si=>si.currentTarget.style.display="none"),U(Bs,es)},Ho=Bs=>{var es=bR(),si=m(es);ju(si,{size:20,class:"odz-text-gray-400"}),U(Bs,es)};be(to,Bs=>{l(Uo)?Bs(oi):Bs(Ho,!1)})}var Ga=z(to,2),bl=m(Ga),pd=m(bl),ma=z(bl,2),Wa=m(ma),Jo=z(Ga,2);Jo.__click=[xR,ae,gn];var Zo=m(Jo);o5(Zo,{size:14,class:"odz-mr-1"}),ke(()=>{Qe(pd,l(gn).goodsNm),Qe(Wa,`${l(kn).summary??""}  ${l(kn).totalQty??""}`)}),U(tn,Io)}),ke(()=>Qe(co,`  (${l(ln).estimateGoods.length??""})`)),U(xn,eo)};be(_i,xn=>{l(ln).estimateGoods&&l(ln).estimateGoods.length>0&&xn(ca)})}var ua=z(_i,2),Ka=m(ua),UA=m(Ka),ha=m(UA);bw(ha,{size:18});var Ni=z(UA,2),fa=z(m(Ni),2),bi=m(fa),pa=z(Ka,2),b=m(pa),K=m(b);wp(K,{size:18});var Te=z(b,2),He=z(m(Te),2),nt=m(He),xt=z(pa,2),Pt=m(xt),Zt=m(Pt);xw(Zt,{size:18});var fr=z(Pt,2),Ur=z(m(fr),2),Qr=m(Ur),Hr=z(ua,2),Fn=m(Hr),Pn=m(Fn);{var Gn=xn=>{var eo=CR(),Mo=m(eo);ke(Yo=>Qe(Mo,`: ${Yo??""}`),[()=>X(l(ln).eventDate)],at),U(xn,eo)};be(Pn,xn=>{l(ln).eventDate&&l(ln).eventDate!=="0000-00-00 00:00:00"&&xn(Gn)})}var zo=z(Fn,2),Zn=z(m(zo),2),No=m(Zn),Xo=z(Hr,2),hs=m(Xo);hs.__click=[SR,ot,ln];var ga=m(hs);{var va=xn=>{var eo=ER();U(xn,eo)},Va=xn=>{var eo=FR(),Mo=lt(eo);zw(Mo,{size:14}),U(xn,eo)};be(ga,xn=>{l(P)&&l(O)===l(ln).estimateNo?xn(va):xn(Va,!1)})}ke((xn,eo,Mo,Yo)=>{Tr(da,xn),Qe(Ns,eo),Qe(SA,Mo),Qe(Ra,l(ln).estimateNm||` #${l(ln).estimateNo}`),Qe(EA,l(ln).orderGoodsNm||"-"),Qe($a,`: ${l(ln).estimateNo??""}`),Qe(bi,l(ln).ex1||"-"),Qe(nt,l(ln).receiverName||l(ln).memNm||"-"),Qe(Qr,l(ln).receiverCellPhone||"-"),Qe(No,Yo),hs.disabled=l(P)&&l(O)===l(ln).estimateNo},[()=>`odz-badge ${Le(l(ln).state)}`,()=>fe(l(ln).state),()=>X(l(ln).regDt),()=>D(l(ln).totalPrice)],at),U(ti,la)}),U(Vn,cs)};be(Oi,Vn=>{l(a).length===0?Vn(yi):Vn(_l,!1)})}ke(()=>Qe(Aa,`${l(a).length??""}`)),At("focus",zs,Vn=>Vn.currentTarget.removeAttribute("readonly")),Fr(zs,()=>l(F),Vn=>_(F,Vn)),U(Mr,Kn)};be($r,Mr=>{l(se).length===0?Mr(Mn):Mr(Wo,!1)},!0)}U(Nt,br)};be(_r,Nt=>{l(me)?Nt(Br):Nt(bn,!1)},!0)}U(Wt,Kt)};be($t,Wt=>{l(oe)?Wt(Rt):Wt(Mt,!1)})}U(qe,vt)};be(Rr,qe=>{!l(L)&&l(te)==="previous"&&qe(pr)})}var yr=z(ht,2);{var Gr=qe=>{var vt=Lt(),$t=lt(vt);R4($t,()=>l(g),Rt=>{i7(Rt,{get estimateId(){return l(g)},get isOpen(){return l(f)},set isOpen(Mt){_(f,Mt)},$$legacy:!0})}),U(qe,vt)};be(yr,qe=>{l(g)&&qe(Gr)})}var on=z(yr,2),En=m(on),Wr=z(m(En),4),mr=z(m(Wr),2);mr.__keydown=[TR,We];var qn=z(mr,2);{var As=qe=>{var vt=LR(),$t=m(vt),Rt=m($t);ke(()=>Qe(Rt,l(J))),U(qe,vt)};be(qn,qe=>{l(J)&&qe(As)})}var Fo=z(Wr,2),Oo=m(Fo);Oo.__click=je;var Ds=z(Oo,2);Ds.__click=We;var so=z(En,2);so.__click=je;var ls=z(on,2);{var Yn=qe=>{var vt=PR();U(qe,vt)};be(ls,qe=>{l(ne)&&qe(Yn)})}ke(()=>{Tr(on,`odz-modal ${(l(Be)?"odz-modal-open":"")??""}`),Tr(mr,`odz-input odz-input-bordered odz-w-full ${(l(J)?"odz-input-error":"")??""}`)}),At("focus",Ze,qe=>qe.currentTarget.removeAttribute("readonly")),Fr(Ze,()=>l(w),qe=>_(w,qe)),Nu(mt,()=>l(C),qe=>_(C,qe)),Fr(mr,()=>l(N),qe=>_(N,qe)),U(n,rt),Zr(),r()}Eb(["click","keydown"]);var DR=V('<div class="ed-text-sm odz-text-gray-600 ed-leading-relaxed svelte-1sldu2b"> </div>'),NR=V('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-justify-between odz-items-start odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="ed-text-base odz-font-semibold odz-text-gray-800 odz-mb-1 svelte-1sldu2b"> </div> <!></div> <div class="ed-text-lg odz-font-bold odz-text-gray-900 odz-ml-4 svelte-1sldu2b"> </div></div></div>'),MR=V('<div class="odz-bg-white odz-border odz-border-gray-300 odz-rounded odz-px-2 odz-py-1 ed-text-xs odz-text-gray-700 svelte-1sldu2b"> </div>'),HR=V('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-px-4 odz-py-3 odz-flex-shrink-0"><div class="ed-text-sm odz-font-semibold odz-text-gray-800 odz-mb-2 svelte-1sldu2b"> </div> <div class="odz-flex odz-flex-wrap odz-gap-1"></div></div>'),jR=V('<div class="ed-text-xs odz-text-blue-600 odz-mt-1 svelte-1sldu2b"><!></div>'),RR=V('<div class="odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-md odz-p-3 odz-mb-3"><div class="odz-flex odz-justify-between odz-items-center odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="odz-font-medium odz-text-blue-700">  </span></div> <div class="odz-text-right"><div class="ed-text-xs odz-text-gray-500 odz-line-through svelte-1sldu2b"> </div> <div class="ed-text-sm odz-font-semibold odz-text-red-600 svelte-1sldu2b"> </div></div></div> <!></div>'),$R=V('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-3 odz-mb-4"></div> <div class="ed-text-sm odz-text-gray-600 odz-mb-2 odz-text-right svelte-1sldu2b"> </div> <!> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),qR=V('<span class="odz-w-6 odz-h-6 odz-rounded-full odz-border-2 odz-border-white odz-shadow-sm"></span>'),KR=V('<div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg> <span class="ed-text-sm odz-font-medium odz-text-gray-700 svelte-1sldu2b"> </span></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-gap-1"></div> <div class="ed-text-sm odz-text-gray-800 svelte-1sldu2b"> </div></div></div>'),VR=V('<div class="odz-bg-white odz-border odz-border-gray-100 odz-rounded-xl odz-p-5 odz-shadow-sm odz-hover:shadow-md odz-transition-all odz-duration-200"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-blue-100 odz-text-blue-600 odz-rounded-full odz-flex odz-items-center odz-justify-center ed-text-sm odz-font-semibold svelte-1sldu2b"></div> <span class="odz-font-medium odz-text-gray-900"> </span></div> <div class="odz-text-right"><div class="ed-text-lg odz-font-bold odz-text-gray-900 svelte-1sldu2b"> </div></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"><!> <div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="ed-text-sm odz-font-medium odz-text-gray-700 svelte-1sldu2b"> </span></div> <div class="ed-text-sm odz-text-gray-800 ed-leading-relaxed svelte-1sldu2b"> </div></div></div></div>'),GR=V('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-6 svelte-1sldu2b"> </h3> <div class="odz-space-y-4"></div></div>'),WR=V('<span class="odz-text-gray-600"> </span>'),XR=V('<div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-font-medium odz-text-gray-800 odz-mb-1"> <!></div> <div class="ed-text-sm odz-text-gray-600 svelte-1sldu2b"> </div></div> <div class="odz-font-semibold odz-text-gray-900"> </div></div>'),YR=V('<div class="odz-mb-8"><h3 class="ed-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200 svelte-1sldu2b"> </h3> <div class="odz-flex odz-flex-col odz-gap-3 odz-mb-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),JR=V("<!> <!> <!>",1),ZR=V('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-p-4 odz-animate-in odz-fade-in odz-duration-300 ed-root svelte-1sldu2b"><div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-60 odz-backdrop-blur-sm odz-cursor-pointer"></div> <div class="odz-relative odz-bg-white odz-rounded-xl odz-shadow-2xl odz-max-w-2xl odz-max-h-[90vh] odz-w-full odz-overflow-hidden odz-flex odz-flex-col odz-animate-in odz-zoom-in-95 odz-slide-in-from-bottom-4 odz-duration-300 odz-cursor-default"><div class="odz-flex odz-justify-between odz-items-center odz-p-6 odz-border-b odz-border-gray-200 odz-bg-gradient-to-r odz-from-slate-50 odz-to-slate-100 odz-sticky odz-top-0 odz-z-10"><h2 class="ed-text-2xl odz-font-bold odz-text-gray-900 svelte-1sldu2b">  </h2> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-hover:odz-bg-gray-100 odz-transition-all odz-duration-200"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-6"><!> <div class="odz-border-t-2 odz-border-gray-200 odz-pt-6 odz-mt-6"><div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-900 odz-rounded-lg odz-p-4"><span class="ed-text-lg odz-font-semibold odz-text-white svelte-1sldu2b"> </span> <span class="ed-text-2xl odz-font-bold odz-text-white svelte-1sldu2b"> </span></div></div></div></div></div>');function e9(n,e){Jr(e,!1);let t=gt(e,"estimateDetails",8),r=gt(e,"productAmount",8);gt(e,"printAmount",8);let o=gt(e,"addonAmount",8),s=gt(e,"totalAmount",8),i=gt(e,"printInfoList",8),a=gt(e,"addonItems",8),A=gt(e,"addCostItems",8,null),d=gt(e,"isAddCost",8,!1),c=gt(e,"addonProductsMap",24,()=>({}));const u=Ag();let h=Ie([]);function f(){if(!t()||!t().items||t().items.length===0)return;const xe=new Map;t().items.forEach(se=>{const me=(se.variant||{}).title||se.variant_title||" ",B=me.match(/(.+)\s*-\s*(.+)/),F=B?B[1]:me,E=B?B[2]:"";xe.has(F)||xe.set(F,{name:F,sizes:new Map});const T=xe.get(F);T.sizes.has(E)||T.sizes.set(E,{size:E,quantity:0});const P=T.sizes.get(E);P.quantity+=se.quantity||1}),_(h,Array.from(xe.values()).map(se=>({name:se.name,sizes:Array.from(se.sizes.values())}))),_(h,l(h).filter(se=>se.name!==""));const te=new Set;l(h).forEach(se=>{se.sizes.forEach(oe=>{te.add(oe.size)})}),Array.from(te)}function g(xe){return`background-color: ${xe.hex};`}function w(xe,te){const se=[];if(xe&&se.push(`: ${xe}`),te&&te.length>0){const oe=te.map(me=>me.name).join(" > ");se.push(`: ${oe}`)}return se.length>0?se.join(" | "):" "}function y(){return A()&&A().amount||0}function x(){u("close")}tr(()=>Hn(t()),()=>{t()&&f()}),bo(),nn();var C=ZR(),I=m(C),M=z(I,2),L=m(M),ee=z(m(L),2),W=z(L,2),R=m(W);{var Z=xe=>{var te=NR(),se=z(m(te),2),oe=m(se),me=m(oe),B=m(me),F=z(me,2);{var E=O=>{var j=DR(),$=m(j);ke(()=>Qe($,A().description)),U(O,j)};be(F,O=>{A().description&&O(E)})}var T=z(oe,2),P=m(T);ke(O=>{Qe(B,A().name),Qe(P,`${O??""}`)},[()=>A().amount.toLocaleString()],at),U(xe,te)},Be=xe=>{var te=Lt(),se=lt(te);{var oe=me=>{var B=JR(),F=lt(B);{var E=$=>{var H=$R(),Y=z(m(H),2);nr(Y,5,()=>l(h),gr,(ae,le)=>{var Ee=HR(),Me=m(Ee),ze=m(Me),Se=z(Me,2);nr(Se,5,()=>l(le).sizes,gr,(ve,Oe)=>{var Ne=MR(),_e=m(Ne);ke(()=>Qe(_e,`${l(Oe).size??""}: ${l(Oe).quantity??""}`)),U(ve,Ne)}),ke(()=>Qe(ze,l(le).name)),U(ae,Ee)});var Ce=z(Y,2),fe=m(Ce),Le=z(Ce,2);{var X=ae=>{var le=RR();const Ee=at(()=>t().items.reduce((ue,Fe)=>ue+(Fe.discount_amount||0)*(Fe.quantity||0),0)),Me=at(()=>t().items.find(ue=>ue.discount_amount&&ue.discount_amount>0));var ze=m(le),Se=z(m(ze),2),ve=m(Se),Oe=m(ve),Ne=z(ve,2),_e=m(Ne),q=z(ze,2);{var de=ue=>{var Fe=jR(),Pe=m(Fe);{var it=je=>{var he=mn();ke(De=>Qe(he,`${l(Me).discount_value??""}%  ( ${De??""})`),[()=>(l(Me).discount_amount||0).toLocaleString()],at),U(je,he)},We=je=>{var he=mn();ke(De=>Qe(he,` ${De??""} `),[()=>l(Me).discount_value.toLocaleString()],at),U(je,he)};be(Pe,je=>{l(Me).discount_type==="percentage"?je(it):je(We,!1)})}U(ue,Fe)};be(q,ue=>{l(Me)&&l(Me).discount_type&&l(Me).discount_value&&ue(de)})}ke((ue,Fe)=>{Qe(Oe,`${ue??""}`),Qe(_e,`-${Fe??""}`)},[()=>t().items.reduce((ue,Fe)=>ue+(Fe.original_price||Fe.price||0)*(Fe.quantity||0),0).toLocaleString(),()=>l(Ee).toLocaleString()],at),U(ae,le)};be(Le,ae=>{t().items&&t().items.some(le=>le.discount_amount&&le.discount_amount>0)&&ae(X)})}var D=z(Le,2),Ae=z(m(D),2),ye=m(Ae);ke((ae,le)=>{Qe(fe,` : ${ae??""}`),Qe(ye,`${le??""}`)},[()=>l(h).reduce((ae,le)=>ae+le.sizes.reduce((Ee,Me)=>Ee+Me.quantity,0),0),()=>r().toLocaleString()],at),U($,H)};be(F,$=>{l(h).length>0&&$(E)})}var T=z(F,2);{var P=$=>{var H=GR(),Y=z(m(H),2);nr(Y,5,i,gr,(Ce,fe,Le)=>{var X=VR(),D=m(X),Ae=m(D),ye=m(Ae);ye.textContent=Le+1;var ae=z(Ae,2),le=m(ae),Ee=m(le),Me=z(D,2),ze=m(Me);{var Se=_e=>{var q=KR(),de=z(m(q),2),ue=m(de);nr(ue,5,()=>l(fe).colorInfo,gr,(it,We)=>{var je=qR();ke(he=>{cr(je,"style",he),cr(je,"title",l(We).name)},[()=>g(l(We))],at),U(it,je)});var Fe=z(ue,2),Pe=m(Fe);ke(it=>Qe(Pe,it),[()=>l(fe).colorInfo.map(it=>it.name).join(", ")],at),U(_e,q)};be(ze,_e=>{l(fe).colorInfo&&l(fe).colorInfo.length>0&&_e(Se)})}var ve=z(ze,2),Oe=z(m(ve),2),Ne=m(Oe);ke((_e,q)=>{Qe(Ee,`${_e??""}`),Qe(Ne,q)},[()=>l(fe).price.toLocaleString(),()=>w(l(fe).printAreaTitle,l(fe).parentTemplates)],at),U(Ce,X)}),U($,H)};be(T,$=>{i().length>0&&$(P)})}var O=z(T,2);{var j=$=>{var H=YR(),Y=z(m(H),2);nr(Y,5,a,gr,(X,D)=>{var Ae=XR();const ye=at(()=>`${l(D).selected_product_id}_${l(D).selected_variant_id}`),ae=at(()=>c()[l(ye)]);var le=m(Ae),Ee=m(le),Me=m(Ee),ze=z(Me);{var Se=q=>{var de=WR(),ue=m(de);ke(()=>Qe(ue,`- ${l(ae).variantTitle??""}`)),U(q,de)};be(ze,q=>{var de;(de=l(ae))!=null&&de.variantTitle&&q(Se)})}var ve=z(Ee,2),Oe=m(ve),Ne=z(le,2),_e=m(Ne);ke(q=>{var de;Qe(Me,`${((de=l(ae))==null?void 0:de.productTitle)||""} `),Qe(Oe,`${l(D).quantity??""}`),Qe(_e,`${q??""}`)},[()=>(l(D).price*l(D).quantity).toLocaleString()],at),U(X,Ae)});var Ce=z(Y,2),fe=z(m(Ce),2),Le=m(fe);ke(X=>Qe(Le,`${X??""}`),[()=>o().toLocaleString()],at),U($,H)};be(O,$=>{a().length>0&&$(j)})}U(me,B)};be(se,me=>{t()&&t().estimate&&me(oe)},!0)}U(xe,te)};be(R,xe=>{d()&&A()?xe(Z):xe(Be,!1)})}var N=z(R,2),k=m(N),J=m(k),ne=m(J),ge=z(J,2),pe=m(ge);ke(xe=>{Qe(ne,d()?" ":" "),Qe(pe,`${xe??""}`)},[()=>d()?y().toLocaleString():s().toLocaleString()],at),At("click",I,x),At("click",ee,x),U(n,C),Zr()}var t9=V('<p class="odiz-loading"> ...</p>'),r9=V('<p class="odiz-error"> </p>'),n9=V('<div class="odiz-addcost-description"> </div>'),o9=V('<div class="odiz-addcost-detailed"><div class="odiz-addcost-header"><h3 class="odiz-addcost-title"> </h3></div> <div class="odiz-addcost-items"><div class="odiz-addcost-item"><div class="odiz-addcost-info"><div class="odiz-addcost-name"> </div> <!></div> <div class="odiz-addcost-amount"> </div></div></div> <div class="odiz-divider"></div> <div class="odiz-total-price"><div class="odiz-price-label"> </div> <div class="odiz-price-value odiz-total-value"> </div></div></div>'),s9=V('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"><!></span></div>'),i9=V('<span class="odz-color-dot-compact"></span>'),a9=V('<span class="odz-color-count"> </span>'),A9=V('<span class="odz-color-dots-compact"><!> <!></span>'),l9=V('<span class="odz-print-area-compact"> </span>'),d9=V("<!> <!>",1),c9=V('<span class="odz-print-count"> </span>'),u9=V('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value odz-print-inline"><!> <!></span></div>'),h9=V('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"> </span></div>'),f9=V('<button class="odz-detail-btn odz-estimate-mgmt-btn" type="button"> </button>'),p9=V('<div class="odiz-estimate-detailed"><div class="odz-estimate-summary"><div class="odz-summary-content"><!> <!> <!></div> <div class="odz-summary-actions"><button class="odz-detail-btn" type="button">  </button> <!></div></div> <div class="odz-price-summary"><div class="odz-price-label"></div> <div class="odz-price-value"><span class="odz-text-lg odz-font-bold"> </span></div></div></div>'),g9=V('<p class="odiz-empty">  .</p>'),v9=V('<div class="odiz-estimate-preview odz-estimate-preview-root"><!></div> <!>',1);function m9(n,e){Jr(e,!1);let t=gt(e,"uuid",8),r=gt(e,"idx",8),o=gt(e,"appType",8),s=gt(e,"isAddCost",8),i=Ie(!0),a=Ie(null),A=Ie(null),d=Ie(0),c=Ie(0),u=Ie(0),h=Ie(0),f=Ie([]),g=Ie([]),w=Ie(null),y=Ie({}),x=Ie([]),C=Ie(!1);async function I(){var te,se;_(y,{});for(const oe of l(g)){const me=`${oe.selected_product_id}_${oe.selected_variant_id}`;if(!l(y)[me])try{if(oe.selected_variant_id){const B=await cl(oe.selected_variant_id);if(B){const{data:F}=await pt.from("products").select("id, title").eq("id",oe.selected_product_id).single();Cr(y,l(y)[me]={productTitle:(F==null?void 0:F.title)||"",variantTitle:B.title||"",price:((se=(te=B.prices)==null?void 0:te[0])==null?void 0:se.amount)||0})}}else{const{data:B}=await pt.from("products").select("id, title").eq("id",oe.selected_product_id).single();Cr(y,l(y)[me]={productTitle:(B==null?void 0:B.title)||"",variantTitle:null,price:oe.price||0})}}catch{Cr(y,l(y)[me]={productTitle:"",variantTitle:null,price:oe.price||0})}}}async function M(){try{_(i,!0),_(a,null),_(A,await u1(t()));const te=await cg(t());if(s()&&(_(w,await v5(r())),console.log("addCostItems",l(w))),l(A)){Cr(A,l(A).items=l(A).items.filter(oe=>{var me;return((me=oe.idx)==null?void 0:me.toString())===r()}));const se=l(A).prints.filter(oe=>{var me;return((me=oe.idx)==null?void 0:me.toString())===r()});Cr(A,l(A).prints=l(A).prints.filter(oe=>{var me;return((me=oe.idx)==null?void 0:me.toString())===r()})),_(g,te.filter(oe=>{var me;return((me=oe.idx)==null?void 0:me.toString())===r()})),await I(),ee(),L(),_(f,[]);for(const oe of se){const me={id:oe.id||0,price:oe.price||0,templateId:oe.template_id,objectId:oe.object_id,colorInfo:[]};try{if(oe.template_id&&(console.log("template_id:",oe.template_id),me.parentTemplates=await Ah(oe.template_id),console.log("template_id   :",me.parentTemplates)),oe.object_id){console.log("object_id:",oe.object_id);const B=await m1(oe.object_id);B&&(me.printAreaTitle=B.title,console.log(" :",B.title))}}catch(B){console.error("    :",B)}if(oe.colors)try{let B=null;if(typeof oe.colors=="string"?B=JSON.parse(oe.colors):B=oe.colors,Array.isArray(B)){let F=[];if(B.length>0&&Array.isArray(B[0]))for(const E of B)Array.isArray(E)&&(F=F.concat(E));else F=B;F.length>0&&(typeof F[0]=="object"&&F[0]!==null?me.colorInfo=F:me.colorInfo=F.map(E=>({hex:E,name:E})))}console.log("  :",me.colorInfo)}catch(B){console.error("    :",B)}l(f).push(me)}console.log("   :",l(f))}}catch(te){console.error("    :",te),_(a,"     .")}finally{_(i,!1)}}function L(){if(!l(A)||!l(A).items||l(A).items.length===0)return;const te=new Map;l(A).items.forEach(oe=>{const B=(oe.variant||{}).title||oe.variant_title||" ",F=B.match(/(.+)\s*-\s*(.+)/),E=F?F[1]:B,T=F?F[2]:"";te.has(E)||te.set(E,{name:E,sizes:new Map});const P=te.get(E);P.sizes.has(T)||P.sizes.set(T,{size:T,quantity:0});const O=P.sizes.get(T);O.quantity+=oe.quantity||1}),_(x,Array.from(te.values()).map(oe=>({name:oe.name,sizes:Array.from(oe.sizes.values())}))),_(x,l(x).filter(oe=>oe.name!==""));const se=new Set;l(x).forEach(oe=>{oe.sizes.forEach(me=>{se.add(me.size)})}),Array.from(se)}function ee(){if(l(A)){_(d,0),_(c,0),_(u,0);for(const te of l(A).items)te.quantity&&te.price&&_(d,l(d)+te.quantity*te.price);for(const te of l(A).prints)te.price&&_(c,l(c)+te.price);for(const te of l(g))te.price&&te.quantity&&_(u,l(u)+te.price*te.quantity);_(h,l(d)+l(c)+l(u))}}function W(){return l(w)&&l(w).amount||0}$n(()=>{M()});function R(){window.open(`https://odiz.vercel.app/dashboard/estimates/${t()}`,"_blank")}function Z(){_(C,!0)}function Be(){_(C,!1)}nn();var N=v9(),k=lt(N),J=m(k);{var ne=te=>{var se=t9();U(te,se)},ge=te=>{var se=Lt(),oe=lt(se);{var me=F=>{var E=r9(),T=m(E);ke(()=>Qe(T,l(a))),U(F,E)},B=F=>{var E=Lt(),T=lt(E);{var P=j=>{var $=o9(),H=z(m($),2),Y=m(H),Ce=m(Y),fe=m(Ce),Le=m(fe),X=z(fe,2);{var D=Me=>{var ze=n9(),Se=m(ze);ke(()=>Qe(Se,l(w).description)),U(Me,ze)};be(X,Me=>{l(w).description&&Me(D)})}var Ae=z(Ce,2),ye=m(Ae),ae=z(H,4),le=z(m(ae),2),Ee=m(le);ke((Me,ze)=>{Qe(Le,l(w).name),Qe(ye,`${Me??""}`),Qe(Ee,`${ze??""}`)},[()=>l(w).amount.toLocaleString(),()=>W().toLocaleString()],at),U(j,$)},O=j=>{var $=Lt(),H=lt($);{var Y=fe=>{var Le=p9(),X=m(Le),D=m(X),Ae=m(D);{var ye=ue=>{var Fe=s9(),Pe=z(m(Fe),2),it=m(Pe);{var We=he=>{var De=mn();ke(ot=>Qe(De,`${l(x)[0].name??""} (${ot??""})`),[()=>l(x).reduce((ot,Ge)=>ot+Ge.sizes.reduce((Je,rt)=>Je+rt.quantity,0),0)],at),U(he,De)},je=he=>{var De=mn();ke(ot=>Qe(De,`${l(x)[0].name??""}  ${l(x).length-1} (${ot??""})`),[()=>l(x).reduce((ot,Ge)=>ot+Ge.sizes.reduce((Je,rt)=>Je+rt.quantity,0),0)],at),U(he,De)};be(it,he=>{l(x).length===1?he(We):he(je,!1)})}U(ue,Fe)};be(Ae,ue=>{l(x).length>0&&ue(ye)})}var ae=z(Ae,2);{var le=ue=>{var Fe=u9(),Pe=z(m(Fe),2),it=m(Pe);nr(it,1,()=>l(f).slice(0,1),gr,(he,De)=>{var ot=d9(),Ge=lt(ot);{var Je=$e=>{var st=A9(),Bt=m(st);nr(Bt,1,()=>l(De).colorInfo.slice(0,3),gr,(wt,Ze)=>{var kt=i9();ke(()=>{cr(kt,"style",`background-color: ${l(Ze).hex??""};`),cr(kt,"title",l(Ze).name)}),U(wt,kt)});var Ct=z(Bt,2);{var Tt=wt=>{var Ze=a9(),kt=m(Ze);ke(()=>Qe(kt,`+${l(De).colorInfo.length-3}`)),U(wt,Ze)};be(Ct,wt=>{l(De).colorInfo.length>3&&wt(Tt)})}U($e,st)};be(Ge,$e=>{l(De).colorInfo&&l(De).colorInfo.length>0&&$e(Je)})}var rt=z(Ge,2);{var ht=$e=>{var st=l9(),Bt=m(st);ke(()=>Qe(Bt,l(De).printAreaTitle)),U($e,st)};be(rt,$e=>{l(De).printAreaTitle&&$e(ht)})}U(he,ot)});var We=z(it,2);{var je=he=>{var De=c9(),ot=m(De);ke(()=>Qe(ot,` ${l(f).length-1}`)),U(he,De)};be(We,he=>{l(f).length>1&&he(je)})}U(ue,Fe)};be(ae,ue=>{l(f).length>0&&ue(le)})}var Ee=z(ae,2);{var Me=ue=>{var Fe=h9(),Pe=z(m(Fe),2),it=m(Pe);ke(()=>Qe(it,`${l(g).length??""}`)),U(ue,Fe)};be(Ee,ue=>{l(g).length>0&&ue(Me)})}var ze=z(D,2),Se=m(ze),ve=z(Se,2);{var Oe=ue=>{var Fe=f9();At("click",Fe,R),U(ue,Fe)};be(ve,ue=>{o()==="admin"&&ue(Oe)})}var Ne=z(X,2),_e=z(m(Ne),2),q=m(_e),de=m(q);ke(ue=>Qe(de,`${ue??""}`),[()=>l(h).toLocaleString()],at),At("click",Se,Z),U(fe,Le)},Ce=fe=>{var Le=g9();U(fe,Le)};be(H,fe=>{l(A)&&l(A).estimate?fe(Y):fe(Ce,!1)},!0)}U(j,$)};be(T,j=>{s()&&l(w)?j(P):j(O,!1)},!0)}U(F,E)};be(oe,F=>{l(a)?F(me):F(B,!1)},!0)}U(te,se)};be(J,te=>{l(i)?te(ne):te(ge,!1)})}var pe=z(k,2);{var xe=te=>{e9(te,{get estimateDetails(){return l(A)},get productAmount(){return l(d)},get printAmount(){return l(c)},get addonAmount(){return l(u)},get totalAmount(){return l(h)},get printInfoList(){return l(f)},get addonItems(){return l(g)},get addCostItems(){return l(w)},get isAddCost(){return s()},get addonProductsMap(){return l(y)},$$events:{close:Be}})};be(pe,te=>{l(C)&&l(A)&&te(xe)})}U(n,N),Zr()}var w9=V('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),y9=V('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),_9=V('<span class="odz-text-red-500 odz-ml-2"> </span>'),b9=V('<div class="odz-text-sm odz-text-gray-600"> <!></div>'),x9=V('<div class="odz-absolute -odz-top-1 -odz-right-1 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),z9=V("<img> <!>",1),B9=V('<div class="odz-flex odz-items-center odz-gap-1 odz-bg-red-100 odz-px-2 odz-py-1 odz-rounded-full"><span class="odz-text-xs odz-font-medium odz-text-red-600"> </span></div>'),C9=V('<button><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-relative odz-flex-shrink-0"><!></div> <span> </span> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-shrink-0"><!> <div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path></svg></div></div></div></button>'),S9=V('<div><h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-text-gray-800"> </h3> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 lg:odz-grid-cols-4 xl:odz-grid-cols-5 odz-gap-3"></div></div>'),E9=V('<div class="odz-relative"><img class="odz-w-12 odz-h-12 odz-rounded-lg odz-object-cover odz-shadow-md odz-ring-2 odz-ring-white"></div>'),F9=V('<div class="odz-absolute -odz-top-2 -odz-right-2"><div class="odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-shadow-lg"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>'),I9=V('<span class="odz-text-sm odz-font-semibold odz-text-gray-700"> </span>'),U9=V(`<div class="odz-group odz-relative"><div><!> <div class="odz-text-center odz-mb-3"><div> </div> <div class="odz-mt-2 odz-min-h-[2rem] odz-flex odz-flex-col odz-items-center odz-justify-center"><!></div></div> <div class="odz-flex odz-items-center odz-bg-gray-50 odz-rounded-lg odz-p-1 odz-gap-1"><button aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <input type="number" class="odz-flex-1 odz-text-center odz-bg-transparent odz-border-0 odz-text-xs sm:odz-text-sm odz-font-bold odz-text-gray-800
                                                           focus:odz-outline-none focus:odz-ring-0 odz-min-w-0" min="0" placeholder="0"> <button class="odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150 hover:odz-scale-110" aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path></svg></button></div></div></div>`),Q9=V('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),T9=V('<div class="odz-text-center odz-py-8"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="odz-text-sm odz-text-gray-500">     .</p></div>'),L9=V('<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-4 odz-mb-6"><!> <div><h4 class="odz-text-xl odz-font-bold odz-text-gray-800"> </h4> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <!></div>'),P9=V('<div class="odz-space-y-6 odz-mt-6"></div>'),k9=V('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <!></div></div> <!> <!> <!>',1),O9=V('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!>',1);function D9(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(zr,"$fixedEstimateStore",t),s=()=>dn(Et,"$estimateStore",t),i=()=>dn(gi,"$shopStore",t),a=Ie();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"onNext",8,void 0),h=Ie(null),f=Ie(!1),g=Ie(null),w=Ie(!1),y=Ie(""),x=Ie(""),C=Ie([]),I=Ie({}),M=Ie({}),L=Ie({}),ee=Ie(0),W=Ie(0),R=null;function Z(H){var Ae,ye,ae,le,Ee,Me;if(!l(a)||!l(a).variants||!l(a).options||l(a).options.length===0)return;const Y=o();if((ye=(Ae=Y==null?void 0:Y.productSelection)==null?void 0:Ae.quantityByVariant)!=null&&ye[H]&&Object.keys(Y.productSelection.quantityByVariant[H]).length>0,(((le=(ae=Y==null?void 0:Y.productSelection)==null?void 0:ae.quantityByVariant)==null?void 0:le[H])!==void 0||l(C).includes(H))&&d()&&d()!=="temp"){if(l(C).includes(H)){_(C,l(C).filter(ve=>ve!==H));const ze={...l(M)};delete ze[H],_(M,ze);const Se={...l(I)};Se[H]&&Object.keys(Se[H]).forEach(ve=>{Se[H][ve]=0}),_(I,Se),zr.update(ve=>{if(!ve||!ve.productSelection)return ve;const Oe={...ve.productSelection.quantityByVariant};Oe[H]&&Object.keys(Oe[H]).forEach(_e=>{Oe[H][_e]=0});const Ne=Object.values(Oe).reduce((_e,q)=>_e+Object.values(q).reduce((de,ue)=>de+ue,0),0);return{...ve,productSelection:{...ve.productSelection,selectedColors:l(C),variantsByColor:ze,quantityByVariant:Oe,totalQuantity:Ne}}}),xe(),iA(W);return}if(!l(C).includes(H)){const ze=l(a).options[0].id,Se=l(a).variants.filter(ve=>{var Oe;return!ve.option_values||!Array.isArray(ve.option_values)?!1:(Oe=ve.option_values)==null?void 0:Oe.some(Ne=>Ne.option_value&&Ne.option_value.option?Ne.option_value.option.id===ze&&Ne.option_value.value===H:Ne.option_id?Ne.option_id===ze&&Ne.value===H:!1)});Se.length>0&&(_(M,{...l(M),[H]:Se}),_(C,[...l(C),H]),zr.update(ve=>!ve||!ve.productSelection?ve:{...ve,productSelection:{...ve.productSelection,selectedColors:[...ve.productSelection.selectedColors,H],variantsByColor:{...ve.productSelection.variantsByColor,[H]:Se},quantityByVariant:{...ve.productSelection.quantityByVariant,[H]:ve.productSelection.quantityByVariant[H]||{}}}}),iA(W))}return}const fe=l(a).options[0].id,Le=l(a).variants.filter(ze=>{var Se;return!ze.option_values||!Array.isArray(ze.option_values)?!1:(Se=ze.option_values)==null?void 0:Se.some(ve=>ve.option_value&&ve.option_value.option?ve.option_value.option.id===fe&&ve.option_value.value===H:ve.option_id?ve.option_id===fe&&ve.value===H:!1)}),X={...l(M)};if(Le.length>0&&(X[H]=Le),d()&&d()!=="temp"){const ze=o();((Me=(Ee=ze==null?void 0:ze.productSelection)==null?void 0:Ee.selectedColors)==null?void 0:Me.includes(H))?(_(M,{...l(M),...X}),zr.update(ve=>!ve||!ve.productSelection?ve:{...ve,productSelection:{...ve.productSelection,variantsByColor:{...ve.productSelection.variantsByColor,...X}}})):(l(C).includes(H)||_(C,[...l(C),H]),_(M,{...l(M),...X}),zr.update(ve=>{var de,ue,Fe,Pe,it;if(!ve||!ve.productSelection)return ve;const Oe=Object.keys(ve.productSelection.quantityByVariant||{}),Ne=new Set([...Oe,H]),_e=Array.from(Ne),q={...((de=ve.productSelection)==null?void 0:de.variantsByColor)||{},...X};return console.log(" Edit :   (  ):",{colorValue:H,colorsWithQuantity:Oe,newSelectedColors:_e,variantsInColor:((ue=X[H])==null?void 0:ue.length)||0,quantityByVariant:ve.productSelection.quantityByVariant}),{...ve,productSelection:{...ve.productSelection,selectedColors:_e,variantsByColor:q,quantityByVariant:{...((Fe=ve.productSelection)==null?void 0:Fe.quantityByVariant)||{},[H]:((it=(Pe=ve.productSelection)==null?void 0:Pe.quantityByVariant)==null?void 0:it[H])||{}}}}}))}else zr.toggleColorSelection(H,X)}function Be(H){var fe;if(!l(a)||l(a).options.length<2||!H||!H.option_values||!Array.isArray(H.option_values))return"";const Y=l(a).options[1].id,Ce=H.option_values.find(Le=>Le.option_value&&Le.option_value.option?Le.option_value.option.id===Y:Le.option_id?Le.option_id===Y:!1);return((fe=Ce==null?void 0:Ce.option_value)==null?void 0:fe.value)||(Ce==null?void 0:Ce.value)||""}function N(H,Y){var Le;const Ce=((Le=l(I)[H])==null?void 0:Le[Y])||0,fe=Ce+1;o(),zr.updateQuantity(H,Y,fe),ne("increase",H,Y,Ce,fe)}function k(H,Y){var fe;const Ce=((fe=l(I)[H])==null?void 0:fe[Y])||0;if(Ce>0){const Le=Ce-1;zr.updateQuantity(H,Y,Le),ne("decrease",H,Y,Ce,Le)}}function J(H,Y,Ce){var D;const fe=parseInt(H.target.value)||0,Le=Math.max(0,fe),X=((D=l(I)[Y])==null?void 0:D[Ce])||0;zr.updateQuantity(Y,Ce,Le),ne("input",Y,Ce,X,Le)}function ne(H,Y,Ce,fe,Le){var X;if(typeof window<"u"){const D=Object.values(l(I)).reduce((Ae,ye)=>Ae+Object.values(ye).reduce((ae,le)=>ae+le,0),0)-fe+Le;window.dispatchEvent(new CustomEvent("productQuantityUpdate",{detail:{productId:(X=l(a))==null?void 0:X.id,action:H,color:Y,variantId:Ce,oldQuantity:fe,newQuantity:Le,newTotalQuantity:D,timestamp:Date.now(),source:"product.svelte"}}))}}let ge=!1,pe=!1;function xe(){const H=Object.values(l(I)).reduce((Y,Ce)=>Y+Object.values(Ce).reduce((fe,Le)=>fe+Le,0),0);l(ee)!==H&&(_(ee,H),te())}function te(){var H,Y;if(!ge){ge=!0;try{const Ce={};if(!((H=l(a))!=null&&H.quantity_discounts)||l(ee)===0){Object.keys(l(L)).length>0&&(_(L,{}),zr.updateVariantDiscounts({}));return}const fe=Object.keys(l(I)),Le=Object.keys(l(M));fe.filter(ae=>!Le.includes(ae)).length>0;for(const ae in l(I))for(const le in l(I)[ae])if(l(I)[ae][le]>0){const Me=(Y=l(M)[ae])==null?void 0:Y.find(ze=>ze.id===le);if(Me&&Me.prices&&Me.prices.length>0){const ze=Me.prices[0].amount,Se=ea(l(ee),ze,l(a).quantity_discounts);Se!=null&&Se.hasDiscount&&(Ce[le]=Se)}}const D=Object.keys(l(L)).sort(),Ae=Object.keys(Ce).sort();(JSON.stringify(D)!==JSON.stringify(Ae)||Object.keys(Ce).some(ae=>JSON.stringify(l(L)[ae])!==JSON.stringify(Ce[ae])))&&(_(L,Ce),zr.updateVariantDiscounts(l(L)))}finally{ge=!1}}}function se(){var fe;let H=0,Y=0,Ce=!1;for(const Le in l(I))for(const X in l(I)[Le]){const D=l(I)[Le][X];if(D>0){const Ae=(fe=l(M)[Le])==null?void 0:fe.find(ye=>ye.id===X);if(Ae&&Ae.prices&&Ae.prices.length>0){const ye=Ae.prices[0].amount,ae=l(L)[X];H+=ye*D,ae!=null&&ae.hasDiscount?(Y+=ae.discountedPrice*D,Ce=!0):Y+=ye*D}}}return{originalTotal:H,discountedTotal:Ce?Y:H,hasDiscount:Ce}}function oe(){if(l(ee)===0){_(w,!0),_(y," "),_(x," 1   .");return}zr.completeProductSelection();const H=[];for(const Ce in l(I))for(const fe in l(I)[Ce]){const Le=l(I)[Ce][fe];if(Le>0){const X=l(M)[Ce].find(D=>D.id===fe);X&&H.push({...X,quantity:Le})}}const Y=s().products.findIndex(Ce=>{var fe;return((fe=Ce.product)==null?void 0:fe.id)===l(a).id});Y>=0?er(Et,dt(s).products[Y]={product:l(a),variants:H,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}},dt(s)):er(Et,dt(s).products=[...s().products,{product:l(a),variants:H,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}}],dt(s)),Et.updateTotalAmounts(),_(w,!0),_(y," "),_(x,`${l(ee)}  .`),u()&&u()()}async function me(){var Y,Ce,fe,Le,X,D,Ae,ye,ae;if(!A())return;const H=o().productSelection;if(H&&H.product&&H.productId===A()){_(f,!0),_(g,null);try{_(h,await Yd.loadIntegratedProductData(A(),i().id)),console.log(" Edit : productDataStore   ( variants ):",{productId:A(),variantsCount:((fe=(Ce=(Y=l(h))==null?void 0:Y.product)==null?void 0:Ce.variants)==null?void 0:fe.length)||0,hasOptionValues:(Ae=(D=(X=(Le=l(h))==null?void 0:Le.product)==null?void 0:X.variants)==null?void 0:D[0])!=null&&Ae.option_values?"yes":"no"}),(ye=l(h))!=null&&ye.product&&Ao.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]})}catch(le){_(g,le instanceof Error?le.message:"   .")}finally{_(f,!1)}return}_(f,!0),_(g,null);try{if(_(h,await Yd.loadIntegratedProductData(A(),i().id)),(ae=l(h))!=null&&ae.product){const le=s().products.find(Ee=>{var Me;return((Me=Ee.product)==null?void 0:Me.id)===l(h).product.id});if(le&&le.variants.length>0){const Ee={},Me=l(h).product.options[0].id;le.variants.forEach(ze=>{var ve;if(!ze||!ze.option_values||!Array.isArray(ze.option_values))return;const Se=ze.option_values.find(Oe=>Oe.option_value&&Oe.option_value.option?Oe.option_value.option.id===Me:Oe.option_id?Oe.option_id===Me:!1);if(Se){const Oe=((ve=Se.option_value)==null?void 0:ve.value)||Se.value||"";Ee[Oe]||(Ee[Oe]=[]),Ee[Oe].push(ze)}});for(const ze in Ee)Z(ze),Ee[ze].forEach(Se=>{l(I)[ze]&&Cr(I,l(I)[ze][Se.id]=Se.quantity||0)});_(I,{...l(I)}),xe()}}}catch(le){_(g,le instanceof Error?le.message:"   .")}finally{_(f,!1)}}function B(){const H=o();if(!(H!=null&&H.productSelection)||!l(a))return;const Y=H.productSelection;if(_(C,[...Y.selectedColors]),_(I,{...Y.quantityByVariant}),_(ee,Y.totalQuantity),d()&&d(),l(C).length>0&&l(a)&&l(a).variants){_(M,{});const Ce=l(a).options[0].id;Object.keys(Y.quantityByVariant||{}).forEach(Le=>{const X=l(a).variants.filter(D=>{var Ae;return(Ae=D.option_values)==null?void 0:Ae.some(ye=>ye.option_value&&ye.option_value.option?ye.option_value.option.id===Ce&&ye.option_value.value===Le:ye.option_id?ye.option_id===Ce&&ye.value===Le:!1)});X.length>0&&Cr(M,l(M)[Le]=X)})}_(M,{...l(M)}),iA(W),Object.keys(l(M)).length>0&&zr.update(Ce=>!Ce||!Ce.productSelection?Ce:{...Ce,productSelection:{...Ce.productSelection,variantsByColor:l(M)}}),l(ee)>0&&te()}function F(){R=zr.subscribe(H=>{if(H!=null&&H.productSelection&&H.productId===A()){const Y=H.productSelection;if(!l(a)||!l(a).variants)return;if(_(C,[...Y.selectedColors]),_(I,{...Y.quantityByVariant}),_(ee,Y.totalQuantity),l(a)&&l(a).variants&&l(C).length>0){d()&&d();const Ce={},fe=l(a).options[0].id;if(Object.keys(Y.quantityByVariant||{}).forEach(X=>{const D=l(a).variants.filter(Ae=>{var ye;return(ye=Ae.option_values)==null?void 0:ye.some(ae=>ae.option_value&&ae.option_value.option?ae.option_value.option.id===fe&&ae.option_value.value===X:ae.option_id?ae.option_id===fe&&ae.value===X:!1)});D.length>0&&(Ce[X]=D)}),_(M,Ce),iA(W),!pe){const X=Object.keys(Y.variantsByColor||{}).sort(),D=Object.keys(Ce).sort();if(JSON.stringify(X)!==JSON.stringify(D)){pe=!0;try{console.log(" Store variantsByColor  ( ):",{before:X.length,after:D.length,beforeKeys:X,afterKeys:D}),zr.update(ye=>!ye||!ye.productSelection?ye:{...ye,productSelection:{...ye.productSelection,variantsByColor:Ce}})}finally{setTimeout(()=>{pe=!1},0)}}}}else l(C).length===0&&(_(M,{}),iA(W));Y.needsDiscountRecalculation&&l(ee)>0&&setTimeout(()=>{te()},0)}})}$n(async()=>{d()&&d()!=="temp"||zr.initialize(A(),d()),F(),await me(),B()}),as(()=>{R&&R()}),tr(()=>(o(),Hn(A()),l(h)),()=>{var H,Y,Ce;(Y=(H=o())==null?void 0:H.productSelection)!=null&&Y.product&&o().productSelection.productId===A()&&(!l(h)||((Ce=l(h).product)==null?void 0:Ce.id)!==o().productSelection.product.id)&&_(h,{product:o().productSelection.product,addons:o().productSelection.addons||[],addonItems:o().productSelection.addonItems||[]})}),tr(()=>l(h),()=>{var H;_(a,((H=l(h))==null?void 0:H.product)||null)}),tr(()=>(l(a),l(C),Hn(d()),l(W)),()=>{var H,Y;if(l(a)&&l(a).variants&&l(C).length>0){const Ce=d()&&d()!=="temp";console.log(` Reactive: product  , variantsByColor  (${Ce?"Edit":"Create"} )`,{productId:l(a).id,variantsCount:l(a).variants.length,selectedColors:l(C),firstVariant:l(a).variants[0],hasOptionValues:!!((H=l(a).variants[0])!=null&&H.option_values)});const fe={},Le=(Y=l(a).options[0])==null?void 0:Y.id;Le&&(l(C).forEach(X=>{const D=l(a).variants.filter(Ae=>{var ye;return l(C).indexOf(X)===0&&l(a).variants.indexOf(Ae),(ye=Ae.option_values)==null?void 0:ye.some(ae=>ae.option_value&&ae.option_value.option?ae.option_value.option.id===Le&&ae.option_value.value===X:ae.option_id?ae.option_id===Le&&ae.value===X:!1)});D.length>0&&(fe[X]=D)}),_(M,fe),iA(W))}}),tr(()=>(o(),l(L),l(W)),()=>{var H,Y;if((Y=(H=o())==null?void 0:H.productSelection)!=null&&Y.variantDiscounts){const Ce=o().productSelection.variantDiscounts,fe=Object.keys(l(L)).sort(),Le=Object.keys(Ce).sort();(JSON.stringify(fe)!==JSON.stringify(Le)||Object.keys(Ce).some(D=>JSON.stringify(l(L)[D])!==JSON.stringify(Ce[D])))&&(_(L,{...Ce}),iA(W))}}),bo(),nn();var E=O9(),T=lt(E),P=m(T);{var O=H=>{var Y=w9();U(H,Y)},j=H=>{var Y=Lt(),Ce=lt(Y);{var fe=X=>{var D=y9(),Ae=m(D),ye=z(m(Ae),2),ae=z(m(ye),2),le=m(ae),Ee=z(Ae,2);ke(()=>Qe(le,l(g))),At("click",Ee,me),U(X,D)},Le=X=>{var D=Lt(),Ae=lt(D);{var ye=ae=>{var le=k9(),Ee=lt(le),Me=m(Ee),ze=m(Me),Se=z(Me,2),ve=m(Se),Oe=m(ve),Ne=z(ve,2);{var _e=he=>{var De=b9();const ot=at(se);var Ge=m(De),Je=z(Ge);{var rt=ht=>{var $e=_9();U(ht,$e)};be(Je,ht=>{l(ot).hasDiscount&&ht(rt)})}ke(()=>Qe(Ge,` : ${l(ee)??""} `)),U(he,De)};be(Ne,he=>{l(ee)>0&&he(_e)})}var q=z(Ee,2);{var de=he=>{var De=S9(),ot=z(m(De),2);nr(ot,5,()=>l(a).options[0].values,gr,(Ge,Je)=>{var rt=C9();const ht=at(()=>l(C).includes(l(Je).value));var $e=m(rt),st=m($e),Bt=m(st);{var Ct=yt=>{var mt=z9(),Vt=lt(mt),ir=z(Vt,2);{var qt=Gt=>{var ar=x9();U(Gt,ar)};be(ir,Gt=>{l(ht)&&Gt(qt)})}ke(()=>{cr(Vt,"src",l(Je).image),cr(Vt,"alt",l(Je).value),Tr(Vt,`odz-w-12 odz-h-12 odz-object-cover odz-rounded-lg odz-shadow-sm
                                                   ${(l(ht)?"odz-ring-2 odz-ring-red-400 odz-ring-offset-2":"")??""}`)}),U(yt,mt)};be(Bt,yt=>{l(Je).image&&yt(Ct)})}var Tt=z(st,2),wt=m(Tt),Ze=z(Tt,2),kt=m(Ze);{var It=yt=>{var mt=Lt();const Vt=at(()=>Object.values(l(I)[l(Je).value]||{}).reduce((Gt,ar)=>Gt+ar,0));var ir=lt(mt);{var qt=Gt=>{var ar=B9(),St=m(ar),ft=m(St);ke(()=>Qe(ft,`${l(Vt)??""}`)),U(Gt,ar)};be(ir,Gt=>{l(Vt)>0&&Gt(qt)})}U(yt,mt)};be(kt,yt=>{var mt;l(ht)&&((mt=l(M)[l(Je).value])==null?void 0:mt.length)>0&&l(W)>=0&&yt(It)})}var jt=z(kt,2),et=m(jt);ke(()=>{Tr(rt,`odz-w-full odz-transition-all odz-duration-200 odz-ease-in-out
                                   ${(l(ht)?"odz-bg-gradient-to-r odz-from-red-50 odz-to-rose-50 odz-border-2 odz-border-red-400 odz-shadow-md":"odz-bg-white odz-border-2 odz-border-gray-200 hover:odz-border-gray-300 hover:odz-shadow-sm")??""}
                                   odz-rounded-xl odz-p-3`),Tr(Tt,`odz-flex-1 odz-text-sm odz-font-semibold odz-text-gray-700 odz-text-left
                                            ${(l(ht)?"odz-text-red-700":"")??""}`),Qe(wt,l(Je).value),Tr(jt,`odz-transition-transform odz-duration-300
                                               ${(l(ht)?"odz-rotate-90":"")??""}`),Y4(et,`odz-w-4 odz-h-4 odz-text-gray-400
                                                   ${(l(ht)?"odz-text-red-500":"")??""}`)}),At("click",rt,()=>Z(l(Je).value)),U(Ge,rt)}),U(he,De)};be(q,he=>{l(a).options.length>0&&he(de)})}var ue=z(q,2);{var Fe=he=>{var De=P9();nr(De,5,()=>l(C),gr,(ot,Ge)=>{var Je=L9();const rt=at(()=>l(M)[l(Ge)]||[]),ht=at(()=>l(a).options[0].values.find(jt=>jt.value===l(Ge)));var $e=m(Je),st=m($e);{var Bt=jt=>{var et=E9(),yt=m(et);ke(()=>{cr(yt,"src",l(ht).image),cr(yt,"alt",l(Ge))}),U(jt,et)};be(st,jt=>{var et;(et=l(ht))!=null&&et.image&&jt(Bt)})}var Ct=z(st,2),Tt=m(Ct),wt=m(Tt),Ze=z($e,2);{var kt=jt=>{var et=Q9();nr(et,5,()=>l(rt),gr,(yt,mt)=>{var Vt=U9();const ir=at(()=>Be(l(mt))),qt=at(()=>{var pr;return((pr=l(I)[l(Ge)])==null?void 0:pr[l(mt).id])||0}),Gt=at(()=>l(L)[l(mt).id]),ar=at(()=>l(qt)>0);var St=m(Vt),ft=m(St);{var Dt=pr=>{var yr=F9();U(pr,yr)};be(ft,pr=>{var yr;l(ar)&&((yr=l(Gt))!=null&&yr.hasDiscount)&&pr(Dt)})}var Yt=z(ft,2),dr=m(Yt),ur=m(dr),hr=z(dr,2),vr=m(hr);{var fn=pr=>{D5(pr,{get originalPrice(){return l(mt).prices[0].amount},get finalPrice(){return l(Gt).discountedPrice},hasDiscount:!0,size:"sm"})},pn=pr=>{var yr=I9(),Gr=m(yr);ke(on=>Qe(Gr,`${on??""}`),[()=>Er(l(mt).prices[0].amount)],at),U(pr,yr)};be(vr,pr=>{var yr;(yr=l(Gt))!=null&&yr.hasDiscount&&l(qt)>0?pr(fn):pr(pn,!1)})}var kr=z(Yt,2),wr=m(kr),Vr=z(wr,2),Rr=z(Vr,2);ke(()=>{Tr(St,`odz-bg-white odz-border-2 odz-rounded-xl odz-p-2 odz-transition-all odz-duration-200
                                                    ${(l(ar)?"odz-border-red-300 odz-shadow-lg odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md")??""}`),Tr(dr,`odz-bg-gradient-to-r odz-from-slate-600 odz-to-slate-800 odz-text-white
                                                           odz-px-3 odz-py-1 odz-rounded-lg odz-text-sm odz-font-bold odz-shadow-sm
                                                           ${(l(ar)?"odz-from-red-500 odz-to-red-700":"")??""}`),Qe(ur,l(ir)),Tr(wr,`odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150
                                                           ${(l(qt)<=0?"odz-opacity-50 odz-cursor-not-allowed":"hover:odz-scale-110")??""}`),wr.disabled=l(qt)<=0,Jm(Vr,l(qt))}),At("click",wr,()=>k(l(Ge),l(mt).id)),At("input",Vr,pr=>J(pr,l(Ge),l(mt).id)),At("click",Rr,()=>N(l(Ge),l(mt).id)),U(yt,Vt)}),U(jt,et)},It=jt=>{var et=T9();U(jt,et)};be(Ze,jt=>{l(rt).length>0&&l(W)>=0?jt(kt):jt(It,!1)})}ke(()=>Qe(wt,l(Ge))),U(ot,Je)}),U(he,De)};be(ue,he=>{l(C).length>0&&he(Fe)})}var Pe=z(ue,2);const it=at(()=>d()||null),We=at(()=>c()!==void 0?c():null),je=at(()=>l(ee)>0);Tp(Pe,{get productId(){return A()},get estimateId(){return l(it)},get idx(){return l(We)},debugSource:"product-tab",get showNextButton(){return l(je)},nextButtonText:"  ",onNext:oe}),ke(()=>{cr(ze,"src",l(a).thumbnail),cr(ze,"alt",l(a).title),Qe(Oe,l(a).title)}),U(ae,le)};be(Ae,ae=>{l(a)&&ae(ye)},!0)}U(X,D)};be(Ce,X=>{l(g)?X(fe):X(Le,!1)},!0)}U(H,Y)};be(P,H=>{l(f)?H(O):H(j,!1)})}var $=z(T,2);Uc($,{get isOpen(){return l(w)},set isOpen(H){_(w,H)},get title(){return l(y)},set title(H){_(y,H)},get message(){return l(x)},set message(H){_(x,H)},$$legacy:!0}),U(n,E),Zr(),r()}var N9=V('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),M9=V('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div></div>'),H9=V('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-overflow-hidden odz-rounded-lg odz-border odz-border-gray-200"><img class="odz-w-full odz-h-full odz-object-cover" loading="lazy"></div>'),j9=V('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-bg-gray-100 odz-rounded-lg odz-border odz-border-gray-200 odz-flex odz-items-center odz-justify-center"><svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div>'),R9=V('<label><input type="radio" class="odz-w-4 odz-h-4 odz-text-red-600 odz-border-gray-300 odz-focus:ring-red-500"> <div class="odz-flex-1"><span class="odz-font-medium odz-text-gray-900"> </span> <div class="odz-text-sm odz-text-red-600 odz-font-semibold"> </div></div></label>'),$9=V('<div class="odz-mt-4 odz-p-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><svg class="odz-w-4 odz-h-4 odz-text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="odz-text-green-800">: <strong> </strong> </span></div></div>'),q9=V('<div class="odz-border odz-border-gray-200 odz-rounded-lg odz-p-6"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><!> <h4 class="odz-text-md odz-font-semibold odz-text-gray-800"> </h4></div> <fieldset class="odz-space-y-3"><legend class="odz-sr-only"> </legend> <!></fieldset> <!></div>'),K9=V('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-mb-6 odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </h3> <div class="odz-space-y-8"></div></div>'),V9=V('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-xl odz-p-8 odz-text-center"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <h3 class="odz-text-lg odz-font-semibold odz-text-gray-700 odz-mb-2"> </h3> <p class="odz-text-gray-500">     .</p></div>'),G9=V("<!> <!>",1),W9=V('<div class="odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-yellow-800">    </h3> <p class="odz-text-sm odz-text-yellow-600"> ID   .</p></div></div></div>'),X9=V('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-md odz-p-8"><div class="odz-text-center odz-mb-8"><h3 class="odz-text-lg odz-font-medium odz-text-gray-800">   .</h3></div> <div class="odz-space-y-3"><button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-gray-900 hover:odz-bg-gray-800 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors odz-flex odz-items-center odz-justify-center odz-gap-3"><div class="odz-w-6 odz-h-6 odz-bg-green-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>   </button> <button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors">  </button></div></div></div>'),Y9=V('<div class="odz-addon-tab"><div class="odz-mb-6"><h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-600">  </p></div> <div class="odz-space-y-6"><!></div></div> <!>',1);function J9(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=()=>dn(zr,"$fixedEstimateStore",t),i=()=>dn(gi,"$shopStore",t);let a=gt(e,"productId",8),A=gt(e,"estimateId",8,void 0),d=gt(e,"idx",8,void 0),c=gt(e,"onSave",8,void 0);gt(e,"onNext",8,void 0);let u=gt(e,"onPrev",8,void 0),h=null,f=Ie(null),g=Ie(!1),w=Ie(null),y=Ie({}),x=Ie(!1),C="";function I(B,F,E){var T,P;zr.toggleAddonSelection(B,F,E),((T=l(y)[B])==null?void 0:T.productId)===F&&((P=l(y)[B])==null?void 0:P.variantId)===E?delete l(y)[B]:Cr(y,l(y)[B]={productId:F,variantId:E}),_(y,{...l(y)}),M(),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("addonSelectionUpdate",{detail:{productId:F,addonId:B,variantId:E,selectedAddons:{...l(y)},timestamp:Date.now(),source:"addon.svelte"}})),console.log(" addonSelectionUpdate   (variantId ):",{productId:F,addonId:B,variantId:E,selectedAddonsCount:Object.keys(l(y)).length}))}function M(){const B=o().index;B>=0&&o().products[B]&&(er(Et,dt(o).products[B].addons={...l(y)},dt(o)),Ob(Et,{...o()}))}async function L(){if(!a())return;const B=s().productSelection;if(B&&B.product&&B.productId===a()){_(f,{product:B.product,addons:B.addons||[],addonItems:B.addonItems||[]}),_(g,!1);return}_(g,!0),_(w,null);try{_(f,await Ao.loadIntegratedProductData(a(),i().id))}catch(F){_(w,F instanceof Error?F.message:"   .")}finally{_(g,!1)}}function ee(){const B=s();if(B&&B.productId===a()&&B.addonSelection&&B.addonSelection.selectedAddons){const F={...B.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,_(y,F),_(y,{...l(y)})}}function W(){h=zr.subscribe(B=>{if(B&&B.productId===a())if(B.addonSelection&&B.addonSelection.selectedAddons){const F={...B.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,JSON.stringify(l(y))!==JSON.stringify(F)&&(_(y,F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("addonSelectionChanged",{detail:{selectedAddons:F}})))}else Object.keys(l(y)).length>0&&_(y,{})})}async function R(B){const F={printMethod:null,simplePrintState:null,detailedPrintState:null,simplePrintKeys:[],detailedPrintKeys:[],allProductKeys:[],otherData:{}},E=Object.keys(sessionStorage).filter(T=>T.includes(B));return F.allProductKeys=E,E.forEach(T=>{var O;const P=sessionStorage.getItem(T);if(T.startsWith(`simplePrint_${B}`)){if(F.simplePrintKeys.push(T),P)try{F.simplePrintState=JSON.parse(P)}catch{F.simplePrintState=null}return}if(T.startsWith(`detailedPrint_${B}`)){if(F.detailedPrintKeys.push(T),P)try{F.detailedPrintState=JSON.parse(P)}catch{F.detailedPrintState=null}return}if(T.startsWith(`fixedEstimate_${B}`)&&P)try{const j=JSON.parse(P);(O=j.printSelection)!=null&&O.currentMethod&&(F.printMethod=j.printSelection.currentMethod)}catch{}try{F.otherData[T]=P&&JSON.parse(P)}catch{F.otherData[T]=P}}),F}async function Z(B,F,E,T){var ze,Se,ve,Oe,Ne,_e;const{shopData:P,customerData:O,fixedEstimateData:j,estimateStoreData:$}=B,H=new Date().toISOString(),Y={shop_id:(P==null?void 0:P.id)||null,sess:(P==null?void 0:P.sess)||null,customer_id:(P==null?void 0:P.customer_id)||null,name:(O==null?void 0:O.name)||(F==null?void 0:F.name)||null,order_name:(O==null?void 0:O.name)||(F==null?void 0:F.name)||null,order_phone:(O==null?void 0:O.phone)||(F==null?void 0:F.phone)||null,address1:(O==null?void 0:O.address1)||(F==null?void 0:F.address1)||null,address2:(O==null?void 0:O.address2)||(F==null?void 0:F.address2)||null,postcode:(O==null?void 0:O.postcode)||(F==null?void 0:F.postcode)||null,mall_type:(O==null?void 0:O.mallType)||(F==null?void 0:F.mallType)||null,upload_memo:($==null?void 0:$.uploadMemo)||null,status:"temp",created_at:H,updated_at:H},Ce=[];let fe=((ze=j==null?void 0:j.printSelection)==null?void 0:ze.currentMethod)||(E==null?void 0:E.printMethod)||"none";if(fe==="selection"&&(console.warn(' [prepareDataForDatabase] print_type "selection" . "none" .'),fe="none"),["simple","detailed","self-design","none"].includes(fe)||(console.warn(` [prepareDataForDatabase]   print_type: "${fe}". "none" .`),fe="none"),(Se=j==null?void 0:j.productSelection)!=null&&Se.quantityByVariant&&((ve=j==null?void 0:j.productSelection)!=null&&ve.variantsByColor)){const q=j.productSelection.quantityByVariant,de=j.productSelection.variantsByColor,ue=j.productSelection.variantDiscounts||{};for(const Fe in q){const Pe=q[Fe],it=de[Fe]||[];for(const We in Pe){const je=Pe[We];if(je>0){const he=it.find(De=>De.id===We);if(he){const De=he.prices&&he.prices.length>0?he.prices[0].amount:0,ot=ue[We];let Ge=De,Je=0,rt="amount",ht=0,$e="minus",st=null,Bt=null;if(ot&&ot.hasDiscount){Ge=ot.discountedPrice,Je=ot.discountAmount;const Ct=ot.discountInfo;Ct&&(rt=Ct.type||"amount",ht=Ct.value||0,$e=Ct.direction||"minus",st=Ct.min_quantity||null,Bt=Ct.max_quantity||null)}Ce.push({idx:0,variant_id:We,quantity:je,price:Ge,print_type:fe,original_price:De,discount_amount:Je,discount_type:rt,discount_value:ht,discount_direction:$e,discount_min_quantity:st,discount_max_quantity:Bt,product_id:T,created_at:H,updated_at:H})}}}}}if(Ce.length===0&&($!=null&&$.products)){const q=$.products.find(de=>{var ue;return((ue=de.product)==null?void 0:ue.id)===T});q&&q.variants&&q.variants.length>0&&q.variants.forEach((de,ue)=>{var Fe;if(de.quantity>0){const Pe=de.prices&&de.prices.length>0?de.prices[0].amount:0,it=(Fe=de.product)==null?void 0:Fe.quantity_discounts,We=ea(de.quantity,Pe,it),je=We.discountInfo;Ce.push({idx:ue,variant_id:de.id,quantity:de.quantity,price:We.discountedPrice,original_price:Pe,discount_amount:We.discountAmount,discount_type:(je==null?void 0:je.type)||"amount",discount_value:(je==null?void 0:je.value)||0,discount_direction:(je==null?void 0:je.direction)||"minus",discount_min_quantity:(je==null?void 0:je.min_quantity)||null,discount_max_quantity:(je==null?void 0:je.max_quantity)||null,product_id:T,created_at:H,updated_at:H})}})}const X=[];E.simplePrintState&&Array.isArray(E.simplePrintState)&&E.simplePrintState.forEach((q,de)=>{X.push({idx:0,object_id:q.objectId||`area-${de}`,title:q.title||`  ${de+1}`,print_method:q.printMethod||null,uploaded_files:q.uploadedFiles||null,file_metadata:q.savedFileInfo||null,price:q.price||0,created_at:H,updated_at:H})});const D=[],Ae=new Set,ye=((Oe=j==null?void 0:j.printSelection)==null?void 0:Oe.currentMethod)==="detailed"||Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0;async function ae(q,de){var ot,Ge,Je,rt;if(!q)return;const ue=((ot=q.template)==null?void 0:ot.id)??q.template_id??null,Fe=q.objectId??q.object_id??null;if(!ue&&!Fe||Fe&&Ae.has(Fe))return;let Pe=0;const it=q.price??0,We=Number(it);if(Number.isFinite(We)&&We>0)Pe=We;else try{const ht=((Ge=j==null?void 0:j.productSelection)==null?void 0:Ge.totalQuantity)||0;let $e=0,st=0;if(q.colors&&((Je=q.template)!=null&&Je.templateProduct)){const Bt=q.colors.length,Ct=q.template.templateProduct.template_product_variants.find(Tt=>Tt.color_count===Bt);if(Ct){const Tt=await cl(Ct.variant_id);if(Tt)if($e=Tt.prices[0].amount,Ct.min_quantity<=ht)if(st=$e*ht,q.template.templateProduct.product.quantity_discounts&&q.template.templateProduct.product.quantity_discounts.length>0){const wt=ea(ht,$e,q.template.templateProduct.product.quantity_discounts);Pe=wt.hasDiscount?wt.discountedPrice*ht:st}else Pe=st;else Pe=Ct.plate_price}}else if((rt=q.template)!=null&&rt.templateProduct){const Bt=q.template.templateProduct.template_product_variants[0];if(Bt){const Ct=await cl(Bt.variant_id);if(Ct)if($e=Ct.prices[0].amount,Bt.min_quantity<=ht)if(st=$e*ht,q.template.templateProduct.product.quantity_discounts&&q.template.templateProduct.product.quantity_discounts.length>0){const Tt=ea(ht,$e,q.template.templateProduct.product.quantity_discounts);Pe=Tt.hasDiscount?Tt.discountedPrice*ht:st}else Pe=st;else Pe=Bt.plate_price}}}catch{Pe=0}const je=q.discountInfo||{},he=je.discountDetails||je.discountInfo||{};D.push({idx:0,template_id:ue,variant_id:q.variant_id??null,price:Pe,colors:q.colors||null,uploads:q.uploads||null,name_sheet:q.nameSheet??q.name_sheet??null,object_id:Fe,original_price:je.originalPrice??q.original_price??null,discount_amount:je.discountAmount??q.discount_amount??null,discount_type:he.type??q.discount_type??null,discount_value:he.value??q.discount_value??null,discount_direction:he.direction??q.discount_direction??null,discount_min_quantity:he.min_quantity??q.discount_min_quantity??null,discount_max_quantity:he.max_quantity??q.discount_max_quantity??null,created_at:H,updated_at:H}),Fe&&Ae.add(Fe)}if(ye){if(Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0)for(let q=0;q<E.detailedPrintState.length;q++){const de=E.detailedPrintState[q];await ae(de)}if(D.length===0&&($!=null&&$.products)){const q=$.products.find(de=>{var ue;return((ue=de.product)==null?void 0:ue.id)===T});if(q!=null&&q.prints&&q.prints.length>0)for(let de=0;de<q.prints.length;de++)await ae(q.prints[de])}}const le=[],Ee=(Ne=j==null?void 0:j.addonSelection)==null?void 0:Ne.selectedAddons,Me=((_e=j==null?void 0:j.productSelection)==null?void 0:_e.totalQuantity)||0;return Ee&&Object.keys(Ee).length>0&&Object.entries(Ee).forEach(([q,de])=>{var Pe,it,We;let ue=0,Fe=0;if((it=(Pe=l(f))==null?void 0:Pe.addonProductsMap)!=null&&it[de.productId]){const he=(We=l(f).addonProductsMap[de.productId].variants)==null?void 0:We.find(De=>De.id===de.variantId);he&&he.prices&&he.prices.length>0&&(Fe=he.prices[0].amount||0,ue=Fe)}le.push({idx:0,addon_id:q,selected_product_id:de.productId,selected_variant_id:de.variantId,quantity:Me,price:ue,created_at:H,updated_at:H})}),{estimate:Y,estimate_items:Ce,estimate_simple_prints:X,estimate_prints:D,estimate_addon_items:le}}function Be(B){const F=[];return B.estimate.shop_id||F.push(" ID "),B.estimate_items.length===0&&F.push("  "),B.estimate_items.forEach((E,T)=>{E.variant_id||F.push(` ${T+1}:  ID `),(!E.quantity||E.quantity<=0)&&F.push(` ${T+1}:  `)}),B.estimate_simple_prints.forEach((E,T)=>{E.object_id||F.push(`  ${T+1}:  ID `)}),B.estimate_prints&&B.estimate_prints.length>0&&B.estimate_prints.forEach((E,T)=>{!E.template_id&&!E.object_id&&F.push(`  ${T+1}: template_id  object_id `)}),{isValid:F.length===0,errors:F}}async function N(){var B;try{let F=null,E=null,T=null,P=null,O=null;zr.subscribe(le=>{F=le})(),Ao.subscribe(le=>{E=le})(),Et.subscribe(le=>{T=le})(),Vl.subscribe(le=>{P=le})(),gi.subscribe(le=>{O=le})();const fe=await R(a()),Le={shopData:O,customerData:P,fixedEstimateData:F,extendedProductData:E,estimateStoreData:T},X={name:P==null?void 0:P.name,phone:P==null?void 0:P.phone,address1:P==null?void 0:P.address1,address2:P==null?void 0:P.address2,postcode:P==null?void 0:P.postcode,mallType:P==null?void 0:P.mallType},D=await Z(Le,X,fe,a()),Ae=Be(D);if(!Ae.isValid){alert(`   :

${Ae.errors.join(`
`)}

   .`);return}const ye=await _5(D,(P==null?void 0:P.mallType)||(X==null?void 0:X.mallType),O==null?void 0:O.customer_id,O==null?void 0:O.sess);if(ye.success){const le=`
   !

  : ${((B=ye.details)==null?void 0:B.estimateNumber)||"N/A"}
  ID: ${ye.estimateId}
  ID: ${a()}
   : ${D.estimate_items.length}
   : ${D.estimate_simple_prints.length}
   : ${D.estimate_prints.length}
  : ${D.estimate_addon_items.length}

   : ${new Date().toLocaleString()}

   !
                `.trim();_(x,!0),C=ye.estimateId}else{const le=`
   !

  ID: ${a()}
  : ${ye.error}

  : ${new Date().toLocaleString()}

    .
                `.trim();alert(le)}const ae={version:"1.0.0",timestamp:new Date().toISOString(),productId:a(),databaseData:D,validationResult:Ae,saveResult:ye,stores:{shopStore:O,customerStore:P,fixedEstimateStore:F,extendedProductDataStore:E,estimateStore:T},sessionStorageBackup:fe,integratedProductData:l(f),selectedAddons:l(y),formData:X};window.lastEstimateDataPackage=ae}catch(F){const E=`
     !

  : ${F instanceof Error?F.message:"   "}
  ID: ${a()}
  : ${new Date().toLocaleString()}

   .
            `.trim();alert(E)}}function k(){_(x,!1),zr.reset(),Ao.reset(),Et.reset(),_(y,{}),_(f,null),Object.keys(sessionStorage).filter(F=>F.includes(a())).forEach(F=>sessionStorage.removeItem(F)),zr.setCurrentStep("product"),setTimeout(()=>{window.location.href="/"},100)}function J(){_(x,!1);const B=Object.keys(sessionStorage).filter(F=>F.includes(a()));B.forEach(F=>sessionStorage.removeItem(F)),console.log(" SessionStorage   (  ):",B),window.location.href="/odiz/estimate.php"}$n(async()=>{var E;const B=s();(!B||B.productId!==a())&&zr.initialize(a(),A()),W(),await L(),ee();const F=o().index;if(F>=0&&((E=o().products[F])!=null&&E.addons)){const T=o().products[F].addons;Object.keys(T).length>0&&_(y,{...T})}}),as(()=>{h&&h()}),nn();var ne=Y9(),ge=lt(ne),pe=z(m(ge),2),xe=m(pe);{var te=B=>{var F=N9();U(B,F)},se=B=>{var F=Lt(),E=lt(F);{var T=O=>{var j=M9(),$=m(j),H=z(m($),2),Y=z(m(H),2),Ce=m(Y);ke(()=>Qe(Ce,l(w))),U(O,j)},P=O=>{var j=Lt(),$=lt(j);{var H=Ce=>{var fe=G9(),Le=lt(fe);{var X=Ee=>{var Me=K9(),ze=z(m(Me),2);nr(ze,5,()=>l(f).addons,Se=>Se.id,(Se,ve)=>{var Oe=q9(),Ne=m(Oe),_e=m(Ne);{var q=ot=>{var Ge=H9(),Je=m(Ge);ke(()=>{cr(Je,"src",l(ve).items[0].addon_product.thumbnail),cr(Je,"alt",l(ve).name)}),Ub(Je),At("error",Je,rt=>{const ht=rt.target;ht.style.display="none",ht.parentElement&&(ht.parentElement.innerHTML=`
                                                        <div class="odz-w-full odz-h-full odz-bg-gray-100 odz-flex odz-items-center odz-justify-center">
                                                            <svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                                            </svg>
                                                        </div>
                                                    `)}),U(ot,Ge)},de=ot=>{var Ge=j9();U(ot,Ge)};be(_e,ot=>{l(ve).items&&l(ve).items.length>0&&l(ve).items[0].addon_product.thumbnail?ot(q):ot(de,!1)})}var ue=z(_e,2),Fe=m(ue),Pe=z(Ne,2),it=m(Pe),We=m(it),je=z(it,2);nr(je,1,()=>l(ve).items,ot=>ot.id,(ot,Ge)=>{var Je=Lt(),rt=lt(Je);{var ht=$e=>{var st=Lt(),Bt=lt(st);nr(Bt,1,()=>l(Ge).addon_product.variants,Ct=>Ct.id,(Ct,Tt)=>{var wt=R9();const Ze=at(()=>{var qt,Gt;return((qt=l(y)[l(ve).id])==null?void 0:qt.productId)===l(Ge).addon_product.id&&((Gt=l(y)[l(ve).id])==null?void 0:Gt.variantId)===l(Tt).id}),kt=at(()=>l(Tt).prices&&l(Tt).prices.length>0?l(Tt).prices[0].amount:0);var It=m(wt),jt=mc(()=>(()=>{var dr,ur;const qt=l(ve).id,Gt=l(ve).name,ar=l(Ge).addon_product.id,St=l(Ge).addon_product.title,ft=l(Tt).id,Dt=l(Tt).title,Yt=(ur=(dr=l(Tt).prices)==null?void 0:dr[0])==null?void 0:ur.amount;return hr=>{console.log(" Radio button clicked ( ):",{addonId:qt,addonName:Gt,productId:ar,productTitle:St,variantId:ft,variantTitle:Dt,variantPrice:Yt,radioId:hr.target.id,timestamp:Date.now()}),I(qt,ar,ft)}})()),et=z(It,2),yt=m(et),mt=m(yt),Vt=z(yt,2),ir=m(Vt);ke(qt=>{cr(wt,"for",`addon-${l(ve).id??""}-${l(Ge).id??""}-${l(Tt).id??""}`),Tr(wt,`odz-flex odz-items-center odz-gap-4 odz-p-4 odz-border-2 odz-rounded-lg odz-cursor-pointer odz-transition-all
                                                           ${(l(Ze)?"odz-border-red-500 odz-bg-red-50":"odz-border-gray-200 odz-bg-white hover:odz-border-gray-300")??""}`),cr(It,"id",`addon-${l(ve).id??""}-${l(Ge).id??""}-${l(Tt).id??""}`),cr(It,"name",`addon-${l(ve).id??""}`),Du(It,l(Ze)),Qe(mt,l(Tt).title||l(Ge).addon_product.title),Qe(ir,` ${qt??""}`)},[()=>Er(l(kt))],at),At("change",It,function(...qt){var Gt;(Gt=l(jt))==null||Gt.apply(this,qt)}),U(Ct,wt)}),U($e,st)};be(rt,$e=>{l(Ge).addon_product.variants&&l(Ge).addon_product.variants.length>0&&$e(ht)})}U(ot,Je)});var he=z(Pe,2);{var De=ot=>{var Ge=Lt();const Je=at(()=>l(ve).items.find(st=>st.addon_product.id===l(y)[l(ve).id].productId)),rt=at(()=>{var st,Bt;return(Bt=(st=l(Je))==null?void 0:st.addon_product.variants)==null?void 0:Bt.find(Ct=>Ct.id===l(y)[l(ve).id].variantId)});var ht=lt(Ge);{var $e=st=>{var Bt=$9(),Ct=m(Bt),Tt=z(m(Ct),2),wt=z(m(Tt)),Ze=m(wt),kt=z(wt);ke(It=>{Qe(Ze,l(rt).title||l(Je).addon_product.title),Qe(kt,` ( ${It??""})`)},[()=>{var It,jt;return Er(((jt=(It=l(rt).prices)==null?void 0:It[0])==null?void 0:jt.amount)||0)}],at),U(st,Bt)};be(ht,st=>{l(Je)&&l(rt)&&st($e)})}U(ot,Ge)};be(he,ot=>{l(y)[l(ve).id]&&ot(De)})}ke(()=>{Qe(Fe,l(ve).name),Qe(We,`${l(ve).name??""} `)}),U(Se,Oe)}),U(Ee,Me)},D=Ee=>{var Me=V9();U(Ee,Me)};be(Le,Ee=>{l(f).addons.length>0?Ee(X):Ee(D,!1)})}var Ae=z(Le,2);const ye=at(()=>A()||null),ae=at(()=>d()!==void 0?d():null),le=at(()=>({type:"double",buttons:[{text:" ",action:u()||(()=>{}),style:"secondary",icon:"arrow-left"},{text:" ",action:A()&&typeof d()=="number"&&c()?c():N,style:"primary",icon:"save",size:"large"}]}));Tp(Ae,{get productId(){return a()},get estimateId(){return l(ye)},get idx(){return l(ae)},debugSource:"addon-tab",get buttonConfig(){return l(le)}}),U(Ce,fe)},Y=Ce=>{var fe=W9();U(Ce,fe)};be($,Ce=>{l(f)?Ce(H):Ce(Y,!1)},!0)}U(O,j)};be(E,O=>{l(w)?O(T):O(P,!1)},!0)}U(B,F)};be(xe,B=>{l(g)?B(te):B(se,!1)})}var oe=z(ge,2);{var me=B=>{var F=X9(),E=m(F),T=z(m(E),2),P=m(T),O=z(P,2);At("click",P,k),At("click",O,J),U(B,F)};be(oe,B=>{l(x)&&B(me)})}U(n,ne),Zr(),r()}var Z9=V('<button><div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><span class="odz-hidden sm:odz-inline"> </span></div></button>'),e$=V('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><div class="odz-w-full"><div class="odz-flex odz-w-full odz-border-b odz-border-gray-200"></div></div>  <div><div><!></div> <div><!></div> <div><!></div></div></div>');function Yp(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(gi,"$shopStore",t);let s=gt(e,"productId",8),i=gt(e,"estimateId",8,void 0),a=gt(e,"idx",8,void 0),A=gt(e,"onSave",8,void 0),d=Ie("product"),c=null,u=null,h=!1,f=null;const g=[{id:"product",label:"",description:"   "},{id:"print",label:"",description:"   "},{id:"addon",label:"",description:"  "}];function w(J){var xe,te;const ne=l(d),ge=J;if(_(d,ge),zr.setCurrentStep(ge),Ao.getProductData(s())&&(Ao.saveToSession(s()),typeof window<"u"))try{const se=`tab-state-${s()}`,oe={currentTab:ge,previousTab:ne,timestamp:Date.now(),productId:s()};window.sessionStorage.setItem(se,JSON.stringify(oe))}catch{}if(typeof window<"u")try{let se;const oe=[i()&&a()!==void 0?`fixedEstimate_${s()}_${i()}_${a()}`:null,i()?`fixedEstimate_${s()}_${i()}`:null,a()!==void 0?`fixedEstimate_${s()}_${a()}`:null,`fixedEstimate_${s()}`].filter(Boolean);console.log("   - sessionStorage  :",{estimateId:i(),idx:a(),productId:s(),storageKeys:oe});for(const B of oe)try{const F=window.sessionStorage.getItem(B);if(F){const E=JSON.parse(F);if(console.log(" sessionStorage  :",{key:B,currentMethod:(xe=E==null?void 0:E.printSelection)==null?void 0:xe.currentMethod}),(te=E==null?void 0:E.printSelection)!=null&&te.currentMethod&&E.printSelection.currentMethod!=="selection"){se=E.printSelection.currentMethod,console.log(" toMethod :",se);break}}}catch{}const me=new CustomEvent("printAmountRecalc",{detail:{productId:s(),fromTab:ne,toTab:ge,toMethod:se,estimateId:i(),idx:a(),timestamp:Date.now(),source:"tab-change"}});window.dispatchEvent(me)}catch{}console.log("   ( ):",{from:ne,to:ge,productId:s(),sessionSaved:!0})}function y(){l(d)==="product"?w("print"):l(d)==="print"&&w("addon")}function x(){if(typeof window>"u")return!1;try{const J=`tab-state-${s()}`,ne=window.sessionStorage.getItem(J);if(ne){const ge=JSON.parse(ne);if(ge.productId===s()&&ge.currentTab)return _(d,ge.currentTab),!0}}catch{}return!1}async function C(){try{await Ao.loadIntegratedProductData(s(),o().id)}catch{}}$n(async()=>{const J=i()&&i()!=="temp";await C();const ne=x();h=ne,J||zr.initialize(s()),ne&&!J&&zr.setCurrentStep(l(d)),c=zr.subscribe(ge=>{ge&&ge.productId===s()&&!h&&(ge.currentStep,l(d))}),u=Ao.subscribe(ge=>{}),f=ge=>{const pe=ge.detail;pe&&["product","print","addon"].includes(pe)&&w(pe)},typeof window<"u"&&window.addEventListener("changeTab",f)}),as(()=>{c&&c(),u&&u(),typeof window<"u"&&f&&window.removeEventListener("changeTab",f)}),nn();var I=e$(),M=m(I),L=m(M);nr(L,5,()=>g,gr,(J,ne)=>{var ge=Z9(),pe=m(ge),xe=m(pe),te=m(xe);ke(()=>{Tr(ge,`odz-flex-1 odz-px-4 odz-py-3 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2
                           ${(l(d)===l(ne).id?"odz-text-red-600 odz-border-red-400 odz-bg-red-50":"odz-text-gray-600 odz-border-transparent hover:odz-text-gray-800 hover:odz-border-gray-300")??""}`),Qe(te,l(ne).label)}),At("click",ge,()=>w(l(ne).id)),U(J,ge)});var ee=z(M,2),W=m(ee),R=m(W);D9(R,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:()=>w("print")});var Z=z(W,2),Be=m(Z);qx(Be,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y});var N=z(Z,2),k=m(N);J9(k,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y,get onSave(){return A()}}),ke(()=>{il(W,"odz-hidden",l(d)!=="product"),il(Z,"odz-hidden",l(d)!=="print"),il(N,"odz-hidden",l(d)!=="addon")}),U(n,I),Zr(),r()}var t$=V('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),r$=V('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),n$=V('<dialog class="odz-modal odz-modal-open odz-backdrop:odz-bg-black odz-backdrop:odz-bg-opacity-50"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900">  </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"></button></div></div></dialog>');function o$(n,e){Jr(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"estimateId",8),o=gt(e,"idx",8),s=gt(e,"productId",8),i=gt(e,"onClose",8),a=gt(e,"onSave",8),A=Ie(!0),d=Ie(""),c=Ie();async function u(){var k,J,ne,ge,pe;try{_(A,!0),_(d,"");const xe=await b5(r(),o());if(!xe.items||xe.items.length===0)throw new Error(`     . (estimateId: ${r()}, idx: ${o()})`);if(!((k=xe.items[0])!=null&&k.product_id))throw new Error(" ID   .");if(!xe.items.some(F=>F.variant&&F.variant.id)){const F=xe.items.map(E=>E.variant_id).filter(Boolean);throw F.length===0?new Error("    .  ."):new Error(`     . ( ID: ${F[0]})
     .  .`)}const se=z5(xe);if(typeof window<"u"){const F=r()||"temp";[`fixedEstimate_${s()}_${F}_${o()}`,`simplePrint_${s()}_${F}`,`detailedPrint_${s()}_${F}`,`fixedEstimate_${s()}`,`simplePrint_${s()}`,`detailedPrint_${s()}`].forEach(T=>{window.sessionStorage.removeItem(T)})}const oe=r()||"temp",me=Date.now().toString(36)+Math.random().toString(36).substr(2),B={productId:s(),productSelection:se.fixedEstimateData.productSelection,printSelection:se.fixedEstimateData.printSelection||null,addonSelection:se.fixedEstimateData.addonSelection||null,additionalInfo:se.fixedEstimateData.additionalInfo||null,currentStep:"product",isDebugMode:!0,sessionId:me,estimateId:oe};if(typeof window<"u"){const{sessionStorageData:F}=se,E=`fixedEstimate_${s()}_${oe}_${o()}`;if(window.sessionStorage.setItem(E,JSON.stringify(B)),console.log(" sessionStorage   ( FixedEstimateState ):",{key:E,idx:o(),sessionId:B.sessionId,hasProductId:!!B.productId,quantityByVariant:se.fixedEstimateData.productSelection.quantityByVariant}),F.simplePrintState){const T=`simplePrint_${s()}_${oe}`;window.sessionStorage.setItem(T,JSON.stringify(F.simplePrintState))}if(F.detailedPrintState.length>0&&((J=B.printSelection)==null?void 0:J.currentMethod)==="detailed"){const T=`detailedPrint_${s()}_${oe}`;window.sessionStorage.setItem(T,JSON.stringify(F.detailedPrintState))}}zr.set(B),console.log(" fixedEstimateStore   ( ),    ...",{sessionId:B.sessionId,hasProductId:!!B.productId,hasProductSelection:!!B.productSelection,selectedColorsCount:((ge=(ne=B.productSelection)==null?void 0:ne.selectedColors)==null?void 0:ge.length)||0,totalQuantity:((pe=B.productSelection)==null?void 0:pe.totalQuantity)||0}),await new Promise(F=>setTimeout(F,50)),_(A,!1)}catch(xe){xe instanceof Error?_(d,xe.message):_(d,"    ."),_(A,!1)}}function h(){if(typeof window<"u"){const k=r()||"temp";[`fixedEstimate_${s()}_${k}_${o()}`,`simplePrint_${s()}_${k}`,`detailedPrint_${s()}_${k}`,`tab-state-${s()}`].forEach(ne=>{window.sessionStorage.removeItem(ne)})}zr.reset(),i()()}function f(){a()()}function g(k){k.key==="Escape"&&h()}function w(k){k.target===l(c)&&h()}as(()=>{if(typeof window<"u"){const k=r()||"temp";[`fixedEstimate_${s()}_${k}_${o()}`,`simplePrint_${s()}_${k}`,`detailedPrint_${s()}_${k}`,`tab-state-${s()}`].forEach(ne=>{window.sessionStorage.removeItem(ne)})}zr.reset()}),tr(()=>(l(c),Hn(t())),()=>{l(c)&&(t()?(l(c).showModal(),u()):l(c).close())}),bo(),nn();var y=n$(),x=m(y),C=m(x),I=z(m(C),2),M=m(I);ed(M,{class:"odz-w-5 odz-h-5"});var L=z(C,2),ee=m(L);{var W=k=>{var J=t$();U(k,J)},R=k=>{var J=Lt(),ne=lt(J);{var ge=xe=>{var te=r$(),se=z(m(te),2),oe=m(se);ke(()=>Qe(oe,l(d))),U(xe,te)},pe=xe=>{Yp(xe,{get productId(){return s()},get estimateId(){return r()},get idx(){return o()},onSave:f})};be(ne,xe=>{l(d)?xe(ge):xe(pe,!1)},!0)}U(k,J)};be(ee,k=>{l(A)?k(W):k(R,!1)})}var Z=z(L,2),Be=m(Z),N=z(Be,2);ss(y,k=>_(c,k),()=>l(c)),ke(()=>N.disabled=l(A)),At("click",I,h),At("click",Be,h),At("click",N,f),At("keydown",y,g),At("click",y,w),U(n,y),Zr()}var s$=V('<div class="odz-flex odz-items-center odz-justify-center odz-min-h-screen"><div class="odz-text-center"><div class="odz-w-12 odz-h-12 odz-border-4 odz-border-red-500 odz-border-t-transparent odz-rounded-full odz-animate-spin odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">  ...</p></div></div>'),i$=V('<div class="odz-mb-4"><button class="odz-flex odz-items-center odz-gap-2 odz-text-gray-600 hover:odz-text-gray-900 odz-transition-colors"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="odz-text-sm odz-font-medium"> </span></button></div>'),a$=V('<div class="odz-fixed odz-top-4 odz-right-4 odz-z-50 odz-bg-green-500 odz-text-white odz-px-4 odz-py-3 odz-rounded-lg odz-shadow-lg odz-flex odz-items-center odz-gap-2"><!> <span class="odz-text-sm"></span></div>'),A$=V('<button class="odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-px-6 odz-py-3 odz-rounded-lg odz-font-medium odz-text-sm odz-transition-colors"> </button>'),l$=V('<div class="odz-text-center odz-py-12"><!> <p class="odz-text-sm odz-text-gray-500 odz-mb-4">  </p> <!></div>'),d$=V('<p class="odz-mt-1 odz-text-xs odz-text-red-500"> </p>'),c$=V('<p class="odz-mt-1 odz-text-xs odz-text-gray-500">  4  </p>'),u$=V('<div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-relative"><!> <input type="password" placeholder="     "></div> <!></div>'),h$=V('<div class="odz-flex odz-justify-between odz-text-sm odz-text-red-600"><span></span> <span class="odz-font-medium"> </span></div>'),f$=V('<span class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-5 odz-h-5 odz-border-2 odz-border-white odz-border-t-transparent odz-rounded-full odz-animate-spin"></div>  ...</span>'),p$=V('<div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-4 odz-border odz-border-gray-200 odz-sticky odz-bottom-0"><button class="odz-w-full odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-py-4 odz-rounded-lg odz-font-medium odz-text-base odz-transition-colors disabled:odz-opacity-50 disabled:odz-cursor-not-allowed"><!></button></div>'),g$=V('<div class="odz-max-w-5xl odz-mx-auto odz-px-4 odz-py-6"><!> <!> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><!></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-4"><div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder="  ()" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><select class="odz-w-20 odz-px-3 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"><option>010</option><option>011</option><option>016</option><option>017</option><option>018</option><option>019</option></select> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"></div></div> <div class="odz-col-span-full odz-border-t odz-border-gray-200 odz-my-2"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="" readonly="" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"> <button type="button" class="odz-px-6 odz-py-2.5 odz-bg-gray-700 hover:odz-bg-gray-800 odz-text-white odz-rounded-lg odz-text-sm odz-font-medium odz-transition-colors odz-whitespace-nowrap disabled:odz-opacity-50"> </button></div></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder="    " readonly="" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <select class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"><option></option><option></option><option></option><option></option></select></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="date" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <!> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> </label> <textarea class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 odz-resize-none disabled:odz-bg-gray-50" rows="3" placeholder="  "></textarea></div></div></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-3"><div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"> </span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <!> <div class="odz-border-t odz-border-gray-200 odz-pt-3 odz-flex odz-justify-between"><span class="odz-font-semibold odz-text-gray-900"> </span> <span class="odz-text-xl odz-font-bold odz-text-red-600"> </span></div></div></div> <!></div>'),v$=V('<div class="odz-min-h-screen odz-bg-gray-50"><!></div> <!> <!> <!> <!>',1);function m$(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Et,"$estimateStore",t),s=Ie();let i=gt(e,"mallType",8,""),a=gt(e,"customerId",8,""),A=gt(e,"sess",8,""),d=gt(e,"shopId",8,""),c=gt(e,"estimateId",12,void 0),u=gt(e,"returnTo",8,"list"),h=Ie(null),f=Ie(!1),g=Ie(!1),w=Ie(!1),y=Ie(!1),x=Ie(""),C=Ie(""),I=Ie(void 0),M=Ie(!1),L=Ie(!1),ee=!1,W=Ie(""),R=Ie("");function Z(_e){return _e?_e.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}let Be=Ie(!1),N=-1,k=Ie(""),J=Ie(-1),ne=[],ge=null,pe=!1;async function xe(){var _e;if(pe){console.log(" [Realtime]     ");return}if(!((_e=l(h))!=null&&_e.id)){console.log(" [Realtime]  ID ,  ");return}ge&&clearTimeout(ge),ge=setTimeout(async()=>{try{console.log(" [Realtime]    :",l(h).id),await $(l(h).id),console.log(" [Realtime]    ")}catch(q){console.error(" [Realtime]   :",q)}},300)}function te(_e){console.log(" [Realtime]    :",_e);const q=dg(_e,je=>{console.log(" [Realtime] Estimate  :",je),_(h,je),_(w,Ac(je.status))});ne.push(()=>q.unsubscribe());const de=c5(_e,je=>{console.log(" [Realtime] EstimateItems  :",je.eventType),xe()});ne.push(()=>de.unsubscribe());const ue=f1(_e,je=>{console.log(" [Realtime] EstimatePrints  :",je.eventType),xe()});ne.push(()=>ue.unsubscribe());const Fe=u5(_e,je=>{console.log(" [Realtime] EstimateSimplePrints  :",je.eventType),xe()});ne.push(()=>Fe.unsubscribe());const Pe=h5(_e,je=>{console.log(" [Realtime] EstimateAddonItems  :",je.eventType),xe()});ne.push(()=>Pe.unsubscribe());const it=f5(_e,je=>{console.log(" [Realtime] EstimateAdditionalCosts  :",je.eventType),xe()});ne.push(()=>it.unsubscribe());const We=h1(_e,je=>{console.log(" [Realtime] EstimateComments  :",je.eventType)});ne.push(()=>We.unsubscribe()),console.log(" [Realtime]     (7 )")}function se(){const{phone1:_e,phone2:q,phone3:de}=o();_e&&q&&de&&Et.update(ue=>({...ue,orderPhone:`${_e}-${q}-${de}`}))}function oe(_e){if(_e&&_e.includes("-")){const q=_e.split("-");q.length===3&&Et.update(de=>({...de,phone1:q[0]||"010",phone2:q[1]||"",phone3:q[2]||""}))}}function me(){return ee?Promise.resolve():new Promise(_e=>{const q=document.createElement("script");q.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",q.onload=()=>{ee=!0,_e()},document.head.appendChild(q)})}async function B(){try{await me(),new window.daum.Postcode({oncomplete(_e){Et.update(q=>({...q,postcode:_e.zonecode,address1:_e.roadAddress||_e.jibunAddress}))},onresize(_e){}}).open()}catch{_(y,!0),_(x,"  "),_(C,"     .    .")}}$n(async()=>{gi.set({id:d(),name:"",sess:A(),customer_id:a()}),Vl.set({name:"",phone:"",address1:"",address2:"",postcode:"",mallType:i()}),c()?await E(c()):await F()}),as(()=>{ne.forEach(_e=>{try{_e()}catch(q){console.error("   :",q)}}),ne=[]});async function F(){_(f,!0);try{const _e=await a1(i(),a(),A());_e?(_(h,_e),_(w,Ac(_e.status)),await O(_e),te(_e.id)):(Et.reset(),_(w,!0))}catch{_(y,!0),_(x," "),_(C,"     .")}finally{_(f,!1)}}async function E(_e){_(f,!0);try{let q=await td(_e);if(q){const de=!!(A()||a());if(L5(q)&&de){console.log("[loadEstimateById]    ,   ...");const Fe=await C5(_e,d(),A()||null,a()||null,i()||null);if(Fe.success&&Fe.newEstimateId){if(console.log(`[loadEstimateById]   : ${_e}  ${Fe.newEstimateId}`),T(Fe.newEstimateId),q=await td(Fe.newEstimateId),!q)throw new Error("    .");c(Fe.newEstimateId)}else{console.error("[loadEstimateById]   :",Fe.error),_(y,!0),_(x," "),_(C,`    : ${Fe.error}`);return}}_(h,q),_(w,Ac(q.status)),await O(q),te(q.id)}else _(y,!0),_(x," "),_(C,"   .")}catch(q){console.error("[loadEstimateById] :",q),_(y,!0),_(x," "),_(C,"    .")}finally{_(f,!1)}}function T(_e){try{const q=new URL(window.location.href);q.searchParams.set("estimateId",_e),window.history.replaceState({},"",q.toString()),console.log(`[updateUrlWithNewEstimateId] URL  : ${q.toString()}`)}catch(q){console.error("[updateUrlWithNewEstimateId] URL  :",q)}}function P(_e){const q={delivery:"",pickup:"",quick:""};return _e&&q[_e]||""}async function O(_e){try{er(Et,dt(o).estimateName=_e.name||"",dt(o)),er(Et,dt(o).organizationName=_e.organization_name||"",dt(o)),er(Et,dt(o).orderName=_e.order_name||"",dt(o)),er(Et,dt(o).orderPhone=_e.order_phone||"",dt(o)),er(Et,dt(o).postcode=_e.postcode||"",dt(o)),er(Et,dt(o).address1=_e.address1||"",dt(o)),er(Et,dt(o).address2=_e.address2||"",dt(o)),er(Et,dt(o).comment=_e.comment||"",dt(o)),er(Et,dt(o).shippingMethod=P(_e.shipping_method),dt(o)),er(Et,dt(o).prefDeliveryDate=_e.pref_delivery_date||"",dt(o)),er(Et,dt(o).uploadMemo=_e.upload_memo||"",dt(o)),er(Et,dt(o).designConfirm=_e.design_confirm||"",dt(o)),_e.order_phone&&oe(_e.order_phone),await $(_e.id)}catch(q){q instanceof SyntaxError&&q.message.includes("JSON")?(_(y,!0),_(x," "),_(C,"    .  .")):(_(y,!0),_(x," "),_(C,"    ."))}}function j(_e){if(_e==null)return null;if(typeof _e=="object")return _e;if(typeof _e=="string")try{return JSON.parse(_e)}catch{return null}return _e}async function $(_e){var q;try{const de=await $u(_e),ue=await _c(_e),Fe=await d1(_e),Pe=await cg(_e),it=await g1(_e),We=[],je={};for(const he of de)if(he.product_id&&he.product){const De=he.idx||0;if(je[De]||(je[De]={product:he.product,variants:[],quantity:0,prints:[],addons:{},print_type:he.print_type||"none",simplePrints:[]}),he.variant_id&&he.quantity){const ot=he.original_price?parseFloat(he.original_price.toString()):0,Ge=he.price?parseFloat(he.price.toString()):0,Je=ot>0,rt=Je?ot:Ge,ht={id:he.variant_id,quantity:he.quantity,prices:[{amount:rt}],thumbnail:((q=he.variant)==null?void 0:q.thumbnail)||null,title:he.variant_title||` ${he.variant_id.substring(0,4)}`,discountInfo:Je&&he.discount_amount?{discountAmount:he.discount_amount,discountType:he.discount_type,discountValue:he.discount_value,discountDirection:he.discount_direction}:void 0,isDiscountedPrice:!Je};je[De].variants.push(ht),je[De].quantity+=he.quantity}}for(const he of ue)if(he.template_id&&he.estimate_id){const De=he.idx||0;if(je[De]){const ot={template:{id:he.template_id,name:""},price:he.price||0,colors:j(he.colors)||[],uploads:j(he.uploads)||null,title:"",objectId:he.object_id||null,variant_id:he.variant_id||null};je[De].prints.push(ot)}}for(const he of Fe){const De=he.idx||0;je[De]&&(je[De].simplePrints||(je[De].simplePrints=[]),je[De].simplePrints.push({object_id:he.object_id||null,title:he.title||" ",print_method:he.print_method||"none",uploaded_files:j(he.uploaded_files)||null,file_metadata:j(he.file_metadata)||null,price:he.price||0}))}Pe.forEach(he=>{const De=he.idx||0;je[De]&&(je[De].addons||(je[De].addons={}),je[De].addons[he.addon_id]={productId:he.selected_product_id,variantId:he.selected_variant_id||"",price:he.price||0,quantity:he.quantity||1})});for(const he in je)We.push({...je[he],idx:parseInt(he)});er(Et,dt(o).products=We,dt(o)),er(Et,dt(o).index=(We.length>0,0),dt(o)),Et.updateTotalAmounts()}catch(de){throw de instanceof SyntaxError&&de.message.includes("JSON")?(_(y,!0),_(x," "),_(C,"     .  .")):(_(y,!0),_(x," "),_(C,"     .")),de}}function H(_e){_(g,!1)}function Y(_e){var q,de;try{const ue=o().products[_e];if(!ue||ue.idx===void 0){_(y,!0),_(x," "),_(C,"    .");return}if(!((q=ue.product)!=null&&q.id)){_(y,!0),_(x," "),_(C," ID   .");return}if(!((de=l(h))!=null&&de.id)){_(y,!0),_(x," "),_(C,"    .");return}N=_e,_(k,ue.product.id),_(J,ue.idx),pe=!0,console.log(" [Edit]    - Realtime   "),_(Be,!0)}catch{_(y,!0),_(x,""),_(C,"    .")}}function Ce(){_(Be,!1),N=-1,_(k,""),_(J,-1),pe=!1,console.log(" [Edit]    - Realtime   ")}async function fe(){var _e,q,de,ue,Fe,Pe,it,We,je,he,De,ot,Ge;_(M,!0);try{if(!((_e=l(h))!=null&&_e.id))throw new Error(" ID .");if(l(J)===-1)throw new Error(" idx  .");const Je=Un(zr);if(!Je||!Je.productSelection)throw new Error("  .");if(!Je.productSelection.quantityByVariant||Object.keys(Je.productSelection.quantityByVariant).length===0)throw new Error("   .");await T0(l(h).id,l(J));const rt=[],{quantityByVariant:ht,variantDiscounts:$e,variantsByColor:st}=Je.productSelection;let Bt="none";if(typeof window<"u"){const Ct=l(h).id||"temp",Tt=`detailedPrint_${l(k)}_${Ct}`,wt=`simplePrint_${l(k)}_${Ct}`,Ze=window.sessionStorage.getItem(Tt),kt=window.sessionStorage.getItem(wt);if(Ze)try{const It=JSON.parse(Ze);Array.isArray(It)&&It.length>0&&(Bt="detailed")}catch{}if(Bt==="none"&&kt)try{const It=JSON.parse(kt);Array.isArray(It)&&It.length>0&&(Bt="simple")}catch{}if(Bt==="none"&&((q=Je.printSelection)!=null&&q.currentMethod)){const It=Je.printSelection.currentMethod;(It==="detailed"||It==="simple"||It==="self-design")&&(Bt=It)}}console.log(" [Edit ]  print_type:",Bt),console.log(" [Edit ] currentStore.printSelection:",Je.printSelection);for(const Ct in ht)for(const Tt in ht[Ct]){const wt=ht[Ct][Tt];if(wt>0){const Ze=$e==null?void 0:$e[Tt],kt=(de=st[Ct])==null?void 0:de.find(et=>et.id===Tt),It=((Fe=(ue=kt==null?void 0:kt.prices)==null?void 0:ue[0])==null?void 0:Fe.amount)||0,jt=(Ze==null?void 0:Ze.discountedPrice)||It;rt.push({estimate_id:l(h).id,product_id:Je.productId,variant_id:Tt,quantity:wt,price:jt,original_price:It,discount_amount:(Ze==null?void 0:Ze.discountAmount)||0,discount_type:((Pe=Ze==null?void 0:Ze.discountInfo)==null?void 0:Pe.type)||null,discount_value:((it=Ze==null?void 0:Ze.discountInfo)==null?void 0:it.value)||null,discount_direction:((We=Ze==null?void 0:Ze.discountInfo)==null?void 0:We.direction)||null,discount_min_quantity:((je=Ze==null?void 0:Ze.discountInfo)==null?void 0:je.min_quantity)||null,discount_max_quantity:((he=Ze==null?void 0:Ze.discountInfo)==null?void 0:he.max_quantity)||null,idx:l(J),print_type:Bt})}}if(rt.length>0){const{error:Ct}=await pt.from("estimate_items").insert(rt);if(Ct)throw new Error(`  : ${Ct.message}`)}if(typeof window<"u"){const Ct=l(h).id||"temp",Tt=`detailedPrint_${l(k)}_${Ct}`,wt=window.sessionStorage.getItem(Tt);if(wt){const It=JSON.parse(wt),jt=((De=Je.productSelection)==null?void 0:De.totalQuantity)||0;async function et(mt,Vt){var ir,qt,Gt,ar;try{const St=((ir=mt.template)==null?void 0:ir.id)||mt.template_id;if(!St)return mt.price||0;const ft=await Ic(St);if(!(ft!=null&&ft.template_product_variants)||ft.template_product_variants.length===0)return mt.price||0;let Dt=null;mt.variant_id&&(Dt=ft.template_product_variants.find(vr=>vr.variant_id===mt.variant_id)),!Dt&&Array.isArray(mt.colors)&&mt.colors.length>0&&(Dt=ft.template_product_variants.find(vr=>vr.color_count===mt.colors.length)),Dt||(Dt=ft.template_product_variants[0]);const Yt=await cl(Dt.variant_id),dr=((Gt=(qt=Yt==null?void 0:Yt.prices)==null?void 0:qt[0])==null?void 0:Gt.amount)||0;if(Dt.min_quantity&&Vt<Dt.min_quantity)return Dt.plate_price||0;let ur=dr;const hr=((ar=ft.product)==null?void 0:ar.quantity_discounts)||[];if(hr.length>0){const vr=ea(Vt,dr,hr);vr!=null&&vr.hasDiscount&&(ur=vr.discountedPrice)}return ur*Vt}catch{return mt.price||0}}const yt=await Promise.all(It.map(async mt=>{var ir,qt,Gt,ar,St,ft,Dt,Yt,dr,ur,hr,vr,fn;const Vt=await et(mt,jt);return{estimate_id:l(h).id,template_id:((ir=mt.template)==null?void 0:ir.id)||mt.template_id||null,colors:mt.colors||[],price:Vt,object_id:mt.objectId||mt.object_id||null,variant_id:mt.variant_id||null,name_sheet:mt.nameSheet||mt.name_sheet||null,uploads:mt.uploads||null,original_price:mt.original_price||((qt=mt.discountInfo)==null?void 0:qt.originalPrice)||Vt||0,discount_amount:mt.discount_amount||((Gt=mt.discountInfo)==null?void 0:Gt.discountAmount)||0,discount_type:mt.discount_type||((St=(ar=mt.discountInfo)==null?void 0:ar.discountDetails)==null?void 0:St.type)||null,discount_value:mt.discount_value||((Dt=(ft=mt.discountInfo)==null?void 0:ft.discountDetails)==null?void 0:Dt.value)||null,discount_direction:mt.discount_direction||((dr=(Yt=mt.discountInfo)==null?void 0:Yt.discountDetails)==null?void 0:dr.direction)||null,discount_min_quantity:mt.discount_min_quantity||((hr=(ur=mt.discountInfo)==null?void 0:ur.discountDetails)==null?void 0:hr.min_quantity)||null,discount_max_quantity:mt.discount_max_quantity||((fn=(vr=mt.discountInfo)==null?void 0:vr.discountDetails)==null?void 0:fn.max_quantity)||null,idx:l(J)}}));if(yt.length>0){const{error:mt}=await pt.from("estimate_prints").insert(yt);if(mt)throw new Error(`   : ${mt.message}`)}}const Ze=`simplePrint_${l(k)}_${Ct}`,kt=window.sessionStorage.getItem(Ze);if(kt){const jt=JSON.parse(kt).map(et=>({estimate_id:l(h).id,object_id:et.objectId||et.object_id||null,title:et.title||null,print_method:et.printMethod||et.print_method||null,uploaded_files:et.uploadedFiles||et.uploaded_files||null,file_metadata:et.savedFileInfo||et.file_metadata||null,price:et.price||0,idx:l(J)}));if(jt.length>0){const{error:et}=await pt.from("estimate_simple_prints").insert(jt);if(et)throw new Error(`   : ${et.message}`)}}}if((ot=Je.addonSelection)!=null&&ot.selectedAddons){const Ct=[],Tt=((Ge=Je.productSelection)==null?void 0:Ge.totalQuantity)||0;for(const[wt,Ze]of Object.entries(Je.addonSelection.selectedAddons)){const kt=Ze;let It=0;if(kt.variantId)try{const{data:jt,error:et}=await pt.from("prices").select("amount").eq("variant_id",kt.variantId).single();!et&&jt&&(It=jt.amount)}catch{}Ct.push({estimate_id:l(h).id,addon_id:wt,selected_product_id:kt.productId,selected_variant_id:kt.variantId||null,price:It,quantity:Tt,idx:l(J)})}if(Ct.length>0){const{error:wt}=await pt.from("estimate_addon_items").insert(Ct);if(wt)throw new Error(`  : ${wt.message}`)}}_(L,!0),setTimeout(()=>{_(L,!1)},3e3),Ce(),await $(l(h).id)}catch(Je){let rt="     .";Je instanceof Error&&(rt=Je.message,Je.message.includes("duplicate key")?rt="  .  .":Je.message.includes("foreign key")?rt="   .     .":Je.message.includes("not null")?rt="  .    .":Je.message.includes("permission")&&(rt="   .  .")),_(y,!0),_(x," "),_(C,rt)}finally{_(M,!1)}}async function Le(_e){var q;try{const de=o().products[_e];if(!de||de.idx===void 0){_(y,!0),_(x," "),_(C,"    .");return}if(!((q=l(h))!=null&&q.id)){_(y,!0),_(x," "),_(C,"    .");return}await T0(l(h).id,de.idx),er(Et,dt(o).products=o().products.filter((ue,Fe)=>Fe!==_e),dt(o)),Et.updateTotalAmounts()}catch{_(y,!0),_(x," "),_(C,"    .")}}function X(_e){const q={:"delivery",:"pickup",:"quick"};return _e&&q[_e]||null}async function D(){var _e;if(!l(s)){_(y,!0),_(x," "),_(C,"    .");return}if(!a()){const q=Z(l(W));if(!q.valid){_(R,q.message),_(y,!0),_(x," "),_(C,q.message);return}_(R,"")}se(),_(M,!0);try{if(!((_e=l(h))!=null&&_e.id))throw new Error("  .");const q=X(o().shippingMethod);await yc(l(h).id,{name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:o().postcode,address1:o().address1,address2:o().address2,comment:o().comment||null,shipping_method:q,pref_delivery_date:o().prefDeliveryDate||null,upload_memo:o().uploadMemo||null,design_confirm:o().designConfirm||"none",password:a()?null:l(W)}),await A5(l(h).id,"pending"),_(L,!0),setTimeout(()=>{_(L,!1)},3e3),_(y,!0),_(x," "),_(C,"  ."),_(I,()=>{window.location.href="/odiz/list.php"})}catch(q){_(y,!0),_(x," "),_(C,q instanceof Error?q.message:"    ."),_(I,void 0)}finally{_(M,!1)}}tr(()=>o(),()=>{_(s,o().estimateName&&o().orderName&&o().phone1&&o().phone2&&o().phone3&&o().postcode&&o().address1)}),bo(),nn();var Ae=v$(),ye=lt(Ae),ae=m(ye);{var le=_e=>{var q=s$();U(_e,q)},Ee=_e=>{var q=g$(),de=m(q);{var ue=Mt=>{var Wt=i$(),Kt=m(Wt);At("click",Kt,()=>window.location.href=`?mode=${u()}`),U(Mt,Wt)};be(de,Mt=>{c()&&Mt(ue)})}var Fe=z(de,2);{var Pe=Mt=>{var Wt=a$(),Kt=m(Wt);o1(Kt,{class:"odz-w-4 odz-h-4"}),U(Mt,Wt)};be(Fe,Mt=>{l(L)&&Mt(Pe)})}var it=z(Fe,2),We=m(it);{var je=Mt=>{O5(Mt,{onSelectProduct:Y,onDeleteProduct:Le,get isEditable(){return l(w)},set isEditable(Wt){_(w,Wt)},$$legacy:!0})},he=Mt=>{var Wt=l$(),Kt=m(Wt);xE(Kt,{class:"odz-w-16 odz-h-16 odz-text-gray-300 odz-mx-auto odz-mb-4"});var _r=z(Kt,4);{var Br=bn=>{var Nt=A$();At("click",Nt,()=>_(g,!0)),U(bn,Nt)};be(_r,bn=>{l(w)&&bn(Br)})}U(Mt,Wt)};be(We,Mt=>{o().products&&o().products.length>0?Mt(je):Mt(he,!1)})}var De=z(it,2),ot=m(De),Ge=m(ot),Je=z(m(Ge),2),rt=z(Ge,2),ht=z(m(rt),2),$e=z(rt,2),st=z(m($e),2),Bt=z($e,2),Ct=z(m(Bt),2),Tt=m(Ct);ke(()=>{o(),Ou(()=>{l(w)})});var wt=m(Tt);wt.value=(wt.__value="010")==null?"":"010";var Ze=z(wt);Ze.value=(Ze.__value="011")==null?"":"011";var kt=z(Ze);kt.value=(kt.__value="016")==null?"":"016";var It=z(kt);It.value=(It.__value="017")==null?"":"017";var jt=z(It);jt.value=(jt.__value="018")==null?"":"018";var et=z(jt);et.value=(et.__value="019")==null?"":"019";var yt=z(Tt,2),mt=z(yt,2),Vt=z(Bt,4),ir=z(m(Vt),2),qt=m(ir),Gt=z(qt,2),ar=z(Vt,2),St=z(m(ar),2),ft=z(ar,2),Dt=z(m(ft),2),Yt=z(ft,2),dr=z(m(Yt),2);ke(()=>{o(),Ou(()=>{l(w)})});var ur=m(dr);ur.value=((ur.__value="")==null,"");var hr=z(ur);hr.value=(hr.__value="")==null?"":"";var vr=z(hr);vr.value=(vr.__value="")==null?"":"";var fn=z(vr);fn.value=(fn.__value="")==null?"":"";var pn=z(Yt,2),kr=z(m(pn),2),wr=z(pn,2);{var Vr=Mt=>{var Wt=u$(),Kt=z(m(Wt),2),_r=m(Kt);s1(_r,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform odz--translate-y-1/2 odz-w-5 odz-h-5 odz-text-gray-400"});var Br=z(_r,2),bn=z(Kt,2);{var Nt=$r=>{var Mn=d$(),Wo=m(Mn);ke(()=>Qe(Wo,l(R))),U($r,Mn)},br=$r=>{var Mn=c$();U($r,Mn)};be(bn,$r=>{l(R)?$r(Nt):$r(br,!1)})}ke(()=>{Tr(Br,`odz-w-full odz-pl-10 odz-pr-4 odz-py-2.5 odz-border ${(l(R)?"odz-border-red-500":"odz-border-gray-300")??""} odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50`),Br.disabled=!l(w)}),Fr(Br,()=>l(W),$r=>_(W,$r)),U(Mt,Wt)};be(wr,Mt=>{a()||Mt(Vr)})}var Rr=z(wr,2),pr=z(m(Rr),2),yr=z(De,2),Gr=m(yr),on=m(Gr),En=z(m(on),2),Wr=m(En),mr=z(on,2),qn=z(m(mr),2),As=m(qn),Fo=z(mr,2),Oo=z(m(Fo),2),Ds=m(Oo),so=z(Fo,2);{var ls=Mt=>{var Wt=h$(),Kt=z(m(Wt),2),_r=m(Kt);ke(Br=>Qe(_r,`-${Br??""}`),[()=>Er(o().totalDiscountAmount)],at),U(Mt,Wt)};be(so,Mt=>{o().totalDiscountAmount>0&&Mt(ls)})}var Yn=z(so,2),qe=z(m(Yn),2),vt=m(qe),$t=z(yr,2);{var Rt=Mt=>{var Wt=p$(),Kt=m(Wt),_r=m(Kt);{var Br=Nt=>{var br=f$();U(Nt,br)},bn=Nt=>{var br=mn(" ");U(Nt,br)};be(_r,Nt=>{l(M)?Nt(Br):Nt(bn,!1)})}ke(()=>Kt.disabled=l(M)||!l(s)),At("click",Kt,D),U(Mt,Wt)};be($t,Mt=>{l(w)&&Mt(Rt)})}ke((Mt,Wt,Kt)=>{Je.disabled=!l(w),ht.disabled=!l(w),st.disabled=!l(w),Tt.disabled=!l(w),yt.disabled=!l(w),mt.disabled=!l(w),Gt.disabled=!l(w),Dt.disabled=!l(w),dr.disabled=!l(w),kr.disabled=!l(w),pr.disabled=!l(w),Qe(Wr,`${o().totalQuantity||0}`),Qe(As,Mt),Qe(Ds,Wt),Qe(vt,Kt)},[()=>Er(o().totalProductAmount),()=>Er(o().totalPrintAmount),()=>Er(o().totalAmount)],at),Fr(Je,()=>o().estimateName,Mt=>er(Et,dt(o).estimateName=Mt,dt(o))),Fr(ht,()=>o().organizationName,Mt=>er(Et,dt(o).organizationName=Mt,dt(o))),Fr(st,()=>o().orderName,Mt=>er(Et,dt(o).orderName=Mt,dt(o))),Nu(Tt,()=>o().phone1,Mt=>er(Et,dt(o).phone1=Mt,dt(o))),At("change",Tt,se),Fr(yt,()=>o().phone2,Mt=>er(Et,dt(o).phone2=Mt,dt(o))),At("input",yt,se),Fr(mt,()=>o().phone3,Mt=>er(Et,dt(o).phone3=Mt,dt(o))),At("input",mt,se),Fr(qt,()=>o().postcode,Mt=>er(Et,dt(o).postcode=Mt,dt(o))),At("click",Gt,B),Fr(St,()=>o().address1,Mt=>er(Et,dt(o).address1=Mt,dt(o))),Fr(Dt,()=>o().address2,Mt=>er(Et,dt(o).address2=Mt,dt(o))),Nu(dr,()=>o().shippingMethod,Mt=>er(Et,dt(o).shippingMethod=Mt,dt(o))),Fr(kr,()=>o().prefDeliveryDate,Mt=>er(Et,dt(o).prefDeliveryDate=Mt,dt(o))),Fr(pr,()=>o().comment,Mt=>er(Et,dt(o).comment=Mt,dt(o))),U(_e,q)};be(ae,_e=>{l(f)?_e(le):_e(Ee,!1)})}var Me=z(ye,2);{var ze=_e=>{J1(_e,{addProduct:H,productType:"godo",get isProductSearchOpen(){return l(g)},set isProductSearchOpen(q){_(g,q)},$$legacy:!0})};be(Me,_e=>{l(g)&&_e(ze)})}var Se=z(Me,2);{var ve=_e=>{o$(_e,{get isOpen(){return l(Be)},get estimateId(){return l(h).id},get idx(){return l(J)},get productId(){return l(k)},onClose:Ce,onSave:fe})};be(Se,_e=>{l(Be)&&l(h)&&_e(ve)})}var Oe=z(Se,2);Uc(Oe,{get onClose(){return l(I)},get isOpen(){return l(y)},set isOpen(_e){_(y,_e)},get title(){return l(x)},set title(_e){_(x,_e)},get message(){return l(C)},set message(_e){_(C,_e)},$$legacy:!0});var Ne=z(Oe,2);Qc(Ne,{get isLoading(){return l(f)},set isLoading(_e){_(f,_e)},$$legacy:!0}),U(n,Ae),Zr(),r()}const K_={qnaId:null,title:"",content:"",customerName:"",customerPhone:"",customerEmail:"",products:[],nextIdx:0,editingIdx:null,editingProductId:null,isLoading:!1,isSaving:!1};function w$(){const{subscribe:n,set:e,update:t}=Ad({...K_});return{subscribe:n,reset:()=>{e({...K_})},setQnaId:r=>{t(o=>({...o,qnaId:r}))},setTitle:r=>{t(o=>({...o,title:r}))},setContent:r=>{t(o=>({...o,content:r}))},setCustomerInfo:(r,o,s)=>{t(i=>({...i,customerName:r,customerPhone:o,customerEmail:s}))},addProduct:r=>{t(o=>{const s={...r,idx:o.nextIdx};return{...o,products:[...o.products,s],nextIdx:o.nextIdx+1}})},updateProduct:(r,o)=>{t(s=>({...s,products:s.products.map(i=>i.idx===r?{...i,...o}:i)}))},removeProduct:r=>{t(o=>({...o,products:o.products.filter(s=>s.idx!==r)}))},setEditing:(r,o)=>{t(s=>({...s,editingIdx:r,editingProductId:o}))},clearEditing:()=>{t(r=>({...r,editingIdx:null,editingProductId:null}))},setLoading:r=>{t(o=>({...o,isLoading:r}))},setSaving:r=>{t(o=>({...o,isSaving:r}))},setState:r=>{t(o=>({...o,...r}))},getState:()=>Un({subscribe:n})}}const Ki=w$();function JB(n,e,t){return`qna_product_${e}_${n||"new"}_${t}`}function ZB(n,e,t,r){const o=JB(n,e,t);try{sessionStorage.setItem(o,JSON.stringify(r))}catch(s){console.error("[QnaStore] Failed to save to session:",s)}}function y$(n,e,t){const r=JB(n,e,t);try{const o=sessionStorage.getItem(r);return o?JSON.parse(o):null}catch(o){return console.error("[QnaStore] Failed to load from session:",o),null}}function d0(n){try{const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&r.startsWith("qna_product_")&&r.includes(`_${n||"new"}_`)&&e.push(r)}e.forEach(t=>sessionStorage.removeItem(t))}catch(e){console.error("[QnaStore] Failed to clear all session:",e)}}async function _$(n){const{data:e,error:t}=await pt.rpc("hash_inquiry_password",{plain_password:n});if(t)throw console.error("[QnaService] hashPassword error:",t),t;return e}async function b$(n,e){const{data:t,error:r}=await pt.rpc("verify_inquiry_password",{inquiry_id_param:n,plain_password:e});if(r)throw console.error("[QnaService] verifyPassword error:",r),r;return t===!0}async function x$(n,e){try{const t=await Kg(n);return t?t.customer_id?e&&t.customer_id===e?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!1,message:"     ."}:{canAccess:!1,requiresPassword:!0,message:" ."}:{canAccess:!1,requiresPassword:!1,message:"   ."}}catch(t){return console.error("[QnaService] checkQnaAccess error:",t),{canAccess:!1,requiresPassword:!1,message:"     ."}}}async function z$(n,e){try{return await b$(n,e)?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!0,message:"  ."}}catch(t){return console.error("[QnaService] accessQnaWithPassword error:",t),{canAccess:!1,requiresPassword:!0,message:"    ."}}}function B$(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*1e3)).padStart(3,"0");return`Q${e}${t}${r}${o}${s}${i}`}async function C$(n){const e=B$();let t;!n.customer_id&&n.password&&(t=await _$(n.password));const{password:r,...o}=n,s={...o,inquiry_no:e,status:n.status||"pending"};t&&(s.password=t);const{data:i,error:a}=await pt.from("inquiries").insert(s).select().single();if(a)throw console.error("[QnaService] createQna error:",a),a;return i}async function Kg(n){const{data:e,error:t}=await pt.from("inquiries").select("*").eq("id",n).single();if(t){if(t.code==="PGRST116")return null;throw console.error("[QnaService] getQnaById error:",t),t}return e}async function S$(n,e,t){let r=pt.from("inquiries").select("*").eq("shop_id",n).order("created_at",{ascending:!1});const{data:o,error:s}=await r;if(s)throw console.error("[QnaService] getQnaList error:",s),s;return o||[]}async function o2(n,e){const{data:t,error:r}=await pt.from("inquiries").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(r)throw console.error("[QnaService] updateQna error:",r),r;return t}async function eC(n,e){return o2(n,{status:e})}async function E$(n){const{error:e}=await pt.from("inquiries").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQna error:",e),e}async function F$(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaItems error:",o),o;return r||[]}async function s2(n){const{data:e,error:t}=await pt.from("inquiry_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaItems error:",t),t;return e||[]}async function I$(n){const{error:e}=await pt.from("inquiry_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaItems error:",e),e}async function U$(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaPrints error:",o),o;return r||[]}async function i2(n){const{data:e,error:t}=await pt.from("inquiry_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaPrints error:",t),t;return e||[]}async function Q$(n){const{error:e}=await pt.from("inquiry_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaPrints error:",e),e}async function tC(n,e){const{data:t,error:r}=await pt.from("inquiry_comments").insert({...e,inquiry_id:n}).select().single();if(r)throw console.error("[QnaService] addQnaComment error:",r),r;return e.writer==="manager"&&await eC(n,"answered"),t}async function T$(n){const{data:e,error:t}=await pt.from("inquiry_comments").select("*").eq("inquiry_id",n).order("created_at",{ascending:!0});if(t)throw console.error("[QnaService] getQnaComments error:",t),t;return e||[]}async function L$(n){const{error:e}=await pt.from("inquiry_comments").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQnaComment error:",e),e}async function P$(n){const e=await Kg(n);if(!e)throw new Error("   .");const t=await s2(n),r=await i2(n),o=await A2(n),s=await l2(n),i=await A1({shop_id:e.shop_id,customer_id:e.customer_id,name:e.title,order_name:e.customer_name,phone:e.customer_phone,email:e.customer_email,status:"temp",memo:`: ${e.inquiry_no}

${e.content}`});if(!i.id)throw new Error("  .");for(const a of t)await l1({estimate_id:i.id,idx:a.idx,product_id:a.product_id,variant_id:a.variant_id,quantity:a.quantity});for(const a of r)a.print_type==="simple"?await U0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,title:a.title,print_method:a.print_method,uploaded_files:a.uploaded_files,file_metadata:a.file_metadata}):a.print_type==="detailed"&&await c1({estimate_id:i.id,idx:a.idx,object_id:a.object_id,template_id:a.template_id,colors:a.colors,uploads:a.uploaded_files});for(const a of o)await U0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,print_method:a.print_method,template_id:a.template_id,selected_colors:a.selected_colors,print_config:a.print_config,uploads:a.uploads,name_sheet:a.name_sheet,memo:a.memo});for(const a of s)await p1({estimate_id:i.id,idx:a.idx,addon_id:a.addon_id,selected_product_id:a.selected_product_id,selected_variant_id:a.selected_variant_id});return await o2(n,{converted_estimate_id:i.id,status:"closed"}),await tC(n,{writer:"system",writer_name:"",content:` . (: ${i.estimate_no})`}),i.id}function k$(n,e){return pt.channel(`qna-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`id=eq.${n}`},e).subscribe()}function O$(n,e){return pt.channel(`qna-list-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`shop_id=eq.${n}`},e).subscribe()}function D$(n,e){return pt.channel(`qna-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiry_comments",filter:`inquiry_id=eq.${n}`},e).subscribe()}function a2(n){n&&pt.removeChannel(n)}async function N$(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_simple_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaSimplePrints error:",o),o;return r||[]}async function A2(n){const{data:e,error:t}=await pt.from("inquiry_simple_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaSimplePrints error:",t),t;return e||[]}async function M$(n){const{error:e}=await pt.from("inquiry_simple_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaSimplePrints error:",e),e}async function H$(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_addon_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaAddonItems error:",o),o;return r||[]}async function l2(n){const{data:e,error:t}=await pt.from("inquiry_addon_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaAddonItems error:",t),t;if(!e||e.length===0)return[];const r=[...new Set(e.map(h=>h.addon_id).filter(Boolean))],o=[...new Set(e.map(h=>h.selected_product_id).filter(Boolean))],s=[...new Set(e.map(h=>h.selected_variant_id).filter(Boolean))],[i,a,A]=await Promise.all([r.length>0?pt.from("product_addons").select("id, name").in("id",r):{data:[]},o.length>0?pt.from("products").select("id, title").in("id",o):{data:[]},s.length>0?pt.from("product_variants").select("id, title").in("id",s):{data:[]}]),d=new Map((i.data||[]).map(h=>[h.id,h.name])),c=new Map((a.data||[]).map(h=>[h.id,h.title])),u=new Map((A.data||[]).map(h=>[h.id,h.title]));return e.map(h=>({...h,addon_name:d.get(h.addon_id)||null,selected_product_name:c.get(h.selected_product_id)||null,selected_variant_name:u.get(h.selected_variant_id)||null}))}async function j$(n){const{error:e}=await pt.from("inquiry_addon_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaAddonItems error:",e),e}async function R$(n){const{data:e}=await pt.from("inquiry_items").select("quantity, price").eq("inquiry_id",n);let t=0,r=0;if(e)for(const h of e){const f=h.quantity||0,g=h.price||0;t+=f*g,r+=f}const{data:o}=await pt.from("inquiry_prints").select("price").eq("inquiry_id",n);let s=0;if(o)for(const h of o)s+=h.price||0;const{data:i}=await pt.from("inquiry_simple_prints").select("price").eq("inquiry_id",n);if(i)for(const h of i)s+=h.price||0;const{data:a}=await pt.from("inquiry_addon_items").select("price, quantity").eq("inquiry_id",n);let A=0;if(a)for(const h of a){const f=h.quantity||1,g=h.price||0;A+=f*g}const{data:d}=await pt.from("inquiry_additional_costs").select("amount").eq("inquiry_id",n);let c=0;if(d)for(const h of d)c+=h.amount||0;const u=t+s+A+c;return{product_amount:t,print_amount:s,addon_amount:A,additional_amount:c,total_quantity:r,total_amount:u}}async function $$(n){const e=await R$(n),{error:t}=await pt.from("inquiries").update({product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,updated_at:new Date().toISOString()}).eq("id",n);if(t)throw console.error("[QnaService] updateInquirySummary error:",t),t}async function q$(n){const{data:e,error:t}=await pt.from("inquiry_estimates").select(`
      id,
      inquiry_id,
      estimate_id,
      created_at,
      created_by,
      memo,
      estimates:estimate_id (
        estimate_no,
        status,
        total_amount,
        created_at,
        name
      )
    `).eq("inquiry_id",n).order("created_at",{ascending:!1});if(t)throw console.error("[QnaService] getLinkedEstimates error:",t),t;return(e||[]).map(r=>({id:r.id,inquiry_id:r.inquiry_id,estimate_id:r.estimate_id,created_at:r.created_at,created_by:r.created_by,memo:r.memo,estimate:r.estimates}))}var K$=V(`<div class="odz-text-center odz-py-12 odz-bg-slate-50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><!> <p class="odz-text-slate-500 odz-font-bold">  .</p> <p class="odz-text-sm odz-text-slate-400 odz-mt-1">   ' '  .</p></div>`),V$=V('<div class="odz-flex odz-gap-1"><button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" title=""><!></button> <button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-error" title=""><!></button></div>'),G$=V('<li class="odz-flex odz-justify-between"><span> </span> <span class="odz-font-bold odz-text-slate-800"> </span></li>'),W$=V('<div class="odz-mt-4 odz-bg-slate-50 odz-rounded-xl odz-p-3 odz-border odz-border-slate-100"><ul class="odz-text-sm odz-text-gray-600 odz-space-y-1.5"></ul></div>'),X$=V('<span class="odz-text-gray-400"></span>'),Y$=V('<span class="odz-text-blue-800"> </span> <!>',1),J$=V('<span class="odz-flex odz-items-center odz-gap-1"></span>'),Z$=V("<span> </span>"),eq=V('<span class="odz-text-blue-500"> </span>'),tq=V('<span class="odz-text-gray-500"> </span>'),rq=V('<li class="odz-flex odz-flex-wrap odz-items-center odz-gap-1"><!> <!> <!></li>'),nq=V('<div class="odz-mt-3 odz-bg-indigo-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-indigo-100"><p class="odz-text-xs odz-font-medium odz-text-blue-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-blue-700 odz-space-y-1"></ul></div>'),oq=V('<span class="odz-text-green-600"> </span>'),sq=V('<span class="odz-text-green-500"> </span>'),iq=V('<span class="odz-text-gray-500"> </span>'),aq=V('<li class="odz-flex odz-items-center odz-gap-1"><span> </span> <!> <!> <!></li>'),Aq=V('<div class="odz-mt-3 odz-bg-emerald-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-emerald-100"><p class="odz-text-xs odz-font-medium odz-text-green-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-green-700 odz-space-y-1"></ul></div>'),lq=V('<span class="odz-text-purple-500"> </span>'),dq=V('<span class="odz-text-purple-600"> </span>'),cq=V('<span class="odz-text-purple-600 odz-font-medium odz-whitespace-nowrap"> </span>'),uq=V('<li class="odz-flex odz-items-center odz-justify-between"><span class="odz-flex odz-items-center odz-gap-1 odz-flex-wrap"><span class="odz-font-medium"> </span> <!> <!></span> <!></li>'),hq=V('<div class="odz-mt-3 odz-bg-purple-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-purple-100"><p class="odz-text-xs odz-font-medium odz-text-purple-800 odz-mb-1"></p> <ul class="odz-text-xs odz-text-purple-700 odz-space-y-1"></ul></div>'),fq=V('<div class="odz-group odz-relative odz-bg-white odz-rounded-2xl odz-border odz-border-slate-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all hover:odz-shadow-[0_8px_30px_rgba(0,0,0,0.1)] hover:odz-border-indigo-100"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-items-start odz-justify-between"><div class="odz-flex-1"><h4 class="odz-font-bold odz-text-slate-900 odz-text-xl odz-tracking-tight"> </h4> <p class="odz-text-base odz-text-slate-500 odz-mt-1.5 odz-flex odz-items-center odz-gap-1"> : <span class="odz-font-bold odz-text-indigo-600"> </span></p></div> <!></div> <div class="odz-mt-4 odz-pt-4 odz-border-t odz-border-gray-100 odz-space-y-3"><div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <!> <!> <!> <!></div></div></div>'),pq=V('<div class="odz-modal odz-modal-open" style="z-index: 9999;"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error"></button></div></div> <button type="button" class="odz-modal-backdrop" aria-label=""></button></div>'),gq=V('<div class="odz-space-y-3"><!></div> <!>',1);function rC(n,e){Jr(e,!1);const t=Ag();let r=gt(e,"products",24,()=>[]),o=gt(e,"disabled",8,!1),s=Ie(!1),i=Ie(null);function a(L,ee){L.stopPropagation(),L.preventDefault(),!o()&&t("edit",{idx:ee.idx,productId:ee.productId})}function A(L,ee){L.stopPropagation(),L.preventDefault(),!o()&&(_(i,ee),_(s,!0))}function d(){l(i)&&t("delete",{idx:l(i).idx}),_(s,!1),_(i,null)}function c(){_(s,!1),_(i,null)}function u(L){return!L.variants||L.variants.length===0?" ":L.variants.map(ee=>`${ee.variantName||ee.variantId}: ${ee.quantity}`).join(", ")}function h(L){const ee=L.prints&&L.prints.length>0,W=L.simplePrints&&L.simplePrints.length>0;if(!ee&&!W)return" ";const R=[];return ee&&R.push(`  ${L.prints.length}`),W&&R.push(`  ${L.simplePrints.length}`),R.join(", ")}function f(L){return!L.addons||L.addons.length===0?" ":` ${L.addons.length}`}nn();var g=gq(),w=lt(g),y=m(w);{var x=L=>{var ee=K$(),W=m(ee);ju(W,{class:"odz-w-16 odz-h-16 odz-mx-auto odz-text-slate-300 odz-mb-4"}),U(L,ee)},C=L=>{var ee=Lt(),W=lt(ee);nr(W,1,r,R=>R.idx,(R,Z)=>{var Be=fq(),N=m(Be),k=m(N),J=m(k),ne=m(J),ge=m(ne),pe=z(ne,2),xe=z(m(pe)),te=m(xe),se=z(J,2);{var oe=ve=>{var Oe=V$(),Ne=m(Oe),_e=m(Ne);s5(_e,{class:"odz-w-4 odz-h-4"});var q=z(Ne,2),de=m(q);i1(de,{class:"odz-w-4 odz-h-4"}),At("click",Ne,ue=>a(ue,l(Z))),At("click",q,ue=>A(ue,l(Z))),U(ve,Oe)};be(se,ve=>{o()||ve(oe)})}var me=z(k,2),B=m(me),F=m(B);ju(F,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var E=z(F,2),T=z(m(E),2),P=m(T),O=z(B,2),j=m(O);mE(j,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var $=z(j,2),H=z(m($),2),Y=m(H),Ce=z(O,2),fe=m(Ce);bE(fe,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var Le=z(fe,2),X=z(m(Le),2),D=m(X),Ae=z(Ce,2);{var ye=ve=>{var Oe=W$(),Ne=m(Oe);nr(Ne,5,()=>l(Z).variants,gr,(_e,q)=>{var de=G$(),ue=m(de),Fe=m(ue),Pe=z(ue,2),it=m(Pe);ke(()=>{Qe(Fe,l(q).variantName||l(q).variantId),Qe(it,`${l(q).quantity??""}`)}),U(_e,de)}),U(ve,Oe)};be(Ae,ve=>{l(Z).variants&&l(Z).variants.length>0&&ve(ye)})}var ae=z(Ae,2);{var le=ve=>{var Oe=nq(),Ne=z(m(Oe),2);nr(Ne,5,()=>l(Z).prints,gr,(_e,q)=>{var de=rq(),ue=m(de);{var Fe=De=>{var ot=J$();nr(ot,5,()=>l(q).parentTemplates,gr,(Ge,Je,rt)=>{var ht=Y$(),$e=lt(ht),st=m($e),Bt=z($e,2);{var Ct=Tt=>{var wt=X$();U(Tt,wt)};be(Bt,Tt=>{rt<l(q).parentTemplates.length-1&&Tt(Ct)})}ke(()=>Qe(st,l(Je).name)),U(Ge,ht)}),U(De,ot)},Pe=De=>{var ot=Lt(),Ge=lt(ot);{var Je=rt=>{var ht=Z$(),$e=m(ht);ke(()=>Qe($e,`: ${(l(q).templateName||l(q).templateId)??""}`)),U(rt,ht)};be(Ge,rt=>{l(q).templateId&&rt(Je)},!0)}U(De,ot)};be(ue,De=>{l(q).parentTemplates&&l(q).parentTemplates.length>0?De(Fe):De(Pe,!1)})}var it=z(ue,2);{var We=De=>{var ot=eq(),Ge=m(ot);ke(()=>Qe(Ge,`(${l(q).colors.length??""})`)),U(De,ot)};be(it,De=>{l(q).colors&&Array.isArray(l(q).colors)&&l(q).colors.length>0&&De(We)})}var je=z(it,2);{var he=De=>{var ot=tq(),Ge=m(ot);ke(()=>Qe(Ge,`- ${l(q).memo??""}`)),U(De,ot)};be(je,De=>{l(q).memo&&De(he)})}U(_e,de)}),U(ve,Oe)};be(ae,ve=>{l(Z).prints&&l(Z).prints.length>0&&ve(le)})}var Ee=z(ae,2);{var Me=ve=>{var Oe=Aq(),Ne=z(m(Oe),2);nr(Ne,5,()=>l(Z).simplePrints,gr,(_e,q)=>{var de=aq(),ue=m(de),Fe=m(ue),Pe=z(ue,2);{var it=ot=>{var Ge=oq(),Je=m(Ge);ke(()=>Qe(Je,`(${l(q).printMethod??""})`)),U(ot,Ge)};be(Pe,ot=>{l(q).printMethod&&ot(it)})}var We=z(Pe,2);{var je=ot=>{var Ge=sq(),Je=m(Ge);ke(()=>Qe(Je,`(${l(q).selectedColors.length??""})`)),U(ot,Ge)};be(We,ot=>{l(q).selectedColors&&Array.isArray(l(q).selectedColors)&&l(q).selectedColors.length>0&&ot(je)})}var he=z(We,2);{var De=ot=>{var Ge=iq(),Je=m(Ge);ke(()=>Qe(Je,`- ${l(q).memo??""}`)),U(ot,Ge)};be(he,ot=>{l(q).memo&&ot(De)})}ke(()=>Qe(Fe,l(q).objectId||" ")),U(_e,de)}),U(ve,Oe)};be(Ee,ve=>{l(Z).simplePrints&&l(Z).simplePrints.length>0&&ve(Me)})}var ze=z(Ee,2);{var Se=ve=>{var Oe=hq(),Ne=z(m(Oe),2);nr(Ne,5,()=>l(Z).addons,gr,(_e,q)=>{var de=uq(),ue=m(de),Fe=m(ue),Pe=m(Fe),it=z(Fe,2);{var We=Ge=>{var Je=lq(),rt=m(Je);ke(()=>Qe(rt,`(${l(q).selectedProductName||""}${(l(q).selectedVariantName?` - ${l(q).selectedVariantName}`:"")??""})`)),U(Ge,Je)};be(it,Ge=>{(l(q).selectedProductName||l(q).selectedVariantName)&&Ge(We)})}var je=z(it,2);{var he=Ge=>{var Je=dq(),rt=m(Je);ke(()=>Qe(rt,`x${l(q).quantity??""}`)),U(Ge,Je)};be(je,Ge=>{l(q).quantity&&l(q).quantity>1&&Ge(he)})}var De=z(ue,2);{var ot=Ge=>{var Je=cq(),rt=m(Je);ke(ht=>Qe(rt,`${ht??""}`),[()=>l(q).price.toLocaleString()],at),U(Ge,Je)};be(De,Ge=>{l(q).price&&Ge(ot)})}ke(()=>Qe(Pe,l(q).addonName||l(q).addonId)),U(_e,de)}),U(ve,Oe)};be(ze,ve=>{l(Z).addons&&l(Z).addons.length>0&&ve(Se)})}ke((ve,Oe,Ne)=>{Qe(ge,l(Z).productName||l(Z).productId),Qe(te,l(Z).totalQuantity),Qe(P,ve),Qe(Y,Oe),Qe(D,Ne)},[()=>u(l(Z)),()=>h(l(Z)),()=>f(l(Z))],at),U(R,Be)}),U(L,ee)};be(y,L=>{r().length===0?L(x):L(C,!1)})}var I=z(w,2);{var M=L=>{var ee=pq(),W=m(ee),R=z(m(W),2),Z=m(R),Be=z(R,2),N=m(Be),k=z(N,2),J=z(W,2);ke(()=>{var ne,ge;return Qe(Z,`'${(((ne=l(i))==null?void 0:ne.productName)||((ge=l(i))==null?void 0:ge.productId))??""}' 
        ?`)}),At("click",N,c),At("click",k,d),At("click",J,c),U(L,ee)};be(I,L=>{l(s)&&L(M)})}U(n,g),Zr()}var vq=V('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),mq=V('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),wq=V('<dialog class="odz-modal odz-modal-open odiz-app odz-items-center odz-justify-center"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative odz-rounded-xl odz-shadow-2xl odz-bg-white"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"> </button></div></div></dialog>');function yq(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Ki,"$qnaStore",t),s=Ie(),i=Ie(),a=Ag();let A=gt(e,"isOpen",8,!1),d=gt(e,"productId",8),c=gt(e,"shopId",8);gt(e,"mallType",8,"");let u=gt(e,"qnaId",8,null),h=gt(e,"editingIdx",8,null),f=Ie(!0),g=Ie(""),w=Ie(),y=Ie("");async function x(){try{_(f,!0),_(g,"");const E=await ih(d(),c());if(_(y,(E==null?void 0:E.title)||(E==null?void 0:E.name)||d()),h()!==null){const T=y$(u(),d(),h());T?await I(T):await C()}else await C();_(f,!1)}catch(E){console.error("[QnaProductSelector]  :",E),E instanceof Error?_(g,E.message):_(g,"     ."),_(f,!1)}}async function C(){M();const E=Date.now().toString(36)+Math.random().toString(36).substr(2),T={productId:d(),productSelection:{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!1,sessionId:E,estimateId:l(s)};if(zr.set(T),typeof window<"u"){const P=`fixedEstimate_${d()}_${l(s)}_${l(i)}`;window.sessionStorage.setItem(P,JSON.stringify(T))}}async function I(E){const T=Date.now().toString(36)+Math.random().toString(36).substr(2),P={productId:d(),productSelection:E.productSelection||{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:E.printSelection||null,addonSelection:E.addonSelection||null,additionalInfo:E.additionalInfo||null,currentStep:"product",isDebugMode:!1,sessionId:T,estimateId:l(s)};if(typeof window<"u"){const O=`fixedEstimate_${d()}_${l(s)}_${l(i)}`,j=`simplePrint_${d()}_${l(s)}`,$=`detailedPrint_${d()}_${l(s)}`;window.sessionStorage.removeItem(j),window.sessionStorage.removeItem($),window.sessionStorage.setItem(O,JSON.stringify(P)),E.simplePrintState&&(window.sessionStorage.setItem(j,JSON.stringify(E.simplePrintState)),console.log("[QnaProductSelector] simplePrint  :",E.simplePrintState)),E.detailedPrintState&&(window.sessionStorage.setItem($,JSON.stringify(E.detailedPrintState)),console.log("[QnaProductSelector] detailedPrint  :",E.detailedPrintState))}zr.set(P),await new Promise(O=>setTimeout(O,50))}function M(){typeof window<"u"&&[`fixedEstimate_${d()}_${l(s)}_${l(i)}`,`simplePrint_${d()}_${l(s)}`,`detailedPrint_${d()}_${l(s)}`,`tab-state-${d()}`].forEach(T=>window.sessionStorage.removeItem(T))}function L(){var E,T,P;try{const O=Un(zr);if(!O.productSelection||O.productSelection.totalQuantity===0){alert("   .");return}const j=[],$=O.productSelection.quantityByVariant||{},H=O.productSelection.variantsByColor||{};for(const[D,Ae]of Object.entries($)){if(typeof Ae!="object"||Ae===null)continue;const ye=H[D]||[];for(const[ae,le]of Object.entries(Ae))if(le&&Number(le)>0){const Ee=ye.find(ze=>ze.id===ae),Me=((T=(E=Ee==null?void 0:Ee.prices)==null?void 0:E[0])==null?void 0:T.amount)||0;j.push({variantId:ae,variantName:(Ee==null?void 0:Ee.name)||(Ee==null?void 0:Ee.title)||`${D} - ${ae}`,quantity:Number(le),price:Me,optionValues:(Ee==null?void 0:Ee.optionValues)||{color:D}})}}const Y=[],Ce=[],fe=[];if(O.printSelection){const D=O.printSelection.currentMethod;if(D==="simple"){const Ae=`simplePrint_${d()}_${l(s)}`,ye=window.sessionStorage.getItem(Ae);if(ye)try{const ae=JSON.parse(ye);Array.isArray(ae)&&ae.forEach(le=>{Ce.push({objectId:le.objectId,printMethod:le.printMethod,templateId:le.templateId,selectedColors:le.selectedColors,printConfig:le.printConfig,uploads:le.uploadedFiles||le.uploads,nameSheet:le.nameSheet,memo:le.memo,price:le.price||0})})}catch(ae){console.error("[QnaProductSelector]     :",ae)}}else if(D==="detailed"){const Ae=`detailedPrint_${d()}_${l(s)}`,ye=window.sessionStorage.getItem(Ae);if(ye)try{const ae=JSON.parse(ye);Array.isArray(ae)&&ae.forEach(le=>{var Me,ze,Se;const Ee=[];le.parentTemplates&&Array.isArray(le.parentTemplates)&&le.parentTemplates.forEach(ve=>{Ee.push({id:ve.id,name:ve.name||ve.id})}),(Me=le.template)!=null&&Me.id&&Ee.push({id:le.template.id,name:le.template.name||le.template.id}),Y.push({objectId:le.objectId,printType:"detailed",templateId:(ze=le.template)==null?void 0:ze.id,templateName:(Se=le.template)==null?void 0:Se.name,parentTemplates:Ee.length>0?Ee:void 0,colors:le.colors,uploadedFiles:le.uploads,memo:le.memo,price:le.price||0})})}catch(ae){console.error("[QnaProductSelector]     :",ae)}}}if(console.log("[QnaProductSelector] currentState.addonSelection:",O.addonSelection),(P=O.addonSelection)!=null&&P.selectedAddons){const D=O.addonSelection.selectedAddons;console.log("[QnaProductSelector] selectedAddons entries:",Object.entries(D));for(const[Ae,ye]of Object.entries(D))if(console.log("[QnaProductSelector] Processing addon:",{addonId:Ae,selection:ye}),ye&&typeof ye=="object"){const ae=ye;console.log("[QnaProductSelector] sel.productId:",ae.productId),ae.productId?(fe.push({addonId:Ae,selectedProductId:ae.productId,selectedVariantId:ae.variantId,price:ae.price||0,quantity:ae.quantity||1}),console.log("[QnaProductSelector] Addon added to array:",fe[fe.length-1])):console.log("[QnaProductSelector] Addon skipped - no productId")}}else console.log("[QnaProductSelector] No selectedAddons in addonSelection");console.log("[QnaProductSelector] Final addons array:",fe);const Le={productId:d(),productName:l(y),variants:j,prints:Y,simplePrints:Ce,addons:fe,totalQuantity:O.productSelection.totalQuantity||0},X={productSelection:O.productSelection,printSelection:O.printSelection,addonSelection:O.addonSelection,additionalInfo:O.additionalInfo,simplePrintState:null,detailedPrintState:null};if(typeof window<"u"){const D=`simplePrint_${d()}_${l(s)}`,Ae=window.sessionStorage.getItem(D);Ae&&(X.simplePrintState=JSON.parse(Ae));const ye=`detailedPrint_${d()}_${l(s)}`,ae=window.sessionStorage.getItem(ye);ae&&(X.detailedPrintState=JSON.parse(ae))}ZB(u(),d(),l(i),X),a("save",{idx:l(i),productData:Le,isEdit:h()!==null}),ee()}catch(O){console.error("[QnaProductSelector]  :",O),alert("   .")}}function ee(){M(),zr.reset(),a("close")}function W(E){E.key==="Escape"&&ee()}function R(E){E.target===l(w)&&ee()}as(()=>{document.body.style.overflow="",M(),zr.reset()}),tr(()=>Hn(u()),()=>{_(s,`qna_${u()||"new"}`)}),tr(()=>(Hn(h()),o()),()=>{_(i,h()??o().nextIdx)}),tr(()=>(l(w),Hn(A())),()=>{l(w)&&(A()?(document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(T=>{T instanceof HTMLElement&&(T.scrollTop=0)}),l(w).showModal(),x()):(document.body.style.overflow="",l(w).close()))}),bo(),nn();var Z=wq(),Be=m(Z),N=m(Be),k=m(N),J=m(k),ne=z(k,2),ge=m(ne);ed(ge,{class:"odz-w-5 odz-h-5"});var pe=z(N,2),xe=m(pe);{var te=E=>{var T=vq();U(E,T)},se=E=>{var T=Lt(),P=lt(T);{var O=$=>{var H=mq(),Y=z(m(H),2),Ce=m(Y);ke(()=>Qe(Ce,l(g))),U($,H)},j=$=>{Yp($,{get productId(){return d()},get estimateId(){return l(s)},get idx(){return l(i)},onSave:L})};be(P,$=>{l(g)?$(O):$(j,!1)},!0)}U(E,T)};be(xe,E=>{l(f)?E(te):E(se,!1)})}var oe=z(pe,2),me=m(oe),B=z(me,2),F=m(B);ss(Z,E=>_(w,E),()=>l(w)),ke(()=>{Qe(J,`${(h()!==null?" ":" ")??""} - ${(l(y)||d())??""}`),B.disabled=l(f),Qe(F,h()!==null?"":"")}),At("click",ne,ee),At("click",me,ee),At("click",B,L),At("keydown",Z,W),At("click",Z,R),U(n,Z),Zr(),r()}var _q=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-text-gray-500"><!> <p> ...</p></div>'),bq=V('<label class="odz-label"><span class="odz-text-xs odz-text-error">4  </span></label>'),xq=V('<label class="odz-label"><span class="odz-text-xs odz-text-error">  </span></label>'),zq=V('<div class="odz-mt-8 odz-p-6 odz-bg-amber-50/50 odz-border odz-border-amber-200 odz-rounded-2xl"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><!> <h4 class="odz-font-bold odz-text-amber-900">   </h4></div> <p class="odz-text-[13px] odz-text-amber-700 odz-mb-5 odz-leading-relaxed">     . (4~16)</p> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="password"><span class="odz-text-sm odz-font-bold odz-text-amber-900"> <span class="odz-text-error">*</span></span></label> <input type="password" id="password" placeholder=" " minlength="4" maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div> <div class="odz-form-control"><label class="odz-label" for="passwordConfirm"><span class="odz-text-sm odz-font-bold odz-text-amber-900">  <span class="odz-text-error">*</span></span></label> <input type="password" id="passwordConfirm" placeholder=" " maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div></div></div>'),Bq=V('<div class="odz-mt-4"><!></div>'),Cq=V('<div class="odz-text-center odz-py-12 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><div class="odz-flex odz-justify-center odz-mb-3"><!></div> <p class="odz-text-slate-500">  .</p> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-mt-3 odz-text-[#d01b22] hover:odz-bg-[#d01b22]/10 odz-rounded-lg"><!>  </button></div>'),Sq=V("<!>  ...",1),Eq=V("<!> ",1),Fq=V('<div class="odz-space-y-6"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><h2 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-tracking-tight"> </h2></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="customerName"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="customerName" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all !odz-h-12"></div> <div class="odz-form-control"><label class="odz-label" for="customerPhone"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-flex odz-items-center odz-gap-2"><input type="text" placeholder="010" maxlength="3" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"></div></div> <div class="odz-form-control md:odz-col-span-2"><label class="odz-label" for="customerEmail"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-relative"><!> <input type="email" id="customerEmail" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-pl-11 odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"></div></div></div> <!></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-space-y-6"><div class="odz-form-control"><label class="odz-label" for="title"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="title" placeholder="  " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all !odz-h-12"></div> <div class="odz-form-control"><label class="odz-label" for="content"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <textarea id="content" placeholder="    " rows="8" class="odz-textarea odz-textarea-bordered odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all odz-p-4"></textarea></div></div></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest">  <span class="odz-text-xs odz-font-normal odz-text-slate-400 odz-ml-1">()</span></h3></div> <button type="button" class="odz-btn odz-btn-sm odz-rounded-xl odz-btn-outline odz-border-slate-300 odz-text-slate-600 hover:odz-bg-slate-50 hover:odz-border-slate-400"><!>  </button></div> <!></div> <div class="odz-flex odz-justify-end odz-gap-4 odz-mt-10 odz-mb-10"><button type="button" class="odz-btn odz-btn-ghost odz-rounded-xl odz-px-8 hover:odz-bg-slate-100 odz-transition-all"></button> <button type="button" class="odz-btn odz-rounded-xl odz-px-10 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all odz-bg-[#d01b22] odz-text-white odz-border-[#d01b22] hover:odz-bg-[#b01820] hover:odz-border-[#b01820]"><!></button></div></div>'),Iq=V('<div class="odiz-app odz-max-w-4xl odz-mx-auto odz-p-4 odz-pb-20 svelte-fas30z"><!> <!> <!> <dialog class="cancel-confirm-dialog svelte-fas30z"><div class="cancel-confirm-box svelte-fas30z"><h3 class="odz-font-bold odz-text-lg"></h3> <p class="odz-py-4">    . ?</p> <div class="odz-flex odz-justify-end odz-gap-2"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error">, </button></div></div></dialog></div>');function Uq(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Ki,"$qnaStore",t),s=Ie(),i=Ie(),a=Ie(),A=Ie(),d=Ie();let c=gt(e,"mallType",8,""),u=gt(e,"customerId",8,"");gt(e,"sess",8,"");let h=gt(e,"shopId",8,""),f=gt(e,"qnaId",8,""),g=gt(e,"onSubmitSuccess",8,void 0),w=gt(e,"onCancel",8,void 0),y=Ie(""),x=Ie(""),C=Ie(""),I=Ie(""),M=Ie(""),L=Ie(""),ee=Ie(""),W=Ie(!1),R=Ie(!1),Z=Ie(!1),Be=Ie(!1),N=Ie(""),k=Ie(),J=Ie(),ne=Ie();function ge(){l(I).length>=3&&l(J)&&l(J).focus()}function pe(){l(M).length>=4&&l(ne)&&l(ne).focus()}let xe=null,te=Ie([]),se=Ie(""),oe=Ie("");$n(async()=>{Ki.reset(),f()&&await me()}),as(()=>{Ki.reset(),d0(f()||null)});async function me(){_(W,!0);try{if(xe=await Kg(f()),xe){if(_(y,xe.title||""),_(x,xe.content||""),_(C,xe.customer_name||""),_(ee,xe.customer_email||""),xe.customer_phone){const q=xe.customer_phone.split("-");q.length===3&&(_(I,q[0]),_(M,q[1]),_(L,q[2]))}const Se=await s2(f()),ve=await i2(f()),Oe=await A2(f()),Ne=await l2(f()),_e=new Map;for(const q of Se){const de=q.idx||0;_e.has(de)||_e.set(de,{idx:de,productId:q.product_id,productName:q.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const ue=_e.get(de);ue.variants.push({variantId:q.variant_id,variantName:q.variant_name,quantity:q.quantity||1,optionValues:q.option_values}),ue.totalQuantity+=q.quantity||1}for(const q of ve){const de=q.idx||0;if(_e.has(de)){let ue=[];if(q.template_id)try{ue=(await Ah(q.template_id)).map(it=>({id:it.id,name:it.name,image_url:it.image_url})),console.log("[QnaRegister] parentTemplates :",ue)}catch(Pe){console.warn("[QnaRegister] parentTemplates  :",Pe)}let Fe=q.title;if(!Fe&&q.object_id)try{const Pe=await m1(q.object_id);Pe&&(Fe=Pe.title||Pe.name,console.log("[QnaRegister] print area title :",Fe))}catch(Pe){console.warn("[QnaRegister] print area  :",Pe)}_e.get(de).prints.push({objectId:q.object_id,printType:q.print_type,title:Fe,printMethod:q.print_method,templateId:q.template_id,colors:q.colors,uploadedFiles:q.uploaded_files,fileMetadata:q.file_metadata,memo:q.memo,parentTemplates:ue})}}for(const q of Oe){const de=q.idx||0;_e.has(de)&&_e.get(de).simplePrints.push({objectId:q.object_id,printMethod:q.print_method,templateId:q.template_id,selectedColors:q.selected_colors,printConfig:q.print_config,uploads:q.uploads,nameSheet:q.name_sheet,memo:q.memo})}for(const q of Ne){const de=q.idx||0;_e.has(de)&&_e.get(de).addons.push({addonId:q.addon_id,addonName:q.addon_name||void 0,selectedProductId:q.selected_product_id,selectedProductName:q.selected_product_name||void 0,selectedVariantId:q.selected_variant_id,selectedVariantName:q.selected_variant_name||void 0,price:q.price||0,quantity:q.quantity||1})}_(te,Array.from(_e.values())),Ki.setState({qnaId:f(),title:l(y),content:l(x),customerName:l(C),customerPhone:l(d),customerEmail:l(ee),products:l(te),nextIdx:l(te).length>0?Math.max(...l(te).map(q=>q.idx))+1:0})}}catch(Se){console.error("[QnaRegister] loadQna error:",Se),alert("   .")}finally{_(W,!1)}}function B(){_(Z,!0)}function F(Se){_(Z,!1),_(N,Se),_(Be,!0)}function E(Se){const{productData:ve,isEdit:Oe,idx:Ne}=Se.detail;ve&&(Oe&&Ne!==void 0?Ki.updateProduct(Ne,ve):Ki.addProduct(ve),_(te,[...o().products])),_(Be,!1),_(N,""),Ki.clearEditing()}function T(Se){var _e,q;const{idx:ve,productId:Oe}=Se.detail,Ne=o().products.find(de=>de.idx===ve);if(Ne){const de={},ue=[];for(const he of Ne.variants){const De=((_e=he.optionValues)==null?void 0:_e.color)||((q=he.optionValues)==null?void 0:q.)||"default";de[De]||(de[De]={},ue.push(De)),de[De][he.variantId]=he.quantity}const Fe={};for(const he of Ne.addons||[])Fe[he.addonId]={productId:he.selectedProductId,variantId:he.selectedVariantId,price:he.price||0,quantity:he.quantity||1};let Pe=null,it=null,We=null;Ne.simplePrints&&Ne.simplePrints.length>0&&(Pe=Ne.simplePrints.map(he=>({objectId:he.objectId,printMethod:he.printMethod,templateId:he.templateId,selectedColors:he.selectedColors,printConfig:he.printConfig,uploadedFiles:he.uploads,uploads:he.uploads,nameSheet:he.nameSheet,memo:he.memo,price:he.price||0})),We={currentMethod:"simple"}),Ne.prints&&Ne.prints.length>0&&(it=Ne.prints.map(he=>({objectId:he.objectId,title:he.title,template:he.templateId?{id:he.templateId,name:he.templateName||he.title}:null,parentTemplates:he.parentTemplates||[],colors:he.colors,uploads:he.uploadedFiles,memo:he.memo,price:he.price||0})),We={currentMethod:"detailed"},console.log("[QnaRegister] detailedPrintState :",it));const je={productSelection:{selectedColors:ue,quantityByVariant:de,totalQuantity:Ne.totalQuantity,variantsData:[]},printSelection:We,addonSelection:{selectedAddons:Fe},additionalInfo:null,simplePrintState:Pe,detailedPrintState:it};ZB(o().qnaId,Oe,ve,je),console.log("[QnaRegister]    sessionStorage :",{idx:ve,productId:Oe,sessionData:je})}Ki.setEditing(ve,Oe),_(N,Oe),_(Be,!0)}function P(Se){const{idx:ve}=Se.detail;Ki.removeProduct(ve),_(te,[...o().products])}async function O(Se){if(Se&&(Se.stopPropagation(),Se.preventDefault()),!l(A)){l(s)&&!f()?l(se)?l(se).length<4?alert(" 4  ."):l(se)!==l(oe)?alert("  ."):alert(", ,    ."):alert("   ."):alert(", ,    .");return}_(R,!0);try{let ve;if(f()&&xe?(ve=await o2(f(),{title:l(y),content:l(x),customer_name:l(C),customer_phone:l(d),customer_email:l(ee)}),await I$(f()),await Q$(f()),await M$(f()),await j$(f())):ve=await C$({shop_id:h(),customer_id:u()||void 0,customer_name:l(C),customer_phone:l(d),customer_email:l(ee),title:l(y),content:l(x),password:l(s)?l(se):void 0}),!ve.id)throw new Error("  .");const Oe=o().products;if(Oe.length>0){const Ne=[];for(const ue of Oe)for(const Fe of ue.variants)Ne.push({idx:ue.idx,product_id:ue.productId,variant_id:Fe.variantId,quantity:Fe.quantity,price:Fe.price||0,product_name:ue.productName,variant_name:Fe.variantName,option_values:Fe.optionValues});Ne.length>0&&await F$(ve.id,Ne);const _e=[];for(const ue of Oe)for(const Fe of ue.prints||[])_e.push({idx:ue.idx,object_id:Fe.objectId,print_type:Fe.printType,title:Fe.title,print_method:Fe.printMethod,template_id:Fe.templateId,colors:Fe.colors,uploaded_files:Fe.uploadedFiles,file_metadata:Fe.fileMetadata,memo:Fe.memo,price:Fe.price||0});_e.length>0&&await U$(ve.id,_e);const q=[];for(const ue of Oe)for(const Fe of ue.simplePrints||[])q.push({idx:ue.idx,object_id:Fe.objectId,print_method:Fe.printMethod,template_id:Fe.templateId,selected_colors:Fe.selectedColors,print_config:Fe.printConfig,uploads:Fe.uploads,name_sheet:Fe.nameSheet,memo:Fe.memo,price:Fe.price||0});q.length>0&&await N$(ve.id,q);const de=[];console.log("[QnaRegister] Processing addon save for products:",Oe.map(ue=>{var Fe;return{idx:ue.idx,productId:ue.productId,addonsCount:((Fe=ue.addons)==null?void 0:Fe.length)||0,addons:ue.addons}}));for(const ue of Oe){console.log("[QnaRegister] Product addons:",ue.addons);for(const Fe of ue.addons||[])de.push({idx:ue.idx,addon_id:Fe.addonId,selected_product_id:Fe.selectedProductId,selected_variant_id:Fe.selectedVariantId,price:Fe.price||0,quantity:Fe.quantity||1})}console.log("[QnaRegister] addonsToSave:",de),de.length>0?(console.log("[QnaRegister] Saving addons to database..."),await H$(ve.id,de),console.log("[QnaRegister] Addons saved successfully")):console.log("[QnaRegister] No addons to save"),await $$(ve.id)}if(d0(f()||null),g()&&ve.id)g()(ve.id);else{const Ne=f()?`?qnaMode=detail&qnaId=${ve.id}`:"?qnaMode=list";window.location.href=window.location.pathname+Ne}}catch(ve){console.error("[QnaRegister] submitQna error:",ve),alert("  .  .")}finally{_(R,!1)}}function j(Se){Se.stopPropagation(),Se.preventDefault(),l(k)&&l(k).showModal()}function $(){l(k)&&l(k).close(),d0(f()||null),w()?w()():window.location.href=window.location.pathname+"?qnaMode=list"}function H(){l(k)&&l(k).close()}tr(()=>Hn(u()),()=>{_(s,!u())}),tr(()=>(l(se),l(oe)),()=>{_(i,!l(se)||!l(oe)||l(se)===l(oe))}),tr(()=>(l(s),Hn(f()),l(se),l(i)),()=>{_(a,!l(s)||!f()&&l(se).length>=4&&l(se).length<=16&&l(i))}),tr(()=>(l(y),l(x),l(C),Hn(u()),Hn(f()),l(se),l(oe)),()=>{_(A,l(y).trim()&&l(x).trim()&&l(C).trim()&&(u()||f()||l(se).trim()&&l(se)===l(oe)&&l(se).length>=4))}),tr(()=>(l(I),l(M),l(L)),()=>{_(d,l(I)&&l(M)&&l(L)?`${l(I)}-${l(M)}-${l(L)}`:"")}),bo(),nn();var Y=Iq(),Ce=m(Y);{var fe=Se=>{var ve=_q(),Oe=m(ve);ac(Oe,{class:"odz-w-8 odz-h-8 odz-animate-spin odz-mb-2"}),U(Se,ve)},Le=Se=>{var ve=Fq(),Oe=m(ve),Ne=m(Oe),_e=m(Ne),q=z(Oe,2),de=z(m(q),2),ue=m(de),Fe=z(m(ue),2),Pe=z(ue,2),it=z(m(Pe),2),We=m(it),je=z(We,4);ss(je,ft=>_(J,ft),()=>l(J));var he=z(je,4);ss(he,ft=>_(ne,ft),()=>l(ne));var De=z(Pe,2),ot=z(m(De),2),Ge=m(ot);gE(Ge,{class:"odz-w-4 odz-h-4 odz-absolute odz-left-4 odz-top-1/2 -odz-translate-y-1/2 odz-text-slate-400"});var Je=z(Ge,2),rt=z(de,2);{var ht=ft=>{var Dt=zq(),Yt=m(Dt),dr=m(Yt);pE(dr,{class:"odz-w-5 odz-h-5 odz-text-amber-600"});var ur=z(Yt,4),hr=m(ur),vr=z(m(hr),2),fn=z(vr,2);{var pn=pr=>{var yr=bq();U(pr,yr)};be(fn,pr=>{l(se)&&l(se).length<4&&pr(pn)})}var kr=z(hr,2),wr=z(m(kr),2),Vr=z(wr,2);{var Rr=pr=>{var yr=xq();U(pr,yr)};be(Vr,pr=>{l(oe)&&!l(i)&&pr(Rr)})}ke(()=>{il(vr,"odz-input-error",l(se)&&l(se).length<4),il(wr,"odz-input-error",l(oe)&&!l(i))}),Fr(vr,()=>l(se),pr=>_(se,pr)),Fr(wr,()=>l(oe),pr=>_(oe,pr)),U(ft,Dt)};be(rt,ft=>{l(s)&&!f()&&ft(ht)})}var $e=z(q,2),st=z(m($e),2),Bt=m(st),Ct=z(m(Bt),2),Tt=z(Bt,2),wt=z(m(Tt),2),Ze=z($e,2),kt=m(Ze),It=z(m(kt),2),jt=m(It);Ru(jt,{class:"odz-w-4 odz-h-4 odz-mr-1"});var et=z(kt,2);{var yt=ft=>{var Dt=Bq(),Yt=m(Dt);rC(Yt,{get products(){return l(te)},$$events:{edit:T,delete:P}}),U(ft,Dt)},mt=ft=>{var Dt=Cq(),Yt=m(Dt),dr=m(Yt);ju(dr,{class:"odz-w-10 odz-h-10 odz-text-slate-300"});var ur=z(Yt,4),hr=m(ur);Ru(hr,{class:"odz-w-4 odz-h-4 odz-mr-1"}),At("click",ur,B),U(ft,Dt)};be(et,ft=>{l(te).length>0?ft(yt):ft(mt,!1)})}var Vt=z(Ze,2),ir=m(Vt),qt=z(ir,2),Gt=m(qt);{var ar=ft=>{var Dt=Sq(),Yt=lt(Dt);ac(Yt,{class:"odz-w-5 odz-h-5 odz-animate-spin odz-mr-2"}),U(ft,Dt)},St=ft=>{var Dt=Eq(),Yt=lt(Dt);yE(Yt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var dr=z(Yt);ke(()=>Qe(dr,` ${(f()?" ":" ")??""}`)),U(ft,Dt)};be(Gt,ft=>{l(R)?ft(ar):ft(St,!1)})}ke(()=>{Qe(_e,f()?" ":" "),qt.disabled=!l(A)||l(R)}),Fr(Fe,()=>l(C),ft=>_(C,ft)),Fr(We,()=>l(I),ft=>_(I,ft)),At("input",We,ge),Fr(je,()=>l(M),ft=>_(M,ft)),At("input",je,pe),Fr(he,()=>l(L),ft=>_(L,ft)),Fr(Je,()=>l(ee),ft=>_(ee,ft)),Fr(Ct,()=>l(y),ft=>_(y,ft)),Fr(wt,()=>l(x),ft=>_(x,ft)),At("click",It,B),At("click",ir,ft=>j(ft)),At("click",qt,ft=>O(ft)),U(Se,ve)};be(Ce,Se=>{l(W)?Se(fe):Se(Le,!1)})}var X=z(Ce,2);{var D=Se=>{J1(Se,{addProduct:F,get productType(){return c()},excludeNoProcess:!0,get isProductSearchOpen(){return l(Z)},set isProductSearchOpen(ve){_(Z,ve)},$$legacy:!0})};be(X,Se=>{l(Z)&&Se(D)})}var Ae=z(X,2);{var ye=Se=>{const ve=at(()=>f()||null);yq(Se,{get isOpen(){return l(Be)},get productId(){return l(N)},get shopId(){return h()},get mallType(){return c()},get qnaId(){return l(ve)},get editingIdx(){return o().editingIdx},$$events:{save:E,close:()=>{_(Be,!1),_(N,""),Ki.clearEditing()}}})};be(Ae,Se=>{l(Be)&&Se(ye)})}var ae=z(Ae,2),le=m(ae),Ee=z(m(le),4),Me=m(Ee),ze=z(Me,2);ss(ae,Se=>_(k,Se),()=>l(k)),At("click",Me,H),At("click",ze,$),At("click",ae,Pb(H)),U(n,Y),Zr(),r()}var Qq=V(' <span class="odz-font-mono odz-font-medium odz-text-primary"> </span>',1),Tq=V('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),Lq=V("<!>  ...",1),Pq=V('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-sm"><button type="button" class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"><!></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-flex odz-items-center odz-gap-2"><!>  </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-4"><!>  .</p> <div class="odz-form-control odz-mb-4"><input type="password" placeholder=" (4~16)" maxlength="16" class="odz-input odz-input-bordered odz-w-full"> <!></div> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div></div>');function kq(n,e){Jr(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"qnaId",8,""),o=gt(e,"inquiryNo",8,"");const s=Ag();let i=Ie(""),a=Ie(!1),A=Ie("");async function d(){if(!l(i).trim()){_(A," .");return}if(l(i).length<4){_(A," 4  .");return}_(a,!0),_(A,""),s("verify",{qnaId:r(),password:l(i)})}function c(y,x){_(a,!1),!y&&x&&_(A,x)}function u(){_(i,""),_(A,""),_(a,!1),s("cancel")}function h(y){y.key==="Enter"&&!l(a)?d():y.key==="Escape"&&u()}tr(()=>Hn(t()),()=>{t()&&(_(i,""),_(A,""),_(a,!1))}),bo(),nn();var f=Lt(),g=lt(f);{var w=y=>{var x=Pq(),C=m(x),I=m(C),M=m(I);ed(M,{class:"odz-w-4 odz-h-4"});var L=z(I,2),ee=m(L);s1(ee,{class:"odz-w-5 odz-h-5 odz-text-warning"});var W=z(L,2),R=m(W);{var Z=oe=>{var me=Qq(),B=z(lt(me)),F=m(B);ke(()=>Qe(F,o())),U(oe,me)};be(R,oe=>{o()&&oe(Z)})}var Be=z(W,2),N=m(Be),k=z(N,2);{var J=oe=>{var me=Tq(),B=m(me),F=m(B);ke(()=>Qe(F,l(A))),U(oe,me)};be(k,oe=>{l(A)&&oe(J)})}var ne=z(Be,2),ge=m(ne),pe=z(ge,2),xe=m(pe);{var te=oe=>{var me=Lq(),B=lt(me);ac(B,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),U(oe,me)},se=oe=>{var me=mn("");U(oe,me)};be(xe,oe=>{l(a)?oe(te):oe(se,!1)})}ke(oe=>{I.disabled=l(a),N.disabled=l(a),il(N,"odz-input-error",l(A)),ge.disabled=l(a),pe.disabled=oe},[()=>l(a)||!l(i).trim()],at),At("click",I,u),Fr(N,()=>l(i),oe=>_(i,oe)),At("keydown",N,h),At("click",ge,u),At("click",pe,d),At("click",x,Pb(u)),U(y,x)};be(g,y=>{t()&&y(w)})}return U(n,f),Tb(e,"setVerifyResult",c),Zr({setVerifyResult:c})}var Oq=V('<button class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!>  </button>'),Dq=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),Nq=V('<div class="odz-alert odz-alert-error odz-shadow-sm"><!> <span> </span> <button class="odz-btn odz-btn-sm odz-btn-ghost"> </button></div>'),Mq=V('<button class="odz-btn odz-btn-primary odz-btn-sm odz-mt-4 odz-gap-1"><!>   </button>'),Hq=V('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">  </p> <!>',1),jq=V('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   </p>',1),Rq=V('<div class="odz-text-center odz-py-16 odz-bg-gray-50 odz-rounded-xl odz-border odz-border-dashed odz-border-gray-300"><!> <!></div>'),$q=V('<span class="odz-badge odz-badge-xs odz-badge-info"></span>'),qq=V('<tr class="odz-cursor-pointer hover:odz-bg-gray-50 odz-transition-colors"><td class="odz-text-center"><span class="odz-inline-flex odz-items-center odz-gap-1 odz-font-mono odz-text-xs odz-text-gray-500"> <!></span></td><td class="odz-text-center"><span><!> </span></td><td><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-font-medium odz-text-gray-900 odz-truncate odz-max-w-xs hover:odz-text-primary odz-transition-colors"> </span> <!></div></td><td class="odz-text-center odz-text-sm odz-text-gray-600 odz-hidden sm:odz-table-cell"> </td><td class="odz-text-center odz-text-xs odz-text-gray-400 odz-hidden md:odz-table-cell"> </td></tr>'),Kq=V('<span class="odz-text-gray-300"> </span>'),Vq=V('<div class="odz-bg-white odz-rounded-xl odz-border odz-border-gray-200 odz-overflow-hidden"><table class="odz-table odz-table-sm odz-w-full"><thead><tr class="odz-bg-gray-50 odz-border-b odz-border-gray-200"><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-20 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-left odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden sm:odz-table-cell"></th><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden md:odz-table-cell"></th></tr></thead><tbody class="odz-divide-y odz-divide-gray-100"></tbody></table></div> <div class="odz-text-center odz-text-xs odz-text-gray-400 odz-pt-2"> <!></div>',1),Gq=V('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2> <!></div> <div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2"><div class="odz-relative odz-flex-1"><!> <input type="text" placeholder=", ,  ..." class="odz-input odz-input-bordered odz-input-sm odz-w-full odz-pl-9"></div> <select class="odz-select odz-select-bordered odz-select-sm odz-w-full sm:odz-w-32"><option></option><option></option><option></option><option></option></select></div> <!></div> <!>',1);function Wq(n,e){Jr(e,!1);let t=gt(e,"shopId",8),r=gt(e,"customerId",8,void 0),o=gt(e,"onSelectQna",8,void 0),s=gt(e,"onCreateNew",8,void 0),i=Ie([]),a=Ie([]),A=Ie(!0),d=Ie(""),c=Ie(""),u=Ie("all"),h=null,f=Ie(!1),g=Ie(null),w=Ie();$n(async()=>{await y(),x()}),as(()=>{h&&a2(h)});async function y(){try{_(A,!0),_(d,""),_(i,await S$(t(),r()))}catch(j){console.error("[QnaList]   :",j),_(d,"     .")}finally{_(A,!1)}}function x(){h=O$(t(),async j=>{console.log("[QnaList]  :",j),await y()})}function C(j){switch(j){case"pending":return{label:"",class:"odz-badge-warning",icon:vp};case"answered":return{label:"",class:"odz-badge-success",icon:o1};case"closed":return{label:"",class:"odz-badge-neutral",icon:Hu};default:return{label:"",class:"odz-badge-ghost",icon:vp}}}function I(j){return j?new Date(j).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}async function M(j){if(j.id)try{const $=await x$(j.id,r());$.canAccess?o()&&o()(j.id):$.requiresPassword?(_(g,j),_(f,!0)):alert($.message||"  .")}catch($){console.error("[QnaList]    :",$),alert("     .")}}async function L(j){const{qnaId:$,password:H}=j.detail;try{const Y=await z$($,H);Y.canAccess?(_(f,!1),_(g,null),o()&&o()($)):l(w)&&l(w).setVerifyResult(!1,Y.message||"  .")}catch(Y){console.error("[QnaList]   :",Y),l(w)&&l(w).setVerifyResult(!1,"    .")}}function ee(){_(f,!1),_(g,null)}function W(){s()&&s()()}tr(()=>(l(i),l(c),l(u)),()=>{let j=l(i);if(l(c).trim()){const $=l(c).toLowerCase();j=j.filter(H=>{var Y,Ce,fe;return((Y=H.title)==null?void 0:Y.toLowerCase().includes($))||((Ce=H.customer_name)==null?void 0:Ce.toLowerCase().includes($))||((fe=H.inquiry_no)==null?void 0:fe.toLowerCase().includes($))})}l(u)!=="all"&&(j=j.filter($=>$.status===l(u))),_(a,j)}),bo(),nn();var R=Gq(),Z=lt(R),Be=m(Z),N=z(m(Be),2);{var k=j=>{var $=Oq(),H=m($);Ru(H,{class:"odz-w-4 odz-h-4"}),At("click",$,W),U(j,$)};be(N,j=>{s()&&j(k)})}var J=z(Be,2),ne=m(J),ge=m(ne);mp(ge,{class:"odz-absolute odz-left-3 odz-top-1/2 odz--translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var pe=z(ge,2),xe=z(ne,2);ke(()=>{l(u),Ou(()=>{})});var te=m(xe);te.value=(te.__value="all")==null?"":"all";var se=z(te);se.value=(se.__value="pending")==null?"":"pending";var oe=z(se);oe.value=(oe.__value="answered")==null?"":"answered";var me=z(oe);me.value=(me.__value="closed")==null?"":"closed";var B=z(J,2);{var F=j=>{var $=Dq();U(j,$)},E=j=>{var $=Lt(),H=lt($);{var Y=fe=>{var Le=Nq(),X=m(Le);Hu(X,{class:"odz-w-5 odz-h-5"});var D=z(X,2),Ae=m(D),ye=z(D,2);ke(()=>Qe(Ae,l(d))),At("click",ye,y),U(fe,Le)},Ce=fe=>{var Le=Lt(),X=lt(Le);{var D=ye=>{var ae=Rq(),le=m(ae);vE(le,{class:"odz-w-12 odz-h-12 odz-mx-auto odz-text-gray-400 odz-mb-4"});var Ee=z(le,2);{var Me=Se=>{var ve=Hq(),Oe=z(lt(ve),4);{var Ne=_e=>{var q=Mq(),de=m(q);Ru(de,{class:"odz-w-4 odz-h-4"}),At("click",q,W),U(_e,q)};be(Oe,_e=>{s()&&_e(Ne)})}U(Se,ve)},ze=Se=>{var ve=jq();U(Se,ve)};be(Ee,Se=>{l(i).length===0?Se(Me):Se(ze,!1)})}U(ye,ae)},Ae=ye=>{var ae=Vq(),le=lt(ae),Ee=m(le),Me=z(m(Ee));nr(Me,5,()=>l(a),Ne=>Ne.id,(Ne,_e)=>{var q=qq();const de=at(()=>C(l(_e).status));var ue=m(q),Fe=m(ue),Pe=m(Fe),it=z(Pe);{var We=Ze=>{s1(Ze,{class:"odz-w-3 odz-h-3 odz-text-amber-500",title:" "})};be(it,Ze=>{l(_e).customer_id||Ze(We)})}var je=z(ue),he=m(je),De=m(he);Ym(De,()=>l(de).icon,(Ze,kt)=>{kt(Ze,{class:"odz-w-3 odz-h-3"})});var ot=z(De),Ge=z(je),Je=m(Ge),rt=m(Je),ht=m(rt),$e=z(rt,2);{var st=Ze=>{var kt=$q();U(Ze,kt)};be($e,Ze=>{l(_e).converted_estimate_id&&Ze(st)})}var Bt=z(Ge),Ct=m(Bt),Tt=z(Bt),wt=m(Tt);ke(Ze=>{Qe(Pe,`${l(_e).inquiry_no??""} `),Tr(he,`odz-badge odz-badge-sm odz-gap-0.5 odz-whitespace-nowrap ${l(de).class??""}`),Qe(ot,` ${l(de).label??""}`),Qe(ht,l(_e).title||"( )"),Qe(Ct,l(_e).customer_name),Qe(wt,Ze)},[()=>I(l(_e).created_at)],at),At("click",q,()=>M(l(_e))),U(Ne,q)});var ze=z(le,2),Se=m(ze),ve=z(Se);{var Oe=Ne=>{var _e=Kq(),q=m(_e);ke(()=>Qe(q,`/  ${l(i).length??""}`)),U(Ne,_e)};be(ve,Ne=>{l(a).length!==l(i).length&&Ne(Oe)})}ke(()=>Qe(Se,` ${l(a).length??""} `)),U(ye,ae)};be(X,ye=>{l(a).length===0?ye(D):ye(Ae,!1)},!0)}U(fe,Le)};be(H,fe=>{l(d)?fe(Y):fe(Ce,!1)},!0)}U(j,$)};be(B,j=>{l(A)?j(F):j(E,!1)})}var T=z(Z,2);const P=at(()=>{var j;return((j=l(g))==null?void 0:j.id)||""}),O=at(()=>{var j;return((j=l(g))==null?void 0:j.inquiry_no)||""});ss(kq(T,{get qnaId(){return l(P)},get inquiryNo(){return l(O)},get isOpen(){return l(f)},set isOpen(j){_(f,j)},$$events:{verify:L,cancel:ee},$$legacy:!0}),j=>_(w,j),()=>l(w)),Fr(pe,()=>l(c),j=>_(c,j)),Nu(xe,()=>l(u),j=>_(u,j)),U(n,R),Zr()}var Xq=V('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-dots odz-loading-md odz-text-gray-400"></div></div>'),Yq=V('<div class="odz-text-center odz-text-red-500 odz-py-4"> </div>'),Jq=V('<div class="odz-text-center odz-text-gray-500 odz-py-8"><p>  .</p> <p class="odz-text-sm odz-mt-1">   .</p></div>'),Zq=V('<div class="odz-flex odz-justify-center"><div class="odz-px-3.5 odz-py-2 odz-bg-gray-200 odz-text-gray-600 odz-text-sm odz-rounded-full"> </div></div>'),eK=V("<button><!></button>"),tK=V('<div><div class="odz-flex-shrink-0"><div><!></div></div> <div><span class="odz-text-sm odz-text-gray-500 odz-mb-1"> </span> <div class="odz-group odz-relative"><div> </div> <!></div> <span class="odz-text-xs odz-text-gray-400 odz-mt-1"> </span></div></div>'),rK=V('<span class="odz-loading odz-loading-spinner odz-loading-sm"></span>'),nK=V('<div class="odz-flex odz-flex-col odz-h-full odz-min-h-[300px]"><div class="odz-flex-1 odz-overflow-y-auto odz-space-y-4 odz-p-5 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-slate-100 odz-max-h-[500px] odz-shadow-inner"><!></div> <div class="odz-mt-4 odz-flex odz-gap-2"><textarea placeholder=" ..." class="odz-textarea odz-textarea-bordered odz-flex-1 odz-resize-none odz-h-14 odz-rounded-2xl odz-bg-white odz-border-slate-200 focus:odz-border-indigo-500 odz-shadow-sm odz-p-4"></textarea> <button class="odz-btn odz-btn-primary odz-rounded-2xl odz-h-14 odz-w-14 odz-p-0 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!></button></div></div>');function oK(n,e){Jr(e,!1);let t=gt(e,"qnaId",8),r=gt(e,"isManager",8,!1),o=gt(e,"customerName",8,""),s=Ie([]),i=Ie(""),a=Ie(!0),A=Ie(!1),d=Ie(""),c=null,u=Ie();$n(async()=>{await h(),f()}),as(()=>{c&&a2(c)}),oS(()=>{g()});async function h(){try{_(a,!0),_(d,""),_(s,await T$(t()))}catch(ge){console.error("[QnaComments]  :",ge),_(d,"    .")}finally{_(a,!1)}}function f(){c=D$(t(),async ge=>{console.log("[QnaComments]  :",ge),await h()})}function g(){l(u)&&Cr(u,l(u).scrollTop=l(u).scrollHeight)}async function w(){if(l(i).trim())try{_(A,!0);const ge=r()?"manager":"customer",pe=r()?"":o();await tC(t(),{writer:ge,writer_name:pe,content:l(i).trim()}),_(i,"")}catch(ge){console.error("[QnaComments]  :",ge),alert("    .")}finally{_(A,!1)}}async function y(ge){if(confirm("  ?"))try{await L$(ge),_(s,l(s).filter(pe=>pe.id!==ge))}catch(pe){console.error("[QnaComments]  :",pe),alert("    .")}}function x(ge){ge.key==="Enter"&&!ge.shiftKey&&(ge.preventDefault(),w())}function C(ge){switch(r()?ge.writer:ge.writer,ge.writer){case"customer":return{icon:wp,class:"odz-bg-blue-100 odz-text-blue-600",isMe:!r()};case"manager":return{icon:zE,class:"odz-bg-green-100 odz-text-green-600",isMe:r()};case"system":return{icon:uE,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1};default:return{icon:wp,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1}}}function I(ge){if(!ge)return"";const pe=new Date(ge),xe=new Date;return pe.toDateString()===xe.toDateString()?pe.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):pe.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}nn();var M=nK(),L=m(M),ee=m(L);{var W=ge=>{var pe=Xq();U(ge,pe)},R=ge=>{var pe=Lt(),xe=lt(pe);{var te=oe=>{var me=Yq(),B=m(me);ke(()=>Qe(B,l(d))),U(oe,me)},se=oe=>{var me=Lt(),B=lt(me);{var F=T=>{var P=Jq();U(T,P)},E=T=>{var P=Lt(),O=lt(P);nr(O,1,()=>l(s),j=>j.id,(j,$)=>{var H=Lt();const Y=at(()=>C(l($)));var Ce=lt(H);{var fe=X=>{var D=Zq(),Ae=m(D),ye=m(Ae);ke(()=>Qe(ye,l($).content)),U(X,D)},Le=X=>{var D=tK(),Ae=m(D),ye=m(Ae),ae=m(ye);Ym(ae,()=>l(Y).icon,(de,ue)=>{ue(de,{class:"odz-w-4 odz-h-4"})});var le=z(Ae,2),Ee=m(le),Me=m(Ee),ze=z(Ee,2),Se=m(ze),ve=m(Se),Oe=z(Se,2);{var Ne=de=>{var ue=eK(),Fe=m(ue);i1(Fe,{class:"odz-w-3.5 odz-h-3.5 odz-text-gray-400 hover:odz-text-red-500"}),ke(()=>Tr(ue,`odz-absolute odz-top-0 ${(l(Y).isMe?"odz-left-0 -odz-translate-x-full odz-pr-1":"odz-right-0 odz-translate-x-full odz-pl-1")??""} odz-opacity-0 group-hover:odz-opacity-100 odz-transition-opacity`)),At("click",ue,()=>y(l($).id)),U(de,ue)};be(Oe,de=>{(l(Y).isMe||r())&&l($).writer!=="system"&&de(Ne)})}var _e=z(ze,2),q=m(_e);ke(de=>{Tr(D,`odz-flex odz-gap-2 ${(l(Y).isMe?"odz-flex-row-reverse":"")??""}`),Tr(ye,`odz-w-8 odz-h-8 odz-rounded-full ${l(Y).class??""} odz-flex odz-items-center odz-justify-center`),Tr(le,`odz-flex odz-flex-col odz-max-w-[70%] ${(l(Y).isMe?"odz-items-end":"odz-items-start")??""}`),Qe(Me,l($).writer_name||l($).writer),Tr(Se,`odz-px-4 odz-py-2.5 odz-rounded-2xl odz-text-base odz-whitespace-pre-wrap odz-shadow-sm ${(l(Y).isMe?"odz-bg-indigo-600 odz-text-white":"odz-bg-white odz-text-slate-800 odz-border odz-border-slate-200")??""}`),Qe(ve,l($).content),Qe(q,de)},[()=>I(l($).created_at)],at),U(X,D)};be(Ce,X=>{l($).writer==="system"?X(fe):X(Le,!1)})}U(j,H)}),U(T,P)};be(B,T=>{l(s).length===0?T(F):T(E,!1)},!0)}U(oe,me)};be(xe,oe=>{l(d)?oe(te):oe(se,!1)},!0)}U(ge,pe)};be(ee,ge=>{l(a)?ge(W):ge(R,!1)})}ss(L,ge=>_(u,ge),()=>l(u));var Z=z(L,2),Be=m(Z),N=z(Be,2),k=m(N);{var J=ge=>{var pe=rK();U(ge,pe)},ne=ge=>{_E(ge,{class:"odz-w-5 odz-h-5"})};be(k,ge=>{l(A)?ge(J):ge(ne,!1)})}ke(ge=>{Be.disabled=l(A),N.disabled=ge},[()=>l(A)||!l(i).trim()],at),Fr(Be,()=>l(i),ge=>_(i,ge)),At("keydown",Be,x),At("click",N,w),U(n,M),Zr()}var sK=V('<button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-transition-transform hover:odz-rotate-90" title=""><!></button>'),iK=V('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-20 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-indigo-600"></div> <span class="odz-text-gray-500 odz-animate-pulse">   ...</span></div>'),aK=V('<div class="odz-alert odz-alert-error odz-shadow-sm odz-rounded-2xl"><!> <span> </span></div>'),AK=V('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3.5 odz-py-1.5 odz-rounded-full odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-semibold odz-border odz-border-indigo-100 odz-shadow-sm"><!> </span>'),lK=V('<button class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),dK=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),cK=V('<button class="odz-btn odz-btn-sm odz-btn-primary odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!> </button>'),uK=V('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),hK=V('<div class="odz-dropdown odz-dropdown-end"><button tabindex="0" role="button" class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button> <ul tabindex="0" class="odz-dropdown-content odz-z-[1] odz-menu odz-p-2 odz-shadow-xl odz-bg-base-100 odz-rounded-2xl odz-w-32 odz-mt-2 odz-border odz-border-gray-100 odz-backdrop-blur-sm"><li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li></ul></div> <!> <button class="odz-btn odz-btn-sm odz-btn-ghost odz-text-error odz-btn-square odz-rounded-xl hover:odz-bg-error/10 odz-transition-colors" title=""><!></button>',1),fK=V('<button type="button" class="odz-w-full odz-text-left odz-bg-slate-50 odz-rounded-2xl odz-p-4 odz-border odz-border-slate-100 hover:odz-bg-white hover:odz-shadow-xl hover:odz-border-indigo-200 odz-transition-all odz-cursor-pointer odz-group"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-p-1.5 odz-rounded-lg odz-bg-white odz-border odz-border-slate-200 group-hover:odz-border-indigo-100 group-hover:odz-bg-indigo-50 odz-transition-colors"><!></div> <span class="odz-font-mono odz-text-sm odz-font-bold odz-text-slate-900"> </span></div> <span> </span></div> <div class="odz-flex odz-items-end odz-justify-between odz-gap-4"><p class="odz-text-sm odz-font-semibold odz-text-slate-700 odz-line-clamp-1 odz-flex-1"> </p> <span class="odz-text-[11px] odz-text-slate-400 odz-whitespace-nowrap"> </span></div></button>'),pK=V('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-indigo-600 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><!>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-indigo-100 odz-text-indigo-800 odz-text-sm odz-font-bold"> </span></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-3"></div></div>'),gK=V('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-slate-100 odz-text-slate-600 odz-text-sm odz-font-bold"> </span></div> <!></div>'),vK=V('<div class="odz-relative odz-overflow-hidden odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-absolute odz-top-0 odz-right-0 odz-w-64 odz-h-64 odz-bg-gradient-to-bl odz-from-indigo-50/50 odz-to-transparent -odz-z-10 odz-rounded-full -odz-mr-20 -odz-mt-20"></div> <div class="odz-flex odz-flex-wrap odz-items-start odz-justify-between odz-gap-6"><div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><span class="odz-px-2.5 odz-py-1 odz-bg-slate-50 odz-rounded-lg odz-text-xs odz-font-mono odz-font-semibold odz-text-slate-600 odz-border odz-border-slate-200 odz-shadow-sm"> </span> <span><!> </span> <!></div> <h3 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-leading-tight"> </h3></div> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><!> <!></div></div> <div class="odz-divider odz-my-5"></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-6 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-2xl odz-border odz-border-slate-100"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900 odz-break-all"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900"> </p></div></div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-4 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <div class="odz-prose odz-prose-lg odz-max-w-none odz-text-slate-900 odz-whitespace-pre-wrap odz-leading-relaxed odz-bg-slate-50/50 odz-p-8 odz-rounded-2xl odz-border odz-text-base odz-border-slate-100"> </div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-5 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> </h4> <!></div>',1),mK=V('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><div class="odz-flex odz-items-center odz-gap-3"><h2 class="odz-text-2xl odz-font-bold odz-text-slate-900 odz-tracking-tight"> </h2></div> <!></div> <!></div>');function wK(n,e){Jr(e,!1);const t=Ie();let r=gt(e,"qnaId",8);gt(e,"shopId",8);let o=gt(e,"isManager",8,!1),s=gt(e,"onBack",8,void 0),i=gt(e,"onEdit",8,void 0),a=gt(e,"onConvertToEstimate",8,void 0),A=gt(e,"onViewEstimate",8,void 0),d=Ie(null),c=[],u=[],h=Ie([]),f=Ie([]),g=Ie(!0),w=Ie(""),y=Ie(!1),x=Ie(!1),C=null;$n(async()=>{await I(),M()}),as(()=>{C&&a2(C)});async function I(){try{if(_(g,!0),_(w,""),_(d,await Kg(r())),!l(d)){_(w,"   .");return}const[B,F,E,T]=await Promise.all([s2(r()),i2(r()),A2(r()),l2(r())]);c=B,u=F,_(h,L(c,u,E,T));try{_(f,await q$(r()))}catch(P){console.warn("[QnaDetail]    :",P),_(f,[])}}catch(B){console.error("[QnaDetail]  :",B),_(w,"     .")}finally{_(g,!1)}}function M(){C=k$(r(),async B=>{console.log("[QnaDetail]  :",B),await I()})}function L(B,F,E,T){const P=new Map;return B.forEach(O=>{const j=O.idx??0;P.has(j)||P.set(j,{idx:j,productId:O.product_id,productName:O.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const $=P.get(j);$.variants.push({variantId:O.variant_id||"",variantName:O.variant_name,quantity:O.quantity||0,optionValues:O.option_values}),$.totalQuantity+=O.quantity||0}),F.forEach(O=>{const j=O.idx??0,$=P.get(j);$&&$.prints.push({objectId:O.object_id||"",printType:O.print_type||"none",title:O.title,printMethod:O.print_method,templateId:O.template_id,colors:O.colors,uploadedFiles:O.uploaded_files,fileMetadata:O.file_metadata,memo:O.memo})}),E.forEach(O=>{const j=O.idx??0,$=P.get(j);$&&$.simplePrints&&$.simplePrints.push({objectId:O.object_id||"",printMethod:O.print_method,templateId:O.template_id,selectedColors:O.selected_colors,printConfig:O.print_config,uploads:O.uploads,nameSheet:O.name_sheet,memo:O.memo,price:O.price})}),T.forEach(O=>{const j=O.idx??0,$=P.get(j);$&&$.addons&&$.addons.push({addonId:O.addon_id,addonName:O.addon_name||"",selectedProductId:O.selected_product_id,selectedProductName:O.selected_product_name||"",selectedVariantId:O.selected_variant_id,selectedVariantName:O.selected_variant_name||"",quantity:O.quantity||0})}),Array.from(P.values())}function ee(B){switch(B){case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200",icon:vp};case"answered":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200",icon:o1};case"closed":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300",icon:Hu};default:return{label:"",class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200",icon:vp}}}function W(B){return B?new Date(B).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function R(B){switch(B){case"temp":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200"};case"progress":return{label:"",class:"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200"};case"completed":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200"};case"canceled":return{label:"",class:"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200"};case"hold":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};default:return{label:B,class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}}function Z(){s()&&s()()}function Be(B){A()?A()(B):window.location.href=`/?mode=register&estimateId=${B}&returnTo=qna`}function N(){var B;i()&&((B=l(d))!=null&&B.id)&&i()(l(d).id)}async function k(){var B;if((B=l(d))!=null&&B.id&&confirm("  ?     ."))try{_(x,!0),await E$(l(d).id),alert(" ."),s()&&s()()}catch(F){console.error("[QnaDetail]  :",F),alert("   .")}finally{_(x,!1)}}async function J(){var B;if((B=l(d))!=null&&B.id&&confirm("   ?"))try{_(y,!0);const F=await P$(l(d).id);alert(" ."),a()&&a()(F)}catch(F){console.error("[QnaDetail]   :",F),alert("    .")}finally{_(y,!1)}}async function ne(B){var F;if((F=l(d))!=null&&F.id)try{await eC(l(d).id,B),_(d,{...l(d),status:B})}catch(E){console.error("[QnaDetail]   :",E),alert("    .")}}tr(()=>l(d),()=>{_(t,l(d)&&((l(d).product_amount??0)>0||(l(d).print_amount??0)>0||(l(d).addon_amount??0)>0||(l(d).additional_amount??0)>0))}),bo(),nn();var ge=mK(),pe=m(ge),xe=z(m(pe),2);{var te=B=>{var F=sK(),E=m(F);ed(E,{class:"odz-w-5 odz-h-5"}),At("click",F,Z),U(B,F)};be(xe,B=>{s()&&B(te)})}var se=z(pe,2);{var oe=B=>{var F=iK();U(B,F)},me=B=>{var F=Lt(),E=lt(F);{var T=O=>{var j=aK(),$=m(j);Hu($,{class:"odz-w-6 odz-h-6"});var H=z($,2),Y=m(H);ke(()=>Qe(Y,l(w))),U(O,j)},P=O=>{var j=Lt(),$=lt(j);{var H=Y=>{var Ce=vK();const fe=at(()=>ee(l(d).status));var Le=lt(Ce),X=z(m(Le),2),D=m(X),Ae=m(D),ye=m(Ae),ae=m(ye),le=z(ye,2),Ee=m(le);Ym(Ee,()=>l(fe).icon,(et,yt)=>{yt(et,{class:"odz-w-3 odz-h-3"})});var Me=z(Ee),ze=z(le,2);{var Se=et=>{var yt=AK(),mt=m(yt);Rh(mt,{class:"odz-w-3 odz-h-3"}),U(et,yt)};be(ze,et=>{l(d).converted_estimate_id&&et(Se)})}var ve=z(Ae,2),Oe=m(ve),Ne=z(D,2),_e=m(Ne);{var q=et=>{var yt=lK(),mt=m(yt);s5(mt,{class:"odz-w-4 odz-h-4"}),At("click",yt,N),U(et,yt)};be(_e,et=>{i()&&l(d).status==="pending"&&et(q)})}var de=z(_e,2);{var ue=et=>{var yt=hK(),mt=lt(yt),Vt=m(mt),ir=m(Vt);wE(ir,{class:"odz-w-4 odz-h-4"});var qt=z(Vt,2),Gt=m(qt),ar=m(Gt),St=z(Gt,2),ft=m(St),Dt=z(St,2),Yt=m(Dt),dr=z(mt,2);{var ur=kr=>{var wr=cK(),Vr=m(wr);{var Rr=yr=>{var Gr=dK();U(yr,Gr)},pr=yr=>{Rh(yr,{class:"odz-w-4 odz-h-4"})};be(Vr,yr=>{l(y)?yr(Rr):yr(pr,!1)})}ke(()=>wr.disabled=l(y)),At("click",wr,J),U(kr,wr)};be(dr,kr=>{!l(d).converted_estimate_id&&l(h).length>0&&kr(ur)})}var hr=z(dr,2),vr=m(hr);{var fn=kr=>{var wr=uK();U(kr,wr)},pn=kr=>{i1(kr,{class:"odz-w-4 odz-h-4"})};be(vr,kr=>{l(x)?kr(fn):kr(pn,!1)})}ke(()=>{il(ar,"odz-font-bold",l(d).status==="pending"),il(ft,"odz-font-bold",l(d).status==="answered"),hr.disabled=l(x)}),At("click",ar,()=>ne("pending")),At("click",ft,()=>ne("answered")),At("click",Yt,()=>ne("closed")),At("click",hr,k),U(et,yt)};be(de,et=>{o()&&l(d).status!=="closed"&&et(ue)})}var Fe=z(X,4),Pe=m(Fe),it=z(m(Pe),2),We=m(it),je=z(Pe,2),he=z(m(je),2),De=m(he),ot=z(je,2),Ge=z(m(ot),2),Je=m(Ge),rt=z(ot,2),ht=z(m(rt),2),$e=m(ht),st=z(Le,2);{var Bt=et=>{var yt=pK(),mt=m(yt),Vt=m(mt),ir=m(Vt);Rh(ir,{class:"odz-w-5 odz-h-5"});var qt=z(Vt,2),Gt=m(qt),ar=z(mt,2);nr(ar,5,()=>l(f),gr,(St,ft)=>{var Dt=fK();const Yt=at(()=>{var on;return R(((on=l(ft).estimate)==null?void 0:on.status)||"")});var dr=m(Dt),ur=m(dr),hr=m(ur),vr=m(hr);Rh(vr,{class:"odz-w-4 odz-h-4 odz-text-slate-400 group-hover:odz-text-indigo-600"});var fn=z(hr,2),pn=m(fn),kr=z(ur,2),wr=m(kr),Vr=z(dr,2),Rr=m(Vr),pr=m(Rr),yr=z(Rr,2),Gr=m(yr);ke(on=>{var En,Wr;Qe(pn,((En=l(ft).estimate)==null?void 0:En.estimate_no)||"-"),Tr(kr,`odz-inline-flex odz-items-center odz-px-2 odz-py-1 odz-rounded-md odz-text-[10px] odz-font-bold odz-border ${l(Yt).class??""}`),Qe(wr,l(Yt).label),Qe(pr,((Wr=l(ft).estimate)==null?void 0:Wr.name)||"  "),Qe(Gr,on)},[()=>W(l(ft).created_at)],at),At("click",Dt,()=>Be(l(ft).estimate_id)),U(St,Dt)}),ke(()=>Qe(Gt,l(f).length)),U(et,yt)};be(st,et=>{l(f).length>0&&et(Bt)})}var Ct=z(st,2),Tt=z(m(Ct),2),wt=m(Tt),Ze=z(Ct,2);{var kt=et=>{var yt=gK(),mt=m(yt),Vt=z(m(mt),2),ir=m(Vt),qt=z(mt,2);rC(qt,{get products(){return l(h)},disabled:!0}),ke(()=>Qe(ir,`${l(h).length??""}`)),U(et,yt)};be(Ze,et=>{l(h).length>0&&et(kt)})}var It=z(Ze,2),jt=z(m(It),2);oK(jt,{get qnaId(){return r()},get isManager(){return o()}}),ke(et=>{Qe(ae,`#${l(d).inquiry_no??""}`),Tr(le,`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-border ${l(fe).class??""}`),Qe(Me,` ${l(fe).label??""}`),Qe(Oe,l(d).title||"( )"),Qe(We,l(d).customer_name),Qe(De,l(d).customer_phone||"-"),Qe(Je,l(d).customer_email||"-"),Qe($e,et),Qe(wt,l(d).content||"( )")},[()=>W(l(d).created_at)],at),U(Y,Ce)};be($,Y=>{l(d)&&Y(H)},!0)}U(O,j)};be(E,O=>{l(w)?O(T):O(P,!1)},!0)}U(B,F)};be(se,B=>{l(g)?B(oe):B(me,!1)})}U(n,ge),Zr()}var yK=V('<dialog id="estimate-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-h-full main-estimate-modal-box"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),_K=V("<main><!></main>");function bK(n,e){Jr(e,!1);const[t,r]=ko(),o=()=>dn(Vl,"$customerStore",t);let s=Ie(""),i="",a="",A="",d="",c="",u="",h="",f="",g="",w="",y=Ie(!1),x=null,C=Ie(null),I=[],M=null,L=null,ee="list",W=!1,R=null,Z=null,Be=null,N=null;function k(){var j,$,H,Y,Ce,fe,Le,X,D,Ae;i=((j=document.getElementById("odiz-product-id"))==null?void 0:j.value)||"",A=(($=document.getElementById("odiz-shop-id"))==null?void 0:$.value)||"",d=((H=document.getElementById("odiz-sess"))==null?void 0:H.value)||"",c=((Y=document.getElementById("odiz-customer-id"))==null?void 0:Y.value)||"",a=((Ce=document.getElementById("odiz-mall_type"))==null?void 0:Ce.value)||"",u=((fe=document.getElementById("odiz-customer-name"))==null?void 0:fe.value)||"",h=((Le=document.getElementById("odiz-customer-phone"))==null?void 0:Le.value)||"",f=((X=document.getElementById("odiz-customer-address1"))==null?void 0:X.value)||"",g=((D=document.getElementById("odiz-customer-address2"))==null?void 0:D.value)||"",w=((Ae=document.getElementById("odiz-customer-postcode"))==null?void 0:Ae.value)||""}function J(){document.querySelectorAll("input.odiz-hidden-class").forEach($=>{const H=$.value;if(H){const Y=document.getElementsByClassName(H);for(let Ce=0;Ce<Y.length;Ce++)Y[Ce].style.display="none"}})}function ne(j,$,H,Y,Ce){const fe=document.createElement("div");fe.className="odiz-estimate-preview-container odiz-app";const Le=H.closest("div");Le&&(Le.insertAdjacentElement("afterend",fe),oA(m9,{target:fe,props:{uuid:j,idx:$,appType:Y,isAddCost:Ce}}))}function ge(j){const $=document.getElementById("inc_order_view");if(!$){console.warn("[ODIZ] #inc_order_view    .");return}$.querySelectorAll(".info").forEach(Y=>{var X;if(Y.hasAttribute("data-odiz-processed"))return;const Ce=((X=Y.textContent)==null?void 0:X.replace(/\s+/g," ").trim())||"";if(!Ce.toLowerCase().includes("odiz"))return;const fe=/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}(?:-add)?)-(\d+)/i,Le=Ce.match(fe);if(Le){let D=Le[1],Ae=!1;D.endsWith("-add")&&(D=D.slice(0,-4),Ae=!0);const ye=Le[2];I.push({uuid:D,idx:ye}),Y.setAttribute("data-odiz-processed","true"),ne(D,ye,Y,j,Ae),console.log(`[ODIZ] Admin UUID : ${D}-${ye} (isAddCost: ${Ae})`)}})}function pe(j){let Y=0;function Ce(){return document.getElementById("inc_order_view")&&(ge(j),I.length>0)?(console.log(`[ODIZ] Admin : ${I.length} UUID   (: ${Y+1})`),!0):!1}if(Ce())return;console.log("[ODIZ] Admin : #inc_order_view   ...  ");const fe=setInterval(()=>{if(Y++,Ce()){clearInterval(fe);return}Y>=10?(clearInterval(fe),console.warn("[ODIZ] Admin : 10   UUID  ")):console.log(`[ODIZ] Admin :  ${Y}/10...`)},1e3)}function xe(j,$=5e3){return new Promise(H=>{const Y=document.getElementById(j);if(Y)return H(Y);const Ce=new MutationObserver(()=>{const fe=document.getElementById(j);fe&&(Ce.disconnect(),H(fe))});Ce.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{Ce.disconnect(),H(null)},$)})}function te(j){let H=new URLSearchParams(window.location.search).get(j);if(H)return H;try{if(H=new URL(window.location.href).searchParams.get(j),H)return H}catch{}const Y=document.getElementById(`odiz-${j}`);return Y!=null&&Y.value?Y.value:null}$n(async()=>{var D,Ae,ye;try{const ae=await d5();ae>0&&console.log(`[ODIZ]   : ${ae}    .`)}catch(ae){console.error("[ODIZ]    :",ae)}const j=te("mode"),$=te("estimateId"),H=te("returnTo");console.log("[ODIZ] URL parameters:",{urlMode:j,urlEstimateId:$,urlReturnTo:H});let Y=((D=document.getElementById("odiz-app-type"))==null?void 0:D.value)||"";(j==="register"||j==="list")&&(Y=j,console.log("[ODIZ] AppType set from URL:",Y)),$&&(M=$,console.log("[ODIZ] EditingEstimateId set:",M));const Ce=te("qnaId"),fe=te("qnaMode"),Le=te("isManager");if(Ce&&(L=Ce,console.log("[ODIZ] EditingQnaId set:",L)),(fe==="register"||fe==="list"||fe==="detail")&&(ee=fe,console.log("[ODIZ] QnaMode set from URL:",ee)),(Le==="true"||Le==="1")&&(W=!0,console.log("[ODIZ] IsQnaManager set:",W)),!Y){console.warn("[ODIZ] No appType detected, exiting early");return}const X=document.getElementById("odiz-estimate");if(X&&X.addEventListener("click",oe),k(),J(),gi.set({id:A,name:"",sess:d,customer_id:c}),Vl.set({name:u,phone:h,address1:f,address2:g,postcode:w,mallType:a}),x=document.getElementById("odiz-estimate-list"),Y==="order"||Y==="admin")if(Y==="admin")pe(Y);else{const ae=document.getElementById("select-order-class"),le=document.getElementById("select-order-class-uuid");if(ae&&le){const Ee=ae.value,Me=le.value,ze=document.getElementsByClassName(Ee);if(ze.length>0){const Se=ze[0].getElementsByClassName(Me);for(let ve=0;ve<Se.length;ve++){const Oe=Se[ve],Ne=((Ae=Oe.textContent)==null?void 0:Ae.trim())||"",_e=/odiz\s*:\s*([a-f0-9-]+)-(\d+)/i,q=Ne.match(_e);if(q){let de=q[1],ue=!1;de.endsWith("-add")&&(de=de.slice(0,-4),ue=!0);const Fe=q[2];I.push({uuid:de,idx:Fe}),ne(de,Fe,Oe,Y,ue)}}}}}if(Y==="list"&&x&&oA(OR,{target:x,props:{openEstimateModal:(ae,le)=>{Et.reset(),_(y,ae),_(C,le)}}}),Y==="run"&&i){const ae=document.getElementById("odiz-run-btn"),le=((ye=document.getElementById("odiz-run-btn-name"))==null?void 0:ye.value)||" ";if(ae){const Ee=document.createElement("button");Ee.textContent=le,Ee.type="button",Ee.className="odz-btn odz-btn-primary",Ee.onclick=se,ae.appendChild(Ee)}}if(Y==="fixed"){const ae=document.getElementById("odiz-fixed-area");if(ae&&i){const le=document.createElement("div");if(le.className="odiz-fixed-product-container odiz-app",ae.appendChild(le),a)try{const Ee=await I0(a,i);Ee&&(_(s,Ee.id),oA(Yp,{target:le,props:{productId:l(s)}}))}catch{}else i&&(_(s,i),oA(Yp,{target:le,props:{productId:l(s)}}))}}if(Y==="register"){console.log("[ODIZ] Register mode detected, waiting for container...");const ae=await xe("odiz-estimate-register-area");if(ae){console.log("[ODIZ] Container found, mounting EstimateRegister with estimateId:",M);const le=document.createElement("div");le.className="odiz-estimate-register-container odiz-app",ae.appendChild(le),oA(m$,{target:le,props:{mallType:a,customerId:c,sess:d,shopId:A,estimateId:M,returnTo:H||"list"}})}else console.error("[ODIZ] Failed to find #odiz-estimate-register-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-estimate-register-area"></div>')}if(Y==="qna"){console.log("[ODIZ] QNA mode detected (dialog-based)");const ae=await xe("odiz-qna-area");if(ae){console.log("[ODIZ] QNA container found, mounting QnaList as main view...");const le=document.createElement("div");le.className="odiz-qna-container odiz-app",ae.appendChild(le),oA(Wq,{target:le,props:{shopId:A,customerId:c||void 0,onSelectQna:Ee=>{Z=Ee,E()},onCreateNew:()=>{R=null,F()}}}),L?ee==="detail"?(Z=L,setTimeout(()=>E(),100)):ee==="register"&&(R=L,setTimeout(()=>F(),100)):ee==="register"&&(R=null,setTimeout(()=>F(),100))}else console.error("[ODIZ] Failed to find #odiz-qna-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-qna-area"></div>')}});async function se(){Et.reset(),_(C,null);try{a&&er(Vl,dt(o).mallType=a,dt(o));const j=await I0(a,i);j?(_(s,j.id),_(y,!0)):alert("     .")}catch{alert("     .")}}function oe(){_(s,""),Et.reset(),_(C,null),_(y,!0)}function me(j){j.style.cssText=`
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      background: transparent !important;
    `}function B(j){j.style.cssText="",j.close()}function F(){const j=document.getElementById("qna-register-dialog-wrapper"),$=document.getElementById("qna-register-dialog");if(j&&$){if(j.classList.add("odiz-app"),Be){try{$2(Be)}catch(H){console.warn("[ODIZ] Failed to unmount previous QnaRegister instance:",H)}Be=null}$.innerHTML="",j.oncancel=H=>{H.preventDefault()},Be=oA(Uq,{target:$,props:{shopId:A,mallType:a,customerId:c||void 0,customerName:u,customerPhone:h,qnaId:R||"",onSubmitSuccess:H=>{B(j),Z=H,E()},onCancel:()=>{B(j)}}}),j.showModal(),me(j)}}function E(){const j=document.getElementById("qna-detail-dialog-wrapper"),$=document.getElementById("qna-detail-dialog");if(j&&$&&Z){if(j.classList.add("odiz-app"),N){try{$2(N)}catch(H){console.warn("[ODIZ] Failed to unmount previous QnaDetail instance:",H)}N=null}$.innerHTML="",j.oncancel=H=>{H.preventDefault()},N=oA(wK,{target:$,props:{qnaId:Z,shopId:A,isManager:W,onBack:()=>{B(j)},onEdit:H=>{B(j),R=H,F()},onConvertToEstimate:H=>{console.log("[ODIZ] Converted to estimate:",H),alert(` . ( ID: ${H})`)}}}),j.showModal(),me(j)}}nn();var T=_K(),P=m(T);{var O=j=>{var $=yK(),H=m($),Y=m(H),Ce=m(Y),fe=z(Y,2);xM(fe,{get productId(){return l(s)},get estimate(){return l(C)},get isEstimateModal(){return l(y)},set isEstimateModal(Le){_(y,Le)},$$legacy:!0}),At("click",Ce,()=>_(y,!1)),U(j,$)};be(P,j=>{l(y)&&j(O)})}U(n,T),Zr(),r()}oA(bK,{target:document.getElementById("odiz-app")});export{Sn as _,xK as c,fS as g};
