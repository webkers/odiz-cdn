(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const a0=!1;var Mp=Array.isArray,CC=Array.prototype.indexOf,Pm=Array.from,Db=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,Nb=Object.getOwnPropertyDescriptors,SC=Object.prototype,EC=Array.prototype,km=Object.getPrototypeOf;function Uc(n){return typeof n=="function"}const bd=()=>{};function FC(n){return n()}function A0(n){for(var e=0;e<n.length;e++)n[e]()}const Ys=2,Mb=4,Tu=8,Om=16,Xi=32,Hd=64,Zf=128,qi=256,ep=512,jo=1024,Fa=2048,pl=4096,ba=8192,Hp=16384,IC=32768,Lu=65536,Hb=1<<17,QC=1<<19,jb=1<<20,Mi=Symbol("$state"),Rb=Symbol("legacy props"),l0=Symbol("");function qb(n){return n===this.v}function Dm(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function UC(n,e){return n!==e}function Nm(n){return!Dm(n,this.v)}function TC(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function LC(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function PC(n){throw new Error("https://svelte.dev/e/effect_orphan")}function kC(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function OC(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function DC(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function NC(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function MC(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function HC(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function jC(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let jd=!1,RC=!1;function qC(){jd=!0}const Mm=1,Hm=2,Kb=4,KC=8,$C=16,VC=1,GC=2,$b=4,WC=8,XC=16,Vb=1,YC=2,Wo=Symbol(),Gb="http://www.w3.org/2000/svg";function jp(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let tn=null;function Q2(n){tn=n}function jr(n,e=!1,t){tn={p:tn,c:null,e:null,m:!1,s:n,x:null,l:null},jd&&!e&&(tn.l={s:null,u:null,r1:[],r2:Qs(!1)})}function Rr(n){const e=tn;if(e!==null){n!==void 0&&(e.x=n);const i=e.e;if(i!==null){var t=rn,r=yn;e.e=null;try{for(var o=0;o<i.length;o++){var s=i[o];$i(s.effect),gA(s.reaction),ku(s.fn)}}finally{$i(t),gA(r)}}tn=e.p,e.m=!0}return n||{}}function Rd(){return!jd||tn!==null&&tn.l===null}function Qs(n,e){var t={f:0,v:n,reactions:null,equals:qb,rv:0,wv:0};return t}function Rp(n,e=!1){var r;const t=Qs(n);return e||(t.equals=Nm),jd&&tn!==null&&tn.l!==null&&((r=tn.l).s??(r.s=[])).push(t),t}function Ie(n,e=!1){return JC(Rp(n,e))}function JC(n){return yn!==null&&!_a&&yn.f&Ys&&(Hi===null?d4([n]):Hi.push(n)),n}function fr(n,e){return B(n,dt(()=>l(n))),e}function B(n,e){return yn!==null&&!_a&&Rd()&&yn.f&(Ys|Om)&&(Hi===null||!Hi.includes(n))&&jC(),fu(n,e)}function fu(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=l_(),Wb(n,Fa),Rd()&&rn!==null&&rn.f&jo&&!(rn.f&(Xi|Hd))&&(pa===null?c4([n]):pa.push(n))),e}function ha(n,e=1){var t=l(n),r=e===1?t++:t--;return B(n,t),r}function Wb(n,e){var t=n.reactions;if(t!==null)for(var r=Rd(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;a&Fa||!r&&i===rn||(wi(i,e),a&(jo|qi)&&(a&Ys?Wb(i,pl):Gp(i)))}}let jm=!1;function ld(n,e=null,t){if(typeof n!="object"||n===null||Mi in n)return n;const r=km(n);if(r!==SC&&r!==EC)return n;var o=new Map,s=Mp(n),i=Qs(0);s&&o.set("length",Qs(n.length));var a;return new Proxy(n,{defineProperty(A,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&NC();var u=o.get(d);return u===void 0?(u=Qs(c.value),o.set(d,u)):B(u,ld(c.value,a)),!0},deleteProperty(A,d){var c=o.get(d);if(c===void 0)d in A&&o.set(d,Qs(Wo));else{if(s&&typeof d=="string"){var u=o.get("length"),h=Number(d);Number.isInteger(h)&&h<u.v&&B(u,h)}B(c,Wo),U2(i)}return!0},get(A,d,c){var g;if(d===Mi)return n;var u=o.get(d),h=d in A;if(u===void 0&&(!h||(g=ya(A,d))!=null&&g.writable)&&(u=Qs(ld(h?A[d]:Wo,a)),o.set(d,u)),u!==void 0){var f=l(u);return f===Wo?void 0:f}return Reflect.get(A,d,c)},getOwnPropertyDescriptor(A,d){var c=Reflect.getOwnPropertyDescriptor(A,d);if(c&&"value"in c){var u=o.get(d);u&&(c.value=l(u))}else if(c===void 0){var h=o.get(d),f=h==null?void 0:h.v;if(h!==void 0&&f!==Wo)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(A,d){var f;if(d===Mi)return!0;var c=o.get(d),u=c!==void 0&&c.v!==Wo||Reflect.has(A,d);if(c!==void 0||rn!==null&&(!u||(f=ya(A,d))!=null&&f.writable)){c===void 0&&(c=Qs(u?ld(A[d],a):Wo),o.set(d,c));var h=l(c);if(h===Wo)return!1}return u},set(A,d,c,u){var F;var h=o.get(d),f=d in A;if(s&&d==="length")for(var g=c;g<h.v;g+=1){var m=o.get(g+"");m!==void 0?B(m,Wo):g in A&&(m=Qs(Wo),o.set(g+"",m))}h===void 0?(!f||(F=ya(A,d))!=null&&F.writable)&&(h=Qs(void 0),B(h,ld(c,a)),o.set(d,h)):(f=h.v!==Wo,B(h,ld(c,a)));var y=Reflect.getOwnPropertyDescriptor(A,d);if(y!=null&&y.set&&y.set.call(u,c),!f){if(s&&typeof d=="string"){var b=o.get("length"),S=Number(d);Number.isInteger(S)&&S>=b.v&&B(b,S+1)}U2(i)}return!0},ownKeys(A){l(i);var d=Reflect.ownKeys(A).filter(h=>{var f=o.get(h);return f===void 0||f.v!==Wo});for(var[c,u]of o)u.v!==Wo&&!(c in A)&&d.push(c);return d},setPrototypeOf(){MC()}})}function U2(n,e=1){B(n,n.v+e)}function T2(n){return n!==null&&typeof n=="object"&&Mi in n?n[Mi]:n}function ZC(n,e){return Object.is(T2(n),T2(e))}var L2,Xb,Yb;function e4(){if(L2===void 0){L2=window;var n=Element.prototype,e=Node.prototype;Xb=ya(e,"firstChild").get,Yb=ya(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function Pu(n=""){return document.createTextNode(n)}function Us(n){return Xb.call(n)}function qp(n){return Yb.call(n)}function w(n,e){return Us(n)}function pt(n,e){{var t=Us(n);return t instanceof Comment&&t.data===""?qp(t):t}}function z(n,e=1,t=!1){let r=n;for(;e--;)r=qp(r);return r}function t4(n){n.textContent=""}function kd(n){var e=Ys|Fa,t=yn!==null&&yn.f&Ys?yn:null;return rn===null||t!==null&&t.f&qi?e|=qi:rn.f|=jb,{ctx:tn,deps:null,effects:null,equals:qb,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??rn}}function ot(n){const e=kd(n);return e.equals=Nm,e}function Jb(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Ki(e[t])}}function r4(n){for(var e=n.parent;e!==null;){if(!(e.f&Ys))return e;e=e.parent}return null}function n4(n){var e,t=rn;$i(r4(n));try{Jb(n),e=c_(n)}finally{$i(t)}return e}function Zb(n){var e=n4(n),t=(AA||n.f&qi)&&n.deps!==null?pl:jo;wi(n,t),n.equals(e)||(n.v=e,n.wv=l_())}function e_(n){rn===null&&yn===null&&PC(),yn!==null&&yn.f&qi&&rn===null&&LC(),Km&&TC()}function o4(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function qd(n,e,t,r=!0){var o=(n&Hd)!==0,s=rn,i={ctx:tn,deps:null,nodes_start:null,nodes_end:null,f:n|Fa,first:null,fn:e,last:null,next:null,parent:o?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var a=_d;try{P2(!0),Vp(i),i.f|=IC}catch(c){throw Ki(i),c}finally{P2(a)}}else e!==null&&Gp(i);var A=t&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(jb|Zf))===0;if(!A&&!o&&r&&(s!==null&&o4(i,s),yn!==null&&yn.f&Ys)){var d=yn;(d.effects??(d.effects=[])).push(i)}return i}function Rm(n){const e=qd(Tu,null,!1);return wi(e,jo),e.teardown=n,e}function d0(n){e_();var e=rn!==null&&(rn.f&Xi)!==0&&tn!==null&&!tn.m;if(e){var t=tn;(t.e??(t.e=[])).push({fn:n,effect:rn,reaction:yn})}else{var r=ku(n);return r}}function s4(n){return e_(),Kd(n)}function i4(n){const e=qd(Hd,n,!0);return(t={})=>new Promise(r=>{t.outro?cl(e,()=>{Ki(e),r(void 0)}):(Ki(e),r(void 0))})}function ku(n){return qd(Mb,n,!1)}function Jt(n,e){var t=tn,r={effect:null,ran:!1};t.l.r1.push(r),r.effect=Kd(()=>{n(),!r.ran&&(r.ran=!0,B(t.l.r2,!0),dt(e))})}function Zn(){var n=tn;Kd(()=>{if(l(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&jo&&wi(t,pl),$d(t)&&Vp(t),e.ran=!1}n.l.r2.v=!1}})}function Kd(n){return qd(Tu,n,!0)}function Me(n,e=[],t=kd){const r=e.map(t);return gl(()=>n(...r.map(l)))}function gl(n,e=0){return qd(Tu|Om|e,n,!0)}function za(n,e=!0){return qd(Tu|Xi,n,!0,e)}function t_(n){var e=n.teardown;if(e!==null){const t=Km,r=yn;k2(!0),gA(null);try{e.call(null)}finally{k2(t),gA(r)}}}function r_(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;Ki(t,e),t=r}}function a4(n){for(var e=n.first;e!==null;){var t=e.next;e.f&Xi||Ki(e),e=t}}function Ki(n,e=!0){var t=!1;if((e||n.f&QC)&&n.nodes_start!==null){for(var r=n.nodes_start,o=n.nodes_end;r!==null;){var s=r===o?null:qp(r);r.remove(),r=s}t=!0}r_(n,e&&!t),np(n,0),wi(n,Hp);var i=n.transitions;if(i!==null)for(const A of i)A.stop();t_(n);var a=n.parent;a!==null&&a.first!==null&&n_(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function n_(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function cl(n,e){var t=[];qm(n,t,!0),o_(t,()=>{Ki(n),e&&e()})}function o_(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function qm(n,e,t){if(!(n.f&ba)){if(n.f^=ba,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&Lu)!==0||(r.f&Xi)!==0;qm(r,e,s?t:!1),r=o}}}function pu(n){s_(n,!0)}function s_(n,e){if(n.f&ba){n.f^=ba,n.f&jo||(n.f^=jo),$d(n)&&(wi(n,Fa),Gp(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&Lu)!==0||(t.f&Xi)!==0;s_(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let tp=!1,c0=[];function i_(){tp=!1;const n=c0.slice();c0=[],A0(n)}function Kp(n){tp||(tp=!0,queueMicrotask(i_)),c0.push(n)}function A4(){tp&&i_()}const a_=0,l4=1;let Qf=!1,Uf=a_,gu=!1,vu=null,_d=!1,Km=!1;function P2(n){_d=n}function k2(n){Km=n}let JA=[],Bd=0;let yn=null,_a=!1;function gA(n){yn=n}let rn=null;function $i(n){rn=n}let Hi=null;function d4(n){Hi=n}let Jo=null,Fs=0,pa=null;function c4(n){pa=n}let A_=1,rp=0,AA=!1,iA=null;function l_(){return++A_}function $d(n){var d;var e=n.f;if(e&Fa)return!0;if(e&pl){var t=n.deps,r=(e&qi)!==0;if(t!==null){var o,s,i=(e&ep)!==0,a=r&&rn!==null&&!AA,A=t.length;if(i||a){for(o=0;o<A;o++)s=t[o],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);i&&(n.f^=ep)}for(o=0;o<A;o++)if(s=t[o],$d(s)&&Zb(s),s.wv>n.wv)return!0}(!r||rn!==null&&!AA)&&wi(n,jo)}return!1}function u4(n,e){for(var t=e;t!==null;){if(t.f&Zf)try{t.fn(n);return}catch{t.f^=Zf}t=t.parent}throw Qf=!1,n}function h4(n){return(n.f&Hp)===0&&(n.parent===null||(n.parent.f&Zf)===0)}function $p(n,e,t,r){if(Qf){if(t===null&&(Qf=!1),h4(e))throw n;return}t!==null&&(Qf=!0);{u4(n,e);return}}function d_(n,e,t=0){var r=n.reactions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];s.f&Ys?d_(s,e,t+1):e===s&&(t===0?wi(s,Fa):s.f&jo&&wi(s,pl),Gp(s))}}function c_(n){var f;var e=Jo,t=Fs,r=pa,o=yn,s=AA,i=Hi,a=tn,A=_a,d=n.f;Jo=null,Fs=0,pa=null,yn=d&(Xi|Hd)?null:n,AA=(d&qi)!==0&&(!_d||o===null||A),Hi=null,Q2(n.ctx),_a=!1,rp++;try{var c=(0,n.fn)(),u=n.deps;if(Jo!==null){var h;if(np(n,Fs),u!==null&&Fs>0)for(u.length=Fs+Jo.length,h=0;h<Jo.length;h++)u[Fs+h]=Jo[h];else n.deps=u=Jo;if(!AA)for(h=Fs;h<u.length;h++)((f=u[h]).reactions??(f.reactions=[])).push(n)}else u!==null&&Fs<u.length&&(np(n,Fs),u.length=Fs);if(Rd()&&pa!==null&&!(n.f&(Ys|pl|Fa)))for(h=0;h<pa.length;h++)d_(pa[h],n);return o!==null&&rp++,c}finally{Jo=e,Fs=t,pa=r,yn=o,AA=s,Hi=i,Q2(a),_a=A}}function f4(n,e){let t=e.reactions;if(t!==null){var r=CC.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&Ys&&(Jo===null||!Jo.includes(e))&&(wi(e,pl),e.f&(qi|ep)||(e.f^=ep),Jb(e),np(e,0))}function np(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)f4(n,t[r])}function Vp(n){var e=n.f;if(!(e&Hp)){wi(n,jo);var t=rn,r=tn;rn=n;try{e&Om?a4(n):r_(n),t_(n);var o=c_(n);n.teardown=typeof o=="function"?o:null,n.wv=A_;var s=n.deps,i;a0&&RC&&n.f&Fa}catch(a){$p(a,n,t,r||n.ctx)}finally{rn=t}}}function u_(){if(Bd>1e3){Bd=0;try{kC()}catch(n){if(vu!==null)$p(n,vu,null);else throw n}}Bd++}function h_(n){var e=n.length;if(e!==0){u_();var t=_d;_d=!0;try{for(var r=0;r<e;r++){var o=n[r];o.f&jo||(o.f^=jo);var s=[];f_(o,s),p4(s)}}finally{_d=t}}}function p4(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(Hp|ba)))try{$d(r)&&(Vp(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?n_(r):r.fn=null))}catch(o){$p(o,r,null,r.ctx)}}}function g4(){if(gu=!1,Bd>1001)return;const n=JA;JA=[],h_(n),gu||(Bd=0,vu=null)}function Gp(n){Uf===a_&&(gu||(gu=!0,queueMicrotask(g4))),vu=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(Hd|Xi)){if(!(t&jo))return;e.f^=jo}}JA.push(e)}function f_(n,e){var t=n.first,r=[];e:for(;t!==null;){var o=t.f,s=(o&Xi)!==0,i=s&&(o&jo)!==0,a=t.next;if(!i&&!(o&ba))if(o&Tu){if(s)t.f^=jo;else{var A=yn;try{yn=t,$d(t)&&Vp(t)}catch(h){$p(h,t,null,t.ctx)}finally{yn=A}}var d=t.first;if(d!==null){t=d;continue}}else o&Mb&&r.push(t);if(a===null){let h=t.parent;for(;h!==null;){if(n===h)break e;var c=h.next;if(c!==null){t=c;continue e}h=h.parent}}t=a}for(var u=0;u<r.length;u++)d=r[u],e.push(d),f_(d,e)}function p_(n){var e=Uf,t=JA;try{u_();const o=[];Uf=l4,JA=o,gu=!1,h_(t);var r=n==null?void 0:n();return A4(),(JA.length>0||o.length>0)&&p_(),Bd=0,vu=null,r}finally{Uf=e,JA=t}}async function ki(){await Promise.resolve(),p_()}function l(n){var e=n.f,t=(e&Ys)!==0;if(iA!==null&&iA.add(n),yn!==null&&!_a){Hi!==null&&Hi.includes(n)&&HC();var r=yn.deps;n.rv<rp&&(n.rv=rp,Jo===null&&r!==null&&r[Fs]===n?Fs++:Jo===null?Jo=[n]:(!AA||!Jo.includes(n))&&Jo.push(n))}else if(t&&n.deps===null&&n.effects===null){var o=n,s=o.parent;s!==null&&!(s.f&qi)&&(o.f^=qi)}return t&&(o=n,$d(o)&&Zb(o)),n.v}function v4(n){var e=iA;iA=new Set;var t=iA,r;try{if(dt(n),e!==null)for(r of iA)e.add(r)}finally{iA=e}return t}function op(n){var e=v4(()=>dt(n));for(var t of e)if(t.f&Hb)for(const r of t.deps||[])r.f&Ys||fu(r,r.v);else fu(t,t.v)}function dt(n){var e=_a;try{return _a=!0,n()}finally{_a=e}}const m4=-7169;function wi(n,e){n.f=n.f&m4|e}function zn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Mi in n)u0(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&Mi in t&&u0(t)}}}function u0(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{u0(n[r],e)}catch{}const t=km(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Nb(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function w4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const y4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function b4(n){return y4.includes(n)}const _4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function B4(n){return n=n.toLowerCase(),_4[n]??n}const x4=["touchstart","touchmove"];function z4(n){return x4.includes(n)}function C4(n,e){if(e){const t=document.body;n.autofocus=!0,Kp(()=>{document.activeElement===t&&n.focus()})}}let O2=!1;function S4(){O2||(O2=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function g_(n){var e=yn,t=rn;gA(null),$i(null);try{return n()}finally{gA(e),$i(t)}}function $m(n,e,t,r=t){n.addEventListener(e,()=>g_(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),S4()}const v_=new Set,h0=new Set;function m_(n,e,t,r={}){function o(s){if(r.capture||Kc.call(e,s),!s.cancelBubble)return g_(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Kp(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function st(n,e,t,r,o){var s={capture:r,passive:o},i=m_(n,e,t,s);(e===document.body||e===window||e===document)&&Rm(()=>{e.removeEventListener(n,i,s)})}function E4(n){for(var e=0;e<n.length;e++)v_.add(n[e]);for(var t of h0)t(n)}function Kc(n){var S;var e=this,t=e.ownerDocument,r=n.type,o=((S=n.composedPath)==null?void 0:S.call(n))||[],s=o[0]||n.target,i=0,a=n.__root;if(a){var A=o.indexOf(a);if(A!==-1&&(e===document||e===window)){n.__root=e;return}var d=o.indexOf(e);if(d===-1)return;A<=d&&(i=A)}if(s=o[i]||n.target,s!==e){Db(n,"currentTarget",{configurable:!0,get(){return s||t}});var c=yn,u=rn;gA(null),$i(null);try{for(var h,f=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];if(m!==void 0&&!s.disabled)if(Mp(m)){var[y,...b]=m;y.apply(s,[n,...b])}else m.call(s,n)}catch(F){h?f.push(F):h=F}if(n.cancelBubble||g===e||g===null)break;s=g}if(h){for(let F of f)queueMicrotask(()=>{throw F});throw h}}finally{n.__root=e,delete n.currentTarget,gA(c),$i(u)}}}function Vm(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function vA(n,e){var t=rn;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function te(n,e){var t=(e&Vb)!==0,r=(e&YC)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=Vm(s?n:"<!>"+n),t||(o=Us(o)));var i=r?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=Us(i),A=i.lastChild;vA(a,A)}else vA(i,i);return i}}function Wp(n,e,t="svg"){var r=!n.startsWith("<!>"),o=(e&Vb)!==0,s=`<${t}>${r?n:"<!>"+n}</${t}>`,i;return()=>{if(!i){var a=Vm(s),A=Us(a);if(o)for(i=document.createDocumentFragment();Us(A);)i.appendChild(Us(A));else i=Us(A)}var d=i.cloneNode(!0);if(o){var c=Us(d),u=d.lastChild;vA(c,u)}else vA(d,d);return d}}function Wr(n=""){{var e=Pu(n+"");return vA(e,e),e}}function Dt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Pu();return n.append(e,t),vA(e,t),n}function T(n,e){n!==null&&n.before(e)}function Ue(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function ca(n,e){return F4(n,e)}const jl=new Map;function F4(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){e4();var a=new Set,A=u=>{for(var h=0;h<u.length;h++){var f=u[h];if(!a.has(f)){a.add(f);var g=z4(f);e.addEventListener(f,Kc,{passive:g});var m=jl.get(f);m===void 0?(document.addEventListener(f,Kc,{passive:g}),jl.set(f,1)):jl.set(f,m+1)}}};A(Pm(v_)),h0.add(A);var d=void 0,c=i4(()=>{var u=t??e.appendChild(Pu());return za(()=>{if(s){jr({});var h=tn;h.c=s}o&&(r.$$events=o),d=n(u,r)||{},s&&Rr()}),()=>{var g;for(var h of a){e.removeEventListener(h,Kc);var f=jl.get(h);--f===0?(document.removeEventListener(h,Kc),jl.delete(h)):jl.set(h,f)}h0.delete(A),u!==t&&((g=u.parentNode)==null||g.removeChild(u))}});return f0.set(d,c),d}let f0=new WeakMap;function D2(n,e){const t=f0.get(n);return t?(f0.delete(n),t(e)):Promise.resolve()}function Ee(n,e,t=!1){var r=n,o=null,s=null,i=Wo,a=t?Lu:0,A=!1;const d=(u,h=!0)=>{A=!0,c(h,u)},c=(u,h)=>{i!==(i=u)&&(i?(o?pu(o):h&&(o=za(()=>h(r))),s&&cl(s,()=>{s=null})):(s?pu(s):h&&(s=za(()=>h(r))),o&&cl(o,()=>{o=null})))};gl(()=>{A=!1,e(d),A||c(null,null)},a)}function I4(n,e,t){var r=n,o=Wo,s,i=Rd()?UC:Dm;gl(()=>{i(o,o=e())&&(s&&cl(s),s=za(()=>t(r)))})}function Ar(n,e){return e}function Q4(n,e,t,r){for(var o=[],s=e.length,i=0;i<s;i++)qm(e[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var A=t.parentNode;t4(A),A.append(t),r.clear(),nA(n,e[0].prev,e[s-1].next)}o_(o,()=>{for(var d=0;d<s;d++){var c=e[d];a||(r.delete(c.k),nA(n,c.prev,c.next)),Ki(c.e,!a)}})}function Yt(n,e,t,r,o,s=null){var i=n,a={items:new Map,first:null},A=(e&Kb)!==0;if(A){var d=n;i=d.appendChild(Pu())}var c=null,u=!1,h=ot(()=>{var f=t();return Mp(f)?f:f==null?[]:Pm(f)});gl(()=>{var f=l(h),g=f.length;u&&g===0||(u=g===0,U4(f,a,i,o,e,r,t),s!==null&&(g===0?c?pu(c):c=za(()=>s(i)):c!==null&&cl(c,()=>{c=null})),l(h))})}function U4(n,e,t,r,o,s,i){var ie,de,ne,fe;var a=(o&KC)!==0,A=(o&(Mm|Hm))!==0,d=n.length,c=e.items,u=e.first,h=u,f,g=null,m,y=[],b=[],S,F,P,L;if(a)for(L=0;L<d;L+=1)S=n[L],F=s(S,L),P=c.get(F),P!==void 0&&((ie=P.a)==null||ie.measure(),(m??(m=new Set)).add(P));for(L=0;L<d;L+=1){if(S=n[L],F=s(S,L),P=c.get(F),P===void 0){var re=h?h.e.nodes_start:t;g=L4(re,e,g,g===null?e.first:g.next,S,F,L,r,o,i),c.set(F,g),y=[],b=[],h=g.next;continue}if(A&&T4(P,S,L,o),P.e.f&ba&&(pu(P.e),a&&((de=P.a)==null||de.unfix(),(m??(m=new Set)).delete(P))),P!==h){if(f!==void 0&&f.has(P)){if(y.length<b.length){var K=b[0],H;g=K.prev;var J=y[0],we=y[y.length-1];for(H=0;H<y.length;H+=1)N2(y[H],K,t);for(H=0;H<b.length;H+=1)f.delete(b[H]);nA(e,J.prev,we.next),nA(e,g,J),nA(e,we,K),h=K,g=we,L-=1,y=[],b=[]}else f.delete(P),N2(P,h,t),nA(e,P.prev,P.next),nA(e,P,g===null?e.first:g.next),nA(e,g,P),g=P;continue}for(y=[],b=[];h!==null&&h.k!==F;)h.e.f&ba||(f??(f=new Set)).add(h),b.push(h),h=h.next;if(h===null)continue;P=h}y.push(P),g=P,h=P.next}if(h!==null||f!==void 0){for(var O=f===void 0?[]:Pm(f);h!==null;)h.e.f&ba||O.push(h),h=h.next;var D=O.length;if(D>0){var Z=o&Kb&&d===0?t:null;if(a){for(L=0;L<D;L+=1)(ne=O[L].a)==null||ne.measure();for(L=0;L<D;L+=1)(fe=O[L].a)==null||fe.fix()}Q4(e,O,Z,c)}}a&&Kp(()=>{var $;if(m!==void 0)for(P of m)($=P.a)==null||$.apply()}),rn.first=e.first&&e.first.e,rn.last=g&&g.e}function T4(n,e,t,r){r&Mm&&fu(n.v,e),r&Hm?fu(n.i,t):n.i=t}function L4(n,e,t,r,o,s,i,a,A,d){var c=(A&Mm)!==0,u=(A&$C)===0,h=c?u?Rp(o):Qs(o):o,f=A&Hm?Qs(i):i,g={i:f,v:h,k:s,a:null,e:null,prev:t,next:r};try{return g.e=za(()=>a(n,h,f,d),jm),g.e.prev=t&&t.e,g.e.next=r&&r.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function N2(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var i=qp(s);o.before(s),s=i}}function nA(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function p0(n,e,t,r,o){var s=n,i="",a;gl(()=>{i!==(i=e()??"")&&(a!==void 0&&(Ki(a),a=void 0),i!==""&&(a=za(()=>{var A=i+"";t&&(A=`<svg>${A}</svg>`);var d=Vm(A);if((t||r)&&(d=Us(d)),vA(Us(d),d.lastChild),t||r)for(;Us(d);)s.before(Us(d));else s.before(d)})))})}function cn(n,e,t,r,o){var a;var s=(a=e.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=e.children,i=!0),s===void 0||s(n,i?()=>r:r)}function Gm(n,e,t){var r=n,o,s;gl(()=>{o!==(o=e())&&(s&&(cl(s),s=null),o&&(s=za(()=>t(r,o))))},Lu)}function P4(n,e,t,r,o,s){var i,a,A=null,d=n,c;gl(()=>{const u=e()||null;var h=Gb;u!==i&&(c&&(u===null?cl(c,()=>{c=null,a=null}):u===a?pu(c):Ki(c)),u&&u!==a&&(c=za(()=>{if(A=document.createElementNS(h,u),vA(A,A),r){var f=A.appendChild(Pu());r(A,f)}rn.nodes_end=A,d.before(A)})),i=u,i&&(a=i))},Lu)}function w_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=w_(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function k4(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=w_(n))&&(r&&(r+=" "),r+=e);return r}function g0(n){return typeof n=="object"?k4(n):n??""}function Wm(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function mu(n,e){var t=n.__attributes??(n.__attributes={});t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function O4(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function rr(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[l0]=t),t==null?n.removeAttribute(e):typeof t!="string"&&y_(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function M2(n,e,t,r,o=!1,s=!1,i=!1){var a=e||{},A=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class&&(t.class=g0(t.class));var c=y_(n),u=n.__attributes??(n.__attributes={});for(const b in t){let S=t[b];if(A&&b==="value"&&S==null){n.value=n.__value="",a[b]=S;continue}var h=a[b];if(S!==h){a[b]=S;var f=b[0]+b[1];if(f!=="$$"){if(f==="on"){const F={},P="$$"+b;let L=b.slice(2);var g=b4(L);if(w4(L)&&(L=L.slice(0,-7),F.capture=!0),!g&&h){if(S!=null)continue;n.removeEventListener(L,a[P],F),a[P]=null}if(S!=null)if(g)n[`__${L}`]=S,E4([L]);else{let re=function(K){a[b].call(this,K)};a[P]=m_(L,n,re,F)}else g&&(n[`__${L}`]=void 0)}else if(b==="style"&&S!=null)n.style.cssText=S+"";else if(b==="autofocus")C4(n,!!S);else if(!s&&(b==="__value"||b==="value"&&S!=null))n.value=n.__value=S;else if(b==="selected"&&A)O4(n,S);else{var m=b;o||(m=B4(m));var y=m==="defaultValue"||m==="defaultChecked";if(S==null&&!s&&!y)if(u[b]=null,m==="value"||m==="checked"){let F=n;if(m==="value"){let P=F.defaultValue;F.removeAttribute(m),F.defaultValue=P}else{let P=F.defaultChecked;F.removeAttribute(m),F.defaultChecked=P}}else n.removeAttribute(b);else y||c.includes(m)&&(s||typeof S!="string")?n[m]=S:typeof S!="function"&&rr(n,m,S)}b==="style"&&"__styles"in n&&(n.__styles={})}}}return a}var H2=new Map;function y_(n){var e=H2.get(n.nodeName);if(e)return e;H2.set(n.nodeName,e=[]);for(var t,r=n,o=Element.prototype;o!==r;){t=Nb(r);for(var s in t)t[s].set&&e.push(s);r=km(r)}return e}function b_(n){if(n.loading==="lazy"){var e=n.src;n[l0]=null,n.loading="eager",n.removeAttribute("src"),requestAnimationFrame(()=>{n[l0]!=="eager"&&(n.loading="lazy"),n.src=e})}}function D4(n,e,t){var r=n.__className,o=__(e);(r!==o||jm)&&(o===""?n.removeAttribute("class"):n.setAttribute("class",o),n.__className=o)}function Fr(n,e,t){var r=n.__className,o=__(e);(r!==o||jm)&&(e==null?n.removeAttribute("class"):n.className=o,n.__className=o)}function __(n,e){return(n??"")+""}function hA(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function br(n,e,t=e){var r=Rd();$m(n,"input",o=>{var s=o?n.defaultValue:n.value;if(s=sv(n)?iv(s):s,t(s),r&&s!==(s=e())){var i=n.selectionStart,a=n.selectionEnd;n.value=s??"",a!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(a,n.value.length))}}),dt(e)==null&&n.value&&t(sv(n)?iv(n.value):n.value),Kd(()=>{var o=e();sv(n)&&o===iv(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function v0(n,e,t=e){$m(n,"change",r=>{var o=r?n.defaultChecked:n.checked;t(o)}),dt(e)==null&&t(n.checked),Kd(()=>{var r=e();n.checked=!!r})}function sv(n){var e=n.type;return e==="number"||e==="range"}function iv(n){return n===""?null:+n}function B_(n,e,t){var r=ya(n,e);r&&r.set&&(n[e]=t,Rm(()=>{n[e]=null}))}function x_(n,e,t){if(n.multiple)return M4(n,e);for(var r of n.options){var o=tu(r);if(ZC(o,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function N4(n,e){ku(()=>{var t=new MutationObserver(()=>{var r=n.__value;x_(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function sp(n,e,t=e){var r=!0;$m(n,"change",o=>{var s=o?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(s),tu);else{var a=n.querySelector(s)??n.querySelector("option:not([disabled])");i=a&&tu(a)}t(i)}),ku(()=>{var o=e();if(x_(n,o,r),r&&o===void 0){var s=n.querySelector(":checked");s!==null&&(o=tu(s),t(o))}n.__value=o,r=!1}),N4(n)}function M4(n,e){for(var t of n.options)t.selected=~e.indexOf(tu(t))}function tu(n){return"__value"in n?n.__value:n.value}function j2(n,e){return n===e||(n==null?void 0:n[Mi])===e}function ts(n={},e,t,r){return ku(()=>{var o,s;return Kd(()=>{o=s,s=[],dt(()=>{n!==t(...s)&&(e(n,...s),o&&j2(t(...o),n)&&e(null,...o))})}),()=>{Kp(()=>{s&&j2(t(...s),n)&&e(null,...s)})}}),n}function z_(n){return function(...e){var t=e[0];t.target===this&&(n==null||n.apply(this,e))}}function av(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function Kr(n=!1){const e=tn,t=e.l.u;if(!t)return;let r=()=>zn(e.s);if(n){let o=0,s={};const i=kd(()=>{let a=!1;const A=e.s;for(const d in A)A[d]!==s[d]&&(s[d]=A[d],a=!0);return a&&o++,o});r=()=>l(i)}t.b.length&&s4(()=>{R2(e,r),A0(t.b)}),d0(()=>{const o=dt(()=>t.m.map(FC));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&d0(()=>{R2(e,r),A0(t.a)})}function R2(n,e){if(n.l.s)for(const t of n.l.s)l(t);e()}function C_(n,e,t){if(n==null)return e(void 0),bd;const r=dt(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const Rl=[];function vl(n,e=bd){let t=null;const r=new Set;function o(a){if(Dm(n,a)&&(n=a,t)){const A=!Rl.length;for(const d of r)d[1](),Rl.push(d,n);if(A){for(let d=0;d<Rl.length;d+=2)Rl[d][0](Rl[d+1]);Rl.length=0}}}function s(a){o(a(n))}function i(a,A=bd){const d=[a,A];return r.add(d),r.size===1&&(t=e(o,s)||bd),a(n),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function pn(n){let e;return C_(n,t=>e=t)(),e}let Ch=!1,m0=Symbol();function Xr(n,e,t){const r=t[e]??(t[e]={store:null,source:Rp(void 0),unsubscribe:bd});if(r.store!==n&&!(m0 in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=bd;else{var o=!0;r.unsubscribe=C_(n,s=>{o?r.source.v=s:B(r.source,s)}),o=!1}return n&&m0 in t?pn(n):l(r.source)}function S_(n,e){return n.set(e),e}function co(){const n={};function e(){Rm(()=>{for(var t in n)n[t].unsubscribe();Db(n,m0,{enumerable:!1,value:!0})})}return[n,e]}function qt(n,e,t){return n.set(t),e}function H4(n){var e=Ch;try{return Ch=!1,[n(),Ch]}finally{Ch=e}}const j4={get(n,e){if(!n.exclude.includes(e))return l(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){return e in n.special||(n.special[e]=ft({get[e](){return n.props[e]}},e,$b)),n.special[e](t),ha(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),ha(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function nn(n,e){return new Proxy({props:n,exclude:e,special:{},version:Qs(0)},j4)}const R4={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Uc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let o=n.props[r];Uc(o)&&(o=o());const s=ya(o,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Uc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=ya(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(n,e){if(e===Mi||e===Rb)return!1;for(let t of n.props)if(Uc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Uc(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function gn(...n){return new Proxy({props:n},R4)}function q2(n){for(var e=rn,t=rn;e!==null&&!(e.f&(Xi|Hd));)e=e.parent;try{return $i(e),n()}finally{$i(t)}}function ft(n,e,t,r){var K;var o=(t&VC)!==0,s=!jd||(t&GC)!==0,i=(t&WC)!==0,a=(t&XC)!==0,A=!1,d;i?[d,A]=H4(()=>n[e]):d=n[e];var c=Mi in n||Rb in n,u=i&&(((K=ya(n,e))==null?void 0:K.set)??(c&&e in n&&(H=>n[e]=H)))||void 0,h=r,f=!0,g=!1,m=()=>(g=!0,f&&(f=!1,a?h=dt(r):h=r),h);d===void 0&&r!==void 0&&(u&&s&&DC(),d=m(),u&&u(d));var y;if(s)y=()=>{var H=n[e];return H===void 0?m():(f=!0,g=!1,H)};else{var b=q2(()=>(o?kd:ot)(()=>n[e]));b.f|=Hb,y=()=>{var H=l(b);return H!==void 0&&(h=void 0),H===void 0?h:H}}if(!(t&$b))return y;if(u){var S=n.$$legacy;return function(H,J){return arguments.length>0?((!s||!J||S||A)&&u(J?y():H),H):y()}}var F=!1,P=!1,L=Rp(d),re=q2(()=>kd(()=>{var H=y(),J=l(L);return F?(F=!1,P=!0,J):(P=!1,L.v=H)}));return o||(re.equals=Nm),function(H,J){if(iA!==null&&(F=P,y(),l(L)),arguments.length>0){const we=J?l(re):s&&i?ld(H):H;return re.equals(we)||(F=!0,B(L,we),g&&h!==void 0&&(h=we),dt(()=>l(re))),H}return l(re)}}function En(n){tn===null&&jp(),jd&&tn.l!==null?E_(tn).m.push(n):d0(()=>{const e=dt(n);if(typeof e=="function")return e})}function Eo(n){tn===null&&jp(),En(()=>()=>dt(n))}function q4(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function Xp(){const n=tn;return n===null&&jp(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=Mp(o)?o.slice():[o],a=q4(e,t,r);for(const A of i)A.call(n.x,a);return!a.defaultPrevented}return!0}}function K4(n){tn===null&&jp(),tn.l===null&&OC(),E_(tn).a.push(n)}function E_(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const $4="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($4);qC();const V4="modulepreload",G4=function(n){return"/"+n},K2={},us=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(t.map(A=>{if(A=G4(A),A in K2)return;K2[A]=!0;const d=A.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":V4,d||(u.as="script"),u.crossOrigin="",u.href=A,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},W4=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>us(async()=>{const{default:r}=await Promise.resolve().then(()=>Vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Xm extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class X4 extends Xm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Y4 extends Xm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class J4 extends Xm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var w0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(w0||(w0={}));var Z4=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class eS{constructor(e,{headers:t={},customFetch:r,region:o=w0.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=W4(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Z4(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=t;let a={},{region:A}=t;A||(A=this.region),A&&A!=="any"&&(a["x-region"]=A);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(g=>{throw new X4(g)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Y4(c);if(!c.ok)throw new J4(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="text/event-stream"?f=c:h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(o){return{data:null,error:o}}})}}var mK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function rS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var po={},ql={},Kl={},$l={},Vl={},Gl={},nS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Od=nS();const oS=Od.fetch,F_=Od.fetch.bind(Od),I_=Od.Headers,sS=Od.Request,iS=Od.Response,Vd=Object.freeze(Object.defineProperty({__proto__:null,Headers:I_,Request:sS,Response:iS,default:F_,fetch:oS},Symbol.toStringTag,{value:"Module"})),aS=rS(Vd);var Sh={},$2;function Q_(){if($2)return Sh;$2=1,Object.defineProperty(Sh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Sh.default=n,Sh}var V2;function U_(){if(V2)return Gl;V2=1;var n=Gl&&Gl.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Gl,"__esModule",{value:!0});const e=n(aS),t=n(Q_());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let A=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,h;let f=null,g=null,m=null,y=d.status,b=d.statusText;if(d.ok){if(this.method!=="HEAD"){const L=await d.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=L:g=JSON.parse(L))}const F=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),P=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");F&&P&&P.length>1&&(m=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,y=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const F=await d.text();try{f=JSON.parse(F),Array.isArray(f)&&d.status===404&&(g=[],f=null,y=200,b="OK")}catch{d.status===404&&F===""?(y=204,b="No Content"):f={message:F}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,b="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:m,status:y,statusText:b}});return this.shouldThrowOnError||(A=A.catch(d=>{var c,u,h;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),A.then(s,i)}}return Gl.default=r,Gl}var G2;function T_(){if(G2)return Vl;G2=1;var n=Vl&&Vl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vl,"__esModule",{value:!0});const e=n(U_());class t extends e.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:A=a}={}){const d=A?`${A}.order`:"order",c=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${c?`${c},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const A=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(A,`${o}`),this.url.searchParams.set(d,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:A=!1,format:d="text"}={}){var c;const u=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,A?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${u};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Vl.default=t,Vl}var W2;function Ym(){if(W2)return $l;W2=1;var n=$l&&$l.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($l,"__esModule",{value:!0});const e=n(T_());class t extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let A="";a==="plain"?A="pl":a==="phrase"?A="ph":a==="websearch"&&(A="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${A}fts${d}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return $l.default=t,$l}var X2;function L_(){if(X2)return Kl;X2=1;var n=Kl&&Kl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=n(Ym());class t{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let A=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!A?"":(c==='"'&&(A=!A),c)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",A=[];if(this.headers.Prefer&&A.push(this.headers.Prefer),s&&A.push(`count=${s}`),i||A.push("missing=default"),this.headers.Prefer=A.join(","),Array.isArray(o)){const d=o.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:A=!0}={}){const d="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),A||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(o)){const u=o.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Kl.default=t,Kl}var Tc={},Lc={},Y2;function AS(){return Y2||(Y2=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.version=void 0,Lc.version="0.0.0-automated"),Lc}var J2;function lS(){if(J2)return Tc;J2=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.DEFAULT_HEADERS=void 0;const n=AS();return Tc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Tc}var Z2;function dS(){if(Z2)return ql;Z2=1;var n=ql&&ql.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ql,"__esModule",{value:!0});const e=n(L_()),t=n(Ym()),r=lS();class o{constructor(i,{headers:a={},schema:A,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=A,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:A=!1,get:d=!1,count:c}={}){let u;const h=new URL(`${this.url}/rpc/${i}`);let f;A||d?(u=A?"HEAD":"GET",Object.entries(a).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{h.searchParams.append(m,y)})):(u="POST",f=a);const g=Object.assign({},this.headers);return c&&(g.Prefer=`count=${c}`),new t.default({method:u,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return ql.default=o,ql}var ew;function cS(){if(ew)return po;ew=1;var n=po&&po.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(po,"__esModule",{value:!0}),po.PostgrestError=po.PostgrestBuilder=po.PostgrestTransformBuilder=po.PostgrestFilterBuilder=po.PostgrestQueryBuilder=po.PostgrestClient=void 0;const e=n(dS());po.PostgrestClient=e.default;const t=n(L_());po.PostgrestQueryBuilder=t.default;const r=n(Ym());po.PostgrestFilterBuilder=r.default;const o=n(T_());po.PostgrestTransformBuilder=o.default;const s=n(U_());po.PostgrestBuilder=s.default;const i=n(Q_());return po.PostgrestError=i.default,po.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},po}var uS=cS();const hS=tS(uS),{PostgrestClient:fS,PostgrestQueryBuilder:wK,PostgrestFilterBuilder:yK,PostgrestTransformBuilder:bK,PostgrestBuilder:_K,PostgrestError:BK}=hS,pS="2.11.2",gS={"X-Client-Info":`realtime-js/${pS}`},vS="1.0.0",P_=1e4,mS=1e3;var xd;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(xd||(xd={}));var Is;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Is||(Is={}));var ui;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ui||(ui={}));var y0;(function(n){n.websocket="websocket"})(y0||(y0={}));var RA;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(RA||(RA={}));class wS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const A=r.decode(e.slice(i,i+s));i=i+s;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:A,payload:d}}}class k_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(xn||(xn={}));const tw=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=yS(i,n,e,o),s),{})},yS=(n,e,t,r)=>{const o=e.find(a=>a.name===n),s=o==null?void 0:o.type,i=t[n];return s&&!r.includes(s)?O_(s,i):b0(i)},O_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return xS(e,t)}switch(n){case xn.bool:return bS(e);case xn.float4:case xn.float8:case xn.int2:case xn.int4:case xn.int8:case xn.numeric:case xn.oid:return _S(e);case xn.json:case xn.jsonb:return BS(e);case xn.timestamp:return zS(e);case xn.abstime:case xn.date:case xn.daterange:case xn.int4range:case xn.int8range:case xn.money:case xn.reltime:case xn.text:case xn.time:case xn.timestamptz:case xn.timetz:case xn.tsrange:case xn.tstzrange:return b0(e);default:return b0(e)}},b0=n=>n,bS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},_S=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},BS=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},xS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const i=n.slice(1,t);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>O_(e,a))}return n},zS=n=>typeof n=="string"?n.replace(" ","T"):n,D_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Av{constructor(e,t,r={},o=P_){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(rw||(rw={}));class ru{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ru.syncState(this.state,o,s,i),this.pendingDiffs.forEach(A=>{this.state=ru.syncDiff(this.state,A,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ru.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const s=this.cloneDeep(e),i=this.transformState(t),a={},A={};return this.map(s,(d,c)=>{i[d]||(A[d]=c)}),this.map(i,(d,c)=>{const u=s[d];if(u){const h=c.map(y=>y.presence_ref),f=u.map(y=>y.presence_ref),g=c.filter(y=>f.indexOf(y.presence_ref)<0),m=u.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[d]=g),m.length>0&&(A[d]=m)}else a[d]=c}),this.syncDiff(s,{joins:a,leaves:A},r,o)}static syncDiff(e,t,r,o){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,A)=>{var d;const c=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(A),c.length>0){const u=e[a].map(f=>f.presence_ref),h=c.filter(f=>u.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,A)}),this.map(i,(a,A)=>{let d=e[a];if(!d)return;const c=A.map(u=>u.presence_ref);d=d.filter(u=>c.indexOf(u.presence_ref)<0),e[a]=d,o(a,d,A),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nw||(nw={}));var ow;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ow||(ow={}));var fa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class Jm{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Is.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Av(this,ui.join,this.params,this.timeout),this.rejoinTimer=new k_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Is.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Is.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Is.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Is.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new ru(this),this.broadcastEndpointURL=D_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(c=>e==null?void 0:e(fa.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(fa.CLOSED));const A={},d={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},A)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var u;if(this.socket.setAuth(),c===void 0){e==null||e(fa.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,g=[];for(let m=0;m<f;m++){const y=h[m],{filter:{event:b,schema:S,table:F,filter:P}}=y,L=c&&c[m];if(L&&L.event===b&&L.schema===S&&L.table===F&&L.filter===P)g.push(Object.assign(Object.assign({},y),{id:L.id}));else{this.unsubscribe(),e==null||e(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(fa.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,A;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||A===void 0)&&A.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Is.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new Av(this,ui.leave,{},e);o.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Av(this,e,t,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:A,leave:d,join:c}=ui;if(r&&[a,A,d,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var g,m,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(f=>f.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(f=>{var g,m,y,b,S,F;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const P=f.id,L=(g=f.filter)===null||g===void 0?void 0:g.event;return P&&((m=t.ids)===null||m===void 0?void 0:m.includes(P))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const P=(S=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return P==="*"||P===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:y,commit_timestamp:b,type:S,errors:F}=g;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:b,eventType:S,new:{},old:{},errors:F}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===Is.closed}_isJoined(){return this.state===Is.joined}_isJoining(){return this.state===Is.joining}_isLeaving(){return this.state===Is.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),s={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Jm.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ui.close,{},e)}_onError(e){this._on(ui.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Is.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=tw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=tw(e.columns,e.old_record)),t}}const CS=()=>{},SS=typeof WebSocket<"u",ES=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FS{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gS,this.params={},this.timeout=P_,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=CS,this.conn=null,this.sendBuffer=[],this.serializer=new wS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>us(async()=>{const{default:A}=await Promise.resolve().then(()=>Vd);return{default:A}},void 0).then(({default:A})=>A(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${y0.websocket}`,this.httpEndpoint=D_(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,i)=>i(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new k_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(SS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new IS(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),us(async()=>{const{default:e}=await import("./browser.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:vS}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case xd.connecting:return RA.Connecting;case xd.open:return RA.Open;case xd.closing:return RA.Closing;default:return RA.Closed}}isConnected(){return this.connectionState()===RA.Open}channel(e,t={config:{}}){const r=new Jm(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var A;(A=this.conn)===null||A===void 0||A.send(a)})};this.log("push",`${t} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(ui.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(mS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:o,payload:s,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ui.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([ES],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class IS{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xd.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function vo(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QS extends Zm{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _0 extends Zm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var US=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const N_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>us(async()=>{const{default:r}=await Promise.resolve().then(()=>Vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},TS=()=>US(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield us(()=>Promise.resolve().then(()=>Vd),void 0)).Response:Response}),B0=n=>{if(Array.isArray(n))return n.map(t=>B0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=B0(r)}),e};var ml=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const lv=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),LS=(n,e,t)=>ml(void 0,void 0,void 0,function*(){const r=yield TS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{e(new QS(lv(o),n.status||500))}).catch(o=>{e(new _0(lv(o),o))}):e(new _0(lv(n),n))}),PS=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),t))};function Ou(n,e,t,r,o,s){return ml(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,PS(e,r,o,s)).then(A=>{if(!A.ok)throw A;return r!=null&&r.noResolveJson?A:A.json()}).then(A=>i(A)).catch(A=>LS(A,a,r))})})}function ip(n,e,t,r){return ml(this,void 0,void 0,function*(){return Ou(n,"GET",e,t,r)})}function oA(n,e,t,r,o){return ml(this,void 0,void 0,function*(){return Ou(n,"POST",e,r,o,t)})}function kS(n,e,t,r,o){return ml(this,void 0,void 0,function*(){return Ou(n,"PUT",e,r,o,t)})}function OS(n,e,t,r){return ml(this,void 0,void 0,function*(){return Ou(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function M_(n,e,t,r,o){return ml(this,void 0,void 0,function*(){return Ou(n,"DELETE",e,r,o,t)})}var ls=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const DS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NS{constructor(e,t={},r,o){this.url=e,this.headers=t,this.bucketId=r,this.fetch=N_(o)}uploadOrUpdate(e,t,r,o){return ls(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},sw),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const A=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,A&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const d=this._removeEmptyFolders(t),c=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(vo(s))return{data:null,error:s};throw s}})}upload(e,t,r){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return ls(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let A;const d=Object.assign({upsert:sw.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",d.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",d.cacheControl)):(A=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:A,headers:c}),h=yield u.json();return u.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(A){if(vo(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,t){return ls(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const s=yield oA(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new Zm("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}update(e,t,r){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ls(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}copy(e,t,r){return ls(this,void 0,void 0,function*(){try{return{data:{path:(yield oA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return ls(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield oA(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return ls(this,void 0,void 0,function*(){try{const o=yield oA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}download(e,t){return ls(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ip(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(vo(a))return{data:null,error:a};throw a}})}info(e){return ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ip(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:B0(r),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}exists(e){return ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield OS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(vo(r)&&r instanceof _0){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&o.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});A!==""&&o.push(A);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return ls(this,void 0,void 0,function*(){try{return{data:yield M_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(vo(t))return{data:null,error:t};throw t}})}list(e,t,r){return ls(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},DS),t),{prefix:e||""});return{data:yield oA(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const MS="2.7.1",HS={"X-Client-Info":`storage-js/${MS}`};var Wl=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class jS{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},HS),t),this.fetch=N_(r)}listBuckets(){return Wl(this,void 0,void 0,function*(){try{return{data:yield ip(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(vo(e))return{data:null,error:e};throw e}})}getBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield ip(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(vo(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Wl(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Wl(this,void 0,void 0,function*(){try{return{data:yield kS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(vo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield M_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(vo(t))return{data:null,error:t};throw t}})}}class RS extends jS{constructor(e,t={},r){super(e,t,r)}from(e){return new NS(this.url,this.headers,e,this.fetch)}}const qS="2.48.1";let $c="";typeof Deno<"u"?$c="deno":typeof document<"u"?$c="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$c="react-native":$c="node";const KS={"X-Client-Info":`supabase-js-${$c}/${qS}`},$S={headers:KS},VS={schema:"public"},GS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WS={};var XS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const YS=n=>{let e;return n?e=n:typeof fetch>"u"?e=F_:e=fetch,(...t)=>e(...t)},JS=()=>typeof Headers>"u"?I_:Headers,ZS=(n,e,t)=>{const r=YS(t),o=JS();return(s,i)=>XS(void 0,void 0,void 0,function*(){var a;const A=(a=yield e())!==null&&a!==void 0?a:n;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${A}`),r(s,Object.assign(Object.assign({},i),{headers:d}))})};var e3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};function t3(n){return n.replace(/\/$/,"")}function r3(n,e){const{db:t,auth:r,realtime:o,global:s}=n,{db:i,auth:a,realtime:A,global:d}=e,c={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},A),o),global:Object.assign(Object.assign({},d),s),accessToken:()=>e3(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const H_="2.67.3",n3="http://localhost:9999",o3="supabase.auth.token",s3={"X-Client-Info":`gotrue-js/${H_}`},iw=10,x0="X-Supabase-Api-Version",j_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function i3(n){return Math.round(Date.now()/1e3)+n}function a3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Li=()=>typeof window<"u"&&typeof document<"u",NA={tested:!1,writable:!1},nu=()=>{if(!Li())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(NA.tested)return NA.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),NA.tested=!0,NA.writable=!0}catch{NA.tested=!0,NA.writable=!1}return NA.writable};function A3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const R_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>us(async()=>{const{default:r}=await Promise.resolve().then(()=>Vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},l3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",q_=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Eh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fh=async(n,e)=>{await n.removeItem(e)};function d3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,o,s,i,a,A,d,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)i=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),A=e.indexOf(n.charAt(c++)),d=e.indexOf(n.charAt(c++)),r=i<<2|a>>4,o=(a&15)<<4|A>>2,s=(A&3)<<6|d,t=t+String.fromCharCode(r),A!=64&&o!=0&&(t=t+String.fromCharCode(o)),d!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Yp{constructor(){this.promise=new Yp.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yp.promiseConstructor=Promise;function aw(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(d3(r))}async function c3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function u3(n,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await n(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function h3(n){return("0"+n.toString(16)).substr(-2)}function f3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let s=0;s<56;s++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,h3).join("")}async function p3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}function g3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function v3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await p3(n);return g3(t)}async function Xl(n,e,t=!1){const r=f3();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await q_(n,`${e}-code-verifier`,o);const s=await v3(r);return[s,r===s?"plain":"s256"]}const m3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w3(n){const e=n.headers.get(x0);if(!e||!e.match(m3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class e1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ur(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class y3 extends e1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function b3(n){return Ur(n)&&n.name==="AuthApiError"}class K_ extends e1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wl extends e1{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class Za extends wl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _3(n){return Ur(n)&&n.name==="AuthSessionMissingError"}class dv extends wl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ih extends wl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qh extends wl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function B3(n){return Ur(n)&&n.name==="AuthImplicitGrantRedirectError"}class Aw extends wl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class z0 extends wl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function cv(n){return Ur(n)&&n.name==="AuthRetryableFetchError"}class lw extends wl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var x3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};const HA=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),z3=[502,503,504];async function dw(n){var e;if(!l3(n))throw new z0(HA(n),0);if(z3.includes(n.status))throw new z0(HA(n),n.status);let t;try{t=await n.json()}catch(s){throw new K_(HA(s),s)}let r;const o=w3(n);if(o&&o.getTime()>=j_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new lw(HA(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Za}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new lw(HA(t),n.status,t.weak_password.reasons);throw new y3(HA(t),n.status||500,r)}const C3=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function Mr(n,e,t,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[x0]||(s[x0]=j_["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",A=await S3(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(A):{data:Object.assign({},A),error:null}}async function S3(n,e,t,r,o,s){const i=C3(e,r,o,s);let a;try{a=await n(t,Object.assign({},i))}catch(A){throw console.error(A),new z0(HA(A),0)}if(a.ok||await dw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(A){await dw(A)}}function eA(n){var e;let t=null;Q3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=i3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function cw(n){const e=eA(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function aA(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function E3(n){return{data:n,error:null}}function F3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s}=n,i=x3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s},A=Object.assign({},i);return{data:{properties:a,user:A},error:null}}function I3(n){return n}function Q3(n){return n.access_token&&n.refresh_token&&n.expires_in}var U3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};class T3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=R_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Mr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ur(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Mr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:aA})}catch(r){if(Ur(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=U3(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Mr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:F3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ur(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Mr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:aA})}catch(t){if(Ur(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,s,i,a,A;try{const d={nextPage:null,lastPage:0,total:0},c=await Mr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:I3});if(c.error)throw c.error;const u=await c.json(),h=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(A=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);d[`${y}Page`]=m}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Ur(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await Mr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:aA})}catch(t){if(Ur(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Mr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:aA})}catch(r){if(Ur(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Mr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:aA})}catch(r){if(Ur(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Mr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(Ur(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Mr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ur(t))return{data:null,error:t};throw t}}}const L3={getItem:n=>nu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{nu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{nu()&&globalThis.localStorage.removeItem(n)}};function uw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function P3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yl={debug:!!(globalThis&&nu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class k3 extends $_{}async function O3(n,e,t){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new k3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Yl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}P3();const D3={url:n3,storageKey:o3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:s3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Pc=30*1e3,hw=3;async function fw(n,e,t){return await t()}class wu{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wu.nextInstanceID,wu.nextInstanceID+=1,this.instanceID>0&&Li()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},D3),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new T3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=R_(o.fetch),this.lock=o.lock||fw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Li()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=O3:this.lock=fw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:nu()?this.storage=L3:(this.memoryStorage={},this.storage=uw(this.memoryStorage)):(this.memoryStorage={},this.storage=uw(this.memoryStorage)),Li()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${H_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=A3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Li()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),B3(s)){const A=(e=s.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ur(t)?{error:t}:{error:new K_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const s=await Mr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:eA}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Ur(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,o;try{let s;if("email"in e){const{email:c,password:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Xl(this.storage,this.storageKey)),s=await Mr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:eA})}else if("phone"in e){const{phone:c,password:u,options:h}=e;s=await Mr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:eA})}else throw new Ih("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if(Ur(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:i,options:a}=e;t=await Mr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cw})}else if("phone"in e){const{phone:s,password:i,options:a}=e;t=await Mr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cw})}else throw new Ih("You must provide either an email or phone number and a password");const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new dv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(Ur(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Eh(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{const{data:s,error:i}=await Mr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:eA});if(await Fh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new dv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Ur(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:s,nonce:i}=e,a=await Mr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:eA}),{data:A,error:d}=a;return d?{data:{user:null,session:null},error:d}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new dv}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:d})}catch(t){if(Ur(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,s,i;try{if("email"in e){const{email:a,options:A}=e;let d=null,c=null;this.flowType==="pkce"&&([d,c]=await Xl(this.storage,this.storageKey));const{error:u}=await Mr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},create_user:(r=A==null?void 0:A.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:d,code_challenge_method:c},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:A}=e,{data:d,error:c}=await Mr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:c}}throw new Ih("You must provide either an email or phone number.")}catch(a){if(Ur(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let o,s;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Mr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:eA});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const A=i.session,d=i.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(o){if(Ur(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await Xl(this.storage,this.storageKey)),await Mr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:E3})}catch(s){if(Ur(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Za;const{error:o}=await Mr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ur(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Mr(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await Mr(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Ih("You must provide either an email or phone number and a type")}catch(t){if(Ur(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Eh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,d,c)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,d,c))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Mr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:aA}):await this._useSession(async t=>{var r,o,s;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Za}:await Mr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:aA})})}catch(t){if(Ur(t))return _3(t)&&(await this._removeSession(),await Fh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new Za;const i=o.session;let a=null,A=null;this.flowType==="pkce"&&e.email!=null&&([a,A]=await Xl(this.storage,this.storageKey));const{data:d,error:c}=await Mr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:A}),jwt:i.access_token,xform:aA});if(c)throw c;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Ur(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return aw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Za;const t=Date.now()/1e3;let r=t,o=!0,s=null;const i=aw(e.access_token);if(i.exp&&(r=i.exp,o=r<=t),o){const{session:a,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:A}=await this._getUser(e.access_token);if(A)throw A;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Ur(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Za;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ur(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Li())throw new Qh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Aw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Aw("No code detected.");const{data:S,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:A,token_type:d}=e;if(!s||!a||!i||!d)throw new Qh("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;A&&(h=parseInt(A));const f=h-c;f*1e3<=Pc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=h-u;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:m,error:y}=await this._getUser(s);if(y)throw y;const b={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:d,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(Ur(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Eh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(b3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Fh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=a3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:s},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Xl(this.storage,this.storageKey,!0));try{return await Mr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Ur(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ur(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,A,d,c;const{data:u,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Mr(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0})});if(o)throw o;return Li()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ur(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)throw i;return await Mr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(Ur(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await u3(async o=>(o>0&&await c3(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await Mr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:eA})),(o,s)=>{const i=200*Math.pow(2,o);return s&&cv(s)&&Date.now()+i-r<Pc})}catch(r){if(this._debug(t,"error",r),Ur(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Li()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Eh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+iw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${iw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),cv(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Yp;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new Za;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),Ur(s)){const i={session:null,error:s};return cv(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(A){s.push(A)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await q_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Fh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Li()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Pc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Pc}ms, refresh threshold is ${hw} ticks`),o<=hw&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Li()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await Xl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Mr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ur(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:A,error:d}=await Mr(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=A==null?void 0:A.totp)===null||o===void 0)&&o.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(t){if(Ur(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await Mr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(Ur(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await Mr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ur(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let a=null;i.aal&&(a=i.aal);let A=a;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:A,currentAuthenticationMethods:c},error:null}}))}}wu.nextInstanceID=0;const N3=wu;class M3 extends N3{constructor(e){super(e)}}var H3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class j3{constructor(e,t,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=t3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const A=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:VS,realtime:WS,auth:Object.assign(Object.assign({},GS),{storageKey:A}),global:$S},c=r3(r??{},d);this.storageKey=(o=c.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=ZS(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new fS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new eS(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new RS(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return H3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:A},d,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M3({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:A,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new FS(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const R3=(n,e,t)=>new j3(n,e,t),q3="https://mprzyonufqescpcpusno.supabase.co",K3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wcnp5b251ZnFlc2NwY3B1c25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk3NjAwMzIsImV4cCI6MjA0NTMzNjAzMn0._EwKZZ9Yk-C6t96up66bvHDv_pLcE5HDD1TNpi2dWy4",gt=R3(q3,K3);async function Du(n,e){const{data:t,error:r}=await gt.from("products").select(`
            *,
            variants:product_variants(
                *,
                prices(*),
                option_values:product_variant_option_values(
                    option_value:product_option_values(
                        *,
                        option:product_options(*)
                    )
                )
            ),
            categories:categories(*),
            options:product_options(
                *,
                values:product_option_values(*)
            ),
            process:processes(*)
        `).eq("id",n).eq("shop",e).single();if(r)throw r;return t}async function mA(n){const{data:e,error:t}=await gt.from("product_variants").select(" *, prices(*)").eq("id",n).single();if(t)throw t;return e}async function V_(){const{data:n,error:e}=await gt.from("categories").select("*").order("name");if(e)throw e;const t=n||[],r=new Map,o=[];return t.forEach(s=>{r.set(s.id,{...s,children:[]})}),t.forEach(s=>{const i=r.get(s.id);if(i)if(s.parent_category_id){const a=r.get(s.parent_category_id);a&&(a.children=a.children||[],a.children.push(i))}else o.push(i)}),o}async function Tf(n,e,t=1,r=12,o,s=!1){const i=(t-1)*r,a=i+r-1;let A=gt.from("products").select(`
      *,
      variants:product_variants(
        *,
        prices(*)
      )
    `,{count:"exact"}).ilike("title",`%${n}%`).range(i,a).order("created_at",{ascending:!1});if(o==="godo"&&(A=A.not("godo_product","is",null)),s&&(A=A.not("process_id","is",null)),e){const{data:h}=await gt.from("product_categories").select("product_id").eq("category_id",e),f=(h==null?void 0:h.map(g=>g.product_id))||[];A=A.in("id",f)}const{data:d,error:c,count:u}=await A;if(c)throw c;return{products:d||[],total:u||0}}async function C0(n,e){if(!n||!e)return console.warn("getProductByMallInfo: mallType or mallProductNo is missing."),null;const{data:t,error:r}=await gt.from("products").select("*").eq("mall_type",n).eq("mall_product_id",e).maybeSingle();if(r)throw console.error("Error fetching product by mall info:",r),r;return t||console.log("Product not found for given mall info."),t}async function Nu(n){const{data:e,error:t}=await gt.from("product_addons").select("*").eq("product_id",n).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching product addons:",t),t;if(!e||e.length===0)return[];const r=[];for(const o of e){const{data:s,error:i}=await gt.from("product_addon_items").select(`
        *,
        addon_product:products(
          *,
          variants:product_variants(
            *,
            prices(*)
          )
        )
      `).eq("addon_id",o.id);if(i){console.error("Error fetching addon items:",i);continue}r.push({...o,items:s||[]})}return r}const $3=Object.freeze(Object.defineProperty({__proto__:null,getCategories:V_,getProductAddons:Nu,getProductById:Du,getProductByMallInfo:C0,getProductVariant:mA,searchProducts:Tf},Symbol.toStringTag,{value:"Module"}));function vi(n,e,t){if(!t||t.length===0)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};const r=t.find(i=>n>=i.min_quantity&&n<=i.max_quantity);if(!r)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};let o=e,s=0;if(r.type==="amount")r.direction==="minus"?(o=Math.max(0,e-r.value),s=e-o):(o=e+r.value,s=-r.value);else if(r.type==="percentage"){const i=r.value/100;r.direction==="minus"?(s=e*i,o=e-s):(s=-(e*i),o=e+Math.abs(s))}return{originalPrice:e,discountedPrice:o,discountAmount:s,discountInfo:r,hasDiscount:s!==0}}const V3={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1};function G3(){const{subscribe:n,set:e,update:t}=vl(V3);return{subscribe:n,set:e,update:t,async loadIntegratedProductData(r,o){var i;const s=pn({subscribe:n});if((i=s.productDataCache[r])!=null&&i.isLoaded)return s.productDataCache[r];if(s.loadingProducts.has(r))return new Promise((a,A)=>{const d=setInterval(()=>{var u;const c=pn({subscribe:n});c.loadingProducts.has(r)||(clearInterval(d),(u=c.productDataCache[r])!=null&&u.isLoaded?a(c.productDataCache[r]):A(new Error("   ")))},100)});t(a=>({...a,loadingProducts:new Set([...a.loadingProducts,r]),isGlobalLoading:!0,productDataCache:{...a.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0}}}));try{const[a,A]=await Promise.all([Du(r,o),Nu(r)]);if(!a)throw new Error("   ");const d={};A.forEach(u=>{u.items.forEach(h=>{h.addon_product.variants&&h.addon_product.variants.length>0&&(d[h.addon_product.id]={price:h.addon_product.variants[0].prices[0].amount,title:h.addon_product.title,variants:h.addon_product.variants,description:h.addon_product.description,thumbnail:h.addon_product.thumbnail})})});const c={id:r,product:a,addons:A,process:a.process,addonProductsMap:d,isLoaded:!0,isLoading:!1};return t(u=>{const h=new Set(u.loadingProducts);return h.delete(r),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[r]:c}}}),c}catch(a){throw console.error("   :",a),t(A=>{const d=new Set(A.loadingProducts);return d.delete(r),{...A,loadingProducts:d,isGlobalLoading:d.size>0,productDataCache:{...A.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:a instanceof Error?a.message:"   "}}}}),a}},async loadMultipleProductData(r,o){t(s=>({...s,isGlobalLoading:!0}));try{const s=r.map(a=>this.loadIntegratedProductData(a,o)),i=await Promise.all(s);return t(a=>({...a,isGlobalLoading:!1})),i}catch(s){throw t(i=>({...i,isGlobalLoading:!1})),s}},getProductData(r){return pn({subscribe:n}).productDataCache[r]||null},clearProductData(r){t(r?o=>{const s={...o.productDataCache};return delete s[r],{...o,productDataCache:s}}:o=>({...o,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1}))},isProductLoading(r){return pn({subscribe:n}).loadingProducts.has(r)},isGlobalLoading(){return pn({subscribe:n}).isGlobalLoading},isCached(r){var s;return((s=pn({subscribe:n}).productDataCache[r])==null?void 0:s.isLoaded)===!0}}}const pd=G3(),Ls=vl(null);function W3(){const n={},e={products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null},{subscribe:t,set:r,update:o}=vl(e),s=i=>{const a=i.products.map(h=>{var J;let f=0,g={originalAmount:0,discountAmount:0,hasDiscount:!1,discountDetails:void 0};const m=(h.variants||[]).reduce((we,O)=>we+(O.quantity||0),0),y=(h.variants||[]).map(we=>{const O=we.quantity||0,D=we.prices[0].amount;if(O>0){if(we.isDiscountedPrice)return{originalAmount:D*O,discountedAmount:D*O,discountAmount:0,discountDetails:void 0,hasDiscount:!1};const Z=vi(m,D,h.product.quantity_discounts);return{originalAmount:D*O,discountedAmount:Z.discountedPrice*O,discountAmount:Z.discountAmount*O,discountDetails:Z.discountInfo,hasDiscount:Z.hasDiscount}}else return{originalAmount:D*O,discountedAmount:D*O,discountAmount:0,discountDetails:void 0,hasDiscount:!1}});f=y.reduce((we,O)=>we+O.discountedAmount,0);const b=y.some(we=>we.hasDiscount),S=(J=y.find(we=>we.hasDiscount))==null?void 0:J.discountDetails;g={originalAmount:y.reduce((we,O)=>we+O.originalAmount,0),discountAmount:y.reduce((we,O)=>we+O.discountAmount,0),hasDiscount:b,discountDetails:S};let F=0;const P=h.prints&&h.prints.length>0,L=h.simplePrints&&h.simplePrints.length>0,re=h.print_type==="simple"&&L||L&&!P;P&&!re&&(F=(h.prints||[]).reduce((we,O)=>we+(O.price||0),0));let K=0;if(h.addons&&Object.keys(h.addons).length>0){const we=h.quantity||0;K=Object.values(h.addons).reduce((O,D)=>{if(D.price!==void 0){const Z=D.quantity||1;return O+D.price*Z}if(h.addonProductsMap){const Z=h.addonProductsMap[D.productId];if(Z&&D.variantId){const ie=Z.variants.find(de=>de.id===D.variantId);if(ie&&ie.prices&&ie.prices.length>0)return O+ie.prices[0].amount*we}}return O},0)}const H=f+F+K;return{...h,productAmount:f,printAmount:F,addonAmount:K,totalAmount:H,discountInfo:g}}),A=a.reduce((h,f)=>h+f.quantity,0),d=a.reduce((h,f)=>h+(f.productAmount||0),0),c=a.reduce((h,f)=>h+(f.printAmount||0),0),u=a.reduce((h,f)=>h+(f.addonAmount||0),0);return{products:a,totalQuantity:A,totalProductAmount:d,totalPrintAmount:c,totalAddonAmount:u,totalAmount:d+c+u+(i.totalAdditionalAmount||0)}};return{subscribe:t,set:r,update:o,async addProductWithIntegratedData(i,a){try{const A=await pd.loadIntegratedProductData(i,a),d={product:A.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:A.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};o(c=>({...c,products:[...c.products,d],index:c.products.length}))}catch(A){throw console.error("  :",A),A}},async preloadProductsForFixedMode(i,a){try{const d=(await pd.loadMultipleProductData(i,a)).map(c=>({product:c.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:c.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0}));o(c=>({...c,products:d,index:0}))}catch(A){throw console.error("   :",A),A}},async refreshProductData(i,a){const d=pn({subscribe:t}).products[i];if(!d)throw new Error("   ");try{pd.clearProductData(d.product.id);const c=await pd.loadIntegratedProductData(d.product.id,a);o(u=>({...u,products:u.products.map((h,f)=>f===i?{...h,product:c.product,addonProductsMap:c.addonProductsMap,isLoaded:!0}:h)}))}catch(c){throw console.error("   :",c),c}},reset:()=>{r({products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null})},calculatePrintPrice:async(i,a=!1)=>{const A=pn(St),d=A.products[i];if(console.log({product:d}),d.prints&&d.prints.length>0)for(const c of d.prints){console.log({print:c});let u=0,h=0;if(c.colors&&c.template.templateProduct){const f=c.template.templateProduct.template_product_variants.find(g=>g.color_count===c.colors.length);if(console.log({selectedVariant:f}),f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await mA(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=vi(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}else if(c.template.templateProduct){const f=c.template.templateProduct.template_product_variants[0];if(f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await mA(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=vi(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}}if(!a){const c=s(A);r({...A,...c,totalAdditionalAmount:A.totalAdditionalAmount})}},updateTotalAmounts:()=>{o(i=>{const a=s(i);return{...i,...a,totalAdditionalAmount:i.totalAdditionalAmount}})},cancelPrint:(i,a)=>{o(A=>{var c;A.products[i].prints=(c=A.products[i].prints)==null?void 0:c.filter(u=>u.objectId!==a);const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}})},updateSimplePrint:(i,a,A)=>{o(d=>{d.products[i].prints||(d.products[i].prints=[]);const c=d.products[i].prints.findIndex(u=>u.objectId===a);return c>=0?d.products[i].prints[c]={...d.products[i].prints[c],...A}:d.products[i].prints.push(A),d})},saveSimplePrintState:(i,a)=>{console.log("Store: saveSimplePrintState ",{productIndex:i,selectedAreasCount:a.length,selectedAreas:a}),o(A=>A.products[i]?(A.products[i].simplePrintState=a,console.log("Store: saveSimplePrintState ",{productIndex:i,savedState:A.products[i].simplePrintState}),A):(console.warn("Store: saveSimplePrintState -   :",i),A))},getSimplePrintState:i=>{var d;const a=pn(St),A=((d=a.products[i])==null?void 0:d.simplePrintState)||[];return console.log("Store: getSimplePrintState ",{productIndex:i,hasProduct:!!a.products[i],result:A,resultType:typeof A,resultLength:Array.isArray(A)?A.length:"not array"}),A}}}const St=W3();function X3(){const n={name:"",phone:"",address1:"",address2:"",postcode:""},{subscribe:e,set:t,update:r}=vl(n);return{subscribe:e,set:t,update:r,reset:()=>{console.log(" Customer Store "),t(n)}}}const sl=X3(),gr=n=>n.toLocaleString("ko-KR");/**
* @license lucide-svelte v0.475.0 - ISC
*
* ISC License
* 
* Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
* 
* Permission to use, copy, modify, and/or distribute this software for any
* purpose with or without fee is hereby granted, provided that the above
* copyright notice and this permission notice appear in all copies.
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
* WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
* ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
* WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
* ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
* OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*/const Y3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var J3=Wp("<svg><!><!></svg>");function vn(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]),r=nn(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);jr(e,!1);let o=ft(e,"name",8,void 0),s=ft(e,"color",8,"currentColor"),i=ft(e,"size",8,24),a=ft(e,"strokeWidth",8,2),A=ft(e,"absoluteStrokeWidth",8,!1),d=ft(e,"iconNode",24,()=>[]);const c=(...m)=>m.filter((y,b,S)=>!!y&&S.indexOf(y)===b).join(" ");Kr();var u=J3();let h;var f=w(u);Yt(f,1,d,Ar,(m,y)=>{let b=()=>l(y)[0],S=()=>l(y)[1];var F=Dt(),P=pt(F);P4(P,b,!0,(L,re)=>{let K;Me(()=>K=M2(L,K,{...S()},void 0,L.namespaceURI===Gb,L.nodeName.includes("-")))}),T(m,F)});var g=z(f);cn(g,e,"default",{}),Me((m,y)=>h=M2(u,h,{...Y3,...r,width:i(),height:i(),stroke:s(),"stroke-width":m,class:y},void 0,!0),[()=>A()?Number(a())*24/Number(i()):a(),()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],ot),T(n,u),Rr()}function Ga(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"asterisk"},()=>t,{iconNode:[["path",{d:"M12 6v12"}],["path",{d:"M17.196 9 6.804 15"}],["path",{d:"m6.804 9 10.392 6"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function pw(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"book-text"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["path",{d:"M8 11h8"}],["path",{d:"M8 7h6"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function Z3(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"bot"},()=>t,{iconNode:[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function eE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function t1(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function yu(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"circle-x"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function ap(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"clock"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function tE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"eye"},()=>t,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function Lf(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"file-text"},()=>t,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function rE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"key"},()=>t,{iconNode:[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function zd(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"loader-circle"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function G_(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function nE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"mail"},()=>t,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function oE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"message-square"},()=>t,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function S0(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"package"},()=>t,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function W_(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function bu(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function sE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"printer"},()=>t,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function iE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"refresh-cw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function aE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function X_(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function AE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"send"},()=>t,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function lE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"shopping-bag"},()=>t,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function dE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"shopping-cart"},()=>t,{iconNode:[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function r1(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"trash-2"},()=>t,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function cE(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"user-cog"},()=>t,{iconNode:[["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m21.7 16.4-.9-.3"}],["path",{d:"m15.2 13.9-.9-.3"}],["path",{d:"m16.6 18.7.3-.9"}],["path",{d:"m19.1 12.2.3-.9"}],["path",{d:"m19.6 18.7-.4-1"}],["path",{d:"m16.8 12.3-.4-1"}],["path",{d:"m14.3 16.6 1-.4"}],["path",{d:"m20.7 13.8 1-.4"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function E0(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"user"},()=>t,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}function Mu(n,e){const t=nn(e,["children","$$slots","$$events","$$legacy"]);vn(n,gn({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,s)=>{var i=Dt(),a=pt(i);cn(a,e,"default",{}),T(o,i)},$$slots:{default:!0}}))}async function uE(n,e,t,r,o){let s=gt.from("estimates").select("*").eq("is_delete",!1).neq("status","temp").order("created_at",{ascending:!1});t&&(s=s.eq("shop_id",t)),e?s=s.eq("customer_id",e):n&&(s=s.eq("sess",n)),r&&(s=s.gte("created_at",`${r}T00:00:00`)),o&&(s=s.lte("created_at",`${o}T23:59:59`));const{data:i,error:a}=await s;if(a)throw a;return i||[]}async function n1(n,e,t){if(n&&e){const{data:r,error:o}=await gt.from("estimates").select("*").eq("status","temp").eq("mall_type",n).eq("customer_id",e).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}if(t){const{data:r,error:o}=await gt.from("estimates").select("*").eq("status","temp").eq("sess",t).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}return null}async function o1(n){const{data:e,error:t}=await gt.from("estimates").select("*").eq("id",n).eq("is_delete",!1).single();if(t)throw t;return e}function Ap(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${e}${t}${r}${o}${s}${i}`}async function s1(n){const e={...n,estimate_no:Ap()},{data:t,error:r}=await gt.from("estimates").insert(e).select().single();if(r)throw r;return t}async function Dd(n,e){const{data:t,error:r}=await gt.from("estimates").select("estimate_no").eq("id",n).single();if(r)throw r;const o={...e};t!=null&&t.estimate_no||(o.estimate_no=Ap());const{error:s}=await gt.from("estimates").update(o).eq("id",n);if(s)throw s;const{data:i,error:a}=await gt.from("estimates").select("*").eq("id",n).single();if(a)throw a;if(!i)throw new Error("   .");return i}async function _u(n){const{data:e,error:t}=await gt.from("estimate_items").select(`
      *,
      product:products(*),
      variant:product_variants(id, title, thumbnail)
    `).eq("estimate_id",n);if(t)throw t;return(e||[]).map(r=>{var o;return{...r,variant_title:((o=r.variant)==null?void 0:o.title)||null}})}async function i1(n){const{data:e,error:t}=await gt.from("estimate_items").insert(n).select().single();if(t)throw t;return e}async function Y_(n){const{error:e}=await gt.from("estimate_items").delete().eq("id",n);if(e)throw e}async function Nd(n){const{data:e,error:t}=await gt.from("estimate_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function J_(n){const{data:e,error:t}=await gt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function a1(n){const{data:e,error:t}=await gt.from("estimate_prints").insert(n).select().single();if(t)throw t;return e}async function Z_(n){const{error:e}=await gt.from("estimate_prints").delete().eq("id",n);if(e)throw e}async function F0(n){const{data:e,error:t}=await gt.from("estimate_simple_prints").insert(n).select().single();if(t)throw t;return e}async function eB(n,e){const{data:t,error:r}=await gt.from("estimates").update({status:e}).eq("id",n).select().single();if(r)throw r;return t}function Jp(n,e){return gt.channel(`estimate-${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"estimates",filter:`id=eq.${n}`},t=>{e(t.new)}).subscribe()}function tB(n,e,t,r){const o=r?`estimate-list-${e}-${r}`:`estimate-list-${n}-${e}`;let s=`shop_id=eq.${e}`;return r?s=`customer_id=eq.${r}`:n&&(s=`sess=eq.${n}`),gt.channel(o).on("postgres_changes",{event:"*",schema:"public",table:"estimates",filter:s},i=>{t({...i,eventType:i.eventType})}).subscribe()}function Cd(n){return n===void 0||n==="temp"||n==="pending"}async function A1(n){try{const e=o1(n),t=_u(n),r=Nd(n),[o,s,i]=await Promise.all([e,t,r]);return{estimate:o,items:s||[],prints:i||[]}}catch(e){throw e}}async function rB(n){const{data:e,error:t}=await gt.from("estimate_comments").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function Pf(n){const{data:e,error:t}=await gt.from("estimate_comments").insert(n).select().single();if(t)throw t;return e}function l1(n,e){return gt.channel(`estimate-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_comments",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}async function nB(){var n,e;try{const t=document.getElementById("odiz-customer-id"),r=document.getElementById("odiz-sess"),o=(n=t==null?void 0:t.value)==null?void 0:n.trim(),s=(e=r==null?void 0:r.value)==null?void 0:e.trim();if(!o||!s)return 0;const{data:i,error:a}=await gt.from("estimates").select("id").eq("sess",s).is("customer_id",null);if(a)throw a;if(!i||i.length===0)return 0;const{data:A,error:d}=await gt.from("estimates").update({customer_id:o}).eq("sess",s).is("customer_id",null).select();if(d)throw d;return(A==null?void 0:A.length)||0}catch{return 0}}function d1(n,e){return gt.channel(`estimate-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}function oB(n,e){return gt.channel(`estimate-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateItems  :",r)})}function sB(n,e){return gt.channel(`estimate-simple-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_simple_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateSimplePrints  :",r)})}function iB(n,e){return gt.channel(`estimate-addon-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_addon_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAddonItems  :",r)})}function aB(n,e){return gt.channel(`estimate-additional-costs-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_additional_costs",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAdditionalCosts  :",r)})}async function AB(n,e,t,r,o){const s=t?t.replace(/[\s\-\(\)\.]/g,""):"";let i=gt.from("estimates").select("*").eq("shop_id",n).or("customer_id.is.null,customer_id.eq.").neq("status","temp").order("created_at",{ascending:!1});e&&(i=i.ilike("order_name",`%${e}%`)),s&&(i=i.filter("order_phone","ilike",`%${s}%`)),o&&(i=i.eq("mall_type",o));const{data:a,error:A}=await i;if(A)throw A;return a||[]}async function lB(n){try{const{data:e,error:t}=await gt.from("estimate_items").select(`
        *,
        product:products(*)
      `).eq("estimate_id",n).order("idx");if(t)throw t;const{data:r,error:o}=await gt.from("estimate_prints").select("*").eq("estimate_id",n).order("idx");if(o)throw o;const s={};return(e||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,product:i.product,items:[],prints:[]}),s[a].items.push(i)}),(r||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,items:[],prints:[]}),s[a].prints.push(i)}),Object.values(s)}catch(e){throw e}}async function Zp(n){const{data:e,error:t}=await gt.from("estimate_addon_items").select("*").eq("estimate_id",n).order("idx");if(t)throw t;return e||[]}async function dB(n){const{data:e,error:t}=await gt.from("estimate_additional_costs").select("*").eq("id",n).single();if(t)throw t;return e||null}async function c1(n){const e={...n,selected_variant_id:n.selected_variant_id&&n.selected_variant_id.trim()!==""?n.selected_variant_id:null},{data:t,error:r}=await gt.from("estimate_addon_items").insert(e).select().single();if(r)throw r;return t}async function cB(n,e){const{error:t}=await gt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t}async function u1(n){const{data:e,error:t}=await gt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function uB(n){try{const{data:e,error:t}=await gt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at");if(t)throw t;return(e||[]).map((o,s)=>({id:o.id,product:{name:o.name,title:o.name,mall_type:o.mall_type||null,mall_product_id:o.mall_product_id||null},items:[{estimate_id:n,quantity:1,price:o.amount}],additionalCosts:[o],isAdditionalCost:!0}))}catch(e){throw e}}async function hB(n){const{data:e,error:t}=await gt.from("estimate_items").select("idx").eq("estimate_id",n).order("idx",{ascending:!1}).limit(1).single();return t||!e?-1:e.idx}async function fB(n,e,t,r){try{const o=await n1(e,t,r);let s,i,a=!1,A=0;if(o&&o.id)s=o.id,i=o.estimate_no||Ap(),await Dd(s,{...n.estimate,estimate_no:i}),A=await hB(s)+1;else{const g={...n.estimate,estimate_no:Ap(),status:"temp"},{data:m,error:y}=await gt.from("estimates").insert(g).select().single();if(y)throw new Error(`  : ${y.message}`);s=m.id,i=m.estimate_no,a=!0}let d=0;if(n.estimate_items&&n.estimate_items.length>0){const g=n.estimate_items.map(b=>({...b,estimate_id:s,idx:A})),{data:m,error:y}=await gt.from("estimate_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);d=(m==null?void 0:m.length)||0}let c=0;if(n.estimate_simple_prints&&n.estimate_simple_prints.length>0){const g=n.estimate_simple_prints.map(b=>({...b,estimate_id:s,idx:a?b.idx||0:A})),{data:m,error:y}=await gt.from("estimate_simple_prints").insert(g).select();if(y)throw new Error(`   : ${y.message}`);c=(m==null?void 0:m.length)||0}let u=0;if(n.estimate_prints&&n.estimate_prints.length>0){const g=n.estimate_prints.map(b=>({...b,estimate_id:s,idx:a?b.idx||0:A})),{data:m,error:y}=await gt.from("estimate_prints").insert(g).select();if(y)throw new Error(`    : ${y.message}`);if(u=(m==null?void 0:m.length)||0,u>0){const{error:b}=await gt.from("estimate_items").update({print_type:"detailed"}).eq("estimate_id",s).eq("idx",A)}}let h=0;if(n.estimate_addon_items&&n.estimate_addon_items.length>0){const g=n.estimate_addon_items.map(b=>({...b,estimate_id:s,idx:a?b.idx||0:A,selected_variant_id:b.selected_variant_id&&b.selected_variant_id.trim()!==""?b.selected_variant_id:null})),{data:m,error:y}=await gt.from("estimate_addon_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);h=(m==null?void 0:m.length)||0}const f={success:!0,estimateId:s,details:{estimateCount:a?1:0,itemsCount:d,simplePrintsCount:c,detailedPrintsCount:u,addonItemsCount:h}};return await h1(s),f}catch(o){return{success:!1,error:o instanceof Error?o.message:"    ."}}}async function I0(n,e){try{const{error:t}=await gt.from("estimate_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t;const{error:r}=await gt.from("estimate_prints").delete().eq("estimate_id",n).eq("idx",e);if(r)throw r;const{error:o}=await gt.from("estimate_simple_prints").delete().eq("estimate_id",n).eq("idx",e);if(o)throw o;const{error:s}=await gt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(s)throw s}catch(t){throw t}}async function pB(n,e){try{const{data:t,error:r}=await gt.from("estimate_items").select(`
        *,
        product:products(
          *,
          options:product_options(
            *,
            values:product_option_values(*)
          ),
          variants:product_variants(*)
        )
      `).eq("estimate_id",n).eq("idx",e);if(r)throw r;if(t&&t.length>0)for(const h of t)if(h.variant_id)try{const{data:f,error:g}=await gt.from("product_variants").select("*").eq("id",h.variant_id).single();if(g)h.variant=null;else{h.variant=f;try{const{data:m,error:y}=await gt.from("prices").select("*").eq("variant_id",h.variant_id);y?h.variant.prices=[]:h.variant.prices=m||[]}catch{h.variant.prices=[]}try{const{data:m,error:y}=await gt.from("product_variant_option_values").select("option_value_id").eq("variant_id",h.variant_id);if(y||!m||m.length===0)h.variant.option_values=[];else{const b=m.map(F=>F.option_value_id).filter(Boolean),S=[];for(const F of b)try{const{data:P,error:L}=await gt.from("product_option_values").select("id, value, option_id").eq("id",F).single();if(L||!P)continue;let re=null;if(P.option_id){const{data:K,error:H}=await gt.from("product_options").select("*").eq("id",P.option_id).single();!H&&K&&(re={id:K.id,name:K.title})}S.push({option_value:{id:P.id,value:P.value,option_id:P.option_id,option:re}})}catch{}h.variant.option_values=S}}catch{h.variant.option_values=[]}}}catch{h.variant=null}else h.variant=null;const{data:o,error:s}=await gt.from("estimate_prints").select("*").eq("estimate_id",n).eq("idx",e);if(s)throw s;if(o&&o.length>0){const{getParentTemplates:h}=await us(async()=>{const{getParentTemplates:f}=await Promise.resolve().then(()=>hE);return{getParentTemplates:f}},void 0);for(const f of o)if(f.template_id)try{const g=await h(f.template_id);f.parentTemplates=g}catch{f.parentTemplates=[]}else f.parentTemplates=[]}const{data:i,error:a}=await gt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("idx",e);if(a)throw a;const{data:A,error:d}=await gt.from("estimate_addon_items").select("*").eq("estimate_id",n).eq("idx",e);if(d)throw d;const c=t&&t.length>0?t[0].product_id:null;let u=[];if(c)try{const{getProductAddons:h}=await us(async()=>{const{getProductAddons:f}=await Promise.resolve().then(()=>$3);return{getProductAddons:f}},void 0);u=await h(c)}catch{u=[]}return{items:t||[],prints:o||[],simplePrints:i||[],addonItems:A||[],addons:u||[]}}catch(t){throw t}}function gB(n){const e={};return n.forEach((t,r)=>{if(!t.variant)return;const o=t.variant;let s="";if(o.option_values&&Array.isArray(o.option_values)&&o.option_values.length>0)try{const a=o.option_values.find(A=>{var c;if(!A||!A.option_value)return!1;const d=(c=A.option_value.option)==null?void 0:c.name;return d===""||d===""||d==="color"||d==="Color"});a&&a.option_value&&(s=a.option_value.value||"")}catch{}if(!s&&o.title){const a=o.title.split("/").map(A=>A.trim());a.length>0&&(s=a[0])}s||(s=""),e[s]||(e[s]=[]),e[s].some(a=>a.id===o.id)||e[s].push({id:o.id,title:o.title,thumbnail:o.thumbnail,product_id:o.product_id,prices:t.variant.prices||[],option_values:o.option_values||[]})}),e}function vB(n,e){var y,b,S;if(!n.items||n.items.length===0)throw new Error("estimate_items  ");const t=(y=n.items[0])==null?void 0:y.product_id;if(!t)throw new Error("Product ID   ");let r;r=gB(n.items),Object.keys(r).length;const o={},s={},i=new Set;let a=0;n.items.forEach((F,P)=>{const L=F.variant_id,re=F.quantity||0;a+=re;let K="";for(const[H,J]of Object.entries(r))if(J.some(we=>we.id===L)){K=H,i.add(H);break}K&&(o[K]||(o[K]={}),o[K][L]=re),(F.discount_amount>0||F.discount_value>0)&&(s[L]={hasDiscount:!0,discountedPrice:F.price,discountAmount:F.discount_amount,discountInfo:{type:F.discount_type,value:F.discount_value,direction:F.discount_direction,min_quantity:F.discount_min_quantity,max_quantity:F.discount_max_quantity}})});const A={productId:t,product:(b=n.items[0])==null?void 0:b.product,addons:n.addons||[],addonItems:n.addonItems||[],selectedColors:Array.from(i),quantityByVariant:o,variantsByColor:r,variantDiscounts:s,totalQuantity:a,isCompleted:!0,lastUpdated:Date.now()},d=(n.simplePrints||[]).map(F=>({objectId:F.object_id,title:F.title,printMethod:F.print_method,uploadedFiles:F.uploaded_files,savedFileInfo:F.file_metadata,price:F.price})),c=n.prints.map((F,P)=>({template:{id:F.template_id},template_id:F.template_id,variant_id:F.variant_id,colors:F.colors,uploads:F.uploads,nameSheet:F.name_sheet,name_sheet:F.name_sheet,objectId:F.object_id,object_id:F.object_id,price:F.price,original_price:F.original_price,discount_amount:F.discount_amount,discount_type:F.discount_type,discount_value:F.discount_value,discount_direction:F.discount_direction,discount_min_quantity:F.discount_min_quantity,discount_max_quantity:F.discount_max_quantity,parentTemplates:F.parentTemplates||[],discountInfo:{originalPrice:F.original_price,discountAmount:F.discount_amount,discountDetails:{type:F.discount_type,value:F.discount_value,direction:F.discount_direction,min_quantity:F.discount_min_quantity,max_quantity:F.discount_max_quantity}}})),u={};n.addonItems.forEach(F=>{u[F.addon_id]={productId:F.selected_product_id,variantId:F.selected_variant_id}});const h={productId:t,selectedAddons:u,isCompleted:!0,lastUpdated:Date.now()};let f="none";const g=(S=n.items[0])==null?void 0:S.print_type;g&&["simple","detailed","self-design","none"].includes(g)?f=g:(f="selection",(d.length>0||c.length>0)&&console.warn("    print_type .    ."));const m={productId:t,currentMethod:f,isCompleted:!0,lastUpdated:Date.now()};return{productId:t,fixedEstimateData:{productId:t,productSelection:A,printSelection:m,addonSelection:h,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:Date.now().toString(36)+Math.random().toString(36).substr(2)},sessionStorageData:{fixedEstimateKey:`fixedEstimate_${t}`,simplePrintKey:`simplePrint_${t}`,detailedPrintKey:`detailedPrint_${t}`,printMethod:f,simplePrintState:d,detailedPrintState:c}}}async function mB(n){const{data:e,error:t}=await gt.from("estimate_items").select("quantity, price, print_type").eq("estimate_id",n);if(t)throw t;let r=0,o=0,s=!1;(e||[]).forEach(g=>{const m=g.quantity||0,y=g.price||0;r+=m*y,o+=m,g.print_type==="detailed"&&(s=!0)});let i=0;if(s){const{data:g,error:m}=await gt.from("estimate_prints").select("price").eq("estimate_id",n);if(m)throw m;i=(g||[]).reduce((y,b)=>y+(b.price||0),0)}const{data:a,error:A}=await gt.from("estimate_addon_items").select("price, quantity").eq("estimate_id",n);if(A)throw A;let d=0;(a||[]).forEach(g=>{const m=g.price||0,y=g.quantity||1;d+=m*y});const{data:c,error:u}=await gt.from("estimate_additional_costs").select("amount").eq("estimate_id",n);if(u)throw u;const h=(c||[]).reduce((g,m)=>g+(m.amount||0),0),f=r+i+d+h;return{product_amount:r,print_amount:i,addon_amount:d,additional_amount:h,total_quantity:o,total_amount:f}}async function h1(n){const e=await mB(n),{error:t}=await gt.from("estimates").update(e).eq("id",n);if(t)throw new Error(`Failed to update estimate summary: ${t.message}`)}const uv=Object.freeze(Object.defineProperty({__proto__:null,addEstimateAddonItem:c1,addEstimateComment:Pf,addEstimateItem:i1,addEstimatePrint:a1,addEstimateSimplePrint:F0,buildVariantsByColorFromDB:gB,calculateEstimateSummary:mB,canEditEstimate:Cd,convertDBDataToSessionStorage:vB,createEstimate:s1,deleteEstimateAddonItemsByIdx:cB,deleteEstimateItem:Y_,deleteEstimatePrint:Z_,deleteEstimateProductByIdx:I0,getAdditionalItems:uB,getEstimateAdditionalCost:dB,getEstimateAdditionalCosts:u1,getEstimateAddonItems:Zp,getEstimateById:o1,getEstimateComments:rB,getEstimateItems:_u,getEstimateItemsGroupedByIdx:lB,getEstimatePrints:Nd,getEstimateSimplePrints:J_,getEstimatesWithDateFilter:uE,getFullEstimateDetails:A1,getGuestEstimates:AB,getMaxEstimateItemIdx:hB,getTempEstimate:n1,loadEstimateItemDataByIdx:pB,migrateSessionEstimatesToCustomer:nB,saveCompleteEstimateData:fB,subscribeToEstimateAdditionalCostsChanges:aB,subscribeToEstimateAddonItemsChanges:iB,subscribeToEstimateChanges:Jp,subscribeToEstimateCommentChanges:l1,subscribeToEstimateItemsChanges:oB,subscribeToEstimateListChanges:tB,subscribeToEstimatePrintChanges:d1,subscribeToEstimateSimplePrintsChanges:sB,updateEstimate:Dd,updateEstimateStatus:eB,updateEstimateSummary:h1},Symbol.toStringTag,{value:"Module"}));async function wB(n){const{data:e,error:t}=await gt.from("templates").select("*").eq("id",n).single();if(t)throw t;return e}async function yB(n){const{data:e,error:t}=await gt.from("templates").select("*").eq("parent_id",n).order("sort");if(t)throw t;return e||[]}async function lp(n){const{data:e,error:t}=await gt.from("process_print_areas").select(`
            id,
            title,
            process_print_area_templates!inner (
                id,
                print_area_id,
                template_id,
                group_cd,
                created_at,
                updated_at,
                template:templates (*)
            )
        `).eq("object_id",n).single();if(t)throw t;return e}async function Hu(n){const e=[],{data:t,error:r}=await gt.from("templates").select(" * ").eq("id",n).single();if(r)return console.error("   :",r),e;if(!t)return e;e.push(t);let o=t.parent_id;for(;o;){const{data:s,error:i}=await gt.from("templates").select(" * ").eq("id",o).single();if(i){console.error("   :",i);break}if(!s)break;e.push(s),o=s.parent_id}return e.reverse()}async function Gd(n){const{data:e,error:t}=await gt.from("template_products").select(`
            *,
            product:products (*),
            template_product_variants (
                id,
                variant_id,
                color_count,
                min_quantity,
                plate_price
            )
        `).eq("template_id",n).single();if(t)throw t;return e}async function f1(n){const{data:e,error:t}=await gt.from("process_print_areas").select("*").eq("object_id",n).single();return t?(console.error("  :",t),null):e}const hE=Object.freeze(Object.defineProperty({__proto__:null,getChildTemplates:yB,getParentTemplates:Hu,getPrintAreaByObjectId:f1,getTemplate:wB,getTemplateProduct:Gd,getTemplatesByObjectId:lp},Symbol.toStringTag,{value:"Module"}));var fE=te('<div class="odz-gap-2 odz-mt-3 odz-flex odz-flex-col"><button class="odz-btn odz-btn-sm odz-btn-secondary"></button> <button class="odz-btn odz-btn-sm odz-btn-primary"></button></div>'),pE=te('<img class="odz-w-8 odz-h-8 odz-object-cover odz-rounded">'),gE=te('<div class="odz-flex odz-items-center odz-gap-2 odz-border odz-rounded-lg odz-p-2"><!> <div class="odz-text-xs"><span> </span> <span class="odz-ml-2 odz-font-semibold"> </span></div></div>'),vE=te('<div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><span class="odz-text-gray-600 odz-font-bold"> </span> <span class="odz-text-xs"> </span></div>'),mE=te('<div class="odz-mt-3"></div>'),wE=te('<span class="odz-text-gray-600"> </span> <span class="odz-text-primary odz-font-semibold odz-ml-auto"> </span>',1),yE=te('<div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-bg-gray-50 odz-p-2 odz-rounded odz-mb-1"><span class="odz-font-medium"> </span> <!></div>'),bE=te('<div class="odz-mt-3"><div class="odz-text-sm odz-font-bold odz-text-gray-600 odz-mb-2"> </div> <!></div>'),_E=te('<span class="odz-text-sm odz-font-bold odz-text-gray-500"></span>'),BE=te('<span class="odz-text-sm odz-font-bold"> </span>'),xE=te('<div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div>'),zE=te('<div class="odz-flex odz-flex-col odz-gap-1"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div> <div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <!></div> <!></div> <div class="odz-flex odz-flex-col odz-items-end"><span class="odz-font-bold"> </span> <span class="odz-font-bold odz-text-lg"> </span></div>',1),CE=te('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border"><div class="odz-card-body odz-p-3"><div class="odz-flex odz-gap-4"><div class="odz-flex odz-flex-col odz-justify-between"><img class="odz-w-24 odz-h-24 odz-object-cover odz-rounded"> <!></div> <div class="odz-flex-1"><h2 class="odz-text-lg odz-font-bold"> </h2> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"></div> <!> <!> <div class="odz-flex odz-justify-between odz-items-center odz-mt-4 odz-pt-3 odz-border-t"></div></div></div></div></div>'),SE=te('<div class="odz-text-center odz-py-8 odz-text-gray-500">  .</div>'),EE=te('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50"><div class="odz-bg-white odz-rounded-lg odz-shadow-xl odz-max-w-md odz-w-full odz-mx-4"><div class="odz-px-6 odz-py-4 odz-border-b odz-border-gray-200"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-900">  </h3></div> <div class="odz-px-6 odz-py-4"><p class="odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-gray-900"> </span>() ?</p> <p class="odz-text-xs odz-text-gray-500 odz-mt-2">    .</p></div> <div class="odz-px-6 odz-py-4 odz-border-t odz-border-gray-200 odz-flex odz-gap-3 odz-justify-end"><button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-gray-700 odz-bg-white odz-border odz-border-gray-300 odz-rounded-lg hover:odz-bg-gray-50 odz-transition-colors"></button> <button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-white odz-bg-red-500 odz-rounded-lg hover:odz-bg-red-600 odz-transition-colors"></button></div></div></div>'),FE=te('<div class="odz-flex odz-flex-col odz-gap-4"><!></div> <!>',1);function bB(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t);let s=ft(e,"onSelectProduct",8),i=ft(e,"onDeleteProduct",8,void 0),a=ft(e,"isEditable",8,!1),A=Ie(!1),d=null,c=Ie("");function u(K){return K.title?K.title:!K.option_values||!Array.isArray(K.option_values)?K.id||"":K.option_values.map(H=>{var J;return((J=H.option_value)==null?void 0:J.value)||""}).join(" / ")}function h(K){const H=[];return K.parentTemplates&&H.push(K.parentTemplates.map(J=>J.name).join(" > ")),K.colors&&H.push(`${K.colors.length}`),H.join(" - ")}function f(K){var H,J;d=K,B(c,((J=(H=o().products[K])==null?void 0:H.product)==null?void 0:J.title)||" "),B(A,!0)}async function g(){if(d===null)return;const K=d;B(A,!1),d=null,B(c,""),i()?await i()(K):qt(St,dt(o).products=o().products.filter((H,J)=>J!==K),dt(o))}function m(){B(A,!1),d=null,B(c,"")}Kr();var y=FE(),b=pt(y),S=w(b);{var F=K=>{var H=Dt(),J=pt(H);Yt(J,1,()=>o().products,Ar,(we,O,D)=>{var Z=CE(),ie=w(Z),de=w(ie),ne=w(de),fe=w(ne),$=z(fe,2);{var q=X=>{var R=fE(),he=w(R),xe=z(he,2);st("click",he,()=>s()(D)),st("click",xe,()=>f(D)),T(X,R)};Ee($,X=>{a()&&X(q)})}var se=z(ne,2),Ae=w(se),x=w(Ae),E=z(Ae,2);Yt(E,5,()=>l(O).variants,Ar,(X,R)=>{var he=gE(),xe=w(he);{var Be=ye=>{var le=pE();Me(Ce=>{rr(le,"src",l(R).thumbnail),rr(le,"alt",Ce)},[()=>u(l(R))],ot),T(ye,le)};Ee(xe,ye=>{l(R).thumbnail&&ye(Be)})}var Le=z(xe,2),Y=w(Le),k=w(Y),pe=z(Y,2),ze=w(pe);Me(ye=>{Ue(k,ye),Ue(ze,`${l(R).quantity??""}`)},[()=>u(l(R))],ot),T(X,he)});var I=z(E,2);{var U=X=>{var R=mE();Yt(R,5,()=>l(O).prints,Ar,(he,xe)=>{var Be=vE(),Le=w(Be),Y=w(Le),k=z(Le,2),pe=w(k);Me(ze=>{Ue(Y,l(xe).title),Ue(pe,ze)},[()=>h(l(xe))],ot),T(he,Be)}),T(X,R)};Ee(I,X=>{l(O).prints&&l(O).prints.length>0&&X(U)})}var M=z(I,2);{var j=X=>{var R=bE(),he=z(w(R),2);Yt(he,1,()=>Object.entries(l(O).addons),Ar,(xe,Be)=>{let Le=()=>l(Be)[1];var Y=Dt();const k=ot(()=>l(O).addonProductsMap[Le().productId]);var pe=pt(Y);{var ze=ye=>{var le=yE();const Ce=ot(()=>l(k).variants.find(_e=>_e.id===Le().variantId));var ke=w(le),ce=w(ke),ee=z(ke,2);{var N=_e=>{var ve=wE(),Se=pt(ve),me=w(Se),Ne=z(Se,2),De=w(Ne);Me(qe=>{Ue(me,`- ${l(Ce).title||" "}`),Ue(De,` ${qe??""}`)},[()=>gr(l(Ce).prices[0].amount)],ot),T(_e,ve)};Ee(ee,_e=>{l(Ce)&&_e(N)})}Me(()=>Ue(ce,l(k).title)),T(ye,le)};Ee(pe,ye=>{l(k)&&ye(ze)})}T(xe,Y)}),T(X,R)};Ee(M,X=>{l(O).addons&&Object.keys(l(O).addons).length>0&&l(O).addonProductsMap&&X(j)})}var V=z(M,2);Yt(V,5,()=>[l(O)],Ar,(X,R)=>{var he=zE();const xe=ot(()=>l(R).productAmount||(l(R).variants||[]).reduce((Qe,rt)=>Qe+rt.prices[0].amount*rt.quantity,0)),Be=ot(()=>l(R).printAmount||(l(R).prints||[]).reduce((Qe,rt)=>Qe+(rt.price||0),0)),Le=ot(()=>l(R).addonAmount||0),Y=ot(()=>l(R).totalAmount||l(xe)+l(Be)+l(Le)),k=ot(()=>l(R).prints&&l(R).prints.length>0),pe=ot(()=>l(R).simplePrints&&l(R).simplePrints.length>0),ze=ot(()=>l(R).print_type==="simple"&&l(pe)||l(pe)&&!l(k)),ye=ot(()=>!l(k)&&!l(pe));var le=pt(he),Ce=w(le),ke=z(w(Ce),2),ce=w(ke),ee=z(Ce,2),N=z(w(ee),2);{var _e=Qe=>{var rt=_E();T(Qe,rt)},ve=Qe=>{var rt=BE(),tt=w(rt);Me(Te=>Ue(tt,`${Te??""}`),[()=>gr(l(Be))],ot),T(Qe,rt)};Ee(N,Qe=>{l(ze)||l(ye)?Qe(_e):Qe(ve,!1)})}var Se=z(ee,2);{var me=Qe=>{var rt=xE(),tt=z(w(rt),2),Te=w(tt);Me(ge=>Ue(Te,`${ge??""}`),[()=>gr(l(Le))],ot),T(Qe,rt)};Ee(Se,Qe=>{l(Le)>0&&Qe(me)})}var Ne=z(le,2),De=z(w(Ne),2),qe=w(De);Me((Qe,rt)=>{Ue(ce,`${Qe??""}`),Ue(qe,`${rt??""}`)},[()=>gr(l(xe)),()=>gr(l(Y))],ot),T(X,he)}),Me(()=>{rr(fe,"src",l(O).product.thumbnail),rr(fe,"alt",l(O).product.title),Ue(x,l(O).product.title)}),T(we,Z)}),T(K,H)},P=K=>{var H=SE();T(K,H)};Ee(S,K=>{o().products&&o().products.length>0?K(F):K(P,!1)})}var L=z(b,2);{var re=K=>{var H=EE(),J=w(H),we=z(w(J),2),O=w(we),D=w(O),Z=w(D),ie=z(we,2),de=w(ie),ne=z(de,2);Me(()=>Ue(Z,l(c))),st("click",de,m),st("click",ne,g),T(K,H)};Ee(L,K=>{l(A)&&K(re)})}T(n,y),Rr(),r()}var IE=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><form method="dialog"><button class="odz-btn"></button></form></div></div></dialog>');function Wd(n,e){jr(e,!1);let t=ft(e,"isOpen",12),r=ft(e,"message",12),o=ft(e,"title",8,""),s=ft(e,"onClose",8,void 0);function i(){t(!1),r(""),s()&&s()()}Kr();var a=Dt(),A=pt(a);{var d=c=>{var u=IE(),h=w(u),f=w(h),g=w(f),m=z(f,2),y=w(m),b=z(m,2),S=w(b),F=w(S);Me(()=>{Ue(g,o()),Ue(y,r())}),st("click",F,i),T(c,u)};Ee(A,c=>{t()&&c(d)})}T(n,a),Rr()}var QE=te('<div class="odz-fixed odz-inset-0 odz-bg-base-100 odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-rounded-lg odz-p-8 odz-flex odz-flex-col odz-items-center odz-gap-4"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></span> <p class="odz-text-base-content odz-font-medium"> </p></div></div>');function Xd(n,e){let t=ft(e,"isLoading",8,!1),r=ft(e,"message",8,"...");var o=Dt(),s=pt(o);{var i=a=>{var A=QE(),d=w(A),c=z(w(d),2),u=w(c);Me(()=>Ue(u,r())),T(a,A)};Ee(s,a=>{t()&&a(i)})}T(n,o)}var UE=te("<span> <span></span></span>"),TE=te('<div class="odz-flex odz-items-center odz-gap-2 odz-w-full odz-justify-center"><!> <span> <span></span></span> <!></div>');function _B(n,e){jr(e,!1);const t=Ie();let r=ft(e,"originalPrice",8),o=ft(e,"finalPrice",8),s=ft(e,"hasDiscount",8,!1),i=ft(e,"size",8,"md"),a=ft(e,"showOriginal",8,!0);Jt(()=>zn(i()),()=>{B(t,{sm:{original:"odz-text-sm",final:"odz-text-sm odz-font-semibold",currency:"odz-text-xs"},md:{original:"odz-text-base",final:"odz-text-lg odz-font-bold",currency:"odz-text-sm"},lg:{original:"odz-text-lg",final:"odz-text-xl odz-font-bold",currency:"odz-text-base"}}[i()])}),Zn(),Kr();var A=TE(),d=w(A);{var c=y=>{var b=UE(),S=w(b),F=z(S);Me(P=>{Fr(b,`odz-text-gray-500 odz-line-through ${l(t).original??""}`),Ue(S,P),Fr(F,g0(l(t).currency))},[()=>r().toLocaleString()],ot),T(y,b)};Ee(d,y=>{s()&&a()&&r()!==o()&&y(c)})}var u=z(d,2),h=w(u),f=z(h),g=z(u,2);{var m=y=>{var b=Dt();const S=ot(()=>Math.round((r()-o())/r()*100));var F=pt(b);{var P=L=>{};Ee(F,L=>{l(S)>0&&L(P)})}T(y,b)};Ee(g,y=>{s()&&r()!==o()&&y(m)})}Me(y=>{Fr(u,`odz-text-gray-900 ${l(t).final??""}`),Ue(h,y),Fr(f,g0(l(t).currency))},[()=>o().toLocaleString()],ot),T(n,A),Rr()}var LE=te('<img class="odz-w-8 odz-h-8 odz-object-cover odz-mb-1">'),PE=te('<span class="odz-ml-1"></span>'),kE=te('<span class="odz-ml-1"></span>'),OE=te("<button><!> <span> </span> <!></button>"),DE=te('<div class="odz-flex odz-flex-col odz-gap-2 mb-4"><h3 class="odz-font-bold odz-text-sm"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),NE=te('<img class="odz-w-10 odz-h-10 odz-rounded odz-object-cover">'),ME=te('<!> <div class="odz-inline-flex odz-items-center odz-justify-center odz-w-5 odz-h-5 odz-bg-red-500 odz-text-white odz-rounded-full odz-text-xs odz-font-bold odz-flex-shrink-0" title=" ">%</div>',1),HE=te('<span class="odz-text-xs"> </span>'),jE=te('<div class="odz-flex odz-flex-col odz-border odz-rounded odz-overflow-hidden"><div class="odz-bg-gray-50 odz-px-3 odz-py-2 odz-border-b"><span class="odz-text-xs odz-font-medium odz-text-center odz-block"> </span></div> <div class="odz-flex odz-flex-col odz-p-3 odz-gap-2"><div class="odz-text-center"><div class="odz-flex odz-items-center odz-justify-center odz-gap-1"><!></div></div> <div class="odz-flex odz-items-center odz-border odz-rounded odz-mt-1"><button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">-</button> <input type="number" class="odz-input odz-input-sm odz-w-full odz-text-center odz-border-x-0 odz-border-y focus:odz-outline-none focus:odz-ring-0 focus:odz-border-x-0 focus:odz-border-y" min="0"> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">+</button></div></div></div>'),RE=te('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),qE=te('<p class="odz-text-sm odz-text-gray-500">    ( ) .</p>'),KE=te('<div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-bg-gray-100 odz-p-2 odz-rounded"><!> <h3 class="odz-font-semibold odz-text-base"> </h3></div> <!></div>'),$E=te('<div class="odz-flex odz-flex-col odz-gap-6 mt-4"></div>'),VE=te('<img class="odz-w-16 odz-h-16 odz-object-cover odz-rounded">'),GE=te('<p class="odz-text-sm odz-text-gray-600 odz-mt-1"> </p>'),WE=te('<div class="odz-text-sm odz-font-semibold odz-text-primary"> </div>'),XE=te('<div role="button" tabindex="0"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><input type="radio" class="odz-radio odz-radio-primary odz-radio-sm"> <span class="odz-text-sm odz-font-medium"> </span></div> <!></div>'),YE=te('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 odz-gap-3"></div>'),JE=te('<div class="odz-border odz-rounded-lg odz-p-4 odz-bg-base-100"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-3"><!> <div><h5 class="odz-font-medium odz-text-base"> </h5> <!></div></div> <!></div>'),ZE=te('<div class="odz-flex odz-flex-col odz-gap-4"><h4 class="odz-font-semibold odz-text-base odz-text-gray-700"> </h4> <!></div>'),eF=te('<div class="odz-flex odz-flex-col odz-gap-6 odz-mt-8"><h3 class="odz-font-bold odz-text-lg odz-border-b odz-pb-2"> </h3> <!></div>'),tF=te('<div class="odz-flex odz-justify-end odz-mt-6"><button class="odz-btn odz-btn-accent odz-w-full"></button></div>'),rF=te('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <div class="odz-card-actions odz-justify-end"></div></div></div> <!>  <div class="odz-bg-yellow-100 odz-p-2 odz-rounded odz-text-xs odz-mb-2"><strong>  :</strong><br> <br> <br> <br> </div> <!> <!> <!>',1),nF=te('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!> <!>',1);function oF(n,e){var Ae;jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=()=>Xr(Ls,"$shopStore",t);let i=ft(e,"step",12,0),a=ft(e,"productId",8),A=Ie(null),d=Ie(!1),c=Ie(""),u=Ie(""),h=Ie(!1),f=Ie([]),g=Ie({}),m=Ie({}),y=Ie(((Ae=o().products[o().index])==null?void 0:Ae.variants.map(x=>({...x})))||[]),b=Ie({}),S=Ie(null),F=Ie({}),P=Ie([]),L=Ie({});function re(x,E){console.log(" togglePenultimateSelection :",{optionId:x,value:E,penultimateOptionId:l(S)}),!l(S)&&l(A)&&l(A).options.length>=2&&(B(S,l(A).options[l(A).options.length-2].id),console.log(" penultimateOptionId :",l(S))),x!==l(S)&&console.log(" optionId :",{optionId:x,penultimateOptionId:l(S)}),fr(b,l(b)[x]=E),B(b,{...l(b)});const I=l(P).indexOf(E);if(console.log("  expandedPenultimateValues:",l(P),"index:",I),I===-1)if(B(P,[...l(P),E]),console.log("    expandedPenultimateValues:",l(P)),!l(L)[E]||l(L)[E].length===0){console.log(" variants  :",{value:E,optionId:x,penultimateOptionId:l(S)});const U=l(A).variants.filter(M=>M.option_values?M.option_values.some(V=>{if(V.option_id&&V.value){const X=V.option_id===x&&V.value===E;return X&&console.log("   :",{variantId:M.id,ov:V}),X}else if(V.option_value&&V.option_value.option_id){const X=V.option_value.option_id===x&&V.option_value.value===E;return X&&console.log("   :",{variantId:M.id,ov:V}),X}return!1}):(console.log(" variant.option_values :",M.id),!1));console.log("  variants:",{value:E,count:U.length,variants:U.map(M=>({id:M.id,title:M.title}))}),fr(L,l(L)[E]=U),B(L,{...l(L)}),U.forEach(M=>{l(y).some(j=>j.id===M.id)||B(y,[...l(y),{...M,quantity:0}])})}else console.log("  variants :",{value:E,count:l(L)[E].length});else B(P,l(P).filter(U=>U!==E)),console.log("    expandedPenultimateValues:",l(P));B(P,[...l(P)]),B(L,{...l(L)}),console.log(" togglePenultimateSelection :",{expandedPenultimateValues:l(P),variantsByGroup:Object.keys(l(L)),hasExpanded:l(P).length>0}),setTimeout(()=>{console.log(" 1   :",{expandedPenultimateValues:l(P).length,variantsByGroupKeys:Object.keys(l(L))})},1e3)}function K(x,E){var U;const I=((U=l(A))==null?void 0:U.options.findIndex(M=>M.id===x))??-1;if(!(!l(A)||I===-1||I>=l(A).options.length-1)){for(let M=I+1;M<l(A).options.length;M++)delete l(b)[l(A).options[M].id];fr(b,l(b)[x]=E),B(b,{...l(b)}),B(P,[]),B(L,{}),l(S)&&B(y,l(y).filter(M=>!M.option_values.some(j=>j.option_value.option_id===l(S))||(M.quantity||0)>0))}}function H(x){B(y,l(y).map(E=>E.id===x?{...E,quantity:(E.quantity||0)+1}:E))}function J(x){B(y,l(y).map(E=>E.id===x&&(E.quantity||0)>0?{...E,quantity:(E.quantity||0)-1}:E))}function we(){const x=l(y).filter(I=>(I.quantity||0)>0);if(x.length===0){B(d,!0),B(c," "),B(u,"1    .");return}const E=o().products[o().index];E&&(qt(St,dt(o).products[o().index]={...E,variants:x,quantity:x.reduce((I,U)=>I+(U.quantity||0),0)},dt(o)),St.updateTotalAmounts()),i(2)}async function O(){var U,M;if(!((U=l(A))!=null&&U.quantity_discounts)){B(F,{});return}const x=l(y).reduce((j,V)=>j+(V.quantity||0),0);let E=null;if(x>0){const j=((M=l(y).find(V=>(V.quantity||0)>0))==null?void 0:M.prices[0].amount)||0;E=vi(x,j,l(A).quantity_discounts)}const I={};for(const j of l(y))(j.quantity||0)>0&&(E!=null&&E.hasDiscount)&&(I[j.id]=E);B(F,I)}let D=Ie(null);En(async()=>{var x;B(h,!0);try{if(B(A,await Du(a(),s().id)),l(A)&&(B(f,await Nu(l(A).id)),B(m,{}),l(f).forEach(E=>{E.items.forEach(I=>{I.addon_product.variants&&I.addon_product.variants.length>0&&fr(m,l(m)[I.addon_product.id]={price:I.addon_product.variants[0].prices[0].amount,title:I.addon_product.title,variants:I.addon_product.variants})})}),(x=o().products[o().index])!=null&&x.addons)){const E=o().products[o().index].addons;B(g,{}),Object.entries(E).forEach(([I,U])=>{typeof U=="object"&&U.productId&&U.variantId?fr(g,l(g)[I]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&fr(g,l(g)[I]={productId:U,variantId:""})}),B(g,{...l(g)})}if(l(A)&&l(A).options.length>0&&(l(A).options.length>=2?(B(S,l(A).options[l(A).options.length-2].id),console.log(" penultimateOptionId :",{penultimateOptionId:l(S),optionCount:l(A).options.length,allOptions:l(A).options.map(E=>({id:E.id,title:E.title}))})):console.log("  2 :",l(A).options.length)),o().products[o().index]&&o().products[o().index].variants.length>0){qt(St,dt(o).products[o().index].product=l(A),dt(o)),B(y,o().products[o().index].variants.map(I=>({...I})));const E=o().products[o().index].addons||{};if(B(g,{}),Object.entries(E).forEach(([I,U])=>{typeof U=="object"&&U.productId&&U.variantId?fr(g,l(g)[I]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&fr(g,l(g)[I]={productId:U,variantId:""})}),l(A)&&l(A).options.length>0){const I=l(y).filter(U=>(U.quantity||0)>0);if(I.length>0){const U=l(A).options.map(M=>M.id);if(l(A).options.length>=2){B(S,l(A).options[l(A).options.length-2].id);const M=[];if(I.forEach(j=>{if(j.title){const V=j.title.split(" / ");if(V.length>0){const X=V[0];M.includes(X)||M.push(X)}}j.option_values&&j.option_values.forEach(V=>{V.option_id&&V.value?V.option_id===l(S)&&(M.includes(V.value)||M.push(V.value)):V.option_value&&V.option_value.option_id&&V.option_value.option_id===l(S)&&(M.includes(V.option_value.value)||M.push(V.option_value.value))})}),M.length>0)M.forEach(j=>{re(l(S),j)});else{const j=[];I.forEach(V=>{if(V.title){const X=V.title.split(" / ");if(X.length>0){const R=X[0].trim();j.includes(R)||j.push(R)}}}),j.length>0?j.forEach(V=>{const X=l(A).options[l(A).options.length-2].values.find(R=>R.value.toLowerCase()===V.toLowerCase());if(X)re(l(S),X.value);else{const R=l(A).options[l(A).options.length-2].values.filter(he=>he.value.toLowerCase().includes(V.toLowerCase())||V.toLowerCase().includes(he.value.toLowerCase()));R.length>0&&R.forEach(he=>{re(l(S),he.value)})}}):l(A).options[l(A).options.length-2].values.forEach(V=>{re(l(S),V.value)})}}else l(A).options.length}}}else l(A)&&qt(St,dt(o).products=[...o().products,{product:l(A),variants:[],quantity:0,prints:[],addons:{},addonProductsMap:l(m)}],dt(o));setTimeout(()=>{St.updateTotalAmounts()},100)}catch(E){console.error("Product component  :",E)}finally{B(h,!1)}});function Z(x,E,I){if(!I||I.trim()===""){console.error("Invalid variantId provided:",I);return}fr(g,l(g)[x]={productId:E,variantId:I}),B(g,{...l(g)});const U=o().products[o().index];U&&(qt(St,dt(o).products[o().index]={...U,addons:l(g),addonProductsMap:l(m)},dt(o)),St.updateTotalAmounts())}function ie(x){return x?x.replace(/<[^>]*>/g,"").trim():""}Jt(()=>(o(),l(g)),()=>{var x;if((x=o().products[o().index])!=null&&x.addons&&Object.keys(o().products[o().index].addons).length>0&&Object.keys(l(g)).length===0){const E=o().products[o().index].addons;Object.entries(E).forEach(([I,U])=>{typeof U=="object"&&U.productId&&U.variantId&&fr(g,l(g)[I]={productId:U.productId,variantId:U.variantId})}),B(g,{...l(g)})}}),Jt(()=>(l(y),l(A),l(D),o(),l(g),l(m),St),()=>{l(y)&&l(A)&&(l(D)&&clearTimeout(l(D)),B(D,setTimeout(()=>{const x=o().products[o().index];if(x){const E=l(y).reduce((M,j)=>M+(j.quantity||0),0),I=x.quantity||0,U=l(y).filter(M=>(M.quantity||0)>0);qt(St,dt(o).products[o().index]={...x,variants:U,quantity:E,addons:l(g),addonProductsMap:l(m)},dt(o)),O(),E!==I&&x.prints&&x.prints.length>0&&St.calculatePrintPrice(o().index),St.updateTotalAmounts()}},100)))}),Zn(),Kr();var de=nF(),ne=pt(de),fe=w(ne);{var $=x=>{var E=rF(),I=pt(E),U=w(I),M=w(U),j=z(U,2),V=w(j),X=w(V),R=z(I,2);Yt(R,1,()=>l(A).options,Ar,(ke,ce,ee)=>{var N=Dt(),_e=pt(N);{var ve=Se=>{var me=DE(),Ne=w(me),De=w(Ne),qe=z(Ne,2);Yt(qe,5,()=>l(ce).values,Ar,(Qe,rt)=>{var tt=OE();const Te=ot(()=>ee===l(A).options.length-2),ge=ot(()=>l(Te)&&l(P).includes(l(rt).value)),Oe=ot(()=>l(Te)?l(ge):l(b)[l(ce).id]===l(rt).value);var He=w(tt);{var je=Je=>{var ct=LE();Me(()=>{rr(ct,"src",l(rt).image),rr(ct,"alt",l(rt).value)}),T(Je,ct)};Ee(He,Je=>{l(rt).image&&Je(je)})}var at=z(He,2),At=w(at),it=z(at,2);{var Re=Je=>{var ct=PE();T(Je,ct)},Xe=Je=>{var ct=Dt(),_t=pt(ct);{var lt=et=>{var Qt=kE();T(et,Qt)};Ee(_t,et=>{l(Te)&&et(lt)},!0)}T(Je,ct)};Ee(it,Je=>{l(Te)&&l(ge)?Je(Re):Je(Xe,!1)})}Me(()=>{Fr(tt,`odz-btn odz-btn-outline odz-h-auto odz-min-h-10 odz-border-gray-300 odz-w-44 odz-p-2 odz-text-xs ${(l(Oe)?"odz-border-2 odz-border-gray-800":"")??""}`),Ue(At,l(rt).value)}),st("click",tt,()=>{var Je;console.log("   :",{optionTitle:l(ce).title,optionId:l(ce).id,value:l(rt).value,isPenultimateOption:l(Te),index:ee,totalOptions:(Je=l(A))==null?void 0:Je.options.length}),l(Te)?re(l(ce).id,l(rt).value):K(l(ce).id,l(rt).value)}),T(Qe,tt)}),Me(()=>Ue(De,l(ce).title)),T(Se,me)};Ee(_e,Se=>{ee<l(A).options.length-1&&Se(ve)})}T(ke,N)});var he=z(R,2),xe=z(w(he),2),Be=z(xe,2),Le=z(Be,2),Y=z(Le,2),k=z(he,2);{var pe=ke=>{var ce=$E();Yt(ce,5,()=>l(P),ee=>ee,(ee,N)=>{var _e=KE();const ve=ot(()=>l(L)[l(N)]||[]),Se=ot(()=>{var ge;return(ge=l(A).options[l(A).options.length-2])==null?void 0:ge.values.find(Oe=>Oe.value===l(N))});var me=w(_e),Ne=w(me);{var De=ge=>{var Oe=NE();Me(()=>{rr(Oe,"src",l(Se).image),rr(Oe,"alt",l(N))}),T(ge,Oe)};Ee(Ne,ge=>{var Oe;(Oe=l(Se))!=null&&Oe.image&&ge(De)})}var qe=z(Ne,2),Qe=w(qe),rt=z(me,2);{var tt=ge=>{var Oe=RE();Yt(Oe,5,()=>l(ve),He=>He.id,(He,je)=>{var at=jE();const At=ot(()=>l(y).find(xt=>xt.id===l(je).id)),it=ot(()=>{var xt;return((xt=l(At))==null?void 0:xt.quantity)||0}),Re=ot(()=>{var xt;return((xt=l(je).option_values.find(Ut=>Ut.option_value.option_id===l(A).options[l(A).options.length-1].id))==null?void 0:xt.option_value.value)||"N/A"}),Xe=ot(()=>l(F)[l(je).id]);var Je=w(at),ct=w(Je),_t=w(ct),lt=z(Je,2),et=w(lt),Qt=w(et),vt=w(Qt);{var Nt=xt=>{var Ut=ME(),Kt=pt(Ut);_B(Kt,{get originalPrice(){return l(je).prices[0].amount},get finalPrice(){return l(Xe).discountedPrice},hasDiscount:!0,size:"sm"}),T(xt,Ut)},mt=xt=>{var Ut=HE(),Kt=w(Ut);Me(Ot=>Ue(Kt,`${Ot??""}`),[()=>gr(l(je).prices[0].amount)],ot),T(xt,Ut)};Ee(vt,xt=>{var Ut;(Ut=l(Xe))!=null&&Ut.hasDiscount&&l(it)>0?xt(Nt):xt(mt,!1)})}var Lt=z(et,2),Pt=w(Lt),zt=z(Pt,2),Et=z(zt,2);Me(()=>{Ue(_t,l(Re)),Pt.disabled=l(it)<=0,Wm(zt,l(it))}),st("click",Pt,()=>J(l(je).id)),st("input",zt,xt=>{const Ut=parseInt(xt.target.value)||0;B(y,l(y).map(Kt=>Kt.id===l(je).id?{...Kt,quantity:Ut>=0?Ut:0}:Kt))}),st("click",Et,()=>H(l(je).id)),T(He,at)}),T(ge,Oe)},Te=ge=>{var Oe=qE();T(ge,Oe)};Ee(rt,ge=>{l(ve).length>0?ge(tt):ge(Te,!1)})}Me(()=>Ue(Qe,l(N))),T(ee,_e)}),T(ke,ce)};Ee(k,ke=>{l(P).length>0&&ke(pe)})}var ze=z(k,2);{var ye=ke=>{var ce=eF(),ee=z(w(ce),2);Yt(ee,1,()=>l(f),N=>N.id,(N,_e)=>{var ve=ZE(),Se=w(ve),me=w(Se),Ne=z(Se,2);Yt(Ne,1,()=>l(_e).items,De=>De.id,(De,qe)=>{var Qe=JE(),rt=w(Qe),tt=w(rt);{var Te=Re=>{var Xe=VE();Me(()=>{rr(Xe,"src",l(qe).addon_product.thumbnail),rr(Xe,"alt",l(qe).addon_product.title)}),T(Re,Xe)};Ee(tt,Re=>{l(qe).addon_product.thumbnail&&Re(Te)})}var ge=z(tt,2),Oe=w(ge),He=w(Oe),je=z(Oe,2);{var at=Re=>{var Xe=GE(),Je=w(Xe);Me(ct=>Ue(Je,ct),[()=>ie(l(qe).addon_product.description)],ot),T(Re,Xe)};Ee(je,Re=>{l(qe).addon_product.description&&Re(at)})}var At=z(rt,2);{var it=Re=>{var Xe=YE();Yt(Xe,5,()=>l(qe).addon_product.variants,Je=>Je.id,(Je,ct)=>{var _t=XE();const lt=ot(()=>l(g)[l(_e).id]),et=ot(()=>{var zt,Et;return((zt=l(lt))==null?void 0:zt.productId)===l(qe).addon_product.id&&((Et=l(lt))==null?void 0:Et.variantId)===l(ct).id});var Qt=w(_t),vt=w(Qt),Nt=z(vt,2),mt=w(Nt),Lt=z(Qt,2);{var Pt=zt=>{var Et=WE(),xt=w(Et);Me(Ut=>Ue(xt,` ${Ut??""}`),[()=>gr(l(ct).prices[0].amount)],ot),T(zt,Et)};Ee(Lt,zt=>{l(ct).prices&&l(ct).prices.length>0&&zt(Pt)})}Me(zt=>{Fr(_t,`odz-border odz-rounded odz-p-3 odz-cursor-pointer odz-transition-all odz-duration-200 ${(l(et)?"odz-border-primary odz-bg-primary/5":"odz-border-gray-300 hover:odz-border-gray-400")??""}`),rr(vt,"name",`addon-${l(_e).id??""}`),mu(vt,l(et)),Ue(mt,zt)},[()=>l(ct).title||` ${l(ct).id.substring(0,4)}`],ot),st("change",vt,()=>Z(l(_e).id,l(qe).addon_product.id,l(ct).id)),st("click",_t,()=>Z(l(_e).id,l(qe).addon_product.id,l(ct).id)),st("keydown",_t,zt=>zt.key==="Enter"&&Z(l(_e).id,l(qe).addon_product.id,l(ct).id)),T(Je,_t)}),T(Re,Xe)};Ee(At,Re=>{l(qe).addon_product.variants&&l(qe).addon_product.variants.length>0&&Re(it)})}Me(()=>Ue(He,l(qe).addon_product.title)),T(De,Qe)}),Me(()=>Ue(me,l(_e).name)),T(N,ve)}),T(ke,ce)};Ee(ze,ke=>{l(f).length>0&&ke(ye)})}var le=z(ze,2);{var Ce=ke=>{var ce=tF(),ee=w(ce);st("click",ee,()=>we()),T(ke,ce)};Ee(le,ke=>{l(y).filter(ce=>(ce.quantity||0)>0).length>0&&ke(Ce)})}Me(ke=>{var ce;rr(M,"src",l(A).thumbnail),rr(M,"alt",l(A).title),Ue(X,l(A).title),Ue(xe,` expandedPenultimateValues.length: ${l(P).length??""}`),Ue(Be,` expandedPenultimateValues: ${ke??""}`),Ue(Le,` penultimateOptionId: ${l(S)??""}`),Ue(Y,`  : ${((ce=l(A))==null?void 0:ce.options.length)||0}`)},[()=>JSON.stringify(l(P))],ot),T(x,E)};Ee(fe,x=>{l(A)&&x($)})}var q=z(ne,2);Wd(q,{get isOpen(){return l(d)},set isOpen(x){B(d,x)},get title(){return l(c)},set title(x){B(c,x)},get message(){return l(u)},set message(x){B(u,x)},$$legacy:!0});var se=z(q,2);Xd(se,{get isLoading(){return l(h)},set isLoading(x){B(h,x)},$$legacy:!0}),T(n,de),Rr(),r()}const Jl={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1,currentSessionId:`session-${Date.now()}-${Math.random().toString(36).substring(2)}`,sessionStorageKey:"extended-product-data-cache"};function sF(){const{subscribe:n,set:e,update:t}=vl(Jl),r={save(o,s){if(!(typeof window>"u"))try{const i=`${Jl.sessionStorageKey}-${o}`,a={...s,lastSavedToSession:Date.now()};window.sessionStorage.setItem(i,JSON.stringify(a))}catch(i){console.warn("   :",i)}},restore(o){if(typeof window>"u")return null;try{const s=`${Jl.sessionStorageKey}-${o}`,i=window.sessionStorage.getItem(s);if(i)return JSON.parse(i)}catch(s){console.warn("   :",s)}return null},clear(o){if(!(typeof window>"u"))if(o){const s=`${Jl.sessionStorageKey}-${o}`;window.sessionStorage.removeItem(s)}else Object.keys(window.sessionStorage).forEach(s=>{s.startsWith(Jl.sessionStorageKey)&&window.sessionStorage.removeItem(s)})}};return{subscribe:n,set:e,update:t,async loadIntegratedProductData(o,s){var d;const i={subscribe:n},a=pn(i),A=r.restore(o);if((d=a.productDataCache[o])!=null&&d.isLoaded||A!=null&&A.isLoaded){const c=A||a.productDataCache[o];return A&&t(u=>({...u,productDataCache:{...u.productDataCache,[o]:c}})),c}if(a.loadingProducts.has(o))return new Promise((c,u)=>{const h=setInterval(()=>{var g;const f=pn(i);f.loadingProducts.has(o)||(clearInterval(h),(g=f.productDataCache[o])!=null&&g.isLoaded?c(f.productDataCache[o]):u(new Error("   ")))},100)});t(c=>({...c,loadingProducts:new Set([...c.loadingProducts,o]),isGlobalLoading:!0,productDataCache:{...c.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0,sessionId:c.currentSessionId}}}));try{const[c,u]=await Promise.all([Du(o,s),Nu(o)]);if(!c)throw new Error("   ");const h={};u.forEach(g=>{g.items.forEach(m=>{m.addon_product.variants&&m.addon_product.variants.length>0&&(h[m.addon_product.id]={price:m.addon_product.variants[0].prices[0].amount,title:m.addon_product.title,variants:m.addon_product.variants,description:m.addon_product.description,thumbnail:m.addon_product.thumbnail})})});const f={id:o,product:c,addons:u,process:c.process,addonProductsMap:h,productSelection:A==null?void 0:A.productSelection,printSelection:A==null?void 0:A.printSelection,addonSelection:A==null?void 0:A.addonSelection,isLoaded:!0,isLoading:!1,sessionId:a.currentSessionId};return t(g=>{const m=new Set(g.loadingProducts);return m.delete(o),{...g,loadingProducts:m,isGlobalLoading:m.size>0,productDataCache:{...g.productDataCache,[o]:f}}}),r.save(o,f),f}catch(c){throw console.error("   :",c),t(u=>{const h=new Set(u.loadingProducts);return h.delete(o),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:c instanceof Error?c.message:"   ",sessionId:u.currentSessionId}}}}),c}},updateProductSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedColors:[],quantityByVariant:{},variantsByColor:{},totalQuantity:0,isCompleted:!1,...a.productSelection,...s,lastUpdated:A},c={...a,productSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},updatePrintSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,currentMethod:"selection",isCompleted:!1,...a.printSelection,...s,lastUpdated:A},c={...a,printSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},selectPrintMethod(o,s){this.updatePrintSelection(o,{currentMethod:s,lastUpdated:Date.now()})},completePrintSelection(o){this.updatePrintSelection(o,{isCompleted:!0,lastUpdated:Date.now()})},updateAddonSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedAddons:{},isCompleted:!1,...a.addonSelection,...s,lastUpdated:A},c={...a,addonSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},getProductData(o){return pn({subscribe:n}).productDataCache[o]||null},restoreFromSession(o){const s=r.restore(o);return s&&t(i=>({...i,productDataCache:{...i.productDataCache,[o]:s}})),s},saveToSession(o){const a=pn({subscribe:n}).productDataCache[o];a&&r.save(o,a)},clearProductData(o){o?(r.clear(o),t(s=>{const i={...s.productDataCache};return delete i[o],{...s,productDataCache:i}})):(r.clear(),t(s=>({...s,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1})))},updateProduct(o,s){t(i=>{const A={...i.productDataCache[o]||{id:o,product:s.product,addons:s.addons,addonProductsMap:{},isLoaded:!0,isLoading:!1,sessionId:i.currentSessionId},product:s.product,addons:s.addons,isLoaded:!0,isLoading:!1};return r.save(o,A),{...i,productDataCache:{...i.productDataCache,[o]:A}}})},hasProductSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.productSelection)!=null&&i.isCompleted)},hasPrintSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.printSelection)!=null&&i.isCompleted)},hasAddonSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.addonSelection)!=null&&i.isCompleted)},reset(){console.log(" Extended Product Data Store  "),r.clear(),e(Jl),console.log(" Extended Product Data Store  ")}}}const Hn=sF();class iF{constructor(e){this.isEnabled=!0,this.sessionId=e}log(e,t,r){if(!this.isEnabled)return;const o=new Date().toISOString();`${this.sessionId}${o}`}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}function aF(n){const e=Date.now().toString(36)+Math.random().toString(36).substr(2);return{productId:n,productSelection:null,printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:e}}function AF(){const{subscribe:n,set:e,update:t}=vl(null);let r=null,o=null,s=0;return{subscribe:n,set:e,update:t,saveToSessionStorage(i){!i||Date.now()-s<100||(o&&clearTimeout(o),o=setTimeout(()=>{try{[`fixedEstimate_${i.productId}`,`fixedEstimate_${i.productId}_${i.estimateId}`,`fixedEstimate_${i.productId}_${i.estimateId}_0`,`fixedEstimate_${i.productId}_${i.estimateId}_1`,`fixedEstimate_${i.productId}_${i.estimateId}_2`,`fixedEstimate_${i.productId}_${i.estimateId}_3`,`fixedEstimate_${i.productId}_${i.estimateId}_4`,`fixedEstimate_${i.productId}_${i.estimateId}_5`,`fixedEstimate_${i.productId}_0`,`fixedEstimate_${i.productId}_1`,`fixedEstimate_${i.productId}_2`,`fixedEstimate_${i.productId}_3`,`fixedEstimate_${i.productId}_4`,`fixedEstimate_${i.productId}_5`].forEach(c=>{try{sessionStorage.removeItem(c)}catch{}});let d=`fixedEstimate_${i.productId}`;i.estimateId&&(d+=`_${i.estimateId}`),i.idx!==void 0&&(d+=`_${i.idx}`),sessionStorage.setItem(d,JSON.stringify(i)),s=Date.now()}catch{}},10))},initialize(i,a,A){var h,f,g;let d=`fixedEstimate_${i}`;a&&(d+=`_${a}`),A!==void 0&&(d+=`_${A}`);let c=null;try{const m=sessionStorage.getItem(d);if(m){const y=JSON.parse(m);y.productId===i&&(c=y)}}catch{}const u=c||{...aF(i),estimateId:a,idx:A};r=new iF(u.sessionId),e(u),c?r.info("Fixed Estimate Store   ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId,selectedColors:((f=(h=u.productSelection)==null?void 0:h.selectedColors)==null?void 0:f.length)||0,totalQuantity:((g=u.productSelection)==null?void 0:g.totalQuantity)||0}):r.info("Fixed Estimate Store  ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId}),this.saveToSessionStorage(u)},reset(){r==null||r.info("Fixed Estimate Store "),e(null),r=null},setCurrentStep(i){t(a=>{if(!a)return a;r==null||r.info(" ",{from:a.currentStep,to:i});const A={...a,currentStep:i};return this.saveToSessionStorage(A),A})},updateProductSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.productSelection,c={productId:a.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,totalQuantity:c.totalQuantity,selectedColors:c.selectedColors.length}),{...a,productSelection:c}})},toggleColorSelection(i,a){t(A=>{var m;if(!A)return A;if(!A.productSelection){const y={productId:A.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,lastUpdated:Date.now()};A={...A,productSelection:y}}const d=[...A.productSelection.selectedColors],c={...A.productSelection.quantityByVariant},u={...A.productSelection.variantsByColor},h=d.indexOf(i);h===-1?(d.push(i),u[i]=a[i]||[],c[i]=c[i]||{},r==null||r.info("  ",{color:i,totalColors:d.length,variantCount:((m=a[i])==null?void 0:m.length)||0})):(d.splice(h,1),delete u[i],delete c[i],r==null||r.info("  ",{color:i,remainingColors:d.length}));const f=Object.values(c).reduce((y,b)=>y+Object.values(b).reduce((S,F)=>S+F,0),0),g={...A,productSelection:{...A.productSelection,selectedColors:d,quantityByVariant:c,variantsByColor:u,totalQuantity:f,lastUpdated:Date.now()}};return this.saveToSessionStorage(g),g})},updateQuantity(i,a,A){t(d=>{if(!d||!d.productSelection)return d;const c={...d.productSelection.quantityByVariant};c[i]||(c[i]={});const u=c[i][a]||0;c[i][a]=Math.max(0,A);const h=Object.values(c).reduce((g,m)=>g+Object.values(m).reduce((y,b)=>y+b,0),0);r==null||r.info(" ",{color:i,variantId:a,oldQuantity:u,newQuantity:c[i][a],totalQuantity:h,triggerDiscountUpdate:!0});const f={...d,productSelection:{...d.productSelection,quantityByVariant:c,totalQuantity:h,lastUpdated:Date.now(),needsDiscountRecalculation:!0}};return this.saveToSessionStorage(f),f})},updateVariantDiscounts(i){t(a=>{if(!a||!a.productSelection)return a;const A=a.productSelection.variantDiscounts||{},d=Object.keys(A).sort(),c=Object.keys(i).sort();if(!(JSON.stringify(d)!==JSON.stringify(c)||Object.keys(i).some(f=>JSON.stringify(A[f])!==JSON.stringify(i[f]))))return a;r==null||r.info("  ",{productId:a.productId,discountCount:Object.keys(i).length,changedVariants:Object.keys(i)});const h={...a,productSelection:{...a.productSelection,variantDiscounts:{...i},needsDiscountRecalculation:!1,lastUpdated:Date.now()}};return this.saveToSessionStorage(h),h})},completeProductSelection(){t(i=>{if(!i||!i.productSelection)return i;r==null||r.info("  ",{totalQuantity:i.productSelection.totalQuantity,selectedColors:i.productSelection.selectedColors.length});const a={...i,productSelection:{...i.productSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"print"};return this.saveToSessionStorage(a),a})},updatePrintSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.printSelection,c={productId:a.productId,currentMethod:"selection",isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,currentMethod:c.currentMethod}),{...a,printSelection:c}})},selectPrintMethod(i){t(a=>{if(!a)return a;r==null||r.info("  ",{method:i,productId:a.productId});const A={...a.printSelection,productId:a.productId,currentMethod:i,isCompleted:!1,lastUpdated:Date.now()},d={...a,printSelection:A};try{let c=`fixedEstimate_${d.productId}`;d.estimateId&&(c+=`_${d.estimateId}`),d.idx!==void 0&&(c+=`_${d.idx}`),sessionStorage.setItem(c,JSON.stringify(d)),console.log("    :",{method:i,storageKey:c,printSelection:d.printSelection})}catch(c){console.error("     :",c)}return d})},completePrintSelection(){t(i=>!i||!i.printSelection?i:(r==null||r.info("  ",{method:i.printSelection.currentMethod}),{...i,printSelection:{...i.printSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"addon"}))},updateAddonSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.addonSelection,c={productId:a.productId,selectedAddons:{},isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,addonCount:Object.keys(c.selectedAddons).length}),{...a,addonSelection:c}})},toggleAddonSelection(i,a,A){t(d=>{var g,m,y;if(!d)return d;const c={...((g=d.addonSelection)==null?void 0:g.selectedAddons)||{}};((m=c[i])==null?void 0:m.productId)===a&&((y=c[i])==null?void 0:y.variantId)===A?(delete c[i],r==null||r.info("  ",{addonId:i,productId:a,variantId:A,remainingAddons:Object.keys(c).length})):(c[i]={productId:a,variantId:A},r==null||r.info(" ",{addonId:i,productId:a,variantId:A,totalAddons:Object.keys(c).length}));const h={...d.addonSelection??{productId:d.productId,selectedAddons:{},isCompleted:!1,lastUpdated:Date.now()},productId:d.productId,selectedAddons:c,isCompleted:!1,lastUpdated:Date.now()},f={...d,addonSelection:h};try{const b=`fixedEstimate_${f.productId}`;sessionStorage.setItem(b,JSON.stringify(f))}catch{}return f})},completeAddonSelection(){t(i=>{var A;if(!i)return i;const a=Object.keys(((A=i.addonSelection)==null?void 0:A.selectedAddons)||{}).length;return r==null||r.info("  ",{addonCount:a}),{...i,addonSelection:{...i.addonSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"additional"}})},updateAdditionalInfo(i){t(a=>{if(!a)return a;const A=Date.now(),c={customerName:"",customerPhone:"",customerEmail:"",organizationName:"",postcode:"",address1:"",address2:"",shippingMethod:"standard",prefDeliveryDate:"",comment:"",designRequirement:"",isCompleted:!1,...a.additionalInfo,...i,lastUpdated:A};return r==null||r.info("  ",{changes:i,hasCustomerInfo:!!(c.customerName&&c.customerPhone),hasAddressInfo:!!c.address1}),{...a,additionalInfo:c}})},completeAdditionalInfo(){t(i=>!i||!i.additionalInfo?i:(r==null||r.info("  ",{customerName:i.additionalInfo.customerName,hasAddress:!!i.additionalInfo.address1}),{...i,additionalInfo:{...i.additionalInfo,isCompleted:!0,lastUpdated:Date.now()}}))},toggleDebugMode(){t(i=>{if(!i)return i;const a=!i.isDebugMode;return r&&(a?(r.enable(),r.info("  ")):(r.info("  "),r.disable())),{...i,isDebugMode:a}})},getSelectionSummary(){var A,d,c,u,h,f,g,m,y,b;const i=pn({subscribe:n});if(!i)return null;const a={productId:i.productId,sessionId:i.sessionId,currentStep:i.currentStep,completedSteps:{product:((A=i.productSelection)==null?void 0:A.isCompleted)||!1,print:((d=i.printSelection)==null?void 0:d.isCompleted)||!1,addon:((c=i.addonSelection)==null?void 0:c.isCompleted)||!1,additional:((u=i.additionalInfo)==null?void 0:u.isCompleted)||!1},statistics:{totalQuantity:((h=i.productSelection)==null?void 0:h.totalQuantity)||0,selectedColors:((f=i.productSelection)==null?void 0:f.selectedColors.length)||0,printMethod:((g=i.printSelection)==null?void 0:g.currentMethod)||"none",addonCount:Object.keys(((m=i.addonSelection)==null?void 0:m.selectedAddons)||{}).length,hasCustomerInfo:!!((y=i.additionalInfo)!=null&&y.customerName&&((b=i.additionalInfo)!=null&&b.customerPhone))}};return r==null||r.info("  ",a),a},toEstimateStoreFormat(){const i=pn({subscribe:n});if(!i)return null;r==null||r.info("EstimateStore   ");const a={productSelection:i.productSelection,printSelection:i.printSelection,addonSelection:i.addonSelection,additionalInfo:i.additionalInfo,metadata:{sessionId:i.sessionId,lastUpdated:Date.now()}};return r==null||r.info("EstimateStore   ",{hasProductSelection:!!i.productSelection,hasPrintSelection:!!i.printSelection,hasAddonSelection:!!i.addonSelection,hasAdditionalInfo:!!i.additionalInfo}),a},toDBFormat(i){const a=pn({subscribe:n});if(!a)return null;try{const{FixedEstimateDBConverter:A}=require("../types/fixedEstimateTypes"),d=i||`EST_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r==null||r.info("DB   ",{estimateId:d});const c=A.toDBFormat(a,d);return r==null||r.info("DB   ",{estimateId:d,hasProductSelection:!!c.productSelection,hasPrintSelection:!!c.printSelection,addonSelectionsCount:c.addonSelections.length,hasAdditionalInfo:!!c.additionalInfo}),c}catch(A){return r==null||r.error("DB   ",A),null}},fromDBFormat(i){try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes");r==null||r.info("DB    ");const A=a.fromDBFormat(i);return e(A),r==null||r.info("DB   ",{productId:A.productId,sessionId:A.sessionId,currentStep:A.currentStep}),!0}catch(a){return r==null||r.error("DB   ",a),!1}},validate(){const i=pn({subscribe:n});if(!i)return{isValid:!1,errors:["Store  ."]};try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes"),A=a.validateForDB(i);return r==null||r.info("  ",{isValid:A.isValid,errorCount:A.errors.length}),A.isValid||r==null||r.warn("  ",{errors:A.errors}),A}catch(a){return r==null||r.error("  ",a),{isValid:!1,errors:["    ."]}}},backup(){const i=pn({subscribe:n});if(!i)return null;const a={...i,backupTimestamp:Date.now()};return r==null||r.info("  ",{sessionId:i.sessionId,backupTimestamp:a.backupTimestamp}),a},restore(i){if(!i||!i.sessionId)return r==null||r.error("  "),!1;try{const{backupTimestamp:a,...A}=i;return e(A),r==null||r.info("    ",{sessionId:A.sessionId,backupTimestamp:a}),!0}catch(a){return r==null||r.error("  ",a),!1}}}}const ur=AF();async function BB(n,e){const{data:t,error:r}=await gt.from("products").select("process:processes( id, shop_id, name, description, image_url, created_at, updated_at, canvas_json)").eq("id",n).eq("shop",e).single();if(r)throw r;return t!=null&&t.process?t.process:null}async function xB(n){const{data:e,error:t}=await gt.from("process_print_areas").select("*").eq("process_id",n);if(t)throw t;return e||[]}function Ge(n,e,t){return(e=function(r){var o=function(s,i){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var A=a.call(s,i);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}(r,"string");return typeof o=="symbol"?o:o+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gw(Object(t),!0).forEach(function(r){Ge(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qn(n,e){if(n==null)return{};var t,r,o=function(i,a){if(i==null)return{};var A={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(a.indexOf(d)>=0)continue;A[d]=i[d]}return A}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function xA(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let vw=class{constructor(){Ge(this,"browserShadowBlurConstant",1),Ge(this,"DPI",96),Ge(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Ge(this,"perfLimitSizeTotal",2097152),Ge(this,"maxCacheSideLimit",4096),Ge(this,"minCacheSideLimit",256),Ge(this,"disableStyleCopyPaste",!1),Ge(this,"enableGLFiltering",!0),Ge(this,"textureSize",4096),Ge(this,"forceGLPutImageData",!1),Ge(this,"cachesBoundsOfCurve",!1),Ge(this,"fontPaths",{}),Ge(this,"NUM_FRACTION_DIGITS",4)}};const Gr=new class extends vw{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=We(We({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new vw,t=(n==null?void 0:n.reduce((r,o)=>(r[o]=e[o],r),{}))||e;this.configure(t)}},wA=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Di=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},lF=class extends Di{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},dF=class{},cF=class extends dF{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),o=e.createShader(e.FRAGMENT_SHADER);return!!o&&(e.shaderSource(o,r),e.compileShader(o),!!e.getShaderParameter(o,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),wA("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const uF={};let mw;const Vi=()=>mw||(mw={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new cF,dispose(){},copyPasteData:uF}),Yd=()=>Vi().document,p1=()=>Vi().window,zB=()=>{var n;return Math.max((n=Gr.devicePixelRatio)!==null&&n!==void 0?n:p1().devicePixelRatio,1)},ou=new class{constructor(){Ge(this,"charWidthsCache",{}),Ge(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return o[s]||(o[s]={}),o[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=Gr,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Q0="6.5.4";function kf(){}const ju=Math.PI/2,dp=2*Math.PI,g1=Math.PI/180,rs=Object.freeze([1,0,0,1,0,0]),v1=16,Wa=.4477152502,Lr="center",en="left",hs="top",U0="bottom",Gn="right",fs="none",m1=/\r?\n/,CB="moving",eg="scaling",SB="rotating",w1="rotate",EB="skewing",Bu="resizing",hF="modifyPoly",fF="modifyPath",cp="changed",tg="scale",ms="scaleX",Js="scaleY",Jd="skewX",Zd="skewY",Ao="fill",ps="stroke",up="modified",Zl="json",hv="svg",Zt=new class{constructor(){this[Zl]=new Map,this[hv]=new Map}has(n){return this[Zl].has(n)}getClass(n){const e=this[Zl].get(n);if(!e)throw new Di("No class registered for ".concat(n));return e}setClass(n,e){e?this[Zl].set(e,n):(this[Zl].set(n.type,n),this[Zl].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[hv].get(n)}setSVGClass(n,e){this[hv].set(e??n.type.toLowerCase(),n)}},hp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let pF=class{constructor(){Ge(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[o,s]=r;this.on(o,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(o=>{let[s,i]=o;r.push(this.once(s,i))}),()=>r.forEach(o=>o())}if(t){const r=this.on(e,function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[o,s]=r;this._removeEventListener(o,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const o=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(o)for(let s=0;s<o.length;s++)o[s].call(this,t||{})}};const dd=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Ca=n=>{if(n===0)return 1;switch(Math.abs(n)/ju){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Sa=n=>{if(n===0)return 0;const e=n/ju,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let bt=class Vo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Vo(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Vo(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Vo(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Vo(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Vo(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Vo(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Vo(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Vo(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Vo(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Vo(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Vo(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Vo(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y1;const r=Sa(e),o=Ca(e),s=this.subtract(t);return new Vo(s.x*o-s.y*r,s.x*r+s.y*o).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Vo(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const y1=new bt(0,0),Of=n=>!!n&&Array.isArray(n._objects);function FB(n){class e extends n{constructor(){super(...arguments),Ge(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const i=this._objects.push(...o);return o.forEach(a=>this._onObjectAdded(a)),i}insertAt(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,o=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.forEach(A=>{const d=r.indexOf(A);d!==-1&&(r.splice(d,1),o.push(A),this._onObjectRemoved(A))}),o}forEachObject(r){this.getObjects().forEach((o,s,i)=>r(o,s,i))}getObjects(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length===0?[...this._objects]:this._objects.filter(i=>i.isType(...o))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,o){return!!this._objects.includes(r)||!!o&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,o)=>r+=o.complexity?o.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(dd(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(dd(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const i=this.findNewLowerIndex(r,s,o);return dd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const i=this.findNewUpperIndex(r,s,o);return dd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,o){return r!==this._objects[o]&&(dd(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,o,s){let i;if(s){i=o;for(let a=o-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o-1;return i}findNewUpperIndex(r,o,s){let i;if(s){i=o;for(let a=o+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o+1;return i}collectObjects(r){let{left:o,top:s,width:i,height:a}=r,{includeIntersecting:A=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],c=new bt(o,s),u=c.add(new bt(i,a));for(let h=this._objects.length-1;h>=0;h--){const f=this._objects[h];f.selectable&&f.visible&&(A&&f.intersectsWithRect(c,u)||f.isContainedWithinRect(c,u)||A&&f.containsPoint(c)||A&&f.containsPoint(u))&&d.push(f)}return d}}return e}let IB=class extends pF{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function Df(n){return p1().requestAnimationFrame(n)}function gF(n){return p1().cancelAnimationFrame(n)}let vF=0;const yA=()=>vF++,yi=()=>{const n=Yd().createElement("canvas");if(!n||n.getContext===void 0)throw new Di("Failed to create `canvas` element");return n},mF=()=>Yd().createElement("img"),Gi=n=>{const e=yi();return e.width=n.width,e.height=n.height,e},QB=(n,e,t)=>n.toDataURL("image/".concat(e),t),Jn=n=>n*g1,ul=n=>n/g1,wF=n=>n.every((e,t)=>e===rs[t]),ds=(n,e,t)=>new bt(n).transform(e,t),gi=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:o}=new bt(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-o,t},zo=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],b1=(n,e)=>n.reduceRight((t,r)=>r&&t?zo(r,t,e):r||t,void 0)||rs.concat(),UB=n=>{let[e,t]=n;return Math.atan2(t,e)},fp=n=>{const e=UB(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),o=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:ul(e),scaleX:r,scaleY:o,skewX:ul(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Ru=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function qu(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Jn(n),o=Ca(r),s=Sa(r);return[o,s,-s,o,e?e-(o*e-s*t):0,t?t-(s*e+o*t):0]}const _1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},TB=n=>Math.tan(Jn(n)),LB=n=>[1,0,TB(n),1,0,0],PB=n=>[1,TB(n),0,1,0,0],rg=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:o=!1,skewX:s=0,skewY:i=0}=n,a=_1(r?-e:e,o?-t:t);return s&&(a=zo(a,LB(s),!0)),i&&(a=zo(a,PB(i),!0)),a},yF=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let o=Ru(e,t);r&&(o=zo(o,qu({angle:r})));const s=rg(n);return wF(s)||(o=zo(o,s)),o},Nf=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,o){if(e&&e.aborted)return o(new lF("loadImage"));const s=mF();let i;e&&(i=function(A){s.src="",o(A)},e.addEventListener("abort",i,{once:!0}));const a=function(){s.onload=s.onerror=null,i&&(e==null||e.removeEventListener("abort",i)),r(s)};n?(s.onload=a,s.onerror=function(){i&&(e==null||e.removeEventListener("abort",i)),o(new Di("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},xu=function(n){let{signal:e,reviver:t=kf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,o)=>{const s=[];e&&e.addEventListener("abort",o,{once:!0}),Promise.all(n.map(i=>Zt.getClass(i.type).fromObject(i,{signal:e}).then(a=>(t(i,a),s.push(a),a)))).then(r).catch(i=>{s.forEach(a=>{a.dispose&&a.dispose()}),o(i)}).finally(()=>{e&&e.removeEventListener("abort",o)})})},ng=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&Zt.has(a.type)?xu([a],{signal:e}).then(A=>{let[d]=A;return o.push(d),d}):a),i=Object.keys(n);Promise.all(s).then(a=>a.reduce((A,d,c)=>(A[i[c]]=d,A),{})).then(t).catch(a=>{o.forEach(A=>{A.dispose&&A.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},ec=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},B1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),ww={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},fv=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),yw=(n,e,t,r)=>{n/=255,e/=255,t/=255;const o=Math.max(n,e,t),s=Math.min(n,e,t);let i,a;const A=(o+s)/2;if(o===s)i=a=0;else{const d=o-s;switch(a=A>.5?d/(2-o-s):d/(o+s),o){case n:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-n)/d+2;break;case t:i=(n-e)/d+4}i/=6}return[Math.round(360*i),Math.round(100*a),Math.round(100*A),r]},bw=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Uh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),_w=n=>{let[e,t,r,o=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,o]};let Ps=class Oo{constructor(e){if(Ge(this,"isUnrecognised",!1),e)if(e instanceof Oo)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,o,s=1]=e;this.setSource([t,r,o,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in ww&&(e=ww[e]),e==="transparent"?[255,255,255,0]:Oo.sourceFromHex(e)||Oo.sourceFromRgb(e)||Oo.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=yw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,o]=yw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(o,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,o]=this.getSource();return"".concat(Uh(e)).concat(Uh(t)).concat(Uh(r)).concat(Uh(Math.round(255*o)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(_w(this.getSource())),this}toBlackWhite(e){const[t,,,r]=_w(this.getSource()),o=t<(e||127)?0:255;return this.setSource([o,o,o,r]),this}overlayWith(e){e instanceof Oo||(e=new Oo(e));const t=this.getSource(),r=e.getSource(),[o,s,i]=t.map((a,A)=>Math.round(.5*a+.5*r[A]));return this.setSource([o,s,i,t[3]]),this}static fromRgb(e){return Oo.fromRgba(e)}static fromRgba(e){return new Oo(Oo.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,o,s]=t.slice(1,4).map(i=>{const a=parseFloat(i);return i.endsWith("%")?Math.round(2.55*a):a});return[r,o,s,bw(t[4])]}}static fromHsl(e){return Oo.fromHsla(e)}static fromHsla(e){return new Oo(Oo.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(Oo.parseAngletoDegrees(t[1])%360+360)%360/360,o=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,a,A;if(o===0)i=a=A=s;else{const d=s<=.5?s*(o+1):s+o-s*o,c=2*s-d;i=fv(c,d,r+1/3),a=fv(c,d,r),A=fv(c,d,r-1/3)}return[Math.round(255*i),Math.round(255*a),Math.round(255*A),bw(t[4])]}static fromHex(e){return new Oo(Oo.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(A=>A+A):t.match(/.{2}/g);const[o,s,i,a=255]=r.map(A=>parseInt(A,16));return[o,s,i,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?ul(r):t.includes("turn")?360*r:r}};const Pn=(n,e)=>parseFloat(Number(n).toFixed(e)),Sd=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),o=Gr.DPI;switch(t==null?void 0:t[0]){case"mm":return r*o/25.4;case"cm":return r*o/2.54;case"in":return r*o;case"pt":return r*o/72;case"pc":return r*o/72*12;case"em":return r*e;default:return r}},bF=n=>{const[e,t]=n.trim().split(" "),[r,o]=(s=e)&&s!==fs?[s.slice(1,4),s.slice(5,8)]:s===fs?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:o}},pp=n=>"matrix("+n.map(e=>Pn(e,Gr.NUM_FRACTION_DIGITS)).join(" ")+")",zu=function(n,e){let t,r,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new Ps(e),i=s.getAlpha();t=s.toRgb(),i!==1&&(r=i.toString())}else t="none";return o?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},Gs=n=>!!n&&n.toLive!==void 0,Bw=n=>!!n&&typeof n.toObject=="function",xw=n=>!!n&&n.offsetX!==void 0&&"source"in n,qA=n=>!!n&&"multiSelectionStacking"in n;function kB(n){const e=n&&pi(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let o=n;const s=e.documentElement,i=e.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===e?(t=i.scrollLeft||s.scrollLeft||0,r=i.scrollTop||s.scrollTop||0):(t+=o.scrollLeft||0,r+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:t,top:r}}const pi=n=>n.ownerDocument||null,OB=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},DB=function(n,e,t){let{width:r,height:o}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=o,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(o*s).toString()),e.scale(s,s))},T0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function zw(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=fs,n}let NB=class{constructor(e){Ge(this,"_originalCanvasStyle",void 0),Ge(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Yd().getElementById(e)||yi();var r;if(t.hasAttribute("data-fabric"))throw new Di("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(r)),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:o}=this.lower;DB(r,o,e,t)}setCSSDimensions(e){T0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&pi(e),o={left:0,top:0};if(!r)return o;const s=((t=OB(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};o.left+=parseInt(s.borderLeftWidth,10)||0,o.top+=parseInt(s.borderTopWidth,10)||0,o.left+=parseInt(s.paddingLeft,10)||0,o.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(i=e.getBoundingClientRect());const A=kB(e);return{left:i.left+A.left-(a.clientLeft||0)+o.left,top:i.top+A.top-(a.clientTop||0)+o.top}}(this.lower.el)}dispose(){Vi().dispose(this.lower.el),delete this.lower}};const _F={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...rs]};let x1=class MB extends FB(IB){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return MB.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new NB(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(wA("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?zB():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const o=We({width:this.width,height:this.height},e);this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,o=[...this.viewportTransform],s=ds(e,gi(o));o[0]=t,o[3]=t;const i=ds(s,o);o[4]+=r.x-i.x,o[5]+=r.y-i.y,this.setViewportTransform(o)}setZoom(e){this.zoomToPoint(new bt(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new bt(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Df(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=gi(this.viewportTransform),o=ds({x:0,y:0},r),s=ds({x:e,y:t},r),i=o.min(s),a=o.max(s);return this.vptCoords={tl:i,tr:new bt(a.x,i.y),bl:new bt(i.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(gF(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,o)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,o=t.length;r<o;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],o=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!o)return;const a=Gs(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,i&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const A=r.gradientTransform||r.patternTransform;A&&e.transform(...A)}e.fill(),e.restore()}if(o){e.save();const{skipOffscreen:A}=this;this.skipOffscreen=i,i&&e.transform(...s),o.render(e),this.skipOffscreen=A,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new bt(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new bt(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new bt(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new bt(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new bt(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return ds(this.getCenterPoint(),gi(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Lr,Lr),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,o=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return We(We(We({version:Q0},ec(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),o?{clipPath:o}:null)}_toObject(e,t,r){let o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!o),s}__serializeBgOverlay(e,t){const r={},o=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,a=this.overlayColor;return Gs(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),Gs(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),o=t.height||"".concat(this.height),s=Gr.NUM_FRACTION_DIGITS,i=t.viewBox;let a;if(i)a='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const A=this.viewportTransform;a='viewBox="'.concat(Pn(-A[4]/A[0],s)," ").concat(Pn(-A[5]/A[3],s)," ").concat(Pn(this.width/A[0],s)," ").concat(Pn(this.height/A[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Q0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(yA()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Gs(t)){const r=this["".concat(e,"Vpt")],o=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?o[0]:1),height:this.height/(r?o[3]:1)};return t.toSVG(s,{additionalTransform:r?pp(o):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Gr.fontPaths;this._objects.forEach(function s(i){e.push(i),Of(i)&&i._objects.forEach(s)}),e.forEach(s=>{if(!(i=s)||typeof i._renderText!="function")return;var i;const{styles:a,fontFamily:A}=s;!t[A]&&r[A]&&(t[A]=!0,a&&Object.values(a).forEach(d=>{Object.values(d).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const o=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return o?`	<style type="text/css"><![CDATA[
`.concat(o,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const o=this[t];o&&!o.excludeFromExport&&o.toSVG&&e.push(o.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Gs(r)){const o=r.repeat||"",s=this.width,i=this.height,a=this["".concat(t,"Vpt")]?pp(gi(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat(o!=="repeat-y"&&o!=="no-repeat"||!xw(r)?s:r.source.width,'" height="').concat(o!=="repeat-x"&&o!=="no-repeat"||!xw(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Di("`json` is undefined"));const o=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:a,overlayImage:A,overlay:d,clipPath:c}=o,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([xu(s,{reviver:t,signal:r}),ng({backgroundImage:i,backgroundColor:a,overlayImage:A,overlayColor:d,clipPath:c},{signal:r})]).then(h=>{let[f,g]=h;return this.clear(),this.add(...f),this.set(o),this.set(g),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Gi(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:o=1,enableRetinaScaling:s=!1}=e,i=o*(s?this.getRetinaScaling():1);return QB(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:o,top:s,filter:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,A=(r||this.height)*e,d=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,f=d*e,g=this.viewportTransform,m=[f,0,0,f,(g[4]-(o||0))*e,(g[5]-(s||0))*e],y=this.enableRetinaScaling,b=Gi({width:a,height:A}),S=i?this._objects.filter(F=>i(F)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=m,this.width=a,this.height=A,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),S),this.viewportTransform=g,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=h,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),hp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};Ge(x1,"ownDefaults",_F);const BF=["touchstart","touchmove","touchend"],xF=n=>{const e=kB(n.target),t=function(r){const o=r.changedTouches;return o&&o[0]?o[0]:r}(n);return new bt(t.clientX+e.left,t.clientY+e.top)},L0=n=>BF.includes(n.type)||n.pointerType==="touch",P0=n=>{n.preventDefault(),n.stopPropagation()},Ba=n=>{let e=0,t=0,r=0,o=0;for(let s=0,i=n.length;s<i;s++){const{x:a,y:A}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(A>o||!s)&&(o=A),(A<t||!s)&&(t=A)}return{left:e,top:t,width:r-e,height:o-t}},zF=["translateX","translateY","scaleX","scaleY"],CF=(n,e)=>gp(n,zo(e,n.calcOwnMatrix())),gp=(n,e)=>{const t=fp(e),{translateX:r,translateY:o,scaleX:s,scaleY:i}=t,a=Qn(t,zF),A=new bt(r,o);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:i}),n.setPositionByOrigin(A,Lr,Lr)},SF=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},HB=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),z1=(n,e,t)=>{const r=n/2,o=e/2,s=[new bt(-r,-o),new bt(r,-o),new bt(-r,o),new bt(r,o)].map(a=>a.transform(t)),i=Ba(s);return new bt(i.width,i.height)},og=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rs;return zo(gi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:rs),n)},Ed=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rs;return n.transform(og(e,t))},EF=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rs;return n.transform(og(e,t),!0)},FF=(n,e,t)=>{const r=og(e,t);return gp(n,zo(r,n.calcOwnMatrix())),r},jB=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),We(We({},e),{},{target:r})),r.fire(n,e)},IF={left:-.5,top:-.5,center:0,bottom:.5,right:.5},oo=n=>typeof n=="string"?IF[n]:n-.5,vp="not-allowed";function RB(n){return oo(n.originX)===oo(Lr)&&oo(n.originY)===oo(Lr)}function Cw(n){return .5-oo(n)}const mi=(n,e)=>n[e],qB=(n,e,t,r)=>({e:n,transform:e,pointer:new bt(t,r)});function KB(n,e){const t=n.getTotalAngle()+ul(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function C1(n,e,t,r,o){var s;let{target:i,corner:a}=n;const A=i.controls[a],d=((s=i.canvas)===null||s===void 0?void 0:s.getZoom())||1,c=i.padding/d,u=function(h,f,g,m){const y=h.getRelativeCenterPoint(),b=g!==void 0&&m!==void 0?h.translateToGivenOrigin(y,Lr,Lr,g,m):new bt(h.left,h.top);return(h.angle?f.rotate(-Jn(h.angle),y):f).subtract(b)}(i,new bt(r,o),e,t);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=A.offsetX,u.y-=A.offsetY,u}const QF=(n,e,t,r)=>{const{target:o,offsetX:s,offsetY:i}=e,a=t-s,A=r-i,d=!mi(o,"lockMovementX")&&o.left!==a,c=!mi(o,"lockMovementY")&&o.top!==A;return d&&o.set(en,a),c&&o.set(hs,A),(d||c)&&jB(CB,qB(n,e,t,r)),d||c};class $B{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):fs,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=zu(Ao,this.fill);return[zu(ps,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",h,"fill-rule: ",t,"; ","opacity: ",d,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'.concat(pp(r));return"".concat(o).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=o,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:o,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",A=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=A&&A.absolutePositioned,u=this.stroke,h=this.fill,f=this.shadow,g=[],m=e.indexOf("COMMON_PARTS");let y;A&&(A.clipPathId="CLIPPATH_".concat(yA()),y='<clipPath id="'.concat(A.clipPathId,`" >
`).concat(A.toClipPathSVG(r),`</clipPath>
`)),c&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons(),` >
`);const b=[i,d,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[m]=b,Gs(h)&&g.push(h.toSVG(this)),Gs(u)&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),A&&g.push(y),g.push(e.join("")),g.push(`</g>
`),c&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Ao?' paint-order="'.concat(this.paintFirst,'" '):""}}function sg(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Sw;const hl=String.raw(Sw||(Sw=xA(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),UF=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+hl+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+hl+"))?\\s+(.*)"),TF={cx:en,x:en,r:"radius",cy:hs,y:hs,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},pv="font-size",gv="clip-path";sg(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);sg(["symbol","image","marker","pattern","view","svg"]);const Ew=sg(["symbol","g","a","svg","clipPath","defs"]),LF=new bt(1,0),VB=new bt,GB=(n,e)=>n.rotate(e),k0=(n,e)=>new bt(e).subtract(n),O0=n=>n.distanceFrom(VB),D0=(n,e)=>Math.atan2(su(n,e),kF(n,e)),PF=n=>D0(LF,n),S1=n=>n.eq(VB)?n:n.scalarDivide(O0(n)),WB=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return S1(new bt(-n.y,n.x).scalarMultiply(e?1:-1))},su=(n,e)=>n.x*e.y-n.y*e.x,kF=(n,e)=>n.x*e.x+n.y*e.y,Fw=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=su(e,t),o=su(e,n),s=su(t,n);return r>=0?o>=0&&s<=0:!(o<=0&&s>=0)},Iw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Qw=new RegExp("(?:\\s|^)"+Iw+Iw+"("+hl+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class xa{constructor(e){const t=typeof e=="string"?xa.parseShadow(e):e;Object.assign(this,xa.ownDefaults,t),this.id=yA()}static parseShadow(e){const t=e.trim(),[,r=0,o=0,s=0]=(Qw.exec(t)||[]).map(i=>parseFloat(i)||0);return{color:(t.replace(Qw,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:o,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=GB(new bt(this.offsetX,this.offsetY),Jn(-e.angle)),r=new Ps(this.color);let o=40,s=40;return e.width&&e.height&&(o=100*Pn((Math.abs(t.x)+this.blur)/e.width,Gr.NUM_FRACTION_DIGITS)+20,s=100*Pn((Math.abs(t.y)+this.blur)/e.height,Gr.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Pn(this.blur?this.blur/2:0,Gr.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Pn(t.x,Gr.NUM_FRACTION_DIGITS),'" dy="').concat(Pn(t.y,Gr.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=xa.ownDefaults;return this.includeDefaultValues?e:B1(e,(r,o)=>r!==t[o])}static async fromObject(e){return new this(e)}}Ge(xa,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Ge(xa,"type","shadow"),Zt.setClass(xa,"shadow");const Md=(n,e,t)=>Math.max(n,Math.min(e,t)),OF=[hs,en,ms,Js,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Jd,Zd],Ia=[Ao,ps,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],DF={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:en,originY:hs,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ao,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},NF=(n,e,t,r)=>-t*Math.cos(n/r*ju)+t+e,MF=()=>!1;class E1{constructor(e){let{startValue:t,byValue:r,duration:o=500,delay:s=0,easing:i=NF,onStart:a=kf,onChange:A=kf,onComplete:d=kf,abort:c=MF,target:u}=e;Ge(this,"_state","pending"),Ge(this,"durationProgress",0),Ge(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=s,this.easing=i,this._onStart=a,this._onChange=A,this._onComplete=d,this._abort=c,this.target=u,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Df(e),this.delay):Df(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:o,valueProgress:s}=this.calculate(r);this.value=Object.freeze(o),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Df(this.tick)))}register(){hp.push(this)}unregister(){hp.remove(this)}abort(){this._state="aborted",this.unregister()}}const HF=["startValue","endValue"];class jF extends E1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(We(We({},Qn(e,HF)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const RF=["startValue","endValue"];class qF extends E1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(We(We({},Qn(e,RF)),{},{startValue:t,byValue:r.map((o,s)=>o-t[s])}))}calculate(e){const t=this.startValue.map((r,o)=>this.easing(e,r,this.byValue[o],this.duration,o));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const KF=["startValue","endValue","easing","onChange","onComplete","abort"],$F=(n,e,t,r)=>e+t*(1-Math.cos(n/r*ju)),vv=n=>n&&((e,t,r)=>n(new Ps(e).toRgba(),t,r));class VF extends E1{constructor(e){let{startValue:t,endValue:r,easing:o=$F,onChange:s,onComplete:i,abort:a}=e,A=Qn(e,KF);const d=new Ps(t).getSource(),c=new Ps(r).getSource();super(We(We({},A),{},{startValue:d,byValue:c.map((u,h)=>u-d[h]),easing:o,onChange:vv(s),onComplete:vv(i),abort:vv(a)}))}calculate(e){const[t,r,o,s]=this.startValue.map((a,A)=>this.easing(e,a,this.byValue[A],this.duration,A)),i=[...[t,r,o].map(Math.round),Md(0,s,1)];return{value:i,valueProgress:i.map((a,A)=>this.byValue[A]!==0?Math.abs((a-this.startValue[A])/this.byValue[A]):0).find(a=>a!==0)||0}}}function XB(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new qF(n):new jF(n);return e.start(),e}function GF(n){const e=new VF(n);return e.start(),e}class Ln{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(o=>!this.includes(o))),this}static isPointContained(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(o||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(o||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=k0(t,r),i=k0(t,e).divide(s);return o?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new bt(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let o=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;o+=+(i.status==="Intersection")}return o%2==1}static intersectLineLine(e,t,r,o){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],i=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,A=t.y-e.y,d=o.x-r.x,c=o.y-r.y,u=e.x-r.x,h=e.y-r.y,f=d*h-c*u,g=a*h-A*u,m=c*a-d*A;if(m!==0){const y=f/m,b=g/m;return(s||0<=y&&y<=1)&&(i||0<=b&&b<=1)?new Ln("Intersection").append(new bt(e.x+y*a,e.y+y*A)):new Ln}if(f===0||g===0){const y=s||i||Ln.isPointContained(e,r,o)||Ln.isPointContained(t,r,o)||Ln.isPointContained(r,e,t)||Ln.isPointContained(o,e,t);return new Ln(y?"Coincident":void 0)}return new Ln("Parallel")}static intersectSegmentLine(e,t,r,o){return Ln.intersectLineLine(e,t,r,o,!1,!0)}static intersectSegmentSegment(e,t,r,o){return Ln.intersectLineLine(e,t,r,o,!1,!1)}static intersectLinePolygon(e,t,r){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Ln,i=r.length;for(let a,A,d,c=0;c<i;c++){if(a=r[c],A=r[(c+1)%i],d=Ln.intersectLineLine(e,t,a,A,o,!1),d.status==="Coincident")return d;s.append(...d.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return Ln.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Ln,o=e.length,s=[];for(let i=0;i<o;i++){const a=e[i],A=e[(i+1)%o],d=Ln.intersectSegmentPolygon(a,A,t);d.status==="Coincident"?(s.push(d),r.append(a,A)):r.append(...d.points)}return s.length>0&&s.length===e.length?new Ln("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const o=t.min(r),s=t.max(r),i=new bt(s.x,o.y),a=new bt(o.x,s.y);return Ln.intersectPolygonPolygon(e,[o,i,s,a])}}class WF extends IB{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?ds(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=ds(e,gi(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new bt(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,o];if(this.group){const i=this.group.calcTransformMatrix();return s.map(a=>ds(a,i))}return s}intersectsWithRect(e,t){return Ln.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ln.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:o,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&o>=e.y&&o+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ln.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Ba(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(ms,e),this._set(Js,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?ul(UB(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||rs.concat()}calcACoords(){const e=qu({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),o=Ru(t,r),s=zo(o,e),i=this._getTransformedDimensions(),a=i.x/2,A=i.y/2;return{tl:ds({x:-a,y:-A},s),tr:ds({x:a,y:-A},s),bl:ds({x:-a,y:A},s),br:ds({x:a,y:A},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,oo(this.originX),oo(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),o=this.matrixCache;return o&&o.key.every((s,i)=>s===r[i])?o.value:(this.group&&(t=zo(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=yF(o);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new bt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=We({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let o=r,s=0;this.strokeUniform&&(o=0,s=r);const i=t.width+o,a=t.height+o;let A;return A=t.skewX===0&&t.skewY===0?new bt(i*t.scaleX,a*t.scaleY):z1(i,a,rg(t)),A.scalarAdd(s)}translateToGivenOrigin(e,t,r,o,s){let i=e.x,a=e.y;const A=oo(o)-oo(t),d=oo(s)-oo(r);if(A||d){const c=this._getTransformedDimensions();i+=A*c.x,a+=d*c.y}return new bt(i,a)}translateToCenterPoint(e,t,r){if(t===Lr&&r===Lr)return e;const o=this.translateToGivenOrigin(e,t,r,Lr,Lr);return this.angle?o.rotate(Jn(this.angle),e):o}translateToOriginPoint(e,t,r){const o=this.translateToGivenOrigin(e,Lr,Lr,t,r);return this.angle?o.rotate(Jn(this.angle),e):o}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?ds(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new bt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const o=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),en,hs)}}const XF=["type"],YF=["extraParam"];let ua=class Mf extends WF{static getDefaults(){return Mf.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){wA("warn","Setting type has no effect",e)}constructor(e){super(),Ge(this,"_cacheContext",null),Object.assign(this,Mf.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=yi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,o=Gr.maxCacheSideLimit,s=Gr.minCacheSideLimit;if(t<=o&&r<=o&&t*r<=Gr.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[a,A]=ou.limitDimsByArea(i),d=Md(s,a,o),c=Md(s,A,o);return t>d&&(e.zoomX/=t/d,e.width=d,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,o=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(o+2),zoomX:e.x,zoomY:e.y,x:r,y:o}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:o,zoomX:s,zoomY:i,x:a,y:A}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=r!==e.width||o!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(d||c){r!==e.width||o!==e.height?(e.width=r,e.height=o):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const u=a/2,h=A/2;return this.cacheTranslationX=Math.round(e.width/2-u)+u,this.cacheTranslationY=Math.round(e.height/2-h)+h,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new bt(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=fp(this.calcTransformMatrix());return new bt(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==ms&&e!==Js||(t=this._constrainScale(t)),e===ms&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof xa||(t=new xa(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s}=this,{width:i,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s,width:i,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ps&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const o=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=o,this.stroke=s}createClipPathLayer(e,t){const r=Gi(t),o=r.getContext("2d");if(o.translate(t.cacheTranslationX,t.cacheTranslationY),o.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(o)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=gi(this.calcTransformMatrix());o.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(o),e.drawObject(o,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const o=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,o)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Gs(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Gs(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,o=this.getCanvasRetinaScaling(),[s,,,i]=(r==null?void 0:r.viewportTransform)||rs,a=s*o,A=i*o,d=t.nonScaling?new bt(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Gr.browserShadowBlurConstant*(a+A)*(d.x+d.y)/4,e.shadowOffsetX=t.offsetX*a*d.x,e.shadowOffsetY=t.offsetY*A*d.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Gs(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,o=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===ps?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=o.x/this.scaleX/s,a=o.y/this.scaleY/s,A=Gi({width:Math.ceil(i),height:Math.ceil(a)}),d=A.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(i,0),d.lineTo(i,a),d.lineTo(0,a),d.closePath(),d.translate(i/2,a/2),d.scale(o.zoomX/this.scaleX/s,o.zoomY/this.scaleY/s),this._applyPatternGradientTransform(d,t),d.fillStyle=t.toLive(e),d.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/o.zoomX,s*this.scaleY/o.zoomY),e.strokeStyle=(r=d.createPattern(A,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new bt(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Zt.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=HB(this),r=this.group,o=this.shadow,s=Math.abs,i=e.enableRetinaScaling?zB():1,a=(e.multiplier||1)*i,A=e.canvasProvider||(S=>new x1(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&SF(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&FF(this,this.getViewportTransform()),this.setCoords();const d=yi(),c=this.getBoundingRect(),u=this.shadow,h=new bt;if(u){const S=u.blur,F=u.nonScaling?new bt(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+S)*s(F.x),h.y=2*Math.round(s(u.offsetY)+S)*s(F.y)}const f=c.width+h.x,g=c.height+h.y;d.width=Math.ceil(f),d.height=Math.ceil(g);const m=A(d);e.format==="jpeg"&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new bt(m.width/2,m.height/2),Lr,Lr);const y=this.canvas;m._objects=[this],this.set("canvas",m),this.setCoords();const b=m.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=o,r&&(this.group=r),this.set(t),this.setCoords(),m._objects=[],m.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return QB(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:o}=this;if(t){const{x:s,y:i}=this.getRelativeCenterPoint();this.originX=Lr,this.originY=Lr,this.left=s,this.top=i}if(this.set("angle",e),t){const{x:s,y:i}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,o);this.left=s,this.top=i,this.originX=r,this.originY=o}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){hp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Vi().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,o)=>{let[s,i]=o;return r[s]=this._animate(s,i,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.split("."),s=this.constructor.colorProperties.includes(o[o.length-1]),{abort:i,startValue:a,onChange:A,onComplete:d}=r,c=We(We({},r),{},{target:this,startValue:a??o.reduce((u,h)=>u[h],this),endValue:t,abort:i==null?void 0:i.bind(this),onChange:(u,h,f)=>{o.reduce((g,m,y)=>(y===o.length-1&&(g[m]=u),g[m]),this),A&&A(u,h,f)},onComplete:(u,h,f)=>{this.setCoords(),d&&d(u,h,f)}});return s?GF(c):XB(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let o,s=0;s<t.length;s++){if(o=t[s],o===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(o===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const o=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(o),a=r._objects.indexOf(s);return i>-1&&i>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Mf.customProperties,this.constructor.customProperties||[]);let t;const r=Gr.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:i,shadow:a,strokeDashArray:A,left:d,top:c,originX:u,originY:h,width:f,height:g,strokeWidth:m,strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:S,strokeUniform:F,strokeMiterLimit:P,scaleX:L,scaleY:re,angle:K,flipX:H,flipY:J,opacity:we,visible:O,backgroundColor:D,fillRule:Z,paintFirst:ie,globalCompositeOperation:de,skewX:ne,skewY:fe}=this;o&&!o.excludeFromExport&&(t=o.toObject(e.concat("inverted","absolutePositioned")));const $=se=>Pn(se,r),q=We(We({},ec(this,e)),{},{type:this.constructor.type,version:Q0,originX:u,originY:h,left:$(d),top:$(c),width:$(f),height:$(g),fill:Bw(s)?s.toObject():s,stroke:Bw(i)?i.toObject():i,strokeWidth:$(m),strokeDashArray:A&&A.concat(),strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:S,strokeUniform:F,strokeMiterLimit:$(P),scaleX:$(L),scaleY:$(re),angle:$(K),flipX:H,flipY:J,opacity:$(we),shadow:a&&a.toObject(),visible:O,backgroundColor:D,fillRule:Z,paintFirst:ie,globalCompositeOperation:de,skewX:$(ne),skewY:$(fe)},t?{clipPath:t}:null);return this.includeDefaultValues?q:this._removeDefaultValues(q)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return B1(e,(o,s)=>{if(s===en||s===hs||s==="type")return!0;const i=r[s];return o!==i&&!(Array.isArray(o)&&Array.isArray(i)&&o.length===0&&i.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Qn(e,XF),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:o}=r,s=Qn(r,YF);return ng(t,s).then(i=>o?(delete i[o],new this(t[o],i)):new this(i))}static fromObject(e,t){return this._fromObject(e,t)}};Ge(ua,"stateProperties",OF),Ge(ua,"cacheProperties",Ia),Ge(ua,"ownDefaults",DF),Ge(ua,"type","FabricObject"),Ge(ua,"colorProperties",[Ao,ps,"backgroundColor"]),Ge(ua,"customProperties",[]),Zt.setClass(ua),Zt.setClass(ua,"object");const tc=(n,e,t)=>(r,o,s,i)=>{const a=e(r,o,s,i);return a&&jB(n,We(We({},qB(r,o,s,i)),t)),a};function rc(n){return(e,t,r,o)=>{const{target:s,originX:i,originY:a}=t,A=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(A,i,a),c=n(e,t,r,o);return s.setPositionByOrigin(d,t.originX,t.originY),c}}const Uw=tc(Bu,rc((n,e,t,r)=>{const o=C1(e,e.originX,e.originY,t,r);if(oo(e.originX)===oo(Lr)||oo(e.originX)===oo(Gn)&&o.x<0||oo(e.originX)===oo(en)&&o.x>0){const{target:s}=e,i=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=RB(e)?2:1,A=s.width,d=Math.abs(o.x*a/s.scaleX)-i;return s.set("width",Math.max(d,1)),A!==s.width}return!1}));function JF(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ps:Ao,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor);let c,u=e,h=t;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",s>i?(c=s,n.scale(1,i/s),h=t*s/i):i>s?(c=i,n.scale(s/i,1),u=e*i/s):c=s,n.beginPath(),n.arc(u,h,c/2,0,dp,!1),n[A](),d&&n.stroke(),n.restore()}function ZF(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?ps:Ao,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor),c=s/2,u=i/2;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",n.translate(e,t);const h=o.getTotalAngle();n.rotate(Jn(h)),n["".concat(A,"Rect")](-c,-u,s,i),d&&n.strokeRect(-c,-u,s,i),n.restore()}class di{constructor(e){Ge(this,"visible",!0),Ge(this,"actionName",tg),Ge(this,"angle",0),Ge(this,"x",0),Ge(this,"y",0),Ge(this,"offsetX",0),Ge(this,"offsetY",0),Ge(this,"sizeX",0),Ge(this,"sizeY",0),Ge(this,"touchSizeX",0),Ge(this,"touchSizeY",0),Ge(this,"cursorStyle","crosshair"),Ge(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,o){var s;let{tl:i,tr:a,br:A,bl:d}=o;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Ln.isPointInPolygon(r,[i,a,A,d])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,o;return(r=(o=e._controlsVisibility)===null||o===void 0?void 0:o[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,o){return new bt(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,o,s,i){const a=b1([Ru(r,o),qu({angle:e}),_1((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new bt(-.5,-.5).transform(a),tr:new bt(.5,-.5).transform(a),br:new bt(.5,.5).transform(a),bl:new bt(-.5,.5).transform(a)}}render(e,t,r,o,s){((o=o||{}).cornerStyle||s.cornerStyle)==="circle"?JF.call(this,e,t,r,o,s):ZF.call(this,e,t,r,o,s)}}const eI=(n,e,t)=>t.lockRotation?vp:e.cursorStyle,tI=tc(SB,rc((n,e,t,r)=>{let{target:o,ex:s,ey:i,theta:a,originX:A,originY:d}=e;const c=o.translateToOriginPoint(o.getRelativeCenterPoint(),A,d);if(mi(o,"lockRotation"))return!1;const u=Math.atan2(i-c.y,s-c.x),h=Math.atan2(r-c.y,t-c.x);let f=ul(h-u+a);if(o.snapAngle&&o.snapAngle>0){const m=o.snapAngle,y=o.snapThreshold||m,b=Math.ceil(f/m)*m,S=Math.floor(f/m)*m;Math.abs(f-S)<y?f=S:Math.abs(f-b)<y&&(f=b)}f<0&&(f=360+f),f%=360;const g=o.angle!==f;return o.angle=f,g}));function YB(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function JB(n,e,t){const r=mi(n,"lockScalingX"),o=mi(n,"lockScalingY");if(r&&o||!e&&(r||o)&&t||r&&e==="x"||o&&e==="y")return!0;const{width:s,height:i,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||i===0&&a===0&&e!=="x"}const rI=["e","se","s","sw","w","nw","n","ne","e"],Vc=(n,e,t)=>{const r=YB(n,t);if(JB(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return vp;const o=KB(t,e);return"".concat(rI[o],"-resize")};function F1(n,e,t,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,i=o.by,a=YB(n,s);let A,d,c,u,h,f;if(JB(s,i,a))return!1;if(e.gestureScale)d=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(A=C1(e,e.originX,e.originY,t,r),h=i!=="y"?Math.sign(A.x||e.signX||1):1,f=i!=="x"?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=h),e.signY||(e.signY=f),mi(s,"lockScalingFlip")&&(e.signX!==h||e.signY!==f))return!1;if(u=s._getTransformedDimensions(),a&&!i){const y=Math.abs(A.x)+Math.abs(A.y),{original:b}=e,S=y/(Math.abs(u.x*b.scaleX/s.scaleX)+Math.abs(u.y*b.scaleY/s.scaleY));d=b.scaleX*S,c=b.scaleY*S}else d=Math.abs(A.x*s.scaleX/u.x),c=Math.abs(A.y*s.scaleY/u.y);RB(e)&&(d*=2,c*=2),e.signX!==h&&i!=="y"&&(e.originX=Cw(e.originX),d*=-1,e.signX=h),e.signY!==f&&i!=="x"&&(e.originY=Cw(e.originY),c*=-1,e.signY=f)}const g=s.scaleX,m=s.scaleY;return i?(i==="x"&&s.set(ms,d),i==="y"&&s.set(Js,c)):(!mi(s,"lockScalingX")&&s.set(ms,d),!mi(s,"lockScalingY")&&s.set(Js,c)),g!==s.scaleX||m!==s.scaleY}const Th=tc(eg,rc((n,e,t,r)=>F1(n,e,t,r))),nI=tc(eg,rc((n,e,t,r)=>F1(n,e,t,r,{by:"x"}))),oI=tc(eg,rc((n,e,t,r)=>F1(n,e,t,r,{by:"y"}))),sI=["target","ex","ey","skewingSide"],mv={x:{counterAxis:"y",scale:ms,skew:Jd,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Js,skew:Zd,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},iI=["ns","nesw","ew","nwse"],aI=(n,e,t)=>{if(e.x!==0&&mi(t,"lockSkewingY")||e.y!==0&&mi(t,"lockSkewingX"))return vp;const r=KB(t,e)%4;return"".concat(iI[r],"-resize")};function ZB(n,e,t,r,o){const{target:s}=t,{counterAxis:i,origin:a,lockSkewing:A,skew:d,flip:c}=mv[n];if(mi(s,A))return!1;const{origin:u,flip:h}=mv[i],f=oo(t[u])*(s[h]?-1:1),g=-Math.sign(f)*(s[c]?-1:1),m=.5*-((s[d]===0&&C1(t,Lr,Lr,r,o)[n]>0||s[d]>0?1:-1)*g)+.5;return tc(EB,rc((b,S,F,P)=>function(L,re,K){let{target:H,ex:J,ey:we,skewingSide:O}=re,D=Qn(re,sI);const{skew:Z}=mv[L],ie=K.subtract(new bt(J,we)).divide(new bt(H.scaleX,H.scaleY))[L],de=H[Z],ne=D[Z],fe=Math.tan(Jn(ne)),$=L==="y"?H._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:H._getTransformedDimensions({scaleX:1,scaleY:1}).y,q=2*ie*O/Math.max($,1)+fe,se=ul(Math.atan(q));H.set(Z,se);const Ae=de!==H[Z];if(Ae&&L==="y"){const{skewX:x,scaleX:E}=H,I=H._getTransformedDimensions({skewY:de}),U=H._getTransformedDimensions(),M=x!==0?I.x/U.x:1;M!==1&&H.set(ms,M*E)}return Ae}(n,S,new bt(F,P))))(e,We(We({},t),{},{[a]:m,skewingSide:g}),r,o)}const AI=(n,e,t,r)=>ZB("x",n,e,t,r),lI=(n,e,t,r)=>ZB("y",n,e,t,r);function ig(n,e){return n[e.canvas.altActionKey]}const Lh=(n,e,t)=>{const r=ig(n,t);return e.x===0?r?Jd:Js:e.y===0?r?Zd:ms:""},gd=(n,e,t)=>ig(n,t)?aI(0,e,t):Vc(n,e,t),Tw=(n,e,t,r)=>ig(n,e.target)?lI(n,e,t,r):nI(n,e,t,r),Lw=(n,e,t,r)=>ig(n,e.target)?AI(n,e,t,r):oI(n,e,t,r),e5=()=>({ml:new di({x:-.5,y:0,cursorStyleHandler:gd,actionHandler:Tw,getActionName:Lh}),mr:new di({x:.5,y:0,cursorStyleHandler:gd,actionHandler:Tw,getActionName:Lh}),mb:new di({x:0,y:.5,cursorStyleHandler:gd,actionHandler:Lw,getActionName:Lh}),mt:new di({x:0,y:-.5,cursorStyleHandler:gd,actionHandler:Lw,getActionName:Lh}),tl:new di({x:-.5,y:-.5,cursorStyleHandler:Vc,actionHandler:Th}),tr:new di({x:.5,y:-.5,cursorStyleHandler:Vc,actionHandler:Th}),bl:new di({x:-.5,y:.5,cursorStyleHandler:Vc,actionHandler:Th}),br:new di({x:.5,y:.5,cursorStyleHandler:Vc,actionHandler:Th}),mtr:new di({x:0,y:-.5,actionHandler:tI,cursorStyleHandler:eI,offsetY:-40,withConnection:!0,actionName:w1})}),dI=()=>({mr:new di({x:.5,y:0,actionHandler:Uw,cursorStyleHandler:gd,actionName:Bu}),ml:new di({x:-.5,y:0,actionHandler:Uw,cursorStyleHandler:gd,actionName:Bu})}),cI=()=>We(We({},e5()),dI());class Cu extends ua{static getDefaults(){return We(We({},super.getDefaults()),Cu.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Cu.ownDefaults),this.setOptions(e)}static createControls(){return{controls:e5()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,o=t.action;if(this===r&&o&&o.startsWith(tg))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let o=r.length-1;o>=0;o--){const[s,i]=r[o],a=this.controls[s];if(a.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Ru(t.x,t.y),o=qu({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=zo(r,o),i=zo(e,s),a=zo(i,[1/e[0],0,0,1/e[3],0,0]),A=this.group?fp(this.calcTransformMatrix()):void 0;A&&(A.scaleX=Math.abs(A.scaleX),A.scaleY=Math.abs(A.scaleY));const d=this._calculateCurrentDimensions(A),c={};return this.forEachControl((u,h)=>{const f=u.positionHandler(d,a,this,u);c[h]=Object.assign(f,this._calcCornerCoords(u,f))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),o=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/o[0],1/o[3]),e.rotate(Jn(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=We({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=o.borderColor,this._setLineDash(e,o.borderDashArray),this.strokeBorders(e,t),o.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:o}=this,s=We({hasBorders:r,hasControls:o},t),i=this.getViewportTransform(),a=s.hasBorders,A=s.hasControls,d=zo(i,this.calcTransformMatrix()),c=fp(d);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Jn(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),A&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let o;if(r&&r.forActiveSelection||this.group){const s=z1(this.width,this.height,rg(t)),i=this.isStrokeAccountedForInDimensions()?y1:(this.strokeUniform?new bt().scalarAdd(this.canvas?this.canvas.getZoom():1):new bt(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);o=s.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,o,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((o,s)=>{o.withConnection&&o.getVisibility(this,s)&&(r=!0,e.moveTo(o.x*t.x,o.y*t.y),e.lineTo(o.x*t.x+o.offsetX,o.y*t.y+o.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:s,cornerColor:i}=this,a=We({cornerStrokeColor:o,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((A,d)=>{if(A.getVisibility(this,d)){const c=this.oCoords[d];A.render(e,c.x,c.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,o]=t;return this.setControlVisible(r,o)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const o=this.width+4,s=this.height+4;return t.clearRect(-o/2,-s/2,o,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function t5(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Ge(Cu,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class wo extends Cu{}t5(wo,[$B]),Zt.setClass(wo),Zt.setClass(wo,"object");const uI=(n,e,t,r)=>{const o=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,o,o);for(let i=3;i<s.length;i+=4)if(s[i]>0)return!1;return!0};class r5{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new bt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new bt(1/this.options.scaleX,1/this.options.scaleY):new bt(1,1)}createSideVector(e,t){const r=k0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new bt(e);return t.y+=t.x*Math.tan(Jn(this.options.skewY)),t.x+=t.y*Math.tan(Jn(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const hI=new bt;class Fd extends r5{static getOrthogonalRotationFactor(e,t){const r=t?D0(e,t):PF(e);return Math.abs(r)<ju?-1:1}constructor(e,t,r,o){super(o),Ge(this,"AB",void 0),Ge(this,"AC",void 0),Ge(this,"alpha",void 0),Ge(this,"bisector",void 0),this.A=new bt(e),this.B=new bt(t),this.C=new bt(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=D0(this.AB,this.AC),this.bisector=S1(GB(this.AB.eq(hI)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t),s=WB(o),i=Fd.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%dp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?O0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return O0(o)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(o))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],o=new bt(Fd.getOrthogonalRotationFactor(this.bisector),Fd.getOrthogonalRotationFactor(new bt(this.bisector.y,this.bisector.x)));return[new bt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new bt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(s=>{Fw(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:o,skewY:s,scaleX:i,scaleY:a,strokeUniform:A}=this.options,d=new bt(Math.tan(Jn(o)),Math.tan(Jn(s))),c=this.strokeProjectionMagnitude,u=A?c/a/Math.sqrt(1/a**2+1/i**2*d.y**2):c/Math.sqrt(1+d.y**2),h=new bt(Math.sqrt(Math.max(c**2-u**2,0)),u),f=A?c/Math.sqrt(1+d.x**2*(1/a)**2/(1/i+1/i*d.x*d.y)**2):c/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),g=new bt(f,Math.sqrt(Math.max(c**2-f**2,0)));return[g,g.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(m=>this.applySkew(A?m.multiply(this.strokeUniformScalar):m)).forEach(m=>{Fw(m,e,t)&&r.push(this.applySkew(this.A).add(m))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%dp==0,r=this.applySkew(this.A),o=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=su(o,i)>0,A=a?o:s,d=a?s:o;return this.isSkewed()?e.push(...this.projectRoundWithSkew(A,d)):e.push(...this.projectRoundNoSkew(A,d)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Pw extends r5{constructor(e,t,r){super(r),this.A=new bt(e),this.T=new bt(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t);return this.scaleUnitVector(WB(o),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new bt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Fd(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new bt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(S1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(r);e.push(o.add(t),o.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const fI=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const o=n.reduce((s,i)=>(s[s.length-1].eq(i)||s.push(new bt(i)),s),[new bt(n[0])]);if(o.length===1)t=!0;else if(!t){const s=o[0],i=((a,A)=>{for(let d=a.length-1;d>=0;d--)if(A(a[d],d,a))return d;return-1})(o,a=>!a.eq(s));o.splice(i+1)}return o.forEach((s,i,a)=>{let A,d;i===0?(d=a[1],A=t?s:a[a.length-1]):i===a.length-1?(A=a[i-1],d=t?s:a[0]):(A=a[i-1],d=a[i+1]),t&&a.length===1?r.push(...new Pw(s,s,e).project()):!t||i!==0&&i!==a.length-1?r.push(...new Fd(s,A,d,e).project()):r.push(...new Pw(s,i===0?d:A,e).project())}),r},I1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=We({},n[t][r])})}),e},pI=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Q1=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=gI(n,r))!==!1&&e.push(t);return e},gI=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(e+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},U1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},vI=(n,e)=>{const t=e.split(`
`),r=[];let o=-1,s={};n=I1(n);for(let i=0;i<t.length;i++){const a=Q1(t[i]);if(n[i])for(let A=0;A<a.length;A++){o++;const d=n[i][A];d&&Object.keys(d).length>0&&(U1(s,d,!0)?r.push({start:o,end:o+1,style:d}):r[r.length-1].end++),s=d||{}}else o+=a.length,s={}}return r},mI=(n,e)=>{if(!Array.isArray(n))return I1(n);const t=e.split(m1),r={};let o=-1,s=0;for(let i=0;i<t.length;i++){const a=Q1(t[i]);for(let A=0;A<a.length;A++)o++,n[s]&&n[s].start<=o&&o<n[s].end&&(r[i]=r[i]||{},r[i][A]=We({},n[s].style),o===n[s].end-1&&s++)}return r},zA=["display","transform",Ao,"fill-opacity","fill-rule","opacity",ps,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function kw(n,e){const t=n.nodeName,r=n.getAttribute("class"),o=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+t,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+s,"i"),e=e.replace(i,"")),r&&e.length){const a=r.split(" ");for(let A=a.length;A--;)i=new RegExp("\\."+a[A]+s,"i"),e=e.replace(i,"")}return e.length===0}function wI(n,e){let t=!0;const r=kw(n,e.pop());return r&&e.length&&(t=function(o,s){let i,a=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&s.length;)a&&(i=s.pop()),a=kw(o=o.parentElement,i);return s.length===0}(n,e)),r&&t&&e.length===0}const yI=n=>{var e;return(e=TF[n])!==null&&e!==void 0?e:n},bI=new RegExp("(".concat(hl,")"),"gi"),_I=n=>n.replace(bI," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Ow,Dw,Nw,Mw,Hw,jw,Rw;const es="(".concat(hl,")"),BI=String.raw(Ow||(Ow=xA(["(skewX)(",")"],["(skewX)\\(","\\)"])),es),xI=String.raw(Dw||(Dw=xA(["(skewY)(",")"],["(skewY)\\(","\\)"])),es),zI=String.raw(Nw||(Nw=xA(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),es,es,es),CI=String.raw(Mw||(Mw=xA(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),es,es),SI=String.raw(Hw||(Hw=xA(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),es,es),EI=String.raw(jw||(jw=xA(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),es,es,es,es,es,es),T1="(?:".concat(EI,"|").concat(SI,"|").concat(zI,"|").concat(CI,"|").concat(BI,"|").concat(xI,")"),FI="(?:".concat(T1,"*)"),II=String.raw(Rw||(Rw=xA(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),FI),QI=new RegExp(II),UI=new RegExp(T1),TI=new RegExp(T1,"g");function N0(n){const e=[];if(!(n=_I(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!QI.test(n))return[...rs];for(const t of n.matchAll(TI)){const r=UI.exec(t[0]);if(!r)continue;let o=rs;const s=r.filter(g=>!!g),[,i,...a]=s,[A,d,c,u,h,f]=a.map(g=>parseFloat(g));switch(i){case"translate":o=Ru(A,d);break;case w1:o=qu({angle:A},{x:d,y:c});break;case tg:o=_1(A,d);break;case Jd:o=LB(A);break;case Zd:o=PB(A);break;case"matrix":o=[A,d,c,u,h,f]}e.push(o)}return b1(e)}function LI(n,e,t,r){const o=Array.isArray(e);let s,i=e;if(n!==Ao&&n!==ps||e!==fs){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")i=e===fs?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")i=t&&t.transformMatrix?zo(t.transformMatrix,N0(e)):N0(e);else if(n==="visible")i=e!==fs&&e!=="hidden",t&&t.visible===!1&&(i=!1);else if(n==="opacity")i=parseFloat(e),t&&t.opacity!==void 0&&(i*=t.opacity);else if(n==="textAnchor")i=e==="start"?en:e==="end"?Gn:Lr;else if(n==="charSpacing")s=Sd(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Ao),A=e.indexOf(ps);i=Ao,(a>-1&&A>-1&&A<a||a===-1&&A>-1)&&(i=ps)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=o?e.map(Sd):Sd(e,r)}}else i="";return!o&&isNaN(s)?i:s}function PI(n,e){const t=n.match(UF);if(!t)return;const r=t[1],o=t[3],s=t[4],i=t[5],a=t[6];r&&(e.fontStyle=r),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=Sd(s)),a&&(e.fontFamily=a),i&&(e.lineHeight=i==="normal"?1:i)}function kI(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,o]=t.split(":");e[r.trim().toLowerCase()]=o.trim()})}function OI(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?kI(t,e):function(r,o){Object.entries(r).forEach(s=>{let[i,a]=s;a!==void 0&&(o[i.toLowerCase()]=a)})}(t,e)),e}const DI={stroke:"strokeOpacity",fill:"fillOpacity"};function Qa(n,e,t){if(!n)return{};let r,o={},s=v1;n.parentNode&&Ew.test(n.parentNode.nodeName)&&(o=Qa(n.parentElement,e,t),o.fontSize&&(r=s=Sd(o.fontSize)));const i=We(We(We({},e.reduce((d,c)=>{const u=n.getAttribute(c);return u&&(d[c]=u),d},{})),function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const h in c)wI(d,h.split(" "))&&(u=We(We({},u),c[h]));return u}(n,t)),OI(n));i[gv]&&n.setAttribute(gv,i[gv]),i[pv]&&(r=Sd(i[pv],s),i[pv]="".concat(r));const a={};for(const d in i){const c=yI(d),u=LI(c,i[d],o,r);a[c]=u}a&&a.font&&PI(a.font,a);const A=We(We({},o),a);return Ew.test(n.nodeName)?A:function(d){const c=wo.getDefaults();return Object.entries(DI).forEach(u=>{let[h,f]=u;if(d[f]===void 0||d[h]==="")return;if(d[h]===void 0){if(!c[h])return;d[h]=c[h]}if(d[h].indexOf("url(")===0)return;const g=new Ps(d[h]);d[h]=g.setAlpha(Pn(g.getAlpha()*d[f],2)).toRgba()}),d}(A)}const NI=["left","top","width","height","visible"],n5=["rx","ry"];class fi extends wo{static getDefaults(){return We(We({},super.getDefaults()),fi.ownDefaults)}constructor(e){super(),Object.assign(this,fi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,o=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,A=i!==0||a!==0;e.beginPath(),e.moveTo(o+i,s),e.lineTo(o+t-i,s),A&&e.bezierCurveTo(o+t-Wa*i,s,o+t,s+Wa*a,o+t,s+a),e.lineTo(o+t,s+r-a),A&&e.bezierCurveTo(o+t,s+r-Wa*a,o+t-Wa*i,s+r,o+t-i,s+r),e.lineTo(o+i,s+r),A&&e.bezierCurveTo(o+Wa*i,s+r,o,s+r-Wa*a,o,s+r-a),e.lineTo(o,s+a),A&&e.bezierCurveTo(o,s+Wa*a,o+Wa*i,s,o+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...n5,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:o}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(o,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const o=Qa(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:a=0,height:A=0,visible:d=!0}=o,c=Qn(o,NI);return new this(We(We(We({},t),c),{},{left:s,top:i,width:a,height:A,visible:!!(d&&a&&A)}))}}Ge(fi,"type","Rect"),Ge(fi,"cacheProperties",[...Ia,...n5]),Ge(fi,"ownDefaults",{rx:0,ry:0}),Ge(fi,"ATTRIBUTE_NAMES",[...zA,"x","y","rx","ry","width","height"]),Zt.setClass(fi),Zt.setSVGClass(fi);const ma="initialization",mp="added",L1="removed",wp="imperative",o5=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:o,height:s,group:i}=e,a=i&&i!==n?og(i.calcTransformMatrix(),n.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),d=!e.isStrokeAccountedForInDimensions(),c=t&&d?EF(new bt(r,r),void 0,n.calcTransformMatrix()):y1,u=!t&&d?r:0,h=z1(o+u,s+u,b1([a,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[A.subtract(h),A.add(h)]};class ag{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:o}=e;return t===ma||t===wp||!!r&&o!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==ma&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:o}=t;if(r===wp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:i,width:a,height:A}=Ba(e.map(u=>o5(o,u)).reduce((u,h)=>u.concat(h),[])),d=new bt(a,A),c=new bt(s,i).add(d.scalarDivide(2));if(r===ma){const u=this.getInitialSize(t,{size:d,center:c});return{center:c,relativeCorrection:new bt(0,0),size:u}}return{center:c.transform(o.calcOwnMatrix()),size:d}}}Ge(ag,"type","strategy");class M0 extends ag{shouldPerformLayout(e){return!0}}Ge(M0,"type","fit-content"),Zt.setClass(M0);const MI=["strategy"],HI=["target","strategy","bubbles","prevStrategy"],s5="layoutManager";class Su{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new M0;Ge(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=We(We({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[up,CB,Bu,SB,eg,EB,cp,hF,fF].map(o=>e.on(o,s=>this.performLayout(o===up?{type:"object_modified",trigger:o,e:s,target:r}:{type:"object_modifying",trigger:o,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:o}=t;if(r===ma||r===mp?this.subscribeTargets(e):r===L1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),o&&o.fire("object:layout:before",{target:t,context:e}),r===wp&&e.deep){const s=Qn(e,MI);t.forEachObject(i=>i.layoutManager&&i.layoutManager.performLayout(We(We({},s),{},{bubbles:!1,target:i})))}}getLayoutResult(e){const{target:t,strategy:r,type:o}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=o===ma?new bt:t.getRelativeCenterPoint(),{center:a,correction:A=new bt,relativeCorrection:d=new bt}=s,c=i.subtract(a).add(A).transform(o===ma?rs:gi(t.calcOwnMatrix()),!0).add(d);return{result:s,prevCenter:i,nextCenter:a,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:o},nextCenter:s}=t;var i,a;r.set({width:o.x,height:o.y}),this.layoutObjects(e,t),e.type===ma?r.set({left:(i=e.x)!==null&&i!==void 0?i:s.x+o.x*oo(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+o.y*oo(r.originY)}):(r.setPositionByOrigin(s,Lr,Lr),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(o=>{o.group===r&&this.layoutObject(e,t,o)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:o}=t;r.set({left:r.left+o.x,top:r.top+o.y})}onAfterLayout(e,t){const{target:r,strategy:o,bubbles:s,prevStrategy:i}=e,a=Qn(e,HI),{canvas:A}=r;r.fire("layout:after",{context:e,result:t}),A&&A.fire("object:layout:after",{context:e,result:t,target:r});const d=r.parent;s&&d!=null&&d.layoutManager&&((a.path||(a.path=[])).push(r),d.layoutManager.performLayout(We(We({},a),{},{target:d}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:s5,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Zt.setClass(Su,s5);const jI=["type","objects","layoutManager"];class RI extends Su{performLayout(){}}class il extends FB(wo){static getDefaults(){return We(We({},super.getDefaults()),il.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ge(this,"_activeObjects",[]),Ge(this,"__objectSelectionTracker",void 0),Ge(this,"__objectSelectionDisposer",void 0),Object.assign(this,il.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Su,this.layoutManager.performLayout({type:ma,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(wA("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(wA("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,o)=>this.canEnterGroup(t)&&o.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...o);return this._onAfterObjectsChange(mp,o),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(mp,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(L1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(o=>{o._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const o=this._activeObjects;if(e)o.push(r),this._set("dirty",!0);else if(o.length>0){const s=o.indexOf(r);s>-1&&(o.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&gp(e,zo(gi(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(gp(e,zo(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=wo.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var o;const i=this._objects[s];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&i.group!==this?(e.save(),e.transform(...gi(this.calcTransformMatrix())),i.render(e),e.restore()):i.group===this&&i.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(We({target:this,type:wp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const s=o.includeDefaultValues;o.includeDefaultValues=r;const i=o[e||"toObject"](t);return o.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return We(We(We({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=fi.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const o=t.join("");return e?e(o):o}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let o=0;o<this._objects.length;o++)t.push("		",this._objects[o].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let o=0;o<this._objects.length;o++)t.push("	",this._objects[o].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:o=[],layoutManager:s}=e,i=Qn(e,jI);return Promise.all([xu(o,t),ng(i,t)]).then(a=>{let[A,d]=a;const c=new this(A,We(We(We({},i),d),{},{layoutManager:new RI}));if(s){const u=Zt.getClass(s.type),h=Zt.getClass(s.strategy);c.layoutManager=new u(new h)}else c.layoutManager=new Su;return c.layoutManager.subscribeTargets({type:ma,target:c,targets:c.getObjects()}),c.setCoords(),c})}}Ge(il,"type","Group"),Ge(il,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Zt.setClass(il);const qI=(n,e)=>Math.min(e.width/n.width,e.height/n.height),KI=(n,e)=>Math.max(e.width/n.width,e.height/n.height),H0="\\s*,?\\s*",kc="".concat(H0,"(").concat(hl,")"),$I="".concat(kc).concat(kc).concat(kc).concat(H0,"([01])").concat(H0,"([01])").concat(kc).concat(kc),VI={m:"l",M:"L"},GI=(n,e,t,r,o,s,i,a,A,d,c)=>{const u=Ca(n),h=Sa(n),f=Ca(e),g=Sa(e),m=t*o*f-r*s*g+i,y=r*o*f+t*s*g+a;return["C",d+A*(-t*o*h-r*s*u),c+A*(-r*o*h+t*s*u),m+A*(t*o*g+r*s*f),y+A*(r*o*g-t*s*f),m,y]},qw=(n,e,t,r)=>{const o=Math.atan2(e,n),s=Math.atan2(r,t);return s>=o?s-o:2*Math.PI-(o-s)};function Kw(n,e,t,r,o,s,i,a){let A;if(Gr.cachesBoundsOfCurve&&(A=[...arguments].join(),ou.boundsOfCurveCache[A]))return ou.boundsOfCurveCache[A];const d=Math.sqrt,c=Math.abs,u=[],h=[[0,0],[0,0]];let f=6*n-12*t+6*o,g=-3*n+9*t-9*o+3*i,m=3*t-3*n;for(let P=0;P<2;++P){if(P>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,m=3*r-3*e),c(g)<1e-12){if(c(f)<1e-12)continue;const J=-m/f;0<J&&J<1&&u.push(J);continue}const L=f*f-4*m*g;if(L<0)continue;const re=d(L),K=(-f+re)/(2*g);0<K&&K<1&&u.push(K);const H=(-f-re)/(2*g);0<H&&H<1&&u.push(H)}let y=u.length;const b=y,S=i5(n,e,t,r,o,s,i,a);for(;y--;){const{x:P,y:L}=S(u[y]);h[0][y]=P,h[1][y]=L}h[0][b]=n,h[1][b]=e,h[0][b+1]=i,h[1][b+1]=a;const F=[new bt(Math.min(...h[0]),Math.min(...h[1])),new bt(Math.max(...h[0]),Math.max(...h[1]))];return Gr.cachesBoundsOfCurve&&(ou.boundsOfCurveCache[A]=F),F}const WI=(n,e,t)=>{let[r,o,s,i,a,A,d,c]=t;const u=((h,f,g,m,y,b,S)=>{if(g===0||m===0)return[];let F=0,P=0,L=0;const re=Math.PI,K=S*g1,H=Sa(K),J=Ca(K),we=.5*(-J*h-H*f),O=.5*(-J*f+H*h),D=g**2,Z=m**2,ie=O**2,de=we**2,ne=D*Z-D*ie-Z*de;let fe=Math.abs(g),$=Math.abs(m);if(ne<0){const R=Math.sqrt(1-ne/(D*Z));fe*=R,$*=R}else L=(y===b?-1:1)*Math.sqrt(ne/(D*ie+Z*de));const q=L*fe*O/$,se=-L*$*we/fe,Ae=J*q-H*se+.5*h,x=H*q+J*se+.5*f;let E=qw(1,0,(we-q)/fe,(O-se)/$),I=qw((we-q)/fe,(O-se)/$,(-we-q)/fe,(-O-se)/$);b===0&&I>0?I-=2*re:b===1&&I<0&&(I+=2*re);const U=Math.ceil(Math.abs(I/re*2)),M=[],j=I/U,V=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2);let X=E+j;for(let R=0;R<U;R++)M[R]=GI(E,X,J,H,fe,$,Ae,x,V,F,P),F=M[R][5],P=M[R][6],E=X,X+=j;return M})(d-n,c-e,o,s,a,A,i);for(let h=0,f=u.length;h<f;h++)u[h][1]+=n,u[h][2]+=e,u[h][3]+=n,u[h][4]+=e,u[h][5]+=n,u[h][6]+=e;return u},XI=n=>{let e=0,t=0,r=0,o=0;const s=[];let i,a=0,A=0;for(const d of n){const c=[...d];let u;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],u=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],u=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],u=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],o=c[2],u=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":a=c[3],A=c[4],e=c[5],t=c[6],u=["C",c[1],c[2],a,A,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":i==="C"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[3],t=c[4],u=["C",a,A,c[1],c[2],e,t],a=u[3],A=u[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":a=c[1],A=c[2],e=c[3],t=c[4],u=["Q",a,A,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":i==="Q"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[1],t=c[2],u=["Q",a,A,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":WI(e,t,c).forEach(h=>s.push(h)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=o,u=["Z"]}u?(s.push(u),i=u[0]):i=""}return s},yp=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),i5=(n,e,t,r,o,s,i,a)=>A=>{const d=A**3,c=(f=>3*f**2*(1-f))(A),u=(f=>3*f*(1-f)**2)(A),h=(f=>(1-f)**3)(A);return new bt(i*d+o*c+t*u+n*h,a*d+s*c+r*u+e*h)},a5=n=>n**2,A5=n=>2*n*(1-n),l5=n=>(1-n)**2,YI=(n,e,t,r,o,s,i,a)=>A=>{const d=a5(A),c=A5(A),u=l5(A),h=3*(u*(t-n)+c*(o-t)+d*(i-o)),f=3*(u*(r-e)+c*(s-r)+d*(a-s));return Math.atan2(f,h)},JI=(n,e,t,r,o,s)=>i=>{const a=a5(i),A=A5(i),d=l5(i);return new bt(o*a+t*A+n*d,s*a+r*A+e*d)},ZI=(n,e,t,r,o,s)=>i=>{const a=1-i,A=2*(a*(t-n)+i*(o-t)),d=2*(a*(r-e)+i*(s-r));return Math.atan2(d,A)},$w=(n,e,t)=>{let r=new bt(e,t),o=0;for(let s=1;s<=100;s+=1){const i=n(s/100);o+=yp(r.x,r.y,i.x,i.y),r=i}return o},eQ=(n,e)=>{let t,r=0,o=0,s={x:n.x,y:n.y},i=We({},s),a=.01,A=0;const d=n.iterator,c=n.angleFinder;for(;o<e&&a>1e-4;)i=d(r),A=r,t=yp(s.x,s.y,i.x,i.y),t+o>e?(r-=a,a/=2):(s=i,r+=a,o+=t);return We(We({},i),{},{angle:c(A)})},d5=n=>{let e,t,r=0,o=0,s=0,i=0,a=0;const A=[];for(const d of n){const c={x:o,y:s,command:d[0],length:0};switch(d[0]){case"M":t=c,t.x=i=o=d[1],t.y=a=s=d[2];break;case"L":t=c,t.length=yp(o,s,d[1],d[2]),o=d[1],s=d[2];break;case"C":e=i5(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t=c,t.iterator=e,t.angleFinder=YI(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t.length=$w(e,o,s),o=d[5],s=d[6];break;case"Q":e=JI(o,s,d[1],d[2],d[3],d[4]),t=c,t.iterator=e,t.angleFinder=ZI(o,s,d[1],d[2],d[3],d[4]),t.length=$w(e,o,s),o=d[3],s=d[4];break;case"Z":t=c,t.destX=i,t.destY=a,t.length=yp(o,s,i,a),o=i,s=a}r+=t.length,A.push(t)}return A.push({length:r,x:o,y:s}),A},tQ=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d5(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const o=t[r],s=e/o.length,i=n[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return We(We({},new bt(o.x,o.y).lerp(new bt(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return We(We({},new bt(o.x,o.y).lerp(new bt(i[1],i[2]),s)),{},{angle:Math.atan2(i[2]-o.y,i[1]-o.x)});case"C":case"Q":return eQ(o,e)}},rQ=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Vw=new RegExp($I,"g"),nQ=new RegExp(hl,"gi"),oQ={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},sQ=n=>{var e;const t=[],r=(e=n.match(rQ))!==null&&e!==void 0?e:[];for(const o of r){const s=o[0];if(s==="z"||s==="Z"){t.push([s]);continue}const i=oQ[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Vw.lastIndex=0;for(let A=null;A=Vw.exec(o);)a.push(...A.slice(1))}else a=o.match(nQ)||[];for(let A=0;A<a.length;A+=i){const d=new Array(i),c=VI[s];d[0]=A>0&&c?c:s;for(let u=0;u<i;u++)d[u+1]=parseFloat(a[A+u]);t.push(d)}}return t},iQ=(n,e)=>n.map(t=>t.map((r,o)=>o===0||e===void 0?r:Pn(r,e)).join(" ")).join(" ");function j0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[o,s]=r;return t.setProperty(o,s)}))}class aQ extends NB{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Ge(this,"upper",void 0),Ge(this,"container",void 0);const{el:o}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),o.parentNode&&o.parentNode.replaceChild(i,o),i.append(o,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=yi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Yd().createElement("div");return e.setAttribute("data-fabric","wrapper"),j0(e,{position:"relative"}),zw(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:o}=t;j0(e,We(We({},r),{},{"touch-action":o?"manipulation":fs})),zw(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:o}=this.upper;DB(r,o,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),T0(this.upper.el,e),T0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:o}=this.upper;super.cleanupDOM(e),t.removeChild(o),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Vi().dispose(this.upper.el),delete this.upper,delete this.container}}class Ag extends x1{constructor(){super(...arguments),Ge(this,"targets",[]),Ge(this,"_hoveredTargets",[]),Ge(this,"_objectsToRender",void 0),Ge(this,"_currentTransform",null),Ge(this,"_groupSelector",null),Ge(this,"contextTopDirty",!1)}static getDefaults(){return We(We({},super.getDefaults()),Ag.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new aQ(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const o=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+o,-r+o),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const a=Math.round(o*this.getRetinaScaling());return uI(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),o=this._activeObject;return!!(!t||t&&o&&r.length>1&&r.indexOf(t)===-1&&o!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&o&&o!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let o;return t===tg||t===ms||t===Js||t===Bu?o=this.centeredScaling||e.centeredScaling:t===w1&&(o=this.centeredRotation||e.centeredRotation),o?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Gn:["mr","tr","br"].includes(t)&&(r.x=en),["tl","mt","tr"].includes(t)?r.y=U0:["bl","mb","br"].includes(t)&&(r.y=hs)),r}_setupCurrentTransform(e,t,r){var o;const s=t.group?Ed(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:a}=t.getActiveControl()||{},A=r&&a?(o=a.getActionHandler(e,t,a))===null||o===void 0?void 0:o.bind(a):QF,d=((f,g,m,y)=>{if(!g||!f)return"drag";const b=y.controls[g];return b.getActionName(m,b,y)})(r,i,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,d,c)?{x:Lr,y:Lr}:this._getOriginFromCorner(t,i),h={target:t,action:d,actionHandler:A,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Jn(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:We(We({},HB(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=h,this.fire("before:transform",{e,transform:h})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new bt(t,r).transform(this.viewportTransform),a=new bt(t+o,r+s).transform(this.viewportTransform),A=this.selectionLineWidth/2;let d=Math.min(i.x,a.x),c=Math.min(i.y,a.y),u=Math.max(i.x,a.x),h=Math.max(i.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,c,u-d,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=A,c+=A,u-=A,h-=A,wo.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,c,u-d,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,o=this.getActiveObjects();if(this.targets=[],r&&o.length>=1){if(r.findControl(t,L0(e))||o.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&i&&i!==r?(this.targets=s,r):i}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const o=this.getZoom(),s=e.padding/o;if(s){const[i,a,A,d]=r,c=Math.atan2(a.y-i.y,a.x-i.x),u=Ca(c)*s,h=Sa(c)*s,f=u+h,g=u-h;r=[new bt(i.x-g,i.y-f),new bt(a.x+f,a.y-g),new bt(A.x+g,A.y+f),new bt(d.x-f,d.y+g)]}return Ln.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Ed(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const o=e[r];if(this._checkTarget(o,t)){if(Of(o)&&o.subTargetCheck){const s=this._searchPossibleTargets(o._objects,t);s&&this.targets.push(s)}return o}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Of(r)&&r.interactive&&this.targets[0]){const o=this.targets;for(let s=o.length-1;s>0;s--){const i=o[s];if(!Of(i)||!i.interactive)return i}return o[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,o=r.getBoundingClientRect();let s=xF(e),i=o.width||0,a=o.height||0;i&&a||(hs in o&&U0 in o&&(a=Math.abs(o.top-o.bottom)),Gn in o&&en in o&&(i=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Ed(s,void 0,this.viewportTransform));const A=this.getRetinaScaling();A!==1&&(s.x/=A,s.y/=A);const d=i===0||a===0?new bt(1,1):new bt(r.width/i,r.height/a);return s.multiply(d)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=yi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return qA(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,o=!1;const s=this.getActiveObjects(),i=[],a=[];e.forEach(A=>{s.includes(A)||(r=!0,A.fire("deselected",{e:t,target:A}),a.push(A))}),s.forEach(A=>{e.includes(A)||(r=!0,A.fire("selected",{e:t,target:A}),i.push(A))}),e.length>0&&s.length>0?(o=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:a})):s.length>0?(o=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(o=!0,this.fire("selection:cleared",{e:t,deselected:a})),o&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),o=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),o}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,qA(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),qA(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const o=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),o}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,o={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",o),r.fire(up,o))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;qA(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const o=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(o),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&qA(t)&&this._activeObject===t){const r=ec(e,["angle","flipX","flipY",en,ms,Js,Jd,Zd,hs]);return CF(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const o=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(o)}}Ge(Ag,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class AQ{constructor(e){Ge(this,"targets",[]),Ge(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:o}=e.getActiveObject()||{};o&&o.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),dd(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const lQ=["target","oldTarget","fireCanvas","e"],Ss={passive:!1},ed=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Xa=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Ks=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},dQ={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class R0 extends Ag{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Ge(this,"_isClick",void 0),Ge(this,"textEditingManager",new AQ(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Xa,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,o=this._getEventPrefix();e(OB(r),"resize",this._onResize),e(r,o+"down",this._onMouseDown),e(r,"".concat(o,"move"),this._onMouseMove,Ss),e(r,"".concat(o,"out"),this._onMouseOut),e(r,"".concat(o,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Ss)}removeListeners(){this.addOrRemove(Ks,"remove");const e=this._getEventPrefix(),t=pi(this.upperCanvasEl);Ks(t,"".concat(e,"up"),this._onMouseUp),Ks(t,"touchend",this._onTouchEnd,Ss),Ks(t,"".concat(e,"move"),this._onMouseMove,Ss),Ks(t,"touchmove",this._onMouseMove,Ss),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=We({e},ed(this,e));this.fire("mouse:out",We(We({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",We({},r)),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",We(We({},r),{},{target:o})),o&&o.fire("mouseout",We({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",We({e},ed(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Xa(this.upperCanvasEl,"drag",this._onDragProgress)}P0(e)}_renderDragEffects(e,t,r){let o=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),o=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),o=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),o=!0),i.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==fs,r=t?this._activeObject:void 0,o={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Ks(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",o),this._dragSource&&this._dragSource.fire("dragend",o),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:o}=this.findDragTargets(e),s=this._dragSource,i={e,target:r,subTargets:o,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(a=r),r.fire(t,i));for(let A=0;A<o.length;A++){const d=o[A];d.canDrop(e)&&(a=d),d.fire(t,i)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),o={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,o)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),o=this._basicEventHandler("drop:before",We({e,target:t,subTargets:r,dragSource:this._dragSource},ed(this,e)));o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],o=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&P0(e),this._basicEventHandler("contextmenu",o),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const o=this.upperCanvasEl,s=this._getEventPrefix(),i=pi(o);Xa(i,"touchend",this._onTouchEnd,Ss),t&&Xa(i,"touchmove",this._onMouseMove,Ss),Ks(o,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Ks(t,"".concat(r,"move"),this._onMouseMove,Ss);const o=pi(t);Xa(o,"".concat(r,"up"),this._onMouseUp),Xa(o,"".concat(r,"move"),this._onMouseMove,Ss)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=pi(this.upperCanvasEl);Ks(r,"touchend",this._onTouchEnd,Ss),Ks(r,"touchmove",this._onMouseMove,Ss),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Xa(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const o=pi(this.upperCanvasEl);Ks(o,"".concat(r,"up"),this._onMouseUp),Ks(o,"".concat(r,"move"),this._onMouseMove,Ss),Xa(t,"".concat(r,"move"),this._onMouseMove,Ss)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,o=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,A,d=!1;if(r&&(this._finalizeCurrentTransform(e),d=r.actionPerformed),!o){const c=s===this._activeObject;this.handleSelection(e),d||(d=this._shouldRender(s)||!c&&s===this._activeObject)}if(s){const c=s.findControl(this.getViewportPoint(e),L0(e)),{key:u,control:h}=c||{};if(A=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),d=!0;else if(h){const f=h.getMouseUpHandler(e,s,h);f&&(a=this.getScenePoint(e),f.call(h,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==A)){const c=r.target&&r.target.controls[r.corner],u=c&&c.getMouseUpHandler(e,r.target,c);a=a||this.getScenePoint(e),u&&u.call(c,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),d?this.requestRenderAll():o||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:o=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<o.length;s++)o[s]!==r&&o[s].fire(e,t);return t}_handleEvent(e,t){const r=this._target,o=this.targets||[],s=We(We({e,target:r,subTargets:o},ed(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let i=0;i<o.length;i++)o[i]!==r&&o[i].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const i=this.getScenePoint(e);this._groupSelector={x:i.x,y:i.y,deltaY:0,deltaX:0}}if(t){const i=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),L0(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,i);const A=a?a.control:void 0,d=this.getScenePoint(e),c=A&&A.getMouseDownHandler(e,t,A);c&&c.call(A,e,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Ed(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:o[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("drag",We(We({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("drag",We(We({},t),{},{target:s[a],oldTarget:o[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:o,fireCanvas:s,e:i}=t,a=Qn(t,lQ);const{targetIn:A,targetOut:d,canvasIn:c,canvasOut:u}=dQ[e],h=o!==r;if(o&&h){const f=We(We({},a),{},{e:i,target:o,nextTarget:r},ed(this,i));s&&this.fire(u,f),o.fire(d,f)}if(r&&h){const f=We(We({},a),{},{e:i,target:r,previousTarget:o},ed(this,i));s&&this.fire(c,f),r.fire(A,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,o=r.target,s=o.group?Ed(t,void 0,o.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:o,actionHandler:s,target:i}=t,a=!!s&&s(e,t,r.x,r.y);a&&i.setCoords(),o==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const o=qA(this._activeObject)?this._activeObject:null,s=(!o||t.group!==o)&&t.findControl(this.getViewportPoint(e));if(s){const i=s.control;this.setCursor(i.cursorStyleHandler(e,i,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(i=>{r=i.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,o=qA(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||o)&&(o||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(o){const s=r.getObjects();if(t===r){const i=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,i)||this.searchPossibleTargets(this._objects,i))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Zt.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new bt(t,r),a=i.add(new bt(o,s)),A=i.min(a),d=i.max(a).subtract(A),c=this.collectObjects({left:A.x,top:A.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(h=>!h.onSelect({e})).reverse():c;if(u.length===1)this.setActiveObject(u[0],e);else if(u.length>1){const h=Zt.getClass("ActiveSelection");this.setActiveObject(new h(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const c5={x1:0,y1:0,x2:0,y2:0},cQ=We(We({},c5),{},{r1:0,r2:0}),vd=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,uQ=/^(\d+\.\d+)%|(\d+)%$/;function u5(n){return n&&uQ.test(n)}function h5(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(u5(n)?100:1):NaN;return Md(0,vd(t,e),1)}const hQ=/\s*;\s*/,fQ=/\s*:\s*/;function pQ(n,e){let t,r;const o=n.getAttribute("style");if(o){const i=o.split(hQ);i[i.length-1]===""&&i.pop();for(let a=i.length;a--;){const[A,d]=i[a].split(fQ).map(c=>c.trim());A==="stop-color"?t=d:A==="stop-opacity"&&(r=d)}}const s=new Ps(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:h5(n.getAttribute("offset"),0),color:s.toRgb(),opacity:vd(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function gQ(n,e){const t=[],r=n.getElementsByTagName("stop"),o=h5(e,1);for(let s=r.length;s--;)t.push(pQ(r[s],o));return t}function f5(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function p5(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function si(n,e){return n.getAttribute(e)}function vQ(n,e){return function(t,r){let o,{width:s,height:i,gradientUnits:a}=r;return Object.keys(t).reduce((A,d)=>{const c=t[d];return c==="Infinity"?o=1:c==="-Infinity"?o=0:(o=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&u5(c)&&(o*=.01,a==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(o*=s),d!=="y1"&&d!=="y2"||(o*=i)))),A[d]=o,A},{})}(f5(n)==="linear"?function(t){return{x1:si(t,"x1")||0,y1:si(t,"y1")||0,x2:si(t,"x2")||"100%",y2:si(t,"y2")||0}}(n):function(t){return{x1:si(t,"fx")||si(t,"cx")||"50%",y1:si(t,"fy")||si(t,"cy")||"50%",r1:0,x2:si(t,"cx")||"50%",y2:si(t,"cy")||"50%",r2:si(t,"r")||"50%"}}(n),We(We({},e),{},{gradientUnits:p5(n)}))}class Ph{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:o={},colorStops:s=[],offsetX:i=0,offsetY:a=0,gradientTransform:A,id:d}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:We(We({},t==="radial"?cQ:c5),o),colorStops:s,offsetX:i,offsetY:a,gradientTransform:A,id:d?"".concat(d,"_").concat(yA()):yA()})}addColorStop(e){for(const t in e){const r=new Ps(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return We(We({},ec(this,e)),{},{type:this.type,coords:We({},this.coords),colorStops:this.colorStops.map(t=>We({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],o=this.gradientTransform?this.gradientTransform.concat():rs.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(u=>We({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,A=-this.offsetY;var d;s==="objectBoundingBox"?(a/=e.width,A/=e.height):(a+=e.width/2,A+=e.height/2),(d=e)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,A-=e.pathOffset.y),o[4]-=a,o[5]-=A;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(pp(o),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:f,y2:g}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:f,y2:g,r1:m,r2:y}=this.coords,b=m>y;r.push("<radialGradient ",c,' cx="',b?u:f,'" cy="',b?h:g,'" r="',b?m:y,'" fx="',b?f:u,'" fy="',b?g:h,`">
`),b&&(i.reverse(),i.forEach(F=>{F.offset=1-F.offset}));const S=Math.min(m,y);if(S>0){const F=S/Math.max(m,y);i.forEach(P=>{P.offset+=F*(1-P.offset)})}}return i.forEach(u=>{let{color:h,offset:f,opacity:g}=u;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',h,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:o,y2:s,r1:i,r2:a}=this.coords,A=this.type==="linear"?e.createLinearGradient(t,r,o,s):e.createRadialGradient(t,r,i,o,s,a);return this.colorStops.forEach(d=>{let{color:c,opacity:u,offset:h}=d;A.addColorStop(h,u!==void 0?new Ps(c).setAlpha(u).toRgba():c)}),A}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(We(We({},e),{},{colorStops:t?t.map(o=>We({},o)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const o=p5(e),s=t._findCenterFromElement();return new this(We({id:e.getAttribute("id")||void 0,type:f5(e),coords:vQ(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:gQ(e,r.opacity),gradientUnits:o,gradientTransform:N0(e.getAttribute("gradientTransform")||"")},o==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Ge(Ph,"type","Gradient"),Zt.setClass(Ph,"gradient"),Zt.setClass(Ph,"linear"),Zt.setClass(Ph,"radial");const mQ=["type","source","patternTransform"];class wv{get type(){return"pattern"}set type(e){wA("warn","Setting type has no effect",e)}constructor(e){Ge(this,"repeat","repeat"),Ge(this,"offsetX",0),Ge(this,"offsetY",0),Ge(this,"crossOrigin",""),this.id=yA(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return We(We({},ec(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Pn(this.offsetX,Gr.NUM_FRACTION_DIGITS),offsetY:Pn(this.offsetY,Gr.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:o,repeat:s,id:i}=this,a=vd(this.offsetX/t,0),A=vd(this.offsetY/r,0),d=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):vd(o.width/t,0),c=s==="repeat-x"||s==="no-repeat"?1+Math.abs(A||0):vd(o.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(a,'" y="').concat(A,'" width="').concat(d,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(o.width,'" height="').concat(o.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:o,patternTransform:s}=e,i=Qn(e,mQ);const a=await Nf(o,We(We({},t),{},{crossOrigin:i.crossOrigin}));return new this(We(We({},i),{},{patternTransform:s&&s.slice(0),source:a}))}}Ge(wv,"type","Pattern"),Zt.setClass(wv),Zt.setClass(wv,"pattern");const wQ=["path","left","top"],yQ=["d"];class KA extends wo{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:o,top:s}=t,i=Qn(t,wQ);super(),Object.assign(this,KA.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),typeof o=="number"&&this.set(en,o),typeof s=="number"&&this.set(hs,s)}_setPath(e,t){this.path=XI(Array.isArray(e)?e:sQ(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new bt(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const o of this.path)switch(o[0]){case"L":e.lineTo(o[1]+t,o[2]+r);break;case"M":e.moveTo(o[1]+t,o[2]+r);break;case"C":e.bezierCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r,o[5]+t,o[6]+r);break;case"Q":e.quadraticCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=iQ(this.path,Gr.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Gr.NUM_FRACTION_DIGITS;return" translate(".concat(Pn(-this.pathOffset.x,e),", ").concat(Pn(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:o}=this._calcDimensions();this.set({width:t,height:r,pathOffset:o}),e&&this.setPositionByOrigin(o,Lr,Lr)}_calcBoundsFromPath(){const e=[];let t=0,r=0,o=0,s=0;for(const i of this.path)switch(i[0]){case"L":o=i[1],s=i[2],e.push({x:t,y:r},{x:o,y:s});break;case"M":o=i[1],s=i[2],t=o,r=s;break;case"C":e.push(...Kw(o,s,i[1],i[2],i[3],i[4],i[5],i[6])),o=i[5],s=i[6];break;case"Q":e.push(...Kw(o,s,i[1],i[2],i[1],i[2],i[3],i[4])),o=i[3],s=i[4];break;case"Z":o=t,s=r}return Ba(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return We(We({},e),{},{pathOffset:new bt(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const o=Qa(e,this.ATTRIBUTE_NAMES,r),{d:s}=o;return new this(s,We(We(We({},Qn(o,yQ)),t),{},{left:void 0,top:void 0}))}}Ge(KA,"type","Path"),Ge(KA,"cacheProperties",[...Ia,"path","fillRule"]),Ge(KA,"ATTRIBUTE_NAMES",[...zA,"d"]),Zt.setClass(KA),Zt.setSVGClass(KA);const bQ=["left","top","radius"],g5=["radius","startAngle","endAngle","counterClockwise"];class ga extends wo{static getDefaults(){return We(We({},super.getDefaults()),ga.ownDefaults)}constructor(e){super(),Object.assign(this,ga.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Jn(this.startAngle),Jn(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(ms)}getRadiusY(){return this.get("radius")*this.get(Js)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...g5,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Jn(this.startAngle),o=Jn(this.endAngle),s=Ca(r)*t,i=Sa(r)*t,a=Ca(o)*t,A=Sa(o)*t,d=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(d," ").concat(c," ").concat(a," ").concat(A,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const o=Qa(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:a=0}=o;return new this(We(We({},Qn(o,bQ)),{},{radius:a,left:s-a,top:i-a}))}static fromObject(e){return super._fromObject(e)}}Ge(ga,"type","Circle"),Ge(ga,"cacheProperties",[...Ia,...g5]),Ge(ga,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Ge(ga,"ATTRIBUTE_NAMES",["cx","cy","r",...zA]),Zt.setClass(ga),Zt.setSVGClass(ga);const _Q=["x1","y1","x2","y2"],BQ=["x1","y1","x2","y2"],q0=["x1","x2","y1","y2"];class $A extends wo{constructor(){let[e,t,r,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,$A.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=o,this._setWidthHeight();const{left:i,top:a}=s;typeof i=="number"&&this.set(en,i),typeof a=="number"&&this.set(hs,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:o}=this;this.width=Math.abs(r-e),this.height=Math.abs(o-t);const{left:s,top:i,width:a,height:A}=Ba([{x:e,y:t},{x:r,y:o}]),d=new bt(s+a/2,i+A/2);this.setPositionByOrigin(d,Lr,Lr)}_set(e,t){return super._set(e,t),q0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var o;Gs(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new bt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:o,width:s,height:i}=this,a=e<=t?-1:1,A=r<=o?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:A*i/2,y2:A*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(o,`" />
`)]}static async fromElement(e,t,r){const o=Qa(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:a=0,y2:A=0}=o;return new this([s,i,a,A],Qn(o,_Q))}static fromObject(e){let{x1:t,y1:r,x2:o,y2:s}=e,i=Qn(e,BQ);return this._fromObject(We(We({},i),{},{points:[t,r,o,s]}),{extraParam:"points"})}}Ge($A,"type","Line"),Ge($A,"cacheProperties",[...Ia,...q0]),Ge($A,"ATTRIBUTE_NAMES",zA.concat(q0)),Zt.setClass($A),Zt.setSVGClass($A);class ZA extends wo{static getDefaults(){return We(We({},super.getDefaults()),ZA.ownDefaults)}constructor(e){super(),Object.assign(this,ZA.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Ge(ZA,"type","Triangle"),Ge(ZA,"ownDefaults",{width:100,height:100}),Zt.setClass(ZA),Zt.setSVGClass(ZA);const v5=["rx","ry"];class va extends wo{static getDefaults(){return We(We({},super.getDefaults()),va.ownDefaults)}constructor(e){super(),Object.assign(this,va.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(ms)}getRy(){return this.get("ry")*this.get(Js)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...v5,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,dp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const o=Qa(e,this.ATTRIBUTE_NAMES,r);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}function xQ(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Ge(va,"type","Ellipse"),Ge(va,"cacheProperties",[...Ia,...v5]),Ge(va,"ownDefaults",{rx:0,ry:0}),Ge(va,"ATTRIBUTE_NAMES",[...zA,"cx","cy","rx","ry"]),Zt.setClass(va),Zt.setSVGClass(va);const zQ=["left","top"],m5={exactBoundingBox:!1};class hi extends wo{static getDefaults(){return We(We({},super.getDefaults()),hi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ge(this,"strokeDiff",void 0),Object.assign(this,hi.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:o}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(en,r),typeof o=="number"&&this.set(hs,o)}isOpen(){return!0}_projectStrokeOnPoints(e){return fI(this.points,e,this.isOpen())}_calcDimensions(e){e=We({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(d=>d.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new bt,strokeOffset:new bt,strokeDiff:new bt};const r=Ba(t),o=rg(We(We({},e),{},{scaleX:1,scaleY:1})),s=Ba(this.points.map(d=>ds(d,o,!0))),i=new bt(this.scaleX,this.scaleY);let a=r.left+r.width/2,A=r.top+r.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(Jn(this.skewX)),A-=a*Math.tan(Jn(this.skewY))),We(We({},r),{},{pathOffset:new bt(a,A),strokeOffset:new bt(s.left,s.top).subtract(new bt(r.left,r.top)).multiply(i),strokeDiff:new bt(r.width,r.height).subtract(new bt(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=Ba(this.points);return new bt(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}=this._calcDimensions();this.set({width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}),e&&this.setPositionByOrigin(new bt(t+o/2,r+s/2),Lr,Lr)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new bt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:A}=this._calcDimensions(e);i=new bt((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:A)}else{var o,s;i=new bt((o=e.width)!==null&&o!==void 0?o:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return i.multiply(new bt(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,o=super._set(e,t);return this.exactBoundingBox&&r&&((e===ms||e===Js)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),o}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:o}=t;return{x:r,y:o}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,o=Gr.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push(Pn(this.points[s].x-t,o),",",Pn(this.points[s].y-r,o)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(let s=0;s<t;s++){const i=this.points[s];e.lineTo(i.x-r,i.y-o)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(xQ(e.getAttribute("points")),We(We({},Qn(Qa(e,this.ATTRIBUTE_NAMES,r),zQ)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Ge(hi,"ownDefaults",m5),Ge(hi,"type","Polyline"),Ge(hi,"layoutProperties",[Jd,Zd,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Ge(hi,"cacheProperties",[...Ia,"points"]),Ge(hi,"ATTRIBUTE_NAMES",[...zA]),Zt.setClass(hi),Zt.setSVGClass(hi);class kh extends hi{isOpen(){return!1}}Ge(kh,"ownDefaults",m5),Ge(kh,"type","Polygon"),Zt.setClass(kh),Zt.setSVGClass(kh);const w5=["fontSize","fontWeight","fontFamily","fontStyle"],y5=["underline","overline","linethrough"],b5=[...w5,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_5=[...b5,...y5,"textBackgroundColor","direction"],CQ=[...w5,...y5,ps,"strokeWidth",Ao,"deltaY","textBackgroundColor"],SQ={_reNewline:m1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:en,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:en,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Oi="justify",bp="justify-left",iu="justify-right",au="justify-center";class B5 extends wo{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const o in t[r])for(const s in t[r][o])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const o in r)for(const s in r[o])if(r[o][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,o,s=0,i=!0,a=0;for(const A in t){r=0;for(const d in t[A]){const c=t[A][d]||{};s++,c[e]!==void 0?(o?c[e]!==o&&(i=!1):o=c[e],c[e]===this[e]&&delete c[e]):i=!1,Object.keys(c).length!==0?r++:delete t[A][d]}r===0&&delete t[A]}for(let A=0;A<this._textLines.length;A++)a+=this._textLines[A].length;i&&s===a&&(this[e]=o,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,o,s;for(o in t){for(s in r=t[o],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[o]}}_extendStyles(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=B1(We(We({},this._getStyleDeclaration(r,o)),t),i=>i!==void 0);this._setStyleDeclaration(r,o,s)}getSelectionStyles(e,t,r){const o=[];for(let s=e;s<(t||e);s++)o.push(this.getStyleAtPosition(s,r));return o}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,o):this._getStyleDeclaration(r,o)}setSelectionStyles(e,t,r){for(let o=t;o<(r||t);o++)this._extendStyles(o,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const o=this.styles&&this.styles[e];return o&&(r=o[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return We(We({},ec(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Ge(B5,"_styleProperties",CQ);const EQ=/  +/g,FQ=/"/g;function yv(n,e,t,r,o){return"		".concat(function(s,i){let{left:a,top:A,width:d,height:c}=i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gr.NUM_FRACTION_DIGITS;const h=zu(Ao,s,!1),[f,g,m,y]=[a,A,d,c].map(b=>Pn(b,u));return"<rect ".concat(h,' x="').concat(f,'" y="').concat(g,'" width="').concat(m,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:o}),`
`)}const IQ=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let bv;class Yo extends B5{static getDefaults(){return We(We({},super.getDefaults()),Yo.ownDefaults)}constructor(e,t){super(),Ge(this,"__charBounds",[]),Object.assign(this,Yo.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=d5(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Oi)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,o,s,i,a;for(let A=0,d=this._textLines.length;A<d;A++)if((this.textAlign===Oi||A!==d-1&&!this.isEndOfWrapping(A))&&(o=0,s=this._textLines[A],t=this.getLineWidth(A),t<this.width&&(a=this.textLines[A].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let c=0;c<=s.length;c++)i=this.__charBounds[A][c],this._reSpaceAndTab.test(s[c])?(i.width+=e,i.kernedWidth+=e,i.left+=o,o+=e):i.left+=o}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<r.length;o++){if(e<=r[o].length)return{lineIndex:o,charIndex:e};e-=r[o].length+this.missingNewlineOffset(o,t)}return{lineIndex:o-1,charIndex:r[o-1].length<e?r[o-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ps?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Lr:e.textBaseline="middle";break;case"ascender":e.textBaseline=hs;break;case"descender":e.textBaseline=U0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const o=this.getLineWidth(t);o>e&&(e=o)}return e}_renderTextLine(e,t,r,o,s,i){this._renderChars(e,t,r,o,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let o=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){o+=a;continue}const A=this._textLines[s].length,d=this._getLineLeftOffset(s);let c,u,h=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let m=0;m<A;m++){const y=this.__charBounds[s][m];u=this.getValueOfPropertyAt(s,m,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=u,u&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):u!==g?(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=g,g&&e.fillRect(c,o,h,a/this.lineHeight),f=y.left,h=y.width,g=u):h+=y.kernedWidth}u&&!this.path&&(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=u,e.fillRect(c,o,h,a/this.lineHeight)),o+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,o){const s=ou.getFontCache(t),i=this._getFontDeclaration(t),a=r+e,A=r&&i===this._getFontDeclaration(o),d=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,f;if(r&&s[r]!==void 0&&(h=s[r]),s[e]!==void 0&&(f=c=s[e]),A&&s[a]!==void 0&&(u=s[a],f=u-h),c===void 0||h===void 0||u===void 0){const g=function(){return bv||(bv=Gi({width:0,height:0}).getContext("2d")),bv}();this._setTextStyles(g,t,!0),c===void 0&&(f=c=g.measureText(e).width,s[e]=c),h===void 0&&A&&r&&(h=g.measureText(r).width,s[r]=h),A&&u===void 0&&(u=g.measureText(a).width,s[a]=u,f=u-h)}return{width:c*d,kernedWidth:f*d}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,o=0;const s=this.pathSide===Gn,i=this.path,a=this._textLines[e],A=a.length,d=new Array(A);this.__charBounds[e]=d;for(let c=0;c<A;c++){const u=a[c];r=this._getGraphemeBox(u,e,c,t),d[c]=r,o+=r.kernedWidth,t=u}if(d[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let c=0;const u=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case en:c=s?u-o:0;break;case Lr:c=(u-o)/2;break;case Gn:c=s?0:u-o}c+=this.pathStartOffset*(s?-1:1);for(let h=s?A-1:0;s?h>=0:h<A;s?h--:h++)r=d[h],c>u?c%=u:c<0&&(c+=u),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,o=this.path,s=tQ(o.path,r,o.segmentsInfo);t.renderLeft=s.x-o.pathOffset.x,t.renderTop=s.y-o.pathOffset.y,t.angle=s.angle+(this.pathSide===Gn?Math.PI:0)}_getGraphemeBox(e,t,r,o,s){const i=this.getCompleteStyleDeclaration(t,r),a=o?this.getCompleteStyleDeclaration(t,r-1):{},A=this._measureChar(e,i,o,a);let d,c=A.kernedWidth,u=A.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),u+=d,c+=d);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];h.left=f.left+f.width+A.kernedWidth-A.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,o=this._textLines[e].length;r<o;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),t+=r===o-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const o=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const A=this.getHeightOfLine(i),d=A/this.lineHeight,c=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],o+c,s+r+d,i),r+=A}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ao))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,o,s,i){const a=this.getHeightOfLine(i),A=this.textAlign.includes(Oi),d=this.path,c=!A&&this.charSpacing===0&&this.isEmptyStyles(i)&&!d,u=this.direction==="ltr",h=this.direction==="ltr"?1:-1,f=t.direction;let g,m,y,b,S,F="",P=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?en:Gn),s-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),o,s),void t.restore();for(let L=0,re=r.length-1;L<=re;L++)b=L===re||this.charSpacing||d,F+=r[L],y=this.__charBounds[i][L],P===0?(o+=h*(y.kernedWidth-y.width),P+=y.width):P+=y.kernedWidth,A&&!b&&this._reSpaceAndTab.test(r[L])&&(b=!0),b||(g=g||this.getCompleteStyleDeclaration(i,L),m=this.getCompleteStyleDeclaration(i,L+1),b=U1(g,m,!1)),b&&(d?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,i,L,F,-P/2,0),t.restore()):(S=o,this._renderChar(e,t,i,L,F,S,s)),F="",g=m,o+=h*P,P=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,o=Gi({width:t,height:r}),s=o.getContext("2d");return o.width=t,o.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(o,"no-repeat")}handleFiller(e,t,r){let o,s;return Gs(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:o}=t;return e.lineWidth=o,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,o,s,i,a){const A=this._getStyleDeclaration(r,o),d=this.getCompleteStyleDeclaration(r,o),c=e==="fillText"&&d.fill,u=e==="strokeText"&&d.stroke&&d.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(d),A.textBackgroundColor&&this._removeShadow(t),A.deltaY&&(a+=A.deltaY),c){const h=this._setFillStyles(t,d);t.fillText(s,i-h.offsetX,a-h.offsetY)}if(u){const h=this._setStrokeStyles(t,d);t.strokeText(s,i-h.offsetX,a-h.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),i=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,o=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let a=0;return o===Oi||o===au&&!i||o===iu&&!i||o===bp&&!i?0:(o===Lr&&(a=r/2),o===Gn&&(a=r),o===au&&(a=r/2),o===iu&&(a=r),s==="rtl"&&(o===Gn||o===Oi||o===iu?a=0:o===en||o===bp?a=-r:o!==Lr&&o!==au||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var o;return(o=this._getStyleDeclaration(e,t)[r])!==null&&o!==void 0?o:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const o=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let A=0,d=this._textLines.length;A<d;A++){const c=this.getHeightOfLine(A);if(!this[t]&&!this.styleHas(t,A)){r+=c;continue}const u=this._textLines[A],h=c/this.lineHeight,f=this._getLineLeftOffset(A);let g,m,y=0,b=0,S=this.getValueOfPropertyAt(A,0,t),F=this.getValueOfPropertyAt(A,0,Ao);const P=r+h*(1-this._fontSizeFraction);let L=this.getHeightOfChar(A,0),re=this.getValueOfPropertyAt(A,0,"deltaY");for(let H=0,J=u.length;H<J;H++){const we=this.__charBounds[A][H];g=this.getValueOfPropertyAt(A,H,t),m=this.getValueOfPropertyAt(A,H,Ao);const O=this.getHeightOfChar(A,H),D=this.getValueOfPropertyAt(A,H,"deltaY");if(s&&g&&m)e.save(),e.fillStyle=F,e.translate(we.renderLeft,we.renderTop),e.rotate(we.angle),e.fillRect(-we.kernedWidth/2,a*O+D,we.kernedWidth,this.fontSize/15),e.restore();else if((g!==S||m!==F||O!==L||D!==re)&&b>0){let Z=o+f+y;this.direction==="rtl"&&(Z=this.width-Z-b),S&&F&&(e.fillStyle=F,e.fillRect(Z,P+a*L+re,b,this.fontSize/15)),y=we.left,b=we.width,S=g,F=m,L=O,re=D}else b+=we.kernedWidth}let K=o+f+y;this.direction==="rtl"&&(K=this.width-K-b),e.fillStyle=m,g&&m&&e.fillRect(K,P+a*L+re,b-i,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||Yo.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:o,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Q1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),o=[`
`];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],o);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject([..._5,...e])),{},{styles:vI(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let o=!1,s=!1;if(typeof e=="object")for(const i in e)i==="path"&&this.setPathInfo(),o=o||r.includes(i),s=s||i==="path";else o=r.includes(e),s=e==="path";return s&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const o=Qa(e,Yo.ATTRIBUTE_NAMES,r),s=We(We({},t),o),{textAnchor:i=en,textDecoration:a="",dx:A=0,dy:d=0,top:c=0,left:u=0,fontSize:h=v1,strokeWidth:f=1}=s,g=Qn(s,IQ),m=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),We({left:u+A,top:c+d,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:h},g)),y=m.getScaledHeight()/m.height,b=((m.height+m.strokeWidth)*m.lineHeight-m.height)*y,S=m.getScaledHeight()+b;let F=0;return i===Lr&&(F=m.getScaledWidth()/2),i===Gn&&(F=m.getScaledWidth()),m.set({left:m.left-F,top:m.top-(S-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:f}),m}static fromObject(e){return this._fromObject(We(We({},e),{},{styles:mI(e.styles||{},e.text)}),{extraParam:"text"})}}Ge(Yo,"textLayoutProperties",b5),Ge(Yo,"cacheProperties",[...Ia,..._5]),Ge(Yo,"ownDefaults",SQ),Ge(Yo,"type","Text"),Ge(Yo,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ge(Yo,"ATTRIBUTE_NAMES",zA.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),t5(Yo,[class extends $B{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(FQ,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let o,s=n;this.backgroundColor&&r.push(...yv(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,a=this._textLines.length;i<a;i++)o=this._getLineLeftOffset(i),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,e+o,s),this._setSVGTextLineText(t,i,e+o,s),s+=this.getHeightOfLine(i);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(EQ)),s=o?'style="'.concat(o,'"'):"",i=e.deltaY,a=i?' dy="'.concat(Pn(i,Gr.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Pn(t,Gr.NUM_FRACTION_DIGITS),'" y="').concat(Pn(r,Gr.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(pI(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const o=this.getHeightOfLine(e),s=this.textAlign.includes(Oi),i=this._textLines[e];let a,A,d,c,u,h="",f=0;r+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,m=i.length-1;g<=m;g++)u=g===m||this.charSpacing,h+=i[g],d=this.__charBounds[e][g],f===0?(t+=d.kernedWidth-d.width,f+=d.width):f+=d.kernedWidth,s&&!u&&this._reSpaceAndTab.test(i[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(e,g),A=this.getCompleteStyleDeclaration(e,g+1),u=U1(a,A,!0)),u&&(c=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(h,c,t,r)),h="",a=A,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let i,a=0,A=0,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<o.length;c++){const{left:u,width:h,kernedWidth:f}=this.__charBounds[e][c];i=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),i!==d?(d&&n.push(...yv(d,t+A,r,a,s)),A=u,a=h,d=i):a+=f}i&&n.push(...yv(d,t+A,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:o,fill:s,fontSize:i,fontStyle:a,fontWeight:A,deltaY:d}=n,c=this.getSvgTextDecoration(n);return[o?zu(ps,o):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",c&&"text-decoration: ".concat(c,"; "),s?zu(Ao,s):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Zt.setClass(Yo),Zt.setSVGClass(Yo);class QQ{constructor(e){Ge(this,"target",void 0),Ge(this,"__mouseDownInPlace",!1),Ge(this,"__dragStartFired",!1),Ge(this,"__isDraggingOver",!1),Ge(this,"__dragStartSelection",void 0),Ge(this,"__dragImageDisposer",void 0),Ge(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:o,selectionEnd:s}=t;const i=this.target,a=i.canvas,A=new bt(i.flipX?-1:1,i.flipY?-1:1),d=i._getCursorBoundaries(o),c=new bt(d.left+d.leftOffset,d.top+d.topOffset).multiply(A).transform(i.calcTransformMatrix()),u=a.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),f=i.getBoundingRect(),g=c.subtract(new bt(f.left,f.top)),m=a.viewportTransform,y=g.add(u).transform(m,!0),b=i.backgroundColor,S=I1(i.styles);i.backgroundColor="";const F={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(F,0,o),i.setSelectionStyles(F,s,i.text.length),i.dirty=!0;const P=i.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=b,i.styles=S,i.dirty=!0,j0(P,{position:"fixed",left:"".concat(-P.width,"px"),border:fs,width:"".concat(P.width/h,"px"),height:"".concat(P.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{P.remove()},pi(e.target||this.target.hiddenTextarea).body.appendChild(P),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(P,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const o=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(o.selectionStart,o.selectionEnd).join(""),i=We({text:t.text,value:s},o);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,i)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,o=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!o){const i=this.target,a=i.canvas;let A=i.getSelectionStartFromPointer(r);const{styles:d}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const h=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;A>h&&A<=f?A=h:A>f&&(A-=f-h),i.removeChars(h,f),delete this.__dragStartSelection}i._reNewline.test(c)&&(i._reNewline.test(i._text[A])||A===i._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=i,i.insertChars(s,d,A),a.setActiveObject(i),i.enterEditing(r),i.selectionStart=Math.min(A+u,i._text.length),i.selectionEnd=Math.min(i.selectionStart+s.length,i._text.length),i.hiddenTextarea.value=i.text,i._updateTextarea(),i.hiddenTextarea.focus(),i.fire(cp,{index:A+u,action:"drop"}),a.fire("text:changed",{target:i}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const o=this.target,s=this.target.canvas,{selectionStart:i,selectionEnd:a}=this.__dragStartSelection,A=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||fs;A===fs?(o.selectionStart=i,o.selectionEnd=a,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),A==="move"&&(o.removeChars(i,a),o.selectionStart=o.selectionEnd=i,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(cp,{index:i,action:"dragend"}),s.fire("text:changed",{target:o}),s.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Gw=/[ \n\.,;!\?\-]/;class UQ extends Yo{constructor(){super(...arguments),Ge(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:o,onComplete:s}=e;return XB({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:o,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:i=>{this._currentCursorOpacity=i,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let o=e>0&&this._reSpace.test(r[e])&&(t===-1||!m1.test(r[e-1]))?e-1:e,s=r[o];for(;o>0&&o<r.length&&!Gw.test(s);)o+=t,s=r[o];return t===-1&&Gw.test(s)&&o++,o}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;pi(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),o=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&o!==s||o!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const o=r.slice(0,e),s=this.graphemeSplit(o).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const o=r.slice(0,e).join("").length;return e===t?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,a=t.leftOffset,A=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,c=d.width/A,u=d.height/A,h=c-i,f=u-i,g=new bt(t.left+a,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new bt(d.clientWidth/c,d.clientHeight/u));return g.x<0&&(g.x=0),g.x>h&&(g.x=h),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(up),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=i;a<this._unwrappedTextLines[s].length;a++){const A=this.styles[s][a];A&&(this.styles[r]||(this.styles[r]={}),this.styles[r][o+a-i]=A)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],A=i-o;for(let d=o;d<i;d++)delete a[d];for(const d in this.styles[r]){const c=parseInt(d,10);c>=i&&(a[c-A]=a[d],delete a[d])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const o in this.styles){const s=parseInt(o,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,o){const s={},i=this._unwrappedTextLines[e].length,a=i===t;let A=!1;r||(r=1),this.shiftLineStyles(e,r);const d=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(A=!0,s[h-t]=this.styles[e][u],a&&t===0||delete this.styles[e][u])}let c=!1;for(A&&!a&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)o&&o[r-1]?this.styles[e+r]={0:We({},o[r-1])}:d?this.styles[e+r]={0:We({},d)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,o){this.styles||(this.styles={});const s=this.styles[e],i=s?We({},s):{};r||(r=1);for(const A in i){const d=parseInt(A,10);d>=t&&(s[d+r]=i[d],i[d-r]||delete s[d])}if(this._forceClearCache=!0,o){for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=We({},o[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=We({},a)}insertNewStyleBlock(e,t,r){const o=this.get2DCursorLocation(t,!0),s=[0];let i,a=0;for(let A=0;A<e.length;A++)e[A]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),i=1;i<a;i++)s[i]>0?this.insertCharStyleObject(o.lineIndex+i,0,s[i],r):r&&this.styles[o.lineIndex+i]&&r[0]&&(this.styles[o.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(o.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;o>r&&this.removeStyleFromTo(r,o);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=en:this._selectionDirection===Gn&&(this._selectionDirection=en,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Gn?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Gn:this._selectionDirection===en&&(this._selectionDirection=Gn,this.selectionStart=t),this.selectionEnd=r)}}class TQ extends UQ{initHiddenTextarea(){const e=this.canvas&&pi(this.canvas.getElement())||Yd(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(i=>{let[a,A]=i;return t.setAttribute(a,A)});const{top:r,left:o,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(o,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(i=>{let[a,A]=i;return t.addEventListener(a,this[A].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(cp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,i=o.length,a=this.selectionStart,A=this.selectionEnd,d=a!==A;let c,u,h,f,g=i-s;const m=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>m.selectionStart;d?(u=this._text.slice(a,A),g+=A-a):i<s&&(u=y?this._text.slice(A+g,A):this._text.slice(a,a-g));const b=o.slice(m.selectionEnd-g,m.selectionEnd);if(u&&u.length&&(b.length&&(c=this.getSelectionStyles(a,a+1,!1),c=b.map(()=>c[0])),d?(h=a,f=A):y?(h=A-u.length,f=A):(h=A,f=A+u.length),this.removeStyleFromTo(h,f)),b.length){const{copyPasteData:S}=Vi();t&&b.join("")===S.copiedText&&!Gr.disableStyleCopyPaste&&(c=S.copiedTextStyle),this.insertNewStyleBlock(b,a,c)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:o}=t;this.compositionStart=r,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Vi();e.copiedText=this.getSelectedText(),Gr.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,o=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],o+=r.left+r.width),o}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(i).length+A+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s-1,a),d=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+A-d.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let o,s,i=this._getLineLeftOffset(e),a=0;for(let A=0,d=r.length;A<d;A++)if(o=this.__charBounds[e][A].width,i+=o,i>t){s=!0;const c=i-o,u=i,h=Math.abs(c-t);a=Math.abs(u-t)<h?A:A-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Gn);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const o=this.text.length;this.selectionStart=Md(0,this.selectionStart,o),this.selectionEnd=Md(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===en?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let o;if(e.altKey)o=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;o=this["findLineBoundary".concat(r)](this[t])}return o!==void 0&&this[t]!==o&&(this[t]=o,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=en,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Gn&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=en,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===en&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Gn,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Gn,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const _v=n=>!!n.button;class LQ extends TQ{constructor(){super(...arguments),Ge(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new QQ(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),P0(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!_v(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!_v(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const o=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||_v(t)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(gi(this.calcTransformMatrix())).add(new bt(-this._getLeftOffset(),-this._getTopOffset()));let r=0,o=0,s=0;for(let d=0;d<this._textLines.length&&r<=t.y;d++)r+=this.getHeightOfLine(d),s=d,d>0&&(o+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let i=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,A=this.__charBounds[s];for(let d=0;d<a;d++){const c=i+A[d].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-i)&&o++;break}i=c,o++}return Math.min(this.flipX?a-o:o,this._text.length)}}const Oh="moveCursorUp",Dh="moveCursorDown",Nh="moveCursorLeft",Mh="moveCursorRight",Hh="exitEditing",PQ=We({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Hh,27:Hh,33:Oh,34:Dh,35:Mh,36:Nh,37:Nh,38:Oh,39:Mh,40:Dh},keysMapRtl:{9:Hh,27:Hh,33:Oh,34:Dh,35:Nh,36:Mh,37:Mh,38:Oh,39:Nh,40:Dh},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class wa extends LQ{static getDefaults(){return We(We({},super.getDefaults()),wa.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,We(We({},wa.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof R0&&this.canvas.textEditingManager.remove(this),t instanceof R0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),o=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:o,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:o,lineIndex:s}=this.get2DCursorLocation(e);for(let d=0;d<s;d++)t+=this.getHeightOfLine(d);const i=this._getLineLeftOffset(s),a=this.__charBounds[s][o];a&&(r=a.left),this.charSpacing!==0&&o===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const A={top:t,left:i+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Gn||this.textAlign===Oi||this.textAlign===iu?A.left*=-1:this.textAlign===en||this.textAlign===bp?A.left=i-(r>0?r:0):this.textAlign!==Lr&&this.textAlign!==au||(A.left=i-(r>0?r:0))),A}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(o,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),A=this.cursorWidth/a,d=this.getValueOfPropertyAt(o,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-A/2,top:c+t.top+d,width:A,height:i}}_renderCursor(e,t,r){const{color:o,opacity:s,left:i,top:a,width:A,height:d}=this.getCursorRenderingData(r,t);e.fillStyle=o,e.globalAlpha=s,e.fillRect(i,a,A,d)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const o=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(Oi),a=this.get2DCursorLocation(o),A=this.get2DCursorLocation(s),d=a.lineIndex,c=A.lineIndex,u=a.charIndex<0?0:a.charIndex,h=A.charIndex<0?0:A.charIndex;for(let f=d;f<=c;f++){const g=this._getLineLeftOffset(f)||0;let m=this.getHeightOfLine(f),y=0,b=0,S=0;if(f===d&&(b=this.__charBounds[d][u].left),f>=d&&f<c)S=i&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===c)if(h===0)S=this.__charBounds[c][h].left;else{const K=this._getWidthOfCharSpacing();S=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-K}y=m,(this.lineHeight<1||f===c&&this.lineHeight>1)&&(m/=this.lineHeight);let F=r.left+g+b,P=m,L=0;const re=S-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",P=1,L=m):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Gn||this.textAlign===Oi||this.textAlign===iu?F=this.width-F-re:this.textAlign===en||this.textAlign===bp?F=r.left+g-S:this.textAlign!==Lr&&this.textAlign!==au||(F=r.left+g-S)),e.fillRect(F,r.top+r.topOffset+L,re,P),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ao)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Ge(wa,"ownDefaults",PQ),Ge(wa,"type","IText"),Zt.setClass(wa),Zt.setClass(wa,"i-text");class el extends wa{static getDefaults(){return We(We({},super.getDefaults()),el.ownDefaults)}constructor(e,t){super(e,We(We({},el.ownDefaults),t))}static createControls(){return{controls:cI()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Oi)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,o=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)e.graphemeText[o]===`
`&&i>0?(r=0,o++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&i>0&&(r++,o++),s[i]={line:t,offset:r},o+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,o=e+1,s=!1;const i=this._styleMap[e],a=this._styleMap[e+1];i&&(e=i.line,r=i.offset),a&&(o=a.line,s=o===e,t=a.offset);const A=e===void 0?this.styles:{line:this.styles[e]};for(const d in A)for(const c in A[d]){const u=parseInt(c,10);if(u>=r&&(!s||u<t))for(const h in A[d][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const o=this._styleMap[e];super._setStyleDeclaration(o.line,o.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),o=[];for(let s=0;s<r.wordsData.length;s++)o.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,o}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let o=0;return{wordsData:e.map((s,i)=>{let a=0;const A=t?this.graphemeSplit(s):this.wordSplit(s);return A.length===0?[{word:[],width:0}]:A.map(d=>{const c=t?[d]:this.graphemeSplit(d),u=this._measureWord(c,i,a);return o=Math.max(u,o),a+=c.length+r.length,{word:c,width:u}})}),largestWordWidth:o}}_measureWord(e,t){let r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let i=0,a=e.length;i<a;i++)s+=this._getGraphemeBox(e[i],t,i+o,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:o,wordsData:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),A=this.splitByGrapheme,d=[],c=A?"":" ";let u=0,h=[],f=0,g=0,m=!0;t-=i;const y=Math.max(t,o,this.dynamicMinWidth),b=s[e];let S;for(f=0,S=0;S<b.length;S++){const{word:F,width:P}=b[S];f+=F.length,u+=g+P-a,u>y&&!m?(d.push(h),h=[],u=P,m=!0):u+=a,m||A||h.push(c),h=h.concat(F),g=A?0:this._measureWord([c],e,f),f++,m=!1}return S&&d.push(h),o+i>this.dynamicMinWidth&&(this.dynamicMinWidth=o-a+i),d}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=r[s].join("");return t.lines=o,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const o=this._styleMap[t].line;e.set("".concat(o),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Ge(el,"type","Textbox"),Ge(el,"textLayoutProperties",[...wa.textLayoutProperties,"width"]),Ge(el,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Zt.setClass(el);class Ww extends ag{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:o,group:s}=r;if(!o||!this.shouldPerformLayout(e))return;const{width:i,height:a}=Ba(o5(r,o)),A=new bt(i,a);if(o.absolutePositioned)return{center:Ed(o.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:A};{const d=o.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new bt,correction:u=new bt}=this.calcBoundingBox(t,e)||{};return{center:c.add(d),correction:u.subtract(d),size:A}}return{center:r.getRelativeCenterPoint().add(d),size:A}}}}Ge(Ww,"type","clip-path"),Zt.setClass(Ww);class Xw extends ag{getInitialSize(e,t){let{target:r}=e,{size:o}=t;return new bt(r.width||o.x,r.height||o.y)}}Ge(Xw,"type","fixed"),Zt.setClass(Xw);class kQ extends Su{subscribeTargets(e){const t=e.target;e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((o,s)=>(s.parent&&o.add(s.parent),o),new Set).forEach(o=>{!r.some(s=>s.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[t]})})}}class tl extends il{static getDefaults(){return We(We({},super.getDefaults()),tl.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,tl.ownDefaults),this.setOptions(t);const{left:r,top:o,layoutManager:s}=t;this.groupInit(e,{left:r,top:o,layoutManager:s??new kQ})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(o=>{const s=this._objects.findIndex(a=>a.isInFrontOf(o)),i=s===-1?this.size():s;this.insertAt(i,o)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(wA("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(o=>{const{parent:s}=o;s&&r.add(s)}),e===L1?r.forEach(o=>{o._onAfterObjectsChange(mp,t)}):r.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o=We(We({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,o);super._renderControls(e,t),e.restore()}}Ge(tl,"type","ActiveSelection"),Ge(tl,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Zt.setClass(tl),Zt.setClass(tl,"activeSelection");class OQ{constructor(){Ge(this,"resources",{})}applyFilters(e,t,r,o,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,o);const a={sourceWidth:r,sourceHeight:o,imageData:i.getImageData(0,0,r,o),originalEl:t,originalImageData:i.getImageData(0,0,r,o),canvasEl:s,ctx:i,filterBackend:this};e.forEach(d=>{d.applyTo(a)});const{imageData:A}=a;return A.width===r&&A.height===o||(s.width=A.width,s.height=A.height),i.putImageData(A,0,0),a}}class x5{constructor(){let{tileSize:e=Gr.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ge(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Ge(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Gi({width:e,height:t}),o=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)}applyFilters(e,t,r,o,s,i){const a=this.gl,A=s.getContext("2d");if(!a||!A)return;let d;i&&(d=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:a,sourceTexture:this.createTexture(a,r,o,d?void 0:t),targetTexture:this.createTexture(a,r,o),originalTexture:d||this.createTexture(a,r,o,d?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),e.forEach(h=>{h&&h.applyTo(c)}),function(h){const f=h.targetCanvas,g=f.width,m=f.height,y=h.destinationWidth,b=h.destinationHeight;g===y&&m===b||(f.width=y,f.height=b)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(u),A.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,o,s){const{NEAREST:i,TEXTURE_2D:a,RGBA:A,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,m=e.createTexture();return e.bindTexture(a,m),e.texParameteri(a,u,s||i),e.texParameteri(a,h,s||i),e.texParameteri(a,f,c),e.texParameteri(a,g,c),o?e.texImage2D(a,0,A,A,d,o):e.texImage2D(a,0,A,t,r,0,A,d,null),m}getCachedTexture(e,t,r){const{textureCache:o}=this;if(o[e])return o[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(o[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,o=t.targetCanvas,s=o.getContext("2d");if(!s)return;s.translate(0,o.height),s.scale(1,-1);const i=r.height-o.height;s.drawImage(r,0,i,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),o=t.destinationWidth,s=t.destinationHeight,i=o*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,i),A=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,a);const d=new ImageData(A,o,s);r.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(t.renderer=o.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Bv;function DQ(){const{WebGLProbe:n}=Vi();return n.queryWebGL(yi()),Gr.enableGLFiltering&&n.isSupported(Gr.textureSize)?new x5({tileSize:Gr.textureSize}):new OQ}function xv(){return!Bv&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Bv=DQ()),Bv}const NQ=["filters","resizeFilter","src","crossOrigin","type"],z5=["cropX","cropY"];class Zo extends wo{static getDefaults(){return We(We({},super.getDefaults()),Zo.ownDefaults)}constructor(e,t){super(),Ge(this,"_lastScaleX",1),Ge(this,"_lastScaleY",1),Ge(this,"_filterScalingX",1),Ge(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Zo.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(yA()),this.setElement(typeof e=="string"?(this.canvas&&pi(this.canvas.getElement())||Yd()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Zo.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=xv(!1);t instanceof x5&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Vi().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),We(We({},super.toObject([...z5,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,o=-this.height/2;let s=[],i=[],a="",A="";if(!t)return[];if(this.hasCrop()){const d=yA();s.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(A=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(o-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(A).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,i=['	<rect x="'.concat(r,'" y="').concat(o,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return s=this.paintFirst!==Ao?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nf(e,{crossOrigin:t,signal:r}).then(o=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(o)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);const a=Gi(i),{width:A,height:d}=i;this._element=a,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,xv().applyFilters([e],i,A,d,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=Gi({width:r,height:o});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1);xv().applyFilters(e,this._originalElement,r,o,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,o=this._filterScalingY,s=this.width,i=this.height,a=Math.max(this.cropX,0),A=Math.max(this.cropY,0),d=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=a*r,h=A*o,f=Math.min(s*r,d-u),g=Math.min(i*o,c-h),m=-s/2,y=-i/2,b=Math.min(s,d/r-a),S=Math.min(i,c/o-A);t&&e.drawImage(t,u,h,f,g,m,y,b,S)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=bF(this.preserveAspectRatio||""),t=this.width,r=this.height,o={width:t,height:r};let s,i=this._element.width,a=this._element.height,A=1,d=1,c=0,u=0,h=0,f=0;return!e||e.alignX===fs&&e.alignY===fs?(A=t/i,d=r/a):(e.meetOrSlice==="meet"&&(A=d=qI(this._element,o),s=(t-i*A)/2,e.alignX==="Min"&&(c=-s),e.alignX==="Max"&&(c=s),s=(r-a*d)/2,e.alignY==="Min"&&(u=-s),e.alignY==="Max"&&(u=s)),e.meetOrSlice==="slice"&&(A=d=KI(this._element,o),s=i-t/A,e.alignX==="Mid"&&(h=s/2),e.alignX==="Max"&&(h=s),s=a-r/d,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),i=t/A,a=r/d)),{width:i,height:a,scaleX:A,scaleY:d,offsetLeft:c,offsetTop:u,cropX:h,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:o,src:s,crossOrigin:i,type:a}=e,A=Qn(e,NQ);return Promise.all([Nf(s,We(We({},t),{},{crossOrigin:i})),r&&xu(r,t),o&&xu([o],t),ng(A,t)]).then(d=>{let[c,u=[],[h]=[],f={}]=d;return new this(c,We(We({},A),{},{src:s,filters:u,resizeFilter:h},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return Nf(e,{crossOrigin:t,signal:r}).then(s=>new this(s,o))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const o=Qa(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"],t,o).catch(s=>(wA("log","Unable to parse Image",s),null))}}Ge(Zo,"type","Image"),Ge(Zo,"cacheProperties",[...Ia,...z5]),Ge(Zo,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Ge(Zo,"CSS_CANVAS","canvas-img"),Ge(Zo,"ATTRIBUTE_NAMES",[...zA,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),Zt.setClass(Zo),Zt.setSVGClass(Zo);sg(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const lg=n=>n.webgl!==void 0,P1="precision highp float",MQ=`
    `.concat(P1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),HQ=["type"],jQ=["type"],RQ=new RegExp(P1,"g");class lo{get type(){return this.constructor.type}constructor(){let e=Qn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},HQ);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return MQ}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=Vi();o!=="highp"&&(t=t.replace(RQ,P1.replace("highp",o)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!i||!a)throw new Di("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Di("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Di("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(a,s),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Di('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const A=this.getUniformLocations(e,a)||{};return A.uStepW=e.getUniformLocation(a,"uStepW"),A.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:A}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,o={};for(let s=0;s<r.length;s++)o[r[s]]=e.getUniformLocation(t,r[s]);return o}sendAttributeData(e,t,r){const o=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,o=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===o||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,o)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){lg(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,o=Gi({width:t,height:r});e.helpLayer=o}}toObject(){const e=Object.keys(this.constructor.defaults||{});return We({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Qn(e,jQ))}}Ge(lo,"type","BaseFilter"),Ge(lo,"uniformLocations",[]);const qQ={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class jh extends lo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(qQ[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Ps(this.color).getSource(),o=this.alpha,s=r[0]*o,i=r[1]*o,a=r[2]*o,A=1-o;for(let d=0;d<t.length;d+=4){const c=t[d],u=t[d+1],h=t[d+2];let f,g,m;switch(this.mode){case"multiply":f=c*s/255,g=u*i/255,m=h*a/255;break;case"screen":f=255-(255-c)*(255-s)/255,g=255-(255-u)*(255-i)/255,m=255-(255-h)*(255-a)/255;break;case"add":f=c+s,g=u+i,m=h+a;break;case"difference":f=Math.abs(c-s),g=Math.abs(u-i),m=Math.abs(h-a);break;case"subtract":f=c-s,g=u-i,m=h-a;break;case"darken":f=Math.min(c,s),g=Math.min(u,i),m=Math.min(h,a);break;case"lighten":f=Math.max(c,s),g=Math.max(u,i),m=Math.max(h,a);break;case"overlay":f=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,g=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,m=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255;break;case"exclusion":f=s+c-2*s*c/255,g=i+u-2*i*u/255,m=a+h-2*a*h/255;break;case"tint":f=s+c*A,g=i+u*A,m=a+h*A}t[d]=f,t[d+1]=g,t[d+2]=m}}sendUniformData(e,t){const r=new Ps(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Ge(jh,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Ge(jh,"type","BlendColor"),Ge(jh,"uniformLocations",["uColor"]),Zt.setClass(jh);const KQ={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},$Q=["type","image"];class Rh extends lo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return KQ[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:o},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=yi());const a=s.blendImage,A=a.getContext("2d");a.width!==r||a.height!==o?(a.width=r,a.height=o):A.clearRect(0,0,r,o),A.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),A.drawImage(i.getElement(),0,0,r,o);const d=A.getImageData(0,0,r,o).data;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],f=t[c+2],g=t[c+3],m=d[c],y=d[c+1],b=d[c+2],S=d[c+3];switch(this.mode){case"multiply":t[c]=u*m/255,t[c+1]=h*y/255,t[c+2]=f*b/255,t[c+3]=g*S/255;break;case"mask":t[c+3]=S}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return We(We({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:o}=e,s=Qn(e,$Q);return Zo.fromObject(o,t).then(i=>new this(We(We({},s),{},{image:i})))}}Ge(Rh,"type","BlendImage"),Ge(Rh,"defaults",{mode:"multiply",alpha:1}),Ge(Rh,"uniformLocations",["uTransformMatrix","uImage"]),Zt.setClass(Rh);class qh extends lo{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){lg(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:o}}=e;const{width:s,height:i}=r;o.blurLayer1||(o.blurLayer1=yi(),o.blurLayer2=yi());const a=o.blurLayer1,A=o.blurLayer2;a.width===s&&a.height===i||(A.width=a.width=s,A.height=a.height=i);const d=a.getContext("2d"),c=A.getContext("2d"),u=15,h=.06*this.blur*.5;let f,g,m,y;for(d.putImageData(r,0,0),c.clearRect(0,0,s,i),y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,m=h*g*s+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,m,f),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);for(y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,m=h*g*i+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,f,m),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);t.drawImage(a,0,0);const b=t.getImageData(0,0,a.width,a.height);return d.globalAlpha=1,d.clearRect(0,0,a.width,a.height),b}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Ge(qh,"type","Blur"),Ge(qh,"defaults",{blur:0}),Ge(qh,"uniformLocations",["uDelta"]),Zt.setClass(qh);class Kh extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let o=0;o<t.length;o+=4)t[o]+=r,t[o+1]+=r,t[o+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Ge(Kh,"type","Brightness"),Ge(Kh,"defaults",{brightness:0}),Ge(Kh,"uniformLocations",["uBrightness"]),Zt.setClass(Kh);const C5={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class md extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,o=this.colorsOnly;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],A=t[s+2];if(t[s]=i*r[0]+a*r[1]+A*r[2]+255*r[4],t[s+1]=i*r[5]+a*r[6]+A*r[7]+255*r[9],t[s+2]=i*r[10]+a*r[11]+A*r[12]+255*r[14],!o){const d=t[s+3];t[s]+=d*r[3],t[s+1]+=d*r[8],t[s+2]+=d*r[13],t[s+3]=i*r[15]+a*r[16]+A*r[17]+d*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,o),e.uniform4fv(t.uConstants,s)}toObject(){return We(We({},super.toObject()),{},{matrix:[...this.matrix]})}}function yl(n,e){var t;const r=(Ge(t=class extends md{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Ge(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Zt.setClass(r,n),r}Ge(md,"type","ColorMatrix"),Ge(md,"defaults",C5),Ge(md,"uniformLocations",["uColorMatrix","uConstants"]),Zt.setClass(md);yl("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);yl("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);yl("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);yl("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);yl("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);yl("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);yl("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Yw extends lo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){lg(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>Zt.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Ge(Yw,"type","Composed"),Zt.setClass(Yw);class $h extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=o*(t[s]-128)+128,t[s+1]=o*(t[s+1]-128)+128,t[s+2]=o*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Ge($h,"type","Contrast"),Ge($h,"defaults",{contrast:0}),Ge($h,"uniformLocations",["uContrast"]),Zt.setClass($h);const VQ={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Vh extends lo{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return VQ[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,o=this.matrix,s=Math.round(Math.sqrt(o.length)),i=Math.floor(s/2),a=t.width,A=t.height,d=e.ctx.createImageData(a,A),c=d.data,u=this.opaque?1:0;let h,f,g,m,y,b,S,F,P,L,re,K,H;for(re=0;re<A;re++)for(L=0;L<a;L++){for(y=4*(re*a+L),h=0,f=0,g=0,m=0,H=0;H<s;H++)for(K=0;K<s;K++)S=re+H-i,b=L+K-i,S<0||S>=A||b<0||b>=a||(F=4*(S*a+b),P=o[H*s+K],h+=r[F]*P,f+=r[F+1]*P,g+=r[F+2]*P,u||(m+=r[F+3]*P));c[y]=h,c[y+1]=f,c[y+2]=g,c[y+3]=u?r[y+3]:m}e.imageData=d}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return We(We({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Ge(Vh,"type","Convolute"),Ge(Vh,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Ge(Vh,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Zt.setClass(Vh);const S5="Gamma";class Gh extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,o=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let A=0;A<256;A++)a.r[A]=255*Math.pow(A/255,o),a.g[A]=255*Math.pow(A/255,s),a.b[A]=255*Math.pow(A/255,i);for(let A=0;A<t.length;A+=4)t[A]=a.r[t[A]],t[A+1]=a.g[t[A+1]],t[A+2]=a.b[t[A+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:S5,gamma:this.gamma.concat()}}}Ge(Gh,"type",S5),Ge(Gh,"defaults",{gamma:[1,1,1]}),Ge(Gh,"uniformLocations",["uGamma"]),Zt.setClass(Gh);const GQ={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Wh extends lo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2];switch(this.mode){case"average":r=(s+i+a)/3;break;case"lightness":r=(Math.min(s,i,a)+Math.max(s,i,a))/2;break;case"luminosity":r=.21*s+.72*i+.07*a}t[o+2]=t[o+1]=t[o]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return GQ[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Ge(Wh,"type","Grayscale"),Ge(Wh,"defaults",{mode:"average"}),Ge(Wh,"uniformLocations",["uMode"]),Zt.setClass(Wh);const WQ=We(We({},C5),{},{rotation:0});class zv extends md{calculateMatrix(){const e=this.rotation*Math.PI,t=Ca(e),r=Sa(e),o=1/3,s=Math.sqrt(o)*r,i=1-t;this.matrix=[t+i/3,o*i-s,o*i+s,0,0,o*i+s,t+o*i,o*i-s,0,0,o*i-s,o*i+s,t+o*i,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Ge(zv,"type","HueRotation"),Ge(zv,"defaults",WQ),Zt.setClass(zv);class Xh extends lo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Ge(Xh,"type","Invert"),Ge(Xh,"defaults",{alpha:!1,invert:!0}),Ge(Xh,"uniformLocations",["uInvert","uAlpha"]),Zt.setClass(Xh);class Yh extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let o=0;o<t.length;o+=4){const s=(.5-Math.random())*r;t[o]+=s,t[o+1]+=s,t[o+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Ge(Yh,"type","Noise"),Ge(Yh,"defaults",{noise:0}),Ge(Yh,"uniformLocations",["uNoise","uSeed"]),Zt.setClass(Yh);class Jh extends lo{applyTo2d(e){let{imageData:{data:t,width:r,height:o}}=e;for(let s=0;s<o;s+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const a=4*s*r+4*i,A=t[a],d=t[a+1],c=t[a+2],u=t[a+3];for(let h=s;h<Math.min(s+this.blocksize,o);h++)for(let f=i;f<Math.min(i+this.blocksize,r);f++){const g=4*h*r+4*f;t[g]=A,t[g+1]=d,t[g+2]=c,t[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Ge(Jh,"type","Pixelate"),Ge(Jh,"defaults",{blocksize:4}),Ge(Jh,"uniformLocations",["uBlocksize"]),Zt.setClass(Jh);class Zh extends lo{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,o=new Ps(this.color).getSource(),s=[o[0]-r,o[1]-r,o[2]-r],i=[o[0]+r,o[1]+r,o[2]+r];for(let a=0;a<t.length;a+=4){const A=t[a],d=t[a+1],c=t[a+2];A>s[0]&&d>s[1]&&c>s[2]&&A<i[0]&&d<i[1]&&c<i[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new Ps(this.color).getSource(),o=this.distance,s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],i=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}Ge(Zh,"type","RemoveColor"),Ge(Zh,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Ge(Zh,"uniformLocations",["uLow","uHigh"]),Zt.setClass(Zh);class ef extends lo{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),o=new Array(r);for(let s=1;s<=r;s++)o[s-1]=e(s*t);return o}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,o)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(o,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(o,`];
              sum += 2.0 * uTaps[`).concat(o,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){lg(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;const s=t.width,i=t.height,a=Math.round(s*r),A=Math.round(i*o);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,i,a,A):this.resizeType==="hermite"?this.hermiteFastResize(e,s,i,a,A):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,i,a,A):this.resizeType==="lanczos"?this.lanczosResize(e,s,i,a,A):new ImageData(a,A),e.imageData=d}sliceByTwo(e,t,r,o,s){const i=e.imageData,a=.5;let A=!1,d=!1,c=t*a,u=r*a;const h=e.filterBackend.resources;let f=0,g=0;const m=t;let y=0;h.sliceByTwo||(h.sliceByTwo=yi());const b=h.sliceByTwo;(b.width<1.5*t||b.height<r)&&(b.width=1.5*t,b.height=r);const S=b.getContext("2d");for(S.clearRect(0,0,1.5*t,r),S.putImageData(i,0,0),o=Math.floor(o),s=Math.floor(s);!A||!d;)t=c,r=u,o<Math.floor(c*a)?c=Math.floor(c*a):(c=o,A=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,d=!0),S.drawImage(b,f,g,t,r,m,y,c,u),f=m,g=y,y+=u;return S.getImageData(f,g,o,s)}lanczosResize(e,t,r,o,s){const i=e.imageData.data,a=e.ctx.createImageData(o,s),A=a.data,d=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(c*this.lanczosLobes/2),m=Math.ceil(u*this.lanczosLobes/2),y={},b={x:0,y:0},S={x:0,y:0};return function F(P){let L,re,K,H,J,we,O,D,Z,ie,de;for(b.x=(P+.5)*c,S.x=Math.floor(b.x),L=0;L<s;L++){for(b.y=(L+.5)*u,S.y=Math.floor(b.y),J=0,we=0,O=0,D=0,Z=0,re=S.x-g;re<=S.x+g;re++)if(!(re<0||re>=t)){ie=Math.floor(1e3*Math.abs(re-b.x)),y[ie]||(y[ie]={});for(let ne=S.y-m;ne<=S.y+m;ne++)ne<0||ne>=r||(de=Math.floor(1e3*Math.abs(ne-b.y)),y[ie][de]||(y[ie][de]=d(Math.sqrt(Math.pow(ie*h,2)+Math.pow(de*f,2))/1e3)),K=y[ie][de],K>0&&(H=4*(ne*t+re),J+=K,we+=K*i[H],O+=K*i[H+1],D+=K*i[H+2],Z+=K*i[H+3]))}H=4*(L*o+P),A[H]=we/J,A[H+1]=O/J,A[H+2]=D/J,A[H+3]=Z/J}return++P<o?F(P):a}(0)}bilinearFiltering(e,t,r,o,s){let i,a,A,d,c,u,h,f,g,m,y,b,S,F=0;const P=this.rcpScaleX,L=this.rcpScaleY,re=4*(t-1),K=e.imageData.data,H=e.ctx.createImageData(o,s),J=H.data;for(h=0;h<s;h++)for(f=0;f<o;f++)for(c=Math.floor(P*f),u=Math.floor(L*h),g=P*f-c,m=L*h-u,S=4*(u*t+c),y=0;y<4;y++)i=K[S+y],a=K[S+4+y],A=K[S+re+y],d=K[S+re+4+y],b=i*(1-g)*(1-m)+a*g*(1-m)+A*m*(1-g)+d*g*m,J[F++]=b;return H}hermiteFastResize(e,t,r,o,s){const i=this.rcpScaleX,a=this.rcpScaleY,A=Math.ceil(i/2),d=Math.ceil(a/2),c=e.imageData.data,u=e.ctx.createImageData(o,s),h=u.data;for(let f=0;f<s;f++)for(let g=0;g<o;g++){const m=4*(g+f*o);let y=0,b=0,S=0,F=0,P=0,L=0,re=0;const K=(f+.5)*a;for(let H=Math.floor(f*a);H<(f+1)*a;H++){const J=Math.abs(K-(H+.5))/d,we=(g+.5)*i,O=J*J;for(let D=Math.floor(g*i);D<(g+1)*i;D++){let Z=Math.abs(we-(D+.5))/A;const ie=Math.sqrt(O+Z*Z);ie>1&&ie<-1||(y=2*ie*ie*ie-3*ie*ie+1,y>0&&(Z=4*(D+H*t),re+=y*c[Z+3],S+=y,c[Z+3]<255&&(y=y*c[Z+3]/250),F+=y*c[Z],P+=y*c[Z+1],L+=y*c[Z+2],b+=y))}}h[m]=F/b,h[m+1]=P/b,h[m+2]=L/b,h[m+3]=re/S}return u}}Ge(ef,"type","Resize"),Ge(ef,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Ge(ef,"uniformLocations",["uDelta","uTaps"]),Zt.setClass(ef);class tf extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a);t[o]+=A!==s?(A-s)*r:0,t[o+1]+=A!==i?(A-i)*r:0,t[o+2]+=A!==a?(A-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Ge(tf,"type","Saturation"),Ge(tf,"defaults",{saturation:0}),Ge(tf,"uniformLocations",["uSaturation"]),Zt.setClass(tf);class rf extends lo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a),d=(s+i+a)/3,c=2*Math.abs(A-d)/255*r;t[o]+=A!==s?(A-s)*c:0,t[o+1]+=A!==i?(A-i)*c:0,t[o+2]+=A!==a?(A-a)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Ge(rf,"type","Vibrance"),Ge(rf,"defaults",{vibrance:0}),Ge(rf,"uniformLocations",["uVibrance"]),Zt.setClass(rf);wo.prototype.toObject=function(n){return function(e=[]){return n.call(this,["data",...e])}}(wo.prototype.toObject);class E5{constructor(e,t){this.currentScale=1,this.SNAP_THRESHOLD=10,this.resizeTimeout=null,this.originalWidth=t.width,this.originalHeight=t.height,this.aspectRatio=this.originalHeight/this.originalWidth,this.containerElement=t.containerElement,this.containerElement.style.height=`${this.containerElement.offsetWidth*this.aspectRatio}px`,this.canvas=new R0(e,{width:this.originalWidth,height:this.originalHeight,controlsAboveOverlay:!0,preserveObjectStacking:!0,selection:!0}),this.setupResizeObserver(),this.setupSnapBehavior(),this.setupSelectionBehavior()}toOriginalCoordinate(e){return e/this.currentScale}toScaledCoordinate(e){return e*this.currentScale}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.containerElement)}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.updateCanvasSize(),this.canvas.requestRenderAll()},100)}updateCanvasSize(){const e=this.containerElement.offsetWidth,t=this.canvas.backgroundImage?this.canvas.backgroundImage.height/this.canvas.backgroundImage.width:this.canvas.overlayImage?this.canvas.overlayImage.height/this.canvas.overlayImage.width:this.aspectRatio,r=e*t;this.containerElement.style.height=`${r}px`;const o=e/this.originalWidth;this.currentScale=o,this.canvas.setDimensions({width:e,height:r}),this.canvas.setViewportTransform([o,0,0,o,0,0]),this.canvas.requestRenderAll()}setupSnapBehavior(){this.canvas.on("object:moving",e=>{var A;const t=e.target;if(!t||((A=t.data)==null?void 0:A.editType)==="print")return;const o=this.canvas.getObjects().filter(d=>{var c;return((c=d.data)==null?void 0:c.editType)==="print"});let s=null,i=null;const a={left:t.left/this.currentScale,right:(t.left+t.width*t.scaleX)/this.currentScale,top:t.top,bottom:t.top+t.height*t.scaleY,centerX:t.left+t.width*t.scaleX/2,centerY:t.top+t.height*t.scaleY/2};for(const d of o){const c={left:d.left/this.currentScale,right:(d.left+d.width*d.scaleX)/this.currentScale,top:d.top,bottom:d.top+d.height*d.scaleY,centerX:d.left+d.width*d.scaleX/2,centerY:d.top+d.height*d.scaleY/2};Math.abs(a.left-c.left)<this.SNAP_THRESHOLD?s=c.left:Math.abs(a.right-c.right)<this.SNAP_THRESHOLD?s=c.right-t.width*t.scaleX:Math.abs(a.centerX-c.centerX)<this.SNAP_THRESHOLD&&(s=c.centerX-t.width*t.scaleX/2),Math.abs(a.top-c.top)<this.SNAP_THRESHOLD?i=c.top:Math.abs(a.bottom-c.bottom)<this.SNAP_THRESHOLD?i=c.bottom-t.height*t.scaleY:Math.abs(a.centerY-c.centerY)<this.SNAP_THRESHOLD&&(i=c.centerY-t.height*t.scaleY/2)}s!==null&&t.set("left",s),i!==null&&t.set("top",i)})}setupSelectionBehavior(){this.canvas.on("selection:created",e=>{var r,o;const t=(r=e.selected)==null?void 0:r[0];((o=t==null?void 0:t.data)==null?void 0:o.editType)==="print"&&this.canvas.discardActiveObject()}),this.canvas.on("mouse:down",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&t.data.objectId&&this.onPrintAreaClick&&this.onPrintAreaClick(t.data.objectId)}),this.canvas.on("mouse:over",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="pointer")}),this.canvas.on("mouse:out",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="default")})}setPrintAreaClickListener(e){this.onPrintAreaClick=e}async setCanvasJSON(e){console.log("json",e),await this.canvas.loadFromJSON(e),this.canvas.requestRenderAll()}addEditableArea(e){if(e.type==="rect"){const t=new fi({left:e.properties.x,top:e.properties.y,width:e.properties.width,height:e.properties.height,fill:"rgba(0,216,255,0.3)",stroke:"rgba(0,203,239,1)",strokeWidth:1,cornerStyle:"circle",transparentCorners:!1,cornerColor:"rgba(0,203,239,0.5)",cornerSize:10,lockRotation:!0,hasControls:!0,data:{editType:e.properties.editType,objectId:e.properties.objectId}});return this.canvas.add(t),this.canvas.requestRenderAll(),t}}removeObject(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(this.canvas.remove(r),this.canvas.requestRenderAll())}setSelectionListener(e){this.canvas.on("selection:created",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:updated",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:cleared",()=>e(null))}zoomToPoint(e,t){const s=Math.min(Math.max(t,.1),3),i=new bt(e.x,e.y);this.canvas.zoomToPoint(i,s),this.canvas.requestRenderAll()}getCurrentScale(){return this.currentScale}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.canvas.dispose()}getCanvas(){return this.canvas}getObjects(){return this.canvas.getObjects()}getCanvasJson(){return this.canvas.toJSON()}getCanvasImage(){return this.canvas.toDataURL({format:"png",quality:1,multiplier:1})}async setImage(e){return new Promise((t,r)=>{const o=new Image;o.onload=()=>{const s={width:o.width,height:o.height,dataUrl:e},i=800;let a=o.width,A=o.height;(a>i||A>i)&&(a>A?(A=i*A/a,a=i):(a=i*a/A,A=i));const d=document.createElement("canvas");d.width=a,d.height=A;const c=d.getContext("2d");c==null||c.drawImage(o,0,0,a,A);const u=d.toDataURL("image/jpeg",.9);Zo.fromURL(u,{crossOrigin:"anonymous"}).then(h=>{const f=this.canvas.getWidth(),g=this.canvas.getHeight(),m=A/a,y=g/f;m>y?h.scaleToHeight(g):h.scaleToWidth(f),this.canvas.getObjects().filter(S=>{var F;return((F=S.data)==null?void 0:F.editType)==="print"}).forEach(async S=>{const F=S;F.absolutePositioned=!0,F.fill="transparent";const P=S.width/h.width,L=S.height/h.height,re=Math.max(P,L),K=h.width*re,H=h.height*re;h.left=S.left+(S.width-K)/2,h.top=S.top+(S.height-H)/2,h.scaleToWidth(K),h.scaleToHeight(H),h.clipPath=F}),this.canvas.add(h),this.canvas.requestRenderAll(),t({thumbnail:{width:a,height:A,dataUrl:u},original:s})}).catch(r)},o.onerror=()=>{r(new Error("  "))},o.src=e})}async setOverlay(e){try{const t=await Zo.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.overlayImage=t,this.canvas.renderAll()}catch(t){throw console.error("     :",t),t}}async setBackground(e){try{const t=await Zo.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.backgroundImage=t,this.canvas.requestRenderAll()}catch(t){throw console.error("     :",t),t}}async setBackgroundOverlaySize(e){const t=this.containerElement.offsetWidth,r=t*(e.height/e.width);this.originalWidth=t,this.originalHeight=r,this.aspectRatio=r/t,this.containerElement.style.height=`${r}px`,e.scaleToWidth(t),e.scaleToHeight(r),e.set({top:0,left:0,originX:"left",originY:"top"})}updateObjectDisabled(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(r.set("fill","#cccccc"),r.set("opacity",.5),r.set("stroke","#cccccc"),r.set("strokeWidth",0),r.set("evented",!1)),this.canvas.requestRenderAll()}updateAllObjectEnabled(){this.canvas.getObjects().forEach(t=>{t.set("fill","rgba(0,216,255,0.3)"),t.set("opacity",1),t.set("stroke","rgba(0,203,239,1)"),t.set("strokeWidth",1),t.set("evented",!0)}),this.canvas.requestRenderAll()}}async function XQ(n,e="estimates",t){try{console.log("   :",{name:n.name,size:n.size,type:n.type,folder:e});const r=ZQ(n);if(!r.isValid)return console.error("   :",r.errors),{success:!1,error:r.errors.join(", ")};const o=Date.now(),s=Math.random().toString(36).substring(2,8),i=eU(n.name),a=`${o}_${s}_${i}`,A=`${e}/${a}`;console.log("   :",{fileName:a,filePath:A});const{data:d,error:c}=await gt.storage.from("uploads").upload(A,n,{cacheControl:"3600",upsert:!1});if(c)return console.error(" Storage  :",c),{success:!1,error:`  : ${c.message}`};console.log(" Storage  :",d);const{data:u}=gt.storage.from("uploads").getPublicUrl(A);if(!u.publicUrl)return console.error("  URL  "),{success:!1,error:"  URL  ."};console.log("  URL  :",u.publicUrl);const h={id:s,name:n.name,size:n.size,type:n.type,url:u.publicUrl,path:A,uploadedAt:new Date().toISOString()};return console.log("   :",h),{success:!0,file:h}}catch(r){return console.error("      :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}async function YQ(n,e="estimates",t){console.log("    :",{count:n.length,folder:e});const r=[];for(let s=0;s<n.length;s++){const i=n[s];console.log(`  ${s+1}/${n.length}  :`,i.name);const a=await XQ(i,e);if(r.push(a),t){const A=s+1,d=n.length,c=Math.round(A/d*100);t(A,d,c)}a.success||console.warn(`    (${s+1}/${n.length}):`,{fileName:i.name,error:a.error})}const o=r.filter(s=>s.success).length;return console.log("    :",{total:n.length,success:o,failed:n.length-o}),r}async function JQ(n){try{console.log("   :",n);const{error:e}=await gt.storage.from("uploads").remove([n]);return e?(console.error("   :",e),!1):(console.log("   :",n),!0)}catch(e){return console.error("    :",e),!1}}async function Jw(n,e,t){try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e,fileCount:t.length});const{data:r,error:o}=await gt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("object_id",e).single();if(o&&o.code!=="PGRST116")return console.error("    :",o),{success:!1,error:`   : ${o.message}`};const s={files:t,updatedAt:new Date().toISOString(),totalFiles:t.length,totalSize:t.reduce((i,a)=>i+a.size,0)};if(r){const{error:i}=await gt.from("estimate_simple_prints").update({uploaded_files:s,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)return console.error("   :",i),{success:!1,error:`  : ${i.message}`};console.log("    :",r.id)}else{const{error:i}=await gt.from("estimate_simple_prints").insert({estimate_id:n,object_id:e,title:` ${e}`,print_method:"file-upload",uploaded_files:s,price:0,original_price:0,discount_amount:0});if(i)return console.error("    :",i),{success:!1,error:`   : ${i.message}`};console.log("    ")}return{success:!0}}catch(r){return console.error(" estimate_simple_prints   :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}function ZQ(n){const e=[];n.size>52428800&&e.push(`   .  50MB  . (: ${Math.round(n.size/1024/1024)}MB)`);const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/postscript","application/illustrator","image/vnd.adobe.photoshop"],o=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".eps",".ai",".psd"],s=n.name.toLowerCase(),i=o.some(A=>s.endsWith(A)),a=r.includes(n.type);return!i&&!a&&e.push("   . ( : JPG, PNG, GIF, PDF, AI, EPS, PSD, SVG)"),n.name.length>255&&e.push("  . 255  ."),{isValid:e.length===0,errors:e}}function eU(n){return n.replace(/[^-a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"")}function tU(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}async function rU(n,e){var t;try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e});const{data:r,error:o}=await gt.from("estimate_simple_prints").select("uploaded_files, file_metadata").eq("estimate_id",n).eq("object_id",e).single();if(o)return o.code==="PGRST116"?{success:!0,files:[]}:(console.error("    :",o),{success:!1,files:[],error:`   : ${o.message}`});const s=r==null?void 0:r.uploaded_files;let i=(s==null?void 0:s.files)||[];return console.log(" DB  :",{hasUploadedFiles:!!s,uploadedFilesType:typeof s,uploadedFilesHasFiles:!!(s!=null&&s.files),uploadedFilesLength:((t=s==null?void 0:s.files)==null?void 0:t.length)||0,hasFileMetadata:!!(r!=null&&r.file_metadata),fileMetadataType:typeof(r==null?void 0:r.file_metadata),fileMetadataLength:Array.isArray(r==null?void 0:r.file_metadata)?r.file_metadata.length:0}),i.length===0&&(r!=null&&r.file_metadata)&&(console.log(" uploaded_files  - file_metadata  "),i=(Array.isArray(r.file_metadata)?r.file_metadata:[]).map(A=>({id:Math.random().toString(36).substring(2,8),name:A.name||"",size:A.size||0,type:A.type||"",url:A.url||"#",path:A.path||"",uploadedAt:new Date().toISOString()})),console.log(" file_metadata   :",{fileCount:i.length,files:i.map(A=>({name:A.name,hasUrl:A.url!=="#"}))})),console.log("    :",{fileCount:i.length,source:i.length>0&&(s!=null&&s.files)?"uploaded_files":"file_metadata"}),{success:!0,files:i}}catch(r){return console.error("     :",r),{success:!1,files:[],error:r instanceof Error?r.message:"    ."}}}var nU=te('<div class="odz-absolute -odz-top-2 -odz-right-2 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),oU=te('<button><!> <div class="odz-text-center"><span> </span></div></button>'),sU=te('<div class="odz-mt-3 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><svg class="odz-w-4 odz-h-4 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-w-full odz-bg-blue-200 odz-rounded-full odz-h-2"><div class="odz-bg-blue-600 odz-h-2 odz-rounded-full odz-transition-all odz-duration-300"></div></div></div>'),iU=te('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-red-700"> </span></div>'),aU=te('<a target="_blank" rel="noopener noreferrer" class="odz-p-1 odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></a>'),AU=te('<button class="odz-p-1 odz-text-gray-400 odz-cursor-not-allowed odz-rounded" disabled title="  .   ."><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg></button>'),lU=te('<div class="odz-flex odz-items-center odz-justify-between odz-bg-white odz-border odz-border-gray-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-min-w-0 odz-flex-1"><svg class="odz-w-4 odz-h-4 odz-text-gray-500 odz-flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <div class="odz-min-w-0 odz-flex-1"><p class="odz-text-sm odz-font-medium odz-text-gray-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div> <div class="odz-flex odz-items-center odz-gap-2"><!> <button class="odz-p-1 odz-text-red-600 hover:odz-text-red-800 hover:odz-bg-red-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),dU=te('<div class="odz-mt-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-green-700"> </span></div> <div class="odz-space-y-2"></div></div>'),cU=te('<div class="odz-flex odz-items-center odz-gap-1 odz-text-xs odz-text-gray-600 odz-bg-gray-50 odz-px-2 odz-py-1 odz-rounded odz-min-w-0"><span class="odz-flex-shrink-0"></span> <span class="odz-truncate odz-min-w-0"> </span> <span class="odz-flex-shrink-0"> </span></div>'),uU=te('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-mt-2 odz-space-y-1"></div>',1),hU=te(`<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><span class="odz-text-white odz-font-bold odz-text-sm"></span></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800"> </h3> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <button class="odz-w-8 odz-h-8 odz-flex odz-items-center odz-justify-center odz-text-gray-400 hover:odz-text-red-500
                                   hover:odz-bg-red-50 odz-rounded-full odz-transition-all odz-duration-200" aria-label="  "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-mb-6"><div class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3"> </div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div></div> <div class="odz-mb-4"><label class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3">  </label> <div class="odz-relative"><input type="file" multiple accept="image/*,.pdf,.ai,.eps" class="odz-absolute odz-inset-0 odz-w-full odz-h-full odz-opacity-0 odz-cursor-pointer"> <div class="odz-bg-white odz-border-2 odz-border-dashed odz-border-gray-300 odz-rounded-xl odz-p-6
                                       hover:odz-border-red-300 hover:odz-bg-red-50 odz-transition-colors odz-duration-200"><div class="odz-text-center"><svg class="odz-w-8 odz-h-8 odz-text-gray-400 odz-mx-auto odz-mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <p class="odz-text-sm odz-text-gray-600 odz-mb-1">   </p> <p class="odz-text-xs odz-text-gray-500">, PDF, AI, EPS  </p></div></div></div> <!> <!> <!> <!></div></div>`),fU=te('<div class="odz-mt-2 odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3 odz-h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span> </span></div>'),pU=te(`<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"></div> <div class="odz-mt-6"><div class="odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><div class="odz-w-8 odz-h-8 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800">  </h3> <p class="odz-text-sm odz-text-gray-600">    </p></div></div> <textarea class="odz-w-full odz-h-24 odz-p-4 odz-border-2 odz-border-gray-200 odz-rounded-xl
                           odz-resize-none odz-text-sm odz-text-gray-700
                           focus:odz-border-blue-400 focus:odz-ring-2 focus:odz-ring-blue-100 focus:odz-outline-none
                           placeholder:odz-text-gray-400 odz-transition-all odz-duration-200" placeholder=":    ,     ,     "></textarea> <!></div></div></div>`),gU=te('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>      .</p></div></div>'),vU=te('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">  <span class="odz-text-sm odz-font-normal odz-text-gray-500">   .</span></h1> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas></div> <p class="odz-text-sm odz-text-gray-500 odz-mt-4">          .</p></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div>');function mU(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=()=>Xr(Ls,"$shopStore",t);let i=ft(e,"productId",8),a=ft(e,"estimateId",8,void 0);ft(e,"idx",8,void 0),ft(e,"onComplete",8),ft(e,"onCancel",8,()=>{});let A=null,d=[],c=Ie(),u=Ie(),h=Ie(),f=Ie([]),g=Ie(!1);En(async()=>{let q=!1;try{await Promise.race([m(),new Promise((Ae,x)=>setTimeout(()=>x(new Error("  timeout (10)")),1e4))]),q=!0}catch{}try{q&&(await ki(),await new Promise(Ae=>setTimeout(Ae,100))),await y()}catch{}const se=Ae=>{Ae.detail.productId===i()&&(console.log(" SimplePrint   :",i()),F())};return window.addEventListener("saveSimplePrintState",se),()=>{window.removeEventListener("saveSimplePrintState",se)}}),Eo(()=>{try{if(l(f).length>0){const q=l(f).map(x=>({objectId:x.objectId,title:x.title,printMethod:x.printMethod,savedFileInfo:x.savedFileInfo||x.uploadedFiles.map(E=>({name:E.name,size:E.size,type:E.type,url:E.url,path:E.path}))})),se=o().estimateId||"temp",Ae=`simplePrint_${i()}_${se}`;sessionStorage.setItem(Ae,JSON.stringify(q))}}catch{}l(h)&&l(h).destroy()});async function m(){await ki();let q=0;const se=50;for(;q<se&&!l(u);)await new Promise(Ae=>setTimeout(Ae,100)),q++;if(!l(u))throw new Error("    .");try{if(A=await BB(i(),s().id),A!=null&&A.id&&(d=await xB(A.id)),A!=null&&A.canvas_json){const Ae=typeof A.canvas_json=="string"?JSON.parse(A.canvas_json):A.canvas_json,x=Ae.backgroundImage.width*Ae.backgroundImage.scaleX,E=Ae.backgroundImage.height*Ae.backgroundImage.scaleY;B(h,new E5(l(u),{width:x,height:E,containerElement:l(c)})),l(h).setPrintAreaClickListener(async I=>{P(I)}),await l(h).setCanvasJSON(Ae),await new Promise(I=>setTimeout(I,200))}}catch(Ae){throw Ae}}async function y(){var q,se;if(l(h)){let Ae=0;const x=30;for(;Ae<x;){try{if((((se=(q=l(h)).getObjects)==null?void 0:se.call(q))||[]).length>0)break}catch{}Ae++,await new Promise(E=>setTimeout(E,100))}}try{const Ae=a()||o().estimateId||"temp",x=Ae!=="temp";let E=[];const I=`simplePrint_${i()}_${Ae}`,U=sessionStorage.getItem(I);U&&(E=JSON.parse(U)),E&&Array.isArray(E)&&E.length>0&&(B(g,!0),B(f,E.map(M=>({objectId:M.objectId,title:M.title,printMethod:M.printMethod||"",uploadedFiles:[],savedFileInfo:M.savedFileInfo||[]}))),await b(),l(h)&&(await ki(),await new Promise(M=>setTimeout(M,50)),L()),B(g,!1))}catch{B(g,!1)}}async function b(){for(const q of l(f))try{if(o().estimateId){const se=await rU(o().estimateId,q.objectId);if(se.success&&se.files.length>0){B(f,l(f).map(Ae=>Ae.objectId===q.objectId?{...Ae,uploadedFiles:se.files}:Ae));continue}}if(q.savedFileInfo&&q.savedFileInfo.length>0){const se=q.savedFileInfo.map(Ae=>({id:Math.random().toString(36).substring(2,8),name:Ae.name,size:Ae.size,type:Ae.type,url:Ae.url||"#",path:Ae.path||"",uploadedAt:new Date().toISOString()}));B(f,l(f).map(Ae=>Ae.objectId===q.objectId?{...Ae,uploadedFiles:se}:Ae))}}catch{if(q.savedFileInfo&&q.savedFileInfo.length>0){const Ae=q.savedFileInfo.map(x=>({id:Math.random().toString(36).substring(2,8),name:x.name,size:x.size,type:x.type,url:x.url||"#",path:x.path||"",uploadedAt:new Date().toISOString()}));B(f,l(f).map(x=>x.objectId===q.objectId?{...x,uploadedFiles:Ae}:x))}}}async function S(q,se){try{if(!await JQ(se.path))throw new Error("Storage   .");if(B(f,l(f).map(x=>{var E;return x.objectId===q?{...x,uploadedFiles:x.uploadedFiles.filter(I=>I.id!==se.id),savedFileInfo:(E=x.savedFileInfo)==null?void 0:E.filter(I=>I.name!==se.name)}:x})),o().estimateId){const x=l(f).find(E=>E.objectId===q);x&&await Jw(o().estimateId,q,x.uploadedFiles)}F()}catch(Ae){B(f,l(f).map(x=>x.objectId===q?{...x,uploadError:`  : ${Ae instanceof Error?Ae.message:"   "}`}:x)),setTimeout(()=>{B(f,l(f).map(x=>x.objectId===q?{...x,uploadError:void 0}:x))},3e3)}}function F(){if(!l(g))try{const q=l(f).map(x=>({objectId:x.objectId,title:x.title,printMethod:x.printMethod,savedFileInfo:x.savedFileInfo||x.uploadedFiles.map(E=>({name:E.name,size:E.size,type:E.type,url:E.url,path:E.path}))})),se=o().estimateId||"temp",Ae=`simplePrint_${i()}_${se}`;if(sessionStorage.setItem(Ae,JSON.stringify(q)),typeof window<"u")try{const x=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.saveCurrentState"}});window.dispatchEvent(x)}catch{}}catch{}}function P(q){if(l(f).find(I=>I.objectId===q))return;const Ae=d.find(I=>I.object_id===q),x=Ae?Ae.title:`${q} `,E={objectId:q,title:x,printMethod:"",uploadedFiles:[],isUploading:!1,uploadProgress:0,uploadError:void 0,savedFileInfo:[]};B(f,[...l(f),E]),L(),F()}function L(){if(l(h))try{l(h).updateAllObjectEnabled(),l(f).forEach(q=>{l(h).updateObjectDisabled(q.objectId)})}catch{}}function re(q){if(B(f,l(f).filter(se=>se.objectId!==q)),St.cancelPrint(o().index,q),L(),F(),typeof window<"u")try{const se=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.removePrintFromArea"}});window.dispatchEvent(se)}catch{}}function K(q,se){if(B(f,l(f).map(Ae=>Ae.objectId===q?{...Ae,printMethod:se}:Ae)),F(),typeof window<"u")try{const Ae=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.updatePrintMethod"}});window.dispatchEvent(Ae)}catch{}}async function H(q,se){const Ae=Array.from(se);B(f,l(f).map(x=>x.objectId===q?{...x,isUploading:!0,uploadProgress:0,uploadError:void 0}:x));try{const x=await YQ(Ae,`estimates/${o().estimateId||"temp"}`,(M,j,V)=>{B(f,l(f).map(X=>X.objectId===q?{...X,uploadProgress:V}:X))}),E=x.filter(M=>M.success&&M.file).map(M=>M.file),I=x.filter(M=>!M.success);if(E.length>0&&o().estimateId){const M=await Jw(o().estimateId,q,E);if(!M.success)throw new Error(M.error||"  .")}const U=Ae.map(M=>({name:M.name,size:M.size,type:M.type}));if(B(f,l(f).map(M=>M.objectId===q?{...M,uploadedFiles:E,isUploading:!1,uploadProgress:100,uploadError:I.length>0?`${I.length}   `:void 0,savedFileInfo:U}:M)),F(),typeof window<"u")try{const M=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.handleFileUpload"}});window.dispatchEvent(M)}catch{}if(I.length>0){const M=I.map(j=>j.error).join(", ")}}catch(x){B(f,l(f).map(E=>E.objectId===q?{...E,isUploading:!1,uploadProgress:0,uploadError:x instanceof Error?x.message:"  ."}:E))}}function J(q){const Ae=q.target.value;St.update(x=>({...x,uploadMemo:Ae}))}Jt(()=>(l(f),l(h),l(g)),()=>{l(f)&&l(h)&&!l(g)&&L()}),Zn(),Kr();var we=vU(),O=z(w(we),2),D=w(O),Z=w(D),ie=w(Z);ts(ie,q=>B(u,q),()=>l(u)),ts(Z,q=>B(c,q),()=>l(c));var de=z(D,2),ne=w(de);{var fe=q=>{var se=pU(),Ae=w(se),x=z(w(Ae),2),E=z(w(x),2),I=w(E),U=z(Ae,2);Yt(U,5,()=>l(f),Ar,(he,xe,Be)=>{var Le=hU(),Y=w(Le),k=w(Y),pe=w(k),ze=w(pe);ze.textContent=Be+1;var ye=z(pe,2),le=w(ye),Ce=w(le),ke=z(k,2),ce=z(Y,2),ee=z(w(ce),2);Yt(ee,4,()=>["","","",""," "],Ar,(ge,Oe)=>{var He=oU();const je=ot(()=>l(xe).printMethod===Oe);var at=w(He);{var At=Je=>{var ct=nU();T(Je,ct)};Ee(at,Je=>{l(je)&&Je(At)})}var it=z(at,2),Re=w(it),Xe=w(Re);Me(()=>{Fr(He,`odz-group odz-relative odz-bg-white odz-border-2 odz-rounded-xl odz-p-3 odz-transition-all odz-duration-200
                                           ${(l(je)?"odz-border-red-400 odz-bg-gradient-to-br odz-from-red-50 odz-to-rose-50 odz-shadow-md odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md hover:odz-scale-[1.02]")??""}`),Fr(Re,`odz-text-sm odz-font-semibold ${(l(je)?"odz-text-red-700":"odz-text-gray-700")??""}`),Ue(Xe,Oe)}),st("click",He,()=>K(l(xe).objectId,Oe)),T(ge,He)});var N=z(ce,2),_e=w(N),ve=z(_e,2),Se=w(ve),me=z(ve,2);{var Ne=ge=>{var Oe=sU(),He=w(Oe),je=z(w(He),2),at=w(je),At=z(He,2),it=w(At);Me(()=>{Ue(at,`  ... ${l(xe).uploadProgress||0}%`),rr(it,"style",`width: ${l(xe).uploadProgress||0}%`)}),T(ge,Oe)};Ee(me,ge=>{l(xe).isUploading&&ge(Ne)})}var De=z(me,2);{var qe=ge=>{var Oe=iU(),He=z(w(Oe),2),je=w(He);Me(()=>Ue(je,l(xe).uploadError)),T(ge,Oe)};Ee(De,ge=>{l(xe).uploadError&&ge(qe)})}var Qe=z(De,2);{var rt=ge=>{var Oe=dU(),He=w(Oe),je=z(w(He),2),at=w(je),At=z(He,2);Yt(At,5,()=>l(xe).uploadedFiles,Ar,(it,Re)=>{var Xe=lU(),Je=w(Xe),ct=z(w(Je),2),_t=w(ct),lt=w(_t),et=z(_t,2),Qt=w(et),vt=z(Je,2),Nt=w(vt);{var mt=zt=>{var Et=aU();Me(()=>rr(Et,"href",l(Re).url)),T(zt,Et)},Lt=zt=>{var Et=AU();T(zt,Et)};Ee(Nt,zt=>{l(Re).url&&l(Re).url!=="#"?zt(mt):zt(Lt,!1)})}var Pt=z(Nt,2);Me(zt=>{rr(_t,"title",l(Re).name),Ue(lt,l(Re).name),Ue(Qt,zt)},[()=>tU(l(Re).size)],ot),st("click",Pt,()=>S(l(xe).objectId,l(Re))),T(it,Xe)}),Me(()=>Ue(at,`${l(xe).uploadedFiles.length??""}  `)),T(ge,Oe)};Ee(Qe,ge=>{l(xe).uploadedFiles.length>0&&ge(rt)})}var tt=z(Qe,2);{var Te=ge=>{var Oe=uU(),He=pt(Oe),je=z(w(He),2),at=w(je),At=z(He,2);Yt(At,5,()=>l(xe).savedFileInfo,Ar,(it,Re)=>{var Xe=cU(),Je=z(w(Xe),2),ct=w(Je),_t=z(Je,2),lt=w(_t);Me(et=>{rr(Je,"title",l(Re).name),Ue(ct,l(Re).name),Ue(lt,`(${et??""}KB)`)},[()=>Math.round(l(Re).size/1024)],ot),T(it,Xe)}),Me(()=>Ue(at,`  ${l(xe).savedFileInfo.length??""}    (  )`)),T(ge,Oe)};Ee(tt,ge=>{l(xe).savedFileInfo&&l(xe).savedFileInfo.length>0&&l(xe).uploadedFiles.length===0&&ge(Te)})}Me(()=>{Ue(Ce,l(xe).title),rr(_e,"for",`file-upload-${l(xe).objectId??""}`),rr(Se,"id",`file-upload-${l(xe).objectId??""}`)}),st("click",ke,()=>re(l(xe).objectId)),st("change",Se,ge=>H(l(xe).objectId,ge.target.files)),T(he,Le)});var M=z(U,2),j=w(M),V=z(w(j),2),X=z(V,2);{var R=he=>{var xe=fU(),Be=z(w(xe),2),Le=w(Be);Me(Y=>Ue(Le,`${Y??""} `),[()=>o().uploadMemo.trim().length],ot),T(he,xe)};Ee(X,he=>{o().uploadMemo&&o().uploadMemo.trim().length>0&&he(R)})}Me(()=>Ue(I,`${l(f).length??""}  `)),br(V,()=>o().uploadMemo,he=>qt(St,dt(o).uploadMemo=he,dt(o))),st("input",V,J),T(q,se)},$=q=>{var se=gU();T(q,se)};Ee(ne,q=>{l(f).length>0?q(fe):q($,!1)})}T(n,we),Rr(),r()}const Au="uploads";function wU(n){try{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e||e.length!==3)return console.error("Invalid base64 data URL format"),null;const t=e[1],r=e[2],o=atob(r),s=new Array(o.length);for(let A=0;A<o.length;A++)s[A]=o.charCodeAt(A);const i=new Uint8Array(s);return{blob:new Blob([i],{type:t}),contentType:t}}catch(e){return console.error("Error converting base64 to Blob:",e),null}}function yU(n){const e=n.lastIndexOf("."),t=e>0?n.substring(0,e):n,r=e>0?n.substring(e):"";let o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"").replace(/_{2,}/g,"_").replace(/^_|_$/g,"").substring(0,200);o||(o=`file_${Date.now()}`);const s=r.replace(/[^\x00-\x7F]/g,"").toLowerCase();return o+s}async function bU(n,e){var t;try{let r,o,s={};if(n instanceof File)o=n,s.contentType=n.type;else if(typeof n=="string"&&n.startsWith("data:")){const a=wU(n);if(!a)throw new Error("Failed to convert base64 string to Blob.");o=a.blob,s.contentType=a.contentType}else throw new Error("Invalid data type provided. Must be a File object or a base64 data URL string.");if(console.log(`Uploading to bucket: ${Au}, path: ${e}, contentType: ${s.contentType}`),r=await gt.storage.from(Au).upload(e,o,{cacheControl:"3600",upsert:!0,contentType:s.contentType}),r.error)throw console.error("Supabase upload error:",r.error),r.error;if(!((t=r.data)!=null&&t.path))throw new Error("Upload successful but no path returned.");const{data:i}=gt.storage.from(Au).getPublicUrl(r.data.path);return i!=null&&i.publicUrl?(console.log("File uploaded successfully:",i.publicUrl),i.publicUrl):(console.warn("Could not get public URL after upload."),null)}catch(r){return console.error("Error in uploadImage function:",r),null}}async function _U(n){if(!n)return console.error("deleteImage: filePath is required."),!1;console.log(`Attempting to delete file from bucket: ${Au}, path: ${n}`);try{const{data:e,error:t}=await gt.storage.from(Au).remove([n]);if(t)throw console.error("Supabase delete error:",t),t;return e&&e.length>0?(console.log(`File deleted successfully: ${n}`),!0):(console.warn(`File deletion response for ${n} was successful but no data returned. It might have already been deleted or the path was incorrect.`),!0)}catch(e){return console.error("Error in deleteImage function:",e),!1}}var BU=te('<th class="odz-bg-base-200"> </th>'),xU=te('<td><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder=" "></td>'),zU=te('<tr><td><input type="checkbox" class="odz-checkbox"></td><th class="odz-text-sm odz-font-normal odz-whitespace-nowrap"> </th><!></tr>'),CU=te('<td><div class="odz-flex odz-gap-1"><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder="  "> <button class="odz-btn odz-btn-secondary odz-btn-sm"></button></div></td>'),SU=te('<div class="odz-overflow-x-auto odz-mt-4"><table class="odz-table odz-table-zebra odz-w-full"><thead><tr><th class="odz-bg-base-200 odz-w-10"><input type="checkbox" class="odz-checkbox"></th><th class="odz-bg-base-200"></th><!></tr></thead><tbody><!><tr class="odz-bg-base-100"><td colspan="2" class="odz-font-bold">  </td><!></tr></tbody></table> <div class="odz-mt-4"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>');function EU(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=Ie(),i=Ie(),a=Ie(),A=Ie();let d=ft(e,"onComplete",8,()=>{}),c=ft(e,"nameSheet",28,()=>({})),u=Ie({});En(()=>{B(u,JSON.parse(JSON.stringify(c())))});let h=Ie({}),f=Ie({});function g(ne){const fe={...l(h)};l(a).forEach($=>{fe[$.id]=ne}),B(h,fe)}function m(ne){const fe=l(f)[ne]||"",$={...l(u)};l(a).forEach(q=>{l(h)[q.id]&&($[q.title]||($[q.title]={}),$[q.title][l(y)[ne]||ne]=fe)}),B(u,$)}let y=Ie({});function b(ne,fe,$,q,se){l(u)[fe]||fr(u,l(u)[fe]={}),fr(u,l(u)[fe][q]=se)}function S(){l(a).forEach(ne=>{l(u)[ne.title]||fr(u,l(u)[ne.title]={}),l(A).forEach(fe=>{const $=l(y)[fe.objectId]||fe.objectId;l(u)[ne.title][$]===void 0&&fr(u,l(u)[ne.title][$]="")})}),c(JSON.parse(JSON.stringify(l(u)))),console.log("  :",c()),d()(c())}Jt(()=>o(),()=>{B(s,o().products[o().index])}),Jt(()=>l(s),()=>{var ne;B(i,((ne=l(s))==null?void 0:ne.variants)||[])}),Jt(()=>l(i),()=>{B(a,[...l(i)].sort((ne,fe)=>ne.title.localeCompare(fe.title)))}),Jt(()=>l(s),()=>{var ne;B(A,((ne=l(s))==null?void 0:ne.prints)||[])}),Jt(()=>(l(A),l(y),lp),()=>{l(A)&&l(A).length>0&&l(A).forEach(async ne=>{if(ne.objectId&&!l(y)[ne.objectId])try{const fe=await lp(ne.objectId);B(y,{...l(y),[ne.objectId]:(fe==null?void 0:fe.title)||ne.objectId})}catch{B(y,{...l(y),[ne.objectId]:ne.objectId})}})}),Jt(()=>(l(a),l(A),l(u),l(y),zn(c())),()=>{if(l(a).length>0&&l(A).length>0){const ne={...l(u)};l(a).forEach(fe=>{ne[fe.title]||(ne[fe.title]={}),l(A).forEach($=>{var se;const q=l(y)[$.objectId]||$.objectId;ne[fe.title][q]===void 0&&(ne[fe.title][q]=((se=c()[fe.title])==null?void 0:se[q])||"")})}),B(u,ne)}}),Jt(()=>(l(a),l(h)),()=>{l(a)&&l(a).length>0&&l(a).forEach(ne=>{l(h)[ne.id]===void 0&&B(h,{...l(h),[ne.id]:!0})})}),Zn(),Kr();var F=SU(),P=w(F),L=w(P),re=w(L),K=w(re),H=w(K),J=z(K,2);Yt(J,1,()=>l(A),Ar,(ne,fe)=>{var $=BU(),q=w($);Me(()=>Ue(q,l(y)[l(fe).objectId]||l(fe).objectId)),T(ne,$)});var we=z(L),O=w(we);Yt(O,1,()=>l(a),Ar,(ne,fe)=>{var $=zU(),q=w($),se=w(q),Ae=z(q),x=w(Ae),E=z(Ae);Yt(E,1,()=>l(A),Ar,(I,U)=>{var M=xU(),j=w(M);Me(()=>{var V;return Wm(j,((V=l(u)[l(fe).title])==null?void 0:V[l(y)[l(U).objectId]||l(U).objectId])||"")}),st("input",j,V=>b(l(fe).id,l(fe).title,l(U).objectId,l(y)[l(U).objectId]||l(U).objectId,V.target.value)),T(I,M)}),Me(()=>Ue(x,l(fe).title)),v0(se,()=>l(h)[l(fe).id],I=>fr(h,l(h)[l(fe).id]=I)),T(ne,$)});var D=z(O),Z=z(w(D));Yt(Z,1,()=>l(A),Ar,(ne,fe)=>{var $=CU(),q=w($),se=w(q),Ae=z(se,2);br(se,()=>l(f)[l(fe).objectId],x=>fr(f,l(f)[l(fe).objectId]=x)),st("click",Ae,()=>m(l(fe).objectId)),T(ne,$)});var ie=z(P,2),de=w(ie);Me(ne=>mu(H,ne),[()=>Object.values(l(h)).every(ne=>ne)],ot),st("change",H,ne=>g(ne.target.checked)),st("click",de,S),T(n,F),Rr(),r()}var FU=te('<span class="odz-text-info odz-inline-flex odz-items-center odz-gap-1"><!>  ...</span>'),IU=te('<span class="odz-text-success"> </span>'),QU=te('<span class="odz-text-error"> </span>'),UU=te('<span class="odz-text-gray-500"> </span>'),TU=te('<a target="_blank" rel="noopener noreferrer" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50" aria-label=" " title="   "><!></a>'),LU=te('<div class="odz-flex odz-items-center odz-gap-4 odz-p-3 odz-bg-base-200 odz-rounded-lg odz-relative"><div class="odz-flex-1 odz-min-w-0"><p class="odz-font-medium odz-truncate"> </p> <p class="odz-text-sm odz-text-base-content/70"><!> <!></p></div> <!> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" aria-label=" "><!></button></div>'),PU=te('<div class="odz-mt-4 odz-flex odz-flex-col odz-gap-2"></div>'),kU=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),OU=te('<label for="nameSheet" class="odz-label odz-label-text odz-text-sm odz-mt-4 odz-ml-4 odz-font-bold">       .</label> <div class="odz-card-actions odz-p-4 odz-justify-start"><button class="odz-btn odz-btn-secondary odz-min-w-32"> </button></div> <!>',1),DU=te("<!>  ...",1),NU=te("<!>  ...",1),MU=te('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base"> </h2> <div role="presentation"><div class="odz-flex odz-flex-col odz-items-center odz-gap-4"><svg xmlns="http://www.w3.org/2000/svg" class="odz-w-12 odz-h-12 odz-text-base-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <div class="odz-text-base-content"><p class="odz-font-medium">   </p> <label class="odz-btn odz-btn-primary odz-btn-sm odz-mt-2">  <input type="file" multiple class="odz-hidden" accept="image/*"></label></div></div></div> <!> <h2 class="odz-card-title odz-text-base odz-mt-4"> </h2> <textarea name="" id="" rows="5" class="odz-textarea odz-text-sm odz-textarea-bordered odz-textarea-lg odz-w-full odz-mt-4"></textarea></div> <!> <div class="odz-card-actions odz-p-4 odz-justify-center"><button class="odz-btn odz-btn-primary odz-min-w-32"><!></button></div></div>');function HU(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(Ls,"$shopStore",t),s=Ie(),i=Ie(),a=Ie();let A=ft(e,"fileUploadTitle",8," "),d=ft(e,"callback",8),c=ft(e,"uploadMemo",12,""),u=ft(e,"initialFiles",24,()=>[]),h=ft(e,"useNameSheet",8,!1),f=ft(e,"nameSheet",28,()=>({})),g=Ie([]),m=Ie(),y=Ie(!1),b=Ie(!1),S=Ie(!1);async function F(X){const R=Array.from(X);for(const he of R){const xe=crypto.randomUUID(),Be=yU(he.name),Le=`estimate-uploads/${o().id}/${Date.now()}-${Be}`,Y={id:xe,file:he,status:"uploading",path:Le};B(g,[...l(g),Y]);try{const k=await bU(he,Le);B(g,l(g).map(pe=>pe.id===xe?{...pe,status:k?"uploaded":"error",url:k,error:k?null:"Upload failed to return URL"}:pe))}catch(k){console.error("Upload error for file:",he.name,k),B(g,l(g).map(pe=>pe.id===xe?{...pe,status:"error",error:k.message||"Unknown upload error"}:pe))}}}function P(X){X.preventDefault(),B(y,!0)}function L(X){X.preventDefault(),B(y,!1)}function re(X){var he;X.preventDefault(),B(y,!1);const R=(he=X.dataTransfer)==null?void 0:he.files;R&&F(R)}function K(X){const R=X.target;R.files&&(F(R.files),R.value="")}async function H(X){const R=l(g).find(xe=>xe.id===X);if(!R)return;const he=[...l(g)];if(B(g,l(g).filter(xe=>xe.id!==X)),R.status==="uploaded"&&R.path)try{await _U(R.path)||(console.warn(`Failed to delete file from storage: ${R.path}`),alert("   ."),B(g,he))}catch(xe){console.error("Error deleting file from storage:",xe),alert("     ."),B(g,he)}else R.status==="uploading"?console.log("Deleting an item that was still uploading."):console.log("Deleting an item not present in storage or in error state.")}function J(){B(b,!0);const X=l(g).filter(he=>he.status==="uploaded"&&he.url),R={uploadTitle:A(),uploadMemo:c(),files:X.map(he=>{var xe;return{name:((xe=he.file)==null?void 0:xe.name)||he.initialName||"Unknown File",url:he.url}})};try{d()(R,f())}catch(he){console.error("Error executing callback:",he),alert("     .")}finally{B(b,!1)}}En(()=>{console.log("upload component mounted"),u()&&u().length>0&&B(g,u().map(X=>({id:X.path||crypto.randomUUID(),file:null,initialName:X.name,status:"uploaded",url:X.url,path:X.path,error:null})))}),Jt(()=>l(g),()=>{B(s,l(g).every(X=>X.status==="uploaded"||X.status==="error"))}),Jt(()=>l(g),()=>{B(i,l(g).some(X=>X.status==="error"))}),Jt(()=>l(g),()=>{B(a,l(g).some(X=>X.status==="uploading"))}),Zn(),Kr();var we=MU(),O=w(we),D=z(w(O),2),Z=w(D),ie=z(w(Z),2),de=z(w(ie),2),ne=z(w(de));ts(ne,X=>B(m,X),()=>l(m));var fe=z(D,2);{var $=X=>{var R=PU();Yt(R,5,()=>l(g),he=>he.id,(he,xe)=>{var Be=LU(),Le=w(Be),Y=w(Le),k=w(Y),pe=z(Y,2),ze=w(pe);{var ye=ve=>{var Se=Wr();Me(me=>Ue(Se,`${me??""} MB -`),[()=>(l(xe).file.size/1024/1024).toFixed(2)],ot),T(ve,Se)};Ee(ze,ve=>{l(xe).file&&ve(ye)})}var le=z(ze,2);{var Ce=ve=>{var Se=FU(),me=w(Se);zd(me,{class:"odz-animate-spin odz-w-3 odz-h-3"}),T(ve,Se)},ke=ve=>{var Se=Dt(),me=pt(Se);{var Ne=qe=>{var Qe=IU();T(qe,Qe)},De=qe=>{var Qe=Dt(),rt=pt(Qe);{var tt=ge=>{var Oe=QU();Me(()=>rr(Oe,"title",l(xe).error||"Unknown error")),T(ge,Oe)},Te=ge=>{var Oe=UU();T(ge,Oe)};Ee(rt,ge=>{l(xe).status==="error"?ge(tt):ge(Te,!1)},!0)}T(qe,Qe)};Ee(me,qe=>{l(xe).status==="uploaded"?qe(Ne):qe(De,!1)},!0)}T(ve,Se)};Ee(le,ve=>{l(xe).status==="uploading"?ve(Ce):ve(ke,!1)})}var ce=z(Le,2);{var ee=ve=>{var Se=TU(),me=w(Se);tE(me,{class:"odz-w-5 odz-h-5"}),Me(()=>rr(Se,"href",l(xe).url)),T(ve,Se)};Ee(ce,ve=>{l(xe).status==="uploaded"&&l(xe).url&&ve(ee)})}var N=z(ce,2),_e=w(N);yu(_e,{class:"odz-w-5 odz-h-5"}),Me(()=>{var ve;Ue(k,((ve=l(xe).file)==null?void 0:ve.name)||l(xe).initialName||"Unknown File"),N.disabled=l(xe).status==="uploading"}),st("click",N,()=>H(l(xe).id)),T(he,Be)}),T(X,R)};Ee(fe,X=>{l(g)&&l(g).length>0&&X($)})}var q=z(fe,2),se=w(q),Ae=z(q,2),x=z(O,2);{var E=X=>{var R=OU(),he=z(pt(R),2),xe=w(he),Be=z(he,2);{var Le=Y=>{var k=kU(),pe=w(k),ze=w(pe),ye=w(ze),le=z(ze,2);EU(le,{get nameSheet(){return f()},onComplete:Ce=>{f(Ce),B(S,!1)}}),st("click",ye,()=>B(S,!1)),T(Y,k)};Ee(Be,Y=>{l(S)&&Y(Le)})}st("click",xe,()=>B(S,!0)),T(X,R)};Ee(x,X=>{h()&&X(E)})}var I=z(x,2),U=w(I),M=w(U);{var j=X=>{var R=Wr("");T(X,R)},V=X=>{var R=Dt(),he=pt(R);{var xe=Le=>{var Y=DU(),k=pt(Y);zd(k,{class:"odz-animate-spin odz-mr-2"}),T(Le,Y)},Be=Le=>{var Y=Dt(),k=pt(Y);{var pe=ye=>{var le=NU(),Ce=pt(le);zd(Ce,{class:"odz-animate-spin odz-mr-2"}),T(ye,le)},ze=ye=>{var le=Wr("");T(ye,le)};Ee(k,ye=>{l(a)?ye(pe):ye(ze,!1)},!0)}T(Le,Y)};Ee(he,Le=>{l(b)?Le(xe):Le(Be,!1)},!0)}T(X,R)};Ee(M,X=>{l(g).length===0&&!l(b)&&!l(a)?X(j):X(V,!1)})}Me(()=>{Fr(D,`odz-border-2 odz-border-dashed odz-rounded-lg odz-p-5 odz-text-center odz-mt-4 odz-transition-colors ${(l(y)?"odz-border-primary odz-bg-primary/5":"odz-border-base-300")??""}`),Ue(se,A()),rr(Ae,"placeholder",A()),U.disabled=l(b)||l(a)}),st("change",ne,K),st("dragover",D,P),st("dragleave",D,L),st("drop",D,re),br(Ae,c),st("click",U,J),T(n,we),Rr(),r()}async function jU(n){const{data:e,error:t}=await gt.from("color_groups").select("*").eq("id",n).single();if(t)throw t;return e}var RU=te('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),qU=te('<div class="odz-tooltip odz-tooltip-secondary"><button><!></button></div>'),KU=te('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2">  </h3> <div class="odz-flex odz-items-center odz-gap-2"><input type="color" class="odz-h-10 odz-w-10 odz-p-0.5 odz-rounded-full odz-cursor-pointer odz-border odz-border-base-300 [&amp;::-webkit-color-swatch-wrapper]:odz-p-0 [&amp;::-webkit-color-swatch]:odz-rounded-full [&amp;::-moz-color-swatch]:odz-rounded-full"> <input type="text" placeholder="   " class="odz-input odz-input-bordered odz-flex-1"> <button class="odz-btn odz-btn-primary"></button></div></div>'),$U=te('<div class="odz-flex odz-items-center odz-gap-2 odz-bg-base-200 odz-rounded-full odz-px-3 odz-py-1"><div class="odz-w-4 odz-h-4 odz-rounded-full"></div> <span class="odz-text-sm"> </span> <button class="odz-btn odz-btn-ghost odz-btn-xs odz-rounded-full"></button></div>'),VU=te('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),GU=te('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base odz-mb-4">  <span class="odz-text-sm odz-font-normal"> </span></h2> <div class="odz-flex odz-flex-wrap odz-gap-2"></div> <!> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div> <!> <!>',1);function WU(n,e){jr(e,!1);let t=ft(e,"colorGroupId",8,null),r=ft(e,"selectedTemplateId",8,null),o=ft(e,"callback",8),s=ft(e,"selectedColors",28,()=>[]),i=Ie(!1),a=Ie([]),A=Ie(0),d=Ie(!1),c=Ie("#000000"),u=Ie(""),h=Ie(!1),f=Ie("");async function g(){if(t()){B(i,!0);try{const $=await jU(t());B(a,($==null?void 0:$.colors)||[]),B(d,($==null?void 0:$.use_custom)||!1)}finally{B(i,!1)}}}async function m(){if(!r())return;const $=await Gd(r());console.log({templateProduct:$}),B(A,Math.max(...$.template_product_variants.map(q=>q.color_count))),console.log({colorCount:l(A)})}function y($){if(s().findIndex(se=>se.hex===$.hex)===-1){if(s().length>=l(A))return;s([...s(),$])}else s(s().filter(se=>se.hex!==$.hex))}function b($){const q=$.replace("#",""),se=parseInt(q.substr(0,2),16),Ae=parseInt(q.substr(2,2),16),x=parseInt(q.substr(4,2),16);return(se*299+Ae*587+x*114)/1e3<128}function S(){if(s().length===0){B(h,!0),B(f,"  .");return}console.log("selectedColors",s()),o()(s())}En(async()=>{await g(),await m()}),Kr();var F=GU(),P=pt(F),L=w(P),re=w(L),K=z(w(re)),H=w(K),J=z(re,2);Yt(J,5,()=>l(a),Ar,($,q)=>{var se=qU(),Ae=w(se),x=w(Ae);{var E=I=>{var U=RU(),M=w(U);Me(j=>rr(M,"stroke",j),[()=>b(l(q).hex)?"white":"black"],ot),T(I,U)};Ee(x,I=>{s().some(U=>U.hex===l(q).hex)&&I(E)})}Me(I=>{rr(se,"data-tip",l(q).name),Fr(Ae,`odz-relative odz-w-10 odz-h-10 odz-rounded-full odz-transition-all odz-border hover:odz-scale-110 ${I??""}`),rr(Ae,"style",`background-color: ${l(q).hex??""};`)},[()=>s().some(I=>I.hex===l(q).hex)?"odz-border-primary odz-scale-110":"odz-border"],ot),st("click",Ae,()=>y(l(q))),T($,se)});var we=z(J,2);{var O=$=>{var q=KU(),se=z(w(q),2),Ae=w(se),x=z(Ae,2),E=z(x,2);br(Ae,()=>l(c),I=>B(c,I)),br(x,()=>l(u),I=>B(u,I)),st("click",E,()=>{if(l(u).trim()){const I={name:l(u),hex:l(c)};y(I),B(u,""),B(c,"#000000")}}),T($,q)};Ee(we,$=>{l(d)&&$(O)})}var D=z(we,2);{var Z=$=>{var q=VU(),se=z(w(q),2);Yt(se,5,s,Ar,(Ae,x)=>{var E=$U(),I=w(E),U=z(I,2),M=w(U),j=z(U,2);Me(()=>{rr(I,"style",`background-color: ${l(x).hex??""};`),Ue(M,l(x).name)}),st("click",j,()=>y(l(x))),T(Ae,E)}),T($,q)};Ee(D,$=>{s().length>0&&$(Z)})}var ie=z(L,2),de=w(ie),ne=z(P,2);Xd(ne,{get isLoading(){return l(i)}});var fe=z(ne,2);Wd(fe,{get isOpen(){return l(h)},set isOpen($){B(h,$)},get message(){return l(f)},set message($){B(f,$)},$$legacy:!0}),Me(()=>Ue(H,`(${s().length??""}/${l(A)??""}   .)`)),st("click",de,S),T(n,F),Rr()}var XU=te('<li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"> </button></li>'),YU=te('<div class="odz-text-sm odz-breadcrumbs odz-mb-6"><ul><li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"></button></li> <!></ul></div>'),JU=te('<figure><img class="odz-h-48 odz-w-full odz-object-cover"></figure>'),ZU=te('<div class="odz-h-48 odz-bg-base-200 odz-flex odz-items-center odz-justify-center"><span class="odz-text-base-content/50"> </span></div>'),eT=te('<p class="odz-text-sm odz-text-sm odz-text-base-content/70"> </p>'),tT=te('<button class="odz-btn odz-btn-outline odz-w-full odz-mb-2"> </button>'),rT=te('<div class="odz-card odz-bg-base-100 odz-shadow hover:odz-shadow-lg odz-rounded-lg odz-transition-shadow odz-cursor-pointer"><!> <div class="odz-card-body odz-p-5"><h2 class="odz-card-title odz-text-base"> </h2> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><!> <button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>'),nT=te('<div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"></div>'),oT=te('<div class="p-4"><h1 class="odz-text-2xl odz-font-bold odz-mb-6"> </h1> <!> <!></div> <!>',1);function sT(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t);let s=ft(e,"objectId",12),i=ft(e,"isTemplateModal",12),a=ft(e,"updateObjectDisabled",8),A=ft(e,"selectedPrintIndex",12),d=ft(e,"productId",8,null),c=ft(e,"estimateId",8,void 0),u=Ie(!1),h=Ie(null),f=Ie([]),g=Ie([]),m=Ie(!1),y=Ie(!1),b=Ie(null),S="",F=Ie({uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}}),P=null;function L(Ae){if(d()){const x=Ae.products.findIndex(E=>{var I;return((I=E==null?void 0:E.product)==null?void 0:I.id)===d()});if(x!==-1)return x}return Ae.index??0}async function re(Ae){var I,U;const x=await wB(Ae.id);if(B(f,await Hu(Ae.id)),console.log("selectTemplate called:",{template:Ae,selectedPrintIndex:A()}),B(h,{...x}),l(h).is_last){B(m,l(h).use_file_upload),B(y,l(h).use_color),B(b,l(h).color_group_id);const M=await Gd(l(h).id),j=o(),V=L(j),X=j.products[V],R=A()!==null?(I=X==null?void 0:X.prints)==null?void 0:I[A()]:(U=X==null?void 0:X.prints)==null?void 0:U.find(he=>he.objectId===s());P={...R?{...R}:{},parentTemplates:l(f),template:{...Ae,templateProduct:M},objectId:s(),title:S},R!=null&&R.uploads?(fr(F,l(F).uploads=R.uploads),fr(F,l(F).nameSheet=R.nameSheet||{})):(fr(F,l(F).uploads=null),fr(F,l(F).nameSheet={})),R!=null&&R.colors?fr(F,l(F).colors=R.colors):fr(F,l(F).colors=null),l(m)||(P={...P,uploads:null,nameSheet:{}},fr(F,l(F).uploads=null),fr(F,l(F).nameSheet={})),l(y)||(P={...P,colors:null},fr(F,l(F).colors=null)),!l(m)&&!l(y)&&(await D(),O())}else{B(m,!1),B(y,!1);const M=await yB(Ae.id);B(g,M)}}async function K(){H()}async function H(){var Ae,x,E;B(u,!0),B(m,!1),B(y,!1),B(f,[]),P=null;try{if(A()!==null){const U=L(o()),M=o().products[U],j=(Ae=M==null?void 0:M.prints)==null?void 0:Ae[A()];j?(console.log({print:j}),j.uploads&&fr(F,l(F).uploads=j.uploads),j.colors&&fr(F,l(F).colors=j.colors),(x=j.uploads)!=null&&x.uploadMemo&&fr(F,l(F).uploadMemo=j.uploads.uploadMemo),j.nameSheet&&fr(F,l(F).nameSheet=j.nameSheet)):A(null)}const I=await lp(s());if(B(g,I.process_print_area_templates.map(({template:U})=>U)),S=I.title,A()!==null){const U=L(o()),M=o().products[U],j=(E=M==null?void 0:M.prints)==null?void 0:E[A()];j!=null&&j.template}}catch(I){console.error(I)}finally{console.log("isUpload",l(m)),B(u,!1)}}async function J(Ae,x){if(B(m,!1),fr(F,l(F).uploads=Ae),fr(F,l(F).nameSheet=x),!P){console.warn("selectUpload: pendingPrintData ");return}P={...P,uploads:Ae,nameSheet:x},l(y)===!1&&(await D(),O())}async function we(Ae){if(B(y,!1),fr(F,l(F).colors=Ae),!P){console.warn("selectColor: pendingPrintData ");return}P={...P,colors:Ae},await D(),O()}function O(){!l(m)&&!l(y)&&(i(!1),s(null),P=null,B(F,{uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}})),a()()}async function D(){var x;if(!P)return;St.update(E=>{const I=L(E),U=[...E.products];if(!U[I])return E;const M=[...U[I].prints||[]];if(A()===null){const j=M.findIndex(V=>V.objectId===P.objectId);j!==-1?M[j]=P:M.push(P)}else M[A()]=P;return U[I]={...U[I],prints:M},{...E,products:U}});const Ae=L(o());if(await St.calculatePrintPrice(Ae),await new Promise(E=>setTimeout(E,50)),typeof window<"u"&&d())try{const E=((x=o().products[Ae])==null?void 0:x.prints)||[],I=c()||o().estimateId||"temp",U=`detailedPrint_${d()}_${I}`,M=JSON.stringify(E);window.sessionStorage.setItem(U,M),console.log(" Templates.svelte - SessionStorage :",{key:U,printsCount:E.length,productId:d(),estimateId:I,mode:c()?"Edit":"Create"});const j=new CustomEvent("detailedPrintUpdate",{detail:{productId:d(),timestamp:Date.now(),source:"Templates",estimateId:I}});window.dispatchEvent(j),console.log(" Templates.svelte -    :",{productId:d(),estimateId:I,timestamp:Date.now()})}catch(E){console.error(" Templates.svelte - SessionStorage  :",E)}console.log("Decision point - finalized",{selectedPrintIndex:A(),objectId:P.objectId}),P=null}En(async()=>{H()}),Kr();var Z=oT(),ie=pt(Z),de=z(w(ie),2);{var ne=Ae=>{var x=YU(),E=w(x),I=w(E),U=w(I),M=z(I,2);Yt(M,1,()=>l(f),Ar,(j,V)=>{var X=XU(),R=w(X),he=w(R);Me(()=>Ue(he,l(V).name)),st("click",R,av(()=>re(l(V)))),T(j,X)}),st("click",U,av(()=>K())),T(Ae,x)};Ee(de,Ae=>{l(h)&&Ae(ne)})}var fe=z(de,2);{var $=Ae=>{const x=ot(()=>{var M;return(M=l(h))==null?void 0:M.file_upload_title}),E=ot(()=>l(F).uploadMemo||""),I=ot(()=>{var M;return((M=l(F).uploads)==null?void 0:M.files)||[]}),U=ot(()=>{var M;return(M=l(h))==null?void 0:M.use_name_list});HU(Ae,{get fileUploadTitle(){return l(x)},callback:J,get uploadMemo(){return l(E)},get initialFiles(){return l(I)},get nameSheet(){return l(F).nameSheet},get useNameSheet(){return l(U)}})},q=Ae=>{var x=Dt(),E=pt(x);{var I=M=>{const j=ot(()=>{var X;return(X=l(h))==null?void 0:X.id}),V=ot(()=>l(F).colors||[]);WU(M,{get colorGroupId(){return l(b)},get selectedTemplateId(){return l(j)},callback:we,get selectedColors(){return l(V)}})},U=M=>{var j=nT();Yt(j,5,()=>l(g),Ar,(V,X)=>{var R=rT(),he=w(R);{var xe=ce=>{var ee=JU(),N=w(ee);Me(()=>{rr(N,"src",l(X).image_url),rr(N,"alt",l(X).name)}),T(ce,ee)},Be=ce=>{var ee=ZU();T(ce,ee)};Ee(he,ce=>{l(X).image_url?ce(xe):ce(Be,!1)})}var Le=z(he,2),Y=w(Le),k=w(Y),pe=z(Y,2);{var ze=ce=>{var ee=eT(),N=w(ee);Me(()=>Ue(N,l(X).description)),T(ce,ee)};Ee(pe,ce=>{l(X).description&&ce(ze)})}var ye=z(Le,2),le=w(ye);{var Ce=ce=>{var ee=tT();st("click",ee,av(()=>window.open(l(X).detail_url,"_blank","width=800,height=600"))),T(ce,ee)};Ee(le,ce=>{l(X).detail_url&&ce(Ce)})}var ke=z(le,2);Me(()=>Ue(k,l(X).name)),st("click",ke,()=>re(l(X))),T(V,R)}),T(M,j)};Ee(E,M=>{l(y)?M(I):M(U,!1)},!0)}T(Ae,x)};Ee(fe,Ae=>{l(m)?Ae($):Ae(q,!1)})}var se=z(ie,2);Xd(se,{get isLoading(){return l(u)},set isLoading(Ae){B(u,Ae)},$$legacy:!0}),T(n,Z),Rr(),r()}var iT=te('<div class="odz-alert odz-alert-error odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <button class="odz-btn odz-btn-sm odz-btn-outline"> </button></div>'),aT=te('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-gray-600">  ...</span></div></div>'),AT=te('<img class="odz-h-6 odz-w-6 odz-rounded-md odz-object-cover">'),lT=te('<div class="odz-inline-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2"><!> <span class="odz-text-xs odz-font-medium odz-text-slate-700"> </span></div>'),dT=te('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"> </p> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),cT=te('<span class="odz-inline-flex odz-items-center odz-gap-1 odz-rounded-full odz-bg-slate-100 odz-px-2 odz-py-1"><span class="odz-h-3.5 odz-w-3.5 odz-rounded-full odz-border odz-border-slate-300"></span> <span class="odz-text-[11px] odz-text-slate-600"> </span></span>'),uT=te('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-flex-wrap odz-gap-1.5"></div></div>'),hT=te('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2 odz-text-xs odz-text-slate-600"><svg class="odz-h-3.5 odz-w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 9.828m-2.828-2.828L16 5l3 3-1.828 1.828m-2.828-2.828L9 5l3 3"></path></svg> <span> </span></div></div>'),fT=te('<div class="odz-grid odz-gap-3 sm:odz-grid-cols-2"><!> <!></div>'),pT=te('<div class="odz-rounded-2xl odz-border odz-border-slate-200 odz-bg-white odz-shadow-sm odz-transition-shadow hover:odz-shadow-md"><div class="odz-flex odz-items-start odz-justify-between odz-gap-4 odz-border-b odz-border-slate-100 odz-bg-slate-50 odz-rounded-t-2xl odz-px-5 odz-py-4"><div class="odz-space-y-1"><span class="odz-inline-flex odz-items-center odz-gap-2 odz-text-xs odz-font-semibold odz-text-slate-500"><span class="odz-inline-flex odz-h-5 odz-w-5 odz-items-center odz-justify-center odz-rounded-full odz-bg-slate-200 odz-text-[10px] odz-font-bold odz-text-slate-700"></span>  </span> <h3 class="odz-text-base odz-font-semibold odz-text-slate-900"> </h3></div> <div class="odz-flex odz-shrink-0 odz-items-center odz-gap-2"><button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button></div></div> <div class="odz-space-y-4 odz-p-5"><!> <!></div></div>'),gT=te('<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-5"></div></div>'),vT=te('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>         .</p></div></div>'),mT=te('<div class="odz-mb-4"><h2 class="odz-text-lg odz-font-semibold"> </h2></div>'),wT=te('<dialog id="detailed-print-template-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl max-h-100 overflow-y-auto"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!> <!></div></dialog>'),yT=te('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">   <span class="odz-text-sm odz-font-normal odz-text-gray-500">     .</span></h1> <!> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas> <!></div> <p class="odz-text-sm odz-text-gray-500">         .</p></div></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div> <!>',1);function bT(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(Ls,"$shopStore",t),s=()=>Xr(St,"$estimateStore",t);let i=ft(e,"productId",8),a=ft(e,"estimateId",8,void 0);ft(e,"onComplete",8),ft(e,"onCancel",8,()=>{});let A=null,d=[],c=Ie(),u=Ie(),h=Ie(),f=Ie(!0),g=Ie(null),m=Ie(!1),y=Ie(null),b=Ie(null),S=Ie(""),F=Ie(null),P=Ie([]),L=Ie(!1),re=Ie(""),K=Ie(!1),H=Ie(null),J=Ie(""),we=Ie(null),O=Ie(!1),D=Ie(!1),Z=Ie(!1);const ie=".main-estimate-modal-box";function de(){if(typeof window<"u")try{const N=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"DetailedPrint"}});window.dispatchEvent(N),console.log(" DetailedPrint -    :",{productId:i(),timestamp:Date.now()})}catch(N){console.error(" DetailedPrint -    :",N)}}En(async()=>{try{await M(),await ne(),Ae()}finally{B(D,!0)}}),Eo(()=>{var N;(N=l(h))==null||N.destroy(),U()});async function ne(){try{B(f,!0),B(g,null),await fe(),await ki(),Ae()}catch(N){console.error("DetailedPrint initialize failed:",N),B(g,N instanceof Error?N.message:"   .")}finally{B(f,!1)}}async function fe(){await ki();let N=0;const _e=50;for(;!l(u)&&N<_e;)await new Promise(Ne=>setTimeout(Ne,100)),N++;if(!l(u))throw new Error("    .");if(A=await BB(i(),o().id),A!=null&&A.id&&(d=await xB(A.id)),!(A!=null&&A.canvas_json))throw new Error("    .");const ve=typeof A.canvas_json=="string"?JSON.parse(A.canvas_json):A.canvas_json,Se=ve.backgroundImage.width*ve.backgroundImage.scaleX,me=ve.backgroundImage.height*ve.backgroundImage.scaleY;B(h,new E5(l(u),{width:Se,height:me,containerElement:l(c)})),l(h).setPrintAreaClickListener(Ne=>{$(Ne)}),await l(h).setCanvasJSON(ve)}function $(N){var me,Ne,De;if(!l(h))return;B(y,N),B(S,((me=d.find(qe=>qe.object_id===N))==null?void 0:me.title)||`${N} `);const ve=(((De=(Ne=l(h)).getObjects)==null?void 0:De.call(Ne))||[]).find(qe=>{var Qe;return((Qe=qe==null?void 0:qe.data)==null?void 0:Qe.objectId)===N});ve?B(F,{x:Math.round(ve.left||0),y:Math.round(ve.top||0),width:Math.round((ve.width||0)*(ve.scaleX||1)),height:Math.round((ve.height||0)*(ve.scaleY||1))}):B(F,null);const Se=l(P).findIndex(qe=>qe.objectId===N);B(b,Se>=0?Se:null),B(m,!0),q()}function q(){const N=document.querySelector(ie);N&&(N.scrollTop=0)}function se(N){if(!N)return;const _e=s().products.findIndex(ve=>{var Se;return((Se=ve==null?void 0:ve.product)==null?void 0:Se.id)===i()});if(_e===-1){console.warn("DetailedPrint cancelPrint:     .",{productId:i()});return}St.cancelPrint(_e,N),Ae(),U(),de()}function Ae(){l(h)&&(l(h).updateAllObjectEnabled(),l(P).forEach(N=>{N.objectId&&l(h).updateObjectDisabled(N.objectId)}))}function x(N){const _e=l(P)[N];_e!=null&&_e.objectId&&(B(y,_e.objectId),B(b,N),B(S,_e.title||`${_e.objectId} `),B(F,null),B(m,!0),q())}function E(){B(m,!1)}function I(){const N=a()||"temp";return`detailedPrint_${i()}_${N}`}function U(N){if(!(typeof window>"u"))try{const _e=N??JSON.stringify(l(P)??[]),ve=I();window.sessionStorage.setItem(ve,_e),B(re,_e);try{B(we,JSON.parse(_e)),console.log("DetailedPrint session ",{storageKey:ve,printsCount:Array.isArray(l(we))?l(we).length:"invalid"}),de();try{ur.selectPrintMethod("detailed")}catch(Se){console.warn("fixedEstimateStore selectPrintMethod :",Se)}try{Hn.selectPrintMethod(i(),"detailed")}catch(Se){console.warn("extendedProductDataStore selectPrintMethod :",Se)}}catch(Se){console.error("DetailedPrint fallback  :",Se)}}catch(_e){console.error("DetailedPrint session  :",_e)}}async function M(){var me,Ne,De,qe,Qe,rt,tt;if(typeof window>"u")return;const _e=(a()||"temp")!=="temp";let ve=null,Se=null;if(_e&&console.log(" Edit mode detected - will use sessionStorage populated from DB"),!ve||ve.length===0){const Te=I();if(Se=window.sessionStorage.getItem(Te),Se)try{console.log(" Raw sessionStorage data:",Se),ve=JSON.parse(Se),console.log(" Parsed printsToRestore:",ve),console.log(" First print colors detail:",{exists:ve.length>0,colorsArray:(me=ve[0])==null?void 0:me.colors,colorsLength:(De=(Ne=ve[0])==null?void 0:Ne.colors)==null?void 0:De.length,colorsType:typeof((qe=ve[0])==null?void 0:qe.colors),isArray:Array.isArray((Qe=ve[0])==null?void 0:Qe.colors),allColors:(tt=(rt=ve[0])==null?void 0:rt.colors)==null?void 0:tt.map((ge,Oe)=>({idx:Oe,name:ge.name,hex:ge.hex}))}),console.log(" Using sessionStorage detailed prints:",{printsCount:ve.length,colorsPerPrint:ve.map((ge,Oe)=>{var He;return{printIndex:Oe,colorsCount:((He=ge.colors)==null?void 0:He.length)||0,colors:ge.colors,objectId:ge.objectId}})})}catch(ge){console.error("Failed to parse sessionStorage prints:",ge)}}if(!(!ve||!Array.isArray(ve)))try{const Te=ve;B(we,[...Te]),B(P,[...Te]),console.log(" sessionFallbackPrints updated:",{printsCount:l(we).length,colors:l(we).map(He=>He.colors)});const Oe=pn(St).products.findIndex(He=>{var je;return((je=He==null?void 0:He.product)==null?void 0:je.id)===i()});if(B(re,Se),Oe===-1){console.warn("DetailedPrint   :    .",{productId:i()}),B(H,Te),B(J,Se),B(K,!0);return}if(B(K,!0),j(Te),await ki(),Array.isArray(Te)&&Te.length>0){try{ur.selectPrintMethod("detailed")}catch(He){console.warn("fixedEstimateStore selectPrintMethod  (restore):",He)}try{Hn.selectPrintMethod(i(),"detailed")}catch(He){console.warn("extendedProductDataStore selectPrintMethod  (restore):",He)}de()}}catch(Te){console.error("DetailedPrint   :",Te)}finally{l(H)||B(K,!1)}}function j(N){if(!N||N.length===0)return;const _e=s().products.findIndex(ve=>{var Se;return((Se=ve==null?void 0:ve.product)==null?void 0:Se.id)===i()});if(_e===-1){console.warn("DetailedPrint applyPrintsToStore:    .",{productId:i()});return}B(O,!0),console.log("DetailedPrint applyPrintsToStore ",{productId:i(),printsCount:N.length}),B(Z,!1),St.update(ve=>{const Se=[...ve.products];return Se[_e]={...Se[_e],prints:N},{...ve,products:Se,index:_e}}),B(re,JSON.stringify(N??[])),ki().then(()=>{B(O,!1)})}Jt(()=>(l(we),s(),l(P)),()=>{var N;l(we)&&l(we).length>0&&(((N=s())==null?void 0:N.estimateId)||"temp")!=="temp"&&(B(P,[...l(we)]),console.log(" Edit  (reactive): Supabase DB  :",{printsCount:l(P).length,colors:l(P).map(Se=>{var me,Ne;return{colorsCount:((me=Se.colors)==null?void 0:me.length)||0,colorNames:(Ne=Se.colors)==null?void 0:Ne.map(De=>De.name)}})}))}),Jt(()=>(s(),l(we),zn(i())),()=>{var Se;if(!((((Se=s())==null?void 0:Se.estimateId)||"temp")!=="temp"&&l(we)&&l(we).length>0)){const me=s().products.find(De=>{var qe;return((qe=De==null?void 0:De.product)==null?void 0:qe.id)===i()}),Ne=(me==null?void 0:me.prints)??[];Ne.length>0?B(P,[...Ne]):l(we)&&l(we).length>0&&B(P,[...l(we)])}}),Jt(()=>(l(H),s(),zn(i()),l(J),ki),()=>{if(l(H)&&s().products.findIndex(ve=>{var Se;return((Se=ve==null?void 0:ve.product)==null?void 0:Se.id)===i()})!==-1){const ve=l(H),Se=l(J)||JSON.stringify(ve??[]);B(K,!0),j(ve),B(re,Se),B(H,null),B(J,""),ki().then(()=>{B(K,!1)})}}),Jt(()=>(l(K),l(O),l(we),s(),zn(i())),()=>{var N;if(!l(K)&&!l(O)&&((N=l(we))!=null&&N.length)){const _e=s().products.find(Se=>{var me;return((me=Se==null?void 0:Se.product)==null?void 0:me.id)===i()}),ve=(_e==null?void 0:_e.prints)??[];(!ve||ve.length===0)&&j(l(we))}}),Jt(()=>(l(m),l(K),l(O),l(P),l(re)),()=>{if(l(m)&&!l(K)&&!l(O))try{JSON.stringify(l(P)??[])!==l(re)&&B(Z,!0)}catch(N){console.error("DetailedPrint    :",N)}}),Jt(()=>l(h),()=>{l(h)&&Ae()}),Jt(()=>l(m),()=>{B(L,l(m))}),Jt(()=>(l(m),l(L),l(Z),l(D)),()=>{!l(m)&&l(L)&&(B(y,null),B(b,null),B(S,""),B(F,null),l(Z)&&l(D)&&U(),B(Z,!1),Ae())}),Jt(()=>(l(D),l(m),l(K),l(O),l(P),l(re)),()=>{if(l(D)&&!l(m)&&!l(K)&&!l(O))try{const N=JSON.stringify(l(P)??[]);N!==l(re)&&U(N)}catch(N){console.error("DetailedPrint   :",N)}}),Zn(),Kr();var V=yT(),X=pt(V),R=z(w(X),2);{var he=N=>{var _e=iT(),ve=w(_e),Se=z(w(ve),2),me=w(Se),Ne=z(ve,2);Me(()=>Ue(me,l(g))),st("click",Ne,ne),T(N,_e)};Ee(R,N=>{l(g)&&N(he)})}var xe=z(R,2),Be=w(xe),Le=w(Be),Y=w(Le),k=w(Y);ts(k,N=>B(u,N),()=>l(u));var pe=z(k,2);{var ze=N=>{var _e=aT();T(N,_e)};Ee(pe,N=>{l(f)&&!l(g)&&N(ze)})}ts(Y,N=>B(c,N),()=>l(c));var ye=z(Be,2),le=w(ye);{var Ce=N=>{var _e=gT(),ve=w(_e),Se=z(w(ve),2),me=z(w(Se),2),Ne=w(me),De=z(ve,2);Yt(De,5,()=>l(P),Ar,(qe,Qe,rt)=>{var tt=pT(),Te=w(tt),ge=w(Te),Oe=w(ge),He=w(Oe);He.textContent=rt+1;var je=z(Oe,2),at=w(je),At=z(ge,2),it=w(At),Re=z(it,2),Xe=z(Te,2),Je=w(Xe);{var ct=et=>{var Qt=dT(),vt=z(w(Qt),2);Yt(vt,5,()=>l(Qe).parentTemplates,Ar,(Nt,mt)=>{var Lt=lT(),Pt=w(Lt);{var zt=Ut=>{var Kt=AT();Me(()=>{rr(Kt,"src",l(mt).image_url),rr(Kt,"alt",l(mt).name)}),T(Ut,Kt)};Ee(Pt,Ut=>{l(mt).image_url&&Ut(zt)})}var Et=z(Pt,2),xt=w(Et);Me(()=>Ue(xt,l(mt).name)),T(Nt,Lt)}),T(et,Qt)};Ee(Je,et=>{var Qt;(Qt=l(Qe).parentTemplates)!=null&&Qt.length&&et(ct)})}var _t=z(Je,2);{var lt=et=>{var Qt=fT(),vt=w(Qt);{var Nt=Pt=>{var zt=uT(),Et=z(w(zt),2);Yt(Et,5,()=>l(Qe).colors,Ar,(xt,Ut)=>{var Kt=cT(),Ot=w(Kt),Mt=z(Ot,2),Gt=w(Mt);Me(()=>{rr(Ot,"style",`background-color: ${l(Ut).hex??""};`),Ue(Gt,l(Ut).name)}),T(xt,Kt)}),T(Pt,zt)};Ee(vt,Pt=>{var zt;(zt=l(Qe).colors)!=null&&zt.length&&Pt(Nt)})}var mt=z(vt,2);{var Lt=Pt=>{var zt=hT(),Et=z(w(zt),2),xt=z(w(Et),2),Ut=w(xt);Me(()=>Ue(Ut,` ${l(Qe).uploads.files.length??""}`)),T(Pt,zt)};Ee(mt,Pt=>{var zt,Et;(Et=(zt=l(Qe).uploads)==null?void 0:zt.files)!=null&&Et.length&&Pt(Lt)})}T(et,Qt)};Ee(_t,et=>{var Qt,vt,Nt;((Qt=l(Qe).colors)!=null&&Qt.length||(Nt=(vt=l(Qe).uploads)==null?void 0:vt.files)!=null&&Nt.length)&&et(lt)})}Me(()=>Ue(at,l(Qe).title)),st("click",it,()=>x(rt)),st("click",Re,()=>se(l(Qe).objectId)),T(qe,tt)}),Me(()=>Ue(Ne,`${l(P).length??""}  `)),T(N,_e)},ke=N=>{var _e=vT();T(N,_e)};Ee(le,N=>{l(P).length>0?N(Ce):N(ke,!1)})}var ce=z(X,2);{var ee=N=>{var _e=wT(),ve=w(_e),Se=w(ve),me=w(Se),Ne=z(Se,2);{var De=Qe=>{var rt=mT(),tt=w(rt),Te=w(tt);Me(()=>Ue(Te,l(S))),T(Qe,rt)};Ee(Ne,Qe=>{l(S)&&Qe(De)})}var qe=z(Ne,2);sT(qe,{get productId(){return i()},get estimateId(){return a()},updateObjectDisabled:Ae,get objectId(){return l(y)},set objectId(Qe){B(y,Qe)},get isTemplateModal(){return l(m)},set isTemplateModal(Qe){B(m,Qe)},get selectedPrintIndex(){return l(b)},set selectedPrintIndex(Qe){B(b,Qe)},$$legacy:!0}),st("click",me,E),T(N,_e)};Ee(ce,N=>{l(m)&&N(ee)})}Me(()=>Fr(Le,`odz-space-y-4 ${l(f)?"odz-opacity-50":""}`)),T(n,V),Rr(),r()}var _T=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-10"><div class="odz-text-center"><h2 class="odz-text-xl odz-font-bold odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-500">      </p></div> <div class="odz-bg-gray-50 odz-p-8 odz-rounded-lg odz-border-2 odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-600 odz-text-center">    </p></div> <button class="odz-btn odz-btn-secondary odz-px-8"> </button></div>');function BT(n,e){let t=ft(e,"productId",8),r=ft(e,"onComplete",8);console.log("    - productId:",t());var o=_T(),s=z(w(o),4);st("click",s,function(...i){var a;(a=r())==null||a.apply(this,i)}),T(n,o)}var xT=te('<p class="odz-text-[11px] odz-text-gray-400 odz-line-through odz-mt-1"> </p> <p class="odz-text-[11px] odz-text-emerald-600 odz-font-semibold odz-mt-0.5"> </p>',1),zT=te('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p><!></p>',1),CT=te('<p class="odz-mt-1 odz-text-[11px] odz-text-blue-600">   -  </p>'),ST=te('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">     </p>'),ET=te('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <!>',1),FT=te('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">    </p>',1),IT=te('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">   </p>',1),QT=te('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!></p>'),UT=te('<span class="odz-text-blue-600">+ ( )</span>'),TT=te("<span>+ ( )</span>"),LT=te('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> <!></p>'),PT=te('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> + ( )</p>'),kT=Wp('<svg class="odz-w-4 odz-h-4 sm:odz-w-5 sm:odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),OT=te("<button><!> <span> </span></button>"),DT=te('<div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2.5"></div>'),NT=te('<button class="odz-w-full odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-semibold odz-py-2.5 odz-px-4 odz-rounded-xl odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2"><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg> <span> </span></button>'),MT=te('<div class="odz-mt-5 odz-border-t odz-border-gray-200/70 odz-pt-3.5"><!></div>'),HT=te('<div class="odz-mt-5 odz-px-4"><div class="odz-sticky odz-bottom-4 md:odz-static md:odz-bottom-auto"><div class="odz-rounded-3xl odz-border odz-border-gray-200 odz-bg-white/90 odz-backdrop-blur-md odz-shadow-xl odz-p-4 sm:odz-p-5 lg:odz-p-6"><div class="odz-grid sm:odz-grid-cols-2 lg:odz-grid-cols-5 odz-gap-2.5 lg:odz-gap-3"><div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-xs odz-text-gray-500"> </p></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-red-600"> </p> <!></div></div> <!></div></div></div>');function VA(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(ur,"$fixedEstimateStore",t),s=()=>Xr(Hn,"$extendedProductDataStore",t),i=Ie(),a=Ie(),A=Ie(),d=Ie(),c=Ie(),u=Ie(),h=Ie(),f=Ie(),g=Ie(),m=Ie(),y=Ie(),b=Ie(),S=Ie(),F=Ie(),P=Ie();let L=ft(e,"productId",8),re=ft(e,"showNextButton",8,!1),K=ft(e,"nextButtonText",8,"  "),H=ft(e,"onNext",8,void 0),J=ft(e,"estimateId",8,null),we=ft(e,"idx",8,null),O=ft(e,"buttonConfig",8,null),D=Ie(0),Z=Ie(null);function ie(){var Be,Le;if(((Be=l(i))==null?void 0:Be.productId)===L()&&l(i).printSelection&&l(i).printSelection.currentMethod!=="selection")return l(i).printSelection;if(typeof window<"u")try{let Y=null,k="";if(J()&&we()!==null){const pe=`fixedEstimate_${L()}_${J()}_${we()}`;Y=sessionStorage.getItem(pe),Y&&(k=pe),console.log(" resolvePrintSelection -    (estimateId + idx):",{exactKey:pe,hasData:!!Y})}if(!Y&&J()){const pe=`fixedEstimate_${L()}_${J()}`;Y=sessionStorage.getItem(pe),Y&&(k=pe)}if(!Y&&we()!==null){const pe=`fixedEstimate_${L()}_${we()}`;Y=sessionStorage.getItem(pe),Y&&(k=pe)}if(!Y){const pe=`fixedEstimate_${L()}`;Y=sessionStorage.getItem(pe),Y&&(k=pe)}if(Y||console.log(" resolvePrintSelection - sessionStorage     (, DB Store ):",{triedKeys:[`fixedEstimate_${L()}`,`fixedEstimate_${L()}_${we()}`,`fixedEstimate_${L()}_${J()}`],currentIdx:we(),currentEstimateId:J()}),Y){const pe=JSON.parse(Y);if(pe.printSelection&&pe.printSelection.currentMethod!=="selection")return pe.printSelection}}catch{}return(Le=l(A))!=null&&Le.printSelection&&l(A).printSelection.currentMethod!=="selection"?l(A).printSelection:null}async function de(Be,Le,Y,k){if((k||(Le?"detailed":"none"))!=="detailed")return null;if(typeof window<"u")try{const ze=J()||"temp",ye=`detailedPrint_${L()}_${ze}`;let le=window.sessionStorage.getItem(ye);if(!le&&we()!==null){const Ce=`detailedPrint_${L()}_${ze}_${we()}`;le=window.sessionStorage.getItem(Ce)}if(!le){const Ce=`detailedPrint_${L()}`;le=window.sessionStorage.getItem(Ce)}if(le){const Ce=JSON.parse(le);if(console.log(" sessionStorage     ( ):",{key:ye,parsedData:Ce,dataLength:Ce==null?void 0:Ce.length,currentTab:"unknown"}),Array.isArray(Ce)&&Ce.length>0){const ke=Y;if(ke<=0)return null;let ce=0;for(const ee of Ce){const N=await ne(ee,ke);N!==null?ce+=N:ee.price&&typeof ee.price=="number"&&(ce+=ee.price,console.log("      ():",{title:ee.title,fallbackPrice:ee.price,currentTotal:ce}))}if(ce>0)return ce}}}catch{}if(J()&&we()!==null)try{const ye=(await Nd(J())).filter(le=>le.idx===we());if(ye.length>0){const le=Y;if(le<=0)return null;let Ce=0;for(const ke of ye){const ce={id:ke.id,template:{id:ke.template_id},colors:ke.colors||[],price:ke.price},ee=await ne(ce,le);ee!==null?Ce+=ee:(Ce+=ke.price||0,console.log("   - DB   ():",{objectId:ke.object_id,dbPrice:ke.price}))}return Ce}}catch{}if(Be!=null&&Be.printConfig){let ze=null;if(typeof Be.printConfig=="string")try{ze=JSON.parse(Be.printConfig)}catch{return null}else typeof Be.printConfig=="object"&&Be.printConfig!==null&&(ze=Be.printConfig);if(ze){const ye=["totalAmount","total","totalPrice","price","amount"];for(const Ce of ye){const ke=ze[Ce];if(typeof ke=="number"&&!Number.isNaN(ke))return ke}const le=ze.summary;if(le&&typeof le=="object")for(const Ce of ye){const ke=le[Ce];if(typeof ke=="number"&&!Number.isNaN(ke))return ke}}}return null}async function ne(Be,Le){var Y,k;try{if(!((Y=Be.template)!=null&&Y.id))return null;let pe=Be.template.templateProduct;if(pe||(pe=await Gd(Be.template.id)),!(pe!=null&&pe.template_product_variants))return null;let ze;if(Be.variant_id?(ze=pe.template_product_variants.find(Ce=>Ce.variant_id===Be.variant_id),console.log(" STEP 4  (variant_id ):",{found:!!ze,selectedVariant:ze})):Be.colors&&Be.colors.length>0?(ze=pe.template_product_variants.find(Ce=>Ce.color_count===Be.colors.length),console.log(" STEP 4  (  ):",{found:!!ze,selectedVariant:ze})):(ze=pe.template_product_variants[0],console.log(" STEP 4  ():",{selectedVariant:ze})),!ze)return null;const ye=await mA(ze.variant_id);if(!ye||!ye.prices||ye.prices.length===0)return null;const le=ye.prices[0].amount;if(ze.min_quantity<=Le){let Ce=le*Le;if((k=pe.product)!=null&&k.quantity_discounts&&pe.product.quantity_discounts.length>0){const ke=vi(Le,le,pe.product.quantity_discounts);if(ke.hasDiscount){const ce=ke.discountedPrice*Le;return console.log(" =====   ( ) =====:",{discountedUnitPrice:ke.discountedPrice,quantity:Le,finalPrice:ce}),ce}}return Ce}else{const Ce=ze.plate_price||0;return console.log(" =====   (  , plate_price ) =====:",{min_quantity:ze.min_quantity,productQuantity:Le,platePrice:Ce}),Ce}}catch{return null}}function fe(Be,Le,Y){if(typeof window>"u")return!1;try{const k=Le||"temp",pe=[Y!==null&&k?`detailedPrint_${Be}_${k}_${Y}`:null,k?`detailedPrint_${Be}_${k}`:null,`detailedPrint_${Be}`].filter(Boolean);for(const ze of pe){const ye=window.sessionStorage.getItem(ze);if(ye)try{const le=JSON.parse(ye);if(Array.isArray(le)&&le.length>0)return!0}catch{}}}catch{return!1}return!1}let $=Ie(0),q=Ie(!1),se=Ie(null);En(()=>{if(typeof window<"u"){const Be=pe=>{const{productId:ze,timestamp:ye,source:le}=pe.detail;ze===L()&&(B(D,Date.now()),B($,Date.now()))},Le=async pe=>{var ce,ee,N;const{productId:ze,addonId:ye,selectedAddons:le,timestamp:Ce,source:ke}=pe.detail;if(ze===L()){console.log(" SelectedProductSummary -     ():",{eventProductId:ze,addonId:ye,selectedAddonsCount:Object.keys(le||{}).length,timestamp:Ce,source:ke,currentProductId:L()}),await new Promise(me=>setTimeout(me,50));let _e=pn(ur),ve=0;const Se=5;for(;ve<Se&&_e;){const me=(ee=(ce=_e==null?void 0:_e.addonSelection)==null?void 0:ce.selectedAddons)==null?void 0:ee[ye];if(me&&me.variantId===pe.detail.variantId)break;console.log(` Store    (${ve+1}/${Se}):`,{storeVariantId:me==null?void 0:me.variantId,expectedVariantId:pe.detail.variantId}),await new Promise(Ne=>setTimeout(Ne,25)),_e=pn(ur),ve++}if(_e&&l(c)&&l(A)){const me=U(_e,l(c),Date.now(),(N=_e.addonSelection)==null?void 0:N.selectedAddons);B(S,me)}B(D,Date.now()),B($,Date.now())}},Y=pe=>{const{productId:ze,action:ye,color:le,variantId:Ce,oldQuantity:ke,newQuantity:ce,newTotalQuantity:ee,timestamp:N,source:_e}=pe.detail;ze===L()&&(B(D,Date.now()),B($,Date.now()))},k=async pe=>{const{productId:ze,toMethod:ye,idx:le,estimateId:Ce,source:ke}=pe.detail;ze===L()&&(B(Z,ye||null),ye&&ur.updatePrintSelection({currentMethod:ye,isCompleted:ye==="none",lastUpdated:Date.now()}),B(D,Date.now()),B($,Date.now()),await new Promise(ce=>setTimeout(ce,100)),E(ye))};return window.addEventListener("detailedPrintUpdate",Be),window.addEventListener("addonSelectionUpdate",Le),window.addEventListener("productQuantityUpdate",Y),window.addEventListener("printAmountRecalc",k),setTimeout(()=>{B($,Date.now())},100),()=>{window.removeEventListener("detailedPrintUpdate",Be),window.removeEventListener("addonSelectionUpdate",Le),window.removeEventListener("productQuantityUpdate",Y),window.removeEventListener("printAmountRecalc",k)}}});let Ae=Ie(null),x=!1;async function E(Be){if(!x)try{x=!0,B(Ae,await de(l(u),l(q),l(c).totalQuantity,Be))}catch{B(Ae,null)}finally{x=!1}}let I=null;function U(Be,Le,Y,k){var Ce,ke,ce;let pe=Be;if(typeof window<"u"&&L())try{const ee=pn(ur);ee&&ee.productId===L()&&(pe=ee)}catch{}if(Y&&typeof window<"u"&&L())try{const ee=pn(ur);ee&&ee.productId===L()&&(pe=ee)}catch{}let ze=k||((Ce=pe==null?void 0:pe.addonSelection)==null?void 0:Ce.selectedAddons);if(typeof window<"u"&&Y)try{const ee=pn(ur);if(ee&&ee.productId===L()){const N=(ke=ee.addonSelection)==null?void 0:ke.selectedAddons;N&&Object.keys(N).length>0&&(ze=N)}}catch{}if(!ze||!((ce=l(A))!=null&&ce.addons))return 0;const ye=Le.totalQuantity;let le=0;return Object.entries(ze).forEach(([ee,N])=>{var qe,Qe,rt;if(!N||typeof N!="object"||!("productId"in N)||!("variantId"in N))return;const _e=N,ve=l(A).addons.find(tt=>tt.id===ee);if(!ve)return;const Se=ve.items.find(tt=>tt.addon_product.id===_e.productId);if(!Se)return;(qe=Se.addon_product.variants)!=null&&qe.map(tt=>{var Te,ge;return{id:tt.id,title:tt.title,price:(ge=(Te=tt.prices)==null?void 0:Te[0])==null?void 0:ge.amount}});let me=(Qe=Se.addon_product.variants)==null?void 0:Qe.find(tt=>tt.id===_e.variantId);if(!me){(rt=Se.addon_product.variants)==null||rt.forEach((tt,Te)=>{});return}if(!me.prices||me.prices.length===0)return;const Ne=me.prices[0].amount,De=Ne*ye;le+=De,console.log("    ():",{addonName:ve.name,variantTitle:me.title||Se.addon_product.title,selectedVariantId:_e.variantId,foundVariantId:me.id,addonUnitPrice:Ne,totalQuantity:ye,addonItemTotal:De,currentAddonTotal:le,calculationValid:me.id===_e.variantId})}),le}function M(Be){var ce,ee;if(!((ce=l(i))!=null&&ce.productSelection)||!l(d)||l(i).productId!==L())return{totalQuantity:0,selectedColors:[],totalAmount:{originalTotal:0,discountedTotal:0,hasDiscount:!1}};const{quantityByVariant:Le,variantsByColor:Y={},variantDiscounts:k}=l(i).productSelection,pe=Object.values(Le||{}).reduce((N,_e)=>N+Object.values(_e||{}).reduce((ve,Se)=>ve+Se,0),0),ze=Object.keys(Le||{}).filter(N=>Object.values(Le[N]||{}).some(_e=>_e>0));let ye=0,le=0,Ce=!1;for(const N in Le||{})for(const _e in Le[N]||{}){const ve=Le[N][_e];if(ve>0){const Se=(ee=Y[N])==null?void 0:ee.find(me=>me.id===_e);if(Se&&Se.prices&&Se.prices.length>0){const me=Se.prices[0].amount,Ne=k==null?void 0:k[_e];ye+=me*ve,Ne!=null&&Ne.hasDiscount?(le+=Ne.discountedPrice*ve,Ce=!0):le+=me*ve}}}return{totalQuantity:pe,selectedColors:ze,totalAmount:{originalTotal:ye,discountedTotal:Ce?le:ye,hasDiscount:Ce}}}En(()=>{I=ur.subscribe(Be=>{(Be==null?void 0:Be.productId)===L()&&B(D,Date.now())})}),Eo(()=>{I&&I()});function j(){H()&&H()()}function V(Be){switch(Be){case"arrow-left":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>';case"arrow-right":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>';case"check":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';case"save":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path>';default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>'}}function X(Be,Le="normal"){const Y="odz-font-semibold odz-rounded-lg odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2",k=Le==="large"?"odz-py-3 odz-px-5 odz-text-base":"odz-py-2.5 odz-px-4 odz-text-sm";return Be==="primary"?`${Y} ${k} odz-bg-red-600 hover:odz-bg-red-700 odz-text-white`:`${Y} ${k} odz-bg-gray-100 hover:odz-bg-gray-200 odz-text-gray-700 hover:odz-text-gray-800 odz-border odz-border-gray-300`}Jt(()=>o(),()=>{B(i,o())}),Jt(()=>s(),()=>{B(a,s())}),Jt(()=>(l(a),zn(L())),()=>{var Be,Le;B(A,(Le=(Be=l(a))==null?void 0:Be.productDataCache)==null?void 0:Le[L()])}),Jt(()=>l(A),()=>{var Be;B(d,(Be=l(A))==null?void 0:Be.product)}),Jt(()=>l(D),()=>{B(c,M(l(D)))}),Jt(()=>{},()=>{B(u,ie())}),Jt(()=>l(u),()=>{var Be;B(h,((Be=l(u))==null?void 0:Be.currentMethod)??"selection")}),Jt(()=>(l($),l(Z),l(h),l(u),zn(L()),zn(J()),zn(we()),l(se),l(q)),()=>{l($);const Be=l(Z)||l(h),Le=!!l(u),Y=fe(L(),J(),we());let k=!1;Be==="detailed"?k=!0:Be==="simple"||Be==="none"?k=!1:Be==="selection"&&(k=Y);const pe=`${Be}|${Le}|${Y}`;pe!==l(se)&&B(se,pe),l(q)!==k&&B(q,k)}),Jt(()=>l(Ae),()=>{B(f,l(Ae)??0)}),Jt(()=>l(c),()=>{B(g,l(c).totalAmount.hasDiscount?l(c).totalAmount.discountedTotal:l(c).totalAmount.originalTotal)}),Jt(()=>l(c),()=>{B(m,l(c).totalAmount.hasDiscount?l(c).totalAmount.originalTotal-l(c).totalAmount.discountedTotal:0)}),Jt(()=>l(m),()=>{B(y,l(m)>0)}),Jt(()=>o(),()=>{var Be,Le;B(b,(Le=(Be=o())==null?void 0:Be.addonSelection)==null?void 0:Le.selectedAddons)}),Jt(()=>(l(i),l(c),l(D),l(b)),()=>{B(S,U(l(i),l(c),l(D),l(b)))}),Jt(()=>(l(q),l(f),l(g),l(S)),()=>{B(F,l(q)&&l(f)>0?l(g)+l(f)+l(S):l(g)+l(S))}),Jt(()=>(l(u),l(q),l(c),l(D)),()=>{(l(u)||l(q)||l(c).totalQuantity||l(D))&&E()}),Jt(()=>{},()=>{}),Jt(()=>(zn(O()),zn(re())),()=>{B(P,O()||re())}),Zn(),Kr();var R=Dt(),he=pt(R);{var xe=Be=>{var Le=HT(),Y=w(Le),k=w(Y),pe=w(k),ze=w(pe),ye=z(w(ze),2),le=w(ye),Ce=z(ye,2),ke=w(Ce),ce=z(ze,2),ee=z(w(ce),2),N=w(ee),_e=z(ee,2);{var ve=Re=>{var Xe=xT(),Je=pt(Xe),ct=w(Je),_t=z(Je,2),lt=w(_t);Me((et,Qt)=>{Ue(ct,`${et??""}`),Ue(lt,`-${Qt??""} `)},[()=>gr(l(c).totalAmount.originalTotal),()=>gr(l(m))],ot),T(Re,Xe)};Ee(_e,Re=>{l(y)&&Re(ve)})}var Se=z(ce,2),me=z(w(Se),2);{var Ne=Re=>{var Xe=zT(),Je=pt(Xe),ct=w(Je),_t=z(Je,2),lt=w(_t);{var et=vt=>{var Nt=Wr("    .");T(vt,Nt)},Qt=vt=>{var Nt=Wr("    .");T(vt,Nt)};Ee(lt,vt=>{l(f)>0?vt(et):vt(Qt,!1)})}Me(vt=>{Ue(ct,`${vt??""}`),Fr(_t,`odz-mt-1 odz-text-[11px] ${l(f)>0?"odz-text-gray-500":"odz-text-orange-500"}`)},[()=>gr(l(f))],ot),T(Re,Xe)},De=Re=>{var Xe=ET(),Je=z(pt(Xe),2);{var ct=lt=>{var et=CT();T(lt,et)},_t=lt=>{var et=ST();T(lt,et)};Ee(Je,lt=>{(l(Z)||l(h))==="simple"?lt(ct):lt(_t,!1)})}T(Re,Xe)};Ee(me,Re=>{l(q)?Re(Ne):Re(De,!1)})}var qe=z(Se,2),Qe=z(w(qe),2);{var rt=Re=>{var Xe=FT(),Je=pt(Xe),ct=w(Je);Me(_t=>Ue(ct,`${_t??""}`),[()=>gr(l(S))],ot),T(Re,Xe)},tt=Re=>{var Xe=IT();T(Re,Xe)};Ee(Qe,Re=>{l(S)>0?Re(rt):Re(tt,!1)})}var Te=z(qe,2),ge=z(w(Te),2),Oe=w(ge),He=z(ge,2);{var je=Re=>{var Xe=QT(),Je=w(Xe),ct=z(Je);{var _t=lt=>{var et=Wr();Me(Qt=>Ue(et,`+ ${Qt??""}`),[()=>gr(l(S))],ot),T(lt,et)};Ee(ct,lt=>{l(S)>0&&lt(_t)})}Me((lt,et)=>Ue(Je,`${lt??""} + ${et??""} `),[()=>gr(l(g)),()=>gr(l(f))],ot),T(Re,Xe)},at=Re=>{var Xe=Dt(),Je=pt(Xe);{var ct=lt=>{var et=LT(),Qt=w(et),vt=z(Qt);{var Nt=zt=>{var Et=Wr();Me(xt=>Ue(Et,`+  ${xt??""}`),[()=>gr(l(S))],ot),T(zt,Et)};Ee(vt,zt=>{l(S)>0&&zt(Nt)})}var mt=z(vt,2);{var Lt=zt=>{var Et=UT();T(zt,Et)},Pt=zt=>{var Et=TT();T(zt,Et)};Ee(mt,zt=>{l(h)==="simple"?zt(Lt):zt(Pt,!1)})}Me(zt=>Ue(Qt,` ${zt??""} `),[()=>gr(l(g))],ot),T(lt,et)},_t=lt=>{var et=PT(),Qt=w(et),vt=z(Qt);{var Nt=mt=>{var Lt=Wr();Me(Pt=>Ue(Lt,`+  ${Pt??""}`),[()=>gr(l(S))],ot),T(mt,Lt)};Ee(vt,mt=>{l(S)>0&&mt(Nt)})}Me(mt=>Ue(Qt,` ${mt??""} `),[()=>gr(l(g))],ot),T(lt,et)};Ee(Je,lt=>{l(q)?lt(_t,!1):lt(ct)},!0)}T(Re,Xe)};Ee(He,Re=>{l(q)&&l(f)>0?Re(je):Re(at,!1)})}var At=z(pe,2);{var it=Re=>{var Xe=MT(),Je=w(Xe);{var ct=lt=>{var et=DT();Yt(et,5,()=>O().buttons,Ar,(Qt,vt,Nt)=>{var mt=OT(),Lt=w(mt);{var Pt=xt=>{var Ut=kT(),Kt=w(Ut);p0(Kt,()=>V(l(vt).icon),!0,!1),T(xt,Ut)};Ee(Lt,xt=>{l(vt).icon&&xt(Pt)})}var zt=z(Lt,2),Et=w(zt);Me(xt=>{Fr(mt,xt),Ue(Et,l(vt).text)},[()=>`${O().type==="single"?"odz-w-full":Nt===0?"odz-flex-1":"odz-flex-1 sm:odz-flex-[1.35]"} ${X(l(vt).style,l(vt).size||"normal")}`],ot),st("click",mt,function(...xt){var Ut;(Ut=l(vt).action)==null||Ut.apply(this,xt)}),T(Qt,mt)}),T(lt,et)},_t=lt=>{var et=NT(),Qt=z(w(et),2),vt=w(Qt);Me(()=>Ue(vt,K())),st("click",et,j),T(lt,et)};Ee(Je,lt=>{O()?lt(ct):lt(_t,!1)})}T(Re,Xe)};Ee(At,Re=>{l(P)&&Re(it)})}Me((Re,Xe)=>{Ue(le,`${l(c).totalQuantity??""}`),Ue(ke,`${l(c).selectedColors.length??""}  `),Ue(N,`${Re??""}`),Ue(Oe,`${Xe??""}`)},[()=>gr(l(g)),()=>gr(l(F))],ot),T(Be,Le)};Ee(he,Be=>{l(c).totalQuantity>0&&l(d)&&Be(xe)})}T(n,R),Rr(),r()}var jT=te('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),RT=te('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),qT=te('<div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-1.5 odz-h-1.5 odz-bg-gray-400 odz-rounded-full"></div> <span class="odz-text-xs odz-text-gray-600"> </span></div>'),KT=te(`<button class="odz-group odz-cursor-pointer odz-w-full odz-text-left"><div class="odz-relative odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-xl odz-p-6
                               odz-transition-all odz-duration-300 odz-shadow-sm
                               hover:odz-border-gray-300 hover:odz-shadow-lg hover:odz-scale-105"><div></div> <div class="odz-relative odz-z-10"><div class="odz-text-4xl odz-mb-4 odz-text-center"> </div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-800 odz-text-center odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-text-center odz-mb-4"> </p> <div class="odz-space-y-2"></div></div> <div class="odz-relative odz-z-10 odz-mt-6"><div></div></div></div></button>`),$T=te('<div class="odz-flex odz-flex-col odz-gap-6 odz-p-4"><div class="odz-text-center odz-mb-6"><h1 class="odz-text-2xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h1> <p class="odz-text-sm odz-text-gray-600">   </p></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-px-2"></div> <!></div>'),VT=te('<div class="odz-relative"><!> <!></div>'),GT=te('<div class="odz-relative"><!> <!></div>'),WT=te('<div class="odz-relative"><!> <!></div>'),XT=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-16"><div class="odz-text-center"><div class="odz-text-6xl odz-mb-4"></div> <h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h2> <p class="odz-text-sm odz-text-gray-600">        </p></div> <div class="odz-w-full"><!></div></div>');function F5(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(ur,"$fixedEstimateStore",t),s=()=>Xr(Ls,"$shopStore",t),i=()=>Xr(St,"$estimateStore",t),a=Ie();let A=ft(e,"productId",8),d=ft(e,"estimateId",8,void 0),c=ft(e,"idx",8,void 0),u=ft(e,"step",12,0),h=ft(e,"onNext",8,void 0),f=Ie(null),g=Ie(!1),m=Ie(null);function y(){var fe;if(typeof window<"u"&&d()&&A())try{let $=`fixedEstimate_${A()}_${d()}_${c()}`,q=window.sessionStorage.getItem($);if(q||($=`fixedEstimate_${A()}_${d()}`,q=window.sessionStorage.getItem($)),q){const se=JSON.parse(q);if((fe=se.printSelection)!=null&&fe.currentMethod)return se.printSelection.currentMethod}}catch{}return"selection"}let b=Ie(y()),S=null;const F=[{id:"simple",title:"  ",description:"   ",icon:"",features:[" ","  "," "],color:"from-green-500 to-emerald-600"},{id:"detailed",title:"  ",description:"  ",icon:"",features:[" "," "," /"],color:"from-blue-500 to-indigo-600"},{id:"self-design",title:" ",description:"  ",icon:"",features:[" "," "," "],color:"from-purple-500 to-pink-600"},{id:"none",title:"  ",description:"    ",icon:"",features:[" ","  "," "],color:"from-gray-500 to-slate-600"}];function P(fe){const $=fe;if(B(b,$),$!=="selection"&&Hn.selectPrintMethod(A(),$),$!=="selection"&&ur.selectPrintMethod($),typeof window<"u"&&($==="simple"||$==="none")){try{const q=d()||"temp";[`detailedPrint_${A()}_${q}`,`detailedPrint_${A()}_${q}_${c()}`,`detailedPrint_${A()}`].forEach(Ae=>{try{sessionStorage.removeItem(Ae)}catch{}})}catch(q){console.error(" detailedPrint    :",q)}d()&&c()!==null&&gt.from("estimate_prints").delete().eq("estimate_id",d()).eq("idx",c()).then(({error:q})=>{q?console.error(" estimate_prints  :",q):console.log(" estimate_prints   (/ )")})}if(typeof window<"u"&&$!=="selection"){const q=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:$,idx:c(),estimateId:d(),source:"printMethodChange"}});window.dispatchEvent(q)}$==="none"&&(u(0),Hn.completePrintSelection(A()),ur.completePrintSelection(),h()&&h()())}function L(){B(b,"selection"),Hn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1}),ur.updatePrintSelection({currentMethod:"selection",isCompleted:!1,lastUpdated:Date.now()})}function re(){B(b,"selection"),A()&&Hn.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1})}function K(){u(0),Hn.completePrintSelection(A()),ur.completePrintSelection(),h()&&h()()}function H(fe){fe!=null&&fe.product&&St.update($=>{const q=[...$.products];let se=q.findIndex(Ae=>{var x;return((x=Ae==null?void 0:Ae.product)==null?void 0:x.id)===fe.product.id});if(se===-1){const Ae={product:fe.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:fe.addonProductsMap||{},productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};q.push(Ae),se=q.length-1}else q[se].prints||(q[se]={...q[se],prints:[]});return{...$,products:q,index:se}})}async function J(fe=!1){var $,q;if(A()){B(g,!0),B(m,null);try{const se=o().productSelection;if(fe&&se&&se.product&&se.productId===A()){if(B(f,{product:se.product,addons:se.addons||[],addonItems:se.addonItems||[]}),H(l(f)),typeof window<"u"&&d())try{const x=d(),E=`fixedEstimate_${A()}_${x}`,I=window.sessionStorage.getItem(E);if(I){const U=JSON.parse(I);($=U.printSelection)!=null&&$.currentMethod&&(B(b,U.printSelection.currentMethod),console.log(" Edit  (print.svelte): sessionStorage   :",{currentMethod:l(b),key:E}))}}catch{}return}if(!fe){const x=Hn.restoreFromSession(A());if(x!=null&&x.isLoaded){B(f,x),H(l(f)),x.printSelection&&B(b,x.printSelection.currentMethod);return}}const Ae=Hn.getProductData(A());Ae!=null&&Ae.isLoaded?(B(f,Ae),H(l(f)),!fe&&Ae.printSelection&&B(b,Ae.printSelection.currentMethod)):(B(f,await Hn.loadIntegratedProductData(A(),s().id)),H(l(f))),(q=l(f))!=null&&q.process}catch(se){B(m,se instanceof Error?se.message:"   .")}finally{B(g,!1)}}}function we(){const fe=Hn.getProductData(A());if(!(fe!=null&&fe.printSelection))return;const $=fe.printSelection;B(b,$.currentMethod)}function O(){S=Hn.subscribe(fe=>{const $=fe.productDataCache[A()];if($!=null&&$.printSelection){const se=$.printSelection.currentMethod;se!==l(b)&&B(b,se)}})}En(async()=>{var $,q,se,Ae,x,E,I;const fe=d()&&d()!=="temp";if(ur.initialize(A(),d(),c()),O(),await J(fe),!fe)we();else if(typeof window<"u"&&d())try{const U=d(),M=`fixedEstimate_${A()}_${U}`,j=window.sessionStorage.getItem(M);if(j){const V=JSON.parse(j);($=V.printSelection)!=null&&$.currentMethod&&(B(b,V.printSelection.currentMethod),console.log(" Edit  (onMount): sessionStorage   :",{currentMethod:l(b),key:M}))}else(se=(q=o())==null?void 0:q.printSelection)!=null&&se.currentMethod&&B(b,o().printSelection.currentMethod)}catch{(x=(Ae=o())==null?void 0:Ae.printSelection)!=null&&x.currentMethod&&B(b,o().printSelection.currentMethod)}if(!fe){const U=i().products.find(j=>{var V;return((V=j==null?void 0:j.product)==null?void 0:V.id)===A()});if((!((E=l(f))!=null&&E.printSelection)||!l(f).printSelection.currentMethod||l(f).printSelection.currentMethod==="selection")&&(U!=null&&U.prints)&&U.prints.length>0)try{const j=U.prints[0],V=(j==null?void 0:j.method)??((I=j==null?void 0:j.parentTemplates)!=null&&I.length?"detailed":"simple");Hn.updatePrintSelection(A(),{currentMethod:V??l(b),selectedTemplate:j==null?void 0:j.template,selectedColors:j==null?void 0:j.colors,printConfig:j==null?void 0:j.config}),B(b,V??l(b)),console.log("      (currentMethod ):",{derivedMethod:V,fallbackMethod:l(b)})}catch{}}}),Eo(()=>{S&&S()}),Jt(()=>l(f),()=>{B(a,F.filter(fe=>{var $,q;return fe.id==="self-design"?((q=($=l(f))==null?void 0:$.product)==null?void 0:q.self_design_enabled)===!0:!0}))}),Jt(()=>(l(b),l(a)),()=>{l(b)!=="selection"&&(l(a).some($=>$.id===l(b))||B(b,"selection"))}),Zn(),Kr();var D=Dt(),Z=pt(D);{var ie=fe=>{var $=jT();T(fe,$)},de=fe=>{var $=Dt(),q=pt($);{var se=x=>{var E=RT(),I=w(E),U=z(w(I),2),M=z(w(U),2),j=w(M),V=z(I,2);Me(()=>Ue(j,l(m))),st("click",V,()=>J(d()&&d()!=="temp")),T(x,E)},Ae=x=>{var E=Dt(),I=pt(E);{var U=j=>{var V=$T(),X=z(w(V),2);Yt(X,5,()=>l(a),Ar,(Be,Le)=>{var Y=KT(),k=w(Y),pe=w(k),ze=z(pe,2),ye=w(ze),le=w(ye),Ce=z(ye,2),ke=w(Ce),ce=z(Ce,2),ee=w(ce),N=z(ce,2);Yt(N,5,()=>l(Le).features,Ar,(Se,me)=>{var Ne=qT(),De=z(w(Ne),2),qe=w(De);Me(()=>Ue(qe,l(me))),T(Se,Ne)});var _e=z(ze,2),ve=w(_e);Me(()=>{Fr(pe,`odz-absolute odz-inset-0 odz-bg-gradient-to-br ${l(Le).color??""}
                                   odz-rounded-xl odz-opacity-0 group-hover:odz-opacity-10 odz-transition-opacity odz-duration-300`),Ue(le,l(Le).icon),Ue(ke,l(Le).title),Ue(ee,l(Le).description),Fr(ve,`odz-w-full odz-bg-gradient-to-r ${l(Le).color??""}
                                          odz-text-white odz-font-semibold odz-py-2 odz-px-4 odz-rounded-lg
                                          odz-transition-all odz-duration-200 hover:odz-shadow-md
                                          group-hover:odz-shadow-lg odz-text-center`)}),st("click",Y,()=>P(l(Le).id)),T(Be,Y)});var R=z(X,2);const he=ot(()=>d()||null),xe=ot(()=>c()!==void 0?c():null);VA(R,{get productId(){return A()},get estimateId(){return l(he)},get idx(){return l(xe)},buttonConfig:{type:"single",buttons:[{text:" ",action:()=>{if(typeof window<"u"){const Be=new CustomEvent("changeTab",{detail:"product"});window.dispatchEvent(Be)}},style:"secondary",icon:"arrow-left"}]}}),T(j,V)},M=j=>{var V=Dt(),X=pt(V);{var R=xe=>{var Be=VT(),Le=w(Be);mU(Le,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:K,onCancel:L});var Y=z(Le,2);const k=ot(()=>d()||null),pe=ot(()=>c()!==void 0?c():null);VA(Y,{get productId(){return A()},get estimateId(){return l(k)},get idx(){return l(pe)},buttonConfig:{type:"double",buttons:[{text:" ",action:L,style:"secondary",icon:"arrow-left"},{text:"",action:K,style:"primary",icon:"arrow-right",size:"large"}]}}),T(xe,Be)},he=xe=>{var Be=Dt(),Le=pt(Be);{var Y=pe=>{var ze=GT(),ye=w(ze);bT(ye,{get productId(){return A()},get estimateId(){return d()},onComplete:K});var le=z(ye,2);const Ce=ot(()=>d()||null),ke=ot(()=>c()!==void 0?c():null);VA(le,{get productId(){return A()},get estimateId(){return l(Ce)},get idx(){return l(ke)},buttonConfig:{type:"double",buttons:[{text:" ",action:L,style:"secondary",icon:"arrow-left"},{text:"",action:K,style:"primary",icon:"arrow-right",size:"large"}]}}),T(pe,ze)},k=pe=>{var ze=Dt(),ye=pt(ze);{var le=ke=>{var ce=WT(),ee=w(ce);BT(ee,{get productId(){return A()},onComplete:K});var N=z(ee,2);const _e=ot(()=>d()||null),ve=ot(()=>c()!==void 0?c():null);VA(N,{get productId(){return A()},get estimateId(){return l(_e)},get idx(){return l(ve)},buttonConfig:{type:"double",buttons:[{text:" ",action:L,style:"secondary",icon:"arrow-left"},{text:"",action:K,style:"primary",icon:"arrow-right",size:"large"}]}}),T(ke,ce)},Ce=ke=>{var ce=Dt(),ee=pt(ce);{var N=_e=>{var ve=XT(),Se=z(w(ve),2),me=w(Se);const Ne=ot(()=>d()||null),De=ot(()=>c()!==void 0?c():null);VA(me,{get productId(){return A()},get estimateId(){return l(Ne)},get idx(){return l(De)},buttonConfig:{type:"double",buttons:[{text:" ",action:L,style:"secondary",icon:"arrow-left"},{text:" ",action:K,style:"primary",icon:"arrow-right",size:"large"}]}}),T(_e,ve)};Ee(ee,_e=>{l(b)==="none"&&_e(N)},!0)}T(ke,ce)};Ee(ye,ke=>{l(b)==="self-design"?ke(le):ke(Ce,!1)},!0)}T(pe,ze)};Ee(Le,pe=>{l(b)==="detailed"?pe(Y):pe(k,!1)},!0)}T(xe,Be)};Ee(X,xe=>{l(b)==="simple"?xe(R):xe(he,!1)},!0)}T(j,V)};Ee(I,j=>{l(b)==="selection"?j(U):j(M,!1)},!0)}T(x,E)};Ee(q,x=>{l(m)?x(se):x(Ae,!1)},!0)}T(fe,$)};Ee(Z,fe=>{l(g)?fe(ie):fe(de,!1)})}T(n,D),B_(e,"resetPrintTab",re);var ne=Rr({resetPrintTab:re});return r(),ne}/*!
* html2canvas-pro 1.5.8 <https://yorickshan.github.io/html2canvas-pro/>
* Copyright (c) 2024 yorickshan <https://github.com/yorickshan>
* Released under MIT License
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K0=function(n,e){return K0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},K0(n,e)};function bi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $0=function(){return $0=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$0.apply(this,arguments)};function Xo(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,[])).next())})}function Do(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(c){return A([d,c])}}function A(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],o=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function nf(n,e,t){if(arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var Ea=function(){function n(e,t,r,o){this.left=e,this.top=t,this.width=r,this.height=o}return n.prototype.add=function(e,t,r,o){return new n(this.left+e,this.top+t,this.width+r,this.height+o)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(o){return o.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),dg=function(n,e){return Ea.fromClientRect(n,e.getBoundingClientRect())},YT=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),o=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Ea(0,0,r,o)},cg=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},Vn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Zw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var of=0;of<Zw.length;of++)JT[Zw.charCodeAt(of)]=of;var ey="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sf=0;sf<ey.length;sf++)Gc[ey.charCodeAt(sf)]=sf;var ZT=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=Gc[n.charCodeAt(r)],i=Gc[n.charCodeAt(r+1)],a=Gc[n.charCodeAt(r+2)],A=Gc[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},eL=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},tL=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},al=5,k1=11,Cv=2,rL=k1-al,I5=65536>>al,nL=1<<al,Sv=nL-1,oL=1024>>al,sL=I5+oL,iL=sL,aL=32,AL=iL+aL,lL=65536>>k1,dL=1<<rL,cL=dL-1,ty=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},uL=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},hL=function(n,e){var t=ZT(n),r=Array.isArray(t)?tL(t):new Uint32Array(t),o=Array.isArray(t)?eL(t):new Uint16Array(t),s=24,i=ty(o,s/2,r[4]/2),a=r[5]===2?ty(o,(s+r[4])/2):uL(r,Math.ceil((s+r[4])/4));return new fL(r[0],r[1],r[2],r[3],i,a)},fL=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>al],t=(t<<Cv)+(e&Sv),this.data[t];if(e<=65535)return t=this.index[I5+(e-55296>>al)],t=(t<<Cv)+(e&Sv),this.data[t];if(e<this.highStart)return t=AL-lL+(e>>k1),t=this.index[t],t+=e>>al&cL,t=this.index[t],t=(t<<Cv)+(e&Sv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),ry="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var af=0;af<ry.length;af++)pL[ry.charCodeAt(af)]=af;var gL="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ny=50,vL=1,Q5=2,U5=3,mL=4,wL=5,oy=7,T5=8,sy=9,lA=10,V0=11,iy=12,G0=13,yL=14,Wc=15,W0=16,Af=17,Oc=18,bL=19,ay=20,X0=21,Dc=22,Ev=23,td=24,Es=25,Xc=26,Yc=27,rd=28,_L=29,GA=30,BL=31,lf=32,df=33,Y0=34,J0=35,Z0=36,Eu=37,em=38,Hf=39,jf=40,Fv=41,L5=42,xL=43,zL=[9001,65288],P5="!",Nr="",cf="",tm=hL(gL),Aa=[GA,Z0],rm=[vL,Q5,U5,wL],k5=[lA,T5],Ay=[Yc,Xc],CL=rm.concat(k5),ly=[em,Hf,jf,Y0,J0],SL=[Wc,G0],EL=function(n,e){e===void 0&&(e="strict");var t=[],r=[],o=[];return n.forEach(function(s,i){var a=tm.get(s);if(a>ny?(o.push(!0),a-=ny):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),t.push(W0);if(a===mL||a===V0){if(i===0)return r.push(i),t.push(GA);var A=t[i-1];return CL.indexOf(A)===-1?(r.push(r[i-1]),t.push(A)):(r.push(i),t.push(GA))}if(r.push(i),a===BL)return t.push(e==="strict"?X0:Eu);if(a===L5||a===_L)return t.push(GA);if(a===xL)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Eu):t.push(GA);t.push(a)}),[r,t,o]},Iv=function(n,e,t,r){var o=r[t];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var s=t;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==lA)break}if(o===lA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==lA)break}if(a!==lA)break}return!1},dy=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===lA)t--;else return r}return 0},FL=function(n,e,t,r,o){if(t[r]===0)return Nr;var s=r-1;if(Array.isArray(o)&&o[s]===!0)return Nr;var i=s-1,a=s+1,A=e[s],d=i>=0?e[i]:0,c=e[a];if(A===Q5&&c===U5)return Nr;if(rm.indexOf(A)!==-1)return P5;if(rm.indexOf(c)!==-1||k5.indexOf(c)!==-1)return Nr;if(dy(s,e)===T5)return cf;if(tm.get(n[s])===V0||(A===lf||A===df)&&tm.get(n[a])===V0||A===oy||c===oy||A===sy||[lA,G0,Wc].indexOf(A)===-1&&c===sy||[Af,Oc,bL,td,rd].indexOf(c)!==-1||dy(s,e)===Dc||Iv(Ev,Dc,s,e)||Iv([Af,Oc],X0,s,e)||Iv(iy,iy,s,e))return Nr;if(A===lA)return cf;if(A===Ev||c===Ev)return Nr;if(c===W0||A===W0)return cf;if([G0,Wc,X0].indexOf(c)!==-1||A===yL||d===Z0&&SL.indexOf(A)!==-1||A===rd&&c===Z0||c===ay||Aa.indexOf(c)!==-1&&A===Es||Aa.indexOf(A)!==-1&&c===Es||A===Yc&&[Eu,lf,df].indexOf(c)!==-1||[Eu,lf,df].indexOf(A)!==-1&&c===Xc||Aa.indexOf(A)!==-1&&Ay.indexOf(c)!==-1||Ay.indexOf(A)!==-1&&Aa.indexOf(c)!==-1||[Yc,Xc].indexOf(A)!==-1&&(c===Es||[Dc,Wc].indexOf(c)!==-1&&e[a+1]===Es)||[Dc,Wc].indexOf(A)!==-1&&c===Es||A===Es&&[Es,rd,td].indexOf(c)!==-1)return Nr;if([Es,rd,td,Af,Oc].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===Es)return Nr;if([rd,td].indexOf(h)!==-1)u--;else break}if([Yc,Xc].indexOf(c)!==-1)for(var u=[Af,Oc].indexOf(A)!==-1?i:s;u>=0;){var h=e[u];if(h===Es)return Nr;if([rd,td].indexOf(h)!==-1)u--;else break}if(em===A&&[em,Hf,Y0,J0].indexOf(c)!==-1||[Hf,Y0].indexOf(A)!==-1&&[Hf,jf].indexOf(c)!==-1||[jf,J0].indexOf(A)!==-1&&c===jf||ly.indexOf(A)!==-1&&[ay,Xc].indexOf(c)!==-1||ly.indexOf(c)!==-1&&A===Yc||Aa.indexOf(A)!==-1&&Aa.indexOf(c)!==-1||A===td&&Aa.indexOf(c)!==-1||Aa.concat(Es).indexOf(A)!==-1&&c===Dc&&zL.indexOf(n[a])===-1||Aa.concat(Es).indexOf(c)!==-1&&A===Oc)return Nr;if(A===Fv&&c===Fv){for(var f=t[s],g=1;f>0&&(f--,e[f]===Fv);)g++;if(g%2!==0)return Nr}return A===lf&&c===df?Nr:cf},IL=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=EL(n,e.lineBreak),r=t[0],o=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[Es,GA,L5].indexOf(a)!==-1?Eu:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,o,i]},QL=function(){function n(e,t,r,o){this.codePoints=e,this.required=t===P5,this.start=r,this.end=o}return n.prototype.slice=function(){return Vn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),UL=function(n,e){var t=cg(n),r=IL(t,e),o=r[0],s=r[1],i=r[2],a=t.length,A=0,d=0;return{next:function(){if(d>=a)return{done:!0,value:null};for(var c=Nr;d<a&&(c=FL(t,s,o,++d,i))===Nr;);if(c!==Nr||d===a){var u=new QL(t,c,A,d);return A=d,{value:u,done:!1}}return{done:!0,value:null}}}},TL=1,LL=2,Ku=4,cy=8,_p=10,uy=47,lu=92,PL=9,kL=32,uf=34,Nc=61,OL=35,DL=36,NL=37,hf=39,ff=40,Mc=41,ML=95,cs=45,HL=33,jL=60,RL=62,qL=64,KL=91,$L=93,VL=61,GL=123,pf=63,WL=125,hy=124,XL=126,YL=128,fy=65533,Qv=42,rl=43,JL=44,ZL=58,e6=59,Fu=46,t6=0,r6=8,n6=11,o6=14,s6=31,i6=127,Ui=-1,O5=48,D5=97,N5=101,a6=102,A6=117,l6=122,M5=65,H5=69,j5=70,d6=85,c6=90,No=function(n){return n>=O5&&n<=57},u6=function(n){return n>=55296&&n<=57343},nd=function(n){return No(n)||n>=M5&&n<=j5||n>=D5&&n<=a6},h6=function(n){return n>=D5&&n<=l6},f6=function(n){return n>=M5&&n<=c6},p6=function(n){return h6(n)||f6(n)},g6=function(n){return n>=YL},gf=function(n){return n===_p||n===PL||n===kL},Bp=function(n){return p6(n)||g6(n)||n===ML},py=function(n){return Bp(n)||No(n)||n===cs},v6=function(n){return n>=t6&&n<=r6||n===n6||n>=o6&&n<=s6||n===i6},sA=function(n,e){return n!==lu?!1:e!==_p},vf=function(n,e,t){return n===cs?Bp(e)||sA(e,t):Bp(n)?!0:!!(n===lu&&sA(n,e))},Uv=function(n,e,t){return n===rl||n===cs?No(e)?!0:e===Fu&&No(t):No(n===Fu?e:n)},m6=function(n){var e=0,t=1;(n[e]===rl||n[e]===cs)&&(n[e]===cs&&(t=-1),e++);for(var r=[];No(n[e]);)r.push(n[e++]);var o=r.length?parseInt(Vn.apply(void 0,r),10):0;n[e]===Fu&&e++;for(var s=[];No(n[e]);)s.push(n[e++]);var i=s.length,a=i?parseInt(Vn.apply(void 0,s),10):0;(n[e]===H5||n[e]===N5)&&e++;var A=1;(n[e]===rl||n[e]===cs)&&(n[e]===cs&&(A=-1),e++);for(var d=[];No(n[e]);)d.push(n[e++]);var c=d.length?parseInt(Vn.apply(void 0,d),10):0;return t*(o+a*Math.pow(10,-i))*Math.pow(10,A*c)},w6={type:2},y6={type:3},b6={type:4},_6={type:13},B6={type:8},x6={type:21},z6={type:9},C6={type:10},S6={type:11},E6={type:12},F6={type:14},mf={type:23},I6={type:1},Q6={type:25},U6={type:24},T6={type:26},L6={type:27},P6={type:28},k6={type:29},O6={type:31},nm={type:32},R5=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(cg(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==nm;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case uf:return this.consumeStringToken(uf);case OL:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(py(t)||sA(r,o)){var s=vf(t,r,o)?LL:TL,i=this.consumeName();return{type:5,value:i,flags:s}}break;case DL:if(this.peekCodePoint(0)===Nc)return this.consumeCodePoint(),_6;break;case hf:return this.consumeStringToken(hf);case ff:return w6;case Mc:return y6;case Qv:if(this.peekCodePoint(0)===Nc)return this.consumeCodePoint(),F6;break;case rl:if(Uv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case JL:return b6;case cs:var a=e,A=this.peekCodePoint(0),d=this.peekCodePoint(1);if(Uv(a,A,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(vf(a,A,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===cs&&d===RL)return this.consumeCodePoint(),this.consumeCodePoint(),U6;break;case Fu:if(Uv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case uy:if(this.peekCodePoint(0)===Qv)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Qv&&(c=this.consumeCodePoint(),c===uy))return this.consumeToken();if(c===Ui)return this.consumeToken()}break;case ZL:return T6;case e6:return L6;case jL:if(this.peekCodePoint(0)===HL&&this.peekCodePoint(1)===cs&&this.peekCodePoint(2)===cs)return this.consumeCodePoint(),this.consumeCodePoint(),Q6;break;case qL:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(vf(u,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case KL:return P6;case lu:if(sA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case $L:return k6;case VL:if(this.peekCodePoint(0)===Nc)return this.consumeCodePoint(),B6;break;case GL:return S6;case WL:return E6;case A6:case d6:var g=this.peekCodePoint(0),m=this.peekCodePoint(1);return g===rl&&(nd(m)||m===pf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case hy:if(this.peekCodePoint(0)===Nc)return this.consumeCodePoint(),z6;if(this.peekCodePoint(0)===hy)return this.consumeCodePoint(),x6;break;case XL:if(this.peekCodePoint(0)===Nc)return this.consumeCodePoint(),C6;break;case Ui:return nm}return gf(e)?(this.consumeWhiteSpace(),O6):No(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Bp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Vn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();nd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===pf&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(Vn.apply(void 0,e.map(function(A){return A===pf?O5:A})),16),s=parseInt(Vn.apply(void 0,e.map(function(A){return A===pf?j5:A})),16);return{type:30,start:o,end:s}}var i=parseInt(Vn.apply(void 0,e),16);if(this.peekCodePoint(0)===cs&&nd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];nd(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(Vn.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ff?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ff?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ui)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===hf||t===uf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ui||this.peekCodePoint(0)===Mc)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),mf)}for(;;){var o=this.consumeCodePoint();if(o===Ui||o===Mc)return{type:22,value:Vn.apply(void 0,e)};if(gf(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ui||this.peekCodePoint(0)===Mc?(this.consumeCodePoint(),{type:22,value:Vn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),mf);if(o===uf||o===hf||o===ff||v6(o))return this.consumeBadUrlRemnants(),mf;if(o===lu)if(sA(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),mf;else e.push(o)}},n.prototype.consumeWhiteSpace=function(){for(;gf(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Mc||e===Ui)return;sA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var o=Math.min(t,e);r+=Vn.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var o=this._value[r];if(o===Ui||o===void 0||o===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(o===_p)return this._value.splice(0,r),I6;if(o===lu){var s=this._value[r+1];s!==Ui&&s!==void 0&&(s===_p?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):sA(o,s)&&(t+=this.consumeStringSlice(r),t+=Vn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=Ku,r=this.peekCodePoint(0);for((r===rl||r===cs)&&e.push(this.consumeCodePoint());No(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===Fu&&No(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=cy;No(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===H5||r===N5)&&((o===rl||o===cs)&&No(s)||No(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=cy;No(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[m6(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],o=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(vf(o,s,i)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return o===NL?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(nd(e)){for(var t=Vn(e);nd(this.peekCodePoint(0))&&t.length<6;)t+=Vn(this.consumeCodePoint());gf(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||u6(r)||r>1114111?fy:r}return e===Ui?fy:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(py(t))e+=Vn(t);else if(sA(t,this.peekCodePoint(0)))e+=Vn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),q5=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new R5;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||N6(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),CA=function(n){return n.type===15},no=function(n){return n.type===17},Hr=function(n){return n.type===20},D6=function(n){return n.type===0},om=function(n,e){return Hr(n)&&n.value===e},K5=function(n){return n.type!==31},So=function(n){return n.type!==31&&n.type!==4},Yi=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},N6=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},bA=function(n){return n.type===17||n.type===15},Cn=function(n){return n.type===16||bA(n)},$5=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Co={type:17,number:0,flags:Ku},O1={type:16,number:50,flags:Ku},dA={type:16,number:100,flags:Ku},Jc=function(n,e,t){var r=n[0],o=n[1];return[ln(r,e),ln(typeof o<"u"?o:r,t)]},ln=function(n,e){if(n.type===16)return n.number/100*e;if(CA(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},V5="deg",G5="grad",W5="rad",X5="turn",ug={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case V5:return Math.PI*e.number/180;case G5:return Math.PI/200*e.number;case W5:return e.number;case X5:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Y5=function(n){return n.type===15&&(n.unit===V5||n.unit===G5||n.unit===W5||n.unit===X5)},J5=function(n){var e=n.filter(Hr).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Co,Co];case"to top":case"bottom":return Ws(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Co,dA];case"to right":case"left":return Ws(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dA,dA];case"to bottom":case"top":return Ws(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dA,Co];case"to left":case"right":return Ws(270)}return 0},Ws=function(n){return Math.PI*n/180},fA=function(n){return(255&n)===0},go=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,o=255&n>>24;return e<255?"rgba(".concat(o,",").concat(r,",").concat(t,",").concat(e/255,")"):"rgb(".concat(o,",").concat(r,",").concat(t,")")},Wi=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},xp=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},bl=function(n){return(n[0].type===20?n[0].value:"unknown")==="from"},jn=function(n,e,t){return Math.min(Math.max(n,e),t)},ws=function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[3]*e[0]+n[4]*e[1]+n[5]*e[2],n[6]*e[0]+n[7]*e[1]+n[8]*e[2]]},M6=function(n){return Wi(jn(Math.round(n[0]*255),0,255),jn(Math.round(n[1]*255),0,255),jn(Math.round(n[2]*255),0,255),jn(n[3],0,1))},D1=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],s=_l([e,t,r]);return Wi(jn(Math.round(s[0]*255),0,255),jn(Math.round(s[1]*255),0,255),jn(Math.round(s[2]*255),0,255),o)},$u=function(n){var e=SA([n[0],n[1],n[2]]);return D1([e[0],e[1],e[2],n[3]])},H6=function(n,e){if(bl(e.filter(So)))throw new Error("Relative color not supported for lab()");var t=hg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=_l(SA(gg([r,o,s])));return Wi(jn(Math.round(a[0]*255),0,255),jn(Math.round(a[1]*255),0,255),jn(Math.round(a[2]*255),0,255),i)},j6=function(n,e){if(bl(e.filter(So)))throw new Error("Relative color not supported for oklab()");var t=hg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=_l(SA(pg([r,o,s])));return Wi(jn(Math.round(a[0]*255),0,255),jn(Math.round(a[1]*255),0,255),jn(Math.round(a[2]*255),0,255),i)},R6=function(n,e){if(bl(e.filter(So)))throw new Error("Relative color not supported for oklch()");var t=tx(e),r=t[0],o=t[1],s=t[2],i=t[3],a=_l(SA(pg(fg([r,o,s]))));return Wi(jn(Math.round(a[0]*255),0,255),jn(Math.round(a[1]*255),0,255),jn(Math.round(a[2]*255),0,255),i)},q6=function(n,e){if(bl(e.filter(So)))throw new Error("Relative color not supported for lch()");var t=ex(e),r=t[0],o=t[1],s=t[2],i=t[3],a=_l(SA(gg(fg([r,o,s]))));return Wi(jn(Math.round(a[0]*255),0,255),jn(Math.round(a[1]*255),0,255),jn(Math.round(a[2]*255),0,255),i)},Z5=function(n,e){var t=e.filter(So),r=t[0],o=t[1],s=t[2],i=t[3],a=(r.type===17?Ws(r.number):ug.parse(n,r))/(Math.PI*2),A=Cn(o)?o.number/100:0,d=Cn(s)?s.number/100:0,c=typeof i<"u"&&Cn(i)?ln(i,1):1;return[a,A,d,c]},gy=function(n,e){if(bl(e))throw new Error("Relative color not supported for hsl()");var t=Z5(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=nx([r,o,s]);return Wi(a[0]*255,a[1]*255,a[2]*255,o===0?1:i)},ex=function(n){var e=n.filter(So),t=Cn(e[0])?e[0].number:0,r=Cn(e[1])?e[1].number:0,o=no(e[2])||CA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Cn(e[4])?ln(e[4],1):1;return[t,r,o,s]},hg=function(n){var e=n.filter(So),t=e[0].type===16?e[0].number/100:no(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:no(e[1])?e[1].number:0,o=no(e[2])||CA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Cn(e[4])?ln(e[4],1):1;return[t,r,o,s]},tx=function(n){var e=n.filter(So),t=e[0].type===16?e[0].number/100:no(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:no(e[1])?e[1].number:0,o=no(e[2])||CA(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Cn(e[4])?ln(e[4],1):1;return[t,r,o,s]},rx=function(n){return ws([1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371],n)},N1=function(n){return ws([.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124],n)},Tv=function(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n},nx=function(n){var e=n[0],t=n[1],r=n[2];if(t===0)return[r*255,r*255,r*255];var o=r<=.5?r*(t+1):r+t-r*t,s=r*2-o,i=Tv(s,o,e+1/3),a=Tv(s,o,e),A=Tv(s,o,e-1/3);return[i,a,A]},fg=function(n){var e=n[0],t=n[1],r=n[2];return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},pg=function(n){var e=ws([1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092],n),t=e.map(function(r){return Math.pow(r,3)});return ws([1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],t)},gg=function(n){var e=(n[0]+16)/116,t=n[1]/500+e,r=e-n[2]/200,o=24389/27,s=24/116,i=[(t>s?Math.pow(t,3):(116*t-16)/o)*.3457/.3585,n[0]>8?Math.pow(e,3):n[0]/o,(r>s?Math.pow(r,3):(116*r-16)/o)*(1-.3457-.3585)/.3585];return N1([i[0],i[1],i[2]])},K6=function(n,e){var t=e.filter(So);if(t.length===3){var r=t.map(xp),o=r[0],s=r[1],i=r[2],a=im([o/255,s/255,i/255]),A=sm([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,1]}if(t.length===4){var h=t.map(xp),o=h[0],s=h[1],i=h[2],f=h[3],a=im([o/255,s/255,i/255]),g=sm([a[0],a[1],a[2]]),d=g[0],c=g[1],u=g[2];return[d,c,u,f]}return[0,0,0,1]},$6=function(n,e){var t=Z5(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=im(nx([r,o,s])),A=sm([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,i]},V6=function(n,e){var t=hg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=gg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},G6=function(n,e){var t=ex(e),r=t[0],o=t[1],s=t[2],i=t[3],a=gg(fg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},W6=function(n,e){var t=tx(e),r=t[0],o=t[1],s=t[2],i=t[3],a=pg(fg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},X6=function(n,e){var t=hg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=pg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},Y6=function(n){return N1([n[0],n[1],n[2]])},vy=function(n){return n},J6=function(n){var e=rx([n[0],n[2],n[3]]),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},my=function(n){return $u([n[0],n[1],n[2],n[3]])},Z6=function(n){var e=Y6([n[0],n[1],n[2]]);return $u([e[0],e[1],e[2],n[3]])},SA=function(n){return ws([3.2409699419045226,-1.537383177570094,-.4986107602930034,-.9692436362808796,1.8759675015077202,.04155505740717559,.05563007969699366,-.20397695888897652,1.0569715142428786],n)},sm=function(n){return ws([.41239079926595934,.357584339383878,.1804807884018343,.21263900587151027,.715168678767756,.07219231536073371,.01933081871559182,.11919477979462598,.9505321522496607],n)},_l=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r>.0031308?t*(1.055*Math.pow(r,1/2.4)-.055):12.92*e})},im=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r<=.04045?e/12.92:t*Math.pow((r+.055)/1.055,2.4)})},eP=function(n){var e=_l(SA([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},tP=function(n){var e=SA([n[0],n[1],n[2]]),t=e[0],r=e[1],o=e[2];return[jn(Math.round(t*255),0,255),jn(Math.round(r*255),0,255),jn(Math.round(o*255),0,255),n[3]]},rP=function(n){return ws([.4865709486482162,.26566769316909306,.1982172852343625,.2289745640697488,.6917385218365064,.079286914093745,0,.04511338185890264,1.043944368900976],n)},nP=function(n){return ws([2.493496911941425,-.9313836179191239,-.40271078445071684,-.8294889695615747,1.7626640603183463,.023624685841943577,.03584583024378447,-.07617238926804182,.9568845240076872],n)},oP=function(n){return n.map(function(e){var t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*Math.pow((e+.055)/1.055,2.4)||0})},sP=function(n){return _l(n)},iP=function(n){var e=oP([n[0],n[1],n[2]]);return rP([e[0],e[1],e[2]])},aP=function(n){var e=sP(nP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},AP=function(n){var e=iP([n[0],n[1],n[2]]);return $u([e[0],e[1],e[2],n[3]])},lP=function(n){return ws([2.0415879038107465,-.5650069742788596,-.34473135077832956,-.9692436362808795,1.8759675015077202,.04155505740717557,.013444280632031142,-.11836239223101838,1.0151749943912054],n)},dP=function(n){return ws([.5766690429101305,.1855582379065463,.1882286462349947,.29734497525053605,.6273635662554661,.0752914584939978,.02703136138641234,.07068885253582723,.9913375368376388],n)},cP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,2.19921875)});return[e[0],e[1],e[2]]},uP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,.4547069271758437)});return[e[0],e[1],e[2]]},hP=function(n){var e=uP(lP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},fP=function(n){var e=SA(dP(cP([n[0],n[1],n[2]])));return D1([e[0],e[1],e[2],n[3]])},pP=function(n){return ws([.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602],n)},gP=function(n){return ws([1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452],n)},vP=function(n){return n.map(function(e){return e<16/512?e/16:Math.pow(e,1.8)})},mP=function(n){return n.map(function(e){return e>1/512?Math.pow(e,1/1.8):e*16})},wP=function(n){var e=vP([n[0],n[1],n[2]]);return N1(pP([e[0],e[1],e[2]]))},yP=function(n){var e=mP(gP(rx([n[0],n[1],n[2]]))),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},bP=function(n){var e=wP([n[0],n[1],n[2]]);return $u([e[0],e[1],e[2],n[3]])},zp=1.09929682680944,ox=.018053968510807,_P=function(n){return n.map(function(e){return e<ox*4.5?e/4.5:Math.pow((e+zp-1)/zp,1/.45)})},BP=function(n){return n.map(function(e){return e>=ox?zp*Math.pow(e,.45)-(zp-1):4.5*e})},xP=function(n){return ws([.6369580483012914,.14461690358620832,.1688809751641721,.2627002120112671,.6779980715188708,.05930171646986196,0,.028072693049087428,1.060985057710791],n)},zP=function(n){return ws([1.716651187971268,-.355670783776392,-.25336628137366,-.666684351832489,1.616481236634939,.0157685458139111,.017639857445311,-.042770613257809,.942103121235474],n)},CP=function(n){var e=_P([n[0],n[1],n[2]]);return xP([e[0],e[1],e[2]])},SP=function(n){var e=BP(zP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},EP=function(n){var e=CP([n[0],n[1],n[2]]);return $u([e[0],e[1],e[2],n[3]])},pA={name:"color",parse:function(n,e){if(e.type===18){var t=UP[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'.concat(e.name,'"'));return t(n,e.values)}if(e.type===5){var r=sx(e),o=r[0],s=r[1],i=r[2],a=r[3];return Wi(o,s,i,a)}if(e.type===20){var A=ji[e.value.toUpperCase()];if(typeof A<"u")return A}return ji.TRANSPARENT}},sx=function(n){if(n.value.length===3){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),1]}if(n.value.length===4){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3),o=n.value.substring(3,4);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),parseInt(o+o,16)/255]}if(n.value.length===6){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),1]}if(n.value.length===8){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6),o=n.value.substring(6,8);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),parseInt(o,16)/255]}return[0,0,0,1]},wy=function(n,e){var t=e.filter(So);if(bl(t))throw new Error("Relative color not supported for rgb()");if(t.length===3){var r=t.map(xp),o=r[0],s=r[1],i=r[2];return Wi(o,s,i,1)}if(t.length===4){var a=t.map(xp),o=a[0],s=a[1],i=a[2],A=a[3];return Wi(o,s,i,A)}return 0},FP=function(n,e){var t=e.filter(So),r=t[0].type===20?t[0].value:"unknown",o=!bl(t);if(o){var s=r,i=yy[s];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(s,'" for color() function'));var a=no(t[1])?t[1].number:0,A=no(t[2])?t[2].number:0,d=no(t[3])?t[3].number:0,c=t.length>4&&t[4].type===6&&t[4].value==="/"&&no(t[5])?t[5].number:1;return i([a,A,d,c])}else{var u=function(de,ne){if(no(ne))return ne.number;var fe=function(x){return x==="r"||x==="x"?0:x==="g"||x==="y"?1:2};if(Hr(ne)){var $=fe(ne.value);return de[$]}var q=function(x){for(var E=x.filter(So),I="(",U=0,M=E;U<M.length;U++){var j=M[U];I+=j.type===18&&j.name==="calc"?q(j.values):no(j)?j.number:j.type===6||Hr(j)?j.value:""}return I+=")",I};if(ne.type===18){var se=ne.values.filter(So);if(ne.name==="calc"){var Ae=q(se).replace(/r|x/,de[0].toString()).replace(/g|y/,de[1].toString()).replace(/b|z/,de[2].toString());return new Function("return "+Ae)()}}return null},h=t[1].type===18?t[1].name:Hr(t[1])||t[1].type===5?"rgb":"unknown",f=Hr(t[2])?t[2].value:"unknown",g=t[1].type===18?t[1].values:Hr(t[1])?[t[1]]:[];if(Hr(t[1])){var m=ji[t[1].value.toUpperCase()];if(typeof m>"u")throw new Error("Attempting to use unknown color in relative color 'from'");var y=Id(n,t[1].value),b=255&y,S=255&y>>8,F=255&y>>16,P=255&y>>24;g=[{type:17,number:P,flags:1},{type:17,number:F,flags:1},{type:17,number:S,flags:1},{type:17,number:b>1?b/255:b,flags:1}]}else if(t[1].type===5){var L=sx(t[1]),P=L[0],F=L[1],S=L[2],b=L[3];g=[{type:17,number:P,flags:1},{type:17,number:F,flags:1},{type:17,number:S,flags:1},{type:17,number:b>1?b/255:b,flags:1}]}if(g.length===0)throw new Error("Attempting to use unknown color in relative color 'from'");if(f==="unknown")throw new Error("Attempting to use unknown colorspace in relative color 'to'");var re=IP[h],K=QP[f],H=yy[f];if(typeof re>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(h,'" for color() function'));if(typeof K>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(f,'" for color() function'));var J=re(n,g),we=K(J),a=u(we,t[3]),A=u(we,t[4]),d=u(we,t[5]),c=t.length>6&&t[6].type===6&&t[6].value==="/"&&no(t[7])?t[7].number:1;if(a===null||A===null||d===null)throw new Error("Invalid relative color in color() function");return H([a,A,d,c])}},yy={srgb:M6,"srgb-linear":D1,"display-p3":AP,"a98-rgb":fP,"prophoto-rgb":bP,xyz:my,"xyz-d50":Z6,"xyz-d65":my,rec2020:EP},IP={rgb:K6,hsl:$6,lab:V6,lch:G6,oklab:X6,oklch:W6},QP={srgb:eP,"srgb-linear":tP,"display-p3":aP,"a98-rgb":hP,"prophoto-rgb":yP,xyz:vy,"xyz-d50":J6,"xyz-d65":vy,rec2020:SP},UP={hsl:gy,hsla:gy,rgb:wy,rgba:wy,lch:q6,oklch:R6,oklab:j6,lab:H6,color:FP},Id=function(n,e){return pA.parse(n,q5.create(e).parseComponentValue())},ji={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},TP={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Hr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},LP={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vg=function(n,e){var t=pA.parse(n,e[0]),r=e[1];return r&&Cn(r)?{color:t,stop:r}:{color:t,stop:null}},by=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Co),r.stop===null&&(r.stop=dA);for(var o=[],s=0,i=0;i<n.length;i++){var a=n[i].stop;if(a!==null){var A=ln(a,e);A>s?o.push(A):o.push(s),s=A}else o.push(null)}for(var d=null,i=0;i<o.length;i++){var c=o[i];if(c===null)d===null&&(d=i);else if(d!==null){for(var u=i-d,h=o[d-1],f=(c-h)/(u+1),g=1;g<=u;g++)o[d+g-1]=f*g;d=null}}return n.map(function(m,y){var b=m.color;return{color:b,stop:Math.max(Math.min(1,o[y]/e),0)}})},PP=function(n,e,t){var r=e/2,o=t/2,s=ln(n[0],e)-r,i=o-ln(n[1],t);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},kP=function(n,e,t){var r=typeof n=="number"?n:PP(n,e,t),o=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,i=t/2,a=o/2,A=Math.sin(r-Math.PI/2)*a,d=Math.cos(r-Math.PI/2)*a;return[o,s-d,s+d,i-A,i+A]},Ai=function(n,e){return Math.sqrt(n*n+e*e)},_y=function(n,e,t,r,o){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(i,a){var A=a[0],d=a[1],c=Ai(t-A,r-d);return(o?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:a,optimumDistance:c}:i},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},OP=function(n,e,t,r,o){var s=0,i=0;switch(n.size){case 0:n.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(t),Math.abs(t-o)));break;case 2:if(n.shape===0)s=i=Math.min(Ai(e,t),Ai(e,t-o),Ai(e-r,t),Ai(e-r,t-o));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-o))/Math.min(Math.abs(e),Math.abs(e-r)),A=_y(r,o,e,t,!0),d=A[0],c=A[1];s=Ai(d-e,(c-t)/a),i=a*s}break;case 1:n.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(t),Math.abs(t-o)));break;case 3:if(n.shape===0)s=i=Math.max(Ai(e,t),Ai(e,t-o),Ai(e-r,t),Ai(e-r,t-o));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-o))/Math.max(Math.abs(e),Math.abs(e-r)),u=_y(r,o,e,t,!1),d=u[0],c=u[1];s=Ai(d-e,(c-t)/a),i=a*s}break}return Array.isArray(n.size)&&(s=ln(n.size[0],r),i=n.size.length===2?ln(n.size[1],o):s),[s,i]},DP=function(n,e){var t=Ws(180),r=[];return Yi(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&i.value==="to"){t=J5(o);return}else if(Y5(i)){t=ug.parse(n,i);return}}var a=vg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},wf=function(n,e){var t=Ws(180),r=[];return Yi(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=J5(o);return}else if(Y5(i)){t=(ug.parse(n,i)+Ws(270))%Ws(360);return}}var a=vg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},NP=function(n,e){var t=Ws(180),r=[],o=1,s=0,i=3,a=[];return Yi(e).forEach(function(A,d){var c=A[0];if(d===0){if(Hr(c)&&c.value==="linear"){o=1;return}else if(Hr(c)&&c.value==="radial"){o=2;return}}if(c.type===18){if(c.name==="from"){var u=pA.parse(n,c.values[0]);r.push({stop:Co,color:u})}else if(c.name==="to"){var u=pA.parse(n,c.values[0]);r.push({stop:dA,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(So);if(h.length===2){var u=pA.parse(n,h[1]),f=h[0];no(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:u})}}}}),o===1?{angle:(t+Ws(180))%Ws(360),stops:r,type:o}:{size:i,shape:s,stops:r,position:a,type:o}},ix="closest-side",ax="farthest-side",Ax="closest-corner",lx="farthest-corner",dx="circle",cx="ellipse",ux="cover",hx="contain",MP=function(n,e){var t=0,r=3,o=[],s=[];return Yi(e).forEach(function(i,a){var A=!0;if(a===0){var d=!1;A=i.reduce(function(u,h){if(d)if(Hr(h))switch(h.value){case"center":return s.push(O1),u;case"top":case"left":return s.push(Co),u;case"right":case"bottom":return s.push(dA),u}else(Cn(h)||bA(h))&&s.push(h);else if(Hr(h))switch(h.value){case dx:return t=0,!1;case cx:return t=1,!1;case"at":return d=!0,!1;case ix:return r=0,!1;case ux:case ax:return r=1,!1;case hx:case Ax:return r=2,!1;case lx:return r=3,!1}else if(bA(h)||Cn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},A)}if(A){var c=vg(n,i);o.push(c)}}),{size:r,shape:t,stops:o,position:s,type:2}},yf=function(n,e){var t=0,r=3,o=[],s=[];return Yi(e).forEach(function(i,a){var A=!0;if(a===0?A=i.reduce(function(c,u){if(Hr(u))switch(u.value){case"center":return s.push(O1),!1;case"top":case"left":return s.push(Co),!1;case"right":case"bottom":return s.push(dA),!1}else if(Cn(u)||bA(u))return s.push(u),!1;return c},A):a===1&&(A=i.reduce(function(c,u){if(Hr(u))switch(u.value){case dx:return t=0,!1;case cx:return t=1,!1;case hx:case ix:return r=0,!1;case ax:return r=1,!1;case Ax:return r=2,!1;case ux:case lx:return r=3,!1}else if(bA(u)||Cn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var d=vg(n,i);o.push(d)}}),{size:r,shape:t,stops:o,position:s,type:2}},HP=function(n){return n.type===1},jP=function(n){return n.type===2},M1={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=fx[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'.concat(e.name,'"'));return r(n,e.values)}throw new Error("Unsupported image type ".concat(e.type))}};function RP(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!fx[n.name])}var fx={"linear-gradient":DP,"-moz-linear-gradient":wf,"-ms-linear-gradient":wf,"-o-linear-gradient":wf,"-webkit-linear-gradient":wf,"radial-gradient":MP,"-moz-radial-gradient":yf,"-ms-radial-gradient":yf,"-o-radial-gradient":yf,"-webkit-radial-gradient":yf,"-webkit-gradient":NP},qP={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return So(r)&&RP(r)}).map(function(r){return M1.parse(n,r)})}},KP={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Hr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$P={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Yi(e).map(function(t){return t.filter(Cn)}).map($5)}},VP={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Yi(e).map(function(t){return t.filter(Hr).map(function(r){return r.value}).join(" ")}).map(GP)}},GP=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Qd;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Qd||(Qd={}));var WP={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Yi(e).map(function(t){return t.filter(XP)})}},XP=function(n){return Hr(n)||Cn(n)},mg=function(n){return{name:"border-".concat(n,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},YP=mg("top"),JP=mg("right"),ZP=mg("bottom"),ek=mg("left"),wg=function(n){return{name:"border-radius-".concat(n),initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return $5(t.filter(Cn))}}},tk=wg("top-left"),rk=wg("top-right"),nk=wg("bottom-right"),ok=wg("bottom-left"),yg=function(n){return{name:"border-".concat(n,"-style"),initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sk=yg("top"),ik=yg("right"),ak=yg("bottom"),Ak=yg("left"),bg=function(n){return{name:"border-".concat(n,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e,t){return CA(t)?t.number:0}}},lk=bg("top"),dk=bg("right"),ck=bg("bottom"),uk=bg("left"),hk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},pk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Hr).reduce(function(t,r){return t|gk(r.value)},0)}},gk=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},vk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Cp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Cp||(Cp={}));var wk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Cp.STRICT;case"normal":default:return Cp.NORMAL}}},yk={name:"line-height",initialValue:"normal",prefix:!1,type:4},By=function(n,e){return Hr(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Cn(n)?ln(n,e):e},bk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:M1.parse(n,e)}},_k={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},am={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_g=function(n){return{name:"margin-".concat(n),initialValue:"0",prefix:!1,type:4}},Bk=_g("top"),xk=_g("right"),zk=_g("bottom"),Ck=_g("left"),Sk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Hr).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ek={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Bg=function(n){return{name:"padding-".concat(n),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Fk=Bg("top"),Ik=Bg("right"),Qk=Bg("bottom"),Uk=Bg("left"),Tk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Lk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Pk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&om(e[0],"none")?[]:Yi(e).map(function(t){for(var r={color:ji.TRANSPARENT,offsetX:Co,offsetY:Co,blur:Co},o=0,s=0;s<t.length;s++){var i=t[s];bA(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:r.blur=i,o++):r.color=pA.parse(n,i)}return r})}},kk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ok={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=Mk[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return t(e.values)}return null}},Dk=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Nk=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var o=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,o,s,i,a]:null},Mk={matrix:Dk,matrix3d:Nk},xy={type:16,number:50,flags:Ku},Hk=[xy,xy],jk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Cn);return t.length!==2?Hk:[t[0],t[1]]}},Rk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},du;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(du||(du={}));var qk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return du.BREAK_ALL;case"keep-all":return du.KEEP_ALL;case"normal":default:return du.NORMAL}}},Kk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(no(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},px={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},$k={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return no(e)?e.number:1}},Vk={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gk={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Hr).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Wk={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:t.push(o.value);break;case 17:t.push(o.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'".concat(o,"'")})}},Xk={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Yk={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(no(e))return e.number;if(Hr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Jk={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Hr).map(function(t){return t.value})}},Zk={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ao=function(n,e){return(n&e)!==0},eO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},tO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],o=e.filter(K5),s=0;s<o.length;s++){var i=o[s],a=o[s+1];if(i.type===20){var A=a&&no(a)?a.number:1;r.push({counter:i.value,increment:A})}}return r}},rO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(K5),o=0;o<r.length;o++){var s=r[o],i=r[o+1];if(Hr(s)&&s.value!=="none"){var a=i&&no(i)?i.number:0;t.push({counter:s.value,reset:a})}}return t}},nO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(CA).map(function(t){return px.parse(n,t)})}},oO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],o=e.filter(D6);if(o.length%2!==0)return null;for(var s=0;s<o.length;s+=2){var i=o[s].value,a=o[s+1].value;r.push({open:i,close:a})}return r}},zy=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},sO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&om(e[0],"none")?[]:Yi(e).map(function(t){for(var r={color:255,offsetX:Co,offsetY:Co,blur:Co,spread:Co,inset:!1},o=0,s=0;s<t.length;s++){var i=t[s];om(i,"inset")?r.inset=!0:bA(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:o===2?r.blur=i:r.spread=i,o++):r.color=pA.parse(n,i)}return r})}},iO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Hr).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},aO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},AO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return CA(e)?e.number:0}},lO={name:"objectFit",initialValue:"fill",prefix:!1,type:1,parse:function(n,e){return e.filter(Hr).reduce(function(t,r){return t|dO(r.value)},0)}},dO=function(n){switch(n){case"contain":return 2;case"cover":return 4;case"none":return 8;case"scale-down":return 16}return 0},cO=function(){function n(e,t){var r,o;this.animationDuration=Xt(e,nO,t.animationDuration),this.backgroundClip=Xt(e,TP,t.backgroundClip),this.backgroundColor=Xt(e,LP,t.backgroundColor),this.backgroundImage=Xt(e,qP,t.backgroundImage),this.backgroundOrigin=Xt(e,KP,t.backgroundOrigin),this.backgroundPosition=Xt(e,$P,t.backgroundPosition),this.backgroundRepeat=Xt(e,VP,t.backgroundRepeat),this.backgroundSize=Xt(e,WP,t.backgroundSize),this.borderTopColor=Xt(e,YP,t.borderTopColor),this.borderRightColor=Xt(e,JP,t.borderRightColor),this.borderBottomColor=Xt(e,ZP,t.borderBottomColor),this.borderLeftColor=Xt(e,ek,t.borderLeftColor),this.borderTopLeftRadius=Xt(e,tk,t.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,rk,t.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,nk,t.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,ok,t.borderBottomLeftRadius),this.borderTopStyle=Xt(e,sk,t.borderTopStyle),this.borderRightStyle=Xt(e,ik,t.borderRightStyle),this.borderBottomStyle=Xt(e,ak,t.borderBottomStyle),this.borderLeftStyle=Xt(e,Ak,t.borderLeftStyle),this.borderTopWidth=Xt(e,lk,t.borderTopWidth),this.borderRightWidth=Xt(e,dk,t.borderRightWidth),this.borderBottomWidth=Xt(e,ck,t.borderBottomWidth),this.borderLeftWidth=Xt(e,uk,t.borderLeftWidth),this.boxShadow=Xt(e,sO,t.boxShadow),this.color=Xt(e,hk,t.color),this.direction=Xt(e,fk,t.direction),this.display=Xt(e,pk,t.display),this.float=Xt(e,vk,t.cssFloat),this.fontFamily=Xt(e,Wk,t.fontFamily),this.fontSize=Xt(e,Xk,t.fontSize),this.fontStyle=Xt(e,Zk,t.fontStyle),this.fontVariant=Xt(e,Jk,t.fontVariant),this.fontWeight=Xt(e,Yk,t.fontWeight),this.letterSpacing=Xt(e,mk,t.letterSpacing),this.lineBreak=Xt(e,wk,t.lineBreak),this.lineHeight=Xt(e,yk,t.lineHeight),this.listStyleImage=Xt(e,bk,t.listStyleImage),this.listStylePosition=Xt(e,_k,t.listStylePosition),this.listStyleType=Xt(e,am,t.listStyleType),this.marginTop=Xt(e,Bk,t.marginTop),this.marginRight=Xt(e,xk,t.marginRight),this.marginBottom=Xt(e,zk,t.marginBottom),this.marginLeft=Xt(e,Ck,t.marginLeft),this.opacity=Xt(e,$k,t.opacity);var s=Xt(e,Sk,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Xt(e,Ek,t.overflowWrap),this.paddingTop=Xt(e,Fk,t.paddingTop),this.paddingRight=Xt(e,Ik,t.paddingRight),this.paddingBottom=Xt(e,Qk,t.paddingBottom),this.paddingLeft=Xt(e,Uk,t.paddingLeft),this.paintOrder=Xt(e,iO,t.paintOrder),this.position=Xt(e,Lk,t.position),this.textAlign=Xt(e,Tk,t.textAlign),this.textDecorationColor=Xt(e,Vk,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=Xt(e,Gk,(o=t.textDecorationLine)!==null&&o!==void 0?o:t.textDecoration),this.textShadow=Xt(e,Pk,t.textShadow),this.textTransform=Xt(e,kk,t.textTransform),this.transform=Xt(e,Ok,t.transform),this.transformOrigin=Xt(e,jk,t.transformOrigin),this.visibility=Xt(e,Rk,t.visibility),this.webkitTextStrokeColor=Xt(e,aO,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,AO,t.webkitTextStrokeWidth),this.wordBreak=Xt(e,qk,t.wordBreak),this.zIndex=Xt(e,Kk,t.zIndex),this.objectFit=Xt(e,lO,t.objectFit)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return fA(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return ao(this.display,4)||ao(this.display,33554432)||ao(this.display,268435456)||ao(this.display,536870912)||ao(this.display,67108864)||ao(this.display,134217728)},n}(),uO=function(){function n(e,t){this.content=Xt(e,eO,t.content),this.quotes=Xt(e,oO,t.quotes)}return n}(),Cy=function(){function n(e,t){this.counterIncrement=Xt(e,tO,t.counterIncrement),this.counterReset=Xt(e,rO,t.counterReset)}return n}(),Xt=function(n,e,t){var r=new R5,o=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(o);var s=new q5(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(n,Hr(i)?i.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ug.parse(n,s.parseComponentValue());case"color":return pA.parse(n,s.parseComponentValue());case"image":return M1.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return bA(a)?a:Co;case"length-percentage":var A=s.parseComponentValue();return Cn(A)?A:Co;case"time":return px.parse(n,s.parseComponentValue())}break}},hO="data-html2canvas-debug",fO=function(n){var e=n.getAttribute(hO);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Am=function(n,e){var t=fO(n);return t===1||e===t},Ji=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Am(t,3))debugger;this.styles=new cO(e,window.getComputedStyle(t,null)),cm(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=dg(this.context,t),Am(t,4)&&(this.flags|=16)}return n}(),pO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bf=0;bf<Sy.length;bf++)Zc[Sy.charCodeAt(bf)]=bf;var gO=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=Zc[n.charCodeAt(r)],i=Zc[n.charCodeAt(r+1)],a=Zc[n.charCodeAt(r+2)],A=Zc[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},vO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},mO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Al=5,H1=11,Lv=2,wO=H1-Al,gx=65536>>Al,yO=1<<Al,Pv=yO-1,bO=1024>>Al,_O=gx+bO,BO=_O,xO=32,zO=BO+xO,CO=65536>>H1,SO=1<<wO,EO=SO-1,Ey=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},FO=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},IO=function(n,e){var t=gO(n),r=Array.isArray(t)?mO(t):new Uint32Array(t),o=Array.isArray(t)?vO(t):new Uint16Array(t),s=24,i=Ey(o,s/2,r[4]/2),a=r[5]===2?Ey(o,(s+r[4])/2):FO(r,Math.ceil((s+r[4])/4));return new QO(r[0],r[1],r[2],r[3],i,a)},QO=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Al],t=(t<<Lv)+(e&Pv),this.data[t];if(e<=65535)return t=this.index[gx+(e-55296>>Al)],t=(t<<Lv)+(e&Pv),this.data[t];if(e<this.highStart)return t=zO-CO+(e>>H1),t=this.index[t],t+=e>>Al&EO,t=this.index[t],t=(t<<Lv)+(e&Pv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Fy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _f=0;_f<Fy.length;_f++)UO[Fy.charCodeAt(_f)]=_f;var TO=1,kv=2,Ov=3,Iy=4,Qy=5,LO=7,Uy=8,Dv=9,Nv=10,Ty=11,Ly=12,Py=13,ky=14,Mv=15,PO=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},kO=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},OO=IO(pO),$s="",Hv="",DO=function(n){return OO.get(n)},NO=function(n,e,t){var r=t-2,o=e[r],s=e[t-1],i=e[t];if(s===kv&&i===Ov)return $s;if(s===kv||s===Ov||s===Iy||i===kv||i===Ov||i===Iy)return Hv;if(s===Uy&&[Uy,Dv,Ty,Ly].indexOf(i)!==-1||(s===Ty||s===Dv)&&(i===Dv||i===Nv)||(s===Ly||s===Nv)&&i===Nv||i===Py||i===Qy||i===LO||s===TO)return $s;if(s===Py&&i===ky){for(;o===Qy;)o=e[--r];if(o===ky)return $s}if(s===Mv&&i===Mv){for(var a=0;o===Mv;)a++,o=e[--r];if(a%2===0)return $s}return Hv},MO=function(n){var e=PO(n),t=e.length,r=0,o=0,s=e.map(DO);return{next:function(){if(r>=t)return{done:!0,value:null};for(var i=$s;r<t&&(i=NO(e,s,++r))===$s;);if(i!==$s||r===t){var a=kO.apply(null,e.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},HO=function(n){for(var e=MO(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},jO=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height="".concat(e,"px"),r.style.display="block",n.body.appendChild(r),t.selectNode(r);var o=t.getBoundingClientRect(),s=Math.round(o.height);if(n.body.removeChild(r),s===e)return!0}}return!1},RO=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=cg(r.data).map(function(A){return Vn(A)}),s=0,i={},a=o.every(function(A,d){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>i.x||c.y>i.y;return i=c,d===0?!0:u});return n.body.removeChild(e),a},qO=function(){return typeof new Image().crossOrigin<"u"},KO=function(){return typeof new XMLHttpRequest().responseType=="string"},$O=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Oy=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},VO=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var o=new Image,s=e.toDataURL();o.src=s;var i=lm(t,t,0,0,o);return r.fillStyle="red",r.fillRect(0,0,t,t),Dy(i).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=n.createElement("div");return d.style.backgroundImage="url(".concat(s,")"),d.style.height="".concat(t,"px"),Oy(A)?Dy(lm(t,t,0,0,d)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),Oy(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},lm=function(n,e,t,r,o){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),i},Dy=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},xo={get SUPPORT_RANGE_BOUNDS(){var n=jO(document);return Object.defineProperty(xo,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=xo.SUPPORT_RANGE_BOUNDS&&RO(document);return Object.defineProperty(xo,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=$O(document);return Object.defineProperty(xo,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?VO(document):Promise.resolve(!1);return Object.defineProperty(xo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=qO();return Object.defineProperty(xo,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=KO();return Object.defineProperty(xo,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xo,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},cu=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),GO=function(n,e,t,r){var o=YO(e,t),s=[],i=0;return o.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(xo.SUPPORT_RANGE_BOUNDS){var A=Ny(r,i,a.length).getClientRects();if(A.length>1){var d=j1(a),c=0;d.forEach(function(h){s.push(new cu(h,Ea.fromDOMRectList(n,Ny(r,c+i,h.length).getClientRects()))),c+=h.length})}else s.push(new cu(a,Ea.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new cu(a,WO(n,r))),r=u}else xo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),s},WO=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var s=dg(n,r);return r.firstChild&&o.replaceChild(r.firstChild,r),s}}return Ea.EMPTY},Ny=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(n,e),o.setEnd(n,e+t),o},j1=function(n){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return HO(n)},XO=function(n,e){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return ZO(n,e)},YO=function(n,e){return e.letterSpacing!==0?j1(n):XO(n,e)},JO=[32,160,4961,65792,65793,4153,4241],ZO=function(n,e){for(var t=UL(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,s=function(){if(o.value){var i=o.value.slice(),a=cg(i),A="";a.forEach(function(d){JO.indexOf(d)===-1?A+=Vn(d):(A.length&&r.push(A),r.push(Vn(d)),A="")}),A.length&&r.push(A)}};!(o=t.next()).done;)s();return r},e8=function(){function n(e,t,r){this.text=t8(t.data,r.textTransform),this.textBounds=GO(e,this.text,r,t)}return n}(),t8=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(r8,n8);case 2:return n.toUpperCase();default:return n}},r8=/(^|\s|:|-|\(|\))([a-z])/g,n8=function(n,e,t){return n.length>0?e+t.toUpperCase():n},vx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}(Ji),mx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}(Ji),wx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=new XMLSerializer,i=dg(t,r);return r.setAttribute("width","".concat(i.width,"px")),r.setAttribute("height","".concat(i.height,"px")),o.svg="data:image/svg+xml,".concat(encodeURIComponent(s.serializeToString(r))),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(Ji),yx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Ji),dm=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}(Ji),o8=[{type:15,flags:0,unit:"px",number:3}],s8=[{type:16,flags:0,number:50}],i8=function(n){return n.width>n.height?new Ea(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Ea(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},a8=function(n){var e=n.type===A8?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Sp="checkbox",Ep="radio",A8="password",My=707406591,R1=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=a8(r),(o.type===Sp||o.type===Ep)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=i8(o.bounds)),o.type){case Sp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=o8;break;case Ep:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=s8;break}return o}return e}(Ji),bx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return o.value=s&&s.text||"",o}return e}(Ji),_x=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Ji),Bx=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=zx(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Id(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ji.TRANSPARENT,i=r.contentWindow.document.body?Id(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):ji.TRANSPARENT;o.backgroundColor=fA(s)?fA(i)?o.styles.backgroundColor:i:s}}catch{}return o}return e}(Ji),l8=["OL","UL","MENU"],Rf=function(n,e,t,r){for(var o=e.firstChild,s=void 0;o;o=s)if(s=o.nextSibling,Cx(o)&&o.data.length>0)t.textNodes.push(new e8(n,o,t.styles));else if(wd(o))if(Ix(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return Rf(n,a,t,r)});else{var i=xx(n,o);i.styles.isVisible()&&(d8(o,i,r)?i.flags|=4:c8(i.styles)&&(i.flags|=2),l8.indexOf(o.tagName)!==-1&&(i.flags|=8),t.elements.push(i),o.slot,o.shadowRoot?Rf(n,o.shadowRoot,i,r):!Fp(o)&&!Sx(o)&&!Ip(o)&&Rf(n,o,i,r))}},xx=function(n,e){return um(e)?new vx(n,e):Ex(e)?new mx(n,e):Sx(e)?new wx(n,e):u8(e)?new yx(n,e):h8(e)?new dm(n,e):f8(e)?new R1(n,e):Ip(e)?new bx(n,e):Fp(e)?new _x(n,e):Fx(e)?new Bx(n,e):new Ji(n,e)},zx=function(n,e){var t=xx(n,e);return t.flags|=4,Rf(n,e,t,t),t},d8=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||q1(n)&&t.styles.isTransparent()},c8=function(n){return n.isPositioned()||n.isFloating()},Cx=function(n){return n.nodeType===Node.TEXT_NODE},wd=function(n){return n.nodeType===Node.ELEMENT_NODE},cm=function(n){return wd(n)&&typeof n.style<"u"&&!qf(n)},qf=function(n){return typeof n.className=="object"},u8=function(n){return n.tagName==="LI"},h8=function(n){return n.tagName==="OL"},f8=function(n){return n.tagName==="INPUT"},p8=function(n){return n.tagName==="HTML"},Sx=function(n){return n.tagName==="svg"},q1=function(n){return n.tagName==="BODY"},Ex=function(n){return n.tagName==="CANVAS"},Hy=function(n){return n.tagName==="VIDEO"},um=function(n){return n.tagName==="IMG"},Fx=function(n){return n.tagName==="IFRAME"},jy=function(n){return n.tagName==="STYLE"},g8=function(n){return n.tagName==="SCRIPT"},Fp=function(n){return n.tagName==="TEXTAREA"},Ip=function(n){return n.tagName==="SELECT"},Ix=function(n){return n.tagName==="SLOT"},Ry=function(n){return n.tagName.indexOf("-")>0},v8=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,o=e.counterReset,s=!0;r!==null&&r.forEach(function(a){var A=t.counters[a.counter];A&&a.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=a.increment)});var i=[];return s&&o.forEach(function(a){var A=t.counters[a.counter];i.push(a.counter),A||(A=t.counters[a.counter]=[]),A.push(a.reset)}),i},n}(),qy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ky={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},m8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},w8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},od=function(n,e,t,r,o,s){return n<e||n>t?Iu(n,o,s.length>0):r.integers.reduce(function(i,a,A){for(;n>=a;)n-=a,i+=r.values[A];return i},"")+s},Qx=function(n,e,t,r){var o="";do t||n--,o=r(n)+o,n/=e;while(n*e>=e);return o},Kn=function(n,e,t,r,o){var s=t-e+1;return(n<0?"-":"")+(Qx(Math.abs(n),s,r,function(i){return Vn(Math.floor(i%s)+e)})+o)},MA=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return Qx(Math.abs(n),r,!1,function(o){return e[Math.floor(o%r)]})+t},cd=1,tA=2,rA=4,eu=8,la=function(n,e,t,r,o,s){if(n<-9999||n>9999)return Iu(n,4,o.length>0);var i=Math.abs(n),a=o;if(i===0)return e[0]+a;for(var A=0;i>0&&A<=4;A++){var d=i%10;d===0&&ao(s,cd)&&a!==""?a=e[d]+a:d>1||d===1&&A===0||d===1&&A===1&&ao(s,tA)||d===1&&A===1&&ao(s,rA)&&n>100||d===1&&A>1&&ao(s,eu)?a=e[d]+(A>0?t[A-1]:"")+a:d===1&&A>0&&(a=t[A-1]+a),i=Math.floor(i/10)}return(n<0?r:"")+a},$y="",Vy="",Gy="",jv="",Iu=function(n,e,t){var r=t?". ":"",o=t?"":"",s=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=Kn(n,48,57,!0,r);return a.length<4?"0".concat(a):a;case 4:return MA(n,"",o);case 6:return od(n,1,3999,qy,3,r).toLowerCase();case 7:return od(n,1,3999,qy,3,r);case 8:return Kn(n,945,969,!1,r);case 9:return Kn(n,97,122,!1,r);case 10:return Kn(n,65,90,!1,r);case 11:return Kn(n,1632,1641,!0,r);case 12:case 49:return od(n,1,9999,Ky,3,r);case 35:return od(n,1,9999,Ky,3,r).toLowerCase();case 13:return Kn(n,2534,2543,!0,r);case 14:case 30:return Kn(n,6112,6121,!0,r);case 15:return MA(n,"",o);case 16:return MA(n,"",o);case 17:case 48:return la(n,"",$y,"",o,tA|rA|eu);case 47:return la(n,"",Vy,"",o,cd|tA|rA|eu);case 42:return la(n,"",$y,"",o,tA|rA|eu);case 41:return la(n,"",Vy,"",o,cd|tA|rA|eu);case 26:return la(n,"","",Gy,o,0);case 25:return la(n,"","",Gy,o,cd|tA|rA);case 31:return la(n,"","",jv,s,cd|tA|rA);case 33:return la(n,"","",jv,s,0);case 32:return la(n,"","",jv,s,cd|tA|rA);case 18:return Kn(n,2406,2415,!0,r);case 20:return od(n,1,19999,w8,3,r);case 21:return Kn(n,2790,2799,!0,r);case 22:return Kn(n,2662,2671,!0,r);case 22:return od(n,1,10999,m8,3,r);case 23:return MA(n,"");case 24:return MA(n,"");case 27:return Kn(n,3302,3311,!0,r);case 28:return MA(n,"",o);case 29:return MA(n,"",o);case 34:return Kn(n,3792,3801,!0,r);case 37:return Kn(n,6160,6169,!0,r);case 38:return Kn(n,4160,4169,!0,r);case 39:return Kn(n,2918,2927,!0,r);case 40:return Kn(n,1776,1785,!0,r);case 43:return Kn(n,3046,3055,!0,r);case 44:return Kn(n,3174,3183,!0,r);case 45:return Kn(n,3664,3673,!0,r);case 46:return Kn(n,3872,3881,!0,r);case 3:default:return Kn(n,48,57,!0,r)}},Ux="data-html2canvas-ignore",Wy=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new v8,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,o=y8(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=o.contentWindow,A=a.document,d=B8(o).then(function(){return Xo(r,void 0,void 0,function(){var u,h;return Do(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(S8),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the ".concat(this.referenceElement.nodeName," in the cloned document"))]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_8(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,h)}).then(function(){return o})]:[2,o]}})})}),c=A.adoptNode(this.documentElement);return U8(c,A),A.open(),A.write("".concat(z8(document.doctype),"<html></html>")),C8(this.referenceElement.ownerDocument,s,i),A.replaceChild(c,A.documentElement),A.close(),d},n.prototype.createElementClone=function(e){if(Am(e,2))debugger;if(Ex(e))return this.createCanvasClone(e);if(Hy(e))return this.createVideoClone(e);if(jy(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return um(t)&&(um(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Ry(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Rv(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var s=e.getContext("2d"),i=o.getContext("2d",{willReadFrequently:!0});if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var A=a.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},n.prototype.appendChildNode=function(e,t,r){(!wd(t)||!g8(t)&&!t.hasAttribute(Ux)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!wd(t)||!jy(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var o=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(wd(s)&&Ix(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return o.appendChildNode(t,a,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(Cx(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&wd(e)&&(cm(e)||qf(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&cm(o)&&(this.clonedReferenceElement=o),q1(o)&&I8(o);var A=this.counters.parse(new Cy(this.context,s)),d=this.resolvePseudoContent(e,o,i,uu.BEFORE);Ry(e)&&(t=!0),Hy(e)||this.cloneChildNodes(e,o,t),d&&o.insertBefore(d,o.firstChild);var c=this.resolvePseudoContent(e,o,a,uu.AFTER);return c&&o.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||qf(e))&&!Fx(e)||t)&&Rv(s,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(Fp(e)||Ip(e))&&(Fp(o)||Ip(o))&&(o.value=e.value),o}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,o){var s=this;if(r){var i=r.content,a=t.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Cy(this.context,r));var A=new uO(this.context,r),d=a.createElement("html2canvaspseudoelement");Rv(r,d),A.content.forEach(function(u){if(u.type===0)d.appendChild(a.createTextNode(u.value));else if(u.type===22){var h=a.createElement("img");h.src=u.value,h.style.opacity="1",d.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var f=u.values.filter(Hr);f.length&&d.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(u.name==="counter"){var g=u.values.filter(So),m=g[0],y=g[1];if(m&&Hr(m)){var b=s.counters.getCounterValue(m.value),S=y&&Hr(y)?am.parse(s.context,y.value):3;d.appendChild(a.createTextNode(Iu(b,S,!1)))}}else if(u.name==="counters"){var F=u.values.filter(So),m=F[0],P=F[1],y=F[2];if(m&&Hr(m)){var L=s.counters.getCounterValues(m.value),re=y&&Hr(y)?am.parse(s.context,y.value):3,K=P&&P.type===0?P.value:"",H=L.map(function(O){return Iu(O,re,!1)}).join(K);d.appendChild(a.createTextNode(H))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(a.createTextNode(zy(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(a.createTextNode(zy(A.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(a.createTextNode(u.value))}}),d.className="".concat(hm," ").concat(fm);var c=o===uu.BEFORE?" ".concat(hm):" ".concat(fm);return qf(t)?t.className.baseValue+=c:t.className+=c,d}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),uu;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(uu||(uu={}));var y8=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(Ux,"true"),n.body.appendChild(t),t},b8=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},_8=function(n){return Promise.all([].slice.call(n.images,0).map(b8))},B8=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var o=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},x8=["all","d","content"],Rv=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);x8.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},z8=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'.concat(n.publicId,'"')),n.systemId&&(e+='"'.concat(n.systemId,'"')),e+=">"),e},C8=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},S8=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},E8=":before",F8=":after",hm="___html2canvas___pseudoelement_before",fm="___html2canvas___pseudoelement_after",Xy=`{
    content: "" !important;
    display: none !important;
}`,I8=function(n){Q8(n,".".concat(hm).concat(E8).concat(Xy,`
         .`).concat(fm).concat(F8).concat(Xy))},Q8=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},U8=function(n,e){var t,r=e.createElement("base");r.href=e.baseURI;var o=n.getElementsByTagName("head").item(0);o==null||o.insertBefore(r,(t=o==null?void 0:o.firstChild)!==null&&t!==void 0?t:null)},Tx=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),T8=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Kv(e)||O8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return Xo(this,void 0,void 0,function(){var t,r,o,s,i=this;return Do(this,function(a){switch(a.label){case 0:return t=Tx.isSameOrigin(e),r=!qv(e)&&this._options.useCORS===!0&&xo.SUPPORT_CORS_IMAGES&&!t,o=!qv(e)&&!t&&!Kv(e)&&typeof this._options.proxy=="string"&&xo.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!qv(e)&&!Kv(e)&&!o&&!r?[2]:(s=e,o?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image ".concat(e.substring(0,256))),[4,new Promise(function(A,d){var c=new Image;c.onload=function(){return A(c)},c.onerror=d,(D8(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return d("Timed out (".concat(i._options.imageTimeout,"ms) loading image"))},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(s,i){var a=xo.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(a==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return i(h)},!1),u.readAsDataURL(A.response)}else i("Failed to proxy resource ".concat(o," with status code ").concat(A.status))},A.onerror=i;var d=r.indexOf("?")>-1?"&":"?";if(A.open("GET","".concat(r).concat(d,"url=").concat(encodeURIComponent(e),"&responseType=").concat(a)),a!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return i("Timed out (".concat(c,"ms) proxying ").concat(o))}}A.send()})},n}(),L8=/^data:image\/svg\+xml/i,P8=/^data:image\/.*;base64,/i,k8=/^data:image\/.*/i,O8=function(n){return xo.SUPPORT_SVG_DRAWING||!N8(n)},qv=function(n){return k8.test(n)},D8=function(n){return P8.test(n)},Kv=function(n){return n.substr(0,4)==="blob"},N8=function(n){return n.substr(-3).toLowerCase()==="svg"||L8.test(n)},$t=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),sd=function(n,e,t){return new $t(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Bf=function(){function n(e,t,r,o){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=o}return n.prototype.subdivide=function(e,t){var r=sd(this.start,this.startControl,e),o=sd(this.startControl,this.endControl,e),s=sd(this.endControl,this.end,e),i=sd(r,o,e),a=sd(o,s,e),A=sd(i,a,e);return t?new n(this.start,r,i,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Vs=function(n){return n.type===1},M8=function(){function n(e){var t=e.styles,r=e.bounds,o=Jc(t.borderTopLeftRadius,r.width,r.height),s=o[0],i=o[1],a=Jc(t.borderTopRightRadius,r.width,r.height),A=a[0],d=a[1],c=Jc(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],f=Jc(t.borderBottomLeftRadius,r.width,r.height),g=f[0],m=f[1],y=[];y.push((s+A)/r.width),y.push((g+u)/r.width),y.push((i+m)/r.height),y.push((d+h)/r.height);var b=Math.max.apply(Math,y);b>1&&(s/=b,i/=b,A/=b,d/=b,u/=b,h/=b,g/=b,m/=b);var S=r.width-A,F=r.height-h,P=r.width-u,L=r.height-m,re=t.borderTopWidth,K=t.borderRightWidth,H=t.borderBottomWidth,J=t.borderLeftWidth,we=ln(t.paddingTop,e.bounds.width),O=ln(t.paddingRight,e.bounds.width),D=ln(t.paddingBottom,e.bounds.width),Z=ln(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?In(r.left+J/3,r.top+re/3,s-J/3,i-re/3,Zr.TOP_LEFT):new $t(r.left+J/3,r.top+re/3),this.topRightBorderDoubleOuterBox=s>0||i>0?In(r.left+S,r.top+re/3,A-K/3,d-re/3,Zr.TOP_RIGHT):new $t(r.left+r.width-K/3,r.top+re/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?In(r.left+P,r.top+F,u-K/3,h-H/3,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-K/3,r.top+r.height-H/3),this.bottomLeftBorderDoubleOuterBox=g>0||m>0?In(r.left+J/3,r.top+L,g-J/3,m-H/3,Zr.BOTTOM_LEFT):new $t(r.left+J/3,r.top+r.height-H/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?In(r.left+J*2/3,r.top+re*2/3,s-J*2/3,i-re*2/3,Zr.TOP_LEFT):new $t(r.left+J*2/3,r.top+re*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?In(r.left+S,r.top+re*2/3,A-K*2/3,d-re*2/3,Zr.TOP_RIGHT):new $t(r.left+r.width-K*2/3,r.top+re*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?In(r.left+P,r.top+F,u-K*2/3,h-H*2/3,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-K*2/3,r.top+r.height-H*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||m>0?In(r.left+J*2/3,r.top+L,g-J*2/3,m-H*2/3,Zr.BOTTOM_LEFT):new $t(r.left+J*2/3,r.top+r.height-H*2/3),this.topLeftBorderStroke=s>0||i>0?In(r.left+J/2,r.top+re/2,s-J/2,i-re/2,Zr.TOP_LEFT):new $t(r.left+J/2,r.top+re/2),this.topRightBorderStroke=s>0||i>0?In(r.left+S,r.top+re/2,A-K/2,d-re/2,Zr.TOP_RIGHT):new $t(r.left+r.width-K/2,r.top+re/2),this.bottomRightBorderStroke=u>0||h>0?In(r.left+P,r.top+F,u-K/2,h-H/2,Zr.BOTTOM_RIGHT):new $t(r.left+r.width-K/2,r.top+r.height-H/2),this.bottomLeftBorderStroke=g>0||m>0?In(r.left+J/2,r.top+L,g-J/2,m-H/2,Zr.BOTTOM_LEFT):new $t(r.left+J/2,r.top+r.height-H/2),this.topLeftBorderBox=s>0||i>0?In(r.left,r.top,s,i,Zr.TOP_LEFT):new $t(r.left,r.top),this.topRightBorderBox=A>0||d>0?In(r.left+S,r.top,A,d,Zr.TOP_RIGHT):new $t(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?In(r.left+P,r.top+F,u,h,Zr.BOTTOM_RIGHT):new $t(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=g>0||m>0?In(r.left,r.top+L,g,m,Zr.BOTTOM_LEFT):new $t(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?In(r.left+J,r.top+re,Math.max(0,s-J),Math.max(0,i-re),Zr.TOP_LEFT):new $t(r.left+J,r.top+re),this.topRightPaddingBox=A>0||d>0?In(r.left+Math.min(S,r.width-K),r.top+re,S>r.width+K?0:Math.max(0,A-K),Math.max(0,d-re),Zr.TOP_RIGHT):new $t(r.left+r.width-K,r.top+re),this.bottomRightPaddingBox=u>0||h>0?In(r.left+Math.min(P,r.width-J),r.top+Math.min(F,r.height-H),Math.max(0,u-K),Math.max(0,h-H),Zr.BOTTOM_RIGHT):new $t(r.left+r.width-K,r.top+r.height-H),this.bottomLeftPaddingBox=g>0||m>0?In(r.left+J,r.top+Math.min(L,r.height-H),Math.max(0,g-J),Math.max(0,m-H),Zr.BOTTOM_LEFT):new $t(r.left+J,r.top+r.height-H),this.topLeftContentBox=s>0||i>0?In(r.left+J+Z,r.top+re+we,Math.max(0,s-(J+Z)),Math.max(0,i-(re+we)),Zr.TOP_LEFT):new $t(r.left+J+Z,r.top+re+we),this.topRightContentBox=A>0||d>0?In(r.left+Math.min(S,r.width+J+Z),r.top+re+we,S>r.width+J+Z?0:A-J+Z,d-(re+we),Zr.TOP_RIGHT):new $t(r.left+r.width-(K+O),r.top+re+we),this.bottomRightContentBox=u>0||h>0?In(r.left+Math.min(P,r.width-(J+Z)),r.top+Math.min(F,r.height+re+we),Math.max(0,u-(K+O)),h-(H+D),Zr.BOTTOM_RIGHT):new $t(r.left+r.width-(K+O),r.top+r.height-(H+D)),this.bottomLeftContentBox=g>0||m>0?In(r.left+J+Z,r.top+L,Math.max(0,g-(J+Z)),m-(H+D),Zr.BOTTOM_LEFT):new $t(r.left+J+Z,r.top+r.height-(H+D))}return n}(),Zr;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Zr||(Zr={}));var In=function(n,e,t,r,o){var s=4*((Math.sqrt(2)-1)/3),i=t*s,a=r*s,A=n+t,d=e+r;switch(o){case Zr.TOP_LEFT:return new Bf(new $t(n,d),new $t(n,d-a),new $t(A-i,e),new $t(A,e));case Zr.TOP_RIGHT:return new Bf(new $t(n,e),new $t(n+i,e),new $t(A,d-a),new $t(A,d));case Zr.BOTTOM_RIGHT:return new Bf(new $t(A,e),new $t(A,e+a),new $t(n+i,d),new $t(n,d));case Zr.BOTTOM_LEFT:default:return new Bf(new $t(A,d),new $t(A-i,d),new $t(n,e+a),new $t(n,e))}},Qp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},H8=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Up=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},j8=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),xf=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),R8=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),q8=function(n){return n.type===0},Lx=function(n){return n.type===1},K8=function(n){return n.type===2},Yy=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},$8=function(n,e,t,r,o){return n.map(function(s,i){switch(i){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+o);case 3:return s.add(e,t+o)}return s})},Px=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),kx=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new M8(this.container),this.container.styles.opacity<1&&this.effects.push(new R8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new j8(r,o,s))}if(this.container.styles.overflowX!==0){var i=Qp(this.curves),a=Up(this.curves);Yy(i,a)?this.effects.push(new xf(i,6)):(this.effects.push(new xf(i,2)),this.effects.push(new xf(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!Lx(A)});if(t||r.container.styles.position!==0||!r.parent){if(t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=Qp(r.curves),a=Up(r.curves);Yy(i,a)||o.unshift(new xf(a,6))}o.unshift.apply(o,s)}else o.unshift.apply(o,s);r=r.parent}return o.filter(function(A){return ao(A.target,e)})},n}(),pm=function(n,e,t,r){n.container.elements.forEach(function(o){var s=ao(o.flags,4),i=ao(o.flags,2),a=new kx(o,n);ao(o.styles.display,2048)&&r.push(a);var A=ao(o.flags,8)?[]:r;if(s||i){var d=s||o.styles.isPositioned()?t:e,c=new Px(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var u=o.styles.zIndex.order;if(u<0){var h=0;d.negativeZIndex.some(function(g,m){return u>g.element.container.styles.zIndex.order?(h=m,!1):h>0}),d.negativeZIndex.splice(h,0,c)}else if(u>0){var f=0;d.positiveZIndex.some(function(g,m){return u>=g.element.container.styles.zIndex.order?(f=m+1,!1):f>0}),d.positiveZIndex.splice(f,0,c)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else o.styles.isFloating()?d.nonPositionedFloats.push(c):d.nonPositionedInlineLevel.push(c);pm(a,c,s?c:t,A)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),pm(a,e,t,A);ao(o.flags,8)&&Ox(o,A)})},Ox=function(n,e){for(var t=n instanceof dm?n.start:1,r=n instanceof dm?n.reversed:!1,o=0;o<e.length;o++){var s=e[o];s.container instanceof yx&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Iu(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},V8=function(n){var e=new kx(n,null),t=new Px(e),r=[];return pm(e,t,t,r),Ox(e.container,r),t},Jy=function(n,e){switch(e){case 0:return Xs(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Xs(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Xs(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Xs(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},G8=function(n,e){switch(e){case 0:return Xs(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Xs(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Xs(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Xs(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},W8=function(n,e){switch(e){case 0:return Xs(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Xs(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Xs(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Xs(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},X8=function(n,e){switch(e){case 0:return zf(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return zf(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return zf(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return zf(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},zf=function(n,e){var t=[];return Vs(n)?t.push(n.subdivide(.5,!1)):t.push(n),Vs(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Xs=function(n,e,t,r){var o=[];return Vs(n)?o.push(n.subdivide(.5,!1)):o.push(n),Vs(t)?o.push(t.subdivide(.5,!0)):o.push(t),Vs(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),Vs(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},Dx=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Tp=function(n){var e=n.styles,t=n.bounds,r=ln(e.paddingLeft,t.width),o=ln(e.paddingRight,t.width),s=ln(e.paddingTop,t.width),i=ln(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+s+i))},Y8=function(n,e){return n===0?e.bounds:n===2?Tp(e):Dx(e)},J8=function(n,e){return n===0?e.bounds:n===2?Tp(e):Dx(e)},$v=function(n,e,t){var r=Y8(ud(n.styles.backgroundOrigin,e),n),o=J8(ud(n.styles.backgroundClip,e),n),s=Z8(ud(n.styles.backgroundSize,e),t,r),i=s[0],a=s[1],A=Jc(ud(n.styles.backgroundPosition,e),r.width-i,r.height-a),d=eD(ud(n.styles.backgroundRepeat,e),A,s,r,o),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return i=Math.max(1,i),a=Math.max(1,a),[d,c,u,i,a]},id=function(n){return Hr(n)&&n.value===Qd.AUTO},Cf=function(n){return typeof n=="number"},Z8=function(n,e,t){var r=e[0],o=e[1],s=e[2],i=n[0],a=n[1];if(!i)return[0,0];if(Cn(i)&&a&&Cn(a))return[ln(i,t.width),ln(a,t.height)];var A=Cf(s);if(Hr(i)&&(i.value===Qd.CONTAIN||i.value===Qd.COVER)){if(Cf(s)){var d=t.width/t.height;return d<s!=(i.value===Qd.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=Cf(r),u=Cf(o),h=c||u;if(id(i)&&(!a||id(a))){if(c&&u)return[r,o];if(!A&&!h)return[t.width,t.height];if(h&&A){var f=c?r:o*s,g=u?o:r/s;return[f,g]}var m=c?r:t.width,y=u?o:t.height;return[m,y]}if(A){var b=0,S=0;return Cn(i)?b=ln(i,t.width):Cn(a)&&(S=ln(a,t.height)),id(i)?b=S*s:(!a||id(a))&&(S=b/s),[b,S]}var F=null,P=null;if(Cn(i)?F=ln(i,t.width):a&&Cn(a)&&(P=ln(a,t.height)),F!==null&&(!a||id(a))&&(P=c&&u?F/r*o:t.height),P!==null&&id(i)&&(F=c&&u?P/o*r:t.width),F!==null&&P!==null)return[F,P];throw new Error("Unable to calculate background-size for element")},ud=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},eD=function(n,e,t,r,o){var s=e[0],i=e[1],a=t[0],A=t[1];switch(n){case 2:return[new $t(Math.round(r.left),Math.round(r.top+i)),new $t(Math.round(r.left+r.width),Math.round(r.top+i)),new $t(Math.round(r.left+r.width),Math.round(A+r.top+i)),new $t(Math.round(r.left),Math.round(A+r.top+i))];case 3:return[new $t(Math.round(r.left+s),Math.round(r.top)),new $t(Math.round(r.left+s+a),Math.round(r.top)),new $t(Math.round(r.left+s+a),Math.round(r.height+r.top)),new $t(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new $t(Math.round(r.left+s),Math.round(r.top+i)),new $t(Math.round(r.left+s+a),Math.round(r.top+i)),new $t(Math.round(r.left+s+a),Math.round(r.top+i+A)),new $t(Math.round(r.left+s),Math.round(r.top+i+A))];default:return[new $t(Math.round(o.left),Math.round(o.top)),new $t(Math.round(o.left+o.width),Math.round(o.top)),new $t(Math.round(o.left+o.width),Math.round(o.height+o.top)),new $t(Math.round(o.left),Math.round(o.height+o.top))]}},tD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Zy="Hidden Text",rD=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),o=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),o.src=tD,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Zy)),r.appendChild(s),r.appendChild(o);var a=o.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Zy)),r.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r="".concat(e," ").concat(t);return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),Nx=function(){function n(e,t){this.context=e,this.options=t}return n}(),nD=1e4,oD=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px")),o.fontMetrics=new rD(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized (".concat(r.width,"x").concat(r.height,") with scale ").concat(r.scale)),o}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(t){this.ctx.save(),K8(t)&&(this.ctx.globalAlpha=t.opacity),q8(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Lx(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Xo(this,void 0,void 0,function(){var r;return Do(this,function(o){switch(o.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Xo(this,void 0,void 0,function(){return Do(this,function(r){switch(r.label){case 0:if(ao(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,o){var s=this;if(r===0)navigator.userAgent.indexOf("Firefox")===-1?(this.ctx.textBaseline="ideographic",this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)):this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+o);else{var i=j1(t.text);i.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+o),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),o=lD(t.fontFamily).join(", "),s=CA(t.fontSize)?"".concat(t.fontSize.number).concat(t.fontSize.unit):"".concat(t.fontSize.number,"px");return[[t.fontStyle,r,t.fontWeight,s,o].join(" "),o,s]},e.prototype.renderTextNode=function(t,r){return Xo(this,void 0,void 0,function(){var o,s,i=this;return Do(this,function(a){return o=this.createFontStyle(r)[0],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=r.paintOrder,t.textBounds.forEach(function(A){s.forEach(function(d){switch(d){case 0:i.ctx.fillStyle=go(r.color),i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number);var c=r.textShadow;if(c.length&&A.text.trim().length&&(c.slice(0).reverse().forEach(function(h){i.ctx.shadowColor=go(h.color),i.ctx.shadowOffsetX=h.offsetX.number*i.options.scale,i.ctx.shadowOffsetY=h.offsetY.number*i.options.scale,i.ctx.shadowBlur=h.blur.number,i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number)}),i.ctx.shadowColor="",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0),r.textDecorationLine.length){i.ctx.fillStyle=go(r.textDecorationColor||r.color);var u=1;r.textDecorationLine.forEach(function(h){switch(h){case 1:i.ctx.fillRect(A.bounds.left,A.bounds.top+A.bounds.height-u,A.bounds.width,u);break;case 2:i.ctx.fillRect(A.bounds.left,A.bounds.top,A.bounds.width,u);break;case 3:i.ctx.fillRect(A.bounds.left,A.bounds.top+(A.bounds.height/2-u/2),A.bounds.width,u);break}})}break;case 1:r.webkitTextStrokeWidth&&A.text.trim().length&&(i.ctx.strokeStyle=go(r.webkitTextStrokeColor),i.ctx.lineWidth=r.webkitTextStrokeWidth,i.ctx.lineJoin=window.chrome?"miter":"round",i.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)),i.ctx.strokeStyle="",i.ctx.lineWidth=0,i.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,o){var s=o.naturalWidth||t.intrinsicWidth,i=o.naturalHeight||t.intrinsicHeight;if(o&&s>0&&i>0){var a=Tp(t),A=Up(r);this.path(A),this.ctx.save(),this.ctx.clip();var d=0,c=0,u=s,h=i,f=a.left,g=a.top,m=a.width,y=a.height,b=t.styles.objectFit,S=m/y,F=u/h;if(b===2)F>S?(y=m/F,g+=(a.height-y)/2):(m=y*F,f+=(a.width-m)/2);else if(b===4)F>S?(u=h*S,d+=(s-u)/2):(h=u/S,c+=(i-h)/2);else if(b===8)u>m?(d+=(u-m)/2,u=m):(f+=(m-u)/2,m=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h);else if(b===16){var P=F>S?m:y*F,L=u>m?u:m;P<L?F>S?(y=m/F,g+=(a.height-y)/2):(m=y*F,f+=(a.width-m)/2):(u>m?(d+=(u-m)/2,u=m):(f+=(m-u)/2,m=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h))}this.ctx.drawImage(o,d,c,u,h,f,g,m,y),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Xo(this,void 0,void 0,function(){var r,o,s,i,a,A,S,S,d,c,u,h,P,f,g,L,m,y,b,S,F,P,L;return Do(this,function(re){switch(re.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,o=t.curves,s=r.styles,i=0,a=r.textNodes,re.label=1;case 1:return i<a.length?(A=a[i],[4,this.renderTextNode(A,s)]):[3,4];case 2:re.sent(),re.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof vx))return[3,8];re.label=5;case 5:return re.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return S=re.sent(),this.renderReplacedElement(r,o,S),[3,8];case 7:return re.sent(),this.context.logger.error("Error loading image ".concat(r.src)),[3,8];case 8:if(r instanceof mx&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof wx))return[3,12];re.label=9;case 9:return re.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return S=re.sent(),this.renderReplacedElement(r,o,S),[3,12];case 11:return re.sent(),this.context.logger.error("Error loading svg ".concat(r.svg.substring(0,255))),[3,12];case 12:return r instanceof Bx&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:c=re.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),re.label=14;case 14:if(r instanceof R1&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Sp?r.checked&&(this.ctx.save(),this.path([new $t(r.bounds.left+u*.39363,r.bounds.top+u*.79),new $t(r.bounds.left+u*.16,r.bounds.top+u*.5549),new $t(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new $t(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new $t(r.bounds.left+u*.72983,r.bounds.top+u*.23),new $t(r.bounds.left+u*.84,r.bounds.top+u*.34085),new $t(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=go(My),this.ctx.fill(),this.ctx.restore()):r.type===Ep&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=go(My),this.ctx.fill(),this.ctx.restore())),sD(r)&&r.value.length){switch(h=this.createFontStyle(s),P=h[0],f=h[1],g=this.fontMetrics.getMetrics(P,f).baseline,this.ctx.font=P,this.ctx.fillStyle=go(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=aD(r.styles.textAlign),L=Tp(r),m=0,r.styles.textAlign){case 1:m+=L.width/2;break;case 2:m+=L.width;break}y=L.add(m,0,0,-L.height/2+1),this.ctx.save(),this.path([new $t(L.left,L.top),new $t(L.left+L.width,L.top),new $t(L.left+L.width,L.top+L.height),new $t(L.left,L.top+L.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new cu(r.value,y),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ao(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(b=r.styles.listStyleImage,b.type!==0)return[3,18];S=void 0,F=b.url,re.label=15;case 15:return re.trys.push([15,17,,18]),[4,this.context.cache.match(F)];case 16:return S=re.sent(),this.ctx.drawImage(S,r.bounds.left-(S.width+10),r.bounds.top),[3,18];case 17:return re.sent(),this.context.logger.error("Error loading list-style-image ".concat(F)),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(P=this.createFontStyle(s)[0],this.ctx.font=P,this.ctx.fillStyle=go(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",L=new Ea(r.bounds.left,r.bounds.top+ln(r.styles.paddingTop,r.bounds.width),r.bounds.width,By(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new cu(t.listValue,L),s.letterSpacing,By(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),re.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Xo(this,void 0,void 0,function(){var r,o,b,s,i,b,a,A,b,d,c,b,u,h,b,f,g,b,m,y,b;return Do(this,function(S){switch(S.label){case 0:if(ao(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:S.sent(),r=0,o=t.negativeZIndex,S.label=2;case 2:return r<o.length?(b=o[r],[4,this.renderStack(b)]):[3,5];case 3:S.sent(),S.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:S.sent(),s=0,i=t.nonInlineLevel,S.label=7;case 7:return s<i.length?(b=i[s],[4,this.renderNode(b)]):[3,10];case 8:S.sent(),S.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,S.label=11;case 11:return a<A.length?(b=A[a],[4,this.renderStack(b)]):[3,14];case 12:S.sent(),S.label=13;case 13:return a++,[3,11];case 14:d=0,c=t.nonPositionedInlineLevel,S.label=15;case 15:return d<c.length?(b=c[d],[4,this.renderStack(b)]):[3,18];case 16:S.sent(),S.label=17;case 17:return d++,[3,15];case 18:u=0,h=t.inlineLevel,S.label=19;case 19:return u<h.length?(b=h[u],[4,this.renderNode(b)]):[3,22];case 20:S.sent(),S.label=21;case 21:return u++,[3,19];case 22:f=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,S.label=23;case 23:return f<g.length?(b=g[f],[4,this.renderStack(b)]):[3,26];case 24:S.sent(),S.label=25;case 25:return f++,[3,23];case 26:m=0,y=t.positiveZIndex,S.label=27;case 27:return m<y.length?(b=y[m],[4,this.renderStack(b)]):[3,30];case 28:S.sent(),S.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(o,s){var i=Vs(o)?o.start:o;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Vs(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(t,r,o,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},e.prototype.resizeImage=function(t,r,o){var s,i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,o);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,o),a},e.prototype.renderBackgroundImage=function(t){return Xo(this,void 0,void 0,function(){var r,o,s,i,a,A;return Do(this,function(d){switch(d.label){case 0:r=t.styles.backgroundImage.length-1,o=function(c){var u,h,f,g,m,D,$,q,de,ne,we,y,D,$,q,de,ne,b,S,F,P,L,re,K,H,J,we,O,D,Z,ie,de,ne,fe,$,q,se,Ae,x,E,I,U,M,j;return Do(this,function(V){switch(V.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=V.sent(),[3,4];case 3:return V.sent(),s.context.logger.error("Error loading background-image ".concat(h)),[3,4];case 4:return u&&(f=isNaN(u.width)||u.width===0?1:u.width,g=isNaN(u.height)||u.height===0?1:u.height,m=$v(t,r,[f,g,f/g]),D=m[0],$=m[1],q=m[2],de=m[3],ne=m[4],we=s.ctx.createPattern(s.resizeImage(u,de,ne),"repeat"),s.renderRepeat(D,we,$,q)),[3,6];case 5:HP(c)?(y=$v(t,r,[null,null,null]),D=y[0],$=y[1],q=y[2],de=y[3],ne=y[4],b=kP(c.angle,de,ne),S=b[0],F=b[1],P=b[2],L=b[3],re=b[4],K=document.createElement("canvas"),K.width=de,K.height=ne,H=K.getContext("2d"),J=H.createLinearGradient(F,L,P,re),by(c.stops,S).forEach(function(X){return J.addColorStop(X.stop,go(X.color))}),H.fillStyle=J,H.fillRect(0,0,de,ne),de>0&&ne>0&&(we=s.ctx.createPattern(K,"repeat"),s.renderRepeat(D,we,$,q))):jP(c)&&(O=$v(t,r,[null,null,null]),D=O[0],Z=O[1],ie=O[2],de=O[3],ne=O[4],fe=c.position.length===0?[O1]:c.position,$=ln(fe[0],de),q=ln(fe[fe.length-1],ne),se=OP(c,$,q,de,ne),Ae=se[0],x=se[1],Ae>0&&x>0&&(E=s.ctx.createRadialGradient(Z+$,ie+q,0,Z+$,ie+q,Ae),by(c.stops,Ae*2).forEach(function(X){return E.addColorStop(X.stop,go(X.color))}),s.path(D),s.ctx.fillStyle=E,Ae!==x?(I=t.bounds.left+.5*t.bounds.width,U=t.bounds.top+.5*t.bounds.height,M=x/Ae,j=1/M,s.ctx.save(),s.ctx.translate(I,U),s.ctx.transform(1,0,0,M,0,0),s.ctx.translate(-I,-U),s.ctx.fillRect(Z,j*(ie-U)+U,de,ne*j),s.ctx.restore()):s.ctx.fill())),V.label=6;case 6:return r--,[2]}})},s=this,i=0,a=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return i<a.length?(A=a[i],[5,o(A)]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,o){return Xo(this,void 0,void 0,function(){return Do(this,function(s){return this.path(Jy(o,r)),this.ctx.fillStyle=go(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,o,s){return Xo(this,void 0,void 0,function(){var i,a;return Do(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,o,s)]:[3,2];case 1:return A.sent(),[2];case 2:return i=G8(s,o),this.path(i),this.ctx.fillStyle=go(t),this.ctx.fill(),a=W8(s,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Xo(this,void 0,void 0,function(){var r,o,s,i,a,A,d,c,u=this;return Do(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,o=!fA(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=iD(ud(r.backgroundClip,0),t.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),fA(r.backgroundColor)||(this.ctx.fillStyle=go(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){u.ctx.save();var g=Qp(t.curves),m=f.inset?0:nD,y=$8(g,-m+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(u.path(g),u.ctx.clip(),u.mask(y)):(u.mask(g),u.ctx.clip(),u.path(y)),u.ctx.shadowOffsetX=f.offsetX.number+m,u.ctx.shadowOffsetY=f.offsetY.number,u.ctx.shadowColor=go(f.color),u.ctx.shadowBlur=f.blur.number,u.ctx.fillStyle=f.inset?go(f.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,A=0,d=s,h.label=3;case 3:return A<d.length?(c=d[A],c.style!==0&&!fA(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,o,s,i){return Xo(this,void 0,void 0,function(){var a,A,d,c,u,h,f,g,m,y,b,S,F,P,L,re,L,re;return Do(this,function(K){return this.ctx.save(),a=X8(s,o),A=Jy(s,o),i===2&&(this.path(A),this.ctx.clip()),Vs(A[0])?(d=A[0].start.x,c=A[0].start.y):(d=A[0].x,c=A[0].y),Vs(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),o===0||o===2?f=Math.abs(d-u):f=Math.abs(c-h),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(A.slice(0,2)),g=r<3?r*3:r*2,m=r<3?r*2:r,i===3&&(g=r,m=r),y=!0,f<=g*2?y=!1:f<=g*2+m?(b=f/(2*g+m),g*=b,m*=b):(S=Math.floor((f+m)/(g+m)),F=(f-S*g)/(S-1),P=(f-(S+1)*g)/S,m=P<=0||Math.abs(m-F)<Math.abs(m-P)?F:P),y&&(i===3?this.ctx.setLineDash([0,g+m]):this.ctx.setLineDash([g,m])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=go(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Vs(A[0])&&(L=A[3],re=A[0],this.ctx.beginPath(),this.formatPath([new $t(L.end.x,L.end.y),new $t(re.start.x,re.start.y)]),this.ctx.stroke()),Vs(A[1])&&(L=A[1],re=A[2],this.ctx.beginPath(),this.formatPath([new $t(L.end.x,L.end.y),new $t(re.start.x,re.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Xo(this,void 0,void 0,function(){var r;return Do(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=go(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=V8(t),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Nx),sD=function(n){return n instanceof _x||n instanceof bx?!0:n instanceof R1&&n.type!==Ep&&n.type!==Sp},iD=function(n,e){switch(n){case 0:return Qp(e);case 2:return H8(e);case 1:default:return Up(e)}},aD=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},AD=["-apple-system","system-ui"],lD=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return AD.indexOf(e)===-1}):n},dD=function(n){bi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px"),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (".concat(r.width,"x").concat(r.height," at ").concat(r.x,",").concat(r.y,") with scale ").concat(r.scale)),o}return e.prototype.render=function(t){return Xo(this,void 0,void 0,function(){var r,o;return Do(this,function(s){switch(s.label){case 0:return r=lm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,cD(r)];case 1:return o=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=go(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Nx),cD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},uD=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,nf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,nf([this.id,"".concat(this.getTime(),"ms")],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,nf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,nf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.instances={},n}(),hD=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#".concat(n.instanceCount++),this.logger=new uD({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new T8(this,e)}return n.instanceCount=1,n}(),fD=function(n,e){return e===void 0&&(e={}),pD(n,e)};typeof window<"u"&&Tx.setContext(window);var pD=function(n,e){return Xo(void 0,void 0,void 0,function(){var t,r,o,s,i,a,A,d,c,u,h,f,g,m,y,b,S,F,P,L,K,re,K,H,J,we,O,D,Z,ie,de,ne,fe,$,q,se,Ae,x,E,I;return Do(this,function(U){switch(U.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(H=e.allowTaint)!==null&&H!==void 0?H:!1,imageTimeout:(J=e.imageTimeout)!==null&&J!==void 0?J:15e3,proxy:e.proxy,useCORS:(we=e.useCORS)!==null&&we!==void 0?we:!1},s=$0({logging:(O=e.logging)!==null&&O!==void 0?O:!0,cache:e.cache},o),i={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:r.innerWidth,windowHeight:(Z=e.windowHeight)!==null&&Z!==void 0?Z:r.innerHeight,scrollX:(ie=e.scrollX)!==null&&ie!==void 0?ie:r.pageXOffset,scrollY:(de=e.scrollY)!==null&&de!==void 0?de:r.pageYOffset},a=new Ea(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new hD(s,a),d=(ne=e.foreignObjectRendering)!==null&&ne!==void 0?ne:!1,c={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},A.logger.debug("Starting document clone with size ".concat(a.width,"x").concat(a.height," scrolled to ").concat(-a.left,",").concat(-a.top)),u=new Wy(A,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=U.sent(),g=q1(h)||p8(h)?YT(h.ownerDocument):dg(A,h),m=g.width,y=g.height,b=g.left,S=g.top,F=gD(A,h,e.backgroundColor),P={canvas:e.canvas,backgroundColor:F,scale:(q=($=e.scale)!==null&&$!==void 0?$:r.devicePixelRatio)!==null&&q!==void 0?q:1,x:((se=e.x)!==null&&se!==void 0?se:0)+b,y:((Ae=e.y)!==null&&Ae!==void 0?Ae:0)+S,width:(x=e.width)!==null&&x!==void 0?x:Math.ceil(m),height:(E=e.height)!==null&&E!==void 0?E:Math.ceil(y)},d?(A.logger.debug("Document cloned, using foreign object rendering"),K=new dD(A,P),[4,K.render(h)]):[3,3];case 2:return L=U.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at ".concat(b,",").concat(S," with size ").concat(m,"x").concat(y," using computed rendering")),A.logger.debug("Starting DOM parsing"),re=zx(A,h),F===re.styles.backgroundColor&&(re.styles.backgroundColor=ji.TRANSPARENT),A.logger.debug("Starting renderer for element at ".concat(P.x,",").concat(P.y," with size ").concat(P.width,"x").concat(P.height)),K=new oD(A,P),[4,K.render(re)];case 4:L=U.sent(),U.label=5;case 5:return(!((I=e.removeContainer)!==null&&I!==void 0)||I)&&(Wy.destroy(f)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,L]}})})},gD=function(n,e,t){var r=e.ownerDocument,o=r.documentElement?Id(n,getComputedStyle(r.documentElement).backgroundColor):ji.TRANSPARENT,s=r.body?Id(n,getComputedStyle(r.body).backgroundColor):ji.TRANSPARENT,i=typeof t=="string"?Id(n,t):t===null?ji.TRANSPARENT:4294967295;return e===r.documentElement?fA(o)?fA(s)?i:s:o:i};function dn(n){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(n)}var Mo=Uint8Array,Ts=Uint16Array,K1=Int32Array,xg=new Mo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zg=new Mo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gm=new Mo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mx=function(n,e){for(var t=new Ts(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new K1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)o[s]=s-t[r]<<5|r;return{b:t,r:o}},Hx=Mx(xg,2),jx=Hx.b,vm=Hx.r;jx[28]=258,vm[258]=28;var Rx=Mx(zg,0),vD=Rx.b,eb=Rx.r,mm=new Ts(32768);for(var Sn=0;Sn<32768;++Sn){var Ya=(Sn&43690)>>1|(Sn&21845)<<1;Ya=(Ya&52428)>>2|(Ya&13107)<<2,Ya=(Ya&61680)>>4|(Ya&3855)<<4,mm[Sn]=((Ya&65280)>>8|(Ya&255)<<8)>>1}var Ri=function(n,e,t){for(var r=n.length,o=0,s=new Ts(e);o<r;++o)n[o]&&++s[n[o]-1];var i=new Ts(e);for(o=1;o<e;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(t){a=new Ts(1<<e);var A=15-e;for(o=0;o<r;++o)if(n[o])for(var d=o<<4|n[o],c=e-n[o],u=i[n[o]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[mm[u]>>A]=d}else for(a=new Ts(r),o=0;o<r;++o)n[o]&&(a[o]=mm[i[n[o]-1]++]>>15-n[o]);return a},_A=new Mo(288);for(var Sn=0;Sn<144;++Sn)_A[Sn]=8;for(var Sn=144;Sn<256;++Sn)_A[Sn]=9;for(var Sn=256;Sn<280;++Sn)_A[Sn]=7;for(var Sn=280;Sn<288;++Sn)_A[Sn]=8;var Qu=new Mo(32);for(var Sn=0;Sn<32;++Sn)Qu[Sn]=5;var mD=Ri(_A,9,0),wD=Ri(_A,9,1),yD=Ri(Qu,5,0),bD=Ri(Qu,5,1),Vv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ii=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Gv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},$1=function(n){return(n+7)/8|0},qx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Mo(n.subarray(e,t))},_D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ci=function(n,e,t){var r=new Error(e||_D[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,ci),!t)throw r;return r},BD=function(n,e,t,r){var o=n.length,s=0;if(!o||e.f&&!e.l)return t||new Mo(0);var i=!t,a=i||e.i!=2,A=e.i;i&&(t=new Mo(o*3));var d=function(he){var xe=t.length;if(he>xe){var Be=new Mo(Math.max(xe*2,he));Be.set(t),t=Be}},c=e.f||0,u=e.p||0,h=e.b||0,f=e.l,g=e.d,m=e.m,y=e.n,b=o*8;do{if(!f){c=ii(n,u,1);var S=ii(n,u+1,3);if(u+=3,S)if(S==1)f=wD,g=bD,m=9,y=5;else if(S==2){var re=ii(n,u,31)+257,K=ii(n,u+10,15)+4,H=re+ii(n,u+5,31)+1;u+=14;for(var J=new Mo(H),we=new Mo(19),O=0;O<K;++O)we[gm[O]]=ii(n,u+O*3,7);u+=K*3;for(var D=Vv(we),Z=(1<<D)-1,ie=Ri(we,D,1),O=0;O<H;){var de=ie[ii(n,u,Z)];u+=de&15;var F=de>>4;if(F<16)J[O++]=F;else{var ne=0,fe=0;for(F==16?(fe=3+ii(n,u,3),u+=2,ne=J[O-1]):F==17?(fe=3+ii(n,u,7),u+=3):F==18&&(fe=11+ii(n,u,127),u+=7);fe--;)J[O++]=ne}}var $=J.subarray(0,re),q=J.subarray(re);m=Vv($),y=Vv(q),f=Ri($,m,1),g=Ri(q,y,1)}else ci(1);else{var F=$1(u)+4,P=n[F-4]|n[F-3]<<8,L=F+P;if(L>o){A&&ci(0);break}a&&d(h+P),t.set(n.subarray(F,L),h),e.b=h+=P,e.p=u=L*8,e.f=c;continue}if(u>b){A&&ci(0);break}}a&&d(h+131072);for(var se=(1<<m)-1,Ae=(1<<y)-1,x=u;;x=u){var ne=f[Gv(n,u)&se],E=ne>>4;if(u+=ne&15,u>b){A&&ci(0);break}if(ne||ci(2),E<256)t[h++]=E;else if(E==256){x=u,f=null;break}else{var I=E-254;if(E>264){var O=E-257,U=xg[O];I=ii(n,u,(1<<U)-1)+jx[O],u+=U}var M=g[Gv(n,u)&Ae],j=M>>4;M||ci(3),u+=M&15;var q=vD[j];if(j>3){var U=zg[j];q+=Gv(n,u)&(1<<U)-1,u+=U}if(u>b){A&&ci(0);break}a&&d(h+131072);var V=h+I;if(h<q){var X=s-q,R=Math.min(q,V);for(X+h<0&&ci(3);h<R;++h)t[h]=r[X+h]}for(;h<V;++h)t[h]=t[h-q]}}e.l=f,e.p=x,e.b=h,e.f=c,f&&(c=1,e.m=m,e.d=g,e.n=y)}while(!c);return h!=t.length&&i?qx(t,0,h):t.subarray(0,h)},da=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Hc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Wv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,s=t.slice();if(!o)return{t:$x,l:0};if(o==1){var i=new Mo(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(L,re){return L.f-re.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],d=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=o-1;)a=t[t[d].f<t[u].f?d++:u++],A=t[d!=c&&t[d].f<t[u].f?d++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var h=s[0].s,r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var f=new Ts(h+1),g=wm(t[c-1],f,0);if(g>e){var r=0,m=0,y=g-e,b=1<<y;for(s.sort(function(re,K){return f[K.s]-f[re.s]||re.f-K.f});r<o;++r){var S=s[r].s;if(f[S]>e)m+=b-(1<<g-f[S]),f[S]=e;else break}for(m>>=y;m>0;){var F=s[r].s;f[F]<e?m-=1<<e-f[F]++-1:++r}for(;r>=0&&m;--r){var P=s[r].s;f[P]==e&&(--f[P],++m)}g=e}return{t:new Mo(f),l:g}},wm=function(n,e,t){return n.s==-1?Math.max(wm(n.l,e,t+1),wm(n.r,e,t+1)):e[n.s]=t},tb=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ts(++e),r=0,o=n[0],s=1,i=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==o&&a!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=n[a]}return{c:t.subarray(0,r),n:e}},jc=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Kx=function(n,e,t){var r=t.length,o=$1(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var s=0;s<r;++s)n[o+s+4]=t[s];return(o+4+r)*8},rb=function(n,e,t,r,o,s,i,a,A,d,c){da(e,c++,t),++o[256];for(var u=Wv(o,15),h=u.t,f=u.l,g=Wv(s,15),m=g.t,y=g.l,b=tb(h),S=b.c,F=b.n,P=tb(m),L=P.c,re=P.n,K=new Ts(19),H=0;H<S.length;++H)++K[S[H]&31];for(var H=0;H<L.length;++H)++K[L[H]&31];for(var J=Wv(K,7),we=J.t,O=J.l,D=19;D>4&&!we[gm[D-1]];--D);var Z=d+5<<3,ie=jc(o,_A)+jc(s,Qu)+i,de=jc(o,h)+jc(s,m)+i+14+3*D+jc(K,we)+2*K[16]+3*K[17]+7*K[18];if(A>=0&&Z<=ie&&Z<=de)return Kx(e,c,n.subarray(A,A+d));var ne,fe,$,q;if(da(e,c,1+(de<ie)),c+=2,de<ie){ne=Ri(h,f,0),fe=h,$=Ri(m,y,0),q=m;var se=Ri(we,O,0);da(e,c,F-257),da(e,c+5,re-1),da(e,c+10,D-4),c+=14;for(var H=0;H<D;++H)da(e,c+3*H,we[gm[H]]);c+=3*D;for(var Ae=[S,L],x=0;x<2;++x)for(var E=Ae[x],H=0;H<E.length;++H){var I=E[H]&31;da(e,c,se[I]),c+=we[I],I>15&&(da(e,c,E[H]>>5&127),c+=E[H]>>12)}}else ne=mD,fe=_A,$=yD,q=Qu;for(var H=0;H<a;++H){var U=r[H];if(U>255){var I=U>>18&31;Hc(e,c,ne[I+257]),c+=fe[I+257],I>7&&(da(e,c,U>>23&31),c+=xg[I]);var M=U&31;Hc(e,c,$[M]),c+=q[M],M>3&&(Hc(e,c,U>>5&8191),c+=zg[M])}else Hc(e,c,ne[U]),c+=fe[U]}return Hc(e,c,ne[256]),c+fe[256]},xD=new K1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$x=new Mo(0),zD=function(n,e,t,r,o,s){var i=s.z||n.length,a=new Mo(r+i+5*(1+Math.ceil(i/7e3))+o),A=a.subarray(r,a.length-o),d=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=xD[e-1],h=u>>13,f=u&8191,g=(1<<t)-1,m=s.p||new Ts(32768),y=s.h||new Ts(g+1),b=Math.ceil(t/3),S=2*b,F=function(Le){return(n[Le]^n[Le+1]<<b^n[Le+2]<<S)&g},P=new K1(25e3),L=new Ts(288),re=new Ts(32),K=0,H=0,J=s.i||0,we=0,O=s.w||0,D=0;J+2<i;++J){var Z=F(J),ie=J&32767,de=y[Z];if(m[ie]=de,y[Z]=ie,O<=J){var ne=i-J;if((K>7e3||we>24576)&&(ne>423||!d)){c=rb(n,A,0,P,L,re,H,we,D,J-D,c),we=K=H=0,D=J;for(var fe=0;fe<286;++fe)L[fe]=0;for(var fe=0;fe<30;++fe)re[fe]=0}var $=2,q=0,se=f,Ae=ie-de&32767;if(ne>2&&Z==F(J-Ae))for(var x=Math.min(h,ne)-1,E=Math.min(32767,J),I=Math.min(258,ne);Ae<=E&&--se&&ie!=de;){if(n[J+$]==n[J+$-Ae]){for(var U=0;U<I&&n[J+U]==n[J+U-Ae];++U);if(U>$){if($=U,q=Ae,U>x)break;for(var M=Math.min(Ae,U-2),j=0,fe=0;fe<M;++fe){var V=J-Ae+fe&32767,X=m[V],R=V-X&32767;R>j&&(j=R,de=V)}}}ie=de,de=m[ie],Ae+=ie-de&32767}if(q){P[we++]=268435456|vm[$]<<18|eb[q];var he=vm[$]&31,xe=eb[q]&31;H+=xg[he]+zg[xe],++L[257+he],++re[xe],O=J+$,++K}else P[we++]=n[J],++L[n[J]]}}for(J=Math.max(J,O);J<i;++J)P[we++]=n[J],++L[n[J]];c=rb(n,A,d,P,L,re,H,we,D,J-D,c),d||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=y,s.p=m,s.i=J,s.w=O)}else{for(var J=s.w||0;J<i+d;J+=65535){var Be=J+65535;Be>=i&&(A[c/8|0]=d,Be=i),c=Kx(A,c+1,n.subarray(J,Be))}s.i=i}return qx(a,0,r+$1(c)+o)},Vx=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,s=t.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=t[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},CD=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Mo(s.length+n.length);i.set(s),i.set(n,s.length),n=i,o.w=s.length}return zD(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},Gx=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},SD=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=Vx();o.p(e.dictionary),Gx(n,2,o.d())}},ED=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ci(6,"invalid zlib data"),(n[1]>>5&1)==1&&ci(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ym(n,e){e||(e={});var t=Vx();t.p(n);var r=CD(n,e,e.dictionary?6:2,4);return SD(r,e),Gx(r,r.length-4,t.d()),r}function FD(n,e){return BD(n.subarray(ED(n),-4),{i:2},e,e)}var ID=typeof TextDecoder<"u"&&new TextDecoder,QD=0;try{ID.decode($x,{stream:!0}),QD=1}catch{}var mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Xv(){mr.console&&typeof mr.console.log=="function"&&mr.console.log.apply(mr.console,arguments)}var wn={log:Xv,warn:function(n){mr.console&&(typeof mr.console.warn=="function"?mr.console.warn.apply(mr.console,arguments):Xv.call(null,arguments))},error:function(n){mr.console&&(typeof mr.console.error=="function"?mr.console.error.apply(mr.console,arguments):Xv(n))}};function Yv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){jA(r.response,e,t)},r.onerror=function(){wn.error("could not download file")},r.send()}function nb(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Sf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var hu,bm,jA=mr.saveAs||((typeof window>"u"?"undefined":dn(window))!=="object"||window!==mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=mr.URL||mr.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?nb(o.href)?Yv(n,e,t):Sf(o,o.target="_blank"):Sf(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Sf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(nb(n))Yv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Sf(r)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:dn(s)!=="object"&&(wn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Yv(n,e,t);var o=n.type==="application/octet-stream",s=/constructor/i.test(mr.HTMLElement)||mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&s)&&(typeof FileReader>"u"?"undefined":dn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=i?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var A=mr.URL||mr.webkitURL,d=A.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){A.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Wx(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,s=t[r].process,i=o.exec(n);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),A=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),"#"+a+A+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Jv(n,e){var t=n[0],r=n[1],o=n[2],s=n[3];t=To(t,r,o,s,e[0],7,-680876936),s=To(s,t,r,o,e[1],12,-389564586),o=To(o,s,t,r,e[2],17,606105819),r=To(r,o,s,t,e[3],22,-1044525330),t=To(t,r,o,s,e[4],7,-176418897),s=To(s,t,r,o,e[5],12,1200080426),o=To(o,s,t,r,e[6],17,-1473231341),r=To(r,o,s,t,e[7],22,-45705983),t=To(t,r,o,s,e[8],7,1770035416),s=To(s,t,r,o,e[9],12,-1958414417),o=To(o,s,t,r,e[10],17,-42063),r=To(r,o,s,t,e[11],22,-1990404162),t=To(t,r,o,s,e[12],7,1804603682),s=To(s,t,r,o,e[13],12,-40341101),o=To(o,s,t,r,e[14],17,-1502002290),t=Lo(t,r=To(r,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=Lo(s,t,r,o,e[6],9,-1069501632),o=Lo(o,s,t,r,e[11],14,643717713),r=Lo(r,o,s,t,e[0],20,-373897302),t=Lo(t,r,o,s,e[5],5,-701558691),s=Lo(s,t,r,o,e[10],9,38016083),o=Lo(o,s,t,r,e[15],14,-660478335),r=Lo(r,o,s,t,e[4],20,-405537848),t=Lo(t,r,o,s,e[9],5,568446438),s=Lo(s,t,r,o,e[14],9,-1019803690),o=Lo(o,s,t,r,e[3],14,-187363961),r=Lo(r,o,s,t,e[8],20,1163531501),t=Lo(t,r,o,s,e[13],5,-1444681467),s=Lo(s,t,r,o,e[2],9,-51403784),o=Lo(o,s,t,r,e[7],14,1735328473),t=Po(t,r=Lo(r,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=Po(s,t,r,o,e[8],11,-2022574463),o=Po(o,s,t,r,e[11],16,1839030562),r=Po(r,o,s,t,e[14],23,-35309556),t=Po(t,r,o,s,e[1],4,-1530992060),s=Po(s,t,r,o,e[4],11,1272893353),o=Po(o,s,t,r,e[7],16,-155497632),r=Po(r,o,s,t,e[10],23,-1094730640),t=Po(t,r,o,s,e[13],4,681279174),s=Po(s,t,r,o,e[0],11,-358537222),o=Po(o,s,t,r,e[3],16,-722521979),r=Po(r,o,s,t,e[6],23,76029189),t=Po(t,r,o,s,e[9],4,-640364487),s=Po(s,t,r,o,e[12],11,-421815835),o=Po(o,s,t,r,e[15],16,530742520),t=ko(t,r=Po(r,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=ko(s,t,r,o,e[7],10,1126891415),o=ko(o,s,t,r,e[14],15,-1416354905),r=ko(r,o,s,t,e[5],21,-57434055),t=ko(t,r,o,s,e[12],6,1700485571),s=ko(s,t,r,o,e[3],10,-1894986606),o=ko(o,s,t,r,e[10],15,-1051523),r=ko(r,o,s,t,e[1],21,-2054922799),t=ko(t,r,o,s,e[8],6,1873313359),s=ko(s,t,r,o,e[15],10,-30611744),o=ko(o,s,t,r,e[6],15,-1560198380),r=ko(r,o,s,t,e[13],21,1309151649),t=ko(t,r,o,s,e[4],6,-145523070),s=ko(s,t,r,o,e[11],10,-1120210379),o=ko(o,s,t,r,e[2],15,718787259),r=ko(r,o,s,t,e[9],21,-343485551),n[0]=cA(t,n[0]),n[1]=cA(r,n[1]),n[2]=cA(o,n[2]),n[3]=cA(s,n[3])}function Cg(n,e,t,r,o,s){return e=cA(cA(e,n),cA(r,s)),cA(e<<o|e>>>32-o,t)}function To(n,e,t,r,o,s,i){return Cg(e&t|~e&r,n,e,o,s,i)}function Lo(n,e,t,r,o,s,i){return Cg(e&r|t&~r,n,e,o,s,i)}function Po(n,e,t,r,o,s,i){return Cg(e^t^r,n,e,o,s,i)}function ko(n,e,t,r,o,s,i){return Cg(t^(e|~r),n,e,o,s,i)}function Xx(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Jv(r,UD(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Jv(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,Jv(r,o),r}function UD(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}hu=mr.atob.bind(mr),bm=mr.btoa.bind(mr);var ob="0123456789abcdef".split("");function TD(n){for(var e="",t=0;t<4;t++)e+=ob[n>>8*t+4&15]+ob[n>>8*t&15];return e}function LD(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function _m(n){return Xx(n).map(LD).join("")}var PD=function(n){for(var e=0;e<n.length;e++)n[e]=TD(n[e]);return n.join("")}(Xx("hello"))!="5d41402abc4b2a76b9719d911017c592";function cA(n,e){if(PD){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Bm(n,e){var t,r,o,s;if(n!==t){for(var i=(o=n,s=1+(256/n.length>>0),new Array(s+1).join(o)),a=[],A=0;A<256;A++)a[A]=A;var d=0;for(A=0;A<256;A++){var c=a[A];d=(d+c+i.charCodeAt(A))%256,a[A]=a[d],a[d]=c}t=n,r=a}else a=r;var u=e.length,h=0,f=0,g="";for(A=0;A<u;A++)f=(f+(c=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=c,i=a[(a[h]+a[f])%256],g+=String.fromCharCode(e.charCodeAt(A)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sb={print:4,modify:8,copy:16,"annot-forms":32};function hd(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(a){if(sb.perm!==void 0)throw new Error("Invalid permission: "+a);o+=sb[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^o)),this.encryptionKey=_m(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Bm(this.encryptionKey,this.padding)}function fd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function ib(n){if(dn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!o],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var i=e[t][s];try{i[0].apply(n,r)}catch(a){mr.console&&wn.error("jsPDF PubSub Error",a.message,a)}i[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Lp(n){if(!(this instanceof Lp))return new Lp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Yx(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function WA(n,e,t,r,o){if(!(this instanceof WA))return new WA(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Yx.call(this,r,o)}function yd(n,e,t,r,o){if(!(this instanceof yd))return new yd(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Yx.call(this,r,o)}function pr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],i=[],a=1,A=16,d="S",c=null;dn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(A=n.floatPrecision),d=n.defaultPathOperation||"S"),i=n.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",t=(""+(t||"P")).toLowerCase();var u=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=ib;var g="1.3",m=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(_){g=_};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var b=f.__private__.getPageFormat=function(_){return y[_]};o=o||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},F=S.COMPAT;function P(){this.saveGraphicsState(),k(new et(De,0,0,-De,0,ka()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),d="n",F=S.ADVANCED}function L(){this.restoreGraphicsState(),d="S",F=S.COMPAT}var re=f.__private__.combineFontStyleAndFontWeight=function(_,W){if(_=="bold"&&W=="normal"||_=="bold"&&W==400||_=="normal"&&W=="italic"||_=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(_=W==400||W==="normal"?_==="italic"?"italic":"normal":W!=700&&W!=="bold"||_!=="normal"?(W==700?"bold":W)+""+_:"bold"),_};f.advancedAPI=function(_){var W=F===S.COMPAT;return W&&P.call(this),typeof _!="function"||(_(this),W&&L.call(this)),this},f.compatAPI=function(_){var W=F===S.ADVANCED;return W&&L.call(this),typeof _!="function"||(_(this),W&&P.call(this)),this},f.isAdvancedAPI=function(){return F===S.ADVANCED};var K,H=function(_){if(F!==S.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=f.roundToPrecision=f.__private__.roundToPrecision=function(_,W){var Pe=e||W;if(isNaN(_)||isNaN(Pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(Pe).replace(/0+$/,"")};K=f.hpf=f.__private__.hpf=typeof A=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return J(_,A)}:A==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return J(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return J(_,16)};var we=f.f2=f.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return J(_,2)},O=f.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return J(_,3)},D=f.scale=f.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return F===S.COMPAT?_*De:F===S.ADVANCED?_:void 0},Z=function(_){return F===S.COMPAT?ka()-_:F===S.ADVANCED?_:void 0},ie=function(_){return D(Z(_))};f.__private__.setPrecision=f.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var de,ne="00000000000000000000000000000000",fe=f.__private__.getFileId=function(){return ne},$=f.__private__.setFileId=function(_){return ne=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Un=new hd(c.userPermissions,c.userPassword,c.ownerPassword,ne)),ne};f.setFileId=function(_){return $(_),this},f.getFileId=function(){return fe()};var q=f.__private__.convertDateToPDFDate=function(_){var W=_.getTimezoneOffset(),Pe=W<0?"+":"-",Ke=Math.floor(Math.abs(W/60)),nt=Math.abs(W%60),Bt=[Pe,I(Ke),"'",I(nt),"'"].join("");return["D:",_.getFullYear(),I(_.getMonth()+1),I(_.getDate()),I(_.getHours()),I(_.getMinutes()),I(_.getSeconds()),Bt].join("")},se=f.__private__.convertPDFDateToDate=function(_){var W=parseInt(_.substr(2,4),10),Pe=parseInt(_.substr(6,2),10)-1,Ke=parseInt(_.substr(8,2),10),nt=parseInt(_.substr(10,2),10),Bt=parseInt(_.substr(12,2),10),kt=parseInt(_.substr(14,2),10);return new Date(W,Pe,Ke,nt,Bt,kt,0)},Ae=f.__private__.setCreationDate=function(_){var W;if(_===void 0&&(_=new Date),_ instanceof Date)W=q(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=_}return de=W},x=f.__private__.getCreationDate=function(_){var W=de;return _==="jsDate"&&(W=se(de)),W};f.setCreationDate=function(_){return Ae(_),this},f.getCreationDate=function(_){return x(_)};var E,I=f.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},U=f.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},M=0,j=[],V=[],X=0,R=[],he=[],xe=!1,Be=V,Le=function(){M=0,X=0,V=[],j=[],R=[],Et=Lt(),xt=Lt()};f.__private__.setCustomOutputDestination=function(_){xe=!0,Be=_};var Y=function(_){xe||(Be=_)};f.__private__.resetCustomOutputDestination=function(){xe=!1,Be=V};var k=f.__private__.out=function(_){return _=_.toString(),X+=_.length+1,Be.push(_),Be},pe=f.__private__.write=function(_){return k(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},ze=f.__private__.getArrayBuffer=function(_){for(var W=_.length,Pe=new ArrayBuffer(W),Ke=new Uint8Array(Pe);W--;)Ke[W]=_.charCodeAt(W);return Pe},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ye};var le=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(_){return le=F===S.ADVANCED?_/De:_,this};var Ce,ke=f.__private__.getFontSize=f.getFontSize=function(){return F===S.COMPAT?le:le*De},ce=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(_){return ce=_,this},f.__private__.getR2L=f.getR2L=function(){return ce};var ee,N=f.__private__.setZoomMode=function(_){var W=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Ce=_;else if(isNaN(_)){if(W.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Ce=_}else Ce=parseInt(_,10)};f.__private__.getZoomMode=function(){return Ce};var _e,ve=f.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');ee=_};f.__private__.getPageMode=function(){return ee};var Se=f.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');_e=_};f.__private__.getLayoutMode=function(){return _e},f.__private__.setDisplayMode=f.setDisplayMode=function(_,W,Pe){return N(_),Se(W),ve(Pe),this};var me={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(_){if(Object.keys(me).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return me[_]},f.__private__.getDocumentProperties=function(){return me},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(_){for(var W in me)me.hasOwnProperty(W)&&_[W]&&(me[W]=_[W]);return this},f.__private__.setDocumentProperty=function(_,W){if(Object.keys(me).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return me[_]=W};var Ne,De,qe,Qe,rt,tt={},Te={},ge=[],Oe={},He={},je={},at={},At=null,it=0,Re=[],Xe=new ib(f),Je=n.hotfixes||[],ct={},_t={},lt=[],et=function _(W,Pe,Ke,nt,Bt,kt){if(!(this instanceof _))return new _(W,Pe,Ke,nt,Bt,kt);isNaN(W)&&(W=1),isNaN(Pe)&&(Pe=0),isNaN(Ke)&&(Ke=0),isNaN(nt)&&(nt=1),isNaN(Bt)&&(Bt=0),isNaN(kt)&&(kt=0),this._matrix=[W,Pe,Ke,nt,Bt,kt]};Object.defineProperty(et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(et.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(et.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(et.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(et.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(et.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(et.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),et.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(_)},et.prototype.multiply=function(_){var W=_.sx*this.sx+_.shy*this.shx,Pe=_.sx*this.shy+_.shy*this.sy,Ke=_.shx*this.sx+_.sy*this.shx,nt=_.shx*this.shy+_.sy*this.sy,Bt=_.tx*this.sx+_.ty*this.shx+this.tx,kt=_.tx*this.shy+_.ty*this.sy+this.ty;return new et(W,Pe,Ke,nt,Bt,kt)},et.prototype.decompose=function(){var _=this.sx,W=this.shy,Pe=this.shx,Ke=this.sy,nt=this.tx,Bt=this.ty,kt=Math.sqrt(_*_+W*W),Vt=(_/=kt)*Pe+(W/=kt)*Ke;Pe-=_*Vt,Ke-=W*Vt;var ar=Math.sqrt(Pe*Pe+Ke*Ke);return Vt/=ar,_*(Ke/=ar)<W*(Pe/=ar)&&(_=-_,W=-W,Vt=-Vt,kt=-kt),{scale:new et(kt,0,0,ar,0,0),translate:new et(1,0,0,1,nt,Bt),rotate:new et(_,W,-W,_,0,0),skew:new et(1,0,Vt,1,0,0)}},et.prototype.toString=function(_){return this.join(" ")},et.prototype.inversed=function(){var _=this.sx,W=this.shy,Pe=this.shx,Ke=this.sy,nt=this.tx,Bt=this.ty,kt=1/(_*Ke-W*Pe),Vt=Ke*kt,ar=-W*kt,Cr=-Pe*kt,_r=_*kt;return new et(Vt,ar,Cr,_r,-Vt*nt-Cr*Bt,-ar*nt-_r*Bt)},et.prototype.applyToPoint=function(_){var W=_.x*this.sx+_.y*this.shx+this.tx,Pe=_.x*this.shy+_.y*this.sy+this.ty;return new Cl(W,Pe)},et.prototype.applyToRectangle=function(_){var W=this.applyToPoint(_),Pe=this.applyToPoint(new Cl(_.x+_.w,_.y+_.h));return new uc(W.x,W.y,Pe.x-W.x,Pe.y-W.y)},et.prototype.clone=function(){var _=this.sx,W=this.shy,Pe=this.shx,Ke=this.sy,nt=this.tx,Bt=this.ty;return new et(_,W,Pe,Ke,nt,Bt)},f.Matrix=et;var Qt=f.matrixMult=function(_,W){return W.multiply(_)},vt=new et(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=vt;var Nt=function(_,W){if(!He[_]){var Pe=(W instanceof WA?"Sh":"P")+(Object.keys(Oe).length+1).toString(10);W.id=Pe,He[_]=Pe,Oe[Pe]=W,Xe.publish("addPattern",W)}};f.ShadingPattern=WA,f.TilingPattern=yd,f.addShadingPattern=function(_,W){return H("addShadingPattern()"),Nt(_,W),this},f.beginTilingPattern=function(_){H("beginTilingPattern()"),eh(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},f.endTilingPattern=function(_,W){H("endTilingPattern()"),W.stream=he[E].join(`
`),Nt(_,W),Xe.publish("endTilingPattern",W),lt.pop().restore()};var mt=f.__private__.newObject=function(){var _=Lt();return Pt(_,!0),_},Lt=f.__private__.newObjectDeferred=function(){return M++,j[M]=function(){return X},M},Pt=function(_,W){return W=typeof W=="boolean"&&W,j[_]=X,W&&k(_+" 0 obj"),_},zt=f.__private__.newAdditionalObject=function(){var _={objId:Lt(),content:""};return R.push(_),_},Et=Lt(),xt=Lt(),Ut=f.__private__.decodeColorString=function(_){var W=_.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length===5&&(W[4]==="k"||W[4]==="K")&&(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var Pe=parseFloat(W[0]);W=[Pe,Pe,Pe,"r"]}for(var Ke="#",nt=0;nt<3;nt++)Ke+=("0"+Math.floor(255*parseFloat(W[nt])).toString(16)).slice(-2);return Ke},Kt=f.__private__.encodeColorString=function(_){var W;typeof _=="string"&&(_={ch1:_});var Pe=_.ch1,Ke=_.ch2,nt=_.ch3,Bt=_.ch4,kt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Pe=="string"&&Pe.charAt(0)!=="#"){var Vt=new Wx(Pe);if(Vt.ok)Pe=Vt.toHex();else if(!/^\d*\.?\d*$/.test(Pe))throw new Error('Invalid color "'+Pe+'" passed to jsPDF.encodeColorString.')}if(typeof Pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Pe)&&(Pe="#"+Pe[1]+Pe[1]+Pe[2]+Pe[2]+Pe[3]+Pe[3]),typeof Pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Pe)){var ar=parseInt(Pe.substr(1),16);Pe=ar>>16&255,Ke=ar>>8&255,nt=255&ar}if(Ke===void 0||Bt===void 0&&Pe===Ke&&Ke===nt)if(typeof Pe=="string")W=Pe+" "+kt[0];else switch(_.precision){case 2:W=we(Pe/255)+" "+kt[0];break;case 3:default:W=O(Pe/255)+" "+kt[0]}else if(Bt===void 0||dn(Bt)==="object"){if(Bt&&!isNaN(Bt.a)&&Bt.a===0)return W=["1.","1.","1.",kt[1]].join(" ");if(typeof Pe=="string")W=[Pe,Ke,nt,kt[1]].join(" ");else switch(_.precision){case 2:W=[we(Pe/255),we(Ke/255),we(nt/255),kt[1]].join(" ");break;default:case 3:W=[O(Pe/255),O(Ke/255),O(nt/255),kt[1]].join(" ")}}else if(typeof Pe=="string")W=[Pe,Ke,nt,Bt,kt[2]].join(" ");else switch(_.precision){case 2:W=[we(Pe),we(Ke),we(nt),we(Bt),kt[2]].join(" ");break;case 3:default:W=[O(Pe),O(Ke),O(nt),O(Bt),kt[2]].join(" ")}return W},Ot=f.__private__.getFilters=function(){return i},Mt=f.__private__.putStream=function(_){var W=(_=_||{}).data||"",Pe=_.filters||Ot(),Ke=_.alreadyAppliedFilters||[],nt=_.addLength1||!1,Bt=W.length,kt=_.objectId,Vt=function(Uo){return Uo};if(c!==null&&kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Vt=Un.encryptor(kt,0));var ar={};Pe===!0&&(Pe=["FlateEncode"]);var Cr=_.additionalKeyValues||[],_r=(ar=pr.API.processDataByFilters!==void 0?pr.API.processDataByFilters(W,Pe):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(Ke)?Ke.join(" "):Ke.toString());if(ar.data.length!==0&&(Cr.push({key:"Length",value:ar.data.length}),nt===!0&&Cr.push({key:"Length1",value:Bt})),_r.length!=0)if(_r.split("/").length-1==1)Cr.push({key:"Filter",value:_r});else{Cr.push({key:"Filter",value:"["+_r+"]"});for(var qr=0;qr<Cr.length;qr+=1)if(Cr[qr].key==="DecodeParms"){for(var Tn=[],Dn=0;Dn<ar.reverseChain.split("/").length-1;Dn+=1)Tn.push("null");Tn.push(Cr[qr].value),Cr[qr].value="["+Tn.join(" ")+"]"}}k("<<");for(var eo=0;eo<Cr.length;eo++)k("/"+Cr[eo].key+" "+Cr[eo].value);k(">>"),ar.data.length!==0&&(k("stream"),k(Vt(ar.data)),k("endstream"))},Gt=f.__private__.putPage=function(_){var W=_.number,Pe=_.data,Ke=_.objId,nt=_.contentsObjId;Pt(Ke,!0),k("<</Type /Page"),k("/Parent "+_.rootDictionaryObjId+" 0 R"),k("/Resources "+_.resourceDictionaryObjId+" 0 R"),k("/MediaBox ["+parseFloat(K(_.mediaBox.bottomLeftX))+" "+parseFloat(K(_.mediaBox.bottomLeftY))+" "+K(_.mediaBox.topRightX)+" "+K(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&k("/CropBox ["+K(_.cropBox.bottomLeftX)+" "+K(_.cropBox.bottomLeftY)+" "+K(_.cropBox.topRightX)+" "+K(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&k("/BleedBox ["+K(_.bleedBox.bottomLeftX)+" "+K(_.bleedBox.bottomLeftY)+" "+K(_.bleedBox.topRightX)+" "+K(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&k("/TrimBox ["+K(_.trimBox.bottomLeftX)+" "+K(_.trimBox.bottomLeftY)+" "+K(_.trimBox.topRightX)+" "+K(_.trimBox.topRightY)+"]"),_.artBox!==null&&k("/ArtBox ["+K(_.artBox.bottomLeftX)+" "+K(_.artBox.bottomLeftY)+" "+K(_.artBox.topRightX)+" "+K(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&k("/UserUnit "+_.userUnit),Xe.publish("putPage",{objId:Ke,pageContext:Re[W],pageNumber:W,page:Pe}),k("/Contents "+nt+" 0 R"),k(">>"),k("endobj");var Bt=Pe.join(`
`);return F===S.ADVANCED&&(Bt+=`
Q`),Pt(nt,!0),Mt({data:Bt,filters:Ot(),objectId:nt}),k("endobj"),Ke},nr=f.__private__.putPages=function(){var _,W,Pe=[];for(_=1;_<=it;_++)Re[_].objId=Lt(),Re[_].contentsObjId=Lt();for(_=1;_<=it;_++)Pe.push(Gt({number:_,data:he[_],objId:Re[_].objId,contentsObjId:Re[_].contentsObjId,mediaBox:Re[_].mediaBox,cropBox:Re[_].cropBox,bleedBox:Re[_].bleedBox,trimBox:Re[_].trimBox,artBox:Re[_].artBox,userUnit:Re[_].userUnit,rootDictionaryObjId:Et,resourceDictionaryObjId:xt}));Pt(Et,!0),k("<</Type /Pages");var Ke="/Kids [";for(W=0;W<it;W++)Ke+=Pe[W]+" 0 R ";k(Ke+"]"),k("/Count "+it),k(">>"),k("endobj"),Xe.publish("postPutPages")},sr=function(_){Xe.publish("putFont",{font:_,out:k,newObject:mt,putStream:Mt}),_.isAlreadyPutted!==!0&&(_.objectNumber=mt(),k("<<"),k("/Type /Font"),k("/BaseFont /"+fd(_.postScriptName)),k("/Subtype /Type1"),typeof _.encoding=="string"&&k("/Encoding /"+_.encoding),k("/FirstChar 32"),k("/LastChar 255"),k(">>"),k("endobj"))},dr=function(){for(var _ in tt)tt.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&sr(tt[_])},Ht=function(_){_.objectNumber=mt();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[K(_.x),K(_.y),K(_.x+_.width),K(_.y+_.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var Pe=_.pages[1].join(`
`);Mt({data:Pe,additionalKeyValues:W,objectId:_.objectNumber}),k("endobj")},wr=function(){for(var _ in ct)ct.hasOwnProperty(_)&&Ht(ct[_])},Pr=function(_,W){var Pe,Ke=[],nt=1/(W-1);for(Pe=0;Pe<1;Pe+=nt)Ke.push(Pe);if(Ke.push(1),_[0].offset!=0){var Bt={offset:0,color:_[0].color};_.unshift(Bt)}if(_[_.length-1].offset!=1){var kt={offset:1,color:_[_.length-1].color};_.push(kt)}for(var Vt="",ar=0,Cr=0;Cr<Ke.length;Cr++){for(Pe=Ke[Cr];Pe>_[ar+1].offset;)ar++;var _r=_[ar].offset,qr=(Pe-_r)/(_[ar+1].offset-_r),Tn=_[ar].color,Dn=_[ar+1].color;Vt+=U(Math.round((1-qr)*Tn[0]+qr*Dn[0]).toString(16))+U(Math.round((1-qr)*Tn[1]+qr*Dn[1]).toString(16))+U(Math.round((1-qr)*Tn[2]+qr*Dn[2]).toString(16))}return Vt.trim()},$r=function(_,W){W||(W=21);var Pe=mt(),Ke=Pr(_.colors,W),nt=[];nt.push({key:"FunctionType",value:"0"}),nt.push({key:"Domain",value:"[0.0 1.0]"}),nt.push({key:"Size",value:"["+W+"]"}),nt.push({key:"BitsPerSample",value:"8"}),nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt({data:Ke,additionalKeyValues:nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Pe}),k("endobj"),_.objectNumber=mt(),k("<< /ShadingType "+_.type),k("/ColorSpace /DeviceRGB");var Bt="/Coords ["+K(parseFloat(_.coords[0]))+" "+K(parseFloat(_.coords[1]))+" ";_.type===2?Bt+=K(parseFloat(_.coords[2]))+" "+K(parseFloat(_.coords[3])):Bt+=K(parseFloat(_.coords[2]))+" "+K(parseFloat(_.coords[3]))+" "+K(parseFloat(_.coords[4]))+" "+K(parseFloat(_.coords[5])),k(Bt+="]"),_.matrix&&k("/Matrix ["+_.matrix.toString()+"]"),k("/Function "+Pe+" 0 R"),k("/Extend [true true]"),k(">>"),k("endobj")},Ir=function(_,W){var Pe=Lt(),Ke=mt();W.push({resourcesOid:Pe,objectOid:Ke}),_.objectNumber=Ke;var nt=[];nt.push({key:"Type",value:"/Pattern"}),nt.push({key:"PatternType",value:"1"}),nt.push({key:"PaintType",value:"1"}),nt.push({key:"TilingType",value:"1"}),nt.push({key:"BBox",value:"["+_.boundingBox.map(K).join(" ")+"]"}),nt.push({key:"XStep",value:K(_.xStep)}),nt.push({key:"YStep",value:K(_.yStep)}),nt.push({key:"Resources",value:Pe+" 0 R"}),_.matrix&&nt.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Mt({data:_.stream,additionalKeyValues:nt,objectId:_.objectNumber}),k("endobj")},hr=function(_){var W;for(W in Oe)Oe.hasOwnProperty(W)&&(Oe[W]instanceof WA?$r(Oe[W]):Oe[W]instanceof yd&&Ir(Oe[W],_))},Or=function(_){for(var W in _.objectNumber=mt(),k("<<"),_)switch(W){case"opacity":k("/ca "+we(_[W]));break;case"stroke-opacity":k("/CA "+we(_[W]))}k(">>"),k("endobj")},xr=function(){var _;for(_ in je)je.hasOwnProperty(_)&&Or(je[_])},ir=function(){for(var _ in k("/XObject <<"),ct)ct.hasOwnProperty(_)&&ct[_].objectNumber>=0&&k("/"+_+" "+ct[_].objectNumber+" 0 R");Xe.publish("putXobjectDict"),k(">>")},vr=function(){Un.oid=mt(),k("<<"),k("/Filter /Standard"),k("/V "+Un.v),k("/R "+Un.r),k("/U <"+Un.toHexString(Un.U)+">"),k("/O <"+Un.toHexString(Un.O)+">"),k("/P "+Un.P),k(">>"),k("endobj")},kr=function(){for(var _ in k("/Font <<"),tt)tt.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&k("/"+_+" "+tt[_].objectNumber+" 0 R");k(">>")},un=function(){if(Object.keys(Oe).length>0){for(var _ in k("/Shading <<"),Oe)Oe.hasOwnProperty(_)&&Oe[_]instanceof WA&&Oe[_].objectNumber>=0&&k("/"+_+" "+Oe[_].objectNumber+" 0 R");Xe.publish("putShadingPatternDict"),k(">>")}},bn=function(_){if(Object.keys(Oe).length>0){for(var W in k("/Pattern <<"),Oe)Oe.hasOwnProperty(W)&&Oe[W]instanceof f.TilingPattern&&Oe[W].objectNumber>=0&&Oe[W].objectNumber<_&&k("/"+W+" "+Oe[W].objectNumber+" 0 R");Xe.publish("putTilingPatternDict"),k(">>")}},zr=function(){if(Object.keys(je).length>0){var _;for(_ in k("/ExtGState <<"),je)je.hasOwnProperty(_)&&je[_].objectNumber>=0&&k("/"+_+" "+je[_].objectNumber+" 0 R");Xe.publish("putGStateDict"),k(">>")}},lr=function(_){Pt(_.resourcesOid,!0),k("<<"),k("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),kr(),un(),bn(_.objectOid),zr(),ir(),k(">>"),k("endobj")},Fn=function(){var _=[];dr(),xr(),wr(),hr(_),Xe.publish("putResources"),_.forEach(lr),lr({resourcesOid:xt,objectOid:Number.MAX_SAFE_INTEGER}),Xe.publish("postPutResources")},Fo=function(){Xe.publish("putAdditionalObjects");for(var _=0;_<R.length;_++){var W=R[_];Pt(W.objId,!0),k(W.content),k("endobj")}Xe.publish("postPutAdditionalObjects")},so=function(_){Te[_.fontName]=Te[_.fontName]||{},Te[_.fontName][_.fontStyle]=_.id},yo=function(_,W,Pe,Ke,nt){var Bt={id:"F"+(Object.keys(tt).length+1).toString(10),postScriptName:_,fontName:W,fontStyle:Pe,encoding:Ke,isStandardFont:nt||!1,metadata:{}};return Xe.publish("addFont",{font:Bt,instance:this}),tt[Bt.id]=Bt,so(Bt),Bt.id},ns=function(_){for(var W=0,Pe=ye.length;W<Pe;W++){var Ke=yo.call(this,_[W][0],_[W][1],_[W][2],ye[W][3],!0);u===!1&&(h[Ke]=!0);var nt=_[W][0].split("-");so({id:Ke,fontName:nt[0],fontStyle:nt[1]||""})}Xe.publish("addFonts",{fonts:tt,dictionary:Te})},On=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(Ke){var W=Ke.stack||"";~W.indexOf(" at ")&&(W=W.split(" at ")[1]);var Pe="Error in function "+W.split(`
`)[0].split("<")[0]+": "+Ke.message;if(!mr.console)throw new Error(Pe);mr.console.error(Pe,Ke),mr.alert&&alert(Pe)}},_.foo.bar=_,_.foo},tr=function(_,W){var Pe,Ke,nt,Bt,kt,Vt,ar,Cr,_r;if(nt=(W=W||{}).sourceEncoding||"Unicode",kt=W.outputEncoding,(W.autoencode||kt)&&tt[Ne].metadata&&tt[Ne].metadata[nt]&&tt[Ne].metadata[nt].encoding&&(Bt=tt[Ne].metadata[nt].encoding,!kt&&tt[Ne].encoding&&(kt=tt[Ne].encoding),!kt&&Bt.codePages&&(kt=Bt.codePages[0]),typeof kt=="string"&&(kt=Bt[kt]),kt)){for(ar=!1,Vt=[],Pe=0,Ke=_.length;Pe<Ke;Pe++)(Cr=kt[_.charCodeAt(Pe)])?Vt.push(String.fromCharCode(Cr)):Vt.push(_[Pe]),Vt[Pe].charCodeAt(0)>>8&&(ar=!0);_=Vt.join("")}for(Pe=_.length;ar===void 0&&Pe!==0;)_.charCodeAt(Pe-1)>>8&&(ar=!0),Pe--;if(!ar)return _;for(Vt=W.noBOM?[]:[254,255],Pe=0,Ke=_.length;Pe<Ke;Pe++){if((_r=(Cr=_.charCodeAt(Pe))>>8)>>8)throw new Error("Character at position "+Pe+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(_r),Vt.push(Cr-(_r<<8))}return String.fromCharCode.apply(void 0,Vt)},Qr=f.__private__.pdfEscape=f.pdfEscape=function(_,W){return tr(_,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},on=f.__private__.beginPage=function(_){he[++it]=[],Re[it]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Io(it),Y(he[E])},Ro=function(_,W){var Pe,Ke,nt;switch(t=W||t,typeof _=="string"&&(Pe=b(_.toLowerCase()),Array.isArray(Pe)&&(Ke=Pe[0],nt=Pe[1])),Array.isArray(_)&&(Ke=_[0]*De,nt=_[1]*De),isNaN(Ke)&&(Ke=o[0],nt=o[1]),(Ke>14400||nt>14400)&&(wn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ke=Math.min(14400,Ke),nt=Math.min(14400,nt)),o=[Ke,nt],t.substr(0,1)){case"l":nt>Ke&&(o=[nt,Ke]);break;case"p":Ke>nt&&(o=[nt,Ke])}on(o),Wu(Ac),k(ti),dc!==0&&k(dc+" J"),cc!==0&&k(cc+" j"),Xe.publish("addPage",{pageNumber:it})},bs=function(_){_>0&&_<=it&&(he.splice(_,1),Re.splice(_,1),it--,E>it&&(E=it),this.setPage(E))},Io=function(_){_>0&&_<=it&&(E=_)},bo=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return he.length-1},os=function(_,W,Pe){var Ke,nt=void 0;return Pe=Pe||{},_=_!==void 0?_:tt[Ne].fontName,W=W!==void 0?W:tt[Ne].fontStyle,Ke=_.toLowerCase(),Te[Ke]!==void 0&&Te[Ke][W]!==void 0?nt=Te[Ke][W]:Te[_]!==void 0&&Te[_][W]!==void 0?nt=Te[_][W]:Pe.disableWarning===!1&&wn.warn("Unable to look up font label for font '"+_+"', '"+W+"'. Refer to getFontList() for available fonts."),nt||Pe.noFallback||(nt=Te.times[W])==null&&(nt=Te.times.normal),nt},Ua=f.__private__.putInfo=function(){var _=mt(),W=function(Ke){return Ke};for(var Pe in c!==null&&(W=Un.encryptor(_,0)),k("<<"),k("/Producer ("+Qr(W("jsPDF "+pr.version))+")"),me)me.hasOwnProperty(Pe)&&me[Pe]&&k("/"+Pe.substr(0,1).toUpperCase()+Pe.substr(1)+" ("+Qr(W(me[Pe]))+")");k("/CreationDate ("+Qr(W(de))+")"),k(">>"),k("endobj")},zi=f.__private__.putCatalog=function(_){var W=(_=_||{}).rootDictionaryObjId||Et;switch(mt(),k("<<"),k("/Type /Catalog"),k("/Pages "+W+" 0 R"),Ce||(Ce="fullwidth"),Ce){case"fullwidth":k("/OpenAction [3 0 R /FitH null]");break;case"fullheight":k("/OpenAction [3 0 R /FitV null]");break;case"fullpage":k("/OpenAction [3 0 R /Fit]");break;case"original":k("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Pe=""+Ce;Pe.substr(Pe.length-1)==="%"&&(Ce=parseInt(Ce)/100),typeof Ce=="number"&&k("/OpenAction [3 0 R /XYZ null null "+we(Ce)+"]")}switch(_e||(_e="continuous"),_e){case"continuous":k("/PageLayout /OneColumn");break;case"single":k("/PageLayout /SinglePage");break;case"two":case"twoleft":k("/PageLayout /TwoColumnLeft");break;case"tworight":k("/PageLayout /TwoColumnRight")}ee&&k("/PageMode /"+ee),Xe.publish("putCatalog"),k(">>"),k("endobj")},Ci=f.__private__.putTrailer=function(){k("trailer"),k("<<"),k("/Size "+(M+1)),k("/Root "+M+" 0 R"),k("/Info "+(M-1)+" 0 R"),c!==null&&k("/Encrypt "+Un.oid+" 0 R"),k("/ID [ <"+ne+"> <"+ne+"> ]"),k(">>")},EA=f.__private__.putHeader=function(){k("%PDF-"+g),k("%")},or=f.__private__.putXRef=function(){var _="0000000000";k("xref"),k("0 "+(M+1)),k("0000000000 65535 f ");for(var W=1;W<=M;W++)typeof j[W]=="function"?k((_+j[W]()).slice(-10)+" 00000 n "):j[W]!==void 0?k((_+j[W]).slice(-10)+" 00000 n "):k("0000000000 00000 n ")},sn=f.__private__.buildDocument=function(){Le(),Y(V),Xe.publish("buildDocument"),EA(),nr(),Fo(),Fn(),c!==null&&vr(),Ua(),zi();var _=X;return or(),Ci(),k("startxref"),k(""+_),k("%%EOF"),Y(he[E]),V.join(`
`)},Qo=f.__private__.getBlob=function(_){return new Blob([ze(_)],{type:"application/pdf"})},ks=f.output=f.__private__.output=On(function(_,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",_){case void 0:return sn();case"save":f.save(W.filename);break;case"arraybuffer":return ze(sn());case"blob":return Qo(sn());case"bloburi":case"bloburl":if(mr.URL!==void 0&&typeof mr.URL.createObjectURL=="function")return mr.URL&&mr.URL.createObjectURL(Qo(sn()))||void 0;wn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Pe="",Ke=sn();try{Pe=bm(Ke)}catch{Pe=bm(unescape(encodeURIComponent(Ke)))}return"data:application/pdf;filename="+W.filename+";base64,"+Pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(nt=W.pdfObjectUrl,Bt="");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+nt+'"'+Bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",Vt=mr.open();return Vt!==null&&Vt.document.write(kt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',Cr=mr.open();if(Cr!==null){Cr.document.write(ar);var _r=this;Cr.document.documentElement.querySelector("#pdfViewer").onload=function(){Cr.document.title=W.filename,Cr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_r.output("bloburl"))}}return Cr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',Tn=mr.open();if(Tn!==null&&(Tn.document.write(qr),Tn.document.title=W.filename),Tn||typeof safari>"u")return Tn;break;case"datauri":case"dataurl":return mr.document.location.href=this.output("datauristring",W);default:return null}}),Si=function(_){return Array.isArray(Je)===!0&&Je.indexOf(_)>-1};switch(r){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=Si("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);De=r}var Un=null;Ae(),$();var Zs=function(_){return c!==null?Un.encryptor(_,0):function(W){return W}},Ta=f.__private__.getPageInfo=f.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Re[_].objId,pageNumber:_,pageContext:Re[_]}},yr=f.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in Re)if(Re[W].objId===_)break;return Ta(W)},Tr=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Re[E].objId,pageNumber:E,pageContext:Re[E]}};f.addPage=function(){return Ro.apply(this,arguments),this},f.setPage=function(){return Io.apply(this,arguments),Y.call(this,he[E]),this},f.insertPage=function(_){return this.addPage(),this.movePage(E,_),this},f.movePage=function(_,W){var Pe,Ke;if(_>W){Pe=he[_],Ke=Re[_];for(var nt=_;nt>W;nt--)he[nt]=he[nt-1],Re[nt]=Re[nt-1];he[W]=Pe,Re[W]=Ke,this.setPage(W)}else if(_<W){Pe=he[_],Ke=Re[_];for(var Bt=_;Bt<W;Bt++)he[Bt]=he[Bt+1],Re[Bt]=Re[Bt+1];he[W]=Pe,Re[W]=Ke,this.setPage(W)}return this},f.deletePage=function(){return bs.apply(this,arguments),this},f.__private__.text=f.text=function(_,W,Pe,Ke,nt){var Bt,kt,Vt,ar,Cr,_r,qr,Tn,Dn,eo=(Ke=Ke||{}).scope||this;if(typeof _=="number"&&typeof W=="number"&&(typeof Pe=="string"||Array.isArray(Pe))){var Uo=Pe;Pe=W,W=_,_=Uo}if(arguments[3]instanceof et?(H("The transform parameter of text() with a Matrix value"),Dn=nt):(Vt=arguments[4],ar=arguments[5],dn(qr=arguments[3])==="object"&&qr!==null||(typeof Vt=="string"&&(ar=Vt,Vt=null),typeof qr=="string"&&(ar=qr,qr=null),typeof qr=="number"&&(Vt=qr,qr=null),Ke={flags:qr,angle:Vt,align:ar})),isNaN(W)||isNaN(Pe)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return eo;var uo="",ri=!1,Bs=typeof Ke.lineHeightFactor=="number"?Ke.lineHeightFactor:IA,Ii=eo.internal.scaleFactor;function th(_n){return _n=_n.split("	").join(Array(Ke.TabLen||9).join(" ")),Qr(_n,qr)}function gc(_n){for(var Bn,qn=_n.concat(),io=[],oa=qn.length;oa--;)typeof(Bn=qn.shift())=="string"?io.push(Bn):Array.isArray(_n)&&(Bn.length===1||Bn[1]===void 0&&Bn[2]===void 0)?io.push(Bn[0]):io.push([Bn[0],Bn[1],Bn[2]]);return io}function vc(_n,Bn){var qn;if(typeof _n=="string")qn=Bn(_n)[0];else if(Array.isArray(_n)){for(var io,oa,zc=_n.concat(),Ol=[],ih=zc.length;ih--;)typeof(io=zc.shift())=="string"?Ol.push(Bn(io)[0]):Array.isArray(io)&&typeof io[0]=="string"&&(oa=Bn(io[0],io[1],io[2]),Ol.push([oa[0],oa[1],oa[2]]));qn=Ol}return qn}var El=!1,mc=!0;if(typeof _=="string")El=!0;else if(Array.isArray(_)){var wc=_.concat();kt=[];for(var Fl,_o=wc.length;_o--;)(typeof(Fl=wc.shift())!="string"||Array.isArray(Fl)&&typeof Fl[0]!="string")&&(mc=!1);El=mc}if(El===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Il=le/eo.internal.scaleFactor,Ql=Il*(Bs-1);switch(Ke.baseline){case"bottom":Pe-=Ql;break;case"top":Pe+=Il-Ql;break;case"hanging":Pe+=Il-2*Ql;break;case"middle":Pe+=Il/2-Ql}if((_r=Ke.maxWidth||0)>0&&(typeof _=="string"?_=eo.splitTextToSize(_,_r):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(_n,Bn){return _n.concat(eo.splitTextToSize(Bn,_r))},[]))),Bt={text:_,x:W,y:Pe,options:Ke,mutex:{pdfEscape:Qr,activeFontKey:Ne,fonts:tt,activeFontSize:le}},Xe.publish("preProcessText",Bt),_=Bt.text,Vt=(Ke=Bt.options).angle,!(Dn instanceof et)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,Ke.rotationDirection===0&&(Vt=-Vt),F===S.ADVANCED&&(Vt=-Vt);var Ul=Math.cos(Vt),yc=Math.sin(Vt);Dn=new et(Ul,yc,-yc,Ul,0,0)}else Vt&&Vt instanceof et&&(Dn=Vt);F!==S.ADVANCED||Dn||(Dn=vt),(Cr=Ke.charSpace||zl)!==void 0&&(uo+=K(D(Cr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Tn=Ke.horizontalScale)!==void 0&&(uo+=K(100*Tn)+` Tz
`),Ke.lang;var ss=-1,Hg=Ke.renderingMode!==void 0?Ke.renderingMode:Ke.stroke,bc=eo.internal.getCurrentPageInfo().pageContext;switch(Hg){case 0:case!1:case"fill":ss=0;break;case 1:case!0:case"stroke":ss=1;break;case 2:case"fillThenStroke":ss=2;break;case 3:case"invisible":ss=3;break;case 4:case"fillAndAddForClipping":ss=4;break;case 5:case"strokeAndAddPathForClipping":ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ss=6;break;case 7:case"addToPathForClipping":ss=7}var rh=bc.usedRenderingMode!==void 0?bc.usedRenderingMode:-1;ss!==-1?uo+=ss+` Tr
`:rh!==-1&&(uo+=`0 Tr
`),ss!==-1&&(bc.usedRenderingMode=ss),ar=Ke.align||"left";var Ds,Tl=le*Bs,nh=eo.internal.pageSize.getWidth(),oh=tt[Ne];Cr=Ke.charSpace||zl,_r=Ke.maxWidth||0,qr=Object.assign({autoencode:!0,noBOM:!0},Ke.flags);var Oa=[],TA=function(_n){return eo.getStringUnitWidth(_n,{font:oh,charSpace:Cr,fontSize:le,doKerning:!1})*le/Ii};if(Object.prototype.toString.call(_)==="[object Array]"){var is;kt=gc(_),ar!=="left"&&(Ds=kt.map(TA));var qo,Da=0;if(ar==="right"){W-=Ds[0],_=[],_o=kt.length;for(var ta=0;ta<_o;ta++)ta===0?(qo=Fi(W),is=ea(Pe)):(qo=D(Da-Ds[ta]),is=-Tl),_.push([kt[ta],qo,is]),Da=Ds[ta]}else if(ar==="center"){W-=Ds[0]/2,_=[],_o=kt.length;for(var ra=0;ra<_o;ra++)ra===0?(qo=Fi(W),is=ea(Pe)):(qo=D((Da-Ds[ra])/2),is=-Tl),_.push([kt[ra],qo,is]),Da=Ds[ra]}else if(ar==="left"){_=[],_o=kt.length;for(var Ll=0;Ll<_o;Ll++)_.push(kt[Ll])}else if(ar==="justify"&&oh.encoding==="Identity-H"){_=[],_o=kt.length,_r=_r!==0?_r:nh;for(var na=0,Rn=0;Rn<_o;Rn++)if(is=Rn===0?ea(Pe):-Tl,qo=Rn===0?Fi(W):na,Rn<_o-1){var _c=D((_r-Ds[Rn])/(kt[Rn].split(" ").length-1)),Ko=kt[Rn].split(" ");_.push([Ko[0]+" ",qo,is]),na=0;for(var Ns=1;Ns<Ko.length;Ns++){var Pl=(TA(Ko[Ns-1]+" "+Ko[Ns])-TA(Ko[Ns]))*Ii+_c;Ns==Ko.length-1?_.push([Ko[Ns],Pl,0]):_.push([Ko[Ns]+" ",Pl,0]),na-=Pl}}else _.push([kt[Rn],qo,is]);_.push(["",na,0])}else{if(ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],_o=kt.length,_r=_r!==0?_r:nh,Rn=0;Rn<_o;Rn++)is=Rn===0?ea(Pe):-Tl,qo=Rn===0?Fi(W):0,Rn<_o-1?Oa.push(K(D((_r-Ds[Rn])/(kt[Rn].split(" ").length-1)))):Oa.push(0),_.push([kt[Rn],qo,is])}}var sh=typeof Ke.R2L=="boolean"?Ke.R2L:ce;sh===!0&&(_=vc(_,function(_n,Bn,qn){return[_n.split("").reverse().join(""),Bn,qn]})),Bt={text:_,x:W,y:Pe,options:Ke,mutex:{pdfEscape:Qr,activeFontKey:Ne,fonts:tt,activeFontSize:le}},Xe.publish("postProcessText",Bt),_=Bt.text,ri=Bt.mutex.isHex||!1;var Bc=tt[Ne].encoding;Bc!=="WinAnsiEncoding"&&Bc!=="StandardEncoding"||(_=vc(_,function(_n,Bn,qn){return[th(_n),Bn,qn]})),kt=gc(_),_=[];for(var LA,PA,Na,kA=0,kl=1,OA=Array.isArray(kt[0])?kl:kA,Ma="",xc=function(_n,Bn,qn){var io="";return qn instanceof et?(qn=typeof Ke.angle=="number"?Qt(qn,new et(1,0,0,1,_n,Bn)):Qt(new et(1,0,0,1,_n,Bn),qn),F===S.ADVANCED&&(qn=Qt(new et(1,0,0,-1,0,0),qn)),io=qn.join(" ")+` Tm
`):io=K(_n)+" "+K(Bn)+` Td
`,io},Ms=0;Ms<kt.length;Ms++){switch(Ma="",OA){case kl:Na=(ri?"<":"(")+kt[Ms][0]+(ri?">":")"),LA=parseFloat(kt[Ms][1]),PA=parseFloat(kt[Ms][2]);break;case kA:Na=(ri?"<":"(")+kt[Ms]+(ri?">":")"),LA=Fi(W),PA=ea(Pe)}Oa!==void 0&&Oa[Ms]!==void 0&&(Ma=Oa[Ms]+` Tw
`),Ms===0?_.push(Ma+xc(LA,PA,Dn)+Na):OA===kA?_.push(Ma+Na):OA===kl&&_.push(Ma+xc(LA,PA,Dn)+Na)}_=OA===kA?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Hs=`BT
/`;return Hs+=Ne+" "+le+` Tf
`,Hs+=K(le*Bs)+` TL
`,Hs+=QA+`
`,Hs+=uo,Hs+=_,k(Hs+="ET"),h[Ne]=!0,eo};var Yr=f.__private__.clip=f.clip=function(_){return k(_==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Yr("evenodd")},f.__private__.discardPath=f.discardPath=function(){return k("n"),this};var hn=f.__private__.isValidStyle=function(_){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(W=!0),W};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(_){return hn(_)&&(d=_),this};var _s=f.__private__.getStyle=f.getStyle=function(_){var W=d;switch(_){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=_}return W},ei=f.close=function(){return k("h"),this};f.stroke=function(){return k("S"),this},f.fill=function(_){return Os("f",_),this},f.fillEvenOdd=function(_){return Os("f*",_),this},f.fillStroke=function(_){return Os("B",_),this},f.fillStrokeEvenOdd=function(_){return Os("B*",_),this};var Os=function(_,W){dn(W)==="object"?ic(W,_):k(_)},Ei=function(_){_===null||F===S.ADVANCED&&_===void 0||(_=_s(_),k(_))};function sc(_,W,Pe,Ke,nt){var Bt=new yd(W||this.boundingBox,Pe||this.xStep,Ke||this.yStep,this.gState,nt||this.matrix);Bt.stream=this.stream;var kt=_+"$$"+this.cloneIndex+++"$$";return Nt(kt,Bt),Bt}var ic=function(_,W){var Pe=He[_.key],Ke=Oe[Pe];if(Ke instanceof WA)k("q"),k(Pg(W)),Ke.gState&&f.setGState(Ke.gState),k(_.matrix.toString()+" cm"),k("/"+Pe+" sh"),k("Q");else if(Ke instanceof yd){var nt=new et(1,0,0,-1,0,ka());_.matrix&&(nt=nt.multiply(_.matrix||vt),Pe=sc.call(Ke,_.key,_.boundingBox,_.xStep,_.yStep,nt).id),k("q"),k("/Pattern cs"),k("/"+Pe+" scn"),Ke.gState&&f.setGState(Ke.gState),k(W),k("Q")}},Pg=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ac=f.moveTo=function(_,W){return k(K(D(_))+" "+K(ie(W))+" m"),this},FA=f.lineTo=function(_,W){return k(K(D(_))+" "+K(ie(W))+" l"),this},La=f.curveTo=function(_,W,Pe,Ke,nt,Bt){return k([K(D(_)),K(ie(W)),K(D(Pe)),K(ie(Ke)),K(D(nt)),K(ie(Bt)),"c"].join(" ")),this};f.__private__.line=f.line=function(_,W,Pe,Ke,nt){if(isNaN(_)||isNaN(W)||isNaN(Pe)||isNaN(Ke)||!hn(nt))throw new Error("Invalid arguments passed to jsPDF.line");return F===S.COMPAT?this.lines([[Pe-_,Ke-W]],_,W,[1,1],nt||"S"):this.lines([[Pe-_,Ke-W]],_,W,[1,1]).stroke()},f.__private__.lines=f.lines=function(_,W,Pe,Ke,nt,Bt){var kt,Vt,ar,Cr,_r,qr,Tn,Dn,eo,Uo,uo,ri;if(typeof _=="number"&&(ri=Pe,Pe=W,W=_,_=ri),Ke=Ke||[1,1],Bt=Bt||!1,isNaN(W)||isNaN(Pe)||!Array.isArray(_)||!Array.isArray(Ke)||!hn(nt)||typeof Bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ac(W,Pe),kt=Ke[0],Vt=Ke[1],Cr=_.length,Uo=W,uo=Pe,ar=0;ar<Cr;ar++)(_r=_[ar]).length===2?(Uo=_r[0]*kt+Uo,uo=_r[1]*Vt+uo,FA(Uo,uo)):(qr=_r[0]*kt+Uo,Tn=_r[1]*Vt+uo,Dn=_r[2]*kt+Uo,eo=_r[3]*Vt+uo,Uo=_r[4]*kt+Uo,uo=_r[5]*Vt+uo,La(qr,Tn,Dn,eo,Uo,uo));return Bt&&ei(),Ei(nt),this},f.path=function(_){for(var W=0;W<_.length;W++){var Pe=_[W],Ke=Pe.c;switch(Pe.op){case"m":ac(Ke[0],Ke[1]);break;case"l":FA(Ke[0],Ke[1]);break;case"c":La.apply(this,Ke);break;case"h":ei()}}return this},f.__private__.rect=f.rect=function(_,W,Pe,Ke,nt){if(isNaN(_)||isNaN(W)||isNaN(Pe)||isNaN(Ke)||!hn(nt))throw new Error("Invalid arguments passed to jsPDF.rect");return F===S.COMPAT&&(Ke=-Ke),k([K(D(_)),K(ie(W)),K(D(Pe)),K(D(Ke)),"re"].join(" ")),Ei(nt),this},f.__private__.triangle=f.triangle=function(_,W,Pe,Ke,nt,Bt,kt){if(isNaN(_)||isNaN(W)||isNaN(Pe)||isNaN(Ke)||isNaN(nt)||isNaN(Bt)||!hn(kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Pe-_,Ke-W],[nt-Pe,Bt-Ke],[_-nt,W-Bt]],_,W,[1,1],kt,!0),this},f.__private__.roundedRect=f.roundedRect=function(_,W,Pe,Ke,nt,Bt,kt){if(isNaN(_)||isNaN(W)||isNaN(Pe)||isNaN(Ke)||isNaN(nt)||isNaN(Bt)||!hn(kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return nt=Math.min(nt,.5*Pe),Bt=Math.min(Bt,.5*Ke),this.lines([[Pe-2*nt,0],[nt*Vt,0,nt,Bt-Bt*Vt,nt,Bt],[0,Ke-2*Bt],[0,Bt*Vt,-nt*Vt,Bt,-nt,Bt],[2*nt-Pe,0],[-nt*Vt,0,-nt,-Bt*Vt,-nt,-Bt],[0,2*Bt-Ke],[0,-Bt*Vt,nt*Vt,-Bt,nt,-Bt]],_+nt,W,[1,1],kt,!0),this},f.__private__.ellipse=f.ellipse=function(_,W,Pe,Ke,nt){if(isNaN(_)||isNaN(W)||isNaN(Pe)||isNaN(Ke)||!hn(nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Bt=4/3*(Math.SQRT2-1)*Pe,kt=4/3*(Math.SQRT2-1)*Ke;return ac(_+Pe,W),La(_+Pe,W-kt,_+Bt,W-Ke,_,W-Ke),La(_-Bt,W-Ke,_-Pe,W-kt,_-Pe,W),La(_-Pe,W+kt,_-Bt,W+Ke,_,W+Ke),La(_+Bt,W+Ke,_+Pe,W+kt,_+Pe,W),Ei(nt),this},f.__private__.circle=f.circle=function(_,W,Pe,Ke){if(isNaN(_)||isNaN(W)||isNaN(Pe)||!hn(Ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,W,Pe,Pe,Ke)},f.setFont=function(_,W,Pe){return Pe&&(W=re(W,Pe)),Ne=os(_,W,{disableWarning:!1}),this};var kg=f.__private__.getFont=f.getFont=function(){return tt[os.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var _,W,Pe={};for(_ in Te)if(Te.hasOwnProperty(_))for(W in Pe[_]=[],Te[_])Te[_].hasOwnProperty(W)&&Pe[_].push(W);return Pe},f.addFont=function(_,W,Pe,Ke,nt){var Bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Bt.indexOf(arguments[3])!==-1?nt=arguments[3]:arguments[3]&&Bt.indexOf(arguments[3])==-1&&(Pe=re(Pe,Ke)),nt=nt||"Identity-H",yo.call(this,_,W,Pe,nt)};var IA,Ac=n.lineWidth||.200025,xl=f.__private__.getLineWidth=f.getLineWidth=function(){return Ac},Wu=f.__private__.setLineWidth=f.setLineWidth=function(_){return Ac=_,k(K(D(_))+" w"),this};f.__private__.setLineDash=pr.API.setLineDash=pr.API.setLineDashPattern=function(_,W){if(_=_||[],W=W||0,isNaN(W)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(Pe){return K(D(Pe))}).join(" "),W=K(D(W)),k("["+_+"] "+W+" d"),this};var Xu=f.__private__.getLineHeight=f.getLineHeight=function(){return le*IA};f.__private__.getLineHeight=f.getLineHeight=function(){return le*IA};var Yu=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(IA=_),this},Ju=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return IA};Yu(n.lineHeight);var Fi=f.__private__.getHorizontalCoordinate=function(_){return D(_)},ea=f.__private__.getVerticalCoordinate=function(_){return F===S.ADVANCED?_:Re[E].mediaBox.topRightY-Re[E].mediaBox.bottomLeftY-D(_)},Og=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(_){return K(Fi(_))},Pa=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(_){return K(ea(_))},ti=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ut(ti)},f.__private__.setStrokeColor=f.setDrawColor=function(_,W,Pe,Ke){return ti=Kt({ch1:_,ch2:W,ch3:Pe,ch4:Ke,pdfColorType:"draw",precision:2}),k(ti),this};var lc=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ut(lc)},f.__private__.setFillColor=f.setFillColor=function(_,W,Pe,Ke){return lc=Kt({ch1:_,ch2:W,ch3:Pe,ch4:Ke,pdfColorType:"fill",precision:2}),k(lc),this};var QA=n.textColor||"0 g",Dg=f.__private__.getTextColor=f.getTextColor=function(){return Ut(QA)};f.__private__.setTextColor=f.setTextColor=function(_,W,Pe,Ke){return QA=Kt({ch1:_,ch2:W,ch3:Pe,ch4:Ke,pdfColorType:"text",precision:3}),this};var zl=n.charSpace,Ng=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(zl||0)};f.__private__.setCharSpace=f.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zl=_,this};var dc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(_){var W=f.CapJoinStyles[_];if(W===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dc=W,k(W+" J"),this};var cc=0;f.__private__.setLineJoin=f.setLineJoin=function(_){var W=f.CapJoinStyles[_];if(W===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cc=W,k(W+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return k(K(D(_))+" M"),this},f.GState=Lp,f.setGState=function(_){(_=typeof _=="string"?je[at[_]]:Zu(null,_)).equals(At)||(k("/"+_.id+" gs"),At=_)};var Zu=function(_,W){if(!_||!at[_]){var Pe=!1;for(var Ke in je)if(je.hasOwnProperty(Ke)&&je[Ke].equals(W)){Pe=!0;break}if(Pe)W=je[Ke];else{var nt="GS"+(Object.keys(je).length+1).toString(10);je[nt]=W,W.id=nt}return _&&(at[_]=W.id),Xe.publish("addGState",W),W}};f.addGState=function(_,W){return Zu(_,W),this},f.saveGraphicsState=function(){return k("q"),ge.push({key:Ne,size:le,color:QA}),this},f.restoreGraphicsState=function(){k("Q");var _=ge.pop();return Ne=_.key,le=_.size,QA=_.color,At=null,this},f.setCurrentTransformationMatrix=function(_){return k(_.toString()+" cm"),this},f.comment=function(_){return k("#"+_),this};var Cl=function(_,W){var Pe=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Pe},set:function(Bt){isNaN(Bt)||(Pe=parseFloat(Bt))}});var Ke=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ke},set:function(Bt){isNaN(Bt)||(Ke=parseFloat(Bt))}});var nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return nt},set:function(Bt){nt=Bt.toString()}}),this},uc=function(_,W,Pe,Ke){Cl.call(this,_,W),this.type="rect";var nt=Pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return nt},set:function(kt){isNaN(kt)||(nt=parseFloat(kt))}});var Bt=Ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Bt},set:function(kt){isNaN(kt)||(Bt=parseFloat(kt))}}),this},hc=function(){this.page=it,this.currentPage=E,this.pages=he.slice(0),this.pagesContext=Re.slice(0),this.x=qe,this.y=Qe,this.matrix=rt,this.width=UA(E),this.height=ka(E),this.outputDestination=Be,this.id="",this.objectNumber=-1};hc.prototype.restore=function(){it=this.page,E=this.currentPage,Re=this.pagesContext,he=this.pages,qe=this.x,Qe=this.y,rt=this.matrix,fc(E,this.width),pc(E,this.height),Be=this.outputDestination};var eh=function(_,W,Pe,Ke,nt){lt.push(new hc),it=E=0,he=[],qe=_,Qe=W,rt=nt,on([Pe,Ke])},Mg=function(_){if(_t[_])lt.pop().restore();else{var W=new hc,Pe="Xo"+(Object.keys(ct).length+1).toString(10);W.id=Pe,_t[_]=Pe,ct[Pe]=W,Xe.publish("addFormObject",W),lt.pop().restore()}};for(var Sl in f.beginFormObject=function(_,W,Pe,Ke,nt){return eh(_,W,Pe,Ke,nt),this},f.endFormObject=function(_){return Mg(_),this},f.doFormObject=function(_,W){var Pe=ct[_t[_]];return k("q"),k(W.toString()+" cm"),k("/"+Pe.id+" Do"),k("Q"),this},f.getFormObject=function(_){var W=ct[_t[_]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},f.save=function(_,W){return _=_||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(jA(Qo(sn()),_),typeof jA.unload=="function"&&mr.setTimeout&&setTimeout(jA.unload,911),this):new Promise(function(Pe,Ke){try{var nt=jA(Qo(sn()),_);typeof jA.unload=="function"&&mr.setTimeout&&setTimeout(jA.unload,911),Pe(nt)}catch(Bt){Ke(Bt.message)}})},pr.API)pr.API.hasOwnProperty(Sl)&&(Sl==="events"&&pr.API.events.length?function(_,W){var Pe,Ke,nt;for(nt=W.length-1;nt!==-1;nt--)Pe=W[nt][0],Ke=W[nt][1],_.subscribe.apply(_,[Pe].concat(typeof Ke=="function"?[Ke]:Ke))}(Xe,pr.API.events):f[Sl]=pr.API[Sl]);var UA=f.getPageWidth=function(_){return(Re[_=_||E].mediaBox.topRightX-Re[_].mediaBox.bottomLeftX)/De},fc=f.setPageWidth=function(_,W){Re[_].mediaBox.topRightX=W*De+Re[_].mediaBox.bottomLeftX},ka=f.getPageHeight=function(_){return(Re[_=_||E].mediaBox.topRightY-Re[_].mediaBox.bottomLeftY)/De},pc=f.setPageHeight=function(_,W){Re[_].mediaBox.topRightY=W*De+Re[_].mediaBox.bottomLeftY};return f.internal={pdfEscape:Qr,getStyle:_s,getFont:kg,getFontSize:ke,getCharSpace:Ng,getTextColor:Dg,getLineHeight:Xu,getLineHeightFactor:Ju,getLineWidth:xl,write:pe,getHorizontalCoordinate:Fi,getVerticalCoordinate:ea,getCoordinateString:Og,getVerticalCoordinateString:Pa,collections:{},newObject:mt,newAdditionalObject:zt,newObjectDeferred:Lt,newObjectDeferredBegin:Pt,getFilters:Ot,putStream:Mt,events:Xe,scaleFactor:De,pageSize:{getWidth:function(){return UA(E)},setWidth:function(_){fc(E,_)},getHeight:function(){return ka(E)},setHeight:function(_){pc(E,_)}},encryptionOptions:c,encryption:Un,getEncryptor:Zs,output:ks,getNumberOfPages:bo,pages:he,out:k,f2:we,f3:O,getPageInfo:Ta,getPageInfoByObjId:yr,getCurrentPageInfo:Tr,getPDFVersion:m,Point:Cl,Rectangle:uc,Matrix:et,hasHotfix:Si},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return UA(E)},set:function(_){fc(E,_)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ka(E)},set:function(_){pc(E,_)},enumerable:!0,configurable:!0}),ns.call(f,ye),Ne="F1",Ro(o,t),Xe.publish("initialized"),f}hd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},hd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},hd.prototype.processOwnerPassword=function(n,e){return Bm(_m(e).substr(0,5),n)},hd.prototype.encryptor=function(n,e){var t=_m(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Bm(t,r)}},Lp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||dn(n)!==dn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},pr.API={events:[]},pr.version="3.0.0";var Mn=pr.API,V1=1,Bl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ad=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Br=function(n){return n.toFixed(2)},Ja=function(n){return n.toFixed(5)};Mn.__acroform__={};var ys=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},ab=function(n){return n*V1},Pi=function(n){var e=new Zx,t=er.internal.getHeight(n)||0,r=er.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Br(r)),Number(Br(t))],e},kD=Mn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},OD=Mn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},DD=Mn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Wn=Mn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DD(n,e-1)},Xn=Mn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kD(n,e-1)},Yn=Mn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return OD(n,e-1)},ND=Mn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],s=n[1],i=n[2],a=n[3],A={};return A.lowerLeft_X=t(o)||0,A.lowerLeft_Y=r(s+a)||0,A.upperRight_X=t(o+i)||0,A.upperRight_Y=r(s)||0,[Number(Br(A.lowerLeft_X)),Number(Br(A.lowerLeft_Y)),Number(Br(A.upperRight_X)),Number(Br(A.upperRight_Y))]},MD=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=xm(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Br(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Pi(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},xm=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(O){return O.split(`
`)}):o.map(function(O){return[O]});var s=t,i=er.internal.getHeight(n)||0;i=i<0?-i:i;var a=er.internal.getWidth(n)||0;a=a<0?-a:a;var A=function(O,D,Z){if(O+1<o.length){var ie=D+" "+o[O+1][0];return Ef(ie,n,Z).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var d,c,u=Ef("3",n,s).height,h=n.multiline?i-s:(i-u)/2,f=h+=2,g=0,m=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ef(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var b="",S=0,F=0;F<o.length;F++)if(o.hasOwnProperty(F)){var P=!1;if(o[F].length!==1&&y!==o[F].length-1){if((u+2)*(S+2)+2>i)continue e;b+=o[F][y],P=!0,m=F,F--}else{b=(b+=o[F][y]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var L=parseInt(F),re=A(L,b,s),K=F>=o.length-1;if(re&&!K){b+=" ",y=0;continue}if(re||K){if(K)m=L;else if(n.multiline&&(u+2)*(S+2)+2>i)continue e}else{if(!n.multiline||(u+2)*(S+2)+2>i)continue e;m=L}}for(var H="",J=g;J<=m;J++){var we=o[J];if(n.multiline){if(J===m){H+=we[y]+" ",y=(y+1)%we.length;continue}if(J===g){H+=we[we.length-1]+" ";continue}}H+=we[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,c=Ef(H,n,s).width,n.textAlign){case"right":d=a-c-2;break;case"center":d=(a-c)/2;break;case"left":default:d=2}e+=Br(d)+" "+Br(f)+` Td
`,e+="("+Bl(H)+`) Tj
`,e+=-Br(d)+` 0 Td
`,f=-(s+2),c=0,g=P?m:m+1,S++,b=""}break}return r.text=e,r.fontSize=s,r},Ef=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},HD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jD=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},RD=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),dn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},qD=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(_i.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(HD)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");V1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new ez,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.objId=void 0,s.hasAnnotation&&jD(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var s=!r;for(var i in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var a=r[i],A=[],d=a.Rect;if(a.Rect&&(a.Rect=ND(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=er.createDefaultAppearanceStream(a),dn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(A=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=MD(a);A.push({key:"AP",value:"<</N "+c+">>"}),o.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var g=f[i];typeof g=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g+" ",o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g,o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:a.objId}),o.internal.out("endobj")}s&&RD(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Jx=Mn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(i){return i};if(Array.isArray(n)){for(var o="[",s=0;s<n.length;s++)switch(s!==0&&(o+=" "),dn(n[s])){case"boolean":case"number":case"object":o+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+Bl(r(n[s].toString()))+")"):o+=n[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Zv=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Bl(r(n))+")"},Ni=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ni.prototype.toString=function(){return this.objId+" 0 R"},Ni.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ni.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:Jx(o,this.objId,this.scope)}):o instanceof Ni?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var Zx=function(){Ni.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ys(Zx,Ni);var ez=function(){Ni.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Bl(t(n))+")"}},set:function(t){n=t}})};ys(ez,Ni);var _i=function n(){Ni.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wn(e,3)},set:function(b){b?this.F=Xn(e,3):this.F=Yn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Pp)return;s="FieldObject"+n.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Bl(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(b){i=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(b){A=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/V1:d},set:function(b){d=b}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Pp||this instanceof ll))return Zv(u,this.objId,this.scope)},set:function(b){b=b.toString(),u=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof mo?h:Zv(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof mo?b:b.substr(0,1)==="("?ad(b.substr(1,b.length-2)):ad(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mo?ad(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof mo?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof mo?f:Zv(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=this instanceof mo?b:b.substr(0,1)==="("?ad(b.substr(1,b.length-2)):ad(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mo?ad(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof mo?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(b){b=!!b,m=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(b){g=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,1)},set:function(b){b?this.Ff=Xn(this.Ff,1):this.Ff=Yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,2)},set:function(b){b?this.Ff=Xn(this.Ff,2):this.Ff=Yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,3)},set:function(b){b?this.Ff=Xn(this.Ff,3):this.Ff=Yn(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');y=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(y){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};ys(_i,Ni);var Ud=function(){_i.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Jx(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(s,i,a){a||(a=1);for(var A,d=[];A=i.exec(s);)d.push(A[a]);return d}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,18)},set:function(t){t?this.Ff=Xn(this.Ff,18):this.Ff=Yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Xn(this.Ff,19):this.Ff=Yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,20)},set:function(t){t?(this.Ff=Xn(this.Ff,20),e.sort()):this.Ff=Yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,22)},set:function(t){t?this.Ff=Xn(this.Ff,22):this.Ff=Yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(t){t?this.Ff=Xn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,27)},set:function(t){t?this.Ff=Xn(this.Ff,27):this.Ff=Yn(this.Ff,27)}}),this.hasAppearanceStream=!1};ys(Ud,_i);var Td=function(){Ud.call(this),this.fontName="helvetica",this.combo=!1};ys(Td,Ud);var Ld=function(){Td.call(this),this.combo=!0};ys(Ld,Td);var Kf=function(){Ld.call(this),this.edit=!0};ys(Kf,Ld);var mo=function(){_i.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,15)},set:function(t){t?this.Ff=Xn(this.Ff,15):this.Ff=Yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,16)},set:function(t){t?this.Ff=Xn(this.Ff,16):this.Ff=Yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,17)},set:function(t){t?this.Ff=Xn(this.Ff,17):this.Ff=Yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(t){t?this.Ff=Xn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+Bl(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){dn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ys(mo,_i);var $f=function(){mo.call(this),this.pushButton=!0};ys($f,mo);var Pd=function(){mo.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ys(Pd,mo);var Pp=function(){var n,e;_i.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+Bl(o(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(o){dn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=er.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ys(Pp,_i),Pd.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Pd.prototype.createOption=function(n){var e=new Pp;return e.Parent=this,e.optionName=n,this.Kids.push(e),KD.call(this.scope,e),e};var Vf=function(){mo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=er.CheckBox.createAppearanceStream()};ys(Vf,mo);var ll=function(){_i.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,13)},set:function(e){e?this.Ff=Xn(this.Ff,13):this.Ff=Yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,21)},set:function(e){e?this.Ff=Xn(this.Ff,21):this.Ff=Yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(e){e?this.Ff=Xn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,24)},set:function(e){e?this.Ff=Xn(this.Ff,24):this.Ff=Yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,25)},set:function(e){e?this.Ff=Xn(this.Ff,25):this.Ff=Yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(e){e?this.Ff=Xn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ys(ll,_i);var Gf=function(){ll.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,14)},set:function(n){n?this.Ff=Xn(this.Ff,14):this.Ff=Yn(this.Ff,14)}}),this.password=!0};ys(Gf,ll);var er={CheckBox:{createAppearanceStream:function(){return{N:{On:er.CheckBox.YesNormal},D:{On:er.CheckBox.YesPushDown,Off:er.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),s=xm(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Br(er.internal.getWidth(n))+" "+Br(er.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Br(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Pi(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],s=er.internal.getHeight(n),i=er.internal.getWidth(n),a=xm(n,n.caption);return o.push("1 g"),o.push("0 0 "+Br(i)+" "+Br(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Br(i-1)+" "+Br(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+Br(a.fontSize)+" Tf "+r),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Br(er.internal.getWidth(n))+" "+Br(er.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:er.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=er.RadioButton.Circle.YesNormal,e.D[n]=er.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Pi(n);e.scope=n.scope;var t=[],r=er.internal.getWidth(n)<=er.internal.getHeight(n)?er.internal.getWidth(n)/4:er.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=er.internal.Bezier_C,s=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ja(er.internal.getWidth(n)/2)+" "+Ja(er.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=[],r=er.internal.getWidth(n)<=er.internal.getHeight(n)?er.internal.getWidth(n)/4:er.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*er.internal.Bezier_C).toFixed(5)),i=Number((r*er.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ja(er.internal.getWidth(n)/2)+" "+Ja(er.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ja(er.internal.getWidth(n)/2)+" "+Ja(er.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=[],r=er.internal.getWidth(n)<=er.internal.getHeight(n)?er.internal.getWidth(n)/4:er.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*er.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ja(er.internal.getWidth(n)/2)+" "+Ja(er.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:er.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=er.RadioButton.Cross.YesNormal,e.D[n]=er.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Pi(n);e.scope=n.scope;var t=[],r=er.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Br(er.internal.getWidth(n)-2)+" "+Br(er.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Br(r.x1.x)+" "+Br(r.x1.y)+" m"),t.push(Br(r.x2.x)+" "+Br(r.x2.y)+" l"),t.push(Br(r.x4.x)+" "+Br(r.x4.y)+" m"),t.push(Br(r.x3.x)+" "+Br(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=er.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Br(er.internal.getWidth(n))+" "+Br(er.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Br(er.internal.getWidth(n)-2)+" "+Br(er.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Br(t.x1.x)+" "+Br(t.x1.y)+" m"),r.push(Br(t.x2.x)+" "+Br(t.x2.y)+" l"),r.push(Br(t.x4.x)+" "+Br(t.x4.y)+" m"),r.push(Br(t.x3.x)+" "+Br(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Pi(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Br(er.internal.getWidth(n))+" "+Br(er.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};er.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=er.internal.getWidth(n),t=er.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},er.internal.getWidth=function(n){var e=0;return dn(n)==="object"&&(e=ab(n.Rect[2])),e},er.internal.getHeight=function(n){var e=0;return dn(n)==="object"&&(e=ab(n.Rect[3])),e};var KD=Mn.addField=function(n){if(qD(this,n),!(n instanceof _i))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Mn.AcroFormChoiceField=Ud,Mn.AcroFormListBox=Td,Mn.AcroFormComboBox=Ld,Mn.AcroFormEditBox=Kf,Mn.AcroFormButton=mo,Mn.AcroFormPushButton=$f,Mn.AcroFormRadioButton=Pd,Mn.AcroFormCheckBox=Vf,Mn.AcroFormTextField=ll,Mn.AcroFormPasswordField=Gf,Mn.AcroFormAppearance=er,Mn.AcroForm={ChoiceField:Ud,ListBox:Td,ComboBox:Ld,EditBox:Kf,Button:mo,PushButton:$f,RadioButton:Pd,CheckBox:Vf,TextField:ll,PasswordField:Gf,Appearance:er},pr.AcroForm={ChoiceField:Ud,ListBox:Td,ComboBox:Ld,EditBox:Kf,Button:mo,PushButton:$f,RadioButton:Pd,CheckBox:Vf,TextField:ll,PasswordField:Gf,Appearance:er};pr.AcroForm;function tz(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(O,D){var Z,ie,de,ne,fe,$=e;if((D=D||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(re(O))for(fe in t)for(de=t[fe],Z=0;Z<de.length;Z+=1){for(ne=!0,ie=0;ie<de[Z].length;ie+=1)if(de[Z][ie]!==void 0&&de[Z][ie]!==O[ie]){ne=!1;break}if(ne===!0){$=fe;break}}else for(fe in t)for(de=t[fe],Z=0;Z<de.length;Z+=1){for(ne=!0,ie=0;ie<de[Z].length;ie+=1)if(de[Z][ie]!==void 0&&de[Z][ie]!==O.charCodeAt(ie)){ne=!1;break}if(ne===!0){$=fe;break}}return $===e&&D!==e&&($=D),$},o=function O(D){for(var Z=this.internal.write,ie=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:D.width}),ne.push({key:"Height",value:D.height}),D.colorSpace===y.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===y.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var fe="",$=0,q=D.transparency.length;$<q;$++)fe+=D.transparency[$]+" "+D.transparency[$]+" ";ne.push({key:"Mask",value:"["+fe+"]"})}D.sMask!==void 0&&ne.push({key:"SMask",value:D.objectId+1+" 0 R"});var se=D.filter!==void 0?["/"+D.filter]:void 0;if(ie({data:D.data,additionalKeyValues:ne,alreadyAppliedFilters:se,objectId:D.objectId}),Z("endobj"),"sMask"in D&&D.sMask!==void 0){var Ae="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,x={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:Ae,data:D.sMask};"filter"in D&&(x.filter=D.filter),O.call(this,x)}if(D.colorSpace===y.INDEXED){var E=this.internal.newObject();ie({data:H(new Uint8Array(D.palette)),objectId:E}),Z("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var D in O)o.call(this,O[D])},i=function(){var O,D=this.internal.collections.addImage_images,Z=this.internal.write;for(var ie in D)Z("/I"+(O=D[ie]).index,O.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},A=function(){var O=this.internal.collections.addImage_images;return a.call(this),O},d=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(O){return typeof n["process"+O.toUpperCase()]=="function"},u=function(O){return dn(O)==="object"&&O.nodeType===1},h=function(O,D){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var Z=""+O.getAttribute("src");if(Z.indexOf("data:image/")===0)return hu(unescape(Z).split("base64,").pop());var ie=n.loadFile(Z,!0);if(ie!==void 0)return ie}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var de;switch(D){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;case"JPEG":case"JPG":default:de="image/jpeg"}return hu(O.toDataURL(de,1).split("base64,").pop())}},f=function(O){var D=this.internal.collections.addImage_images;if(D){for(var Z in D)if(O===D[Z].alias)return D[Z]}},g=function(O,D,Z){return O||D||(O=-96,D=-96),O<0&&(O=-1*Z.width*72/O/this.internal.scaleFactor),D<0&&(D=-1*Z.height*72/D/this.internal.scaleFactor),O===0&&(O=D*Z.width/Z.height),D===0&&(D=O*Z.height/Z.width),[O,D]},m=function(O,D,Z,ie,de,ne){var fe=g.call(this,Z,ie,de),$=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,se=A.call(this);if(Z=fe[0],ie=fe[1],se[de.index]=de,ne){ne*=Math.PI/180;var Ae=Math.cos(ne),x=Math.sin(ne),E=function(U){return U.toFixed(4)},I=[E(Ae),E(x),E(-1*x),E(Ae),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,$(O),q(D+ie),"cm"].join(" ")),this.internal.write(I.join(" ")),this.internal.write([$(Z),"0","0",$(ie),"0","0","cm"].join(" "))):this.internal.write([$(Z),"0","0",$(ie),$(O),q(D+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=n.__addimage__.sHashCode=function(O){var D,Z,ie=0;if(typeof O=="string")for(Z=O.length,D=0;D<Z;D++)ie=(ie<<5)-ie+O.charCodeAt(D),ie|=0;else if(re(O))for(Z=O.byteLength/2,D=0;D<Z;D++)ie=(ie<<5)-ie+O[D],ie|=0;return ie},F=n.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var D=!0;return O.length===0&&(D=!1),O.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(D=!1),D},P=n.__addimage__.extractImageFromDataUrl=function(O){var D=(O=O||"").split("base64,"),Z=null;if(D.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(ie)&&(Z={mimeType:ie[1],charset:ie[2],data:D[1]})}return Z},L=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(O){return L()&&O instanceof ArrayBuffer};var re=n.__addimage__.isArrayBufferView=function(O){return L()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},K=n.__addimage__.binaryStringToUint8Array=function(O){for(var D=O.length,Z=new Uint8Array(D),ie=0;ie<D;ie++)Z[ie]=O.charCodeAt(ie);return Z},H=n.__addimage__.arrayBufferToBinaryString=function(O){for(var D="",Z=re(O)?O:new Uint8Array(O),ie=0;ie<Z.length;ie+=8192)D+=String.fromCharCode.apply(null,Z.subarray(ie,ie+8192));return D};n.addImage=function(){var O,D,Z,ie,de,ne,fe,$,q;if(typeof arguments[1]=="number"?(D=e,Z=arguments[1],ie=arguments[2],de=arguments[3],ne=arguments[4],fe=arguments[5],$=arguments[6],q=arguments[7]):(D=arguments[1],Z=arguments[2],ie=arguments[3],de=arguments[4],ne=arguments[5],fe=arguments[6],$=arguments[7],q=arguments[8]),dn(O=arguments[0])==="object"&&!u(O)&&"imageData"in O){var se=O;O=se.imageData,D=se.format||D||e,Z=se.x||Z||0,ie=se.y||ie||0,de=se.w||se.width||de,ne=se.h||se.height||ne,fe=se.alias||fe,$=se.compression||$,q=se.rotation||se.angle||q}var Ae=this.internal.getFilters();if($===void 0&&Ae.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(Z)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var x=J.call(this,O,D,fe,$);return m.call(this,Z,ie,de,ne,x,q),this};var J=function(O,D,Z,ie){var de,ne,fe;if(typeof O=="string"&&r(O)===e){O=unescape(O);var $=we(O,!1);($!==""||($=n.loadFile(O,!0))!==void 0)&&(O=$)}if(u(O)&&(O=h(O,D)),D=r(O,D),!c(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((fe=Z)==null||fe.length===0)&&(Z=function(q){return typeof q=="string"||re(q)?S(q):re(q.data)?S(q.data):null}(O)),(de=f.call(this,Z))||(L()&&(O instanceof Uint8Array||D==="RGBA"||(ne=O,O=K(O))),de=this["process"+D.toUpperCase()](O,d.call(this),Z,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in n.image_compression?q:b.NONE}(ie),ne)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},we=n.__addimage__.convertBase64ToBinaryString=function(O,D){var Z;D=typeof D!="boolean"||D;var ie,de="";if(typeof O=="string"){ie=(Z=P(O))!==null?Z.data:O;try{de=hu(ie)}catch(ne){if(D)throw F(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return de};n.getImageProperties=function(O){var D,Z,ie="";if(u(O)&&(O=h(O)),typeof O=="string"&&r(O)===e&&((ie=we(O,!1))===""&&(ie=n.loadFile(O)||""),O=ie),Z=r(O),!c(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(!L()||O instanceof Uint8Array||(O=K(O)),!(D=this["process"+Z.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=Z,D}})(pr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};pr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,c=!1,u=0;u<d.length&&!c;u++)switch((r=d[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){r=d[h];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(m.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(b(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+f(b(S))+") >>",m.content=s;var F=m.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+i(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+F,r.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(m.objId,"0 R",y.objId,"0 R");break;case"freetext":o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var P=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+f(g(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var L=this.annotations._nameMap[r.options.name];r.options.pageNumber=L.page,r.options.top=L.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var re=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+re+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,s,i){var a=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:A(t),y:d(r),w:A(t+o),h:d(r+s)},options:i,type:"link"})},n.textWithLink=function(t,r,o,s){var i,a,A=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;i=Math.ceil(d*c)}else a=A,i=d;return this.text(t,r,o,s),o+=.2*d,s.align==="center"&&(r-=A/2),s.align==="right"&&(r-=A),this.link(r,o-d,a,i,s),A},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(pr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=n.__arabicParser__.isArabicEndLetter=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length<=2},A=n.__arabicParser__.isArabicAlfLetter=function(m){return i(m)&&o.indexOf(m.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(m){return i(m)&&s(m)&&e[m.charCodeAt(0)].length==4},u=n.__arabicParser__.resolveLigatures=function(m){var y=0,b=t,S="",F=0;for(y=0;y<m.length;y+=1)b[m.charCodeAt(y)]!==void 0?(F++,typeof(b=b[m.charCodeAt(y)])=="number"&&(S+=String.fromCharCode(b),b=t,F=0),y===m.length-1&&(b=t,S+=m.charAt(y-(F-1)),y-=F-1,F=0)):(b=t,S+=m.charAt(y-F),y-=F,F=0);return S};n.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(m,y,b){return i(m)?s(m)===!1?-1:!d(m)||!i(y)&&!i(b)||!i(b)&&a(y)||a(m)&&!i(y)||a(m)&&A(y)||a(m)&&a(y)?0:c(m)&&i(y)&&!a(y)&&i(b)&&d(b)?3:a(m)||!i(b)?1:2:-1},f=function(m){var y=0,b=0,S=0,F="",P="",L="",re=(m=m||"").split("\\s+"),K=[];for(y=0;y<re.length;y+=1){for(K.push(""),b=0;b<re[y].length;b+=1)F=re[y][b],P=re[y][b-1],L=re[y][b+1],i(F)?(S=h(F,P,L),K[y]+=S!==-1?String.fromCharCode(e[F.charCodeAt(0)][S]):F):K[y]+=F;K[y]=u(K[y])}return K.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var m,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(y)){var S=0;for(b=[],S=0;S<y.length;S+=1)Array.isArray(y[S])?b.push([f(y[S][0]),y[S][1],y[S][2]]):b.push([f(y[S])]);m=b}else m=f(y);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};n.events.push(["preProcessText",g])}(pr.API),pr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(pr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(m){A=m}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},n.getTextDimensions=function(A,d){r.call(this);var c=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,f=0,g=0,m=0,y=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var b=d.maxWidth;b>0?typeof A=="string"?A=this.splitTextToSize(A,b):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(F,P){return F.concat(y.splitTextToSize(P,b))},[])):A=Array.isArray(A)?A:[A];for(var S=0;S<A.length;S++)f<(m=this.getStringUnitWidth(A[S],{font:u})*c)&&(f=m);return f!==0&&(g=A.length),{w:f/=h,h:Math.max((g*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===A.lineNumber?(A.x=(d.x||0)+(d.width||0),A.y=d.y||0):d.y+d.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,f&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=d.y+d.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};n.table=function(A,d,c,u,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var f,g,m,y,b=[],S=[],F=[],P={},L={},re=[],K=[],H=(h=h||{}).autoSize||!1,J=h.printHeaders!==!1,we=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,O=h.margins||Object.assign({width:this.getPageWidth()},e),D=typeof h.padding=="number"?h.padding:3,Z=h.headerBackgroundColor||"#c8c8c8",ie=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=we,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=ie,this.setFontSize(we),u==null)S=b=Object.keys(c[0]),F=b.map(function(){return"left"});else if(Array.isArray(u)&&dn(u[0])==="object")for(b=u.map(function(se){return se.name}),S=u.map(function(se){return se.prompt||se.name||""}),F=u.map(function(se){return se.align||"left"}),f=0;f<u.length;f+=1)L[u[f].name]=u[f].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(S=b=u,F=b.map(function(){return"left"}));if(H||Array.isArray(u)&&typeof u[0]=="string")for(f=0;f<b.length;f+=1){for(P[y=b[f]]=c.map(function(se){return se[y]}),this.setFont(void 0,"bold"),re.push(this.getTextDimensions(S[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=P[y],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)re.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[y]=Math.max.apply(null,re)+D+D,re=[]}if(J){var de={};for(f=0;f<b.length;f+=1)de[b[f]]={},de[b[f]].text=S[f],de[b[f]].align=F[f];var ne=a.call(this,de,L);K=b.map(function(se){return new s(A,d,L[se],ne,de[se].text,void 0,de[se].align)}),this.setTableHeaderRow(K),this.printHeaderRow(1,!1)}var fe=u.reduce(function(se,Ae){return se[Ae.name]=Ae.align,se},{});for(f=0;f<c.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:c[f]},this);var $=a.call(this,c[f],L);for(m=0;m<b.length;m+=1){var q=c[f][b[m]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:m,data:q},this),i.call(this,new s(A,d,L[b[m]],$,q,f+2,fe[b[m]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=d,this};var a=function(A,d){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(f){var g=A[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[f]-c-c)},this).map(function(f){return this.getLineHeightFactor()*f.length*u/h+c+c},this).reduce(function(f,g){return Math.max(f,g)},0)};n.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},n.printHeaderRow=function(A,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){c=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,c),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(pr.API);var rz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zm=tz(nz),oz=[100,200,300,400,500,600,700,800,900],$D=tz(oz);function Cm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return rz[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(s){return typeof zm[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function Ab(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var VD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function db(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function GD(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},VD,t.genericFontFamilies||{}),s=null,i=null,a=0;a<e.length;++a)if(o[(s=Cm(e[a])).family]&&(s.family=o[s.family]),n.hasOwnProperty(s.family)){i=n[s.family];break}if(!(i=i||n[r]))throw new Error("Could not find a font-family for the rule '"+db(s)+"' and default family '"+r+"'.");if(i=function(A,d){if(d[A])return d[A];var c=zm[A],u=c<=zm.normal?-1:1,h=Ab(d,nz,c,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+A);return h}(s.stretch,i),i=function(A,d){if(d[A])return d[A];for(var c=rz[A],u=0;u<c.length;++u)if(d[c[u]])return d[c[u]];throw new Error("Could not find a matching font-style for "+A)}(s.style,i),!(i=function(A,d){if(d[A])return d[A];if(A===400&&d[500])return d[500];if(A===500&&d[400])return d[400];var c=$D[A],u=Ab(d,oz,c,A<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+A);return u}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+db(s)+"'.");return i}function cb(n){return n.trimLeft()}function WD(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function XD(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Ff,ub,hb,e0=["times"];(function(n){var e,t,r,o,s,i,a,A,d,c=function(x){return x=x||{},this.isStrokeTransparent=x.isStrokeTransparent||!1,this.strokeOpacity=x.strokeOpacity||1,this.strokeStyle=x.strokeStyle||"#000000",this.fillStyle=x.fillStyle||"#000000",this.isFillTransparent=x.isFillTransparent||!1,this.fillOpacity=x.fillOpacity||1,this.font=x.font||"10px sans-serif",this.textBaseline=x.textBaseline||"alphabetic",this.textAlign=x.textAlign||"left",this.lineWidth=x.lineWidth||1,this.lineJoin=x.lineJoin||"miter",this.lineCap=x.lineCap||"butt",this.path=x.path||[],this.transform=x.transform!==void 0?x.transform.clone():new A,this.globalCompositeOperation=x.globalCompositeOperation||"normal",this.globalAlpha=x.globalAlpha||1,this.clip_path=x.clip_path||[],this.currentPoint=x.currentPoint||new i,this.miterLimit=x.miterLimit||10,this.lastPoint=x.lastPoint||new i,this.lineDashOffset=x.lineDashOffset||0,this.lineDash=x.lineDash||[],this.margin=x.margin||[0,0,0,0],this.prevPageLastElemOffset=x.prevPageLastElemOffset||0,this.ignoreClearRect=typeof x.ignoreClearRect!="boolean"||x.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,a=this.internal.Rectangle,A=this.internal.Matrix,d=new c}]);var u=function(x){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=x;Object.defineProperty(this,"pdf",{get:function(){return E}});var I=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return I},set:function(Y){I=!!Y}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(Y){U=!!Y}});var M=0;Object.defineProperty(this,"posX",{get:function(){return M},set:function(Y){isNaN(Y)||(M=Y)}});var j=0;Object.defineProperty(this,"posY",{get:function(){return j},set:function(Y){isNaN(Y)||(j=Y)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Y){var k;typeof Y=="number"?k=[Y,Y,Y,Y]:((k=new Array(4))[0]=Y[0],k[1]=Y.length>=2?Y[1]:k[0],k[2]=Y.length>=3?Y[2]:k[0],k[3]=Y.length>=4?Y[3]:k[1]),d.margin=k}});var V=!1;Object.defineProperty(this,"autoPaging",{get:function(){return V},set:function(Y){V=Y}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(Y){X=Y}});var R=[];Object.defineProperty(this,"pageBreaks",{get:function(){return R},set:function(Y){R=Y}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Y){Y instanceof c&&(d=Y)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Y){d.path=Y}});var he=[];Object.defineProperty(this,"ctxStack",{get:function(){return he},set:function(Y){he=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var k;k=h(Y),this.ctx.fillStyle=k.style,this.ctx.isFillTransparent=k.a===0,this.ctx.fillOpacity=k.a,this.pdf.setFillColor(k.r,k.g,k.b,{a:k.a}),this.pdf.setTextColor(k.r,k.g,k.b,{a:k.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var k=h(Y);this.ctx.strokeStyle=k.style,this.ctx.isStrokeTransparent=k.a===0,this.ctx.strokeOpacity=k.a,k.a===0?this.pdf.setDrawColor(255,255,255):(k.a,this.pdf.setDrawColor(k.r,k.g,k.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var xe=null;function Be(Y,k){if(xe===null){var pe=function(ze){var ye=[];return Object.keys(ze).forEach(function(le){ze[le].forEach(function(Ce){var ke=null;switch(Ce){case"bold":ke={family:le,weight:"bold"};break;case"italic":ke={family:le,style:"italic"};break;case"bolditalic":ke={family:le,weight:"bold",style:"italic"};break;case"":case"normal":ke={family:le}}ke!==null&&(ke.ref={name:le,style:Ce},ye.push(ke))})}),ye}(Y.getFontList());xe=function(ze){for(var ye={},le=0;le<ze.length;++le){var Ce=Cm(ze[le]),ke=Ce.family,ce=Ce.stretch,ee=Ce.style,N=Ce.weight;ye[ke]=ye[ke]||{},ye[ke][ce]=ye[ke][ce]||{},ye[ke][ce][ee]=ye[ke][ce][ee]||{},ye[ke][ce][ee][N]=Ce}return ye}(pe.concat(k))}return xe}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(Y){xe=null,Le=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var k;if(this.ctx.font=Y,(k=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Y))!==null){var pe=k[1],ze=(k[2],k[3]),ye=k[4],le=(k[5],k[6]),Ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(Ce==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:Ce==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var ke=function(me){var Ne,De,qe=[],Qe=me.trim();if(Qe==="")return e0;if(Qe in lb)return[lb[Qe]];for(;Qe!=="";){switch(De=null,Ne=(Qe=cb(Qe)).charAt(0)){case'"':case"'":De=WD(Qe.substring(1),Ne);break;default:De=XD(Qe)}if(De===null||(qe.push(De[0]),(Qe=cb(De[1]))!==""&&Qe.charAt(0)!==","))return e0;Qe=Qe.replace(/^,/,"")}return qe}(le);if(this.fontFaces){var ce=GD(Be(this.pdf,this.fontFaces),ke.map(function(me){return{family:me,stretch:"normal",weight:ze,style:pe}}));this.pdf.setFont(ce.ref.name,ce.ref.style)}else{var ee="";(ze==="bold"||parseInt(ze,10)>=700||pe==="bold")&&(ee="bold"),pe==="italic"&&(ee+="italic"),ee.length===0&&(ee="normal");for(var N="",_e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<ke.length;ve++){if(this.pdf.internal.getFont(ke[ve],ee,{noFallback:!0,disableWarning:!0})!==void 0){N=ke[ve];break}if(ee==="bolditalic"&&this.pdf.internal.getFont(ke[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)N=ke[ve],ee="bold";else if(this.pdf.internal.getFont(ke[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){N=ke[ve],ee="normal";break}}if(N===""){for(var Se=0;Se<ke.length;Se++)if(_e[ke[Se]]){N=_e[ke[Se]];break}}N=N===""?"Times":N,this.pdf.setFont(N,ee)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};u.prototype.setLineDash=function(x){this.lineDash=x},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){P.call(this,"fill",!1)},u.prototype.stroke=function(){P.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(x,E){if(isNaN(x)||isNaN(E))throw wn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var I=this.ctx.transform.applyToPoint(new i(x,E));this.path.push({type:"mt",x:I.x,y:I.y}),this.ctx.lastPoint=new i(x,E)},u.prototype.closePath=function(){var x=new i(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&dn(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){x=new i(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(x.x,x.y)},u.prototype.lineTo=function(x,E){if(isNaN(x)||isNaN(E))throw wn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var I=this.ctx.transform.applyToPoint(new i(x,E));this.path.push({type:"lt",x:I.x,y:I.y}),this.ctx.lastPoint=new i(I.x,I.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},u.prototype.quadraticCurveTo=function(x,E,I,U){if(isNaN(I)||isNaN(U)||isNaN(x)||isNaN(E))throw wn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var M=this.ctx.transform.applyToPoint(new i(I,U)),j=this.ctx.transform.applyToPoint(new i(x,E));this.path.push({type:"qct",x1:j.x,y1:j.y,x:M.x,y:M.y}),this.ctx.lastPoint=new i(M.x,M.y)},u.prototype.bezierCurveTo=function(x,E,I,U,M,j){if(isNaN(M)||isNaN(j)||isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U))throw wn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var V=this.ctx.transform.applyToPoint(new i(M,j)),X=this.ctx.transform.applyToPoint(new i(x,E)),R=this.ctx.transform.applyToPoint(new i(I,U));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:R.x,y2:R.y,x:V.x,y:V.y}),this.ctx.lastPoint=new i(V.x,V.y)},u.prototype.arc=function(x,E,I,U,M,j){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U)||isNaN(M))throw wn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(j=!!j,!this.ctx.transform.isIdentity){var V=this.ctx.transform.applyToPoint(new i(x,E));x=V.x,E=V.y;var X=this.ctx.transform.applyToPoint(new i(0,I)),R=this.ctx.transform.applyToPoint(new i(0,0));I=Math.sqrt(Math.pow(X.x-R.x,2)+Math.pow(X.y-R.y,2))}Math.abs(M-U)>=2*Math.PI&&(U=0,M=2*Math.PI),this.path.push({type:"arc",x,y:E,radius:I,startAngle:U,endAngle:M,counterclockwise:j})},u.prototype.arcTo=function(x,E,I,U,M){throw new Error("arcTo not implemented.")},u.prototype.rect=function(x,E,I,U){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U))throw wn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(x,E),this.lineTo(x+I,E),this.lineTo(x+I,E+U),this.lineTo(x,E+U),this.lineTo(x,E),this.lineTo(x+I,E),this.lineTo(x,E)},u.prototype.fillRect=function(x,E,I,U){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U))throw wn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var M={};this.lineCap!=="butt"&&(M.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(M.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(x,E,I,U),this.fill(),M.hasOwnProperty("lineCap")&&(this.lineCap=M.lineCap),M.hasOwnProperty("lineJoin")&&(this.lineJoin=M.lineJoin)}},u.prototype.strokeRect=function(x,E,I,U){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U))throw wn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(x,E,I,U),this.stroke())},u.prototype.clearRect=function(x,E,I,U){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U))throw wn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(x,E,I,U))},u.prototype.save=function(x){x=typeof x!="boolean"||x;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,I=0;I<this.pdf.internal.getNumberOfPages();I++)this.pdf.setPage(I+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),x){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},u.prototype.restore=function(x){x=typeof x!="boolean"||x;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,I=0;I<this.pdf.internal.getNumberOfPages();I++)this.pdf.setPage(I+1),this.pdf.internal.out("Q");this.pdf.setPage(E),x&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(x){var E,I,U,M;if(x.isCanvasGradient===!0&&(x=x.getColor()),!x)return{r:0,g:0,b:0,a:0,style:x};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(x))E=0,I=0,U=0,M=0;else{var j=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(x);if(j!==null)E=parseInt(j[1]),I=parseInt(j[2]),U=parseInt(j[3]),M=1;else if((j=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(x))!==null)E=parseInt(j[1]),I=parseInt(j[2]),U=parseInt(j[3]),M=parseFloat(j[4]);else{if(M=1,typeof x=="string"&&x.charAt(0)!=="#"){var V=new Wx(x);x=V.ok?V.toHex():"#000000"}x.length===4?(E=x.substring(1,2),E+=E,I=x.substring(2,3),I+=I,U=x.substring(3,4),U+=U):(E=x.substring(1,3),I=x.substring(3,5),U=x.substring(5,7)),E=parseInt(E,16),I=parseInt(I,16),U=parseInt(U,16)}}return{r:E,g:I,b:U,a:M,style:x}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(x,E,I,U){if(isNaN(E)||isNaN(I)||typeof x!="string")throw wn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!f.call(this)){var M=$(this.ctx.transform.rotation),j=this.ctx.transform.scaleX;D.call(this,{text:x,x:E,y:I,scale:j,angle:M,align:this.textAlign,maxWidth:U})}},u.prototype.strokeText=function(x,E,I,U){if(isNaN(E)||isNaN(I)||typeof x!="string")throw wn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){U=isNaN(U)?void 0:U;var M=$(this.ctx.transform.rotation),j=this.ctx.transform.scaleX;D.call(this,{text:x,x:E,y:I,scale:j,renderingMode:"stroke",angle:M,align:this.textAlign,maxWidth:U})}},u.prototype.measureText=function(x){if(typeof x!="string")throw wn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,I=this.pdf.internal.scaleFactor,U=E.internal.getFontSize(),M=E.getStringUnitWidth(x)*U/E.internal.scaleFactor,j=function(V){var X=(V=V||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return X}}),this};return new j({width:M*=Math.round(96*I/72*1e4)/1e4})},u.prototype.scale=function(x,E){if(isNaN(x)||isNaN(E))throw wn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var I=new A(x,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(I)},u.prototype.rotate=function(x){if(isNaN(x))throw wn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new A(Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.translate=function(x,E){if(isNaN(x)||isNaN(E))throw wn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var I=new A(1,0,0,1,x,E);this.ctx.transform=this.ctx.transform.multiply(I)},u.prototype.transform=function(x,E,I,U,M,j){if(isNaN(x)||isNaN(E)||isNaN(I)||isNaN(U)||isNaN(M)||isNaN(j))throw wn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var V=new A(x,E,I,U,M,j);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.setTransform=function(x,E,I,U,M,j){x=isNaN(x)?1:x,E=isNaN(E)?0:E,I=isNaN(I)?0:I,U=isNaN(U)?1:U,M=isNaN(M)?0:M,j=isNaN(j)?0:j,this.ctx.transform=new A(x,E,I,U,M,j)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(x,E,I,U,M,j,V,X,R){var he=this.pdf.getImageProperties(x),xe=1,Be=1,Le=1,Y=1;U!==void 0&&X!==void 0&&(Le=X/U,Y=R/M,xe=he.width/U*X/U,Be=he.height/M*R/M),j===void 0&&(j=E,V=I,E=0,I=0),U!==void 0&&X===void 0&&(X=U,R=M),U===void 0&&X===void 0&&(X=he.width,R=he.height);for(var k,pe=this.ctx.transform.decompose(),ze=$(pe.rotate.shx),ye=new A,le=(ye=(ye=(ye=ye.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale)).applyToRectangle(new a(j-E*Le,V-I*Y,U*xe,M*Be)),Ce=y.call(this,le),ke=[],ce=0;ce<Ce.length;ce+=1)ke.indexOf(Ce[ce])===-1&&ke.push(Ce[ce]);if(F(ke),this.autoPaging)for(var ee=ke[0],N=ke[ke.length-1],_e=ee;_e<N+1;_e++){this.pdf.setPage(_e);var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=_e===1?this.posY+this.margin[0]:this.margin[0],me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=_e===1?0:me+(_e-2)*Ne;if(this.ctx.clip_path.length!==0){var qe=this.path;k=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(k,this.posX+this.margin[3],-De+Se+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=qe}var Qe=JSON.parse(JSON.stringify(le));Qe=S([Qe],this.posX+this.margin[3],-De+Se+this.ctx.prevPageLastElemOffset)[0];var rt=(_e>ee||_e<N)&&m.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,Ne,null).clip().discardPath()),this.pdf.addImage(x,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,ze),rt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(x,"JPEG",le.x,le.y,le.w,le.h,null,null,ze)};var y=function(x,E,I){var U=[];E=E||this.pdf.internal.pageSize.width,I=I||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var M=this.posY+this.ctx.prevPageLastElemOffset;switch(x.type){default:case"mt":case"lt":U.push(Math.floor((x.y+M)/I)+1);break;case"arc":U.push(Math.floor((x.y+M-x.radius)/I)+1),U.push(Math.floor((x.y+M+x.radius)/I)+1);break;case"qct":var j=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x,x.y);U.push(Math.floor((j.y+M)/I)+1),U.push(Math.floor((j.y+j.h+M)/I)+1);break;case"bct":var V=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x2,x.y2,x.x,x.y);U.push(Math.floor((V.y+M)/I)+1),U.push(Math.floor((V.y+V.h+M)/I)+1);break;case"rect":U.push(Math.floor((x.y+M)/I)+1),U.push(Math.floor((x.y+x.h+M)/I)+1)}for(var X=0;X<U.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<U[X];)b.call(this);return U},b=function(){var x=this.fillStyle,E=this.strokeStyle,I=this.font,U=this.lineCap,M=this.lineWidth,j=this.lineJoin;this.pdf.addPage(),this.fillStyle=x,this.strokeStyle=E,this.font=I,this.lineCap=U,this.lineWidth=M,this.lineJoin=j},S=function(x,E,I){for(var U=0;U<x.length;U++)switch(x[U].type){case"bct":x[U].x2+=E,x[U].y2+=I;case"qct":x[U].x1+=E,x[U].y1+=I;case"mt":case"lt":case"arc":default:x[U].x+=E,x[U].y+=I}return x},F=function(x){return x.sort(function(E,I){return E-I})},P=function(x,E){for(var I,U,M=this.fillStyle,j=this.strokeStyle,V=this.lineCap,X=this.lineWidth,R=Math.abs(X*this.ctx.transform.scaleX),he=this.lineJoin,xe=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Le=[],Y=0;Y<Be.length;Y++)if(Be[Y].x!==void 0)for(var k=y.call(this,Be[Y]),pe=0;pe<k.length;pe+=1)Le.indexOf(k[pe])===-1&&Le.push(k[pe]);for(var ze=0;ze<Le.length;ze++)for(;this.pdf.internal.getNumberOfPages()<Le[ze];)b.call(this);if(F(Le),this.autoPaging)for(var ye=Le[0],le=Le[Le.length-1],Ce=ye;Ce<le+1;Ce++){this.pdf.setPage(Ce),this.fillStyle=M,this.strokeStyle=j,this.lineCap=V,this.lineWidth=R,this.lineJoin=he;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ce=Ce===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],N=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=Ce===1?0:ee+(Ce-2)*N;if(this.ctx.clip_path.length!==0){var ve=this.path;I=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(I,this.posX+this.margin[3],-_e+ce+this.ctx.prevPageLastElemOffset),L.call(this,x,!0),this.path=ve}if(U=JSON.parse(JSON.stringify(xe)),this.path=S(U,this.posX+this.margin[3],-_e+ce+this.ctx.prevPageLastElemOffset),E===!1||Ce===0){var Se=(Ce>ye||Ce<le)&&m.call(this);Se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,N,null).clip().discardPath()),L.call(this,x,E),Se&&this.pdf.restoreGraphicsState()}this.lineWidth=X}else this.lineWidth=R,L.call(this,x,E),this.lineWidth=X;this.path=xe},L=function(x,E){if((x!=="stroke"||E||!g.call(this))&&(x==="stroke"||E||!f.call(this))){for(var I,U,M=[],j=this.path,V=0;V<j.length;V++){var X=j[V];switch(X.type){case"begin":M.push({begin:!0});break;case"close":M.push({close:!0});break;case"mt":M.push({start:X,deltas:[],abs:[]});break;case"lt":var R=M.length;if(j[V-1]&&!isNaN(j[V-1].x)&&(I=[X.x-j[V-1].x,X.y-j[V-1].y],R>0)){for(;R>=0;R--)if(M[R-1].close!==!0&&M[R-1].begin!==!0){M[R-1].deltas.push(I),M[R-1].abs.push(X);break}}break;case"bct":I=[X.x1-j[V-1].x,X.y1-j[V-1].y,X.x2-j[V-1].x,X.y2-j[V-1].y,X.x-j[V-1].x,X.y-j[V-1].y],M[M.length-1].deltas.push(I);break;case"qct":var he=j[V-1].x+2/3*(X.x1-j[V-1].x),xe=j[V-1].y+2/3*(X.y1-j[V-1].y),Be=X.x+2/3*(X.x1-X.x),Le=X.y+2/3*(X.y1-X.y),Y=X.x,k=X.y;I=[he-j[V-1].x,xe-j[V-1].y,Be-j[V-1].x,Le-j[V-1].y,Y-j[V-1].x,k-j[V-1].y],M[M.length-1].deltas.push(I);break;case"arc":M.push({deltas:[],abs:[],arc:!0}),Array.isArray(M[M.length-1].abs)&&M[M.length-1].abs.push(X)}}U=E?null:x==="stroke"?"stroke":"fill";for(var pe=!1,ze=0;ze<M.length;ze++)if(M[ze].arc)for(var ye=M[ze].abs,le=0;le<ye.length;le++){var Ce=ye[le];Ce.type==="arc"?H.call(this,Ce.x,Ce.y,Ce.radius,Ce.startAngle,Ce.endAngle,Ce.counterclockwise,void 0,E,!pe):Z.call(this,Ce.x,Ce.y),pe=!0}else if(M[ze].close===!0)this.pdf.internal.out("h"),pe=!1;else if(M[ze].begin!==!0){var ke=M[ze].start.x,ce=M[ze].start.y;ie.call(this,M[ze].deltas,ke,ce),pe=!0}U&&J.call(this,U),E&&we.call(this)}},re=function(x){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,I=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return x-I;case"top":return x+E-I;case"hanging":return x+E-2*I;case"middle":return x+E/2-I;case"ideographic":return x;case"alphabetic":default:return x}},K=function(x){return x+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var x=function(){};return x.colorStops=[],x.addColorStop=function(E,I){this.colorStops.push([E,I])},x.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},x.isCanvasGradient=!0,x},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(x,E,I,U,M,j,V,X,R){for(var he=ne.call(this,I,U,M,j),xe=0;xe<he.length;xe++){var Be=he[xe];xe===0&&(R?O.call(this,Be.x1+x,Be.y1+E):Z.call(this,Be.x1+x,Be.y1+E)),de.call(this,x,E,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}X?we.call(this):J.call(this,V)},J=function(x){switch(x){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},we=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(x,E){this.pdf.internal.out(t(x)+" "+r(E)+" m")},D=function(x){var E;switch(x.align){case"right":case"end":E="right";break;case"center":E="center";break;case"left":case"start":default:E="left"}var I=this.pdf.getTextDimensions(x.text),U=re.call(this,x.y),M=K.call(this,U)-I.h,j=this.ctx.transform.applyToPoint(new i(x.x,U)),V=this.ctx.transform.decompose(),X=new A;X=(X=(X=X.multiply(V.translate)).multiply(V.skew)).multiply(V.scale);for(var R,he,xe,Be=this.ctx.transform.applyToRectangle(new a(x.x,U,I.w,I.h)),Le=X.applyToRectangle(new a(x.x,M,I.w,I.h)),Y=y.call(this,Le),k=[],pe=0;pe<Y.length;pe+=1)k.indexOf(Y[pe])===-1&&k.push(Y[pe]);if(F(k),this.autoPaging)for(var ze=k[0],ye=k[k.length-1],le=ze;le<ye+1;le++){this.pdf.setPage(le);var Ce=le===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ce=this.pdf.internal.pageSize.height-this.margin[2],ee=ce-this.margin[0],N=this.pdf.internal.pageSize.width-this.margin[1],_e=N-this.margin[3],ve=le===1?0:ke+(le-2)*ee;if(this.ctx.clip_path.length!==0){var Se=this.path;R=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(R,this.posX+this.margin[3],-1*ve+Ce),L.call(this,"fill",!0),this.path=Se}var me=S([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-ve+Ce+this.ctx.prevPageLastElemOffset)[0];x.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*x.scale),xe=this.lineWidth,this.lineWidth=xe*x.scale);var Ne=this.autoPaging!=="text";if(Ne||me.y+me.h<=ce){if(Ne||me.y>=Ce&&me.x<=N){var De=Ne?x.text:this.pdf.splitTextToSize(x.text,x.maxWidth||N-me.x)[0],qe=S([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-ve+Ce+this.ctx.prevPageLastElemOffset)[0],Qe=Ne&&(le>ze||le<ye)&&m.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,ee,null).clip().discardPath()),this.pdf.text(De,qe.x,qe.y,{angle:x.angle,align:E,renderingMode:x.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else me.y<ce&&(this.ctx.prevPageLastElemOffset+=ce-me.y);x.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=xe)}else x.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*x.scale),xe=this.lineWidth,this.lineWidth=xe*x.scale),this.pdf.text(x.text,j.x+this.posX,j.y+this.posY,{angle:x.angle,align:E,renderingMode:x.renderingMode,maxWidth:x.maxWidth}),x.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=xe)},Z=function(x,E,I,U){I=I||0,U=U||0,this.pdf.internal.out(t(x+I)+" "+r(E+U)+" l")},ie=function(x,E,I){return this.pdf.lines(x,E,I,null,null)},de=function(x,E,I,U,M,j,V,X){this.pdf.internal.out([e(o(I+x)),e(s(U+E)),e(o(M+x)),e(s(j+E)),e(o(V+x)),e(s(X+E)),"c"].join(" "))},ne=function(x,E,I,U){for(var M=2*Math.PI,j=Math.PI/2;E>I;)E-=M;var V=Math.abs(I-E);V<M&&U&&(V=M-V);for(var X=[],R=U?-1:1,he=E;V>1e-5;){var xe=he+R*Math.min(V,j);X.push(fe.call(this,x,he,xe)),V-=Math.abs(xe-he),he=xe}return X},fe=function(x,E,I){var U=(I-E)/2,M=x*Math.cos(U),j=x*Math.sin(U),V=M,X=-j,R=V*V+X*X,he=R+V*M+X*j,xe=4/3*(Math.sqrt(2*R*he)-he)/(V*j-X*M),Be=V-xe*X,Le=X+xe*V,Y=Be,k=-Le,pe=U+E,ze=Math.cos(pe),ye=Math.sin(pe);return{x1:x*Math.cos(E),y1:x*Math.sin(E),x2:Be*ze-Le*ye,y2:Be*ye+Le*ze,x3:Y*ze-k*ye,y3:Y*ye+k*ze,x4:x*Math.cos(I),y4:x*Math.sin(I)}},$=function(x){return 180*x/Math.PI},q=function(x,E,I,U,M,j){var V=x+.5*(I-x),X=E+.5*(U-E),R=M+.5*(I-M),he=j+.5*(U-j),xe=Math.min(x,M,V,R),Be=Math.max(x,M,V,R),Le=Math.min(E,j,X,he),Y=Math.max(E,j,X,he);return new a(xe,Le,Be-xe,Y-Le)},se=function(x,E,I,U,M,j,V,X){var R,he,xe,Be,Le,Y,k,pe,ze,ye,le,Ce,ke,ce,ee=I-x,N=U-E,_e=M-I,ve=j-U,Se=V-M,me=X-j;for(he=0;he<41;he++)ze=(k=(xe=x+(R=he/40)*ee)+R*((Le=I+R*_e)-xe))+R*(Le+R*(M+R*Se-Le)-k),ye=(pe=(Be=E+R*N)+R*((Y=U+R*ve)-Be))+R*(Y+R*(j+R*me-Y)-pe),he==0?(le=ze,Ce=ye,ke=ze,ce=ye):(le=Math.min(le,ze),Ce=Math.min(Ce,ye),ke=Math.max(ke,ze),ce=Math.max(ce,ye));return new a(Math.round(le),Math.round(Ce),Math.round(ke-le),Math.round(ce-Ce))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var x,E,I=(x=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:x,lineDashOffset:E}));this.prevLineDash!==I&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=I)}}})(pr.API),function(n){var e=function(s){var i,a,A,d,c,u,h,f,g,m;for(a=[],A=0,d=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;d>A;A+=4)(c=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(u=(c=((c=((c=((c=(c-(m=c%85))/85)-(g=c%85))/85)-(f=c%85))/85)-(h=c%85))/85)%85,a.push(u+33,h+33,f+33,g+33,m+33)):a.push(122);return function(y,b){for(var S=b;S>0;S--)y.pop()}(a,i.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var i,a,A,d,c,u=String,h="length",f=255,g="charCodeAt",m="slice",y="replace";for(s[m](-2),s=s[m](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),A=[],d=0,c=(s+=i="uuuuu"[m](s[h]%5||5))[h];c>d;d+=5)a=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),A.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(b,S){for(var F=S;F>0;F--)b.pop()}(A,i[h]),u.fromCharCode.apply(u,A)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var a="",A=0;A<s.length;A+=2)a+=String.fromCharCode("0x"+(s[A]+s[A+1]));return a},o=function(s){for(var i=new Uint8Array(s.length),a=s.length;a--;)i[a]=s.charCodeAt(a);return s=(i=ym(i)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,i){var a=0,A=s||"",d=[];for(typeof(i=i||[])=="string"&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":A=t(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=o(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(pr.API),function(n){n.loadFile=function(e,t,r){return function(o,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var a=void 0;try{a=function(A,d,c){var u=new XMLHttpRequest,h=0,f=function(g){var m=g.length,y=[],b=String.fromCharCode;for(h=0;h<m;h+=1)y.push(b(255&g.charCodeAt(h)));return y.join("")};if(u.open("GET",A,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?c(f(this.responseText)):c(void 0)}),u.send(null),d&&u.status===200)return f(u.responseText)}(o,s,i)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(pr.API),function(n){function e(){return(mr.html2canvas?Promise.resolve(mr.html2canvas):us(()=>import("./html2canvas.esm.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(mr.DOMPurify?Promise.resolve(mr.DOMPurify):us(()=>import("./purify.es.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var a=dn(i);return a==="undefined"?"undefined":a==="string"||i instanceof String?"string":a==="number"||i instanceof Number?"number":a==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(i,a){var A=document.createElement(i);for(var d in a.className&&(A.className=a.className),a.innerHTML&&a.dompurify&&(A.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)A.style[d]=a.style[d];return A},s=function i(a){var A=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),d=i.convert(Promise.resolve(),A);return d=(d=d.setProgress(1,i,1,[i])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,a){return i.__proto__=a||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,a){return this.then(function(){switch(a=a||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(A){return this.set({src:o("div",{innerHTML:i,dompurify:A})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function A(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(A(h,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,a(this.prop.container,A)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=this.opt.jsPDF,d=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var f=d[h],g=f.src.find(function(m){return m.format==="truetype"});g&&A.addFont(g.url,f.ref.name,f.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,A.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,a,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(i,a):this.outputPdf(i,a)},s.prototype.outputPdf=function(i,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,a)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var a=Object.keys(i||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=i[A]};switch(A){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[A]=i[A]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(i,a){return this.then(function(){var A=i in s.template.prop?this.prop[i]:this.opt[i];return a?a(A):A})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function a(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(i=i||pr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:a(i.inner.width,i.k),height:a(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,a,A,d){return i!=null&&(this.progress.val=i),a!=null&&(this.progress.state=a),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,a,A,d){return this.setProgress(i?this.progress.val+i:null,a||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(i,a){var A=this;return this.thenCore(i,a,function(d,c){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return A.updateProgress(null,d),u}).then(d,c).then(function(u){return A.updateProgress(1),u})})},s.prototype.thenCore=function(i,a,A){A=A||Promise.prototype.then,i&&(i=i.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=A.call(d,i,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(i,a){return Promise.prototype.then.call(this,i,a)},s.prototype.thenList=function(i){var a=this;return i.forEach(function(A){a=a.thenCore(A)}),a},s.prototype.catch=function(i){i&&(i=i.bind(this));var a=Promise.prototype.catch.call(this,i);return s.convert(a,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,pr.getPageSize=function(i,a,A){if(dn(i)==="object"){var d=i;i=d.orientation,a=d.unit||a,A=d.format||A}a=a||"mm",A=A||"a4",i=(""+(i||"P")).toLowerCase();var c,u=(""+A).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var f,g=0,m=0;if(h.hasOwnProperty(u))g=h[u][1]/c,m=h[u][0]/c;else try{g=A[1],m=A[0]}catch{throw new Error("Invalid format: "+A)}if(i==="p"||i==="portrait")i="p",m>g&&(f=m,m=g,g=f);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>m&&(f=m,m=g,g=f)}return{width:m,height:g,unit:a,k:c,orientation:i}},n.html=function(i,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Cm):null;var A=new s(a);return a.worker?A:A.from(i).doCallback()}}(pr.API),pr.API.addJS=function(n){return hb=n,this.internal.events.subscribe("postPutResources",function(){Ff=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ff+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ub=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ff!==void 0&&ub!==void 0&&this.internal.out("/Names <</JavaScript "+Ff+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var i=o[s],a=r.exec(i);if(a!=null){var A=a[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,c=[];for(s=0;s<d;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,s){var i={title:o,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var A=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var s=0;s<o.children.length;s++)r.count++,this.count_r(r,o.children[s]);return r.count}}])}(pr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,s,i,a){var A,d=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(A=function(u){for(var h,f=256*u.charCodeAt(4)+u.charCodeAt(5),g=u.length,m={width:0,height:0,numcomponents:1},y=4;y<g;y+=2){if(y+=f,e.indexOf(u.charCodeAt(y+1))!==-1){h=256*u.charCodeAt(y+5)+u.charCodeAt(y+6),m={width:256*u.charCodeAt(y+7)+u.charCodeAt(y+8),height:h,numcomponents:u.charCodeAt(y+9)};break}f=256*u.charCodeAt(y+2)+u.charCodeAt(y+3)}return m}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:a,bitsPerComponent:8,filter:d,index:r,alias:o}}return c}}(pr.API);var Ad,If,fb,pb,gb,YD=function(){var n,e,t;function r(s){var i,a,A,d,c,u,h,f,g,m,y,b,S,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(i=this.readUInt32(),g=(function(){var P,L;for(L=[],P=0;P<4;++P)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*c/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(u!=null?u.data:void 0)||this.imgData,b=0;0<=i?b<i:b>i;0<=i?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((m=A-this.transparency.indexed.length)>0)for(S=0;0<=m?S<m:S>m;0<=m?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(y=this.read(i)).indexOf(0),f=String.fromCharCode.apply(String,y.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,a;for(a=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*i),A=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(u,h,f,g){var m,y,b,S,F,P,L,re,K,H,J,we,O,D,Z,ie,de,ne,fe,$,q,se=Math.ceil((d.width-u)/f),Ae=Math.ceil((d.height-h)/g),x=d.width==se&&d.height==Ae;for(D=i*se,we=x?a:new Uint8Array(D*Ae),P=s.length,O=0,y=0;O<Ae&&A<P;){switch(s[A++]){case 0:for(S=de=0;de<D;S=de+=1)we[y++]=s[A++];break;case 1:for(S=ne=0;ne<D;S=ne+=1)m=s[A++],F=S<i?0:we[y-i],we[y++]=(m+F)%256;break;case 2:for(S=fe=0;fe<D;S=fe+=1)m=s[A++],b=(S-S%i)/i,Z=O&&we[(O-1)*D+b*i+S%i],we[y++]=(Z+m)%256;break;case 3:for(S=$=0;$<D;S=$+=1)m=s[A++],b=(S-S%i)/i,F=S<i?0:we[y-i],Z=O&&we[(O-1)*D+b*i+S%i],we[y++]=(m+Math.floor((F+Z)/2))%256;break;case 4:for(S=q=0;q<D;S=q+=1)m=s[A++],b=(S-S%i)/i,F=S<i?0:we[y-i],O===0?Z=ie=0:(Z=we[(O-1)*D+b*i+S%i],ie=b&&we[(O-1)*D+(b-1)*i+S%i]),L=F+Z-ie,re=Math.abs(L-F),H=Math.abs(L-Z),J=Math.abs(L-ie),K=re<=H&&re<=J?F:H<=J?Z:ie,we[y++]=(m+K)%256;break;default:throw new Error("Invalid filter algorithm: "+s[A-1])}if(!x){var E=((h+O*g)*d.width+u)*i,I=O*D;for(S=0;S<se;S+=1){for(var U=0;U<i;U+=1)a[E++]=we[I++];E+=(f-1)*i}}O++}}return s=FD(s),d.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,i,a,A,d,c,u,h,f;for(a=this.palette,c=this.transparency.indexed||[],d=new Uint8Array((c.length||0)+a.length),A=0,s=0,i=u=0,h=a.length;u<h;i=u+=3)d[A++]=a[i],d[A++]=a[i+1],d[A++]=a[i+2],d[A++]=(f=c[s++])!=null?f:255;return d},r.prototype.copyToImageData=function(s,i){var a,A,d,c,u,h,f,g,m,y,b;if(A=this.colors,m=null,a=this.hasAlphaChannel,this.palette.length&&(m=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),A=4,a=!0),g=(d=s.data||s).length,u=m||i,c=h=0,A===1)for(;c<g;)f=m?4*i[c/4]:h,y=u[f++],d[c++]=y,d[c++]=y,d[c++]=y,d[c++]=a?u[f++]:255,h=f;else for(;c<g;)f=m?4*i[c/4]:h,d[c++]=u[f++],d[c++]=u[f++],d[c++]=u[f++],d[c++]=a?u[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(mr)==="[object Window]"){try{e=mr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(s){var i;if(o()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,a,A,d,c,u,h,f;if(this.animation){for(f=[],a=c=0,u=(h=this.animation.frames).length;c<u;a=++c)i=h[a],A=s.createImageData(i.width,i.height),d=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(A,d),i.imageData=A,f.push(i.image=n(A));return f}},r.prototype.renderFrame=function(s,i){var a,A,d;return a=(A=this.animation.frames)[i],d=A[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var i,a,A,d,c,u,h=this;return a=0,u=this.animation,d=u.numFrames,A=u.frames,c=u.numPlays,(i=function(){var f,g;if(f=a++%d,g=A[f],h.renderFrame(s,f),d>1&&a/d<c)return h.animation._timeout=setTimeout(i,g.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(a=i.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),i.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function JD(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],s=o>>7,i=1<<(7&o)+1;n[e++],n[e++];var a=null,A=null;s&&(a=e,A=i,e+=3*i);var d=!0,c=[],u=0,h=null,f=0,g=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,g=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=n[e++];u=n[e++]|n[e++]<<8,h=n[e++],!(1&m)&&(h=null),f=m>>2&7,e++;break;case 254:for(;;){if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,F=n[e++]|n[e++]<<8,P=n[e++],L=P>>6&1,re=1<<(7&P)+1,K=a,H=A,J=!1;P>>7&&(J=!0,K=e,H=re,e+=3*re);var we=e;for(e++;;){var O;if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}c.push({x:y,y:b,width:S,height:F,has_local_palette:J,palette_offset:K,palette_size:H,data_offset:we,data_length:e-we,transparent_index:h,interlaced:!!L,delay:u,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return g},this.frameInfo=function(D){if(D<0||D>=c.length)throw new Error("Frame index out of range.");return c[D]},this.decodeAndBlitFrameBGRA=function(D,Z){var ie=this.frameInfo(D),de=ie.width*ie.height,ne=new Uint8Array(de);vb(n,ie.data_offset,ne,de);var fe=ie.palette_offset,$=ie.transparent_index;$===null&&($=256);var q=ie.width,se=t-q,Ae=q,x=4*(ie.y*t+ie.x),E=4*((ie.y+ie.height)*t+ie.x),I=x,U=4*se;ie.interlaced===!0&&(U+=4*t*7);for(var M=8,j=0,V=ne.length;j<V;++j){var X=ne[j];if(Ae===0&&(Ae=q,(I+=U)>=E&&(U=4*se+4*t*(M-1),I=x+(q+se)*(M<<1),M>>=1)),X===$)I+=4;else{var R=n[fe+3*X],he=n[fe+3*X+1],xe=n[fe+3*X+2];Z[I++]=xe,Z[I++]=he,Z[I++]=R,Z[I++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(D,Z){var ie=this.frameInfo(D),de=ie.width*ie.height,ne=new Uint8Array(de);vb(n,ie.data_offset,ne,de);var fe=ie.palette_offset,$=ie.transparent_index;$===null&&($=256);var q=ie.width,se=t-q,Ae=q,x=4*(ie.y*t+ie.x),E=4*((ie.y+ie.height)*t+ie.x),I=x,U=4*se;ie.interlaced===!0&&(U+=4*t*7);for(var M=8,j=0,V=ne.length;j<V;++j){var X=ne[j];if(Ae===0&&(Ae=q,(I+=U)>=E&&(U=4*se+4*t*(M-1),I=x+(q+se)*(M<<1),M>>=1)),X===$)I+=4;else{var R=n[fe+3*X],he=n[fe+3*X+1],xe=n[fe+3*X+2];Z[I++]=R,Z[I++]=he,Z[I++]=xe,Z[I++]=255}--Ae}}}function vb(n,e,t,r){for(var o=n[e++],s=1<<o,i=s+1,a=i+1,A=o+1,d=(1<<A)-1,c=0,u=0,h=0,f=n[e++],g=new Int32Array(4096),m=null;;){for(;c<16&&f!==0;)u|=n[e++]<<c,c+=8,f===1?f=n[e++]:--f;if(c<A)break;var y=u&d;if(u>>=A,c-=A,y!==s){if(y===i)break;for(var b=y<a?y:m,S=0,F=b;F>s;)F=g[F]>>8,++S;var P=F;if(h+S+(b!==y?1:0)>r)return void wn.log("Warning, gif stream longer than expected.");t[h++]=P;var L=h+=S;for(b!==y&&(t[h++]=P),F=b;S--;)F=g[F],t[--L]=255&F,F>>=8;m!==null&&a<4096&&(g[a++]=m<<8|P,a>=d+1&&A<12&&(++A,d=d<<1|1)),m=y}else a=i+1,d=(1<<(A=o+1))-1,m=null}return h!==r&&wn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function t0(n){var e,t,r,o,s,i=Math.floor,a=new Array(64),A=new Array(64),d=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),g=new Array(64),m=[],y=0,b=7,S=new Array(64),F=new Array(64),P=new Array(64),L=new Array(256),re=new Array(2048),K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(x,E){for(var I=0,U=0,M=new Array,j=1;j<=16;j++){for(var V=1;V<=x[j];V++)M[E[U]]=[],M[E[U]][0]=I,M[E[U]][1]=j,U++,I++;I*=2}return M}function fe(x){for(var E=x[0],I=x[1]-1;I>=0;)E&1<<I&&(y|=1<<b),I--,--b<0&&(y==255?($(255),$(0)):$(y),b=7,y=0)}function $(x){m.push(x)}function q(x){$(x>>8&255),$(255&x)}function se(x,E,I,U,M){for(var j,V=M[0],X=M[240],R=function(ye,le){var Ce,ke,ce,ee,N,_e,ve,Se,me,Ne,De=0;for(me=0;me<8;++me){Ce=ye[De],ke=ye[De+1],ce=ye[De+2],ee=ye[De+3],N=ye[De+4],_e=ye[De+5],ve=ye[De+6];var qe=Ce+(Se=ye[De+7]),Qe=Ce-Se,rt=ke+ve,tt=ke-ve,Te=ce+_e,ge=ce-_e,Oe=ee+N,He=ee-N,je=qe+Oe,at=qe-Oe,At=rt+Te,it=rt-Te;ye[De]=je+At,ye[De+4]=je-At;var Re=.707106781*(it+at);ye[De+2]=at+Re,ye[De+6]=at-Re;var Xe=.382683433*((je=He+ge)-(it=tt+Qe)),Je=.5411961*je+Xe,ct=1.306562965*it+Xe,_t=.707106781*(At=ge+tt),lt=Qe+_t,et=Qe-_t;ye[De+5]=et+Je,ye[De+3]=et-Je,ye[De+1]=lt+ct,ye[De+7]=lt-ct,De+=8}for(De=0,me=0;me<8;++me){Ce=ye[De],ke=ye[De+8],ce=ye[De+16],ee=ye[De+24],N=ye[De+32],_e=ye[De+40],ve=ye[De+48];var Qt=Ce+(Se=ye[De+56]),vt=Ce-Se,Nt=ke+ve,mt=ke-ve,Lt=ce+_e,Pt=ce-_e,zt=ee+N,Et=ee-N,xt=Qt+zt,Ut=Qt-zt,Kt=Nt+Lt,Ot=Nt-Lt;ye[De]=xt+Kt,ye[De+32]=xt-Kt;var Mt=.707106781*(Ot+Ut);ye[De+16]=Ut+Mt,ye[De+48]=Ut-Mt;var Gt=.382683433*((xt=Et+Pt)-(Ot=mt+vt)),nr=.5411961*xt+Gt,sr=1.306562965*Ot+Gt,dr=.707106781*(Kt=Pt+mt),Ht=vt+dr,wr=vt-dr;ye[De+40]=wr+nr,ye[De+24]=wr-nr,ye[De+8]=Ht+sr,ye[De+56]=Ht-sr,De++}for(me=0;me<64;++me)Ne=ye[me]*le[me],f[me]=Ne>0?Ne+.5|0:Ne-.5|0;return f}(x,E),he=0;he<64;++he)g[K[he]]=R[he];var xe=g[0]-I;I=g[0],xe==0?fe(U[0]):(fe(U[h[j=32767+xe]]),fe(u[j]));for(var Be=63;Be>0&&g[Be]==0;)Be--;if(Be==0)return fe(V),I;for(var Le,Y=1;Y<=Be;){for(var k=Y;g[Y]==0&&Y<=Be;)++Y;var pe=Y-k;if(pe>=16){Le=pe>>4;for(var ze=1;ze<=Le;++ze)fe(X);pe&=15}j=32767+g[Y],fe(M[(pe<<4)+h[j]]),fe(u[j]),Y++}return Be!=63&&fe(V),I}function Ae(x){x=Math.min(Math.max(x,1),100),s!=x&&(function(E){for(var I=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var M=i((I[U]*E+50)/100);M=Math.min(Math.max(M,1),255),a[K[U]]=M}for(var j=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],V=0;V<64;V++){var X=i((j[V]*E+50)/100);X=Math.min(Math.max(X,1),255),A[K[V]]=X}for(var R=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],he=0,xe=0;xe<8;xe++)for(var Be=0;Be<8;Be++)d[he]=1/(a[K[he]]*R[xe]*R[Be]*8),c[he]=1/(A[K[he]]*R[xe]*R[Be]*8),he++}(x<50?Math.floor(5e3/x):Math.floor(200-2*x)),s=x)}this.encode=function(x,E){E&&Ae(E),m=new Array,y=0,b=7,q(65496),q(65504),q(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),q(1),q(1),$(0),$(0),function(){q(65499),q(132),$(0);for(var ke=0;ke<64;ke++)$(a[ke]);$(1);for(var ce=0;ce<64;ce++)$(A[ce])}(),function(ke,ce){q(65472),q(17),$(8),q(ce),q(ke),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(x.width,x.height),function(){q(65476),q(418),$(0);for(var ke=0;ke<16;ke++)$(H[ke+1]);for(var ce=0;ce<=11;ce++)$(J[ce]);$(16);for(var ee=0;ee<16;ee++)$(we[ee+1]);for(var N=0;N<=161;N++)$(O[N]);$(1);for(var _e=0;_e<16;_e++)$(D[_e+1]);for(var ve=0;ve<=11;ve++)$(Z[ve]);$(17);for(var Se=0;Se<16;Se++)$(ie[Se+1]);for(var me=0;me<=161;me++)$(de[me])}(),q(65498),q(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var I=0,U=0,M=0;y=0,b=7,this.encode.displayName="_encode_";for(var j,V,X,R,he,xe,Be,Le,Y,k=x.data,pe=x.width,ze=x.height,ye=4*pe,le=0;le<ze;){for(j=0;j<ye;){for(he=ye*le+j,Be=-1,Le=0,Y=0;Y<64;Y++)xe=he+(Le=Y>>3)*ye+(Be=4*(7&Y)),le+Le>=ze&&(xe-=ye*(le+1+Le-ze)),j+Be>=ye&&(xe-=j+Be-ye+4),V=k[xe++],X=k[xe++],R=k[xe++],S[Y]=(re[V]+re[X+256>>0]+re[R+512>>0]>>16)-128,F[Y]=(re[V+768>>0]+re[X+1024>>0]+re[R+1280>>0]>>16)-128,P[Y]=(re[V+1280>>0]+re[X+1536>>0]+re[R+1792>>0]>>16)-128;I=se(S,d,I,e,r),U=se(F,c,U,t,o),M=se(P,c,M,t,o),j+=32}le+=8}if(b>=0){var Ce=[];Ce[1]=b+1,Ce[0]=(1<<b+1)-1,fe(Ce)}return q(65497),new Uint8Array(m)},n=n||50,function(){for(var x=String.fromCharCode,E=0;E<256;E++)L[E]=x(E)}(),e=ne(H,J),t=ne(D,Z),r=ne(we,O),o=ne(ie,de),function(){for(var x=1,E=2,I=1;I<=15;I++){for(var U=x;U<E;U++)h[32767+U]=I,u[32767+U]=[],u[32767+U][1]=I,u[32767+U][0]=U;for(var M=-(E-1);M<=-x;M++)h[32767+M]=I,u[32767+M]=[],u[32767+M][1]=I,u[32767+M][0]=E-1+M;x<<=1,E<<=1}}(),function(){for(var x=0;x<256;x++)re[x]=19595*x,re[x+256>>0]=38470*x,re[x+512>>0]=7471*x+32768,re[x+768>>0]=-11059*x,re[x+1024>>0]=-21709*x,re[x+1280>>0]=32768*x+8421375,re[x+1536>>0]=-27439*x,re[x+1792>>0]=-5329*x}(),Ae(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ai(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mb(n){function e(H){if(!H)throw Error("assert :P")}function t(H,J,we){for(var O=0;4>O;O++)if(H[J+O]!=we.charCodeAt(O))return!0;return!1}function r(H,J,we,O,D){for(var Z=0;Z<D;Z++)H[J+Z]=we[O+Z]}function o(H,J,we,O){for(var D=0;D<O;D++)H[J+D]=we}function s(H){return new Int32Array(H)}function i(H,J){for(var we=[],O=0;O<H;O++)we.push(new J);return we}function a(H,J){var we=[];return function O(D,Z,ie){for(var de=ie[Z],ne=0;ne<de&&(D.push(ie.length>Z+1?[]:new J),!(ie.length<Z+1));ne++)O(D[ne],Z+1,ie)}(we,0,H),we}var A=function(){var H=this;function J(p,v){for(var C=1<<v-1>>>0;p&C;)C>>>=1;return C?(p&C-1)+C:p}function we(p,v,C,Q,G){e(!(Q%C));do p[v+(Q-=C)]=G;while(0<Q)}function O(p,v,C,Q,G){if(e(2328>=G),512>=G)var oe=s(512);else if((oe=s(G))==null)return 0;return function(ae,ue,be,Fe,$e,ut){var ht,Ze,It=ue,yt=1<<be,Ve=s(16),Ye=s(16);for(e($e!=0),e(Fe!=null),e(ae!=null),e(0<be),Ze=0;Ze<$e;++Ze){if(15<Fe[Ze])return 0;++Ve[Fe[Ze]]}if(Ve[0]==$e)return 0;for(Ye[1]=0,ht=1;15>ht;++ht){if(Ve[ht]>1<<ht)return 0;Ye[ht+1]=Ye[ht]+Ve[ht]}for(Ze=0;Ze<$e;++Ze)ht=Fe[Ze],0<Fe[Ze]&&(ut[Ye[ht]++]=Ze);if(Ye[15]==1)return(Fe=new D).g=0,Fe.value=ut[0],we(ae,It,1,yt,Fe),yt;var Ct,Tt=-1,Ft=yt-1,Wt=0,jt=1,cr=1,Rt=1<<be;for(Ze=0,ht=1,$e=2;ht<=be;++ht,$e<<=1){if(jt+=cr<<=1,0>(cr-=Ve[ht]))return 0;for(;0<Ve[ht];--Ve[ht])(Fe=new D).g=ht,Fe.value=ut[Ze++],we(ae,It+Wt,$e,Rt,Fe),Wt=J(Wt,ht)}for(ht=be+1,$e=2;15>=ht;++ht,$e<<=1){if(jt+=cr<<=1,0>(cr-=Ve[ht]))return 0;for(;0<Ve[ht];--Ve[ht]){if(Fe=new D,(Wt&Ft)!=Tt){for(It+=Rt,Ct=1<<(Tt=ht)-be;15>Tt&&!(0>=(Ct-=Ve[Tt]));)++Tt,Ct<<=1;yt+=Rt=1<<(Ct=Tt-be),ae[ue+(Tt=Wt&Ft)].g=Ct+be,ae[ue+Tt].value=It-ue-Tt}Fe.g=ht-be,Fe.value=ut[Ze++],we(ae,It+(Wt>>be),$e,Rt,Fe),Wt=J(Wt,ht)}}return jt!=2*Ye[15]-1?0:yt}(p,v,C,Q,G,oe)}function D(){this.value=this.g=0}function Z(){this.value=this.g=0}function ie(){this.G=i(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(_o,Z)}function de(p,v,C,Q){e(p!=null),e(v!=null),e(2147483648>Q),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=C,p.Jd=v,p.Yc=C+Q,p.Zc=4<=Q?C+Q-4+1:C,j(p)}function ne(p,v){for(var C=0;0<v--;)C|=X(p,128)<<v;return C}function fe(p,v){var C=ne(p,v);return V(p)?-C:C}function $(p,v,C,Q){var G,oe=0;for(e(p!=null),e(v!=null),e(4294967288>Q),p.Sb=Q,p.Ra=0,p.u=0,p.h=0,4<Q&&(Q=4),G=0;G<Q;++G)oe+=v[C+G]<<8*G;p.Ra=oe,p.bb=Q,p.oa=v,p.pa=C}function q(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ul-8>>>0,++p.bb,p.u-=8;I(p)&&(p.h=1,p.u=0)}function se(p,v){if(e(0<=v),!p.h&&v<=Ql){var C=E(p)&Il[v];return p.u+=v,q(p),C}return p.h=1,p.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(p){return p.Ra>>>(p.u&Ul-1)>>>0}function I(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ul}function U(p,v){p.u=v,p.h=I(p)}function M(p){p.u>=yc&&(e(p.u>=yc),q(p))}function j(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function V(p){return ne(p,1)}function X(p,v){var C=p.Ca;0>p.b&&j(p);var Q=p.b,G=C*v>>>8,oe=(p.I>>>Q>G)+0;for(oe?(C-=G,p.I-=G+1<<Q>>>0):C=G+1,Q=C,G=0;256<=Q;)G+=8,Q>>=8;return Q=7^G+ss[Q],p.b-=Q,p.Ca=(C<<Q)-1,oe}function R(p,v,C){p[v+0]=C>>24&255,p[v+1]=C>>16&255,p[v+2]=C>>8&255,p[v+3]=C>>0&255}function he(p,v){return p[v+0]<<0|p[v+1]<<8}function xe(p,v){return he(p,v)|p[v+2]<<16}function Be(p,v){return he(p,v)|he(p,v+2)<<16}function Le(p,v){var C=1<<v;return e(p!=null),e(0<v),p.X=s(C),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function Y(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),r(v.X,0,p.X,0,1<<v.Xa)}function k(){this.X=[],this.Xa=this.Mb=0}function pe(p,v,C,Q){e(C!=null),e(Q!=null);var G=C[0],oe=Q[0];return G==0&&(G=(p*oe+v/2)/v),oe==0&&(oe=(v*G+p/2)/p),0>=G||0>=oe?0:(C[0]=G,Q[0]=oe,1)}function ze(p,v){return p+(1<<v)-1>>>v}function ye(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function le(p,v){H[v]=function(C,Q,G,oe,ae,ue,be){var Fe;for(Fe=0;Fe<ae;++Fe){var $e=H[p](ue[be+Fe-1],G,oe+Fe);ue[be+Fe]=ye(C[Q+Fe],$e)}}}function Ce(){this.ud=this.hd=this.jd=0}function ke(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function ce(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function ee(p,v){return ce(p+(p-v+.5>>1))}function N(p,v,C){return Math.abs(v-C)-Math.abs(p-C)}function _e(p,v,C,Q,G,oe,ae){for(Q=oe[ae-1],C=0;C<G;++C)oe[ae+C]=Q=ye(p[v+C],Q)}function ve(p,v,C,Q,G){var oe;for(oe=0;oe<C;++oe){var ae=p[v+oe],ue=ae>>8&255,be=16711935&(be=(be=16711935&ae)+((ue<<16)+ue));Q[G+oe]=(4278255360&ae)+be>>>0}}function Se(p,v){v.jd=p>>0&255,v.hd=p>>8&255,v.ud=p>>16&255}function me(p,v,C,Q,G,oe){var ae;for(ae=0;ae<Q;++ae){var ue=v[C+ae],be=ue>>>8,Fe=ue,$e=255&($e=($e=ue>>>16)+((p.jd<<24>>24)*(be<<24>>24)>>>5));Fe=255&(Fe=(Fe=Fe+((p.hd<<24>>24)*(be<<24>>24)>>>5))+((p.ud<<24>>24)*($e<<24>>24)>>>5)),G[oe+ae]=(4278255360&ue)+($e<<16)+Fe}}function Ne(p,v,C,Q,G){H[v]=function(oe,ae,ue,be,Fe,$e,ut,ht,Ze){for(be=ut;be<ht;++be)for(ut=0;ut<Ze;++ut)Fe[$e++]=G(ue[Q(oe[ae++])])},H[p]=function(oe,ae,ue,be,Fe,$e,ut){var ht=8>>oe.b,Ze=oe.Ea,It=oe.K[0],yt=oe.w;if(8>ht)for(oe=(1<<oe.b)-1,yt=(1<<ht)-1;ae<ue;++ae){var Ve,Ye=0;for(Ve=0;Ve<Ze;++Ve)Ve&oe||(Ye=Q(be[Fe++])),$e[ut++]=G(It[Ye&yt]),Ye>>=ht}else H["VP8LMapColor"+C](be,Fe,It,yt,$e,ut,ae,ue,Ze)}}function De(p,v,C,Q,G){for(C=v+C;v<C;){var oe=p[v++];Q[G++]=oe>>16&255,Q[G++]=oe>>8&255,Q[G++]=oe>>0&255}}function qe(p,v,C,Q,G){for(C=v+C;v<C;){var oe=p[v++];Q[G++]=oe>>16&255,Q[G++]=oe>>8&255,Q[G++]=oe>>0&255,Q[G++]=oe>>24&255}}function Qe(p,v,C,Q,G){for(C=v+C;v<C;){var oe=(ae=p[v++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;Q[G++]=oe,Q[G++]=ae}}function rt(p,v,C,Q,G){for(C=v+C;v<C;){var oe=(ae=p[v++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;Q[G++]=oe,Q[G++]=ae}}function tt(p,v,C,Q,G){for(C=v+C;v<C;){var oe=p[v++];Q[G++]=oe>>0&255,Q[G++]=oe>>8&255,Q[G++]=oe>>16&255}}function Te(p,v,C,Q,G,oe){if(oe==0)for(C=v+C;v<C;)R(Q,((oe=p[v++])[0]>>24|oe[1]>>8&65280|oe[2]<<8&16711680|oe[3]<<24)>>>0),G+=32;else r(Q,G,p,v,C)}function ge(p,v){H[v][0]=H[p+"0"],H[v][1]=H[p+"1"],H[v][2]=H[p+"2"],H[v][3]=H[p+"3"],H[v][4]=H[p+"4"],H[v][5]=H[p+"5"],H[v][6]=H[p+"6"],H[v][7]=H[p+"7"],H[v][8]=H[p+"8"],H[v][9]=H[p+"9"],H[v][10]=H[p+"10"],H[v][11]=H[p+"11"],H[v][12]=H[p+"12"],H[v][13]=H[p+"13"],H[v][14]=H[p+"0"],H[v][15]=H[p+"0"]}function Oe(p){return p==qg||p==Kg||p==uh||p==$g}function He(){this.eb=[],this.size=this.A=this.fb=0}function je(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function at(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new He,this.f.kb=new je,this.sd=null}function At(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function it(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Re(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Xe(p,v){var C=p.T,Q=v.ba.f.RGBA,G=Q.eb,oe=Q.fb+p.ka*Q.A,ae=Rs[v.ba.S],ue=p.y,be=p.O,Fe=p.f,$e=p.N,ut=p.ea,ht=p.W,Ze=v.cc,It=v.dc,yt=v.Mc,Ve=v.Nc,Ye=p.ka,Ct=p.ka+p.T,Tt=p.U,Ft=Tt+1>>1;for(Ye==0?ae(ue,be,null,null,Fe,$e,ut,ht,Fe,$e,ut,ht,G,oe,null,null,Tt):(ae(v.ec,v.fc,ue,be,Ze,It,yt,Ve,Fe,$e,ut,ht,G,oe-Q.A,G,oe,Tt),++C);Ye+2<Ct;Ye+=2)Ze=Fe,It=$e,yt=ut,Ve=ht,$e+=p.Rc,ht+=p.Rc,oe+=2*Q.A,ae(ue,(be+=2*p.fa)-p.fa,ue,be,Ze,It,yt,Ve,Fe,$e,ut,ht,G,oe-Q.A,G,oe,Tt);return be+=p.fa,p.j+Ct<p.o?(r(v.ec,v.fc,ue,be,Tt),r(v.cc,v.dc,Fe,$e,Ft),r(v.Mc,v.Nc,ut,ht,Ft),C--):1&Ct||ae(ue,be,null,null,Fe,$e,ut,ht,Fe,$e,ut,ht,G,oe+Q.A,null,null,Tt),C}function Je(p,v,C){var Q=p.F,G=[p.J];if(Q!=null){var oe=p.U,ae=v.ba.S,ue=ae==ch||ae==uh;v=v.ba.f.RGBA;var be=[0],Fe=p.ka;be[0]=p.T,p.Kb&&(Fe==0?--be[0]:(--Fe,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(be[0]=p.o-p.j-Fe));var $e=v.eb;Fe=v.fb+Fe*v.A,p=Bn(Q,G[0],p.width,oe,be,$e,Fe+(ue?0:3),v.A),e(C==be),p&&Oe(ae)&&Hs($e,Fe,ue,oe,be,v.A)}return 0}function ct(p){var v=p.ma,C=v.ba.S,Q=11>C,G=C==lh||C==dh||C==ch||C==Rg||C==12||Oe(C);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!mc(v.Oa,p,G?11:12))return 0;if(G&&Oe(C)&&kt(),p.da)alert("todo:use_scaling");else{if(Q){if(v.Ib=Re,p.Kb){if(C=p.U+1>>1,v.memory=s(p.U+2*C),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+C,v.Ib=Xe,kt()}}else alert("todo:EmitYUV");G&&(v.Jb=Je,Q&&nt())}if(Q&&!h2){for(p=0;256>p;++p)aC[p]=89858*(p-128)+fh>>hh,dC[p]=-22014*(p-128)+fh,lC[p]=-45773*(p-128),AC[p]=113618*(p-128)+fh>>hh;for(p=Sc;p<Wg;++p)v=76283*(p-16)+fh>>hh,cC[p-Sc]=Bs(v,255),uC[p-Sc]=Bs(v+8>>4,15);h2=1}return 1}function _t(p){var v=p.ma,C=p.U,Q=p.T;return e(!(1&p.ka)),0>=C||0>=Q?0:(C=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,C),v.Dc+=C,1)}function lt(p){p.ma.memory=null}function et(p,v,C,Q){return se(p,8)!=47?0:(v[0]=se(p,14)+1,C[0]=se(p,14)+1,Q[0]=se(p,1),se(p,3)!=0?0:!p.h)}function Qt(p,v){if(4>p)return p+1;var C=p-2>>1;return(2+(1&p)<<C)+se(v,C)+1}function vt(p,v){return 120<v?v-120:1<=(C=((C=Vz[v-1])>>4)*p+(8-(15&C)))?C:1;var C}function Nt(p,v,C){var Q=E(C),G=p[v+=255&Q].g-8;return 0<G&&(U(C,C.u+8),Q=E(C),v+=p[v].value,v+=Q&(1<<G)-1),U(C,C.u+p[v].g),p[v].value}function mt(p,v,C){return C.g+=p.g,C.value+=p.value<<v>>>0,e(8>=C.g),p.g}function Lt(p,v,C){var Q=p.xc;return e((v=Q==0?0:p.vc[p.md*(C>>Q)+(v>>Q)])<p.Wb),p.Ya[v]}function Pt(p,v,C,Q){var G=p.ab,oe=p.c*v,ae=p.C;v=ae+v;var ue=C,be=Q;for(Q=p.Ta,C=p.Ua;0<G--;){var Fe=p.gc[G],$e=ae,ut=v,ht=ue,Ze=be,It=(be=Q,ue=C,Fe.Ea);switch(e($e<ut),e(ut<=Fe.nc),Fe.hc){case 2:rh(ht,Ze,(ut-$e)*It,be,ue);break;case 0:var yt=$e,Ve=ut,Ye=be,Ct=ue,Tt=(Rt=Fe).Ea;yt==0&&(Hg(ht,Ze,null,null,1,Ye,Ct),_e(ht,Ze+1,0,0,Tt-1,Ye,Ct+1),Ze+=Tt,Ct+=Tt,++yt);for(var Ft=1<<Rt.b,Wt=Ft-1,jt=ze(Tt,Rt.b),cr=Rt.K,Rt=Rt.w+(yt>>Rt.b)*jt;yt<Ve;){var Jr=cr,an=Rt,Vr=1;for(bc(ht,Ze,Ye,Ct-Tt,1,Ye,Ct);Vr<Tt;){var Dr=(Vr&~Wt)+Ft;Dr>Tt&&(Dr=Tt),(0,Oa[Jr[an++]>>8&15])(ht,Ze+ +Vr,Ye,Ct+Vr-Tt,Dr-Vr,Ye,Ct+Vr),Vr=Dr}Ze+=Tt,Ct+=Tt,++yt&Wt||(Rt+=jt)}ut!=Fe.nc&&r(be,ue-It,be,ue+(ut-$e-1)*It,It);break;case 1:for(It=ht,Ve=Ze,Tt=(ht=Fe.Ea)-(Ct=ht&~(Ye=(Ze=1<<Fe.b)-1)),yt=ze(ht,Fe.b),Ft=Fe.K,Fe=Fe.w+($e>>Fe.b)*yt;$e<ut;){for(Wt=Ft,jt=Fe,cr=new Ce,Rt=Ve+Ct,Jr=Ve+ht;Ve<Rt;)Se(Wt[jt++],cr),TA(cr,It,Ve,Ze,be,ue),Ve+=Ze,ue+=Ze;Ve<Jr&&(Se(Wt[jt++],cr),TA(cr,It,Ve,Tt,be,ue),Ve+=Tt,ue+=Tt),++$e&Ye||(Fe+=yt)}break;case 3:if(ht==be&&Ze==ue&&0<Fe.b){for(Ve=be,ht=It=ue+(ut-$e)*It-(Ct=(ut-$e)*ze(Fe.Ea,Fe.b)),Ze=be,Ye=ue,yt=[],Ct=(Tt=Ct)-1;0<=Ct;--Ct)yt[Ct]=Ze[Ye+Ct];for(Ct=Tt-1;0<=Ct;--Ct)Ve[ht+Ct]=yt[Ct];Ds(Fe,$e,ut,be,It,be,ue)}else Ds(Fe,$e,ut,ht,Ze,be,ue)}ue=Q,be=C}be!=C&&r(Q,C,ue,be,oe)}function zt(p,v){var C=p.V,Q=p.Ba+p.c*p.C,G=v-p.C;if(e(v<=p.l.o),e(16>=G),0<G){var oe=p.l,ae=p.Ta,ue=p.Ua,be=oe.width;if(Pt(p,G,C,Q),G=ue=[ue],e((C=p.C)<(Q=v)),e(oe.v<oe.va),Q>oe.o&&(Q=oe.o),C<oe.j){var Fe=oe.j-C;C=oe.j,G[0]+=Fe*be}if(C>=Q?C=0:(G[0]+=4*oe.v,oe.ka=C-oe.j,oe.U=oe.va-oe.v,oe.T=Q-C,C=1),C){if(ue=ue[0],11>(C=p.ca).S){var $e=C.f.RGBA,ut=(Q=C.S,G=oe.U,oe=oe.T,Fe=$e.eb,$e.A),ht=oe;for($e=$e.fb+p.Ma*$e.A;0<ht--;){var Ze=ae,It=ue,yt=G,Ve=Fe,Ye=$e;switch(Q){case Ah:is(Ze,It,yt,Ve,Ye);break;case lh:qo(Ze,It,yt,Ve,Ye);break;case qg:qo(Ze,It,yt,Ve,Ye),Hs(Ve,Ye,0,yt,1,0);break;case o2:ra(Ze,It,yt,Ve,Ye);break;case dh:Te(Ze,It,yt,Ve,Ye,1);break;case Kg:Te(Ze,It,yt,Ve,Ye,1),Hs(Ve,Ye,0,yt,1,0);break;case ch:Te(Ze,It,yt,Ve,Ye,0);break;case uh:Te(Ze,It,yt,Ve,Ye,0),Hs(Ve,Ye,1,yt,1,0);break;case Rg:Da(Ze,It,yt,Ve,Ye);break;case $g:Da(Ze,It,yt,Ve,Ye),_n(Ve,Ye,yt,1,0);break;case s2:ta(Ze,It,yt,Ve,Ye);break;default:e(0)}ue+=be,$e+=ut}p.Ma+=oe}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=C.height)}}p.C=v,e(p.C<=p.i)}function Et(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var C=p.Ya[v].G,Q=p.Ya[v].H;if(0<C[1][Q[1]+0].g||0<C[2][Q[2]+0].g||0<C[3][Q[3]+0].g)return 0}return 1}function xt(p,v,C,Q,G,oe){if(p.Z!=0){var ae=p.qd,ue=p.rd;for(e(ja[p.Z]!=null);v<C;++v)ja[p.Z](ae,ue,Q,G,Q,G,oe),ae=Q,ue=G,G+=oe;p.qd=ae,p.rd=ue}}function Ut(p,v){var C=p.l.ma,Q=C.Z==0||C.Z==1?p.l.j:p.C;if(Q=p.C<Q?Q:p.C,e(v<=p.l.o),v>Q){var G=p.l.width,oe=C.ca,ae=C.tb+G*Q,ue=p.V,be=p.Ba+p.c*Q,Fe=p.gc;e(p.ab==1),e(Fe[0].hc==3),nh(Fe[0],Q,v,ue,be,oe,ae),xt(C,Q,v,oe,ae,G)}p.C=p.Ma=v}function Kt(p,v,C,Q,G,oe,ae){var ue=p.$/Q,be=p.$%Q,Fe=p.m,$e=p.s,ut=C+p.$,ht=ut;G=C+Q*G;var Ze=C+Q*oe,It=280+$e.ua,yt=p.Pb?ue:16777216,Ve=0<$e.ua?$e.Wa:null,Ye=$e.wc,Ct=ut<Ze?Lt($e,be,ue):null;e(p.C<oe),e(Ze<=G);var Tt=!1;e:for(;;){for(;Tt||ut<Ze;){var Ft=0;if(ue>=yt){var Wt=ut-C;e((yt=p).Pb),yt.wd=yt.m,yt.xd=Wt,0<yt.s.ua&&Y(yt.s.Wa,yt.s.vb),yt=ue+Wz}if(be&Ye||(Ct=Lt($e,be,ue)),e(Ct!=null),Ct.Qb&&(v[ut]=Ct.qb,Tt=!0),!Tt)if(M(Fe),Ct.jc){Ft=Fe,Wt=v;var jt=ut,cr=Ct.pd[E(Ft)&_o-1];e(Ct.jc),256>cr.g?(U(Ft,Ft.u+cr.g),Wt[jt]=cr.value,Ft=0):(U(Ft,Ft.u+cr.g-256),e(256<=cr.value),Ft=cr.value),Ft==0&&(Tt=!0)}else Ft=Nt(Ct.G[0],Ct.H[0],Fe);if(Fe.h)break;if(Tt||256>Ft){if(!Tt)if(Ct.nd)v[ut]=(Ct.qb|Ft<<8)>>>0;else{if(M(Fe),Tt=Nt(Ct.G[1],Ct.H[1],Fe),M(Fe),Wt=Nt(Ct.G[2],Ct.H[2],Fe),jt=Nt(Ct.G[3],Ct.H[3],Fe),Fe.h)break;v[ut]=(jt<<24|Tt<<16|Ft<<8|Wt)>>>0}if(Tt=!1,++ut,++be>=Q&&(be=0,++ue,ae!=null&&ue<=oe&&!(ue%16)&&ae(p,ue),Ve!=null))for(;ht<ut;)Ft=v[ht++],Ve.X[(506832829*Ft&4294967295)>>>Ve.Mb]=Ft}else if(280>Ft){if(Ft=Qt(Ft-256,Fe),Wt=Nt(Ct.G[4],Ct.H[4],Fe),M(Fe),Wt=vt(Q,Wt=Qt(Wt,Fe)),Fe.h)break;if(ut-C<Wt||G-ut<Ft)break e;for(jt=0;jt<Ft;++jt)v[ut+jt]=v[ut+jt-Wt];for(ut+=Ft,be+=Ft;be>=Q;)be-=Q,++ue,ae!=null&&ue<=oe&&!(ue%16)&&ae(p,ue);if(e(ut<=G),be&Ye&&(Ct=Lt($e,be,ue)),Ve!=null)for(;ht<ut;)Ft=v[ht++],Ve.X[(506832829*Ft&4294967295)>>>Ve.Mb]=Ft}else{if(!(Ft<It))break e;for(Tt=Ft-280,e(Ve!=null);ht<ut;)Ft=v[ht++],Ve.X[(506832829*Ft&4294967295)>>>Ve.Mb]=Ft;Ft=ut,e(!(Tt>>>(Wt=Ve).Xa)),v[Ft]=Wt.X[Tt],Tt=!0}Tt||e(Fe.h==I(Fe))}if(p.Pb&&Fe.h&&ut<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Y(p.s.vb,p.s.Wa);else{if(Fe.h)break e;ae!=null&&ae(p,ue>oe?oe:ue),p.a=0,p.$=ut-C}return 1}return p.a=3,0}function Ot(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function Mt(){var p=new Mg;return p==null?null:(p.a=0,p.xb=A2,ge("Predictor","VP8LPredictors"),ge("Predictor","VP8LPredictors_C"),ge("PredictorAdd","VP8LPredictorsAdd"),ge("PredictorAdd","VP8LPredictorsAdd_C"),rh=ve,TA=me,is=De,qo=qe,Da=Qe,ta=rt,ra=tt,H.VP8LMapColor32b=Tl,H.VP8LMapColor8b=oh,p)}function Gt(p,v,C,Q,G){var oe=1,ae=[p],ue=[v],be=Q.m,Fe=Q.s,$e=null,ut=0;e:for(;;){if(C)for(;oe&&se(be,1);){var ht=ae,Ze=ue,It=Q,yt=1,Ve=It.m,Ye=It.gc[It.ab],Ct=se(Ve,2);if(It.Oc&1<<Ct)oe=0;else{switch(It.Oc|=1<<Ct,Ye.hc=Ct,Ye.Ea=ht[0],Ye.nc=Ze[0],Ye.K=[null],++It.ab,e(4>=It.ab),Ct){case 0:case 1:Ye.b=se(Ve,3)+2,yt=Gt(ze(Ye.Ea,Ye.b),ze(Ye.nc,Ye.b),0,It,Ye.K),Ye.K=Ye.K[0];break;case 3:var Tt,Ft=se(Ve,8)+1,Wt=16<Ft?0:4<Ft?1:2<Ft?2:3;if(ht[0]=ze(Ye.Ea,Wt),Ye.b=Wt,Tt=yt=Gt(Ft,1,0,It,Ye.K)){var jt,cr=Ft,Rt=Ye,Jr=1<<(8>>Rt.b),an=s(Jr);if(an==null)Tt=0;else{var Vr=Rt.K[0],Dr=Rt.w;for(an[0]=Rt.K[0][0],jt=1;jt<1*cr;++jt)an[jt]=ye(Vr[Dr+jt],an[jt-1]);for(;jt<4*Jr;++jt)an[jt]=0;Rt.K[0]=null,Rt.K[0]=an,Tt=1}}yt=Tt;break;case 2:break;default:e(0)}oe=yt}}if(ae=ae[0],ue=ue[0],oe&&se(be,1)&&!(oe=1<=(ut=se(be,4))&&11>=ut)){Q.a=3;break e}var mn;if(mn=oe)t:{var fn,Sr,to,as=Q,ro=ae,As=ue,An=ut,zs=C,Cs=as.m,ho=as.s,Bo=[null],$o=1,qs=0,Qi=Gz[An];r:for(;;){if(zs&&se(Cs,1)){var fo=se(Cs,3)+2,ia=ze(ro,fo),DA=ze(As,fo),Dl=ia*DA;if(!Gt(ia,DA,0,as,Bo))break r;for(Bo=Bo[0],ho.xc=fo,fn=0;fn<Dl;++fn){var Ra=Bo[fn]>>8&65535;Bo[fn]=Ra,Ra>=$o&&($o=Ra+1)}}if(Cs.h)break r;for(Sr=0;5>Sr;++Sr){var Nn=i2[Sr];!Sr&&0<An&&(Nn+=1<<An),qs<Nn&&(qs=Nn)}var Xg=i($o*Qi,D),g2=$o,v2=i(g2,ie);if(v2==null)var gh=null;else e(65536>=g2),gh=v2;var Ec=s(qs);if(gh==null||Ec==null||Xg==null){as.a=1;break r}var vh=Xg;for(fn=to=0;fn<$o;++fn){var oi=gh[fn],Nl=oi.G,Ml=oi.H,m2=0,mh=1,w2=0;for(Sr=0;5>Sr;++Sr){Nn=i2[Sr],Nl[Sr]=vh,Ml[Sr]=to,!Sr&&0<An&&(Nn+=1<<An);o:{var wh,Yg=Nn,yh=as,Fc=Ec,pC=vh,gC=to,Jg=0,qa=yh.m,vC=se(qa,1);if(o(Fc,0,0,Yg),vC){var mC=se(qa,1)+1,wC=se(qa,1),y2=se(qa,wC==0?1:8);Fc[y2]=1,mC==2&&(Fc[y2=se(qa,8)]=1);var bh=1}else{var b2=s(19),_2=se(qa,4)+4;if(19<_2){yh.a=3;var _h=0;break o}for(wh=0;wh<_2;++wh)b2[$z[wh]]=se(qa,3);var Zg=void 0,Ic=void 0,B2=yh,yC=b2,Bh=Yg,x2=Fc,ev=0,Ka=B2.m,z2=8,C2=i(128,D);n:for(;O(C2,0,7,yC,19);){if(se(Ka,1)){var bC=2+2*se(Ka,3);if((Zg=2+se(Ka,bC))>Bh)break n}else Zg=Bh;for(Ic=0;Ic<Bh&&Zg--;){M(Ka);var S2=C2[0+(127&E(Ka))];U(Ka,Ka.u+S2.g);var Hl=S2.value;if(16>Hl)x2[Ic++]=Hl,Hl!=0&&(z2=Hl);else{var _C=Hl==16,E2=Hl-16,BC=qz[E2],F2=se(Ka,Rz[E2])+BC;if(Ic+F2>Bh)break n;for(var xC=_C?z2:0;0<F2--;)x2[Ic++]=xC}}ev=1;break n}ev||(B2.a=3),bh=ev}(bh=bh&&!qa.h)&&(Jg=O(pC,gC,8,Fc,Yg)),bh&&Jg!=0?_h=Jg:(yh.a=3,_h=0)}if(_h==0)break r;if(mh&&Kz[Sr]==1&&(mh=vh[to].g==0),m2+=vh[to].g,to+=_h,3>=Sr){var Qc,tv=Ec[0];for(Qc=1;Qc<Nn;++Qc)Ec[Qc]>tv&&(tv=Ec[Qc]);w2+=tv}}if(oi.nd=mh,oi.Qb=0,mh&&(oi.qb=(Nl[3][Ml[3]+0].value<<24|Nl[1][Ml[1]+0].value<<16|Nl[2][Ml[2]+0].value)>>>0,m2==0&&256>Nl[0][Ml[0]+0].value&&(oi.Qb=1,oi.qb+=Nl[0][Ml[0]+0].value<<8)),oi.jc=!oi.Qb&&6>w2,oi.jc){var xh,aa=oi;for(xh=0;xh<_o;++xh){var $a=xh,Va=aa.pd[$a],zh=aa.G[0][aa.H[0]+$a];256<=zh.value?(Va.g=zh.g+256,Va.value=zh.value):(Va.g=0,Va.value=0,$a>>=mt(zh,8,Va),$a>>=mt(aa.G[1][aa.H[1]+$a],16,Va),$a>>=mt(aa.G[2][aa.H[2]+$a],0,Va),mt(aa.G[3][aa.H[3]+$a],24,Va))}}}ho.vc=Bo,ho.Wb=$o,ho.Ya=gh,ho.yc=Xg,mn=1;break t}mn=0}if(!(oe=mn)){Q.a=3;break e}if(0<ut){if(Fe.ua=1<<ut,!Le(Fe.Wa,ut)){Q.a=1,oe=0;break e}}else Fe.ua=0;var rv=Q,I2=ae,zC=ue,nv=rv.s,ov=nv.xc;if(rv.c=I2,rv.i=zC,nv.md=ze(I2,ov),nv.wc=ov==0?-1:(1<<ov)-1,C){Q.xb=rC;break e}if(($e=s(ae*ue))==null){Q.a=1,oe=0;break e}oe=(oe=Kt(Q,$e,0,ae,ue,ue,null))&&!be.h;break e}return oe?(G!=null?G[0]=$e:(e($e==null),e(C)),Q.$=0,C||Ot(Fe)):Ot(Fe),oe}function nr(p,v){var C=p.c*p.i,Q=C+v+16*v;return e(p.c<=v),p.V=s(Q),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+C+v,1)}function sr(p,v){var C=p.C,Q=v-C,G=p.V,oe=p.Ba+p.c*C;for(e(v<=p.l.o);0<Q;){var ae=16<Q?16:Q,ue=p.l.ma,be=p.l.width,Fe=be*ae,$e=ue.ca,ut=ue.tb+be*C,ht=p.Ta,Ze=p.Ua;Pt(p,ae,G,oe),qn(ht,Ze,$e,ut,Fe),xt(ue,C,C+ae,$e,ut,be),Q-=ae,G+=ae*p.c,C+=ae}e(C==v),p.C=p.Ma=v}function dr(){this.ub=this.yd=this.td=this.Rb=0}function Ht(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Pr(){this.Yb=function(){var p=[];return function v(C,Q,G){for(var oe=G[Q],ae=0;ae<oe&&(C.push(G.length>Q+1?[]:0),!(G.length<Q+1));ae++)v(C[ae],Q+1,G)}(p,0,[3,11]),p}()}function $r(){this.jb=s(3),this.Wc=a([4,8],Pr),this.Xc=a([4,17],Pr)}function Ir(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hr(){this.ld=this.La=this.dd=this.tc=0}function Or(){this.Na=this.la=0}function xr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ir(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vr(){this.uc=this.M=this.Nb=0,this.wa=Array(new hr),this.Y=0,this.ya=Array(new ir),this.aa=0,this.l=new bn}function kr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function un(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new dr,this.Kc=new Ht,this.ed=new Ir,this.Qa=new wr,this.Ic=this.$c=this.Aa=0,this.D=new vr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,Ae),this.ia=0,this.pb=i(4,xr),this.Pa=new $r,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new kr),this.Hd=0,this.rb=Array(new Or),this.sb=0,this.wa=Array(new hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ir),this.L=this.aa=0,this.gd=a([4,2],hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function zr(){var p=new un;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Cc||(Cc=so)),p}function lr(p,v,C){return p.a==0&&(p.a=v,p.sc=C,p.cb=0),0}function Fn(p,v,C){return 3<=C&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function Fo(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return lr(p,2,"null VP8Io passed to VP8GetHeaders()");var C=v.data,Q=v.w,G=v.ha;if(4>G)return lr(p,7,"Truncated header.");var oe=C[Q+0]|C[Q+1]<<8|C[Q+2]<<16,ae=p.Od;if(ae.Rb=!(1&oe),ae.td=oe>>1&7,ae.yd=oe>>4&1,ae.ub=oe>>5,3<ae.td)return lr(p,3,"Incorrect keyframe parameters.");if(!ae.yd)return lr(p,4,"Frame not displayable.");Q+=3,G-=3;var ue=p.Kc;if(ae.Rb){if(7>G)return lr(p,7,"cannot parse picture header");if(!Fn(C,Q,G))return lr(p,3,"Bad code word");ue.c=16383&(C[Q+4]<<8|C[Q+3]),ue.Td=C[Q+4]>>6,ue.i=16383&(C[Q+6]<<8|C[Q+5]),ue.Ud=C[Q+6]>>6,Q+=7,G-=7,p.za=ue.c+15>>4,p.Ub=ue.i+15>>4,v.width=ue.c,v.height=ue.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((oe=p.Pa).jb,0,255,oe.jb.length),e((oe=p.Qa)!=null),oe.Cb=0,oe.Bb=0,oe.Fb=1,o(oe.Zb,0,0,oe.Zb.length),o(oe.Lb,0,0,oe.Lb)}if(ae.ub>G)return lr(p,7,"bad partition length");de(oe=p.m,C,Q,ae.ub),Q+=ae.ub,G-=ae.ub,ae.Rb&&(ue.Ld=V(oe),ue.Kd=V(oe)),ue=p.Qa;var be,Fe=p.Pa;if(e(oe!=null),e(ue!=null),ue.Cb=V(oe),ue.Cb){if(ue.Bb=V(oe),V(oe)){for(ue.Fb=V(oe),be=0;4>be;++be)ue.Zb[be]=V(oe)?fe(oe,7):0;for(be=0;4>be;++be)ue.Lb[be]=V(oe)?fe(oe,6):0}if(ue.Bb)for(be=0;3>be;++be)Fe.jb[be]=V(oe)?ne(oe,8):255}else ue.Bb=0;if(oe.Ka)return lr(p,3,"cannot parse segment header");if((ue=p.ed).zd=V(oe),ue.Tb=ne(oe,6),ue.wb=ne(oe,3),ue.Pc=V(oe),ue.Pc&&V(oe)){for(Fe=0;4>Fe;++Fe)V(oe)&&(ue.vd[Fe]=fe(oe,6));for(Fe=0;4>Fe;++Fe)V(oe)&&(ue.od[Fe]=fe(oe,6))}if(p.L=ue.Tb==0?0:ue.zd?1:2,oe.Ka)return lr(p,3,"cannot parse filter header");var $e=G;if(G=be=Q,Q=be+$e,ue=$e,p.Xb=(1<<ne(p.m,2))-1,$e<3*(Fe=p.Xb))C=7;else{for(be+=3*Fe,ue-=3*Fe,$e=0;$e<Fe;++$e){var ut=C[G+0]|C[G+1]<<8|C[G+2]<<16;ut>ue&&(ut=ue),de(p.Jc[+$e],C,be,ut),be+=ut,ue-=ut,G+=3}de(p.Jc[+Fe],C,be,ue),C=be<Q?0:5}if(C!=0)return lr(p,C,"cannot parse partitions");for(C=ne(be=p.m,7),G=V(be)?fe(be,4):0,Q=V(be)?fe(be,4):0,ue=V(be)?fe(be,4):0,Fe=V(be)?fe(be,4):0,be=V(be)?fe(be,4):0,$e=p.Qa,ut=0;4>ut;++ut){if($e.Cb){var ht=$e.Zb[ut];$e.Fb||(ht+=C)}else{if(0<ut){p.pb[ut]=p.pb[0];continue}ht=C}var Ze=p.pb[ut];Ze.Sc[0]=Vg[Bs(ht+G,127)],Ze.Sc[1]=Gg[Bs(ht+0,127)],Ze.Eb[0]=2*Vg[Bs(ht+Q,127)],Ze.Eb[1]=101581*Gg[Bs(ht+ue,127)]>>16,8>Ze.Eb[1]&&(Ze.Eb[1]=8),Ze.Qc[0]=Vg[Bs(ht+Fe,117)],Ze.Qc[1]=Gg[Bs(ht+be,127)],Ze.lc=ht+be}if(!ae.Rb)return lr(p,4,"Not a key frame.");for(V(oe),ae=p.Pa,C=0;4>C;++C){for(G=0;8>G;++G)for(Q=0;3>Q;++Q)for(ue=0;11>ue;++ue)Fe=X(oe,eC[C][G][Q][ue])?ne(oe,8):Jz[C][G][Q][ue],ae.Wc[C][G].Yb[Q][ue]=Fe;for(G=0;17>G;++G)ae.Xc[C][G]=ae.Wc[C][tC[G]]}return p.kc=V(oe),p.kc&&(p.Bd=ne(oe,8)),p.cb=1}function so(p,v,C,Q,G,oe,ae){var ue=v[G].Yb[C];for(C=0;16>G;++G){if(!X(p,ue[C+0]))return G;for(;!X(p,ue[C+1]);)if(ue=v[++G].Yb[0],C=0,G==16)return 16;var be=v[G+1].Yb;if(X(p,ue[C+2])){var Fe=p,$e=0;if(X(Fe,(ht=ue)[(ut=C)+3]))if(X(Fe,ht[ut+6])){for(ue=0,ut=2*($e=X(Fe,ht[ut+8]))+(ht=X(Fe,ht[ut+9+$e])),$e=0,ht=Xz[ut];ht[ue];++ue)$e+=$e+X(Fe,ht[ue]);$e+=3+(8<<ut)}else X(Fe,ht[ut+7])?($e=7+2*X(Fe,165),$e+=X(Fe,145)):$e=5+X(Fe,159);else $e=X(Fe,ht[ut+4])?3+X(Fe,ht[ut+5]):2;ue=be[2]}else $e=1,ue=be[1];be=ae+Yz[G],0>(Fe=p).b&&j(Fe);var ut,ht=Fe.b,Ze=(ut=Fe.Ca>>1)-(Fe.I>>ht)>>31;--Fe.b,Fe.Ca+=Ze,Fe.Ca|=1,Fe.I-=(ut+1&Ze)<<ht,oe[be]=(($e^Ze)-Ze)*Q[(0<G)+0]}return 16}function yo(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function ns(p,v){if(p==null)return 0;if(v==null)return lr(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!Fo(p,v))return 0;if(e(p.cb),v.ac==null||v.ac(v)){v.ob&&(p.L=0);var C=ph[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=v.v-C>>4,p.zb=v.j-C>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=v.o+15+C>>4,p.Hb=v.va+15+C>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var Q=p.ed;for(C=0;4>C;++C){var G;if(p.Qa.Cb){var oe=p.Qa.Lb[C];p.Qa.Fb||(oe+=Q.Tb)}else oe=Q.Tb;for(G=0;1>=G;++G){var ae=p.gd[C][G],ue=oe;if(Q.Pc&&(ue+=Q.vd[0],G&&(ue+=Q.od[0])),0<(ue=0>ue?0:63<ue?63:ue)){var be=ue;0<Q.wb&&(be=4<Q.wb?be>>2:be>>1)>9-Q.wb&&(be=9-Q.wb),1>be&&(be=1),ae.dd=be,ae.tc=2*ue+be,ae.ld=40<=ue?2:15<=ue?1:0}else ae.tc=0;ae.La=G}}}C=0}else lr(p,6,"Frame setup failed"),C=p.a;if(C=C==0){if(C){p.$c=0,0<p.Aa||(p.Ic=fC);e:{C=p.Ic,Q=4*(be=p.za);var Fe=32*be,$e=be+1,ut=0<p.L?be*(0<p.Aa?2:1):0,ht=(p.Aa==2?2:1)*be;if((ae=Q+832+(G=3*(16*C+ph[p.L])/2*Fe)+(oe=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=ae)C=0;else{if(ae>p.Vb){if(p.Vb=0,p.Ec=s(ae),p.Fc=0,p.Ec==null){C=lr(p,1,"no memory during frame initialization.");break e}p.Vb=ae}ae=p.Ec,ue=p.Fc,p.Ac=ae,p.Bc=ue,ue+=Q,p.Gd=i(Fe,kr),p.Hd=0,p.rb=i($e+1,Or),p.sb=1,p.wa=ut?i(ut,hr):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=be),e(!0),p.oc=ae,p.pc=ue,ue+=832,p.ya=i(ht,ir),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=be),p.R=16*be,p.B=8*be,be=(Fe=ph[p.L])*p.R,Fe=Fe/2*p.B,p.sa=ae,p.ta=ue+be,p.qa=p.sa,p.ra=p.ta+16*C*p.R+Fe,p.Ha=p.qa,p.Ia=p.ra+8*C*p.B+Fe,p.$c=0,ue+=G,p.mb=oe?ae:null,p.nb=oe?ue:null,e(ue+oe<=p.Fc+p.Vb),yo(p),o(p.Ac,p.Bc,0,Q),C=1}}if(C){if(v.ka=0,v.y=p.sa,v.O=p.ta,v.f=p.qa,v.N=p.ra,v.ea=p.Ha,v.Vd=p.Ia,v.fa=p.R,v.Rc=p.B,v.F=null,v.J=0,!ih){for(C=-255;255>=C;++C)io[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)oa[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)zc[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Ol[255+C]=0>C?0:255<C?255:C;ih=1}Ll=Ua,na=bs,_c=Io,Ko=bo,Ns=os,Rn=Ro,Pl=lc,sh=QA,Bc=Ng,LA=dc,PA=Dg,Na=zl,kA=cc,kl=Zu,OA=Ju,Ma=Fi,xc=ea,Ms=Og,ni[0]=hn,ni[1]=Ci,ni[2]=Tr,ni[3]=Yr,ni[4]=_s,ni[5]=Os,ni[6]=ei,ni[7]=Ei,ni[8]=ic,ni[9]=sc,Ha[0]=Si,Ha[1]=or,Ha[2]=sn,Ha[3]=Qo,Ha[4]=Un,Ha[5]=Zs,Ha[6]=Ta,sa[0]=La,sa[1]=EA,sa[2]=Pg,sa[3]=ac,sa[4]=IA,sa[5]=kg,sa[6]=Ac,C=1}else C=0}C&&(C=function(Ze,It){for(Ze.M=0;Ze.M<Ze.Va;++Ze.M){var yt,Ve=Ze.Jc[Ze.M&Ze.Xb],Ye=Ze.m,Ct=Ze;for(yt=0;yt<Ct.za;++yt){var Tt=Ye,Ft=Ct,Wt=Ft.Ac,jt=Ft.Bc+4*yt,cr=Ft.zc,Rt=Ft.ya[Ft.aa+yt];if(Ft.Qa.Bb?Rt.$b=X(Tt,Ft.Pa.jb[0])?2+X(Tt,Ft.Pa.jb[2]):X(Tt,Ft.Pa.jb[1]):Rt.$b=0,Ft.kc&&(Rt.Ad=X(Tt,Ft.Bd)),Rt.Za=!X(Tt,145)+0,Rt.Za){var Jr=Rt.Ob,an=0;for(Ft=0;4>Ft;++Ft){var Vr,Dr=cr[0+Ft];for(Vr=0;4>Vr;++Vr){Dr=Zz[Wt[jt+Vr]][Dr];for(var mn=a2[X(Tt,Dr[0])];0<mn;)mn=a2[2*mn+X(Tt,Dr[mn])];Dr=-mn,Wt[jt+Vr]=Dr}r(Jr,an,Wt,jt,4),an+=4,cr[0+Ft]=Dr}}else Dr=X(Tt,156)?X(Tt,128)?1:3:X(Tt,163)?2:0,Rt.Ob[0]=Dr,o(Wt,jt,Dr,4),o(cr,0,Dr,4);Rt.Dd=X(Tt,142)?X(Tt,114)?X(Tt,183)?1:3:2:0}if(Ct.m.Ka)return lr(Ze,7,"Premature end-of-partition0 encountered.");for(;Ze.ja<Ze.za;++Ze.ja){if(Ct=Ve,Tt=(Ye=Ze).rb[Ye.sb-1],Wt=Ye.rb[Ye.sb+Ye.ja],yt=Ye.ya[Ye.aa+Ye.ja],jt=Ye.kc?yt.Ad:0)Tt.la=Wt.la=0,yt.Za||(Tt.Na=Wt.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var fn,Sr;if(Tt=Wt,Wt=Ct,jt=Ye.Pa.Xc,cr=Ye.ya[Ye.aa+Ye.ja],Rt=Ye.pb[cr.$b],Ft=cr.ad,Jr=0,an=Ye.rb[Ye.sb-1],Dr=Vr=0,o(Ft,Jr,0,384),cr.Za)var to=0,as=jt[3];else{mn=s(16);var ro=Tt.Na+an.Na;if(ro=Cc(Wt,jt[1],ro,Rt.Eb,0,mn,0),Tt.Na=an.Na=(0<ro)+0,1<ro)Ll(mn,0,Ft,Jr);else{var As=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)Ft[Jr+mn]=As}to=1,as=jt[0]}var An=15&Tt.la,zs=15&an.la;for(mn=0;4>mn;++mn){var Cs=1&zs;for(As=Sr=0;4>As;++As)An=An>>1|(Cs=(ro=Cc(Wt,as,ro=Cs+(1&An),Rt.Sc,to,Ft,Jr))>to)<<7,Sr=Sr<<2|(3<ro?3:1<ro?2:Ft[Jr+0]!=0),Jr+=16;An>>=4,zs=zs>>1|Cs<<7,Vr=(Vr<<8|Sr)>>>0}for(as=An,to=zs>>4,fn=0;4>fn;fn+=2){for(Sr=0,An=Tt.la>>4+fn,zs=an.la>>4+fn,mn=0;2>mn;++mn){for(Cs=1&zs,As=0;2>As;++As)ro=Cs+(1&An),An=An>>1|(Cs=0<(ro=Cc(Wt,jt[2],ro,Rt.Qc,0,Ft,Jr)))<<3,Sr=Sr<<2|(3<ro?3:1<ro?2:Ft[Jr+0]!=0),Jr+=16;An>>=2,zs=zs>>1|Cs<<5}Dr|=Sr<<4*fn,as|=An<<4<<fn,to|=(240&zs)<<fn}Tt.la=as,an.la=to,cr.Hc=Vr,cr.Gc=Dr,cr.ia=43690&Dr?0:Rt.ia,jt=!(Vr|Dr)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[yt.$b][yt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!jt),Ct.Ka)return lr(Ze,7,"Premature end-of-file encountered.")}if(yo(Ze),Ye=It,Ct=1,yt=(Ve=Ze).D,Tt=0<Ve.L&&Ve.M>=Ve.zb&&Ve.M<=Ve.Va,Ve.Aa==0)e:{if(yt.M=Ve.M,yt.uc=Tt,vc(Ve,yt),Ct=1,yt=(Sr=Ve.D).Nb,Tt=(Dr=ph[Ve.L])*Ve.R,Wt=Dr/2*Ve.B,mn=16*yt*Ve.R,As=8*yt*Ve.B,jt=Ve.sa,cr=Ve.ta-Tt+mn,Rt=Ve.qa,Ft=Ve.ra-Wt+As,Jr=Ve.Ha,an=Ve.Ia-Wt+As,zs=(An=Sr.M)==0,Vr=An>=Ve.Va-1,Ve.Aa==2&&vc(Ve,Sr),Sr.uc)for(Cs=(ro=Ve).D.M,e(ro.D.uc),Sr=ro.yb;Sr<ro.Hb;++Sr){to=Sr,as=Cs;var ho=(Bo=(Nn=ro).D).Nb;fn=Nn.R;var Bo=Bo.wa[Bo.Y+to],$o=Nn.sa,qs=Nn.ta+16*ho*fn+16*to,Qi=Bo.dd,fo=Bo.tc;if(fo!=0)if(e(3<=fo),Nn.L==1)0<to&&Ma($o,qs,fn,fo+4),Bo.La&&Ms($o,qs,fn,fo),0<as&&OA($o,qs,fn,fo+4),Bo.La&&xc($o,qs,fn,fo);else{var ia=Nn.B,DA=Nn.qa,Dl=Nn.ra+8*ho*ia+8*to,Ra=Nn.Ha,Nn=Nn.Ia+8*ho*ia+8*to;ho=Bo.ld,0<to&&(sh($o,qs,fn,fo+4,Qi,ho),LA(DA,Dl,Ra,Nn,ia,fo+4,Qi,ho)),Bo.La&&(Na($o,qs,fn,fo,Qi,ho),kl(DA,Dl,Ra,Nn,ia,fo,Qi,ho)),0<as&&(Pl($o,qs,fn,fo+4,Qi,ho),Bc(DA,Dl,Ra,Nn,ia,fo+4,Qi,ho)),Bo.La&&(PA($o,qs,fn,fo,Qi,ho),kA(DA,Dl,Ra,Nn,ia,fo,Qi,ho))}}if(Ve.ia&&alert("todo:DitherRow"),Ye.put!=null){if(Sr=16*An,An=16*(An+1),zs?(Ye.y=Ve.sa,Ye.O=Ve.ta+mn,Ye.f=Ve.qa,Ye.N=Ve.ra+As,Ye.ea=Ve.Ha,Ye.W=Ve.Ia+As):(Sr-=Dr,Ye.y=jt,Ye.O=cr,Ye.f=Rt,Ye.N=Ft,Ye.ea=Jr,Ye.W=an),Vr||(An-=Dr),An>Ye.o&&(An=Ye.o),Ye.F=null,Ye.J=null,Ve.Fa!=null&&0<Ve.Fa.length&&Sr<An&&(Ye.J=pc(Ve,Ye,Sr,An-Sr),Ye.F=Ve.mb,Ye.F==null&&Ye.F.length==0)){Ct=lr(Ve,3,"Could not decode alpha data.");break e}Sr<Ye.j&&(Dr=Ye.j-Sr,Sr=Ye.j,e(!(1&Dr)),Ye.O+=Ve.R*Dr,Ye.N+=Ve.B*(Dr>>1),Ye.W+=Ve.B*(Dr>>1),Ye.F!=null&&(Ye.J+=Ye.width*Dr)),Sr<An&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=Sr-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=An-Sr,Ct=Ye.put(Ye))}yt+1!=Ve.Ic||Vr||(r(Ve.sa,Ve.ta-Tt,jt,cr+16*Ve.R,Tt),r(Ve.qa,Ve.ra-Wt,Rt,Ft+8*Ve.B,Wt),r(Ve.Ha,Ve.Ia-Wt,Jr,an+8*Ve.B,Wt))}if(!Ct)return lr(Ze,6,"Output aborted.")}return 1}(p,v)),v.bc!=null&&v.bc(v),C&=1}return C?(p.cb=0,C):0}function On(p,v,C,Q,G){G=p[v+C+32*Q]+(G>>3),p[v+C+32*Q]=-256&G?0>G?0:255:G}function tr(p,v,C,Q,G,oe){On(p,v,0,C,Q+G),On(p,v,1,C,Q+oe),On(p,v,2,C,Q-oe),On(p,v,3,C,Q-G)}function Qr(p){return(20091*p>>16)+p}function on(p,v,C,Q){var G,oe=0,ae=s(16);for(G=0;4>G;++G){var ue=p[v+0]+p[v+8],be=p[v+0]-p[v+8],Fe=(35468*p[v+4]>>16)-Qr(p[v+12]),$e=Qr(p[v+4])+(35468*p[v+12]>>16);ae[oe+0]=ue+$e,ae[oe+1]=be+Fe,ae[oe+2]=be-Fe,ae[oe+3]=ue-$e,oe+=4,v++}for(G=oe=0;4>G;++G)ue=(p=ae[oe+0]+4)+ae[oe+8],be=p-ae[oe+8],Fe=(35468*ae[oe+4]>>16)-Qr(ae[oe+12]),On(C,Q,0,0,ue+($e=Qr(ae[oe+4])+(35468*ae[oe+12]>>16))),On(C,Q,1,0,be+Fe),On(C,Q,2,0,be-Fe),On(C,Q,3,0,ue-$e),oe++,Q+=32}function Ro(p,v,C,Q){var G=p[v+0]+4,oe=35468*p[v+4]>>16,ae=Qr(p[v+4]),ue=35468*p[v+1]>>16;tr(C,Q,0,G+ae,p=Qr(p[v+1]),ue),tr(C,Q,1,G+oe,p,ue),tr(C,Q,2,G-oe,p,ue),tr(C,Q,3,G-ae,p,ue)}function bs(p,v,C,Q,G){on(p,v,C,Q),G&&on(p,v+16,C,Q+4)}function Io(p,v,C,Q){na(p,v+0,C,Q,1),na(p,v+32,C,Q+128,1)}function bo(p,v,C,Q){var G;for(p=p[v+0]+4,G=0;4>G;++G)for(v=0;4>v;++v)On(C,Q,v,G,p)}function os(p,v,C,Q){p[v+0]&&Ko(p,v+0,C,Q),p[v+16]&&Ko(p,v+16,C,Q+4),p[v+32]&&Ko(p,v+32,C,Q+128),p[v+48]&&Ko(p,v+48,C,Q+128+4)}function Ua(p,v,C,Q){var G,oe=s(16);for(G=0;4>G;++G){var ae=p[v+0+G]+p[v+12+G],ue=p[v+4+G]+p[v+8+G],be=p[v+4+G]-p[v+8+G],Fe=p[v+0+G]-p[v+12+G];oe[0+G]=ae+ue,oe[8+G]=ae-ue,oe[4+G]=Fe+be,oe[12+G]=Fe-be}for(G=0;4>G;++G)ae=(p=oe[0+4*G]+3)+oe[3+4*G],ue=oe[1+4*G]+oe[2+4*G],be=oe[1+4*G]-oe[2+4*G],Fe=p-oe[3+4*G],C[Q+0]=ae+ue>>3,C[Q+16]=Fe+be>>3,C[Q+32]=ae-ue>>3,C[Q+48]=Fe-be>>3,Q+=64}function zi(p,v,C){var Q,G=v-32,oe=xs,ae=255-p[G-1];for(Q=0;Q<C;++Q){var ue,be=oe,Fe=ae+p[v-1];for(ue=0;ue<C;++ue)p[v+ue]=be[Fe+p[G+ue]];v+=32}}function Ci(p,v){zi(p,v,4)}function EA(p,v){zi(p,v,8)}function or(p,v){zi(p,v,16)}function sn(p,v){var C;for(C=0;16>C;++C)r(p,v+32*C,p,v-32,16)}function Qo(p,v){var C;for(C=16;0<C;--C)o(p,v,p[v-1],16),v+=32}function ks(p,v,C){var Q;for(Q=0;16>Q;++Q)o(v,C+32*Q,p,16)}function Si(p,v){var C,Q=16;for(C=0;16>C;++C)Q+=p[v-1+32*C]+p[v+C-32];ks(Q>>5,p,v)}function Un(p,v){var C,Q=8;for(C=0;16>C;++C)Q+=p[v-1+32*C];ks(Q>>4,p,v)}function Zs(p,v){var C,Q=8;for(C=0;16>C;++C)Q+=p[v+C-32];ks(Q>>4,p,v)}function Ta(p,v){ks(128,p,v)}function yr(p,v,C){return p+2*v+C+2>>2}function Tr(p,v){var C,Q=v-32;for(Q=new Uint8Array([yr(p[Q-1],p[Q+0],p[Q+1]),yr(p[Q+0],p[Q+1],p[Q+2]),yr(p[Q+1],p[Q+2],p[Q+3]),yr(p[Q+2],p[Q+3],p[Q+4])]),C=0;4>C;++C)r(p,v+32*C,Q,0,Q.length)}function Yr(p,v){var C=p[v-1],Q=p[v-1+32],G=p[v-1+64],oe=p[v-1+96];R(p,v+0,16843009*yr(p[v-1-32],C,Q)),R(p,v+32,16843009*yr(C,Q,G)),R(p,v+64,16843009*yr(Q,G,oe)),R(p,v+96,16843009*yr(G,oe,oe))}function hn(p,v){var C,Q=4;for(C=0;4>C;++C)Q+=p[v+C-32]+p[v-1+32*C];for(Q>>=3,C=0;4>C;++C)o(p,v+32*C,Q,4)}function _s(p,v){var C=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],oe=p[v-1-32],ae=p[v+0-32],ue=p[v+1-32],be=p[v+2-32],Fe=p[v+3-32];p[v+0+96]=yr(Q,G,p[v-1+96]),p[v+1+96]=p[v+0+64]=yr(C,Q,G),p[v+2+96]=p[v+1+64]=p[v+0+32]=yr(oe,C,Q),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=yr(ae,oe,C),p[v+3+64]=p[v+2+32]=p[v+1+0]=yr(ue,ae,oe),p[v+3+32]=p[v+2+0]=yr(be,ue,ae),p[v+3+0]=yr(Fe,be,ue)}function ei(p,v){var C=p[v+1-32],Q=p[v+2-32],G=p[v+3-32],oe=p[v+4-32],ae=p[v+5-32],ue=p[v+6-32],be=p[v+7-32];p[v+0+0]=yr(p[v+0-32],C,Q),p[v+1+0]=p[v+0+32]=yr(C,Q,G),p[v+2+0]=p[v+1+32]=p[v+0+64]=yr(Q,G,oe),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=yr(G,oe,ae),p[v+3+32]=p[v+2+64]=p[v+1+96]=yr(oe,ae,ue),p[v+3+64]=p[v+2+96]=yr(ae,ue,be),p[v+3+96]=yr(ue,be,be)}function Os(p,v){var C=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],oe=p[v-1-32],ae=p[v+0-32],ue=p[v+1-32],be=p[v+2-32],Fe=p[v+3-32];p[v+0+0]=p[v+1+64]=oe+ae+1>>1,p[v+1+0]=p[v+2+64]=ae+ue+1>>1,p[v+2+0]=p[v+3+64]=ue+be+1>>1,p[v+3+0]=be+Fe+1>>1,p[v+0+96]=yr(G,Q,C),p[v+0+64]=yr(Q,C,oe),p[v+0+32]=p[v+1+96]=yr(C,oe,ae),p[v+1+32]=p[v+2+96]=yr(oe,ae,ue),p[v+2+32]=p[v+3+96]=yr(ae,ue,be),p[v+3+32]=yr(ue,be,Fe)}function Ei(p,v){var C=p[v+0-32],Q=p[v+1-32],G=p[v+2-32],oe=p[v+3-32],ae=p[v+4-32],ue=p[v+5-32],be=p[v+6-32],Fe=p[v+7-32];p[v+0+0]=C+Q+1>>1,p[v+1+0]=p[v+0+64]=Q+G+1>>1,p[v+2+0]=p[v+1+64]=G+oe+1>>1,p[v+3+0]=p[v+2+64]=oe+ae+1>>1,p[v+0+32]=yr(C,Q,G),p[v+1+32]=p[v+0+96]=yr(Q,G,oe),p[v+2+32]=p[v+1+96]=yr(G,oe,ae),p[v+3+32]=p[v+2+96]=yr(oe,ae,ue),p[v+3+64]=yr(ae,ue,be),p[v+3+96]=yr(ue,be,Fe)}function sc(p,v){var C=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],oe=p[v-1+96];p[v+0+0]=C+Q+1>>1,p[v+2+0]=p[v+0+32]=Q+G+1>>1,p[v+2+32]=p[v+0+64]=G+oe+1>>1,p[v+1+0]=yr(C,Q,G),p[v+3+0]=p[v+1+32]=yr(Q,G,oe),p[v+3+32]=p[v+1+64]=yr(G,oe,oe),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=oe}function ic(p,v){var C=p[v-1+0],Q=p[v-1+32],G=p[v-1+64],oe=p[v-1+96],ae=p[v-1-32],ue=p[v+0-32],be=p[v+1-32],Fe=p[v+2-32];p[v+0+0]=p[v+2+32]=C+ae+1>>1,p[v+0+32]=p[v+2+64]=Q+C+1>>1,p[v+0+64]=p[v+2+96]=G+Q+1>>1,p[v+0+96]=oe+G+1>>1,p[v+3+0]=yr(ue,be,Fe),p[v+2+0]=yr(ae,ue,be),p[v+1+0]=p[v+3+32]=yr(C,ae,ue),p[v+1+32]=p[v+3+64]=yr(Q,C,ae),p[v+1+64]=p[v+3+96]=yr(G,Q,C),p[v+1+96]=yr(oe,G,Q)}function Pg(p,v){var C;for(C=0;8>C;++C)r(p,v+32*C,p,v-32,8)}function ac(p,v){var C;for(C=0;8>C;++C)o(p,v,p[v-1],8),v+=32}function FA(p,v,C){var Q;for(Q=0;8>Q;++Q)o(v,C+32*Q,p,8)}function La(p,v){var C,Q=8;for(C=0;8>C;++C)Q+=p[v+C-32]+p[v-1+32*C];FA(Q>>4,p,v)}function kg(p,v){var C,Q=4;for(C=0;8>C;++C)Q+=p[v+C-32];FA(Q>>3,p,v)}function IA(p,v){var C,Q=4;for(C=0;8>C;++C)Q+=p[v-1+32*C];FA(Q>>3,p,v)}function Ac(p,v){FA(128,p,v)}function xl(p,v,C){var Q=p[v-C],G=p[v+0],oe=3*(G-Q)+jg[1020+p[v-2*C]-p[v+C]],ae=ah[112+(oe+4>>3)];p[v-C]=xs[255+Q+ah[112+(oe+3>>3)]],p[v+0]=xs[255+G-ae]}function Wu(p,v,C,Q){var G=p[v+0],oe=p[v+C];return js[255+p[v-2*C]-p[v-C]]>Q||js[255+oe-G]>Q}function Xu(p,v,C,Q){return 4*js[255+p[v-C]-p[v+0]]+js[255+p[v-2*C]-p[v+C]]<=Q}function Yu(p,v,C,Q,G){var oe=p[v-3*C],ae=p[v-2*C],ue=p[v-C],be=p[v+0],Fe=p[v+C],$e=p[v+2*C],ut=p[v+3*C];return 4*js[255+ue-be]+js[255+ae-Fe]>Q?0:js[255+p[v-4*C]-oe]<=G&&js[255+oe-ae]<=G&&js[255+ae-ue]<=G&&js[255+ut-$e]<=G&&js[255+$e-Fe]<=G&&js[255+Fe-be]<=G}function Ju(p,v,C,Q){var G=2*Q+1;for(Q=0;16>Q;++Q)Xu(p,v+Q,C,G)&&xl(p,v+Q,C)}function Fi(p,v,C,Q){var G=2*Q+1;for(Q=0;16>Q;++Q)Xu(p,v+Q*C,1,G)&&xl(p,v+Q*C,1)}function ea(p,v,C,Q){var G;for(G=3;0<G;--G)Ju(p,v+=4*C,C,Q)}function Og(p,v,C,Q){var G;for(G=3;0<G;--G)Fi(p,v+=4,C,Q)}function Pa(p,v,C,Q,G,oe,ae,ue){for(oe=2*oe+1;0<G--;){if(Yu(p,v,C,oe,ae))if(Wu(p,v,C,ue))xl(p,v,C);else{var be=p,Fe=v,$e=C,ut=be[Fe-2*$e],ht=be[Fe-$e],Ze=be[Fe+0],It=be[Fe+$e],yt=be[Fe+2*$e],Ve=27*(Ct=jg[1020+3*(Ze-ht)+jg[1020+ut-It]])+63>>7,Ye=18*Ct+63>>7,Ct=9*Ct+63>>7;be[Fe-3*$e]=xs[255+be[Fe-3*$e]+Ct],be[Fe-2*$e]=xs[255+ut+Ye],be[Fe-$e]=xs[255+ht+Ve],be[Fe+0]=xs[255+Ze-Ve],be[Fe+$e]=xs[255+It-Ye],be[Fe+2*$e]=xs[255+yt-Ct]}v+=Q}}function ti(p,v,C,Q,G,oe,ae,ue){for(oe=2*oe+1;0<G--;){if(Yu(p,v,C,oe,ae))if(Wu(p,v,C,ue))xl(p,v,C);else{var be=p,Fe=v,$e=C,ut=be[Fe-$e],ht=be[Fe+0],Ze=be[Fe+$e],It=ah[112+((yt=3*(ht-ut))+4>>3)],yt=ah[112+(yt+3>>3)],Ve=It+1>>1;be[Fe-2*$e]=xs[255+be[Fe-2*$e]+Ve],be[Fe-$e]=xs[255+ut+yt],be[Fe+0]=xs[255+ht-It],be[Fe+$e]=xs[255+Ze-Ve]}v+=Q}}function lc(p,v,C,Q,G,oe){Pa(p,v,C,1,16,Q,G,oe)}function QA(p,v,C,Q,G,oe){Pa(p,v,1,C,16,Q,G,oe)}function Dg(p,v,C,Q,G,oe){var ae;for(ae=3;0<ae;--ae)ti(p,v+=4*C,C,1,16,Q,G,oe)}function zl(p,v,C,Q,G,oe){var ae;for(ae=3;0<ae;--ae)ti(p,v+=4,1,C,16,Q,G,oe)}function Ng(p,v,C,Q,G,oe,ae,ue){Pa(p,v,G,1,8,oe,ae,ue),Pa(C,Q,G,1,8,oe,ae,ue)}function dc(p,v,C,Q,G,oe,ae,ue){Pa(p,v,1,G,8,oe,ae,ue),Pa(C,Q,1,G,8,oe,ae,ue)}function cc(p,v,C,Q,G,oe,ae,ue){ti(p,v+4*G,G,1,8,oe,ae,ue),ti(C,Q+4*G,G,1,8,oe,ae,ue)}function Zu(p,v,C,Q,G,oe,ae,ue){ti(p,v+4,1,G,8,oe,ae,ue),ti(C,Q+4,1,G,8,oe,ae,ue)}function Cl(){this.ba=new at,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new it,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function uc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function eh(){this.ua=0,this.Wa=new k,this.vb=new k,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new D}function Mg(){this.xb=this.a=0,this.l=new bn,this.ca=new at,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new eh,this.ab=0,this.gc=i(4,hc),this.Oc=0}function Sl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function UA(p,v,C,Q,G,oe,ae){for(p=p==null?0:p[v+0],v=0;v<ae;++v)G[oe+v]=p+C[Q+v]&255,p=G[oe+v]}function fc(p,v,C,Q,G,oe,ae){var ue;if(p==null)UA(null,null,C,Q,G,oe,ae);else for(ue=0;ue<ae;++ue)G[oe+ue]=p[v+ue]+C[Q+ue]&255}function ka(p,v,C,Q,G,oe,ae){if(p==null)UA(null,null,C,Q,G,oe,ae);else{var ue,be=p[v+0],Fe=be,$e=be;for(ue=0;ue<ae;++ue)Fe=$e+(be=p[v+ue])-Fe,$e=C[Q+ue]+(-256&Fe?0>Fe?0:255:Fe)&255,Fe=be,G[oe+ue]=$e}}function pc(p,v,C,Q){var G=v.width,oe=v.o;if(e(p!=null&&v!=null),0>C||0>=Q||C+Q>oe)return null;if(!p.Cc){if(p.ga==null){var ae;if(p.ga=new Sl,(ae=p.ga==null)||(ae=v.width*v.o,e(p.Gb.length==0),p.Gb=s(ae),p.Uc=0,p.Gb==null?ae=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,ae=1),ae=!ae),!ae){ae=p.ga;var ue=p.Fa,be=p.P,Fe=p.qc,$e=p.mb,ut=p.nb,ht=be+1,Ze=Fe-1,It=ae.l;if(e(ue!=null&&$e!=null&&v!=null),ja[0]=null,ja[1]=UA,ja[2]=fc,ja[3]=ka,ae.ca=$e,ae.tb=ut,ae.c=v.width,ae.i=v.height,e(0<ae.c&&0<ae.i),1>=Fe)v=0;else if(ae.$a=ue[be+0]>>0&3,ae.Z=ue[be+0]>>2&3,ae.Lc=ue[be+0]>>4&3,be=ue[be+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||be)v=0;else if(It.put=_t,It.ac=ct,It.bc=lt,It.ma=ae,It.width=v.width,It.height=v.height,It.Da=v.Da,It.v=v.v,It.va=v.va,It.j=v.j,It.o=v.o,ae.$a)e:{e(ae.$a==1),v=Mt();t:for(;;){if(v==null){v=0;break e}if(e(ae!=null),ae.mc=v,v.c=ae.c,v.i=ae.i,v.l=ae.l,v.l.ma=ae,v.l.width=ae.c,v.l.height=ae.i,v.a=0,$(v.m,ue,ht,Ze),!Gt(ae.c,ae.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Et(v.s)?(ae.ic=1,ue=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(ue),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(ae.ic=0,v=nr(v,ae.c)),!v))break t;v=1;break e}ae.mc=null,v=0}else v=Ze>=ae.c*ae.i;ae=!v}if(ae)return null;p.ga.Lc!=1?p.Ga=0:Q=oe-C}e(p.ga!=null),e(C+Q<=oe);e:{if(v=(ue=p.ga).c,oe=ue.l.o,ue.$a==0){if(ht=p.rc,Ze=p.Vc,It=p.Fa,be=p.P+1+C*v,Fe=p.mb,$e=p.nb+C*v,e(be<=p.P+p.qc),ue.Z!=0)for(e(ja[ue.Z]!=null),ae=0;ae<Q;++ae)ja[ue.Z](ht,Ze,It,be,Fe,$e,v),ht=Fe,Ze=$e,$e+=v,be+=v;else for(ae=0;ae<Q;++ae)r(Fe,$e,It,be,v),ht=Fe,Ze=$e,$e+=v,be+=v;p.rc=ht,p.Vc=Ze}else{if(e(ue.mc!=null),v=C+Q,e((ae=ue.mc)!=null),e(v<=ae.i),ae.C>=v)v=1;else if(ue.ic||nt(),ue.ic){ue=ae.V,ht=ae.Ba,Ze=ae.c;var yt=ae.i,Ve=(It=1,be=ae.$/Ze,Fe=ae.$%Ze,$e=ae.m,ut=ae.s,ae.$),Ye=Ze*yt,Ct=Ze*v,Tt=ut.wc,Ft=Ve<Ct?Lt(ut,Fe,be):null;e(Ve<=Ye),e(v<=yt),e(Et(ut));t:for(;;){for(;!$e.h&&Ve<Ct;){if(Fe&Tt||(Ft=Lt(ut,Fe,be)),e(Ft!=null),M($e),256>(yt=Nt(Ft.G[0],Ft.H[0],$e)))ue[ht+Ve]=yt,++Ve,++Fe>=Ze&&(Fe=0,++be<=v&&!(be%16)&&Ut(ae,be));else{if(!(280>yt)){It=0;break t}yt=Qt(yt-256,$e);var Wt,jt=Nt(Ft.G[4],Ft.H[4],$e);if(M($e),!(Ve>=(jt=vt(Ze,jt=Qt(jt,$e)))&&Ye-Ve>=yt)){It=0;break t}for(Wt=0;Wt<yt;++Wt)ue[ht+Ve+Wt]=ue[ht+Ve+Wt-jt];for(Ve+=yt,Fe+=yt;Fe>=Ze;)Fe-=Ze,++be<=v&&!(be%16)&&Ut(ae,be);Ve<Ct&&Fe&Tt&&(Ft=Lt(ut,Fe,be))}e($e.h==I($e))}Ut(ae,be>v?v:be);break t}!It||$e.h&&Ve<Ye?(It=0,ae.a=$e.h?5:3):ae.$=Ve,v=It}else v=Kt(ae,ae.V,ae.Ba,ae.c,ae.i,v,sr);if(!v){Q=0;break e}}C+Q>=oe&&(p.Cc=1),Q=1}if(!Q)return null;if(p.Cc&&((Q=p.ga)!=null&&(Q.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+C*G}function _(p,v,C,Q,G,oe){for(;0<G--;){var ae,ue=p,be=v+(C?1:0),Fe=p,$e=v+(C?0:3);for(ae=0;ae<Q;++ae){var ut=Fe[$e+4*ae];ut!=255&&(ut*=32897,ue[be+4*ae+0]=ue[be+4*ae+0]*ut>>23,ue[be+4*ae+1]=ue[be+4*ae+1]*ut>>23,ue[be+4*ae+2]=ue[be+4*ae+2]*ut>>23)}v+=oe}}function W(p,v,C,Q,G){for(;0<Q--;){var oe;for(oe=0;oe<C;++oe){var ae=p[v+2*oe+0],ue=15&(Fe=p[v+2*oe+1]),be=4369*ue,Fe=(240&Fe|Fe>>4)*be>>16;p[v+2*oe+0]=(240&ae|ae>>4)*be>>16&240|(15&ae|ae<<4)*be>>16>>4&15,p[v+2*oe+1]=240&Fe|ue}v+=G}}function Pe(p,v,C,Q,G,oe,ae,ue){var be,Fe,$e=255;for(Fe=0;Fe<G;++Fe){for(be=0;be<Q;++be){var ut=p[v+be];oe[ae+4*be]=ut,$e&=ut}v+=C,ae+=ue}return $e!=255}function Ke(p,v,C,Q,G){var oe;for(oe=0;oe<G;++oe)C[Q+oe]=p[v+oe]>>8}function nt(){Hs=_,_n=W,Bn=Pe,qn=Ke}function Bt(p,v,C){H[p]=function(Q,G,oe,ae,ue,be,Fe,$e,ut,ht,Ze,It,yt,Ve,Ye,Ct,Tt){var Ft,Wt=Tt-1>>1,jt=ue[be+0]|Fe[$e+0]<<16,cr=ut[ht+0]|Ze[It+0]<<16;e(Q!=null);var Rt=3*jt+cr+131074>>2;for(v(Q[G+0],255&Rt,Rt>>16,yt,Ve),oe!=null&&(Rt=3*cr+jt+131074>>2,v(oe[ae+0],255&Rt,Rt>>16,Ye,Ct)),Ft=1;Ft<=Wt;++Ft){var Jr=ue[be+Ft]|Fe[$e+Ft]<<16,an=ut[ht+Ft]|Ze[It+Ft]<<16,Vr=jt+Jr+cr+an+524296,Dr=Vr+2*(Jr+cr)>>3;Rt=Dr+jt>>1,jt=(Vr=Vr+2*(jt+an)>>3)+Jr>>1,v(Q[G+2*Ft-1],255&Rt,Rt>>16,yt,Ve+(2*Ft-1)*C),v(Q[G+2*Ft-0],255&jt,jt>>16,yt,Ve+(2*Ft-0)*C),oe!=null&&(Rt=Vr+cr>>1,jt=Dr+an>>1,v(oe[ae+2*Ft-1],255&Rt,Rt>>16,Ye,Ct+(2*Ft-1)*C),v(oe[ae+2*Ft+0],255&jt,jt>>16,Ye,Ct+(2*Ft+0)*C)),jt=Jr,cr=an}1&Tt||(Rt=3*jt+cr+131074>>2,v(Q[G+Tt-1],255&Rt,Rt>>16,yt,Ve+(Tt-1)*C),oe!=null&&(Rt=3*cr+jt+131074>>2,v(oe[ae+Tt-1],255&Rt,Rt>>16,Ye,Ct+(Tt-1)*C)))}}function kt(){Rs[Ah]=nC,Rs[lh]=l2,Rs[o2]=oC,Rs[dh]=d2,Rs[ch]=c2,Rs[Rg]=u2,Rs[s2]=sC,Rs[qg]=l2,Rs[Kg]=d2,Rs[uh]=c2,Rs[$g]=u2}function Vt(p){return p&-16384?0>p?0:255:p>>iC}function ar(p,v){return Vt((19077*p>>8)+(26149*v>>8)-14234)}function Cr(p,v,C){return Vt((19077*p>>8)-(6419*v>>8)-(13320*C>>8)+8708)}function _r(p,v){return Vt((19077*p>>8)+(33050*v>>8)-17685)}function qr(p,v,C,Q,G){Q[G+0]=ar(p,C),Q[G+1]=Cr(p,v,C),Q[G+2]=_r(p,v)}function Tn(p,v,C,Q,G){Q[G+0]=_r(p,v),Q[G+1]=Cr(p,v,C),Q[G+2]=ar(p,C)}function Dn(p,v,C,Q,G){var oe=Cr(p,v,C);v=oe<<3&224|_r(p,v)>>3,Q[G+0]=248&ar(p,C)|oe>>5,Q[G+1]=v}function eo(p,v,C,Q,G){var oe=240&_r(p,v)|15;Q[G+0]=240&ar(p,C)|Cr(p,v,C)>>4,Q[G+1]=oe}function Uo(p,v,C,Q,G){Q[G+0]=255,qr(p,v,C,Q,G+1)}function uo(p,v,C,Q,G){Tn(p,v,C,Q,G),Q[G+3]=255}function ri(p,v,C,Q,G){qr(p,v,C,Q,G),Q[G+3]=255}function Bs(p,v){return 0>p?0:p>v?v:p}function Ii(p,v,C){H[p]=function(Q,G,oe,ae,ue,be,Fe,$e,ut){for(var ht=$e+(-2&ut)*C;$e!=ht;)v(Q[G+0],oe[ae+0],ue[be+0],Fe,$e),v(Q[G+1],oe[ae+0],ue[be+0],Fe,$e+C),G+=2,++ae,++be,$e+=2*C;1&ut&&v(Q[G+0],oe[ae+0],ue[be+0],Fe,$e)}}function th(p,v,C){return C==0?p==0?v==0?6:5:v==0?4:0:C}function gc(p,v,C,Q,G){switch(p>>>30){case 3:na(v,C,Q,G,0);break;case 2:Rn(v,C,Q,G);break;case 1:Ko(v,C,Q,G)}}function vc(p,v){var C,Q,G=v.M,oe=v.Nb,ae=p.oc,ue=p.pc+40,be=p.oc,Fe=p.pc+584,$e=p.oc,ut=p.pc+600;for(C=0;16>C;++C)ae[ue+32*C-1]=129;for(C=0;8>C;++C)be[Fe+32*C-1]=129,$e[ut+32*C-1]=129;for(0<G?ae[ue-1-32]=be[Fe-1-32]=$e[ut-1-32]=129:(o(ae,ue-32-1,127,21),o(be,Fe-32-1,127,9),o($e,ut-32-1,127,9)),Q=0;Q<p.za;++Q){var ht=v.ya[v.aa+Q];if(0<Q){for(C=-1;16>C;++C)r(ae,ue+32*C-4,ae,ue+32*C+12,4);for(C=-1;8>C;++C)r(be,Fe+32*C-4,be,Fe+32*C+4,4),r($e,ut+32*C-4,$e,ut+32*C+4,4)}var Ze=p.Gd,It=p.Hd+Q,yt=ht.ad,Ve=ht.Hc;if(0<G&&(r(ae,ue-32,Ze[It].y,0,16),r(be,Fe-32,Ze[It].f,0,8),r($e,ut-32,Ze[It].ea,0,8)),ht.Za){var Ye=ae,Ct=ue-32+16;for(0<G&&(Q>=p.za-1?o(Ye,Ct,Ze[It].y[15],4):r(Ye,Ct,Ze[It+1].y,0,4)),C=0;4>C;C++)Ye[Ct+128+C]=Ye[Ct+256+C]=Ye[Ct+384+C]=Ye[Ct+0+C];for(C=0;16>C;++C,Ve<<=2)Ye=ae,Ct=ue+f2[C],ni[ht.Ob[C]](Ye,Ct),gc(Ve,yt,16*+C,Ye,Ct)}else if(Ye=th(Q,G,ht.Ob[0]),Ha[Ye](ae,ue),Ve!=0)for(C=0;16>C;++C,Ve<<=2)gc(Ve,yt,16*+C,ae,ue+f2[C]);for(C=ht.Gc,Ye=th(Q,G,ht.Dd),sa[Ye](be,Fe),sa[Ye]($e,ut),Ve=yt,Ye=be,Ct=Fe,255&(ht=C>>0)&&(170&ht?_c(Ve,256,Ye,Ct):Ns(Ve,256,Ye,Ct)),ht=$e,Ve=ut,255&(C>>=8)&&(170&C?_c(yt,320,ht,Ve):Ns(yt,320,ht,Ve)),G<p.Ub-1&&(r(Ze[It].y,0,ae,ue+480,16),r(Ze[It].f,0,be,Fe+224,8),r(Ze[It].ea,0,$e,ut+224,8)),C=8*oe*p.B,Ze=p.sa,It=p.ta+16*Q+16*oe*p.R,yt=p.qa,ht=p.ra+8*Q+C,Ve=p.Ha,Ye=p.Ia+8*Q+C,C=0;16>C;++C)r(Ze,It+C*p.R,ae,ue+32*C,16);for(C=0;8>C;++C)r(yt,ht+C*p.B,be,Fe+32*C,8),r(Ve,Ye+C*p.B,$e,ut+32*C,8)}}function El(p,v,C,Q,G,oe,ae,ue,be){var Fe=[0],$e=[0],ut=0,ht=be!=null?be.kd:0,Ze=be??new uc;if(p==null||12>C)return 7;Ze.data=p,Ze.w=v,Ze.ha=C,v=[v],C=[C],Ze.gb=[Ze.gb];e:{var It=v,yt=C,Ve=Ze.gb;if(e(p!=null),e(yt!=null),e(Ve!=null),Ve[0]=0,12<=yt[0]&&!t(p,It[0],"RIFF")){if(t(p,It[0]+8,"WEBP")){Ve=3;break e}var Ye=Be(p,It[0]+4);if(12>Ye||4294967286<Ye){Ve=3;break e}if(ht&&Ye>yt[0]-8){Ve=7;break e}Ve[0]=Ye,It[0]+=12,yt[0]-=12}Ve=0}if(Ve!=0)return Ve;for(Ye=0<Ze.gb[0],C=C[0];;){e:{var Ct=p;yt=v,Ve=C;var Tt=Fe,Ft=$e,Wt=It=[0];if((Rt=ut=[ut])[0]=0,8>Ve[0])Ve=7;else{if(!t(Ct,yt[0],"VP8X")){if(Be(Ct,yt[0]+4)!=10){Ve=3;break e}if(18>Ve[0]){Ve=7;break e}var jt=Be(Ct,yt[0]+8),cr=1+xe(Ct,yt[0]+12);if(2147483648<=cr*(Ct=1+xe(Ct,yt[0]+15))){Ve=3;break e}Wt!=null&&(Wt[0]=jt),Tt!=null&&(Tt[0]=cr),Ft!=null&&(Ft[0]=Ct),yt[0]+=18,Ve[0]-=18,Rt[0]=1}Ve=0}}if(ut=ut[0],It=It[0],Ve!=0)return Ve;if(yt=!!(2&It),!Ye&&ut)return 3;if(oe!=null&&(oe[0]=!!(16&It)),ae!=null&&(ae[0]=yt),ue!=null&&(ue[0]=0),ae=Fe[0],It=$e[0],ut&&yt&&be==null){Ve=0;break}if(4>C){Ve=7;break}if(Ye&&ut||!Ye&&!ut&&!t(p,v[0],"ALPH")){C=[C],Ze.na=[Ze.na],Ze.P=[Ze.P],Ze.Sa=[Ze.Sa];e:{jt=p,Ve=v,Ye=C;var Rt=Ze.gb;Tt=Ze.na,Ft=Ze.P,Wt=Ze.Sa,cr=22,e(jt!=null),e(Ye!=null),Ct=Ve[0];var Jr=Ye[0];for(e(Tt!=null),e(Wt!=null),Tt[0]=null,Ft[0]=null,Wt[0]=0;;){if(Ve[0]=Ct,Ye[0]=Jr,8>Jr){Ve=7;break e}var an=Be(jt,Ct+4);if(4294967286<an){Ve=3;break e}var Vr=8+an+1&-2;if(cr+=Vr,0<Rt&&cr>Rt){Ve=3;break e}if(!t(jt,Ct,"VP8 ")||!t(jt,Ct,"VP8L")){Ve=0;break e}if(Jr[0]<Vr){Ve=7;break e}t(jt,Ct,"ALPH")||(Tt[0]=jt,Ft[0]=Ct+8,Wt[0]=an),Ct+=Vr,Jr-=Vr}}if(C=C[0],Ze.na=Ze.na[0],Ze.P=Ze.P[0],Ze.Sa=Ze.Sa[0],Ve!=0)break}C=[C],Ze.Ja=[Ze.Ja],Ze.xa=[Ze.xa];e:if(Rt=p,Ve=v,Ye=C,Tt=Ze.gb[0],Ft=Ze.Ja,Wt=Ze.xa,jt=Ve[0],Ct=!t(Rt,jt,"VP8 "),cr=!t(Rt,jt,"VP8L"),e(Rt!=null),e(Ye!=null),e(Ft!=null),e(Wt!=null),8>Ye[0])Ve=7;else{if(Ct||cr){if(Rt=Be(Rt,jt+4),12<=Tt&&Rt>Tt-12){Ve=3;break e}if(ht&&Rt>Ye[0]-8){Ve=7;break e}Ft[0]=Rt,Ve[0]+=8,Ye[0]-=8,Wt[0]=cr}else Wt[0]=5<=Ye[0]&&Rt[jt+0]==47&&!(Rt[jt+4]>>5),Ft[0]=Ye[0];Ve=0}if(C=C[0],Ze.Ja=Ze.Ja[0],Ze.xa=Ze.xa[0],v=v[0],Ve!=0)break;if(4294967286<Ze.Ja)return 3;if(ue==null||yt||(ue[0]=Ze.xa?2:1),ae=[ae],It=[It],Ze.xa){if(5>C){Ve=7;break}ue=ae,ht=It,yt=oe,p==null||5>C?p=0:5<=C&&p[v+0]==47&&!(p[v+4]>>5)?(Ye=[0],Rt=[0],Tt=[0],$(Ft=new x,p,v,C),et(Ft,Ye,Rt,Tt)?(ue!=null&&(ue[0]=Ye[0]),ht!=null&&(ht[0]=Rt[0]),yt!=null&&(yt[0]=Tt[0]),p=1):p=0):p=0}else{if(10>C){Ve=7;break}ue=It,p==null||10>C||!Fn(p,v+3,C-3)?p=0:(ht=p[v+0]|p[v+1]<<8|p[v+2]<<16,yt=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=Ze.Ja||!yt||!p?p=0:(ae&&(ae[0]=yt),ue&&(ue[0]=p),p=1))}if(!p||(ae=ae[0],It=It[0],ut&&(Fe[0]!=ae||$e[0]!=It)))return 3;be!=null&&(be[0]=Ze,be.offset=v-be.w,e(4294967286>v-be.w),e(be.offset==be.ha-C));break}return Ve==0||Ve==7&&ut&&be==null?(oe!=null&&(oe[0]|=Ze.na!=null&&0<Ze.na.length),Q!=null&&(Q[0]=ae),G!=null&&(G[0]=It),0):Ve}function mc(p,v,C){var Q=v.width,G=v.height,oe=0,ae=0,ue=Q,be=G;if(v.Da=p!=null&&0<p.Da,v.Da&&(ue=p.cd,be=p.bd,oe=p.v,ae=p.j,11>C||(oe&=-2,ae&=-2),0>oe||0>ae||0>=ue||0>=be||oe+ue>Q||ae+be>G))return 0;if(v.v=oe,v.j=ae,v.va=oe+ue,v.o=ae+be,v.U=ue,v.T=be,v.da=p!=null&&0<p.da,v.da){if(!pe(ue,be,C=[p.ib],oe=[p.hb]))return 0;v.ib=C[0],v.hb=oe[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*Q/4&&v.hb<3*G/4,v.Kb=0),1}function wc(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function Fl(p,v,C,Q){if(Q==null||0>=p||0>=v)return 2;if(C!=null){if(C.Da){var G=C.cd,oe=C.bd,ae=-2&C.v,ue=-2&C.j;if(0>ae||0>ue||0>=G||0>=oe||ae+G>p||ue+oe>v)return 2;p=G,v=oe}if(C.da){if(!pe(p,v,G=[C.ib],oe=[C.hb]))return 2;p=G[0],v=oe[0]}}Q.width=p,Q.height=v;e:{var be=Q.width,Fe=Q.height;if(p=Q.S,0>=be||0>=Fe||!(p>=Ah&&13>p))p=2;else{if(0>=Q.Rd&&Q.sd==null){ae=oe=G=v=0;var $e=(ue=be*p2[p])*Fe;if(11>p||(oe=(Fe+1)/2*(v=(be+1)/2),p==12&&(ae=(G=be)*Fe)),(Fe=s($e+2*oe+ae))==null){p=1;break e}Q.sd=Fe,11>p?((be=Q.f.RGBA).eb=Fe,be.fb=0,be.A=ue,be.size=$e):((be=Q.f.kb).y=Fe,be.O=0,be.fa=ue,be.Fd=$e,be.f=Fe,be.N=0+$e,be.Ab=v,be.Cd=oe,be.ea=Fe,be.W=0+$e+oe,be.Db=v,be.Ed=oe,p==12&&(be.F=Fe,be.J=0+$e+2*oe),be.Tc=ae,be.lb=G)}if(v=1,G=Q.S,oe=Q.width,ae=Q.height,G>=Ah&&13>G)if(11>G)p=Q.f.RGBA,v&=(ue=Math.abs(p.A))*(ae-1)+oe<=p.size,v&=ue>=oe*p2[G],v&=p.eb!=null;else{p=Q.f.kb,ue=(oe+1)/2,$e=(ae+1)/2,be=Math.abs(p.fa),Fe=Math.abs(p.Ab);var ut=Math.abs(p.Db),ht=Math.abs(p.lb),Ze=ht*(ae-1)+oe;v&=be*(ae-1)+oe<=p.Fd,v&=Fe*($e-1)+ue<=p.Cd,v=(v&=ut*($e-1)+ue<=p.Ed)&be>=oe&Fe>=ue&ut>=ue,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,G==12&&(v&=ht>=oe,v&=Ze<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||C!=null&&C.fd&&(p=wc(Q)),p}var _o=64,Il=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ql=24,Ul=32,yc=8,ss=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];le("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(p){return p},H.Predictor2=function(p,v,C){return v[C+0]},H.Predictor3=function(p,v,C){return v[C+1]},H.Predictor4=function(p,v,C){return v[C-1]},H.Predictor5=function(p,v,C){return ke(ke(p,v[C+1]),v[C+0])},H.Predictor6=function(p,v,C){return ke(p,v[C-1])},H.Predictor7=function(p,v,C){return ke(p,v[C+0])},H.Predictor8=function(p,v,C){return ke(v[C-1],v[C+0])},H.Predictor9=function(p,v,C){return ke(v[C+0],v[C+1])},H.Predictor10=function(p,v,C){return ke(ke(p,v[C-1]),ke(v[C+0],v[C+1]))},H.Predictor11=function(p,v,C){var Q=v[C+0];return 0>=N(Q>>24&255,p>>24&255,(v=v[C-1])>>24&255)+N(Q>>16&255,p>>16&255,v>>16&255)+N(Q>>8&255,p>>8&255,v>>8&255)+N(255&Q,255&p,255&v)?Q:p},H.Predictor12=function(p,v,C){var Q=v[C+0];return(ce((p>>24&255)+(Q>>24&255)-((v=v[C-1])>>24&255))<<24|ce((p>>16&255)+(Q>>16&255)-(v>>16&255))<<16|ce((p>>8&255)+(Q>>8&255)-(v>>8&255))<<8|ce((255&p)+(255&Q)-(255&v)))>>>0},H.Predictor13=function(p,v,C){var Q=v[C-1];return(ee((p=ke(p,v[C+0]))>>24&255,Q>>24&255)<<24|ee(p>>16&255,Q>>16&255)<<16|ee(p>>8&255,Q>>8&255)<<8|ee(p>>0&255,Q>>0&255))>>>0};var Hg=H.PredictorAdd0;H.PredictorAdd1=_e,le("Predictor2","PredictorAdd2"),le("Predictor3","PredictorAdd3"),le("Predictor4","PredictorAdd4"),le("Predictor5","PredictorAdd5"),le("Predictor6","PredictorAdd6"),le("Predictor7","PredictorAdd7"),le("Predictor8","PredictorAdd8"),le("Predictor9","PredictorAdd9"),le("Predictor10","PredictorAdd10"),le("Predictor11","PredictorAdd11"),le("Predictor12","PredictorAdd12"),le("Predictor13","PredictorAdd13");var bc=H.PredictorAdd2;Ne("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Ne("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var rh,Ds=H.ColorIndexInverseTransform,Tl=H.MapARGB,nh=H.VP8LColorIndexInverseTransformAlpha,oh=H.MapAlpha,Oa=H.VP8LPredictorsAdd=[];Oa.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var TA,is,qo,Da,ta,ra,Ll,na,Rn,_c,Ko,Ns,Pl,sh,Bc,LA,PA,Na,kA,kl,OA,Ma,xc,Ms,Hs,_n,Bn,qn,io=s(511),oa=s(2041),zc=s(225),Ol=s(767),ih=0,jg=oa,ah=zc,xs=Ol,js=io,Ah=0,lh=1,o2=2,dh=3,ch=4,Rg=5,s2=6,qg=7,Kg=8,uh=9,$g=10,Rz=[2,3,7],qz=[3,3,11],i2=[280,256,256,256,40],Kz=[0,1,1,1,0],$z=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gz=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wz=8,Vg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Cc=null,Xz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yz=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],a2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jz=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zz=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],eC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ha=[],ni=[],sa=[],rC=1,A2=2,ja=[],Rs=[];Bt("UpsampleRgbLinePair",qr,3),Bt("UpsampleBgrLinePair",Tn,3),Bt("UpsampleRgbaLinePair",ri,4),Bt("UpsampleBgraLinePair",uo,4),Bt("UpsampleArgbLinePair",Uo,4),Bt("UpsampleRgba4444LinePair",eo,2),Bt("UpsampleRgb565LinePair",Dn,2);var nC=H.UpsampleRgbLinePair,oC=H.UpsampleBgrLinePair,l2=H.UpsampleRgbaLinePair,d2=H.UpsampleBgraLinePair,c2=H.UpsampleArgbLinePair,u2=H.UpsampleRgba4444LinePair,sC=H.UpsampleRgb565LinePair,hh=16,fh=1<<hh-1,Sc=-227,Wg=482,iC=6,h2=0,aC=s(256),AC=s(256),lC=s(256),dC=s(256),cC=s(Wg-Sc),uC=s(Wg-Sc);Ii("YuvToRgbRow",qr,3),Ii("YuvToBgrRow",Tn,3),Ii("YuvToRgbaRow",ri,4),Ii("YuvToBgraRow",uo,4),Ii("YuvToArgbRow",Uo,4),Ii("YuvToRgba4444Row",eo,2),Ii("YuvToRgb565Row",Dn,2);var f2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ph=[0,2,8],hC=[8,7,6,4,4,2,2,2,1,1,1,1],fC=1;this.WebPDecodeRGBA=function(p,v,C,Q,G){var oe=lh,ae=new Cl,ue=new at;ae.ba=ue,ue.S=oe,ue.width=[ue.width],ue.height=[ue.height];var be=ue.width,Fe=ue.height,$e=new At;if($e==null||p==null)var ut=2;else e($e!=null),ut=El(p,v,C,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if(ut!=0?be=0:(be!=null&&(be[0]=$e.width[0]),Fe!=null&&(Fe[0]=$e.height[0]),be=1),be){ue.width=ue.width[0],ue.height=ue.height[0],Q!=null&&(Q[0]=ue.width),G!=null&&(G[0]=ue.height);e:{if(Q=new bn,(G=new uc).data=p,G.w=v,G.ha=C,G.kd=1,v=[0],e(G!=null),((p=El(G.data,G.w,G.ha,null,null,null,v,null,G))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(ae!=null),Q.data=G.data,Q.w=G.w+G.offset,Q.ha=G.ha-G.offset,Q.put=_t,Q.ac=ct,Q.bc=lt,Q.ma=ae,G.xa){if((p=Mt())==null){ae=1;break e}if(function(ht,Ze){var It=[0],yt=[0],Ve=[0];t:for(;;){if(ht==null)return 0;if(Ze==null)return ht.a=2,0;if(ht.l=Ze,ht.a=0,$(ht.m,Ze.data,Ze.w,Ze.ha),!et(ht.m,It,yt,Ve)){ht.a=3;break t}if(ht.xb=A2,Ze.width=It[0],Ze.height=yt[0],!Gt(It[0],yt[0],1,ht,null))break t;return 1}return e(ht.a!=0),0}(p,Q)){if(Q=(v=Fl(Q.width,Q.height,ae.Oa,ae.ba))==0){t:{Q=p;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((C=Q.l)!=null),e((G=C.ma)!=null),Q.xb!=0){if(Q.ca=G.ba,Q.tb=G.tb,e(Q.ca!=null),!mc(G.Oa,C,dh)){Q.a=2;break r}if(!nr(Q,C.width)||C.da)break r;if((C.da||Oe(Q.ca.S))&&nt(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&nt()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Le(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Kt(Q,Q.V,Q.Ba,Q.c,Q.i,C.o,zt))break r;G.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(v=p.a)}else v=p.a}else{if((p=new zr)==null){ae=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,Fo(p,Q)){if((v=Fl(Q.width,Q.height,ae.Oa,ae.ba))==0){if(p.Aa=0,C=ae.Oa,e((G=p)!=null),C!=null){if(0<(be=0>(be=C.Md)?0:100<be?255:255*be/100)){for(Fe=$e=0;4>Fe;++Fe)12>(ut=G.pb[Fe]).lc&&(ut.ia=be*hC[0>ut.lc?0:ut.lc]>>3),$e|=ut.ia;$e&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=C.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}ns(p,Q)||(v=p.a)}}else v=p.a}v==0&&ae.Oa!=null&&ae.Oa.fd&&(v=wc(ae.ba))}ae=v}oe=ae!=0?null:11>oe?ue.f.RGBA.eb:ue.f.kb.y}else oe=null;return oe};var p2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(H,J){for(var we="",O=0;O<4;O++)we+=String.fromCharCode(H[J++]);return we}function c(H,J){return(H[J+0]<<0|H[J+1]<<8|H[J+2]<<16)>>>0}function u(H,J){return(H[J+0]<<0|H[J+1]<<8|H[J+2]<<16|H[J+3]<<24)>>>0}new A;var h=[0],f=[0],g=[],m=new A,y=n,b=function(H,J){var we={},O=0,D=!1,Z=0,ie=0;if(we.frames=[],!function(E,I,U,M){for(var j=0;j<M;j++)if(E[I+j]!=U.charCodeAt(j))return!0;return!1}(H,J,"RIFF",4)){var de,ne;for(u(H,J+=4),J+=8;J<H.length;){var fe=d(H,J),$=u(H,J+=4);J+=4;var q=$+(1&$);switch(fe){case"VP8 ":case"VP8L":we.frames[O]===void 0&&(we.frames[O]={}),(x=we.frames[O]).src_off=D?ie:J-8,x.src_size=Z+$+8,O++,D&&(D=!1,Z=0,ie=0);break;case"VP8X":(x=we.header={}).feature_flags=H[J];var se=J+4;x.canvas_width=1+c(H,se),se+=3,x.canvas_height=1+c(H,se),se+=3;break;case"ALPH":D=!0,Z=q+8,ie=J-8;break;case"ANIM":(x=we.header).bgcolor=u(H,J),se=J+4,x.loop_count=(de=H)[(ne=se)+0]<<0|de[ne+1]<<8,se+=2;break;case"ANMF":var Ae,x;(x=we.frames[O]={}).offset_x=2*c(H,J),J+=3,x.offset_y=2*c(H,J),J+=3,x.width=1+c(H,J),J+=3,x.height=1+c(H,J),J+=3,x.duration=c(H,J),J+=3,Ae=H[J++],x.dispose=1&Ae,x.blend=Ae>>1&1}fe!="ANMF"&&(J+=q)}return we}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,F=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],f=[S.canvas_width];for(var P=0;P<F.length&&F[P].blend!=0;P++);}var L=F[0],re=m.WebPDecodeRGBA(y,L.src_off,L.src_size,f,h);L.rgba=re,L.imgwidth=f[0],L.imgheight=h[0];for(var K=0;K<f[0]*h[0]*4;K++)g[K]=re[K];return this.width=f,this.height=h,this.data=g,this}(function(n){var e=function(){return typeof ym=="function"},t=function(h,f,g,m){var y=4,b=i;switch(m){case n.image_compression.FAST:y=1,b=s;break;case n.image_compression.MEDIUM:y=6,b=a;break;case n.image_compression.SLOW:y=9,b=A}h=r(h,f,g,b);var S=ym(h,{level:y});return n.__addimage__.arrayBufferToBinaryString(S)},r=function(h,f,g,m){for(var y,b,S,F=h.length/f,P=new Uint8Array(h.length+F),L=c(),re=0;re<F;re+=1){if(S=re*f,y=h.subarray(S,S+f),m)P.set(m(y,g,b),S+re);else{for(var K,H=L.length,J=[];K<H;K+=1)J[K]=L[K](y,g,b);var we=u(J.concat());P.set(J[we],S+re)}b=y}return P},o=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var g,m=[],y=h.length;m[0]=1;for(var b=0;b<y;b+=1)g=h[b-f]||0,m[b+1]=h[b]-g+256&255;return m},i=function(h,f,g){var m,y=[],b=h.length;y[0]=2;for(var S=0;S<b;S+=1)m=g&&g[S]||0,y[S+1]=h[S]-m+256&255;return y},a=function(h,f,g){var m,y,b=[],S=h.length;b[0]=3;for(var F=0;F<S;F+=1)m=h[F-f]||0,y=g&&g[F]||0,b[F+1]=h[F]+256-(m+y>>>1)&255;return b},A=function(h,f,g){var m,y,b,S,F=[],P=h.length;F[0]=4;for(var L=0;L<P;L+=1)m=h[L-f]||0,y=g&&g[L]||0,b=g&&g[L-f]||0,S=d(m,y,b),F[L+1]=h[L]-S+256&255;return F},d=function(h,f,g){if(h===f&&f===g)return h;var m=Math.abs(f-g),y=Math.abs(h-g),b=Math.abs(h+f-g-g);return m<=y&&m<=b?h:y<=b?f:g},c=function(){return[o,s,i,a,A]},u=function(h){var f=h.map(function(g){return g.reduce(function(m,y){return m+Math.abs(y)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(h,f,g,m){var y,b,S,F,P,L,re,K,H,J,we,O,D,Z,ie,de=this.decode.FLATE_DECODE,ne="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(S=new YD(h)).imgData,b=S.bits,y=S.colorSpace,P=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){H=(K=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,we=new Uint8Array(H*S.colors),J=new Uint8Array(H);var fe,$=S.pixelBitlength-S.bits;for(Z=0,ie=0;Z<H;Z++){for(D=K[Z],fe=0;fe<$;)we[ie++]=D>>>fe&255,fe+=S.bits;J[Z]=D>>>fe&255}}if(S.bits===16){H=(K=new Uint32Array(S.decodePixels().buffer)).length,we=new Uint8Array(H*(32/S.pixelBitlength)*S.colors),J=new Uint8Array(H*(32/S.pixelBitlength)),O=S.colors>1,Z=0,ie=0;for(var q=0;Z<H;)D=K[Z++],we[ie++]=D>>>0&255,O&&(we[ie++]=D>>>16&255,D=K[Z++],we[ie++]=D>>>0&255),J[q++]=D>>>16&255;b=8}m!==n.image_compression.NONE&&e()?(h=t(we,S.width*S.colors,S.colors,m),re=t(J,S.width,1,m)):(h=we,re=J,de=void 0)}if(S.colorType===3&&(y=this.color_spaces.INDEXED,L=S.palette,S.transparency.indexed)){var se=S.transparency.indexed,Ae=0;for(Z=0,H=se.length;Z<H;++Z)Ae+=se[Z];if((Ae/=255)===H-1&&se.indexOf(0)!==-1)F=[se.indexOf(0)];else if(Ae!==H){for(K=S.decodePixels(),J=new Uint8Array(K.length),Z=0,H=K.length;Z<H;Z++)J[Z]=se[K[Z]];re=t(J,S.width,1)}}var x=function(E){var I;switch(E){case n.image_compression.FAST:I=11;break;case n.image_compression.MEDIUM:I=13;break;case n.image_compression.SLOW:I=14;break;default:I=12}return I}(m);return de===this.decode.FLATE_DECODE&&(ne="/Predictor "+x+" "),ne+="/Colors "+P+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(re&&this.__addimage__.isArrayBuffer(re)||this.__addimage__.isArrayBufferView(re))&&(re=this.__addimage__.arrayBufferToBinaryString(re)),{alias:g,data:h,index:f,filter:de,decodeParameters:ne,transparency:F,palette:L,sMask:re,predictor:x,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:y}}}})(pr.API),function(n){n.processGIF89A=function(e,t,r,o){var s=new JD(e),i=s.width,a=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var d={data:A,width:i,height:a},c=new t0(100).encode(d,100);return n.processJPEG.call(this,c,t,r,o)},n.processGIF87A=n.processGIF89A}(pr.API),ai.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ai.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){wn.log("bit decode error:"+t)}},ai.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var A=this.palette[s>>7-a&1];this.data[i+4*a]=A.blue,this.data[i+4*a+1]=A.green,this.data[i+4*a+2]=A.red,this.data[i+4*a+3]=255}t!==0&&(this.pos+=4-t)}},ai.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,a=s>>4,A=15&s,d=this.palette[a];if(this.data[i]=d.blue,this.data[i+1]=d.green,this.data[i+2]=d.red,this.data[i+3]=255,2*o+1>=this.width)break;d=this.palette[A],this.data[i+4]=d.blue,this.data[i+4+1]=d.green,this.data[i+4+2]=d.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},ai.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},ai.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,d=s>>15?255:0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=d}this.pos+=n}},ai.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&t)/t*255|0,d=(i>>11)/e*255|0,c=o*this.width*4+4*s;this.data[c]=d,this.data[c+1]=A,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},ai.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=s,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},ai.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=i}},ai.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var s=new ai(e,!1),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new t0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(pr.API),mb.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var s=new mb(e),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new t0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(pr.API),pr.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,s=new Uint8Array(o/4*3),i=new Uint8Array(o/4),a=0,A=0,d=0;d<o;d+=4){var c=r[d],u=r[d+1],h=r[d+2],f=r[d+3];s[a++]=c,s[a++]=u,s[a++]=h,i[A++]=f}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},pr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ad=pr.API,If=Ad.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,A=a.fof?a.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,c=d.fof?d.fof:1,u=e.doKerning!==!1,h=0,f=n.length,g=0,m=a[0]||A,y=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?y.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=u&&dn(d[r])==="object"&&!isNaN(parseInt(d[r][g],10))?d[r][g]/c:0,y.push((a[r]||m)/A+h)),g=r;return y},fb=Ad.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Ad.processArabic&&(n=Ad.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:If.apply(this,arguments).reduce(function(s,i){return s+i},0)},pb=function(n,e,t,r){for(var o=[],s=0,i=n.length,a=0;s!==i&&a+e[s]<t;)a+=e[s],s++;o.push(n.slice(0,s));var A=s;for(a=0;s!==i;)a+e[s]>r&&(o.push(n.slice(A,s)),a=0,A=s),a+=e[s],s++;return A!==s&&o.push(n.slice(A,s)),o},gb=function(n,e,t){t||(t={});var r,o,s,i,a,A,d,c=[],u=[c],h=t.textIndent||0,f=0,g=0,m=n.split(" "),y=If.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?m[0].length+2:t.lineIndent||0){var b=Array(A).join(" "),S=[];m.map(function(P){(P=P.split(/\s*\n/)).length>1?S=S.concat(P.map(function(L,re){return(re&&L.length?`
`:"")+L})):S.push(P[0])}),m=S,A=fb.apply(this,[b,t])}for(s=0,i=m.length;s<i;s++){var F=0;if(r=m[s],A&&r[0]==`
`&&(r=r.substr(1),F=1),h+f+(g=(o=If.apply(this,[r,t])).reduce(function(P,L){return P+L},0))>e||F){if(g>e){for(a=pb.apply(this,[r,o,e-(h+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);g=o.slice(r.length-(c[0]?c[0].length:0)).reduce(function(P,L){return P+L},0)}else c=[r];u.push(c),h=g+A,f=y}else c.push(r),h+=f+g,f=y}return d=A?function(P,L){return(L?b:"")+P.join(" ")}:function(P){return P.join(" ")},u.map(d)},Ad.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var a,A,d=[];for(a=0,A=r.length;a<A;a++)d=d.concat(gb.apply(this,[r[a],i,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(u){return"0x"+parseInt(u,10).toString(16)},i=n.__fontmetrics__.compress=function(u){var h,f,g,m,y=["{"];for(var b in u){if(h=u[b],isNaN(parseInt(b,10))?f="'"+b+"'":(b=parseInt(b,10),f=(f=s(b).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),m="-"):(g=s(h).slice(2),m=""),g=m+g.slice(0,-1)+r[g.slice(-1)];else{if(dn(h)!=="object")throw new Error("Don't know what to do with value type "+dn(h)+".");g=i(h)}y.push(f+g)}return y.push("}"),y.join("")},a=n.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,g,m,y={},b=1,S=y,F=[],P="",L="",re=u.length-1,K=1;K<re;K+=1)(m=u[K])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(m):m=="{"?(F.push([S,g]),S={},g=void 0):m=="}"?((f=F.pop())[0][f[1]]=S,g=void 0,S=f[0]):m=="-"?b=-1:g===void 0?t.hasOwnProperty(m)?(P+=t[m],g=parseInt(P,16)*b,b=1,P=""):P+=m:t.hasOwnProperty(m)?(L+=t[m],S[g]=parseInt(L,16)*b,b=1,g=void 0,L=""):L+=m;return y},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(u){var h=u.font,f=c.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(pr.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=t.charCodeAt(s);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(i,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(hu(a)),i.metadata=n.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(o,r)}}])}(pr),function(n){function e(){return(mr.canvg?Promise.resolve(mr.canvg):us(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}pr.API.addSvgAsImage=function(t,r,o,s,i,a,A,d){if(isNaN(r)||isNaN(o))throw wn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw wn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(g){return g.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),r,o,s,i,A,d)})}}(),pr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},pr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(i),A=[],d=0,c=0,u=0;function h(g,m){var y,b=!1;for(y=0;y<g.length;y+=1)g[y]===m&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=a.length;for(u=0;u<f;u+=1)t[a[u]].value=t[a[u]].defaultValue,t[a[u]].explicitSet=!1}if(dn(n)==="object"){for(o in n)if(s=n[o],h(a,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&h(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")A.push(String(s[d]-1));else if(s[d].length>1){for(c=0;c<s[d].length;c+=1)typeof s[d][c]!="number"&&(r=!1);r===!0&&A.push([s[d][0]-1,s[d][1]-1].join(" "))}t[o].value="["+A.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?m.push("/"+g+" /"+t[g].value):m.push("/"+g+" "+t[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+i.length+a.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+s+i+a+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(pr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,i){for(var a,A=i.metadata.Unicode.widths,d=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(a=i.metadata.characterToGlyph(s.charCodeAt(u)),i.metadata.glyIdsUsed.push(a),i.metadata.toUnicode[a]=s.charCodeAt(u),A.indexOf(a)==-1&&(A.push(a),A.push([parseInt(i.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(d[4-a.length],a)}return c.join("")},r=function(s){var i,a,A,d,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(a=Object.keys(s).sort(function(f,g){return f-g})).length;u<h;u++)i=a[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(d=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),A.push("<"+i+"><"+d+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",g=0;g<h.length;g++)f+=String.fromCharCode(h[g]);var m=d();c({data:f,addLength1:!0,objectId:m}),A("endobj");var y=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var b=d();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+fd(a.fontName)),A("/FontFile2 "+m+" 0 R"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/Flags "+a.metadata.flags),A("/StemV "+a.metadata.stemV),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A(">>"),A("endobj");var S=d();A("<<"),A("/Type /Font"),A("/BaseFont /"+fd(a.fontName)),A("/FontDescriptor "+b+" 0 R"),A("/W "+n.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+a.encoding+")"),A(">>"),A(">>"),A("endobj"),a.objectNumber=d(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+y+" 0 R"),A("/BaseFont /"+fd(a.fontName)),A("/Encoding /"+a.encoding),A("/DescendantFonts ["+S+" 0 R]"),A(">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",f=0;f<u.length;f++)h+=String.fromCharCode(u[f]);var g=d();c({data:h,addLength1:!0,objectId:g}),A("endobj");var m=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),A("endobj");var y=d();A("<<"),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A("/StemV "+a.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+g+" 0 R"),A("/Flags 96"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/FontName /"+fd(a.fontName)),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A(">>"),A("endobj"),a.objectNumber=d();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+fd(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]);var o=function(s){var i,a=s.text||"",A=s.x,d=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,f=u.activeFontKey,g=u.fonts,m=f,y="",b=0,S="",F=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:a,x:A,y:d,options:c,mutex:u};for(S=a,m=f,Array.isArray(a)&&(S=a[0]),b=0;b<S.length;b+=1)g[m].metadata.hasOwnProperty("cmap")&&(i=g[m].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),i||S[b].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?y+=S[b]:y+="";var P="";return parseInt(m.slice(1))<14||F==="WinAnsiEncoding"?P=h(y,m).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(P=t(y,g[m])),u.isHex=!0,{text:P,x:A,y:d,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var i=s.text||"",a=[],A={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var d=0;for(d=0;d<i.length;d+=1)Array.isArray(i[d])&&i[d].length===3?a.push([o(Object.assign({},A,{text:i[d][0]})).text,i[d][1],i[d][2]]):a.push(o(Object.assign({},A,{text:i[d]})).text);s.text=a}else s.text=o(Object.assign({},A,{text:i})).text}])}(pr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(pr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,s,i,a,A,d,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,F=0;this.__bidiEngine__={};var P=function(O){var D=O.charCodeAt(),Z=D>>8,ie=m[Z];return ie!==void 0?u[256*ie+(255&D)]:Z===252||Z===253?"AL":b.test(Z)?"L":Z===8?"R":"N"},L=function(O){for(var D,Z=0;Z<O.length;Z++){if((D=P(O.charAt(Z)))==="L")return!1;if(D==="R")return!0}return!1},re=function(O,D,Z,ie){var de,ne,fe,$,q=D[ie];switch(q){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(q="AN");break;case"AL":S=!0,q="R";break;case"WS":q="N";break;case"CS":ie<1||ie+1>=D.length||(de=Z[ie-1])!=="EN"&&de!=="AN"||(ne=D[ie+1])!=="EN"&&ne!=="AN"?q="N":S&&(ne="AN"),q=ne===de?ne:"N";break;case"ES":q=(de=ie>0?Z[ie-1]:"B")==="EN"&&ie+1<D.length&&D[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&Z[ie-1]==="EN"){q="EN";break}if(S){q="N";break}for(fe=ie+1,$=D.length;fe<$&&D[fe]==="ET";)fe++;q=fe<$&&D[fe]==="EN"?"EN":"N";break;case"NSM":if(i&&!a){for($=D.length,fe=ie+1;fe<$&&D[fe]==="NSM";)fe++;if(fe<$){var se=O[ie],Ae=se>=1425&&se<=2303||se===64286;if(de=D[fe],Ae&&(de==="R"||de==="AL")){q="R";break}}}q=ie<1||(de=D[ie-1])==="B"?"N":Z[ie-1];break;case"B":S=!1,o=!0,q=F;break;case"S":s=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":q="N"}return q},K=function(O,D,Z){var ie=O.split("");return Z&&H(ie,Z,{hiLevel:F}),ie.reverse(),D&&D.reverse(),ie.join("")},H=function(O,D,Z){var ie,de,ne,fe,$,q=-1,se=O.length,Ae=0,x=[],E=F?f:h,I=[];for(S=!1,o=!1,s=!1,de=0;de<se;de++)I[de]=P(O[de]);for(ne=0;ne<se;ne++){if($=Ae,x[ne]=re(O,I,x,ne),ie=240&(Ae=E[$][g[x[ne]]]),Ae&=15,D[ne]=fe=E[Ae][5],ie>0)if(ie===16){for(de=q;de<ne;de++)D[de]=1;q=-1}else q=-1;if(E[Ae][6])q===-1&&(q=ne);else if(q>-1){for(de=q;de<ne;de++)D[de]=fe;q=-1}I[ne]==="B"&&(D[ne]=0),Z.hiLevel|=fe}s&&function(U,M,j){for(var V=0;V<j;V++)if(U[V]==="S"){M[V]=F;for(var X=V-1;X>=0&&U[X]==="WS";X--)M[X]=F}}(I,D,se)},J=function(O,D,Z,ie,de){if(!(de.hiLevel<O)){if(O===1&&F===1&&!o)return D.reverse(),void(Z&&Z.reverse());for(var ne,fe,$,q,se=D.length,Ae=0;Ae<se;){if(ie[Ae]>=O){for($=Ae+1;$<se&&ie[$]>=O;)$++;for(q=Ae,fe=$-1;q<fe;q++,fe--)ne=D[q],D[q]=D[fe],D[fe]=ne,Z&&(ne=Z[q],Z[q]=Z[fe],Z[fe]=ne);Ae=$}Ae++}}},we=function(O,D,Z){var ie=O.split(""),de={hiLevel:F};return Z||(Z=[]),H(ie,Z,de),function(ne,fe,$){if($.hiLevel!==0&&c)for(var q,se=0;se<ne.length;se++)fe[se]===1&&(q=y.indexOf(ne[se]))>=0&&(ne[se]=y[q+1])}(ie,Z,de),J(2,ie,D,Z,de),J(1,ie,D,Z,de),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(O,D,Z){if(function(de,ne){if(ne)for(var fe=0;fe<de.length;fe++)ne[fe]=fe;a===void 0&&(a=L(de)),d===void 0&&(d=L(de))}(O,D),i||!A||d)if(i&&A&&a^d)F=a?1:0,O=K(O,D,Z);else if(!i&&A&&d)F=a?1:0,O=we(O,D,Z),O=K(O,D);else if(!i||a||A||d){if(i&&!A&&a^d)O=K(O,D),a?(F=0,O=we(O,D,Z)):(F=1,O=we(O,D,Z),O=K(O,D));else if(i&&a&&!A&&d)F=1,O=we(O,D,Z),O=K(O,D);else if(!i&&!A&&a^d){var ie=c;a?(F=1,O=we(O,D,Z),F=0,c=!1,O=we(O,D,Z),c=ie):(F=0,O=we(O,D,Z),O=K(O,D),F=1,c=!1,O=we(O,D,Z),c=ie,O=K(O,D))}}else F=0,O=we(O,D,Z);else F=a?1:0,O=we(O,D,Z);return O},this.__bidiEngine__.setOptions=function(O){O&&(i=O.isInputVisual,A=O.isOutputVisual,a=O.isInputRtl,d=O.isOutputRtl,c=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(i=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?i.push([t.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):i.push([t.doBidiReorder(o[a])]);r.text=i}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(pr),pr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new BA(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new hN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new ZD(this.contents),this.head=new tN(this),this.name=new iN(this),this.cmap=new sz(this),this.toUnicode={},this.hhea=new rN(this),this.maxp=new aN(this),this.hmtx=new AN(this),this.post=new oN(this),this.os2=new nN(this),this.loca=new uN(this),this.glyf=new lN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,a,A,d;for(d=[],i=0,a=(A=this.bbox).length;i<a;i++)e=A[i],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)o=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Bi,BA=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,s,i,a,A;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*s+65536*i+256*a+A},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),ZD=function(){var n;function e(t){var r,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,s,i,a,A,d,c,u,h,f,g,m;for(m in f=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(f)/A),i=Math.floor(u/A),c=16*f-u,(o=new BA).writeInt(this.scalarType),o.writeShort(f),o.writeShort(u),o.writeShort(i),o.writeShort(c),s=16*f,d=o.pos+s,a=null,g=[],t)for(h=t[m],o.writeString(m),o.writeInt(n(h)),o.writeInt(d),o.writeInt(h.length),g=g.concat(h),m==="head"&&(a=d),d+=h.length;d%4;)g.push(0),d++;return o.write(g),r=2981146554-n(o.data),o.pos=a+8,o.writeUInt32(r),o.data},n=function(t){var r,o,s,i;for(t=iz.call(t);t.length%4;)t.push(0);for(s=new BA(t),o=0,r=0,i=t.length;r<i;r=r+=4)o+=s.readUInt32();return 4294967295&o},e}(),eN={}.hasOwnProperty,Zi=function(n,e){for(var t in e)eN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Bi=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var tN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new BA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),wb=function(){function n(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,b,S,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var P,L;for(L=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)L.push(e.readUInt16());return L}(),e.pos+=2,m=function(){var P,L;for(L=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)L.push(e.readUInt16());return L}(),d=function(){var P,L;for(L=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)L.push(e.readUInt16());return L}(),c=function(){var P,L;for(L=[],A=P=0;0<=h?P<h:P>h;A=0<=h?++P:--P)L.push(e.readUInt16());return L}(),o=(this.length-e.pos+this.offset)/2,a=function(){var P,L;for(L=[],A=P=0;0<=o?P<o:P>o;A=0<=o?++P:--P)L.push(e.readUInt16());return L}(),A=b=0,F=s.length;b<F;A=++b)for(y=s[A],r=S=g=m[A];g<=y?S<=y:S>=y;r=g<=y?++S:--S)c[A]===0?i=r+d[A]:(i=a[c[A]/2+(r-g)-(h-A)]||0)!==0&&(i+=d[A]),this.codeMap[r]=65535&i}e.pos=u}return n.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,b,S,F,P,L,re,K,H,J,we,O,D,Z,ie,de,ne,fe,$,q,se,Ae,x,E,I,U,M,j,V,X,R,he,xe;switch(ie=new BA,i=Object.keys(e).sort(function(Be,Le){return Be-Le}),t){case"macroman":for(m=0,y=function(){var Be=[];for(g=0;g<256;++g)Be.push(0);return Be}(),S={0:0},s={},de=0,q=i.length;de<q;de++)S[X=e[o=i[de]]]==null&&(S[X]=++m),s[o]={old:e[o],new:S[e[o]]},y[o]=S[e[o]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(y),{charMap:s,subtable:ie.data,maxGlyphID:m+1};case"unicode":for(D=[],u=[],F=0,S={},r={},b=d=null,ne=0,se=i.length;ne<se;ne++)S[L=e[o=i[ne]]]==null&&(S[L]=++F),r[o]={old:L,new:S[L]},a=S[L]-o,b!=null&&a===d||(b&&u.push(b),D.push(o),d=a),b=o;for(b&&u.push(b),u.push(65535),D.push(65535),we=2*(J=D.length),H=2*Math.pow(Math.log(J)/Math.LN2,2),h=Math.log(H/2)/Math.LN2,K=2*J-H,A=[],re=[],f=[],g=fe=0,Ae=D.length;fe<Ae;g=++fe){if(O=D[g],c=u[g],O===65535){A.push(0),re.push(0);break}if(O-(Z=r[O].new)>=32768)for(A.push(0),re.push(2*(f.length+J-g)),o=$=O;O<=c?$<=c:$>=c;o=O<=c?++$:--$)f.push(r[o].new);else A.push(Z-O),re.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*J+2*f.length),ie.writeUInt16(0),ie.writeUInt16(we),ie.writeUInt16(H),ie.writeUInt16(h),ie.writeUInt16(K),j=0,x=u.length;j<x;j++)o=u[j],ie.writeUInt16(o);for(ie.writeUInt16(0),V=0,E=D.length;V<E;V++)o=D[V],ie.writeUInt16(o);for(R=0,I=A.length;R<I;R++)a=A[R],ie.writeUInt16(a);for(he=0,U=re.length;he<U;he++)P=re[he],ie.writeUInt16(P);for(xe=0,M=f.length;xe<M;xe++)m=f[xe],ie.writeUInt16(m);return{charMap:r,subtable:ie.data,maxGlyphID:F+1}}},n}(),sz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r=new wb(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,s;return r==null&&(r="macroman"),o=wb.encode(t,r),(s=new BA).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),rN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),nN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),oN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(o=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=(function(){var a,A,d;for(d=[],i=a=0,A=this.file.maxp.numGlyphs;0<=A?a<A:a>A;i=0<=A?++a:--a)d.push(t.readUInt32());return d}).call(this)}},e}(),sN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},iN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,s,i,a,A,d,c,u,h,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),A=t.readShort(),o=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=u=0,h=o.length;u<h;i=++u)s=o[i],t.pos=s.offset,c=t.readString(s.length),a=new sN(c,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),aN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),AN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,s,i,a,A,d;for(t.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.metrics).length;c<u;c++)i=h[c],f.push(i.advance);return f}).call(this),o=this.widths[this.widths.length-1],d=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)d.push(this.widths.push(o));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),iz=[].slice,lN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,s,i,a,A,d,c,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,o=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,a=(A=new BA(r.read(s))).readShort(),c=A.readShort(),h=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[t]=a===-1?new cN(A,c,h,d,u):new dN(A,a,c,h,d,u),this.cache[t]))},e.prototype.encode=function(t,r,o){var s,i,a,A,d;for(a=[],i=[],A=0,d=r.length;A<d;A++)s=t[r[A]],i.push(a.length),s&&(a=a.concat(s.encode(o)));return i.push(a.length),{table:a,offsets:i}},e}(),dN=function(){function n(e,t,r,o,s,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=s,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),cN=function(){function n(e,t,r,o,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new BA(iz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),uN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Zi(e,Bi),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<o.length;++a)if(o[a]=s,i<r.length&&r[i]==a){++i,o[a]=s;var A=this.offsets[a],d=this.offsets[a+1]-A;d>0&&(s+=d)}for(var c=new Array(4*o.length),u=0;u<o.length;++u)c[4*u+3]=255&o[u],c[4*u+2]=(65280&o[u])>>8,c[4*u+1]=(16711680&o[u])>>16,c[4*u]=(4278190080&o[u])>>24;return c},e}(),hN=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,s,i,a,A;for(o={},i=0,a=e.length;i<a;i++)o[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(r=o[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))r=A[s],o[s]=r;return o},n.prototype.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,m,y,b;for(o in r=sz.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},b=r.charMap)f[(A=b[o]).old]=A.new;for(g in h=r.maxGlyphID,i)g in f||(f[g]=h++);return c=function(S){var F,P;for(F in P={},S)P[S[F]]=F;return P}(f),u=Object.keys(c).sort(function(S,F){return S-F}),m=function(){var S,F,P;for(P=[],S=0,F=u.length;S<F;S++)a=u[S],P.push(c[a]);return P}(),s=this.font.glyf.encode(i,m,f),d=this.font.loca.encode(s.offsets,m),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n}();pr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,s,i;if(Array.isArray(t))return"["+function(){var a,A,d;for(d=[],a=0,A=t.length;a<A;a++)r=t[a],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)i=t[o],s.push("/"+o+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+t},e}();var fN=te('<tr><td class="odz-text-xs"></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),pN=te('<tr><td></td><td colspan="5" class="odz-text-xs"> <!> <!></td><td> </td></tr>'),gN=te('<tr><td></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),vN=te("<!> <!> <!>",1),mN=te('<tr><td></td><td class="odz-text-xs">[]  </td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td> </td></tr>'),wN=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-p-8 odz-print-area"><h1 class="odz-text-center odz-text-3xl odz-font-bold odz-mb-8"></h1> <table class="odz-table odz-w-full odz-border odz-border-gray-400"><tbody><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200 odz-w-32"> </td><td>101-86-83287</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td>()</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"> </td><td colspan="3">  22 19-15</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td>02-6499-2267</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td colspan="3"><div class="odz-flex odz-justify-between"><span></span> <span></span></div></td></tr></tbody></table> <div class="odz-my-4"><div class="odz-font-bold">  (+)</div> <div class="odz-text-right"> </div></div> <table class="odz-table odz-table-bordered odz-w-full"><thead><tr class="odz-bg-base-200"><th></th><th>/</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><!><!><tr><td colspan="3" class="odz-text-center odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"> </td></tr></tbody></table> <div class="odz-mt-4 odz-p-4 odz-bg-base-200 odz-rounded"><div class="odz-font-bold odz-mb-2"></div> <ul class="odz-list-disc odz-list-inside odz-text-sm"><li>   20 (   )</li> <li>      .</li> <li>   .</li> <li>   .</li> <li>       ,  .</li></ul></div> <div class="odz-flex odz-justify-end odz-gap-2 odz-mt-6 print:odz-hidden"><button class="odz-btn odz-btn-primary"></button> <button class="odz-btn odz-btn-secondary">PDF </button> <button class="odz-btn"></button></div></div></dialog>');function yN(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t);let s=ft(e,"isOpen",12);function i(){s(!1)}function a(){window.print()}console.log("paper estimateStore",o());const A=new Date,d=`${A.getFullYear()} ${String(A.getMonth()+1).padStart(2,"0")} ${String(A.getDate()).padStart(2,"0")}`;async function c(){const se=document.querySelector(".odz-print-area");if(se)try{const Ae=se.querySelector(".print\\:odz-hidden");let x="";Ae&&(x=Ae.style.display,Ae.style.display="none");const E=se.scrollHeight,I=se.scrollWidth,U=se.scrollTop;se.scrollTop=0;const M=await fD(se,{useCORS:!0,scale:2,x:0,y:0,width:I,height:E,backgroundColor:"#ffffff",logging:!1,allowTaint:!0,windowHeight:E});se.scrollTop=U,Ae&&(Ae.style.display=x);const j=M.toDataURL("image/png",1),V=new pr({orientation:"portrait",unit:"mm",format:"a4"}),X=V.internal.pageSize.getWidth(),R=V.internal.pageSize.getHeight(),he=10,xe=X-he*2,Be=R-he*2,Le=M.height/M.width;let k=xe*Le;if(k>Be){const pe=Math.ceil(k/Be),ze=M.height/k,ye=Be*ze;for(let le=0;le<pe;le++){le>0&&V.addPage();const Ce=-le*ye/ze;V.addImage(j,"PNG",he,Ce+he,xe,M.height*(xe/M.width))}}else V.addImage(j,"PNG",he,he,xe,k);V.save(".pdf")}catch(Ae){console.error("PDF    :",Ae)}}Kr();var u=wN(),h=w(u),f=z(w(h),2),g=w(f),m=w(g),y=z(w(m),3);y.textContent=d;var b=z(f,2),S=z(w(b),2),F=w(S),P=z(b,2),L=z(w(P)),re=w(L);Yt(re,1,()=>o().products,Ar,(se,Ae,x)=>{var E=vN(),I=pt(E);Yt(I,1,()=>l(Ae).variants,Ar,(X,R,he)=>{var xe=fN();const Be=ot(()=>l(R).prices[0].amount),Le=ot(()=>l(Ae).variants.reduce((Ne,De)=>Ne+(De.quantity||0),0)),Y=ot(()=>{var Ne;return(Ne=l(Ae).discountInfo)!=null&&Ne.hasDiscount?(l(Ae).discountInfo.originalAmount-l(Ae).discountInfo.discountAmount)/l(Le):l(Be)}),k=ot(()=>l(Y)*l(R).quantity);var pe=w(xe);pe.textContent=`${x+1}-${he+1}`;var ze=z(pe),ye=w(ze),le=z(ze),Ce=w(le),ke=z(le),ce=w(ke),ee=z(ke),N=w(ee),_e=z(ee),ve=w(_e),Se=z(_e),me=w(Se);Me((Ne,De)=>{Ue(ye,l(Ae).product.title),Ue(Ce,l(R).title||""),Ue(ce,l(R).quantity),Ue(N,Ne),Ue(ve,De),Ue(me,De)},[()=>gr(l(Y)),()=>gr(l(k))],ot),T(X,xe)});var U=z(I,2);{var M=X=>{var R=Dt(),he=pt(R);Yt(he,1,()=>l(Ae).prints,Ar,(xe,Be)=>{var Le=pN(),Y=z(w(Le)),k=w(Y),pe=z(k);{var ze=ce=>{var ee=Wr();Me(N=>Ue(ee,`- ${N??""}`),[()=>l(Be).parentTemplates.map(N=>N.name).join(" > ")],ot),T(ce,ee)};Ee(pe,ce=>{l(Be).parentTemplates&&ce(ze)})}var ye=z(pe,2);{var le=ce=>{var ee=Wr();Me(()=>Ue(ee,`- ${l(Be).colors.length??""}`)),T(ce,ee)};Ee(ye,ce=>{l(Be).colors&&ce(le)})}var Ce=z(Y),ke=w(Ce);Me(ce=>{Ue(k,`: ${l(Be).title??""} `),Ue(ke,ce)},[()=>gr(l(Be).price||0)],ot),T(xe,Le)}),T(X,R)};Ee(U,X=>{l(Ae).prints&&l(Ae).prints.length>0&&X(M)})}var j=z(U,2);{var V=X=>{var R=Dt(),he=pt(R);Yt(he,1,()=>Object.entries(l(Ae).addons),Ar,(xe,Be)=>{let Le=()=>l(Be)[1];var Y=Dt();const k=ot(()=>l(Ae).addonProductsMap[Le().productId]),pe=ot(()=>{var le,Ce;return(Ce=(le=l(k))==null?void 0:le.variants)==null?void 0:Ce.find(ke=>ke.id===Le().variantId)});var ze=pt(Y);{var ye=le=>{var Ce=gN(),ke=z(w(Ce)),ce=w(ke),ee=z(ke),N=w(ee),_e=z(ee),ve=w(_e),Se=z(_e),me=w(Se),Ne=z(Se),De=w(Ne),qe=z(Ne),Qe=w(qe);Me((rt,tt)=>{Ue(ce,`[] ${l(k).title??""}`),Ue(N,l(pe).title||""),Ue(ve,l(Ae).quantity),Ue(me,rt),Ue(De,tt),Ue(Qe,tt)},[()=>gr(l(pe).prices[0].amount),()=>gr(l(pe).prices[0].amount*l(Ae).quantity)],ot),T(le,Ce)};Ee(ze,le=>{l(k)&&l(pe)&&le(ye)})}T(xe,Y)}),T(X,R)};Ee(j,X=>{l(Ae).addons&&l(Ae).addonProductsMap&&Object.keys(l(Ae).addons).length>0&&X(V)})}T(se,E)});var K=z(re);{var H=se=>{var Ae=mN(),x=z(w(Ae),6),E=w(x);Me(I=>Ue(E,I),[()=>gr(o().totalAdditionalAmount)],ot),T(se,Ae)};Ee(K,se=>{o().totalAdditionalAmount>0&&se(H)})}var J=z(K),we=z(w(J)),O=w(we),D=z(we,2),Z=w(D),ie=z(D),de=w(ie),ne=z(P,4),fe=w(ne),$=z(fe,2),q=z($,2);Me((se,Ae)=>{Ue(F,` (  ${se??""} )`),Ue(O,`${o().totalQuantity??""}`),Ue(Z,Ae),Ue(de,se)},[()=>gr(o().totalAmount),()=>gr(o().totalProductAmount+o().totalPrintAmount+o().totalAddonAmount+o().totalAdditionalAmount)],ot),st("click",fe,a),st("click",$,c),st("click",q,i),T(n,u),Rr(),r()}var bN=te("<!> <button> </button>",1),_N=te("<button> </button>"),BN=te('<div class="odz-flex odz-flex-wrap odz-gap-1.5"></div>'),xN=te('<div class="odz-flex odz-justify-center odz-items-center odz-h-32"><div class="odz-loading odz-loading-spinner odz-loading-md"></div></div>'),zN=te('<div class="odz-text-error odz-text-center odz-py-4"> </div>'),CN=te('<div class="odz-text-center odz-py-4 odz-text-gray-500">  .</div>'),SN=te('<img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0">'),EN=te('<div class="odz-w-12 odz-h-12 odz-bg-gray-100 odz-rounded odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><span class="odz-text-gray-400 odz-text-xs"></span></div>'),FN=te('<div class="odz-flex odz-items-center odz-gap-3 odz-p-2 odz-bg-base-100 odz-rounded-lg odz-border odz-border-gray-100 hover:odz-bg-gray-50"><!> <div class="odz-flex-1 odz-min-w-0"><h3 class="odz-text-sm odz-font-medium odz-truncate"> </h3> <div class="odz-text-xs odz-text-gray-500"><!></div></div> <button class="odz-btn odz-btn-primary odz-btn-xs odz-flex-shrink-0"></button></div>'),IN=te('<div class="odz-flex odz-justify-center odz-items-center odz-py-3"><div class="odz-loading odz-loading-spinner odz-loading-sm"></div></div>'),QN=te('<div class="odz-flex odz-flex-col odz-gap-2"></div> <!>',1),UN=te('<div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-bg-white odz-rounded-lg odz-w-full odz-max-w-2xl odz-mx-4 odz-max-h-[80vh] odz-overflow-hidden odz-flex odz-flex-col"><div class="odz-p-4 odz-border-b odz-flex odz-justify-between odz-items-center"><h2 class="odz-text-lg odz-font-bold"> </h2> <button class="odz-btn odz-btn-ghost odz-btn-sm"><!></button></div> <div class="odz-p-3 odz-border-b odz-space-y-3"><div class="odz-relative"><input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-input-sm"> <!></div> <div class="odz-flex odz-items-center odz-gap-1.5 odz-text-xs odz-text-gray-500"><button></button> <!></div> <!></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-3"><!></div></div></div>');function G1(n,e){jr(e,!1);const t=Ie();let r=ft(e,"addProduct",8),o=ft(e,"isProductSearchOpen",12),s=ft(e,"productType",8,""),i=ft(e,"excludeNoProcess",8,!1),a=Ie(""),A=Ie([]),d=Ie([]),c=Ie(""),u=Ie([]),h=Ie(!1),f=Ie(null),g,m=!0,y=1;const b=20;let S=Ie();En(async()=>{document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(he=>{he instanceof HTMLElement&&(he.scrollTop=0)});try{B(d,await V_()),await F()}catch(he){console.error("     :",he)}}),Eo(()=>{document.body.style.overflow=""});async function F(){B(h,!0),B(f,null);try{const{products:R,total:he}=await Tf("",void 0,1,b,s(),i());B(A,R),m=l(A).length<he}catch(R){console.error("    :",R),B(f,"    .")}finally{B(h,!1)}}async function P(){if(!(l(h)||!m)){B(h,!0),y++;try{const{products:R,total:he}=await Tf(l(a),l(c),y,b,s(),i());R.length>0?(B(A,[...l(A),...R]),m=l(A).length<he):m=!1}catch(R){console.error("     :",R),B(f,"    .")}finally{B(h,!1)}}}async function L(){if(!l(a).trim()&&!l(c)){await F();return}B(h,!0),B(f,null),y=1,B(A,[]);try{const{products:R,total:he}=await Tf(l(a),l(c),1,b,s(),i());B(A,R),m=l(A).length<he}catch(R){console.error("    :",R),B(f,"    .")}finally{B(h,!1)}}function re(){clearTimeout(g),g=setTimeout(L,300)}function K(R){B(c,R.id),B(u,[...l(u),R]),L()}function H(R){B(u,l(u).slice(0,R+1)),B(c,l(u)[R].id),L()}function J(R){r()(R.id)}function we(){o(!1),B(a,""),B(c,""),B(u,[]),B(A,[]),B(f,null),y=1,m=!0}function O(){if(!l(S))return;const{scrollTop:R,scrollHeight:he,clientHeight:xe}=l(S);he-R<=xe*1.5&&P()}Jt(()=>(l(u),l(d)),()=>{var R;B(t,l(u).length===0?l(d):((R=l(u)[l(u).length-1])==null?void 0:R.children)||[])}),Zn(),Kr();var D=UN(),Z=w(D),ie=w(Z),de=z(w(ie),2),ne=w(de);Mu(ne,{class:"odz-w-5 odz-h-5"});var fe=z(ie,2),$=w(fe),q=w($),se=z(q,2);X_(se,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var Ae=z($,2),x=w(Ae),E=z(x,2);Yt(E,1,()=>l(u),Ar,(R,he,xe)=>{var Be=bN(),Le=pt(Be);eE(Le,{class:"odz-w-3 odz-h-3"});var Y=z(Le,2),k=w(Y);Me(()=>{Fr(Y,`hover:odz-text-primary odz-transition-colors ${(xe===l(u).length-1?"odz-text-gray-900 odz-font-medium":"")??""}`),Ue(k,l(he).name)}),st("click",Y,()=>H(xe)),T(R,Be)});var I=z(Ae,2);{var U=R=>{var he=BN();Yt(he,5,()=>l(t),Ar,(xe,Be)=>{var Le=_N(),Y=w(Le);Me(()=>{Fr(Le,`odz-px-3 odz-py-1 odz-text-xs odz-rounded-full odz-transition-all odz-duration-200
                ${(l(c)===l(Be).id?"odz-bg-primary odz-text-primary-content odz-shadow-sm":"odz-bg-gray-100 odz-text-gray-600 hover:odz-bg-gray-200 hover:odz-text-gray-800")??""}`),Ue(Y,l(Be).name)}),st("click",Le,()=>K(l(Be))),T(xe,Le)}),T(R,he)};Ee(I,R=>{l(t).length>0&&R(U)})}var M=z(fe,2),j=w(M);{var V=R=>{var he=xN();T(R,he)},X=R=>{var he=Dt(),xe=pt(he);{var Be=Y=>{var k=zN(),pe=w(k);Me(()=>Ue(pe,l(f))),T(Y,k)},Le=Y=>{var k=Dt(),pe=pt(k);{var ze=le=>{var Ce=CN();T(le,Ce)},ye=le=>{var Ce=QN(),ke=pt(Ce);Yt(ke,5,()=>l(A),Ar,(N,_e)=>{var ve=FN(),Se=w(ve);{var me=He=>{var je=SN();Me(()=>{rr(je,"src",l(_e).thumbnail),rr(je,"alt",l(_e).title)}),T(He,je)},Ne=He=>{var je=EN();T(He,je)};Ee(Se,He=>{l(_e).thumbnail?He(me):He(Ne,!1)})}var De=z(Se,2),qe=w(De),Qe=w(qe),rt=z(qe,2),tt=w(rt);{var Te=He=>{var je=Dt(),at=pt(je);{var At=Re=>{var Xe=Wr();Me(Je=>Ue(Xe,`${Je??""}`),[()=>gr(l(_e).variants[0].prices[0].amount)],ot),T(Re,Xe)},it=Re=>{var Xe=Wr();Me(Je=>Ue(Xe,`${Je??""} ~`),[()=>gr(Math.min(...l(_e).variants.map(Je=>Je.prices[0].amount)))],ot),T(Re,Xe)};Ee(at,Re=>{l(_e).variants.length===1?Re(At):Re(it,!1)})}T(He,je)},ge=He=>{var je=Wr("  ");T(He,je)};Ee(tt,He=>{l(_e).variants&&l(_e).variants.length>0?He(Te):He(ge,!1)})}var Oe=z(De,2);Me(()=>Ue(Qe,l(_e).title)),st("click",Oe,()=>J(l(_e))),T(N,ve)});var ce=z(ke,2);{var ee=N=>{var _e=IN();T(N,_e)};Ee(ce,N=>{l(h)&&l(A).length>0&&N(ee)})}T(le,Ce)};Ee(pe,le=>{l(A).length===0&&(l(a)||l(c))?le(ze):le(ye,!1)},!0)}T(Y,k)};Ee(xe,Y=>{l(f)?Y(Be):Y(Le,!1)},!0)}T(R,he)};Ee(j,R=>{l(h)&&l(A).length===0?R(V):R(X,!1)})}ts(M,R=>B(S,R),()=>l(S)),Me(()=>Fr(x,`hover:odz-text-primary odz-transition-colors ${(l(u).length===0?"odz-text-gray-900 odz-font-medium":"")??""}`)),st("click",de,we),br(q,()=>l(a),R=>B(a,R)),st("input",q,re),st("click",x,()=>{B(u,[]),B(c,""),L()}),st("scroll",M,O),T(n,D),Rr()}var TN=te('<div class="odz-text-sm odz-text-gray-600 odz-mt-1"> </div>'),LN=te('<div class="odz-flex odz-items-center odz-justify-between odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><div class="odz-flex-1"><div class="odz-font-semibold odz-text-gray-800"> </div> <!></div> <div class="odz-text-right"><div class="odz-font-bold odz-text-lg odz-text-gray-800"> </div></div></div>'),PN=te('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><h2 class="odz-text-lg odz-font-bold odz-mb-4 odz-flex odz-items-center odz-gap-2"></h2> <div class="odz-space-y-3"></div> <div class="odz-divider odz-my-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><span class="odz-font-bold odz-text-lg odz-text-gray-800"> </span> <span class="odz-font-bold odz-text-xl odz-text-gray-800"> </span></div></div></div>');function kN(n,e){jr(e,!1);const t=Ie();let r=ft(e,"additionalCosts",24,()=>[]);ft(e,"isEditable",8,!0),Jt(()=>zn(r()),()=>{B(t,r().reduce((a,A)=>a+Number(A.amount),0))}),Zn(),Kr();var o=Dt(),s=pt(o);{var i=a=>{var A=PN(),d=w(A),c=z(w(d),2);Yt(c,5,r,g=>g.id,(g,m)=>{var y=LN(),b=w(y),S=w(b),F=w(S),P=z(S,2);{var L=J=>{var we=TN(),O=w(we);Me(()=>Ue(O,l(m).description)),T(J,we)};Ee(P,J=>{l(m).description&&J(L)})}var re=z(b,2),K=w(re),H=w(K);Me(J=>{Ue(F,l(m).name),Ue(H,`+${J??""}`)},[()=>gr(Number(l(m).amount))],ot),T(g,y)});var u=z(c,4),h=z(w(u),2),f=w(h);Me(g=>Ue(f,`+${g??""}`),[()=>gr(l(t))],ot),T(a,A)};Ee(s,a=>{r().length>0&&a(i)})}T(n,o),Rr()}var ON=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-bg-gray-50 odz-rounded-lg"><div class="odz-text-6xl odz-mb-4"></div> <h3 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-6">      </p> <button class="odz-btn odz-btn-primary odz-gap-2"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </button></div>'),DN=te("<div><!></div>"),NN=te("<div><!></div>"),MN=te("<div></div>"),HN=te('<div class="odz-mt-5"><div role="tablist" class="odz-tabs odz-tabs-boxed"><button role="tab"></button> <button role="tab"></button></div></div> <!>',1),jN=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-text-lg odz-font-medium odz-mt-4">   ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2"> ,  ,    .</p></div>'),RN=te('<button class="odz-btn odz-btn-primary"><!>  </button>'),qN=te('<div><h2 class="odz-text-2xl odz-font-bold odz-mb-4"> </h2> <!> <div class="odz-flex odz-justify-end odz-mt-4"><!></div> <!></div>'),KN=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-md odz-text-primary"></div> <p class="odz-text-base odz-font-medium odz-mt-3">   ...</p></div>'),$N=te('<span class="odz-badge odz-badge-warning"> </span>'),VN=te('<div class="odz-flex odz-items-center odz-gap-2"><span> </span> <!></div>'),GN=te('<div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="password-input"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input id="password-input" type="password" class="odz-input odz-input-bordered odz-w-full" placeholder="     "> <label class="odz-label" for="password-input"><span class="odz-label-text-alt">     .  !</span></label></div>'),WN=te(`<div class="odz-flex odz-justify-between odz-items-center odz-mb-4"><h2 class="odz-text-lg odz-font-bold odz-flex odz-items-center odz-gap-1">  <div class="odz-flex odz-items-center odz-gap-1"><!> <span class="odz-text-xs odz-text-gray-500 odz-ml-1">  </span></div></h2> <!></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="   . ) ' 000  '" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="  " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="010" class="odz-input odz-input-bordered odz-w-1/4" maxlength="3"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <span class="odz-text-xs odz-self-center">   ,     .</span></div></div></div> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="address-section"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!>  </span></label> <div class="odz-flex odz-gap-2 odz-mb-2"><input type="text" id="postcode" placeholder="" readonly="" class="odz-input odz-input-bordered odz-w-1/4"> <button class="odz-btn odz-btn-secondary"></button> <button class="odz-btn odz-btn-outline"> </button></div> <input type="text" id="address1" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-mb-2"> <input type="text" id="address2" placeholder=" " class="odz-input odz-input-bordered odz-w-full"> <p class="odz-text-xs odz-mt-1">       .</p></div> <div class="odz-form-control odz-w-full odz-mt-4"><div class="odz-flex odz-gap-4 odz-items-center"><button class="odz-btn odz-btn-outline odz-flex-1"></button> <p class="odz-text-xs">      .</p></div></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-mt-4"><div class="odz-form-control odz-w-full"><label class="odz-label" for="shipping-method"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <select id="shipping-method" class="odz-select odz-select-bordered odz-w-full"><option disabled selected>==   ==</option><option></option><option></option><option></option></select></div> <div class="odz-form-control odz-w-full"><label class="odz-label" for="pref-delivery-date"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"></span></label> <input id="pref-delivery-date" type="date" class="odz-input odz-input-bordered odz-w-full"> <label class="odz-label" for="pref-delivery-date-note"><span class="odz-label-text-alt">        .</span></label></div></div> <!> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="request-notes"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"> </span></label> <textarea id="request-notes" class="odz-textarea odz-textarea-bordered odz-h-24 odz-w-full" placeholder="   ."></textarea></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-outline odz-btn-secondary"><!>  </button> <button class="odz-btn odz-w-full odz-btn-primary md:odz-w-auto disabled:bg-primary/50 disabled:odz-bg-secondary/20"><!> <!></button></div>`,1),XN=te('<!> <!> <div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><!></div></div>',1),YN=te('<div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-ml-3 odz-text-lg odz-font-medium">  ...</span></div>'),JN=te('<div class="odz-text-xs odz-text-gray-400 odz-line-through"> </div> <div class="odz-text-xs odz-text-green-600 odz-font-medium"> </div>',1),ZN=te('<div class="odz-text-xs odz-text-gray-400"> </div>'),eM=te('<span class="odz-text-gray-400"></span>'),tM=te('<div class="odz-grid odz-grid-cols-2 md:odz-grid-cols-5 odz-gap-3 md:odz-gap-4 odz-p-4 md:odz-p-6 odz-bg-white"><div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">1  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"><!></div> <div class="odz-text-xs odz-text-blue-600">   -  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">    </div></div> <div class="odz-text-center md:odz-col-span-1 odz-col-span-2"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-3xl md:odz-text-2xl odz-font-bold odz-text-red-600 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400"> <!> <!></div></div></div> <div class="odz-flex odz-gap-4 odz-p-4 odz-bg-gray-50 odz-border-t"><button class="odz-btn odz-btn-outline odz-flex-1 odz-text-gray-600 odz-border-gray-300 hover:odz-bg-gray-100">  </button> <button class="odz-btn odz-btn-error odz-flex-1 odz-text-white odz-bg-red-600 hover:odz-bg-red-700 disabled:odz-bg-gray-400 disabled:odz-text-gray-200"><!></button></div>',1),rM=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <div class="odz-space-y-4 odz-py-4"><div><ul class="odz-list-disc odz-ml-5 odz-space-y-2"><li>                     </li> <li>   .       .</li> <li>( :   22 19-15 3)</li></ul></div> <div><table class="odz-table odz-table-zebra odz-w-full"><tbody><tr><td>*Name:</td><td></td></tr><tr><td>*Country:</td><td></td></tr><tr><td>*ZipCode:</td><td></td></tr><tr><td>*Address:</td><td></td></tr><tr><td>*Tel.No.():</td><td></td></tr><tr><td>*E-mail:</td><td></td></tr></tbody></table></div></div> <div class="odz-modal-action"><button class="odz-btn"></button></div></div></dialog>'),nM=te('<!> <div class="odz-sticky odz-bottom-0 odz-left-0 odz-right-0 odz-mt-6 odz-bg-white odz-border-t odz-shadow-lg"><!></div> <!> <!> <!> <!>',1);function oM(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=()=>Xr(Ls,"$shopStore",t),i=()=>Xr(sl,"$customerStore",t);let a=ft(e,"productId",12),A=ft(e,"isEstimateModal",12),d=ft(e,"estimate",12),c=Ie(null),u=Ie(!1),h=Ie(""),f=Ie(""),g=Ie(0),m=Ie(!1),y=Ie(""),b=Ie(""),S=Ie(""),F=!1,P=Ie(!1),L=Ie(""),re=Ie(""),K=Ie(""),H=Ie(),J=Ie(),we=Ie(),O=Ie(""),D=Ie(!1),Z=Ie(!0),ie=Ie([]),de=Ie(!1);function ne(){if(B(g,0),qt(St,dt(o).estimateName=d().name||"",dt(o)),qt(St,dt(o).organizationName=d().organization_name||"",dt(o)),qt(St,dt(o).orderName=d().order_name||"",dt(o)),qt(St,dt(o).orderPhone=d().order_phone||"",dt(o)),qt(St,dt(o).postcode=d().postcode||"",dt(o)),qt(St,dt(o).address1=d().address1||"",dt(o)),qt(St,dt(o).address2=d().address2||"",dt(o)),qt(St,dt(o).comment=d().comment||"",dt(o)),qt(St,dt(o).shippingMethod=d().shipping_method||"",dt(o)),qt(St,dt(o).prefDeliveryDate=d().pref_delivery_date||"",dt(o)),qt(St,dt(o).estDeliveryDate=d().est_delivery_date||"",dt(o)),qt(St,dt(o).uploadMemo=d().upload_memo||"",dt(o)),qt(St,dt(o).designUploads=d().design_uploads&&typeof d().design_uploads=="object"&&Array.isArray(d().design_uploads.files)?d().design_uploads.files.map(ce=>ce.url):[],dt(o)),qt(St,dt(o).designConfirm=d().design_confirm||"",dt(o)),o().prefDeliveryDate&&B(O,new Date(o().prefDeliveryDate).toISOString().split("T")[0]),B(y,d().postcode||""),B(b,d().address1||""),B(S,d().address2||""),B(Z,Cd(d().status)),d().order_phone){const ce=d().order_phone;ce.length>=3&&B(L,ce.slice(0,3)),ce.length>=7&&B(re,ce.slice(3,7)),ce.length>=11&&B(K,ce.slice(7,11))}j(d().id)}function fe(ce){a(o().products[ce].product.id),qt(St,dt(o).index=ce,dt(o)),B(g,1)}function $(){var ce,ee;if(B(g,1),(!a()||a().trim()==="")&&(o().products.length>0&&o().index>=0&&((ee=(ce=o().products[o().index])==null?void 0:ce.product)!=null&&ee.id)?(a(o().products[o().index].product.id),console.log("   productId :",a())):console.log(" productId     ")),typeof window<"u"&&a()){const N=`extended-product-data-cache-${a()}`;try{const _e=window.sessionStorage.getItem(N);if(_e){const ve=JSON.parse(_e);ve.printSelection&&!ve.printSelection.isCompleted&&(ve.printSelection.currentMethod="selection",window.sessionStorage.setItem(N,JSON.stringify(ve)),console.log("     "))}}catch(_e){console.warn("     :",_e)}}}function q(){if(!o().products||o().products.length===0||o().index<0||!o().products[o().index]){B(u,!0),B(h," "),B(f,"  .");return}if(o().products[o().index].variants.length<1){B(u,!0),B(h," "),B(f,"1   .");return}if(o().products[o().index].variants.some(ee=>ee.quantity===0)){B(u,!0),B(h," "),B(f," 1  ");return}B(g,2)}function se(){B(m,!0)}function Ae(){return F?Promise.resolve():new Promise(ce=>{const ee=document.createElement("script");ee.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",ee.onload=()=>{F=!0,ce()},document.head.appendChild(ee)})}async function x(){await Ae(),new window.daum.Postcode({oncomplete(ce){if(B(y,ce.zonecode),B(b,ce.roadAddress||ce.jibunAddress),ce.userSelectedType==="R"){let ee="";ce.bname!==""&&/[||]$/g.test(ce.bname)&&(ee+=ce.bname),ce.buildingName!==""&&ce.apartment==="Y"&&(ee+=ee!==""?", "+ce.buildingName:ce.buildingName),ee!==""&&B(b,l(b)+(" ("+ee+")"))}}}).open()}function E(){B(P,!0)}function I(ce,ee){const N=ce.target;N.value.length>=parseInt(N.getAttribute("maxlength")||"0")&&ee&&ee.focus()}function U(ce){return ce?ce.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}async function M(){var ce,ee,N,_e,ve,Se,me,Ne,De,qe,Qe,rt,tt,Te,ge,Oe,He,je,at,At;try{if(!o().estimateName||!o().organizationName||!o().orderName||!o().orderPhone||!o().shippingMethod){B(u,!0),B(h,"  "),B(f,", ,    .");return}if(!s().customer_id){const Xe=U(o().password);if(!Xe.valid){B(u,!0),B(h," "),B(f,Xe.message);return}}const it={name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:l(y),address1:l(b),address2:l(S),comment:o().comment,password:s().customer_id?null:o().password,shipping_method:o().shippingMethod,pref_delivery_date:o().prefDeliveryDate,upload_memo:o().uploadMemo,sess:s().sess,customer_id:s().customer_id,mall_type:i().mallType,shop_id:s().id};let Re;if((ce=d())!=null&&ce.id){Re=await Dd(d().id,it);const Xe=await _u(d().id);for(const ct of Xe)ct.id&&await Y_(ct.id);const Je=await Nd(d().id);for(const ct of Je)ct.id&&await Z_(ct.id);for(let ct=0;ct<o().products.length;ct++)await cB(d().id,ct)}else Re=await s1(it);if(!Re.id)throw new Error("  .");for(let Xe=0;Xe<o().products.length;Xe++){const Je=o().products[Xe],ct=Je.discountInfo,_t=ct==null?void 0:ct.discountDetails;for(const lt of Je.variants)if(lt.quantity>0){const et=lt.prices[0].amount;let Qt=et,vt=0;const Nt=Je.variants.reduce((zt,Et)=>zt+(Et.quantity||0),0),mt=vi(Nt,et,Je.product.quantity_discounts);mt.hasDiscount&&(Qt=mt.discountedPrice,vt=mt.discountAmount);const Lt=Je.prints&&Je.prints.length>0?"detailed":Je.simplePrints&&Je.simplePrints.length>0?"simple":"none",Pt={estimate_id:Re.id,product_id:Je.product.id,variant_id:lt.id,quantity:lt.quantity,idx:Xe,price:Qt,original_price:et,discount_amount:vt,discount_type:((ee=mt==null?void 0:mt.discountInfo)==null?void 0:ee.type)||null,discount_value:((N=mt==null?void 0:mt.discountInfo)==null?void 0:N.value)||null,discount_direction:((_e=mt==null?void 0:mt.discountInfo)==null?void 0:_e.direction)||null,discount_min_quantity:((ve=mt==null?void 0:mt.discountInfo)==null?void 0:ve.min_quantity)||null,discount_max_quantity:((Se=mt==null?void 0:mt.discountInfo)==null?void 0:Se.max_quantity)||null,print_type:Lt};await i1(Pt)}if(Je.prints&&Je.prints.length>0)for(const lt of Je.prints){const et={estimate_id:Re.id,idx:Xe,template_id:lt.template.id,variant_id:lt.variant_id,price:lt.price||0,colors:lt.colors||null,uploads:lt.uploads||null,name_sheet:lt.nameSheet||null,object_id:lt.objectId||null,original_price:((me=lt.discountInfo)==null?void 0:me.originalPrice)||null,discount_amount:((Ne=lt.discountInfo)==null?void 0:Ne.discountAmount)||null,discount_type:((qe=(De=lt.discountInfo)==null?void 0:De.discountDetails)==null?void 0:qe.type)||null,discount_value:((rt=(Qe=lt.discountInfo)==null?void 0:Qe.discountDetails)==null?void 0:rt.value)||null,discount_direction:((Te=(tt=lt.discountInfo)==null?void 0:tt.discountDetails)==null?void 0:Te.direction)||null,discount_min_quantity:((Oe=(ge=lt.discountInfo)==null?void 0:ge.discountDetails)==null?void 0:Oe.min_quantity)||null,discount_max_quantity:((je=(He=lt.discountInfo)==null?void 0:He.discountDetails)==null?void 0:je.max_quantity)||null};await a1(et)}if(Je.addons)for(const[lt,et]of Object.entries(Je.addons)){if(!et.variantId||et.variantId.trim()===""){console.warn("  variantId    :",et);continue}let Qt=0;if(Je.addonProductsMap&&Je.addonProductsMap[et.productId]){const mt=Je.addonProductsMap[et.productId].variants.find(Lt=>Lt.id===et.variantId);mt&&mt.prices&&mt.prices.length>0&&(Qt=mt.prices[0].amount)}const vt={estimate_id:Re.id,idx:Xe,addon_id:lt,selected_product_id:et.productId,selected_variant_id:et.variantId,price:Qt,quantity:Je.quantity||0};await c1(vt)}}console.log(" Estimate    ..."),await h1(Re.id),console.log(" Estimate    "),B(u,!0),B(h,(at=d())!=null&&at.id?"  ":"  "),B(f,(At=d())!=null&&At.id?"  .":s().customer_id?"  .":"  .      ."),A(!1),i().mallType==="godo5"&&(window.location.href="/odiz/odiz_list.php")}catch(it){console.error("    :",it),B(u,!0),B(h," "),B(f,"    .  .")}}En(()=>{var ce,ee;if(qt(St,dt(o).index=o().products.length,dt(o)),(ce=d())!=null&&ce.id){ne();const N=Jp(d().id,_e=>{d(_e),B(Z,Cd(_e.status))});return()=>{N.unsubscribe()}}else a()&&V(a());if(!((ee=d())!=null&&ee.id)&&i())if(qt(St,dt(o).orderName=i().name,dt(o)),qt(St,dt(o).orderPhone=i().phone.replace(/-/g,""),dt(o)),B(b,i().address1),B(S,i().address2),B(y,i().postcode),i().phone){const N=i().phone.replace(/-/g,"");qt(St,dt(o).orderPhone=N,dt(o)),N.length>=3&&B(L,N.slice(0,3)),N.length>=7&&B(re,N.slice(3,7)),N.length>=11&&B(K,N.slice(7,11))}else qt(St,dt(o).orderPhone="",dt(o));Ae()});async function j(ce){var ee;B(de,!0);try{const N=await _u(ce),_e=await Nd(ce),ve=await Zp(ce);B(ie,await u1(ce));const Se=[],me={};for(const ge of N)if(ge.product_id&&ge.product){const Oe=ge.idx||0;if(me[Oe]||(me[Oe]={product:ge.product,variants:[],quantity:0,prints:[],addons:{}}),ge.variant_id&&ge.quantity){const He={id:ge.variant_id,quantity:ge.quantity,prices:[{amount:ge.price||0}],thumbnail:((ee=ge.variant)==null?void 0:ee.thumbnail)||null,title:ge.variant_title||` ${ge.variant_id.substring(0,4)}`};me[Oe].variants.push(He),me[Oe].quantity+=ge.quantity}}const Ne=[];for(const ge of _e)if(ge.template_id&&ge.estimate_id){const Oe=ge.idx||0;if(me[Oe]){const He=(async()=>{try{const je=await Hu(ge.template_id);let at=null;try{at=await Gd(ge.template_id)}catch(Re){console.warn("templateProduct  :",Re)}const it={template:{id:ge.template_id,name:je.length>0&&je[je.length-1].name||"",templateProduct:at},parentTemplates:je,price:ge.price||0,colors:ge.colors?JSON.parse(ge.colors):[],uploads:ge.uploads?JSON.parse(ge.uploads):null,nameSheet:ge.name_sheet?typeof ge.name_sheet=="string"?JSON.parse(ge.name_sheet):ge.name_sheet:null,title:je.length>0?je[0].name:"",objectId:ge.object_id||null,variant_id:ge.variant_id||null,discountInfo:ge.original_price?{originalPrice:ge.original_price,discountAmount:ge.discount_amount||0,discountDetails:ge.discount_type?{type:ge.discount_type,value:ge.discount_value||0,direction:ge.discount_direction||null,min_quantity:ge.discount_min_quantity||null,max_quantity:ge.discount_max_quantity||null}:void 0,hasDiscount:(ge.discount_amount||0)>0}:void 0};me[Oe].prints.push(it)}catch(je){console.error("    :",je);const At={template:{id:ge.template_id,name:"",templateProduct:null},parentTemplates:[],price:ge.price||0,colors:ge.colors?JSON.parse(ge.colors):[],uploads:ge.uploads?JSON.parse(ge.uploads):null,title:"",objectId:ge.object_id||null,variant_id:ge.variant_id||null,nameSheet:ge.name_sheet?typeof ge.name_sheet=="string"?JSON.parse(ge.name_sheet):ge.name_sheet:null,discountInfo:ge.original_price?{originalPrice:ge.original_price,discountAmount:ge.discount_amount||0,discountDetails:ge.discount_type?{type:ge.discount_type,value:ge.discount_value||0,direction:ge.discount_direction||null,min_quantity:ge.discount_min_quantity||null,max_quantity:ge.discount_max_quantity||null}:void 0,hasDiscount:(ge.discount_amount||0)>0}:void 0};me[Oe].prints.push(At)}})();Ne.push(He)}}await Promise.all(Ne),ve.forEach(ge=>{const Oe=ge.idx||0;me[Oe]?(me[Oe].addons||(me[Oe].addons={}),me[Oe].addons[ge.addon_id]={productId:ge.selected_product_id,variantId:ge.selected_variant_id||""}):console.log(`productGroups[${Oe}]  `)});const De=[];for(const ge in me){const Oe=me[ge];if(Oe.product&&Object.keys(Oe.addons||{}).length>0){const He=(async()=>{try{const je=await Nu(Oe.product.id);Oe.addonProductsMap={},je.forEach(at=>{at.items.forEach(At=>{var it,Re,Xe;At.addon_product&&((Xe=(Re=(it=At.addon_product.variants)==null?void 0:it[0])==null?void 0:Re.prices)!=null&&Xe[0])&&(Oe.addonProductsMap[At.addon_product.id]={price:At.addon_product.variants[0].prices[0].amount,title:At.addon_product.title,variants:At.addon_product.variants})})})}catch(je){console.error(`idx ${ge}    :`,je),Oe.addonProductsMap={}}})();De.push(He)}Se.push(Oe)}await Promise.all(De),S_(St,{...o(),products:Se,index:(Se.length>0,0)});const qe=Se.reduce((ge,Oe)=>ge+Oe.quantity,0),Qe=Se.reduce((ge,Oe)=>ge+(Oe.variants||[]).reduce((He,je)=>{const at=je.quantity||0;return He+je.prices[0].amount*at},0),0),rt=Se.reduce((ge,Oe)=>ge+(Oe.prints||[]).reduce((He,je)=>He+(je.price||0),0),0),tt=Se.reduce((ge,Oe)=>{if(!Oe.addons||Object.keys(Oe.addons).length===0||!Oe.addonProductsMap)return ge;const He=Oe.quantity||0,je=Object.values(Oe.addons).reduce((at,At)=>{const it=Oe.addonProductsMap[At.productId];if(it&&At.variantId){const Re=it.variants.find(Xe=>Xe.id===At.variantId);if(Re&&Re.prices&&Re.prices.length>0){const Xe=Re.prices[0].amount*He;return at+Xe}}return at},0);return ge+je},0),Te=l(ie).reduce((ge,Oe)=>ge+Number(Oe.amount),0);qt(St,dt(o).totalQuantity=qe,dt(o)),qt(St,dt(o).totalProductAmount=Qe,dt(o)),qt(St,dt(o).totalPrintAmount=rt,dt(o)),qt(St,dt(o).totalAddonAmount=tt,dt(o)),qt(St,dt(o).totalAdditionalAmount=Te,dt(o)),qt(St,dt(o).totalAmount=Qe+rt+tt+Te,dt(o)),setTimeout(()=>{St.updateTotalAmounts()},200)}catch(N){console.error("     :",N),qt(St,dt(o).products=[],dt(o))}finally{B(de,!1)}}function V(ce){B(D,!1),a(ce),qt(St,dt(o).index=o().products.length,dt(o)),B(g,1)}Jt(()=>(l(P),l(m),l(c)),()=>{var ce;(l(P)||l(m))&&(B(c,(ce=document.getElementById("estimate-modal"))==null?void 0:ce.querySelector(".odz-modal-box")),l(c)&&fr(c,l(c).scrollTop=0))}),Jt(()=>(o(),l(L),l(re),l(K)),()=>{if(o().orderPhone&&!l(L)&&!l(re)&&!l(K)){const ce=o().orderPhone;ce.length>=3&&B(L,ce.slice(0,3)),ce.length>=7&&B(re,ce.slice(3,7)),ce.length>=11&&B(K,ce.slice(7,11))}}),Jt(()=>(l(L),l(re),l(K)),()=>{qt(St,dt(o).orderPhone=`${l(L)}${l(re)}${l(K)}`,dt(o))}),Jt(()=>(l(u),l(c)),()=>{var ce;l(u)&&(B(c,(ce=document.getElementById("estimate-modal"))==null?void 0:ce.querySelector(".odz-modal-box")),l(c)&&fr(c,l(c).scrollTop=0))}),Jt(()=>l(O),()=>{l(O)&&qt(St,dt(o).prefDeliveryDate=new Date(l(O)).toISOString(),dt(o))}),Zn(),Kr();var X=nM(),R=pt(X);{var he=ce=>{var ee=HN(),N=pt(ee),_e=w(N),ve=w(_e),Se=z(ve,2),me=z(N,2);{var Ne=qe=>{var Qe=DN(),rt=w(Qe);{var tt=ge=>{oF(ge,{get productId(){return a()},get step(){return l(g)},set step(Oe){B(g,Oe)},$$legacy:!0})},Te=ge=>{var Oe=ON(),He=z(w(Oe),6);st("click",He,()=>B(D,!0)),T(ge,Oe)};Ee(rt,ge=>{a()&&a().trim()!==""?ge(tt):ge(Te,!1)})}T(qe,Qe)},De=qe=>{var Qe=Dt(),rt=pt(Qe);{var tt=ge=>{var Oe=NN(),He=w(Oe);F5(He,{get productId(){return a()},get step(){return l(g)},set step(je){B(g,je)},$$legacy:!0}),T(ge,Oe)},Te=ge=>{var Oe=Dt(),He=pt(Oe);{var je=at=>{var At=MN();T(at,At)};Ee(He,at=>{l(g)===3&&at(je)},!0)}T(ge,Oe)};Ee(rt,ge=>{l(g)===2?ge(tt):ge(Te,!1)},!0)}T(qe,Qe)};Ee(me,qe=>{l(g)===1?qe(Ne):qe(De,!1)})}Me(()=>{Fr(ve,`odz-tab ${(l(g)===1?"odz-tab-active":"")??""}`),Fr(Se,`odz-tab ${(l(g)===2?"odz-tab-active":"")??""}`)}),st("click",ve,$),st("click",Se,q),T(ce,ee)},xe=ce=>{var ee=XN(),N=pt(ee);{var _e=tt=>{var Te=jN();T(tt,Te)},ve=tt=>{var Te=qN(),ge=z(w(Te),2);bB(ge,{onSelectProduct:fe,get isEditable(){return l(Z)},set isEditable(At){B(Z,At)},$$legacy:!0});var Oe=z(ge,2),He=w(Oe);{var je=At=>{var it=RN(),Re=w(it);bu(Re,{class:"odz-w-5 odz-h-5 odz-mr-2"}),st("click",it,()=>B(D,!0)),T(At,it)};Ee(He,At=>{l(Z)&&At(je)})}var at=z(Oe,2);kN(at,{get additionalCosts(){return l(ie)},get isEditable(){return l(Z)}}),T(tt,Te)};Ee(N,tt=>{l(de)?tt(_e):tt(ve,!1)})}var Se=z(N,2);{var me=tt=>{G1(tt,{addProduct:V,productType:"godo",get isProductSearchOpen(){return l(D)},set isProductSearchOpen(Te){B(D,Te)},$$legacy:!0})};Ee(Se,tt=>{l(D)&&tt(me)})}var Ne=z(Se,2),De=w(Ne),qe=w(De);{var Qe=tt=>{var Te=KN();T(tt,Te)},rt=tt=>{var Te=WN(),ge=pt(Te),Oe=w(ge),He=z(w(Oe)),je=w(He);Ga(je,{class:"odz-text-error",size:10});var at=z(Oe,2);{var At=or=>{var sn=VN(),Qo=w(sn),ks=w(Qo),Si=z(Qo,2);{var Un=Zs=>{var Ta=$N();T(Zs,Ta)};Ee(Si,Zs=>{l(Z)||Zs(Un)})}Me(()=>{Fr(Qo,`odz-badge odz-badge-${(d().status==="pending"?"warning":d().status==="progress"?"info":d().status==="completed"?"success":"error")??""}`),Ue(ks,d().status==="pending"?"":d().status==="progress"?"":d().status==="completed"?"":"")}),T(or,sn)};Ee(at,or=>{var sn;(sn=d())!=null&&sn.id&&or(At)})}var it=z(ge,2),Re=w(it),Xe=w(Re),Je=w(Xe),ct=w(Je);Ga(ct,{class:"odz-text-error",size:12});var _t=z(Xe,2),lt=z(Re,2),et=w(lt),Qt=w(et),vt=w(Qt);Ga(vt,{class:"odz-text-error",size:12});var Nt=z(et,2),mt=z(lt,2),Lt=w(mt),Pt=w(Lt),zt=w(Pt);Ga(zt,{class:"odz-text-error",size:12});var Et=z(Lt,2),xt=z(mt,2),Ut=w(xt),Kt=w(Ut),Ot=w(Kt);Ga(Ot,{class:"odz-text-error",size:12});var Mt=z(Ut,2),Gt=w(Mt);ts(Gt,or=>B(H,or),()=>l(H));var nr=z(Gt,2);ts(nr,or=>B(J,or),()=>l(J));var sr=z(nr,2);ts(sr,or=>B(we,or),()=>l(we));var dr=z(it,2),Ht=w(dr),wr=w(Ht),Pr=w(wr);Ga(Pr,{class:"odz-text-error",size:12});var $r=z(Ht,2),Ir=w($r),hr=z(Ir,2),Or=z(hr,2),xr=z($r,2),ir=z(xr,2),vr=z(dr,4),kr=w(vr),un=w(kr),bn=w(un),zr=w(bn);Ga(zr,{class:"odz-text-error",size:12});var lr=z(un,2);Me(()=>{o(),op(()=>{l(Z)})});var Fn=w(lr);Fn.value=((Fn.__value="")==null,"");var Fo=z(Fn);Fo.value=(Fo.__value="delivery")==null?"":"delivery";var so=z(Fo);so.value=(so.__value="pickup")==null?"":"pickup";var yo=z(so);yo.value=(yo.__value="quick")==null?"":"quick";var ns=z(kr,2),On=z(w(ns),2),tr=z(vr,2);{var Qr=or=>{var sn=GN(),Qo=w(sn),ks=w(Qo),Si=w(ks);Ga(Si,{class:"odz-text-error",size:12});var Un=z(Qo,2);Me(()=>Un.readOnly=!l(Z)),br(Un,()=>o().password,Zs=>qt(St,dt(o).password=Zs,dt(o))),T(or,sn)};Ee(tr,or=>{s().customer_id||or(Qr)})}var on=z(tr,2),Ro=z(w(on),2),bs=z(on,2),Io=w(bs),bo=w(Io);pw(bo,{class:"odz-w-5 odz-h-5 odz-mr-2"});var os=z(Io,2),Ua=w(os);pw(Ua,{class:"odz-w-5 odz-h-5 odz-mr-2"});var zi=z(Ua,2);{var Ci=or=>{var sn=Wr(" ");T(or,sn)},EA=or=>{var sn=Wr(" ");T(or,sn)};Ee(zi,or=>{var sn;(sn=d())!=null&&sn.id?or(Ci):or(EA,!1)})}Me(or=>{_t.readOnly=!l(Z),Nt.readOnly=!l(Z),Et.readOnly=!l(Z),Gt.readOnly=!l(Z),nr.readOnly=!l(Z),sr.readOnly=!l(Z),xr.readOnly=!l(Z),ir.readOnly=!l(Z),lr.disabled=!l(Z),On.disabled=!l(Z),rr(On,"min",or),Ro.readOnly=!l(Z),os.disabled=!l(Z)},[()=>new Date().toISOString().split("T")[0]],ot),br(_t,()=>o().estimateName,or=>qt(St,dt(o).estimateName=or,dt(o))),br(Nt,()=>o().organizationName,or=>qt(St,dt(o).organizationName=or,dt(o))),br(Et,()=>o().orderName,or=>qt(St,dt(o).orderName=or,dt(o))),br(Gt,()=>l(L),or=>B(L,or)),st("input",Gt,or=>I(or,l(J))),br(nr,()=>l(re),or=>B(re,or)),st("input",nr,or=>I(or,l(we))),br(sr,()=>l(K),or=>B(K,or)),st("input",sr,or=>I(or)),br(Ir,()=>l(y),or=>B(y,or)),st("click",hr,x),st("click",Or,E),br(xr,()=>l(b),or=>B(b,or)),br(ir,()=>l(S),or=>B(S,or)),sp(lr,()=>o().shippingMethod,or=>qt(St,dt(o).shippingMethod=or,dt(o))),br(On,()=>l(O),or=>B(O,or)),br(Ro,()=>o().comment,or=>qt(St,dt(o).comment=or,dt(o))),st("click",Io,se),st("click",os,M),T(tt,Te)};Ee(qe,tt=>{l(de)?tt(Qe):tt(rt,!1)})}T(ce,ee)};Ee(R,ce=>{l(g)>0?ce(he):ce(xe,!1)})}var Be=z(R,2),Le=w(Be);{var Y=ce=>{var ee=YN();T(ce,ee)},k=ce=>{var ee=tM(),N=pt(ee),_e=w(N),ve=z(w(_e),2),Se=w(ve),me=z(_e,2),Ne=z(w(me),2),De=w(Ne),qe=z(Ne,2);{var Qe=Et=>{var xt=JN();const Ut=ot(()=>o().products.reduce((sr,dr)=>{var Ht;return sr+(((Ht=dr.discountInfo)==null?void 0:Ht.originalAmount)||0)},0)),Kt=ot(()=>o().products.reduce((sr,dr)=>{var Ht;return sr+(((Ht=dr.discountInfo)==null?void 0:Ht.discountAmount)||0)},0));var Ot=pt(xt),Mt=w(Ot),Gt=z(Ot,2),nr=w(Gt);Me((sr,dr)=>{Ue(Mt,`${sr??""}`),Ue(nr,`-${dr??""} `)},[()=>gr(l(Ut)),()=>gr(l(Kt))],ot),T(Et,xt)},rt=Et=>{var xt=ZN();T(Et,xt)};Ee(qe,Et=>{o().products.some(xt=>{var Ut;return(Ut=xt.discountInfo)==null?void 0:Ut.hasDiscount})?Et(Qe):Et(rt,!1)})}var tt=z(me,2),Te=z(w(tt),2),ge=w(Te);{var Oe=Et=>{var xt=eM();T(Et,xt)},He=Et=>{var xt=Wr();Me(Ut=>Ue(xt,`${Ut??""}`),[()=>gr(o().totalPrintAmount)],ot),T(Et,xt)};Ee(ge,Et=>{o().totalPrintAmount===0?Et(Oe):Et(He,!1)})}var je=z(tt,2),at=z(w(je),2),At=w(at),it=z(je,2),Re=z(w(it),2),Xe=w(Re),Je=z(Re,2),ct=w(Je),_t=z(ct);{var lt=Et=>{var xt=Wr("+ ( )");T(Et,xt)};Ee(_t,Et=>{o().totalPrintAmount>0&&Et(lt)})}var et=z(_t,2);{var Qt=Et=>{var xt=Wr();Me(Ut=>Ue(xt,`+ ${Ut??""}`),[()=>gr(o().totalAdditionalAmount)],ot),T(Et,xt)};Ee(et,Et=>{o().totalAdditionalAmount>0&&Et(Qt)})}var vt=z(N,2),Nt=w(vt),mt=z(Nt,2),Lt=w(mt);{var Pt=Et=>{var xt=Wr("  ");T(Et,xt)},zt=Et=>{var xt=Wr("  ");T(Et,xt)};Ee(Lt,Et=>{var xt;(xt=d())!=null&&xt.id?Et(Pt):Et(zt,!1)})}Me((Et,xt,Ut)=>{Ue(Se,`${o().totalQuantity||0}`),Ue(De,`${Et??""}`),Ue(At,`${xt??""}`),Ue(Xe,`${Ut??""}`),Ue(ct,` ${Et??""} + 
          ${xt??""} `),mt.disabled=!l(Z)},[()=>gr(o().totalProductAmount),()=>gr(o().totalAddonAmount),()=>gr(o().totalAmount)],ot),st("click",Nt,()=>B(g,Math.max(0,l(g)-1))),st("click",mt,M),T(ce,ee)};Ee(Le,ce=>{l(de)?ce(Y):ce(k,!1)})}var pe=z(Be,2);{var ze=ce=>{var ee=rM(),N=w(ee),_e=z(w(N),4),ve=w(_e);st("click",ve,()=>B(P,!1)),T(ce,ee)};Ee(pe,ce=>{l(P)&&ce(ze)})}var ye=z(pe,2);{var le=ce=>{yN(ce,{get isOpen(){return l(m)},set isOpen(ee){B(m,ee)},$$legacy:!0})};Ee(ye,ce=>{l(m)&&ce(le)})}var Ce=z(ye,2);Wd(Ce,{get isOpen(){return l(u)},set isOpen(ce){B(u,ce)},get title(){return l(h)},set title(ce){B(h,ce)},get message(){return l(f)},set message(ce){B(f,ce)},$$legacy:!0});var ke=z(Ce,2);Xd(ke,{get isLoading(){return l(de)},set isLoading(ce){B(de,ce)},$$legacy:!0}),T(n,X),Rr(),r()}var sM=te('<div class="odz-alert odz-alert-error"> </div>'),iM=te('<div class="odz-mb-4"><!></div>'),aM=te('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),AM=te('<div><h4 class="odz-font-semibold odz-mb-2"> </h4> <div class="odz-flex odz-flex-col odz-justify-center"></div></div>'),lM=te('<p class="odz-text-base odz-font-semibold odz-mb-3"> </p>'),dM=te('<div class="odz-border odz-rounded-lg odz-p-2 odz-w-full sm:odz-w-48 md:odz-w-56 odz-flex odz-items-center odz-gap-3"><img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0"> <div class="odz-flex-grow odz-min-w-0"><p class="odz-text-xs odz-font-medium odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div>'),cM=te('<div class="odz-mb-4"><!> <div class="odz-flex odz-flex-wrap odz-gap-3"></div></div>'),uM=te('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),hM=te('<div class="odz-flex odz-flex-col odz-justify-center"></div>'),fM=te('<p class="odz-text-xs odz-text-gray-500">     .</p>'),pM=te('<div class="odz-mb-2"><h6 class="odz-font-medium odz-text-sm odz-mb-2"> </h6> <!></div>'),gM=te('<div class="odz-mb-6 odz-p-4 odz-border odz-rounded-lg"><h5 class="odz-font-medium odz-text-base odz-mb-3"> </h5> <!> <!></div>'),vM=te("<div></div>"),mM=te('<p class="odz-text-center odz-text-gray-500 odz-py-4">   .</p>'),wM=te('<div class="odz-mt-4"><!></div>'),yM=te('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1">[]</div> <div class="odz-chat-bubble odz-text-sm odz-chat-bubble-success odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),bM=te('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"></div> <div class="odz-chat-bubble odz-chat-bubble-secondary odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),_M=te('<div class="odz-chat odz-chat-start"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"> </div> <div class="odz-chat-bubble odz-chat-bubble-gray"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),BM=te('<p class="odz-text-center odz-text-sm odz-text-gray-500">  .</p>'),xM=te('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),zM=te('<div role="alert" class="odz-alert odz-alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> :    .</span></div>'),CM=te('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),SM=te('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),EM=te('<div role="alert" class="odz-alert odz-alert-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),FM=te('<div role="alert" class="odz-alert odz-alert-success odz-alert-outline"><span> :   .</span></div>'),IM=te('<button class="odz-btn odz-btn-success"> </button> <button class="odz-btn odz-btn-error"> </button>',1),QM=te('<div class="odz-space-y-6"><!> <!> <!> <!></div> <div class="odz-divider odz-my-6"></div> <div class="odz-space-y-4"><div class="odz-max-h-60 odz-overflow-y-auto odz-p-2 odz-bg-base-200 odz-rounded-lg odz-space-y-3"></div> <div class="odz-flex odz-gap-2 odz-items-center"><input type="text" placeholder=" ..." class="odz-input odz-input-bordered odz-flex-grow"> <button class="odz-btn odz-btn-primary"><!> </button></div></div> <div class="odz-mt-6"><!></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <!></div>',1),UM=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4"> </h3> <!></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),TM=te('<div class="odz-flex odz-gap-4"><label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label> <label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label></div>'),LM=te('<input type="checkbox" class="odz-checkbox odz-checkbox-sm">'),PM=te('<div class="odz-form-control"><label class="odz-label odz-cursor-pointer odz-gap-4"><span class="odz-label-text odz-text-xs"> </span> <!></label></div>'),kM=te('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>   ...',1),OM=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-font-bold odz-text-lg">    </h3> <p class="odz-py-4 odz-text-sm">       .</p> <div class="odz-form-control odz-mb-4"><label class="odz-label odz-cursor-pointer"><span class="odz-label-text odz-font-semibold"> .</span> <input type="checkbox" class="odz-checkbox odz-checkbox-primary"></label></div> <div class="odz-space-y-2 odz-border-t odz-border-b odz-py-4 odz-max-h-60 odz-overflow-y-auto"></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <button class="odz-btn odz-btn-primary"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),DM=te('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>  ...',1),NM=te('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box"><h3 class="odz-font-bold odz-text-lg odz-mb-4">   </h3> <textarea class="odz-textarea odz-textarea-bordered odz-w-full odz-h-32" placeholder="   ..."></textarea> <div class="odz-modal-action odz-mt-4"><button class="odz-btn"></button> <button class="odz-btn odz-btn-error"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),MM=te("<!> <!> <!> <!>",1);function HM(n,e){jr(e,!1);let t=ft(e,"estimateId",8),r=ft(e,"isOpen",12),o=Ie(null),s=Ie(!0),i=Ie(null),a=Ie({}),A=Ie([]),d=Ie(""),c=Ie(""),u=null,h=null,f=null,g=Ie(!1),m=Ie(""),y=Ie(""),b=Ie([]),S=Ie(""),F=Ie(!1),P=Ie(),L=Ie(!1),re=Ie(""),K=Ie(!1),H=Ie(!1),J=Ie([!1,!1,!1,!1,!1,!1,!1]),we=Ie(!1),O=Ie(!1);const D=["     .","          .","    .","    ,    ?","           .","   , ,       .","    ? ( ,  3 )"];function Z(Y){if(!Y)return null;try{return typeof Y=="object"&&Y!==null?Y:JSON.parse(Y)}catch(k){return console.error("Failed to parse JSON:",k,"Input:",Y),null}}async function ie(){await ki(),l(P)&&fr(P,l(P).scrollTop=l(P).scrollHeight)}function de(){var k;if(!l(o))return;if((k=l(o).estimate)!=null&&k.design_uploads){const pe=typeof l(o).estimate.design_uploads=="string"?Z(l(o).estimate.design_uploads):l(o).estimate.design_uploads;pe&&Array.isArray(pe.files)?B(A,pe.files.map(ze=>({url:ze.url,name:ze.name}))):B(A,[]),B(d,(pe==null?void 0:pe.topHTML)||""),B(c,(pe==null?void 0:pe.bottomHTML)||"")}else B(A,[]),B(d,""),B(c,"");const Y={};l(o).items.length>0&&(l(o).items.forEach(pe=>{const ze=pe.idx??0;Y[ze]||(Y[ze]={items:[],prints:[]}),Y[ze].items.push(pe)}),l(o).prints.forEach(pe=>{const ze=pe.idx??0;Y[ze]||(console.warn(`Print found for idx ${ze} but no corresponding item group exists.`),Y[ze]={items:[],prints:[]});const ye=typeof pe.design_uploads=="string"?Z(pe.design_uploads):pe.design_uploads;pe.parsed_uploads=(ye==null?void 0:ye.files)||[],Y[ze].prints.find(Ce=>Ce.id===pe.id)||Y[ze].prints.push(pe)})),B(a,Y),console.log("Processed and grouped data:",l(a)),Object.entries(l(a)).forEach(([pe,ze])=>{console.log(`idx ${pe}: ${ze.prints.length} print(s)`,ze.prints.map(ye=>{var le;return{id:ye.id,parsed_uploads_count:(le=ye.parsed_uploads)==null?void 0:le.length}}))})}En(async()=>{if(!t()){B(i," ID  ."),B(s,!1);return}B(s,!0),B(i,null);try{const[Y,k]=await Promise.all([A1(t()),rB(t())]);B(o,Y),B(b,k),console.log("Fetched initial details in component:",l(o)),console.log("Fetched initial comments in component:",l(b)),de(),u=Jp(t(),pe=>{console.log("Received estimate update:",pe),l(o)&&(fr(o,l(o).estimate={...l(o).estimate,...pe}),de())}),console.log("Subscribed to estimate changes:",u),h=l1(t(),pe=>{console.log("Received comment update payload:",pe),pe.eventType==="INSERT"&&pe.new?B(b,[...l(b),pe.new]):pe.eventType==="DELETE"&&pe.old?B(b,l(b).filter(ze=>ze.id!==pe.old.id)):pe.eventType==="UPDATE"&&pe.new&&B(b,l(b).map(ze=>{var ye;return ze.id===((ye=pe.new)==null?void 0:ye.id)?{...ze,...pe.new}:ze})),ie()}),console.log("Subscribed to comment changes:",h),f=d1(t(),pe=>{if(console.log("Received print update payload:",pe),l(o)){let ze=!1;if(pe.eventType==="INSERT"&&pe.new)fr(o,l(o).prints=[...l(o).prints,pe.new]),ze=!0;else if(pe.eventType==="DELETE"&&pe.old){const ye=l(o).prints.length;fr(o,l(o).prints=l(o).prints.filter(le=>le.id!==pe.old.id)),l(o).prints.length<ye&&(ze=!0)}else if(pe.eventType==="UPDATE"&&pe.new){const ye=l(o).prints.findIndex(le=>{var Ce;return le.id===((Ce=pe.new)==null?void 0:Ce.id)});ye!==-1&&(fr(o,l(o).prints[ye]={...l(o).prints[ye],...pe.new}),ze=!0)}ze&&(de(),console.log("Prints array updated, re-processed data"))}}),console.log("Subscribed to print changes:",f),ie()}catch(Y){console.error("Error loading initial data or subscribing:",Y),B(i,"        .")}finally{B(s,!1)}}),Eo(()=>{u&&(console.log("Unsubscribing from estimate changes"),u.unsubscribe()),h&&(console.log("Unsubscribing from comment changes"),h.unsubscribe()),f&&(console.log("Unsubscribing from print changes"),f.unsubscribe())});function ne(){r(!1)}function fe(){B(J,Array(D.length).fill(!1)),B(we,!1),B(H,!0)}function $(){B(H,!1)}function q(){for(let Y=0;Y<D.length-1;Y++)fr(J,l(J)[Y]=l(we));B(J,[...l(J)]),console.log({confirmationChecks:l(J)})}function se(Y,k){fr(J,l(J)[Y]=k),Y<D.length-1&&B(we,l(J).slice(0,-1).every(pe=>pe===!0)),B(J,[...l(J)])}function Ae(){B(re,""),B(L,!0)}function x(){B(L,!1)}async function E(){var ze,ye;if(!l(re).trim()){B(m," "),B(y,"   ."),B(g,!0);return}if(!((ye=(ze=l(o))==null?void 0:ze.estimate)!=null&&ye.id))return;const Y=l(o).estimate.id;B(K,!0);let k=null,pe=null;try{try{await Pf({estimate_id:Y,comment:`[] ${l(re)}`,system:!1,writer:"customer"}),console.log("Rejection comment added successfully.")}catch(le){throw k=le,console.error("Error adding rejection comment:",k),new Error("     .")}try{await Dd(Y,{design_confirm:"processing"}),console.log("Estimate status updated to processing.")}catch(le){throw pe=le,console.error("Error updating estimate status after rejection:",pe),new Error("    .")}x(),ne()}catch(le){console.error("Error during rejection process:",le),B(m,""),B(y,le.message||"     ."),B(g,!0)}finally{B(K,!1)}}async function I(){var ye,le;if(!((le=(ye=l(o))==null?void 0:ye.estimate)!=null&&le.id))return;const Y=l(o).estimate.id,k=l(J)[D.length-1];B(O,!0);let pe=null,ze=null;try{await Dd(Y,{design_confirm:"completed",use_reorder:k,...l(o).estimate.auto_complete_on_approval?{status:"completed"}:{}}),console.log(`Estimate status updated to completed with use_reorder: ${k}.`);try{await Pf({estimate_id:Y,comment:"",system:!0,writer:"customer"}),console.log("System comment added successfully with writer as customer.")}catch(Ce){ze=Ce,console.error("Error adding system comment after approval:",ze)}}catch(Ce){pe=Ce,console.error("Error approving design:",pe)}finally{B(O,!1),pe?(B(m,""),B(y,"      ."),B(g,!0)):ze?(B(m,""),B(y," ,      ."),B(g,!0)):($(),ne())}}async function U(){var Y,k;if(!(!l(S).trim()||!((k=(Y=l(o))==null?void 0:Y.estimate)!=null&&k.id))){B(F,!0);try{await Pf({estimate_id:l(o).estimate.id,comment:l(S),system:!1,writer:"customer"}),B(S,"")}catch(pe){console.error("Error sending comment:",pe),B(m,""),B(y,"    ."),B(g,!0)}finally{B(F,!1)}}}function M(Y){if(!Y)return"";try{return new Date(Y).toLocaleString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return Y}}Kr();var j=MM(),V=pt(j);{var X=Y=>{var k=UM(),pe=w(k),ze=w(pe),ye=z(ze,2),le=w(ye),Ce=z(ye,2);{var ke=_e=>{Xd(_e,{get isLoading(){return l(s)},set isLoading(ve){B(s,ve)},$$legacy:!0})},ce=_e=>{var ve=Dt(),Se=pt(ve);{var me=De=>{var qe=sM(),Qe=w(qe);Me(()=>Ue(Qe,l(i))),T(De,qe)},Ne=De=>{var qe=Dt(),Qe=pt(qe);{var rt=tt=>{var Te=QM(),ge=pt(Te),Oe=w(ge);{var He=Ot=>{var Mt=iM(),Gt=w(Mt);p0(Gt,()=>l(d),!1,!1),T(Ot,Mt)};Ee(Oe,Ot=>{l(d)&&Ot(He)})}var je=z(Oe,2);{var at=Ot=>{var Mt=AM(),Gt=z(w(Mt),2);Yt(Gt,5,()=>l(A),Ar,(nr,sr)=>{var dr=aM(),Ht=w(dr);Me(()=>{rr(Ht,"src",l(sr).url),rr(Ht,"alt",l(sr).name)}),T(nr,dr)}),T(Ot,Mt)};Ee(je,Ot=>{l(A).length>0&&Ot(at)})}var At=z(je,2);{var it=Ot=>{var Mt=vM();Yt(Mt,5,()=>Object.entries(l(a)),Ar,(Gt,nr)=>{let sr=()=>l(nr)[0],dr=()=>l(nr)[1];var Ht=gM(),wr=w(Ht),Pr=w(wr),$r=z(wr,2);{var Ir=xr=>{var ir=cM(),vr=w(ir);{var kr=bn=>{var zr=lM(),lr=w(zr);Me(()=>Ue(lr,dr().items[0].product.title)),T(bn,zr)};Ee(vr,bn=>{var zr;(zr=dr().items[0].product)!=null&&zr.title&&bn(kr)})}var un=z(vr,2);Yt(un,5,()=>dr().items,Ar,(bn,zr)=>{var lr=dM(),Fn=w(lr),Fo=z(Fn,2),so=w(Fo),yo=w(so),ns=z(so,2),On=w(ns);Me(()=>{var tr,Qr,on;rr(Fn,"src",((tr=l(zr).variant)==null?void 0:tr.thumbnail)||l(zr).thumbnail||"/placeholder.png"),rr(Fn,"alt",l(zr).variant_title||((Qr=l(zr).variant)==null?void 0:Qr.title)),Ue(yo,l(zr).variant_title||((on=l(zr).variant)==null?void 0:on.title)||"  "),Ue(On,`${l(zr).quantity??""}`)}),T(bn,lr)}),T(xr,ir)};Ee($r,xr=>{dr().items.length>0&&xr(Ir)})}var hr=z($r,2);{var Or=xr=>{var ir=pM();const vr=ot(()=>dr().prints[0]),kr=ot(()=>{var lr;return((lr=l(vr))==null?void 0:lr.parsed_uploads)||[]});var un=z(w(ir),2);{var bn=lr=>{var Fn=hM();Yt(Fn,5,()=>l(kr),Ar,(Fo,so)=>{var yo=uM(),ns=w(yo);Me(()=>{rr(ns,"src",l(so).url),rr(ns,"alt",l(so).name)}),T(Fo,yo)}),T(lr,Fn)},zr=lr=>{var Fn=fM();T(lr,Fn)};Ee(un,lr=>{l(kr).length>0?lr(bn):lr(zr,!1)})}T(xr,ir)};Ee(hr,xr=>{dr().prints.length>0&&xr(Or)})}Me(xr=>{rr(Ht,"data-idx",sr()),Ue(Pr,` ${xr??""}`)},[()=>Number(sr())+1],ot),T(Gt,Ht)}),T(Ot,Mt)},Re=Ot=>{var Mt=Dt(),Gt=pt(Mt);{var nr=sr=>{var dr=mM();T(sr,dr)};Ee(Gt,sr=>{l(A).length===0&&sr(nr)},!0)}T(Ot,Mt)};Ee(At,Ot=>{Object.keys(l(a)).length>0?Ot(it):Ot(Re,!1)})}var Xe=z(At,2);{var Je=Ot=>{var Mt=wM(),Gt=w(Mt);p0(Gt,()=>l(c),!1,!1),T(Ot,Mt)};Ee(Xe,Ot=>{l(c)&&Ot(Je)})}var ct=z(ge,4),_t=w(ct);Yt(_t,5,()=>l(b),Ot=>Ot.id,(Ot,Mt)=>{var Gt=Dt(),nr=pt(Gt);{var sr=Ht=>{var wr=yM(),Pr=z(w(wr),2),$r=w(Pr),Ir=z($r),hr=w(Ir);Me(Or=>{Ue($r,`${l(Mt).comment??""} `),Ue(hr,Or)},[()=>M(l(Mt).created_at)],ot),T(Ht,wr)},dr=Ht=>{var wr=Dt(),Pr=pt(wr);{var $r=hr=>{var Or=bM(),xr=z(w(Or),2),ir=w(xr),vr=z(ir),kr=w(vr);Me(un=>{Ue(ir,`${l(Mt).comment??""} `),Ue(kr,un)},[()=>M(l(Mt).created_at)],ot),T(hr,Or)},Ir=hr=>{var Or=_M(),xr=w(Or),ir=w(xr),vr=z(xr,2),kr=w(vr),un=z(kr),bn=w(un);Me(zr=>{Ue(ir,l(Mt).writer||""),Ue(kr,`${l(Mt).comment??""} `),Ue(bn,zr)},[()=>M(l(Mt).created_at)],ot),T(hr,Or)};Ee(Pr,hr=>{l(Mt).writer==="customer"?hr($r):hr(Ir,!1)},!0)}T(Ht,wr)};Ee(nr,Ht=>{l(Mt).system?Ht(sr):Ht(dr,!1)})}T(Ot,Gt)},Ot=>{var Mt=BM();T(Ot,Mt)}),ts(_t,Ot=>B(P,Ot),()=>l(P));var lt=z(_t,2),et=w(lt),Qt=z(et,2),vt=w(Qt);{var Nt=Ot=>{var Mt=xM();T(Ot,Mt)};Ee(vt,Ot=>{l(F)&&Ot(Nt)})}var mt=z(ct,2),Lt=w(mt);{var Pt=Ot=>{var Mt=zM();T(Ot,Mt)},zt=Ot=>{var Mt=Dt(),Gt=pt(Mt);{var nr=dr=>{var Ht=CM();T(dr,Ht)},sr=dr=>{var Ht=Dt(),wr=pt(Ht);{var Pr=Ir=>{var hr=SM();T(Ir,hr)},$r=Ir=>{var hr=Dt(),Or=pt(hr);{var xr=vr=>{var kr=EM();T(vr,kr)},ir=vr=>{var kr=Dt(),un=pt(kr);{var bn=zr=>{var lr=FM();T(zr,lr)};Ee(un,zr=>{var lr,Fn;((Fn=(lr=l(o))==null?void 0:lr.estimate)==null?void 0:Fn.design_confirm)==="completed"&&zr(bn)},!0)}T(vr,kr)};Ee(Or,vr=>{var kr,un;((un=(kr=l(o))==null?void 0:kr.estimate)==null?void 0:un.design_confirm)==="confirming"?vr(xr):vr(ir,!1)},!0)}T(Ir,hr)};Ee(wr,Ir=>{var hr,Or;((Or=(hr=l(o))==null?void 0:hr.estimate)==null?void 0:Or.design_confirm)==="processing"?Ir(Pr):Ir($r,!1)},!0)}T(dr,Ht)};Ee(Gt,dr=>{var Ht,wr;((wr=(Ht=l(o))==null?void 0:Ht.estimate)==null?void 0:wr.design_confirm)==="waiting"?dr(nr):dr(sr,!1)},!0)}T(Ot,Mt)};Ee(Lt,Ot=>{var Mt,Gt;((Gt=(Mt=l(o))==null?void 0:Mt.estimate)==null?void 0:Gt.design_confirm)==="none"?Ot(Pt):Ot(zt,!1)})}var Et=z(mt,2),xt=w(Et),Ut=z(xt,2);{var Kt=Ot=>{var Mt=IM(),Gt=pt(Mt),nr=z(Gt,2);Me(()=>{Gt.disabled=l(O),nr.disabled=l(O)}),st("click",Gt,fe),st("click",nr,Ae),T(Ot,Mt)};Ee(Ut,Ot=>{var Mt,Gt;((Gt=(Mt=l(o))==null?void 0:Mt.estimate)==null?void 0:Gt.design_confirm)==="confirming"&&Ot(Kt)})}Me(Ot=>{et.disabled=l(F),Qt.disabled=Ot,xt.disabled=l(O)},[()=>l(F)||!l(S).trim()],ot),br(et,()=>l(S),Ot=>B(S,Ot)),st("keydown",et,Ot=>Ot.key==="Enter"&&!Ot.isComposing&&U()),st("click",Qt,U),st("click",xt,ne),T(tt,Te)};Ee(Qe,tt=>{l(o)&&tt(rt)},!0)}T(De,qe)};Ee(Se,De=>{l(i)?De(me):De(Ne,!1)},!0)}T(_e,ve)};Ee(Ce,_e=>{l(s)?_e(ke):_e(ce,!1)})}var ee=z(pe,2),N=w(ee);Me(()=>{var _e,ve;return Ue(le,`  - ${((ve=(_e=l(o))==null?void 0:_e.estimate)==null?void 0:ve.name)||""}`)}),st("click",ze,ne),st("click",N,ne),T(Y,k)};Ee(V,Y=>{r()&&Y(X)})}var R=z(V,2);{var he=Y=>{var k=OM(),pe=w(k),ze=z(w(pe),4),ye=w(ze),le=z(w(ye),2),Ce=z(ze,2);Yt(Ce,5,()=>D,Ar,(Ne,De,qe)=>{var Qe=PM(),rt=w(Qe),tt=w(rt),Te=w(tt),ge=z(tt,2);{var Oe=je=>{var at=TM(),At=w(at),it=z(w(At),2);rr(it,"name",`reorder-${qe??""}`);var Re=z(At,2),Xe=z(w(Re),2);rr(Xe,"name",`reorder-${qe??""}`),Me(()=>{mu(it,l(J)[qe]),mu(Xe,!l(J)[qe])}),st("change",it,Je=>se(qe,Je.target.checked)),st("change",Xe,Je=>se(qe,!Je.target.checked)),T(je,at)},He=je=>{var at=LM();v0(at,()=>l(J)[qe],At=>fr(J,l(J)[qe]=At)),st("change",at,At=>se(qe,At.target.checked)),T(je,at)};Ee(ge,je=>{qe===6?je(Oe):je(He,!1)})}Me(()=>Ue(Te,l(De))),T(Ne,Qe)});var ke=z(Ce,2),ce=w(ke),ee=z(ce,2),N=w(ee);{var _e=Ne=>{var De=kM();T(Ne,De)},ve=Ne=>{var De=Wr("");T(Ne,De)};Ee(N,Ne=>{l(O)?Ne(_e):Ne(ve,!1)})}var Se=z(pe,2),me=w(Se);Me(()=>{ce.disabled=l(O),ee.disabled=!l(we)||l(O)}),v0(le,()=>l(we),Ne=>B(we,Ne)),st("change",le,q),st("click",ce,$),st("click",ee,I),st("click",me,$),T(Y,k)};Ee(R,Y=>{l(H)&&Y(he)})}var xe=z(R,2);{var Be=Y=>{var k=NM(),pe=w(k),ze=z(w(pe),2),ye=z(ze,2),le=w(ye),Ce=z(le,2),ke=w(Ce);{var ce=ve=>{var Se=DM();T(ve,Se)},ee=ve=>{var Se=Wr(" ");T(ve,Se)};Ee(ke,ve=>{l(K)?ve(ce):ve(ee,!1)})}var N=z(pe,2),_e=w(N);Me(ve=>{ze.disabled=l(K),le.disabled=l(K),Ce.disabled=ve},[()=>l(K)||!l(re).trim()],ot),br(ze,()=>l(re),ve=>B(re,ve)),st("click",le,x),st("click",Ce,E),st("click",_e,x),T(Y,k)};Ee(xe,Y=>{l(L)&&Y(Be)})}var Le=z(xe,2);Wd(Le,{get isOpen(){return l(g)},set isOpen(Y){B(g,Y)},get title(){return l(m)},set title(Y){B(m,Y)},get message(){return l(y)},set message(Y){B(y,Y)},$$legacy:!0}),T(n,j),Rr()}function az(n,e){return function(){return n.apply(e,arguments)}}const{toString:jM}=Object.prototype,{getPrototypeOf:W1}=Object,{iterator:Sg,toStringTag:Az}=Symbol,Eg=(n=>e=>{const t=jM.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),xi=n=>(n=n.toLowerCase(),e=>Eg(e)===n),Fg=n=>e=>typeof e===n,{isArray:nc}=Array,Uu=Fg("undefined");function RM(n){return n!==null&&!Uu(n)&&n.constructor!==null&&!Uu(n.constructor)&&gs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const lz=xi("ArrayBuffer");function qM(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&lz(n.buffer),e}const KM=Fg("string"),gs=Fg("function"),dz=Fg("number"),Ig=n=>n!==null&&typeof n=="object",$M=n=>n===!0||n===!1,Wf=n=>{if(Eg(n)!=="object")return!1;const e=W1(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Az in n)&&!(Sg in n)},VM=xi("Date"),GM=xi("File"),WM=xi("Blob"),XM=xi("FileList"),YM=n=>Ig(n)&&gs(n.pipe),JM=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||gs(n.append)&&((e=Eg(n))==="formdata"||e==="object"&&gs(n.toString)&&n.toString()==="[object FormData]"))},ZM=xi("URLSearchParams"),[e7,t7,r7,n7]=["ReadableStream","Request","Response","Headers"].map(xi),o7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),nc(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,n[a],a,n)}}function cz(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uz=n=>!Uu(n)&&n!==nl;function Sm(){const{caseless:n}=uz(this)&&this||{},e={},t=(r,o)=>{const s=n&&cz(e,o)||o;Wf(e[s])&&Wf(r)?e[s]=Sm(e[s],r):Wf(r)?e[s]=Sm({},r):nc(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Vu(arguments[r],t);return e}const s7=(n,e,t,{allOwnKeys:r}={})=>(Vu(e,(o,s)=>{t&&gs(o)?n[s]=az(o,t):n[s]=o},{allOwnKeys:r}),n),i7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),a7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},A7=(n,e,t,r)=>{let o,s,i;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)i=o[s],(!r||r(i,n,e))&&!a[i]&&(e[i]=n[i],a[i]=!0);n=t!==!1&&W1(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},l7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},d7=n=>{if(!n)return null;if(nc(n))return n;let e=n.length;if(!dz(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},c7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&W1(Uint8Array)),u7=(n,e)=>{const r=(n&&n[Sg]).call(n);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(n,s[0],s[1])}},h7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},f7=xi("HTMLFormElement"),p7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),yb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),g7=xi("RegExp"),hz=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Vu(t,(o,s)=>{let i;(i=e(o,s,n))!==!1&&(r[s]=i||o)}),Object.defineProperties(n,r)},v7=n=>{hz(n,(e,t)=>{if(gs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(gs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},m7=(n,e)=>{const t={},r=o=>{o.forEach(s=>{t[s]=!0})};return nc(n)?r(n):r(String(n).split(e)),t},w7=()=>{},y7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function b7(n){return!!(n&&gs(n.append)&&n[Az]==="FormData"&&n[Sg])}const _7=n=>{const e=new Array(10),t=(r,o)=>{if(Ig(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=nc(r)?[]:{};return Vu(r,(i,a)=>{const A=t(i,o+1);!Uu(A)&&(s[a]=A)}),e[o]=void 0,s}}return r};return t(n,0)},B7=xi("AsyncFunction"),x7=n=>n&&(Ig(n)||gs(n))&&gs(n.then)&&gs(n.catch),fz=((n,e)=>n?setImmediate:e?((t,r)=>(nl.addEventListener("message",({source:o,data:s})=>{o===nl&&s===t&&r.length&&r.shift()()},!1),o=>{r.push(o),nl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",gs(nl.postMessage)),z7=typeof queueMicrotask<"u"?queueMicrotask.bind(nl):typeof process<"u"&&process.nextTick||fz,C7=n=>n!=null&&gs(n[Sg]),wt={isArray:nc,isArrayBuffer:lz,isBuffer:RM,isFormData:JM,isArrayBufferView:qM,isString:KM,isNumber:dz,isBoolean:$M,isObject:Ig,isPlainObject:Wf,isReadableStream:e7,isRequest:t7,isResponse:r7,isHeaders:n7,isUndefined:Uu,isDate:VM,isFile:GM,isBlob:WM,isRegExp:g7,isFunction:gs,isStream:YM,isURLSearchParams:ZM,isTypedArray:c7,isFileList:XM,forEach:Vu,merge:Sm,extend:s7,trim:o7,stripBOM:i7,inherits:a7,toFlatObject:A7,kindOf:Eg,kindOfTest:xi,endsWith:l7,toArray:d7,forEachEntry:u7,matchAll:h7,isHTMLForm:f7,hasOwnProperty:yb,hasOwnProp:yb,reduceDescriptors:hz,freezeMethods:v7,toObjectSet:m7,toCamelCase:p7,noop:w7,toFiniteNumber:y7,findKey:cz,global:nl,isContextDefined:uz,isSpecCompliantForm:b7,toJSONObject:_7,isAsyncFn:B7,isThenable:x7,setImmediate:fz,asap:z7,isIterable:C7};function Er(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wt.inherits(Er,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const pz=Er.prototype,gz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{gz[n]={value:n}});Object.defineProperties(Er,gz);Object.defineProperty(pz,"isAxiosError",{value:!0});Er.from=(n,e,t,r,o,s)=>{const i=Object.create(pz);return wt.toFlatObject(n,i,function(A){return A!==Error.prototype},a=>a!=="isAxiosError"),Er.call(i,n.message,e,t,r,o),i.cause=n,i.name=n.name,s&&Object.assign(i,s),i};const S7=null;function Em(n){return wt.isPlainObject(n)||wt.isArray(n)}function vz(n){return wt.endsWith(n,"[]")?n.slice(0,-2):n}function bb(n,e,t){return n?n.concat(e).map(function(o,s){return o=vz(o),!t&&s?"["+o+"]":o}).join(t?".":""):e}function E7(n){return wt.isArray(n)&&!n.some(Em)}const F7=wt.toFlatObject(wt,{},null,function(e){return/^is[A-Z]/.test(e)});function Qg(n,e,t){if(!wt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=wt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!wt.isUndefined(y[m])});const r=t.metaTokens,o=t.visitor||c,s=t.dots,i=t.indexes,A=(t.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(e);if(!wt.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(wt.isDate(g))return g.toISOString();if(!A&&wt.isBlob(g))throw new Er("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(g)||wt.isTypedArray(g)?A&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,m,y){let b=g;if(g&&!y&&typeof g=="object"){if(wt.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(wt.isArray(g)&&E7(g)||(wt.isFileList(g)||wt.endsWith(m,"[]"))&&(b=wt.toArray(g)))return m=vz(m),b.forEach(function(F,P){!(wt.isUndefined(F)||F===null)&&e.append(i===!0?bb([m],P,s):i===null?m:m+"[]",d(F))}),!1}return Em(g)?!0:(e.append(bb(y,m,s),d(g)),!1)}const u=[],h=Object.assign(F7,{defaultVisitor:c,convertValue:d,isVisitable:Em});function f(g,m){if(!wt.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(g),wt.forEach(g,function(b,S){(!(wt.isUndefined(b)||b===null)&&o.call(e,b,wt.isString(S)?S.trim():S,m,h))===!0&&f(b,m?m.concat(S):[S])}),u.pop()}}if(!wt.isObject(n))throw new TypeError("data must be an object");return f(n),e}function _b(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function X1(n,e){this._pairs=[],n&&Qg(n,this,e)}const mz=X1.prototype;mz.append=function(e,t){this._pairs.push([e,t])};mz.toString=function(e){const t=e?function(r){return e.call(this,r,_b)}:_b;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function I7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wz(n,e,t){if(!e)return n;const r=t&&t.encode||I7;wt.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let s;if(o?s=o(e,t):s=wt.isURLSearchParams(e)?e.toString():new X1(e,t).toString(r),s){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Bb{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q7=typeof URLSearchParams<"u"?URLSearchParams:X1,U7=typeof FormData<"u"?FormData:null,T7=typeof Blob<"u"?Blob:null,L7={isBrowser:!0,classes:{URLSearchParams:Q7,FormData:U7,Blob:T7},protocols:["http","https","file","blob","url","data"]},Y1=typeof window<"u"&&typeof document<"u",Fm=typeof navigator=="object"&&navigator||void 0,P7=Y1&&(!Fm||["ReactNative","NativeScript","NS"].indexOf(Fm.product)<0),k7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O7=Y1&&window.location.href||"http://localhost",D7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Y1,hasStandardBrowserEnv:P7,hasStandardBrowserWebWorkerEnv:k7,navigator:Fm,origin:O7},Symbol.toStringTag,{value:"Module"})),Ho={...D7,...L7};function N7(n,e){return Qg(n,new Ho.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,s){return Ho.isNode&&wt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function M7(n){return wt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function H7(n){const e={},t=Object.keys(n);let r;const o=t.length;let s;for(r=0;r<o;r++)s=t[r],e[s]=n[s];return e}function bz(n){function e(t,r,o,s){let i=t[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),A=s>=t.length;return i=!i&&wt.isArray(o)?o.length:i,A?(wt.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!wt.isObject(o[i]))&&(o[i]=[]),e(t,r,o[i],s)&&wt.isArray(o[i])&&(o[i]=H7(o[i])),!a)}if(wt.isFormData(n)&&wt.isFunction(n.entries)){const t={};return wt.forEachEntry(n,(r,o)=>{e(M7(r),o,t,0)}),t}return null}function j7(n,e,t){if(wt.isString(n))try{return(e||JSON.parse)(n),wt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Gu={transitional:yz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,s=wt.isObject(e);if(s&&wt.isHTMLForm(e)&&(e=new FormData(e)),wt.isFormData(e))return o?JSON.stringify(bz(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return N7(e,this.formSerializer).toString();if((a=wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return Qg(a?{"files[]":e}:e,A&&new A,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),j7(e)):e}],transformResponse:[function(e){const t=this.transitional||Gu.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Er.from(a,Er.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ho.classes.FormData,Blob:Ho.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],n=>{Gu.headers[n]={}});const R7=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q7=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||e[t]&&R7[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},xb=Symbol("internals");function Rc(n){return n&&String(n).trim().toLowerCase()}function Xf(n){return n===!1||n==null?n:wt.isArray(n)?n.map(Xf):String(n)}function K7(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const $7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function r0(n,e,t,r,o){if(wt.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!wt.isString(e)){if(wt.isString(r))return e.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(e)}}function V7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function G7(n,e){const t=wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}let vs=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function s(a,A,d){const c=Rc(A);if(!c)throw new Error("header name must be a non-empty string");const u=wt.findKey(o,c);(!u||o[u]===void 0||d===!0||d===void 0&&o[u]!==!1)&&(o[u||A]=Xf(a))}const i=(a,A)=>wt.forEach(a,(d,c)=>s(d,c,A));if(wt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wt.isString(e)&&(e=e.trim())&&!$7(e))i(q7(e),t);else if(wt.isObject(e)&&wt.isIterable(e)){let a={},A,d;for(const c of e){if(!wt.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(A=a[d])?wt.isArray(A)?[...A,c[1]]:[A,c[1]]:c[1]}i(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Rc(e),e){const r=wt.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return K7(o);if(wt.isFunction(t))return t.call(this,o,r);if(wt.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rc(e),e){const r=wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||r0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function s(i){if(i=Rc(i),i){const a=wt.findKey(r,i);a&&(!t||r0(r,r[a],a,t))&&(delete r[a],o=!0)}}return wt.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const s=t[r];(!e||r0(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const t=this,r={};return wt.forEach(this,(o,s)=>{const i=wt.findKey(r,s);if(i){t[i]=Xf(o),delete t[s];return}const a=e?V7(s):String(s).trim();a!==s&&delete t[s],t[a]=Xf(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return wt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&wt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[xb]=this[xb]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=Rc(i);r[a]||(G7(o,i),r[a]=!0)}return wt.isArray(e)?e.forEach(s):s(e),this}};vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(vs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});wt.freezeMethods(vs);function n0(n,e){const t=this||Gu,r=e||t,o=vs.from(r.headers);let s=r.data;return wt.forEach(n,function(a){s=a.call(t,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function _z(n){return!!(n&&n.__CANCEL__)}function oc(n,e,t){Er.call(this,n??"canceled",Er.ERR_CANCELED,e,t),this.name="CanceledError"}wt.inherits(oc,Er,{__CANCEL__:!0});function Bz(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Er("Request failed with status code "+t.status,[Er.ERR_BAD_REQUEST,Er.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function W7(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function X7(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(A){const d=Date.now(),c=r[s];i||(i=d),t[o]=A,r[o]=d;let u=s,h=0;for(;u!==o;)h+=t[u++],u=u%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-i<e)return;const f=c&&d-c;return f?Math.round(h*1e3/f):void 0}}function Y7(n,e){let t=0,r=1e3/e,o,s;const i=(d,c=Date.now())=>{t=c,o=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const c=Date.now(),u=c-t;u>=r?i(d,c):(o=d,s||(s=setTimeout(()=>{s=null,i(o)},r-u)))},()=>o&&i(o)]}const kp=(n,e,t=3)=>{let r=0;const o=X7(50,250);return Y7(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,A=i-r,d=o(A),c=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:A,rate:d||void 0,estimated:d&&a&&c?(a-i)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},zb=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Cb=n=>(...e)=>wt.asap(()=>n(...e)),J7=Ho.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ho.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ho.origin),Ho.navigator&&/(msie|trident)/i.test(Ho.navigator.userAgent)):()=>!0,Z7=Ho.hasStandardBrowserEnv?{write(n,e,t,r,o,s){const i=[n+"="+encodeURIComponent(e)];wt.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),wt.isString(r)&&i.push("path="+r),wt.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function eH(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function tH(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xz(n,e,t){let r=!eH(e);return n&&(r||t==!1)?tH(n,e):e}const Sb=n=>n instanceof vs?{...n}:n;function fl(n,e){e=e||{};const t={};function r(d,c,u,h){return wt.isPlainObject(d)&&wt.isPlainObject(c)?wt.merge.call({caseless:h},d,c):wt.isPlainObject(c)?wt.merge({},c):wt.isArray(c)?c.slice():c}function o(d,c,u,h){if(wt.isUndefined(c)){if(!wt.isUndefined(d))return r(void 0,d,u,h)}else return r(d,c,u,h)}function s(d,c){if(!wt.isUndefined(c))return r(void 0,c)}function i(d,c){if(wt.isUndefined(c)){if(!wt.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,u){if(u in e)return r(d,c);if(u in n)return r(void 0,d)}const A={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,c,u)=>o(Sb(d),Sb(c),u,!0)};return wt.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=A[c]||o,h=u(n[c],e[c],c);wt.isUndefined(h)&&u!==a||(t[c]=h)}),t}const zz=n=>{const e=fl({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=vs.from(i),e.url=wz(xz(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let A;if(wt.isFormData(t)){if(Ho.hasStandardBrowserEnv||Ho.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((A=i.getContentType())!==!1){const[d,...c]=A?A.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...c].join("; "))}}if(Ho.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(e)),r||r!==!1&&J7(e.url))){const d=o&&s&&Z7.read(s);d&&i.set(o,d)}return e},rH=typeof XMLHttpRequest<"u",nH=rH&&function(n){return new Promise(function(t,r){const o=zz(n);let s=o.data;const i=vs.from(o.headers).normalize();let{responseType:a,onUploadProgress:A,onDownloadProgress:d}=o,c,u,h,f,g;function m(){f&&f(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function b(){if(!y)return;const F=vs.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),L={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:F,config:n,request:y};Bz(function(K){t(K),m()},function(K){r(K),m()},L),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(r(new Er("Request aborted",Er.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new Er("Network Error",Er.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let P=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const L=o.transitional||yz;o.timeoutErrorMessage&&(P=o.timeoutErrorMessage),r(new Er(P,L.clarifyTimeoutError?Er.ETIMEDOUT:Er.ECONNABORTED,n,y)),y=null},s===void 0&&i.setContentType(null),"setRequestHeader"in y&&wt.forEach(i.toJSON(),function(P,L){y.setRequestHeader(L,P)}),wt.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),a&&a!=="json"&&(y.responseType=o.responseType),d&&([h,g]=kp(d,!0),y.addEventListener("progress",h)),A&&y.upload&&([u,f]=kp(A),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(c=F=>{y&&(r(!F||F.type?new oc(null,n,y):F),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const S=W7(o.url);if(S&&Ho.protocols.indexOf(S)===-1){r(new Er("Unsupported protocol "+S+":",Er.ERR_BAD_REQUEST,n));return}y.send(s||null)})},oH=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const s=function(d){if(!o){o=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof Er?c:new oc(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,s(new Er(`timeout ${e} of ms exceeded`,Er.ETIMEDOUT))},e);const a=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:A}=r;return A.unsubscribe=()=>wt.asap(a),A}},sH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},iH=async function*(n,e){for await(const t of aH(n))yield*sH(t,e)},aH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Eb=(n,e,t,r)=>{const o=iH(n,e);let s=0,i,a=A=>{i||(i=!0,r&&r(A))};return new ReadableStream({async pull(A){try{const{done:d,value:c}=await o.next();if(d){a(),A.close();return}let u=c.byteLength;if(t){let h=s+=u;t(h)}A.enqueue(new Uint8Array(c))}catch(d){throw a(d),d}},cancel(A){return a(A),o.return()}},{highWaterMark:2})},Ug=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cz=Ug&&typeof ReadableStream=="function",AH=Ug&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Sz=(n,...e)=>{try{return!!n(...e)}catch{return!1}},lH=Cz&&Sz(()=>{let n=!1;const e=new Request(Ho.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Fb=64*1024,Im=Cz&&Sz(()=>wt.isReadableStream(new Response("").body)),Op={stream:Im&&(n=>n.body)};Ug&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Op[e]&&(Op[e]=wt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Er(`Response type '${e}' is not supported`,Er.ERR_NOT_SUPPORT,r)})})})(new Response);const dH=async n=>{if(n==null)return 0;if(wt.isBlob(n))return n.size;if(wt.isSpecCompliantForm(n))return(await new Request(Ho.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(n)||wt.isArrayBuffer(n))return n.byteLength;if(wt.isURLSearchParams(n)&&(n=n+""),wt.isString(n))return(await AH(n)).byteLength},cH=async(n,e)=>{const t=wt.toFiniteNumber(n.getContentLength());return t??dH(e)},uH=Ug&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:A,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=zz(n);d=d?(d+"").toLowerCase():"text";let f=oH([o,s&&s.toAbortSignal()],i),g;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(A&&lH&&t!=="get"&&t!=="head"&&(y=await cH(c,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),re;if(wt.isFormData(r)&&(re=L.headers.get("content-type"))&&c.setContentType(re),L.body){const[K,H]=zb(y,kp(Cb(A)));r=Eb(L.body,Fb,K,H)}}wt.isString(u)||(u=u?"include":"omit");const b="credentials"in Request.prototype;g=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:b?u:void 0});let S=await fetch(g);const F=Im&&(d==="stream"||d==="response");if(Im&&(a||F&&m)){const L={};["status","statusText","headers"].forEach(J=>{L[J]=S[J]});const re=wt.toFiniteNumber(S.headers.get("content-length")),[K,H]=a&&zb(re,kp(Cb(a),!0))||[];S=new Response(Eb(S.body,Fb,K,()=>{H&&H(),m&&m()}),L)}d=d||"text";let P=await Op[wt.findKey(Op,d)||"text"](S,n);return!F&&m&&m(),await new Promise((L,re)=>{Bz(L,re,{data:P,headers:vs.from(S.headers),status:S.status,statusText:S.statusText,config:n,request:g})})}catch(b){throw m&&m(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new Er("Network Error",Er.ERR_NETWORK,n,g),{cause:b.cause||b}):Er.from(b,b&&b.code,n,g)}}),Qm={http:S7,xhr:nH,fetch:uH};wt.forEach(Qm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ib=n=>`- ${n}`,hH=n=>wt.isFunction(n)||n===null||n===!1,Ez={getAdapter:n=>{n=wt.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let s=0;s<e;s++){t=n[s];let i;if(r=t,!hH(t)&&(r=Qm[(i=String(t)).toLowerCase()],r===void 0))throw new Er(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,A])=>`adapter ${a} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(Ib).join(`
`):" "+Ib(s[0]):"as no adapter specified";throw new Er("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Qm};function o0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new oc(null,n)}function Qb(n){return o0(n),n.headers=vs.from(n.headers),n.data=n0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Ez.getAdapter(n.adapter||Gu.adapter)(n).then(function(r){return o0(n),r.data=n0.call(n,n.transformResponse,r),r.headers=vs.from(r.headers),r},function(r){return _z(r)||(o0(n),r&&r.response&&(r.response.data=n0.call(n,n.transformResponse,r.response),r.response.headers=vs.from(r.response.headers))),Promise.reject(r)})}const Fz="1.9.0",Tg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Tg[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Ub={};Tg.transitional=function(e,t,r){function o(s,i){return"[Axios v"+Fz+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new Er(o(i," has been removed"+(t?" in "+t:"")),Er.ERR_DEPRECATED);return t&&!Ub[i]&&(Ub[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,a):!0}};Tg.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function fH(n,e,t){if(typeof n!="object")throw new Er("options must be an object",Er.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=n[s],A=a===void 0||i(a,s,n);if(A!==!0)throw new Er("option "+s+" must be "+A,Er.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Er("Unknown option "+s,Er.ERR_BAD_OPTION)}}const Yf={assertOptions:fH,validators:Tg},Ti=Yf.validators;let dl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Bb,response:new Bb}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=fl(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:s}=t;r!==void 0&&Yf.assertOptions(r,{silentJSONParsing:Ti.transitional(Ti.boolean),forcedJSONParsing:Ti.transitional(Ti.boolean),clarifyTimeoutError:Ti.transitional(Ti.boolean)},!1),o!=null&&(wt.isFunction(o)?t.paramsSerializer={serialize:o}:Yf.assertOptions(o,{encode:Ti.function,serialize:Ti.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Yf.assertOptions(t,{baseUrl:Ti.spelling("baseURL"),withXsrfToken:Ti.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&wt.merge(s.common,s[t.method]);s&&wt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=vs.concat(i,s);const a=[];let A=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(A=A&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let c,u=0,h;if(!A){const g=[Qb.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,c=Promise.resolve(t);u<h;)c=c.then(g[u++],g[u++]);return c}h=a.length;let f=t;for(u=0;u<h;){const g=a[u++],m=a[u++];try{f=g(f)}catch(y){m.call(this,y);break}}try{c=Qb.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=fl(this.defaults,e);const t=xz(e.baseURL,e.url,e.allowAbsoluteUrls);return wz(t,e.params,e.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(e){dl.prototype[e]=function(t,r){return this.request(fl(r||{},{method:e,url:t,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(e){function t(r){return function(s,i,a){return this.request(fl(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}dl.prototype[e]=t(),dl.prototype[e+"Form"]=t(!0)});let pH=class Iz{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new oc(s,i,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Iz(function(o){e=o}),cancel:e}}};function gH(n){return function(t){return n.apply(null,t)}}function vH(n){return wt.isObject(n)&&n.isAxiosError===!0}const Um={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Um).forEach(([n,e])=>{Um[e]=n});function Qz(n){const e=new dl(n),t=az(dl.prototype.request,e);return wt.extend(t,dl.prototype,e,{allOwnKeys:!0}),wt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Qz(fl(n,o))},t}const kn=Qz(Gu);kn.Axios=dl;kn.CanceledError=oc;kn.CancelToken=pH;kn.isCancel=_z;kn.VERSION=Fz;kn.toFormData=Qg;kn.AxiosError=Er;kn.Cancel=kn.CanceledError;kn.all=function(e){return Promise.all(e)};kn.spread=gH;kn.isAxiosError=vH;kn.mergeConfig=fl;kn.AxiosHeaders=vs;kn.formToJSON=n=>bz(wt.isHTMLForm(n)?new FormData(n):n);kn.getAdapter=Ez.getAdapter;kn.HttpStatusCode=Um;kn.default=kn;const{Axios:LK,AxiosError:PK,CanceledError:kK,isCancel:OK,CancelToken:DK,VERSION:NK,all:MK,Cancel:HK,isAxiosError:jK,spread:RK,toFormData:qK,AxiosHeaders:KK,HttpStatusCode:$K,formToJSON:VK,getAdapter:GK,mergeConfig:WK}=kn,Uz=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",mH=Uz+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wH="["+Uz+"]["+mH+"]*",yH=new RegExp("^"+wH+"$");function Tz(n,e){const t=[];let r=e.exec(n);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let i=0;i<s;i++)o.push(r[i]);t.push(o),r=e.exec(n)}return t}const J1=function(n){const e=yH.exec(n);return!(e===null||typeof e>"u")};function bH(n){return typeof n<"u"}const _H={allowBooleanAttributes:!1,unpairedTags:[]};function BH(n,e){e=Object.assign({},_H,e);const t=[];let r=!1,o=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=Lb(n,s),s.err)return s}else if(n[s]==="<"){let i=s;if(s++,n[s]==="!"){s=Pb(n,s);continue}else{let a=!1;n[s]==="/"&&(a=!0,s++);let A="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)A+=n[s];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),s--),!QH(A)){let u;return A.trim().length===0?u="Invalid space after '<'.":u="Tag '"+A+"' is an invalid name.",$n("InvalidTag",u,Go(n,s))}const d=CH(n,s);if(d===!1)return $n("InvalidAttr","Attributes for '"+A+"' have open quote.",Go(n,s));let c=d.value;if(s=d.index,c[c.length-1]==="/"){const u=s-c.length;c=c.substring(0,c.length-1);const h=kb(c,e);if(h===!0)r=!0;else return $n(h.err.code,h.err.msg,Go(n,u+h.err.line))}else if(a)if(d.tagClosed){if(c.trim().length>0)return $n("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",Go(n,i));if(t.length===0)return $n("InvalidTag","Closing tag '"+A+"' has not been opened.",Go(n,i));{const u=t.pop();if(A!==u.tagName){let h=Go(n,u.tagStartPos);return $n("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+A+"'.",Go(n,i))}t.length==0&&(o=!0)}}else return $n("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",Go(n,s));else{const u=kb(c,e);if(u!==!0)return $n(u.err.code,u.err.msg,Go(n,s-c.length+u.err.line));if(o===!0)return $n("InvalidXml","Multiple possible root nodes found.",Go(n,s));e.unpairedTags.indexOf(A)!==-1||t.push({tagName:A,tagStartPos:i}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=Pb(n,s);continue}else if(n[s+1]==="?"){if(s=Lb(n,++s),s.err)return s}else break;else if(n[s]==="&"){const u=FH(n,s);if(u==-1)return $n("InvalidChar","char '&' is not expected.",Go(n,s));s=u}else if(o===!0&&!Tb(n[s]))return $n("InvalidXml","Extra text at the end",Go(n,s));n[s]==="<"&&s--}}else{if(Tb(n[s]))continue;return $n("InvalidChar","char '"+n[s]+"' is not expected.",Go(n,s))}if(r){if(t.length==1)return $n("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Go(n,t[0].tagStartPos));if(t.length>0)return $n("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $n("InvalidXml","Start tag expected.",1);return!0}function Tb(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Lb(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return $n("InvalidXml","XML declaration allowed only at the start of the document.",Go(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function Pb(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const xH='"',zH="'";function CH(n,e){let t="",r="",o=!1;for(;e<n.length;e++){if(n[e]===xH||n[e]===zH)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){o=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:o}}const SH=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function kb(n,e){const t=Tz(n,SH),r={};for(let o=0;o<t.length;o++){if(t[o][1].length===0)return $n("InvalidAttr","Attribute '"+t[o][2]+"' has no space in starting.",qc(t[o]));if(t[o][3]!==void 0&&t[o][4]===void 0)return $n("InvalidAttr","Attribute '"+t[o][2]+"' is without value.",qc(t[o]));if(t[o][3]===void 0&&!e.allowBooleanAttributes)return $n("InvalidAttr","boolean attribute '"+t[o][2]+"' is not allowed.",qc(t[o]));const s=t[o][2];if(!IH(s))return $n("InvalidAttr","Attribute '"+s+"' is an invalid name.",qc(t[o]));if(!r.hasOwnProperty(s))r[s]=1;else return $n("InvalidAttr","Attribute '"+s+"' is repeated.",qc(t[o]))}return!0}function EH(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function FH(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,EH(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function $n(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function IH(n){return J1(n)}function QH(n){return J1(n)}function Go(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function qc(n){return n.startIndex+n[1].length}const UH={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},TH=function(n){return Object.assign({},UH,n)};let Dp;typeof Symbol!="function"?Dp="@@xmlMetadata":Dp=Symbol("XML Node Metadata");class XA{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][Dp]={startIndex:t})}static getMetaDataSymbol(){return Dp}}function LH(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,o=!1,s=!1,i="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(o&&YA(n,"!ENTITY",e)){e+=7;let a,A;[a,A,e]=PH(n,e+1),A.indexOf("&")===-1&&(t[a]={regx:RegExp(`&${a};`,"g"),val:A})}else if(o&&YA(n,"!ELEMENT",e)){e+=8;const{index:a}=OH(n,e+1);e=a}else if(o&&YA(n,"!ATTLIST",e))e+=8;else if(o&&YA(n,"!NOTATION",e)){e+=9;const{index:a}=kH(n,e+1);e=a}else if(YA(n,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,i=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?o=!0:i+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const uA=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function PH(n,e){e=uA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(Z1(t),e=uA(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=Jf(n,e,"entity"),e--,[t,r,e]}function kH(n,e){e=uA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;Z1(t),e=uA(n,e);const r=n.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=uA(n,e);let o=null,s=null;if(r==="PUBLIC")[e,o]=Jf(n,e,"publicIdentifier"),e=uA(n,e),(n[e]==='"'||n[e]==="'")&&([e,s]=Jf(n,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=Jf(n,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:o,systemIdentifier:s,index:--e}}function Jf(n,e,t){let r="";const o=n[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<n.length&&n[e]!==o;)r+=n[e],e++;if(n[e]!==o)throw new Error(`Unterminated ${t} value`);return e++,[e,r]}function OH(n,e){e=uA(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!Z1(t))throw new Error(`Invalid element name: "${t}"`);e=uA(n,e);let r="";if(n[e]==="E"&&YA(n,"MPTY",e))e+=6;else if(n[e]==="A"&&YA(n,"NY",e))e+=4;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)r+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:r.trim(),index:e}}function YA(n,e,t){for(let r=0;r<e.length;r++)if(e[r]!==n[t+r+1])return!1;return!0}function Z1(n){if(J1(n))return n;throw new Error(`Invalid entity name ${n}`)}const DH=/^[-+]?0x[a-fA-F0-9]+$/,NH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,MH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function HH(n,e={}){if(e=Object.assign({},MH,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&DH.test(t))return KH(t,16);if(t.search(/.+[eE].+/)!==-1)return RH(n,t,e);{const r=NH.exec(t);if(r){const o=r[1]||"",s=r[2];let i=qH(r[3]);const a=o?n[s.length+1]===".":n[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!a))return n;{const A=Number(t),d=String(A);if(A===0||A===-0)return A;if(d.search(/[eE]/)!==-1)return e.eNotation?A:n;if(t.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?A:n;let c=s?i:t;return s?c===d||o+c===d?A:n:c===d||c===o+d?A:n}}else return n}}const jH=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function RH(n,e,t){if(!t.eNotation)return n;const r=e.match(jH);if(r){let o=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",i=r[2],a=o?n[i.length+1]===s:n[i.length]===s;return i.length>1&&a?n:i.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):t.leadingZeros&&!a?(e=(r[1]||"")+r[3],Number(e)):n}else return n}function qH(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function KH(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function $H(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class VH{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=GH,this.parseXml=ZH,this.parseTextData=WH,this.resolveNameSpace=XH,this.buildAttributesMap=JH,this.isItStopNode=nj,this.replaceEntitiesValue=tj,this.readStopNodeData=sj,this.saveTextToParentTag=rj,this.addChild=ej,this.ignoreAttributesFn=$H(this.options.ignoreAttributes)}}function GH(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function WH(n,e,t,r,o,s,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const a=this.options.tagValueProcessor(e,n,t,o,s);return a==null?n:typeof a!=typeof n||a!==n?a:this.options.trimValues?Lm(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Lm(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function XH(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const YH=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function JH(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Tz(n,YH),o=r.length,s={};for(let i=0;i<o;i++){const a=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(a,e))continue;let A=r[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);const c=this.options.attributeValueProcessor(a,A,e);c==null?s[d]=A:typeof c!=typeof A||c!==A?s[d]=c:s[d]=Lm(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=s,i}return s}}const ZH=function(n){n=n.replace(/\r\n?/g,`
`);const e=new XA("!xml");let t=e,r="",o="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const a=ol(n,">",s,"Closing Tag is not closed.");let A=n.substring(s+2,a).trim();if(this.options.removeNSPrefix){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&(r=this.saveTextToParentTag(r,t,o));const d=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let c=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),t=this.tagsNodeStack.pop(),r="",s=a}else if(n[s+1]==="?"){let a=Tm(n,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const A=new XA(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(t,A,o,s)}s=a.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const a=ol(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const A=n.substring(s+4,a-2);r=this.saveTextToParentTag(r,t,o),t.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}s=a}else if(n.substr(s+1,2)==="!D"){const a=LH(n,s);this.docTypeEntities=a.entities,s=a.i}else if(n.substr(s+1,2)==="!["){const a=ol(n,"]]>",s,"CDATA is not closed.")-2,A=n.substring(s+9,a);r=this.saveTextToParentTag(r,t,o);let d=this.parseTextData(A,t.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):t.add(this.options.textNodeName,d),s=a+2}else{let a=Tm(n,s,this.options.removeNSPrefix),A=a.tagName;const d=a.rawTagName;let c=a.tagExp,u=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,o,!1));const f=t;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(t=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==e.tagname&&(o+=o?"."+A:A);const g=s;if(this.isItStopNode(this.options.stopNodes,o,A)){let m="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)s=a.closeIndex;else{const b=this.readStopNodeData(n,d,h+1);if(!b)throw new Error(`Unexpected end of ${d}`);s=b.i,m=b.tagContent}const y=new XA(A);A!==c&&u&&(y[":@"]=this.buildAttributesMap(c,o,A)),m&&(m=this.parseTextData(m,A,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),y.add(this.options.textNodeName,m),this.addChild(t,y,o,g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));const m=new XA(A);A!==c&&u&&(m[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,m,o,g),o=o.substr(0,o.lastIndexOf("."))}else{const m=new XA(A);this.tagsNodeStack.push(t),A!==c&&u&&(m[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,m,o,g),t=m}r="",s=h}}else r+=n[s];return e.child};function ej(n,e,t,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(e.tagname,t,e[":@"]);o===!1||(typeof o=="string"&&(e.tagname=o),n.addChild(e,r))}const tj=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function rj(n,e,t,r){return n&&(r===void 0&&(r=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function nj(n,e,t){const r="*."+t;for(const o in n){const s=n[o];if(r===s||e===s)return!0}return!1}function oj(n,e,t=">"){let r,o="";for(let s=e;s<n.length;s++){let i=n[s];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===t[0])if(t[1]){if(n[s+1]===t[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function ol(n,e,t,r){const o=n.indexOf(e,t);if(o===-1)throw new Error(r);return o+e.length-1}function Tm(n,e,t,r=">"){const o=oj(n,e+1,r);if(!o)return;let s=o.data;const i=o.index,a=s.search(/\s/);let A=s,d=!0;a!==-1&&(A=s.substring(0,a),s=s.substring(a+1).trimStart());const c=A;if(t){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1),d=A!==o.data.substr(u+1))}return{tagName:A,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:c}}function sj(n,e,t){const r=t;let o=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=ol(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(o--,o===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=ol(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=ol(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=ol(n,"]]>",t,"StopNode is not closed.")-2;else{const s=Tm(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,t=s.closeIndex)}}function Lm(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:HH(n,t)}else return bH(n)?n:""}const s0=XA.getMetaDataSymbol();function ij(n,e){return Lz(n,e)}function Lz(n,e,t){let r;const o={};for(let s=0;s<n.length;s++){const i=n[s],a=aj(i);let A="";if(t===void 0?A=a:A=t+"."+a,a===e.textNodeName)r===void 0?r=i[a]:r+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Lz(i[a],e,A);const c=lj(d,e);i[s0]!==void 0&&(d[s0]=i[s0]),i[":@"]?Aj(d,i[":@"],A,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,A,c)?o[a]=[d]:o[a]=d}}}return typeof r=="string"?r.length>0&&(o[e.textNodeName]=r):r!==void 0&&(o[e.textNodeName]=r),o}function aj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function Aj(n,e,t,r){if(e){const o=Object.keys(e),s=o.length;for(let i=0;i<s;i++){const a=o[i];r.isArray(a,t+"."+a,!0,!0)?n[a]=[e[a]]:n[a]=e[a]}}}function lj(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class dj{constructor(e){this.externalEntities={},this.options=TH(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=BH(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new VH(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(e);return this.options.preserveOrder||o===void 0?o:ij(o,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return XA.getMetaDataSymbol()}}class Pz{constructor(){this.partner_key="JUZFJThGJUQ0JUQ0JUNCUVBD",this.key="JUI5JTgyR3QlMTMtUSVBRiUxMyVEQUslQzclN0ZHJTBCVzQlOUUyLSUxMiUwRmMlODQlNUMlRTglQTYlRjUlMTVMJThBVTclRTIlOTElM0E=",this.parser=new dj({ignoreAttributes:!1,trimValues:!0})}async getProduct(e){var t,r;try{const o=await kn.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Search.php",{params:{partner_key:this.partner_key,key:this.key,goodsNo:e}});if(typeof o.data!="string")throw new Error("XML    .");const i=this.parser.parse(o.data).data.return.goods_data,a=((t=i.optionName)==null?void 0:t.split("^|^").map(d=>d))||[];console.log({godoProduct:i});const A=a.map((d,c)=>{var g;const u=((g=i.optionData)==null?void 0:g.map(m=>m[`optionValue${c+1}`]).filter(m=>m))||[],h=[...new Set(u)],f=h.map(m=>{var y,b;if(c===0){const F=(((b=(y=i.optionData)==null?void 0:y.find(L=>L[`optionValue${c+1}`]===m))==null?void 0:b.optionImage)||"").split("http").pop();return F?"http"+F:""}return""});return{title:d,values:h,images:f}});return{title:i.goodsNm,description:i.goodsDescription,handle:i.goodsNo,thumbnail:i.listImageData?i.listImageData["#text"]:"",goodsNo:i.goodsNo,goodsNm:i.goodsNm,goodsDescription:i.goodsDescription.replace(/\\r\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\/g,"")||"",status:"draft",productOptionValues:A,variants:((r=i.optionData)==null?void 0:r.map(d=>{const c=Array.from({length:5},(g,m)=>d[`optionValue${m+1}`]).filter(g=>g!==void 0&&g!==""),h=(d.optionImage||"").split("http").pop(),f=h?"http"+h:"";return{title:c.join(" / "),sku:d.optionCode||`${i.goodsNo}-${c.join("-")}`,thumbnail:f,barcode:"",inventory_quantity:parseInt(d.stockCnt||"0"),price:parseInt(i.goodsPrice+d.optionPrice||"0")}}))||[],mallType:"godo5",mallProductId:e,textOptionData:i.textOptionData}}catch(o){throw console.error("Godo5 API Error:",o),new Error("5    .")}}async getAddProduct(e){try{const t=await kn.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Add_Search.php",{params:{partner_key:this.partner_key,key:this.key,addGoodsNo:e}});if(typeof t.data!="string")throw new Error("XML    .");console.log({response:t});const r=this.parser.parse(t.data);console.log({result:r});const o=r.data.return.goods_data;return console.log({addGoodsData:o}),{addGoodsNo:o.addGoodsNo,goodsNm:o.goodsNm,goodsPrice:parseInt(o.goodsPrice||"0"),stockCnt:parseInt(o.stockCnt||"0"),listImageData:o.listImageData,soldOutFl:o.soldOutFl==="y"}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}parseOptionInfo(e){try{return JSON.parse(e).map(r=>({name:r[0]||"",value:r[1]||"",code:r[2]||"",stock:r[3]||"",price:parseInt(r[3]||"0")})).filter(r=>r.name&&r.value)}catch(t){return console.error("   :",t),[]}}getOptionCode(e){try{return JSON.parse(e)[0][2]||""}catch(t){return console.error("   :",t),""}}async getOrder(e){try{const t=await kn.get("https://openhub.godo.co.kr/godomall5/order/Order_Search.php",{params:{partner_key:this.partner_key,key:this.key,orderNo:e}});if(typeof t.data!="string")throw new Error("XML    .");const o=this.parser.parse(t.data).data.return.order_data;return console.log({orderData:o}),{orderNo:o.orderNo,orderDate:o.orderDate,orderStatus:o.orderStatus,orderName:o.orderInfoData.orderName,orderEmail:o.orderInfoData.orderEmail,orderPhone:o.orderInfoData.orderPhone,receiverName:o.orderInfoData.receiverName,receiverPhone:o.orderInfoData.receiverPhone,receiverAddress:`${o.orderInfoData.receiverZonecode} ${o.orderInfoData.receiverAddress} ${o.orderInfoData.receiverAddressSub}`,totalPrice:parseInt(o.settlePrice),orderGoodsData:Array.isArray(o.orderGoodsData)?o.orderGoodsData.map(s=>({goodsNo:s.goodsNo||"",goodsNm:s.goodsNm||"",goodsType:"orderGoods",goodsCnt:s.goodsCnt||0,goodsPrice:s.goodsPrice||0,listImageData:s.listImageData||"",exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[],addGoodsData:Array.isArray(o.addGoodsData)?o.addGoodsData.map(s=>({goodsNm:s.goodsNm,addGoodsNo:s.addGoodsNo,goodsType:"addGoods",goodsCnt:parseInt(String(s.goodsCnt)),goodsPrice:parseInt(String(s.goodsPrice)),listImageData:s.listImageData,exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[]}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}}new Pz;async function cj(n,e){const t=[],r=n.filter(o=>o.product&&o.product.mall_type==="godo5"&&o.product.mall_product_id);if(r.length===0)return console.log("5  ."),t;console.log(`${r.length} 5  .`);try{const o=document.createElement("form");o.method="POST",o.action="/order/cart_ps.php",o.style.display="none";const s=(i,a)=>{const A=document.createElement("input");A.type="hidden",A.name=i,A.value=a,o.appendChild(A)};s("mode","cartIn"),s("cartMode","d"),s("useBundleGoods","1"),s("scmNo","1");for(const i of r)try{const A=i.product.mall_product_id,d=i.idx;let c=1;i.isAdditionalCost?c=1:c=Array.isArray(i.items)?i.items.reduce((f,g)=>f+(g.quantity||0),0):1;let u="";e&&d!==void 0&&(i.isAdditionalCost?u=`${e}-add-${i.id}`:u=`${e}-${d}`);const h=await hj(i.product.mall_product_id);console.log(`   (${i.isAdditionalCost?"":""}):`,h),s("goodsNo[]",A),s("goodsCnt[]",c.toString()),s("optionFl[]","n"),s("displayOptionkey[]",""),s("goodsPriceSum[]","0"),s("addGoodsPriceSum[]","0"),u&&h.textOptionData.optionName==="odiz"&&s(`optionText[${d}][${h.textOptionData.sno}]`,u),t.push(A)}catch(a){console.error("    :",a)}return document.body.appendChild(o),console.log(o),o.submit(),console.log(`${r.length} 5     `),t}catch(o){return console.error("    :",o),t}}async function uj(n){var t,r,o,s;const e={success:!1,submittedOrders:[]};try{const i=((t=n[0])==null?void 0:t.estimate_id)||((s=(o=(r=n[0])==null?void 0:r.items)==null?void 0:o[0])==null?void 0:s.estimate_id),a=await cj(n,i);a.length>0&&(e.submittedOrders.push({mallType:"godo5",productIds:a}),e.success=!0)}catch(i){console.error("    :",i)}return e}async function hj(n){return await new Pz().getProduct(n)}var fj=te('<button class="odz-btn odz-btn-outline odz-ml-2"></button>'),pj=te('<div class="odz-text-xs odz-text-gray-500 odz-mt-2"> </div>'),gj=te('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm"> </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button> <!></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"><button class="odz-btn odz-btn-xs odz-btn-outline">1</button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline">6</button> <button class="odz-btn odz-btn-xs odz-btn-outline">1</button></div> <!></div></fieldset></div></div>'),vj=te('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm">  </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button></div></div> <div class="odz-text-xs odz-text-gray-500 odz-mt-2">*        .</div></div></fieldset></div></div>'),mj=te('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),wj=te('<div class="odz-alert odz-alert-error"><span> </span></div>'),yj=te('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8"><!></div>'),bj=te('<img loading="lazy" class="odz-w-24 odz-h-24 odz-rounded-xl odz-object-cover odz-ring-2 odz-ring-gray-100 odz-transition-transform odz-duration-300 group-hover:odz-scale-105"> <div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100" style="display: none;"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>',1),_j=te('<div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Bj=te('<div class="odz-absolute -odz-bottom-2 -odz-right-2 odz-bg-indigo-600 odz-text-white odz-text-xs odz-font-bold odz-px-2.5 odz-py-1 odz-rounded-full odz-shadow-lg odz-ring-2 odz-ring-white"> </div>'),xj=te('<p class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-truncate"> <!></p>'),zj=te('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-medium odz-border odz-border-indigo-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> </span>'),Cj=te('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-amber-50 odz-text-amber-700 odz-text-xs odz-font-medium odz-border odz-border-amber-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </span>'),Sj=Wp('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>'),Ej=Wp('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>',1),Fj=te('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> </button>'),Ij=te('<article class="odz-group odz-relative odz-flex odz-flex-col odz-overflow-hidden odz-bg-white odz-border odz-border-gray-200 odz-rounded-2xl odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all odz-duration-300 hover:odz-shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:odz-border-indigo-200"><div class="odz-absolute odz-top-4 odz-right-4 odz-z-10"><span><svg class="odz-w-2 odz-h-2 odz-fill-current svelte-1arj5vx" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" class="svelte-1arj5vx"></circle></svg> </span></div> <div class="odz-flex odz-flex-col lg:odz-flex-row"><div class="odz-flex odz-flex-1 odz-flex-col odz-p-6"><div class="odz-flex odz-items-start odz-gap-5 odz-mb-5"><div class="odz-relative odz-flex-shrink-0"><!> <!></div> <div class="odz-flex-1 odz-min-w-0 odz-pt-1"><h3 class="odz-text-xl odz-font-bold odz-text-slate-900 odz-mb-2 odz-line-clamp-2 odz-leading-tight"> </h3> <!> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mb-5"><!> <!></div> <div class="odz-grid odz-grid-cols-2 odz-gap-4 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-flex-col odz-gap-1"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-3 odz-p-5 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-xl odz-border odz-border-slate-200"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5 odz-col-span-2 sm:odz-col-span-1"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"> </span> <span class="odz-text-lg odz-font-bold odz-text-indigo-600"> </span></div></div></div> <div class="odz-flex odz-flex-col odz-gap-4 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-gray-50 odz-border-t lg:odz-border-t-0 lg:odz-border-l odz-border-gray-200 lg:odz-w-56 odz-justify-between"><div class="odz-flex odz-flex-col odz-gap-2"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"> </span> <button type="button"><svg class="odz-w-4 odz-h-4 svelte-1arj5vx" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" class="svelte-1arj5vx"></path></svg> </button></div> <div class="odz-flex odz-flex-col odz-gap-2.5"><button class="odz-btn odz-btn-primary odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <!></div></div></div></article>'),Qj=te('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),Uj=te('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),Tj=te('<div class="odz-fixed odz-inset-0 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50 odz-z-50"><div class="odz-bg-white odz-p-6 odz-rounded-lg odz-shadow-xl"><div class="odz-flex odz-flex-col odz-items-center"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-mb-4"></span> <p class="odz-text-lg odz-font-medium">  ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2">  </p></div></div></div>'),Lj=te('<div class="odz-w-full"><h2 class="odz-text-xl odz-font-bold odz-mb-4"> </h2> <!> <!> <!></div> <!> <dialog id="password_confirm_modal"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg odz-mb-4">  </h3> <p class="odz-text-sm odz-mb-4">     .</p> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text"></span></label> <input type="password" placeholder=" "> <!></div> <div class="odz-modal-action"><button class="odz-btn odz-btn-outline"></button> <button class="odz-btn odz-btn-primary"></button></div></div> <div class="odz-modal-backdrop"></div></dialog> <!>',1);function Pj(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(Ls,"$shopStore",t),s=()=>Xr(sl,"$customerStore",t);let i=ft(e,"openEstimateModal",8,()=>{}),a=Ie([]),A=Ie(!0),d=Ie(null),c,u=Ie(!1),h=Ie(null),f=Ie(""),g=Ie(""),m=Ie(!1),y=Ie(!1),b=Ie(""),S=Ie(""),F=Ie(!1),P=Ie(!1),L=Ie(""),re=null,K=Ie(""),H=Ie(!1),J=null,we=Ie(null);const O={thumbnail:null,productNames:[],itemCount:0,totalQuantity:0};let D={};En(async()=>{try{if(l(m)){B(A,!0);try{const Te=await gt.from("estimates").select("*").eq("shop_id",o().id).is("customer_id",null).eq("sess",o().sess).neq("status","temp").order("created_at",{ascending:!1});if(Te.error)throw Te.error;B(a,Te.data||[]),s().mallType&&s().mallType.trim()!==""&&B(a,l(a).filter(ge=>ge.mall_type===s().mallType)),await fe(l(a))}catch(Te){console.error("    :",Te),B(a,[])}B(A,!1)}else{const Te=new Date,ge=new Date(Te);ge.setMonth(ge.getMonth()-1),B(b,ie(ge)),B(S,ie(Te)),B(F,!0);const{getEstimatesWithDateFilter:Oe}=await us(async()=>{const{getEstimatesWithDateFilter:He}=await Promise.resolve().then(()=>uv);return{getEstimatesWithDateFilter:He}},void 0);B(a,await Oe(o().sess,o().customer_id,o().id,l(b),l(S))),await fe(l(a)),c=tB(o().sess,o().id,async He=>{var je,at,At,it,Re,Xe;He.eventType==="UPDATE"?((je=He.new)==null?void 0:je.status)!=="temp"?(B(a,l(a).map(Je=>Je.id===He.new.id?{...Je,...He.new}:Je)),await $((at=He.new)==null?void 0:at.id)):(B(a,l(a).filter(Je=>Je.id!==He.new.id)),q((At=He.new)==null?void 0:At.id)):He.eventType==="INSERT"?((it=He.new)==null?void 0:it.status)!=="temp"&&(B(a,[He.new,...l(a)]),await $((Re=He.new)==null?void 0:Re.id)):He.eventType==="DELETE"&&(B(a,l(a).filter(Je=>Je.id!==He.old.id)),q((Xe=He.old)==null?void 0:Xe.id))},o().customer_id)}}catch(Te){B(d,Te.message||"     ."),D={}}finally{B(A,!1)}}),Eo(()=>{c&&c.unsubscribe()});function Z(Te){if(!Te)return"";const ge=new Date(Te);return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}-${String(ge.getDate()).padStart(2,"0")}`}function ie(Te){const ge=Te.getFullYear(),Oe=String(Te.getMonth()+1).padStart(2,"0"),He=String(Te.getDate()).padStart(2,"0");return`${ge}-${Oe}-${He}`}function de(Te){const ge=new Date,Oe=ie(ge);let He=new Date(ge);switch(Te){case"1week":He.setDate(He.getDate()-7);break;case"1month":He.setMonth(He.getMonth()-1);break;case"6months":He.setMonth(He.getMonth()-6);break;case"1year":He.setFullYear(He.getFullYear()-1);break}B(b,ie(He)),B(S,Oe)}function ne(Te){const ge=new Set;let Oe=null,He=0,je=0;return(Te||[]).forEach((At,it)=>{var Je,ct;if(!At)return;je+=1,He+=At.quantity||0;const Re=(Je=At.product)==null?void 0:Je.title;Re&&ge.add(Re);const Xe=(ct=At.product)==null?void 0:ct.thumbnail;!Oe&&Xe&&(Oe=Xe)}),{thumbnail:Oe,productNames:Array.from(ge),itemCount:je,totalQuantity:He}}async function fe(Te){const ge=Te.map(Oe=>Oe.id).filter(Oe=>!!Oe);if(ge.length===0){D={};return}try{const{data:Oe,error:He}=await gt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).in("estimate_id",ge);if(He){console.error("    :",He);return}const je={};(Oe||[]).forEach(At=>{At!=null&&At.estimate_id&&(je[At.estimate_id]||(je[At.estimate_id]=[]),je[At.estimate_id].push(At))});const at={};ge.forEach(At=>{at[At]=ne(je[At])}),D=at}catch(Oe){console.error("     :",Oe)}}async function $(Te){if(Te)try{const{data:ge,error:Oe}=await gt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).eq("estimate_id",Te);if(Oe){console.error("[ERROR]      :",Oe),console.error("[ERROR] estimateId:",Te);return}const He=ne(ge);D={...D,[Te]:He}}catch(ge){console.error("[ERROR]       :",ge),console.error("[ERROR] estimateId:",Te)}}function q(Te){if(!Te)return;const{[Te]:ge,...Oe}=D;D=Oe}function se(Te){return Te&&D[Te]||O}function Ae(Te){switch(Te){case"pending":return"";case"progress":return"";case"completed":return"";case"temp":return"";case"canceled":return"";case"hold":return"";default:return""}}function x(Te){switch(Te){case"pending":return"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200";case"progress":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"canceled":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";case"hold":case"temp":return"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function E(Te){switch(Te){case"none":return" ";case"waiting":return" ";case"processing":return" ";case"confirming":return" ";case"completed":return" ";case"rejected":return" ";default:return"-"}}function I(Te){switch(Te){case"none":return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200";case"waiting":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"processing":return"odz-bg-indigo-100 odz-text-indigo-700 odz-border-indigo-200";case"confirming":return"odz-bg-purple-100 odz-text-purple-700 odz-border-purple-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"rejected":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function U(Te){B(h,Te),B(u,!0)}async function M(){if(!l(f)||!l(g)){B(d,"   .");return}B(A,!0),B(d,null),B(y,!0);try{B(a,await AB(o().id,l(f),l(g),null,s().mallType)),await fe(l(a)),l(a).length===0&&B(d,"    .")}catch(Te){B(d,Te.message||"    ."),B(a,[]),D={}}finally{B(A,!1)}}async function j(){if(!l(b)&&!l(S)){B(d,"   .");return}B(A,!0),B(d,null),B(F,!0);try{const{getEstimatesWithDateFilter:Te}=await us(async()=>{const{getEstimatesWithDateFilter:ge}=await Promise.resolve().then(()=>uv);return{getEstimatesWithDateFilter:ge}},void 0);B(a,await Te(o().sess,o().customer_id,o().id,l(b),l(S))),await fe(l(a)),l(a).length===0&&B(d,"   .")}catch(Te){B(d,Te.message||"    ."),B(a,[]),D={}}finally{B(A,!1)}}async function V(){B(d,null);const Te=new Date,ge=new Date(Te);ge.setMonth(ge.getMonth()-1),B(b,ie(ge)),B(S,ie(Te)),B(F,!0),B(A,!0);try{const{getEstimatesWithDateFilter:Oe}=await us(async()=>{const{getEstimatesWithDateFilter:He}=await Promise.resolve().then(()=>uv);return{getEstimatesWithDateFilter:He}},void 0);B(a,await Oe(o().sess,o().customer_id,o().id,l(b),l(S))),await fe(l(a))}catch(Oe){B(d,Oe.message||"     ."),D={}}finally{B(A,!1)}}function X(Te){l(m)&&Te.status==="pending"?(re=Te,B(L,""),B(K,""),B(P,!0)):window.location.href=`?mode=register&estimateId=${Te.id}`}async function R(){if(!re||!l(L).trim()){B(K," .");return}try{const{data:Te,error:ge}=await gt.from("estimates").select("id").eq("id",re.id).eq("password",l(L)).single();if(ge||!Te){B(K,"  .");return}B(P,!1),i()(!0,re)}catch(Te){B(K,"    ."),console.error("  :",Te)}}function he(){B(P,!1),B(L,""),B(K,""),re=null}async function xe(Te){if(!(!Te||!Te.id))try{B(H,!0),B(we,Te.id);const ge=await lB(Te.id);let Oe=[...ge];const He=await uB(Te.id);if((He==null?void 0:He.length)>0){const at=ge.length>0?Math.max(...ge.map(it=>it.idx||0)):0,At=He.map((it,Re)=>({...it,idx:at+Re+1,items:it.items.map(Xe=>({...Xe,idx:at+Re+1}))}));Oe=[...Oe,...At]}if(!Oe.some(at=>at.product&&at.product.mall_type==="godo5"&&at.product.mall_product_id)){alert("5    .");return}if(J=await uj(Oe),J.success){const at=J.submittedOrders.reduce((At,it)=>At+it.productIds.length,0);alert(` .  ${at}  .`)}else alert("  .   .")}catch(ge){console.error("    :",ge),alert("    : "+ge.message)}finally{B(H,!1)}}Jt(()=>o(),()=>{B(m,!o().customer_id)}),Zn(),Kr();var Be=Lj(),Le=pt(Be),Y=z(w(Le),2);{var k=Te=>{var ge=gj(),Oe=w(ge),He=w(Oe),je=z(w(He),2),at=w(je),At=w(at),it=z(w(At),2),Re=z(At,2),Xe=z(w(Re),2),Je=z(Re,2),ct=w(Je),_t=z(ct,2);{var lt=zt=>{var Et=fj();Me(()=>Et.disabled=l(A)),st("click",Et,V),T(zt,Et)};Ee(_t,zt=>{l(F)&&zt(lt)})}var et=z(at,2),Qt=w(et),vt=z(Qt,2),Nt=z(vt,2),mt=z(Nt,2),Lt=z(et,2);{var Pt=zt=>{var Et=pj(),xt=w(Et);Me(()=>Ue(xt,`*  ${l(b)||""} ~ ${l(S)||""}   `)),T(zt,Et)};Ee(Lt,zt=>{l(F)&&zt(Pt)})}Me(()=>{ct.disabled=l(A),Qt.disabled=l(A),vt.disabled=l(A),Nt.disabled=l(A),mt.disabled=l(A)}),br(it,()=>l(b),zt=>B(b,zt)),br(Xe,()=>l(S),zt=>B(S,zt)),st("click",ct,j),st("click",Qt,()=>de("1week")),st("click",vt,()=>de("1month")),st("click",Nt,()=>de("6months")),st("click",mt,()=>de("1year")),T(Te,ge)};Ee(Y,Te=>{l(m)||Te(k)})}var pe=z(Y,2);{var ze=Te=>{var ge=vj(),Oe=w(ge),He=w(Oe),je=z(w(He),2),at=w(je),At=w(at),it=z(w(At),2),Re=z(At,2),Xe=z(w(Re),2),Je=z(Re,2),ct=w(Je);br(it,()=>l(f),_t=>B(f,_t)),br(Xe,()=>l(g),_t=>B(g,_t)),st("click",ct,M),T(Te,ge)};Ee(pe,Te=>{l(m)&&Te(ze)})}var ye=z(pe,2);{var le=Te=>{var ge=mj();T(Te,ge)},Ce=Te=>{var ge=Dt(),Oe=pt(ge);{var He=at=>{var At=wj(),it=w(At),Re=w(it);Me(()=>Ue(Re,l(d))),T(at,At)},je=at=>{var At=Dt(),it=pt(At);{var Re=Je=>{var ct=yj(),_t=w(ct);{var lt=Qt=>{var vt=Wr("    .");T(Qt,vt)},et=Qt=>{var vt=Dt(),Nt=pt(vt);{var mt=Pt=>{var zt=Wr("   .    .");T(Pt,zt)},Lt=Pt=>{var zt=Wr("  .");T(Pt,zt)};Ee(Nt,Pt=>{l(m)?Pt(mt):Pt(Lt,!1)},!0)}T(Qt,vt)};Ee(_t,Qt=>{l(m)&&l(y)?Qt(lt):Qt(et,!1)})}T(Je,ct)},Xe=Je=>{var ct=Qj();Yt(ct,5,()=>l(a),_t=>_t.id??_t.created_at,(_t,lt)=>{var et=Ij();const Qt=ot(()=>se(l(lt).id)),vt=ot(()=>l(lt).design_confirm==="confirming"||l(lt).design_confirm==="completed");var Nt=w(et),mt=w(Nt),Lt=z(w(mt)),Pt=z(Nt,2),zt=w(Pt),Et=w(zt),xt=w(Et),Ut=w(xt);{var Kt=Tr=>{var Yr=bj(),hn=pt(Yr);Me(()=>{rr(hn,"src",l(Qt).thumbnail),rr(hn,"alt",(l(lt).name||"")+"  ")}),b_(hn),st("error",hn,_s=>{_s.currentTarget.style.display="none";const ei=_s.currentTarget.nextElementSibling;ei&&(ei.style.display="flex")}),T(Tr,Yr)},Ot=Tr=>{var Yr=_j();T(Tr,Yr)};Ee(Ut,Tr=>{l(Qt).thumbnail?Tr(Kt):Tr(Ot,!1)})}var Mt=z(Ut,2);{var Gt=Tr=>{var Yr=Bj(),hn=w(Yr);Me(()=>Ue(hn,`${l(Qt).totalQuantity??""}`)),T(Tr,Yr)};Ee(Mt,Tr=>{l(Qt).totalQuantity>0&&Tr(Gt)})}var nr=z(xt,2),sr=w(nr),dr=w(sr),Ht=z(sr,2);{var wr=Tr=>{var Yr=xj(),hn=w(Yr),_s=z(hn);{var ei=Os=>{var Ei=Wr();Me(()=>Ue(Ei,` ${l(Qt).productNames.length-1}`)),T(Os,Ei)};Ee(_s,Os=>{l(Qt).productNames.length>1&&Os(ei)})}Me(()=>Ue(hn,l(Qt).productNames[0])),T(Tr,Yr)};Ee(Ht,Tr=>{l(Qt).productNames.length>0&&Tr(wr)})}var Pr=z(Ht,2),$r=z(w(Pr)),Ir=z(Et,2),hr=w(Ir);{var Or=Tr=>{var Yr=zj(),hn=z(w(Yr));Me(()=>Ue(hn,` ${l(lt).estimate_no??""}`)),T(Tr,Yr)};Ee(hr,Tr=>{l(lt).estimate_no&&Tr(Or)})}var xr=z(hr,2);{var ir=Tr=>{var Yr=Cj(),hn=z(w(Yr));Me(_s=>Ue(hn,`  ${_s??""}`),[()=>Z(l(lt).pref_delivery_date)],ot),T(Tr,Yr)};Ee(xr,Tr=>{l(lt).pref_delivery_date&&Tr(ir)})}var vr=z(Ir,2),kr=w(vr),un=z(w(kr),2),bn=w(un),zr=z(kr,2),lr=z(w(zr),2),Fn=w(lr),Fo=z(vr,2),so=w(Fo),yo=z(w(so),2),ns=w(yo),On=z(so,2),tr=z(w(On),2),Qr=w(tr),on=z(On,2),Ro=z(w(on),2),bs=w(Ro),Io=z(on,2),bo=z(w(Io),2),os=w(bo),Ua=z(zt,2),zi=w(Ua),Ci=z(w(zi),2),EA=z(w(Ci)),or=z(zi,2),sn=w(or),Qo=w(sn),ks=w(Qo);{var Si=Tr=>{var Yr=Sj();T(Tr,Yr)},Un=Tr=>{var Yr=Ej();T(Tr,Yr)};Ee(ks,Tr=>{l(lt).status==="pending"?Tr(Si):Tr(Un,!1)})}var Zs=z(Qo),Ta=z(sn,2);{var yr=Tr=>{var Yr=Fj(),hn=z(w(Yr));Me(()=>{Yr.disabled=l(H)||l(we)===l(lt).id,Ue(hn,` ${(l(H)&&l(we)===l(lt).id?"...":"")??""}`)}),st("click",Yr,()=>xe(l(lt))),T(Tr,Yr)};Ee(Ta,Tr=>{l(lt).status==="completed"&&Tr(yr)})}Me((Tr,Yr,hn,_s,ei,Os,Ei,sc,ic)=>{Fr(mt,`${Tr??""} svelte-1arj5vx`),Ue(Lt,` ${Yr??""}`),Ue(dr,l(lt).name||"  "),Ue($r,` ${hn??""}`),Ue(bn,l(lt).organization_name||"-"),Ue(Fn,l(lt).order_name||"-"),Ue(ns,_s),Ue(Qr,ei),Ue(bs,Os),Ue(os,Ei),Fr(Ci,`${sc??""} svelte-1arj5vx`),Ci.disabled=!l(vt),Ue(EA,` ${ic??""}`),Ue(Zs,` ${(l(lt).status==="pending"?"":"")??""}`)},[()=>`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-backdrop-blur-sm ${x(l(lt).status)}`,()=>Ae(l(lt).status),()=>Z(l(lt).created_at),()=>l(lt).product_amount!==null&&l(lt).product_amount!==void 0?`${gr(l(lt).product_amount)}`:"-",()=>l(lt).print_amount!==null&&l(lt).print_amount!==void 0?`${gr(l(lt).print_amount)}`:"-",()=>l(lt).addon_amount!==null&&l(lt).addon_amount!==void 0?`${gr(l(lt).addon_amount)}`:"-",()=>l(lt).total_amount!==null&&l(lt).total_amount!==void 0?`${gr(l(lt).total_amount)}`:"-",()=>`odz-inline-flex odz-items-center odz-justify-center odz-gap-2 odz-px-4 odz-py-2.5 odz-rounded-lg odz-text-sm odz-font-semibold odz-transition-all odz-duration-200 ${I(l(lt).design_confirm)} ${l(vt)?"hover:odz-shadow-md hover:odz-scale-105":"odz-opacity-60 odz-cursor-not-allowed"}`,()=>E(l(lt).design_confirm)],ot),st("click",Ci,()=>{l(vt)&&U(l(lt).id)}),st("click",sn,()=>X(l(lt))),T(_t,et)}),T(Je,ct)};Ee(it,Je=>{l(a).length===0?Je(Re):Je(Xe,!1)},!0)}T(at,At)};Ee(Oe,at=>{l(d)?at(He):at(je,!1)},!0)}T(Te,ge)};Ee(ye,Te=>{l(A)?Te(le):Te(Ce,!1)})}var ke=z(Le,2);{var ce=Te=>{var ge=Dt(),Oe=pt(ge);I4(Oe,()=>l(h),He=>{HM(He,{get estimateId(){return l(h)},get isOpen(){return l(u)},set isOpen(je){B(u,je)},$$legacy:!0})}),T(Te,ge)};Ee(ke,Te=>{l(h)&&Te(ce)})}var ee=z(ke,2),N=w(ee),_e=z(w(N),4),ve=z(w(_e),2),Se=z(ve,2);{var me=Te=>{var ge=Uj(),Oe=w(ge),He=w(Oe);Me(()=>Ue(He,l(K))),T(Te,ge)};Ee(Se,Te=>{l(K)&&Te(me)})}var Ne=z(_e,2),De=w(Ne),qe=z(De,2),Qe=z(N,2),rt=z(ee,2);{var tt=Te=>{var ge=Tj();T(Te,ge)};Ee(rt,Te=>{l(H)&&Te(tt)})}Me(()=>{Fr(ee,`odz-modal ${(l(P)?"odz-modal-open":"")??""}`),Fr(ve,`odz-input odz-input-bordered odz-w-full ${(l(K)?"odz-input-error":"")??""}`)}),br(ve,()=>l(L),Te=>B(L,Te)),st("keydown",ve,Te=>{Te.key==="Enter"&&R()}),st("click",De,he),st("click",qe,R),st("click",Qe,he),T(n,Be),Rr(),r()}var kj=te('<div class="odz-text-sm odz-text-gray-600 odz-leading-relaxed"> </div>'),Oj=te('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-justify-between odz-items-start odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-text-base odz-font-semibold odz-text-gray-800 odz-mb-1"> </div> <!></div> <div class="odz-text-lg odz-font-bold odz-text-gray-900 odz-ml-4"> </div></div></div>'),Dj=te('<div class="odz-bg-white odz-border odz-border-gray-300 odz-rounded odz-px-2 odz-py-1 odz-text-xs odz-text-gray-700"> </div>'),Nj=te('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-px-4 odz-py-3 odz-flex-shrink-0"><div class="odz-text-sm odz-font-semibold odz-text-gray-800 odz-mb-2"> </div> <div class="odz-flex odz-flex-wrap odz-gap-1"></div></div>'),Mj=te('<div class="odz-text-xs odz-text-blue-600 odz-mt-1"><!></div>'),Hj=te('<div class="odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-md odz-p-3 odz-mb-3"><div class="odz-flex odz-justify-between odz-items-center odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="odz-font-medium odz-text-blue-700">  </span></div> <div class="odz-text-right"><div class="odz-text-xs odz-text-gray-500 odz-line-through"> </div> <div class="odz-text-sm odz-font-semibold odz-text-red-600"> </div></div></div> <!></div>'),jj=te('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-3 odz-mb-4"></div> <div class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-text-right"> </div> <!> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),Rj=te('<span class="odz-w-6 odz-h-6 odz-rounded-full odz-border-2 odz-border-white odz-shadow-sm"></span>'),qj=te('<div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-gap-1"></div> <div class="odz-text-sm odz-text-gray-800"> </div></div></div>'),Kj=te('<div class="odz-bg-white odz-border odz-border-gray-100 odz-rounded-xl odz-p-5 odz-shadow-sm odz-hover:shadow-md odz-transition-all odz-duration-200"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-blue-100 odz-text-blue-600 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-text-sm odz-font-semibold"></div> <span class="odz-font-medium odz-text-gray-900"> </span></div> <div class="odz-text-right"><div class="odz-text-lg odz-font-bold odz-text-gray-900"> </div></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"><!> <div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-text-sm odz-text-gray-800 odz-leading-relaxed"> </div></div></div></div>'),$j=te('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-6"> </h3> <div class="odz-space-y-4"></div></div>'),Vj=te('<span class="odz-text-gray-600"> </span>'),Gj=te('<div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-font-medium odz-text-gray-800 odz-mb-1"> <!></div> <div class="odz-text-sm odz-text-gray-600"> </div></div> <div class="odz-font-semibold odz-text-gray-900"> </div></div>'),Wj=te('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-col odz-gap-3 odz-mb-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),Xj=te("<!> <!> <!>",1),Yj=te('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-p-4 odz-animate-in odz-fade-in odz-duration-300"><div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-60 odz-backdrop-blur-sm odz-cursor-pointer"></div> <div class="odz-relative odz-bg-white odz-rounded-xl odz-shadow-2xl odz-max-w-2xl odz-max-h-[90vh] odz-w-full odz-overflow-hidden odz-flex odz-flex-col odz-animate-in odz-zoom-in-95 odz-slide-in-from-bottom-4 odz-duration-300 odz-cursor-default"><div class="odz-flex odz-justify-between odz-items-center odz-p-6 odz-border-b odz-border-gray-200 odz-bg-gradient-to-r odz-from-slate-50 odz-to-slate-100 odz-sticky odz-top-0 odz-z-10"><h2 class="odz-text-2xl odz-font-bold odz-text-gray-900">  </h2> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-hover:odz-bg-gray-100 odz-transition-all odz-duration-200"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-6"><!> <div class="odz-border-t-2 odz-border-gray-200 odz-pt-6 odz-mt-6"><div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-900 odz-rounded-lg odz-p-4"><span class="odz-text-lg odz-font-semibold odz-text-white"> </span> <span class="odz-text-2xl odz-font-bold odz-text-white"> </span></div></div></div></div></div>');function Jj(n,e){jr(e,!1);let t=ft(e,"estimateDetails",8),r=ft(e,"productAmount",8);ft(e,"printAmount",8);let o=ft(e,"addonAmount",8),s=ft(e,"totalAmount",8),i=ft(e,"printInfoList",8),a=ft(e,"addonItems",8),A=ft(e,"addCostItems",8,null),d=ft(e,"isAddCost",8,!1),c=ft(e,"addonProductsMap",24,()=>({}));const u=Xp();let h=Ie([]);function f(){if(!t()||!t().items||t().items.length===0)return;const fe=new Map;t().items.forEach(q=>{const Ae=(q.variant||{}).title||q.variant_title||" ",x=Ae.match(/(.+)\s*-\s*(.+)/),E=x?x[1]:Ae,I=x?x[2]:"";fe.has(E)||fe.set(E,{name:E,sizes:new Map});const U=fe.get(E);U.sizes.has(I)||U.sizes.set(I,{size:I,quantity:0});const M=U.sizes.get(I);M.quantity+=q.quantity||1}),B(h,Array.from(fe.values()).map(q=>({name:q.name,sizes:Array.from(q.sizes.values())}))),B(h,l(h).filter(q=>q.name!==""));const $=new Set;l(h).forEach(q=>{q.sizes.forEach(se=>{$.add(se.size)})}),Array.from($)}function g(fe){return`background-color: ${fe.hex};`}function m(fe,$){const q=[];if(fe&&q.push(`: ${fe}`),$&&$.length>0){const se=$.map(Ae=>Ae.name).join(" > ");q.push(`: ${se}`)}return q.length>0?q.join(" | "):" "}function y(){return A()&&A().amount||0}function b(){u("close")}Jt(()=>zn(t()),()=>{t()&&f()}),Zn(),Kr();var S=Yj(),F=w(S),P=z(F,2),L=w(P),re=z(w(L),2),K=z(L,2),H=w(K);{var J=fe=>{var $=Oj(),q=z(w($),2),se=w(q),Ae=w(se),x=w(Ae),E=z(Ae,2);{var I=j=>{var V=kj(),X=w(V);Me(()=>Ue(X,A().description)),T(j,V)};Ee(E,j=>{A().description&&j(I)})}var U=z(se,2),M=w(U);Me(j=>{Ue(x,A().name),Ue(M,`${j??""}`)},[()=>A().amount.toLocaleString()],ot),T(fe,$)},we=fe=>{var $=Dt(),q=pt($);{var se=Ae=>{var x=Xj(),E=pt(x);{var I=X=>{var R=jj(),he=z(w(R),2);Yt(he,5,()=>l(h),Ar,(ye,le)=>{var Ce=Nj(),ke=w(Ce),ce=w(ke),ee=z(ke,2);Yt(ee,5,()=>l(le).sizes,Ar,(N,_e)=>{var ve=Dj(),Se=w(ve);Me(()=>Ue(Se,`${l(_e).size??""}: ${l(_e).quantity??""}`)),T(N,ve)}),Me(()=>Ue(ce,l(le).name)),T(ye,Ce)});var xe=z(he,2),Be=w(xe),Le=z(xe,2);{var Y=ye=>{var le=Hj();const Ce=ot(()=>t().items.reduce((De,qe)=>De+(qe.discount_amount||0)*(qe.quantity||0),0)),ke=ot(()=>t().items.find(De=>De.discount_amount&&De.discount_amount>0));var ce=w(le),ee=z(w(ce),2),N=w(ee),_e=w(N),ve=z(N,2),Se=w(ve),me=z(ce,2);{var Ne=De=>{var qe=Mj(),Qe=w(qe);{var rt=Te=>{var ge=Wr();Me(Oe=>Ue(ge,`${l(ke).discount_value??""}%  ( ${Oe??""})`),[()=>(l(ke).discount_amount||0).toLocaleString()],ot),T(Te,ge)},tt=Te=>{var ge=Wr();Me(Oe=>Ue(ge,` ${Oe??""} `),[()=>l(ke).discount_value.toLocaleString()],ot),T(Te,ge)};Ee(Qe,Te=>{l(ke).discount_type==="percentage"?Te(rt):Te(tt,!1)})}T(De,qe)};Ee(me,De=>{l(ke)&&l(ke).discount_type&&l(ke).discount_value&&De(Ne)})}Me((De,qe)=>{Ue(_e,`${De??""}`),Ue(Se,`-${qe??""}`)},[()=>t().items.reduce((De,qe)=>De+(qe.original_price||qe.price||0)*(qe.quantity||0),0).toLocaleString(),()=>l(Ce).toLocaleString()],ot),T(ye,le)};Ee(Le,ye=>{t().items&&t().items.some(le=>le.discount_amount&&le.discount_amount>0)&&ye(Y)})}var k=z(Le,2),pe=z(w(k),2),ze=w(pe);Me((ye,le)=>{Ue(Be,` : ${ye??""}`),Ue(ze,`${le??""}`)},[()=>l(h).reduce((ye,le)=>ye+le.sizes.reduce((Ce,ke)=>Ce+ke.quantity,0),0),()=>r().toLocaleString()],ot),T(X,R)};Ee(E,X=>{l(h).length>0&&X(I)})}var U=z(E,2);{var M=X=>{var R=$j(),he=z(w(R),2);Yt(he,5,i,Ar,(xe,Be,Le)=>{var Y=Kj(),k=w(Y),pe=w(k),ze=w(pe);ze.textContent=Le+1;var ye=z(pe,2),le=w(ye),Ce=w(le),ke=z(k,2),ce=w(ke);{var ee=Se=>{var me=qj(),Ne=z(w(me),2),De=w(Ne);Yt(De,5,()=>l(Be).colorInfo,Ar,(rt,tt)=>{var Te=Rj();Me(ge=>{rr(Te,"style",ge),rr(Te,"title",l(tt).name)},[()=>g(l(tt))],ot),T(rt,Te)});var qe=z(De,2),Qe=w(qe);Me(rt=>Ue(Qe,rt),[()=>l(Be).colorInfo.map(rt=>rt.name).join(", ")],ot),T(Se,me)};Ee(ce,Se=>{l(Be).colorInfo&&l(Be).colorInfo.length>0&&Se(ee)})}var N=z(ce,2),_e=z(w(N),2),ve=w(_e);Me((Se,me)=>{Ue(Ce,`${Se??""}`),Ue(ve,me)},[()=>l(Be).price.toLocaleString(),()=>m(l(Be).printAreaTitle,l(Be).parentTemplates)],ot),T(xe,Y)}),T(X,R)};Ee(U,X=>{i().length>0&&X(M)})}var j=z(U,2);{var V=X=>{var R=Wj(),he=z(w(R),2);Yt(he,5,a,Ar,(Y,k)=>{var pe=Gj();const ze=ot(()=>`${l(k).selected_product_id}_${l(k).selected_variant_id}`),ye=ot(()=>c()[l(ze)]);var le=w(pe),Ce=w(le),ke=w(Ce),ce=z(ke);{var ee=me=>{var Ne=Vj(),De=w(Ne);Me(()=>Ue(De,`- ${l(ye).variantTitle??""}`)),T(me,Ne)};Ee(ce,me=>{var Ne;(Ne=l(ye))!=null&&Ne.variantTitle&&me(ee)})}var N=z(Ce,2),_e=w(N),ve=z(le,2),Se=w(ve);Me(me=>{var Ne;Ue(ke,`${((Ne=l(ye))==null?void 0:Ne.productTitle)||""} `),Ue(_e,`${l(k).quantity??""}`),Ue(Se,`${me??""}`)},[()=>(l(k).price*l(k).quantity).toLocaleString()],ot),T(Y,pe)});var xe=z(he,2),Be=z(w(xe),2),Le=w(Be);Me(Y=>Ue(Le,`${Y??""}`),[()=>o().toLocaleString()],ot),T(X,R)};Ee(j,X=>{a().length>0&&X(V)})}T(Ae,x)};Ee(q,Ae=>{t()&&t().estimate&&Ae(se)},!0)}T(fe,$)};Ee(H,fe=>{d()&&A()?fe(J):fe(we,!1)})}var O=z(H,2),D=w(O),Z=w(D),ie=w(Z),de=z(Z,2),ne=w(de);Me(fe=>{Ue(ie,d()?" ":" "),Ue(ne,`${fe??""}`)},[()=>d()?y().toLocaleString():s().toLocaleString()],ot),st("click",F,b),st("click",re,b),T(n,S),Rr()}var Zj=te('<p class="odiz-loading"> ...</p>'),eR=te('<p class="odiz-error"> </p>'),tR=te('<div class="odiz-addcost-description"> </div>'),rR=te('<div class="odiz-addcost-detailed"><div class="odiz-addcost-header"><h3 class="odiz-addcost-title"> </h3></div> <div class="odiz-addcost-items"><div class="odiz-addcost-item"><div class="odiz-addcost-info"><div class="odiz-addcost-name"> </div> <!></div> <div class="odiz-addcost-amount"> </div></div></div> <div class="odiz-divider"></div> <div class="odiz-total-price"><div class="odiz-price-label"> </div> <div class="odiz-price-value odiz-total-value"> </div></div></div>'),nR=te('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"><!></span></div>'),oR=te('<span class="odz-color-dot-compact"></span>'),sR=te('<span class="odz-color-count"> </span>'),iR=te('<span class="odz-color-dots-compact"><!> <!></span>'),aR=te('<span class="odz-print-area-compact"> </span>'),AR=te("<!> <!>",1),lR=te('<span class="odz-print-count"> </span>'),dR=te('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value odz-print-inline"><!> <!></span></div>'),cR=te('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"> </span></div>'),uR=te('<div class="odiz-estimate-detailed"><div class="odz-estimate-summary"><div class="odz-summary-content"><!> <!> <!></div> <div class="odz-summary-actions"><button class="odz-detail-btn" type="button">  </button></div></div> <div class="odz-price-summary"><div class="odz-price-label"></div> <div class="odz-price-value"><span class="odz-text-lg odz-font-bold"> </span></div></div></div>'),hR=te('<p class="odiz-empty">  .</p>'),fR=te('<div class="odiz-estimate-preview"><!></div> <!>',1);function pR(n,e){jr(e,!1);let t=ft(e,"uuid",8),r=ft(e,"idx",8);ft(e,"appType",8);let o=ft(e,"isAddCost",8),s=Ie(!0),i=Ie(null),a=Ie(null),A=Ie(0),d=Ie(0),c=Ie(0),u=Ie(0),h=Ie([]),f=Ie([]),g=Ie(null),m=Ie({}),y=Ie([]),b=Ie(!1);async function S(){var ne,fe;B(m,{});for(const $ of l(f)){const q=`${$.selected_product_id}_${$.selected_variant_id}`;if(!l(m)[q])try{if($.selected_variant_id){const se=await mA($.selected_variant_id);if(se){const{data:Ae}=await gt.from("products").select("id, title").eq("id",$.selected_product_id).single();fr(m,l(m)[q]={productTitle:(Ae==null?void 0:Ae.title)||"",variantTitle:se.title||"",price:((fe=(ne=se.prices)==null?void 0:ne[0])==null?void 0:fe.amount)||0})}}else{const{data:se}=await gt.from("products").select("id, title").eq("id",$.selected_product_id).single();fr(m,l(m)[q]={productTitle:(se==null?void 0:se.title)||"",variantTitle:null,price:$.price||0})}}catch{fr(m,l(m)[q]={productTitle:"",variantTitle:null,price:$.price||0})}}}async function F(){try{B(s,!0),B(i,null),B(a,await A1(t()));const ne=await Zp(t());if(o()&&(B(g,await dB(r())),console.log("addCostItems",l(g))),l(a)){fr(a,l(a).items=l(a).items.filter($=>{var q;return((q=$.idx)==null?void 0:q.toString())===r()}));const fe=l(a).prints.filter($=>{var q;return((q=$.idx)==null?void 0:q.toString())===r()});fr(a,l(a).prints=l(a).prints.filter($=>{var q;return((q=$.idx)==null?void 0:q.toString())===r()})),B(f,ne.filter($=>{var q;return((q=$.idx)==null?void 0:q.toString())===r()})),await S(),L(),P(),B(h,[]);for(const $ of fe){const q={id:$.id||0,price:$.price||0,templateId:$.template_id,objectId:$.object_id,colorInfo:[]};try{if($.template_id&&(console.log("template_id:",$.template_id),q.parentTemplates=await Hu($.template_id),console.log("template_id   :",q.parentTemplates)),$.object_id){console.log("object_id:",$.object_id);const se=await f1($.object_id);se&&(q.printAreaTitle=se.title,console.log(" :",se.title))}}catch(se){console.error("    :",se)}if($.colors)try{let se=null;if(typeof $.colors=="string"?se=JSON.parse($.colors):se=$.colors,Array.isArray(se)){let Ae=[];if(se.length>0&&Array.isArray(se[0]))for(const x of se)Array.isArray(x)&&(Ae=Ae.concat(x));else Ae=se;Ae.length>0&&(typeof Ae[0]=="object"&&Ae[0]!==null?q.colorInfo=Ae:q.colorInfo=Ae.map(x=>({hex:x,name:x})))}console.log("  :",q.colorInfo)}catch(se){console.error("    :",se)}l(h).push(q)}console.log("   :",l(h))}}catch(ne){console.error("    :",ne),B(i,"     .")}finally{B(s,!1)}}function P(){if(!l(a)||!l(a).items||l(a).items.length===0)return;const ne=new Map;l(a).items.forEach($=>{const se=($.variant||{}).title||$.variant_title||" ",Ae=se.match(/(.+)\s*-\s*(.+)/),x=Ae?Ae[1]:se,E=Ae?Ae[2]:"";ne.has(x)||ne.set(x,{name:x,sizes:new Map});const I=ne.get(x);I.sizes.has(E)||I.sizes.set(E,{size:E,quantity:0});const U=I.sizes.get(E);U.quantity+=$.quantity||1}),B(y,Array.from(ne.values()).map($=>({name:$.name,sizes:Array.from($.sizes.values())}))),B(y,l(y).filter($=>$.name!==""));const fe=new Set;l(y).forEach($=>{$.sizes.forEach(q=>{fe.add(q.size)})}),Array.from(fe)}function L(){if(l(a)){B(A,0),B(d,0),B(c,0);for(const ne of l(a).items)ne.quantity&&ne.price&&B(A,l(A)+ne.quantity*ne.price);for(const ne of l(a).prints)ne.price&&B(d,l(d)+ne.price);for(const ne of l(f))ne.price&&ne.quantity&&B(c,l(c)+ne.price*ne.quantity);B(u,l(A)+l(d)+l(c))}}function re(){return l(g)&&l(g).amount||0}En(()=>{F()});function K(){B(b,!0)}function H(){B(b,!1)}Kr();var J=fR(),we=pt(J),O=w(we);{var D=ne=>{var fe=Zj();T(ne,fe)},Z=ne=>{var fe=Dt(),$=pt(fe);{var q=Ae=>{var x=eR(),E=w(x);Me(()=>Ue(E,l(i))),T(Ae,x)},se=Ae=>{var x=Dt(),E=pt(x);{var I=M=>{var j=rR(),V=z(w(j),2),X=w(V),R=w(X),he=w(R),xe=w(he),Be=z(he,2);{var Le=le=>{var Ce=tR(),ke=w(Ce);Me(()=>Ue(ke,l(g).description)),T(le,Ce)};Ee(Be,le=>{l(g).description&&le(Le)})}var Y=z(R,2),k=w(Y),pe=z(V,4),ze=z(w(pe),2),ye=w(ze);Me((le,Ce)=>{Ue(xe,l(g).name),Ue(k,`${le??""}`),Ue(ye,`${Ce??""}`)},[()=>l(g).amount.toLocaleString(),()=>re().toLocaleString()],ot),T(M,j)},U=M=>{var j=Dt(),V=pt(j);{var X=he=>{var xe=uR(),Be=w(xe),Le=w(Be),Y=w(Le);{var k=ve=>{var Se=nR(),me=z(w(Se),2),Ne=w(me);{var De=Qe=>{var rt=Wr();Me(tt=>Ue(rt,`${l(y)[0].name??""} (${tt??""})`),[()=>l(y).reduce((tt,Te)=>tt+Te.sizes.reduce((ge,Oe)=>ge+Oe.quantity,0),0)],ot),T(Qe,rt)},qe=Qe=>{var rt=Wr();Me(tt=>Ue(rt,`${l(y)[0].name??""}  ${l(y).length-1} (${tt??""})`),[()=>l(y).reduce((tt,Te)=>tt+Te.sizes.reduce((ge,Oe)=>ge+Oe.quantity,0),0)],ot),T(Qe,rt)};Ee(Ne,Qe=>{l(y).length===1?Qe(De):Qe(qe,!1)})}T(ve,Se)};Ee(Y,ve=>{l(y).length>0&&ve(k)})}var pe=z(Y,2);{var ze=ve=>{var Se=dR(),me=z(w(Se),2),Ne=w(me);Yt(Ne,1,()=>l(h).slice(0,1),Ar,(Qe,rt)=>{var tt=AR(),Te=pt(tt);{var ge=je=>{var at=iR(),At=w(at);Yt(At,1,()=>l(rt).colorInfo.slice(0,3),Ar,(Xe,Je)=>{var ct=oR();Me(()=>{rr(ct,"style",`background-color: ${l(Je).hex??""};`),rr(ct,"title",l(Je).name)}),T(Xe,ct)});var it=z(At,2);{var Re=Xe=>{var Je=sR(),ct=w(Je);Me(()=>Ue(ct,`+${l(rt).colorInfo.length-3}`)),T(Xe,Je)};Ee(it,Xe=>{l(rt).colorInfo.length>3&&Xe(Re)})}T(je,at)};Ee(Te,je=>{l(rt).colorInfo&&l(rt).colorInfo.length>0&&je(ge)})}var Oe=z(Te,2);{var He=je=>{var at=aR(),At=w(at);Me(()=>Ue(At,l(rt).printAreaTitle)),T(je,at)};Ee(Oe,je=>{l(rt).printAreaTitle&&je(He)})}T(Qe,tt)});var De=z(Ne,2);{var qe=Qe=>{var rt=lR(),tt=w(rt);Me(()=>Ue(tt,` ${l(h).length-1}`)),T(Qe,rt)};Ee(De,Qe=>{l(h).length>1&&Qe(qe)})}T(ve,Se)};Ee(pe,ve=>{l(h).length>0&&ve(ze)})}var ye=z(pe,2);{var le=ve=>{var Se=cR(),me=z(w(Se),2),Ne=w(me);Me(()=>Ue(Ne,`${l(f).length??""}`)),T(ve,Se)};Ee(ye,ve=>{l(f).length>0&&ve(le)})}var Ce=z(Le,2),ke=w(Ce),ce=z(Be,2),ee=z(w(ce),2),N=w(ee),_e=w(N);Me(ve=>Ue(_e,`${ve??""}`),[()=>l(u).toLocaleString()],ot),st("click",ke,K),T(he,xe)},R=he=>{var xe=hR();T(he,xe)};Ee(V,he=>{l(a)&&l(a).estimate?he(X):he(R,!1)},!0)}T(M,j)};Ee(E,M=>{o()&&l(g)?M(I):M(U,!1)},!0)}T(Ae,x)};Ee($,Ae=>{l(i)?Ae(q):Ae(se,!1)},!0)}T(ne,fe)};Ee(O,ne=>{l(s)?ne(D):ne(Z,!1)})}var ie=z(we,2);{var de=ne=>{Jj(ne,{get estimateDetails(){return l(a)},get productAmount(){return l(A)},get printAmount(){return l(d)},get addonAmount(){return l(c)},get totalAmount(){return l(u)},get printInfoList(){return l(h)},get addonItems(){return l(f)},get addCostItems(){return l(g)},get isAddCost(){return o()},get addonProductsMap(){return l(m)},$$events:{close:H}})};Ee(ie,ne=>{l(b)&&l(a)&&ne(de)})}T(n,J),Rr()}var gR=te('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),vR=te('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),mR=te('<span class="odz-text-red-500 odz-ml-2"> </span>'),wR=te('<div class="odz-text-sm odz-text-gray-600"> <!></div>'),yR=te('<div class="odz-absolute -odz-top-1 -odz-right-1 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),bR=te("<img> <!>",1),_R=te('<div class="odz-flex odz-items-center odz-gap-1 odz-bg-red-100 odz-px-2 odz-py-1 odz-rounded-full"><span class="odz-text-xs odz-font-medium odz-text-red-600"> </span></div>'),BR=te('<button><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-relative odz-flex-shrink-0"><!></div> <span> </span> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-shrink-0"><!> <div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path></svg></div></div></div></button>'),xR=te('<div><h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-text-gray-800"> </h3> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 lg:odz-grid-cols-4 xl:odz-grid-cols-5 odz-gap-3"></div></div>'),zR=te('<div class="odz-relative"><img class="odz-w-12 odz-h-12 odz-rounded-lg odz-object-cover odz-shadow-md odz-ring-2 odz-ring-white"></div>'),CR=te('<div class="odz-absolute -odz-top-2 -odz-right-2"><div class="odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-shadow-lg"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>'),SR=te('<span class="odz-text-sm odz-font-semibold odz-text-gray-700"> </span>'),ER=te(`<div class="odz-group odz-relative"><div><!> <div class="odz-text-center odz-mb-3"><div> </div> <div class="odz-mt-2 odz-min-h-[2rem] odz-flex odz-flex-col odz-items-center odz-justify-center"><!></div></div> <div class="odz-flex odz-items-center odz-bg-gray-50 odz-rounded-lg odz-p-1 odz-gap-1"><button aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <input type="number" class="odz-flex-1 odz-text-center odz-bg-transparent odz-border-0 odz-text-xs sm:odz-text-sm odz-font-bold odz-text-gray-800
                                                           focus:odz-outline-none focus:odz-ring-0 odz-min-w-0" min="0" placeholder="0"> <button class="odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150 hover:odz-scale-110" aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path></svg></button></div></div></div>`),FR=te('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),IR=te('<div class="odz-text-center odz-py-8"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="odz-text-sm odz-text-gray-500">     .</p></div>'),QR=te('<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-4 odz-mb-6"><!> <div><h4 class="odz-text-xl odz-font-bold odz-text-gray-800"> </h4> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <!></div>'),UR=te('<div class="odz-space-y-6 odz-mt-6"></div>'),TR=te('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <!></div></div> <!> <!> <!>',1),LR=te('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!>',1);function PR(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(ur,"$fixedEstimateStore",t),s=()=>Xr(St,"$estimateStore",t),i=()=>Xr(Ls,"$shopStore",t),a=Ie();let A=ft(e,"productId",8),d=ft(e,"estimateId",8,void 0),c=ft(e,"idx",8,void 0),u=ft(e,"onNext",8,void 0),h=Ie(null),f=Ie(!1),g=Ie(null),m=Ie(!1),y=Ie(""),b=Ie(""),S=Ie([]),F=Ie({}),P=Ie({}),L=Ie({}),re=Ie(0),K=Ie(0),H=null;function J(R){var pe,ze,ye,le,Ce,ke;if(!l(a)||!l(a).variants||!l(a).options||l(a).options.length===0)return;const he=o();if((ze=(pe=he==null?void 0:he.productSelection)==null?void 0:pe.quantityByVariant)!=null&&ze[R]&&Object.keys(he.productSelection.quantityByVariant[R]).length>0,(((le=(ye=he==null?void 0:he.productSelection)==null?void 0:ye.quantityByVariant)==null?void 0:le[R])!==void 0||l(S).includes(R))&&d()&&d()!=="temp"){if(l(S).includes(R)){B(S,l(S).filter(N=>N!==R));const ce={...l(P)};delete ce[R],B(P,ce);const ee={...l(F)};ee[R]&&Object.keys(ee[R]).forEach(N=>{ee[R][N]=0}),B(F,ee),ur.update(N=>{if(!N||!N.productSelection)return N;const _e={...N.productSelection.quantityByVariant};_e[R]&&Object.keys(_e[R]).forEach(Se=>{_e[R][Se]=0});const ve=Object.values(_e).reduce((Se,me)=>Se+Object.values(me).reduce((Ne,De)=>Ne+De,0),0);return{...N,productSelection:{...N.productSelection,selectedColors:l(S),variantsByColor:ce,quantityByVariant:_e,totalQuantity:ve}}}),fe(),ha(K);return}if(!l(S).includes(R)){const ce=l(a).options[0].id,ee=l(a).variants.filter(N=>{var _e;return!N.option_values||!Array.isArray(N.option_values)?!1:(_e=N.option_values)==null?void 0:_e.some(ve=>ve.option_value&&ve.option_value.option?ve.option_value.option.id===ce&&ve.option_value.value===R:ve.option_id?ve.option_id===ce&&ve.value===R:!1)});ee.length>0&&(B(P,{...l(P),[R]:ee}),B(S,[...l(S),R]),ur.update(N=>!N||!N.productSelection?N:{...N,productSelection:{...N.productSelection,selectedColors:[...N.productSelection.selectedColors,R],variantsByColor:{...N.productSelection.variantsByColor,[R]:ee},quantityByVariant:{...N.productSelection.quantityByVariant,[R]:N.productSelection.quantityByVariant[R]||{}}}}),ha(K))}return}const Be=l(a).options[0].id,Le=l(a).variants.filter(ce=>{var ee;return!ce.option_values||!Array.isArray(ce.option_values)?!1:(ee=ce.option_values)==null?void 0:ee.some(N=>N.option_value&&N.option_value.option?N.option_value.option.id===Be&&N.option_value.value===R:N.option_id?N.option_id===Be&&N.value===R:!1)}),Y={...l(P)};if(Le.length>0&&(Y[R]=Le),d()&&d()!=="temp"){const ce=o();((ke=(Ce=ce==null?void 0:ce.productSelection)==null?void 0:Ce.selectedColors)==null?void 0:ke.includes(R))?(B(P,{...l(P),...Y}),ur.update(N=>!N||!N.productSelection?N:{...N,productSelection:{...N.productSelection,variantsByColor:{...N.productSelection.variantsByColor,...Y}}})):(l(S).includes(R)||B(S,[...l(S),R]),B(P,{...l(P),...Y}),ur.update(N=>{var Ne,De,qe,Qe,rt;if(!N||!N.productSelection)return N;const _e=Object.keys(N.productSelection.quantityByVariant||{}),ve=new Set([..._e,R]),Se=Array.from(ve),me={...((Ne=N.productSelection)==null?void 0:Ne.variantsByColor)||{},...Y};return console.log(" Edit :   (  ):",{colorValue:R,colorsWithQuantity:_e,newSelectedColors:Se,variantsInColor:((De=Y[R])==null?void 0:De.length)||0,quantityByVariant:N.productSelection.quantityByVariant}),{...N,productSelection:{...N.productSelection,selectedColors:Se,variantsByColor:me,quantityByVariant:{...((qe=N.productSelection)==null?void 0:qe.quantityByVariant)||{},[R]:((rt=(Qe=N.productSelection)==null?void 0:Qe.quantityByVariant)==null?void 0:rt[R])||{}}}}}))}else ur.toggleColorSelection(R,Y)}function we(R){var Be;if(!l(a)||l(a).options.length<2||!R||!R.option_values||!Array.isArray(R.option_values))return"";const he=l(a).options[1].id,xe=R.option_values.find(Le=>Le.option_value&&Le.option_value.option?Le.option_value.option.id===he:Le.option_id?Le.option_id===he:!1);return((Be=xe==null?void 0:xe.option_value)==null?void 0:Be.value)||(xe==null?void 0:xe.value)||""}function O(R,he){var Le;const xe=((Le=l(F)[R])==null?void 0:Le[he])||0,Be=xe+1;o(),ur.updateQuantity(R,he,Be),ie("increase",R,he,xe,Be)}function D(R,he){var Be;const xe=((Be=l(F)[R])==null?void 0:Be[he])||0;if(xe>0){const Le=xe-1;ur.updateQuantity(R,he,Le),ie("decrease",R,he,xe,Le)}}function Z(R,he,xe){var k;const Be=parseInt(R.target.value)||0,Le=Math.max(0,Be),Y=((k=l(F)[he])==null?void 0:k[xe])||0;ur.updateQuantity(he,xe,Le),ie("input",he,xe,Y,Le)}function ie(R,he,xe,Be,Le){var Y;if(typeof window<"u"){const k=Object.values(l(F)).reduce((pe,ze)=>pe+Object.values(ze).reduce((ye,le)=>ye+le,0),0)-Be+Le;window.dispatchEvent(new CustomEvent("productQuantityUpdate",{detail:{productId:(Y=l(a))==null?void 0:Y.id,action:R,color:he,variantId:xe,oldQuantity:Be,newQuantity:Le,newTotalQuantity:k,timestamp:Date.now(),source:"product.svelte"}}))}}let de=!1,ne=!1;function fe(){const R=Object.values(l(F)).reduce((he,xe)=>he+Object.values(xe).reduce((Be,Le)=>Be+Le,0),0);l(re)!==R&&(B(re,R),$())}function $(){var R,he;if(!de){de=!0;try{const xe={};if(!((R=l(a))!=null&&R.quantity_discounts)||l(re)===0){Object.keys(l(L)).length>0&&(B(L,{}),ur.updateVariantDiscounts({}));return}const Be=Object.keys(l(F)),Le=Object.keys(l(P));Be.filter(ye=>!Le.includes(ye)).length>0;for(const ye in l(F))for(const le in l(F)[ye])if(l(F)[ye][le]>0){const ke=(he=l(P)[ye])==null?void 0:he.find(ce=>ce.id===le);if(ke&&ke.prices&&ke.prices.length>0){const ce=ke.prices[0].amount,ee=vi(l(re),ce,l(a).quantity_discounts);ee!=null&&ee.hasDiscount&&(xe[le]=ee)}}const k=Object.keys(l(L)).sort(),pe=Object.keys(xe).sort();(JSON.stringify(k)!==JSON.stringify(pe)||Object.keys(xe).some(ye=>JSON.stringify(l(L)[ye])!==JSON.stringify(xe[ye])))&&(B(L,xe),ur.updateVariantDiscounts(l(L)))}finally{de=!1}}}function q(){var Be;let R=0,he=0,xe=!1;for(const Le in l(F))for(const Y in l(F)[Le]){const k=l(F)[Le][Y];if(k>0){const pe=(Be=l(P)[Le])==null?void 0:Be.find(ze=>ze.id===Y);if(pe&&pe.prices&&pe.prices.length>0){const ze=pe.prices[0].amount,ye=l(L)[Y];R+=ze*k,ye!=null&&ye.hasDiscount?(he+=ye.discountedPrice*k,xe=!0):he+=ze*k}}}return{originalTotal:R,discountedTotal:xe?he:R,hasDiscount:xe}}function se(){if(l(re)===0){B(m,!0),B(y," "),B(b," 1   .");return}ur.completeProductSelection();const R=[];for(const xe in l(F))for(const Be in l(F)[xe]){const Le=l(F)[xe][Be];if(Le>0){const Y=l(P)[xe].find(k=>k.id===Be);Y&&R.push({...Y,quantity:Le})}}const he=s().products.findIndex(xe=>{var Be;return((Be=xe.product)==null?void 0:Be.id)===l(a).id});he>=0?qt(St,dt(s).products[he]={product:l(a),variants:R,quantity:l(re),prints:[],addons:{},addonProductsMap:{}},dt(s)):qt(St,dt(s).products=[...s().products,{product:l(a),variants:R,quantity:l(re),prints:[],addons:{},addonProductsMap:{}}],dt(s)),St.updateTotalAmounts(),B(m,!0),B(y," "),B(b,`${l(re)}  .`),u()&&u()()}async function Ae(){var he,xe,Be,Le,Y,k,pe,ze,ye;if(!A())return;const R=o().productSelection;if(R&&R.product&&R.productId===A()){B(f,!0),B(g,null);try{B(h,await pd.loadIntegratedProductData(A(),i().id)),console.log(" Edit : productDataStore   ( variants ):",{productId:A(),variantsCount:((Be=(xe=(he=l(h))==null?void 0:he.product)==null?void 0:xe.variants)==null?void 0:Be.length)||0,hasOptionValues:(pe=(k=(Y=(Le=l(h))==null?void 0:Le.product)==null?void 0:Y.variants)==null?void 0:k[0])!=null&&pe.option_values?"yes":"no"}),(ze=l(h))!=null&&ze.product&&Hn.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]})}catch(le){B(g,le instanceof Error?le.message:"   .")}finally{B(f,!1)}return}B(f,!0),B(g,null);try{if(B(h,await pd.loadIntegratedProductData(A(),i().id)),(ye=l(h))!=null&&ye.product){const le=s().products.find(Ce=>{var ke;return((ke=Ce.product)==null?void 0:ke.id)===l(h).product.id});if(le&&le.variants.length>0){const Ce={},ke=l(h).product.options[0].id;le.variants.forEach(ce=>{var N;if(!ce||!ce.option_values||!Array.isArray(ce.option_values))return;const ee=ce.option_values.find(_e=>_e.option_value&&_e.option_value.option?_e.option_value.option.id===ke:_e.option_id?_e.option_id===ke:!1);if(ee){const _e=((N=ee.option_value)==null?void 0:N.value)||ee.value||"";Ce[_e]||(Ce[_e]=[]),Ce[_e].push(ce)}});for(const ce in Ce)J(ce),Ce[ce].forEach(ee=>{l(F)[ce]&&fr(F,l(F)[ce][ee.id]=ee.quantity||0)});B(F,{...l(F)}),fe()}}}catch(le){B(g,le instanceof Error?le.message:"   .")}finally{B(f,!1)}}function x(){const R=o();if(!(R!=null&&R.productSelection)||!l(a))return;const he=R.productSelection;if(B(S,[...he.selectedColors]),B(F,{...he.quantityByVariant}),B(re,he.totalQuantity),d()&&d(),l(S).length>0&&l(a)&&l(a).variants){B(P,{});const xe=l(a).options[0].id;Object.keys(he.quantityByVariant||{}).forEach(Le=>{const Y=l(a).variants.filter(k=>{var pe;return(pe=k.option_values)==null?void 0:pe.some(ze=>ze.option_value&&ze.option_value.option?ze.option_value.option.id===xe&&ze.option_value.value===Le:ze.option_id?ze.option_id===xe&&ze.value===Le:!1)});Y.length>0&&fr(P,l(P)[Le]=Y)})}B(P,{...l(P)}),ha(K),Object.keys(l(P)).length>0&&ur.update(xe=>!xe||!xe.productSelection?xe:{...xe,productSelection:{...xe.productSelection,variantsByColor:l(P)}}),l(re)>0&&$()}function E(){H=ur.subscribe(R=>{if(R!=null&&R.productSelection&&R.productId===A()){const he=R.productSelection;if(!l(a)||!l(a).variants)return;if(B(S,[...he.selectedColors]),B(F,{...he.quantityByVariant}),B(re,he.totalQuantity),l(a)&&l(a).variants&&l(S).length>0){d()&&d();const xe={},Be=l(a).options[0].id;if(Object.keys(he.quantityByVariant||{}).forEach(Y=>{const k=l(a).variants.filter(pe=>{var ze;return(ze=pe.option_values)==null?void 0:ze.some(ye=>ye.option_value&&ye.option_value.option?ye.option_value.option.id===Be&&ye.option_value.value===Y:ye.option_id?ye.option_id===Be&&ye.value===Y:!1)});k.length>0&&(xe[Y]=k)}),B(P,xe),ha(K),!ne){const Y=Object.keys(he.variantsByColor||{}).sort(),k=Object.keys(xe).sort();if(JSON.stringify(Y)!==JSON.stringify(k)){ne=!0;try{console.log(" Store variantsByColor  ( ):",{before:Y.length,after:k.length,beforeKeys:Y,afterKeys:k}),ur.update(ze=>!ze||!ze.productSelection?ze:{...ze,productSelection:{...ze.productSelection,variantsByColor:xe}})}finally{setTimeout(()=>{ne=!1},0)}}}}else l(S).length===0&&(B(P,{}),ha(K));he.needsDiscountRecalculation&&l(re)>0&&setTimeout(()=>{$()},0)}})}En(async()=>{d()&&d()!=="temp"||ur.initialize(A(),d()),E(),await Ae(),x()}),Eo(()=>{H&&H()}),Jt(()=>(o(),zn(A()),l(h)),()=>{var R,he,xe;(he=(R=o())==null?void 0:R.productSelection)!=null&&he.product&&o().productSelection.productId===A()&&(!l(h)||((xe=l(h).product)==null?void 0:xe.id)!==o().productSelection.product.id)&&B(h,{product:o().productSelection.product,addons:o().productSelection.addons||[],addonItems:o().productSelection.addonItems||[]})}),Jt(()=>l(h),()=>{var R;B(a,((R=l(h))==null?void 0:R.product)||null)}),Jt(()=>(l(a),l(S),zn(d()),l(K)),()=>{var R,he;if(l(a)&&l(a).variants&&l(S).length>0){const xe=d()&&d()!=="temp";console.log(` Reactive: product  , variantsByColor  (${xe?"Edit":"Create"} )`,{productId:l(a).id,variantsCount:l(a).variants.length,selectedColors:l(S),firstVariant:l(a).variants[0],hasOptionValues:!!((R=l(a).variants[0])!=null&&R.option_values)});const Be={},Le=(he=l(a).options[0])==null?void 0:he.id;Le&&(l(S).forEach(Y=>{const k=l(a).variants.filter(pe=>{var ze;return l(S).indexOf(Y)===0&&l(a).variants.indexOf(pe),(ze=pe.option_values)==null?void 0:ze.some(ye=>ye.option_value&&ye.option_value.option?ye.option_value.option.id===Le&&ye.option_value.value===Y:ye.option_id?ye.option_id===Le&&ye.value===Y:!1)});k.length>0&&(Be[Y]=k)}),B(P,Be),ha(K))}}),Jt(()=>(o(),l(L),l(K)),()=>{var R,he;if((he=(R=o())==null?void 0:R.productSelection)!=null&&he.variantDiscounts){const xe=o().productSelection.variantDiscounts,Be=Object.keys(l(L)).sort(),Le=Object.keys(xe).sort();(JSON.stringify(Be)!==JSON.stringify(Le)||Object.keys(xe).some(k=>JSON.stringify(l(L)[k])!==JSON.stringify(xe[k])))&&(B(L,{...xe}),ha(K))}}),Zn(),Kr();var I=LR(),U=pt(I),M=w(U);{var j=R=>{var he=gR();T(R,he)},V=R=>{var he=Dt(),xe=pt(he);{var Be=Y=>{var k=vR(),pe=w(k),ze=z(w(pe),2),ye=z(w(ze),2),le=w(ye),Ce=z(pe,2);Me(()=>Ue(le,l(g))),st("click",Ce,Ae),T(Y,k)},Le=Y=>{var k=Dt(),pe=pt(k);{var ze=ye=>{var le=TR(),Ce=pt(le),ke=w(Ce),ce=w(ke),ee=z(ke,2),N=w(ee),_e=w(N),ve=z(N,2);{var Se=ge=>{var Oe=wR();const He=ot(q);var je=w(Oe),at=z(je);{var At=it=>{var Re=mR();T(it,Re)};Ee(at,it=>{l(He).hasDiscount&&it(At)})}Me(()=>Ue(je,` : ${l(re)??""} `)),T(ge,Oe)};Ee(ve,ge=>{l(re)>0&&ge(Se)})}var me=z(Ce,2);{var Ne=ge=>{var Oe=xR(),He=z(w(Oe),2);Yt(He,5,()=>l(a).options[0].values,Ar,(je,at)=>{var At=BR();const it=ot(()=>l(S).includes(l(at).value));var Re=w(At),Xe=w(Re),Je=w(Xe);{var ct=Lt=>{var Pt=bR(),zt=pt(Pt),Et=z(zt,2);{var xt=Ut=>{var Kt=yR();T(Ut,Kt)};Ee(Et,Ut=>{l(it)&&Ut(xt)})}Me(()=>{rr(zt,"src",l(at).image),rr(zt,"alt",l(at).value),Fr(zt,`odz-w-12 odz-h-12 odz-object-cover odz-rounded-lg odz-shadow-sm
                                                   ${(l(it)?"odz-ring-2 odz-ring-red-400 odz-ring-offset-2":"")??""}`)}),T(Lt,Pt)};Ee(Je,Lt=>{l(at).image&&Lt(ct)})}var _t=z(Xe,2),lt=w(_t),et=z(_t,2),Qt=w(et);{var vt=Lt=>{var Pt=Dt();const zt=ot(()=>Object.values(l(F)[l(at).value]||{}).reduce((Ut,Kt)=>Ut+Kt,0));var Et=pt(Pt);{var xt=Ut=>{var Kt=_R(),Ot=w(Kt),Mt=w(Ot);Me(()=>Ue(Mt,`${l(zt)??""}`)),T(Ut,Kt)};Ee(Et,Ut=>{l(zt)>0&&Ut(xt)})}T(Lt,Pt)};Ee(Qt,Lt=>{var Pt;l(it)&&((Pt=l(P)[l(at).value])==null?void 0:Pt.length)>0&&l(K)>=0&&Lt(vt)})}var Nt=z(Qt,2),mt=w(Nt);Me(()=>{Fr(At,`odz-w-full odz-transition-all odz-duration-200 odz-ease-in-out
                                   ${(l(it)?"odz-bg-gradient-to-r odz-from-red-50 odz-to-rose-50 odz-border-2 odz-border-red-400 odz-shadow-md":"odz-bg-white odz-border-2 odz-border-gray-200 hover:odz-border-gray-300 hover:odz-shadow-sm")??""}
                                   odz-rounded-xl odz-p-3`),Fr(_t,`odz-flex-1 odz-text-sm odz-font-semibold odz-text-gray-700 odz-text-left
                                            ${(l(it)?"odz-text-red-700":"")??""}`),Ue(lt,l(at).value),Fr(Nt,`odz-transition-transform odz-duration-300
                                               ${(l(it)?"odz-rotate-90":"")??""}`),D4(mt,`odz-w-4 odz-h-4 odz-text-gray-400
                                                   ${(l(it)?"odz-text-red-500":"")??""}`)}),st("click",At,()=>J(l(at).value)),T(je,At)}),T(ge,Oe)};Ee(me,ge=>{l(a).options.length>0&&ge(Ne)})}var De=z(me,2);{var qe=ge=>{var Oe=UR();Yt(Oe,5,()=>l(S),Ar,(He,je)=>{var at=QR();const At=ot(()=>l(P)[l(je)]||[]),it=ot(()=>l(a).options[0].values.find(Nt=>Nt.value===l(je)));var Re=w(at),Xe=w(Re);{var Je=Nt=>{var mt=zR(),Lt=w(mt);Me(()=>{rr(Lt,"src",l(it).image),rr(Lt,"alt",l(je))}),T(Nt,mt)};Ee(Xe,Nt=>{var mt;(mt=l(it))!=null&&mt.image&&Nt(Je)})}var ct=z(Xe,2),_t=w(ct),lt=w(_t),et=z(Re,2);{var Qt=Nt=>{var mt=FR();Yt(mt,5,()=>l(At),Ar,(Lt,Pt)=>{var zt=ER();const Et=ot(()=>we(l(Pt))),xt=ot(()=>{var ir;return((ir=l(F)[l(je)])==null?void 0:ir[l(Pt).id])||0}),Ut=ot(()=>l(L)[l(Pt).id]),Kt=ot(()=>l(xt)>0);var Ot=w(zt),Mt=w(Ot);{var Gt=ir=>{var vr=CR();T(ir,vr)};Ee(Mt,ir=>{var vr;l(Kt)&&((vr=l(Ut))!=null&&vr.hasDiscount)&&ir(Gt)})}var nr=z(Mt,2),sr=w(nr),dr=w(sr),Ht=z(sr,2),wr=w(Ht);{var Pr=ir=>{_B(ir,{get originalPrice(){return l(Pt).prices[0].amount},get finalPrice(){return l(Ut).discountedPrice},hasDiscount:!0,size:"sm"})},$r=ir=>{var vr=SR(),kr=w(vr);Me(un=>Ue(kr,`${un??""}`),[()=>gr(l(Pt).prices[0].amount)],ot),T(ir,vr)};Ee(wr,ir=>{var vr;(vr=l(Ut))!=null&&vr.hasDiscount&&l(xt)>0?ir(Pr):ir($r,!1)})}var Ir=z(nr,2),hr=w(Ir),Or=z(hr,2),xr=z(Or,2);Me(()=>{Fr(Ot,`odz-bg-white odz-border-2 odz-rounded-xl odz-p-2 odz-transition-all odz-duration-200
                                                    ${(l(Kt)?"odz-border-red-300 odz-shadow-lg odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md")??""}`),Fr(sr,`odz-bg-gradient-to-r odz-from-slate-600 odz-to-slate-800 odz-text-white
                                                           odz-px-3 odz-py-1 odz-rounded-lg odz-text-sm odz-font-bold odz-shadow-sm
                                                           ${(l(Kt)?"odz-from-red-500 odz-to-red-700":"")??""}`),Ue(dr,l(Et)),Fr(hr,`odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150
                                                           ${(l(xt)<=0?"odz-opacity-50 odz-cursor-not-allowed":"hover:odz-scale-110")??""}`),hr.disabled=l(xt)<=0,Wm(Or,l(xt))}),st("click",hr,()=>D(l(je),l(Pt).id)),st("input",Or,ir=>Z(ir,l(je),l(Pt).id)),st("click",xr,()=>O(l(je),l(Pt).id)),T(Lt,zt)}),T(Nt,mt)},vt=Nt=>{var mt=IR();T(Nt,mt)};Ee(et,Nt=>{l(At).length>0&&l(K)>=0?Nt(Qt):Nt(vt,!1)})}Me(()=>Ue(lt,l(je))),T(He,at)}),T(ge,Oe)};Ee(De,ge=>{l(S).length>0&&ge(qe)})}var Qe=z(De,2);const rt=ot(()=>d()||null),tt=ot(()=>c()!==void 0?c():null),Te=ot(()=>l(re)>0);VA(Qe,{get productId(){return A()},get estimateId(){return l(rt)},get idx(){return l(tt)},get showNextButton(){return l(Te)},nextButtonText:"  ",onNext:se}),Me(()=>{rr(ce,"src",l(a).thumbnail),rr(ce,"alt",l(a).title),Ue(_e,l(a).title)}),T(ye,le)};Ee(pe,ye=>{l(a)&&ye(ze)},!0)}T(Y,k)};Ee(xe,Y=>{l(g)?Y(Be):Y(Le,!1)},!0)}T(R,he)};Ee(M,R=>{l(f)?R(j):R(V,!1)})}var X=z(U,2);Wd(X,{get isOpen(){return l(m)},set isOpen(R){B(m,R)},get title(){return l(y)},set title(R){B(y,R)},get message(){return l(b)},set message(R){B(b,R)},$$legacy:!0}),T(n,I),Rr(),r()}var kR=te('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),OR=te('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div></div>'),DR=te('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-overflow-hidden odz-rounded-lg odz-border odz-border-gray-200"><img class="odz-w-full odz-h-full odz-object-cover" loading="lazy"></div>'),NR=te('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-bg-gray-100 odz-rounded-lg odz-border odz-border-gray-200 odz-flex odz-items-center odz-justify-center"><svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div>'),MR=te('<label><input type="radio" class="odz-w-4 odz-h-4 odz-text-red-600 odz-border-gray-300 odz-focus:ring-red-500"> <div class="odz-flex-1"><span class="odz-font-medium odz-text-gray-900"> </span> <div class="odz-text-sm odz-text-red-600 odz-font-semibold"> </div></div></label>'),HR=te('<div class="odz-mt-4 odz-p-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><svg class="odz-w-4 odz-h-4 odz-text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="odz-text-green-800">: <strong> </strong> </span></div></div>'),jR=te('<div class="odz-border odz-border-gray-200 odz-rounded-lg odz-p-6"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><!> <h4 class="odz-text-md odz-font-semibold odz-text-gray-800"> </h4></div> <fieldset class="odz-space-y-3"><legend class="odz-sr-only"> </legend> <!></fieldset> <!></div>'),RR=te('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-mb-6 odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </h3> <div class="odz-space-y-8"></div></div>'),qR=te('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-xl odz-p-8 odz-text-center"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <h3 class="odz-text-lg odz-font-semibold odz-text-gray-700 odz-mb-2"> </h3> <p class="odz-text-gray-500">     .</p></div>'),KR=te("<!> <!>",1),$R=te('<div class="odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-yellow-800">    </h3> <p class="odz-text-sm odz-text-yellow-600"> ID   .</p></div></div></div>'),VR=te('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-md odz-p-8"><div class="odz-text-center odz-mb-8"><h3 class="odz-text-lg odz-font-medium odz-text-gray-800">   .</h3></div> <div class="odz-space-y-3"><button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-gray-900 hover:odz-bg-gray-800 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors odz-flex odz-items-center odz-justify-center odz-gap-3"><div class="odz-w-6 odz-h-6 odz-bg-green-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>   </button> <button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors">  </button></div></div></div>'),GR=te('<div class="odz-addon-tab"><div class="odz-mb-6"><h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-600">  </p></div> <div class="odz-space-y-6"><!></div></div> <!>',1);function WR(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=()=>Xr(ur,"$fixedEstimateStore",t),i=()=>Xr(Ls,"$shopStore",t);let a=ft(e,"productId",8),A=ft(e,"estimateId",8,void 0),d=ft(e,"idx",8,void 0),c=ft(e,"onSave",8,void 0);ft(e,"onNext",8,void 0);let u=ft(e,"onPrev",8,void 0),h=null,f=Ie(null),g=Ie(!1),m=Ie(null),y=Ie({}),b=Ie(!1),S="";function F(x,E,I){var U,M;ur.toggleAddonSelection(x,E,I),((U=l(y)[x])==null?void 0:U.productId)===E&&((M=l(y)[x])==null?void 0:M.variantId)===I?delete l(y)[x]:fr(y,l(y)[x]={productId:E,variantId:I}),B(y,{...l(y)}),P(),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("addonSelectionUpdate",{detail:{productId:E,addonId:x,variantId:I,selectedAddons:{...l(y)},timestamp:Date.now(),source:"addon.svelte"}})),console.log(" addonSelectionUpdate   (variantId ):",{productId:E,addonId:x,variantId:I,selectedAddonsCount:Object.keys(l(y)).length}))}function P(){const x=o().index;x>=0&&o().products[x]&&(qt(St,dt(o).products[x].addons={...l(y)},dt(o)),S_(St,{...o()}))}async function L(){if(!a())return;const x=s().productSelection;if(x&&x.product&&x.productId===a()){B(f,{product:x.product,addons:x.addons||[],addonItems:x.addonItems||[]}),B(g,!1);return}B(g,!0),B(m,null);try{B(f,await Hn.loadIntegratedProductData(a(),i().id))}catch(E){B(m,E instanceof Error?E.message:"   .")}finally{B(g,!1)}}function re(){const x=s();if(x&&x.productId===a()&&x.addonSelection&&x.addonSelection.selectedAddons){const E={...x.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(E).length,B(y,E),B(y,{...l(y)})}}function K(){h=ur.subscribe(x=>{if(x&&x.productId===a())if(x.addonSelection&&x.addonSelection.selectedAddons){const E={...x.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(E).length,JSON.stringify(l(y))!==JSON.stringify(E)&&(B(y,E),typeof window<"u"&&window.dispatchEvent(new CustomEvent("addonSelectionChanged",{detail:{selectedAddons:E}})))}else Object.keys(l(y)).length>0&&B(y,{})})}async function H(x){const E={printMethod:null,simplePrintState:null,detailedPrintState:null,simplePrintKeys:[],detailedPrintKeys:[],allProductKeys:[],otherData:{}},I=Object.keys(sessionStorage).filter(U=>U.includes(x));return E.allProductKeys=I,I.forEach(U=>{var j;const M=sessionStorage.getItem(U);if(U.startsWith(`simplePrint_${x}`)){if(E.simplePrintKeys.push(U),M)try{E.simplePrintState=JSON.parse(M)}catch{E.simplePrintState=null}return}if(U.startsWith(`detailedPrint_${x}`)){if(E.detailedPrintKeys.push(U),M)try{E.detailedPrintState=JSON.parse(M)}catch{E.detailedPrintState=null}return}if(U.startsWith(`fixedEstimate_${x}`)&&M)try{const V=JSON.parse(M);(j=V.printSelection)!=null&&j.currentMethod&&(E.printMethod=V.printSelection.currentMethod)}catch{}try{E.otherData[U]=M&&JSON.parse(M)}catch{E.otherData[U]=M}}),E}async function J(x,E,I,U){var ce,ee,N,_e,ve,Se;const{shopData:M,customerData:j,fixedEstimateData:V,estimateStoreData:X}=x,R=new Date().toISOString(),he={shop_id:(M==null?void 0:M.id)||null,sess:(M==null?void 0:M.sess)||null,customer_id:(M==null?void 0:M.customer_id)||null,name:(j==null?void 0:j.name)||(E==null?void 0:E.name)||null,order_name:(j==null?void 0:j.name)||(E==null?void 0:E.name)||null,order_phone:(j==null?void 0:j.phone)||(E==null?void 0:E.phone)||null,address1:(j==null?void 0:j.address1)||(E==null?void 0:E.address1)||null,address2:(j==null?void 0:j.address2)||(E==null?void 0:E.address2)||null,postcode:(j==null?void 0:j.postcode)||(E==null?void 0:E.postcode)||null,mall_type:(j==null?void 0:j.mallType)||(E==null?void 0:E.mallType)||null,upload_memo:(X==null?void 0:X.uploadMemo)||null,status:"temp",created_at:R,updated_at:R},xe=[];let Be=((ce=V==null?void 0:V.printSelection)==null?void 0:ce.currentMethod)||(I==null?void 0:I.printMethod)||"none";if(Be==="selection"&&(console.warn(' [prepareDataForDatabase] print_type "selection" . "none" .'),Be="none"),["simple","detailed","self-design","none"].includes(Be)||(console.warn(` [prepareDataForDatabase]   print_type: "${Be}". "none" .`),Be="none"),(ee=V==null?void 0:V.productSelection)!=null&&ee.quantityByVariant&&((N=V==null?void 0:V.productSelection)!=null&&N.variantsByColor)){const me=V.productSelection.quantityByVariant,Ne=V.productSelection.variantsByColor,De=V.productSelection.variantDiscounts||{};for(const qe in me){const Qe=me[qe],rt=Ne[qe]||[];for(const tt in Qe){const Te=Qe[tt];if(Te>0){const ge=rt.find(Oe=>Oe.id===tt);if(ge){const Oe=ge.prices&&ge.prices.length>0?ge.prices[0].amount:0,He=De[tt];let je=Oe,at=0,At="amount",it=0,Re="minus",Xe=null,Je=null;if(He&&He.hasDiscount){je=He.discountedPrice,at=He.discountAmount;const ct=He.discountInfo;ct&&(At=ct.type||"amount",it=ct.value||0,Re=ct.direction||"minus",Xe=ct.min_quantity||null,Je=ct.max_quantity||null)}xe.push({idx:0,variant_id:tt,quantity:Te,price:je,print_type:Be,original_price:Oe,discount_amount:at,discount_type:At,discount_value:it,discount_direction:Re,discount_min_quantity:Xe,discount_max_quantity:Je,product_id:U,created_at:R,updated_at:R})}}}}}if(xe.length===0&&(X!=null&&X.products)){const me=X.products.find(Ne=>{var De;return((De=Ne.product)==null?void 0:De.id)===U});me&&me.variants&&me.variants.length>0&&me.variants.forEach((Ne,De)=>{var qe;if(Ne.quantity>0){const Qe=Ne.prices&&Ne.prices.length>0?Ne.prices[0].amount:0,rt=(qe=Ne.product)==null?void 0:qe.quantity_discounts,tt=vi(Ne.quantity,Qe,rt),Te=tt.discountInfo;xe.push({idx:De,variant_id:Ne.id,quantity:Ne.quantity,price:tt.discountedPrice,original_price:Qe,discount_amount:tt.discountAmount,discount_type:(Te==null?void 0:Te.type)||"amount",discount_value:(Te==null?void 0:Te.value)||0,discount_direction:(Te==null?void 0:Te.direction)||"minus",discount_min_quantity:(Te==null?void 0:Te.min_quantity)||null,discount_max_quantity:(Te==null?void 0:Te.max_quantity)||null,product_id:U,created_at:R,updated_at:R})}})}const Y=[];I.simplePrintState&&Array.isArray(I.simplePrintState)&&I.simplePrintState.forEach((me,Ne)=>{Y.push({idx:0,object_id:me.objectId||`area-${Ne}`,title:me.title||`  ${Ne+1}`,print_method:me.printMethod||null,uploaded_files:me.uploadedFiles||null,file_metadata:me.savedFileInfo||null,price:me.price||0,created_at:R,updated_at:R})});const k=[],pe=new Set,ze=((_e=V==null?void 0:V.printSelection)==null?void 0:_e.currentMethod)==="detailed"||Array.isArray(I.detailedPrintState)&&I.detailedPrintState.length>0;async function ye(me,Ne){var He,je,at,At;if(!me)return;const De=((He=me.template)==null?void 0:He.id)??me.template_id??null,qe=me.objectId??me.object_id??null;if(!De&&!qe||qe&&pe.has(qe))return;let Qe=0;const rt=me.price??0,tt=Number(rt);if(Number.isFinite(tt)&&tt>0)Qe=tt;else try{const it=((je=V==null?void 0:V.productSelection)==null?void 0:je.totalQuantity)||0;let Re=0,Xe=0;if(me.colors&&((at=me.template)!=null&&at.templateProduct)){const Je=me.colors.length,ct=me.template.templateProduct.template_product_variants.find(_t=>_t.color_count===Je);if(ct){const _t=await mA(ct.variant_id);if(_t)if(Re=_t.prices[0].amount,ct.min_quantity<=it)if(Xe=Re*it,me.template.templateProduct.product.quantity_discounts&&me.template.templateProduct.product.quantity_discounts.length>0){const lt=vi(it,Re,me.template.templateProduct.product.quantity_discounts);Qe=lt.hasDiscount?lt.discountedPrice*it:Xe}else Qe=Xe;else Qe=ct.plate_price}}else if((At=me.template)!=null&&At.templateProduct){const Je=me.template.templateProduct.template_product_variants[0];if(Je){const ct=await mA(Je.variant_id);if(ct)if(Re=ct.prices[0].amount,Je.min_quantity<=it)if(Xe=Re*it,me.template.templateProduct.product.quantity_discounts&&me.template.templateProduct.product.quantity_discounts.length>0){const _t=vi(it,Re,me.template.templateProduct.product.quantity_discounts);Qe=_t.hasDiscount?_t.discountedPrice*it:Xe}else Qe=Xe;else Qe=Je.plate_price}}}catch{Qe=0}const Te=me.discountInfo||{},ge=Te.discountDetails||Te.discountInfo||{};k.push({idx:0,template_id:De,variant_id:me.variant_id??null,price:Qe,colors:me.colors||null,uploads:me.uploads||null,name_sheet:me.nameSheet??me.name_sheet??null,object_id:qe,original_price:Te.originalPrice??me.original_price??null,discount_amount:Te.discountAmount??me.discount_amount??null,discount_type:ge.type??me.discount_type??null,discount_value:ge.value??me.discount_value??null,discount_direction:ge.direction??me.discount_direction??null,discount_min_quantity:ge.min_quantity??me.discount_min_quantity??null,discount_max_quantity:ge.max_quantity??me.discount_max_quantity??null,created_at:R,updated_at:R}),qe&&pe.add(qe)}if(ze){if(Array.isArray(I.detailedPrintState)&&I.detailedPrintState.length>0)for(let me=0;me<I.detailedPrintState.length;me++){const Ne=I.detailedPrintState[me];await ye(Ne)}if(k.length===0&&(X!=null&&X.products)){const me=X.products.find(Ne=>{var De;return((De=Ne.product)==null?void 0:De.id)===U});if(me!=null&&me.prints&&me.prints.length>0)for(let Ne=0;Ne<me.prints.length;Ne++)await ye(me.prints[Ne])}}const le=[],Ce=(ve=V==null?void 0:V.addonSelection)==null?void 0:ve.selectedAddons,ke=((Se=V==null?void 0:V.productSelection)==null?void 0:Se.totalQuantity)||0;return Ce&&Object.keys(Ce).length>0&&Object.entries(Ce).forEach(([me,Ne])=>{var Qe,rt,tt;let De=0,qe=0;if((rt=(Qe=l(f))==null?void 0:Qe.addonProductsMap)!=null&&rt[Ne.productId]){const ge=(tt=l(f).addonProductsMap[Ne.productId].variants)==null?void 0:tt.find(Oe=>Oe.id===Ne.variantId);ge&&ge.prices&&ge.prices.length>0&&(qe=ge.prices[0].amount||0,De=qe)}le.push({idx:0,addon_id:me,selected_product_id:Ne.productId,selected_variant_id:Ne.variantId,quantity:ke,price:De,created_at:R,updated_at:R})}),{estimate:he,estimate_items:xe,estimate_simple_prints:Y,estimate_prints:k,estimate_addon_items:le}}function we(x){const E=[];return x.estimate.shop_id||E.push(" ID "),x.estimate_items.length===0&&E.push("  "),x.estimate_items.forEach((I,U)=>{I.variant_id||E.push(` ${U+1}:  ID `),(!I.quantity||I.quantity<=0)&&E.push(` ${U+1}:  `)}),x.estimate_simple_prints.forEach((I,U)=>{I.object_id||E.push(`  ${U+1}:  ID `)}),x.estimate_prints&&x.estimate_prints.length>0&&x.estimate_prints.forEach((I,U)=>{!I.template_id&&!I.object_id&&E.push(`  ${U+1}: template_id  object_id `)}),{isValid:E.length===0,errors:E}}async function O(){var x;try{let E=null,I=null,U=null,M=null,j=null;ur.subscribe(le=>{E=le})(),Hn.subscribe(le=>{I=le})(),St.subscribe(le=>{U=le})(),sl.subscribe(le=>{M=le})(),Ls.subscribe(le=>{j=le})();const Be=await H(a()),Le={shopData:j,customerData:M,fixedEstimateData:E,extendedProductData:I,estimateStoreData:U},Y={name:M==null?void 0:M.name,phone:M==null?void 0:M.phone,address1:M==null?void 0:M.address1,address2:M==null?void 0:M.address2,postcode:M==null?void 0:M.postcode,mallType:M==null?void 0:M.mallType},k=await J(Le,Y,Be,a()),pe=we(k);if(!pe.isValid){alert(`   :

${pe.errors.join(`
`)}

   .`);return}const ze=await fB(k,(M==null?void 0:M.mallType)||(Y==null?void 0:Y.mallType),j==null?void 0:j.customer_id,j==null?void 0:j.sess);if(ze.success){const le=`
   !

  : ${((x=ze.details)==null?void 0:x.estimateNumber)||"N/A"}
  ID: ${ze.estimateId}
  ID: ${a()}
   : ${k.estimate_items.length}
   : ${k.estimate_simple_prints.length}
   : ${k.estimate_prints.length}
  : ${k.estimate_addon_items.length}

   : ${new Date().toLocaleString()}

   !
                `.trim();B(b,!0),S=ze.estimateId}else{const le=`
   !

  ID: ${a()}
  : ${ze.error}

  : ${new Date().toLocaleString()}

    .
                `.trim();alert(le)}const ye={version:"1.0.0",timestamp:new Date().toISOString(),productId:a(),databaseData:k,validationResult:pe,saveResult:ze,stores:{shopStore:j,customerStore:M,fixedEstimateStore:E,extendedProductDataStore:I,estimateStore:U},sessionStorageBackup:Be,integratedProductData:l(f),selectedAddons:l(y),formData:Y};window.lastEstimateDataPackage=ye}catch(E){const I=`
     !

  : ${E instanceof Error?E.message:"   "}
  ID: ${a()}
  : ${new Date().toLocaleString()}

   .
            `.trim();alert(I)}}function D(){B(b,!1),ur.reset(),Hn.reset(),St.reset(),B(y,{}),B(f,null),Object.keys(sessionStorage).filter(E=>E.includes(a())).forEach(E=>sessionStorage.removeItem(E)),ur.setCurrentStep("product"),setTimeout(()=>{window.location.href="/"},100)}function Z(){B(b,!1);const x=Object.keys(sessionStorage).filter(E=>E.includes(a()));x.forEach(E=>sessionStorage.removeItem(E)),console.log(" SessionStorage   (  ):",x),window.location.href="/odiz/estimate.php"}En(async()=>{var I;const x=s();(!x||x.productId!==a())&&ur.initialize(a(),A()),K(),await L(),re();const E=o().index;if(E>=0&&((I=o().products[E])!=null&&I.addons)){const U=o().products[E].addons;Object.keys(U).length>0&&B(y,{...U})}}),Eo(()=>{h&&h()}),Kr();var ie=GR(),de=pt(ie),ne=z(w(de),2),fe=w(ne);{var $=x=>{var E=kR();T(x,E)},q=x=>{var E=Dt(),I=pt(E);{var U=j=>{var V=OR(),X=w(V),R=z(w(X),2),he=z(w(R),2),xe=w(he);Me(()=>Ue(xe,l(m))),T(j,V)},M=j=>{var V=Dt(),X=pt(V);{var R=xe=>{var Be=KR(),Le=pt(Be);{var Y=Ce=>{var ke=RR(),ce=z(w(ke),2);Yt(ce,5,()=>l(f).addons,ee=>ee.id,(ee,N)=>{var _e=jR(),ve=w(_e),Se=w(ve);{var me=He=>{var je=DR(),at=w(je);Me(()=>{rr(at,"src",l(N).items[0].addon_product.thumbnail),rr(at,"alt",l(N).name)}),b_(at),st("error",at,At=>{const it=At.target;it.style.display="none",it.parentElement&&(it.parentElement.innerHTML=`
                                                        <div class="odz-w-full odz-h-full odz-bg-gray-100 odz-flex odz-items-center odz-justify-center">
                                                            <svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                                            </svg>
                                                        </div>
                                                    `)}),T(He,je)},Ne=He=>{var je=NR();T(He,je)};Ee(Se,He=>{l(N).items&&l(N).items.length>0&&l(N).items[0].addon_product.thumbnail?He(me):He(Ne,!1)})}var De=z(Se,2),qe=w(De),Qe=z(ve,2),rt=w(Qe),tt=w(rt),Te=z(rt,2);Yt(Te,1,()=>l(N).items,He=>He.id,(He,je)=>{var at=Dt(),At=pt(at);{var it=Re=>{var Xe=Dt(),Je=pt(Xe);Yt(Je,1,()=>l(je).addon_product.variants,ct=>ct.id,(ct,_t)=>{var lt=MR();const et=ot(()=>{var xt,Ut;return((xt=l(y)[l(N).id])==null?void 0:xt.productId)===l(je).addon_product.id&&((Ut=l(y)[l(N).id])==null?void 0:Ut.variantId)===l(_t).id}),Qt=ot(()=>l(_t).prices&&l(_t).prices.length>0?l(_t).prices[0].amount:0);var vt=w(lt),Nt=kd(()=>(()=>{var sr,dr;const xt=l(N).id,Ut=l(N).name,Kt=l(je).addon_product.id,Ot=l(je).addon_product.title,Mt=l(_t).id,Gt=l(_t).title,nr=(dr=(sr=l(_t).prices)==null?void 0:sr[0])==null?void 0:dr.amount;return Ht=>{console.log(" Radio button clicked ( ):",{addonId:xt,addonName:Ut,productId:Kt,productTitle:Ot,variantId:Mt,variantTitle:Gt,variantPrice:nr,radioId:Ht.target.id,timestamp:Date.now()}),F(xt,Kt,Mt)}})()),mt=z(vt,2),Lt=w(mt),Pt=w(Lt),zt=z(Lt,2),Et=w(zt);Me(xt=>{rr(lt,"for",`addon-${l(N).id??""}-${l(je).id??""}-${l(_t).id??""}`),Fr(lt,`odz-flex odz-items-center odz-gap-4 odz-p-4 odz-border-2 odz-rounded-lg odz-cursor-pointer odz-transition-all
                                                           ${(l(et)?"odz-border-red-500 odz-bg-red-50":"odz-border-gray-200 odz-bg-white hover:odz-border-gray-300")??""}`),rr(vt,"id",`addon-${l(N).id??""}-${l(je).id??""}-${l(_t).id??""}`),rr(vt,"name",`addon-${l(N).id??""}`),mu(vt,l(et)),Ue(Pt,l(_t).title||l(je).addon_product.title),Ue(Et,` ${xt??""}`)},[()=>gr(l(Qt))],ot),st("change",vt,function(...xt){var Ut;(Ut=l(Nt))==null||Ut.apply(this,xt)}),T(ct,lt)}),T(Re,Xe)};Ee(At,Re=>{l(je).addon_product.variants&&l(je).addon_product.variants.length>0&&Re(it)})}T(He,at)});var ge=z(Qe,2);{var Oe=He=>{var je=Dt();const at=ot(()=>l(N).items.find(Xe=>Xe.addon_product.id===l(y)[l(N).id].productId)),At=ot(()=>{var Xe,Je;return(Je=(Xe=l(at))==null?void 0:Xe.addon_product.variants)==null?void 0:Je.find(ct=>ct.id===l(y)[l(N).id].variantId)});var it=pt(je);{var Re=Xe=>{var Je=HR(),ct=w(Je),_t=z(w(ct),2),lt=z(w(_t)),et=w(lt),Qt=z(lt);Me(vt=>{Ue(et,l(At).title||l(at).addon_product.title),Ue(Qt,` ( ${vt??""})`)},[()=>{var vt,Nt;return gr(((Nt=(vt=l(At).prices)==null?void 0:vt[0])==null?void 0:Nt.amount)||0)}],ot),T(Xe,Je)};Ee(it,Xe=>{l(at)&&l(At)&&Xe(Re)})}T(He,je)};Ee(ge,He=>{l(y)[l(N).id]&&He(Oe)})}Me(()=>{Ue(qe,l(N).name),Ue(tt,`${l(N).name??""} `)}),T(ee,_e)}),T(Ce,ke)},k=Ce=>{var ke=qR();T(Ce,ke)};Ee(Le,Ce=>{l(f).addons.length>0?Ce(Y):Ce(k,!1)})}var pe=z(Le,2);const ze=ot(()=>A()||null),ye=ot(()=>d()!==void 0?d():null),le=ot(()=>({type:"double",buttons:[{text:" ",action:u()||(()=>{}),style:"secondary",icon:"arrow-left"},{text:" ",action:A()&&typeof d()=="number"&&c()?c():O,style:"primary",icon:"save",size:"large"}]}));VA(pe,{get productId(){return a()},get estimateId(){return l(ze)},get idx(){return l(ye)},get buttonConfig(){return l(le)}}),T(xe,Be)},he=xe=>{var Be=$R();T(xe,Be)};Ee(X,xe=>{l(f)?xe(R):xe(he,!1)},!0)}T(j,V)};Ee(I,j=>{l(m)?j(U):j(M,!1)},!0)}T(x,E)};Ee(fe,x=>{l(g)?x($):x(q,!1)})}var se=z(de,2);{var Ae=x=>{var E=VR(),I=w(E),U=z(w(I),2),M=w(U),j=z(M,2);st("click",M,D),st("click",j,Z),T(x,E)};Ee(se,x=>{l(b)&&x(Ae)})}T(n,ie),Rr(),r()}var XR=te('<button><div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><span class="odz-hidden sm:odz-inline"> </span></div></button>'),YR=te('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><div class="odz-w-full"><div class="odz-flex odz-w-full odz-border-b odz-border-gray-200"></div></div>  <div><div><!></div> <div><!></div> <div><!></div></div></div>');function Np(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(Ls,"$shopStore",t);let s=ft(e,"productId",8),i=ft(e,"estimateId",8,void 0),a=ft(e,"idx",8,void 0),A=ft(e,"onSave",8,void 0),d=Ie("product"),c=null,u=null,h=!1,f=null;const g=[{id:"product",label:"",description:"   "},{id:"print",label:"",description:"   "},{id:"addon",label:"",description:"  "}];function m(Z){var fe,$;const ie=l(d),de=Z;if(B(d,de),ur.setCurrentStep(de),Hn.getProductData(s())&&(Hn.saveToSession(s()),typeof window<"u"))try{const q=`tab-state-${s()}`,se={currentTab:de,previousTab:ie,timestamp:Date.now(),productId:s()};window.sessionStorage.setItem(q,JSON.stringify(se))}catch{}if(typeof window<"u")try{let q;const se=[i()&&a()!==void 0?`fixedEstimate_${s()}_${i()}_${a()}`:null,i()?`fixedEstimate_${s()}_${i()}`:null,a()!==void 0?`fixedEstimate_${s()}_${a()}`:null,`fixedEstimate_${s()}`].filter(Boolean);console.log("   - sessionStorage  :",{estimateId:i(),idx:a(),productId:s(),storageKeys:se});for(const x of se)try{const E=window.sessionStorage.getItem(x);if(E){const I=JSON.parse(E);if(console.log(" sessionStorage  :",{key:x,currentMethod:(fe=I==null?void 0:I.printSelection)==null?void 0:fe.currentMethod}),($=I==null?void 0:I.printSelection)!=null&&$.currentMethod&&I.printSelection.currentMethod!=="selection"){q=I.printSelection.currentMethod,console.log(" toMethod :",q);break}}}catch{}const Ae=new CustomEvent("printAmountRecalc",{detail:{productId:s(),fromTab:ie,toTab:de,toMethod:q,estimateId:i(),idx:a(),timestamp:Date.now(),source:"tab-change"}});window.dispatchEvent(Ae)}catch{}console.log("   ( ):",{from:ie,to:de,productId:s(),sessionSaved:!0})}function y(){l(d)==="product"?m("print"):l(d)==="print"&&m("addon")}function b(){if(typeof window>"u")return!1;try{const Z=`tab-state-${s()}`,ie=window.sessionStorage.getItem(Z);if(ie){const de=JSON.parse(ie);if(de.productId===s()&&de.currentTab)return B(d,de.currentTab),!0}}catch{}return!1}async function S(){try{await Hn.loadIntegratedProductData(s(),o().id)}catch{}}En(async()=>{const Z=i()&&i()!=="temp";await S();const ie=b();h=ie,Z||ur.initialize(s()),ie&&!Z&&ur.setCurrentStep(l(d)),c=ur.subscribe(de=>{de&&de.productId===s()&&!h&&(de.currentStep,l(d))}),u=Hn.subscribe(de=>{}),f=de=>{const ne=de.detail;ne&&["product","print","addon"].includes(ne)&&m(ne)},typeof window<"u"&&window.addEventListener("changeTab",f)}),Eo(()=>{c&&c(),u&&u(),typeof window<"u"&&f&&window.removeEventListener("changeTab",f)}),Kr();var F=YR(),P=w(F),L=w(P);Yt(L,5,()=>g,Ar,(Z,ie)=>{var de=XR(),ne=w(de),fe=w(ne),$=w(fe);Me(()=>{Fr(de,`odz-flex-1 odz-px-4 odz-py-3 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2
                           ${(l(d)===l(ie).id?"odz-text-red-600 odz-border-red-400 odz-bg-red-50":"odz-text-gray-600 odz-border-transparent hover:odz-text-gray-800 hover:odz-border-gray-300")??""}`),Ue($,l(ie).label)}),st("click",de,()=>m(l(ie).id)),T(Z,de)});var re=z(P,2),K=w(re),H=w(K);PR(H,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:()=>m("print")});var J=z(K,2),we=w(J);F5(we,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y});var O=z(J,2),D=w(O);WR(D,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y,get onSave(){return A()}}),Me(()=>{hA(K,"odz-hidden",l(d)!=="product"),hA(J,"odz-hidden",l(d)!=="print"),hA(O,"odz-hidden",l(d)!=="addon")}),T(n,F),Rr(),r()}var JR=te('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),ZR=te('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),e9=te('<dialog class="odz-modal odz-modal-open odz-backdrop:odz-bg-black odz-backdrop:odz-bg-opacity-50"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900">  </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"></button></div></div></dialog>');function t9(n,e){jr(e,!1);let t=ft(e,"isOpen",8,!1),r=ft(e,"estimateId",8),o=ft(e,"idx",8),s=ft(e,"productId",8),i=ft(e,"onClose",8),a=ft(e,"onSave",8),A=Ie(!0),d=Ie(""),c=Ie();async function u(){var D,Z,ie,de,ne;try{B(A,!0),B(d,"");const fe=await pB(r(),o());if(!fe.items||fe.items.length===0)throw new Error(`     . (estimateId: ${r()}, idx: ${o()})`);if(!((D=fe.items[0])!=null&&D.product_id))throw new Error(" ID   .");if(!fe.items.some(E=>E.variant&&E.variant.id)){const E=fe.items.map(I=>I.variant_id).filter(Boolean);throw E.length===0?new Error("    .  ."):new Error(`     . ( ID: ${E[0]})
     .  .`)}const q=vB(fe);if(typeof window<"u"){const E=r()||"temp";[`fixedEstimate_${s()}_${E}_${o()}`,`simplePrint_${s()}_${E}`,`detailedPrint_${s()}_${E}`,`fixedEstimate_${s()}`,`simplePrint_${s()}`,`detailedPrint_${s()}`].forEach(U=>{window.sessionStorage.removeItem(U)})}const se=r()||"temp",Ae=Date.now().toString(36)+Math.random().toString(36).substr(2),x={productId:s(),productSelection:q.fixedEstimateData.productSelection,printSelection:q.fixedEstimateData.printSelection||null,addonSelection:q.fixedEstimateData.addonSelection||null,additionalInfo:q.fixedEstimateData.additionalInfo||null,currentStep:"product",isDebugMode:!0,sessionId:Ae,estimateId:se};if(typeof window<"u"){const{sessionStorageData:E}=q,I=`fixedEstimate_${s()}_${se}_${o()}`;if(window.sessionStorage.setItem(I,JSON.stringify(x)),console.log(" sessionStorage   ( FixedEstimateState ):",{key:I,idx:o(),sessionId:x.sessionId,hasProductId:!!x.productId,quantityByVariant:q.fixedEstimateData.productSelection.quantityByVariant}),E.simplePrintState){const U=`simplePrint_${s()}_${se}`;window.sessionStorage.setItem(U,JSON.stringify(E.simplePrintState))}if(E.detailedPrintState.length>0&&((Z=x.printSelection)==null?void 0:Z.currentMethod)==="detailed"){const U=`detailedPrint_${s()}_${se}`;window.sessionStorage.setItem(U,JSON.stringify(E.detailedPrintState))}}ur.set(x),console.log(" fixedEstimateStore   ( ),    ...",{sessionId:x.sessionId,hasProductId:!!x.productId,hasProductSelection:!!x.productSelection,selectedColorsCount:((de=(ie=x.productSelection)==null?void 0:ie.selectedColors)==null?void 0:de.length)||0,totalQuantity:((ne=x.productSelection)==null?void 0:ne.totalQuantity)||0}),await new Promise(E=>setTimeout(E,50)),B(A,!1)}catch(fe){fe instanceof Error?B(d,fe.message):B(d,"    ."),B(A,!1)}}function h(){if(typeof window<"u"){const D=r()||"temp";[`fixedEstimate_${s()}_${D}_${o()}`,`simplePrint_${s()}_${D}`,`detailedPrint_${s()}_${D}`,`tab-state-${s()}`].forEach(ie=>{window.sessionStorage.removeItem(ie)})}ur.reset(),i()()}function f(){a()()}function g(D){D.key==="Escape"&&h()}function m(D){D.target===l(c)&&h()}Eo(()=>{if(typeof window<"u"){const D=r()||"temp";[`fixedEstimate_${s()}_${D}_${o()}`,`simplePrint_${s()}_${D}`,`detailedPrint_${s()}_${D}`,`tab-state-${s()}`].forEach(ie=>{window.sessionStorage.removeItem(ie)})}ur.reset()}),Jt(()=>(l(c),zn(t())),()=>{l(c)&&(t()?(l(c).showModal(),u()):l(c).close())}),Zn(),Kr();var y=e9(),b=w(y),S=w(b),F=z(w(S),2),P=w(F);Mu(P,{class:"odz-w-5 odz-h-5"});var L=z(S,2),re=w(L);{var K=D=>{var Z=JR();T(D,Z)},H=D=>{var Z=Dt(),ie=pt(Z);{var de=fe=>{var $=ZR(),q=z(w($),2),se=w(q);Me(()=>Ue(se,l(d))),T(fe,$)},ne=fe=>{Np(fe,{get productId(){return s()},get estimateId(){return r()},get idx(){return o()},onSave:f})};Ee(ie,fe=>{l(d)?fe(de):fe(ne,!1)},!0)}T(D,Z)};Ee(re,D=>{l(A)?D(K):D(H,!1)})}var J=z(L,2),we=w(J),O=z(we,2);ts(y,D=>B(c,D),()=>l(c)),Me(()=>O.disabled=l(A)),st("click",F,h),st("click",we,h),st("click",O,f),st("keydown",y,g),st("click",y,m),T(n,y),Rr()}var r9=te('<div class="odz-flex odz-items-center odz-justify-center odz-min-h-screen"><div class="odz-text-center"><div class="odz-w-12 odz-h-12 odz-border-4 odz-border-red-500 odz-border-t-transparent odz-rounded-full odz-animate-spin odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">  ...</p></div></div>'),n9=te('<div class="odz-mb-4"><button class="odz-flex odz-items-center odz-gap-2 odz-text-gray-600 hover:odz-text-gray-900 odz-transition-colors"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="odz-text-sm odz-font-medium"> </span></button></div>'),o9=te('<div class="odz-fixed odz-top-4 odz-right-4 odz-z-50 odz-bg-green-500 odz-text-white odz-px-4 odz-py-3 odz-rounded-lg odz-shadow-lg odz-flex odz-items-center odz-gap-2"><!> <span class="odz-text-sm"></span></div>'),s9=te('<button class="odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-px-6 odz-py-3 odz-rounded-lg odz-font-medium odz-text-sm odz-transition-colors"> </button>'),i9=te('<div class="odz-text-center odz-py-12"><!> <p class="odz-text-sm odz-text-gray-500 odz-mb-4">  </p> <!></div>'),a9=te('<div class="odz-flex odz-justify-between odz-text-sm odz-text-red-600"><span></span> <span class="odz-font-medium"> </span></div>'),A9=te('<span class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-5 odz-h-5 odz-border-2 odz-border-white odz-border-t-transparent odz-rounded-full odz-animate-spin"></div>  ...</span>'),l9=te('<div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-4 odz-border odz-border-gray-200 odz-sticky odz-bottom-0"><button class="odz-w-full odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-py-4 odz-rounded-lg odz-font-medium odz-text-base odz-transition-colors disabled:odz-opacity-50 disabled:odz-cursor-not-allowed"><!></button></div>'),d9=te('<div class="odz-max-w-5xl odz-mx-auto odz-px-4 odz-py-6"><!> <!> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><!></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-4"><div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder="  ()" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><select class="odz-w-20 odz-px-3 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"><option>010</option><option>011</option><option>016</option><option>017</option><option>018</option><option>019</option></select> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"></div></div> <div class="odz-col-span-full odz-border-t odz-border-gray-200 odz-my-2"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="" readonly="" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"> <button type="button" class="odz-px-6 odz-py-2.5 odz-bg-gray-700 hover:odz-bg-gray-800 odz-text-white odz-rounded-lg odz-text-sm odz-font-medium odz-transition-colors odz-whitespace-nowrap disabled:odz-opacity-50"> </button></div></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder="    " readonly="" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <select class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"><option></option><option></option><option></option><option></option></select></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="date" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> </label> <textarea class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 odz-resize-none disabled:odz-bg-gray-50" rows="3" placeholder="  "></textarea></div></div></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-3"><div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"> </span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <!> <div class="odz-border-t odz-border-gray-200 odz-pt-3 odz-flex odz-justify-between"><span class="odz-font-semibold odz-text-gray-900"> </span> <span class="odz-text-xl odz-font-bold odz-text-red-600"> </span></div></div></div> <!></div>'),c9=te('<div class="odz-min-h-screen odz-bg-gray-50"><!></div> <!> <!> <!> <!>',1);function u9(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(St,"$estimateStore",t),s=Ie();let i=ft(e,"mallType",8,""),a=ft(e,"customerId",8,""),A=ft(e,"sess",8,""),d=ft(e,"shopId",8,""),c=ft(e,"estimateId",8,void 0),u=ft(e,"returnTo",8,"list"),h=Ie(null),f=Ie(!1),g=Ie(!1),m=Ie(!1),y=Ie(!1),b=Ie(""),S=Ie(""),F=Ie(void 0),P=Ie(!1),L=Ie(!1),re=!1,K=Ie(!1),H=-1,J=Ie(""),we=Ie(-1),O=[],D=null,Z=!1;async function ie(){var ee;if(Z){console.log(" [Realtime]     ");return}if(!((ee=l(h))!=null&&ee.id)){console.log(" [Realtime]  ID ,  ");return}D&&clearTimeout(D),D=setTimeout(async()=>{try{console.log(" [Realtime]    :",l(h).id),await U(l(h).id),console.log(" [Realtime]    ")}catch(N){console.error(" [Realtime]   :",N)}},300)}function de(ee){console.log(" [Realtime]    :",ee);const N=Jp(ee,qe=>{console.log(" [Realtime] Estimate  :",qe),B(h,qe),B(m,Cd(qe.status))});O.push(()=>N.unsubscribe());const _e=oB(ee,qe=>{console.log(" [Realtime] EstimateItems  :",qe.eventType),ie()});O.push(()=>_e.unsubscribe());const ve=d1(ee,qe=>{console.log(" [Realtime] EstimatePrints  :",qe.eventType),ie()});O.push(()=>ve.unsubscribe());const Se=sB(ee,qe=>{console.log(" [Realtime] EstimateSimplePrints  :",qe.eventType),ie()});O.push(()=>Se.unsubscribe());const me=iB(ee,qe=>{console.log(" [Realtime] EstimateAddonItems  :",qe.eventType),ie()});O.push(()=>me.unsubscribe());const Ne=aB(ee,qe=>{console.log(" [Realtime] EstimateAdditionalCosts  :",qe.eventType),ie()});O.push(()=>Ne.unsubscribe());const De=l1(ee,qe=>{console.log(" [Realtime] EstimateComments  :",qe.eventType)});O.push(()=>De.unsubscribe()),console.log(" [Realtime]     (7 )")}function ne(){const{phone1:ee,phone2:N,phone3:_e}=o();ee&&N&&_e&&St.update(ve=>({...ve,orderPhone:`${ee}-${N}-${_e}`}))}function fe(ee){if(ee&&ee.includes("-")){const N=ee.split("-");N.length===3&&St.update(_e=>({..._e,phone1:N[0]||"010",phone2:N[1]||"",phone3:N[2]||""}))}}function $(){return re?Promise.resolve():new Promise(ee=>{const N=document.createElement("script");N.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",N.onload=()=>{re=!0,ee()},document.head.appendChild(N)})}async function q(){try{await $(),new window.daum.Postcode({oncomplete(ee){St.update(N=>({...N,postcode:ee.zonecode,address1:ee.roadAddress||ee.jibunAddress}))},onresize(ee){}}).open()}catch{B(y,!0),B(b,"  "),B(S,"     .    .")}}En(async()=>{Ls.set({id:d(),name:"",sess:A(),customer_id:a()}),sl.set({name:"",phone:"",address1:"",address2:"",postcode:"",mallType:i()}),c()?await Ae(c()):await se()}),Eo(()=>{O.forEach(ee=>{try{ee()}catch(N){console.error("   :",N)}}),O=[]});async function se(){B(f,!0);try{const ee=await n1(i(),a(),A());ee?(B(h,ee),B(m,Cd(ee.status)),await E(ee),de(ee.id)):(St.reset(),B(m,!0))}catch{B(y,!0),B(b," "),B(S,"     .")}finally{B(f,!1)}}async function Ae(ee){B(f,!0);try{const N=await o1(ee);N?(B(h,N),B(m,Cd(N.status)),await E(N),de(N.id)):(B(y,!0),B(b," "),B(S,"   ."))}catch{B(y,!0),B(b," "),B(S,"    .")}finally{B(f,!1)}}function x(ee){const N={delivery:"",pickup:"",quick:""};return ee&&N[ee]||""}async function E(ee){try{qt(St,dt(o).estimateName=ee.name||"",dt(o)),qt(St,dt(o).organizationName=ee.organization_name||"",dt(o)),qt(St,dt(o).orderName=ee.order_name||"",dt(o)),qt(St,dt(o).orderPhone=ee.order_phone||"",dt(o)),qt(St,dt(o).postcode=ee.postcode||"",dt(o)),qt(St,dt(o).address1=ee.address1||"",dt(o)),qt(St,dt(o).address2=ee.address2||"",dt(o)),qt(St,dt(o).comment=ee.comment||"",dt(o)),qt(St,dt(o).shippingMethod=x(ee.shipping_method),dt(o)),qt(St,dt(o).prefDeliveryDate=ee.pref_delivery_date||"",dt(o)),qt(St,dt(o).uploadMemo=ee.upload_memo||"",dt(o)),qt(St,dt(o).designConfirm=ee.design_confirm||"",dt(o)),ee.order_phone&&fe(ee.order_phone),await U(ee.id)}catch(N){N instanceof SyntaxError&&N.message.includes("JSON")?(B(y,!0),B(b," "),B(S,"    .  .")):(B(y,!0),B(b," "),B(S,"    ."))}}function I(ee){if(ee==null)return null;if(typeof ee=="object")return ee;if(typeof ee=="string")try{return JSON.parse(ee)}catch{return null}return ee}async function U(ee){var N;try{const _e=await _u(ee),ve=await Nd(ee),Se=await J_(ee),me=await Zp(ee),Ne=await u1(ee),De=[],qe={};for(const Qe of _e)if(Qe.product_id&&Qe.product){const rt=Qe.idx||0;if(qe[rt]||(qe[rt]={product:Qe.product,variants:[],quantity:0,prints:[],addons:{},print_type:Qe.print_type||"none",simplePrints:[]}),Qe.variant_id&&Qe.quantity){const tt=Qe.original_price?parseFloat(Qe.original_price.toString()):0,Te=Qe.price?parseFloat(Qe.price.toString()):0,ge=tt>0,Oe=ge?tt:Te,He={id:Qe.variant_id,quantity:Qe.quantity,prices:[{amount:Oe}],thumbnail:((N=Qe.variant)==null?void 0:N.thumbnail)||null,title:Qe.variant_title||` ${Qe.variant_id.substring(0,4)}`,discountInfo:ge&&Qe.discount_amount?{discountAmount:Qe.discount_amount,discountType:Qe.discount_type,discountValue:Qe.discount_value,discountDirection:Qe.discount_direction}:void 0,isDiscountedPrice:!ge};qe[rt].variants.push(He),qe[rt].quantity+=Qe.quantity}}for(const Qe of ve)if(Qe.template_id&&Qe.estimate_id){const rt=Qe.idx||0;if(qe[rt]){const tt={template:{id:Qe.template_id,name:""},price:Qe.price||0,colors:I(Qe.colors)||[],uploads:I(Qe.uploads)||null,title:"",objectId:Qe.object_id||null,variant_id:Qe.variant_id||null};qe[rt].prints.push(tt)}}for(const Qe of Se){const rt=Qe.idx||0;qe[rt]&&(qe[rt].simplePrints||(qe[rt].simplePrints=[]),qe[rt].simplePrints.push({object_id:Qe.object_id||null,title:Qe.title||" ",print_method:Qe.print_method||"none",uploaded_files:I(Qe.uploaded_files)||null,file_metadata:I(Qe.file_metadata)||null,price:Qe.price||0}))}me.forEach(Qe=>{const rt=Qe.idx||0;qe[rt]&&(qe[rt].addons||(qe[rt].addons={}),qe[rt].addons[Qe.addon_id]={productId:Qe.selected_product_id,variantId:Qe.selected_variant_id||"",price:Qe.price||0,quantity:Qe.quantity||1})});for(const Qe in qe)De.push({...qe[Qe],idx:parseInt(Qe)});qt(St,dt(o).products=De,dt(o)),qt(St,dt(o).index=(De.length>0,0),dt(o)),St.updateTotalAmounts()}catch(_e){throw _e instanceof SyntaxError&&_e.message.includes("JSON")?(B(y,!0),B(b," "),B(S,"     .  .")):(B(y,!0),B(b," "),B(S,"     .")),_e}}function M(ee){B(g,!1)}function j(ee){var N,_e;try{const ve=o().products[ee];if(!ve||ve.idx===void 0){B(y,!0),B(b," "),B(S,"    .");return}if(!((N=ve.product)!=null&&N.id)){B(y,!0),B(b," "),B(S," ID   .");return}if(!((_e=l(h))!=null&&_e.id)){B(y,!0),B(b," "),B(S,"    .");return}H=ee,B(J,ve.product.id),B(we,ve.idx),Z=!0,console.log(" [Edit]    - Realtime   "),B(K,!0)}catch{B(y,!0),B(b,""),B(S,"    .")}}function V(){B(K,!1),H=-1,B(J,""),B(we,-1),Z=!1,console.log(" [Edit]    - Realtime   ")}async function X(){var ee,N,_e,ve,Se,me,Ne,De,qe,Qe,rt,tt,Te;B(P,!0);try{if(!((ee=l(h))!=null&&ee.id))throw new Error(" ID .");if(l(we)===-1)throw new Error(" idx  .");const ge=pn(ur);if(!ge||!ge.productSelection)throw new Error("  .");if(!ge.productSelection.quantityByVariant||Object.keys(ge.productSelection.quantityByVariant).length===0)throw new Error("   .");await I0(l(h).id,l(we));const Oe=[],{quantityByVariant:He,variantDiscounts:je,variantsByColor:at}=ge.productSelection;let At="none";if(typeof window<"u"){const it=l(h).id||"temp",Re=`detailedPrint_${l(J)}_${it}`,Xe=`simplePrint_${l(J)}_${it}`,Je=window.sessionStorage.getItem(Re),ct=window.sessionStorage.getItem(Xe);if(Je)try{const _t=JSON.parse(Je);Array.isArray(_t)&&_t.length>0&&(At="detailed")}catch{}if(At==="none"&&ct)try{const _t=JSON.parse(ct);Array.isArray(_t)&&_t.length>0&&(At="simple")}catch{}if(At==="none"&&((N=ge.printSelection)!=null&&N.currentMethod)){const _t=ge.printSelection.currentMethod;(_t==="detailed"||_t==="simple"||_t==="self-design")&&(At=_t)}}console.log(" [Edit ]  print_type:",At),console.log(" [Edit ] currentStore.printSelection:",ge.printSelection);for(const it in He)for(const Re in He[it]){const Xe=He[it][Re];if(Xe>0){const Je=je==null?void 0:je[Re],ct=(_e=at[it])==null?void 0:_e.find(et=>et.id===Re),_t=((Se=(ve=ct==null?void 0:ct.prices)==null?void 0:ve[0])==null?void 0:Se.amount)||0,lt=(Je==null?void 0:Je.discountedPrice)||_t;Oe.push({estimate_id:l(h).id,product_id:ge.productId,variant_id:Re,quantity:Xe,price:lt,original_price:_t,discount_amount:(Je==null?void 0:Je.discountAmount)||0,discount_type:((me=Je==null?void 0:Je.discountInfo)==null?void 0:me.type)||null,discount_value:((Ne=Je==null?void 0:Je.discountInfo)==null?void 0:Ne.value)||null,discount_direction:((De=Je==null?void 0:Je.discountInfo)==null?void 0:De.direction)||null,discount_min_quantity:((qe=Je==null?void 0:Je.discountInfo)==null?void 0:qe.min_quantity)||null,discount_max_quantity:((Qe=Je==null?void 0:Je.discountInfo)==null?void 0:Qe.max_quantity)||null,idx:l(we),print_type:At})}}if(Oe.length>0){const{error:it}=await gt.from("estimate_items").insert(Oe);if(it)throw new Error(`  : ${it.message}`)}if(typeof window<"u"){const it=l(h).id||"temp",Re=`detailedPrint_${l(J)}_${it}`,Xe=window.sessionStorage.getItem(Re);if(Xe){const _t=JSON.parse(Xe),lt=((rt=ge.productSelection)==null?void 0:rt.totalQuantity)||0;async function et(vt,Nt){var mt,Lt,Pt,zt;try{const Et=((mt=vt.template)==null?void 0:mt.id)||vt.template_id;if(!Et)return vt.price||0;const xt=await Gd(Et);if(!(xt!=null&&xt.template_product_variants)||xt.template_product_variants.length===0)return vt.price||0;let Ut=null;vt.variant_id&&(Ut=xt.template_product_variants.find(nr=>nr.variant_id===vt.variant_id)),!Ut&&Array.isArray(vt.colors)&&vt.colors.length>0&&(Ut=xt.template_product_variants.find(nr=>nr.color_count===vt.colors.length)),Ut||(Ut=xt.template_product_variants[0]);const Kt=await mA(Ut.variant_id),Ot=((Pt=(Lt=Kt==null?void 0:Kt.prices)==null?void 0:Lt[0])==null?void 0:Pt.amount)||0;if(Ut.min_quantity&&Nt<Ut.min_quantity)return Ut.plate_price||0;let Mt=Ot;const Gt=((zt=xt.product)==null?void 0:zt.quantity_discounts)||[];if(Gt.length>0){const nr=vi(Nt,Ot,Gt);nr!=null&&nr.hasDiscount&&(Mt=nr.discountedPrice)}return Mt*Nt}catch{return vt.price||0}}const Qt=await Promise.all(_t.map(async vt=>{var mt,Lt,Pt,zt,Et,xt,Ut,Kt,Ot,Mt,Gt,nr,sr;const Nt=await et(vt,lt);return{estimate_id:l(h).id,template_id:((mt=vt.template)==null?void 0:mt.id)||vt.template_id||null,colors:vt.colors||[],price:Nt,object_id:vt.objectId||vt.object_id||null,variant_id:vt.variant_id||null,name_sheet:vt.nameSheet||vt.name_sheet||null,uploads:vt.uploads||null,original_price:vt.original_price||((Lt=vt.discountInfo)==null?void 0:Lt.originalPrice)||Nt||0,discount_amount:vt.discount_amount||((Pt=vt.discountInfo)==null?void 0:Pt.discountAmount)||0,discount_type:vt.discount_type||((Et=(zt=vt.discountInfo)==null?void 0:zt.discountDetails)==null?void 0:Et.type)||null,discount_value:vt.discount_value||((Ut=(xt=vt.discountInfo)==null?void 0:xt.discountDetails)==null?void 0:Ut.value)||null,discount_direction:vt.discount_direction||((Ot=(Kt=vt.discountInfo)==null?void 0:Kt.discountDetails)==null?void 0:Ot.direction)||null,discount_min_quantity:vt.discount_min_quantity||((Gt=(Mt=vt.discountInfo)==null?void 0:Mt.discountDetails)==null?void 0:Gt.min_quantity)||null,discount_max_quantity:vt.discount_max_quantity||((sr=(nr=vt.discountInfo)==null?void 0:nr.discountDetails)==null?void 0:sr.max_quantity)||null,idx:l(we)}}));if(Qt.length>0){const{error:vt}=await gt.from("estimate_prints").insert(Qt);if(vt)throw new Error(`   : ${vt.message}`)}}const Je=`simplePrint_${l(J)}_${it}`,ct=window.sessionStorage.getItem(Je);if(ct){const lt=JSON.parse(ct).map(et=>({estimate_id:l(h).id,object_id:et.objectId||et.object_id||null,title:et.title||null,print_method:et.printMethod||et.print_method||null,uploaded_files:et.uploadedFiles||et.uploaded_files||null,file_metadata:et.savedFileInfo||et.file_metadata||null,price:et.price||0,idx:l(we)}));if(lt.length>0){const{error:et}=await gt.from("estimate_simple_prints").insert(lt);if(et)throw new Error(`   : ${et.message}`)}}}if((tt=ge.addonSelection)!=null&&tt.selectedAddons){const it=[],Re=((Te=ge.productSelection)==null?void 0:Te.totalQuantity)||0;for(const[Xe,Je]of Object.entries(ge.addonSelection.selectedAddons)){const ct=Je;let _t=0;if(ct.variantId)try{const{data:lt,error:et}=await gt.from("prices").select("amount").eq("variant_id",ct.variantId).single();!et&&lt&&(_t=lt.amount)}catch{}it.push({estimate_id:l(h).id,addon_id:Xe,selected_product_id:ct.productId,selected_variant_id:ct.variantId||null,price:_t,quantity:Re,idx:l(we)})}if(it.length>0){const{error:Xe}=await gt.from("estimate_addon_items").insert(it);if(Xe)throw new Error(`  : ${Xe.message}`)}}B(L,!0),setTimeout(()=>{B(L,!1)},3e3),V(),await U(l(h).id)}catch(ge){let Oe="     .";ge instanceof Error&&(Oe=ge.message,ge.message.includes("duplicate key")?Oe="  .  .":ge.message.includes("foreign key")?Oe="   .     .":ge.message.includes("not null")?Oe="  .    .":ge.message.includes("permission")&&(Oe="   .  .")),B(y,!0),B(b," "),B(S,Oe)}finally{B(P,!1)}}async function R(ee){var N;try{const _e=o().products[ee];if(!_e||_e.idx===void 0){B(y,!0),B(b," "),B(S,"    .");return}if(!((N=l(h))!=null&&N.id)){B(y,!0),B(b," "),B(S,"    .");return}await I0(l(h).id,_e.idx),qt(St,dt(o).products=o().products.filter((ve,Se)=>Se!==ee),dt(o)),St.updateTotalAmounts()}catch{B(y,!0),B(b," "),B(S,"    .")}}function he(ee){const N={:"delivery",:"pickup",:"quick"};return ee&&N[ee]||null}async function xe(){var ee;if(!l(s)){B(y,!0),B(b," "),B(S,"    .");return}ne(),B(P,!0);try{if(!((ee=l(h))!=null&&ee.id))throw new Error("  .");const N=he(o().shippingMethod);await Dd(l(h).id,{name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:o().postcode,address1:o().address1,address2:o().address2,comment:o().comment||null,shipping_method:N,pref_delivery_date:o().prefDeliveryDate||null,upload_memo:o().uploadMemo||null,design_confirm:o().designConfirm||"none"}),await eB(l(h).id,"pending"),B(L,!0),setTimeout(()=>{B(L,!1)},3e3),B(y,!0),B(b," "),B(S,"  ."),B(F,()=>{window.location.href="/"})}catch(N){B(y,!0),B(b," "),B(S,N instanceof Error?N.message:"    ."),B(F,void 0)}finally{B(P,!1)}}Jt(()=>o(),()=>{B(s,o().estimateName&&o().orderName&&o().phone1&&o().phone2&&o().phone3&&o().postcode&&o().address1)}),Zn(),Kr();var Be=c9(),Le=pt(Be),Y=w(Le);{var k=ee=>{var N=r9();T(ee,N)},pe=ee=>{var N=d9(),_e=w(N);{var ve=tr=>{var Qr=n9(),on=w(Qr);st("click",on,()=>window.location.href=`?mode=${u()}`),T(tr,Qr)};Ee(_e,tr=>{c()&&tr(ve)})}var Se=z(_e,2);{var me=tr=>{var Qr=o9(),on=w(Qr);t1(on,{class:"odz-w-4 odz-h-4"}),T(tr,Qr)};Ee(Se,tr=>{l(L)&&tr(me)})}var Ne=z(Se,2),De=w(Ne);{var qe=tr=>{bB(tr,{onSelectProduct:j,onDeleteProduct:R,get isEditable(){return l(m)},set isEditable(Qr){B(m,Qr)},$$legacy:!0})},Qe=tr=>{var Qr=i9(),on=w(Qr);dE(on,{class:"odz-w-16 odz-h-16 odz-text-gray-300 odz-mx-auto odz-mb-4"});var Ro=z(on,4);{var bs=Io=>{var bo=s9();st("click",bo,()=>B(g,!0)),T(Io,bo)};Ee(Ro,Io=>{l(m)&&Io(bs)})}T(tr,Qr)};Ee(De,tr=>{o().products&&o().products.length>0?tr(qe):tr(Qe,!1)})}var rt=z(Ne,2),tt=w(rt),Te=w(tt),ge=z(w(Te),2),Oe=z(Te,2),He=z(w(Oe),2),je=z(Oe,2),at=z(w(je),2),At=z(je,2),it=z(w(At),2),Re=w(it);Me(()=>{o(),op(()=>{l(m)})});var Xe=w(Re);Xe.value=(Xe.__value="010")==null?"":"010";var Je=z(Xe);Je.value=(Je.__value="011")==null?"":"011";var ct=z(Je);ct.value=(ct.__value="016")==null?"":"016";var _t=z(ct);_t.value=(_t.__value="017")==null?"":"017";var lt=z(_t);lt.value=(lt.__value="018")==null?"":"018";var et=z(lt);et.value=(et.__value="019")==null?"":"019";var Qt=z(Re,2),vt=z(Qt,2),Nt=z(At,4),mt=z(w(Nt),2),Lt=w(mt),Pt=z(Lt,2),zt=z(Nt,2),Et=z(w(zt),2),xt=z(zt,2),Ut=z(w(xt),2),Kt=z(xt,2),Ot=z(w(Kt),2);Me(()=>{o(),op(()=>{l(m)})});var Mt=w(Ot);Mt.value=((Mt.__value="")==null,"");var Gt=z(Mt);Gt.value=(Gt.__value="")==null?"":"";var nr=z(Gt);nr.value=(nr.__value="")==null?"":"";var sr=z(nr);sr.value=(sr.__value="")==null?"":"";var dr=z(Kt,2),Ht=z(w(dr),2),wr=z(dr,2),Pr=z(w(wr),2),$r=z(rt,2),Ir=w($r),hr=w(Ir),Or=z(w(hr),2),xr=w(Or),ir=z(hr,2),vr=z(w(ir),2),kr=w(vr),un=z(ir,2),bn=z(w(un),2),zr=w(bn),lr=z(un,2);{var Fn=tr=>{var Qr=a9(),on=z(w(Qr),2),Ro=w(on);Me(bs=>Ue(Ro,`-${bs??""}`),[()=>gr(o().totalDiscountAmount)],ot),T(tr,Qr)};Ee(lr,tr=>{o().totalDiscountAmount>0&&tr(Fn)})}var Fo=z(lr,2),so=z(w(Fo),2),yo=w(so),ns=z($r,2);{var On=tr=>{var Qr=l9(),on=w(Qr),Ro=w(on);{var bs=bo=>{var os=A9();T(bo,os)},Io=bo=>{var os=Wr(" ");T(bo,os)};Ee(Ro,bo=>{l(P)?bo(bs):bo(Io,!1)})}Me(()=>on.disabled=l(P)||!l(s)),st("click",on,xe),T(tr,Qr)};Ee(ns,tr=>{l(m)&&tr(On)})}Me((tr,Qr,on)=>{ge.disabled=!l(m),He.disabled=!l(m),at.disabled=!l(m),Re.disabled=!l(m),Qt.disabled=!l(m),vt.disabled=!l(m),Pt.disabled=!l(m),Ut.disabled=!l(m),Ot.disabled=!l(m),Ht.disabled=!l(m),Pr.disabled=!l(m),Ue(xr,`${o().totalQuantity||0}`),Ue(kr,tr),Ue(zr,Qr),Ue(yo,on)},[()=>gr(o().totalProductAmount),()=>gr(o().totalPrintAmount),()=>gr(o().totalAmount)],ot),br(ge,()=>o().estimateName,tr=>qt(St,dt(o).estimateName=tr,dt(o))),br(He,()=>o().organizationName,tr=>qt(St,dt(o).organizationName=tr,dt(o))),br(at,()=>o().orderName,tr=>qt(St,dt(o).orderName=tr,dt(o))),sp(Re,()=>o().phone1,tr=>qt(St,dt(o).phone1=tr,dt(o))),st("change",Re,ne),br(Qt,()=>o().phone2,tr=>qt(St,dt(o).phone2=tr,dt(o))),st("input",Qt,ne),br(vt,()=>o().phone3,tr=>qt(St,dt(o).phone3=tr,dt(o))),st("input",vt,ne),br(Lt,()=>o().postcode,tr=>qt(St,dt(o).postcode=tr,dt(o))),st("click",Pt,q),br(Et,()=>o().address1,tr=>qt(St,dt(o).address1=tr,dt(o))),br(Ut,()=>o().address2,tr=>qt(St,dt(o).address2=tr,dt(o))),sp(Ot,()=>o().shippingMethod,tr=>qt(St,dt(o).shippingMethod=tr,dt(o))),br(Ht,()=>o().prefDeliveryDate,tr=>qt(St,dt(o).prefDeliveryDate=tr,dt(o))),br(Pr,()=>o().comment,tr=>qt(St,dt(o).comment=tr,dt(o))),T(ee,N)};Ee(Y,ee=>{l(f)?ee(k):ee(pe,!1)})}var ze=z(Le,2);{var ye=ee=>{G1(ee,{addProduct:M,productType:"godo",get isProductSearchOpen(){return l(g)},set isProductSearchOpen(N){B(g,N)},$$legacy:!0})};Ee(ze,ee=>{l(g)&&ee(ye)})}var le=z(ze,2);{var Ce=ee=>{t9(ee,{get isOpen(){return l(K)},get estimateId(){return l(h).id},get idx(){return l(we)},get productId(){return l(J)},onClose:V,onSave:X})};Ee(le,ee=>{l(K)&&l(h)&&ee(Ce)})}var ke=z(le,2);Wd(ke,{get onClose(){return l(F)},get isOpen(){return l(y)},set isOpen(ee){B(y,ee)},get title(){return l(b)},set title(ee){B(b,ee)},get message(){return l(S)},set message(ee){B(S,ee)},$$legacy:!0});var ce=z(ke,2);Xd(ce,{get isLoading(){return l(f)},set isLoading(ee){B(f,ee)},$$legacy:!0}),T(n,Be),Rr(),r()}const Ob={qnaId:null,title:"",content:"",customerName:"",customerPhone:"",customerEmail:"",products:[],nextIdx:0,editingIdx:null,editingProductId:null,isLoading:!1,isSaving:!1};function h9(){const{subscribe:n,set:e,update:t}=vl({...Ob});return{subscribe:n,reset:()=>{e({...Ob})},setQnaId:r=>{t(o=>({...o,qnaId:r}))},setTitle:r=>{t(o=>({...o,title:r}))},setContent:r=>{t(o=>({...o,content:r}))},setCustomerInfo:(r,o,s)=>{t(i=>({...i,customerName:r,customerPhone:o,customerEmail:s}))},addProduct:r=>{t(o=>{const s={...r,idx:o.nextIdx};return{...o,products:[...o.products,s],nextIdx:o.nextIdx+1}})},updateProduct:(r,o)=>{t(s=>({...s,products:s.products.map(i=>i.idx===r?{...i,...o}:i)}))},removeProduct:r=>{t(o=>({...o,products:o.products.filter(s=>s.idx!==r)}))},setEditing:(r,o)=>{t(s=>({...s,editingIdx:r,editingProductId:o}))},clearEditing:()=>{t(r=>({...r,editingIdx:null,editingProductId:null}))},setLoading:r=>{t(o=>({...o,isLoading:r}))},setSaving:r=>{t(o=>({...o,isSaving:r}))},setState:r=>{t(o=>({...o,...r}))},getState:()=>pn({subscribe:n})}}const li=h9();function kz(n,e,t){return`qna_product_${e}_${n||"new"}_${t}`}function Oz(n,e,t,r){const o=kz(n,e,t);try{sessionStorage.setItem(o,JSON.stringify(r))}catch(s){console.error("[QnaStore] Failed to save to session:",s)}}function f9(n,e,t){const r=kz(n,e,t);try{const o=sessionStorage.getItem(r);return o?JSON.parse(o):null}catch(o){return console.error("[QnaStore] Failed to load from session:",o),null}}function i0(n){try{const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&r.startsWith("qna_product_")&&r.includes(`_${n||"new"}_`)&&e.push(r)}e.forEach(t=>sessionStorage.removeItem(t))}catch(e){console.error("[QnaStore] Failed to clear all session:",e)}}async function p9(n){const{data:e,error:t}=await gt.rpc("hash_inquiry_password",{plain_password:n});if(t)throw console.error("[QnaService] hashPassword error:",t),t;return e}async function g9(n,e){const{data:t,error:r}=await gt.rpc("verify_inquiry_password",{inquiry_id_param:n,plain_password:e});if(r)throw console.error("[QnaService] verifyPassword error:",r),r;return t===!0}async function v9(n,e){try{const t=await Lg(n);return t?t.customer_id?e&&t.customer_id===e?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!1,message:"     ."}:{canAccess:!1,requiresPassword:!0,message:" ."}:{canAccess:!1,requiresPassword:!1,message:"   ."}}catch(t){return console.error("[QnaService] checkQnaAccess error:",t),{canAccess:!1,requiresPassword:!1,message:"     ."}}}async function m9(n,e){try{return await g9(n,e)?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!0,message:"  ."}}catch(t){return console.error("[QnaService] accessQnaWithPassword error:",t),{canAccess:!1,requiresPassword:!0,message:"    ."}}}function w9(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*1e3)).padStart(3,"0");return`Q${e}${t}${r}${o}${s}${i}`}async function y9(n){const e=w9();let t;!n.customer_id&&n.password&&(t=await p9(n.password));const{password:r,...o}=n,s={...o,inquiry_no:e,status:n.status||"pending"};t&&(s.password=t);const{data:i,error:a}=await gt.from("inquiries").insert(s).select().single();if(a)throw console.error("[QnaService] createQna error:",a),a;return i}async function Lg(n){const{data:e,error:t}=await gt.from("inquiries").select("*").eq("id",n).single();if(t){if(t.code==="PGRST116")return null;throw console.error("[QnaService] getQnaById error:",t),t}return e}async function b9(n,e,t){let r=gt.from("inquiries").select("*").eq("shop_id",n).order("created_at",{ascending:!1});const{data:o,error:s}=await r;if(s)throw console.error("[QnaService] getQnaList error:",s),s;return o||[]}async function e2(n,e){const{data:t,error:r}=await gt.from("inquiries").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(r)throw console.error("[QnaService] updateQna error:",r),r;return t}async function Dz(n,e){return e2(n,{status:e})}async function _9(n){const{error:e}=await gt.from("inquiries").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQna error:",e),e}async function B9(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await gt.from("inquiry_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaItems error:",o),o;return r||[]}async function t2(n){const{data:e,error:t}=await gt.from("inquiry_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaItems error:",t),t;return e||[]}async function x9(n){const{error:e}=await gt.from("inquiry_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaItems error:",e),e}async function z9(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await gt.from("inquiry_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaPrints error:",o),o;return r||[]}async function r2(n){const{data:e,error:t}=await gt.from("inquiry_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaPrints error:",t),t;return e||[]}async function C9(n){const{error:e}=await gt.from("inquiry_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaPrints error:",e),e}async function Nz(n,e){const{data:t,error:r}=await gt.from("inquiry_comments").insert({...e,inquiry_id:n}).select().single();if(r)throw console.error("[QnaService] addQnaComment error:",r),r;return e.writer==="manager"&&await Dz(n,"answered"),t}async function S9(n){const{data:e,error:t}=await gt.from("inquiry_comments").select("*").eq("inquiry_id",n).order("created_at",{ascending:!0});if(t)throw console.error("[QnaService] getQnaComments error:",t),t;return e||[]}async function E9(n){const{error:e}=await gt.from("inquiry_comments").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQnaComment error:",e),e}async function F9(n){const e=await Lg(n);if(!e)throw new Error("   .");const t=await t2(n),r=await r2(n),o=await Mz(n),s=await Hz(n),i=await s1({shop_id:e.shop_id,customer_id:e.customer_id,name:e.title,order_name:e.customer_name,phone:e.customer_phone,email:e.customer_email,status:"temp",memo:`: ${e.inquiry_no}

${e.content}`});if(!i.id)throw new Error("  .");for(const a of t)await i1({estimate_id:i.id,idx:a.idx,product_id:a.product_id,variant_id:a.variant_id,quantity:a.quantity});for(const a of r)a.print_type==="simple"?await F0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,title:a.title,print_method:a.print_method,uploaded_files:a.uploaded_files,file_metadata:a.file_metadata}):a.print_type==="detailed"&&await a1({estimate_id:i.id,idx:a.idx,object_id:a.object_id,template_id:a.template_id,colors:a.colors,uploads:a.uploaded_files});for(const a of o)await F0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,print_method:a.print_method,template_id:a.template_id,selected_colors:a.selected_colors,print_config:a.print_config,uploads:a.uploads,name_sheet:a.name_sheet,memo:a.memo});for(const a of s)await c1({estimate_id:i.id,idx:a.idx,addon_id:a.addon_id,selected_product_id:a.selected_product_id,selected_variant_id:a.selected_variant_id});return await e2(n,{converted_estimate_id:i.id,status:"closed"}),await Nz(n,{writer:"system",writer_name:"",content:` . (: ${i.estimate_no})`}),i.id}function I9(n,e){return gt.channel(`qna-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`id=eq.${n}`},e).subscribe()}function Q9(n,e){return gt.channel(`qna-list-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`shop_id=eq.${n}`},e).subscribe()}function U9(n,e){return gt.channel(`qna-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiry_comments",filter:`inquiry_id=eq.${n}`},e).subscribe()}function n2(n){n&&gt.removeChannel(n)}async function T9(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await gt.from("inquiry_simple_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaSimplePrints error:",o),o;return r||[]}async function Mz(n){const{data:e,error:t}=await gt.from("inquiry_simple_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaSimplePrints error:",t),t;return e||[]}async function L9(n){const{error:e}=await gt.from("inquiry_simple_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaSimplePrints error:",e),e}async function P9(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await gt.from("inquiry_addon_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaAddonItems error:",o),o;return r||[]}async function Hz(n){const{data:e,error:t}=await gt.from("inquiry_addon_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaAddonItems error:",t),t;if(!e||e.length===0)return[];const r=[...new Set(e.map(h=>h.addon_id).filter(Boolean))],o=[...new Set(e.map(h=>h.selected_product_id).filter(Boolean))],s=[...new Set(e.map(h=>h.selected_variant_id).filter(Boolean))],[i,a,A]=await Promise.all([r.length>0?gt.from("product_addons").select("id, name").in("id",r):{data:[]},o.length>0?gt.from("products").select("id, title").in("id",o):{data:[]},s.length>0?gt.from("product_variants").select("id, title").in("id",s):{data:[]}]),d=new Map((i.data||[]).map(h=>[h.id,h.name])),c=new Map((a.data||[]).map(h=>[h.id,h.title])),u=new Map((A.data||[]).map(h=>[h.id,h.title]));return e.map(h=>({...h,addon_name:d.get(h.addon_id)||null,selected_product_name:c.get(h.selected_product_id)||null,selected_variant_name:u.get(h.selected_variant_id)||null}))}async function k9(n){const{error:e}=await gt.from("inquiry_addon_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaAddonItems error:",e),e}async function O9(n){const{data:e}=await gt.from("inquiry_items").select("quantity, price").eq("inquiry_id",n);let t=0,r=0;if(e)for(const h of e){const f=h.quantity||0,g=h.price||0;t+=f*g,r+=f}const{data:o}=await gt.from("inquiry_prints").select("price").eq("inquiry_id",n);let s=0;if(o)for(const h of o)s+=h.price||0;const{data:i}=await gt.from("inquiry_simple_prints").select("price").eq("inquiry_id",n);if(i)for(const h of i)s+=h.price||0;const{data:a}=await gt.from("inquiry_addon_items").select("price, quantity").eq("inquiry_id",n);let A=0;if(a)for(const h of a){const f=h.quantity||1,g=h.price||0;A+=f*g}const{data:d}=await gt.from("inquiry_additional_costs").select("amount").eq("inquiry_id",n);let c=0;if(d)for(const h of d)c+=h.amount||0;const u=t+s+A+c;return{product_amount:t,print_amount:s,addon_amount:A,additional_amount:c,total_quantity:r,total_amount:u}}async function D9(n){const e=await O9(n),{error:t}=await gt.from("inquiries").update({product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,updated_at:new Date().toISOString()}).eq("id",n);if(t)throw console.error("[QnaService] updateInquirySummary error:",t),t}async function N9(n){const{data:e,error:t}=await gt.from("inquiry_estimates").select(`
      id,
      inquiry_id,
      estimate_id,
      created_at,
      created_by,
      memo,
      estimates:estimate_id (
        estimate_no,
        status,
        total_amount,
        created_at,
        name
      )
    `).eq("inquiry_id",n).order("created_at",{ascending:!1});if(t)throw console.error("[QnaService] getLinkedEstimates error:",t),t;return(e||[]).map(r=>({id:r.id,inquiry_id:r.inquiry_id,estimate_id:r.estimate_id,created_at:r.created_at,created_by:r.created_by,memo:r.memo,estimate:r.estimates}))}var M9=te(`<div class="odz-text-center odz-py-8 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-dashed odz-border-gray-300"><!> <p class="odz-text-gray-500">  .</p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   ' '  .</p></div>`),H9=te('<div class="odz-flex odz-gap-1"><button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" title=""><!></button> <button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-error" title=""><!></button></div>'),j9=te('<li class="odz-flex odz-justify-between"><span> </span> <span class="odz-font-medium"> </span></li>'),R9=te('<div class="odz-mt-3 odz-bg-gray-50 odz-rounded odz-p-2"><ul class="odz-text-xs odz-text-gray-600 odz-space-y-1"></ul></div>'),q9=te('<span class="odz-text-gray-400"></span>'),K9=te('<span class="odz-text-blue-800"> </span> <!>',1),$9=te('<span class="odz-flex odz-items-center odz-gap-1"></span>'),V9=te("<span> </span>"),G9=te('<span class="odz-text-blue-500"> </span>'),W9=te('<span class="odz-text-gray-500"> </span>'),X9=te('<li class="odz-flex odz-flex-wrap odz-items-center odz-gap-1"><!> <!> <!></li>'),Y9=te('<div class="odz-mt-2 odz-bg-blue-50 odz-rounded odz-p-2"><p class="odz-text-xs odz-font-medium odz-text-blue-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-blue-700 odz-space-y-1"></ul></div>'),J9=te('<span class="odz-text-green-600"> </span>'),Z9=te('<span class="odz-text-green-500"> </span>'),eq=te('<span class="odz-text-gray-500"> </span>'),tq=te('<li class="odz-flex odz-items-center odz-gap-1"><span> </span> <!> <!> <!></li>'),rq=te('<div class="odz-mt-2 odz-bg-green-50 odz-rounded odz-p-2"><p class="odz-text-xs odz-font-medium odz-text-green-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-green-700 odz-space-y-1"></ul></div>'),nq=te('<span class="odz-text-purple-500"> </span>'),oq=te('<span class="odz-text-purple-600"> </span>'),sq=te('<span class="odz-text-purple-600 odz-font-medium odz-whitespace-nowrap"> </span>'),iq=te('<li class="odz-flex odz-items-center odz-justify-between"><span class="odz-flex odz-items-center odz-gap-1 odz-flex-wrap"><span class="odz-font-medium"> </span> <!> <!></span> <!></li>'),aq=te('<div class="odz-mt-2 odz-bg-purple-50 odz-rounded odz-p-2"><p class="odz-text-xs odz-font-medium odz-text-purple-800 odz-mb-1"></p> <ul class="odz-text-xs odz-text-purple-700 odz-space-y-1"></ul></div>'),Aq=te('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-border odz-border-gray-200"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-items-start odz-justify-between"><div class="odz-flex-1"><h4 class="odz-font-semibold odz-text-gray-900"> </h4> <p class="odz-text-sm odz-text-gray-500 odz-mt-1"> : <span class="odz-font-medium"> </span></p></div> <!></div> <div class="odz-mt-3 odz-pt-3 odz-border-t odz-border-gray-100"><div class="odz-flex odz-items-start odz-gap-2 odz-text-sm"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2 odz-text-sm odz-mt-2"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2 odz-text-sm odz-mt-2"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <!> <!> <!> <!></div></div></div>'),lq=te('<div class="odz-modal odz-modal-open" style="z-index: 9999;"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error"></button></div></div> <button type="button" class="odz-modal-backdrop" aria-label=""></button></div>'),dq=te('<div class="odz-space-y-3"><!></div> <!>',1);function jz(n,e){jr(e,!1);const t=Xp();let r=ft(e,"products",24,()=>[]),o=ft(e,"disabled",8,!1),s=Ie(!1),i=Ie(null);function a(L,re){L.stopPropagation(),L.preventDefault(),!o()&&t("edit",{idx:re.idx,productId:re.productId})}function A(L,re){L.stopPropagation(),L.preventDefault(),!o()&&(B(i,re),B(s,!0))}function d(){l(i)&&t("delete",{idx:l(i).idx}),B(s,!1),B(i,null)}function c(){B(s,!1),B(i,null)}function u(L){return!L.variants||L.variants.length===0?" ":L.variants.map(re=>`${re.variantName||re.variantId}: ${re.quantity}`).join(", ")}function h(L){const re=L.prints&&L.prints.length>0,K=L.simplePrints&&L.simplePrints.length>0;if(!re&&!K)return" ";const H=[];return re&&H.push(`  ${L.prints.length}`),K&&H.push(`  ${L.simplePrints.length}`),H.join(", ")}function f(L){return!L.addons||L.addons.length===0?" ":` ${L.addons.length}`}Kr();var g=dq(),m=pt(g),y=w(m);{var b=L=>{var re=M9(),K=w(re);S0(K,{class:"odz-w-12 odz-h-12 odz-mx-auto odz-text-gray-400 odz-mb-3"}),T(L,re)},S=L=>{var re=Dt(),K=pt(re);Yt(K,1,r,H=>H.idx,(H,J)=>{var we=Aq(),O=w(we),D=w(O),Z=w(D),ie=w(Z),de=w(ie),ne=z(ie,2),fe=z(w(ne)),$=w(fe),q=z(Z,2);{var se=N=>{var _e=H9(),ve=w(_e),Se=w(ve);W_(Se,{class:"odz-w-4 odz-h-4"});var me=z(ve,2),Ne=w(me);r1(Ne,{class:"odz-w-4 odz-h-4"}),st("click",ve,De=>a(De,l(J))),st("click",me,De=>A(De,l(J))),T(N,_e)};Ee(q,N=>{o()||N(se)})}var Ae=z(D,2),x=w(Ae),E=w(x);S0(E,{class:"odz-w-4 odz-h-4 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var I=z(E,2),U=z(w(I),2),M=w(U),j=z(x,2),V=w(j);sE(V,{class:"odz-w-4 odz-h-4 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var X=z(V,2),R=z(w(X),2),he=w(R),xe=z(j,2),Be=w(xe);lE(Be,{class:"odz-w-4 odz-h-4 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var Le=z(Be,2),Y=z(w(Le),2),k=w(Y),pe=z(xe,2);{var ze=N=>{var _e=R9(),ve=w(_e);Yt(ve,5,()=>l(J).variants,Ar,(Se,me)=>{var Ne=j9(),De=w(Ne),qe=w(De),Qe=z(De,2),rt=w(Qe);Me(()=>{Ue(qe,l(me).variantName||l(me).variantId),Ue(rt,`${l(me).quantity??""}`)}),T(Se,Ne)}),T(N,_e)};Ee(pe,N=>{l(J).variants&&l(J).variants.length>0&&N(ze)})}var ye=z(pe,2);{var le=N=>{var _e=Y9(),ve=z(w(_e),2);Yt(ve,5,()=>l(J).prints,Ar,(Se,me)=>{var Ne=X9(),De=w(Ne);{var qe=Oe=>{var He=$9();Yt(He,5,()=>l(me).parentTemplates,Ar,(je,at,At)=>{var it=K9(),Re=pt(it),Xe=w(Re),Je=z(Re,2);{var ct=_t=>{var lt=q9();T(_t,lt)};Ee(Je,_t=>{At<l(me).parentTemplates.length-1&&_t(ct)})}Me(()=>Ue(Xe,l(at).name)),T(je,it)}),T(Oe,He)},Qe=Oe=>{var He=Dt(),je=pt(He);{var at=At=>{var it=V9(),Re=w(it);Me(()=>Ue(Re,`: ${(l(me).templateName||l(me).templateId)??""}`)),T(At,it)};Ee(je,At=>{l(me).templateId&&At(at)},!0)}T(Oe,He)};Ee(De,Oe=>{l(me).parentTemplates&&l(me).parentTemplates.length>0?Oe(qe):Oe(Qe,!1)})}var rt=z(De,2);{var tt=Oe=>{var He=G9(),je=w(He);Me(()=>Ue(je,`(${l(me).colors.length??""})`)),T(Oe,He)};Ee(rt,Oe=>{l(me).colors&&Array.isArray(l(me).colors)&&l(me).colors.length>0&&Oe(tt)})}var Te=z(rt,2);{var ge=Oe=>{var He=W9(),je=w(He);Me(()=>Ue(je,`- ${l(me).memo??""}`)),T(Oe,He)};Ee(Te,Oe=>{l(me).memo&&Oe(ge)})}T(Se,Ne)}),T(N,_e)};Ee(ye,N=>{l(J).prints&&l(J).prints.length>0&&N(le)})}var Ce=z(ye,2);{var ke=N=>{var _e=rq(),ve=z(w(_e),2);Yt(ve,5,()=>l(J).simplePrints,Ar,(Se,me)=>{var Ne=tq(),De=w(Ne),qe=w(De),Qe=z(De,2);{var rt=He=>{var je=J9(),at=w(je);Me(()=>Ue(at,`(${l(me).printMethod??""})`)),T(He,je)};Ee(Qe,He=>{l(me).printMethod&&He(rt)})}var tt=z(Qe,2);{var Te=He=>{var je=Z9(),at=w(je);Me(()=>Ue(at,`(${l(me).selectedColors.length??""})`)),T(He,je)};Ee(tt,He=>{l(me).selectedColors&&Array.isArray(l(me).selectedColors)&&l(me).selectedColors.length>0&&He(Te)})}var ge=z(tt,2);{var Oe=He=>{var je=eq(),at=w(je);Me(()=>Ue(at,`- ${l(me).memo??""}`)),T(He,je)};Ee(ge,He=>{l(me).memo&&He(Oe)})}Me(()=>Ue(qe,l(me).objectId||" ")),T(Se,Ne)}),T(N,_e)};Ee(Ce,N=>{l(J).simplePrints&&l(J).simplePrints.length>0&&N(ke)})}var ce=z(Ce,2);{var ee=N=>{var _e=aq(),ve=z(w(_e),2);Yt(ve,5,()=>l(J).addons,Ar,(Se,me)=>{var Ne=iq(),De=w(Ne),qe=w(De),Qe=w(qe),rt=z(qe,2);{var tt=je=>{var at=nq(),At=w(at);Me(()=>Ue(At,`(${l(me).selectedProductName||""}${(l(me).selectedVariantName?` - ${l(me).selectedVariantName}`:"")??""})`)),T(je,at)};Ee(rt,je=>{(l(me).selectedProductName||l(me).selectedVariantName)&&je(tt)})}var Te=z(rt,2);{var ge=je=>{var at=oq(),At=w(at);Me(()=>Ue(At,`x${l(me).quantity??""}`)),T(je,at)};Ee(Te,je=>{l(me).quantity&&l(me).quantity>1&&je(ge)})}var Oe=z(De,2);{var He=je=>{var at=sq(),At=w(at);Me(it=>Ue(At,`${it??""}`),[()=>l(me).price.toLocaleString()],ot),T(je,at)};Ee(Oe,je=>{l(me).price&&je(He)})}Me(()=>Ue(Qe,l(me).addonName||l(me).addonId)),T(Se,Ne)}),T(N,_e)};Ee(ce,N=>{l(J).addons&&l(J).addons.length>0&&N(ee)})}Me((N,_e,ve)=>{Ue(de,l(J).productName||l(J).productId),Ue($,l(J).totalQuantity),Ue(M,N),Ue(he,_e),Ue(k,ve)},[()=>u(l(J)),()=>h(l(J)),()=>f(l(J))],ot),T(H,we)}),T(L,re)};Ee(y,L=>{r().length===0?L(b):L(S,!1)})}var F=z(m,2);{var P=L=>{var re=lq(),K=w(re),H=z(w(K),2),J=w(H),we=z(H,2),O=w(we),D=z(O,2),Z=z(K,2);Me(()=>{var ie,de;return Ue(J,`'${(((ie=l(i))==null?void 0:ie.productName)||((de=l(i))==null?void 0:de.productId))??""}'  ?`)}),st("click",O,c),st("click",D,d),st("click",Z,c),T(L,re)};Ee(F,L=>{l(s)&&L(P)})}T(n,g),Rr()}var cq=te('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),uq=te('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),hq=te('<dialog class="odz-modal odz-modal-open odiz-app odz-items-center odz-justify-center"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative odz-rounded-xl odz-shadow-2xl odz-bg-white"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"> </button></div></div></dialog>');function fq(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(li,"$qnaStore",t),s=Ie(),i=Ie(),a=Xp();let A=ft(e,"isOpen",8,!1),d=ft(e,"productId",8),c=ft(e,"shopId",8);ft(e,"mallType",8,"");let u=ft(e,"qnaId",8,null),h=ft(e,"editingIdx",8,null),f=Ie(!0),g=Ie(""),m=Ie(),y=Ie("");async function b(){try{B(f,!0),B(g,"");const I=await Du(d(),c());if(B(y,(I==null?void 0:I.title)||(I==null?void 0:I.name)||d()),h()!==null){const U=f9(u(),d(),h());U?await F(U):await S()}else await S();B(f,!1)}catch(I){console.error("[QnaProductSelector]  :",I),I instanceof Error?B(g,I.message):B(g,"     ."),B(f,!1)}}async function S(){P();const I=Date.now().toString(36)+Math.random().toString(36).substr(2),U={productId:d(),productSelection:{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!1,sessionId:I,estimateId:l(s)};if(ur.set(U),typeof window<"u"){const M=`fixedEstimate_${d()}_${l(s)}_${l(i)}`;window.sessionStorage.setItem(M,JSON.stringify(U))}}async function F(I){const U=Date.now().toString(36)+Math.random().toString(36).substr(2),M={productId:d(),productSelection:I.productSelection||{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:I.printSelection||null,addonSelection:I.addonSelection||null,additionalInfo:I.additionalInfo||null,currentStep:"product",isDebugMode:!1,sessionId:U,estimateId:l(s)};if(typeof window<"u"){const j=`fixedEstimate_${d()}_${l(s)}_${l(i)}`,V=`simplePrint_${d()}_${l(s)}`,X=`detailedPrint_${d()}_${l(s)}`;window.sessionStorage.removeItem(V),window.sessionStorage.removeItem(X),window.sessionStorage.setItem(j,JSON.stringify(M)),I.simplePrintState&&(window.sessionStorage.setItem(V,JSON.stringify(I.simplePrintState)),console.log("[QnaProductSelector] simplePrint  :",I.simplePrintState)),I.detailedPrintState&&(window.sessionStorage.setItem(X,JSON.stringify(I.detailedPrintState)),console.log("[QnaProductSelector] detailedPrint  :",I.detailedPrintState))}ur.set(M),await new Promise(j=>setTimeout(j,50))}function P(){typeof window<"u"&&[`fixedEstimate_${d()}_${l(s)}_${l(i)}`,`simplePrint_${d()}_${l(s)}`,`detailedPrint_${d()}_${l(s)}`,`tab-state-${d()}`].forEach(U=>window.sessionStorage.removeItem(U))}function L(){var I,U,M;try{const j=pn(ur);if(!j.productSelection||j.productSelection.totalQuantity===0){alert("   .");return}const V=[],X=j.productSelection.quantityByVariant||{},R=j.productSelection.variantsByColor||{};for(const[k,pe]of Object.entries(X)){if(typeof pe!="object"||pe===null)continue;const ze=R[k]||[];for(const[ye,le]of Object.entries(pe))if(le&&Number(le)>0){const Ce=ze.find(ce=>ce.id===ye),ke=((U=(I=Ce==null?void 0:Ce.prices)==null?void 0:I[0])==null?void 0:U.amount)||0;V.push({variantId:ye,variantName:(Ce==null?void 0:Ce.name)||(Ce==null?void 0:Ce.title)||`${k} - ${ye}`,quantity:Number(le),price:ke,optionValues:(Ce==null?void 0:Ce.optionValues)||{color:k}})}}const he=[],xe=[],Be=[];if(j.printSelection){const k=j.printSelection.currentMethod;if(k==="simple"){const pe=`simplePrint_${d()}_${l(s)}`,ze=window.sessionStorage.getItem(pe);if(ze)try{const ye=JSON.parse(ze);Array.isArray(ye)&&ye.forEach(le=>{xe.push({objectId:le.objectId,printMethod:le.printMethod,templateId:le.templateId,selectedColors:le.selectedColors,printConfig:le.printConfig,uploads:le.uploadedFiles||le.uploads,nameSheet:le.nameSheet,memo:le.memo,price:le.price||0})})}catch(ye){console.error("[QnaProductSelector]     :",ye)}}else if(k==="detailed"){const pe=`detailedPrint_${d()}_${l(s)}`,ze=window.sessionStorage.getItem(pe);if(ze)try{const ye=JSON.parse(ze);Array.isArray(ye)&&ye.forEach(le=>{var ke,ce,ee;const Ce=[];le.parentTemplates&&Array.isArray(le.parentTemplates)&&le.parentTemplates.forEach(N=>{Ce.push({id:N.id,name:N.name||N.id})}),(ke=le.template)!=null&&ke.id&&Ce.push({id:le.template.id,name:le.template.name||le.template.id}),he.push({objectId:le.objectId,printType:"detailed",templateId:(ce=le.template)==null?void 0:ce.id,templateName:(ee=le.template)==null?void 0:ee.name,parentTemplates:Ce.length>0?Ce:void 0,colors:le.colors,uploadedFiles:le.uploads,memo:le.memo,price:le.price||0})})}catch(ye){console.error("[QnaProductSelector]     :",ye)}}}if(console.log("[QnaProductSelector] currentState.addonSelection:",j.addonSelection),(M=j.addonSelection)!=null&&M.selectedAddons){const k=j.addonSelection.selectedAddons;console.log("[QnaProductSelector] selectedAddons entries:",Object.entries(k));for(const[pe,ze]of Object.entries(k))if(console.log("[QnaProductSelector] Processing addon:",{addonId:pe,selection:ze}),ze&&typeof ze=="object"){const ye=ze;console.log("[QnaProductSelector] sel.productId:",ye.productId),ye.productId?(Be.push({addonId:pe,selectedProductId:ye.productId,selectedVariantId:ye.variantId,price:ye.price||0,quantity:ye.quantity||1}),console.log("[QnaProductSelector] Addon added to array:",Be[Be.length-1])):console.log("[QnaProductSelector] Addon skipped - no productId")}}else console.log("[QnaProductSelector] No selectedAddons in addonSelection");console.log("[QnaProductSelector] Final addons array:",Be);const Le={productId:d(),productName:l(y),variants:V,prints:he,simplePrints:xe,addons:Be,totalQuantity:j.productSelection.totalQuantity||0},Y={productSelection:j.productSelection,printSelection:j.printSelection,addonSelection:j.addonSelection,additionalInfo:j.additionalInfo,simplePrintState:null,detailedPrintState:null};if(typeof window<"u"){const k=`simplePrint_${d()}_${l(s)}`,pe=window.sessionStorage.getItem(k);pe&&(Y.simplePrintState=JSON.parse(pe));const ze=`detailedPrint_${d()}_${l(s)}`,ye=window.sessionStorage.getItem(ze);ye&&(Y.detailedPrintState=JSON.parse(ye))}Oz(u(),d(),l(i),Y),a("save",{idx:l(i),productData:Le,isEdit:h()!==null}),re()}catch(j){console.error("[QnaProductSelector]  :",j),alert("   .")}}function re(){P(),ur.reset(),a("close")}function K(I){I.key==="Escape"&&re()}function H(I){I.target===l(m)&&re()}Eo(()=>{document.body.style.overflow="",P(),ur.reset()}),Jt(()=>zn(u()),()=>{B(s,`qna_${u()||"new"}`)}),Jt(()=>(zn(h()),o()),()=>{B(i,h()??o().nextIdx)}),Jt(()=>(l(m),zn(A())),()=>{l(m)&&(A()?(document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(U=>{U instanceof HTMLElement&&(U.scrollTop=0)}),l(m).showModal(),b()):(document.body.style.overflow="",l(m).close()))}),Zn(),Kr();var J=hq(),we=w(J),O=w(we),D=w(O),Z=w(D),ie=z(D,2),de=w(ie);Mu(de,{class:"odz-w-5 odz-h-5"});var ne=z(O,2),fe=w(ne);{var $=I=>{var U=cq();T(I,U)},q=I=>{var U=Dt(),M=pt(U);{var j=X=>{var R=uq(),he=z(w(R),2),xe=w(he);Me(()=>Ue(xe,l(g))),T(X,R)},V=X=>{Np(X,{get productId(){return d()},get estimateId(){return l(s)},get idx(){return l(i)},onSave:L})};Ee(M,X=>{l(g)?X(j):X(V,!1)},!0)}T(I,U)};Ee(fe,I=>{l(f)?I($):I(q,!1)})}var se=z(ne,2),Ae=w(se),x=z(Ae,2),E=w(x);ts(J,I=>B(m,I),()=>l(m)),Me(()=>{Ue(Z,`${(h()!==null?" ":" ")??""} - ${(l(y)||d())??""}`),x.disabled=l(f),Ue(E,h()!==null?"":"")}),st("click",ie,re),st("click",Ae,re),st("click",x,L),st("keydown",J,K),st("click",J,H),T(n,J),Rr(),r()}var pq=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-text-gray-500"><!> <p> ...</p></div>'),gq=te('<label class="odz-label"><span class="odz-label-text-alt odz-text-error">4  </span></label>'),vq=te('<label class="odz-label"><span class="odz-label-text-alt odz-text-error">  </span></label>'),mq=te('<div class="odz-mt-6 odz-p-4 odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><!> <h4 class="odz-font-semibold odz-text-yellow-900">   </h4></div> <p class="odz-text-sm odz-text-yellow-700 odz-mb-4">     .</p> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control"><label class="odz-label" for="password"><span class="odz-label-text"> <span class="odz-text-error">*</span></span></label> <input type="password" id="password" placeholder=" (4~16)" minlength="4" maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full"> <!></div> <div class="odz-form-control"><label class="odz-label" for="passwordConfirm"><span class="odz-label-text">  <span class="odz-text-error">*</span></span></label> <input type="password" id="passwordConfirm" placeholder=" " maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full"> <!></div></div></div>'),wq=te('<div class="odz-mt-4"><!></div>'),yq=te('<div class="odz-text-center odz-py-8 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-500">  .</p> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-mt-2 odz-text-primary"><!>  </button></div>'),bq=te("<!>  ...",1),_q=te("<!> ",1),Bq=te('<div class="odz-space-y-6"><div class="odz-flex odz-items-center odz-justify-between"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2></div> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-border odz-border-gray-200"><div class="odz-card-body odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-mb-4 odz-text-gray-800 odz-flex odz-items-center odz-gap-2"><!>  </h3> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control"><label class="odz-label" for="customerName"><span class="odz-label-text"> <span class="odz-text-error">*</span></span></label> <input type="text" id="customerName" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full"></div> <div class="odz-form-control"><label class="odz-label" for="customerPhone"><span class="odz-label-text"></span></label> <div class="odz-flex odz-items-center odz-gap-2"><input type="text" placeholder="010" maxlength="3" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center"></div></div> <div class="odz-form-control md:odz-col-span-2"><label class="odz-label" for="customerEmail"><span class="odz-label-text"></span></label> <div class="odz-relative"><!> <input type="email" id="customerEmail" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-pl-10"></div></div></div> <!></div></div> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-border odz-border-gray-200"><div class="odz-card-body odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-mb-4 odz-text-gray-800 odz-flex odz-items-center odz-gap-2"><!>  </h3> <div class="odz-space-y-4"><div class="odz-form-control"><label class="odz-label" for="title"><span class="odz-label-text"> <span class="odz-text-error">*</span></span></label> <input type="text" id="title" placeholder="  " class="odz-input odz-input-bordered odz-input-md odz-w-full"></div> <div class="odz-form-control"><label class="odz-label" for="content"><span class="odz-label-text"> <span class="odz-text-error">*</span></span></label> <textarea id="content" placeholder="  " rows="6" class="odz-textarea odz-textarea-bordered odz-w-full"></textarea></div></div></div></div> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-border odz-border-gray-200"><div class="odz-card-body odz-p-6"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-flex odz-items-center odz-gap-2"><!>   <span class="odz-text-sm odz-font-normal odz-text-gray-500">()</span></h3> <button type="button" class="odz-btn odz-btn-sm odz-btn-outline"><!>  </button></div> <!></div></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div>'),xq=te('<div class="odiz-app odz-max-w-3xl odz-mx-auto odz-p-4 svelte-fas30z"><!> <!> <!> <dialog class="cancel-confirm-dialog svelte-fas30z"><div class="cancel-confirm-box svelte-fas30z"><h3 class="odz-font-bold odz-text-lg"></h3> <p class="odz-py-4">    . ?</p> <div class="odz-flex odz-justify-end odz-gap-2"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error">, </button></div></div></dialog></div>');function zq(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(li,"$qnaStore",t),s=Ie(),i=Ie(),a=Ie(),A=Ie(),d=Ie();let c=ft(e,"mallType",8,""),u=ft(e,"customerId",8,"");ft(e,"sess",8,"");let h=ft(e,"shopId",8,""),f=ft(e,"qnaId",8,""),g=ft(e,"onSubmitSuccess",8,void 0),m=ft(e,"onCancel",8,void 0),y=Ie(""),b=Ie(""),S=Ie(""),F=Ie(""),P=Ie(""),L=Ie(""),re=Ie(""),K=Ie(!1),H=Ie(!1),J=Ie(!1),we=Ie(!1),O=Ie(""),D=Ie(),Z=null,ie=Ie([]),de=Ie(""),ne=Ie("");En(async()=>{li.reset(),f()&&await fe()}),Eo(()=>{li.reset(),i0(f()||null)});async function fe(){B(K,!0);try{if(Z=await Lg(f()),Z){if(B(y,Z.title||""),B(b,Z.content||""),B(S,Z.customer_name||""),B(re,Z.customer_email||""),Z.customer_phone){const N=Z.customer_phone.split("-");N.length===3&&(B(F,N[0]),B(P,N[1]),B(L,N[2]))}const le=await t2(f()),Ce=await r2(f()),ke=await Mz(f()),ce=await Hz(f()),ee=new Map;for(const N of le){const _e=N.idx||0;ee.has(_e)||ee.set(_e,{idx:_e,productId:N.product_id,productName:N.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const ve=ee.get(_e);ve.variants.push({variantId:N.variant_id,variantName:N.variant_name,quantity:N.quantity||1,optionValues:N.option_values}),ve.totalQuantity+=N.quantity||1}for(const N of Ce){const _e=N.idx||0;if(ee.has(_e)){let ve=[];if(N.template_id)try{ve=(await Hu(N.template_id)).map(Ne=>({id:Ne.id,name:Ne.name,image_url:Ne.image_url})),console.log("[QnaRegister] parentTemplates :",ve)}catch(me){console.warn("[QnaRegister] parentTemplates  :",me)}let Se=N.title;if(!Se&&N.object_id)try{const me=await f1(N.object_id);me&&(Se=me.title||me.name,console.log("[QnaRegister] print area title :",Se))}catch(me){console.warn("[QnaRegister] print area  :",me)}ee.get(_e).prints.push({objectId:N.object_id,printType:N.print_type,title:Se,printMethod:N.print_method,templateId:N.template_id,colors:N.colors,uploadedFiles:N.uploaded_files,fileMetadata:N.file_metadata,memo:N.memo,parentTemplates:ve})}}for(const N of ke){const _e=N.idx||0;ee.has(_e)&&ee.get(_e).simplePrints.push({objectId:N.object_id,printMethod:N.print_method,templateId:N.template_id,selectedColors:N.selected_colors,printConfig:N.print_config,uploads:N.uploads,nameSheet:N.name_sheet,memo:N.memo})}for(const N of ce){const _e=N.idx||0;ee.has(_e)&&ee.get(_e).addons.push({addonId:N.addon_id,addonName:N.addon_name||void 0,selectedProductId:N.selected_product_id,selectedProductName:N.selected_product_name||void 0,selectedVariantId:N.selected_variant_id,selectedVariantName:N.selected_variant_name||void 0,price:N.price||0,quantity:N.quantity||1})}B(ie,Array.from(ee.values())),li.setState({qnaId:f(),title:l(y),content:l(b),customerName:l(S),customerPhone:l(d),customerEmail:l(re),products:l(ie),nextIdx:l(ie).length>0?Math.max(...l(ie).map(N=>N.idx))+1:0})}}catch(le){console.error("[QnaRegister] loadQna error:",le),alert("   .")}finally{B(K,!1)}}function $(){B(J,!0)}function q(le){B(J,!1),B(O,le),B(we,!0)}function se(le){const{productData:Ce,isEdit:ke,idx:ce}=le.detail;Ce&&(ke&&ce!==void 0?li.updateProduct(ce,Ce):li.addProduct(Ce),B(ie,[...o().products])),B(we,!1),B(O,""),li.clearEditing()}function Ae(le){var ee,N;const{idx:Ce,productId:ke}=le.detail,ce=o().products.find(_e=>_e.idx===Ce);if(ce){const _e={},ve=[];for(const Qe of ce.variants){const rt=((ee=Qe.optionValues)==null?void 0:ee.color)||((N=Qe.optionValues)==null?void 0:N.)||"default";_e[rt]||(_e[rt]={},ve.push(rt)),_e[rt][Qe.variantId]=Qe.quantity}const Se={};for(const Qe of ce.addons||[])Se[Qe.addonId]={productId:Qe.selectedProductId,variantId:Qe.selectedVariantId,price:Qe.price||0,quantity:Qe.quantity||1};let me=null,Ne=null,De=null;ce.simplePrints&&ce.simplePrints.length>0&&(me=ce.simplePrints.map(Qe=>({objectId:Qe.objectId,printMethod:Qe.printMethod,templateId:Qe.templateId,selectedColors:Qe.selectedColors,printConfig:Qe.printConfig,uploadedFiles:Qe.uploads,uploads:Qe.uploads,nameSheet:Qe.nameSheet,memo:Qe.memo,price:Qe.price||0})),De={currentMethod:"simple"}),ce.prints&&ce.prints.length>0&&(Ne=ce.prints.map(Qe=>({objectId:Qe.objectId,title:Qe.title,template:Qe.templateId?{id:Qe.templateId,name:Qe.templateName||Qe.title}:null,parentTemplates:Qe.parentTemplates||[],colors:Qe.colors,uploads:Qe.uploadedFiles,memo:Qe.memo,price:Qe.price||0})),De={currentMethod:"detailed"},console.log("[QnaRegister] detailedPrintState :",Ne));const qe={productSelection:{selectedColors:ve,quantityByVariant:_e,totalQuantity:ce.totalQuantity,variantsData:[]},printSelection:De,addonSelection:{selectedAddons:Se},additionalInfo:null,simplePrintState:me,detailedPrintState:Ne};Oz(o().qnaId,ke,Ce,qe),console.log("[QnaRegister]    sessionStorage :",{idx:Ce,productId:ke,sessionData:qe})}li.setEditing(Ce,ke),B(O,ke),B(we,!0)}function x(le){const{idx:Ce}=le.detail;li.removeProduct(Ce),B(ie,[...o().products])}async function E(le){if(le&&(le.stopPropagation(),le.preventDefault()),!l(A)){l(s)&&!f()?l(de)?l(de).length<4?alert(" 4  ."):l(de)!==l(ne)?alert("  ."):alert(", ,    ."):alert("   ."):alert(", ,    .");return}B(H,!0);try{let Ce;if(f()&&Z?(Ce=await e2(f(),{title:l(y),content:l(b),customer_name:l(S),customer_phone:l(d),customer_email:l(re)}),await x9(f()),await C9(f()),await L9(f()),await k9(f())):Ce=await y9({shop_id:h(),customer_id:u()||void 0,customer_name:l(S),customer_phone:l(d),customer_email:l(re),title:l(y),content:l(b),password:l(s)?l(de):void 0}),!Ce.id)throw new Error("  .");const ke=o().products;if(ke.length>0){const ce=[];for(const ve of ke)for(const Se of ve.variants)ce.push({idx:ve.idx,product_id:ve.productId,variant_id:Se.variantId,quantity:Se.quantity,price:Se.price||0,product_name:ve.productName,variant_name:Se.variantName,option_values:Se.optionValues});ce.length>0&&await B9(Ce.id,ce);const ee=[];for(const ve of ke)for(const Se of ve.prints||[])ee.push({idx:ve.idx,object_id:Se.objectId,print_type:Se.printType,title:Se.title,print_method:Se.printMethod,template_id:Se.templateId,colors:Se.colors,uploaded_files:Se.uploadedFiles,file_metadata:Se.fileMetadata,memo:Se.memo,price:Se.price||0});ee.length>0&&await z9(Ce.id,ee);const N=[];for(const ve of ke)for(const Se of ve.simplePrints||[])N.push({idx:ve.idx,object_id:Se.objectId,print_method:Se.printMethod,template_id:Se.templateId,selected_colors:Se.selectedColors,print_config:Se.printConfig,uploads:Se.uploads,name_sheet:Se.nameSheet,memo:Se.memo,price:Se.price||0});N.length>0&&await T9(Ce.id,N);const _e=[];console.log("[QnaRegister] Processing addon save for products:",ke.map(ve=>{var Se;return{idx:ve.idx,productId:ve.productId,addonsCount:((Se=ve.addons)==null?void 0:Se.length)||0,addons:ve.addons}}));for(const ve of ke){console.log("[QnaRegister] Product addons:",ve.addons);for(const Se of ve.addons||[])_e.push({idx:ve.idx,addon_id:Se.addonId,selected_product_id:Se.selectedProductId,selected_variant_id:Se.selectedVariantId,price:Se.price||0,quantity:Se.quantity||1})}console.log("[QnaRegister] addonsToSave:",_e),_e.length>0?(console.log("[QnaRegister] Saving addons to database..."),await P9(Ce.id,_e),console.log("[QnaRegister] Addons saved successfully")):console.log("[QnaRegister] No addons to save"),await D9(Ce.id)}if(i0(f()||null),g()&&Ce.id)g()(Ce.id);else{const ce=f()?`?qnaMode=detail&qnaId=${Ce.id}`:"?qnaMode=list";window.location.href=window.location.pathname+ce}}catch(Ce){console.error("[QnaRegister] submitQna error:",Ce),alert("  .  .")}finally{B(H,!1)}}function I(le){le.stopPropagation(),le.preventDefault(),l(D)&&l(D).showModal()}function U(){l(D)&&l(D).close(),i0(f()||null),m()?m()():window.location.href=window.location.pathname+"?qnaMode=list"}function M(){l(D)&&l(D).close()}Jt(()=>zn(u()),()=>{B(s,!u())}),Jt(()=>(l(de),l(ne)),()=>{B(i,!l(de)||!l(ne)||l(de)===l(ne))}),Jt(()=>(l(s),zn(f()),l(de),l(i)),()=>{B(a,!l(s)||!f()&&l(de).length>=4&&l(de).length<=16&&l(i))}),Jt(()=>(l(y),l(b),l(S),zn(u()),zn(f()),l(de),l(ne)),()=>{B(A,l(y).trim()&&l(b).trim()&&l(S).trim()&&(u()||f()||l(de).trim()&&l(de)===l(ne)&&l(de).length>=4))}),Jt(()=>(l(F),l(P),l(L)),()=>{B(d,l(F)&&l(P)&&l(L)?`${l(F)}-${l(P)}-${l(L)}`:"")}),Zn(),Kr();var j=xq(),V=w(j);{var X=le=>{var Ce=pq(),ke=w(Ce);zd(ke,{class:"odz-w-8 odz-h-8 odz-animate-spin odz-mb-2"}),T(le,Ce)},R=le=>{var Ce=Bq(),ke=w(Ce),ce=w(ke),ee=w(ce),N=z(ke,2),_e=w(N),ve=w(_e),Se=w(ve);E0(Se,{class:"odz-w-5 odz-h-5"});var me=z(ve,2),Ne=w(me),De=z(w(Ne),2),qe=z(Ne,2),Qe=z(w(qe),2),rt=w(Qe),tt=z(rt,4),Te=z(tt,4),ge=z(qe,2),Oe=z(w(ge),2),He=w(Oe);nE(He,{class:"odz-w-4 odz-h-4 odz-absolute odz-left-3 odz-top-1/2 -odz-translate-y-1/2 odz-text-gray-400"});var je=z(He,2),at=z(me,2);{var At=Ht=>{var wr=mq(),Pr=w(wr),$r=w(Pr);rE($r,{class:"odz-w-5 odz-h-5 odz-text-yellow-700"});var Ir=z(Pr,4),hr=w(Ir),Or=z(w(hr),2),xr=z(Or,2);{var ir=zr=>{var lr=gq();T(zr,lr)};Ee(xr,zr=>{l(de)&&l(de).length<4&&zr(ir)})}var vr=z(hr,2),kr=z(w(vr),2),un=z(kr,2);{var bn=zr=>{var lr=vq();T(zr,lr)};Ee(un,zr=>{l(ne)&&!l(i)&&zr(bn)})}Me(()=>{hA(Or,"odz-input-error",l(de)&&l(de).length<4),hA(kr,"odz-input-error",l(ne)&&!l(i))}),br(Or,()=>l(de),zr=>B(de,zr)),br(kr,()=>l(ne),zr=>B(ne,zr)),T(Ht,wr)};Ee(at,Ht=>{l(s)&&!f()&&Ht(At)})}var it=z(N,2),Re=w(it),Xe=w(Re),Je=w(Xe);Lf(Je,{class:"odz-w-5 odz-h-5"});var ct=z(Xe,2),_t=w(ct),lt=z(w(_t),2),et=z(_t,2),Qt=z(w(et),2),vt=z(it,2),Nt=w(vt),mt=w(Nt),Lt=w(mt),Pt=w(Lt);S0(Pt,{class:"odz-w-5 odz-h-5"});var zt=z(Lt,2),Et=w(zt);bu(Et,{class:"odz-w-4 odz-h-4 odz-mr-1"});var xt=z(mt,2);{var Ut=Ht=>{var wr=wq(),Pr=w(wr);jz(Pr,{get products(){return l(ie)},$$events:{edit:Ae,delete:x}}),T(Ht,wr)},Kt=Ht=>{var wr=yq(),Pr=z(w(wr),2),$r=w(Pr);bu($r,{class:"odz-w-4 odz-h-4 odz-mr-1"}),st("click",Pr,$),T(Ht,wr)};Ee(xt,Ht=>{l(ie).length>0?Ht(Ut):Ht(Kt,!1)})}var Ot=z(vt,2),Mt=w(Ot),Gt=z(Mt,2),nr=w(Gt);{var sr=Ht=>{var wr=bq(),Pr=pt(wr);zd(Pr,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),T(Ht,wr)},dr=Ht=>{var wr=_q(),Pr=pt(wr);aE(Pr,{class:"odz-w-4 odz-h-4 odz-mr-2"});var $r=z(Pr);Me(()=>Ue($r,` ${(f()?"":"")??""}`)),T(Ht,wr)};Ee(nr,Ht=>{l(H)?Ht(sr):Ht(dr,!1)})}Me(()=>{Ue(ee,f()?" ":" "),Gt.disabled=!l(A)||l(H)}),br(De,()=>l(S),Ht=>B(S,Ht)),br(rt,()=>l(F),Ht=>B(F,Ht)),br(tt,()=>l(P),Ht=>B(P,Ht)),br(Te,()=>l(L),Ht=>B(L,Ht)),br(je,()=>l(re),Ht=>B(re,Ht)),br(lt,()=>l(y),Ht=>B(y,Ht)),br(Qt,()=>l(b),Ht=>B(b,Ht)),st("click",zt,$),st("click",Mt,Ht=>I(Ht)),st("click",Gt,Ht=>E(Ht)),T(le,Ce)};Ee(V,le=>{l(K)?le(X):le(R,!1)})}var he=z(V,2);{var xe=le=>{G1(le,{addProduct:q,get productType(){return c()},excludeNoProcess:!0,get isProductSearchOpen(){return l(J)},set isProductSearchOpen(Ce){B(J,Ce)},$$legacy:!0})};Ee(he,le=>{l(J)&&le(xe)})}var Be=z(he,2);{var Le=le=>{const Ce=ot(()=>f()||null);fq(le,{get isOpen(){return l(we)},get productId(){return l(O)},get shopId(){return h()},get mallType(){return c()},get qnaId(){return l(Ce)},get editingIdx(){return o().editingIdx},$$events:{save:se,close:()=>{B(we,!1),B(O,""),li.clearEditing()}}})};Ee(Be,le=>{l(we)&&le(Le)})}var Y=z(Be,2),k=w(Y),pe=z(w(k),4),ze=w(pe),ye=z(ze,2);ts(Y,le=>B(D,le),()=>l(D)),st("click",ze,M),st("click",ye,U),st("click",Y,z_(M)),T(n,j),Rr(),r()}var Cq=te(' <span class="odz-font-mono odz-font-medium odz-text-primary"> </span>',1),Sq=te('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),Eq=te("<!>  ...",1),Fq=te('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-sm"><button type="button" class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"><!></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-flex odz-items-center odz-gap-2"><!>  </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-4"><!>  .</p> <div class="odz-form-control odz-mb-4"><input type="password" placeholder=" (4~16)" maxlength="16" class="odz-input odz-input-bordered odz-w-full"> <!></div> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div></div>');function Iq(n,e){jr(e,!1);let t=ft(e,"isOpen",8,!1),r=ft(e,"qnaId",8,""),o=ft(e,"inquiryNo",8,"");const s=Xp();let i=Ie(""),a=Ie(!1),A=Ie("");async function d(){if(!l(i).trim()){B(A," .");return}if(l(i).length<4){B(A," 4  .");return}B(a,!0),B(A,""),s("verify",{qnaId:r(),password:l(i)})}function c(y,b){B(a,!1),!y&&b&&B(A,b)}function u(){B(i,""),B(A,""),B(a,!1),s("cancel")}function h(y){y.key==="Enter"&&!l(a)?d():y.key==="Escape"&&u()}Jt(()=>zn(t()),()=>{t()&&(B(i,""),B(A,""),B(a,!1))}),Zn(),Kr();var f=Dt(),g=pt(f);{var m=y=>{var b=Fq(),S=w(b),F=w(S),P=w(F);Mu(P,{class:"odz-w-4 odz-h-4"});var L=z(F,2),re=w(L);G_(re,{class:"odz-w-5 odz-h-5 odz-text-warning"});var K=z(L,2),H=w(K);{var J=se=>{var Ae=Cq(),x=z(pt(Ae)),E=w(x);Me(()=>Ue(E,o())),T(se,Ae)};Ee(H,se=>{o()&&se(J)})}var we=z(K,2),O=w(we),D=z(O,2);{var Z=se=>{var Ae=Sq(),x=w(Ae),E=w(x);Me(()=>Ue(E,l(A))),T(se,Ae)};Ee(D,se=>{l(A)&&se(Z)})}var ie=z(we,2),de=w(ie),ne=z(de,2),fe=w(ne);{var $=se=>{var Ae=Eq(),x=pt(Ae);zd(x,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),T(se,Ae)},q=se=>{var Ae=Wr("");T(se,Ae)};Ee(fe,se=>{l(a)?se($):se(q,!1)})}Me(se=>{F.disabled=l(a),O.disabled=l(a),hA(O,"odz-input-error",l(A)),de.disabled=l(a),ne.disabled=se},[()=>l(a)||!l(i).trim()],ot),st("click",F,u),br(O,()=>l(i),se=>B(i,se)),st("keydown",O,h),st("click",de,u),st("click",ne,d),st("click",b,z_(u)),T(y,b)};Ee(g,y=>{t()&&y(m)})}return T(n,f),B_(e,"setVerifyResult",c),Rr({setVerifyResult:c})}var Qq=te('<button class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!>  </button>'),Uq=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),Tq=te('<div class="odz-alert odz-alert-error odz-shadow-sm"><!> <span> </span> <button class="odz-btn odz-btn-sm odz-btn-ghost"> </button></div>'),Lq=te('<button class="odz-btn odz-btn-primary odz-btn-sm odz-mt-4 odz-gap-1"><!>   </button>'),Pq=te('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">  </p> <!>',1),kq=te('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   </p>',1),Oq=te('<div class="odz-text-center odz-py-16 odz-bg-gray-50 odz-rounded-xl odz-border odz-border-dashed odz-border-gray-300"><!> <!></div>'),Dq=te('<span class="odz-badge odz-badge-xs odz-badge-info"></span>'),Nq=te('<tr class="odz-cursor-pointer hover:odz-bg-gray-50 odz-transition-colors"><td class="odz-text-center"><span class="odz-inline-flex odz-items-center odz-gap-1 odz-font-mono odz-text-xs odz-text-gray-500"> <!></span></td><td class="odz-text-center"><span><!> </span></td><td><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-font-medium odz-text-gray-900 odz-truncate odz-max-w-xs hover:odz-text-primary odz-transition-colors"> </span> <!></div></td><td class="odz-text-center odz-text-sm odz-text-gray-600 odz-hidden sm:odz-table-cell"> </td><td class="odz-text-center odz-text-xs odz-text-gray-400 odz-hidden md:odz-table-cell"> </td></tr>'),Mq=te('<span class="odz-text-gray-300"> </span>'),Hq=te('<div class="odz-bg-white odz-rounded-xl odz-border odz-border-gray-200 odz-overflow-hidden"><table class="odz-table odz-table-sm odz-w-full"><thead><tr class="odz-bg-gray-50 odz-border-b odz-border-gray-200"><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-20 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-left odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden sm:odz-table-cell"></th><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden md:odz-table-cell"></th></tr></thead><tbody class="odz-divide-y odz-divide-gray-100"></tbody></table></div> <div class="odz-text-center odz-text-xs odz-text-gray-400 odz-pt-2"> <!></div>',1),jq=te('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2> <!></div> <div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2"><div class="odz-relative odz-flex-1"><!> <input type="text" placeholder=", ,  ..." class="odz-input odz-input-bordered odz-input-sm odz-w-full odz-pl-9"></div> <select class="odz-select odz-select-bordered odz-select-sm odz-w-full sm:odz-w-32"><option></option><option></option><option></option><option></option></select></div> <!></div> <!>',1);function Rq(n,e){jr(e,!1);let t=ft(e,"shopId",8),r=ft(e,"customerId",8,void 0),o=ft(e,"onSelectQna",8,void 0),s=ft(e,"onCreateNew",8,void 0),i=Ie([]),a=Ie([]),A=Ie(!0),d=Ie(""),c=Ie(""),u=Ie("all"),h=null,f=Ie(!1),g=Ie(null),m=Ie();En(async()=>{await y(),b()}),Eo(()=>{h&&n2(h)});async function y(){try{B(A,!0),B(d,""),B(i,await b9(t(),r()))}catch(V){console.error("[QnaList]   :",V),B(d,"     .")}finally{B(A,!1)}}function b(){h=Q9(t(),async V=>{console.log("[QnaList]  :",V),await y()})}function S(V){switch(V){case"pending":return{label:"",class:"odz-badge-warning",icon:ap};case"answered":return{label:"",class:"odz-badge-success",icon:t1};case"closed":return{label:"",class:"odz-badge-neutral",icon:yu};default:return{label:"",class:"odz-badge-ghost",icon:ap}}}function F(V){return V?new Date(V).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}async function P(V){if(V.id)try{const X=await v9(V.id,r());X.canAccess?o()&&o()(V.id):X.requiresPassword?(B(g,V),B(f,!0)):alert(X.message||"  .")}catch(X){console.error("[QnaList]    :",X),alert("     .")}}async function L(V){const{qnaId:X,password:R}=V.detail;try{const he=await m9(X,R);he.canAccess?(B(f,!1),B(g,null),o()&&o()(X)):l(m)&&l(m).setVerifyResult(!1,he.message||"  .")}catch(he){console.error("[QnaList]   :",he),l(m)&&l(m).setVerifyResult(!1,"    .")}}function re(){B(f,!1),B(g,null)}function K(){s()&&s()()}Jt(()=>(l(i),l(c),l(u)),()=>{let V=l(i);if(l(c).trim()){const X=l(c).toLowerCase();V=V.filter(R=>{var he,xe,Be;return((he=R.title)==null?void 0:he.toLowerCase().includes(X))||((xe=R.customer_name)==null?void 0:xe.toLowerCase().includes(X))||((Be=R.inquiry_no)==null?void 0:Be.toLowerCase().includes(X))})}l(u)!=="all"&&(V=V.filter(X=>X.status===l(u))),B(a,V)}),Zn(),Kr();var H=jq(),J=pt(H),we=w(J),O=z(w(we),2);{var D=V=>{var X=Qq(),R=w(X);bu(R,{class:"odz-w-4 odz-h-4"}),st("click",X,K),T(V,X)};Ee(O,V=>{s()&&V(D)})}var Z=z(we,2),ie=w(Z),de=w(ie);X_(de,{class:"odz-absolute odz-left-3 odz-top-1/2 odz--translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var ne=z(de,2),fe=z(ie,2);Me(()=>{l(u),op(()=>{})});var $=w(fe);$.value=($.__value="all")==null?"":"all";var q=z($);q.value=(q.__value="pending")==null?"":"pending";var se=z(q);se.value=(se.__value="answered")==null?"":"answered";var Ae=z(se);Ae.value=(Ae.__value="closed")==null?"":"closed";var x=z(Z,2);{var E=V=>{var X=Uq();T(V,X)},I=V=>{var X=Dt(),R=pt(X);{var he=Be=>{var Le=Tq(),Y=w(Le);yu(Y,{class:"odz-w-5 odz-h-5"});var k=z(Y,2),pe=w(k),ze=z(k,2);Me(()=>Ue(pe,l(d))),st("click",ze,y),T(Be,Le)},xe=Be=>{var Le=Dt(),Y=pt(Le);{var k=ze=>{var ye=Oq(),le=w(ye);oE(le,{class:"odz-w-12 odz-h-12 odz-mx-auto odz-text-gray-400 odz-mb-4"});var Ce=z(le,2);{var ke=ee=>{var N=Pq(),_e=z(pt(N),4);{var ve=Se=>{var me=Lq(),Ne=w(me);bu(Ne,{class:"odz-w-4 odz-h-4"}),st("click",me,K),T(Se,me)};Ee(_e,Se=>{s()&&Se(ve)})}T(ee,N)},ce=ee=>{var N=kq();T(ee,N)};Ee(Ce,ee=>{l(i).length===0?ee(ke):ee(ce,!1)})}T(ze,ye)},pe=ze=>{var ye=Hq(),le=pt(ye),Ce=w(le),ke=z(w(Ce));Yt(ke,5,()=>l(a),ve=>ve.id,(ve,Se)=>{var me=Nq();const Ne=ot(()=>S(l(Se).status));var De=w(me),qe=w(De),Qe=w(qe),rt=z(Qe);{var tt=et=>{G_(et,{class:"odz-w-3 odz-h-3 odz-text-amber-500",title:" "})};Ee(rt,et=>{l(Se).customer_id||et(tt)})}var Te=z(De),ge=w(Te),Oe=w(ge);Gm(Oe,()=>l(Ne).icon,(et,Qt)=>{Qt(et,{class:"odz-w-3 odz-h-3"})});var He=z(Oe),je=z(Te),at=w(je),At=w(at),it=w(At),Re=z(At,2);{var Xe=et=>{var Qt=Dq();T(et,Qt)};Ee(Re,et=>{l(Se).converted_estimate_id&&et(Xe)})}var Je=z(je),ct=w(Je),_t=z(Je),lt=w(_t);Me(et=>{Ue(Qe,`${l(Se).inquiry_no??""} `),Fr(ge,`odz-badge odz-badge-sm odz-gap-0.5 odz-whitespace-nowrap ${l(Ne).class??""}`),Ue(He,` ${l(Ne).label??""}`),Ue(it,l(Se).title||"( )"),Ue(ct,l(Se).customer_name),Ue(lt,et)},[()=>F(l(Se).created_at)],ot),st("click",me,()=>P(l(Se))),T(ve,me)});var ce=z(le,2),ee=w(ce),N=z(ee);{var _e=ve=>{var Se=Mq(),me=w(Se);Me(()=>Ue(me,`/  ${l(i).length??""}`)),T(ve,Se)};Ee(N,ve=>{l(a).length!==l(i).length&&ve(_e)})}Me(()=>Ue(ee,` ${l(a).length??""} `)),T(ze,ye)};Ee(Y,ze=>{l(a).length===0?ze(k):ze(pe,!1)},!0)}T(Be,Le)};Ee(R,Be=>{l(d)?Be(he):Be(xe,!1)},!0)}T(V,X)};Ee(x,V=>{l(A)?V(E):V(I,!1)})}var U=z(J,2);const M=ot(()=>{var V;return((V=l(g))==null?void 0:V.id)||""}),j=ot(()=>{var V;return((V=l(g))==null?void 0:V.inquiry_no)||""});ts(Iq(U,{get qnaId(){return l(M)},get inquiryNo(){return l(j)},get isOpen(){return l(f)},set isOpen(V){B(f,V)},$$events:{verify:L,cancel:re},$$legacy:!0}),V=>B(m,V),()=>l(m)),br(ne,()=>l(c),V=>B(c,V)),sp(fe,()=>l(u),V=>B(u,V)),T(n,H),Rr()}var qq=te('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-dots odz-loading-md odz-text-gray-400"></div></div>'),Kq=te('<div class="odz-text-center odz-text-red-500 odz-py-4"> </div>'),$q=te('<div class="odz-text-center odz-text-gray-500 odz-py-8"><p>  .</p> <p class="odz-text-sm odz-mt-1">   .</p></div>'),Vq=te('<div class="odz-flex odz-justify-center"><div class="odz-px-3 odz-py-1.5 odz-bg-gray-200 odz-text-gray-600 odz-text-xs odz-rounded-full"> </div></div>'),Gq=te("<button><!></button>"),Wq=te('<div><div class="odz-flex-shrink-0"><div><!></div></div> <div><span class="odz-text-xs odz-text-gray-500 odz-mb-1"> </span> <div class="odz-group odz-relative"><div> </div> <!></div> <span class="odz-text-xs odz-text-gray-400 odz-mt-0.5"> </span></div></div>'),Xq=te('<span class="odz-loading odz-loading-spinner odz-loading-sm"></span>'),Yq=te('<div class="odz-flex odz-flex-col odz-h-full odz-min-h-[300px]"><div class="odz-flex-1 odz-overflow-y-auto odz-space-y-4 odz-p-4 odz-bg-gray-50 odz-rounded-lg odz-max-h-[400px]"><!></div> <div class="odz-mt-4 odz-flex odz-gap-2"><textarea placeholder=" ..." class="odz-textarea odz-textarea-bordered odz-flex-1 odz-resize-none odz-h-12"></textarea> <button class="odz-btn odz-btn-primary"><!></button></div></div>');function Jq(n,e){jr(e,!1);let t=ft(e,"qnaId",8),r=ft(e,"isManager",8,!1),o=ft(e,"customerName",8,""),s=Ie([]),i=Ie(""),a=Ie(!0),A=Ie(!1),d=Ie(""),c=null,u=Ie();En(async()=>{await h(),f()}),Eo(()=>{c&&n2(c)}),K4(()=>{g()});async function h(){try{B(a,!0),B(d,""),B(s,await S9(t()))}catch(de){console.error("[QnaComments]  :",de),B(d,"    .")}finally{B(a,!1)}}function f(){c=U9(t(),async de=>{console.log("[QnaComments]  :",de),await h()})}function g(){l(u)&&fr(u,l(u).scrollTop=l(u).scrollHeight)}async function m(){if(l(i).trim())try{B(A,!0);const de=r()?"manager":"customer",ne=r()?"":o();await Nz(t(),{writer:de,writer_name:ne,content:l(i).trim()}),B(i,"")}catch(de){console.error("[QnaComments]  :",de),alert("    .")}finally{B(A,!1)}}async function y(de){if(confirm("  ?"))try{await E9(de),B(s,l(s).filter(ne=>ne.id!==de))}catch(ne){console.error("[QnaComments]  :",ne),alert("    .")}}function b(de){de.key==="Enter"&&!de.shiftKey&&(de.preventDefault(),m())}function S(de){switch(r()?de.writer:de.writer,de.writer){case"customer":return{icon:E0,class:"odz-bg-blue-100 odz-text-blue-600",isMe:!r()};case"manager":return{icon:cE,class:"odz-bg-green-100 odz-text-green-600",isMe:r()};case"system":return{icon:Z3,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1};default:return{icon:E0,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1}}}function F(de){if(!de)return"";const ne=new Date(de),fe=new Date;return ne.toDateString()===fe.toDateString()?ne.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):ne.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}Kr();var P=Yq(),L=w(P),re=w(L);{var K=de=>{var ne=qq();T(de,ne)},H=de=>{var ne=Dt(),fe=pt(ne);{var $=se=>{var Ae=Kq(),x=w(Ae);Me(()=>Ue(x,l(d))),T(se,Ae)},q=se=>{var Ae=Dt(),x=pt(Ae);{var E=U=>{var M=$q();T(U,M)},I=U=>{var M=Dt(),j=pt(M);Yt(j,1,()=>l(s),V=>V.id,(V,X)=>{var R=Dt();const he=ot(()=>S(l(X)));var xe=pt(R);{var Be=Y=>{var k=Vq(),pe=w(k),ze=w(pe);Me(()=>Ue(ze,l(X).content)),T(Y,k)},Le=Y=>{var k=Wq(),pe=w(k),ze=w(pe),ye=w(ze);Gm(ye,()=>l(he).icon,(Ne,De)=>{De(Ne,{class:"odz-w-4 odz-h-4"})});var le=z(pe,2),Ce=w(le),ke=w(Ce),ce=z(Ce,2),ee=w(ce),N=w(ee),_e=z(ee,2);{var ve=Ne=>{var De=Gq(),qe=w(De);r1(qe,{class:"odz-w-3.5 odz-h-3.5 odz-text-gray-400 hover:odz-text-red-500"}),Me(()=>Fr(De,`odz-absolute odz-top-0 ${(l(he).isMe?"odz-left-0 -odz-translate-x-full odz-pr-1":"odz-right-0 odz-translate-x-full odz-pl-1")??""} odz-opacity-0 group-hover:odz-opacity-100 odz-transition-opacity`)),st("click",De,()=>y(l(X).id)),T(Ne,De)};Ee(_e,Ne=>{(l(he).isMe||r())&&l(X).writer!=="system"&&Ne(ve)})}var Se=z(ce,2),me=w(Se);Me(Ne=>{Fr(k,`odz-flex odz-gap-2 ${(l(he).isMe?"odz-flex-row-reverse":"")??""}`),Fr(ze,`odz-w-8 odz-h-8 odz-rounded-full ${l(he).class??""} odz-flex odz-items-center odz-justify-center`),Fr(le,`odz-flex odz-flex-col odz-max-w-[70%] ${(l(he).isMe?"odz-items-end":"odz-items-start")??""}`),Ue(ke,l(X).writer_name||l(X).writer),Fr(ee,`odz-px-3 odz-py-2 odz-rounded-lg odz-text-sm odz-whitespace-pre-wrap ${(l(he).isMe?"odz-bg-primary odz-text-primary-content":"odz-bg-white odz-text-gray-800 odz-border odz-border-gray-200")??""}`),Ue(N,l(X).content),Ue(me,Ne)},[()=>F(l(X).created_at)],ot),T(Y,k)};Ee(xe,Y=>{l(X).writer==="system"?Y(Be):Y(Le,!1)})}T(V,R)}),T(U,M)};Ee(x,U=>{l(s).length===0?U(E):U(I,!1)},!0)}T(se,Ae)};Ee(fe,se=>{l(d)?se($):se(q,!1)},!0)}T(de,ne)};Ee(re,de=>{l(a)?de(K):de(H,!1)})}ts(L,de=>B(u,de),()=>l(u));var J=z(L,2),we=w(J),O=z(we,2),D=w(O);{var Z=de=>{var ne=Xq();T(de,ne)},ie=de=>{AE(de,{class:"odz-w-5 odz-h-5"})};Ee(D,de=>{l(A)?de(Z):de(ie,!1)})}Me(de=>{we.disabled=l(A),O.disabled=de},[()=>l(A)||!l(i).trim()],ot),br(we,()=>l(i),de=>B(i,de)),st("keydown",we,b),st("click",O,m),T(n,P),Rr()}var Zq=te('<button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost" title=""><!></button>'),eK=te('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),tK=te('<div class="odz-alert odz-alert-error odz-shadow-sm"><!> <span> </span></div>'),rK=te('<span class="odz-badge odz-badge-info odz-badge-outline odz-gap-1"><!> </span>'),nK=te('<button class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1"><!> </button>'),oK=te('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),sK=te('<button class="odz-btn odz-btn-sm odz-btn-primary odz-gap-1"><!> </button>'),iK=te('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),aK=te('<div class="odz-dropdown odz-dropdown-end"><button tabindex="0" role="button" class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1"><!> </button> <ul tabindex="0" class="odz-dropdown-content odz-z-[1] odz-menu odz-p-2 odz-shadow-lg odz-bg-base-100 odz-rounded-box odz-w-32 odz-mt-1 odz-border odz-border-gray-200"><li><button></button></li> <li><button></button></li> <li><button></button></li></ul></div> <!> <button class="odz-btn odz-btn-sm odz-btn-ghost odz-text-error odz-btn-square" title=""><!></button>',1),AK=te('<p class="odz-text-sm odz-text-gray-600 odz-mt-1 odz-pl-6"> </p>'),lK=te('<button type="button" class="odz-w-full odz-text-left odz-bg-gray-50 odz-rounded-lg odz-p-3 odz-border odz-border-gray-100 hover:odz-bg-primary/5 hover:odz-border-primary/30 odz-transition-all odz-cursor-pointer odz-group"><div class="odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-2"><!> <span class="odz-font-mono odz-text-sm odz-font-medium odz-text-gray-900"> </span> <span> </span></div> <span class="odz-text-xs odz-text-gray-400"> </span></div> <!></button>'),dK=te('<div class="odz-bg-white odz-rounded-xl odz-p-5 odz-border odz-border-gray-200 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><h4 class="odz-text-sm odz-font-semibold odz-text-gray-500 odz-uppercase odz-tracking-wide"> </h4> <span class="odz-badge odz-badge-sm odz-badge-primary"> </span></div> <div class="odz-space-y-2"></div></div>'),cK=te('<div class="odz-bg-white odz-rounded-xl odz-p-5 odz-border odz-border-gray-200 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><h4 class="odz-text-sm odz-font-semibold odz-text-gray-500 odz-uppercase odz-tracking-wide"> </h4> <span class="odz-badge odz-badge-sm odz-badge-neutral"> </span></div> <!></div>'),uK=te('<div class="odz-bg-gradient-to-r odz-from-gray-50 odz-to-gray-100/50 odz-rounded-xl odz-p-5 odz-border odz-border-gray-200"><div class="odz-flex odz-flex-wrap odz-items-start odz-justify-between odz-gap-4"><div class="odz-flex odz-flex-col odz-gap-2"><div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><span class="odz-px-2 odz-py-1 odz-bg-white odz-rounded odz-text-xs odz-font-mono odz-text-gray-600 odz-border odz-border-gray-200"> </span> <span><!> </span> <!></div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3></div> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><!> <!></div></div> <div class="odz-divider odz-my-3"></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-4 odz-text-sm"><div><span class="odz-text-gray-500"></span> <p class="odz-font-medium odz-text-gray-900"> </p></div> <div><span class="odz-text-gray-500"></span> <p class="odz-font-medium odz-text-gray-900"> </p></div> <div><span class="odz-text-gray-500"></span> <p class="odz-font-medium odz-text-gray-900 odz-break-all"> </p></div> <div><span class="odz-text-gray-500"></span> <p class="odz-font-medium odz-text-gray-900"> </p></div></div></div> <!> <div class="odz-bg-white odz-rounded-xl odz-p-5 odz-border odz-border-gray-200 odz-shadow-sm"><h4 class="odz-text-sm odz-font-semibold odz-text-gray-500 odz-uppercase odz-tracking-wide odz-mb-3"> </h4> <div class="odz-prose odz-prose-sm odz-max-w-none odz-text-gray-700 odz-whitespace-pre-wrap odz-leading-relaxed"> </div></div> <!> <div class="odz-bg-white odz-rounded-xl odz-p-5 odz-border odz-border-gray-200 odz-shadow-sm"><h4 class="odz-text-sm odz-font-semibold odz-text-gray-500 odz-uppercase odz-tracking-wide odz-mb-4"></h4> <!></div>',1),hK=te('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><div class="odz-flex odz-items-center odz-gap-3"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2></div> <!></div> <!></div>');function fK(n,e){jr(e,!1);const t=Ie();let r=ft(e,"qnaId",8);ft(e,"shopId",8);let o=ft(e,"isManager",8,!1),s=ft(e,"onBack",8,void 0),i=ft(e,"onEdit",8,void 0),a=ft(e,"onConvertToEstimate",8,void 0),A=ft(e,"onViewEstimate",8,void 0),d=Ie(null),c=[],u=[],h=Ie([]),f=Ie([]),g=Ie(!0),m=Ie(""),y=Ie(!1),b=Ie(!1),S=null;En(async()=>{await F(),P()}),Eo(()=>{S&&n2(S)});async function F(){try{if(B(g,!0),B(m,""),B(d,await Lg(r())),!l(d)){B(m,"   .");return}c=await t2(r()),u=await r2(r()),B(h,L(c,u));try{B(f,await N9(r()))}catch(x){console.warn("[QnaDetail]    :",x),B(f,[])}}catch(x){console.error("[QnaDetail]  :",x),B(m,"     .")}finally{B(g,!1)}}function P(){S=I9(r(),async x=>{console.log("[QnaDetail]  :",x),await F()})}function L(x,E){const I=new Map;return x.forEach(U=>{const M=U.idx??0;I.has(M)||I.set(M,{idx:M,productId:U.product_id,productName:U.product_name,variants:[],prints:[],totalQuantity:0});const j=I.get(M);j.variants.push({variantId:U.variant_id||"",variantName:U.variant_name,quantity:U.quantity||0,optionValues:U.option_values}),j.totalQuantity+=U.quantity||0}),E.forEach(U=>{const M=U.idx??0,j=I.get(M);j&&j.prints.push({objectId:U.object_id||"",printType:U.print_type||"none",title:U.title,printMethod:U.print_method,templateId:U.template_id,colors:U.colors,uploadedFiles:U.uploaded_files,fileMetadata:U.file_metadata,memo:U.memo})}),Array.from(I.values())}function re(x){switch(x){case"pending":return{label:"",class:"odz-badge-warning",icon:ap};case"answered":return{label:"",class:"odz-badge-success",icon:t1};case"closed":return{label:"",class:"odz-badge-neutral",icon:yu};default:return{label:"",class:"odz-badge-ghost",icon:ap}}}function K(x){return x?new Date(x).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function H(x){switch(x){case"temp":return{label:"",class:"odz-badge-ghost"};case"pending":return{label:"",class:"odz-badge-warning"};case"progress":return{label:"",class:"odz-badge-info"};case"completed":return{label:"",class:"odz-badge-success"};case"canceled":return{label:"",class:"odz-badge-error"};case"hold":return{label:"",class:"odz-badge-neutral"};default:return{label:x,class:"odz-badge-ghost"}}}function J(){s()&&s()()}function we(x){A()?A()(x):window.location.href=`/?mode=register&estimateId=${x}&returnTo=qna`}function O(){var x;i()&&((x=l(d))!=null&&x.id)&&i()(l(d).id)}async function D(){var x;if((x=l(d))!=null&&x.id&&confirm("  ?     ."))try{B(b,!0),await _9(l(d).id),alert(" ."),s()&&s()()}catch(E){console.error("[QnaDetail]  :",E),alert("   .")}finally{B(b,!1)}}async function Z(){var x;if((x=l(d))!=null&&x.id&&confirm("   ?"))try{B(y,!0);const E=await F9(l(d).id);alert(" ."),a()&&a()(E)}catch(E){console.error("[QnaDetail]   :",E),alert("    .")}finally{B(y,!1)}}async function ie(x){var E;if((E=l(d))!=null&&E.id)try{await Dz(l(d).id,x),B(d,{...l(d),status:x})}catch(I){console.error("[QnaDetail]   :",I),alert("    .")}}Jt(()=>l(d),()=>{B(t,l(d)&&((l(d).product_amount??0)>0||(l(d).print_amount??0)>0||(l(d).addon_amount??0)>0||(l(d).additional_amount??0)>0))}),Zn(),Kr();var de=hK(),ne=w(de),fe=z(w(ne),2);{var $=x=>{var E=Zq(),I=w(E);Mu(I,{class:"odz-w-5 odz-h-5"}),st("click",E,J),T(x,E)};Ee(fe,x=>{s()&&x($)})}var q=z(ne,2);{var se=x=>{var E=eK();T(x,E)},Ae=x=>{var E=Dt(),I=pt(E);{var U=j=>{var V=tK(),X=w(V);yu(X,{class:"odz-w-6 odz-h-6"});var R=z(X,2),he=w(R);Me(()=>Ue(he,l(m))),T(j,V)},M=j=>{var V=Dt(),X=pt(V);{var R=he=>{var xe=uK();const Be=ot(()=>re(l(d).status));var Le=pt(xe),Y=w(Le),k=w(Y),pe=w(k),ze=w(pe),ye=w(ze),le=z(ze,2),Ce=w(le);Gm(Ce,()=>l(Be).icon,(mt,Lt)=>{Lt(mt,{class:"odz-w-3 odz-h-3"})});var ke=z(Ce),ce=z(le,2);{var ee=mt=>{var Lt=rK(),Pt=w(Lt);Lf(Pt,{class:"odz-w-3 odz-h-3"}),T(mt,Lt)};Ee(ce,mt=>{l(d).converted_estimate_id&&mt(ee)})}var N=z(pe,2),_e=w(N),ve=z(k,2),Se=w(ve);{var me=mt=>{var Lt=nK(),Pt=w(Lt);W_(Pt,{class:"odz-w-4 odz-h-4"}),st("click",Lt,O),T(mt,Lt)};Ee(Se,mt=>{i()&&l(d).status==="pending"&&mt(me)})}var Ne=z(Se,2);{var De=mt=>{var Lt=aK(),Pt=pt(Lt),zt=w(Pt),Et=w(zt);iE(Et,{class:"odz-w-4 odz-h-4"});var xt=z(zt,2),Ut=w(xt),Kt=w(Ut),Ot=z(Ut,2),Mt=w(Ot),Gt=z(Ot,2),nr=w(Gt),sr=z(Pt,2);{var dr=Ir=>{var hr=sK(),Or=w(hr);{var xr=vr=>{var kr=oK();T(vr,kr)},ir=vr=>{Lf(vr,{class:"odz-w-4 odz-h-4"})};Ee(Or,vr=>{l(y)?vr(xr):vr(ir,!1)})}Me(()=>hr.disabled=l(y)),st("click",hr,Z),T(Ir,hr)};Ee(sr,Ir=>{!l(d).converted_estimate_id&&l(h).length>0&&Ir(dr)})}var Ht=z(sr,2),wr=w(Ht);{var Pr=Ir=>{var hr=iK();T(Ir,hr)},$r=Ir=>{r1(Ir,{class:"odz-w-4 odz-h-4"})};Ee(wr,Ir=>{l(b)?Ir(Pr):Ir($r,!1)})}Me(()=>{hA(Kt,"odz-font-bold",l(d).status==="pending"),hA(Mt,"odz-font-bold",l(d).status==="answered"),Ht.disabled=l(b)}),st("click",Kt,()=>ie("pending")),st("click",Mt,()=>ie("answered")),st("click",nr,()=>ie("closed")),st("click",Ht,D),T(mt,Lt)};Ee(Ne,mt=>{o()&&l(d).status!=="closed"&&mt(De)})}var qe=z(Y,4),Qe=w(qe),rt=z(w(Qe),2),tt=w(rt),Te=z(Qe,2),ge=z(w(Te),2),Oe=w(ge),He=z(Te,2),je=z(w(He),2),at=w(je),At=z(He,2),it=z(w(At),2),Re=w(it),Xe=z(Le,2);{var Je=mt=>{var Lt=dK(),Pt=w(Lt),zt=z(w(Pt),2),Et=w(zt),xt=z(Pt,2);Yt(xt,5,()=>l(f),Ar,(Ut,Kt)=>{var Ot=lK();const Mt=ot(()=>{var xr;return H(((xr=l(Kt).estimate)==null?void 0:xr.status)||"")});var Gt=w(Ot),nr=w(Gt),sr=w(nr);Lf(sr,{class:"odz-w-4 odz-h-4 odz-text-gray-400 group-hover:odz-text-primary odz-transition-colors"});var dr=z(sr,2),Ht=w(dr),wr=z(dr,2),Pr=w(wr),$r=z(nr,2),Ir=w($r),hr=z(Gt,2);{var Or=xr=>{var ir=AK(),vr=w(ir);Me(()=>Ue(vr,l(Kt).estimate.name)),T(xr,ir)};Ee(hr,xr=>{var ir;(ir=l(Kt).estimate)!=null&&ir.name&&xr(Or)})}Me(xr=>{var ir;Ue(Ht,((ir=l(Kt).estimate)==null?void 0:ir.estimate_no)||"-"),Fr(wr,`odz-badge odz-badge-sm ${l(Mt).class??""}`),Ue(Pr,l(Mt).label),Ue(Ir,xr)},[()=>K(l(Kt).created_at)],ot),st("click",Ot,()=>we(l(Kt).estimate_id)),T(Ut,Ot)}),Me(()=>Ue(Et,`${l(f).length??""}`)),T(mt,Lt)};Ee(Xe,mt=>{l(f).length>0&&mt(Je)})}var ct=z(Xe,2),_t=z(w(ct),2),lt=w(_t),et=z(ct,2);{var Qt=mt=>{var Lt=cK(),Pt=w(Lt),zt=z(w(Pt),2),Et=w(zt),xt=z(Pt,2);jz(xt,{get products(){return l(h)},disabled:!0}),Me(()=>Ue(Et,`${l(h).length??""}`)),T(mt,Lt)};Ee(et,mt=>{l(h).length>0&&mt(Qt)})}var vt=z(et,2),Nt=z(w(vt),2);Jq(Nt,{get qnaId(){return r()},get isManager(){return o()}}),Me(mt=>{Ue(ye,`#${l(d).inquiry_no??""}`),Fr(le,`odz-badge odz-gap-1 ${l(Be).class??""}`),Ue(ke,` ${l(Be).label??""}`),Ue(_e,l(d).title||"( )"),Ue(tt,l(d).customer_name),Ue(Oe,l(d).customer_phone||"-"),Ue(at,l(d).customer_email||"-"),Ue(Re,mt),Ue(lt,l(d).content||"( )")},[()=>K(l(d).created_at)],ot),T(he,xe)};Ee(X,he=>{l(d)&&he(R)},!0)}T(j,V)};Ee(I,j=>{l(m)?j(U):j(M,!1)},!0)}T(x,E)};Ee(q,x=>{l(g)?x(se):x(Ae,!1)})}T(n,de),Rr()}var pK=te('<dialog id="estimate-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-h-full main-estimate-modal-box"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),gK=te("<main><!></main>");function vK(n,e){jr(e,!1);const[t,r]=co(),o=()=>Xr(sl,"$customerStore",t);let s=Ie(""),i="",a="",A="",d="",c="",u="",h="",f="",g="",m="",y=Ie(!1),b=null,S=Ie(null),F=null,P=null,L="list",re=!1,K=null,H=null,J=null,we=null;function O(){var U,M,j,V,X,R,he,xe,Be,Le;i=((U=document.getElementById("odiz-product-id"))==null?void 0:U.value)||"",A=((M=document.getElementById("odiz-shop-id"))==null?void 0:M.value)||"",d=((j=document.getElementById("odiz-sess"))==null?void 0:j.value)||"",c=((V=document.getElementById("odiz-customer-id"))==null?void 0:V.value)||"",a=((X=document.getElementById("odiz-mall_type"))==null?void 0:X.value)||"",u=((R=document.getElementById("odiz-customer-name"))==null?void 0:R.value)||"",h=((he=document.getElementById("odiz-customer-phone"))==null?void 0:he.value)||"",f=((xe=document.getElementById("odiz-customer-address1"))==null?void 0:xe.value)||"",g=((Be=document.getElementById("odiz-customer-address2"))==null?void 0:Be.value)||"",m=((Le=document.getElementById("odiz-customer-postcode"))==null?void 0:Le.value)||""}function D(){document.querySelectorAll("input.odiz-hidden-class").forEach(M=>{const j=M.value;if(j){const V=document.getElementsByClassName(j);for(let X=0;X<V.length;X++)V[X].style.display="none"}})}function Z(U,M,j,V,X){const R=document.createElement("div");R.className="odiz-estimate-preview-container odiz-app";const he=j.closest("div");he&&(he.insertAdjacentElement("afterend",R),ca(pR,{target:R,props:{uuid:U,idx:M,appType:V,isAddCost:X}}))}function ie(U,M=5e3){return new Promise(j=>{const V=document.getElementById(U);if(V)return j(V);const X=new MutationObserver(()=>{const R=document.getElementById(U);R&&(X.disconnect(),j(R))});X.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{X.disconnect(),j(null)},M)})}function de(U){let j=new URLSearchParams(window.location.search).get(U);if(j)return j;try{if(j=new URL(window.location.href).searchParams.get(U),j)return j}catch{}const V=document.getElementById(`odiz-${U}`);return V!=null&&V.value?V.value:null}En(async()=>{var Be,Le,Y;try{const k=await nB();k>0&&console.log(`[ODIZ]   : ${k}    .`)}catch(k){console.error("[ODIZ]    :",k)}const U=de("mode"),M=de("estimateId"),j=de("returnTo");console.log("[ODIZ] URL parameters:",{urlMode:U,urlEstimateId:M,urlReturnTo:j});let V=((Be=document.getElementById("odiz-app-type"))==null?void 0:Be.value)||"";(U==="register"||U==="list")&&(V=U,console.log("[ODIZ] AppType set from URL:",V)),M&&(F=M,console.log("[ODIZ] EditingEstimateId set:",F));const X=de("qnaId"),R=de("qnaMode"),he=de("isManager");if(X&&(P=X,console.log("[ODIZ] EditingQnaId set:",P)),(R==="register"||R==="list"||R==="detail")&&(L=R,console.log("[ODIZ] QnaMode set from URL:",L)),(he==="true"||he==="1")&&(re=!0,console.log("[ODIZ] IsQnaManager set:",re)),!V){console.warn("[ODIZ] No appType detected, exiting early");return}const xe=document.getElementById("odiz-estimate");if(xe&&xe.addEventListener("click",fe),O(),D(),Ls.set({id:A,name:"",sess:d,customer_id:c}),sl.set({name:u,phone:h,address1:f,address2:g,postcode:m,mallType:a}),b=document.getElementById("odiz-estimate-list"),V==="order"||V==="admin"){const k=document.getElementById("select-order-class"),pe=document.getElementById("select-order-class-uuid");if(k&&pe){const ze=k.value,ye=pe.value,le=document.getElementsByClassName(ze);if(le.length>0){const Ce=le[0].getElementsByClassName(ye);for(let ke=0;ke<Ce.length;ke++){const ce=Ce[ke],ee=((Le=ce.textContent)==null?void 0:Le.trim())||"",N=/odiz\s*:\s*([a-f0-9-]+)-(\d+)/i,_e=ee.match(N);if(_e){let ve=_e[1],Se=!1;ve.endsWith("-add")&&(ve=ve.slice(0,-4),Se=!0);const me=_e[2];Z(ve,me,ce,V,Se)}}}}}if(V==="list"&&b&&ca(Pj,{target:b,props:{openEstimateModal:(k,pe)=>{St.reset(),B(y,k),B(S,pe)}}}),V==="run"&&i){const k=document.getElementById("odiz-run-btn"),pe=((Y=document.getElementById("odiz-run-btn-name"))==null?void 0:Y.value)||" ";if(k){const ze=document.createElement("button");ze.textContent=pe,ze.type="button",ze.className="odz-btn odz-btn-primary",ze.onclick=ne,k.appendChild(ze)}}if(V==="fixed"){const k=document.getElementById("odiz-fixed-area");if(k&&i){const pe=document.createElement("div");if(pe.className="odiz-fixed-product-container odiz-app",k.appendChild(pe),a)try{const ze=await C0(a,i);ze&&(B(s,ze.id),ca(Np,{target:pe,props:{productId:l(s)}}))}catch{}else i&&(B(s,i),ca(Np,{target:pe,props:{productId:l(s)}}))}}if(V==="register"){console.log("[ODIZ] Register mode detected, waiting for container...");const k=await ie("odiz-estimate-register-area");if(k){console.log("[ODIZ] Container found, mounting EstimateRegister with estimateId:",F);const pe=document.createElement("div");pe.className="odiz-estimate-register-container odiz-app",k.appendChild(pe),ca(u9,{target:pe,props:{mallType:a,customerId:c,sess:d,shopId:A,estimateId:F,returnTo:j||"list"}})}else console.error("[ODIZ] Failed to find #odiz-estimate-register-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-estimate-register-area"></div>')}if(V==="qna"){console.log("[ODIZ] QNA mode detected (dialog-based)");const k=await ie("odiz-qna-area");if(k){console.log("[ODIZ] QNA container found, mounting QnaList as main view...");const pe=document.createElement("div");pe.className="odiz-qna-container odiz-app",k.appendChild(pe),ca(Rq,{target:pe,props:{shopId:A,customerId:c||void 0,onSelectQna:ze=>{H=ze,Ae()},onCreateNew:()=>{K=null,se()}}}),P?L==="detail"?(H=P,setTimeout(()=>Ae(),100)):L==="register"&&(K=P,setTimeout(()=>se(),100)):L==="register"&&(K=null,setTimeout(()=>se(),100))}else console.error("[ODIZ] Failed to find #odiz-qna-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-qna-area"></div>')}});async function ne(){St.reset(),B(S,null);try{a&&qt(sl,dt(o).mallType=a,dt(o));const U=await C0(a,i);U?(B(s,U.id),B(y,!0)):alert("     .")}catch{alert("     .")}}function fe(){B(s,""),St.reset(),B(S,null),B(y,!0)}function $(U){U.style.cssText=`
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      background: transparent !important;
    `}function q(U){U.style.cssText="",U.close()}function se(){const U=document.getElementById("qna-register-dialog-wrapper"),M=document.getElementById("qna-register-dialog");if(U&&M){if(U.classList.add("odiz-app"),J){try{D2(J)}catch(j){console.warn("[ODIZ] Failed to unmount previous QnaRegister instance:",j)}J=null}M.innerHTML="",U.oncancel=j=>{j.preventDefault()},J=ca(zq,{target:M,props:{shopId:A,mallType:a,customerId:c||void 0,customerName:u,customerPhone:h,qnaId:K||"",onSubmitSuccess:j=>{q(U),H=j,Ae()},onCancel:()=>{q(U)}}}),U.showModal(),$(U)}}function Ae(){const U=document.getElementById("qna-detail-dialog-wrapper"),M=document.getElementById("qna-detail-dialog");if(U&&M&&H){if(U.classList.add("odiz-app"),we){try{D2(we)}catch(j){console.warn("[ODIZ] Failed to unmount previous QnaDetail instance:",j)}we=null}M.innerHTML="",U.oncancel=j=>{j.preventDefault()},we=ca(fK,{target:M,props:{qnaId:H,shopId:A,isManager:re,onBack:()=>{q(U)},onEdit:j=>{q(U),K=j,se()},onConvertToEstimate:j=>{console.log("[ODIZ] Converted to estimate:",j),alert(` . ( ID: ${j})`)}}}),U.showModal(),$(U)}}Kr();var x=gK(),E=w(x);{var I=U=>{var M=pK(),j=w(M),V=w(j),X=w(V),R=z(V,2);oM(R,{get productId(){return l(s)},get estimate(){return l(S)},get isEstimateModal(){return l(y)},set isEstimateModal(he){B(y,he)},$$legacy:!0}),st("click",X,()=>B(y,!1)),T(U,M)};Ee(E,U=>{l(y)&&U(I)})}T(n,x),Rr(),r()}ca(vK,{target:document.getElementById("odiz-app")});export{dn as _,mK as c,tS as g};
