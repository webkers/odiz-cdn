(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const c0=!1;var Yp=Array.isArray,UC=Array.prototype.indexOf,Om=Array.from,qb=Object.defineProperty,lA=Object.getOwnPropertyDescriptor,Kb=Object.getOwnPropertyDescriptors,QC=Object.prototype,TC=Array.prototype,Dm=Object.getPrototypeOf;function Vc(n){return typeof n=="function"}const Jd=()=>{};function LC(n){return n()}function u0(n){for(var e=0;e<n.length;e++)n[e]()}const xi=2,Vb=4,Zu=8,Nm=16,za=32,mc=64,dp=128,wa=256,cp=512,ds=1024,mA=2048,td=4096,dA=8192,Jp=16384,PC=32768,eh=65536,Gb=1<<17,kC=1<<19,Wb=1<<20,pa=Symbol("$state"),Xb=Symbol("legacy props"),h0=Symbol("");function Yb(n){return n===this.v}function Mm(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function OC(n,e){return n!==e}function Hm(n){return!Mm(n,this.v)}function DC(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function NC(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function MC(n){throw new Error("https://svelte.dev/e/effect_orphan")}function HC(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jC(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function RC(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function $C(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qC(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function KC(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function VC(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let wc=!1,GC=!1;function WC(){wc=!0}const jm=1,Rm=2,Jb=4,XC=8,YC=16,JC=1,ZC=2,Zb=4,e4=8,t4=16,e_=1,r4=2,ws=Symbol(),t_="http://www.w3.org/2000/svg";function Zp(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Sn=null;function k2(n){Sn=n}function on(n,e=!1,t){Sn={p:Sn,c:null,e:null,m:!1,s:n,x:null,l:null},wc&&!e&&(Sn.l={s:null,u:null,r1:[],r2:ti(!1)})}function sn(n){const e=Sn;if(e!==null){n!==void 0&&(e.x=n);const i=e.e;if(i!==null){var t=En,r=Hn;e.e=null;try{for(var o=0;o<i.length;o++){var s=i[o];ba(s.effect),ol(s.reaction),rh(s.fn)}}finally{ba(t),ol(r)}}Sn=e.p,e.m=!0}return n||{}}function yc(){return!wc||Sn!==null&&Sn.l===null}function ti(n,e){var t={f:0,v:n,reactions:null,equals:Yb,rv:0,wv:0};return t}function eg(n,e=!1){var r;const t=ti(n);return e||(t.equals=Hm),wc&&Sn!==null&&Sn.l!==null&&((r=Sn.l).s??(r.s=[])).push(t),t}function Se(n,e=!1){return n4(eg(n,e))}function n4(n){return Hn!==null&&!cA&&Hn.f&xi&&(ga===null?p4([n]):ga.push(n)),n}function zr(n,e){return b(n,lt(()=>l(n))),e}function b(n,e){return Hn!==null&&!cA&&yc()&&Hn.f&(xi|Nm)&&(ga===null||!ga.includes(n))&&VC(),Fu(n,e)}function Fu(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=g_(),r_(n,mA),yc()&&En!==null&&En.f&ds&&!(En.f&(za|mc))&&(oA===null?g4([n]):oA.push(n))),e}function rA(n,e=1){var t=l(n),r=e===1?t++:t--;return b(n,t),r}function r_(n,e){var t=n.reactions;if(t!==null)for(var r=yc(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;a&mA||!r&&i===En||(Ki(i,e),a&(ds|wa)&&(a&xi?r_(i,td):sg(i)))}}let $m=!1;function Md(n,e=null,t){if(typeof n!="object"||n===null||pa in n)return n;const r=Dm(n);if(r!==QC&&r!==TC)return n;var o=new Map,s=Yp(n),i=ti(0);s&&o.set("length",ti(n.length));var a;return new Proxy(n,{defineProperty(A,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&$C();var u=o.get(d);return u===void 0?(u=ti(c.value),o.set(d,u)):b(u,Md(c.value,a)),!0},deleteProperty(A,d){var c=o.get(d);if(c===void 0)d in A&&o.set(d,ti(ws));else{if(s&&typeof d=="string"){var u=o.get("length"),h=Number(d);Number.isInteger(h)&&h<u.v&&b(u,h)}b(c,ws),O2(i)}return!0},get(A,d,c){var g;if(d===pa)return n;var u=o.get(d),h=d in A;if(u===void 0&&(!h||(g=lA(A,d))!=null&&g.writable)&&(u=ti(Md(h?A[d]:ws,a)),o.set(d,u)),u!==void 0){var f=l(u);return f===ws?void 0:f}return Reflect.get(A,d,c)},getOwnPropertyDescriptor(A,d){var c=Reflect.getOwnPropertyDescriptor(A,d);if(c&&"value"in c){var u=o.get(d);u&&(c.value=l(u))}else if(c===void 0){var h=o.get(d),f=h==null?void 0:h.v;if(h!==void 0&&f!==ws)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(A,d){var f;if(d===pa)return!0;var c=o.get(d),u=c!==void 0&&c.v!==ws||Reflect.has(A,d);if(c!==void 0||En!==null&&(!u||(f=lA(A,d))!=null&&f.writable)){c===void 0&&(c=ti(u?Md(A[d],a):ws),o.set(d,c));var h=l(c);if(h===ws)return!1}return u},set(A,d,c,u){var I;var h=o.get(d),f=d in A;if(s&&d==="length")for(var g=c;g<h.v;g+=1){var w=o.get(g+"");w!==void 0?b(w,ws):g in A&&(w=ti(ws),o.set(g+"",w))}h===void 0?(!f||(I=lA(A,d))!=null&&I.writable)&&(h=ti(void 0),b(h,Md(c,a)),o.set(d,h)):(f=h.v!==ws,b(h,Md(c,a)));var y=Reflect.getOwnPropertyDescriptor(A,d);if(y!=null&&y.set&&y.set.call(u,c),!f){if(s&&typeof d=="string"){var x=o.get("length"),C=Number(d);Number.isInteger(C)&&C>=x.v&&b(x,C+1)}O2(i)}return!0},ownKeys(A){l(i);var d=Reflect.ownKeys(A).filter(h=>{var f=o.get(h);return f===void 0||f.v!==ws});for(var[c,u]of o)u.v!==ws&&!(c in A)&&d.push(c);return d},setPrototypeOf(){qC()}})}function O2(n,e=1){b(n,n.v+e)}function D2(n){return n!==null&&typeof n=="object"&&pa in n?n[pa]:n}function o4(n,e){return Object.is(D2(n),D2(e))}var N2,n_,o_;function s4(){if(N2===void 0){N2=window;var n=Element.prototype,e=Node.prototype;n_=lA(e,"firstChild").get,o_=lA(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function th(n=""){return document.createTextNode(n)}function ri(n){return n_.call(n)}function tg(n){return o_.call(n)}function m(n,e){return ri(n)}function ut(n,e){{var t=ri(n);return t instanceof Comment&&t.data===""?tg(t):t}}function B(n,e=1,t=!1){let r=n;for(;e--;)r=tg(r);return r}function i4(n){n.textContent=""}function hc(n){var e=xi|mA,t=Hn!==null&&Hn.f&xi?Hn:null;return En===null||t!==null&&t.f&wa?e|=wa:En.f|=Wb,{ctx:Sn,deps:null,effects:null,equals:Yb,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??En}}function at(n){const e=hc(n);return e.equals=Hm,e}function s_(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)ya(e[t])}}function a4(n){for(var e=n.parent;e!==null;){if(!(e.f&xi))return e;e=e.parent}return null}function A4(n){var e,t=En;ba(a4(n));try{s_(n),e=m_(n)}finally{ba(t)}return e}function i_(n){var e=A4(n),t=(XA||n.f&wa)&&n.deps!==null?td:ds;Ki(n,t),n.equals(e)||(n.v=e,n.wv=g_())}function a_(n){En===null&&Hn===null&&MC(),Hn!==null&&Hn.f&wa&&En===null&&NC(),Vm&&DC()}function l4(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function bc(n,e,t,r=!0){var o=(n&mc)!==0,s=En,i={ctx:Sn,deps:null,nodes_start:null,nodes_end:null,f:n|mA,first:null,fn:e,last:null,next:null,parent:o?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var a=Zd;try{M2(!0),og(i),i.f|=PC}catch(c){throw ya(i),c}finally{M2(a)}}else e!==null&&sg(i);var A=t&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(Wb|dp))===0;if(!A&&!o&&r&&(s!==null&&l4(i,s),Hn!==null&&Hn.f&xi)){var d=Hn;(d.effects??(d.effects=[])).push(i)}return i}function qm(n){const e=bc(Zu,null,!1);return Ki(e,ds),e.teardown=n,e}function f0(n){a_();var e=En!==null&&(En.f&za)!==0&&Sn!==null&&!Sn.m;if(e){var t=Sn;(t.e??(t.e=[])).push({fn:n,effect:En,reaction:Hn})}else{var r=rh(n);return r}}function d4(n){return a_(),_c(n)}function c4(n){const e=bc(mc,n,!0);return(t={})=>new Promise(r=>{t.outro?Xl(e,()=>{ya(e),r(void 0)}):(ya(e),r(void 0))})}function rh(n){return bc(Vb,n,!1)}function Jt(n,e){var t=Sn,r={effect:null,ran:!1};t.l.r1.push(r),r.effect=_c(()=>{n(),!r.ran&&(r.ran=!0,b(t.l.r2,!0),lt(e))})}function mo(){var n=Sn;_c(()=>{if(l(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&ds&&Ki(t,td),xc(t)&&og(t),e.ran=!1}n.l.r2.v=!1}})}function _c(n){return bc(Zu,n,!0)}function De(n,e=[],t=hc){const r=e.map(t);return rd(()=>n(...r.map(l)))}function rd(n,e=0){return bc(Zu|Nm|e,n,!0)}function fA(n,e=!0){return bc(Zu|za,n,!0,e)}function A_(n){var e=n.teardown;if(e!==null){const t=Vm,r=Hn;H2(!0),ol(null);try{e.call(null)}finally{H2(t),ol(r)}}}function l_(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;ya(t,e),t=r}}function u4(n){for(var e=n.first;e!==null;){var t=e.next;e.f&za||ya(e),e=t}}function ya(n,e=!0){var t=!1;if((e||n.f&kC)&&n.nodes_start!==null){for(var r=n.nodes_start,o=n.nodes_end;r!==null;){var s=r===o?null:tg(r);r.remove(),r=s}t=!0}l_(n,e&&!t),fp(n,0),Ki(n,Jp);var i=n.transitions;if(i!==null)for(const A of i)A.stop();A_(n);var a=n.parent;a!==null&&a.first!==null&&d_(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function d_(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function Xl(n,e){var t=[];Km(n,t,!0),c_(t,()=>{ya(n),e&&e()})}function c_(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function Km(n,e,t){if(!(n.f&dA)){if(n.f^=dA,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&eh)!==0||(r.f&za)!==0;Km(r,e,s?t:!1),r=o}}}function Iu(n){u_(n,!0)}function u_(n,e){if(n.f&dA){n.f^=dA,n.f&ds||(n.f^=ds),xc(n)&&(Ki(n,mA),sg(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&eh)!==0||(t.f&za)!==0;u_(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let up=!1,p0=[];function h_(){up=!1;const n=p0.slice();p0=[],u0(n)}function rg(n){up||(up=!0,queueMicrotask(h_)),p0.push(n)}function h4(){up&&h_()}const f_=0,f4=1;let Rf=!1,$f=f_,Uu=!1,Qu=null,Zd=!1,Vm=!1;function M2(n){Zd=n}function H2(n){Vm=n}let Ol=[],ec=0;let Hn=null,cA=!1;function ol(n){Hn=n}let En=null;function ba(n){En=n}let ga=null;function p4(n){ga=n}let _s=null,Zs=0,oA=null;function g4(n){oA=n}let p_=1,hp=0,XA=!1,GA=null;function g_(){return++p_}function xc(n){var d;var e=n.f;if(e&mA)return!0;if(e&td){var t=n.deps,r=(e&wa)!==0;if(t!==null){var o,s,i=(e&cp)!==0,a=r&&En!==null&&!XA,A=t.length;if(i||a){for(o=0;o<A;o++)s=t[o],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);i&&(n.f^=cp)}for(o=0;o<A;o++)if(s=t[o],xc(s)&&i_(s),s.wv>n.wv)return!0}(!r||En!==null&&!XA)&&Ki(n,ds)}return!1}function v4(n,e){for(var t=e;t!==null;){if(t.f&dp)try{t.fn(n);return}catch{t.f^=dp}t=t.parent}throw Rf=!1,n}function m4(n){return(n.f&Jp)===0&&(n.parent===null||(n.parent.f&dp)===0)}function ng(n,e,t,r){if(Rf){if(t===null&&(Rf=!1),m4(e))throw n;return}t!==null&&(Rf=!0);{v4(n,e);return}}function v_(n,e,t=0){var r=n.reactions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];s.f&xi?v_(s,e,t+1):e===s&&(t===0?Ki(s,mA):s.f&ds&&Ki(s,td),sg(s))}}function m_(n){var f;var e=_s,t=Zs,r=oA,o=Hn,s=XA,i=ga,a=Sn,A=cA,d=n.f;_s=null,Zs=0,oA=null,Hn=d&(za|mc)?null:n,XA=(d&wa)!==0&&(!Zd||o===null||A),ga=null,k2(n.ctx),cA=!1,hp++;try{var c=(0,n.fn)(),u=n.deps;if(_s!==null){var h;if(fp(n,Zs),u!==null&&Zs>0)for(u.length=Zs+_s.length,h=0;h<_s.length;h++)u[Zs+h]=_s[h];else n.deps=u=_s;if(!XA)for(h=Zs;h<u.length;h++)((f=u[h]).reactions??(f.reactions=[])).push(n)}else u!==null&&Zs<u.length&&(fp(n,Zs),u.length=Zs);if(yc()&&oA!==null&&!(n.f&(xi|td|mA)))for(h=0;h<oA.length;h++)v_(oA[h],n);return o!==null&&hp++,c}finally{_s=e,Zs=t,oA=r,Hn=o,XA=s,ga=i,k2(a),cA=A}}function w4(n,e){let t=e.reactions;if(t!==null){var r=UC.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&xi&&(_s===null||!_s.includes(e))&&(Ki(e,td),e.f&(wa|cp)||(e.f^=cp),s_(e),fp(e,0))}function fp(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)w4(n,t[r])}function og(n){var e=n.f;if(!(e&Jp)){Ki(n,ds);var t=En,r=Sn;En=n;try{e&Nm?u4(n):l_(n),A_(n);var o=m_(n);n.teardown=typeof o=="function"?o:null,n.wv=p_;var s=n.deps,i;c0&&GC&&n.f&mA}catch(a){ng(a,n,t,r||n.ctx)}finally{En=t}}}function w_(){if(ec>1e3){ec=0;try{HC()}catch(n){if(Qu!==null)ng(n,Qu,null);else throw n}}ec++}function y_(n){var e=n.length;if(e!==0){w_();var t=Zd;Zd=!0;try{for(var r=0;r<e;r++){var o=n[r];o.f&ds||(o.f^=ds);var s=[];b_(o,s),y4(s)}}finally{Zd=t}}}function y4(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(Jp|dA)))try{xc(r)&&(og(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?d_(r):r.fn=null))}catch(o){ng(o,r,null,r.ctx)}}}function b4(){if(Uu=!1,ec>1001)return;const n=Ol;Ol=[],y_(n),Uu||(ec=0,Qu=null)}function sg(n){$f===f_&&(Uu||(Uu=!0,queueMicrotask(b4))),Qu=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(mc|za)){if(!(t&ds))return;e.f^=ds}}Ol.push(e)}function b_(n,e){var t=n.first,r=[];e:for(;t!==null;){var o=t.f,s=(o&za)!==0,i=s&&(o&ds)!==0,a=t.next;if(!i&&!(o&dA))if(o&Zu){if(s)t.f^=ds;else{var A=Hn;try{Hn=t,xc(t)&&og(t)}catch(h){ng(h,t,null,t.ctx)}finally{Hn=A}}var d=t.first;if(d!==null){t=d;continue}}else o&Vb&&r.push(t);if(a===null){let h=t.parent;for(;h!==null;){if(n===h)break e;var c=h.next;if(c!==null){t=c;continue e}h=h.parent}}t=a}for(var u=0;u<r.length;u++)d=r[u],e.push(d),b_(d,e)}function __(n){var e=$f,t=Ol;try{w_();const o=[];$f=f4,Ol=o,Uu=!1,y_(t);var r=n==null?void 0:n();return h4(),(Ol.length>0||o.length>0)&&__(),ec=0,Qu=null,r}finally{$f=e,Ol=t}}async function ca(){await Promise.resolve(),__()}function l(n){var e=n.f,t=(e&xi)!==0;if(GA!==null&&GA.add(n),Hn!==null&&!cA){ga!==null&&ga.includes(n)&&KC();var r=Hn.deps;n.rv<hp&&(n.rv=hp,_s===null&&r!==null&&r[Zs]===n?Zs++:_s===null?_s=[n]:(!XA||!_s.includes(n))&&_s.push(n))}else if(t&&n.deps===null&&n.effects===null){var o=n,s=o.parent;s!==null&&!(s.f&wa)&&(o.f^=wa)}return t&&(o=n,xc(o)&&i_(o)),n.v}function _4(n){var e=GA;GA=new Set;var t=GA,r;try{if(lt(n),e!==null)for(r of GA)e.add(r)}finally{GA=e}return t}function Tu(n){var e=_4(()=>lt(n));for(var t of e)if(t.f&Gb)for(const r of t.deps||[])r.f&xi||Fu(r,r.v);else Fu(t,t.v)}function lt(n){var e=cA;try{return cA=!0,n()}finally{cA=e}}const x4=-7169;function Ki(n,e){n.f=n.f&x4|e}function Vn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(pa in n)g0(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&pa in t&&g0(t)}}}function g0(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{g0(n[r],e)}catch{}const t=Dm(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Kb(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function B4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const z4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function C4(n){return z4.includes(n)}const S4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function E4(n){return n=n.toLowerCase(),S4[n]??n}const F4=["touchstart","touchmove"];function I4(n){return F4.includes(n)}function U4(n,e){if(e){const t=document.body;n.autofocus=!0,rg(()=>{document.activeElement===t&&n.focus()})}}let j2=!1;function Q4(){j2||(j2=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function x_(n){var e=Hn,t=En;ol(null),ba(null);try{return n()}finally{ol(e),ba(t)}}function Gm(n,e,t,r=t){n.addEventListener(e,()=>x_(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),Q4()}const B_=new Set,v0=new Set;function z_(n,e,t,r={}){function o(s){if(r.capture||iu.call(e,s),!s.cancelBubble)return x_(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?rg(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function tt(n,e,t,r,o){var s={capture:r,passive:o},i=z_(n,e,t,s);(e===document.body||e===window||e===document)&&qm(()=>{e.removeEventListener(n,i,s)})}function T4(n){for(var e=0;e<n.length;e++)B_.add(n[e]);for(var t of v0)t(n)}function iu(n){var C;var e=this,t=e.ownerDocument,r=n.type,o=((C=n.composedPath)==null?void 0:C.call(n))||[],s=o[0]||n.target,i=0,a=n.__root;if(a){var A=o.indexOf(a);if(A!==-1&&(e===document||e===window)){n.__root=e;return}var d=o.indexOf(e);if(d===-1)return;A<=d&&(i=A)}if(s=o[i]||n.target,s!==e){qb(n,"currentTarget",{configurable:!0,get(){return s||t}});var c=Hn,u=En;ol(null),ba(null);try{for(var h,f=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!==void 0&&!s.disabled)if(Yp(w)){var[y,...x]=w;y.apply(s,[n,...x])}else w.call(s,n)}catch(I){h?f.push(I):h=I}if(n.cancelBubble||g===e||g===null)break;s=g}if(h){for(let I of f)queueMicrotask(()=>{throw I});throw h}}finally{n.__root=e,delete n.currentTarget,ol(c),ba(u)}}}function Wm(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function sl(n,e){var t=En;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function W(n,e){var t=(e&e_)!==0,r=(e&r4)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=Wm(s?n:"<!>"+n),t||(o=ri(o)));var i=r?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=ri(i),A=i.lastChild;sl(a,A)}else sl(i,i);return i}}function ig(n,e,t="svg"){var r=!n.startsWith("<!>"),o=(e&e_)!==0,s=`<${t}>${r?n:"<!>"+n}</${t}>`,i;return()=>{if(!i){var a=Wm(s),A=ri(a);if(o)for(i=document.createDocumentFragment();ri(A);)i.appendChild(ri(A));else i=ri(A)}var d=i.cloneNode(!0);if(o){var c=ri(d),u=d.lastChild;sl(c,u)}else sl(d,d);return d}}function zn(n=""){{var e=th(n+"");return sl(e,e),e}}function Lt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=th();return n.append(e,t),sl(e,t),n}function Q(n,e){n!==null&&n.before(e)}function Qe(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function eA(n,e){return L4(n,e)}const wd=new Map;function L4(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){s4();var a=new Set,A=u=>{for(var h=0;h<u.length;h++){var f=u[h];if(!a.has(f)){a.add(f);var g=I4(f);e.addEventListener(f,iu,{passive:g});var w=wd.get(f);w===void 0?(document.addEventListener(f,iu,{passive:g}),wd.set(f,1)):wd.set(f,w+1)}}};A(Om(B_)),v0.add(A);var d=void 0,c=c4(()=>{var u=t??e.appendChild(th());return fA(()=>{if(s){on({});var h=Sn;h.c=s}o&&(r.$$events=o),d=n(u,r)||{},s&&sn()}),()=>{var g;for(var h of a){e.removeEventListener(h,iu);var f=wd.get(h);--f===0?(document.removeEventListener(h,iu),wd.delete(h)):wd.set(h,f)}v0.delete(A),u!==t&&((g=u.parentNode)==null||g.removeChild(u))}});return m0.set(d,c),d}let m0=new WeakMap;function R2(n,e){const t=m0.get(n);return t?(m0.delete(n),t(e)):Promise.resolve()}function xe(n,e,t=!1){var r=n,o=null,s=null,i=ws,a=t?eh:0,A=!1;const d=(u,h=!0)=>{A=!0,c(h,u)},c=(u,h)=>{i!==(i=u)&&(i?(o?Iu(o):h&&(o=fA(()=>h(r))),s&&Xl(s,()=>{s=null})):(s?Iu(s):h&&(s=fA(()=>h(r))),o&&Xl(o,()=>{o=null})))};rd(()=>{A=!1,e(d),A||c(null,null)},a)}function P4(n,e,t){var r=n,o=ws,s,i=yc()?OC:Mm;rd(()=>{i(o,o=e())&&(s&&Xl(s),s=fA(()=>t(r)))})}function vr(n,e){return e}function k4(n,e,t,r){for(var o=[],s=e.length,i=0;i<s;i++)Km(e[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var A=t.parentNode;i4(A),A.append(t),r.clear(),qA(n,e[0].prev,e[s-1].next)}c_(o,()=>{for(var d=0;d<s;d++){var c=e[d];a||(r.delete(c.k),qA(n,c.prev,c.next)),ya(c.e,!a)}})}function er(n,e,t,r,o,s=null){var i=n,a={items:new Map,first:null},A=(e&Jb)!==0;if(A){var d=n;i=d.appendChild(th())}var c=null,u=!1,h=at(()=>{var f=t();return Yp(f)?f:f==null?[]:Om(f)});rd(()=>{var f=l(h),g=f.length;u&&g===0||(u=g===0,O4(f,a,i,o,e,r,t),s!==null&&(g===0?c?Iu(c):c=fA(()=>s(i)):c!==null&&Xl(c,()=>{c=null})),l(h))})}function O4(n,e,t,r,o,s,i){var re,he,ie,be;var a=(o&XC)!==0,A=(o&(jm|Rm))!==0,d=n.length,c=e.items,u=e.first,h=u,f,g=null,w,y=[],x=[],C,I,N,k;if(a)for(k=0;k<d;k+=1)C=n[k],I=s(C,k),N=c.get(I),N!==void 0&&((re=N.a)==null||re.measure(),(w??(w=new Set)).add(N));for(k=0;k<d;k+=1){if(C=n[k],I=s(C,k),N=c.get(I),N===void 0){var ee=h?h.e.nodes_start:t;g=N4(ee,e,g,g===null?e.first:g.next,C,I,k,r,o,i),c.set(I,g),y=[],x=[],h=g.next;continue}if(A&&D4(N,C,k,o),N.e.f&dA&&(Iu(N.e),a&&((he=N.a)==null||he.unfix(),(w??(w=new Set)).delete(N))),N!==h){if(f!==void 0&&f.has(N)){if(y.length<x.length){var G=x[0],H;g=G.prev;var Y=y[0],Be=y[y.length-1];for(H=0;H<y.length;H+=1)$2(y[H],G,t);for(H=0;H<x.length;H+=1)f.delete(x[H]);qA(e,Y.prev,Be.next),qA(e,g,Y),qA(e,Be,G),h=G,g=Be,k-=1,y=[],x=[]}else f.delete(N),$2(N,h,t),qA(e,N.prev,N.next),qA(e,N,g===null?e.first:g.next),qA(e,g,N),g=N;continue}for(y=[],x=[];h!==null&&h.k!==I;)h.e.f&dA||(f??(f=new Set)).add(h),x.push(h),h=h.next;if(h===null)continue;N=h}y.push(N),g=N,h=N.next}if(h!==null||f!==void 0){for(var M=f===void 0?[]:Om(f);h!==null;)h.e.f&dA||M.push(h),h=h.next;var O=M.length;if(O>0){var J=o&Jb&&d===0?t:null;if(a){for(k=0;k<O;k+=1)(ie=M[k].a)==null||ie.measure();for(k=0;k<O;k+=1)(be=M[k].a)==null||be.fix()}k4(e,M,J,c)}}a&&rg(()=>{var te;if(w!==void 0)for(N of w)(te=N.a)==null||te.apply()}),En.first=e.first&&e.first.e,En.last=g&&g.e}function D4(n,e,t,r){r&jm&&Fu(n.v,e),r&Rm?Fu(n.i,t):n.i=t}function N4(n,e,t,r,o,s,i,a,A,d){var c=(A&jm)!==0,u=(A&YC)===0,h=c?u?eg(o):ti(o):o,f=A&Rm?ti(i):i,g={i:f,v:h,k:s,a:null,e:null,prev:t,next:r};try{return g.e=fA(()=>a(n,h,f,d),$m),g.e.prev=t&&t.e,g.e.next=r&&r.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function $2(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var i=tg(s);o.before(s),s=i}}function qA(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function w0(n,e,t,r,o){var s=n,i="",a;rd(()=>{i!==(i=e()??"")&&(a!==void 0&&(ya(a),a=void 0),i!==""&&(a=fA(()=>{var A=i+"";t&&(A=`<svg>${A}</svg>`);var d=Wm(A);if((t||r)&&(d=ri(d)),sl(ri(d),d.lastChild),t||r)for(;ri(d);)s.before(ri(d));else s.before(d)})))})}function pn(n,e,t,r,o){var a;var s=(a=e.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=e.children,i=!0),s===void 0||s(n,i?()=>r:r)}function Xm(n,e,t){var r=n,o,s;rd(()=>{o!==(o=e())&&(s&&(Xl(s),s=null),o&&(s=fA(()=>t(r,o))))},eh)}function M4(n,e,t,r,o,s){var i,a,A=null,d=n,c;rd(()=>{const u=e()||null;var h=t_;u!==i&&(c&&(u===null?Xl(c,()=>{c=null,a=null}):u===a?Iu(c):ya(c)),u&&u!==a&&(c=fA(()=>{if(A=document.createElementNS(h,u),sl(A,A),r){var f=A.appendChild(th());r(A,f)}En.nodes_end=A,d.before(A)})),i=u,i&&(a=i))},eh)}function C_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=C_(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function H4(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=C_(n))&&(r&&(r+=" "),r+=e);return r}function y0(n){return typeof n=="object"?H4(n):n??""}function Ym(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Lu(n,e){var t=n.__attributes??(n.__attributes={});t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function j4(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function lr(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[h0]=t),t==null?n.removeAttribute(e):typeof t!="string"&&S_(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function q2(n,e,t,r,o=!1,s=!1,i=!1){var a=e||{},A=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class&&(t.class=y0(t.class));var c=S_(n),u=n.__attributes??(n.__attributes={});for(const x in t){let C=t[x];if(A&&x==="value"&&C==null){n.value=n.__value="",a[x]=C;continue}var h=a[x];if(C!==h){a[x]=C;var f=x[0]+x[1];if(f!=="$$"){if(f==="on"){const I={},N="$$"+x;let k=x.slice(2);var g=C4(k);if(B4(k)&&(k=k.slice(0,-7),I.capture=!0),!g&&h){if(C!=null)continue;n.removeEventListener(k,a[N],I),a[N]=null}if(C!=null)if(g)n[`__${k}`]=C,T4([k]);else{let ee=function(G){a[x].call(this,G)};a[N]=z_(k,n,ee,I)}else g&&(n[`__${k}`]=void 0)}else if(x==="style"&&C!=null)n.style.cssText=C+"";else if(x==="autofocus")U4(n,!!C);else if(!s&&(x==="__value"||x==="value"&&C!=null))n.value=n.__value=C;else if(x==="selected"&&A)j4(n,C);else{var w=x;o||(w=E4(w));var y=w==="defaultValue"||w==="defaultChecked";if(C==null&&!s&&!y)if(u[x]=null,w==="value"||w==="checked"){let I=n;if(w==="value"){let N=I.defaultValue;I.removeAttribute(w),I.defaultValue=N}else{let N=I.defaultChecked;I.removeAttribute(w),I.defaultChecked=N}}else n.removeAttribute(x);else y||c.includes(w)&&(s||typeof C!="string")?n[w]=C:typeof C!="function"&&lr(n,w,C)}x==="style"&&"__styles"in n&&(n.__styles={})}}}return a}var K2=new Map;function S_(n){var e=K2.get(n.nodeName);if(e)return e;K2.set(n.nodeName,e=[]);for(var t,r=n,o=Element.prototype;o!==r;){t=Kb(r);for(var s in t)t[s].set&&e.push(s);r=Dm(r)}return e}function E_(n){if(n.loading==="lazy"){var e=n.src;n[h0]=null,n.loading="eager",n.removeAttribute("src"),requestAnimationFrame(()=>{n[h0]!=="eager"&&(n.loading="lazy"),n.src=e})}}function R4(n,e,t){var r=n.__className,o=F_(e);(r!==o||$m)&&(o===""?n.removeAttribute("class"):n.setAttribute("class",o),n.__className=o)}function Lr(n,e,t){var r=n.__className,o=F_(e);(r!==o||$m)&&(e==null?n.removeAttribute("class"):n.className=o,n.__className=o)}function F_(n,e){return(n??"")+""}function tl(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function Fr(n,e,t=e){var r=yc();Gm(n,"input",o=>{var s=o?n.defaultValue:n.value;if(s=lv(n)?dv(s):s,t(s),r&&s!==(s=e())){var i=n.selectionStart,a=n.selectionEnd;n.value=s??"",a!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(a,n.value.length))}}),lt(e)==null&&n.value&&t(lv(n)?dv(n.value):n.value),_c(()=>{var o=e();lv(n)&&o===dv(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function b0(n,e,t=e){Gm(n,"change",r=>{var o=r?n.defaultChecked:n.checked;t(o)}),lt(e)==null&&t(n.checked),_c(()=>{var r=e();n.checked=!!r})}function lv(n){var e=n.type;return e==="number"||e==="range"}function dv(n){return n===""?null:+n}function I_(n,e,t){var r=lA(n,e);r&&r.set&&(n[e]=t,qm(()=>{n[e]=null}))}function U_(n,e,t){if(n.multiple)return q4(n,e);for(var r of n.options){var o=gu(r);if(o4(o,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function $4(n,e){rh(()=>{var t=new MutationObserver(()=>{var r=n.__value;U_(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Pu(n,e,t=e){var r=!0;Gm(n,"change",o=>{var s=o?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(s),gu);else{var a=n.querySelector(s)??n.querySelector("option:not([disabled])");i=a&&gu(a)}t(i)}),rh(()=>{var o=e();if(U_(n,o,r),r&&o===void 0){var s=n.querySelector(":checked");s!==null&&(o=gu(s),t(o))}n.__value=o,r=!1}),$4(n)}function q4(n,e){for(var t of n.options)t.selected=~e.indexOf(gu(t))}function gu(n){return"__value"in n?n.__value:n.value}function V2(n,e){return n===e||(n==null?void 0:n[pa])===e}function Go(n={},e,t,r){return rh(()=>{var o,s;return _c(()=>{o=s,s=[],lt(()=>{n!==t(...s)&&(e(n,...s),o&&V2(t(...o),n)&&e(null,...o))})}),()=>{rg(()=>{s&&V2(t(...s),n)&&e(null,...s)})}}),n}function Q_(n){return function(...e){var t=e[0];t.target===this&&(n==null||n.apply(this,e))}}function cv(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function an(n=!1){const e=Sn,t=e.l.u;if(!t)return;let r=()=>Vn(e.s);if(n){let o=0,s={};const i=hc(()=>{let a=!1;const A=e.s;for(const d in A)A[d]!==s[d]&&(s[d]=A[d],a=!0);return a&&o++,o});r=()=>l(i)}t.b.length&&d4(()=>{G2(e,r),u0(t.b)}),f0(()=>{const o=lt(()=>t.m.map(LC));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&f0(()=>{G2(e,r),u0(t.a)})}function G2(n,e){if(n.l.s)for(const t of n.l.s)l(t);e()}function T_(n,e,t){if(n==null)return e(void 0),Jd;const r=lt(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const yd=[];function nd(n,e=Jd){let t=null;const r=new Set;function o(a){if(Mm(n,a)&&(n=a,t)){const A=!yd.length;for(const d of r)d[1](),yd.push(d,n);if(A){for(let d=0;d<yd.length;d+=2)yd[d][0](yd[d+1]);yd.length=0}}}function s(a){o(a(n))}function i(a,A=Jd){const d=[a,A];return r.add(d),r.size===1&&(t=e(o,s)||Jd),a(n),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function kn(n){let e;return T_(n,t=>e=t)(),e}let Oh=!1,_0=Symbol();function fn(n,e,t){const r=t[e]??(t[e]={store:null,source:eg(void 0),unsubscribe:Jd});if(r.store!==n&&!(_0 in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=Jd;else{var o=!0;r.unsubscribe=T_(n,s=>{o?r.source.v=s:b(r.source,s)}),o=!1}return n&&_0 in t?kn(n):l(r.source)}function L_(n,e){return n.set(e),e}function Qo(){const n={};function e(){qm(()=>{for(var t in n)n[t].unsubscribe();qb(n,_0,{enumerable:!1,value:!0})})}return[n,e]}function Yt(n,e,t){return n.set(t),e}function K4(n){var e=Oh;try{return Oh=!1,[n(),Oh]}finally{Oh=e}}const V4={get(n,e){if(!n.exclude.includes(e))return l(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){return e in n.special||(n.special[e]=gt({get[e](){return n.props[e]}},e,Zb)),n.special[e](t),rA(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),rA(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function hn(n,e){return new Proxy({props:n,exclude:e,special:{},version:ti(0)},V4)}const G4={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Vc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let o=n.props[r];Vc(o)&&(o=o());const s=lA(o,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Vc(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=lA(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(n,e){if(e===pa||e===Xb)return!1;for(let t of n.props)if(Vc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Vc(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function mn(...n){return new Proxy({props:n},G4)}function W2(n){for(var e=En,t=En;e!==null&&!(e.f&(za|mc));)e=e.parent;try{return ba(e),n()}finally{ba(t)}}function gt(n,e,t,r){var G;var o=(t&JC)!==0,s=!wc||(t&ZC)!==0,i=(t&e4)!==0,a=(t&t4)!==0,A=!1,d;i?[d,A]=K4(()=>n[e]):d=n[e];var c=pa in n||Xb in n,u=i&&(((G=lA(n,e))==null?void 0:G.set)??(c&&e in n&&(H=>n[e]=H)))||void 0,h=r,f=!0,g=!1,w=()=>(g=!0,f&&(f=!1,a?h=lt(r):h=r),h);d===void 0&&r!==void 0&&(u&&s&&RC(),d=w(),u&&u(d));var y;if(s)y=()=>{var H=n[e];return H===void 0?w():(f=!0,g=!1,H)};else{var x=W2(()=>(o?hc:at)(()=>n[e]));x.f|=Gb,y=()=>{var H=l(x);return H!==void 0&&(h=void 0),H===void 0?h:H}}if(!(t&Zb))return y;if(u){var C=n.$$legacy;return function(H,Y){return arguments.length>0?((!s||!Y||C||A)&&u(Y?y():H),H):y()}}var I=!1,N=!1,k=eg(d),ee=W2(()=>hc(()=>{var H=y(),Y=l(k);return I?(I=!1,N=!0,Y):(N=!1,k.v=H)}));return o||(ee.equals=Hm),function(H,Y){if(GA!==null&&(I=N,y(),l(k)),arguments.length>0){const Be=Y?l(ee):s&&i?Md(H):H;return ee.equals(Be)||(I=!0,b(k,Be),g&&h!==void 0&&(h=Be),lt(()=>l(ee))),H}return l(ee)}}function Xn(n){Sn===null&&Zp(),wc&&Sn.l!==null?P_(Sn).m.push(n):f0(()=>{const e=lt(n);if(typeof e=="function")return e})}function Xo(n){Sn===null&&Zp(),Xn(()=>()=>lt(n))}function W4(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function ag(){const n=Sn;return n===null&&Zp(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=Yp(o)?o.slice():[o],a=W4(e,t,r);for(const A of i)A.call(n.x,a);return!a.defaultPrevented}return!0}}function X4(n){Sn===null&&Zp(),Sn.l===null&&jC(),P_(Sn).a.push(n)}function P_(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const Y4="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Y4);WC();const J4="modulepreload",Z4=function(n){return"/"+n},X2={},ks=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(t.map(A=>{if(A=Z4(A),A in X2)return;X2[A]=!0;const d=A.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":J4,d||(u.as="script"),u.crossOrigin="",u.href=A,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},eS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Jm extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class tS extends Jm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rS extends Jm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nS extends Jm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var x0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(x0||(x0={}));var oS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class sS{constructor(e,{headers:t={},customFetch:r,region:o=x0.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=eS(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return oS(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=t;let a={},{region:A}=t;A||(A=this.region),A&&A!=="any"&&(a["x-region"]=A);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(g=>{throw new tS(g)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new rS(c);if(!c.ok)throw new nS(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="text/event-stream"?f=c:h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(o){return{data:null,error:o}}})}}var eK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function aS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var ko={},bd={},_d={},xd={},Bd={},zd={},AS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fc=AS();const lS=fc.fetch,k_=fc.fetch.bind(fc),O_=fc.Headers,dS=fc.Request,cS=fc.Response,Bc=Object.freeze(Object.defineProperty({__proto__:null,Headers:O_,Request:dS,Response:cS,default:k_,fetch:lS},Symbol.toStringTag,{value:"Module"})),uS=aS(Bc);var Dh={},Y2;function D_(){if(Y2)return Dh;Y2=1,Object.defineProperty(Dh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Dh.default=n,Dh}var J2;function N_(){if(J2)return zd;J2=1;var n=zd&&zd.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(zd,"__esModule",{value:!0});const e=n(uS),t=n(D_());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let A=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,h;let f=null,g=null,w=null,y=d.status,x=d.statusText;if(d.ok){if(this.method!=="HEAD"){const k=await d.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=k:g=JSON.parse(k))}const I=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),N=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");I&&N&&N.length>1&&(w=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,y=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const I=await d.text();try{f=JSON.parse(I),Array.isArray(f)&&d.status===404&&(g=[],f=null,y=200,x="OK")}catch{d.status===404&&I===""?(y=204,x="No Content"):f={message:I}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,x="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:w,status:y,statusText:x}});return this.shouldThrowOnError||(A=A.catch(d=>{var c,u,h;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),A.then(s,i)}}return zd.default=r,zd}var Z2;function M_(){if(Z2)return Bd;Z2=1;var n=Bd&&Bd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bd,"__esModule",{value:!0});const e=n(N_());class t extends e.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:A=a}={}){const d=A?`${A}.order`:"order",c=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${c?`${c},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const A=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(A,`${o}`),this.url.searchParams.set(d,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:A=!1,format:d="text"}={}){var c;const u=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,A?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${u};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Bd.default=t,Bd}var ew;function Zm(){if(ew)return xd;ew=1;var n=xd&&xd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xd,"__esModule",{value:!0});const e=n(M_());class t extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let A="";a==="plain"?A="pl":a==="phrase"?A="ph":a==="websearch"&&(A="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${A}fts${d}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return xd.default=t,xd}var tw;function H_(){if(tw)return _d;tw=1;var n=_d&&_d.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_d,"__esModule",{value:!0});const e=n(Zm());class t{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let A=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!A?"":(c==='"'&&(A=!A),c)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",A=[];if(this.headers.Prefer&&A.push(this.headers.Prefer),s&&A.push(`count=${s}`),i||A.push("missing=default"),this.headers.Prefer=A.join(","),Array.isArray(o)){const d=o.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:A=!0}={}){const d="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),A||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(o)){const u=o.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return _d.default=t,_d}var Gc={},Wc={},rw;function hS(){return rw||(rw=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.version=void 0,Wc.version="0.0.0-automated"),Wc}var nw;function fS(){if(nw)return Gc;nw=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.DEFAULT_HEADERS=void 0;const n=hS();return Gc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Gc}var ow;function pS(){if(ow)return bd;ow=1;var n=bd&&bd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bd,"__esModule",{value:!0});const e=n(H_()),t=n(Zm()),r=fS();class o{constructor(i,{headers:a={},schema:A,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=A,this.fetch=d}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:A=!1,get:d=!1,count:c}={}){let u;const h=new URL(`${this.url}/rpc/${i}`);let f;A||d?(u=A?"HEAD":"GET",Object.entries(a).filter(([w,y])=>y!==void 0).map(([w,y])=>[w,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([w,y])=>{h.searchParams.append(w,y)})):(u="POST",f=a);const g=Object.assign({},this.headers);return c&&(g.Prefer=`count=${c}`),new t.default({method:u,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return bd.default=o,bd}var sw;function gS(){if(sw)return ko;sw=1;var n=ko&&ko.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ko,"__esModule",{value:!0}),ko.PostgrestError=ko.PostgrestBuilder=ko.PostgrestTransformBuilder=ko.PostgrestFilterBuilder=ko.PostgrestQueryBuilder=ko.PostgrestClient=void 0;const e=n(pS());ko.PostgrestClient=e.default;const t=n(H_());ko.PostgrestQueryBuilder=t.default;const r=n(Zm());ko.PostgrestFilterBuilder=r.default;const o=n(M_());ko.PostgrestTransformBuilder=o.default;const s=n(N_());ko.PostgrestBuilder=s.default;const i=n(D_());return ko.PostgrestError=i.default,ko.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},ko}var vS=gS();const mS=iS(vS),{PostgrestClient:wS,PostgrestQueryBuilder:tK,PostgrestFilterBuilder:rK,PostgrestTransformBuilder:nK,PostgrestBuilder:oK,PostgrestError:sK}=mS,yS="2.11.2",bS={"X-Client-Info":`realtime-js/${yS}`},_S="1.0.0",j_=1e4,xS=1e3;var tc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(tc||(tc={}));var ei;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ei||(ei={}));var Ni;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ni||(Ni={}));var B0;(function(n){n.websocket="websocket"})(B0||(B0={}));var Fl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Fl||(Fl={}));class BS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const A=r.decode(e.slice(i,i+s));i=i+s;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:A,payload:d}}}class R_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $n;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($n||($n={}));const iw=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=zS(i,n,e,o),s),{})},zS=(n,e,t,r)=>{const o=e.find(a=>a.name===n),s=o==null?void 0:o.type,i=t[n];return s&&!r.includes(s)?$_(s,i):z0(i)},$_=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return FS(e,t)}switch(n){case $n.bool:return CS(e);case $n.float4:case $n.float8:case $n.int2:case $n.int4:case $n.int8:case $n.numeric:case $n.oid:return SS(e);case $n.json:case $n.jsonb:return ES(e);case $n.timestamp:return IS(e);case $n.abstime:case $n.date:case $n.daterange:case $n.int4range:case $n.int8range:case $n.money:case $n.reltime:case $n.text:case $n.time:case $n.timestamptz:case $n.timetz:case $n.tsrange:case $n.tstzrange:return z0(e);default:return z0(e)}},z0=n=>n,CS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},SS=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ES=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},FS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const i=n.slice(1,t);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>$_(e,a))}return n},IS=n=>typeof n=="string"?n.replace(" ","T"):n,q_=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class uv{constructor(e,t,r={},o=j_){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var aw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(aw||(aw={}));class vu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vu.syncState(this.state,o,s,i),this.pendingDiffs.forEach(A=>{this.state=vu.syncDiff(this.state,A,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=vu.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const s=this.cloneDeep(e),i=this.transformState(t),a={},A={};return this.map(s,(d,c)=>{i[d]||(A[d]=c)}),this.map(i,(d,c)=>{const u=s[d];if(u){const h=c.map(y=>y.presence_ref),f=u.map(y=>y.presence_ref),g=c.filter(y=>f.indexOf(y.presence_ref)<0),w=u.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[d]=g),w.length>0&&(A[d]=w)}else a[d]=c}),this.syncDiff(s,{joins:a,leaves:A},r,o)}static syncDiff(e,t,r,o){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,A)=>{var d;const c=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(A),c.length>0){const u=e[a].map(f=>f.presence_ref),h=c.filter(f=>u.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,A)}),this.map(i,(a,A)=>{let d=e[a];if(!d)return;const c=A.map(u=>u.presence_ref);d=d.filter(u=>c.indexOf(u.presence_ref)<0),e[a]=d,o(a,d,A),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Aw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Aw||(Aw={}));var lw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(lw||(lw={}));var nA;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(nA||(nA={}));class e1{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ei.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new uv(this,Ni.join,this.params,this.timeout),this.rejoinTimer=new R_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ei.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ei.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ei.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ei.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ni.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new vu(this),this.broadcastEndpointURL=q_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(c=>e==null?void 0:e(nA.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(nA.CLOSED));const A={},d={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},A)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var u;if(this.socket.setAuth(),c===void 0){e==null||e(nA.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,g=[];for(let w=0;w<f;w++){const y=h[w],{filter:{event:x,schema:C,table:I,filter:N}}=y,k=c&&c[w];if(k&&k.event===x&&k.schema===C&&k.table===I&&k.filter===N)g.push(Object.assign(Object.assign({},y),{id:k.id}));else{this.unsubscribe(),e==null||e(nA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(nA.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(nA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,A;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||A===void 0)&&A.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ei.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ni.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new uv(this,Ni.leave,{},e);o.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new uv(this,e,t,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:A,leave:d,join:c}=Ni;if(r&&[a,A,d,c].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var g,w,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(w=f.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(f=>f.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(f=>{var g,w,y,x,C,I;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const N=f.id,k=(g=f.filter)===null||g===void 0?void 0:g.event;return N&&((w=t.ids)===null||w===void 0?void 0:w.includes(N))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const N=(C=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return N==="*"||N===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:w,table:y,commit_timestamp:x,type:C,errors:I}=g;h=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:x,eventType:C,new:{},old:{},errors:I}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===ei.closed}_isJoined(){return this.state===ei.joined}_isJoining(){return this.state===ei.joining}_isLeaving(){return this.state===ei.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),s={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&e1.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ni.close,{},e)}_onError(e){this._on(Ni.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ei.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=iw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=iw(e.columns,e.old_record)),t}}const US=()=>{},QS=typeof WebSocket<"u",TS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LS{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=bS,this.params={},this.timeout=j_,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=US,this.conn=null,this.sendBuffer=[],this.serializer=new BS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>ks(async()=>{const{default:A}=await Promise.resolve().then(()=>Bc);return{default:A}},void 0).then(({default:A})=>A(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${B0.websocket}`,this.httpEndpoint=q_(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,i)=>i(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new R_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(QS){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new PS(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ks(async()=>{const{default:e}=await import("./browser.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_S}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case tc.connecting:return Fl.Connecting;case tc.open:return Fl.Open;case tc.closing:return Fl.Closing;default:return Fl.Closed}}isConnected(){return this.connectionState()===Fl.Open}channel(e,t={config:{}}){const r=new e1(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var A;(A=this.conn)===null||A===void 0||A.send(a)})};this.log("push",`${t} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(Ni.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(xS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:o,payload:s,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ni.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([TS],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class PS{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=tc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class t1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Do(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class kS extends t1{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class C0 extends t1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var OS=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const K_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},DS=()=>OS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ks(()=>Promise.resolve().then(()=>Bc),void 0)).Response:Response}),S0=n=>{if(Array.isArray(n))return n.map(t=>S0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=S0(r)}),e};var od=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const hv=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),NS=(n,e,t)=>od(void 0,void 0,void 0,function*(){const r=yield DS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(o=>{e(new kS(hv(o),n.status||500))}).catch(o=>{e(new C0(hv(o),o))}):e(new C0(hv(n),n))}),MS=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),t))};function nh(n,e,t,r,o,s){return od(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,MS(e,r,o,s)).then(A=>{if(!A.ok)throw A;return r!=null&&r.noResolveJson?A:A.json()}).then(A=>i(A)).catch(A=>NS(A,a,r))})})}function pp(n,e,t,r){return od(this,void 0,void 0,function*(){return nh(n,"GET",e,t,r)})}function KA(n,e,t,r,o){return od(this,void 0,void 0,function*(){return nh(n,"POST",e,r,o,t)})}function HS(n,e,t,r,o){return od(this,void 0,void 0,function*(){return nh(n,"PUT",e,r,o,t)})}function jS(n,e,t,r){return od(this,void 0,void 0,function*(){return nh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function V_(n,e,t,r,o){return od(this,void 0,void 0,function*(){return nh(n,"DELETE",e,r,o,t)})}var Ts=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const RS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $S{constructor(e,t={},r,o){this.url=e,this.headers=t,this.bucketId=r,this.fetch=K_(o)}uploadOrUpdate(e,t,r,o){return Ts(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},dw),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const A=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),A&&s.append("metadata",this.encodeMetadata(A))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,A&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const d=this._removeEmptyFolders(t),c=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Do(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Ts(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return Ts(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let A;const d=Object.assign({upsert:dw.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",d.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",d.cacheControl)):(A=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:A,headers:c}),h=yield u.json();return u.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(A){if(Do(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,t){return Ts(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const s=yield KA(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new t1("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ts(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ts(this,void 0,void 0,function*(){try{return{data:yield KA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Do(o))return{data:null,error:o};throw o}})}copy(e,t,r){return Ts(this,void 0,void 0,function*(){try{return{data:{path:(yield KA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Do(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return Ts(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield KA(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(Do(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return Ts(this,void 0,void 0,function*(){try{const o=yield KA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(Do(o))return{data:null,error:o};throw o}})}download(e,t){return Ts(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield pp(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Do(a))return{data:null,error:a};throw a}})}info(e){return Ts(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield pp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:S0(r),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}exists(e){return Ts(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield jS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Do(r)&&r instanceof C0){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&o.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});A!==""&&o.push(A);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return Ts(this,void 0,void 0,function*(){try{return{data:yield V_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ts(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},RS),t),{prefix:e||""});return{data:yield KA(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(Do(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qS="2.7.1",KS={"X-Client-Info":`storage-js/${qS}`};var Cd=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class VS{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},KS),t),this.fetch=K_(r)}listBuckets(){return Cd(this,void 0,void 0,function*(){try{return{data:yield pp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Do(e))return{data:null,error:e};throw e}})}getBucket(e){return Cd(this,void 0,void 0,function*(){try{return{data:yield pp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Cd(this,void 0,void 0,function*(){try{return{data:yield KA(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Cd(this,void 0,void 0,function*(){try{return{data:yield HS(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Cd(this,void 0,void 0,function*(){try{return{data:yield KA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Cd(this,void 0,void 0,function*(){try{return{data:yield V_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}}class GS extends VS{constructor(e,t={},r){super(e,t,r)}from(e){return new $S(this.url,this.headers,e,this.fetch)}}const WS="2.48.1";let au="";typeof Deno<"u"?au="deno":typeof document<"u"?au="web":typeof navigator<"u"&&navigator.product==="ReactNative"?au="react-native":au="node";const XS={"X-Client-Info":`supabase-js-${au}/${WS}`},YS={headers:XS},JS={schema:"public"},ZS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e3={};var t3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};const r3=n=>{let e;return n?e=n:typeof fetch>"u"?e=k_:e=fetch,(...t)=>e(...t)},n3=()=>typeof Headers>"u"?O_:Headers,o3=(n,e,t)=>{const r=r3(t),o=n3();return(s,i)=>t3(void 0,void 0,void 0,function*(){var a;const A=(a=yield e())!==null&&a!==void 0?a:n;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${A}`),r(s,Object.assign(Object.assign({},i),{headers:d}))})};var s3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};function i3(n){return n.replace(/\/$/,"")}function a3(n,e){const{db:t,auth:r,realtime:o,global:s}=n,{db:i,auth:a,realtime:A,global:d}=e,c={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},A),o),global:Object.assign(Object.assign({},d),s),accessToken:()=>s3(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const G_="2.67.3",A3="http://localhost:9999",l3="supabase.auth.token",d3={"X-Client-Info":`gotrue-js/${G_}`},cw=10,E0="X-Supabase-Api-Version",W_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function c3(n){return Math.round(Date.now()/1e3)+n}function u3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const la=()=>typeof window<"u"&&typeof document<"u",zl={tested:!1,writable:!1},mu=()=>{if(!la())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zl.tested)return zl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),zl.tested=!0,zl.writable=!0}catch{zl.tested=!0,zl.writable=!1}return zl.writable};function h3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const X_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},f3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Y_=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Nh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Mh=async(n,e)=>{await n.removeItem(e)};function p3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,o,s,i,a,A,d,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)i=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),A=e.indexOf(n.charAt(c++)),d=e.indexOf(n.charAt(c++)),r=i<<2|a>>4,o=(a&15)<<4|A>>2,s=(A&3)<<6|d,t=t+String.fromCharCode(r),A!=64&&o!=0&&(t=t+String.fromCharCode(o)),d!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Ag{constructor(){this.promise=new Ag.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ag.promiseConstructor=Promise;function uw(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(p3(r))}async function g3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function v3(n,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await n(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function m3(n){return("0"+n.toString(16)).substr(-2)}function w3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let s=0;s<56;s++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,m3).join("")}async function y3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}function b3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await y3(n);return b3(t)}async function Sd(n,e,t=!1){const r=w3();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await Y_(n,`${e}-code-verifier`,o);const s=await _3(r);return[s,r===s?"plain":"s256"]}const x3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B3(n){const e=n.headers.get(E0);if(!e||!e.match(x3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class r1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function $r(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class z3 extends r1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function C3(n){return $r(n)&&n.name==="AuthApiError"}class J_ extends r1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class sd extends r1{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class HA extends sd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function S3(n){return $r(n)&&n.name==="AuthSessionMissingError"}class fv extends sd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hh extends sd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jh extends sd{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function E3(n){return $r(n)&&n.name==="AuthImplicitGrantRedirectError"}class hw extends sd{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F0 extends sd{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function pv(n){return $r(n)&&n.name==="AuthRetryableFetchError"}class fw extends sd{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var F3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};const Sl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),I3=[502,503,504];async function pw(n){var e;if(!f3(n))throw new F0(Sl(n),0);if(I3.includes(n.status))throw new F0(Sl(n),n.status);let t;try{t=await n.json()}catch(s){throw new J_(Sl(s),s)}let r;const o=B3(n);if(o&&o.getTime()>=W_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new fw(Sl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new HA}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new fw(Sl(t),n.status,t.weak_password.reasons);throw new z3(Sl(t),n.status||500,r)}const U3=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function rn(n,e,t,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[E0]||(s[E0]=W_["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",A=await Q3(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(A):{data:Object.assign({},A),error:null}}async function Q3(n,e,t,r,o,s){const i=U3(e,r,o,s);let a;try{a=await n(t,Object.assign({},i))}catch(A){throw console.error(A),new F0(Sl(A),0)}if(a.ok||await pw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(A){await pw(A)}}function jA(n){var e;let t=null;k3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=c3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function gw(n){const e=jA(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function WA(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function T3(n){return{data:n,error:null}}function L3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s}=n,i=F3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:s},A=Object.assign({},i);return{data:{properties:a,user:A},error:null}}function P3(n){return n}function k3(n){return n.access_token&&n.refresh_token&&n.expires_in}var O3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t};class D3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=X_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await rn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($r(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await rn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:WA})}catch(r){if($r(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=O3(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await rn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:L3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if($r(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await rn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:WA})}catch(t){if($r(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,s,i,a,A;try{const d={nextPage:null,lastPage:0,total:0},c=await rn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:P3});if(c.error)throw c.error;const u=await c.json(),h=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(A=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);d[`${y}Page`]=w}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if($r(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await rn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:WA})}catch(t){if($r(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await rn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:WA})}catch(r){if($r(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:WA})}catch(r){if($r(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await rn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if($r(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($r(t))return{data:null,error:t};throw t}}}const N3={getItem:n=>mu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{mu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{mu()&&globalThis.localStorage.removeItem(n)}};function vw(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function M3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ed={debug:!!(globalThis&&mu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Z_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class H3 extends Z_{}async function j3(n,e,t){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new H3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ed.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}M3();const R3={url:A3,storageKey:l3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Xc=30*1e3,mw=3;async function ww(n,e,t){return await t()}class ku{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ku.nextInstanceID,ku.nextInstanceID+=1,this.instanceID>0&&la()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},R3),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new D3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=X_(o.fetch),this.lock=o.lock||ww,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:la()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=j3:this.lock=ww,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:mu()?this.storage=N3:(this.memoryStorage={},this.storage=vw(this.memoryStorage)):(this.memoryStorage={},this.storage=vw(this.memoryStorage)),la()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${G_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=h3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),la()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),E3(s)){const A=(e=s.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return $r(t)?{error:t}:{error:new J_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:jA}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if($r(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,o;try{let s;if("email"in e){const{email:c,password:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Sd(this.storage,this.storageKey)),s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:jA})}else if("phone"in e){const{phone:c,password:u,options:h}=e;s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:jA})}else throw new Hh("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const A=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(s){if($r(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:i,options:a}=e;t=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gw})}else if("phone"in e){const{phone:s,password:i,options:a}=e;t=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gw})}else throw new Hh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new fv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if($r(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Nh(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{const{data:s,error:i}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:jA});if(await Mh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new fv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if($r(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:s,nonce:i}=e,a=await rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:jA}),{data:A,error:d}=a;return d?{data:{user:null,session:null},error:d}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new fv}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:d})}catch(t){if($r(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,s,i;try{if("email"in e){const{email:a,options:A}=e;let d=null,c=null;this.flowType==="pkce"&&([d,c]=await Sd(this.storage,this.storageKey));const{error:u}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},create_user:(r=A==null?void 0:A.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:d,code_challenge_method:c},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:A}=e,{data:d,error:c}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:c}}throw new Hh("You must provide either an email or phone number.")}catch(a){if($r(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let o,s;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await rn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:jA});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const A=i.session,d=i.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:d,session:A},error:null}}catch(o){if($r(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await Sd(this.storage,this.storageKey)),await rn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:T3})}catch(s){if($r(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new HA;const{error:o}=await rn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if($r(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await rn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Hh("You must provide either an email or phone number and a type")}catch(t){if($r(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Nh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,d,c)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,d,c))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:WA}):await this._useSession(async t=>{var r,o,s;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new HA}:await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:WA})})}catch(t){if($r(t))return S3(t)&&(await this._removeSession(),await Mh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new HA;const i=o.session;let a=null,A=null;this.flowType==="pkce"&&e.email!=null&&([a,A]=await Sd(this.storage,this.storageKey));const{data:d,error:c}=await rn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:A}),jwt:i.access_token,xform:WA});if(c)throw c;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if($r(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return uw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new HA;const t=Date.now()/1e3;let r=t,o=!0,s=null;const i=uw(e.access_token);if(i.exp&&(r=i.exp,o=r<=t),o){const{session:a,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:A}=await this._getUser(e.access_token);if(A)throw A;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if($r(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new HA;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($r(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!la())throw new jh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new hw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hw("No code detected.");const{data:C,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:A,token_type:d}=e;if(!s||!a||!i||!d)throw new jh("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;A&&(h=parseInt(A));const f=h-c;f*1e3<=Xc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=h-u;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:w,error:y}=await this._getUser(s);if(y)throw y;const x={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if($r(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Nh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(C3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Mh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=u3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:s},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Sd(this.storage,this.storageKey,!0));try{return await rn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if($r(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if($r(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,A,d,c;const{data:u,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await rn(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0})});if(o)throw o;return la()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($r(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)throw i;return await rn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if($r(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await v3(async o=>(o>0&&await g3(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await rn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:jA})),(o,s)=>{const i=200*Math.pow(2,o);return s&&pv(s)&&Date.now()+i-r<Xc})}catch(r){if(this._debug(t,"error",r),$r(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),la()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Nh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+cw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${cw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),pv(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new HA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ag;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new HA;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),$r(s)){const i={session:null,error:s};return pv(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(A){s.push(A)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Y_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Mh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&la()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Xc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Xc}ms, refresh threshold is ${mw} ticks`),o<=mw&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Z_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!la()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await Sd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await rn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if($r(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:A,error:d}=await rn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((o=A==null?void 0:A.totp)===null||o===void 0)&&o.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(t){if($r(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if($r(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:s}=t;return s?{data:null,error:s}:await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if($r(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let a=null;i.aal&&(a=i.aal);let A=a;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:A,currentAuthenticationMethods:c},error:null}}))}}ku.nextInstanceID=0;const $3=ku;class q3 extends $3{constructor(e){super(e)}}var K3=function(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,e||[])).next())})};class V3{constructor(e,t,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=i3(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const A=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:JS,realtime:e3,auth:Object.assign(Object.assign({},ZS),{storageKey:A}),global:YS},c=a3(r??{},d);this.storageKey=(o=c.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=o3(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new wS(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new sS(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new GS(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return K3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:A},d,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q3({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:A,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new LS(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G3=(n,e,t)=>new V3(n,e,t),W3="https://mprzyonufqescpcpusno.supabase.co",X3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wcnp5b251ZnFlc2NwY3B1c25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk3NjAwMzIsImV4cCI6MjA0NTMzNjAzMn0._EwKZZ9Yk-C6t96up66bvHDv_pLcE5HDD1TNpi2dWy4",pt=G3(W3,X3);async function oh(n,e){const{data:t,error:r}=await pt.from("products").select(`
            *,
            variants:product_variants(
                *,
                prices(*),
                option_values:product_variant_option_values(
                    option_value:product_option_values(
                        *,
                        option:product_options(*)
                    )
                )
            ),
            categories:categories(*),
            options:product_options(
                *,
                values:product_option_values(*)
            ),
            process:processes(*)
        `).eq("id",n).eq("shop",e).single();if(r)throw r;return t}async function il(n){const{data:e,error:t}=await pt.from("product_variants").select(" *, prices(*)").eq("id",n).single();if(t)throw t;return e}async function e5(){const{data:n,error:e}=await pt.from("categories").select("*").order("name");if(e)throw e;const t=n||[],r=new Map,o=[];return t.forEach(s=>{r.set(s.id,{...s,children:[]})}),t.forEach(s=>{const i=r.get(s.id);if(i)if(s.parent_category_id){const a=r.get(s.parent_category_id);a&&(a.children=a.children||[],a.children.push(i))}else o.push(i)}),o}async function qf(n,e,t=1,r=12,o,s=!1){const i=(t-1)*r,a=i+r-1;let A=pt.from("products").select(`
      *,
      variants:product_variants(
        *,
        prices(*)
      )
    `,{count:"exact"}).ilike("title",`%${n}%`).range(i,a).order("created_at",{ascending:!1});if(o==="godo"&&(A=A.not("godo_product","is",null)),s&&(A=A.not("process_id","is",null)),e){const{data:h}=await pt.from("product_categories").select("product_id").eq("category_id",e),f=(h==null?void 0:h.map(g=>g.product_id))||[];A=A.in("id",f)}const{data:d,error:c,count:u}=await A;if(c)throw c;return{products:d||[],total:u||0}}async function I0(n,e){if(!n||!e)return console.warn("getProductByMallInfo: mallType or mallProductNo is missing."),null;const{data:t,error:r}=await pt.from("products").select("*").eq("mall_type",n).eq("mall_product_id",e).maybeSingle();if(r)throw console.error("Error fetching product by mall info:",r),r;return t||console.log("Product not found for given mall info."),t}async function sh(n){const{data:e,error:t}=await pt.from("product_addons").select("*").eq("product_id",n).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching product addons:",t),t;if(!e||e.length===0)return[];const r=[];for(const o of e){const{data:s,error:i}=await pt.from("product_addon_items").select(`
        *,
        addon_product:products(
          *,
          variants:product_variants(
            *,
            prices(*)
          )
        )
      `).eq("addon_id",o.id);if(i){console.error("Error fetching addon items:",i);continue}r.push({...o,items:s||[]})}return r}const Y3=Object.freeze(Object.defineProperty({__proto__:null,getCategories:e5,getProductAddons:sh,getProductById:oh,getProductByMallInfo:I0,getProductVariant:il,searchProducts:qf},Symbol.toStringTag,{value:"Module"}));function $i(n,e,t){if(!t||t.length===0)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};const r=t.find(i=>n>=i.min_quantity&&n<=i.max_quantity);if(!r)return{originalPrice:e,discountedPrice:e,discountAmount:0,hasDiscount:!1};let o=e,s=0;if(r.type==="amount")r.direction==="minus"?(o=Math.max(0,e-r.value),s=e-o):(o=e+r.value,s=-r.value);else if(r.type==="percentage"){const i=r.value/100;r.direction==="minus"?(s=e*i,o=e-s):(s=-(e*i),o=e+Math.abs(s))}return{originalPrice:e,discountedPrice:o,discountAmount:s,discountInfo:r,hasDiscount:s!==0}}const J3={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1};function Z3(){const{subscribe:n,set:e,update:t}=nd(J3);return{subscribe:n,set:e,update:t,async loadIntegratedProductData(r,o){var i;const s=kn({subscribe:n});if((i=s.productDataCache[r])!=null&&i.isLoaded)return s.productDataCache[r];if(s.loadingProducts.has(r))return new Promise((a,A)=>{const d=setInterval(()=>{var u;const c=kn({subscribe:n});c.loadingProducts.has(r)||(clearInterval(d),(u=c.productDataCache[r])!=null&&u.isLoaded?a(c.productDataCache[r]):A(new Error("   ")))},100)});t(a=>({...a,loadingProducts:new Set([...a.loadingProducts,r]),isGlobalLoading:!0,productDataCache:{...a.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0}}}));try{const[a,A]=await Promise.all([oh(r,o),sh(r)]);if(!a)throw new Error("   ");const d={};A.forEach(u=>{u.items.forEach(h=>{h.addon_product.variants&&h.addon_product.variants.length>0&&(d[h.addon_product.id]={price:h.addon_product.variants[0].prices[0].amount,title:h.addon_product.title,variants:h.addon_product.variants,description:h.addon_product.description,thumbnail:h.addon_product.thumbnail})})});const c={id:r,product:a,addons:A,process:a.process,addonProductsMap:d,isLoaded:!0,isLoading:!1};return t(u=>{const h=new Set(u.loadingProducts);return h.delete(r),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[r]:c}}}),c}catch(a){throw console.error("   :",a),t(A=>{const d=new Set(A.loadingProducts);return d.delete(r),{...A,loadingProducts:d,isGlobalLoading:d.size>0,productDataCache:{...A.productDataCache,[r]:{id:r,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:a instanceof Error?a.message:"   "}}}}),a}},async loadMultipleProductData(r,o){t(s=>({...s,isGlobalLoading:!0}));try{const s=r.map(a=>this.loadIntegratedProductData(a,o)),i=await Promise.all(s);return t(a=>({...a,isGlobalLoading:!1})),i}catch(s){throw t(i=>({...i,isGlobalLoading:!1})),s}},getProductData(r){return kn({subscribe:n}).productDataCache[r]||null},clearProductData(r){t(r?o=>{const s={...o.productDataCache};return delete s[r],{...o,productDataCache:s}}:o=>({...o,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1}))},isProductLoading(r){return kn({subscribe:n}).loadingProducts.has(r)},isGlobalLoading(){return kn({subscribe:n}).isGlobalLoading},isCached(r){var s;return((s=kn({subscribe:n}).productDataCache[r])==null?void 0:s.isLoaded)===!0}}}const Kd=Z3(),oi=nd(null);function eE(){const n={},e={products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null},{subscribe:t,set:r,update:o}=nd(e),s=i=>{const a=i.products.map(h=>{var Y;let f=0,g={originalAmount:0,discountAmount:0,hasDiscount:!1,discountDetails:void 0};const w=(h.variants||[]).reduce((Be,M)=>Be+(M.quantity||0),0),y=(h.variants||[]).map(Be=>{const M=Be.quantity||0,O=Be.prices[0].amount;if(M>0){if(Be.isDiscountedPrice)return{originalAmount:O*M,discountedAmount:O*M,discountAmount:0,discountDetails:void 0,hasDiscount:!1};const J=$i(w,O,h.product.quantity_discounts);return{originalAmount:O*M,discountedAmount:J.discountedPrice*M,discountAmount:J.discountAmount*M,discountDetails:J.discountInfo,hasDiscount:J.hasDiscount}}else return{originalAmount:O*M,discountedAmount:O*M,discountAmount:0,discountDetails:void 0,hasDiscount:!1}});f=y.reduce((Be,M)=>Be+M.discountedAmount,0);const x=y.some(Be=>Be.hasDiscount),C=(Y=y.find(Be=>Be.hasDiscount))==null?void 0:Y.discountDetails;g={originalAmount:y.reduce((Be,M)=>Be+M.originalAmount,0),discountAmount:y.reduce((Be,M)=>Be+M.discountAmount,0),hasDiscount:x,discountDetails:C};let I=0;const N=h.prints&&h.prints.length>0,k=h.simplePrints&&h.simplePrints.length>0,ee=h.print_type==="simple"&&k||k&&!N;N&&!ee&&(I=(h.prints||[]).reduce((Be,M)=>Be+(M.price||0),0));let G=0;if(h.addons&&Object.keys(h.addons).length>0){const Be=h.quantity||0;G=Object.values(h.addons).reduce((M,O)=>{if(O.price!==void 0){const J=O.quantity||1;return M+O.price*J}if(h.addonProductsMap){const J=h.addonProductsMap[O.productId];if(J&&O.variantId){const re=J.variants.find(he=>he.id===O.variantId);if(re&&re.prices&&re.prices.length>0)return M+re.prices[0].amount*Be}}return M},0)}const H=f+I+G;return{...h,productAmount:f,printAmount:I,addonAmount:G,totalAmount:H,discountInfo:g}}),A=a.reduce((h,f)=>h+f.quantity,0),d=a.reduce((h,f)=>h+(f.productAmount||0),0),c=a.reduce((h,f)=>h+(f.printAmount||0),0),u=a.reduce((h,f)=>h+(f.addonAmount||0),0);return{products:a,totalQuantity:A,totalProductAmount:d,totalPrintAmount:c,totalAddonAmount:u,totalAmount:d+c+u+(i.totalAdditionalAmount||0)}};return{subscribe:t,set:r,update:o,async addProductWithIntegratedData(i,a){try{const A=await Kd.loadIntegratedProductData(i,a),d={product:A.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:A.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};o(c=>({...c,products:[...c.products,d],index:c.products.length}))}catch(A){throw console.error("  :",A),A}},async preloadProductsForFixedMode(i,a){try{const d=(await Kd.loadMultipleProductData(i,a)).map(c=>({product:c.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:c.addonProductsMap,productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0}));o(c=>({...c,products:d,index:0}))}catch(A){throw console.error("   :",A),A}},async refreshProductData(i,a){const d=kn({subscribe:t}).products[i];if(!d)throw new Error("   ");try{Kd.clearProductData(d.product.id);const c=await Kd.loadIntegratedProductData(d.product.id,a);o(u=>({...u,products:u.products.map((h,f)=>f===i?{...h,product:c.product,addonProductsMap:c.addonProductsMap,isLoaded:!0}:h)}))}catch(c){throw console.error("   :",c),c}},reset:()=>{r({products:[],index:0,totalAmount:0,totalQuantity:0,totalProductAmount:0,totalPrintAmount:0,totalAddonAmount:0,totalAdditionalAmount:0,estimateName:"",organizationName:"",orderName:"",orderPhone:"",phone1:"010",phone2:"",phone3:"",postcode:"",address1:"",address2:"",prefDeliveryDate:"",estDeliveryDate:"",shippingMethod:"",comment:"",password:"",uploadMemo:"",discountAmount:0,originalAmount:0,finalAmount:0,discountDetails:null})},calculatePrintPrice:async(i,a=!1)=>{const A=kn(Et),d=A.products[i];if(console.log({product:d}),d.prints&&d.prints.length>0)for(const c of d.prints){console.log({print:c});let u=0,h=0;if(c.colors&&c.template.templateProduct){const f=c.template.templateProduct.template_product_variants.find(g=>g.color_count===c.colors.length);if(console.log({selectedVariant:f}),f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await il(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=$i(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}else if(c.template.templateProduct){const f=c.template.templateProduct.template_product_variants[0];if(f){if(n[f.variant_id])u=n[f.variant_id].prices[0].amount;else{const g=await il(f.variant_id);g&&(n[f.variant_id]=g,u=g.prices[0].amount)}if(c.variant_id=f.variant_id,f.min_quantity<=d.quantity)if(h=u*d.quantity,c.template.templateProduct.product.quantity_discounts&&c.template.templateProduct.product.quantity_discounts.length>0){const g=$i(d.quantity,u,c.template.templateProduct.product.quantity_discounts);g.hasDiscount?(c.price=g.discountedPrice*d.quantity,c.discountInfo={originalPrice:h,discountAmount:h-g.discountedPrice*d.quantity,discountDetails:g.discountInfo,hasDiscount:!0}):(c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1})}else c.price=h,c.discountInfo={originalPrice:h,discountAmount:0,hasDiscount:!1};else c.price=f.plate_price,c.discountInfo={originalPrice:f.plate_price,discountAmount:0,hasDiscount:!1}}}}if(!a){const c=s(A);r({...A,...c,totalAdditionalAmount:A.totalAdditionalAmount})}},updateTotalAmounts:()=>{o(i=>{const a=s(i);return{...i,...a,totalAdditionalAmount:i.totalAdditionalAmount}})},cancelPrint:(i,a)=>{o(A=>{var c;A.products[i].prints=(c=A.products[i].prints)==null?void 0:c.filter(u=>u.objectId!==a);const d=s(A);return{...A,...d,totalAdditionalAmount:A.totalAdditionalAmount}})},updateSimplePrint:(i,a,A)=>{o(d=>{d.products[i].prints||(d.products[i].prints=[]);const c=d.products[i].prints.findIndex(u=>u.objectId===a);return c>=0?d.products[i].prints[c]={...d.products[i].prints[c],...A}:d.products[i].prints.push(A),d})},saveSimplePrintState:(i,a)=>{console.log("Store: saveSimplePrintState ",{productIndex:i,selectedAreasCount:a.length,selectedAreas:a}),o(A=>A.products[i]?(A.products[i].simplePrintState=a,console.log("Store: saveSimplePrintState ",{productIndex:i,savedState:A.products[i].simplePrintState}),A):(console.warn("Store: saveSimplePrintState -   :",i),A))},getSimplePrintState:i=>{var d;const a=kn(Et),A=((d=a.products[i])==null?void 0:d.simplePrintState)||[];return console.log("Store: getSimplePrintState ",{productIndex:i,hasProduct:!!a.products[i],result:A,resultType:typeof A,resultLength:Array.isArray(A)?A.length:"not array"}),A},updateProductPrintType:(i,a)=>{o(A=>{if(A.products[i]){console.log("Store: updateProductPrintType ",{idx:i,printType:a,previousPrintType:A.products[i].print_type}),A.products[i].print_type=a,(a==="simple"||a==="none")&&(A.products[i].prints=[],A.products[i].printAmount=0);const d=s(A);return{...A,totalProductAmount:d.totalProductAmount,totalPrintAmount:d.totalPrintAmount,totalAddonAmount:d.totalAddonAmount,totalAdditionalCostAmount:d.totalAdditionalCostAmount,totalAmount:d.totalAmount}}return A})}}}const Et=eE();function tE(){const n={name:"",phone:"",address1:"",address2:"",postcode:""},{subscribe:e,set:t,update:r}=nd(n);return{subscribe:e,set:t,update:r,reset:()=>{console.log(" Customer Store "),t(n)}}}const $l=tE(),Er=n=>n.toLocaleString("ko-KR");/**
* @license lucide-svelte v0.475.0 - ISC
*
* ISC License
* 
* Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
* 
* Permission to use, copy, modify, and/or distribute this software for any
* purpose with or without fee is hereby granted, provided that the above
* copyright notice and this permission notice appear in all copies.
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
* WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
* ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
* WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
* ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
* OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*/const rE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var nE=ig("<svg><!><!></svg>");function wn(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]),r=hn(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);on(e,!1);let o=gt(e,"name",8,void 0),s=gt(e,"color",8,"currentColor"),i=gt(e,"size",8,24),a=gt(e,"strokeWidth",8,2),A=gt(e,"absoluteStrokeWidth",8,!1),d=gt(e,"iconNode",24,()=>[]);const c=(...w)=>w.filter((y,x,C)=>!!y&&C.indexOf(y)===x).join(" ");an();var u=nE();let h;var f=m(u);er(f,1,d,vr,(w,y)=>{let x=()=>l(y)[0],C=()=>l(y)[1];var I=Lt(),N=ut(I);M4(N,x,!0,(k,ee)=>{let G;De(()=>G=q2(k,G,{...C()},void 0,k.namespaceURI===t_,k.nodeName.includes("-")))}),Q(w,I)});var g=B(f);pn(g,e,"default",{}),De((w,y)=>h=q2(u,h,{...rE,...r,width:i(),height:i(),stroke:s(),"stroke-width":w,class:y},void 0,!0),[()=>A()?Number(a())*24/Number(i()):a(),()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],at),Q(n,u),sn()}function kA(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"asterisk"},()=>t,{iconNode:[["path",{d:"M12 6v12"}],["path",{d:"M17.196 9 6.804 15"}],["path",{d:"m6.804 9 10.392 6"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function yw(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"book-text"},()=>t,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["path",{d:"M8 11h8"}],["path",{d:"M8 7h6"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function oE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"bot"},()=>t,{iconNode:[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function bw(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"building-2"},()=>t,{iconNode:[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}],["path",{d:"M10 6h4"}],["path",{d:"M10 10h4"}],["path",{d:"M10 14h4"}],["path",{d:"M10 18h4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function sE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function n1(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function Ou(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"circle-x"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function gp(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"clock"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function t5(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"eye"},()=>t,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function Rh(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"file-text"},()=>t,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function iE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"filter"},()=>t,{iconNode:[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function aE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"key"},()=>t,{iconNode:[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function rc(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"loader-circle"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function o1(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function AE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"mail"},()=>t,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function lE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"message-square"},()=>t,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function Du(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"package"},()=>t,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function r5(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function _w(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"phone"},()=>t,{iconNode:[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function Nu(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function dE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"printer"},()=>t,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function cE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"refresh-cw"},()=>t,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function uE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function vp(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function hE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"send"},()=>t,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function fE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"shopping-bag"},()=>t,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function pE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"shopping-cart"},()=>t,{iconNode:[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function s1(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"trash-2"},()=>t,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function gE(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"user-cog"},()=>t,{iconNode:[["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m21.7 16.4-.9-.3"}],["path",{d:"m15.2 13.9-.9-.3"}],["path",{d:"m16.6 18.7.3-.9"}],["path",{d:"m19.1 12.2.3-.9"}],["path",{d:"m19.6 18.7-.4-1"}],["path",{d:"m16.8 12.3-.4-1"}],["path",{d:"m14.3 16.6 1-.4"}],["path",{d:"m20.7 13.8 1-.4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function mp(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"user"},()=>t,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}function Yl(n,e){const t=hn(e,["children","$$slots","$$events","$$legacy"]);wn(n,mn({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,s)=>{var i=Lt(),a=ut(i);pn(a,e,"default",{}),Q(o,i)},$$slots:{default:!0}}))}async function vE(n,e,t,r,o){let s=pt.from("estimates").select("*").eq("is_delete",!1).neq("status","temp").order("created_at",{ascending:!1});t&&(s=s.eq("shop_id",t)),e?s=s.eq("customer_id",e):n&&(s=s.eq("sess",n)),r&&(s=s.gte("created_at",`${r}T00:00:00`)),o&&(s=s.lte("created_at",`${o}T23:59:59`));const{data:i,error:a}=await s;if(a)throw a;return i||[]}async function i1(n,e,t){if(n&&e){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("mall_type",n).eq("customer_id",e).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}if(t){const{data:r,error:o}=await pt.from("estimates").select("*").eq("status","temp").eq("sess",t).eq("is_delete",!1).order("created_at",{ascending:!1}).limit(1);if(o)throw o;if(r&&r.length>0)return r[0]}return null}async function Mu(n){const{data:e,error:t}=await pt.from("estimates").select("*").eq("id",n).eq("is_delete",!1).single();if(t)throw t;return e}function Hu(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*999)+1).padStart(3,"0");return`${e}${t}${r}${o}${s}${i}`}async function a1(n){const e={...n,estimate_no:Hu(),customer_id:n.customer_id===""?null:n.customer_id,sess:n.sess===""?null:n.sess},{data:t,error:r}=await pt.from("estimates").insert(e).select().single();if(r)throw r;return t}async function pc(n,e){const{data:t,error:r}=await pt.from("estimates").select("estimate_no, customer_id, sess").eq("id",n).single();if(r)throw r;const o={...e};(e.customer_id===""||e.customer_id===void 0)&&((t==null?void 0:t.customer_id)===null?o.customer_id=null:e.customer_id===""&&delete o.customer_id),(e.sess===""||e.sess===void 0)&&(t!=null&&t.sess?delete o.sess:e.sess===""&&(o.sess=null)),t!=null&&t.estimate_no||(o.estimate_no=Hu());const{error:s}=await pt.from("estimates").update(o).eq("id",n);if(s)throw s;const{data:i,error:a}=await pt.from("estimates").select("*").eq("id",n).single();if(a)throw a;if(!i)throw new Error("   .");return i}async function ju(n){const{data:e,error:t}=await pt.from("estimate_items").select(`
      *,
      product:products(*),
      variant:product_variants(id, title, thumbnail)
    `).eq("estimate_id",n);if(t)throw t;return(e||[]).map(r=>{var o;return{...r,variant_title:((o=r.variant)==null?void 0:o.title)||null}})}async function A1(n){const{data:e,error:t}=await pt.from("estimate_items").insert(n).select().single();if(t)throw t;return e}async function n5(n){const{error:e}=await pt.from("estimate_items").delete().eq("id",n);if(e)throw e}async function gc(n){const{data:e,error:t}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function l1(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(t)throw t;return e||[]}async function d1(n){const{data:e,error:t}=await pt.from("estimate_prints").insert(n).select().single();if(t)throw t;return e}async function o5(n){const{error:e}=await pt.from("estimate_prints").delete().eq("id",n);if(e)throw e}async function U0(n){const{data:e,error:t}=await pt.from("estimate_simple_prints").insert(n).select().single();if(t)throw t;return e}async function s5(n,e){const{data:t,error:r}=await pt.from("estimates").update({status:e}).eq("id",n).select().single();if(r)throw r;return t}function lg(n,e){return pt.channel(`estimate-${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"estimates",filter:`id=eq.${n}`},t=>{e(t.new)}).subscribe()}function i5(n,e,t,r){const o=r?`estimate-list-${e}-${r}`:`estimate-list-${n}-${e}`;let s=`shop_id=eq.${e}`;return r?s=`customer_id=eq.${r}`:n&&(s=`sess=eq.${n}`),pt.channel(o).on("postgres_changes",{event:"*",schema:"public",table:"estimates",filter:s},i=>{t({...i,eventType:i.eventType})}).subscribe()}function nc(n){return n===void 0||n==="temp"||n==="pending"}async function c1(n){try{const e=Mu(n),t=ju(n),r=gc(n),[o,s,i]=await Promise.all([e,t,r]);return{estimate:o,items:s||[],prints:i||[]}}catch(e){throw e}}async function a5(n){const{data:e,error:t}=await pt.from("estimate_comments").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function Kf(n){const{data:e,error:t}=await pt.from("estimate_comments").insert(n).select().single();if(t)throw t;return e}function u1(n,e){return pt.channel(`estimate-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_comments",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}async function A5(){var n,e;try{const t=document.getElementById("odiz-customer-id"),r=document.getElementById("odiz-sess"),o=(n=t==null?void 0:t.value)==null?void 0:n.trim(),s=(e=r==null?void 0:r.value)==null?void 0:e.trim();if(!o||!s)return 0;const{data:i,error:a}=await pt.from("estimates").select("id").eq("sess",s).is("customer_id",null);if(a)throw a;if(!i||i.length===0)return 0;const{data:A,error:d}=await pt.from("estimates").update({customer_id:o}).eq("sess",s).is("customer_id",null).select();if(d)throw d;return(A==null?void 0:A.length)||0}catch{return 0}}function h1(n,e){return pt.channel(`estimate-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{})}function l5(n,e){return pt.channel(`estimate-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateItems  :",r)})}function d5(n,e){return pt.channel(`estimate-simple-prints-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_simple_prints",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateSimplePrints  :",r)})}function c5(n,e){return pt.channel(`estimate-addon-items-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_addon_items",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAddonItems  :",r)})}function u5(n,e){return pt.channel(`estimate-additional-costs-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"estimate_additional_costs",filter:`estimate_id=eq.${n}`},t=>{e({new:t.new,old:t.old,eventType:t.eventType})}).subscribe((t,r)=>{r&&console.error("EstimateAdditionalCosts  :",r)})}async function h5(n,e,t,r,o){const s=t?t.replace(/[\s\-\(\)\.]/g,""):"";let i=pt.from("estimates").select("*").eq("shop_id",n).or("customer_id.is.null,customer_id.eq.").neq("status","temp").order("created_at",{ascending:!1});r&&!e&&!s?i=i.eq("sess",r):(e&&(i=i.ilike("order_name",`%${e}%`)),s&&(i=i.filter("order_phone","ilike",`%${s}%`))),o&&(i=i.eq("mall_type",o));const{data:a,error:A}=await i;if(A)throw A;return a||[]}async function f5(n){try{const{data:e,error:t}=await pt.from("estimate_items").select(`
        *,
        product:products(*)
      `).eq("estimate_id",n).order("idx");if(t)throw t;const{data:r,error:o}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).order("idx");if(o)throw o;const s={};return(e||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,product:i.product,items:[],prints:[]}),s[a].items.push(i)}),(r||[]).forEach(i=>{const a=i.idx||0;s[a]||(s[a]={idx:a,items:[],prints:[]}),s[a].prints.push(i)}),Object.values(s)}catch(e){throw e}}async function dg(n){const{data:e,error:t}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).order("idx");if(t)throw t;return e||[]}async function p5(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("id",n).single();if(t)throw t;return e||null}async function f1(n){const e={...n,selected_variant_id:n.selected_variant_id&&n.selected_variant_id.trim()!==""?n.selected_variant_id:null},{data:t,error:r}=await pt.from("estimate_addon_items").insert(e).select().single();if(r)throw r;return t}async function g5(n,e){const{error:t}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t}async function p1(n){const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at",{ascending:!0});if(t)throw t;return e||[]}async function v5(n){try{const{data:e,error:t}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n).order("created_at");if(t)throw t;return(e||[]).map((o,s)=>({id:o.id,product:{name:o.name,title:o.name,mall_type:o.mall_type||null,mall_product_id:o.mall_product_id||null},items:[{estimate_id:n,quantity:1,price:o.amount}],additionalCosts:[o],isAdditionalCost:!0}))}catch(e){throw e}}async function m5(n){const{data:e,error:t}=await pt.from("estimate_items").select("idx").eq("estimate_id",n).order("idx",{ascending:!1}).limit(1).single();return t||!e?-1:e.idx}async function w5(n,e,t,r){try{const o=await i1(e,t,r);let s,i,a=!1,A=0;if(o&&o.id)s=o.id,i=o.estimate_no||Hu(),await pc(s,{...n.estimate,estimate_no:i}),A=await m5(s)+1;else{const g={...n.estimate,estimate_no:Hu(),status:"temp",customer_id:n.estimate.customer_id===""?null:n.estimate.customer_id,sess:n.estimate.sess===""?null:n.estimate.sess},{data:w,error:y}=await pt.from("estimates").insert(g).select().single();if(y)throw new Error(`  : ${y.message}`);s=w.id,i=w.estimate_no,a=!0}let d=0;if(n.estimate_items&&n.estimate_items.length>0){const g=n.estimate_items.map(x=>({...x,estimate_id:s,idx:A})),{data:w,error:y}=await pt.from("estimate_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);d=(w==null?void 0:w.length)||0}let c=0;if(n.estimate_simple_prints&&n.estimate_simple_prints.length>0){const g=n.estimate_simple_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:y}=await pt.from("estimate_simple_prints").insert(g).select();if(y)throw new Error(`   : ${y.message}`);c=(w==null?void 0:w.length)||0}let u=0;if(n.estimate_prints&&n.estimate_prints.length>0){const g=n.estimate_prints.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A})),{data:w,error:y}=await pt.from("estimate_prints").insert(g).select();if(y)throw new Error(`    : ${y.message}`);if(u=(w==null?void 0:w.length)||0,u>0){const{error:x}=await pt.from("estimate_items").update({print_type:"detailed"}).eq("estimate_id",s).eq("idx",A)}}let h=0;if(n.estimate_addon_items&&n.estimate_addon_items.length>0){const g=n.estimate_addon_items.map(x=>({...x,estimate_id:s,idx:a?x.idx||0:A,selected_variant_id:x.selected_variant_id&&x.selected_variant_id.trim()!==""?x.selected_variant_id:null})),{data:w,error:y}=await pt.from("estimate_addon_items").insert(g).select();if(y)throw new Error(`   : ${y.message}`);h=(w==null?void 0:w.length)||0}const f={success:!0,estimateId:s,details:{estimateCount:a?1:0,itemsCount:d,simplePrintsCount:c,detailedPrintsCount:u,addonItemsCount:h}};return await g1(s),f}catch(o){return{success:!1,error:o instanceof Error?o.message:"    ."}}}async function Q0(n,e){try{const{error:t}=await pt.from("estimate_items").delete().eq("estimate_id",n).eq("idx",e);if(t)throw t;const{error:r}=await pt.from("estimate_prints").delete().eq("estimate_id",n).eq("idx",e);if(r)throw r;const{error:o}=await pt.from("estimate_simple_prints").delete().eq("estimate_id",n).eq("idx",e);if(o)throw o;const{error:s}=await pt.from("estimate_addon_items").delete().eq("estimate_id",n).eq("idx",e);if(s)throw s}catch(t){throw t}}async function y5(n,e){try{const{data:t,error:r}=await pt.from("estimate_items").select(`
        *,
        product:products(
          *,
          options:product_options(
            *,
            values:product_option_values(*)
          ),
          variants:product_variants(*)
        )
      `).eq("estimate_id",n).eq("idx",e);if(r)throw r;if(t&&t.length>0)for(const h of t)if(h.variant_id)try{const{data:f,error:g}=await pt.from("product_variants").select("*").eq("id",h.variant_id).single();if(g)h.variant=null;else{h.variant=f;try{const{data:w,error:y}=await pt.from("prices").select("*").eq("variant_id",h.variant_id);y?h.variant.prices=[]:h.variant.prices=w||[]}catch{h.variant.prices=[]}try{const{data:w,error:y}=await pt.from("product_variant_option_values").select("option_value_id").eq("variant_id",h.variant_id);if(y||!w||w.length===0)h.variant.option_values=[];else{const x=w.map(I=>I.option_value_id).filter(Boolean),C=[];for(const I of x)try{const{data:N,error:k}=await pt.from("product_option_values").select("id, value, option_id").eq("id",I).single();if(k||!N)continue;let ee=null;if(N.option_id){const{data:G,error:H}=await pt.from("product_options").select("*").eq("id",N.option_id).single();!H&&G&&(ee={id:G.id,name:G.title})}C.push({option_value:{id:N.id,value:N.value,option_id:N.option_id,option:ee}})}catch{}h.variant.option_values=C}}catch{h.variant.option_values=[]}}}catch{h.variant=null}else h.variant=null;const{data:o,error:s}=await pt.from("estimate_prints").select("*").eq("estimate_id",n).eq("idx",e);if(s)throw s;if(o&&o.length>0){const{getParentTemplates:h}=await ks(async()=>{const{getParentTemplates:f}=await Promise.resolve().then(()=>xE);return{getParentTemplates:f}},void 0);for(const f of o)if(f.template_id)try{const g=await h(f.template_id);f.parentTemplates=g}catch{f.parentTemplates=[]}else f.parentTemplates=[]}const{data:i,error:a}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("idx",e);if(a)throw a;const{data:A,error:d}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n).eq("idx",e);if(d)throw d;const c=t&&t.length>0?t[0].product_id:null;let u=[];if(c)try{const{getProductAddons:h}=await ks(async()=>{const{getProductAddons:f}=await Promise.resolve().then(()=>Y3);return{getProductAddons:f}},void 0);u=await h(c)}catch{u=[]}return{items:t||[],prints:o||[],simplePrints:i||[],addonItems:A||[],addons:u||[]}}catch(t){throw t}}function b5(n){const e={};return n.forEach((t,r)=>{if(!t.variant)return;const o=t.variant;let s="";if(o.option_values&&Array.isArray(o.option_values)&&o.option_values.length>0)try{const a=o.option_values.find(A=>{var c;if(!A||!A.option_value)return!1;const d=(c=A.option_value.option)==null?void 0:c.name;return d===""||d===""||d==="color"||d==="Color"});a&&a.option_value&&(s=a.option_value.value||"")}catch{}if(!s&&o.title){const a=o.title.split("/").map(A=>A.trim());a.length>0&&(s=a[0])}s||(s=""),e[s]||(e[s]=[]),e[s].some(a=>a.id===o.id)||e[s].push({id:o.id,title:o.title,thumbnail:o.thumbnail,product_id:o.product_id,prices:t.variant.prices||[],option_values:o.option_values||[]})}),e}function _5(n,e){var y,x,C;if(!n.items||n.items.length===0)throw new Error("estimate_items  ");const t=(y=n.items[0])==null?void 0:y.product_id;if(!t)throw new Error("Product ID   ");let r;r=b5(n.items),Object.keys(r).length;const o={},s={},i=new Set;let a=0;n.items.forEach((I,N)=>{const k=I.variant_id,ee=I.quantity||0;a+=ee;let G="";for(const[H,Y]of Object.entries(r))if(Y.some(Be=>Be.id===k)){G=H,i.add(H);break}G&&(o[G]||(o[G]={}),o[G][k]=ee),(I.discount_amount>0||I.discount_value>0)&&(s[k]={hasDiscount:!0,discountedPrice:I.price,discountAmount:I.discount_amount,discountInfo:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}})});const A={productId:t,product:(x=n.items[0])==null?void 0:x.product,addons:n.addons||[],addonItems:n.addonItems||[],selectedColors:Array.from(i),quantityByVariant:o,variantsByColor:r,variantDiscounts:s,totalQuantity:a,isCompleted:!0,lastUpdated:Date.now()},d=(n.simplePrints||[]).map(I=>({objectId:I.object_id,title:I.title,printMethod:I.print_method,uploadedFiles:I.uploaded_files,savedFileInfo:I.file_metadata,price:I.price})),c=n.prints.map((I,N)=>({template:{id:I.template_id},template_id:I.template_id,variant_id:I.variant_id,colors:I.colors,uploads:I.uploads,nameSheet:I.name_sheet,name_sheet:I.name_sheet,objectId:I.object_id,object_id:I.object_id,price:I.price,original_price:I.original_price,discount_amount:I.discount_amount,discount_type:I.discount_type,discount_value:I.discount_value,discount_direction:I.discount_direction,discount_min_quantity:I.discount_min_quantity,discount_max_quantity:I.discount_max_quantity,parentTemplates:I.parentTemplates||[],discountInfo:{originalPrice:I.original_price,discountAmount:I.discount_amount,discountDetails:{type:I.discount_type,value:I.discount_value,direction:I.discount_direction,min_quantity:I.discount_min_quantity,max_quantity:I.discount_max_quantity}}})),u={};n.addonItems.forEach(I=>{u[I.addon_id]={productId:I.selected_product_id,variantId:I.selected_variant_id}});const h={productId:t,selectedAddons:u,isCompleted:!0,lastUpdated:Date.now()};let f="none";const g=(C=n.items[0])==null?void 0:C.print_type;g&&["simple","detailed","self-design","none"].includes(g)?f=g:(f="selection",(d.length>0||c.length>0)&&console.warn("    print_type .    ."));const w={productId:t,currentMethod:f,isCompleted:!0,lastUpdated:Date.now()};return{productId:t,fixedEstimateData:{productId:t,productSelection:A,printSelection:w,addonSelection:h,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:Date.now().toString(36)+Math.random().toString(36).substr(2)},sessionStorageData:{fixedEstimateKey:`fixedEstimate_${t}`,simplePrintKey:`simplePrint_${t}`,detailedPrintKey:`detailedPrint_${t}`,printMethod:f,simplePrintState:d,detailedPrintState:c}}}async function x5(n){const{data:e,error:t}=await pt.from("estimate_items").select("quantity, price, print_type").eq("estimate_id",n);if(t)throw t;let r=0,o=0,s=!1;(e||[]).forEach(g=>{const w=g.quantity||0,y=g.price||0;r+=w*y,o+=w,g.print_type==="detailed"&&(s=!0)});let i=0;if(s){const{data:g,error:w}=await pt.from("estimate_prints").select("price").eq("estimate_id",n);if(w)throw w;i=(g||[]).reduce((y,x)=>y+(x.price||0),0)}const{data:a,error:A}=await pt.from("estimate_addon_items").select("price, quantity").eq("estimate_id",n);if(A)throw A;let d=0;(a||[]).forEach(g=>{const w=g.price||0,y=g.quantity||1;d+=w*y});const{data:c,error:u}=await pt.from("estimate_additional_costs").select("amount").eq("estimate_id",n);if(u)throw u;const h=(c||[]).reduce((g,w)=>g+(w.amount||0),0),f=r+i+d+h;return{product_amount:r,print_amount:i,addon_amount:d,additional_amount:h,total_quantity:o,total_amount:f}}async function g1(n){const e=await x5(n),{error:t}=await pt.from("estimates").update(e).eq("id",n);if(t)throw new Error(`Failed to update estimate summary: ${t.message}`)}async function B5(n,e,t,r,o){try{const s=await Mu(n);if(!s)throw new Error("    ");const i=new Date().toISOString(),a=Hu(),A={shop_id:s.shop_id||e,name:s.name,organization_name:s.organization_name,order_name:s.order_name,order_phone:s.order_phone,postcode:s.postcode,address1:s.address1,address2:s.address2,comment:s.comment,shipping_method:s.shipping_method,pref_delivery_date:s.pref_delivery_date,upload_memo:s.upload_memo,product_amount:s.product_amount,print_amount:s.print_amount,addon_amount:s.addon_amount,additional_amount:s.additional_amount,total_quantity:s.total_quantity,total_amount:s.total_amount,delivery_fee:s.delivery_fee,memo:s.memo,use_reorder:s.use_reorder,sess:t||null,customer_id:r||null,mall_type:o||s.mall_type,estimate_no:a,status:"temp",design_confirm:"none",source_estimate_id:n,is_delete:!1,created_at:i,updated_at:i},{data:d,error:c}=await pt.from("estimates").insert(A).select().single();if(c)throw new Error(`  : ${c.message}`);const u=d.id;return await mE(n,u),await wE(n,u),await yE(n,u),await bE(n,u),await _E(n,u),console.log(`[copyEstimateForUser]   : ${n}  ${u}`),{success:!0,newEstimateId:u,newEstimateNo:a}}catch(s){return console.error("[copyEstimateForUser] :",s),{success:!1,newEstimateId:null,newEstimateNo:null,error:s instanceof Error?s.message:"    ."}}}async function mE(n,e){const{data:t,error:r}=await pt.from("estimate_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function wE(n,e){const{data:t,error:r}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_simple_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function yE(n,e){const{data:t,error:r}=await pt.from("estimate_prints").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_prints").insert(s);if(i)throw new Error(`    : ${i.message}`)}}async function bE(n,e){const{data:t,error:r}=await pt.from("estimate_addon_items").select("*").eq("estimate_id",n);if(r)throw new Error(`   : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_addon_items").insert(s);if(i)throw new Error(`   : ${i.message}`)}}async function _E(n,e){const{data:t,error:r}=await pt.from("estimate_additional_costs").select("*").eq("estimate_id",n);if(r)throw new Error(`    : ${r.message}`);if(t&&t.length>0){const o=new Date().toISOString(),s=t.map(a=>{const{id:A,created_at:d,updated_at:c,...u}=a;return{...u,estimate_id:e,created_at:o,updated_at:o}}),{error:i}=await pt.from("estimate_additional_costs").insert(s);if(i)throw new Error(`    : ${i.message}`)}}function z5(n){return n?!n.sess&&!n.customer_id:!1}const gv=Object.freeze(Object.defineProperty({__proto__:null,addEstimateAddonItem:f1,addEstimateComment:Kf,addEstimateItem:A1,addEstimatePrint:d1,addEstimateSimplePrint:U0,buildVariantsByColorFromDB:b5,calculateEstimateSummary:x5,canEditEstimate:nc,convertDBDataToSessionStorage:_5,copyEstimateForUser:B5,createEstimate:a1,deleteEstimateAddonItemsByIdx:g5,deleteEstimateItem:n5,deleteEstimatePrint:o5,deleteEstimateProductByIdx:Q0,getAdditionalItems:v5,getEstimateAdditionalCost:p5,getEstimateAdditionalCosts:p1,getEstimateAddonItems:dg,getEstimateById:Mu,getEstimateComments:a5,getEstimateItems:ju,getEstimateItemsGroupedByIdx:f5,getEstimatePrints:gc,getEstimateSimplePrints:l1,getEstimatesWithDateFilter:vE,getFullEstimateDetails:c1,getGuestEstimates:h5,getMaxEstimateItemIdx:m5,getTempEstimate:i1,isAdminCreatedEstimate:z5,loadEstimateItemDataByIdx:y5,migrateSessionEstimatesToCustomer:A5,saveCompleteEstimateData:w5,subscribeToEstimateAdditionalCostsChanges:u5,subscribeToEstimateAddonItemsChanges:c5,subscribeToEstimateChanges:lg,subscribeToEstimateCommentChanges:u1,subscribeToEstimateItemsChanges:l5,subscribeToEstimateListChanges:i5,subscribeToEstimatePrintChanges:h1,subscribeToEstimateSimplePrintsChanges:d5,updateEstimate:pc,updateEstimateStatus:s5,updateEstimateSummary:g1},Symbol.toStringTag,{value:"Module"}));async function C5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("id",n).single();if(t)throw t;return e}async function S5(n){const{data:e,error:t}=await pt.from("templates").select("*").eq("parent_id",n).order("sort");if(t)throw t;return e||[]}async function wp(n){const{data:e,error:t}=await pt.from("process_print_areas").select(`
            id,
            title,
            process_print_area_templates!inner (
                id,
                print_area_id,
                template_id,
                group_cd,
                created_at,
                updated_at,
                template:templates (*)
            )
        `).eq("object_id",n).single();if(t)throw t;return e}async function ih(n){const e=[],{data:t,error:r}=await pt.from("templates").select(" * ").eq("id",n).single();if(r)return console.error("   :",r),e;if(!t)return e;e.push(t);let o=t.parent_id;for(;o;){const{data:s,error:i}=await pt.from("templates").select(" * ").eq("id",o).single();if(i){console.error("   :",i);break}if(!s)break;e.push(s),o=s.parent_id}return e.reverse()}async function zc(n){const{data:e,error:t}=await pt.from("template_products").select(`
            *,
            product:products (*),
            template_product_variants (
                id,
                variant_id,
                color_count,
                min_quantity,
                plate_price
            )
        `).eq("template_id",n).single();if(t)throw t;return e}async function v1(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("object_id",n).single();return t?(console.error("  :",t),null):e}const xE=Object.freeze(Object.defineProperty({__proto__:null,getChildTemplates:S5,getParentTemplates:ih,getPrintAreaByObjectId:v1,getTemplate:C5,getTemplateProduct:zc,getTemplatesByObjectId:wp},Symbol.toStringTag,{value:"Module"})),Fd={productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1,currentSessionId:`session-${Date.now()}-${Math.random().toString(36).substring(2)}`,sessionStorageKey:"extended-product-data-cache"};function BE(){const{subscribe:n,set:e,update:t}=nd(Fd),r={save(o,s){if(!(typeof window>"u"))try{const i=`${Fd.sessionStorageKey}-${o}`,a={...s,lastSavedToSession:Date.now()};window.sessionStorage.setItem(i,JSON.stringify(a))}catch(i){console.warn("   :",i)}},restore(o){if(typeof window>"u")return null;try{const s=`${Fd.sessionStorageKey}-${o}`,i=window.sessionStorage.getItem(s);if(i)return JSON.parse(i)}catch(s){console.warn("   :",s)}return null},clear(o){if(!(typeof window>"u"))if(o){const s=`${Fd.sessionStorageKey}-${o}`;window.sessionStorage.removeItem(s)}else Object.keys(window.sessionStorage).forEach(s=>{s.startsWith(Fd.sessionStorageKey)&&window.sessionStorage.removeItem(s)})}};return{subscribe:n,set:e,update:t,async loadIntegratedProductData(o,s){var d;const i={subscribe:n},a=kn(i),A=r.restore(o);if((d=a.productDataCache[o])!=null&&d.isLoaded||A!=null&&A.isLoaded){const c=A||a.productDataCache[o];return A&&t(u=>({...u,productDataCache:{...u.productDataCache,[o]:c}})),c}if(a.loadingProducts.has(o))return new Promise((c,u)=>{const h=setInterval(()=>{var g;const f=kn(i);f.loadingProducts.has(o)||(clearInterval(h),(g=f.productDataCache[o])!=null&&g.isLoaded?c(f.productDataCache[o]):u(new Error("   ")))},100)});t(c=>({...c,loadingProducts:new Set([...c.loadingProducts,o]),isGlobalLoading:!0,productDataCache:{...c.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!0,sessionId:c.currentSessionId}}}));try{const[c,u]=await Promise.all([oh(o,s),sh(o)]);if(!c)throw new Error("   ");const h={};u.forEach(g=>{g.items.forEach(w=>{w.addon_product.variants&&w.addon_product.variants.length>0&&(h[w.addon_product.id]={price:w.addon_product.variants[0].prices[0].amount,title:w.addon_product.title,variants:w.addon_product.variants,description:w.addon_product.description,thumbnail:w.addon_product.thumbnail})})});const f={id:o,product:c,addons:u,process:c.process,addonProductsMap:h,productSelection:A==null?void 0:A.productSelection,printSelection:A==null?void 0:A.printSelection,addonSelection:A==null?void 0:A.addonSelection,isLoaded:!0,isLoading:!1,sessionId:a.currentSessionId};return t(g=>{const w=new Set(g.loadingProducts);return w.delete(o),{...g,loadingProducts:w,isGlobalLoading:w.size>0,productDataCache:{...g.productDataCache,[o]:f}}}),r.save(o,f),f}catch(c){throw console.error("   :",c),t(u=>{const h=new Set(u.loadingProducts);return h.delete(o),{...u,loadingProducts:h,isGlobalLoading:h.size>0,productDataCache:{...u.productDataCache,[o]:{id:o,product:{},addons:[],addonProductsMap:{},isLoaded:!1,isLoading:!1,error:c instanceof Error?c.message:"   ",sessionId:u.currentSessionId}}}}),c}},updateProductSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedColors:[],quantityByVariant:{},variantsByColor:{},totalQuantity:0,isCompleted:!1,...a.productSelection,...s,lastUpdated:A},c={...a,productSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},updatePrintSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,currentMethod:"selection",isCompleted:!1,...a.printSelection,...s,lastUpdated:A},c={...a,printSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},selectPrintMethod(o,s){this.updatePrintSelection(o,{currentMethod:s,lastUpdated:Date.now()})},completePrintSelection(o){this.updatePrintSelection(o,{isCompleted:!0,lastUpdated:Date.now()})},updateAddonSelection(o,s){t(i=>{const a=i.productDataCache[o];if(!a)return i;const A=Date.now(),d={productId:o,selectedAddons:{},isCompleted:!1,...a.addonSelection,...s,lastUpdated:A},c={...a,addonSelection:d};return r.save(o,c),{...i,productDataCache:{...i.productDataCache,[o]:c}}})},getProductData(o){return kn({subscribe:n}).productDataCache[o]||null},restoreFromSession(o){const s=r.restore(o);return s&&t(i=>({...i,productDataCache:{...i.productDataCache,[o]:s}})),s},saveToSession(o){const a=kn({subscribe:n}).productDataCache[o];a&&r.save(o,a)},clearProductData(o){o?(r.clear(o),t(s=>{const i={...s.productDataCache};return delete i[o],{...s,productDataCache:i}})):(r.clear(),t(s=>({...s,productDataCache:{},loadingProducts:new Set,isGlobalLoading:!1})))},updateProduct(o,s){t(i=>{const A={...i.productDataCache[o]||{id:o,product:s.product,addons:s.addons,addonProductsMap:{},isLoaded:!0,isLoading:!1,sessionId:i.currentSessionId},product:s.product,addons:s.addons,isLoaded:!0,isLoading:!1};return r.save(o,A),{...i,productDataCache:{...i.productDataCache,[o]:A}}})},hasProductSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.productSelection)!=null&&i.isCompleted)},hasPrintSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.printSelection)!=null&&i.isCompleted)},hasAddonSelection(o){var i;const s=this.getProductData(o);return!!((i=s==null?void 0:s.addonSelection)!=null&&i.isCompleted)},reset(){console.log(" Extended Product Data Store  "),r.clear(),e(Fd),console.log(" Extended Product Data Store  ")}}}const so=BE();function zE(){if(typeof window>"u")return;const n=[];for(let e=0;e<window.sessionStorage.length;e++){const t=window.sessionStorage.key(e);if(!t)continue;(t.startsWith("fixedEstimate_")||t.startsWith("detailedPrint_")||t.startsWith("simplePrint_")||t.startsWith("extended-product-data-cache-"))&&n.push(t)}n.forEach(e=>window.sessionStorage.removeItem(e)),console.log(` Edit mode: Cleared ${n.length} sessionStorage keys`,n)}var CE=W('<div class="odz-gap-2 odz-mt-3 odz-flex odz-flex-col"><button class="odz-btn odz-btn-sm odz-btn-secondary"></button> <button class="odz-btn odz-btn-sm odz-btn-primary"></button></div>'),SE=W('<img class="odz-w-8 odz-h-8 odz-object-cover odz-rounded">'),EE=W('<div class="odz-flex odz-items-center odz-gap-2 odz-border odz-rounded-lg odz-p-2"><!> <div class="odz-text-xs"><span> </span> <span class="odz-ml-2 odz-font-semibold"> </span></div></div>'),FE=W('<div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><span class="odz-text-gray-600 odz-font-bold"> </span> <span class="odz-text-xs"> </span></div>'),IE=W('<div class="odz-mt-3"></div>'),UE=W('<span class="odz-text-gray-600"> </span> <span class="odz-text-primary odz-font-semibold odz-ml-auto"> </span>',1),QE=W('<div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-bg-gray-50 odz-p-2 odz-rounded odz-mb-1"><span class="odz-font-medium"> </span> <!></div>'),TE=W('<div class="odz-mt-3"><div class="odz-text-sm odz-font-bold odz-text-gray-600 odz-mb-2"> </div> <!></div>'),LE=W('<span class="odz-text-sm odz-font-bold odz-text-gray-500"></span>'),PE=W('<span class="odz-text-sm odz-font-bold"> </span>'),kE=W('<div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div>'),OE=W('<div class="odz-flex odz-flex-col odz-gap-1"><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <span class="odz-text-sm odz-font-bold"> </span></div> <div class="odz-flex odz-items-center odz-gap-2"><span class="odz-text-sm odz-text-gray-600"> </span> <!></div> <!></div> <div class="odz-flex odz-flex-col odz-items-end"><span class="odz-font-bold"> </span> <span class="odz-font-bold odz-text-lg"> </span></div>',1),DE=W('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border"><div class="odz-card-body odz-p-3"><div class="odz-flex odz-gap-4"><div class="odz-flex odz-flex-col odz-justify-between"><img class="odz-w-24 odz-h-24 odz-object-cover odz-rounded"> <!></div> <div class="odz-flex-1"><h2 class="odz-text-lg odz-font-bold"> </h2> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"></div> <!> <!> <div class="odz-flex odz-justify-between odz-items-center odz-mt-4 odz-pt-3 odz-border-t"></div></div></div></div></div>'),NE=W('<div class="odz-text-center odz-py-8 odz-text-gray-500">  .</div>'),ME=W('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50"><div class="odz-bg-white odz-rounded-lg odz-shadow-xl odz-max-w-md odz-w-full odz-mx-4"><div class="odz-px-6 odz-py-4 odz-border-b odz-border-gray-200"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-900">  </h3></div> <div class="odz-px-6 odz-py-4"><p class="odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-gray-900"> </span>() ?</p> <p class="odz-text-xs odz-text-gray-500 odz-mt-2">    .</p></div> <div class="odz-px-6 odz-py-4 odz-border-t odz-border-gray-200 odz-flex odz-gap-3 odz-justify-end"><button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-gray-700 odz-bg-white odz-border odz-border-gray-300 odz-rounded-lg hover:odz-bg-gray-50 odz-transition-colors"></button> <button class="odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-text-white odz-bg-red-500 odz-rounded-lg hover:odz-bg-red-600 odz-transition-colors"></button></div></div></div>'),HE=W('<div class="odz-flex odz-flex-col odz-gap-4"><!></div> <!>',1);function E5(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t);let s=gt(e,"onSelectProduct",8),i=gt(e,"onDeleteProduct",8,void 0),a=gt(e,"isEditable",8,!1),A=Se(!1),d=null,c=Se("");function u(G){return G.title?G.title:!G.option_values||!Array.isArray(G.option_values)?G.id||"":G.option_values.map(H=>{var Y;return((Y=H.option_value)==null?void 0:Y.value)||""}).join(" / ")}function h(G){const H=[];return G.parentTemplates&&H.push(G.parentTemplates.map(Y=>Y.name).join(" > ")),G.colors&&H.push(`${G.colors.length}`),H.join(" - ")}function f(G){var H,Y;d=G,b(c,((Y=(H=o().products[G])==null?void 0:H.product)==null?void 0:Y.title)||" "),b(A,!0)}async function g(){if(d===null)return;const G=d;b(A,!1),d=null,b(c,""),i()?await i()(G):Yt(Et,lt(o).products=o().products.filter((H,Y)=>Y!==G),lt(o))}function w(){b(A,!1),d=null,b(c,"")}an();var y=HE(),x=ut(y),C=m(x);{var I=G=>{var H=Lt(),Y=ut(H);er(Y,1,()=>o().products,vr,(Be,M,O)=>{var J=DE(),re=m(J),he=m(re),ie=m(he),be=m(ie),te=B(be,2);{var Z=$=>{var j=CE(),ae=m(j),Ee=B(ae,2);tt("click",ae,()=>s()(O)),tt("click",Ee,()=>f(O)),Q($,j)};xe(te,$=>{a()&&$(Z)})}var Ae=B(ie,2),we=m(Ae),z=m(we),F=B(we,2);er(F,5,()=>l(M).variants,vr,($,j)=>{var ae=EE(),Ee=m(ae);{var _e=le=>{var ue=SE();De(Ie=>{lr(ue,"src",l(j).thumbnail),lr(ue,"alt",Ie)},[()=>u(l(j))],at),Q(le,ue)};xe(Ee,le=>{l(j).thumbnail&&le(_e)})}var Le=B(Ee,2),X=m(Le),D=m(X),oe=B(X,2),ve=m(oe);De(le=>{Qe(D,le),Qe(ve,`${l(j).quantity??""}`)},[()=>u(l(j))],at),Q($,ae)});var E=B(F,2);{var U=$=>{var j=IE();er(j,5,()=>l(M).prints,vr,(ae,Ee)=>{var _e=FE(),Le=m(_e),X=m(Le),D=B(Le,2),oe=m(D);De(ve=>{Qe(X,l(Ee).title),Qe(oe,ve)},[()=>h(l(Ee))],at),Q(ae,_e)}),Q($,j)};xe(E,$=>{l(M).prints&&l(M).prints.length>0&&$(U)})}var P=B(E,2);{var T=$=>{var j=TE(),ae=B(m(j),2);er(ae,1,()=>Object.entries(l(M).addons),vr,(Ee,_e)=>{let Le=()=>l(_e)[1];var X=Lt();const D=at(()=>l(M).addonProductsMap[Le().productId]);var oe=ut(X);{var ve=le=>{var ue=QE();const Ie=at(()=>l(D).variants.find(Oe=>Oe.id===Le().variantId));var Ne=m(ue),ze=m(Ne),Ce=B(Ne,2);{var pe=Oe=>{var ke=UE(),me=ut(ke),q=m(me),de=B(me,2),ye=m(de);De(Fe=>{Qe(q,`- ${l(Ie).title||" "}`),Qe(ye,` ${Fe??""}`)},[()=>Er(l(Ie).prices[0].amount)],at),Q(Oe,ke)};xe(Ce,Oe=>{l(Ie)&&Oe(pe)})}De(()=>Qe(ze,l(D).title)),Q(le,ue)};xe(oe,le=>{l(D)&&le(ve)})}Q(Ee,X)}),Q($,j)};xe(P,$=>{l(M).addons&&Object.keys(l(M).addons).length>0&&l(M).addonProductsMap&&$(T)})}var R=B(P,2);er(R,5,()=>[l(M)],vr,($,j)=>{var ae=OE();const Ee=at(()=>l(j).productAmount||(l(j).variants||[]).reduce((Pe,nt)=>Pe+nt.prices[0].amount*nt.quantity,0)),_e=at(()=>l(j).printAmount||(l(j).prints||[]).reduce((Pe,nt)=>Pe+(nt.price||0),0)),Le=at(()=>l(j).addonAmount||0),X=at(()=>l(j).totalAmount||l(Ee)+l(_e)+l(Le)),D=at(()=>l(j).prints&&l(j).prints.length>0),oe=at(()=>l(j).simplePrints&&l(j).simplePrints.length>0),ve=at(()=>l(j).print_type==="simple"&&l(oe)||l(oe)&&!l(D)),le=at(()=>!l(D)&&!l(oe));var ue=ut(ae),Ie=m(ue),Ne=B(m(Ie),2),ze=m(Ne),Ce=B(Ie,2),pe=B(m(Ce),2);{var Oe=Pe=>{var nt=LE();Q(Pe,nt)},ke=Pe=>{var nt=PE(),qe=m(nt);De(je=>Qe(qe,`${je??""}`),[()=>Er(l(_e))],at),Q(Pe,nt)};xe(pe,Pe=>{l(ve)||l(le)?Pe(Oe):Pe(ke,!1)})}var me=B(Ce,2);{var q=Pe=>{var nt=kE(),qe=B(m(nt),2),je=m(qe);De(fe=>Qe(je,`${fe??""}`),[()=>Er(l(Le))],at),Q(Pe,nt)};xe(me,Pe=>{l(Le)>0&&Pe(q)})}var de=B(ue,2),ye=B(m(de),2),Fe=m(ye);De((Pe,nt)=>{Qe(ze,`${Pe??""}`),Qe(Fe,`${nt??""}`)},[()=>Er(l(Ee)),()=>Er(l(X))],at),Q($,ae)}),De(()=>{lr(be,"src",l(M).product.thumbnail),lr(be,"alt",l(M).product.title),Qe(z,l(M).product.title)}),Q(Be,J)}),Q(G,H)},N=G=>{var H=NE();Q(G,H)};xe(C,G=>{o().products&&o().products.length>0?G(I):G(N,!1)})}var k=B(x,2);{var ee=G=>{var H=ME(),Y=m(H),Be=B(m(Y),2),M=m(Be),O=m(M),J=m(O),re=B(Be,2),he=m(re),ie=B(he,2);De(()=>Qe(J,l(c))),tt("click",he,w),tt("click",ie,g),Q(G,H)};xe(k,G=>{l(A)&&G(ee)})}Q(n,y),sn(),r()}var jE=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><form method="dialog"><button class="odz-btn"></button></form></div></div></dialog>');function Cc(n,e){on(e,!1);let t=gt(e,"isOpen",12),r=gt(e,"message",12),o=gt(e,"title",8,""),s=gt(e,"onClose",8,void 0);function i(){t(!1),r(""),s()&&s()()}an();var a=Lt(),A=ut(a);{var d=c=>{var u=jE(),h=m(u),f=m(h),g=m(f),w=B(f,2),y=m(w),x=B(w,2),C=m(x),I=m(C);De(()=>{Qe(g,o()),Qe(y,r())}),tt("click",I,i),Q(c,u)};xe(A,c=>{t()&&c(d)})}Q(n,a),sn()}var RE=W('<div class="odz-fixed odz-inset-0 odz-bg-base-100 odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-rounded-lg odz-p-8 odz-flex odz-flex-col odz-items-center odz-gap-4"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></span> <p class="odz-text-base-content odz-font-medium"> </p></div></div>');function Sc(n,e){let t=gt(e,"isLoading",8,!1),r=gt(e,"message",8,"...");var o=Lt(),s=ut(o);{var i=a=>{var A=RE(),d=m(A),c=B(m(d),2),u=m(c);De(()=>Qe(u,r())),Q(a,A)};xe(s,a=>{t()&&a(i)})}Q(n,o)}var $E=W("<span> <span></span></span>"),qE=W('<div class="odz-flex odz-items-center odz-gap-2 odz-w-full odz-justify-center"><!> <span> <span></span></span> <!></div>');function F5(n,e){on(e,!1);const t=Se();let r=gt(e,"originalPrice",8),o=gt(e,"finalPrice",8),s=gt(e,"hasDiscount",8,!1),i=gt(e,"size",8,"md"),a=gt(e,"showOriginal",8,!0);Jt(()=>Vn(i()),()=>{b(t,{sm:{original:"odz-text-sm",final:"odz-text-sm odz-font-semibold",currency:"odz-text-xs"},md:{original:"odz-text-base",final:"odz-text-lg odz-font-bold",currency:"odz-text-sm"},lg:{original:"odz-text-lg",final:"odz-text-xl odz-font-bold",currency:"odz-text-base"}}[i()])}),mo(),an();var A=qE(),d=m(A);{var c=y=>{var x=$E(),C=m(x),I=B(C);De(N=>{Lr(x,`odz-text-gray-500 odz-line-through ${l(t).original??""}`),Qe(C,N),Lr(I,y0(l(t).currency))},[()=>r().toLocaleString()],at),Q(y,x)};xe(d,y=>{s()&&a()&&r()!==o()&&y(c)})}var u=B(d,2),h=m(u),f=B(h),g=B(u,2);{var w=y=>{var x=Lt();const C=at(()=>Math.round((r()-o())/r()*100));var I=ut(x);{var N=k=>{};xe(I,k=>{l(C)>0&&k(N)})}Q(y,x)};xe(g,y=>{s()&&r()!==o()&&y(w)})}De(y=>{Lr(u,`odz-text-gray-900 ${l(t).final??""}`),Qe(h,y),Lr(f,y0(l(t).currency))},[()=>o().toLocaleString()],at),Q(n,A),sn()}var KE=W('<img class="odz-w-8 odz-h-8 odz-object-cover odz-mb-1">'),VE=W('<span class="odz-ml-1"></span>'),GE=W('<span class="odz-ml-1"></span>'),WE=W("<button><!> <span> </span> <!></button>"),XE=W('<div class="odz-flex odz-flex-col odz-gap-2 mb-4"><h3 class="odz-font-bold odz-text-sm"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),YE=W('<img class="odz-w-10 odz-h-10 odz-rounded odz-object-cover">'),JE=W('<!> <div class="odz-inline-flex odz-items-center odz-justify-center odz-w-5 odz-h-5 odz-bg-red-500 odz-text-white odz-rounded-full odz-text-xs odz-font-bold odz-flex-shrink-0" title=" ">%</div>',1),ZE=W('<span class="odz-text-xs"> </span>'),eF=W('<div class="odz-flex odz-flex-col odz-border odz-rounded odz-overflow-hidden"><div class="odz-bg-gray-50 odz-px-3 odz-py-2 odz-border-b"><span class="odz-text-xs odz-font-medium odz-text-center odz-block"> </span></div> <div class="odz-flex odz-flex-col odz-p-3 odz-gap-2"><div class="odz-text-center"><div class="odz-flex odz-items-center odz-justify-center odz-gap-1"><!></div></div> <div class="odz-flex odz-items-center odz-border odz-rounded odz-mt-1"><button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">-</button> <input type="number" class="odz-input odz-input-sm odz-w-full odz-text-center odz-border-x-0 odz-border-y focus:odz-outline-none focus:odz-ring-0 focus:odz-border-x-0 focus:odz-border-y" min="0"> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-px-2">+</button></div></div></div>'),tF=W('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),rF=W(`<p class="odz-text-sm odz-text-gray-500">    ( )
                                .</p>`),nF=W('<div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-bg-gray-100 odz-p-2 odz-rounded"><!> <h3 class="odz-font-semibold odz-text-base"> </h3></div> <!></div>'),oF=W('<div class="odz-flex odz-flex-col odz-gap-6 mt-4"></div>'),sF=W('<img class="odz-w-16 odz-h-16 odz-object-cover odz-rounded">'),iF=W('<p class="odz-text-sm odz-text-gray-600 odz-mt-1"> </p>'),aF=W('<div class="odz-text-sm odz-font-semibold odz-text-primary"> </div>'),AF=W('<div role="button" tabindex="0"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><input type="radio" class="odz-radio odz-radio-primary odz-radio-sm"> <span class="odz-text-sm odz-font-medium"> </span></div> <!></div>'),lF=W('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 odz-gap-3"></div>'),dF=W('<div class="odz-border odz-rounded-lg odz-p-4 odz-bg-base-100"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-3"><!> <div><h5 class="odz-font-medium odz-text-base"> </h5> <!></div></div> <!></div>'),cF=W('<div class="odz-flex odz-flex-col odz-gap-4"><h4 class="odz-font-semibold odz-text-base odz-text-gray-700"> </h4> <!></div>'),uF=W('<div class="odz-flex odz-flex-col odz-gap-6 odz-mt-8"><h3 class="odz-font-bold odz-text-lg odz-border-b odz-pb-2"> </h3> <!></div>'),hF=W('<div class="odz-flex odz-justify-end odz-mt-6"><button class="odz-btn odz-btn-accent odz-w-full"></button></div>'),fF=W('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <div class="odz-card-actions odz-justify-end"></div></div></div> <!> <!> <!> <!>',1),pF=W('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!> <!>',1);function gF(n,e){var we;on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=()=>fn(oi,"$shopStore",t);let i=gt(e,"step",12,0),a=gt(e,"productId",8),A=Se(null),d=Se(!1),c=Se(""),u=Se(""),h=Se(!1),f=Se([]),g=Se({}),w=Se({}),y=Se(((we=o().products[o().index])==null?void 0:we.variants.map(z=>({...z})))||[]),x=Se({}),C=null,I=Se({}),N=Se([]),k=Se({});function ee(z,F){console.log(" togglePenultimateSelection :",{optionId:z,value:F,penultimateOptionId:C}),!C&&l(A)&&l(A).options.length>=2&&(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",C)),z!==C&&console.log(" optionId :",{optionId:z,penultimateOptionId:C}),zr(x,l(x)[z]=F),b(x,{...l(x)});const E=l(N).indexOf(F);if(console.log("  expandedPenultimateValues:",l(N),"index:",E),E===-1)if(b(N,[...l(N),F]),console.log("    expandedPenultimateValues:",l(N)),!l(k)[F]||l(k)[F].length===0){console.log(" variants  :",{value:F,optionId:z,penultimateOptionId:C});const U=l(A).variants.filter(P=>P.option_values?P.option_values.some(R=>{if(R.option_id&&R.value){const $=R.option_id===z&&R.value===F;return $&&console.log("   :",{variantId:P.id,ov:R}),$}else if(R.option_value&&R.option_value.option_id){const $=R.option_value.option_id===z&&R.option_value.value===F;return $&&console.log("   :",{variantId:P.id,ov:R}),$}return!1}):(console.log(" variant.option_values :",P.id),!1));console.log("  variants:",{value:F,count:U.length,variants:U.map(P=>({id:P.id,title:P.title}))}),zr(k,l(k)[F]=U),b(k,{...l(k)}),U.forEach(P=>{l(y).some(T=>T.id===P.id)||b(y,[...l(y),{...P,quantity:0}])})}else console.log("  variants :",{value:F,count:l(k)[F].length});else b(N,l(N).filter(U=>U!==F)),console.log("    expandedPenultimateValues:",l(N));b(N,[...l(N)]),b(k,{...l(k)}),console.log(" togglePenultimateSelection :",{expandedPenultimateValues:l(N),variantsByGroup:Object.keys(l(k)),hasExpanded:l(N).length>0}),setTimeout(()=>{console.log(" 1   :",{expandedPenultimateValues:l(N).length,variantsByGroupKeys:Object.keys(l(k))})},1e3)}function G(z,F){var U;const E=((U=l(A))==null?void 0:U.options.findIndex(P=>P.id===z))??-1;if(!(!l(A)||E===-1||E>=l(A).options.length-1)){for(let P=E+1;P<l(A).options.length;P++)delete l(x)[l(A).options[P].id];zr(x,l(x)[z]=F),b(x,{...l(x)}),b(N,[]),b(k,{}),C&&b(y,l(y).filter(P=>!P.option_values.some(T=>T.option_value.option_id===C)||(P.quantity||0)>0))}}function H(z){b(y,l(y).map(F=>F.id===z?{...F,quantity:(F.quantity||0)+1}:F))}function Y(z){b(y,l(y).map(F=>F.id===z&&(F.quantity||0)>0?{...F,quantity:(F.quantity||0)-1}:F))}function Be(){const z=l(y).filter(E=>(E.quantity||0)>0);if(z.length===0){b(d,!0),b(c," "),b(u,"1    .");return}const F=o().products[o().index];F&&(Yt(Et,lt(o).products[o().index]={...F,variants:z,quantity:z.reduce((E,U)=>E+(U.quantity||0),0)},lt(o)),Et.updateTotalAmounts()),i(2)}async function M(){var U,P;if(!((U=l(A))!=null&&U.quantity_discounts)){b(I,{});return}const z=l(y).reduce((T,R)=>T+(R.quantity||0),0);let F=null;if(z>0){const T=((P=l(y).find(R=>(R.quantity||0)>0))==null?void 0:P.prices[0].amount)||0;F=$i(z,T,l(A).quantity_discounts)}const E={};for(const T of l(y))(T.quantity||0)>0&&(F!=null&&F.hasDiscount)&&(E[T.id]=F);b(I,E)}let O=Se(null);Xn(async()=>{var z;b(h,!0);try{if(b(A,await oh(a(),s().id)),l(A)&&(b(f,await sh(l(A).id)),b(w,{}),l(f).forEach(F=>{F.items.forEach(E=>{E.addon_product.variants&&E.addon_product.variants.length>0&&zr(w,l(w)[E.addon_product.id]={price:E.addon_product.variants[0].prices[0].amount,title:E.addon_product.title,variants:E.addon_product.variants})})}),(z=o().products[o().index])!=null&&z.addons)){const F=o().products[o().index].addons;b(g,{}),Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId?zr(g,l(g)[E]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&zr(g,l(g)[E]={productId:U,variantId:""})}),b(g,{...l(g)})}if(l(A)&&l(A).options.length>0&&(l(A).options.length>=2?(C=l(A).options[l(A).options.length-2].id,console.log(" penultimateOptionId :",{penultimateOptionId:C,optionCount:l(A).options.length,allOptions:l(A).options.map(F=>({id:F.id,title:F.title}))})):console.log("  2 :",l(A).options.length)),o().products[o().index]&&o().products[o().index].variants.length>0){Yt(Et,lt(o).products[o().index].product=l(A),lt(o)),b(y,o().products[o().index].variants.map(E=>({...E})));const F=o().products[o().index].addons||{};if(b(g,{}),Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId?zr(g,l(g)[E]={productId:U.productId,variantId:U.variantId}):typeof U=="string"&&zr(g,l(g)[E]={productId:U,variantId:""})}),l(A)&&l(A).options.length>0){const E=l(y).filter(U=>(U.quantity||0)>0);if(E.length>0){const U=l(A).options.map(P=>P.id);if(l(A).options.length>=2){C=l(A).options[l(A).options.length-2].id;const P=[];if(E.forEach(T=>{if(T.title){const R=T.title.split(" / ");if(R.length>0){const $=R[0];P.includes($)||P.push($)}}T.option_values&&T.option_values.forEach(R=>{R.option_id&&R.value?R.option_id===C&&(P.includes(R.value)||P.push(R.value)):R.option_value&&R.option_value.option_id&&R.option_value.option_id===C&&(P.includes(R.option_value.value)||P.push(R.option_value.value))})}),P.length>0)P.forEach(T=>{ee(C,T)});else{const T=[];E.forEach(R=>{if(R.title){const $=R.title.split(" / ");if($.length>0){const j=$[0].trim();T.includes(j)||T.push(j)}}}),T.length>0?T.forEach(R=>{const $=l(A).options[l(A).options.length-2].values.find(j=>j.value.toLowerCase()===R.toLowerCase());if($)ee(C,$.value);else{const j=l(A).options[l(A).options.length-2].values.filter(ae=>ae.value.toLowerCase().includes(R.toLowerCase())||R.toLowerCase().includes(ae.value.toLowerCase()));j.length>0&&j.forEach(ae=>{ee(C,ae.value)})}}):l(A).options[l(A).options.length-2].values.forEach(R=>{ee(C,R.value)})}}else l(A).options.length}}}else l(A)&&Yt(Et,lt(o).products=[...o().products,{product:l(A),variants:[],quantity:0,prints:[],addons:{},addonProductsMap:l(w)}],lt(o));setTimeout(()=>{Et.updateTotalAmounts()},100)}catch(F){console.error("Product component  :",F)}finally{b(h,!1)}});function J(z,F,E){if(!E||E.trim()===""){console.error("Invalid variantId provided:",E);return}zr(g,l(g)[z]={productId:F,variantId:E}),b(g,{...l(g)});const U=o().products[o().index];U&&(Yt(Et,lt(o).products[o().index]={...U,addons:l(g),addonProductsMap:l(w)},lt(o)),Et.updateTotalAmounts())}function re(z){return z?z.replace(/<[^>]*>/g,"").trim():""}Jt(()=>(o(),l(g)),()=>{var z;if((z=o().products[o().index])!=null&&z.addons&&Object.keys(o().products[o().index].addons).length>0&&Object.keys(l(g)).length===0){const F=o().products[o().index].addons;Object.entries(F).forEach(([E,U])=>{typeof U=="object"&&U.productId&&U.variantId&&zr(g,l(g)[E]={productId:U.productId,variantId:U.variantId})}),b(g,{...l(g)})}}),Jt(()=>(l(y),l(A),l(O),o(),l(g),l(w),Et),()=>{l(y)&&l(A)&&(l(O)&&clearTimeout(l(O)),b(O,setTimeout(()=>{const z=o().products[o().index];if(z){const F=l(y).reduce((P,T)=>P+(T.quantity||0),0),E=z.quantity||0,U=l(y).filter(P=>(P.quantity||0)>0);Yt(Et,lt(o).products[o().index]={...z,variants:U,quantity:F,addons:l(g),addonProductsMap:l(w)},lt(o)),M(),F!==E&&z.prints&&z.prints.length>0&&Et.calculatePrintPrice(o().index),Et.updateTotalAmounts()}},100)))}),mo(),an();var he=pF(),ie=ut(he),be=m(ie);{var te=z=>{var F=fF(),E=ut(F),U=m(E),P=m(U),T=B(U,2),R=m(T),$=m(R),j=B(E,2);er(j,1,()=>l(A).options,vr,(oe,ve,le)=>{var ue=Lt(),Ie=ut(ue);{var Ne=ze=>{var Ce=XE(),pe=m(Ce),Oe=m(pe),ke=B(pe,2);er(ke,5,()=>l(ve).values,vr,(me,q)=>{var de=WE();const ye=at(()=>le===l(A).options.length-2),Fe=at(()=>l(ye)&&l(N).includes(l(q).value)),Pe=at(()=>l(ye)?l(Fe):l(x)[l(ve).id]===l(q).value);var nt=m(de);{var qe=Ye=>{var ot=KE();De(()=>{lr(ot,"src",l(q).image),lr(ot,"alt",l(q).value)}),Q(Ye,ot)};xe(nt,Ye=>{l(q).image&&Ye(qe)})}var je=B(nt,2),fe=m(je),Me=B(je,2);{var At=Ye=>{var ot=VE();Q(Ye,ot)},Ve=Ye=>{var ot=Lt(),ht=ut(ot);{var Ge=it=>{var zt=GE();Q(it,zt)};xe(ht,it=>{l(ye)&&it(Ge)},!0)}Q(Ye,ot)};xe(Me,Ye=>{l(ye)&&l(Fe)?Ye(At):Ye(Ve,!1)})}De(()=>{Lr(de,`odz-btn odz-btn-outline odz-h-auto odz-min-h-10 odz-border-gray-300 odz-w-44 odz-p-2 odz-text-xs ${(l(Pe)?"odz-border-2 odz-border-gray-800":"")??""}`),Qe(fe,l(q).value)}),tt("click",de,()=>{var Ye;console.log("   :",{optionTitle:l(ve).title,optionId:l(ve).id,value:l(q).value,isPenultimateOption:l(ye),index:le,totalOptions:(Ye=l(A))==null?void 0:Ye.options.length}),l(ye)?ee(l(ve).id,l(q).value):G(l(ve).id,l(q).value)}),Q(me,de)}),De(()=>Qe(Oe,l(ve).title)),Q(ze,Ce)};xe(Ie,ze=>{le<l(A).options.length-1&&ze(Ne)})}Q(oe,ue)});var ae=B(j,2);{var Ee=oe=>{var ve=oF();er(ve,5,()=>l(N),le=>le,(le,ue)=>{var Ie=nF();const Ne=at(()=>l(k)[l(ue)]||[]),ze=at(()=>{var Fe;return(Fe=l(A).options[l(A).options.length-2])==null?void 0:Fe.values.find(Pe=>Pe.value===l(ue))});var Ce=m(Ie),pe=m(Ce);{var Oe=Fe=>{var Pe=YE();De(()=>{lr(Pe,"src",l(ze).image),lr(Pe,"alt",l(ue))}),Q(Fe,Pe)};xe(pe,Fe=>{var Pe;(Pe=l(ze))!=null&&Pe.image&&Fe(Oe)})}var ke=B(pe,2),me=m(ke),q=B(Ce,2);{var de=Fe=>{var Pe=tF();er(Pe,5,()=>l(Ne),nt=>nt.id,(nt,qe)=>{var je=eF();const fe=at(()=>l(y).find(Je=>Je.id===l(qe).id)),Me=at(()=>{var Je;return((Je=l(fe))==null?void 0:Je.quantity)||0}),At=at(()=>{var Je;return((Je=l(qe).option_values.find(mt=>mt.option_value.option_id===l(A).options[l(A).options.length-1].id))==null?void 0:Je.option_value.value)||"N/A"}),Ve=at(()=>l(I)[l(qe).id]);var Ye=m(je),ot=m(Ye),ht=m(ot),Ge=B(Ye,2),it=m(Ge),zt=m(it),xt=m(zt);{var Tt=Je=>{var mt=JE(),vt=ut(mt);F5(vt,{get originalPrice(){return l(qe).prices[0].amount},get finalPrice(){return l(Ve).discountedPrice},hasDiscount:!0,size:"sm"}),Q(Je,mt)},yt=Je=>{var mt=ZE(),vt=m(mt);De($t=>Qe(vt,`${$t??""}`),[()=>Er(l(qe).prices[0].amount)],at),Q(Je,mt)};xe(xt,Je=>{var mt;(mt=l(Ve))!=null&&mt.hasDiscount&&l(Me)>0?Je(Tt):Je(yt,!1)})}var rt=B(it,2),Dt=m(rt),St=B(Dt,2),Nt=B(St,2);De(()=>{Qe(ht,l(At)),Dt.disabled=l(Me)<=0,Ym(St,l(Me))}),tt("click",Dt,()=>Y(l(qe).id)),tt("input",St,Je=>{const mt=parseInt(Je.target.value)||0;b(y,l(y).map(vt=>vt.id===l(qe).id?{...vt,quantity:mt>=0?mt:0}:vt))}),tt("click",Nt,()=>H(l(qe).id)),Q(nt,je)}),Q(Fe,Pe)},ye=Fe=>{var Pe=rF();Q(Fe,Pe)};xe(q,Fe=>{l(Ne).length>0?Fe(de):Fe(ye,!1)})}De(()=>Qe(me,l(ue))),Q(le,Ie)}),Q(oe,ve)};xe(ae,oe=>{l(N).length>0&&oe(Ee)})}var _e=B(ae,2);{var Le=oe=>{var ve=uF(),le=B(m(ve),2);er(le,1,()=>l(f),ue=>ue.id,(ue,Ie)=>{var Ne=cF(),ze=m(Ne),Ce=m(ze),pe=B(ze,2);er(pe,1,()=>l(Ie).items,Oe=>Oe.id,(Oe,ke)=>{var me=dF(),q=m(me),de=m(q);{var ye=At=>{var Ve=sF();De(()=>{lr(Ve,"src",l(ke).addon_product.thumbnail),lr(Ve,"alt",l(ke).addon_product.title)}),Q(At,Ve)};xe(de,At=>{l(ke).addon_product.thumbnail&&At(ye)})}var Fe=B(de,2),Pe=m(Fe),nt=m(Pe),qe=B(Pe,2);{var je=At=>{var Ve=iF(),Ye=m(Ve);De(ot=>Qe(Ye,ot),[()=>re(l(ke).addon_product.description)],at),Q(At,Ve)};xe(qe,At=>{l(ke).addon_product.description&&At(je)})}var fe=B(q,2);{var Me=At=>{var Ve=lF();er(Ve,5,()=>l(ke).addon_product.variants,Ye=>Ye.id,(Ye,ot)=>{var ht=AF();const Ge=at(()=>l(g)[l(Ie).id]),it=at(()=>{var St,Nt;return((St=l(Ge))==null?void 0:St.productId)===l(ke).addon_product.id&&((Nt=l(Ge))==null?void 0:Nt.variantId)===l(ot).id});var zt=m(ht),xt=m(zt),Tt=B(xt,2),yt=m(Tt),rt=B(zt,2);{var Dt=St=>{var Nt=aF(),Je=m(Nt);De(mt=>Qe(Je,` ${mt??""}`),[()=>Er(l(ot).prices[0].amount)],at),Q(St,Nt)};xe(rt,St=>{l(ot).prices&&l(ot).prices.length>0&&St(Dt)})}De(St=>{Lr(ht,`odz-border odz-rounded odz-p-3 odz-cursor-pointer odz-transition-all odz-duration-200 ${(l(it)?"odz-border-primary odz-bg-primary/5":"odz-border-gray-300 hover:odz-border-gray-400")??""}`),lr(xt,"name",`addon-${l(Ie).id??""}`),Lu(xt,l(it)),Qe(yt,St)},[()=>l(ot).title||` ${l(ot).id.substring(0,4)}`],at),tt("change",xt,()=>J(l(Ie).id,l(ke).addon_product.id,l(ot).id)),tt("click",ht,()=>J(l(Ie).id,l(ke).addon_product.id,l(ot).id)),tt("keydown",ht,St=>St.key==="Enter"&&J(l(Ie).id,l(ke).addon_product.id,l(ot).id)),Q(Ye,ht)}),Q(At,Ve)};xe(fe,At=>{l(ke).addon_product.variants&&l(ke).addon_product.variants.length>0&&At(Me)})}De(()=>Qe(nt,l(ke).addon_product.title)),Q(Oe,me)}),De(()=>Qe(Ce,l(Ie).name)),Q(ue,Ne)}),Q(oe,ve)};xe(_e,oe=>{l(f).length>0&&oe(Le)})}var X=B(_e,2);{var D=oe=>{var ve=hF(),le=m(ve);tt("click",le,()=>Be()),Q(oe,ve)};xe(X,oe=>{l(y).filter(ve=>(ve.quantity||0)>0).length>0&&oe(D)})}De(()=>{lr(P,"src",l(A).thumbnail),lr(P,"alt",l(A).title),Qe($,l(A).title)}),Q(z,F)};xe(be,z=>{l(A)&&z(te)})}var Z=B(ie,2);Cc(Z,{get isOpen(){return l(d)},set isOpen(z){b(d,z)},get title(){return l(c)},set title(z){b(c,z)},get message(){return l(u)},set message(z){b(u,z)},$$legacy:!0});var Ae=B(Z,2);Sc(Ae,{get isLoading(){return l(h)},set isLoading(z){b(h,z)},$$legacy:!0}),Q(n,he),sn(),r()}class vF{constructor(e){this.isEnabled=!0,this.sessionId=e}log(e,t,r){if(!this.isEnabled)return;const o=new Date().toISOString();`${this.sessionId}${o}`}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}function mF(n){const e=Date.now().toString(36)+Math.random().toString(36).substr(2);return{productId:n,productSelection:null,printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!0,sessionId:e}}function wF(){const{subscribe:n,set:e,update:t}=nd(null);let r=null,o=null,s=0;return{subscribe:n,set:e,update:t,saveToSessionStorage(i){!i||Date.now()-s<100||(o&&clearTimeout(o),o=setTimeout(()=>{try{[`fixedEstimate_${i.productId}`,`fixedEstimate_${i.productId}_${i.estimateId}`,`fixedEstimate_${i.productId}_${i.estimateId}_0`,`fixedEstimate_${i.productId}_${i.estimateId}_1`,`fixedEstimate_${i.productId}_${i.estimateId}_2`,`fixedEstimate_${i.productId}_${i.estimateId}_3`,`fixedEstimate_${i.productId}_${i.estimateId}_4`,`fixedEstimate_${i.productId}_${i.estimateId}_5`,`fixedEstimate_${i.productId}_0`,`fixedEstimate_${i.productId}_1`,`fixedEstimate_${i.productId}_2`,`fixedEstimate_${i.productId}_3`,`fixedEstimate_${i.productId}_4`,`fixedEstimate_${i.productId}_5`].forEach(c=>{try{sessionStorage.removeItem(c)}catch{}});let d=`fixedEstimate_${i.productId}`;i.estimateId&&(d+=`_${i.estimateId}`),i.idx!==void 0&&(d+=`_${i.idx}`),sessionStorage.setItem(d,JSON.stringify(i)),s=Date.now()}catch{}},10))},initialize(i,a,A){var h,f,g;let d=`fixedEstimate_${i}`;a&&(d+=`_${a}`),A!==void 0&&(d+=`_${A}`);let c=null;try{const w=sessionStorage.getItem(d);if(w){const y=JSON.parse(w);y.productId===i&&(c=y)}}catch{}const u=c||{...mF(i),estimateId:a,idx:A};r=new vF(u.sessionId),e(u),c?r.info("Fixed Estimate Store   ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId,selectedColors:((f=(h=u.productSelection)==null?void 0:h.selectedColors)==null?void 0:f.length)||0,totalQuantity:((g=u.productSelection)==null?void 0:g.totalQuantity)||0}):r.info("Fixed Estimate Store  ",{productId:i,estimateId:a,idx:A,sessionId:u.sessionId}),this.saveToSessionStorage(u)},reset(){r==null||r.info("Fixed Estimate Store "),e(null),r=null},setCurrentStep(i){t(a=>{if(!a)return a;r==null||r.info(" ",{from:a.currentStep,to:i});const A={...a,currentStep:i};return this.saveToSessionStorage(A),A})},updateProductSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.productSelection,c={productId:a.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,totalQuantity:c.totalQuantity,selectedColors:c.selectedColors.length}),{...a,productSelection:c}})},toggleColorSelection(i,a){t(A=>{var w;if(!A)return A;if(!A.productSelection){const y={productId:A.productId,selectedColors:[],quantityByVariant:{},variantsByColor:{},variantDiscounts:{},totalQuantity:0,isCompleted:!1,lastUpdated:Date.now()};A={...A,productSelection:y}}const d=[...A.productSelection.selectedColors],c={...A.productSelection.quantityByVariant},u={...A.productSelection.variantsByColor},h=d.indexOf(i);h===-1?(d.push(i),u[i]=a[i]||[],c[i]=c[i]||{},r==null||r.info("  ",{color:i,totalColors:d.length,variantCount:((w=a[i])==null?void 0:w.length)||0})):(d.splice(h,1),delete u[i],delete c[i],r==null||r.info("  ",{color:i,remainingColors:d.length}));const f=Object.values(c).reduce((y,x)=>y+Object.values(x).reduce((C,I)=>C+I,0),0),g={...A,productSelection:{...A.productSelection,selectedColors:d,quantityByVariant:c,variantsByColor:u,totalQuantity:f,lastUpdated:Date.now()}};return this.saveToSessionStorage(g),g})},updateQuantity(i,a,A){t(d=>{if(!d||!d.productSelection)return d;const c={...d.productSelection.quantityByVariant};c[i]||(c[i]={});const u=c[i][a]||0;c[i][a]=Math.max(0,A);const h=Object.values(c).reduce((g,w)=>g+Object.values(w).reduce((y,x)=>y+x,0),0);r==null||r.info(" ",{color:i,variantId:a,oldQuantity:u,newQuantity:c[i][a],totalQuantity:h,triggerDiscountUpdate:!0});const f={...d,productSelection:{...d.productSelection,quantityByVariant:c,totalQuantity:h,lastUpdated:Date.now(),needsDiscountRecalculation:!0}};return this.saveToSessionStorage(f),f})},updateVariantDiscounts(i){t(a=>{if(!a||!a.productSelection)return a;const A=a.productSelection.variantDiscounts||{},d=Object.keys(A).sort(),c=Object.keys(i).sort();if(!(JSON.stringify(d)!==JSON.stringify(c)||Object.keys(i).some(f=>JSON.stringify(A[f])!==JSON.stringify(i[f]))))return a;r==null||r.info("  ",{productId:a.productId,discountCount:Object.keys(i).length,changedVariants:Object.keys(i)});const h={...a,productSelection:{...a.productSelection,variantDiscounts:{...i},needsDiscountRecalculation:!1,lastUpdated:Date.now()}};return this.saveToSessionStorage(h),h})},completeProductSelection(){t(i=>{if(!i||!i.productSelection)return i;r==null||r.info("  ",{totalQuantity:i.productSelection.totalQuantity,selectedColors:i.productSelection.selectedColors.length});const a={...i,productSelection:{...i.productSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"print"};return this.saveToSessionStorage(a),a})},updatePrintSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.printSelection,c={productId:a.productId,currentMethod:"selection",isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,currentMethod:c.currentMethod}),{...a,printSelection:c}})},selectPrintMethod(i){t(a=>{if(!a)return a;r==null||r.info("  ",{method:i,productId:a.productId});const A={...a.printSelection,productId:a.productId,currentMethod:i,isCompleted:!1,lastUpdated:Date.now()},d={...a,printSelection:A};try{let c=`fixedEstimate_${d.productId}`;d.estimateId&&(c+=`_${d.estimateId}`),d.idx!==void 0&&(c+=`_${d.idx}`),sessionStorage.setItem(c,JSON.stringify(d)),console.log("    :",{method:i,storageKey:c,printSelection:d.printSelection})}catch(c){console.error("     :",c)}return d})},completePrintSelection(){t(i=>!i||!i.printSelection?i:(r==null||r.info("  ",{method:i.printSelection.currentMethod}),{...i,printSelection:{...i.printSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"addon"}))},updateAddonSelection(i){t(a=>{if(!a)return a;const A=Date.now(),d=a.addonSelection,c={productId:a.productId,selectedAddons:{},isCompleted:!1,...d,...i,lastUpdated:A};return r==null||r.info("   ",{productId:a.productId,changes:i,addonCount:Object.keys(c.selectedAddons).length}),{...a,addonSelection:c}})},toggleAddonSelection(i,a,A){t(d=>{var g,w,y;if(!d)return d;const c={...((g=d.addonSelection)==null?void 0:g.selectedAddons)||{}};((w=c[i])==null?void 0:w.productId)===a&&((y=c[i])==null?void 0:y.variantId)===A?(delete c[i],r==null||r.info("  ",{addonId:i,productId:a,variantId:A,remainingAddons:Object.keys(c).length})):(c[i]={productId:a,variantId:A},r==null||r.info(" ",{addonId:i,productId:a,variantId:A,totalAddons:Object.keys(c).length}));const h={...d.addonSelection??{productId:d.productId,selectedAddons:{},isCompleted:!1,lastUpdated:Date.now()},productId:d.productId,selectedAddons:c,isCompleted:!1,lastUpdated:Date.now()},f={...d,addonSelection:h};try{const x=`fixedEstimate_${f.productId}`;sessionStorage.setItem(x,JSON.stringify(f))}catch{}return f})},completeAddonSelection(){t(i=>{var A;if(!i)return i;const a=Object.keys(((A=i.addonSelection)==null?void 0:A.selectedAddons)||{}).length;return r==null||r.info("  ",{addonCount:a}),{...i,addonSelection:{...i.addonSelection,isCompleted:!0,lastUpdated:Date.now()},currentStep:"additional"}})},updateAdditionalInfo(i){t(a=>{if(!a)return a;const A=Date.now(),c={customerName:"",customerPhone:"",customerEmail:"",organizationName:"",postcode:"",address1:"",address2:"",shippingMethod:"standard",prefDeliveryDate:"",comment:"",designRequirement:"",isCompleted:!1,...a.additionalInfo,...i,lastUpdated:A};return r==null||r.info("  ",{changes:i,hasCustomerInfo:!!(c.customerName&&c.customerPhone),hasAddressInfo:!!c.address1}),{...a,additionalInfo:c}})},completeAdditionalInfo(){t(i=>!i||!i.additionalInfo?i:(r==null||r.info("  ",{customerName:i.additionalInfo.customerName,hasAddress:!!i.additionalInfo.address1}),{...i,additionalInfo:{...i.additionalInfo,isCompleted:!0,lastUpdated:Date.now()}}))},toggleDebugMode(){t(i=>{if(!i)return i;const a=!i.isDebugMode;return r&&(a?(r.enable(),r.info("  ")):(r.info("  "),r.disable())),{...i,isDebugMode:a}})},getSelectionSummary(){var A,d,c,u,h,f,g,w,y,x;const i=kn({subscribe:n});if(!i)return null;const a={productId:i.productId,sessionId:i.sessionId,currentStep:i.currentStep,completedSteps:{product:((A=i.productSelection)==null?void 0:A.isCompleted)||!1,print:((d=i.printSelection)==null?void 0:d.isCompleted)||!1,addon:((c=i.addonSelection)==null?void 0:c.isCompleted)||!1,additional:((u=i.additionalInfo)==null?void 0:u.isCompleted)||!1},statistics:{totalQuantity:((h=i.productSelection)==null?void 0:h.totalQuantity)||0,selectedColors:((f=i.productSelection)==null?void 0:f.selectedColors.length)||0,printMethod:((g=i.printSelection)==null?void 0:g.currentMethod)||"none",addonCount:Object.keys(((w=i.addonSelection)==null?void 0:w.selectedAddons)||{}).length,hasCustomerInfo:!!((y=i.additionalInfo)!=null&&y.customerName&&((x=i.additionalInfo)!=null&&x.customerPhone))}};return r==null||r.info("  ",a),a},toEstimateStoreFormat(){const i=kn({subscribe:n});if(!i)return null;r==null||r.info("EstimateStore   ");const a={productSelection:i.productSelection,printSelection:i.printSelection,addonSelection:i.addonSelection,additionalInfo:i.additionalInfo,metadata:{sessionId:i.sessionId,lastUpdated:Date.now()}};return r==null||r.info("EstimateStore   ",{hasProductSelection:!!i.productSelection,hasPrintSelection:!!i.printSelection,hasAddonSelection:!!i.addonSelection,hasAdditionalInfo:!!i.additionalInfo}),a},toDBFormat(i){const a=kn({subscribe:n});if(!a)return null;try{const{FixedEstimateDBConverter:A}=require("../types/fixedEstimateTypes"),d=i||`EST_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;r==null||r.info("DB   ",{estimateId:d});const c=A.toDBFormat(a,d);return r==null||r.info("DB   ",{estimateId:d,hasProductSelection:!!c.productSelection,hasPrintSelection:!!c.printSelection,addonSelectionsCount:c.addonSelections.length,hasAdditionalInfo:!!c.additionalInfo}),c}catch(A){return r==null||r.error("DB   ",A),null}},fromDBFormat(i){try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes");r==null||r.info("DB    ");const A=a.fromDBFormat(i);return e(A),r==null||r.info("DB   ",{productId:A.productId,sessionId:A.sessionId,currentStep:A.currentStep}),!0}catch(a){return r==null||r.error("DB   ",a),!1}},validate(){const i=kn({subscribe:n});if(!i)return{isValid:!1,errors:["Store  ."]};try{const{FixedEstimateDBConverter:a}=require("../types/fixedEstimateTypes"),A=a.validateForDB(i);return r==null||r.info("  ",{isValid:A.isValid,errorCount:A.errors.length}),A.isValid||r==null||r.warn("  ",{errors:A.errors}),A}catch(a){return r==null||r.error("  ",a),{isValid:!1,errors:["    ."]}}},backup(){const i=kn({subscribe:n});if(!i)return null;const a={...i,backupTimestamp:Date.now()};return r==null||r.info("  ",{sessionId:i.sessionId,backupTimestamp:a.backupTimestamp}),a},restore(i){if(!i||!i.sessionId)return r==null||r.error("  "),!1;try{const{backupTimestamp:a,...A}=i;return e(A),r==null||r.info("    ",{sessionId:A.sessionId,backupTimestamp:a}),!0}catch(a){return r==null||r.error("  ",a),!1}}}}const xr=wF();async function I5(n,e){const{data:t,error:r}=await pt.from("products").select("process:processes( id, shop_id, name, description, image_url, created_at, updated_at, canvas_json)").eq("id",n).eq("shop",e).single();if(r)throw r;return t!=null&&t.process?t.process:null}async function U5(n){const{data:e,error:t}=await pt.from("process_print_areas").select("*").eq("process_id",n);if(t)throw t;return e||[]}function Ke(n,e,t){return(e=function(r){var o=function(s,i){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var A=a.call(s,i);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}(r,"string");return typeof o=="symbol"?o:o+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xw(Object(t),!0).forEach(function(r){Ke(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zn(n,e){if(n==null)return{};var t,r,o=function(i,a){if(i==null)return{};var A={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(a.indexOf(d)>=0)continue;A[d]=i[d]}return A}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function ul(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let Bw=class{constructor(){Ke(this,"browserShadowBlurConstant",1),Ke(this,"DPI",96),Ke(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Ke(this,"perfLimitSizeTotal",2097152),Ke(this,"maxCacheSideLimit",4096),Ke(this,"minCacheSideLimit",256),Ke(this,"disableStyleCopyPaste",!1),Ke(this,"enableGLFiltering",!0),Ke(this,"textureSize",4096),Ke(this,"forceGLPutImageData",!1),Ke(this,"cachesBoundsOfCurve",!1),Ke(this,"fontPaths",{}),Ke(this,"NUM_FRACTION_DIGITS",4)}};const un=new class extends Bw{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=We(We({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Bw,t=(n==null?void 0:n.reduce((r,o)=>(r[o]=e[o],r),{}))||e;this.configure(t)}},al=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let ha=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}},yF=class extends ha{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}},bF=class{},_F=class extends bF{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),o=e.createShader(e.FRAGMENT_SHADER);return!!o&&(e.shaderSource(o,r),e.compileShader(o),!!e.getShaderParameter(o,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),al("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const xF={};let zw;const _a=()=>zw||(zw={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new _F,dispose(){},copyPasteData:xF}),Ec=()=>_a().document,m1=()=>_a().window,Q5=()=>{var n;return Math.max((n=un.devicePixelRatio)!==null&&n!==void 0?n:m1().devicePixelRatio,1)},wu=new class{constructor(){Ke(this,"charWidthsCache",{}),Ke(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const o=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return o[s]||(o[s]={}),o[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=un,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},T0="6.5.4";function Vf(){}const ah=Math.PI/2,yp=2*Math.PI,w1=Math.PI/180,zs=Object.freeze([1,0,0,1,0,0]),y1=16,OA=.4477152502,Kr="center",Cn="left",Os="top",L0="bottom",ho="right",Ds="none",b1=/\r?\n/,T5="moving",cg="scaling",L5="rotating",_1="rotate",P5="skewing",Ru="resizing",BF="modifyPoly",zF="modifyPath",bp="changed",ug="scale",js="scaleX",Bi="scaleY",Fc="skewX",Ic="skewY",Io="fill",Ns="stroke",_p="modified",Id="json",vv="svg",or=new class{constructor(){this[Id]=new Map,this[vv]=new Map}has(n){return this[Id].has(n)}getClass(n){const e=this[Id].get(n);if(!e)throw new ha("No class registered for ".concat(n));return e}setClass(n,e){e?this[Id].set(e,n):(this[Id].set(n.type,n),this[Id].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[vv].get(n)}setSVGClass(n,e){this[vv].set(e??n.type.toLowerCase(),n)}},xp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};let CF=class{constructor(){Ke(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[o,s]=r;this.on(o,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(o=>{let[s,i]=o;r.push(this.once(s,i))}),()=>r.forEach(o=>o())}if(t){const r=this.on(e,function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[o,s]=r;this._removeEventListener(o,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const o=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(o)for(let s=0;s<o.length;s++)o[s].call(this,t||{})}};const Hd=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},pA=n=>{if(n===0)return 1;switch(Math.abs(n)/ah){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},gA=n=>{if(n===0)return 0;const e=n/ah,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};let Bt=class vs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new vs(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new vs(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new vs(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new vs(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new vs(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new vs(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new vs(this.x/e.x,this.y/e.y)}scalarDivide(e){return new vs(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new vs(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new vs(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new vs(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new vs(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x1;const r=gA(e),o=pA(e),s=this.subtract(t);return new vs(s.x*o-s.y*r,s.x*r+s.y*o).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new vs(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}};const x1=new Bt(0,0),Gf=n=>!!n&&Array.isArray(n._objects);function k5(n){class e extends n{constructor(){super(...arguments),Ke(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const i=this._objects.push(...o);return o.forEach(a=>this._onObjectAdded(a)),i}insertAt(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,o=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.forEach(A=>{const d=r.indexOf(A);d!==-1&&(r.splice(d,1),o.push(A),this._onObjectRemoved(A))}),o}forEachObject(r){this.getObjects().forEach((o,s,i)=>r(o,s,i))}getObjects(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length===0?[...this._objects]:this._objects.filter(i=>i.isType(...o))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,o){return!!this._objects.includes(r)||!!o&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,o)=>r+=o.complexity?o.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Hd(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Hd(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const i=this.findNewLowerIndex(r,s,o);return Hd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,o){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const i=this.findNewUpperIndex(r,s,o);return Hd(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,o){return r!==this._objects[o]&&(Hd(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,o,s){let i;if(s){i=o;for(let a=o-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o-1;return i}findNewUpperIndex(r,o,s){let i;if(s){i=o;for(let a=o+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){i=a;break}}else i=o+1;return i}collectObjects(r){let{left:o,top:s,width:i,height:a}=r,{includeIntersecting:A=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],c=new Bt(o,s),u=c.add(new Bt(i,a));for(let h=this._objects.length-1;h>=0;h--){const f=this._objects[h];f.selectable&&f.visible&&(A&&f.intersectsWithRect(c,u)||f.isContainedWithinRect(c,u)||A&&f.containsPoint(c)||A&&f.containsPoint(u))&&d.push(f)}return d}}return e}let O5=class extends CF{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}};function Wf(n){return m1().requestAnimationFrame(n)}function SF(n){return m1().cancelAnimationFrame(n)}let EF=0;const Al=()=>EF++,Vi=()=>{const n=Ec().createElement("canvas");if(!n||n.getContext===void 0)throw new ha("Failed to create `canvas` element");return n},FF=()=>Ec().createElement("img"),xa=n=>{const e=Vi();return e.width=n.width,e.height=n.height,e},D5=(n,e,t)=>n.toDataURL("image/".concat(e),t),vo=n=>n*w1,Jl=n=>n/w1,IF=n=>n.every((e,t)=>e===zs[t]),Ls=(n,e,t)=>new Bt(n).transform(e,t),Ri=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:o}=new Bt(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-o,t},Ko=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],B1=(n,e)=>n.reduceRight((t,r)=>r&&t?Ko(r,t,e):r||t,void 0)||zs.concat(),N5=n=>{let[e,t]=n;return Math.atan2(t,e)},Bp=n=>{const e=N5(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),o=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Jl(e),scaleX:r,scaleY:o,skewX:Jl(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Ah=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function lh(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=vo(n),o=pA(r),s=gA(r);return[o,s,-s,o,e?e-(o*e-s*t):0,t?t-(s*e+o*t):0]}const z1=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},M5=n=>Math.tan(vo(n)),H5=n=>[1,0,M5(n),1,0,0],j5=n=>[1,M5(n),0,1,0,0],hg=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:o=!1,skewX:s=0,skewY:i=0}=n,a=z1(r?-e:e,o?-t:t);return s&&(a=Ko(a,H5(s),!0)),i&&(a=Ko(a,j5(i),!0)),a},UF=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let o=Ah(e,t);r&&(o=Ko(o,lh({angle:r})));const s=hg(n);return IF(s)||(o=Ko(o,s)),o},Xf=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,o){if(e&&e.aborted)return o(new yF("loadImage"));const s=FF();let i;e&&(i=function(A){s.src="",o(A)},e.addEventListener("abort",i,{once:!0}));const a=function(){s.onload=s.onerror=null,i&&(e==null||e.removeEventListener("abort",i)),r(s)};n?(s.onload=a,s.onerror=function(){i&&(e==null||e.removeEventListener("abort",i)),o(new ha("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},$u=function(n){let{signal:e,reviver:t=Vf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,o)=>{const s=[];e&&e.addEventListener("abort",o,{once:!0}),Promise.all(n.map(i=>or.getClass(i.type).fromObject(i,{signal:e}).then(a=>(t(i,a),s.push(a),a)))).then(r).catch(i=>{s.forEach(a=>{a.dispose&&a.dispose()}),o(i)}).finally(()=>{e&&e.removeEventListener("abort",o)})})},fg=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&or.has(a.type)?$u([a],{signal:e}).then(A=>{let[d]=A;return o.push(d),d}):a),i=Object.keys(n);Promise.all(s).then(a=>a.reduce((A,d,c)=>(A[i[c]]=d,A),{})).then(t).catch(a=>{o.forEach(A=>{A.dispose&&A.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Uc=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},C1=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Cw={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},mv=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Sw=(n,e,t,r)=>{n/=255,e/=255,t/=255;const o=Math.max(n,e,t),s=Math.min(n,e,t);let i,a;const A=(o+s)/2;if(o===s)i=a=0;else{const d=o-s;switch(a=A>.5?d/(2-o-s):d/(o+s),o){case n:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-n)/d+2;break;case t:i=(n-e)/d+4}i/=6}return[Math.round(360*i),Math.round(100*a),Math.round(100*A),r]},Ew=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},$h=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Fw=n=>{let[e,t,r,o=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,o]};let si=class ss{constructor(e){if(Ke(this,"isUnrecognised",!1),e)if(e instanceof ss)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,o,s=1]=e;this.setSource([t,r,o,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Cw&&(e=Cw[e]),e==="transparent"?[255,255,255,0]:ss.sourceFromHex(e)||ss.sourceFromRgb(e)||ss.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Sw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,o]=Sw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(o,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,o]=this.getSource();return"".concat($h(e)).concat($h(t)).concat($h(r)).concat($h(Math.round(255*o)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Fw(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Fw(this.getSource()),o=t<(e||127)?0:255;return this.setSource([o,o,o,r]),this}overlayWith(e){e instanceof ss||(e=new ss(e));const t=this.getSource(),r=e.getSource(),[o,s,i]=t.map((a,A)=>Math.round(.5*a+.5*r[A]));return this.setSource([o,s,i,t[3]]),this}static fromRgb(e){return ss.fromRgba(e)}static fromRgba(e){return new ss(ss.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,o,s]=t.slice(1,4).map(i=>{const a=parseFloat(i);return i.endsWith("%")?Math.round(2.55*a):a});return[r,o,s,Ew(t[4])]}}static fromHsl(e){return ss.fromHsla(e)}static fromHsla(e){return new ss(ss.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ss.parseAngletoDegrees(t[1])%360+360)%360/360,o=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,a,A;if(o===0)i=a=A=s;else{const d=s<=.5?s*(o+1):s+o-s*o,c=2*s-d;i=mv(c,d,r+1/3),a=mv(c,d,r),A=mv(c,d,r-1/3)}return[Math.round(255*i),Math.round(255*a),Math.round(255*A),Ew(t[4])]}static fromHex(e){return new ss(ss.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(A=>A+A):t.match(/.{2}/g);const[o,s,i,a=255]=r.map(A=>parseInt(A,16));return[o,s,i,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Jl(r):t.includes("turn")?360*r:r}};const to=(n,e)=>parseFloat(Number(n).toFixed(e)),oc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y1;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),o=un.DPI;switch(t==null?void 0:t[0]){case"mm":return r*o/25.4;case"cm":return r*o/2.54;case"in":return r*o;case"pt":return r*o/72;case"pc":return r*o/72*12;case"em":return r*e;default:return r}},QF=n=>{const[e,t]=n.trim().split(" "),[r,o]=(s=e)&&s!==Ds?[s.slice(1,4),s.slice(5,8)]:s===Ds?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:o}},zp=n=>"matrix("+n.map(e=>to(e,un.NUM_FRACTION_DIGITS)).join(" ")+")",qu=function(n,e){let t,r,o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new si(e),i=s.getAlpha();t=s.toRgb(),i!==1&&(r=i.toString())}else t="none";return o?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},yi=n=>!!n&&n.toLive!==void 0,Iw=n=>!!n&&typeof n.toObject=="function",Uw=n=>!!n&&n.offsetX!==void 0&&"source"in n,Il=n=>!!n&&"multiSelectionStacking"in n;function R5(n){const e=n&&ji(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let o=n;const s=e.documentElement,i=e.body||{scrollLeft:0,scrollTop:0};for(;o&&(o.parentNode||o.host)&&(o=o.parentNode||o.host,o===e?(t=i.scrollLeft||s.scrollLeft||0,r=i.scrollTop||s.scrollTop||0):(t+=o.scrollLeft||0,r+=o.scrollTop||0),o.nodeType!==1||o.style.position!=="fixed"););return{left:t,top:r}}const ji=n=>n.ownerDocument||null,$5=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},q5=function(n,e,t){let{width:r,height:o}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=o,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(o*s).toString()),e.scale(s,s))},P0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Qw(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Ds,n}let K5=class{constructor(e){Ke(this,"_originalCanvasStyle",void 0),Ke(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Ec().getElementById(e)||Vi();var r;if(t.hasAttribute("data-fabric"))throw new ha("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:o}=this.lower;o.classList.remove("lower-canvas"),o.removeAttribute("data-fabric"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(r)),o.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:o}=this.lower;q5(r,o,e,t)}setCSSDimensions(e){P0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&ji(e),o={left:0,top:0};if(!r)return o;const s=((t=$5(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};o.left+=parseInt(s.borderLeftWidth,10)||0,o.top+=parseInt(s.borderTopWidth,10)||0,o.left+=parseInt(s.paddingLeft,10)||0,o.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(i=e.getBoundingClientRect());const A=R5(e);return{left:i.left+A.left-(a.clientLeft||0)+o.left,top:i.top+A.top-(a.clientTop||0)+o.top}}(this.lower.el)}dispose(){_a().dispose(this.lower.el),delete this.lower}};const TF={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...zs]};let S1=class V5 extends k5(O5){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return V5.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new K5(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(al("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Q5():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const o=We({width:this.width,height:this.height},e);this.elements.setDimensions(o,this.getRetinaScaling()),this.hasLostContext=!0,this.width=o.width,this.height=o.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,o=[...this.viewportTransform],s=Ls(e,Ri(o));o[0]=t,o[3]=t;const i=Ls(s,o);o[4]+=r.x-i.x,o[5]+=r.y-i.y,this.setViewportTransform(o)}setZoom(e){this.zoomToPoint(new Bt(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Bt(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Wf(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Ri(this.viewportTransform),o=Ls({x:0,y:0},r),s=Ls({x:e,y:t},r),i=o.min(s),a=o.max(s);return this.vptCoords={tl:i,tr:new Bt(a.x,i.y),bl:new Bt(i.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(SF(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,o=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),o&&(o._set("canvas",this),o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,o)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,o=t.length;r<o;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],o=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!o)return;const a=yi(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,i&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const A=r.gradientTransform||r.patternTransform;A&&e.transform(...A)}e.fill(),e.restore()}if(o){e.save();const{skipOffscreen:A}=this;this.skipOffscreen=i,i&&e.transform(...s),o.render(e),this.skipOffscreen=A,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Bt(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Bt(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Bt(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Bt(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Bt(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ls(this.getCenterPoint(),Ri(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Kr,Kr),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,o=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return We(We(We({version:T0},Uc(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),o?{clipPath:o}:null)}_toObject(e,t,r){let o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!o),s}__serializeBgOverlay(e,t){const r={},o=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,a=this.overlayColor;return yi(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),yi(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),o=t.height||"".concat(this.height),s=un.NUM_FRACTION_DIGITS,i=t.viewBox;let a;if(i)a='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const A=this.viewportTransform;a='viewBox="'.concat(to(-A[4]/A[0],s)," ").concat(to(-A[5]/A[3],s)," ").concat(to(this.width/A[0],s)," ").concat(to(this.height/A[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",T0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Al()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(yi(t)){const r=this["".concat(e,"Vpt")],o=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?o[0]:1),height:this.height/(r?o[3]:1)};return t.toSVG(s,{additionalTransform:r?zp(o):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=un.fontPaths;this._objects.forEach(function s(i){e.push(i),Gf(i)&&i._objects.forEach(s)}),e.forEach(s=>{if(!(i=s)||typeof i._renderText!="function")return;var i;const{styles:a,fontFamily:A}=s;!t[A]&&r[A]&&(t[A]=!0,a&&Object.values(a).forEach(d=>{Object.values(d).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const o=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return o?`	<style type="text/css"><![CDATA[
`.concat(o,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const o=this[t];o&&!o.excludeFromExport&&o.toSVG&&e.push(o.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(yi(r)){const o=r.repeat||"",s=this.width,i=this.height,a=this["".concat(t,"Vpt")]?zp(Ri(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat(o!=="repeat-y"&&o!=="no-repeat"||!Uw(r)?s:r.source.width,'" height="').concat(o!=="repeat-x"&&o!=="no-repeat"||!Uw(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new ha("`json` is undefined"));const o=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:a,overlayImage:A,overlay:d,clipPath:c}=o,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([$u(s,{reviver:t,signal:r}),fg({backgroundImage:i,backgroundColor:a,overlayImage:A,overlayColor:d,clipPath:c},{signal:r})]).then(h=>{let[f,g]=h;return this.clear(),this.add(...f),this.set(o),this.set(g),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=xa(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:o=1,enableRetinaScaling:s=!1}=e,i=o*(s?this.getRetinaScaling():1);return D5(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:o,top:s,filter:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,A=(r||this.height)*e,d=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,f=d*e,g=this.viewportTransform,w=[f,0,0,f,(g[4]-(o||0))*e,(g[5]-(s||0))*e],y=this.enableRetinaScaling,x=xa({width:a,height:A}),C=i?this._objects.filter(I=>i(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=a,this.height=A,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),C),this.viewportTransform=g,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=h,x}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),xp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};Ke(S1,"ownDefaults",TF);const LF=["touchstart","touchmove","touchend"],PF=n=>{const e=R5(n.target),t=function(r){const o=r.changedTouches;return o&&o[0]?o[0]:r}(n);return new Bt(t.clientX+e.left,t.clientY+e.top)},k0=n=>LF.includes(n.type)||n.pointerType==="touch",O0=n=>{n.preventDefault(),n.stopPropagation()},uA=n=>{let e=0,t=0,r=0,o=0;for(let s=0,i=n.length;s<i;s++){const{x:a,y:A}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(A>o||!s)&&(o=A),(A<t||!s)&&(t=A)}return{left:e,top:t,width:r-e,height:o-t}},kF=["translateX","translateY","scaleX","scaleY"],OF=(n,e)=>Cp(n,Ko(e,n.calcOwnMatrix())),Cp=(n,e)=>{const t=Bp(e),{translateX:r,translateY:o,scaleX:s,scaleY:i}=t,a=Zn(t,kF),A=new Bt(r,o);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:i}),n.setPositionByOrigin(A,Kr,Kr)},DF=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},G5=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),E1=(n,e,t)=>{const r=n/2,o=e/2,s=[new Bt(-r,-o),new Bt(r,-o),new Bt(-r,o),new Bt(r,o)].map(a=>a.transform(t)),i=uA(s);return new Bt(i.width,i.height)},pg=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zs;return Ko(Ri(arguments.length>1&&arguments[1]!==void 0?arguments[1]:zs),n)},sc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zs;return n.transform(pg(e,t))},NF=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zs,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zs;return n.transform(pg(e,t),!0)},MF=(n,e,t)=>{const r=pg(e,t);return Cp(n,Ko(r,n.calcOwnMatrix())),r},W5=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),We(We({},e),{},{target:r})),r.fire(n,e)},HF={left:-.5,top:-.5,center:0,bottom:.5,right:.5},zo=n=>typeof n=="string"?HF[n]:n-.5,Sp="not-allowed";function X5(n){return zo(n.originX)===zo(Kr)&&zo(n.originY)===zo(Kr)}function Tw(n){return .5-zo(n)}const qi=(n,e)=>n[e],Y5=(n,e,t,r)=>({e:n,transform:e,pointer:new Bt(t,r)});function J5(n,e){const t=n.getTotalAngle()+Jl(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function F1(n,e,t,r,o){var s;let{target:i,corner:a}=n;const A=i.controls[a],d=((s=i.canvas)===null||s===void 0?void 0:s.getZoom())||1,c=i.padding/d,u=function(h,f,g,w){const y=h.getRelativeCenterPoint(),x=g!==void 0&&w!==void 0?h.translateToGivenOrigin(y,Kr,Kr,g,w):new Bt(h.left,h.top);return(h.angle?f.rotate(-vo(h.angle),y):f).subtract(x)}(i,new Bt(r,o),e,t);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=A.offsetX,u.y-=A.offsetY,u}const jF=(n,e,t,r)=>{const{target:o,offsetX:s,offsetY:i}=e,a=t-s,A=r-i,d=!qi(o,"lockMovementX")&&o.left!==a,c=!qi(o,"lockMovementY")&&o.top!==A;return d&&o.set(Cn,a),c&&o.set(Os,A),(d||c)&&W5(T5,Y5(n,e,t,r)),d||c};class Z5{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):Ds,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=qu(Io,this.fill);return[qu(Ns,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",h,"fill-rule: ",t,"; ","opacity: ",d,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'.concat(zp(r));return"".concat(o).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=o,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:o,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=o?'style="'.concat(this.getSvgFilter(),'" '):"",A=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=A&&A.absolutePositioned,u=this.stroke,h=this.fill,f=this.shadow,g=[],w=e.indexOf("COMMON_PARTS");let y;A&&(A.clipPathId="CLIPPATH_".concat(Al()),y='<clipPath id="'.concat(A.clipPathId,`" >
`).concat(A.toClipPathSVG(r),`</clipPath>
`)),c&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons(),` >
`);const x=[i,d,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[w]=x,yi(h)&&g.push(h.toSVG(this)),yi(u)&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),A&&g.push(y),g.push(e.join("")),g.push(`</g>
`),c&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Io?' paint-order="'.concat(this.paintFirst,'" '):""}}function gg(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Lw;const Zl=String.raw(Lw||(Lw=ul(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),RF=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Zl+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Zl+"))?\\s+(.*)"),$F={cx:Cn,x:Cn,r:"radius",cy:Os,y:Os,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},wv="font-size",yv="clip-path";gg(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);gg(["symbol","image","marker","pattern","view","svg"]);const Pw=gg(["symbol","g","a","svg","clipPath","defs"]),qF=new Bt(1,0),ex=new Bt,tx=(n,e)=>n.rotate(e),D0=(n,e)=>new Bt(e).subtract(n),N0=n=>n.distanceFrom(ex),M0=(n,e)=>Math.atan2(yu(n,e),VF(n,e)),KF=n=>M0(qF,n),I1=n=>n.eq(ex)?n:n.scalarDivide(N0(n)),rx=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return I1(new Bt(-n.y,n.x).scalarMultiply(e?1:-1))},yu=(n,e)=>n.x*e.y-n.y*e.x,VF=(n,e)=>n.x*e.x+n.y*e.y,kw=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=yu(e,t),o=yu(e,n),s=yu(t,n);return r>=0?o>=0&&s<=0:!(o<=0&&s>=0)},Ow="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Dw=new RegExp("(?:\\s|^)"+Ow+Ow+"("+Zl+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class hA{constructor(e){const t=typeof e=="string"?hA.parseShadow(e):e;Object.assign(this,hA.ownDefaults,t),this.id=Al()}static parseShadow(e){const t=e.trim(),[,r=0,o=0,s=0]=(Dw.exec(t)||[]).map(i=>parseFloat(i)||0);return{color:(t.replace(Dw,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:o,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=tx(new Bt(this.offsetX,this.offsetY),vo(-e.angle)),r=new si(this.color);let o=40,s=40;return e.width&&e.height&&(o=100*to((Math.abs(t.x)+this.blur)/e.width,un.NUM_FRACTION_DIGITS)+20,s=100*to((Math.abs(t.y)+this.blur)/e.height,un.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(o,'%" width="').concat(100+2*o,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(to(this.blur?this.blur/2:0,un.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(to(t.x,un.NUM_FRACTION_DIGITS),'" dy="').concat(to(t.y,un.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=hA.ownDefaults;return this.includeDefaultValues?e:C1(e,(r,o)=>r!==t[o])}static async fromObject(e){return new this(e)}}Ke(hA,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Ke(hA,"type","shadow"),or.setClass(hA,"shadow");const vc=(n,e,t)=>Math.max(n,Math.min(e,t)),GF=[Os,Cn,js,Bi,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Fc,Ic],wA=[Io,Ns,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],WF={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Cn,originY:Os,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Io,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},XF=(n,e,t,r)=>-t*Math.cos(n/r*ah)+t+e,YF=()=>!1;class U1{constructor(e){let{startValue:t,byValue:r,duration:o=500,delay:s=0,easing:i=XF,onStart:a=Vf,onChange:A=Vf,onComplete:d=Vf,abort:c=YF,target:u}=e;Ke(this,"_state","pending"),Ke(this,"durationProgress",0),Ke(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=o,this.delay=s,this.easing=i,this._onStart=a,this._onChange=A,this._onComplete=d,this._abort=c,this.target=u,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Wf(e),this.delay):Wf(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:o,valueProgress:s}=this.calculate(r);this.value=Object.freeze(o),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Wf(this.tick)))}register(){xp.push(this)}unregister(){xp.remove(this)}abort(){this._state="aborted",this.unregister()}}const JF=["startValue","endValue"];class ZF extends U1{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(We(We({},Zn(e,JF)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const eI=["startValue","endValue"];class tI extends U1{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(We(We({},Zn(e,eI)),{},{startValue:t,byValue:r.map((o,s)=>o-t[s])}))}calculate(e){const t=this.startValue.map((r,o)=>this.easing(e,r,this.byValue[o],this.duration,o));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const rI=["startValue","endValue","easing","onChange","onComplete","abort"],nI=(n,e,t,r)=>e+t*(1-Math.cos(n/r*ah)),bv=n=>n&&((e,t,r)=>n(new si(e).toRgba(),t,r));class oI extends U1{constructor(e){let{startValue:t,endValue:r,easing:o=nI,onChange:s,onComplete:i,abort:a}=e,A=Zn(e,rI);const d=new si(t).getSource(),c=new si(r).getSource();super(We(We({},A),{},{startValue:d,byValue:c.map((u,h)=>u-d[h]),easing:o,onChange:bv(s),onComplete:bv(i),abort:bv(a)}))}calculate(e){const[t,r,o,s]=this.startValue.map((a,A)=>this.easing(e,a,this.byValue[A],this.duration,A)),i=[...[t,r,o].map(Math.round),vc(0,s,1)];return{value:i,valueProgress:i.map((a,A)=>this.byValue[A]!==0?Math.abs((a-this.startValue[A])/this.byValue[A]):0).find(a=>a!==0)||0}}}function nx(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new tI(n):new ZF(n);return e.start(),e}function sI(n){const e=new oI(n);return e.start(),e}class eo{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(o=>!this.includes(o))),this}static isPointContained(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(o||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(o||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=D0(t,r),i=D0(t,e).divide(s);return o?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new Bt(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let o=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;o+=+(i.status==="Intersection")}return o%2==1}static intersectLineLine(e,t,r,o){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],i=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,A=t.y-e.y,d=o.x-r.x,c=o.y-r.y,u=e.x-r.x,h=e.y-r.y,f=d*h-c*u,g=a*h-A*u,w=c*a-d*A;if(w!==0){const y=f/w,x=g/w;return(s||0<=y&&y<=1)&&(i||0<=x&&x<=1)?new eo("Intersection").append(new Bt(e.x+y*a,e.y+y*A)):new eo}if(f===0||g===0){const y=s||i||eo.isPointContained(e,r,o)||eo.isPointContained(t,r,o)||eo.isPointContained(r,e,t)||eo.isPointContained(o,e,t);return new eo(y?"Coincident":void 0)}return new eo("Parallel")}static intersectSegmentLine(e,t,r,o){return eo.intersectLineLine(e,t,r,o,!1,!0)}static intersectSegmentSegment(e,t,r,o){return eo.intersectLineLine(e,t,r,o,!1,!1)}static intersectLinePolygon(e,t,r){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new eo,i=r.length;for(let a,A,d,c=0;c<i;c++){if(a=r[c],A=r[(c+1)%i],d=eo.intersectLineLine(e,t,a,A,o,!1),d.status==="Coincident")return d;s.append(...d.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return eo.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new eo,o=e.length,s=[];for(let i=0;i<o;i++){const a=e[i],A=e[(i+1)%o],d=eo.intersectSegmentPolygon(a,A,t);d.status==="Coincident"?(s.push(d),r.append(a,A)):r.append(...d.points)}return s.length>0&&s.length===e.length?new eo("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const o=t.min(r),s=t.max(r),i=new Bt(s.x,o.y),a=new Bt(o.x,s.y);return eo.intersectPolygonPolygon(e,[o,i,s,a])}}class iI extends O5{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Ls(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Ls(e,Ri(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new Bt(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:o}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,o];if(this.group){const i=this.group.calcTransformMatrix();return s.map(a=>Ls(a,i))}return s}intersectsWithRect(e,t){return eo.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=eo.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:o,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&o>=e.y&&o+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return eo.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return uA(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(js,e),this._set(Bi,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Jl(N5(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||zs.concat()}calcACoords(){const e=lh({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),o=Ah(t,r),s=Ko(o,e),i=this._getTransformedDimensions(),a=i.x/2,A=i.y/2;return{tl:Ls({x:-a,y:-A},s),tr:Ls({x:a,y:-A},s),bl:Ls({x:-a,y:A},s),br:Ls({x:a,y:A},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,zo(this.originX),zo(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),o=this.matrixCache;return o&&o.key.every((s,i)=>s===r[i])?o.value:(this.group&&(t=Ko(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),o={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=UF(o);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new Bt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=We({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let o=r,s=0;this.strokeUniform&&(o=0,s=r);const i=t.width+o,a=t.height+o;let A;return A=t.skewX===0&&t.skewY===0?new Bt(i*t.scaleX,a*t.scaleY):E1(i,a,hg(t)),A.scalarAdd(s)}translateToGivenOrigin(e,t,r,o,s){let i=e.x,a=e.y;const A=zo(o)-zo(t),d=zo(s)-zo(r);if(A||d){const c=this._getTransformedDimensions();i+=A*c.x,a+=d*c.y}return new Bt(i,a)}translateToCenterPoint(e,t,r){if(t===Kr&&r===Kr)return e;const o=this.translateToGivenOrigin(e,t,r,Kr,Kr);return this.angle?o.rotate(vo(this.angle),e):o}translateToOriginPoint(e,t,r){const o=this.translateToGivenOrigin(e,Kr,Kr,t,r);return this.angle?o.rotate(vo(this.angle),e):o}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Ls(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Bt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const o=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Cn,Os)}}const aI=["type"],AI=["extraParam"];let tA=class Yf extends iI{static getDefaults(){return Yf.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){al("warn","Setting type has no effect",e)}constructor(e){super(),Ke(this,"_cacheContext",null),Object.assign(this,Yf.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Vi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,o=un.maxCacheSideLimit,s=un.minCacheSideLimit;if(t<=o&&r<=o&&t*r<=un.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[a,A]=wu.limitDimsByArea(i),d=vc(s,a,o),c=vc(s,A,o);return t>d&&(e.zoomX/=t/d,e.width=d,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,o=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(o+2),zoomX:e.x,zoomY:e.y,x:r,y:o}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:o,zoomX:s,zoomY:i,x:a,y:A}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=r!==e.width||o!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(d||c){r!==e.width||o!==e.height?(e.width=r,e.height=o):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const u=a/2,h=A/2;return this.cacheTranslationX=Math.round(e.width/2-u)+u,this.cacheTranslationY=Math.round(e.height/2-h)+h,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new Bt(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Bp(this.calcTransformMatrix());return new Bt(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==js&&e!==Bi||(t=this._constrainScale(t)),e===js&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof hA||(t=new hA(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s}=this,{width:i,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:o,cacheTranslationY:s,width:i,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Ns&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const o=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=o,this.stroke=s}createClipPathLayer(e,t){const r=xa(t),o=r.getContext("2d");if(o.translate(t.cacheTranslationX,t.cacheTranslationY),o.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(o)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=Ri(this.calcTransformMatrix());o.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(o),e.drawObject(o,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const o=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,o)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,yi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(yi(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,o=this.getCanvasRetinaScaling(),[s,,,i]=(r==null?void 0:r.viewportTransform)||zs,a=s*o,A=i*o,d=t.nonScaling?new Bt(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*un.browserShadowBlurConstant*(a+A)*(d.x+d.y)/4,e.shadowOffsetX=t.offsetX*a*d.x,e.shadowOffsetY=t.offsetY*A*d.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!yi(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,o=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Ns?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=o.x/this.scaleX/s,a=o.y/this.scaleY/s,A=xa({width:Math.ceil(i),height:Math.ceil(a)}),d=A.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(i,0),d.lineTo(i,a),d.lineTo(0,a),d.closePath(),d.translate(i/2,a/2),d.scale(o.zoomX/this.scaleX/s,o.zoomY/this.scaleY/s),this._applyPatternGradientTransform(d,t),d.fillStyle=t.toLive(e),d.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/o.zoomX,s*this.scaleY/o.zoomY),e.strokeStyle=(r=d.createPattern(A,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new Bt(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(or.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=G5(this),r=this.group,o=this.shadow,s=Math.abs,i=e.enableRetinaScaling?Q5():1,a=(e.multiplier||1)*i,A=e.canvasProvider||(C=>new S1(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&DF(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&MF(this,this.getViewportTransform()),this.setCoords();const d=Vi(),c=this.getBoundingRect(),u=this.shadow,h=new Bt;if(u){const C=u.blur,I=u.nonScaling?new Bt(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+C)*s(I.x),h.y=2*Math.round(s(u.offsetY)+C)*s(I.y)}const f=c.width+h.x,g=c.height+h.y;d.width=Math.ceil(f),d.height=Math.ceil(g);const w=A(d);e.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new Bt(w.width/2,w.height/2),Kr,Kr);const y=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const x=w.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=o,r&&(this.group=r),this.set(t),this.setCoords(),w._objects=[],w.destroy(),x}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D5(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:o}=this;if(t){const{x:s,y:i}=this.getRelativeCenterPoint();this.originX=Kr,this.originY=Kr,this.left=s,this.top=i}if(this.set("angle",e),t){const{x:s,y:i}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,o);this.left=s,this.top=i,this.originX=r,this.originY=o}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){xp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&_a().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,o)=>{let[s,i]=o;return r[s]=this._animate(s,i,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.split("."),s=this.constructor.colorProperties.includes(o[o.length-1]),{abort:i,startValue:a,onChange:A,onComplete:d}=r,c=We(We({},r),{},{target:this,startValue:a??o.reduce((u,h)=>u[h],this),endValue:t,abort:i==null?void 0:i.bind(this),onChange:(u,h,f)=>{o.reduce((g,w,y)=>(y===o.length-1&&(g[w]=u),g[w]),this),A&&A(u,h,f)},onComplete:(u,h,f)=>{this.setCoords(),d&&d(u,h,f)}});return s?sI(c):nx(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let o,s=0;s<t.length;s++){if(o=t[s],o===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(o===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const o=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(o),a=r._objects.indexOf(s);return i>-1&&i>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Yf.customProperties,this.constructor.customProperties||[]);let t;const r=un.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:i,shadow:a,strokeDashArray:A,left:d,top:c,originX:u,originY:h,width:f,height:g,strokeWidth:w,strokeLineCap:y,strokeDashOffset:x,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:N,scaleX:k,scaleY:ee,angle:G,flipX:H,flipY:Y,opacity:Be,visible:M,backgroundColor:O,fillRule:J,paintFirst:re,globalCompositeOperation:he,skewX:ie,skewY:be}=this;o&&!o.excludeFromExport&&(t=o.toObject(e.concat("inverted","absolutePositioned")));const te=Ae=>to(Ae,r),Z=We(We({},Uc(this,e)),{},{type:this.constructor.type,version:T0,originX:u,originY:h,left:te(d),top:te(c),width:te(f),height:te(g),fill:Iw(s)?s.toObject():s,stroke:Iw(i)?i.toObject():i,strokeWidth:te(w),strokeDashArray:A&&A.concat(),strokeLineCap:y,strokeDashOffset:x,strokeLineJoin:C,strokeUniform:I,strokeMiterLimit:te(N),scaleX:te(k),scaleY:te(ee),angle:te(G),flipX:H,flipY:Y,opacity:te(Be),shadow:a&&a.toObject(),visible:M,backgroundColor:O,fillRule:J,paintFirst:re,globalCompositeOperation:he,skewX:te(ie),skewY:te(be)},t?{clipPath:t}:null);return this.includeDefaultValues?Z:this._removeDefaultValues(Z)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return C1(e,(o,s)=>{if(s===Cn||s===Os||s==="type")return!0;const i=r[s];return o!==i&&!(Array.isArray(o)&&Array.isArray(i)&&o.length===0&&i.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Zn(e,aI),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:o}=r,s=Zn(r,AI);return fg(t,s).then(i=>o?(delete i[o],new this(t[o],i)):new this(i))}static fromObject(e,t){return this._fromObject(e,t)}};Ke(tA,"stateProperties",GF),Ke(tA,"cacheProperties",wA),Ke(tA,"ownDefaults",WF),Ke(tA,"type","FabricObject"),Ke(tA,"colorProperties",[Io,Ns,"backgroundColor"]),Ke(tA,"customProperties",[]),or.setClass(tA),or.setClass(tA,"object");const Qc=(n,e,t)=>(r,o,s,i)=>{const a=e(r,o,s,i);return a&&W5(n,We(We({},Y5(r,o,s,i)),t)),a};function Tc(n){return(e,t,r,o)=>{const{target:s,originX:i,originY:a}=t,A=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(A,i,a),c=n(e,t,r,o);return s.setPositionByOrigin(d,t.originX,t.originY),c}}const Nw=Qc(Ru,Tc((n,e,t,r)=>{const o=F1(e,e.originX,e.originY,t,r);if(zo(e.originX)===zo(Kr)||zo(e.originX)===zo(ho)&&o.x<0||zo(e.originX)===zo(Cn)&&o.x>0){const{target:s}=e,i=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=X5(e)?2:1,A=s.width,d=Math.abs(o.x*a/s.scaleX)-i;return s.set("width",Math.max(d,1)),A!==s.width}return!1}));function lI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?Ns:Io,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor);let c,u=e,h=t;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",s>i?(c=s,n.scale(1,i/s),h=t*s/i):i>s?(c=i,n.scale(s/i,1),u=e*i/s):c=s,n.beginPath(),n.arc(u,h,c/2,0,yp,!1),n[A](),d&&n.stroke(),n.restore()}function dI(n,e,t,r,o){r=r||{};const s=this.sizeX||r.cornerSize||o.cornerSize,i=this.sizeY||r.cornerSize||o.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:o.transparentCorners,A=a?Ns:Io,d=!a&&(r.cornerStrokeColor||o.cornerStrokeColor),c=s/2,u=i/2;n.save(),n.fillStyle=r.cornerColor||o.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor||"",n.translate(e,t);const h=o.getTotalAngle();n.rotate(vo(h)),n["".concat(A,"Rect")](-c,-u,s,i),d&&n.strokeRect(-c,-u,s,i),n.restore()}class Oi{constructor(e){Ke(this,"visible",!0),Ke(this,"actionName",ug),Ke(this,"angle",0),Ke(this,"x",0),Ke(this,"y",0),Ke(this,"offsetX",0),Ke(this,"offsetY",0),Ke(this,"sizeX",0),Ke(this,"sizeY",0),Ke(this,"touchSizeX",0),Ke(this,"touchSizeY",0),Ke(this,"cursorStyle","crosshair"),Ke(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,o){var s;let{tl:i,tr:a,br:A,bl:d}=o;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&eo.isPointInPolygon(r,[i,a,A,d])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,o;return(r=(o=e._controlsVisibility)===null||o===void 0?void 0:o[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,o){return new Bt(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,o,s,i){const a=B1([Ah(r,o),lh({angle:e}),z1((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new Bt(-.5,-.5).transform(a),tr:new Bt(.5,-.5).transform(a),br:new Bt(.5,.5).transform(a),bl:new Bt(-.5,.5).transform(a)}}render(e,t,r,o,s){((o=o||{}).cornerStyle||s.cornerStyle)==="circle"?lI.call(this,e,t,r,o,s):dI.call(this,e,t,r,o,s)}}const cI=(n,e,t)=>t.lockRotation?Sp:e.cursorStyle,uI=Qc(L5,Tc((n,e,t,r)=>{let{target:o,ex:s,ey:i,theta:a,originX:A,originY:d}=e;const c=o.translateToOriginPoint(o.getRelativeCenterPoint(),A,d);if(qi(o,"lockRotation"))return!1;const u=Math.atan2(i-c.y,s-c.x),h=Math.atan2(r-c.y,t-c.x);let f=Jl(h-u+a);if(o.snapAngle&&o.snapAngle>0){const w=o.snapAngle,y=o.snapThreshold||w,x=Math.ceil(f/w)*w,C=Math.floor(f/w)*w;Math.abs(f-C)<y?f=C:Math.abs(f-x)<y&&(f=x)}f<0&&(f=360+f),f%=360;const g=o.angle!==f;return o.angle=f,g}));function ox(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function sx(n,e,t){const r=qi(n,"lockScalingX"),o=qi(n,"lockScalingY");if(r&&o||!e&&(r||o)&&t||r&&e==="x"||o&&e==="y")return!0;const{width:s,height:i,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||i===0&&a===0&&e!=="x"}const hI=["e","se","s","sw","w","nw","n","ne","e"],Au=(n,e,t)=>{const r=ox(n,t);if(sx(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Sp;const o=J5(t,e);return"".concat(hI[o],"-resize")};function Q1(n,e,t,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,i=o.by,a=ox(n,s);let A,d,c,u,h,f;if(sx(s,i,a))return!1;if(e.gestureScale)d=e.scaleX*e.gestureScale,c=e.scaleY*e.gestureScale;else{if(A=F1(e,e.originX,e.originY,t,r),h=i!=="y"?Math.sign(A.x||e.signX||1):1,f=i!=="x"?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=h),e.signY||(e.signY=f),qi(s,"lockScalingFlip")&&(e.signX!==h||e.signY!==f))return!1;if(u=s._getTransformedDimensions(),a&&!i){const y=Math.abs(A.x)+Math.abs(A.y),{original:x}=e,C=y/(Math.abs(u.x*x.scaleX/s.scaleX)+Math.abs(u.y*x.scaleY/s.scaleY));d=x.scaleX*C,c=x.scaleY*C}else d=Math.abs(A.x*s.scaleX/u.x),c=Math.abs(A.y*s.scaleY/u.y);X5(e)&&(d*=2,c*=2),e.signX!==h&&i!=="y"&&(e.originX=Tw(e.originX),d*=-1,e.signX=h),e.signY!==f&&i!=="x"&&(e.originY=Tw(e.originY),c*=-1,e.signY=f)}const g=s.scaleX,w=s.scaleY;return i?(i==="x"&&s.set(js,d),i==="y"&&s.set(Bi,c)):(!qi(s,"lockScalingX")&&s.set(js,d),!qi(s,"lockScalingY")&&s.set(Bi,c)),g!==s.scaleX||w!==s.scaleY}const qh=Qc(cg,Tc((n,e,t,r)=>Q1(n,e,t,r))),fI=Qc(cg,Tc((n,e,t,r)=>Q1(n,e,t,r,{by:"x"}))),pI=Qc(cg,Tc((n,e,t,r)=>Q1(n,e,t,r,{by:"y"}))),gI=["target","ex","ey","skewingSide"],_v={x:{counterAxis:"y",scale:js,skew:Fc,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Bi,skew:Ic,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},vI=["ns","nesw","ew","nwse"],mI=(n,e,t)=>{if(e.x!==0&&qi(t,"lockSkewingY")||e.y!==0&&qi(t,"lockSkewingX"))return Sp;const r=J5(t,e)%4;return"".concat(vI[r],"-resize")};function ix(n,e,t,r,o){const{target:s}=t,{counterAxis:i,origin:a,lockSkewing:A,skew:d,flip:c}=_v[n];if(qi(s,A))return!1;const{origin:u,flip:h}=_v[i],f=zo(t[u])*(s[h]?-1:1),g=-Math.sign(f)*(s[c]?-1:1),w=.5*-((s[d]===0&&F1(t,Kr,Kr,r,o)[n]>0||s[d]>0?1:-1)*g)+.5;return Qc(P5,Tc((x,C,I,N)=>function(k,ee,G){let{target:H,ex:Y,ey:Be,skewingSide:M}=ee,O=Zn(ee,gI);const{skew:J}=_v[k],re=G.subtract(new Bt(Y,Be)).divide(new Bt(H.scaleX,H.scaleY))[k],he=H[J],ie=O[J],be=Math.tan(vo(ie)),te=k==="y"?H._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:H._getTransformedDimensions({scaleX:1,scaleY:1}).y,Z=2*re*M/Math.max(te,1)+be,Ae=Jl(Math.atan(Z));H.set(J,Ae);const we=he!==H[J];if(we&&k==="y"){const{skewX:z,scaleX:F}=H,E=H._getTransformedDimensions({skewY:he}),U=H._getTransformedDimensions(),P=z!==0?E.x/U.x:1;P!==1&&H.set(js,P*F)}return we}(n,C,new Bt(I,N))))(e,We(We({},t),{},{[a]:w,skewingSide:g}),r,o)}const wI=(n,e,t,r)=>ix("x",n,e,t,r),yI=(n,e,t,r)=>ix("y",n,e,t,r);function vg(n,e){return n[e.canvas.altActionKey]}const Kh=(n,e,t)=>{const r=vg(n,t);return e.x===0?r?Fc:Bi:e.y===0?r?Ic:js:""},Vd=(n,e,t)=>vg(n,t)?mI(0,e,t):Au(n,e,t),Mw=(n,e,t,r)=>vg(n,e.target)?yI(n,e,t,r):fI(n,e,t,r),Hw=(n,e,t,r)=>vg(n,e.target)?wI(n,e,t,r):pI(n,e,t,r),ax=()=>({ml:new Oi({x:-.5,y:0,cursorStyleHandler:Vd,actionHandler:Mw,getActionName:Kh}),mr:new Oi({x:.5,y:0,cursorStyleHandler:Vd,actionHandler:Mw,getActionName:Kh}),mb:new Oi({x:0,y:.5,cursorStyleHandler:Vd,actionHandler:Hw,getActionName:Kh}),mt:new Oi({x:0,y:-.5,cursorStyleHandler:Vd,actionHandler:Hw,getActionName:Kh}),tl:new Oi({x:-.5,y:-.5,cursorStyleHandler:Au,actionHandler:qh}),tr:new Oi({x:.5,y:-.5,cursorStyleHandler:Au,actionHandler:qh}),bl:new Oi({x:-.5,y:.5,cursorStyleHandler:Au,actionHandler:qh}),br:new Oi({x:.5,y:.5,cursorStyleHandler:Au,actionHandler:qh}),mtr:new Oi({x:0,y:-.5,actionHandler:uI,cursorStyleHandler:cI,offsetY:-40,withConnection:!0,actionName:_1})}),bI=()=>({mr:new Oi({x:.5,y:0,actionHandler:Nw,cursorStyleHandler:Vd,actionName:Ru}),ml:new Oi({x:-.5,y:0,actionHandler:Nw,cursorStyleHandler:Vd,actionName:Ru})}),_I=()=>We(We({},ax()),bI());class Ku extends tA{static getDefaults(){return We(We({},super.getDefaults()),Ku.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ku.ownDefaults),this.setOptions(e)}static createControls(){return{controls:ax()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,o=t.action;if(this===r&&o&&o.startsWith(ug))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let o=r.length-1;o>=0;o--){const[s,i]=r[o],a=this.controls[s];if(a.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Ah(t.x,t.y),o=lh({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Ko(r,o),i=Ko(e,s),a=Ko(i,[1/e[0],0,0,1/e[3],0,0]),A=this.group?Bp(this.calcTransformMatrix()):void 0;A&&(A.scaleX=Math.abs(A.scaleX),A.scaleY=Math.abs(A.scaleY));const d=this._calculateCurrentDimensions(A),c={};return this.forEachControl((u,h)=>{const f=u.positionHandler(d,a,this,u);c[h]=Object.assign(f,this._calcCornerCoords(u,f))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),o=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/o[0],1/o[3]),e.rotate(vo(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=We({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=o.borderColor,this._setLineDash(e,o.borderDashArray),this.strokeBorders(e,t),o.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:o}=this,s=We({hasBorders:r,hasControls:o},t),i=this.getViewportTransform(),a=s.hasBorders,A=s.hasControls,d=Ko(i,this.calcTransformMatrix()),c=Bp(d);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(vo(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),A&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let o;if(r&&r.forActiveSelection||this.group){const s=E1(this.width,this.height,hg(t)),i=this.isStrokeAccountedForInDimensions()?x1:(this.strokeUniform?new Bt().scalarAdd(this.canvas?this.canvas.getZoom():1):new Bt(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);o=s.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else o=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,o,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((o,s)=>{o.withConnection&&o.getVisibility(this,s)&&(r=!0,e.moveTo(o.x*t.x,o.y*t.y),e.lineTo(o.x*t.x+o.offsetX,o.y*t.y+o.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:o,cornerDashArray:s,cornerColor:i}=this,a=We({cornerStrokeColor:o,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((A,d)=>{if(A.getVisibility(this,d)){const c=this.oCoords[d];A.render(e,c.x,c.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,o]=t;return this.setControlVisible(r,o)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const o=this.width+4,s=this.height+4;return t.clearRect(-o/2,-s/2,o,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Ax(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Ke(Ku,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Mo extends Ku{}Ax(Mo,[Z5]),or.setClass(Mo),or.setClass(Mo,"object");const xI=(n,e,t,r)=>{const o=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,o,o);for(let i=3;i<s.length;i+=4)if(s[i]>0)return!1;return!0};class lx{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Bt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Bt(1/this.options.scaleX,1/this.options.scaleY):new Bt(1,1)}createSideVector(e,t){const r=D0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new Bt(e);return t.y+=t.x*Math.tan(vo(this.options.skewY)),t.x+=t.y*Math.tan(vo(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const BI=new Bt;class ic extends lx{static getOrthogonalRotationFactor(e,t){const r=t?M0(e,t):KF(e);return Math.abs(r)<ah?-1:1}constructor(e,t,r,o){super(o),Ke(this,"AB",void 0),Ke(this,"AC",void 0),Ke(this,"alpha",void 0),Ke(this,"bisector",void 0),this.A=new Bt(e),this.B=new Bt(t),this.C=new Bt(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=M0(this.AB,this.AC),this.bisector=I1(tx(this.AB.eq(BI)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t),s=rx(o),i=ic.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%yp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),o=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?N0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return N0(o)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(o))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],o=new Bt(ic.getOrthogonalRotationFactor(this.bisector),ic.getOrthogonalRotationFactor(new Bt(this.bisector.y,this.bisector.x)));return[new Bt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o),new Bt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(o)].forEach(s=>{kw(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:o,skewY:s,scaleX:i,scaleY:a,strokeUniform:A}=this.options,d=new Bt(Math.tan(vo(o)),Math.tan(vo(s))),c=this.strokeProjectionMagnitude,u=A?c/a/Math.sqrt(1/a**2+1/i**2*d.y**2):c/Math.sqrt(1+d.y**2),h=new Bt(Math.sqrt(Math.max(c**2-u**2,0)),u),f=A?c/Math.sqrt(1+d.x**2*(1/a)**2/(1/i+1/i*d.x*d.y)**2):c/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),g=new Bt(f,Math.sqrt(Math.max(c**2-f**2,0)));return[g,g.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(w=>this.applySkew(A?w.multiply(this.strokeUniformScalar):w)).forEach(w=>{kw(w,e,t)&&r.push(this.applySkew(this.A).add(w))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%yp==0,r=this.applySkew(this.A),o=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=yu(o,i)>0,A=a?o:s,d=a?s:o;return this.isSkewed()?e.push(...this.projectRoundWithSkew(A,d)):e.push(...this.projectRoundNoSkew(A,d)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class jw extends lx{constructor(e,t,r){super(r),this.A=new Bt(e),this.T=new Bt(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const o=this.createSideVector(e,t);return this.scaleUnitVector(rx(o),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Bt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ic(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Bt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(I1(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),o=this.A.add(r);e.push(o.add(t),o.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const zI=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const o=n.reduce((s,i)=>(s[s.length-1].eq(i)||s.push(new Bt(i)),s),[new Bt(n[0])]);if(o.length===1)t=!0;else if(!t){const s=o[0],i=((a,A)=>{for(let d=a.length-1;d>=0;d--)if(A(a[d],d,a))return d;return-1})(o,a=>!a.eq(s));o.splice(i+1)}return o.forEach((s,i,a)=>{let A,d;i===0?(d=a[1],A=t?s:a[a.length-1]):i===a.length-1?(A=a[i-1],d=t?s:a[0]):(A=a[i-1],d=a[i+1]),t&&a.length===1?r.push(...new jw(s,s,e).project()):!t||i!==0&&i!==a.length-1?r.push(...new ic(s,A,d,e).project()):r.push(...new jw(s,i===0?d:A,e).project())}),r},T1=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=We({},n[t][r])})}),e},CI=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),L1=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=SI(n,r))!==!1&&e.push(t);return e},SI=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const o=n.charCodeAt(e+1);if(56320>o||o>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},P1=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},EI=(n,e)=>{const t=e.split(`
`),r=[];let o=-1,s={};n=T1(n);for(let i=0;i<t.length;i++){const a=L1(t[i]);if(n[i])for(let A=0;A<a.length;A++){o++;const d=n[i][A];d&&Object.keys(d).length>0&&(P1(s,d,!0)?r.push({start:o,end:o+1,style:d}):r[r.length-1].end++),s=d||{}}else o+=a.length,s={}}return r},FI=(n,e)=>{if(!Array.isArray(n))return T1(n);const t=e.split(b1),r={};let o=-1,s=0;for(let i=0;i<t.length;i++){const a=L1(t[i]);for(let A=0;A<a.length;A++)o++,n[s]&&n[s].start<=o&&o<n[s].end&&(r[i]=r[i]||{},r[i][A]=We({},n[s].style),o===n[s].end-1&&s++)}return r},hl=["display","transform",Io,"fill-opacity","fill-rule","opacity",Ns,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Rw(n,e){const t=n.nodeName,r=n.getAttribute("class"),o=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+t,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+s,"i"),e=e.replace(i,"")),r&&e.length){const a=r.split(" ");for(let A=a.length;A--;)i=new RegExp("\\."+a[A]+s,"i"),e=e.replace(i,"")}return e.length===0}function II(n,e){let t=!0;const r=Rw(n,e.pop());return r&&e.length&&(t=function(o,s){let i,a=!0;for(;o.parentElement&&o.parentElement.nodeType===1&&s.length;)a&&(i=s.pop()),a=Rw(o=o.parentElement,i);return s.length===0}(n,e)),r&&t&&e.length===0}const UI=n=>{var e;return(e=$F[n])!==null&&e!==void 0?e:n},QI=new RegExp("(".concat(Zl,")"),"gi"),TI=n=>n.replace(QI," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var $w,qw,Kw,Vw,Gw,Ww,Xw;const Bs="(".concat(Zl,")"),LI=String.raw($w||($w=ul(["(skewX)(",")"],["(skewX)\\(","\\)"])),Bs),PI=String.raw(qw||(qw=ul(["(skewY)(",")"],["(skewY)\\(","\\)"])),Bs),kI=String.raw(Kw||(Kw=ul(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Bs,Bs,Bs),OI=String.raw(Vw||(Vw=ul(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Bs,Bs),DI=String.raw(Gw||(Gw=ul(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Bs,Bs),NI=String.raw(Ww||(Ww=ul(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Bs,Bs,Bs,Bs,Bs,Bs),k1="(?:".concat(NI,"|").concat(DI,"|").concat(kI,"|").concat(OI,"|").concat(LI,"|").concat(PI,")"),MI="(?:".concat(k1,"*)"),HI=String.raw(Xw||(Xw=ul(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),MI),jI=new RegExp(HI),RI=new RegExp(k1),$I=new RegExp(k1,"g");function H0(n){const e=[];if(!(n=TI(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!jI.test(n))return[...zs];for(const t of n.matchAll($I)){const r=RI.exec(t[0]);if(!r)continue;let o=zs;const s=r.filter(g=>!!g),[,i,...a]=s,[A,d,c,u,h,f]=a.map(g=>parseFloat(g));switch(i){case"translate":o=Ah(A,d);break;case _1:o=lh({angle:A},{x:d,y:c});break;case ug:o=z1(A,d);break;case Fc:o=H5(A);break;case Ic:o=j5(A);break;case"matrix":o=[A,d,c,u,h,f]}e.push(o)}return B1(e)}function qI(n,e,t,r){const o=Array.isArray(e);let s,i=e;if(n!==Io&&n!==Ns||e!==Ds){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")i=e===Ds?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")i=t&&t.transformMatrix?Ko(t.transformMatrix,H0(e)):H0(e);else if(n==="visible")i=e!==Ds&&e!=="hidden",t&&t.visible===!1&&(i=!1);else if(n==="opacity")i=parseFloat(e),t&&t.opacity!==void 0&&(i*=t.opacity);else if(n==="textAnchor")i=e==="start"?Cn:e==="end"?ho:Kr;else if(n==="charSpacing")s=oc(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Io),A=e.indexOf(Ns);i=Io,(a>-1&&A>-1&&A<a||a===-1&&A>-1)&&(i=Ns)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=o?e.map(oc):oc(e,r)}}else i="";return!o&&isNaN(s)?i:s}function KI(n,e){const t=n.match(RF);if(!t)return;const r=t[1],o=t[3],s=t[4],i=t[5],a=t[6];r&&(e.fontStyle=r),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),s&&(e.fontSize=oc(s)),a&&(e.fontFamily=a),i&&(e.lineHeight=i==="normal"?1:i)}function VI(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,o]=t.split(":");e[r.trim().toLowerCase()]=o.trim()})}function GI(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?VI(t,e):function(r,o){Object.entries(r).forEach(s=>{let[i,a]=s;a!==void 0&&(o[i.toLowerCase()]=a)})}(t,e)),e}const WI={stroke:"strokeOpacity",fill:"fillOpacity"};function yA(n,e,t){if(!n)return{};let r,o={},s=y1;n.parentNode&&Pw.test(n.parentNode.nodeName)&&(o=yA(n.parentElement,e,t),o.fontSize&&(r=s=oc(o.fontSize)));const i=We(We(We({},e.reduce((d,c)=>{const u=n.getAttribute(c);return u&&(d[c]=u),d},{})),function(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const h in c)II(d,h.split(" "))&&(u=We(We({},u),c[h]));return u}(n,t)),GI(n));i[yv]&&n.setAttribute(yv,i[yv]),i[wv]&&(r=oc(i[wv],s),i[wv]="".concat(r));const a={};for(const d in i){const c=UI(d),u=qI(c,i[d],o,r);a[c]=u}a&&a.font&&KI(a.font,a);const A=We(We({},o),a);return Pw.test(n.nodeName)?A:function(d){const c=Mo.getDefaults();return Object.entries(WI).forEach(u=>{let[h,f]=u;if(d[f]===void 0||d[h]==="")return;if(d[h]===void 0){if(!c[h])return;d[h]=c[h]}if(d[h].indexOf("url(")===0)return;const g=new si(d[h]);d[h]=g.setAlpha(to(g.getAlpha()*d[f],2)).toRgba()}),d}(A)}const XI=["left","top","width","height","visible"],dx=["rx","ry"];class Hi extends Mo{static getDefaults(){return We(We({},super.getDefaults()),Hi.ownDefaults)}constructor(e){super(),Object.assign(this,Hi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,o=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,A=i!==0||a!==0;e.beginPath(),e.moveTo(o+i,s),e.lineTo(o+t-i,s),A&&e.bezierCurveTo(o+t-OA*i,s,o+t,s+OA*a,o+t,s+a),e.lineTo(o+t,s+r-a),A&&e.bezierCurveTo(o+t,s+r-OA*a,o+t-OA*i,s+r,o+t-i,s+r),e.lineTo(o+i,s+r),A&&e.bezierCurveTo(o+OA*i,s+r,o,s+r-OA*a,o,s+r-a),e.lineTo(o,s+a),A&&e.bezierCurveTo(o,s+OA*a,o+OA*i,s,o+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...dx,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:o}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(o,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const o=yA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:a=0,height:A=0,visible:d=!0}=o,c=Zn(o,XI);return new this(We(We(We({},t),c),{},{left:s,top:i,width:a,height:A,visible:!!(d&&a&&A)}))}}Ke(Hi,"type","Rect"),Ke(Hi,"cacheProperties",[...wA,...dx]),Ke(Hi,"ownDefaults",{rx:0,ry:0}),Ke(Hi,"ATTRIBUTE_NAMES",[...hl,"x","y","rx","ry","width","height"]),or.setClass(Hi),or.setSVGClass(Hi);const aA="initialization",Ep="added",O1="removed",Fp="imperative",cx=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:o,height:s,group:i}=e,a=i&&i!==n?pg(i.calcTransformMatrix(),n.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),d=!e.isStrokeAccountedForInDimensions(),c=t&&d?NF(new Bt(r,r),void 0,n.calcTransformMatrix()):x1,u=!t&&d?r:0,h=E1(o+u,s+u,B1([a,e.calcOwnMatrix()],!0)).add(c).scalarDivide(2);return[A.subtract(h),A.add(h)]};class mg{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:o}=e;return t===aA||t===Fp||!!r&&o!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==aA&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:o}=t;if(r===Fp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:i,width:a,height:A}=uA(e.map(u=>cx(o,u)).reduce((u,h)=>u.concat(h),[])),d=new Bt(a,A),c=new Bt(s,i).add(d.scalarDivide(2));if(r===aA){const u=this.getInitialSize(t,{size:d,center:c});return{center:c,relativeCorrection:new Bt(0,0),size:u}}return{center:c.transform(o.calcOwnMatrix()),size:d}}}Ke(mg,"type","strategy");class j0 extends mg{shouldPerformLayout(e){return!0}}Ke(j0,"type","fit-content"),or.setClass(j0);const YI=["strategy"],JI=["target","strategy","bubbles","prevStrategy"],ux="layoutManager";class Vu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new j0;Ke(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=We(We({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[_p,T5,Ru,L5,cg,P5,bp,BF,zF].map(o=>e.on(o,s=>this.performLayout(o===_p?{type:"object_modified",trigger:o,e:s,target:r}:{type:"object_modifying",trigger:o,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:o}=t;if(r===aA||r===Ep?this.subscribeTargets(e):r===O1&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),o&&o.fire("object:layout:before",{target:t,context:e}),r===Fp&&e.deep){const s=Zn(e,YI);t.forEachObject(i=>i.layoutManager&&i.layoutManager.performLayout(We(We({},s),{},{bubbles:!1,target:i})))}}getLayoutResult(e){const{target:t,strategy:r,type:o}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=o===aA?new Bt:t.getRelativeCenterPoint(),{center:a,correction:A=new Bt,relativeCorrection:d=new Bt}=s,c=i.subtract(a).add(A).transform(o===aA?zs:Ri(t.calcOwnMatrix()),!0).add(d);return{result:s,prevCenter:i,nextCenter:a,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:o},nextCenter:s}=t;var i,a;r.set({width:o.x,height:o.y}),this.layoutObjects(e,t),e.type===aA?r.set({left:(i=e.x)!==null&&i!==void 0?i:s.x+o.x*zo(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+o.y*zo(r.originY)}):(r.setPositionByOrigin(s,Kr,Kr),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(o=>{o.group===r&&this.layoutObject(e,t,o)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:o}=t;r.set({left:r.left+o.x,top:r.top+o.y})}onAfterLayout(e,t){const{target:r,strategy:o,bubbles:s,prevStrategy:i}=e,a=Zn(e,JI),{canvas:A}=r;r.fire("layout:after",{context:e,result:t}),A&&A.fire("object:layout:after",{context:e,result:t,target:r});const d=r.parent;s&&d!=null&&d.layoutManager&&((a.path||(a.path=[])).push(r),d.layoutManager.performLayout(We(We({},a),{},{target:d}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:ux,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}or.setClass(Vu,ux);const ZI=["type","objects","layoutManager"];class eU extends Vu{performLayout(){}}class ql extends k5(Mo){static getDefaults(){return We(We({},super.getDefaults()),ql.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ke(this,"_activeObjects",[]),Ke(this,"__objectSelectionTracker",void 0),Ke(this,"__objectSelectionDisposer",void 0),Object.assign(this,ql.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(o=>{this.enterGroup(o,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Vu,this.layoutManager.performLayout({type:aA,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(al("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(al("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,o)=>this.canEnterGroup(t)&&o.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...o);return this._onAfterObjectsChange(Ep,o),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(Ep,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(O1,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(o=>{o._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const o=this._activeObjects;if(e)o.push(r),this._set("dirty",!0);else if(o.length>0){const s=o.indexOf(r);s>-1&&(o.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Cp(e,Ko(Ri(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Cp(e,Ko(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Mo.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var o;const i=this._objects[s];(o=this.canvas)!==null&&o!==void 0&&o.preserveObjectStacking&&i.group!==this?(e.save(),e.transform(...Ri(this.calcTransformMatrix())),i.render(e),e.restore()):i.group===this&&i.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(We({target:this,type:Fp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(o){return!o.excludeFromExport}).map(function(o){const s=o.includeDefaultValues;o.includeDefaultValues=r;const i=o[e||"toObject"](t);return o.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return We(We(We({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Hi.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const o=t.join("");return e?e(o):o}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let o=0;o<this._objects.length;o++)t.push("		",this._objects[o].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let o=0;o<this._objects.length;o++)t.push("	",this._objects[o].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:o=[],layoutManager:s}=e,i=Zn(e,ZI);return Promise.all([$u(o,t),fg(i,t)]).then(a=>{let[A,d]=a;const c=new this(A,We(We(We({},i),d),{},{layoutManager:new eU}));if(s){const u=or.getClass(s.type),h=or.getClass(s.strategy);c.layoutManager=new u(new h)}else c.layoutManager=new Vu;return c.layoutManager.subscribeTargets({type:aA,target:c,targets:c.getObjects()}),c.setCoords(),c})}}Ke(ql,"type","Group"),Ke(ql,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),or.setClass(ql);const tU=(n,e)=>Math.min(e.width/n.width,e.height/n.height),rU=(n,e)=>Math.max(e.width/n.width,e.height/n.height),R0="\\s*,?\\s*",Yc="".concat(R0,"(").concat(Zl,")"),nU="".concat(Yc).concat(Yc).concat(Yc).concat(R0,"([01])").concat(R0,"([01])").concat(Yc).concat(Yc),oU={m:"l",M:"L"},sU=(n,e,t,r,o,s,i,a,A,d,c)=>{const u=pA(n),h=gA(n),f=pA(e),g=gA(e),w=t*o*f-r*s*g+i,y=r*o*f+t*s*g+a;return["C",d+A*(-t*o*h-r*s*u),c+A*(-r*o*h+t*s*u),w+A*(t*o*g+r*s*f),y+A*(r*o*g-t*s*f),w,y]},Yw=(n,e,t,r)=>{const o=Math.atan2(e,n),s=Math.atan2(r,t);return s>=o?s-o:2*Math.PI-(o-s)};function Jw(n,e,t,r,o,s,i,a){let A;if(un.cachesBoundsOfCurve&&(A=[...arguments].join(),wu.boundsOfCurveCache[A]))return wu.boundsOfCurveCache[A];const d=Math.sqrt,c=Math.abs,u=[],h=[[0,0],[0,0]];let f=6*n-12*t+6*o,g=-3*n+9*t-9*o+3*i,w=3*t-3*n;for(let N=0;N<2;++N){if(N>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,w=3*r-3*e),c(g)<1e-12){if(c(f)<1e-12)continue;const Y=-w/f;0<Y&&Y<1&&u.push(Y);continue}const k=f*f-4*w*g;if(k<0)continue;const ee=d(k),G=(-f+ee)/(2*g);0<G&&G<1&&u.push(G);const H=(-f-ee)/(2*g);0<H&&H<1&&u.push(H)}let y=u.length;const x=y,C=hx(n,e,t,r,o,s,i,a);for(;y--;){const{x:N,y:k}=C(u[y]);h[0][y]=N,h[1][y]=k}h[0][x]=n,h[1][x]=e,h[0][x+1]=i,h[1][x+1]=a;const I=[new Bt(Math.min(...h[0]),Math.min(...h[1])),new Bt(Math.max(...h[0]),Math.max(...h[1]))];return un.cachesBoundsOfCurve&&(wu.boundsOfCurveCache[A]=I),I}const iU=(n,e,t)=>{let[r,o,s,i,a,A,d,c]=t;const u=((h,f,g,w,y,x,C)=>{if(g===0||w===0)return[];let I=0,N=0,k=0;const ee=Math.PI,G=C*w1,H=gA(G),Y=pA(G),Be=.5*(-Y*h-H*f),M=.5*(-Y*f+H*h),O=g**2,J=w**2,re=M**2,he=Be**2,ie=O*J-O*re-J*he;let be=Math.abs(g),te=Math.abs(w);if(ie<0){const j=Math.sqrt(1-ie/(O*J));be*=j,te*=j}else k=(y===x?-1:1)*Math.sqrt(ie/(O*re+J*he));const Z=k*be*M/te,Ae=-k*te*Be/be,we=Y*Z-H*Ae+.5*h,z=H*Z+Y*Ae+.5*f;let F=Yw(1,0,(Be-Z)/be,(M-Ae)/te),E=Yw((Be-Z)/be,(M-Ae)/te,(-Be-Z)/be,(-M-Ae)/te);x===0&&E>0?E-=2*ee:x===1&&E<0&&(E+=2*ee);const U=Math.ceil(Math.abs(E/ee*2)),P=[],T=E/U,R=8/3*Math.sin(T/4)*Math.sin(T/4)/Math.sin(T/2);let $=F+T;for(let j=0;j<U;j++)P[j]=sU(F,$,Y,H,be,te,we,z,R,I,N),I=P[j][5],N=P[j][6],F=$,$+=T;return P})(d-n,c-e,o,s,a,A,i);for(let h=0,f=u.length;h<f;h++)u[h][1]+=n,u[h][2]+=e,u[h][3]+=n,u[h][4]+=e,u[h][5]+=n,u[h][6]+=e;return u},aU=n=>{let e=0,t=0,r=0,o=0;const s=[];let i,a=0,A=0;for(const d of n){const c=[...d];let u;switch(c[0]){case"l":c[1]+=e,c[2]+=t;case"L":e=c[1],t=c[2],u=["L",e,t];break;case"h":c[1]+=e;case"H":e=c[1],u=["L",e,t];break;case"v":c[1]+=t;case"V":t=c[1],u=["L",e,t];break;case"m":c[1]+=e,c[2]+=t;case"M":e=c[1],t=c[2],r=c[1],o=c[2],u=["M",e,t];break;case"c":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t,c[5]+=e,c[6]+=t;case"C":a=c[3],A=c[4],e=c[5],t=c[6],u=["C",c[1],c[2],a,A,e,t];break;case"s":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"S":i==="C"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[3],t=c[4],u=["C",a,A,c[1],c[2],e,t],a=u[3],A=u[4];break;case"q":c[1]+=e,c[2]+=t,c[3]+=e,c[4]+=t;case"Q":a=c[1],A=c[2],e=c[3],t=c[4],u=["Q",a,A,e,t];break;case"t":c[1]+=e,c[2]+=t;case"T":i==="Q"?(a=2*e-a,A=2*t-A):(a=e,A=t),e=c[1],t=c[2],u=["Q",a,A,e,t];break;case"a":c[6]+=e,c[7]+=t;case"A":iU(e,t,c).forEach(h=>s.push(h)),e=c[6],t=c[7];break;case"z":case"Z":e=r,t=o,u=["Z"]}u?(s.push(u),i=u[0]):i=""}return s},Ip=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),hx=(n,e,t,r,o,s,i,a)=>A=>{const d=A**3,c=(f=>3*f**2*(1-f))(A),u=(f=>3*f*(1-f)**2)(A),h=(f=>(1-f)**3)(A);return new Bt(i*d+o*c+t*u+n*h,a*d+s*c+r*u+e*h)},fx=n=>n**2,px=n=>2*n*(1-n),gx=n=>(1-n)**2,AU=(n,e,t,r,o,s,i,a)=>A=>{const d=fx(A),c=px(A),u=gx(A),h=3*(u*(t-n)+c*(o-t)+d*(i-o)),f=3*(u*(r-e)+c*(s-r)+d*(a-s));return Math.atan2(f,h)},lU=(n,e,t,r,o,s)=>i=>{const a=fx(i),A=px(i),d=gx(i);return new Bt(o*a+t*A+n*d,s*a+r*A+e*d)},dU=(n,e,t,r,o,s)=>i=>{const a=1-i,A=2*(a*(t-n)+i*(o-t)),d=2*(a*(r-e)+i*(s-r));return Math.atan2(d,A)},Zw=(n,e,t)=>{let r=new Bt(e,t),o=0;for(let s=1;s<=100;s+=1){const i=n(s/100);o+=Ip(r.x,r.y,i.x,i.y),r=i}return o},cU=(n,e)=>{let t,r=0,o=0,s={x:n.x,y:n.y},i=We({},s),a=.01,A=0;const d=n.iterator,c=n.angleFinder;for(;o<e&&a>1e-4;)i=d(r),A=r,t=Ip(s.x,s.y,i.x,i.y),t+o>e?(r-=a,a/=2):(s=i,r+=a,o+=t);return We(We({},i),{},{angle:c(A)})},vx=n=>{let e,t,r=0,o=0,s=0,i=0,a=0;const A=[];for(const d of n){const c={x:o,y:s,command:d[0],length:0};switch(d[0]){case"M":t=c,t.x=i=o=d[1],t.y=a=s=d[2];break;case"L":t=c,t.length=Ip(o,s,d[1],d[2]),o=d[1],s=d[2];break;case"C":e=hx(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t=c,t.iterator=e,t.angleFinder=AU(o,s,d[1],d[2],d[3],d[4],d[5],d[6]),t.length=Zw(e,o,s),o=d[5],s=d[6];break;case"Q":e=lU(o,s,d[1],d[2],d[3],d[4]),t=c,t.iterator=e,t.angleFinder=dU(o,s,d[1],d[2],d[3],d[4]),t.length=Zw(e,o,s),o=d[3],s=d[4];break;case"Z":t=c,t.destX=i,t.destY=a,t.length=Ip(o,s,i,a),o=i,s=a}r+=t.length,A.push(t)}return A.push({length:r,x:o,y:s}),A},uU=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vx(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const o=t[r],s=e/o.length,i=n[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return We(We({},new Bt(o.x,o.y).lerp(new Bt(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return We(We({},new Bt(o.x,o.y).lerp(new Bt(i[1],i[2]),s)),{},{angle:Math.atan2(i[2]-o.y,i[1]-o.x)});case"C":case"Q":return cU(o,e)}},hU=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),ey=new RegExp(nU,"g"),fU=new RegExp(Zl,"gi"),pU={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},gU=n=>{var e;const t=[],r=(e=n.match(hU))!==null&&e!==void 0?e:[];for(const o of r){const s=o[0];if(s==="z"||s==="Z"){t.push([s]);continue}const i=pU[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){ey.lastIndex=0;for(let A=null;A=ey.exec(o);)a.push(...A.slice(1))}else a=o.match(fU)||[];for(let A=0;A<a.length;A+=i){const d=new Array(i),c=oU[s];d[0]=A>0&&c?c:s;for(let u=0;u<i;u++)d[u+1]=parseFloat(a[A+u]);t.push(d)}}return t},vU=(n,e)=>n.map(t=>t.map((r,o)=>o===0||e===void 0?r:to(r,e)).join(" ")).join(" ");function $0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[o,s]=r;return t.setProperty(o,s)}))}class mU extends K5{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Ke(this,"upper",void 0),Ke(this,"container",void 0);const{el:o}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(o,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),o.parentNode&&o.parentNode.replaceChild(i,o),i.append(o,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=Vi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Ec().createElement("div");return e.setAttribute("data-fabric","wrapper"),$0(e,{position:"relative"}),Qw(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:o}=t;$0(e,We(We({},r),{},{"touch-action":o?"manipulation":Ds})),Qw(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:o}=this.upper;q5(r,o,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),P0(this.upper.el,e),P0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:o}=this.upper;super.cleanupDOM(e),t.removeChild(o),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),_a().dispose(this.upper.el),delete this.upper,delete this.container}}class wg extends S1{constructor(){super(...arguments),Ke(this,"targets",[]),Ke(this,"_hoveredTargets",[]),Ke(this,"_objectsToRender",void 0),Ke(this,"_currentTransform",null),Ke(this,"_groupSelector",null),Ke(this,"contextTopDirty",!1)}static getDefaults(){return We(We({},super.getDefaults()),wg.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new mU(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const o=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+o,-r+o),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const a=Math.round(o*this.getRetinaScaling());return xI(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),o=this._activeObject;return!!(!t||t&&o&&r.length>1&&r.indexOf(t)===-1&&o!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&o&&o!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let o;return t===ug||t===js||t===Bi||t===Ru?o=this.centeredScaling||e.centeredScaling:t===_1&&(o=this.centeredRotation||e.centeredRotation),o?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=ho:["mr","tr","br"].includes(t)&&(r.x=Cn),["tl","mt","tr"].includes(t)?r.y=L0:["bl","mb","br"].includes(t)&&(r.y=Os)),r}_setupCurrentTransform(e,t,r){var o;const s=t.group?sc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:a}=t.getActiveControl()||{},A=r&&a?(o=a.getActionHandler(e,t,a))===null||o===void 0?void 0:o.bind(a):jF,d=((f,g,w,y)=>{if(!g||!f)return"drag";const x=y.controls[g];return x.getActionName(w,x,y)})(r,i,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,d,c)?{x:Kr,y:Kr}:this._getOriginFromCorner(t,i),h={target:t,action:d,actionHandler:A,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:vo(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:We(We({},G5(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=h,this.fire("before:transform",{e,transform:h})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new Bt(t,r).transform(this.viewportTransform),a=new Bt(t+o,r+s).transform(this.viewportTransform),A=this.selectionLineWidth/2;let d=Math.min(i.x,a.x),c=Math.min(i.y,a.y),u=Math.max(i.x,a.x),h=Math.max(i.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(d,c,u-d,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,d+=A,c+=A,u-=A,h-=A,Mo.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(d,c,u-d,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,o=this.getActiveObjects();if(this.targets=[],r&&o.length>=1){if(r.findControl(t,k0(e))||o.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&i&&i!==r?(this.targets=s,r):i}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const o=this.getZoom(),s=e.padding/o;if(s){const[i,a,A,d]=r,c=Math.atan2(a.y-i.y,a.x-i.x),u=pA(c)*s,h=gA(c)*s,f=u+h,g=u-h;r=[new Bt(i.x-g,i.y-f),new Bt(a.x+f,a.y-g),new Bt(A.x+g,A.y+f),new Bt(d.x-f,d.y+g)]}return eo.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,sc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const o=e[r];if(this._checkTarget(o,t)){if(Gf(o)&&o.subTargetCheck){const s=this._searchPossibleTargets(o._objects,t);s&&this.targets.push(s)}return o}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Gf(r)&&r.interactive&&this.targets[0]){const o=this.targets;for(let s=o.length-1;s>0;s--){const i=o[s];if(!Gf(i)||!i.interactive)return i}return o[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,o=r.getBoundingClientRect();let s=PF(e),i=o.width||0,a=o.height||0;i&&a||(Os in o&&L0 in o&&(a=Math.abs(o.top-o.bottom)),ho in o&&Cn in o&&(i=Math.abs(o.right-o.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=sc(s,void 0,this.viewportTransform));const A=this.getRetinaScaling();A!==1&&(s.x/=A,s.y/=A);const d=i===0||a===0?new Bt(1,1):new Bt(r.width/i,r.height/a);return s.multiply(d)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Vi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Il(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,o=!1;const s=this.getActiveObjects(),i=[],a=[];e.forEach(A=>{s.includes(A)||(r=!0,A.fire("deselected",{e:t,target:A}),a.push(A))}),s.forEach(A=>{e.includes(A)||(r=!0,A.fire("selected",{e:t,target:A}),i.push(A))}),e.length>0&&s.length>0?(o=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:a})):s.length>0?(o=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(o=!0,this.fire("selection:cleared",{e:t,deselected:a})),o&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),o=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),o}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Il(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Il(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const o=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),o}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,o={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",o),r.fire(_p,o))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Il(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const o=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(o),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Il(t)&&this._activeObject===t){const r=Uc(e,["angle","flipX","flipY",Cn,js,Bi,Fc,Ic,Os]);return OF(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const o=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(o)}}Ke(wg,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class wU{constructor(e){Ke(this,"targets",[]),Ke(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:o}=e.getActiveObject()||{};o&&o.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Hd(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const yU=["target","oldTarget","fireCanvas","e"],Ys={passive:!1},Ud=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},DA=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},vi=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},bU={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class q0 extends wg{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Ke(this,"_isClick",void 0),Ke(this,"textEditingManager",new wU(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(DA,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,o=this._getEventPrefix();e($5(r),"resize",this._onResize),e(r,o+"down",this._onMouseDown),e(r,"".concat(o,"move"),this._onMouseMove,Ys),e(r,"".concat(o,"out"),this._onMouseOut),e(r,"".concat(o,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Ys)}removeListeners(){this.addOrRemove(vi,"remove");const e=this._getEventPrefix(),t=ji(this.upperCanvasEl);vi(t,"".concat(e,"up"),this._onMouseUp),vi(t,"touchend",this._onTouchEnd,Ys),vi(t,"".concat(e,"move"),this._onMouseMove,Ys),vi(t,"touchmove",this._onMouseMove,Ys),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=We({e},Ud(this,e));this.fire("mouse:out",We(We({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",We({},r)),this._hoveredTargets.forEach(o=>{this.fire("mouse:out",We(We({},r),{},{target:o})),o&&o.fire("mouseout",We({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",We({e},Ud(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void DA(this.upperCanvasEl,"drag",this._onDragProgress)}O0(e)}_renderDragEffects(e,t,r){let o=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),o=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),o=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),o=!0),i.restore(),o&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Ds,r=t?this._activeObject:void 0,o={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};vi(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",o),this._dragSource&&this._dragSource.fire("dragend",o),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:o}=this.findDragTargets(e),s=this._dragSource,i={e,target:r,subTargets:o,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(a=r),r.fire(t,i));for(let A=0;A<o.length;A++){const d=o[A];d.canDrop(e)&&(a=d),d.fire(t,i)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),o={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",o),this._fireEnterLeaveEvents(t,o)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),o=this._basicEventHandler("drop:before",We({e,target:t,subTargets:r,dragSource:this._dragSource},Ud(this,e)));o.didDrop=!1,o.dropTarget=void 0,this._basicEventHandler("drop",o),this.fire("drop:after",o)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],o=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&O0(e),this._basicEventHandler("contextmenu",o),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const o=this.upperCanvasEl,s=this._getEventPrefix(),i=ji(o);DA(i,"touchend",this._onTouchEnd,Ys),t&&DA(i,"touchmove",this._onMouseMove,Ys),vi(o,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();vi(t,"".concat(r,"move"),this._onMouseMove,Ys);const o=ji(t);DA(o,"".concat(r,"up"),this._onMouseUp),DA(o,"".concat(r,"move"),this._onMouseMove,Ys)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=ji(this.upperCanvasEl);vi(r,"touchend",this._onTouchEnd,Ys),vi(r,"touchmove",this._onMouseMove,Ys),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{DA(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const o=ji(this.upperCanvasEl);vi(o,"".concat(r,"up"),this._onMouseUp),vi(o,"".concat(r,"move"),this._onMouseMove,Ys),DA(t,"".concat(r,"move"),this._onMouseMove,Ys)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,o=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,A,d=!1;if(r&&(this._finalizeCurrentTransform(e),d=r.actionPerformed),!o){const c=s===this._activeObject;this.handleSelection(e),d||(d=this._shouldRender(s)||!c&&s===this._activeObject)}if(s){const c=s.findControl(this.getViewportPoint(e),k0(e)),{key:u,control:h}=c||{};if(A=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),d=!0;else if(h){const f=h.getMouseUpHandler(e,s,h);f&&(a=this.getScenePoint(e),f.call(h,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==A)){const c=r.target&&r.target.controls[r.corner],u=c&&c.getMouseUpHandler(e,r.target,c);a=a||this.getScenePoint(e),u&&u.call(c,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),d?this.requestRenderAll():o||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:o=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<o.length;s++)o[s]!==r&&o[s].fire(e,t);return t}_handleEvent(e,t){const r=this._target,o=this.targets||[],s=We(We({e,target:r,subTargets:o},Ud(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),r&&r.fire("mouse".concat(t),s);for(let i=0;i<o.length;i++)o[i]!==r&&o[i].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let o=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,o=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const i=this.getScenePoint(e);this._groupSelector={x:i.x,y:i.y,deltaY:0,deltaX:0}}if(t){const i=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),k0(e));if(t===this._activeObject&&(a||!s)){this._setupCurrentTransform(e,t,i);const A=a?a.control:void 0,d=this.getScenePoint(e),c=A&&A.getMouseDownHandler(e,t,A);c&&c.call(A,e,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=sc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:o[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,i=Math.max(o.length,s.length);this.fireSyntheticInOutEvents("drag",We(We({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<i;a++)this.fireSyntheticInOutEvents("drag",We(We({},t),{},{target:s[a],oldTarget:o[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:o,fireCanvas:s,e:i}=t,a=Zn(t,yU);const{targetIn:A,targetOut:d,canvasIn:c,canvasOut:u}=bU[e],h=o!==r;if(o&&h){const f=We(We({},a),{},{e:i,target:o,nextTarget:r},Ud(this,i));s&&this.fire(u,f),o.fire(d,f)}if(r&&h){const f=We(We({},a),{},{e:i,target:r,previousTarget:o},Ud(this,i));s&&this.fire(c,f),r.fire(A,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,o=r.target,s=o.group?sc(t,void 0,o.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:o,actionHandler:s,target:i}=t,a=!!s&&s(e,t,r.x,r.y);a&&i.setCoords(),o==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const o=Il(this._activeObject)?this._activeObject:null,s=(!o||t.group!==o)&&t.findControl(this.getViewportPoint(e));if(s){const i=s.control;this.setCursor(i.cursorStyleHandler(e,i,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(i=>{r=i.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,o=Il(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||o)&&(o||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(o){const s=r.getObjects();if(t===r){const i=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,i)||this.searchPossibleTargets(this._objects,i))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(or.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:o,deltaY:s}=this._groupSelector,i=new Bt(t,r),a=i.add(new Bt(o,s)),A=i.min(a),d=i.max(a).subtract(A),c=this.collectObjects({left:A.x,top:A.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(h=>!h.onSelect({e})).reverse():c;if(u.length===1)this.setActiveObject(u[0],e);else if(u.length>1){const h=or.getClass("ActiveSelection");this.setActiveObject(new h(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const mx={x1:0,y1:0,x2:0,y2:0},_U=We(We({},mx),{},{r1:0,r2:0}),Gd=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,xU=/^(\d+\.\d+)%|(\d+)%$/;function wx(n){return n&&xU.test(n)}function yx(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(wx(n)?100:1):NaN;return vc(0,Gd(t,e),1)}const BU=/\s*;\s*/,zU=/\s*:\s*/;function CU(n,e){let t,r;const o=n.getAttribute("style");if(o){const i=o.split(BU);i[i.length-1]===""&&i.pop();for(let a=i.length;a--;){const[A,d]=i[a].split(zU).map(c=>c.trim());A==="stop-color"?t=d:A==="stop-opacity"&&(r=d)}}const s=new si(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:yx(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Gd(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function SU(n,e){const t=[],r=n.getElementsByTagName("stop"),o=yx(e,1);for(let s=r.length;s--;)t.push(CU(r[s],o));return t}function bx(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function _x(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Qi(n,e){return n.getAttribute(e)}function EU(n,e){return function(t,r){let o,{width:s,height:i,gradientUnits:a}=r;return Object.keys(t).reduce((A,d)=>{const c=t[d];return c==="Infinity"?o=1:c==="-Infinity"?o=0:(o=typeof c=="string"?parseFloat(c):c,typeof c=="string"&&wx(c)&&(o*=.01,a==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(o*=s),d!=="y1"&&d!=="y2"||(o*=i)))),A[d]=o,A},{})}(bx(n)==="linear"?function(t){return{x1:Qi(t,"x1")||0,y1:Qi(t,"y1")||0,x2:Qi(t,"x2")||"100%",y2:Qi(t,"y2")||0}}(n):function(t){return{x1:Qi(t,"fx")||Qi(t,"cx")||"50%",y1:Qi(t,"fy")||Qi(t,"cy")||"50%",r1:0,x2:Qi(t,"cx")||"50%",y2:Qi(t,"cy")||"50%",r2:Qi(t,"r")||"50%"}}(n),We(We({},e),{},{gradientUnits:_x(n)}))}class Vh{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:o={},colorStops:s=[],offsetX:i=0,offsetY:a=0,gradientTransform:A,id:d}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:We(We({},t==="radial"?_U:mx),o),colorStops:s,offsetX:i,offsetY:a,gradientTransform:A,id:d?"".concat(d,"_").concat(Al()):Al()})}addColorStop(e){for(const t in e){const r=new si(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return We(We({},Uc(this,e)),{},{type:this.type,coords:We({},this.coords),colorStops:this.colorStops.map(t=>We({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],o=this.gradientTransform?this.gradientTransform.concat():zs.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(u=>We({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,A=-this.offsetY;var d;s==="objectBoundingBox"?(a/=e.width,A/=e.height):(a+=e.width/2,A+=e.height/2),(d=e)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,A-=e.pathOffset.y),o[4]-=a,o[5]-=A;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(zp(o),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:f,y2:g}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:f,y2:g,r1:w,r2:y}=this.coords,x=w>y;r.push("<radialGradient ",c,' cx="',x?u:f,'" cy="',x?h:g,'" r="',x?w:y,'" fx="',x?f:u,'" fy="',x?g:h,`">
`),x&&(i.reverse(),i.forEach(I=>{I.offset=1-I.offset}));const C=Math.min(w,y);if(C>0){const I=C/Math.max(w,y);i.forEach(N=>{N.offset+=I*(1-N.offset)})}}return i.forEach(u=>{let{color:h,offset:f,opacity:g}=u;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',h,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:o,y2:s,r1:i,r2:a}=this.coords,A=this.type==="linear"?e.createLinearGradient(t,r,o,s):e.createRadialGradient(t,r,i,o,s,a);return this.colorStops.forEach(d=>{let{color:c,opacity:u,offset:h}=d;A.addColorStop(h,u!==void 0?new si(c).setAlpha(u).toRgba():c)}),A}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(We(We({},e),{},{colorStops:t?t.map(o=>We({},o)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const o=_x(e),s=t._findCenterFromElement();return new this(We({id:e.getAttribute("id")||void 0,type:bx(e),coords:EU(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:SU(e,r.opacity),gradientUnits:o,gradientTransform:H0(e.getAttribute("gradientTransform")||"")},o==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Ke(Vh,"type","Gradient"),or.setClass(Vh,"gradient"),or.setClass(Vh,"linear"),or.setClass(Vh,"radial");const FU=["type","source","patternTransform"];class xv{get type(){return"pattern"}set type(e){al("warn","Setting type has no effect",e)}constructor(e){Ke(this,"repeat","repeat"),Ke(this,"offsetX",0),Ke(this,"offsetY",0),Ke(this,"crossOrigin",""),this.id=Al(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return We(We({},Uc(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:to(this.offsetX,un.NUM_FRACTION_DIGITS),offsetY:to(this.offsetY,un.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:o,repeat:s,id:i}=this,a=Gd(this.offsetX/t,0),A=Gd(this.offsetY/r,0),d=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Gd(o.width/t,0),c=s==="repeat-x"||s==="no-repeat"?1+Math.abs(A||0):Gd(o.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(a,'" y="').concat(A,'" width="').concat(d,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(o.width,'" height="').concat(o.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:o,patternTransform:s}=e,i=Zn(e,FU);const a=await Xf(o,We(We({},t),{},{crossOrigin:i.crossOrigin}));return new this(We(We({},i),{},{patternTransform:s&&s.slice(0),source:a}))}}Ke(xv,"type","Pattern"),or.setClass(xv),or.setClass(xv,"pattern");const IU=["path","left","top"],UU=["d"];class Ul extends Mo{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:o,top:s}=t,i=Zn(t,IU);super(),Object.assign(this,Ul.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),typeof o=="number"&&this.set(Cn,o),typeof s=="number"&&this.set(Os,s)}_setPath(e,t){this.path=aU(Array.isArray(e)?e:gU(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Bt(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const o of this.path)switch(o[0]){case"L":e.lineTo(o[1]+t,o[2]+r);break;case"M":e.moveTo(o[1]+t,o[2]+r);break;case"C":e.bezierCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r,o[5]+t,o[6]+r);break;case"Q":e.quadraticCurveTo(o[1]+t,o[2]+r,o[3]+t,o[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=vU(this.path,un.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=un.NUM_FRACTION_DIGITS;return" translate(".concat(to(-this.pathOffset.x,e),", ").concat(to(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:o}=this._calcDimensions();this.set({width:t,height:r,pathOffset:o}),e&&this.setPositionByOrigin(o,Kr,Kr)}_calcBoundsFromPath(){const e=[];let t=0,r=0,o=0,s=0;for(const i of this.path)switch(i[0]){case"L":o=i[1],s=i[2],e.push({x:t,y:r},{x:o,y:s});break;case"M":o=i[1],s=i[2],t=o,r=s;break;case"C":e.push(...Jw(o,s,i[1],i[2],i[3],i[4],i[5],i[6])),o=i[5],s=i[6];break;case"Q":e.push(...Jw(o,s,i[1],i[2],i[1],i[2],i[3],i[4])),o=i[3],s=i[4];break;case"Z":o=t,s=r}return uA(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return We(We({},e),{},{pathOffset:new Bt(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const o=yA(e,this.ATTRIBUTE_NAMES,r),{d:s}=o;return new this(s,We(We(We({},Zn(o,UU)),t),{},{left:void 0,top:void 0}))}}Ke(Ul,"type","Path"),Ke(Ul,"cacheProperties",[...wA,"path","fillRule"]),Ke(Ul,"ATTRIBUTE_NAMES",[...hl,"d"]),or.setClass(Ul),or.setSVGClass(Ul);const QU=["left","top","radius"],xx=["radius","startAngle","endAngle","counterClockwise"];class sA extends Mo{static getDefaults(){return We(We({},super.getDefaults()),sA.ownDefaults)}constructor(e){super(),Object.assign(this,sA.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,vo(this.startAngle),vo(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(js)}getRadiusY(){return this.get("radius")*this.get(Bi)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...xx,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=vo(this.startAngle),o=vo(this.endAngle),s=pA(r)*t,i=gA(r)*t,a=pA(o)*t,A=gA(o)*t,d=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(d," ").concat(c," ").concat(a," ").concat(A,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const o=yA(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:a=0}=o;return new this(We(We({},Zn(o,QU)),{},{radius:a,left:s-a,top:i-a}))}static fromObject(e){return super._fromObject(e)}}Ke(sA,"type","Circle"),Ke(sA,"cacheProperties",[...wA,...xx]),Ke(sA,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Ke(sA,"ATTRIBUTE_NAMES",["cx","cy","r",...hl]),or.setClass(sA),or.setSVGClass(sA);const TU=["x1","y1","x2","y2"],LU=["x1","y1","x2","y2"],K0=["x1","x2","y1","y2"];class Ql extends Mo{constructor(){let[e,t,r,o]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ql.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=o,this._setWidthHeight();const{left:i,top:a}=s;typeof i=="number"&&this.set(Cn,i),typeof a=="number"&&this.set(Os,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:o}=this;this.width=Math.abs(r-e),this.height=Math.abs(o-t);const{left:s,top:i,width:a,height:A}=uA([{x:e,y:t},{x:r,y:o}]),d=new Bt(s+a/2,i+A/2);this.setPositionByOrigin(d,Kr,Kr)}_set(e,t){return super._set(e,t),K0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var o;yi(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(o=this.stroke)!==null&&o!==void 0?o:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new Bt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:o,width:s,height:i}=this,a=e<=t?-1:1,A=r<=o?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:A*i/2,y2:A*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:o}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(o,`" />
`)]}static async fromElement(e,t,r){const o=yA(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:a=0,y2:A=0}=o;return new this([s,i,a,A],Zn(o,TU))}static fromObject(e){let{x1:t,y1:r,x2:o,y2:s}=e,i=Zn(e,LU);return this._fromObject(We(We({},i),{},{points:[t,r,o,s]}),{extraParam:"points"})}}Ke(Ql,"type","Line"),Ke(Ql,"cacheProperties",[...wA,...K0]),Ke(Ql,"ATTRIBUTE_NAMES",hl.concat(K0)),or.setClass(Ql),or.setSVGClass(Ql);class Dl extends Mo{static getDefaults(){return We(We({},super.getDefaults()),Dl.ownDefaults)}constructor(e){super(),Object.assign(this,Dl.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Ke(Dl,"type","Triangle"),Ke(Dl,"ownDefaults",{width:100,height:100}),or.setClass(Dl),or.setSVGClass(Dl);const Bx=["rx","ry"];class iA extends Mo{static getDefaults(){return We(We({},super.getDefaults()),iA.ownDefaults)}constructor(e){super(),Object.assign(this,iA.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(js)}getRy(){return this.get("ry")*this.get(Bi)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Bx,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,yp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const o=yA(e,this.ATTRIBUTE_NAMES,r);return o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,new this(o)}}function PU(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Ke(iA,"type","Ellipse"),Ke(iA,"cacheProperties",[...wA,...Bx]),Ke(iA,"ownDefaults",{rx:0,ry:0}),Ke(iA,"ATTRIBUTE_NAMES",[...hl,"cx","cy","rx","ry"]),or.setClass(iA),or.setSVGClass(iA);const kU=["left","top"],zx={exactBoundingBox:!1};class Mi extends Mo{static getDefaults(){return We(We({},super.getDefaults()),Mi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ke(this,"strokeDiff",void 0),Object.assign(this,Mi.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:o}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Cn,r),typeof o=="number"&&this.set(Os,o)}isOpen(){return!0}_projectStrokeOnPoints(e){return zI(this.points,e,this.isOpen())}_calcDimensions(e){e=We({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(d=>d.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Bt,strokeOffset:new Bt,strokeDiff:new Bt};const r=uA(t),o=hg(We(We({},e),{},{scaleX:1,scaleY:1})),s=uA(this.points.map(d=>Ls(d,o,!0))),i=new Bt(this.scaleX,this.scaleY);let a=r.left+r.width/2,A=r.top+r.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(vo(this.skewX)),A-=a*Math.tan(vo(this.skewY))),We(We({},r),{},{pathOffset:new Bt(a,A),strokeOffset:new Bt(s.left,s.top).subtract(new Bt(r.left,r.top)).multiply(i),strokeDiff:new Bt(r.width,r.height).subtract(new Bt(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=uA(this.points);return new Bt(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}=this._calcDimensions();this.set({width:o,height:s,pathOffset:i,strokeOffset:a,strokeDiff:A}),e&&this.setPositionByOrigin(new Bt(t+o/2,r+s/2),Kr,Kr)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Bt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:A}=this._calcDimensions(e);i=new Bt((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:A)}else{var o,s;i=new Bt((o=e.width)!==null&&o!==void 0?o:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return i.multiply(new Bt(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,o=super._set(e,t);return this.exactBoundingBox&&r&&((e===js||e===Bi)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),o}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:o}=t;return{x:r,y:o}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,o=un.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push(to(this.points[s].x-t,o),",",to(this.points[s].y-r,o)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(let s=0;s<t;s++){const i=this.points[s];e.lineTo(i.x-r,i.y-o)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(PU(e.getAttribute("points")),We(We({},Zn(yA(e,this.ATTRIBUTE_NAMES,r),kU)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Ke(Mi,"ownDefaults",zx),Ke(Mi,"type","Polyline"),Ke(Mi,"layoutProperties",[Fc,Ic,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Ke(Mi,"cacheProperties",[...wA,"points"]),Ke(Mi,"ATTRIBUTE_NAMES",[...hl]),or.setClass(Mi),or.setSVGClass(Mi);class Gh extends Mi{isOpen(){return!1}}Ke(Gh,"ownDefaults",zx),Ke(Gh,"type","Polygon"),or.setClass(Gh),or.setSVGClass(Gh);const Cx=["fontSize","fontWeight","fontFamily","fontStyle"],Sx=["underline","overline","linethrough"],Ex=[...Cx,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Fx=[...Ex,...Sx,"textBackgroundColor","direction"],OU=[...Cx,...Sx,Ns,"strokeWidth",Io,"deltaY","textBackgroundColor"],DU={_reNewline:b1,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Cn,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Cn,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},ua="justify",Up="justify-left",bu="justify-right",_u="justify-center";class Ix extends Mo{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const o in t[r])for(const s in t[r][o])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const o in r)for(const s in r[o])if(r[o][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,o,s=0,i=!0,a=0;for(const A in t){r=0;for(const d in t[A]){const c=t[A][d]||{};s++,c[e]!==void 0?(o?c[e]!==o&&(i=!1):o=c[e],c[e]===this[e]&&delete c[e]):i=!1,Object.keys(c).length!==0?r++:delete t[A][d]}r===0&&delete t[A]}for(let A=0;A<this._textLines.length;A++)a+=this._textLines[A].length;i&&s===a&&(this[e]=o,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,o,s;for(o in t){for(s in r=t[o],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[o]}}_extendStyles(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=C1(We(We({},this._getStyleDeclaration(r,o)),t),i=>i!==void 0);this._setStyleDeclaration(r,o,s)}getSelectionStyles(e,t,r){const o=[];for(let s=e;s<(t||e);s++)o.push(this.getStyleAtPosition(s,r));return o}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,o):this._getStyleDeclaration(r,o)}setSelectionStyles(e,t,r){for(let o=t;o<(r||t);o++)this._extendStyles(o,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const o=this.styles&&this.styles[e];return o&&(r=o[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return We(We({},Uc(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Ke(Ix,"_styleProperties",OU);const NU=/  +/g,MU=/"/g;function Bv(n,e,t,r,o){return"		".concat(function(s,i){let{left:a,top:A,width:d,height:c}=i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:un.NUM_FRACTION_DIGITS;const h=qu(Io,s,!1),[f,g,w,y]=[a,A,d,c].map(x=>to(x,u));return"<rect ".concat(h,' x="').concat(f,'" y="').concat(g,'" width="').concat(w,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:o}),`
`)}const HU=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let zv;class bs extends Ix{static getDefaults(){return We(We({},super.getDefaults()),bs.ownDefaults)}constructor(e,t){super(),Ke(this,"__charBounds",[]),Object.assign(this,bs.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=vx(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ua)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,o,s,i,a;for(let A=0,d=this._textLines.length;A<d;A++)if((this.textAlign===ua||A!==d-1&&!this.isEndOfWrapping(A))&&(o=0,s=this._textLines[A],t=this.getLineWidth(A),t<this.width&&(a=this.textLines[A].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let c=0;c<=s.length;c++)i=this.__charBounds[A][c],this._reSpaceAndTab.test(s[c])?(i.width+=e,i.kernedWidth+=e,i.left+=o,o+=e):i.left+=o}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let o;for(o=0;o<r.length;o++){if(e<=r[o].length)return{lineIndex:o,charIndex:e};e-=r[o].length+this.missingNewlineOffset(o,t)}return{lineIndex:o-1,charIndex:r[o-1].length<e?r[o-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Ns?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Kr:e.textBaseline="middle";break;case"ascender":e.textBaseline=Os;break;case"descender":e.textBaseline=L0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const o=this.getLineWidth(t);o>e&&(e=o)}return e}_renderTextLine(e,t,r,o,s,i){this._renderChars(e,t,r,o,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let o=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){o+=a;continue}const A=this._textLines[s].length,d=this._getLineLeftOffset(s);let c,u,h=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let w=0;w<A;w++){const y=this.__charBounds[s][w];u=this.getValueOfPropertyAt(s,w,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=u,u&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):u!==g?(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=g,g&&e.fillRect(c,o,h,a/this.lineHeight),f=y.left,h=y.width,g=u):h+=y.kernedWidth}u&&!this.path&&(c=r+d+f,this.direction==="rtl"&&(c=this.width-c-h),e.fillStyle=u,e.fillRect(c,o,h,a/this.lineHeight)),o+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,o){const s=wu.getFontCache(t),i=this._getFontDeclaration(t),a=r+e,A=r&&i===this._getFontDeclaration(o),d=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,f;if(r&&s[r]!==void 0&&(h=s[r]),s[e]!==void 0&&(f=c=s[e]),A&&s[a]!==void 0&&(u=s[a],f=u-h),c===void 0||h===void 0||u===void 0){const g=function(){return zv||(zv=xa({width:0,height:0}).getContext("2d")),zv}();this._setTextStyles(g,t,!0),c===void 0&&(f=c=g.measureText(e).width,s[e]=c),h===void 0&&A&&r&&(h=g.measureText(r).width,s[r]=h),A&&u===void 0&&(u=g.measureText(a).width,s[a]=u,f=u-h)}return{width:c*d,kernedWidth:f*d}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,o=0;const s=this.pathSide===ho,i=this.path,a=this._textLines[e],A=a.length,d=new Array(A);this.__charBounds[e]=d;for(let c=0;c<A;c++){const u=a[c];r=this._getGraphemeBox(u,e,c,t),d[c]=r,o+=r.kernedWidth,t=u}if(d[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let c=0;const u=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case Cn:c=s?u-o:0;break;case Kr:c=(u-o)/2;break;case ho:c=s?0:u-o}c+=this.pathStartOffset*(s?-1:1);for(let h=s?A-1:0;s?h>=0:h<A;s?h--:h++)r=d[h],c>u?c%=u:c<0&&(c+=u),this._setGraphemeOnPath(c,r),c+=r.kernedWidth}return{width:o,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,o=this.path,s=uU(o.path,r,o.segmentsInfo);t.renderLeft=s.x-o.pathOffset.x,t.renderTop=s.y-o.pathOffset.y,t.angle=s.angle+(this.pathSide===ho?Math.PI:0)}_getGraphemeBox(e,t,r,o,s){const i=this.getCompleteStyleDeclaration(t,r),a=o?this.getCompleteStyleDeclaration(t,r-1):{},A=this._measureChar(e,i,o,a);let d,c=A.kernedWidth,u=A.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),u+=d,c+=d);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];h.left=f.left+f.width+A.kernedWidth-A.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,o=this._textLines[e].length;r<o;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),t+=r===o-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const o=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,a=this._textLines.length;i<a;i++){const A=this.getHeightOfLine(i),d=A/this.lineHeight,c=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],o+c,s+r+d,i),r+=A}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Io))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,o,s,i){const a=this.getHeightOfLine(i),A=this.textAlign.includes(ua),d=this.path,c=!A&&this.charSpacing===0&&this.isEmptyStyles(i)&&!d,u=this.direction==="ltr",h=this.direction==="ltr"?1:-1,f=t.direction;let g,w,y,x,C,I="",N=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?Cn:ho),s-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),o,s),void t.restore();for(let k=0,ee=r.length-1;k<=ee;k++)x=k===ee||this.charSpacing||d,I+=r[k],y=this.__charBounds[i][k],N===0?(o+=h*(y.kernedWidth-y.width),N+=y.width):N+=y.kernedWidth,A&&!x&&this._reSpaceAndTab.test(r[k])&&(x=!0),x||(g=g||this.getCompleteStyleDeclaration(i,k),w=this.getCompleteStyleDeclaration(i,k+1),x=P1(g,w,!1)),x&&(d?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,i,k,I,-N/2,0),t.restore()):(C=o,this._renderChar(e,t,i,k,I,C,s)),I="",g=w,o+=h*N,N=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,o=xa({width:t,height:r}),s=o.getContext("2d");return o.width=t,o.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(o,"no-repeat")}handleFiller(e,t,r){let o,s;return yi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:o}=t;return e.lineWidth=o,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,o,s,i,a){const A=this._getStyleDeclaration(r,o),d=this.getCompleteStyleDeclaration(r,o),c=e==="fillText"&&d.fill,u=e==="strokeText"&&d.stroke&&d.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(d),A.textBackgroundColor&&this._removeShadow(t),A.deltaY&&(a+=A.deltaY),c){const h=this._setFillStyles(t,d);t.fillText(s,i-h.offsetX,a-h.offsetY)}if(u){const h=this._setStrokeStyles(t,d);t.strokeText(s,i-h.offsetX,a-h.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),i=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,o=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let a=0;return o===ua||o===_u&&!i||o===bu&&!i||o===Up&&!i?0:(o===Kr&&(a=r/2),o===ho&&(a=r),o===_u&&(a=r/2),o===bu&&(a=r),s==="rtl"&&(o===ho||o===ua||o===bu?a=0:o===Cn||o===Up?a=-r:o!==Kr&&o!==_u||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var o;return(o=this._getStyleDeclaration(e,t)[r])!==null&&o!==void 0?o:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const o=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let A=0,d=this._textLines.length;A<d;A++){const c=this.getHeightOfLine(A);if(!this[t]&&!this.styleHas(t,A)){r+=c;continue}const u=this._textLines[A],h=c/this.lineHeight,f=this._getLineLeftOffset(A);let g,w,y=0,x=0,C=this.getValueOfPropertyAt(A,0,t),I=this.getValueOfPropertyAt(A,0,Io);const N=r+h*(1-this._fontSizeFraction);let k=this.getHeightOfChar(A,0),ee=this.getValueOfPropertyAt(A,0,"deltaY");for(let H=0,Y=u.length;H<Y;H++){const Be=this.__charBounds[A][H];g=this.getValueOfPropertyAt(A,H,t),w=this.getValueOfPropertyAt(A,H,Io);const M=this.getHeightOfChar(A,H),O=this.getValueOfPropertyAt(A,H,"deltaY");if(s&&g&&w)e.save(),e.fillStyle=I,e.translate(Be.renderLeft,Be.renderTop),e.rotate(Be.angle),e.fillRect(-Be.kernedWidth/2,a*M+O,Be.kernedWidth,this.fontSize/15),e.restore();else if((g!==C||w!==I||M!==k||O!==ee)&&x>0){let J=o+f+y;this.direction==="rtl"&&(J=this.width-J-x),C&&I&&(e.fillStyle=I,e.fillRect(J,N+a*k+ee,x,this.fontSize/15)),y=Be.left,x=Be.width,C=g,I=w,k=M,ee=O}else x+=Be.kernedWidth}let G=o+f+y;this.direction==="rtl"&&(G=this.width-G-x),e.fillStyle=w,g&&w&&e.fillRect(G,N+a*k+ee,x-i,this.fontSize/15),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:o=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||bs.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:o,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return L1(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),o=[`
`];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],o);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We(We({},super.toObject([...Fx,...e])),{},{styles:EI(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let o=!1,s=!1;if(typeof e=="object")for(const i in e)i==="path"&&this.setPathInfo(),o=o||r.includes(i),s=s||i==="path";else o=r.includes(e),s=e==="path";return s&&this.setPathInfo(),o&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const o=yA(e,bs.ATTRIBUTE_NAMES,r),s=We(We({},t),o),{textAnchor:i=Cn,textDecoration:a="",dx:A=0,dy:d=0,top:c=0,left:u=0,fontSize:h=y1,strokeWidth:f=1}=s,g=Zn(s,HU),w=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),We({left:u+A,top:c+d,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:h},g)),y=w.getScaledHeight()/w.height,x=((w.height+w.strokeWidth)*w.lineHeight-w.height)*y,C=w.getScaledHeight()+x;let I=0;return i===Kr&&(I=w.getScaledWidth()/2),i===ho&&(I=w.getScaledWidth()),w.set({left:w.left-I,top:w.top-(C-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:f}),w}static fromObject(e){return this._fromObject(We(We({},e),{},{styles:FI(e.styles||{},e.text)}),{extraParam:"text"})}}Ke(bs,"textLayoutProperties",Ex),Ke(bs,"cacheProperties",[...wA,...Fx]),Ke(bs,"ownDefaults",DU),Ke(bs,"type","Text"),Ke(bs,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ke(bs,"ATTRIBUTE_NAMES",hl.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Ax(bs,[class extends Z5{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(MU,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let o,s=n;this.backgroundColor&&r.push(...Bv(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,a=this._textLines.length;i<a;i++)o=this._getLineLeftOffset(i),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,e+o,s),this._setSVGTextLineText(t,i,e+o,s),s+=this.getHeightOfLine(i);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(NU)),s=o?'style="'.concat(o,'"'):"",i=e.deltaY,a=i?' dy="'.concat(to(i,un.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(to(t,un.NUM_FRACTION_DIGITS),'" y="').concat(to(r,un.NUM_FRACTION_DIGITS),'" ').concat(a).concat(s,">").concat(CI(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const o=this.getHeightOfLine(e),s=this.textAlign.includes(ua),i=this._textLines[e];let a,A,d,c,u,h="",f=0;r+=o*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,w=i.length-1;g<=w;g++)u=g===w||this.charSpacing,h+=i[g],d=this.__charBounds[e][g],f===0?(t+=d.kernedWidth-d.width,f+=d.width):f+=d.kernedWidth,s&&!u&&this._reSpaceAndTab.test(i[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(e,g),A=this.getCompleteStyleDeclaration(e,g+1),u=P1(a,A,!0)),u&&(c=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(h,c,t,r)),h="",a=A,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let i,a=0,A=0,d=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let c=0;c<o.length;c++){const{left:u,width:h,kernedWidth:f}=this.__charBounds[e][c];i=this.getValueOfPropertyAt(e,c,"textBackgroundColor"),i!==d?(d&&n.push(...Bv(d,t+A,r,a,s)),A=u,a=h,d=i):a+=f}i&&n.push(...Bv(d,t+A,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:o,fill:s,fontSize:i,fontStyle:a,fontWeight:A,deltaY:d}=n,c=this.getSvgTextDecoration(n);return[o?qu(Ns,o):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",c&&"text-decoration: ".concat(c,"; "),s?qu(Io,s):"",d?"baseline-shift: ".concat(-d,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),or.setClass(bs),or.setSVGClass(bs);class jU{constructor(e){Ke(this,"target",void 0),Ke(this,"__mouseDownInPlace",!1),Ke(this,"__dragStartFired",!1),Ke(this,"__isDraggingOver",!1),Ke(this,"__dragStartSelection",void 0),Ke(this,"__dragImageDisposer",void 0),Ke(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:o,selectionEnd:s}=t;const i=this.target,a=i.canvas,A=new Bt(i.flipX?-1:1,i.flipY?-1:1),d=i._getCursorBoundaries(o),c=new Bt(d.left+d.leftOffset,d.top+d.topOffset).multiply(A).transform(i.calcTransformMatrix()),u=a.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),f=i.getBoundingRect(),g=c.subtract(new Bt(f.left,f.top)),w=a.viewportTransform,y=g.add(u).transform(w,!0),x=i.backgroundColor,C=T1(i.styles);i.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(I,0,o),i.setSelectionStyles(I,s,i.text.length),i.dirty=!0;const N=i.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=x,i.styles=C,i.dirty=!0,$0(N,{position:"fixed",left:"".concat(-N.width,"px"),border:Ds,width:"".concat(N.width/h,"px"),height:"".concat(N.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{N.remove()},ji(e.target||this.target.hiddenTextarea).body.appendChild(N),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(N,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const o=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(o.selectionStart,o.selectionEnd).join(""),i=We({text:t.text,value:s},o);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(o.selectionStart,o.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,i)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,o=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!o){const i=this.target,a=i.canvas;let A=i.getSelectionStartFromPointer(r);const{styles:d}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},c=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const h=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;A>h&&A<=f?A=h:A>f&&(A-=f-h),i.removeChars(h,f),delete this.__dragStartSelection}i._reNewline.test(c)&&(i._reNewline.test(i._text[A])||A===i._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=i,i.insertChars(s,d,A),a.setActiveObject(i),i.enterEditing(r),i.selectionStart=Math.min(A+u,i._text.length),i.selectionEnd=Math.min(i.selectionStart+s.length,i._text.length),i.hiddenTextarea.value=i.text,i._updateTextarea(),i.hiddenTextarea.focus(),i.fire(bp,{index:A+u,action:"drop"}),a.fire("text:changed",{target:i}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const o=this.target,s=this.target.canvas,{selectionStart:i,selectionEnd:a}=this.__dragStartSelection,A=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Ds;A===Ds?(o.selectionStart=i,o.selectionEnd=a,o._updateTextarea(),o.hiddenTextarea.focus()):(o.clearContextTop(),A==="move"&&(o.removeChars(i,a),o.selectionStart=o.selectionEnd=i,o.hiddenTextarea&&(o.hiddenTextarea.value=o.text),o._updateTextarea(),o.fire(bp,{index:i,action:"dragend"}),s.fire("text:changed",{target:o}),s.requestRenderAll()),o.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const ty=/[ \n\.,;!\?\-]/;class RU extends bs{constructor(){super(...arguments),Ke(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:o,onComplete:s}=e;return nx({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:o,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:i=>{this._currentCursorOpacity=i,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let o=e>0&&this._reSpace.test(r[e])&&(t===-1||!b1.test(r[e-1]))?e-1:e,s=r[o];for(;o>0&&o<r.length&&!ty.test(s);)o+=t,s=r[o];return t===-1&&ty.test(s)&&o++,o}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;ji(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),o=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&o!==s||o!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===o&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const o=r.slice(0,e),s=this.graphemeSplit(o).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const o=r.slice(0,e).join("").length;return e===t?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,a=t.leftOffset,A=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,c=d.width/A,u=d.height/A,h=c-i,f=u-i,g=new Bt(t.left+a,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Bt(d.clientWidth/c,d.clientHeight/u));return g.x<0&&(g.x=0),g.x>h&&(g.x=h),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(_p),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=i;a<this._unwrappedTextLines[s].length;a++){const A=this.styles[s][a];A&&(this.styles[r]||(this.styles[r]={}),this.styles[r][o+a-i]=A)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],A=i-o;for(let d=o;d<i;d++)delete a[d];for(const d in this.styles[r]){const c=parseInt(d,10);c>=i&&(a[c-A]=a[d],delete a[d])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const o in this.styles){const s=parseInt(o,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,o){const s={},i=this._unwrappedTextLines[e].length,a=i===t;let A=!1;r||(r=1),this.shiftLineStyles(e,r);const d=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(A=!0,s[h-t]=this.styles[e][u],a&&t===0||delete this.styles[e][u])}let c=!1;for(A&&!a&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)o&&o[r-1]?this.styles[e+r]={0:We({},o[r-1])}:d?this.styles[e+r]={0:We({},d)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,o){this.styles||(this.styles={});const s=this.styles[e],i=s?We({},s):{};r||(r=1);for(const A in i){const d=parseInt(A,10);d>=t&&(s[d+r]=i[d],i[d-r]||delete s[d])}if(this._forceClearCache=!0,o){for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=We({},o[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=We({},a)}insertNewStyleBlock(e,t,r){const o=this.get2DCursorLocation(t,!0),s=[0];let i,a=0;for(let A=0;A<e.length;A++)e[A]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),i=1;i<a;i++)s[i]>0?this.insertCharStyleObject(o.lineIndex+i,0,s[i],r):r&&this.styles[o.lineIndex+i]&&r[0]&&(this.styles[o.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(o.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;o>r&&this.removeStyleFromTo(r,o);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(o)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Cn:this._selectionDirection===ho&&(this._selectionDirection=Cn,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===ho?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=ho:this._selectionDirection===Cn&&(this._selectionDirection=ho,this.selectionStart=t),this.selectionEnd=r)}}class $U extends RU{initHiddenTextarea(){const e=this.canvas&&ji(this.canvas.getElement())||Ec(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(i=>{let[a,A]=i;return t.setAttribute(a,A)});const{top:r,left:o,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(o,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(i=>{let[a,A]=i;return t.addEventListener(a,this[A].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(bp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,i=o.length,a=this.selectionStart,A=this.selectionEnd,d=a!==A;let c,u,h,f,g=i-s;const w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>w.selectionStart;d?(u=this._text.slice(a,A),g+=A-a):i<s&&(u=y?this._text.slice(A+g,A):this._text.slice(a,a-g));const x=o.slice(w.selectionEnd-g,w.selectionEnd);if(u&&u.length&&(x.length&&(c=this.getSelectionStyles(a,a+1,!1),c=x.map(()=>c[0])),d?(h=a,f=A):y?(h=A-u.length,f=A):(h=A,f=A+u.length),this.removeStyleFromTo(h,f)),x.length){const{copyPasteData:C}=_a();t&&x.join("")===C.copiedText&&!un.disableStyleCopyPaste&&(c=C.copiedTextStyle),this.insertNewStyleBlock(x,a,c)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:o}=t;this.compositionStart=r,this.compositionEnd=o,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=_a();e.copiedText=this.getSelectedText(),un.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,o=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],o+=r.left+r.width),o}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(i).length+A+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const i=o.charIndex,a=this._getWidthBeforeCursor(s,i),A=this._getIndexOnLine(s-1,a),d=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+A-d.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let o,s,i=this._getLineLeftOffset(e),a=0;for(let A=0,d=r.length;A<d;A++)if(o=this.__charBounds[e][A].width,i+=o,i>t){s=!0;const c=i-o,u=i,h=Math.abs(c-t);a=Math.abs(u-t)<h?A:A-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===ho);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const o=this.text.length;this.selectionStart=vc(0,this.selectionStart,o),this.selectionEnd=vc(0,this.selectionEnd,o),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Cn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let o;if(e.altKey)o=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;o=this["findLineBoundary".concat(r)](this[t])}return o!==void 0&&this[t]!==o&&(this[t]=o,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Cn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===ho&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Cn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Cn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ho,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=ho,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Cv=n=>!!n.button;class qU extends $U{constructor(){super(...arguments),Ke(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new jU(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),O0(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Cv(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Cv(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const o=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Cv(t)||o||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Ri(this.calcTransformMatrix())).add(new Bt(-this._getLeftOffset(),-this._getTopOffset()));let r=0,o=0,s=0;for(let d=0;d<this._textLines.length&&r<=t.y;d++)r+=this.getHeightOfLine(d),s=d,d>0&&(o+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let i=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,A=this.__charBounds[s];for(let d=0;d<a;d++){const c=i+A[d].kernedWidth;if(t.x<=c){Math.abs(t.x-c)<=Math.abs(t.x-i)&&o++;break}i=c,o++}return Math.min(this.flipX?a-o:o,this._text.length)}}const Wh="moveCursorUp",Xh="moveCursorDown",Yh="moveCursorLeft",Jh="moveCursorRight",Zh="exitEditing",KU=We({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Zh,27:Zh,33:Wh,34:Xh,35:Jh,36:Yh,37:Yh,38:Wh,39:Jh,40:Xh},keysMapRtl:{9:Zh,27:Zh,33:Wh,34:Xh,35:Yh,36:Jh,37:Jh,38:Wh,39:Yh,40:Xh},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class AA extends qU{static getDefaults(){return We(We({},super.getDefaults()),AA.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,We(We({},AA.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof q0&&this.canvas.textEditingManager.remove(this),t instanceof q0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),o=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:o,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:o,lineIndex:s}=this.get2DCursorLocation(e);for(let d=0;d<s;d++)t+=this.getHeightOfLine(d);const i=this._getLineLeftOffset(s),a=this.__charBounds[s][o];a&&(r=a.left),this.charSpacing!==0&&o===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const A={top:t,left:i+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===ho||this.textAlign===ua||this.textAlign===bu?A.left*=-1:this.textAlign===Cn||this.textAlign===Up?A.left=i-(r>0?r:0):this.textAlign!==Kr&&this.textAlign!==_u||(A.left=i-(r>0?r:0))),A}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(o,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),A=this.cursorWidth/a,d=this.getValueOfPropertyAt(o,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-A/2,top:c+t.top+d,width:A,height:i}}_renderCursor(e,t,r){const{color:o,opacity:s,left:i,top:a,width:A,height:d}=this.getCursorRenderingData(r,t);e.fillStyle=o,e.globalAlpha=s,e.fillRect(i,a,A,d)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const o=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(ua),a=this.get2DCursorLocation(o),A=this.get2DCursorLocation(s),d=a.lineIndex,c=A.lineIndex,u=a.charIndex<0?0:a.charIndex,h=A.charIndex<0?0:A.charIndex;for(let f=d;f<=c;f++){const g=this._getLineLeftOffset(f)||0;let w=this.getHeightOfLine(f),y=0,x=0,C=0;if(f===d&&(x=this.__charBounds[d][u].left),f>=d&&f<c)C=i&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===c)if(h===0)C=this.__charBounds[c][h].left;else{const G=this._getWidthOfCharSpacing();C=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-G}y=w,(this.lineHeight<1||f===c&&this.lineHeight>1)&&(w/=this.lineHeight);let I=r.left+g+x,N=w,k=0;const ee=C-x;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",N=1,k=w):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ho||this.textAlign===ua||this.textAlign===bu?I=this.width-I-ee:this.textAlign===Cn||this.textAlign===Up?I=r.left+g-C:this.textAlign!==Kr&&this.textAlign!==_u||(I=r.left+g-C)),e.fillRect(I,r.top+r.topOffset+k,ee,N),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Io)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Ke(AA,"ownDefaults",KU),Ke(AA,"type","IText"),or.setClass(AA),or.setClass(AA,"i-text");class Nl extends AA{static getDefaults(){return We(We({},super.getDefaults()),Nl.ownDefaults)}constructor(e,t){super(e,We(We({},Nl.ownDefaults),t))}static createControls(){return{controls:_I()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ua)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,o=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)e.graphemeText[o]===`
`&&i>0?(r=0,o++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&i>0&&(r++,o++),s[i]={line:t,offset:r},o+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,o=e+1,s=!1;const i=this._styleMap[e],a=this._styleMap[e+1];i&&(e=i.line,r=i.offset),a&&(o=a.line,s=o===e,t=a.offset);const A=e===void 0?this.styles:{line:this.styles[e]};for(const d in A)for(const c in A[d]){const u=parseInt(c,10);if(u>=r&&(!s||u<t))for(const h in A[d][c])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const o=this._styleMap[e];super._setStyleDeclaration(o.line,o.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),o=[];for(let s=0;s<r.wordsData.length;s++)o.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,o}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let o=0;return{wordsData:e.map((s,i)=>{let a=0;const A=t?this.graphemeSplit(s):this.wordSplit(s);return A.length===0?[{word:[],width:0}]:A.map(d=>{const c=t?[d]:this.graphemeSplit(d),u=this._measureWord(c,i,a);return o=Math.max(u,o),a+=c.length+r.length,{word:c,width:u}})}),largestWordWidth:o}}_measureWord(e,t){let r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let i=0,a=e.length;i<a;i++)s+=this._getGraphemeBox(e[i],t,i+o,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:o,wordsData:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),A=this.splitByGrapheme,d=[],c=A?"":" ";let u=0,h=[],f=0,g=0,w=!0;t-=i;const y=Math.max(t,o,this.dynamicMinWidth),x=s[e];let C;for(f=0,C=0;C<x.length;C++){const{word:I,width:N}=x[C];f+=I.length,u+=g+N-a,u>y&&!w?(d.push(h),h=[],u=N,w=!0):u+=a,w||A||h.push(c),h=h.concat(I),g=A?0:this._measureWord([c],e,f),f++,w=!1}return C&&d.push(h),o+i>this.dynamicMinWidth&&(this.dynamicMinWidth=o-a+i),d}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=r[s].join("");return t.lines=o,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const o=this._styleMap[t].line;e.set("".concat(o),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Ke(Nl,"type","Textbox"),Ke(Nl,"textLayoutProperties",[...AA.textLayoutProperties,"width"]),Ke(Nl,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),or.setClass(Nl);class ry extends mg{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:o,group:s}=r;if(!o||!this.shouldPerformLayout(e))return;const{width:i,height:a}=uA(cx(r,o)),A=new Bt(i,a);if(o.absolutePositioned)return{center:sc(o.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:A};{const d=o.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:c=new Bt,correction:u=new Bt}=this.calcBoundingBox(t,e)||{};return{center:c.add(d),correction:u.subtract(d),size:A}}return{center:r.getRelativeCenterPoint().add(d),size:A}}}}Ke(ry,"type","clip-path"),or.setClass(ry);class ny extends mg{getInitialSize(e,t){let{target:r}=e,{size:o}=t;return new Bt(r.width||o.x,r.height||o.y)}}Ke(ny,"type","fixed"),or.setClass(ny);class VU extends Vu{subscribeTargets(e){const t=e.target;e.targets.reduce((r,o)=>(o.parent&&r.add(o.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((o,s)=>(s.parent&&o.add(s.parent),o),new Set).forEach(o=>{!r.some(s=>s.parent===o)&&o.layoutManager.unsubscribeTargets({target:o,targets:[t]})})}}class Ml extends ql{static getDefaults(){return We(We({},super.getDefaults()),Ml.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ml.ownDefaults),this.setOptions(t);const{left:r,top:o,layoutManager:s}=t;this.groupInit(e,{left:r,top:o,layoutManager:s??new VU})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(o=>{const s=this._objects.findIndex(a=>a.isInFrontOf(o)),i=s===-1?this.size():s;this.insertAt(i,o)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(al("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(o=>{const{parent:s}=o;s&&r.add(s)}),e===O1?r.forEach(o=>{o._onAfterObjectsChange(Ep,t)}):r.forEach(o=>{o._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const o=We(We({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,o);super._renderControls(e,t),e.restore()}}Ke(Ml,"type","ActiveSelection"),Ke(Ml,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),or.setClass(Ml),or.setClass(Ml,"activeSelection");class GU{constructor(){Ke(this,"resources",{})}applyFilters(e,t,r,o,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,o);const a={sourceWidth:r,sourceHeight:o,imageData:i.getImageData(0,0,r,o),originalEl:t,originalImageData:i.getImageData(0,0,r,o),canvasEl:s,ctx:i,filterBackend:this};e.forEach(d=>{d.applyTo(a)});const{imageData:A}=a;return A.width===r&&A.height===o||(s.width=A.width,s.height=A.height),i.putImageData(A,0,0),a}}class Ux{constructor(){let{tileSize:e=un.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ke(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Ke(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=xa({width:e,height:t}),o=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});o&&(o.clearColor(0,0,0,0),this.canvas=r,this.gl=o)}applyFilters(e,t,r,o,s,i){const a=this.gl,A=s.getContext("2d");if(!a||!A)return;let d;i&&(d=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:a,sourceTexture:this.createTexture(a,r,o,d?void 0:t),targetTexture:this.createTexture(a,r,o),originalTexture:d||this.createTexture(a,r,o,d?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),e.forEach(h=>{h&&h.applyTo(c)}),function(h){const f=h.targetCanvas,g=f.width,w=f.height,y=h.destinationWidth,x=h.destinationHeight;g===y&&w===x||(f.width=y,f.height=x)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(u),A.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,o,s){const{NEAREST:i,TEXTURE_2D:a,RGBA:A,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,w=e.createTexture();return e.bindTexture(a,w),e.texParameteri(a,u,s||i),e.texParameteri(a,h,s||i),e.texParameteri(a,f,c),e.texParameteri(a,g,c),o?e.texImage2D(a,0,A,A,d,o):e.texImage2D(a,0,A,t,r,0,A,d,null),w}getCachedTexture(e,t,r){const{textureCache:o}=this;if(o[e])return o[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(o[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,o=t.targetCanvas,s=o.getContext("2d");if(!s)return;s.translate(0,o.height),s.scale(1,-1);const i=r.height-o.height;s.drawImage(r,0,i,o.width,o.height,0,0,o.width,o.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),o=t.destinationWidth,s=t.destinationHeight,i=o*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,i),A=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,a);const d=new ImageData(A,o,s);r.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(t.renderer=o.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Sv;function WU(){const{WebGLProbe:n}=_a();return n.queryWebGL(Vi()),un.enableGLFiltering&&n.isSupported(un.textureSize)?new Ux({tileSize:un.textureSize}):new GU}function Ev(){return!Sv&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Sv=WU()),Sv}const XU=["filters","resizeFilter","src","crossOrigin","type"],Qx=["cropX","cropY"];class xs extends Mo{static getDefaults(){return We(We({},super.getDefaults()),xs.ownDefaults)}constructor(e,t){super(),Ke(this,"_lastScaleX",1),Ke(this,"_lastScaleY",1),Ke(this,"_filterScalingX",1),Ke(this,"_filterScalingY",1),this.filters=[],Object.assign(this,xs.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Al()),this.setElement(typeof e=="string"?(this.canvas&&ji(this.canvas.getElement())||Ec()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(xs.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Ev(!1);t instanceof Ux&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&_a().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),We(We({},super.toObject([...Qx,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,o=-this.height/2;let s=[],i=[],a="",A="";if(!t)return[];if(this.hasCrop()){const d=Al();s.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(A=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(o-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(A).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,i=['	<rect x="'.concat(r,'" y="').concat(o,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return s=this.paintFirst!==Io?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xf(e,{crossOrigin:t,signal:r}).then(o=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(o)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);const a=xa(i),{width:A,height:d}=i;this._element=a,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,Ev().applyFilters([e],i,A,d,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=xa({width:r,height:o});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1);Ev().applyFilters(e,this._originalElement,r,o,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,o=this._filterScalingY,s=this.width,i=this.height,a=Math.max(this.cropX,0),A=Math.max(this.cropY,0),d=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=a*r,h=A*o,f=Math.min(s*r,d-u),g=Math.min(i*o,c-h),w=-s/2,y=-i/2,x=Math.min(s,d/r-a),C=Math.min(i,c/o-A);t&&e.drawImage(t,u,h,f,g,w,y,x,C)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=QF(this.preserveAspectRatio||""),t=this.width,r=this.height,o={width:t,height:r};let s,i=this._element.width,a=this._element.height,A=1,d=1,c=0,u=0,h=0,f=0;return!e||e.alignX===Ds&&e.alignY===Ds?(A=t/i,d=r/a):(e.meetOrSlice==="meet"&&(A=d=tU(this._element,o),s=(t-i*A)/2,e.alignX==="Min"&&(c=-s),e.alignX==="Max"&&(c=s),s=(r-a*d)/2,e.alignY==="Min"&&(u=-s),e.alignY==="Max"&&(u=s)),e.meetOrSlice==="slice"&&(A=d=rU(this._element,o),s=i-t/A,e.alignX==="Mid"&&(h=s/2),e.alignX==="Max"&&(h=s),s=a-r/d,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),i=t/A,a=r/d)),{width:i,height:a,scaleX:A,scaleY:d,offsetLeft:c,offsetTop:u,cropX:h,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:o,src:s,crossOrigin:i,type:a}=e,A=Zn(e,XU);return Promise.all([Xf(s,We(We({},t),{},{crossOrigin:i})),r&&$u(r,t),o&&$u([o],t),fg(A,t)]).then(d=>{let[c,u=[],[h]=[],f={}]=d;return new this(c,We(We({},A),{},{src:s,filters:u,resizeFilter:h},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return Xf(e,{crossOrigin:t,signal:r}).then(s=>new this(s,o))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const o=yA(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(o["xlink:href"],t,o).catch(s=>(al("log","Unable to parse Image",s),null))}}Ke(xs,"type","Image"),Ke(xs,"cacheProperties",[...wA,...Qx]),Ke(xs,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Ke(xs,"CSS_CANVAS","canvas-img"),Ke(xs,"ATTRIBUTE_NAMES",[...hl,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),or.setClass(xs),or.setSVGClass(xs);gg(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const yg=n=>n.webgl!==void 0,D1="precision highp float",YU=`
    `.concat(D1,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),JU=["type"],ZU=["type"],eQ=new RegExp(D1,"g");class Uo{get type(){return this.constructor.type}constructor(){let e=Zn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},JU);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return YU}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:o="highp"}}=_a();o!=="highp"&&(t=t.replace(eQ,D1.replace("highp",o)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!i||!a)throw new ha("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new ha("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new ha("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(a,s),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new ha('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const A=this.getUniformLocations(e,a)||{};return A.uStepW=e.getUniformLocation(a,"uStepW"),A.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:A}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,o={};for(let s=0;s<r.length;s++)o[r[s]]=e.getUniformLocation(t,r[s]);return o}sendAttributeData(e,t,r){const o=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,o=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===o||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,o)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){yg(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,o=xa({width:t,height:r});e.helpLayer=o}}toObject(){const e=Object.keys(this.constructor.defaults||{});return We({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Zn(e,ZU))}}Ke(Uo,"type","BaseFilter"),Ke(Uo,"uniformLocations",[]);const tQ={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ef extends Uo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(tQ[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new si(this.color).getSource(),o=this.alpha,s=r[0]*o,i=r[1]*o,a=r[2]*o,A=1-o;for(let d=0;d<t.length;d+=4){const c=t[d],u=t[d+1],h=t[d+2];let f,g,w;switch(this.mode){case"multiply":f=c*s/255,g=u*i/255,w=h*a/255;break;case"screen":f=255-(255-c)*(255-s)/255,g=255-(255-u)*(255-i)/255,w=255-(255-h)*(255-a)/255;break;case"add":f=c+s,g=u+i,w=h+a;break;case"difference":f=Math.abs(c-s),g=Math.abs(u-i),w=Math.abs(h-a);break;case"subtract":f=c-s,g=u-i,w=h-a;break;case"darken":f=Math.min(c,s),g=Math.min(u,i),w=Math.min(h,a);break;case"lighten":f=Math.max(c,s),g=Math.max(u,i),w=Math.max(h,a);break;case"overlay":f=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255,g=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,w=a<128?2*h*a/255:255-2*(255-h)*(255-a)/255;break;case"exclusion":f=s+c-2*s*c/255,g=i+u-2*i*u/255,w=a+h-2*a*h/255;break;case"tint":f=s+c*A,g=i+u*A,w=a+h*A}t[d]=f,t[d+1]=g,t[d+2]=w}}sendUniformData(e,t){const r=new si(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Ke(ef,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Ke(ef,"type","BlendColor"),Ke(ef,"uniformLocations",["uColor"]),or.setClass(ef);const rQ={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},nQ=["type","image"];class tf extends Uo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return rQ[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:o},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=Vi());const a=s.blendImage,A=a.getContext("2d");a.width!==r||a.height!==o?(a.width=r,a.height=o):A.clearRect(0,0,r,o),A.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),A.drawImage(i.getElement(),0,0,r,o);const d=A.getImageData(0,0,r,o).data;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],f=t[c+2],g=t[c+3],w=d[c],y=d[c+1],x=d[c+2],C=d[c+3];switch(this.mode){case"multiply":t[c]=u*w/255,t[c+1]=h*y/255,t[c+2]=f*x/255,t[c+3]=g*C/255;break;case"mask":t[c+3]=C}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return We(We({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:o}=e,s=Zn(e,nQ);return xs.fromObject(o,t).then(i=>new this(We(We({},s),{},{image:i})))}}Ke(tf,"type","BlendImage"),Ke(tf,"defaults",{mode:"multiply",alpha:1}),Ke(tf,"uniformLocations",["uTransformMatrix","uImage"]),or.setClass(tf);class rf extends Uo{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){yg(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:o}}=e;const{width:s,height:i}=r;o.blurLayer1||(o.blurLayer1=Vi(),o.blurLayer2=Vi());const a=o.blurLayer1,A=o.blurLayer2;a.width===s&&a.height===i||(A.width=a.width=s,A.height=a.height=i);const d=a.getContext("2d"),c=A.getContext("2d"),u=15,h=.06*this.blur*.5;let f,g,w,y;for(d.putImageData(r,0,0),c.clearRect(0,0,s,i),y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,w=h*g*s+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,w,f),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);for(y=-15;y<=u;y++)f=(Math.random()-.5)/4,g=y/u,w=h*g*i+f,c.globalAlpha=1-Math.abs(g),c.drawImage(a,f,w),d.drawImage(A,0,0),c.globalAlpha=1,c.clearRect(0,0,A.width,A.height);t.drawImage(a,0,0);const x=t.getImageData(0,0,a.width,a.height);return d.globalAlpha=1,d.clearRect(0,0,a.width,a.height),x}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Ke(rf,"type","Blur"),Ke(rf,"defaults",{blur:0}),Ke(rf,"uniformLocations",["uDelta"]),or.setClass(rf);class nf extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let o=0;o<t.length;o+=4)t[o]+=r,t[o+1]+=r,t[o+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Ke(nf,"type","Brightness"),Ke(nf,"defaults",{brightness:0}),Ke(nf,"uniformLocations",["uBrightness"]),or.setClass(nf);const Tx={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Wd extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,o=this.colorsOnly;for(let s=0;s<t.length;s+=4){const i=t[s],a=t[s+1],A=t[s+2];if(t[s]=i*r[0]+a*r[1]+A*r[2]+255*r[4],t[s+1]=i*r[5]+a*r[6]+A*r[7]+255*r[9],t[s+2]=i*r[10]+a*r[11]+A*r[12]+255*r[14],!o){const d=t[s+3];t[s]+=d*r[3],t[s+1]+=d*r[8],t[s+2]+=d*r[13],t[s+3]=i*r[15]+a*r[16]+A*r[17]+d*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,o),e.uniform4fv(t.uConstants,s)}toObject(){return We(We({},super.toObject()),{},{matrix:[...this.matrix]})}}function id(n,e){var t;const r=(Ke(t=class extends Wd{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Ke(t,"defaults",{colorsOnly:!1,matrix:e}),t);return or.setClass(r,n),r}Ke(Wd,"type","ColorMatrix"),Ke(Wd,"defaults",Tx),Ke(Wd,"uniformLocations",["uColorMatrix","uConstants"]),or.setClass(Wd);id("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);id("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);id("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);id("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);id("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);id("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);id("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class oy extends Uo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){yg(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>or.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Ke(oy,"type","Composed"),or.setClass(oy);class of extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=o*(t[s]-128)+128,t[s+1]=o*(t[s+1]-128)+128,t[s+2]=o*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Ke(of,"type","Contrast"),Ke(of,"defaults",{contrast:0}),Ke(of,"uniformLocations",["uContrast"]),or.setClass(of);const oQ={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class sf extends Uo{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return oQ[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,o=this.matrix,s=Math.round(Math.sqrt(o.length)),i=Math.floor(s/2),a=t.width,A=t.height,d=e.ctx.createImageData(a,A),c=d.data,u=this.opaque?1:0;let h,f,g,w,y,x,C,I,N,k,ee,G,H;for(ee=0;ee<A;ee++)for(k=0;k<a;k++){for(y=4*(ee*a+k),h=0,f=0,g=0,w=0,H=0;H<s;H++)for(G=0;G<s;G++)C=ee+H-i,x=k+G-i,C<0||C>=A||x<0||x>=a||(I=4*(C*a+x),N=o[H*s+G],h+=r[I]*N,f+=r[I+1]*N,g+=r[I+2]*N,u||(w+=r[I+3]*N));c[y]=h,c[y+1]=f,c[y+2]=g,c[y+3]=u?r[y+3]:w}e.imageData=d}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return We(We({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Ke(sf,"type","Convolute"),Ke(sf,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Ke(sf,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),or.setClass(sf);const Lx="Gamma";class af extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,o=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let A=0;A<256;A++)a.r[A]=255*Math.pow(A/255,o),a.g[A]=255*Math.pow(A/255,s),a.b[A]=255*Math.pow(A/255,i);for(let A=0;A<t.length;A+=4)t[A]=a.r[t[A]],t[A+1]=a.g[t[A+1]],t[A+2]=a.b[t[A+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Lx,gamma:this.gamma.concat()}}}Ke(af,"type",Lx),Ke(af,"defaults",{gamma:[1,1,1]}),Ke(af,"uniformLocations",["uGamma"]),or.setClass(af);const sQ={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Af extends Uo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2];switch(this.mode){case"average":r=(s+i+a)/3;break;case"lightness":r=(Math.min(s,i,a)+Math.max(s,i,a))/2;break;case"luminosity":r=.21*s+.72*i+.07*a}t[o+2]=t[o+1]=t[o]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return sQ[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Ke(Af,"type","Grayscale"),Ke(Af,"defaults",{mode:"average"}),Ke(Af,"uniformLocations",["uMode"]),or.setClass(Af);const iQ=We(We({},Tx),{},{rotation:0});class Fv extends Wd{calculateMatrix(){const e=this.rotation*Math.PI,t=pA(e),r=gA(e),o=1/3,s=Math.sqrt(o)*r,i=1-t;this.matrix=[t+i/3,o*i-s,o*i+s,0,0,o*i+s,t+o*i,o*i-s,0,0,o*i-s,o*i+s,t+o*i,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Ke(Fv,"type","HueRotation"),Ke(Fv,"defaults",iQ),or.setClass(Fv);class lf extends Uo{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Ke(lf,"type","Invert"),Ke(lf,"defaults",{alpha:!1,invert:!0}),Ke(lf,"uniformLocations",["uInvert","uAlpha"]),or.setClass(lf);class df extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let o=0;o<t.length;o+=4){const s=(.5-Math.random())*r;t[o]+=s,t[o+1]+=s,t[o+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Ke(df,"type","Noise"),Ke(df,"defaults",{noise:0}),Ke(df,"uniformLocations",["uNoise","uSeed"]),or.setClass(df);class cf extends Uo{applyTo2d(e){let{imageData:{data:t,width:r,height:o}}=e;for(let s=0;s<o;s+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const a=4*s*r+4*i,A=t[a],d=t[a+1],c=t[a+2],u=t[a+3];for(let h=s;h<Math.min(s+this.blocksize,o);h++)for(let f=i;f<Math.min(i+this.blocksize,r);f++){const g=4*h*r+4*f;t[g]=A,t[g+1]=d,t[g+2]=c,t[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Ke(cf,"type","Pixelate"),Ke(cf,"defaults",{blocksize:4}),Ke(cf,"uniformLocations",["uBlocksize"]),or.setClass(cf);class uf extends Uo{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,o=new si(this.color).getSource(),s=[o[0]-r,o[1]-r,o[2]-r],i=[o[0]+r,o[1]+r,o[2]+r];for(let a=0;a<t.length;a+=4){const A=t[a],d=t[a+1],c=t[a+2];A>s[0]&&d>s[1]&&c>s[2]&&A<i[0]&&d<i[1]&&c<i[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new si(this.color).getSource(),o=this.distance,s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],i=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}Ke(uf,"type","RemoveColor"),Ke(uf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Ke(uf,"uniformLocations",["uLow","uHigh"]),or.setClass(uf);class hf extends Uo{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),o=new Array(r);for(let s=1;s<=r;s++)o[s-1]=e(s*t);return o}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,o)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(o,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(o,`];
              sum += 2.0 * uTaps[`).concat(o,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){yg(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;const s=t.width,i=t.height,a=Math.round(s*r),A=Math.round(i*o);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,i,a,A):this.resizeType==="hermite"?this.hermiteFastResize(e,s,i,a,A):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,i,a,A):this.resizeType==="lanczos"?this.lanczosResize(e,s,i,a,A):new ImageData(a,A),e.imageData=d}sliceByTwo(e,t,r,o,s){const i=e.imageData,a=.5;let A=!1,d=!1,c=t*a,u=r*a;const h=e.filterBackend.resources;let f=0,g=0;const w=t;let y=0;h.sliceByTwo||(h.sliceByTwo=Vi());const x=h.sliceByTwo;(x.width<1.5*t||x.height<r)&&(x.width=1.5*t,x.height=r);const C=x.getContext("2d");for(C.clearRect(0,0,1.5*t,r),C.putImageData(i,0,0),o=Math.floor(o),s=Math.floor(s);!A||!d;)t=c,r=u,o<Math.floor(c*a)?c=Math.floor(c*a):(c=o,A=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,d=!0),C.drawImage(x,f,g,t,r,w,y,c,u),f=w,g=y,y+=u;return C.getImageData(f,g,o,s)}lanczosResize(e,t,r,o,s){const i=e.imageData.data,a=e.ctx.createImageData(o,s),A=a.data,d=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(c*this.lanczosLobes/2),w=Math.ceil(u*this.lanczosLobes/2),y={},x={x:0,y:0},C={x:0,y:0};return function I(N){let k,ee,G,H,Y,Be,M,O,J,re,he;for(x.x=(N+.5)*c,C.x=Math.floor(x.x),k=0;k<s;k++){for(x.y=(k+.5)*u,C.y=Math.floor(x.y),Y=0,Be=0,M=0,O=0,J=0,ee=C.x-g;ee<=C.x+g;ee++)if(!(ee<0||ee>=t)){re=Math.floor(1e3*Math.abs(ee-x.x)),y[re]||(y[re]={});for(let ie=C.y-w;ie<=C.y+w;ie++)ie<0||ie>=r||(he=Math.floor(1e3*Math.abs(ie-x.y)),y[re][he]||(y[re][he]=d(Math.sqrt(Math.pow(re*h,2)+Math.pow(he*f,2))/1e3)),G=y[re][he],G>0&&(H=4*(ie*t+ee),Y+=G,Be+=G*i[H],M+=G*i[H+1],O+=G*i[H+2],J+=G*i[H+3]))}H=4*(k*o+N),A[H]=Be/Y,A[H+1]=M/Y,A[H+2]=O/Y,A[H+3]=J/Y}return++N<o?I(N):a}(0)}bilinearFiltering(e,t,r,o,s){let i,a,A,d,c,u,h,f,g,w,y,x,C,I=0;const N=this.rcpScaleX,k=this.rcpScaleY,ee=4*(t-1),G=e.imageData.data,H=e.ctx.createImageData(o,s),Y=H.data;for(h=0;h<s;h++)for(f=0;f<o;f++)for(c=Math.floor(N*f),u=Math.floor(k*h),g=N*f-c,w=k*h-u,C=4*(u*t+c),y=0;y<4;y++)i=G[C+y],a=G[C+4+y],A=G[C+ee+y],d=G[C+ee+4+y],x=i*(1-g)*(1-w)+a*g*(1-w)+A*w*(1-g)+d*g*w,Y[I++]=x;return H}hermiteFastResize(e,t,r,o,s){const i=this.rcpScaleX,a=this.rcpScaleY,A=Math.ceil(i/2),d=Math.ceil(a/2),c=e.imageData.data,u=e.ctx.createImageData(o,s),h=u.data;for(let f=0;f<s;f++)for(let g=0;g<o;g++){const w=4*(g+f*o);let y=0,x=0,C=0,I=0,N=0,k=0,ee=0;const G=(f+.5)*a;for(let H=Math.floor(f*a);H<(f+1)*a;H++){const Y=Math.abs(G-(H+.5))/d,Be=(g+.5)*i,M=Y*Y;for(let O=Math.floor(g*i);O<(g+1)*i;O++){let J=Math.abs(Be-(O+.5))/A;const re=Math.sqrt(M+J*J);re>1&&re<-1||(y=2*re*re*re-3*re*re+1,y>0&&(J=4*(O+H*t),ee+=y*c[J+3],C+=y,c[J+3]<255&&(y=y*c[J+3]/250),I+=y*c[J],N+=y*c[J+1],k+=y*c[J+2],x+=y))}}h[w]=I/x,h[w+1]=N/x,h[w+2]=k/x,h[w+3]=ee/C}return u}}Ke(hf,"type","Resize"),Ke(hf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Ke(hf,"uniformLocations",["uDelta","uTaps"]),or.setClass(hf);class ff extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a);t[o]+=A!==s?(A-s)*r:0,t[o+1]+=A!==i?(A-i)*r:0,t[o+2]+=A!==a?(A-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Ke(ff,"type","Saturation"),Ke(ff,"defaults",{saturation:0}),Ke(ff,"uniformLocations",["uSaturation"]),or.setClass(ff);class pf extends Uo{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let o=0;o<t.length;o+=4){const s=t[o],i=t[o+1],a=t[o+2],A=Math.max(s,i,a),d=(s+i+a)/3,c=2*Math.abs(A-d)/255*r;t[o]+=A!==s?(A-s)*c:0,t[o+1]+=A!==i?(A-i)*c:0,t[o+2]+=A!==a?(A-a)*c:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Ke(pf,"type","Vibrance"),Ke(pf,"defaults",{vibrance:0}),Ke(pf,"uniformLocations",["uVibrance"]),or.setClass(pf);Mo.prototype.toObject=function(n){return function(e=[]){return n.call(this,["data",...e])}}(Mo.prototype.toObject);class Px{constructor(e,t){this.currentScale=1,this.SNAP_THRESHOLD=10,this.resizeTimeout=null,this.originalWidth=t.width,this.originalHeight=t.height,this.aspectRatio=this.originalHeight/this.originalWidth,this.containerElement=t.containerElement,this.containerElement.style.height=`${this.containerElement.offsetWidth*this.aspectRatio}px`,this.canvas=new q0(e,{width:this.originalWidth,height:this.originalHeight,controlsAboveOverlay:!0,preserveObjectStacking:!0,selection:!0}),this.setupResizeObserver(),this.setupSnapBehavior(),this.setupSelectionBehavior()}toOriginalCoordinate(e){return e/this.currentScale}toScaledCoordinate(e){return e*this.currentScale}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.containerElement)}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.updateCanvasSize(),this.canvas.requestRenderAll()},100)}updateCanvasSize(){const e=this.containerElement.offsetWidth,t=this.canvas.backgroundImage?this.canvas.backgroundImage.height/this.canvas.backgroundImage.width:this.canvas.overlayImage?this.canvas.overlayImage.height/this.canvas.overlayImage.width:this.aspectRatio,r=e*t;this.containerElement.style.height=`${r}px`;const o=e/this.originalWidth;this.currentScale=o,this.canvas.setDimensions({width:e,height:r}),this.canvas.setViewportTransform([o,0,0,o,0,0]),this.canvas.requestRenderAll()}setupSnapBehavior(){this.canvas.on("object:moving",e=>{var A;const t=e.target;if(!t||((A=t.data)==null?void 0:A.editType)==="print")return;const o=this.canvas.getObjects().filter(d=>{var c;return((c=d.data)==null?void 0:c.editType)==="print"});let s=null,i=null;const a={left:t.left/this.currentScale,right:(t.left+t.width*t.scaleX)/this.currentScale,top:t.top,bottom:t.top+t.height*t.scaleY,centerX:t.left+t.width*t.scaleX/2,centerY:t.top+t.height*t.scaleY/2};for(const d of o){const c={left:d.left/this.currentScale,right:(d.left+d.width*d.scaleX)/this.currentScale,top:d.top,bottom:d.top+d.height*d.scaleY,centerX:d.left+d.width*d.scaleX/2,centerY:d.top+d.height*d.scaleY/2};Math.abs(a.left-c.left)<this.SNAP_THRESHOLD?s=c.left:Math.abs(a.right-c.right)<this.SNAP_THRESHOLD?s=c.right-t.width*t.scaleX:Math.abs(a.centerX-c.centerX)<this.SNAP_THRESHOLD&&(s=c.centerX-t.width*t.scaleX/2),Math.abs(a.top-c.top)<this.SNAP_THRESHOLD?i=c.top:Math.abs(a.bottom-c.bottom)<this.SNAP_THRESHOLD?i=c.bottom-t.height*t.scaleY:Math.abs(a.centerY-c.centerY)<this.SNAP_THRESHOLD&&(i=c.centerY-t.height*t.scaleY/2)}s!==null&&t.set("left",s),i!==null&&t.set("top",i)})}setupSelectionBehavior(){this.canvas.on("selection:created",e=>{var r,o;const t=(r=e.selected)==null?void 0:r[0];((o=t==null?void 0:t.data)==null?void 0:o.editType)==="print"&&this.canvas.discardActiveObject()}),this.canvas.on("mouse:down",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&t.data.objectId&&this.onPrintAreaClick&&this.onPrintAreaClick(t.data.objectId)}),this.canvas.on("mouse:over",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="pointer")}),this.canvas.on("mouse:out",e=>{var r;const t=e.target;((r=t==null?void 0:t.data)==null?void 0:r.editType)==="print"&&(this.canvas.defaultCursor="default")})}setPrintAreaClickListener(e){this.onPrintAreaClick=e}async setCanvasJSON(e){console.log("json",e),await this.canvas.loadFromJSON(e),this.canvas.requestRenderAll()}addEditableArea(e){if(e.type==="rect"){const t=new Hi({left:e.properties.x,top:e.properties.y,width:e.properties.width,height:e.properties.height,fill:"rgba(0,216,255,0.3)",stroke:"rgba(0,203,239,1)",strokeWidth:1,cornerStyle:"circle",transparentCorners:!1,cornerColor:"rgba(0,203,239,0.5)",cornerSize:10,lockRotation:!0,hasControls:!0,data:{editType:e.properties.editType,objectId:e.properties.objectId}});return this.canvas.add(t),this.canvas.requestRenderAll(),t}}removeObject(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(this.canvas.remove(r),this.canvas.requestRenderAll())}setSelectionListener(e){this.canvas.on("selection:created",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:updated",t=>{var r;return e(((r=t.selected)==null?void 0:r[0])??null)}),this.canvas.on("selection:cleared",()=>e(null))}zoomToPoint(e,t){const s=Math.min(Math.max(t,.1),3),i=new Bt(e.x,e.y);this.canvas.zoomToPoint(i,s),this.canvas.requestRenderAll()}getCurrentScale(){return this.currentScale}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.canvas.dispose()}getCanvas(){return this.canvas}getObjects(){return this.canvas.getObjects()}getCanvasJson(){return this.canvas.toJSON()}getCanvasImage(){return this.canvas.toDataURL({format:"png",quality:1,multiplier:1})}async setImage(e){return new Promise((t,r)=>{const o=new Image;o.onload=()=>{const s={width:o.width,height:o.height,dataUrl:e},i=800;let a=o.width,A=o.height;(a>i||A>i)&&(a>A?(A=i*A/a,a=i):(a=i*a/A,A=i));const d=document.createElement("canvas");d.width=a,d.height=A;const c=d.getContext("2d");c==null||c.drawImage(o,0,0,a,A);const u=d.toDataURL("image/jpeg",.9);xs.fromURL(u,{crossOrigin:"anonymous"}).then(h=>{const f=this.canvas.getWidth(),g=this.canvas.getHeight(),w=A/a,y=g/f;w>y?h.scaleToHeight(g):h.scaleToWidth(f),this.canvas.getObjects().filter(C=>{var I;return((I=C.data)==null?void 0:I.editType)==="print"}).forEach(async C=>{const I=C;I.absolutePositioned=!0,I.fill="transparent";const N=C.width/h.width,k=C.height/h.height,ee=Math.max(N,k),G=h.width*ee,H=h.height*ee;h.left=C.left+(C.width-G)/2,h.top=C.top+(C.height-H)/2,h.scaleToWidth(G),h.scaleToHeight(H),h.clipPath=I}),this.canvas.add(h),this.canvas.requestRenderAll(),t({thumbnail:{width:a,height:A,dataUrl:u},original:s})}).catch(r)},o.onerror=()=>{r(new Error("  "))},o.src=e})}async setOverlay(e){try{const t=await xs.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.overlayImage=t,this.canvas.renderAll()}catch(t){throw console.error("     :",t),t}}async setBackground(e){try{const t=await xs.fromURL(e,{crossOrigin:"anonymous"});this.setBackgroundOverlaySize(t),this.canvas.backgroundImage=t,this.canvas.requestRenderAll()}catch(t){throw console.error("     :",t),t}}async setBackgroundOverlaySize(e){const t=this.containerElement.offsetWidth,r=t*(e.height/e.width);this.originalWidth=t,this.originalHeight=r,this.aspectRatio=r/t,this.containerElement.style.height=`${r}px`,e.scaleToWidth(t),e.scaleToHeight(r),e.set({top:0,left:0,originX:"left",originY:"top"})}updateObjectDisabled(e){const r=this.canvas.getObjects().find(o=>{var s;return((s=o.data)==null?void 0:s.objectId)===e});r&&(r.set("fill","#cccccc"),r.set("opacity",.5),r.set("stroke","#cccccc"),r.set("strokeWidth",0),r.set("evented",!1)),this.canvas.requestRenderAll()}updateAllObjectEnabled(){this.canvas.getObjects().forEach(t=>{t.set("fill","rgba(0,216,255,0.3)"),t.set("opacity",1),t.set("stroke","rgba(0,203,239,1)"),t.set("strokeWidth",1),t.set("evented",!0)}),this.canvas.requestRenderAll()}}async function aQ(n,e="estimates",t){try{console.log("   :",{name:n.name,size:n.size,type:n.type,folder:e});const r=dQ(n);if(!r.isValid)return console.error("   :",r.errors),{success:!1,error:r.errors.join(", ")};const o=Date.now(),s=Math.random().toString(36).substring(2,8),i=cQ(n.name),a=`${o}_${s}_${i}`,A=`${e}/${a}`;console.log("   :",{fileName:a,filePath:A});const{data:d,error:c}=await pt.storage.from("uploads").upload(A,n,{cacheControl:"3600",upsert:!1});if(c)return console.error(" Storage  :",c),{success:!1,error:`  : ${c.message}`};console.log(" Storage  :",d);const{data:u}=pt.storage.from("uploads").getPublicUrl(A);if(!u.publicUrl)return console.error("  URL  "),{success:!1,error:"  URL  ."};console.log("  URL  :",u.publicUrl);const h={id:s,name:n.name,size:n.size,type:n.type,url:u.publicUrl,path:A,uploadedAt:new Date().toISOString()};return console.log("   :",h),{success:!0,file:h}}catch(r){return console.error("      :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}async function AQ(n,e="estimates",t){console.log("    :",{count:n.length,folder:e});const r=[];for(let s=0;s<n.length;s++){const i=n[s];console.log(`  ${s+1}/${n.length}  :`,i.name);const a=await aQ(i,e);if(r.push(a),t){const A=s+1,d=n.length,c=Math.round(A/d*100);t(A,d,c)}a.success||console.warn(`    (${s+1}/${n.length}):`,{fileName:i.name,error:a.error})}const o=r.filter(s=>s.success).length;return console.log("    :",{total:n.length,success:o,failed:n.length-o}),r}async function lQ(n){try{console.log("   :",n);const{error:e}=await pt.storage.from("uploads").remove([n]);return e?(console.error("   :",e),!1):(console.log("   :",n),!0)}catch(e){return console.error("    :",e),!1}}async function sy(n,e,t){try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e,fileCount:t.length});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("*").eq("estimate_id",n).eq("object_id",e).single();if(o&&o.code!=="PGRST116")return console.error("    :",o),{success:!1,error:`   : ${o.message}`};const s={files:t,updatedAt:new Date().toISOString(),totalFiles:t.length,totalSize:t.reduce((i,a)=>i+a.size,0)};if(r){const{error:i}=await pt.from("estimate_simple_prints").update({uploaded_files:s,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)return console.error("   :",i),{success:!1,error:`  : ${i.message}`};console.log("    :",r.id)}else{const{error:i}=await pt.from("estimate_simple_prints").insert({estimate_id:n,object_id:e,title:` ${e}`,print_method:"file-upload",uploaded_files:s,price:0,original_price:0,discount_amount:0});if(i)return console.error("    :",i),{success:!1,error:`   : ${i.message}`};console.log("    ")}return{success:!0}}catch(r){return console.error(" estimate_simple_prints   :",r),{success:!1,error:r instanceof Error?r.message:"    ."}}}function dQ(n){const e=[];n.size>52428800&&e.push(`   .  50MB  . (: ${Math.round(n.size/1024/1024)}MB)`);const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/postscript","application/illustrator","image/vnd.adobe.photoshop"],o=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".eps",".ai",".psd"],s=n.name.toLowerCase(),i=o.some(A=>s.endsWith(A)),a=r.includes(n.type);return!i&&!a&&e.push("   . ( : JPG, PNG, GIF, PDF, AI, EPS, PSD, SVG)"),n.name.length>255&&e.push("  . 255  ."),{isValid:e.length===0,errors:e}}function cQ(n){return n.replace(/[^-a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"")}function uQ(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}async function hQ(n,e){var t;try{console.log(" estimate_simple_prints   :",{estimateId:n,objectId:e});const{data:r,error:o}=await pt.from("estimate_simple_prints").select("uploaded_files, file_metadata").eq("estimate_id",n).eq("object_id",e).single();if(o)return o.code==="PGRST116"?{success:!0,files:[]}:(console.error("    :",o),{success:!1,files:[],error:`   : ${o.message}`});const s=r==null?void 0:r.uploaded_files;let i=(s==null?void 0:s.files)||[];return console.log(" DB  :",{hasUploadedFiles:!!s,uploadedFilesType:typeof s,uploadedFilesHasFiles:!!(s!=null&&s.files),uploadedFilesLength:((t=s==null?void 0:s.files)==null?void 0:t.length)||0,hasFileMetadata:!!(r!=null&&r.file_metadata),fileMetadataType:typeof(r==null?void 0:r.file_metadata),fileMetadataLength:Array.isArray(r==null?void 0:r.file_metadata)?r.file_metadata.length:0}),i.length===0&&(r!=null&&r.file_metadata)&&(console.log(" uploaded_files  - file_metadata  "),i=(Array.isArray(r.file_metadata)?r.file_metadata:[]).map(A=>({id:Math.random().toString(36).substring(2,8),name:A.name||"",size:A.size||0,type:A.type||"",url:A.url||"#",path:A.path||"",uploadedAt:new Date().toISOString()})),console.log(" file_metadata   :",{fileCount:i.length,files:i.map(A=>({name:A.name,hasUrl:A.url!=="#"}))})),console.log("    :",{fileCount:i.length,source:i.length>0&&(s!=null&&s.files)?"uploaded_files":"file_metadata"}),{success:!0,files:i}}catch(r){return console.error("     :",r),{success:!1,files:[],error:r instanceof Error?r.message:"    ."}}}var fQ=W('<div class="odz-absolute -odz-top-2 -odz-right-2 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),pQ=W('<button><!> <div class="odz-text-center"><span> </span></div></button>'),gQ=W('<div class="odz-mt-3 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-2"><svg class="odz-w-4 odz-h-4 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-w-full odz-bg-blue-200 odz-rounded-full odz-h-2"><div class="odz-bg-blue-600 odz-h-2 odz-rounded-full odz-transition-all odz-duration-300"></div></div></div>'),vQ=W('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-red-700"> </span></div>'),mQ=W('<a target="_blank" rel="noopener noreferrer" class="odz-p-1 odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></a>'),wQ=W('<button class="odz-p-1 odz-text-gray-400 odz-cursor-not-allowed odz-rounded" disabled title="  .   ."><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg></button>'),yQ=W('<div class="odz-flex odz-items-center odz-justify-between odz-bg-white odz-border odz-border-gray-200 odz-rounded-lg odz-p-3"><div class="odz-flex odz-items-center odz-gap-2 odz-min-w-0 odz-flex-1"><svg class="odz-w-4 odz-h-4 odz-text-gray-500 odz-flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <div class="odz-min-w-0 odz-flex-1"><p class="odz-text-sm odz-font-medium odz-text-gray-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div> <div class="odz-flex odz-items-center odz-gap-2"><!> <button class="odz-p-1 odz-text-red-600 hover:odz-text-red-800 hover:odz-bg-red-50 odz-rounded" title=" "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),bQ=W('<div class="odz-mt-3"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-green-700"> </span></div> <div class="odz-space-y-2"></div></div>'),_Q=W('<div class="odz-flex odz-items-center odz-gap-1 odz-text-xs odz-text-gray-600 odz-bg-gray-50 odz-px-2 odz-py-1 odz-rounded odz-min-w-0"><span class="odz-flex-shrink-0"></span> <span class="odz-truncate odz-min-w-0"> </span> <span class="odz-flex-shrink-0"> </span></div>'),xQ=W('<div class="odz-mt-3 odz-flex odz-items-center odz-gap-2 odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-lg odz-p-3"><svg class="odz-w-4 odz-h-4 odz-text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-blue-700"> </span></div> <div class="odz-mt-2 odz-space-y-1"></div>',1),BQ=W(`<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><span class="odz-text-white odz-font-bold odz-text-sm"></span></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800"> </h3> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <button class="odz-w-8 odz-h-8 odz-flex odz-items-center odz-justify-center odz-text-gray-400 hover:odz-text-red-500
                                   hover:odz-bg-red-50 odz-rounded-full odz-transition-all odz-duration-200" aria-label="  "><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-mb-6"><div class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3"> </div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div></div> <div class="odz-mb-4"><label class="odz-block odz-text-sm odz-font-bold odz-text-gray-700 odz-mb-3">  </label> <div class="odz-relative"><input type="file" multiple accept="image/*,.pdf,.ai,.eps" class="odz-absolute odz-inset-0 odz-w-full odz-h-full odz-opacity-0 odz-cursor-pointer"> <div class="odz-bg-white odz-border-2 odz-border-dashed odz-border-gray-300 odz-rounded-xl odz-p-6
                                       hover:odz-border-red-300 hover:odz-bg-red-50 odz-transition-colors odz-duration-200"><div class="odz-text-center"><svg class="odz-w-8 odz-h-8 odz-text-gray-400 odz-mx-auto odz-mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <p class="odz-text-sm odz-text-gray-600 odz-mb-1">   </p> <p class="odz-text-xs odz-text-gray-500">, PDF, AI, EPS  </p></div></div></div> <!> <!> <!> <!></div></div>`),zQ=W('<div class="odz-mt-2 odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3 odz-h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span> </span></div>'),CQ=W(`<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"></div> <div class="odz-mt-6"><div class="odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><div class="odz-w-8 odz-h-8 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <div><h3 class="odz-text-lg odz-font-bold odz-text-gray-800">  </h3> <p class="odz-text-sm odz-text-gray-600">    </p></div></div> <textarea class="odz-w-full odz-h-24 odz-p-4 odz-border-2 odz-border-gray-200 odz-rounded-xl
                           odz-resize-none odz-text-sm odz-text-gray-700
                           focus:odz-border-blue-400 focus:odz-ring-2 focus:odz-ring-blue-100 focus:odz-outline-none
                           placeholder:odz-text-gray-400 odz-transition-all odz-duration-200" placeholder=":    ,     ,     "></textarea> <!></div></div></div>`),SQ=W('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2c0-.552.448-1 1-1h8c.552 0 1 .448 1 1v2M7 4h10M7 4l-.5 14c-.051 1.096.846 2 1.5 2h8c.654 0 1.551-.904 1.5-2L17 4"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>      .</p></div></div>'),EQ=W('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">  <span class="odz-text-sm odz-font-normal odz-text-gray-500">   .</span></h1> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas></div> <p class="odz-text-sm odz-text-gray-500 odz-mt-4">          .</p></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function FQ(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=()=>fn(oi,"$shopStore",t);let i=gt(e,"productId",8),a=gt(e,"estimateId",8,void 0);gt(e,"idx",8,void 0);let A=gt(e,"onComplete",8),d=gt(e,"onCancel",8,()=>{}),c=null,u=[],h=Se(),f=Se(),g=Se(),w=Se([]),y=Se(!1);Xn(async()=>{let E=!1;try{await Promise.race([x(),new Promise((P,T)=>setTimeout(()=>T(new Error("  timeout (10)")),1e4))]),E=!0}catch{}try{E&&(await ca(),await new Promise(P=>setTimeout(P,100))),await C()}catch{}const U=P=>{P.detail.productId===i()&&(console.log(" SimplePrint   :",i()),k())};return window.addEventListener("saveSimplePrintState",U),()=>{window.removeEventListener("saveSimplePrintState",U)}}),Xo(()=>{try{if(l(w).length>0){const E=l(w).map(T=>({objectId:T.objectId,title:T.title,printMethod:T.printMethod,savedFileInfo:T.savedFileInfo||T.uploadedFiles.map(R=>({name:R.name,size:R.size,type:R.type,url:R.url,path:R.path}))})),U=o().estimateId||"temp",P=`simplePrint_${i()}_${U}`;sessionStorage.setItem(P,JSON.stringify(E))}}catch{}l(g)&&l(g).destroy()});async function x(){await ca();let E=0;const U=50;for(;E<U&&!l(f);)await new Promise(P=>setTimeout(P,100)),E++;if(!l(f))throw new Error("    .");try{if(c=await I5(i(),s().id),c!=null&&c.id&&(u=await U5(c.id)),c!=null&&c.canvas_json){const P=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,T=P.backgroundImage.width*P.backgroundImage.scaleX,R=P.backgroundImage.height*P.backgroundImage.scaleY;b(g,new Px(l(f),{width:T,height:R,containerElement:l(h)})),l(g).setPrintAreaClickListener(async $=>{ee($)}),await l(g).setCanvasJSON(P),await new Promise($=>setTimeout($,200))}}catch(P){throw P}}async function C(){var E,U;if(l(g)){let P=0;const T=30;for(;P<T;){try{if((((U=(E=l(g)).getObjects)==null?void 0:U.call(E))||[]).length>0)break}catch{}P++,await new Promise(R=>setTimeout(R,100))}}try{const P=a()||o().estimateId||"temp",T=P!=="temp";let R=[];const $=`simplePrint_${i()}_${P}`,j=sessionStorage.getItem($);j&&(R=JSON.parse(j)),R&&Array.isArray(R)&&R.length>0&&(b(y,!0),b(w,R.map(ae=>({objectId:ae.objectId,title:ae.title,printMethod:ae.printMethod||"",uploadedFiles:[],savedFileInfo:ae.savedFileInfo||[]}))),await I(),l(g)&&(await ca(),await new Promise(ae=>setTimeout(ae,50)),G()),b(y,!1))}catch{b(y,!1)}}async function I(){for(const E of l(w))try{if(o().estimateId){const U=await hQ(o().estimateId,E.objectId);if(U.success&&U.files.length>0){b(w,l(w).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:U.files}:P));continue}}if(E.savedFileInfo&&E.savedFileInfo.length>0){const U=E.savedFileInfo.map(P=>({id:Math.random().toString(36).substring(2,8),name:P.name,size:P.size,type:P.type,url:P.url||"#",path:P.path||"",uploadedAt:new Date().toISOString()}));b(w,l(w).map(P=>P.objectId===E.objectId?{...P,uploadedFiles:U}:P))}}catch{if(E.savedFileInfo&&E.savedFileInfo.length>0){const P=E.savedFileInfo.map(T=>({id:Math.random().toString(36).substring(2,8),name:T.name,size:T.size,type:T.type,url:T.url||"#",path:T.path||"",uploadedAt:new Date().toISOString()}));b(w,l(w).map(T=>T.objectId===E.objectId?{...T,uploadedFiles:P}:T))}}}async function N(E,U){try{if(!await lQ(U.path))throw new Error("Storage   .");if(b(w,l(w).map(T=>{var R;return T.objectId===E?{...T,uploadedFiles:T.uploadedFiles.filter($=>$.id!==U.id),savedFileInfo:(R=T.savedFileInfo)==null?void 0:R.filter($=>$.name!==U.name)}:T})),o().estimateId){const T=l(w).find(R=>R.objectId===E);T&&await sy(o().estimateId,E,T.uploadedFiles)}k()}catch(P){b(w,l(w).map(T=>T.objectId===E?{...T,uploadError:`  : ${P instanceof Error?P.message:"   "}`}:T)),setTimeout(()=>{b(w,l(w).map(T=>T.objectId===E?{...T,uploadError:void 0}:T))},3e3)}}function k(){if(!l(y))try{const E=l(w).map(T=>({objectId:T.objectId,title:T.title,printMethod:T.printMethod,savedFileInfo:T.savedFileInfo||T.uploadedFiles.map(R=>({name:R.name,size:R.size,type:R.type,url:R.url,path:R.path}))})),U=o().estimateId||"temp",P=`simplePrint_${i()}_${U}`;if(sessionStorage.setItem(P,JSON.stringify(E)),typeof window<"u")try{const T=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.saveCurrentState"}});window.dispatchEvent(T)}catch{}}catch{}}function ee(E){if(l(w).find($=>$.objectId===E))return;const P=u.find($=>$.object_id===E),T=P?P.title:`${E} `,R={objectId:E,title:T,printMethod:"",uploadedFiles:[],isUploading:!1,uploadProgress:0,uploadError:void 0,savedFileInfo:[]};b(w,[...l(w),R]),G(),k()}function G(){if(l(g))try{l(g).updateAllObjectEnabled(),l(w).forEach(E=>{l(g).updateObjectDisabled(E.objectId)})}catch{}}function H(E){if(b(w,l(w).filter(U=>U.objectId!==E)),Et.cancelPrint(o().index,E),G(),k(),typeof window<"u")try{const U=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.removePrintFromArea"}});window.dispatchEvent(U)}catch{}}function Y(E,U){if(b(w,l(w).map(P=>P.objectId===E?{...P,printMethod:U}:P)),k(),typeof window<"u")try{const P=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.updatePrintMethod"}});window.dispatchEvent(P)}catch{}}async function Be(E,U){const P=Array.from(U);b(w,l(w).map(T=>T.objectId===E?{...T,isUploading:!0,uploadProgress:0,uploadError:void 0}:T));try{const T=await AQ(P,`estimates/${o().estimateId||"temp"}`,(ae,Ee,_e)=>{b(w,l(w).map(Le=>Le.objectId===E?{...Le,uploadProgress:_e}:Le))}),R=T.filter(ae=>ae.success&&ae.file).map(ae=>ae.file),$=T.filter(ae=>!ae.success);if(R.length>0&&o().estimateId){const ae=await sy(o().estimateId,E,R);if(!ae.success)throw new Error(ae.error||"  .")}const j=P.map(ae=>({name:ae.name,size:ae.size,type:ae.type}));if(b(w,l(w).map(ae=>ae.objectId===E?{...ae,uploadedFiles:R,isUploading:!1,uploadProgress:100,uploadError:$.length>0?`${$.length}   `:void 0,savedFileInfo:j}:ae)),k(),typeof window<"u")try{const ae=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"SimplePrint.handleFileUpload"}});window.dispatchEvent(ae)}catch{}if($.length>0){const ae=$.map(Ee=>Ee.error).join(", ")}}catch(T){b(w,l(w).map(R=>R.objectId===E?{...R,isUploading:!1,uploadProgress:0,uploadError:T instanceof Error?T.message:"  ."}:R))}}function M(E){const P=E.target.value;Et.update(T=>({...T,uploadMemo:P}))}Jt(()=>(l(w),l(g),l(y)),()=>{l(w)&&l(g)&&!l(y)&&G()}),mo(),an();var O=EQ(),J=B(m(O),2),re=m(J),he=m(re),ie=m(he);Go(ie,E=>b(f,E),()=>l(f)),Go(he,E=>b(h,E),()=>l(h));var be=B(re,2),te=m(be);{var Z=E=>{var U=CQ(),P=m(U),T=B(m(P),2),R=B(m(T),2),$=m(R),j=B(P,2);er(j,5,()=>l(w),vr,(D,oe,ve)=>{var le=BQ(),ue=m(le),Ie=m(ue),Ne=m(Ie),ze=m(Ne);ze.textContent=ve+1;var Ce=B(Ne,2),pe=m(Ce),Oe=m(pe),ke=B(Ie,2),me=B(ue,2),q=B(m(me),2);er(q,4,()=>["","","",""," "],vr,(ot,ht)=>{var Ge=pQ();const it=at(()=>l(oe).printMethod===ht);var zt=m(Ge);{var xt=Dt=>{var St=fQ();Q(Dt,St)};xe(zt,Dt=>{l(it)&&Dt(xt)})}var Tt=B(zt,2),yt=m(Tt),rt=m(yt);De(()=>{Lr(Ge,`odz-group odz-relative odz-bg-white odz-border-2 odz-rounded-xl odz-p-3 odz-transition-all odz-duration-200
                                           ${(l(it)?"odz-border-red-400 odz-bg-gradient-to-br odz-from-red-50 odz-to-rose-50 odz-shadow-md odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md hover:odz-scale-[1.02]")??""}`),Lr(yt,`odz-text-sm odz-font-semibold ${(l(it)?"odz-text-red-700":"odz-text-gray-700")??""}`),Qe(rt,ht)}),tt("click",Ge,()=>Y(l(oe).objectId,ht)),Q(ot,Ge)});var de=B(me,2),ye=m(de),Fe=B(ye,2),Pe=m(Fe),nt=B(Fe,2);{var qe=ot=>{var ht=gQ(),Ge=m(ht),it=B(m(Ge),2),zt=m(it),xt=B(Ge,2),Tt=m(xt);De(()=>{Qe(zt,`  ... ${l(oe).uploadProgress||0}%`),lr(Tt,"style",`width: ${l(oe).uploadProgress||0}%`)}),Q(ot,ht)};xe(nt,ot=>{l(oe).isUploading&&ot(qe)})}var je=B(nt,2);{var fe=ot=>{var ht=vQ(),Ge=B(m(ht),2),it=m(Ge);De(()=>Qe(it,l(oe).uploadError)),Q(ot,ht)};xe(je,ot=>{l(oe).uploadError&&ot(fe)})}var Me=B(je,2);{var At=ot=>{var ht=bQ(),Ge=m(ht),it=B(m(Ge),2),zt=m(it),xt=B(Ge,2);er(xt,5,()=>l(oe).uploadedFiles,vr,(Tt,yt)=>{var rt=yQ(),Dt=m(rt),St=B(m(Dt),2),Nt=m(St),Je=m(Nt),mt=B(Nt,2),vt=m(mt),$t=B(Dt,2),nr=m($t);{var Ht=Ct=>{var ft=mQ();De(()=>lr(ft,"href",l(yt).url)),Q(Ct,ft)},Kt=Ct=>{var ft=wQ();Q(Ct,ft)};xe(nr,Ct=>{l(yt).url&&l(yt).url!=="#"?Ct(Ht):Ct(Kt,!1)})}var sr=B(nr,2);De(Ct=>{lr(Nt,"title",l(yt).name),Qe(Je,l(yt).name),Qe(vt,Ct)},[()=>uQ(l(yt).size)],at),tt("click",sr,()=>N(l(oe).objectId,l(yt))),Q(Tt,rt)}),De(()=>Qe(zt,`${l(oe).uploadedFiles.length??""}  `)),Q(ot,ht)};xe(Me,ot=>{l(oe).uploadedFiles.length>0&&ot(At)})}var Ve=B(Me,2);{var Ye=ot=>{var ht=xQ(),Ge=ut(ht),it=B(m(Ge),2),zt=m(it),xt=B(Ge,2);er(xt,5,()=>l(oe).savedFileInfo,vr,(Tt,yt)=>{var rt=_Q(),Dt=B(m(rt),2),St=m(Dt),Nt=B(Dt,2),Je=m(Nt);De(mt=>{lr(Dt,"title",l(yt).name),Qe(St,l(yt).name),Qe(Je,`(${mt??""}KB)`)},[()=>Math.round(l(yt).size/1024)],at),Q(Tt,rt)}),De(()=>Qe(zt,`  ${l(oe).savedFileInfo.length??""}    (  )`)),Q(ot,ht)};xe(Ve,ot=>{l(oe).savedFileInfo&&l(oe).savedFileInfo.length>0&&l(oe).uploadedFiles.length===0&&ot(Ye)})}De(()=>{Qe(Oe,l(oe).title),lr(ye,"for",`file-upload-${l(oe).objectId??""}`),lr(Pe,"id",`file-upload-${l(oe).objectId??""}`)}),tt("click",ke,()=>H(l(oe).objectId)),tt("change",Pe,ot=>Be(l(oe).objectId,ot.target.files)),Q(D,le)});var ae=B(j,2),Ee=m(ae),_e=B(m(Ee),2),Le=B(_e,2);{var X=D=>{var oe=zQ(),ve=B(m(oe),2),le=m(ve);De(ue=>Qe(le,`${ue??""} `),[()=>o().uploadMemo.trim().length],at),Q(D,oe)};xe(Le,D=>{o().uploadMemo&&o().uploadMemo.trim().length>0&&D(X)})}De(()=>Qe($,`${l(w).length??""}  `)),Fr(_e,()=>o().uploadMemo,D=>Yt(Et,lt(o).uploadMemo=D,lt(o))),tt("input",_e,M),Q(E,U)},Ae=E=>{var U=SQ();Q(E,U)};xe(te,E=>{l(w).length>0?E(Z):E(Ae,!1)})}var we=B(J,2),z=m(we),F=B(z,2);tt("click",z,function(...E){var U;(U=d())==null||U.apply(this,E)}),tt("click",F,function(...E){var U;(U=A())==null||U.apply(this,E)}),Q(n,O),sn(),r()}const xu="uploads";function IQ(n){try{const e=n.match(/^data:(.+);base64,(.+)$/);if(!e||e.length!==3)return console.error("Invalid base64 data URL format"),null;const t=e[1],r=e[2],o=atob(r),s=new Array(o.length);for(let A=0;A<o.length;A++)s[A]=o.charCodeAt(A);const i=new Uint8Array(s);return{blob:new Blob([i],{type:t}),contentType:t}}catch(e){return console.error("Error converting base64 to Blob:",e),null}}function UQ(n){const e=n.lastIndexOf("."),t=e>0?n.substring(0,e):n,r=e>0?n.substring(e):"";let o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"").replace(/_{2,}/g,"_").replace(/^_|_$/g,"").substring(0,200);o||(o=`file_${Date.now()}`);const s=r.replace(/[^\x00-\x7F]/g,"").toLowerCase();return o+s}async function QQ(n,e){var t;try{let r,o,s={};if(n instanceof File)o=n,s.contentType=n.type;else if(typeof n=="string"&&n.startsWith("data:")){const a=IQ(n);if(!a)throw new Error("Failed to convert base64 string to Blob.");o=a.blob,s.contentType=a.contentType}else throw new Error("Invalid data type provided. Must be a File object or a base64 data URL string.");if(console.log(`Uploading to bucket: ${xu}, path: ${e}, contentType: ${s.contentType}`),r=await pt.storage.from(xu).upload(e,o,{cacheControl:"3600",upsert:!0,contentType:s.contentType}),r.error)throw console.error("Supabase upload error:",r.error),r.error;if(!((t=r.data)!=null&&t.path))throw new Error("Upload successful but no path returned.");const{data:i}=pt.storage.from(xu).getPublicUrl(r.data.path);return i!=null&&i.publicUrl?(console.log("File uploaded successfully:",i.publicUrl),i.publicUrl):(console.warn("Could not get public URL after upload."),null)}catch(r){return console.error("Error in uploadImage function:",r),null}}async function TQ(n){if(!n)return console.error("deleteImage: filePath is required."),!1;console.log(`Attempting to delete file from bucket: ${xu}, path: ${n}`);try{const{data:e,error:t}=await pt.storage.from(xu).remove([n]);if(t)throw console.error("Supabase delete error:",t),t;return e&&e.length>0?(console.log(`File deleted successfully: ${n}`),!0):(console.warn(`File deletion response for ${n} was successful but no data returned. It might have already been deleted or the path was incorrect.`),!0)}catch(e){return console.error("Error in deleteImage function:",e),!1}}var LQ=W('<th class="odz-bg-base-200"> </th>'),PQ=W('<td><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder=" "></td>'),kQ=W('<tr><td><input type="checkbox" class="odz-checkbox"></td><th class="odz-text-sm odz-font-normal odz-whitespace-nowrap"> </th><!></tr>'),OQ=W('<td><div class="odz-flex odz-gap-1"><input class="odz-input odz-input-bordered odz-w-full odz-input-sm" type="text" placeholder="  "> <button class="odz-btn odz-btn-secondary odz-btn-sm"></button></div></td>'),DQ=W('<div class="odz-overflow-x-auto odz-mt-4"><table class="odz-table odz-table-zebra odz-w-full"><thead><tr><th class="odz-bg-base-200 odz-w-10"><input type="checkbox" class="odz-checkbox"></th><th class="odz-bg-base-200"></th><!></tr></thead><tbody><!><tr class="odz-bg-base-100"><td colspan="2" class="odz-font-bold">  </td><!></tr></tbody></table> <div class="odz-mt-4"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>');function NQ(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=Se(),i=Se(),a=Se(),A=Se();let d=gt(e,"onComplete",8,()=>{}),c=gt(e,"nameSheet",28,()=>({})),u=Se({});Xn(()=>{b(u,JSON.parse(JSON.stringify(c())))});let h=Se({}),f=Se({});function g(ie){const be={...l(h)};l(a).forEach(te=>{be[te.id]=ie}),b(h,be)}function w(ie){const be=l(f)[ie]||"",te={...l(u)};l(a).forEach(Z=>{l(h)[Z.id]&&(te[Z.title]||(te[Z.title]={}),te[Z.title][l(y)[ie]||ie]=be)}),b(u,te)}let y=Se({});function x(ie,be,te,Z,Ae){l(u)[be]||zr(u,l(u)[be]={}),zr(u,l(u)[be][Z]=Ae)}function C(){l(a).forEach(ie=>{l(u)[ie.title]||zr(u,l(u)[ie.title]={}),l(A).forEach(be=>{const te=l(y)[be.objectId]||be.objectId;l(u)[ie.title][te]===void 0&&zr(u,l(u)[ie.title][te]="")})}),c(JSON.parse(JSON.stringify(l(u)))),console.log("  :",c()),d()(c())}Jt(()=>o(),()=>{b(s,o().products[o().index])}),Jt(()=>l(s),()=>{var ie;b(i,((ie=l(s))==null?void 0:ie.variants)||[])}),Jt(()=>l(i),()=>{b(a,[...l(i)].sort((ie,be)=>ie.title.localeCompare(be.title)))}),Jt(()=>l(s),()=>{var ie;b(A,((ie=l(s))==null?void 0:ie.prints)||[])}),Jt(()=>(l(A),l(y),wp),()=>{l(A)&&l(A).length>0&&l(A).forEach(async ie=>{if(ie.objectId&&!l(y)[ie.objectId])try{const be=await wp(ie.objectId);b(y,{...l(y),[ie.objectId]:(be==null?void 0:be.title)||ie.objectId})}catch{b(y,{...l(y),[ie.objectId]:ie.objectId})}})}),Jt(()=>(l(a),l(A),l(u),l(y),Vn(c())),()=>{if(l(a).length>0&&l(A).length>0){const ie={...l(u)};l(a).forEach(be=>{ie[be.title]||(ie[be.title]={}),l(A).forEach(te=>{var Ae;const Z=l(y)[te.objectId]||te.objectId;ie[be.title][Z]===void 0&&(ie[be.title][Z]=((Ae=c()[be.title])==null?void 0:Ae[Z])||"")})}),b(u,ie)}}),Jt(()=>(l(a),l(h)),()=>{l(a)&&l(a).length>0&&l(a).forEach(ie=>{l(h)[ie.id]===void 0&&b(h,{...l(h),[ie.id]:!0})})}),mo(),an();var I=DQ(),N=m(I),k=m(N),ee=m(k),G=m(ee),H=m(G),Y=B(G,2);er(Y,1,()=>l(A),vr,(ie,be)=>{var te=LQ(),Z=m(te);De(()=>Qe(Z,l(y)[l(be).objectId]||l(be).objectId)),Q(ie,te)});var Be=B(k),M=m(Be);er(M,1,()=>l(a),vr,(ie,be)=>{var te=kQ(),Z=m(te),Ae=m(Z),we=B(Z),z=m(we),F=B(we);er(F,1,()=>l(A),vr,(E,U)=>{var P=PQ(),T=m(P);De(()=>{var R;return Ym(T,((R=l(u)[l(be).title])==null?void 0:R[l(y)[l(U).objectId]||l(U).objectId])||"")}),tt("input",T,R=>x(l(be).id,l(be).title,l(U).objectId,l(y)[l(U).objectId]||l(U).objectId,R.target.value)),Q(E,P)}),De(()=>Qe(z,l(be).title)),b0(Ae,()=>l(h)[l(be).id],E=>zr(h,l(h)[l(be).id]=E)),Q(ie,te)});var O=B(M),J=B(m(O));er(J,1,()=>l(A),vr,(ie,be)=>{var te=OQ(),Z=m(te),Ae=m(Z),we=B(Ae,2);Fr(Ae,()=>l(f)[l(be).objectId],z=>zr(f,l(f)[l(be).objectId]=z)),tt("click",we,()=>w(l(be).objectId)),Q(ie,te)});var re=B(N,2),he=m(re);De(ie=>Lu(H,ie),[()=>Object.values(l(h)).every(ie=>ie)],at),tt("change",H,ie=>g(ie.target.checked)),tt("click",he,C),Q(n,I),sn(),r()}var MQ=W('<span class="odz-text-info odz-inline-flex odz-items-center odz-gap-1"><!>  ...</span>'),HQ=W('<span class="odz-text-success"> </span>'),jQ=W('<span class="odz-text-error"> </span>'),RQ=W('<span class="odz-text-gray-500"> </span>'),$Q=W('<a target="_blank" rel="noopener noreferrer" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-blue-600 hover:odz-text-blue-800 hover:odz-bg-blue-50" aria-label=" " title="   "><!></a>'),qQ=W('<div class="odz-flex odz-items-center odz-gap-4 odz-p-3 odz-bg-base-200 odz-rounded-lg odz-relative"><div class="odz-flex-1 odz-min-w-0"><p class="odz-font-medium odz-truncate"> </p> <p class="odz-text-sm odz-text-base-content/70"><!> <!></p></div> <!> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" aria-label=" "><!></button></div>'),KQ=W('<div class="odz-mt-4 odz-flex odz-flex-col odz-gap-2"></div>'),VQ=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),GQ=W('<label for="nameSheet" class="odz-label odz-label-text odz-text-sm odz-mt-4 odz-ml-4 odz-font-bold">       .</label> <div class="odz-card-actions odz-p-4 odz-justify-start"><button class="odz-btn odz-btn-secondary odz-min-w-32"> </button></div> <!>',1),WQ=W("<!>  ...",1),XQ=W("<!>  ...",1),YQ=W('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base"> </h2> <div role="presentation"><div class="odz-flex odz-flex-col odz-items-center odz-gap-4"><svg xmlns="http://www.w3.org/2000/svg" class="odz-w-12 odz-h-12 odz-text-base-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <div class="odz-text-base-content"><p class="odz-font-medium">   </p> <label class="odz-btn odz-btn-primary odz-btn-sm odz-mt-2">  <input type="file" multiple class="odz-hidden" accept="image/*"></label></div></div></div> <!> <h2 class="odz-card-title odz-text-base odz-mt-4"> </h2> <textarea name="" id="" rows="5" class="odz-textarea odz-text-sm odz-textarea-bordered odz-textarea-lg odz-w-full odz-mt-4"></textarea></div> <!> <div class="odz-card-actions odz-p-4 odz-justify-center"><button class="odz-btn odz-btn-primary odz-min-w-32"><!></button></div></div>');function JQ(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(oi,"$shopStore",t),s=Se(),i=Se(),a=Se();let A=gt(e,"fileUploadTitle",8," "),d=gt(e,"callback",8),c=gt(e,"uploadMemo",12,""),u=gt(e,"initialFiles",24,()=>[]),h=gt(e,"useNameSheet",8,!1),f=gt(e,"nameSheet",28,()=>({})),g=Se([]),w=Se(),y=Se(!1),x=Se(!1),C=Se(!1);async function I($){const j=Array.from($);for(const ae of j){const Ee=crypto.randomUUID(),_e=UQ(ae.name),Le=`estimate-uploads/${o().id}/${Date.now()}-${_e}`,X={id:Ee,file:ae,status:"uploading",path:Le};b(g,[...l(g),X]);try{const D=await QQ(ae,Le);b(g,l(g).map(oe=>oe.id===Ee?{...oe,status:D?"uploaded":"error",url:D,error:D?null:"Upload failed to return URL"}:oe))}catch(D){console.error("Upload error for file:",ae.name,D),b(g,l(g).map(oe=>oe.id===Ee?{...oe,status:"error",error:D.message||"Unknown upload error"}:oe))}}}function N($){$.preventDefault(),b(y,!0)}function k($){$.preventDefault(),b(y,!1)}function ee($){var ae;$.preventDefault(),b(y,!1);const j=(ae=$.dataTransfer)==null?void 0:ae.files;j&&I(j)}function G($){const j=$.target;j.files&&(I(j.files),j.value="")}async function H($){const j=l(g).find(Ee=>Ee.id===$);if(!j)return;const ae=[...l(g)];if(b(g,l(g).filter(Ee=>Ee.id!==$)),j.status==="uploaded"&&j.path)try{await TQ(j.path)||(console.warn(`Failed to delete file from storage: ${j.path}`),alert("   ."),b(g,ae))}catch(Ee){console.error("Error deleting file from storage:",Ee),alert("     ."),b(g,ae)}else j.status==="uploading"?console.log("Deleting an item that was still uploading."):console.log("Deleting an item not present in storage or in error state.")}function Y(){b(x,!0);const $=l(g).filter(ae=>ae.status==="uploaded"&&ae.url),j={uploadTitle:A(),uploadMemo:c(),files:$.map(ae=>{var Ee;return{name:((Ee=ae.file)==null?void 0:Ee.name)||ae.initialName||"Unknown File",url:ae.url}})};try{d()(j,f())}catch(ae){console.error("Error executing callback:",ae),alert("     .")}finally{b(x,!1)}}Xn(()=>{console.log("upload component mounted"),u()&&u().length>0&&b(g,u().map($=>({id:$.path||crypto.randomUUID(),file:null,initialName:$.name,status:"uploaded",url:$.url,path:$.path,error:null})))}),Jt(()=>l(g),()=>{b(s,l(g).every($=>$.status==="uploaded"||$.status==="error"))}),Jt(()=>l(g),()=>{b(i,l(g).some($=>$.status==="error"))}),Jt(()=>l(g),()=>{b(a,l(g).some($=>$.status==="uploading"))}),mo(),an();var Be=YQ(),M=m(Be),O=B(m(M),2),J=m(O),re=B(m(J),2),he=B(m(re),2),ie=B(m(he));Go(ie,$=>b(w,$),()=>l(w));var be=B(O,2);{var te=$=>{var j=KQ();er(j,5,()=>l(g),ae=>ae.id,(ae,Ee)=>{var _e=qQ(),Le=m(_e),X=m(Le),D=m(X),oe=B(X,2),ve=m(oe);{var le=ke=>{var me=zn();De(q=>Qe(me,`${q??""} MB -`),[()=>(l(Ee).file.size/1024/1024).toFixed(2)],at),Q(ke,me)};xe(ve,ke=>{l(Ee).file&&ke(le)})}var ue=B(ve,2);{var Ie=ke=>{var me=MQ(),q=m(me);rc(q,{class:"odz-animate-spin odz-w-3 odz-h-3"}),Q(ke,me)},Ne=ke=>{var me=Lt(),q=ut(me);{var de=Fe=>{var Pe=HQ();Q(Fe,Pe)},ye=Fe=>{var Pe=Lt(),nt=ut(Pe);{var qe=fe=>{var Me=jQ();De(()=>lr(Me,"title",l(Ee).error||"Unknown error")),Q(fe,Me)},je=fe=>{var Me=RQ();Q(fe,Me)};xe(nt,fe=>{l(Ee).status==="error"?fe(qe):fe(je,!1)},!0)}Q(Fe,Pe)};xe(q,Fe=>{l(Ee).status==="uploaded"?Fe(de):Fe(ye,!1)},!0)}Q(ke,me)};xe(ue,ke=>{l(Ee).status==="uploading"?ke(Ie):ke(Ne,!1)})}var ze=B(Le,2);{var Ce=ke=>{var me=$Q(),q=m(me);t5(q,{class:"odz-w-5 odz-h-5"}),De(()=>lr(me,"href",l(Ee).url)),Q(ke,me)};xe(ze,ke=>{l(Ee).status==="uploaded"&&l(Ee).url&&ke(Ce)})}var pe=B(ze,2),Oe=m(pe);Ou(Oe,{class:"odz-w-5 odz-h-5"}),De(()=>{var ke;Qe(D,((ke=l(Ee).file)==null?void 0:ke.name)||l(Ee).initialName||"Unknown File"),pe.disabled=l(Ee).status==="uploading"}),tt("click",pe,()=>H(l(Ee).id)),Q(ae,_e)}),Q($,j)};xe(be,$=>{l(g)&&l(g).length>0&&$(te)})}var Z=B(be,2),Ae=m(Z),we=B(Z,2),z=B(M,2);{var F=$=>{var j=GQ(),ae=B(ut(j),2),Ee=m(ae),_e=B(ae,2);{var Le=X=>{var D=VQ(),oe=m(D),ve=m(oe),le=m(ve),ue=B(ve,2);NQ(ue,{get nameSheet(){return f()},onComplete:Ie=>{f(Ie),b(C,!1)}}),tt("click",le,()=>b(C,!1)),Q(X,D)};xe(_e,X=>{l(C)&&X(Le)})}tt("click",Ee,()=>b(C,!0)),Q($,j)};xe(z,$=>{h()&&$(F)})}var E=B(z,2),U=m(E),P=m(U);{var T=$=>{var j=zn("");Q($,j)},R=$=>{var j=Lt(),ae=ut(j);{var Ee=Le=>{var X=WQ(),D=ut(X);rc(D,{class:"odz-animate-spin odz-mr-2"}),Q(Le,X)},_e=Le=>{var X=Lt(),D=ut(X);{var oe=le=>{var ue=XQ(),Ie=ut(ue);rc(Ie,{class:"odz-animate-spin odz-mr-2"}),Q(le,ue)},ve=le=>{var ue=zn("");Q(le,ue)};xe(D,le=>{l(a)?le(oe):le(ve,!1)},!0)}Q(Le,X)};xe(ae,Le=>{l(x)?Le(Ee):Le(_e,!1)},!0)}Q($,j)};xe(P,$=>{l(g).length===0&&!l(x)&&!l(a)?$(T):$(R,!1)})}De(()=>{Lr(O,`odz-border-2 odz-border-dashed odz-rounded-lg odz-p-5 odz-text-center odz-mt-4 odz-transition-colors ${(l(y)?"odz-border-primary odz-bg-primary/5":"odz-border-base-300")??""}`),Qe(Ae,A()),lr(we,"placeholder",A()),U.disabled=l(x)||l(a)}),tt("change",ie,G),tt("dragover",O,N),tt("dragleave",O,k),tt("drop",O,ee),Fr(we,c),tt("click",U,Y),Q(n,Be),sn(),r()}async function ZQ(n){const{data:e,error:t}=await pt.from("color_groups").select("*").eq("id",n).single();if(t)throw t;return e}var eT=W('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),tT=W('<div class="odz-tooltip odz-tooltip-secondary"><button><!></button></div>'),rT=W('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2">  </h3> <div class="odz-flex odz-items-center odz-gap-2"><input type="color" class="odz-h-10 odz-w-10 odz-p-0.5 odz-rounded-full odz-cursor-pointer odz-border odz-border-base-300 [&amp;::-webkit-color-swatch-wrapper]:odz-p-0 [&amp;::-webkit-color-swatch]:odz-rounded-full [&amp;::-moz-color-swatch]:odz-rounded-full"> <input type="text" placeholder="   " class="odz-input odz-input-bordered odz-flex-1"> <button class="odz-btn odz-btn-primary"></button></div></div>'),nT=W('<div class="odz-flex odz-items-center odz-gap-2 odz-bg-base-200 odz-rounded-full odz-px-3 odz-py-1"><div class="odz-w-4 odz-h-4 odz-rounded-full"></div> <span class="odz-text-sm"> </span> <button class="odz-btn odz-btn-ghost odz-btn-xs odz-rounded-full"></button></div>'),oT=W('<div class="odz-mt-4"><h3 class="odz-text-sm odz-font-medium odz-mb-2"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),sT=W('<div class="odz-card odz-bg-base-100"><div class="odz-card-body odz-p-4"><h2 class="odz-card-title odz-text-base odz-mb-4">  <span class="odz-text-sm odz-font-normal"> </span></h2> <div class="odz-flex odz-flex-wrap odz-gap-2"></div> <!> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><button class="odz-btn odz-btn-primary odz-w-full"></button></div></div> <!> <!>',1);function iT(n,e){on(e,!1);let t=gt(e,"colorGroupId",8,null),r=gt(e,"selectedTemplateId",8,null),o=gt(e,"callback",8),s=gt(e,"selectedColors",28,()=>[]),i=Se(!1),a=Se([]),A=Se(0),d=Se(!1),c=Se("#000000"),u=Se(""),h=Se(!1),f=Se("");async function g(){if(t()){b(i,!0);try{const te=await ZQ(t());b(a,(te==null?void 0:te.colors)||[]),b(d,(te==null?void 0:te.use_custom)||!1)}finally{b(i,!1)}}}async function w(){if(!r())return;const te=await zc(r());console.log({templateProduct:te}),b(A,Math.max(...te.template_product_variants.map(Z=>Z.color_count))),console.log({colorCount:l(A)})}function y(te){if(s().findIndex(Ae=>Ae.hex===te.hex)===-1){if(s().length>=l(A))return;s([...s(),te])}else s(s().filter(Ae=>Ae.hex!==te.hex))}function x(te){const Z=te.replace("#",""),Ae=parseInt(Z.substr(0,2),16),we=parseInt(Z.substr(2,2),16),z=parseInt(Z.substr(4,2),16);return(Ae*299+we*587+z*114)/1e3<128}function C(){if(s().length===0){b(h,!0),b(f,"  .");return}console.log("selectedColors",s()),o()(s())}Xn(async()=>{await g(),await w()}),an();var I=sT(),N=ut(I),k=m(N),ee=m(k),G=B(m(ee)),H=m(G),Y=B(ee,2);er(Y,5,()=>l(a),vr,(te,Z)=>{var Ae=tT(),we=m(Ae),z=m(we);{var F=E=>{var U=eT(),P=m(U);De(T=>lr(P,"stroke",T),[()=>x(l(Z).hex)?"white":"black"],at),Q(E,U)};xe(z,E=>{s().some(U=>U.hex===l(Z).hex)&&E(F)})}De(E=>{lr(Ae,"data-tip",l(Z).name),Lr(we,`odz-relative odz-w-10 odz-h-10 odz-rounded-full odz-transition-all odz-border hover:odz-scale-110 ${E??""}`),lr(we,"style",`background-color: ${l(Z).hex??""};`)},[()=>s().some(E=>E.hex===l(Z).hex)?"odz-border-primary odz-scale-110":"odz-border"],at),tt("click",we,()=>y(l(Z))),Q(te,Ae)});var Be=B(Y,2);{var M=te=>{var Z=rT(),Ae=B(m(Z),2),we=m(Ae),z=B(we,2),F=B(z,2);Fr(we,()=>l(c),E=>b(c,E)),Fr(z,()=>l(u),E=>b(u,E)),tt("click",F,()=>{if(l(u).trim()){const E={name:l(u),hex:l(c)};y(E),b(u,""),b(c,"#000000")}}),Q(te,Z)};xe(Be,te=>{l(d)&&te(M)})}var O=B(Be,2);{var J=te=>{var Z=oT(),Ae=B(m(Z),2);er(Ae,5,s,vr,(we,z)=>{var F=nT(),E=m(F),U=B(E,2),P=m(U),T=B(U,2);De(()=>{lr(E,"style",`background-color: ${l(z).hex??""};`),Qe(P,l(z).name)}),tt("click",T,()=>y(l(z))),Q(we,F)}),Q(te,Z)};xe(O,te=>{s().length>0&&te(J)})}var re=B(k,2),he=m(re),ie=B(N,2);Sc(ie,{get isLoading(){return l(i)}});var be=B(ie,2);Cc(be,{get isOpen(){return l(h)},set isOpen(te){b(h,te)},get message(){return l(f)},set message(te){b(f,te)},$$legacy:!0}),De(()=>Qe(H,`(${s().length??""}/${l(A)??""}   .)`)),tt("click",he,C),Q(n,I),sn()}var aT=W('<li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"> </button></li>'),AT=W('<div class="odz-text-sm odz-breadcrumbs odz-mb-6"><ul><li><button class="odz-btn odz-btn-ghost hover:odz-text-primary-focus"></button></li> <!></ul></div>'),lT=W('<figure><img class="odz-h-48 odz-w-full odz-object-cover"></figure>'),dT=W('<div class="odz-h-48 odz-bg-base-200 odz-flex odz-items-center odz-justify-center"><span class="odz-text-base-content/50"> </span></div>'),cT=W('<p class="odz-text-sm odz-text-sm odz-text-base-content/70"> </p>'),uT=W('<button class="odz-btn odz-btn-outline odz-w-full odz-mb-2"> </button>'),hT=W('<div class="odz-card odz-bg-base-100 odz-shadow hover:odz-shadow-lg odz-rounded-lg odz-transition-shadow odz-cursor-pointer"><!> <div class="odz-card-body odz-p-5"><h2 class="odz-card-title odz-text-base"> </h2> <!></div> <div class="odz-card-actions odz-justify-end odz-p-5"><!> <button class="odz-btn odz-btn-primary odz-w-full"></button></div></div>'),fT=W('<div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"></div>'),pT=W('<div class="p-4"><h1 class="odz-text-2xl odz-font-bold odz-mb-6"> </h1> <!> <!></div> <!>',1);function gT(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t);let s=gt(e,"objectId",12),i=gt(e,"isTemplateModal",12),a=gt(e,"updateObjectDisabled",8),A=gt(e,"selectedPrintIndex",12),d=gt(e,"productId",8,null),c=gt(e,"estimateId",8,void 0),u=Se(!1),h=Se(null),f=Se([]),g=Se([]),w=Se(!1),y=Se(!1),x=Se(null),C="",I=Se({uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}}),N=null;function k(we){if(d()){const z=we.products.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===d()});if(z!==-1)return z}return we.index??0}async function ee(we){var E,U;const z=await C5(we.id);if(b(f,await ih(we.id)),console.log("selectTemplate called:",{template:we,selectedPrintIndex:A()}),b(h,{...z}),l(h).is_last){b(w,l(h).use_file_upload),b(y,l(h).use_color),b(x,l(h).color_group_id);const P=await zc(l(h).id),T=o(),R=k(T),$=T.products[R],j=A()!==null?(E=$==null?void 0:$.prints)==null?void 0:E[A()]:(U=$==null?void 0:$.prints)==null?void 0:U.find(ae=>ae.objectId===s());N={...j?{...j}:{},parentTemplates:l(f),template:{...we,templateProduct:P},objectId:s(),title:C},j!=null&&j.uploads?(zr(I,l(I).uploads=j.uploads),zr(I,l(I).nameSheet=j.nameSheet||{})):(zr(I,l(I).uploads=null),zr(I,l(I).nameSheet={})),j!=null&&j.colors?zr(I,l(I).colors=j.colors):zr(I,l(I).colors=null),l(w)||(N={...N,uploads:null,nameSheet:{}},zr(I,l(I).uploads=null),zr(I,l(I).nameSheet={})),l(y)||(N={...N,colors:null},zr(I,l(I).colors=null)),!l(w)&&!l(y)&&(await O(),M())}else{b(w,!1),b(y,!1);const P=await S5(we.id);b(g,P)}}async function G(){H()}async function H(){var we,z,F;b(u,!0),b(w,!1),b(y,!1),b(f,[]),N=null;try{if(A()!==null){const U=k(o()),P=o().products[U],T=(we=P==null?void 0:P.prints)==null?void 0:we[A()];T?(console.log({print:T}),T.uploads&&zr(I,l(I).uploads=T.uploads),T.colors&&zr(I,l(I).colors=T.colors),(z=T.uploads)!=null&&z.uploadMemo&&zr(I,l(I).uploadMemo=T.uploads.uploadMemo),T.nameSheet&&zr(I,l(I).nameSheet=T.nameSheet)):A(null)}const E=await wp(s());if(b(g,E.process_print_area_templates.map(({template:U})=>U)),C=E.title,A()!==null){const U=k(o()),P=o().products[U],T=(F=P==null?void 0:P.prints)==null?void 0:F[A()];T!=null&&T.template}}catch(E){console.error(E)}finally{console.log("isUpload",l(w)),b(u,!1)}}async function Y(we,z){if(b(w,!1),zr(I,l(I).uploads=we),zr(I,l(I).nameSheet=z),!N){console.warn("selectUpload: pendingPrintData ");return}N={...N,uploads:we,nameSheet:z},l(y)===!1&&(await O(),M())}async function Be(we){if(b(y,!1),zr(I,l(I).colors=we),!N){console.warn("selectColor: pendingPrintData ");return}N={...N,colors:we},await O(),M()}function M(){!l(w)&&!l(y)&&(i(!1),s(null),N=null,b(I,{uploads:null,memo:"",colors:null,uploadMemo:"",nameSheet:{}})),a()()}async function O(){var z;if(!N)return;Et.update(F=>{const E=k(F),U=[...F.products];if(!U[E])return F;const P=[...U[E].prints||[]];if(A()===null){const T=P.findIndex(R=>R.objectId===N.objectId);T!==-1?P[T]=N:P.push(N)}else P[A()]=N;return U[E]={...U[E],prints:P},{...F,products:U}});const we=k(o());if(await Et.calculatePrintPrice(we),await new Promise(F=>setTimeout(F,50)),typeof window<"u"&&d())try{const F=((z=o().products[we])==null?void 0:z.prints)||[],E=c()||o().estimateId||"temp",U=`detailedPrint_${d()}_${E}`,P=JSON.stringify(F);window.sessionStorage.setItem(U,P),console.log(" Templates.svelte - SessionStorage :",{key:U,printsCount:F.length,productId:d(),estimateId:E,mode:c()?"Edit":"Create"});const T=new CustomEvent("detailedPrintUpdate",{detail:{productId:d(),timestamp:Date.now(),source:"Templates",estimateId:E}});window.dispatchEvent(T),console.log(" Templates.svelte -    :",{productId:d(),estimateId:E,timestamp:Date.now()})}catch(F){console.error(" Templates.svelte - SessionStorage  :",F)}console.log("Decision point - finalized",{selectedPrintIndex:A(),objectId:N.objectId}),N=null}Xn(async()=>{H()}),an();var J=pT(),re=ut(J),he=B(m(re),2);{var ie=we=>{var z=AT(),F=m(z),E=m(F),U=m(E),P=B(E,2);er(P,1,()=>l(f),vr,(T,R)=>{var $=aT(),j=m($),ae=m(j);De(()=>Qe(ae,l(R).name)),tt("click",j,cv(()=>ee(l(R)))),Q(T,$)}),tt("click",U,cv(()=>G())),Q(we,z)};xe(he,we=>{l(h)&&we(ie)})}var be=B(he,2);{var te=we=>{const z=at(()=>{var P;return(P=l(h))==null?void 0:P.file_upload_title}),F=at(()=>l(I).uploadMemo||""),E=at(()=>{var P;return((P=l(I).uploads)==null?void 0:P.files)||[]}),U=at(()=>{var P;return(P=l(h))==null?void 0:P.use_name_list});JQ(we,{get fileUploadTitle(){return l(z)},callback:Y,get uploadMemo(){return l(F)},get initialFiles(){return l(E)},get nameSheet(){return l(I).nameSheet},get useNameSheet(){return l(U)}})},Z=we=>{var z=Lt(),F=ut(z);{var E=P=>{const T=at(()=>{var $;return($=l(h))==null?void 0:$.id}),R=at(()=>l(I).colors||[]);iT(P,{get colorGroupId(){return l(x)},get selectedTemplateId(){return l(T)},callback:Be,get selectedColors(){return l(R)}})},U=P=>{var T=fT();er(T,5,()=>l(g),vr,(R,$)=>{var j=hT(),ae=m(j);{var Ee=ze=>{var Ce=lT(),pe=m(Ce);De(()=>{lr(pe,"src",l($).image_url),lr(pe,"alt",l($).name)}),Q(ze,Ce)},_e=ze=>{var Ce=dT();Q(ze,Ce)};xe(ae,ze=>{l($).image_url?ze(Ee):ze(_e,!1)})}var Le=B(ae,2),X=m(Le),D=m(X),oe=B(X,2);{var ve=ze=>{var Ce=cT(),pe=m(Ce);De(()=>Qe(pe,l($).description)),Q(ze,Ce)};xe(oe,ze=>{l($).description&&ze(ve)})}var le=B(Le,2),ue=m(le);{var Ie=ze=>{var Ce=uT();tt("click",Ce,cv(()=>window.open(l($).detail_url,"_blank","width=800,height=600"))),Q(ze,Ce)};xe(ue,ze=>{l($).detail_url&&ze(Ie)})}var Ne=B(ue,2);De(()=>Qe(D,l($).name)),tt("click",Ne,()=>ee(l($))),Q(R,j)}),Q(P,T)};xe(F,P=>{l(y)?P(E):P(U,!1)},!0)}Q(we,z)};xe(be,we=>{l(w)?we(te):we(Z,!1)})}var Ae=B(re,2);Sc(Ae,{get isLoading(){return l(u)},set isLoading(we){b(u,we)},$$legacy:!0}),Q(n,J),sn(),r()}var vT=W('<div class="odz-alert odz-alert-error odz-flex odz-items-center odz-justify-between"><div class="odz-flex odz-items-center odz-gap-3"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <button class="odz-btn odz-btn-sm odz-btn-outline"> </button></div>'),mT=W('<div class="odz-absolute odz-inset-0 odz-flex odz-items-center odz-justify-center"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-blue-500 odz-animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="odz-text-gray-600">  ...</span></div></div>'),wT=W('<img class="odz-h-6 odz-w-6 odz-rounded-md odz-object-cover">'),yT=W('<div class="odz-inline-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2"><!> <span class="odz-text-xs odz-font-medium odz-text-slate-700"> </span></div>'),bT=W('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"> </p> <div class="odz-flex odz-flex-wrap odz-gap-2"></div></div>'),_T=W('<span class="odz-inline-flex odz-items-center odz-gap-1 odz-rounded-full odz-bg-slate-100 odz-px-2 odz-py-1"><span class="odz-h-3.5 odz-w-3.5 odz-rounded-full odz-border odz-border-slate-300"></span> <span class="odz-text-[11px] odz-text-slate-600"> </span></span>'),xT=W('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-flex-wrap odz-gap-1.5"></div></div>'),BT=W('<div class="odz-space-y-2"><p class="odz-text-[11px] odz-font-medium odz-uppercase odz-tracking-wide odz-text-slate-400"></p> <div class="odz-flex odz-items-center odz-gap-2 odz-rounded-lg odz-border odz-border-slate-200 odz-bg-slate-50 odz-px-3 odz-py-2 odz-text-xs odz-text-slate-600"><svg class="odz-h-3.5 odz-w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 9.828m-2.828-2.828L16 5l3 3-1.828 1.828m-2.828-2.828L9 5l3 3"></path></svg> <span> </span></div></div>'),zT=W('<div class="odz-grid odz-gap-3 sm:odz-grid-cols-2"><!> <!></div>'),CT=W('<div class="odz-rounded-2xl odz-border odz-border-slate-200 odz-bg-white odz-shadow-sm odz-transition-shadow hover:odz-shadow-md"><div class="odz-flex odz-items-start odz-justify-between odz-gap-4 odz-border-b odz-border-slate-100 odz-bg-slate-50 odz-rounded-t-2xl odz-px-5 odz-py-4"><div class="odz-space-y-1"><span class="odz-inline-flex odz-items-center odz-gap-2 odz-text-xs odz-font-semibold odz-text-slate-500"><span class="odz-inline-flex odz-h-5 odz-w-5 odz-items-center odz-justify-center odz-rounded-full odz-bg-slate-200 odz-text-[10px] odz-font-bold odz-text-slate-700"></span>  </span> <h3 class="odz-text-base odz-font-semibold odz-text-slate-900"> </h3></div> <div class="odz-flex odz-shrink-0 odz-items-center odz-gap-2"><button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button></div></div> <div class="odz-space-y-4 odz-p-5"><!> <!></div></div>'),ST=W('<div><div class="odz-flex odz-items-center odz-gap-3 odz-mb-6"><div class="odz-w-10 odz-h-10 odz-bg-blue-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-5 odz-h-5 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h2 class="odz-text-xl odz-font-bold odz-text-gray-800">  </h2> <p class="odz-text-sm odz-text-gray-600"> </p></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-5"></div></div>'),ET=W('<div><div class="odz-text-center odz-text-gray-500 odz-py-10 odz-border odz-border-dashed odz-border-gray-300 odz-rounded-2xl"><svg class="odz-w-12 odz-h-12 odz-text-gray-300 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> <p class="odz-text-lg odz-font-medium odz-mb-2">  </p> <p class="odz-text-sm"><span class="lg:odz-hidden"> </span><span class="odz-hidden lg:odz-inline"> </span>         .</p></div></div>'),FT=W('<div class="odz-mb-4"><h2 class="odz-text-lg odz-font-semibold"> </h2></div>'),IT=W('<dialog id="detailed-print-template-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl max-h-100 overflow-y-auto"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!> <!></div></dialog>'),UT=W('<div class="odz-flex odz-flex-col odz-gap-6"><h1 class="odz-text-xl odz-font-bold odz-my-3 odz-flex odz-items-center odz-gap-5">   <span class="odz-text-sm odz-font-normal odz-text-gray-500">     .</span></h1> <!> <div class="odz-flex odz-flex-col lg:odz-flex-row odz-gap-6"><div class="odz-flex-1 lg:odz-w-1/2"><div><div class="odz-relative odz-w-full odz-bg-gray-50 odz-border-2 odz-border-gray-200 odz-rounded-xl" style="min-width: 200px; min-height: 400px;"><canvas class="odz-absolute odz-top-0 odz-left-0 odz-w-full odz-h-full odz-rounded-xl" style="image-rendering: pixelated;"></canvas> <!></div> <p class="odz-text-sm odz-text-gray-500">         .</p></div></div> <div class="odz-flex-1 lg:odz-w-1/2"><!></div></div></div> <div class="odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div> <!>',1);function QT(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(oi,"$shopStore",t),s=()=>fn(Et,"$estimateStore",t);let i=gt(e,"productId",8),a=gt(e,"estimateId",8,void 0),A=gt(e,"onComplete",8),d=gt(e,"onCancel",8,()=>{}),c=null,u=[],h=Se(),f=Se(),g=Se(),w=Se(!0),y=Se(null),x=Se(!1),C=Se(null),I=Se(null),N=Se(""),k=Se(null),ee=Se([]),G=Se(!1),H=Se(""),Y=Se(!1),Be=Se(null),M=Se(""),O=Se(null),J=Se(!1),re=Se(!1),he=Se(!1);const ie=".main-estimate-modal-box";function be(){if(typeof window<"u")try{const de=new CustomEvent("detailedPrintUpdate",{detail:{productId:i(),timestamp:Date.now(),source:"DetailedPrint"}});window.dispatchEvent(de),console.log(" DetailedPrint -    :",{productId:i(),timestamp:Date.now()})}catch(de){console.error(" DetailedPrint -    :",de)}}Xn(async()=>{try{await R(),await te(),F()}finally{b(re,!0)}}),Xo(()=>{var de;(de=l(g))==null||de.destroy(),T()});async function te(){try{b(w,!0),b(y,null),await Z(),await ca(),F()}catch(de){console.error("DetailedPrint initialize failed:",de),b(y,de instanceof Error?de.message:"   .")}finally{b(w,!1)}}async function Z(){await ca();let de=0;const ye=50;for(;!l(f)&&de<ye;)await new Promise(qe=>setTimeout(qe,100)),de++;if(!l(f))throw new Error("    .");if(c=await I5(i(),o().id),c!=null&&c.id&&(u=await U5(c.id)),!(c!=null&&c.canvas_json))throw new Error("    .");const Fe=typeof c.canvas_json=="string"?JSON.parse(c.canvas_json):c.canvas_json,Pe=Fe.backgroundImage.width*Fe.backgroundImage.scaleX,nt=Fe.backgroundImage.height*Fe.backgroundImage.scaleY;b(g,new Px(l(f),{width:Pe,height:nt,containerElement:l(h)})),l(g).setPrintAreaClickListener(qe=>{Ae(qe)}),await l(g).setCanvasJSON(Fe)}function Ae(de){var nt,qe,je;if(!l(g))return;b(C,de),b(N,((nt=u.find(fe=>fe.object_id===de))==null?void 0:nt.title)||`${de} `);const Fe=(((je=(qe=l(g)).getObjects)==null?void 0:je.call(qe))||[]).find(fe=>{var Me;return((Me=fe==null?void 0:fe.data)==null?void 0:Me.objectId)===de});Fe?b(k,{x:Math.round(Fe.left||0),y:Math.round(Fe.top||0),width:Math.round((Fe.width||0)*(Fe.scaleX||1)),height:Math.round((Fe.height||0)*(Fe.scaleY||1))}):b(k,null);const Pe=l(ee).findIndex(fe=>fe.objectId===de);b(I,Pe>=0?Pe:null),b(x,!0),we()}function we(){const de=document.querySelector(ie);de&&(de.scrollTop=0)}function z(de){if(!de)return;const ye=s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()});if(ye===-1){console.warn("DetailedPrint cancelPrint:     .",{productId:i()});return}Et.cancelPrint(ye,de),F(),T(),be()}function F(){l(g)&&(l(g).updateAllObjectEnabled(),l(ee).forEach(de=>{de.objectId&&l(g).updateObjectDisabled(de.objectId)}))}function E(de){const ye=l(ee)[de];ye!=null&&ye.objectId&&(b(C,ye.objectId),b(I,de),b(N,ye.title||`${ye.objectId} `),b(k,null),b(x,!0),we())}function U(){b(x,!1)}function P(){const de=a()||"temp";return`detailedPrint_${i()}_${de}`}function T(de){if(!(typeof window>"u"))try{const ye=de??JSON.stringify(l(ee)??[]),Fe=P();window.sessionStorage.setItem(Fe,ye),b(H,ye);try{b(O,JSON.parse(ye)),console.log("DetailedPrint session ",{storageKey:Fe,printsCount:Array.isArray(l(O))?l(O).length:"invalid"}),be();try{xr.selectPrintMethod("detailed")}catch(Pe){console.warn("fixedEstimateStore selectPrintMethod :",Pe)}try{so.selectPrintMethod(i(),"detailed")}catch(Pe){console.warn("extendedProductDataStore selectPrintMethod :",Pe)}}catch(Pe){console.error("DetailedPrint fallback  :",Pe)}}catch(ye){console.error("DetailedPrint session  :",ye)}}async function R(){var nt,qe,je,fe,Me,At,Ve;if(typeof window>"u")return;const ye=(a()||"temp")!=="temp";let Fe=null,Pe=null;if(ye&&console.log(" Edit mode detected - will use sessionStorage populated from DB"),!Fe||Fe.length===0){const Ye=P();if(Pe=window.sessionStorage.getItem(Ye),Pe)try{console.log(" Raw sessionStorage data:",Pe),Fe=JSON.parse(Pe),console.log(" Parsed printsToRestore:",Fe),console.log(" First print colors detail:",{exists:Fe.length>0,colorsArray:(nt=Fe[0])==null?void 0:nt.colors,colorsLength:(je=(qe=Fe[0])==null?void 0:qe.colors)==null?void 0:je.length,colorsType:typeof((fe=Fe[0])==null?void 0:fe.colors),isArray:Array.isArray((Me=Fe[0])==null?void 0:Me.colors),allColors:(Ve=(At=Fe[0])==null?void 0:At.colors)==null?void 0:Ve.map((ot,ht)=>({idx:ht,name:ot.name,hex:ot.hex}))}),console.log(" Using sessionStorage detailed prints:",{printsCount:Fe.length,colorsPerPrint:Fe.map((ot,ht)=>{var Ge;return{printIndex:ht,colorsCount:((Ge=ot.colors)==null?void 0:Ge.length)||0,colors:ot.colors,objectId:ot.objectId}})})}catch(ot){console.error("Failed to parse sessionStorage prints:",ot)}}if(!(!Fe||!Array.isArray(Fe)))try{const Ye=Fe;b(O,[...Ye]),b(ee,[...Ye]),console.log(" sessionFallbackPrints updated:",{printsCount:l(O).length,colors:l(O).map(Ge=>Ge.colors)});const ht=kn(Et).products.findIndex(Ge=>{var it;return((it=Ge==null?void 0:Ge.product)==null?void 0:it.id)===i()});if(b(H,Pe),ht===-1){console.warn("DetailedPrint   :    .",{productId:i()}),b(Be,Ye),b(M,Pe),b(Y,!0);return}if(b(Y,!0),$(Ye),await ca(),Array.isArray(Ye)&&Ye.length>0){try{xr.selectPrintMethod("detailed")}catch(Ge){console.warn("fixedEstimateStore selectPrintMethod  (restore):",Ge)}try{so.selectPrintMethod(i(),"detailed")}catch(Ge){console.warn("extendedProductDataStore selectPrintMethod  (restore):",Ge)}be()}}catch(Ye){console.error("DetailedPrint   :",Ye)}finally{l(Be)||b(Y,!1)}}function $(de){if(!de||de.length===0)return;const ye=s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()});if(ye===-1){console.warn("DetailedPrint applyPrintsToStore:    .",{productId:i()});return}b(J,!0),console.log("DetailedPrint applyPrintsToStore ",{productId:i(),printsCount:de.length}),b(he,!1),Et.update(Fe=>{const Pe=[...Fe.products];return Pe[ye]={...Pe[ye],prints:de},{...Fe,products:Pe,index:ye}}),b(H,JSON.stringify(de??[])),ca().then(()=>{b(J,!1)})}Jt(()=>(l(O),s(),l(ee)),()=>{var de;l(O)&&l(O).length>0&&(((de=s())==null?void 0:de.estimateId)||"temp")!=="temp"&&(b(ee,[...l(O)]),console.log(" Edit  (reactive): Supabase DB  :",{printsCount:l(ee).length,colors:l(ee).map(Pe=>{var nt,qe;return{colorsCount:((nt=Pe.colors)==null?void 0:nt.length)||0,colorNames:(qe=Pe.colors)==null?void 0:qe.map(je=>je.name)}})}))}),Jt(()=>(s(),l(O),Vn(i())),()=>{var Pe;if(!((((Pe=s())==null?void 0:Pe.estimateId)||"temp")!=="temp"&&l(O)&&l(O).length>0)){const nt=s().products.find(je=>{var fe;return((fe=je==null?void 0:je.product)==null?void 0:fe.id)===i()}),qe=(nt==null?void 0:nt.prints)??[];qe.length>0?b(ee,[...qe]):l(O)&&l(O).length>0&&b(ee,[...l(O)])}}),Jt(()=>(l(Be),s(),Vn(i()),l(M),ca),()=>{if(l(Be)&&s().products.findIndex(Fe=>{var Pe;return((Pe=Fe==null?void 0:Fe.product)==null?void 0:Pe.id)===i()})!==-1){const Fe=l(Be),Pe=l(M)||JSON.stringify(Fe??[]);b(Y,!0),$(Fe),b(H,Pe),b(Be,null),b(M,""),ca().then(()=>{b(Y,!1)})}}),Jt(()=>(l(Y),l(J),l(O),s(),Vn(i())),()=>{var de;if(!l(Y)&&!l(J)&&((de=l(O))!=null&&de.length)){const ye=s().products.find(Pe=>{var nt;return((nt=Pe==null?void 0:Pe.product)==null?void 0:nt.id)===i()}),Fe=(ye==null?void 0:ye.prints)??[];(!Fe||Fe.length===0)&&$(l(O))}}),Jt(()=>(l(x),l(Y),l(J),l(ee),l(H)),()=>{if(l(x)&&!l(Y)&&!l(J))try{JSON.stringify(l(ee)??[])!==l(H)&&b(he,!0)}catch(de){console.error("DetailedPrint    :",de)}}),Jt(()=>l(g),()=>{l(g)&&F()}),Jt(()=>l(x),()=>{b(G,l(x))}),Jt(()=>(l(x),l(G),l(he),l(re)),()=>{!l(x)&&l(G)&&(b(C,null),b(I,null),b(N,""),b(k,null),l(he)&&l(re)&&T(),b(he,!1),F())}),Jt(()=>(l(re),l(x),l(Y),l(J),l(ee),l(H)),()=>{if(l(re)&&!l(x)&&!l(Y)&&!l(J))try{const de=JSON.stringify(l(ee)??[]);de!==l(H)&&T(de)}catch(de){console.error("DetailedPrint   :",de)}}),mo(),an();var j=UT(),ae=ut(j),Ee=B(m(ae),2);{var _e=de=>{var ye=vT(),Fe=m(ye),Pe=B(m(Fe),2),nt=m(Pe),qe=B(Fe,2);De(()=>Qe(nt,l(y))),tt("click",qe,te),Q(de,ye)};xe(Ee,de=>{l(y)&&de(_e)})}var Le=B(Ee,2),X=m(Le),D=m(X),oe=m(D),ve=m(oe);Go(ve,de=>b(f,de),()=>l(f));var le=B(ve,2);{var ue=de=>{var ye=mT();Q(de,ye)};xe(le,de=>{l(w)&&!l(y)&&de(ue)})}Go(oe,de=>b(h,de),()=>l(h));var Ie=B(X,2),Ne=m(Ie);{var ze=de=>{var ye=ST(),Fe=m(ye),Pe=B(m(Fe),2),nt=B(m(Pe),2),qe=m(nt),je=B(Fe,2);er(je,5,()=>l(ee),vr,(fe,Me,At)=>{var Ve=CT(),Ye=m(Ve),ot=m(Ye),ht=m(ot),Ge=m(ht);Ge.textContent=At+1;var it=B(ht,2),zt=m(it),xt=B(ot,2),Tt=m(xt),yt=B(Tt,2),rt=B(Ye,2),Dt=m(rt);{var St=mt=>{var vt=bT(),$t=B(m(vt),2);er($t,5,()=>l(Me).parentTemplates,vr,(nr,Ht)=>{var Kt=yT(),sr=m(Kt);{var Ct=Vt=>{var ir=wT();De(()=>{lr(ir,"src",l(Ht).image_url),lr(ir,"alt",l(Ht).name)}),Q(Vt,ir)};xe(sr,Vt=>{l(Ht).image_url&&Vt(Ct)})}var ft=B(sr,2),Ot=m(ft);De(()=>Qe(Ot,l(Ht).name)),Q(nr,Kt)}),Q(mt,vt)};xe(Dt,mt=>{var vt;(vt=l(Me).parentTemplates)!=null&&vt.length&&mt(St)})}var Nt=B(Dt,2);{var Je=mt=>{var vt=zT(),$t=m(vt);{var nr=sr=>{var Ct=xT(),ft=B(m(Ct),2);er(ft,5,()=>l(Me).colors,vr,(Ot,Vt)=>{var ir=_T(),cr=m(ir),dr=B(cr,2),br=m(dr);De(()=>{lr(cr,"style",`background-color: ${l(Vt).hex??""};`),Qe(br,l(Vt).name)}),Q(Ot,ir)}),Q(sr,Ct)};xe($t,sr=>{var Ct;(Ct=l(Me).colors)!=null&&Ct.length&&sr(nr)})}var Ht=B($t,2);{var Kt=sr=>{var Ct=BT(),ft=B(m(Ct),2),Ot=B(m(ft),2),Vt=m(Ot);De(()=>Qe(Vt,` ${l(Me).uploads.files.length??""}`)),Q(sr,Ct)};xe(Ht,sr=>{var Ct,ft;(ft=(Ct=l(Me).uploads)==null?void 0:Ct.files)!=null&&ft.length&&sr(Kt)})}Q(mt,vt)};xe(Nt,mt=>{var vt,$t,nr;((vt=l(Me).colors)!=null&&vt.length||(nr=($t=l(Me).uploads)==null?void 0:$t.files)!=null&&nr.length)&&mt(Je)})}De(()=>Qe(zt,l(Me).title)),tt("click",Tt,()=>E(At)),tt("click",yt,()=>z(l(Me).objectId)),Q(fe,Ve)}),De(()=>Qe(qe,`${l(ee).length??""}  `)),Q(de,ye)},Ce=de=>{var ye=ET();Q(de,ye)};xe(Ne,de=>{l(ee).length>0?de(ze):de(Ce,!1)})}var pe=B(ae,2),Oe=m(pe),ke=B(Oe,2),me=B(pe,2);{var q=de=>{var ye=IT(),Fe=m(ye),Pe=m(Fe),nt=m(Pe),qe=B(Pe,2);{var je=Me=>{var At=FT(),Ve=m(At),Ye=m(Ve);De(()=>Qe(Ye,l(N))),Q(Me,At)};xe(qe,Me=>{l(N)&&Me(je)})}var fe=B(qe,2);gT(fe,{get productId(){return i()},get estimateId(){return a()},updateObjectDisabled:F,get objectId(){return l(C)},set objectId(Me){b(C,Me)},get isTemplateModal(){return l(x)},set isTemplateModal(Me){b(x,Me)},get selectedPrintIndex(){return l(I)},set selectedPrintIndex(Me){b(I,Me)},$$legacy:!0}),tt("click",nt,U),Q(de,ye)};xe(me,de=>{l(x)&&de(q)})}De(()=>Lr(D,`odz-space-y-4 ${l(w)?"odz-opacity-50":""}`)),tt("click",Oe,function(...de){var ye;(ye=d())==null||ye.apply(this,de)}),tt("click",ke,function(...de){var ye;(ye=A())==null||ye.apply(this,de)}),Q(n,j),sn(),r()}var TT=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-10"><div class="odz-text-center"><h2 class="odz-text-xl odz-font-bold odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-500">      </p></div> <div class="odz-bg-gray-50 odz-p-8 odz-rounded-lg odz-border-2 odz-border-dashed odz-border-gray-300"><p class="odz-text-gray-600 odz-text-center">    </p></div> <button class="odz-btn odz-btn-secondary odz-px-8"> </button></div>');function LT(n,e){let t=gt(e,"productId",8),r=gt(e,"onComplete",8);console.log("    - productId:",t());var o=TT(),s=B(m(o),4);tt("click",s,function(...i){var a;(a=r())==null||a.apply(this,i)}),Q(n,o)}var PT=W('<p class="odz-text-[11px] odz-text-gray-400 odz-line-through odz-mt-1"> </p> <p class="odz-text-[11px] odz-text-emerald-600 odz-font-semibold odz-mt-0.5"> </p>',1),kT=W('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p><!></p>',1),OT=W('<p class="odz-mt-1 odz-text-[11px] odz-text-blue-600">   -  </p>'),DT=W('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">     </p>'),NT=W('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <!>',1),MT=W('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">    </p>',1),HT=W('<p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-400"></p> <p class="odz-mt-1 odz-text-[11px] odz-text-gray-500">   </p>',1),jT=W('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!></p>'),RT=W('<span class="odz-text-blue-600">+ ( )</span>'),$T=W("<span>+ ( )</span>"),qT=W('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> <!></p>'),KT=W('<p class="odz-mt-1 odz-text-[11px] odz-text-gray-500"> <!> + ( )</p>'),VT=ig('<svg class="odz-w-4 odz-h-4 sm:odz-w-5 sm:odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),GT=W("<button><!> <span> </span></button>"),WT=W('<div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2.5"></div>'),XT=W('<button class="odz-w-full odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-semibold odz-py-2.5 odz-px-4 odz-rounded-xl odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2"><svg class="odz-w-4 odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg> <span> </span></button>'),YT=W('<div class="odz-mt-5 odz-border-t odz-border-gray-200/70 odz-pt-3.5"><!></div>'),JT=W('<div class="odz-mt-5 odz-px-4"><div class="odz-sticky odz-bottom-4 md:odz-static md:odz-bottom-auto"><div class="odz-rounded-3xl odz-border odz-border-gray-200 odz-bg-white/90 odz-backdrop-blur-md odz-shadow-xl odz-p-4 sm:odz-p-5 lg:odz-p-6"><div class="odz-grid sm:odz-grid-cols-2 lg:odz-grid-cols-5 odz-gap-2.5 lg:odz-gap-3"><div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <p class="odz-mt-1 odz-text-xs odz-text-gray-500"> </p></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-gray-900"> </p> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"></span> <!></div> <div class="odz-rounded-2xl odz-border odz-border-gray-100 odz-bg-white/80 odz-p-3.5 sm:odz-p-4 odz-shadow-sm"><span class="odz-text-xs odz-font-semibold odz-text-gray-500"> </span> <p class="odz-mt-1.5 odz-text-xl sm:odz-text-2xl odz-font-bold odz-text-red-600"> </p> <!></div></div> <!></div></div></div>');function Qp(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(xr,"$fixedEstimateStore",t),s=()=>fn(so,"$extendedProductDataStore",t),i=Se(),a=Se(),A=Se(),d=Se(),c=Se(),u=Se(),h=Se(),f=Se(),g=Se(),w=Se(),y=Se(),x=Se(),C=Se(),I=Se(),N=Se();let k=gt(e,"productId",8),ee=gt(e,"showNextButton",8,!1),G=gt(e,"nextButtonText",8,"  "),H=gt(e,"onNext",8,void 0),Y=gt(e,"estimateId",8,null),Be=gt(e,"idx",8,null),M=gt(e,"buttonConfig",8,null),O=Se(0),J=Se(null);function re(){var _e,Le;if(((_e=l(i))==null?void 0:_e.productId)===k()&&l(i).printSelection&&l(i).printSelection.currentMethod!=="selection")return l(i).printSelection;if(typeof window<"u")try{let X=null,D="";if(Y()&&Be()!==null){const oe=`fixedEstimate_${k()}_${Y()}_${Be()}`;X=sessionStorage.getItem(oe),X&&(D=oe),console.log(" resolvePrintSelection -    (estimateId + idx):",{exactKey:oe,hasData:!!X})}if(!X&&Y()){const oe=`fixedEstimate_${k()}_${Y()}`;X=sessionStorage.getItem(oe),X&&(D=oe)}if(!X&&Be()!==null){const oe=`fixedEstimate_${k()}_${Be()}`;X=sessionStorage.getItem(oe),X&&(D=oe)}if(!X){const oe=`fixedEstimate_${k()}`;X=sessionStorage.getItem(oe),X&&(D=oe)}if(X||console.log(" resolvePrintSelection - sessionStorage     (, DB Store ):",{triedKeys:[`fixedEstimate_${k()}`,`fixedEstimate_${k()}_${Be()}`,`fixedEstimate_${k()}_${Y()}`],currentIdx:Be(),currentEstimateId:Y()}),X){const oe=JSON.parse(X);if(oe.printSelection&&oe.printSelection.currentMethod!=="selection")return oe.printSelection}}catch{}return(Le=l(A))!=null&&Le.printSelection&&l(A).printSelection.currentMethod!=="selection"?l(A).printSelection:null}async function he(_e,Le,X,D){if((D||(Le?"detailed":"none"))!=="detailed")return null;if(typeof window<"u")try{const ve=Y()||"temp",le=`detailedPrint_${k()}_${ve}`;let ue=window.sessionStorage.getItem(le);if(!ue&&Be()!==null){const Ie=`detailedPrint_${k()}_${ve}_${Be()}`;ue=window.sessionStorage.getItem(Ie)}if(!ue){const Ie=`detailedPrint_${k()}`;ue=window.sessionStorage.getItem(Ie)}if(ue){const Ie=JSON.parse(ue);if(console.log(" sessionStorage     ( ):",{key:le,parsedData:Ie,dataLength:Ie==null?void 0:Ie.length,currentTab:"unknown"}),Array.isArray(Ie)&&Ie.length>0){const Ne=X;if(Ne<=0)return null;let ze=0;for(const Ce of Ie){const pe=await ie(Ce,Ne);pe!==null?ze+=pe:Ce.price&&typeof Ce.price=="number"&&(ze+=Ce.price,console.log("      ():",{title:Ce.title,fallbackPrice:Ce.price,currentTotal:ze}))}if(ze>0)return ze}}}catch{}if(Y()&&Be()!==null)try{const le=(await gc(Y())).filter(ue=>ue.idx===Be());if(le.length>0){const ue=X;if(ue<=0)return null;let Ie=0;for(const Ne of le){const ze={id:Ne.id,template:{id:Ne.template_id},colors:Ne.colors||[],price:Ne.price},Ce=await ie(ze,ue);Ce!==null?Ie+=Ce:(Ie+=Ne.price||0,console.log("   - DB   ():",{objectId:Ne.object_id,dbPrice:Ne.price}))}return Ie}}catch{}if(_e!=null&&_e.printConfig){let ve=null;if(typeof _e.printConfig=="string")try{ve=JSON.parse(_e.printConfig)}catch{return null}else typeof _e.printConfig=="object"&&_e.printConfig!==null&&(ve=_e.printConfig);if(ve){const le=["totalAmount","total","totalPrice","price","amount"];for(const Ie of le){const Ne=ve[Ie];if(typeof Ne=="number"&&!Number.isNaN(Ne))return Ne}const ue=ve.summary;if(ue&&typeof ue=="object")for(const Ie of le){const Ne=ue[Ie];if(typeof Ne=="number"&&!Number.isNaN(Ne))return Ne}}}return null}async function ie(_e,Le){var X,D;try{if(!((X=_e.template)!=null&&X.id))return null;let oe=_e.template.templateProduct;if(oe||(oe=await zc(_e.template.id)),!(oe!=null&&oe.template_product_variants))return null;let ve;if(_e.variant_id?(ve=oe.template_product_variants.find(Ie=>Ie.variant_id===_e.variant_id),console.log(" STEP 4  (variant_id ):",{found:!!ve,selectedVariant:ve})):_e.colors&&_e.colors.length>0?(ve=oe.template_product_variants.find(Ie=>Ie.color_count===_e.colors.length),console.log(" STEP 4  (  ):",{found:!!ve,selectedVariant:ve})):(ve=oe.template_product_variants[0],console.log(" STEP 4  ():",{selectedVariant:ve})),!ve)return null;const le=await il(ve.variant_id);if(!le||!le.prices||le.prices.length===0)return null;const ue=le.prices[0].amount;if(ve.min_quantity<=Le){let Ie=ue*Le;if((D=oe.product)!=null&&D.quantity_discounts&&oe.product.quantity_discounts.length>0){const Ne=$i(Le,ue,oe.product.quantity_discounts);if(Ne.hasDiscount){const ze=Ne.discountedPrice*Le;return console.log(" =====   ( ) =====:",{discountedUnitPrice:Ne.discountedPrice,quantity:Le,finalPrice:ze}),ze}}return Ie}else{const Ie=ve.plate_price||0;return console.log(" =====   (  , plate_price ) =====:",{min_quantity:ve.min_quantity,productQuantity:Le,platePrice:Ie}),Ie}}catch{return null}}function be(_e,Le,X){if(typeof window>"u")return!1;try{const D=Le||"temp",oe=[X!==null&&D?`detailedPrint_${_e}_${D}_${X}`:null,D?`detailedPrint_${_e}_${D}`:null,`detailedPrint_${_e}`].filter(Boolean);for(const ve of oe){const le=window.sessionStorage.getItem(ve);if(le)try{const ue=JSON.parse(le);if(Array.isArray(ue)&&ue.length>0)return!0}catch{}}}catch{return!1}return!1}let te=Se(0),Z=Se(!1),Ae=Se(null);Xn(()=>{if(typeof window<"u"){const _e=oe=>{const{productId:ve,timestamp:le,source:ue}=oe.detail;ve===k()&&(b(O,Date.now()),b(te,Date.now()))},Le=async oe=>{var ze,Ce,pe;const{productId:ve,addonId:le,selectedAddons:ue,timestamp:Ie,source:Ne}=oe.detail;if(ve===k()){console.log(" SelectedProductSummary -     ():",{eventProductId:ve,addonId:le,selectedAddonsCount:Object.keys(ue||{}).length,timestamp:Ie,source:Ne,currentProductId:k()}),await new Promise(q=>setTimeout(q,50));let Oe=kn(xr),ke=0;const me=5;for(;ke<me&&Oe;){const q=(Ce=(ze=Oe==null?void 0:Oe.addonSelection)==null?void 0:ze.selectedAddons)==null?void 0:Ce[le];if(q&&q.variantId===oe.detail.variantId)break;console.log(` Store    (${ke+1}/${me}):`,{storeVariantId:q==null?void 0:q.variantId,expectedVariantId:oe.detail.variantId}),await new Promise(de=>setTimeout(de,25)),Oe=kn(xr),ke++}if(Oe&&l(c)&&l(A)){const q=U(Oe,l(c),Date.now(),(pe=Oe.addonSelection)==null?void 0:pe.selectedAddons);b(C,q)}b(O,Date.now()),b(te,Date.now())}},X=oe=>{const{productId:ve,action:le,color:ue,variantId:Ie,oldQuantity:Ne,newQuantity:ze,newTotalQuantity:Ce,timestamp:pe,source:Oe}=oe.detail;ve===k()&&(b(O,Date.now()),b(te,Date.now()))},D=async oe=>{const{productId:ve,toMethod:le,idx:ue,estimateId:Ie,source:Ne}=oe.detail;ve===k()&&(b(J,le||null),le&&xr.updatePrintSelection({currentMethod:le,isCompleted:le==="none",lastUpdated:Date.now()}),b(O,Date.now()),b(te,Date.now()),await new Promise(ze=>setTimeout(ze,100)),F(le))};return window.addEventListener("detailedPrintUpdate",_e),window.addEventListener("addonSelectionUpdate",Le),window.addEventListener("productQuantityUpdate",X),window.addEventListener("printAmountRecalc",D),setTimeout(()=>{b(te,Date.now())},100),()=>{window.removeEventListener("detailedPrintUpdate",_e),window.removeEventListener("addonSelectionUpdate",Le),window.removeEventListener("productQuantityUpdate",X),window.removeEventListener("printAmountRecalc",D)}}});let we=Se(null),z=!1;async function F(_e){if(!z)try{z=!0,b(we,await he(l(u),l(Z),l(c).totalQuantity,_e))}catch{b(we,null)}finally{z=!1}}let E=null;function U(_e,Le,X,D){var Ie,Ne,ze;let oe=_e;if(typeof window<"u"&&k())try{const Ce=kn(xr);Ce&&Ce.productId===k()&&(oe=Ce)}catch{}if(X&&typeof window<"u"&&k())try{const Ce=kn(xr);Ce&&Ce.productId===k()&&(oe=Ce)}catch{}let ve=D||((Ie=oe==null?void 0:oe.addonSelection)==null?void 0:Ie.selectedAddons);if(typeof window<"u"&&X)try{const Ce=kn(xr);if(Ce&&Ce.productId===k()){const pe=(Ne=Ce.addonSelection)==null?void 0:Ne.selectedAddons;pe&&Object.keys(pe).length>0&&(ve=pe)}}catch{}if(!ve||!((ze=l(A))!=null&&ze.addons))return 0;const le=Le.totalQuantity;let ue=0;return Object.entries(ve).forEach(([Ce,pe])=>{var Fe,Pe,nt;if(!pe||typeof pe!="object"||!("productId"in pe)||!("variantId"in pe))return;const Oe=pe,ke=l(A).addons.find(qe=>qe.id===Ce);if(!ke)return;const me=ke.items.find(qe=>qe.addon_product.id===Oe.productId);if(!me)return;(Fe=me.addon_product.variants)!=null&&Fe.map(qe=>{var je,fe;return{id:qe.id,title:qe.title,price:(fe=(je=qe.prices)==null?void 0:je[0])==null?void 0:fe.amount}});let q=(Pe=me.addon_product.variants)==null?void 0:Pe.find(qe=>qe.id===Oe.variantId);if(!q){(nt=me.addon_product.variants)==null||nt.forEach((qe,je)=>{});return}if(!q.prices||q.prices.length===0)return;const de=q.prices[0].amount,ye=de*le;ue+=ye,console.log("    ():",{addonName:ke.name,variantTitle:q.title||me.addon_product.title,selectedVariantId:Oe.variantId,foundVariantId:q.id,addonUnitPrice:de,totalQuantity:le,addonItemTotal:ye,currentAddonTotal:ue,calculationValid:q.id===Oe.variantId})}),ue}function P(_e){var ze,Ce;if(!((ze=l(i))!=null&&ze.productSelection)||!l(d)||l(i).productId!==k())return{totalQuantity:0,selectedColors:[],totalAmount:{originalTotal:0,discountedTotal:0,hasDiscount:!1}};const{quantityByVariant:Le,variantsByColor:X={},variantDiscounts:D}=l(i).productSelection,oe=Object.values(Le||{}).reduce((pe,Oe)=>pe+Object.values(Oe||{}).reduce((ke,me)=>ke+me,0),0),ve=Object.keys(Le||{}).filter(pe=>Object.values(Le[pe]||{}).some(Oe=>Oe>0));let le=0,ue=0,Ie=!1;for(const pe in Le||{})for(const Oe in Le[pe]||{}){const ke=Le[pe][Oe];if(ke>0){const me=(Ce=X[pe])==null?void 0:Ce.find(q=>q.id===Oe);if(me&&me.prices&&me.prices.length>0){const q=me.prices[0].amount,de=D==null?void 0:D[Oe];le+=q*ke,de!=null&&de.hasDiscount?(ue+=de.discountedPrice*ke,Ie=!0):ue+=q*ke}}}return{totalQuantity:oe,selectedColors:ve,totalAmount:{originalTotal:le,discountedTotal:Ie?ue:le,hasDiscount:Ie}}}Xn(()=>{E=xr.subscribe(_e=>{(_e==null?void 0:_e.productId)===k()&&b(O,Date.now())})}),Xo(()=>{E&&E()});function T(){H()&&H()()}function R(_e){switch(_e){case"arrow-left":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>';case"arrow-right":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>';case"check":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';case"save":return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path>';default:return'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>'}}function $(_e,Le="normal"){const X="odz-font-semibold odz-rounded-lg odz-transition-colors odz-duration-200 odz-flex odz-items-center odz-justify-center odz-gap-2",D=Le==="large"?"odz-py-3 odz-px-5 odz-text-base":"odz-py-2.5 odz-px-4 odz-text-sm";return _e==="primary"?`${X} ${D} odz-bg-red-600 hover:odz-bg-red-700 odz-text-white`:`${X} ${D} odz-bg-gray-100 hover:odz-bg-gray-200 odz-text-gray-700 hover:odz-text-gray-800 odz-border odz-border-gray-300`}Jt(()=>o(),()=>{b(i,o())}),Jt(()=>s(),()=>{b(a,s())}),Jt(()=>(l(a),Vn(k())),()=>{var _e,Le;b(A,(Le=(_e=l(a))==null?void 0:_e.productDataCache)==null?void 0:Le[k()])}),Jt(()=>l(A),()=>{var _e;b(d,(_e=l(A))==null?void 0:_e.product)}),Jt(()=>l(O),()=>{b(c,P(l(O)))}),Jt(()=>{},()=>{b(u,re())}),Jt(()=>l(u),()=>{var _e;b(h,((_e=l(u))==null?void 0:_e.currentMethod)??"selection")}),Jt(()=>(l(te),l(J),l(h),l(u),Vn(k()),Vn(Y()),Vn(Be()),l(Ae),l(Z)),()=>{l(te);const _e=l(J)||l(h),Le=!!l(u),X=be(k(),Y(),Be());let D=!1;_e==="detailed"?D=!0:_e==="simple"||_e==="none"?D=!1:_e==="selection"&&(D=X);const oe=`${_e}|${Le}|${X}`;oe!==l(Ae)&&b(Ae,oe),l(Z)!==D&&b(Z,D)}),Jt(()=>l(we),()=>{b(f,l(we)??0)}),Jt(()=>l(c),()=>{b(g,l(c).totalAmount.hasDiscount?l(c).totalAmount.discountedTotal:l(c).totalAmount.originalTotal)}),Jt(()=>l(c),()=>{b(w,l(c).totalAmount.hasDiscount?l(c).totalAmount.originalTotal-l(c).totalAmount.discountedTotal:0)}),Jt(()=>l(w),()=>{b(y,l(w)>0)}),Jt(()=>o(),()=>{var _e,Le;b(x,(Le=(_e=o())==null?void 0:_e.addonSelection)==null?void 0:Le.selectedAddons)}),Jt(()=>(l(i),l(c),l(O),l(x)),()=>{b(C,U(l(i),l(c),l(O),l(x)))}),Jt(()=>(l(Z),l(f),l(g),l(C)),()=>{b(I,l(Z)&&l(f)>0?l(g)+l(f)+l(C):l(g)+l(C))}),Jt(()=>(l(u),l(Z),l(c),l(O)),()=>{(l(u)||l(Z)||l(c).totalQuantity||l(O))&&F()}),Jt(()=>{},()=>{}),Jt(()=>(Vn(M()),Vn(ee())),()=>{b(N,M()||ee())}),mo(),an();var j=Lt(),ae=ut(j);{var Ee=_e=>{var Le=JT(),X=m(Le),D=m(X),oe=m(D),ve=m(oe),le=B(m(ve),2),ue=m(le),Ie=B(le,2),Ne=m(Ie),ze=B(ve,2),Ce=B(m(ze),2),pe=m(Ce),Oe=B(Ce,2);{var ke=Ge=>{var it=PT(),zt=ut(it),xt=m(zt),Tt=B(zt,2),yt=m(Tt);De((rt,Dt)=>{Qe(xt,`${rt??""}`),Qe(yt,`-${Dt??""} `)},[()=>Er(l(c).totalAmount.originalTotal),()=>Er(l(w))],at),Q(Ge,it)};xe(Oe,Ge=>{l(y)&&Ge(ke)})}var me=B(ze,2),q=B(m(me),2);{var de=Ge=>{var it=kT(),zt=ut(it),xt=m(zt),Tt=B(zt,2),yt=m(Tt);{var rt=St=>{var Nt=zn("    .");Q(St,Nt)},Dt=St=>{var Nt=zn("    .");Q(St,Nt)};xe(yt,St=>{l(f)>0?St(rt):St(Dt,!1)})}De(St=>{Qe(xt,`${St??""}`),Lr(Tt,`odz-mt-1 odz-text-[11px] ${l(f)>0?"odz-text-gray-500":"odz-text-orange-500"}`)},[()=>Er(l(f))],at),Q(Ge,it)},ye=Ge=>{var it=NT(),zt=B(ut(it),2);{var xt=yt=>{var rt=OT();Q(yt,rt)},Tt=yt=>{var rt=DT();Q(yt,rt)};xe(zt,yt=>{(l(J)||l(h))==="simple"?yt(xt):yt(Tt,!1)})}Q(Ge,it)};xe(q,Ge=>{l(Z)?Ge(de):Ge(ye,!1)})}var Fe=B(me,2),Pe=B(m(Fe),2);{var nt=Ge=>{var it=MT(),zt=ut(it),xt=m(zt);De(Tt=>Qe(xt,`${Tt??""}`),[()=>Er(l(C))],at),Q(Ge,it)},qe=Ge=>{var it=HT();Q(Ge,it)};xe(Pe,Ge=>{l(C)>0?Ge(nt):Ge(qe,!1)})}var je=B(Fe,2),fe=B(m(je),2),Me=m(fe),At=B(fe,2);{var Ve=Ge=>{var it=jT(),zt=m(it),xt=B(zt);{var Tt=yt=>{var rt=zn();De(Dt=>Qe(rt,`+ ${Dt??""}`),[()=>Er(l(C))],at),Q(yt,rt)};xe(xt,yt=>{l(C)>0&&yt(Tt)})}De((yt,rt)=>Qe(zt,`${yt??""} + ${rt??""} `),[()=>Er(l(g)),()=>Er(l(f))],at),Q(Ge,it)},Ye=Ge=>{var it=Lt(),zt=ut(it);{var xt=yt=>{var rt=qT(),Dt=m(rt),St=B(Dt);{var Nt=$t=>{var nr=zn();De(Ht=>Qe(nr,`+  ${Ht??""}`),[()=>Er(l(C))],at),Q($t,nr)};xe(St,$t=>{l(C)>0&&$t(Nt)})}var Je=B(St,2);{var mt=$t=>{var nr=RT();Q($t,nr)},vt=$t=>{var nr=$T();Q($t,nr)};xe(Je,$t=>{l(h)==="simple"?$t(mt):$t(vt,!1)})}De($t=>Qe(Dt,` ${$t??""} `),[()=>Er(l(g))],at),Q(yt,rt)},Tt=yt=>{var rt=KT(),Dt=m(rt),St=B(Dt);{var Nt=Je=>{var mt=zn();De(vt=>Qe(mt,`+  ${vt??""}`),[()=>Er(l(C))],at),Q(Je,mt)};xe(St,Je=>{l(C)>0&&Je(Nt)})}De(Je=>Qe(Dt,` ${Je??""} `),[()=>Er(l(g))],at),Q(yt,rt)};xe(zt,yt=>{l(Z)?yt(Tt,!1):yt(xt)},!0)}Q(Ge,it)};xe(At,Ge=>{l(Z)&&l(f)>0?Ge(Ve):Ge(Ye,!1)})}var ot=B(oe,2);{var ht=Ge=>{var it=YT(),zt=m(it);{var xt=yt=>{var rt=WT();er(rt,5,()=>M().buttons,vr,(Dt,St,Nt)=>{var Je=GT(),mt=m(Je);{var vt=Ht=>{var Kt=VT(),sr=m(Kt);w0(sr,()=>R(l(St).icon),!0,!1),Q(Ht,Kt)};xe(mt,Ht=>{l(St).icon&&Ht(vt)})}var $t=B(mt,2),nr=m($t);De(Ht=>{Lr(Je,Ht),Qe(nr,l(St).text)},[()=>`${M().type==="single"?"odz-w-full":Nt===0?"odz-flex-1":"odz-flex-1 sm:odz-flex-[1.35]"} ${$(l(St).style,l(St).size||"normal")}`],at),tt("click",Je,function(...Ht){var Kt;(Kt=l(St).action)==null||Kt.apply(this,Ht)}),Q(Dt,Je)}),Q(yt,rt)},Tt=yt=>{var rt=XT(),Dt=B(m(rt),2),St=m(Dt);De(()=>Qe(St,G())),tt("click",rt,T),Q(yt,rt)};xe(zt,yt=>{M()?yt(xt):yt(Tt,!1)})}Q(Ge,it)};xe(ot,Ge=>{l(N)&&Ge(ht)})}De((Ge,it)=>{Qe(ue,`${l(c).totalQuantity??""}`),Qe(Ne,`${l(c).selectedColors.length??""}  `),Qe(pe,`${Ge??""}`),Qe(Me,`${it??""}`)},[()=>Er(l(g)),()=>Er(l(I))],at),Q(_e,Le)};xe(ae,_e=>{l(c).totalQuantity>0&&l(d)&&_e(Ee)})}Q(n,j),sn(),r()}var ZT=W('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),e6=W('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),t6=W('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-green-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">    ...</p></div></div></div>'),r6=W('<div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-1.5 odz-h-1.5 odz-bg-gray-400 odz-rounded-full"></div> <span class="odz-text-xs odz-text-gray-600"> </span></div>'),n6=W(`<button class="odz-group odz-cursor-pointer odz-w-full odz-text-left"><div class="odz-relative odz-bg-white odz-border-2 odz-border-gray-200 odz-rounded-xl odz-p-6
                               odz-transition-all odz-duration-300 odz-shadow-sm
                               hover:odz-border-gray-300 hover:odz-shadow-lg hover:odz-scale-105"><div></div> <div class="odz-relative odz-z-10"><div class="odz-text-4xl odz-mb-4 odz-text-center"> </div> <h3 class="odz-text-lg odz-font-bold odz-text-gray-800 odz-text-center odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-text-center odz-mb-4"> </p> <div class="odz-space-y-2"></div></div> <div class="odz-relative odz-z-10 odz-mt-6"><div></div></div></div></button>`),o6=W('<div class="odz-flex odz-flex-col odz-gap-6 odz-p-4 odz-pb-48"><div class="odz-text-center odz-mb-6"><h1 class="odz-text-2xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h1> <p class="odz-text-sm odz-text-gray-600">   </p></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-px-2"></div> <!></div>'),s6=W('<div class="odz-relative"><!></div>'),i6=W('<div class="odz-relative"><!></div>'),a6=W('<div class="odz-relative odz-pb-48"><!> <!></div>'),A6=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-gap-6 odz-py-16"><div class="odz-text-center"><div class="odz-text-6xl odz-mb-4"></div> <h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2">  </h2> <p class="odz-text-sm odz-text-gray-600">        </p></div> <div class="odz-w-full odz-mt-8 odz-mb-48 odz-flex odz-gap-4"><button class="odz-btn odz-btn-outline odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> </button> <button class="odz-btn odz-btn-primary odz-flex-1"><svg class="odz-w-5 odz-h-5 odz-mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>  </button></div></div>');function kx(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(xr,"$fixedEstimateStore",t),s=()=>fn(oi,"$shopStore",t),i=()=>fn(Et,"$estimateStore",t),a=Se();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"step",12,0),h=gt(e,"onNext",8,void 0),f=Se(null),g=Se(!1),w=Se(null),y=Se(!1);function x(){var Ae;if(d()&&d()!=="temp")return console.log(" getInitialMethod: Edit  - selection  (DB  )"),"selection";if(typeof window<"u"&&A())try{let we=`fixedEstimate_${A()}_${d()||"temp"}_${c()}`,z=window.sessionStorage.getItem(we);if(z||(we=`fixedEstimate_${A()}_${d()||"temp"}`,z=window.sessionStorage.getItem(we)),z){const F=JSON.parse(z);if((Ae=F.printSelection)!=null&&Ae.currentMethod)return F.printSelection.currentMethod}}catch{}return"selection"}let C=Se(x()),I=null;const N=[{id:"simple",title:"  ",description:"   ",icon:"",features:[" ","  "," "],color:"from-green-500 to-emerald-600"},{id:"detailed",title:"  ",description:"  ",icon:"",features:[" "," "," /"],color:"from-blue-500 to-indigo-600"},{id:"self-design",title:" ",description:"  ",icon:"",features:[" "," "," "],color:"from-purple-500 to-pink-600"},{id:"none",title:"  ",description:"    ",icon:"",features:[" ","  "," "],color:"from-gray-500 to-slate-600"}];function k(Z){const Ae=Z;if(b(C,Ae),Ae!=="selection"&&so.selectPrintMethod(A(),Ae),Ae!=="selection"&&xr.selectPrintMethod(Ae),Ae!=="selection"&&c()!==void 0&&Et.updateProductPrintType(c(),Ae),typeof window<"u"&&(Ae==="simple"||Ae==="none")){try{const we=d()||"temp";[`detailedPrint_${A()}_${we}`,`detailedPrint_${A()}_${we}_${c()}`,`detailedPrint_${A()}`].forEach(F=>{try{sessionStorage.removeItem(F)}catch{}})}catch(we){console.error(" detailedPrint    :",we)}d()&&c()!==null&&pt.from("estimate_prints").delete().eq("estimate_id",d()).eq("idx",c()).then(({error:we})=>{we?console.error(" estimate_prints  :",we):console.log(" estimate_prints   (/ )")})}if(typeof window<"u"&&Ae!=="selection"){const we=new CustomEvent("printAmountRecalc",{detail:{productId:A(),fromMethod:"unknown",toMethod:Ae,idx:c(),estimateId:d(),source:"printMethodChange"}});window.dispatchEvent(we)}Ae==="none"&&(u(0),so.completePrintSelection(A()),xr.completePrintSelection(),h()&&h()())}function ee(){b(C,"selection"),so.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1}),xr.updatePrintSelection({currentMethod:"selection",isCompleted:!1,lastUpdated:Date.now()})}function G(){b(C,"selection"),A()&&so.updatePrintSelection(A(),{currentMethod:"selection",isCompleted:!1})}function H(){u(0),so.completePrintSelection(A()),xr.completePrintSelection(),h()&&h()()}function Y(Z){Z!=null&&Z.product&&Et.update(Ae=>{const we=[...Ae.products];let z=we.findIndex(F=>{var E;return((E=F==null?void 0:F.product)==null?void 0:E.id)===Z.product.id});if(z===-1){const F={product:Z.product,variants:[],quantity:0,prints:[],addons:{},addonProductsMap:Z.addonProductsMap||{},productAmount:0,printAmount:0,addonAmount:0,totalAmount:0,isLoaded:!0};we.push(F),z=we.length-1}else we[z].prints||(we[z]={...we[z],prints:[]});return{...Ae,products:we,index:z}})}async function Be(Z=!1){var Ae,we;if(A()){b(g,!0),b(w,null);try{const z=o().productSelection;if(Z&&z&&z.product&&z.productId===A()){if(b(f,{product:z.product,addons:z.addons||[],addonItems:z.addonItems||[]}),Y(l(f)),typeof window<"u"&&d())try{const E=d(),U=`fixedEstimate_${A()}_${E}`,P=window.sessionStorage.getItem(U);if(P){const T=JSON.parse(P);(Ae=T.printSelection)!=null&&Ae.currentMethod&&(b(C,T.printSelection.currentMethod),console.log(" Edit  (print.svelte): sessionStorage   :",{currentMethod:l(C),key:U}))}}catch{}return}if(!Z){const E=so.restoreFromSession(A());if(E!=null&&E.isLoaded){b(f,E),Y(l(f)),E.printSelection&&b(C,E.printSelection.currentMethod);return}}const F=so.getProductData(A());F!=null&&F.isLoaded?(b(f,F),Y(l(f)),!Z&&F.printSelection&&b(C,F.printSelection.currentMethod)):(b(f,await so.loadIntegratedProductData(A(),s().id)),Y(l(f))),(we=l(f))!=null&&we.process}catch(z){b(w,z instanceof Error?z.message:"   .")}finally{b(g,!1)}}}function M(){const Z=so.getProductData(A());if(!(Z!=null&&Z.printSelection))return;const Ae=Z.printSelection;b(C,Ae.currentMethod)}function O(){I=so.subscribe(Z=>{const Ae=Z.productDataCache[A()];if(Ae!=null&&Ae.printSelection){const z=Ae.printSelection.currentMethod;z!==l(C)&&b(C,z)}})}async function J(){if(typeof window>"u"||!d()||d()==="temp")return"selection";console.log(" populateSessionStorageFromDB :",{productId:A(),estimateId:d(),idx:c()});let Z="selection";try{const Ae=await l1(d()),we=c()??i().index??0,z=Ae.filter(U=>U.idx===we);if(z.length>0){console.log(" SimplePrint DB  :",z.length,"");const U=z.map(T=>({objectId:T.object_id||"",title:T.title||"",printMethod:T.print_method||"",savedFileInfo:T.uploads?typeof T.uploads=="string"?JSON.parse(T.uploads):T.uploads:[]})),P=`simplePrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(U)),console.log(" SimplePrint sessionStorage  :",P),Z="simple"}const E=i().products[we];if(E!=null&&E.prints&&E.prints.length>0){console.log(" DetailedPrint   :",E.prints.length,"");const U=E.prints.map(T=>({template:T.template,parentTemplates:T.parentTemplates||[],uploads:T.uploads||null,objectId:T.objectId||"",title:T.title||"",colors:T.colors||[],price:T.price||0,variant_id:T.variant_id||null,nameSheet:T.nameSheet||null,discountInfo:T.discountInfo||null})),P=`detailedPrint_${A()}_${d()}`;window.sessionStorage.setItem(P,JSON.stringify(U)),console.log(" DetailedPrint sessionStorage  :",P,U),Z="detailed"}if(Z!=="selection"){const U=`fixedEstimate_${A()}_${d()}_${we}`,P=window.sessionStorage.getItem(U);let T=P?JSON.parse(P):{};T.printSelection={...T.printSelection,currentMethod:Z,isCompleted:!0,lastUpdated:Date.now()},window.sessionStorage.setItem(U,JSON.stringify(T)),console.log(" fixedEstimate sessionStorage  :",U,Z)}return console.log(" populateSessionStorageFromDB .  :",Z),Z}catch(Ae){return console.error(" populateSessionStorageFromDB :",Ae),"selection"}}Xn(async()=>{var Ae,we;const Z=d()&&d()!=="temp";if(Z){b(y,!0),console.log(" Edit : DB   ");try{const z=await J();z!=="selection"&&(b(C,z),console.log(" Edit : DB    :",z))}finally{b(y,!1),console.log(" Edit : DB   , currentMethod:",l(C))}}if(xr.initialize(A(),d(),c()),O(),await Be(Z),Z||M(),!Z){const z=i().products.find(E=>{var U;return((U=E==null?void 0:E.product)==null?void 0:U.id)===A()});if((!((Ae=l(f))!=null&&Ae.printSelection)||!l(f).printSelection.currentMethod||l(f).printSelection.currentMethod==="selection")&&(z!=null&&z.prints)&&z.prints.length>0)try{const E=z.prints[0],U=(E==null?void 0:E.method)??((we=E==null?void 0:E.parentTemplates)!=null&&we.length?"detailed":"simple");so.updatePrintSelection(A(),{currentMethod:U??l(C),selectedTemplate:E==null?void 0:E.template,selectedColors:E==null?void 0:E.colors,printConfig:E==null?void 0:E.config}),b(C,U??l(C)),console.log("      (currentMethod ):",{derivedMethod:U,fallbackMethod:l(C)})}catch{}}}),Xo(()=>{I&&I()}),Jt(()=>l(f),()=>{b(a,N.filter(Z=>{var Ae,we;return Z.id==="self-design"?((we=(Ae=l(f))==null?void 0:Ae.product)==null?void 0:we.self_design_enabled)===!0:!0}))}),Jt(()=>(l(C),l(a)),()=>{l(C)!=="selection"&&(l(a).some(Ae=>Ae.id===l(C))||b(C,"selection"))}),mo(),an();var re=Lt(),he=ut(re);{var ie=Z=>{var Ae=ZT();Q(Z,Ae)},be=Z=>{var Ae=Lt(),we=ut(Ae);{var z=E=>{var U=e6(),P=m(U),T=B(m(P),2),R=B(m(T),2),$=m(R),j=B(P,2);De(()=>Qe($,l(w))),tt("click",j,()=>Be(d()&&d()!=="temp")),Q(E,U)},F=E=>{var U=Lt(),P=ut(U);{var T=$=>{var j=t6();Q($,j)},R=$=>{var j=Lt(),ae=ut(j);{var Ee=Le=>{var X=o6(),D=B(m(X),2);er(D,5,()=>l(a),vr,(ue,Ie)=>{var Ne=n6(),ze=m(Ne),Ce=m(ze),pe=B(Ce,2),Oe=m(pe),ke=m(Oe),me=B(Oe,2),q=m(me),de=B(me,2),ye=m(de),Fe=B(de,2);er(Fe,5,()=>l(Ie).features,vr,(qe,je)=>{var fe=r6(),Me=B(m(fe),2),At=m(Me);De(()=>Qe(At,l(je))),Q(qe,fe)});var Pe=B(pe,2),nt=m(Pe);De(()=>{Lr(Ce,`odz-absolute odz-inset-0 odz-bg-gradient-to-br ${l(Ie).color??""}
                                   odz-rounded-xl odz-opacity-0 group-hover:odz-opacity-10 odz-transition-opacity odz-duration-300`),Qe(ke,l(Ie).icon),Qe(q,l(Ie).title),Qe(ye,l(Ie).description),Lr(nt,`odz-w-full odz-bg-gradient-to-r ${l(Ie).color??""}
                                          odz-text-white odz-font-semibold odz-py-2 odz-px-4 odz-rounded-lg
                                          odz-transition-all odz-duration-200 hover:odz-shadow-md
                                          group-hover:odz-shadow-lg odz-text-center`)}),tt("click",Ne,()=>k(l(Ie).id)),Q(ue,Ne)});var oe=B(D,2);const ve=at(()=>d()||null),le=at(()=>c()!==void 0?c():null);Qp(oe,{get productId(){return A()},get estimateId(){return l(ve)},get idx(){return l(le)},debugSource:"print-selection",buttonConfig:{type:"double",buttons:[{text:" ",action:()=>{if(typeof window<"u"){const ue=new CustomEvent("changeTab",{detail:"product"});window.dispatchEvent(ue)}},style:"secondary",icon:"arrow-left"},{text:"",action:H,style:"primary",icon:"check"}]}}),Q(Le,X)},_e=Le=>{var X=Lt(),D=ut(X);{var oe=le=>{var ue=s6(),Ie=m(ue);FQ(Ie,{get productId(){return A()},get estimateId(){return d()},get idx(){return c()},onComplete:H,onCancel:ee}),Q(le,ue)},ve=le=>{var ue=Lt(),Ie=ut(ue);{var Ne=Ce=>{var pe=i6(),Oe=m(pe);QT(Oe,{get productId(){return A()},get estimateId(){return d()},onComplete:H,onCancel:ee}),Q(Ce,pe)},ze=Ce=>{var pe=Lt(),Oe=ut(pe);{var ke=q=>{var de=a6(),ye=m(de);LT(ye,{get productId(){return A()},onComplete:H});var Fe=B(ye,2);const Pe=at(()=>d()||null),nt=at(()=>c()!==void 0?c():null);Qp(Fe,{get productId(){return A()},get estimateId(){return l(Pe)},get idx(){return l(nt)},debugSource:"print-self-design",buttonConfig:{type:"single",buttons:[{text:"",action:H,style:"primary",icon:"check",size:"large"}]}}),Q(q,de)},me=q=>{var de=Lt(),ye=ut(de);{var Fe=Pe=>{var nt=A6(),qe=B(m(nt),2),je=m(qe),fe=B(je,2);tt("click",je,ee),tt("click",fe,H),Q(Pe,nt)};xe(ye,Pe=>{l(C)==="none"&&Pe(Fe)},!0)}Q(q,de)};xe(Oe,q=>{l(C)==="self-design"?q(ke):q(me,!1)},!0)}Q(Ce,pe)};xe(Ie,Ce=>{l(C)==="detailed"?Ce(Ne):Ce(ze,!1)},!0)}Q(le,ue)};xe(D,le=>{l(C)==="simple"?le(oe):le(ve,!1)},!0)}Q(Le,X)};xe(ae,Le=>{l(C)==="selection"?Le(Ee):Le(_e,!1)},!0)}Q($,j)};xe(P,$=>{l(y)?$(T):$(R,!1)},!0)}Q(E,U)};xe(we,E=>{l(w)?E(z):E(F,!1)},!0)}Q(Z,Ae)};xe(he,Z=>{l(g)?Z(ie):Z(be,!1)})}Q(n,re),I_(e,"resetPrintTab",G);var te=sn({resetPrintTab:G});return r(),te}/*!
* html2canvas-pro 1.5.8 <https://yorickshan.github.io/html2canvas-pro/>
* Copyright (c) 2024 yorickshan <https://github.com/yorickshan>
* Released under MIT License
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V0=function(n,e){return V0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},V0(n,e)};function Gi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");V0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var G0=function(){return G0=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},G0.apply(this,arguments)};function ys(n,e,t,r){function o(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function a(c){try{d(r.next(c))}catch(u){i(u)}}function A(c){try{d(r.throw(c))}catch(u){i(u)}}function d(c){c.done?s(c.value):o(c.value).then(a,A)}d((r=r.apply(n,[])).next())})}function is(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(c){return A([d,c])}}function A(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){t.label=d[1];break}if(d[0]===6&&t.label<s[1]){t.label=s[1],s=d;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(d);break}s[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],o=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function gf(n,e,t){if(arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var vA=function(){function n(e,t,r,o){this.left=e,this.top=t,this.width=r,this.height=o}return n.prototype.add=function(e,t,r,o){return new n(this.left+e,this.top+t,this.width+r,this.height+o)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(o){return o.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),bg=function(n,e){return vA.fromClientRect(n,e.getBoundingClientRect())},l6=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),o=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new vA(0,0,r,o)},_g=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},uo=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vf=0;vf<iy.length;vf++)d6[iy.charCodeAt(vf)]=vf;var ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mf=0;mf<ay.length;mf++)lu[ay.charCodeAt(mf)]=mf;var c6=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=lu[n.charCodeAt(r)],i=lu[n.charCodeAt(r+1)],a=lu[n.charCodeAt(r+2)],A=lu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},u6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},h6=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Kl=5,N1=11,Iv=2,f6=N1-Kl,Ox=65536>>Kl,p6=1<<Kl,Uv=p6-1,g6=1024>>Kl,v6=Ox+g6,m6=v6,w6=32,y6=m6+w6,b6=65536>>N1,_6=1<<f6,x6=_6-1,Ay=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},B6=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},z6=function(n,e){var t=c6(n),r=Array.isArray(t)?h6(t):new Uint32Array(t),o=Array.isArray(t)?u6(t):new Uint16Array(t),s=24,i=Ay(o,s/2,r[4]/2),a=r[5]===2?Ay(o,(s+r[4])/2):B6(r,Math.ceil((s+r[4])/4));return new C6(r[0],r[1],r[2],r[3],i,a)},C6=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Kl],t=(t<<Iv)+(e&Uv),this.data[t];if(e<=65535)return t=this.index[Ox+(e-55296>>Kl)],t=(t<<Iv)+(e&Uv),this.data[t];if(e<this.highStart)return t=y6-b6+(e>>N1),t=this.index[t],t+=e>>Kl&x6,t=this.index[t],t=(t<<Iv)+(e&Uv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),ly="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wf=0;wf<ly.length;wf++)S6[ly.charCodeAt(wf)]=wf;var E6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dy=50,F6=1,Dx=2,Nx=3,I6=4,U6=5,cy=7,Mx=8,uy=9,YA=10,W0=11,hy=12,X0=13,Q6=14,du=15,Y0=16,yf=17,Jc=18,T6=19,fy=20,J0=21,Zc=22,Qv=23,Qd=24,Js=25,cu=26,uu=27,Td=28,L6=29,Tl=30,P6=31,bf=32,_f=33,Z0=34,em=35,tm=36,Gu=37,rm=38,Jf=39,Zf=40,Tv=41,Hx=42,k6=43,O6=[9001,65288],jx="!",Zr="",xf="",nm=z6(E6),Ya=[Tl,tm],om=[F6,Dx,Nx,U6],Rx=[YA,Mx],py=[uu,cu],D6=om.concat(Rx),gy=[rm,Jf,Zf,Z0,em],N6=[du,X0],M6=function(n,e){e===void 0&&(e="strict");var t=[],r=[],o=[];return n.forEach(function(s,i){var a=nm.get(s);if(a>dy?(o.push(!0),a-=dy):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),t.push(Y0);if(a===I6||a===W0){if(i===0)return r.push(i),t.push(Tl);var A=t[i-1];return D6.indexOf(A)===-1?(r.push(r[i-1]),t.push(A)):(r.push(i),t.push(Tl))}if(r.push(i),a===P6)return t.push(e==="strict"?J0:Gu);if(a===Hx||a===L6)return t.push(Tl);if(a===k6)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Gu):t.push(Tl);t.push(a)}),[r,t,o]},Lv=function(n,e,t,r){var o=r[t];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var s=t;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==YA)break}if(o===YA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var A=t;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==YA)break}if(a!==YA)break}return!1},vy=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===YA)t--;else return r}return 0},H6=function(n,e,t,r,o){if(t[r]===0)return Zr;var s=r-1;if(Array.isArray(o)&&o[s]===!0)return Zr;var i=s-1,a=s+1,A=e[s],d=i>=0?e[i]:0,c=e[a];if(A===Dx&&c===Nx)return Zr;if(om.indexOf(A)!==-1)return jx;if(om.indexOf(c)!==-1||Rx.indexOf(c)!==-1)return Zr;if(vy(s,e)===Mx)return xf;if(nm.get(n[s])===W0||(A===bf||A===_f)&&nm.get(n[a])===W0||A===cy||c===cy||A===uy||[YA,X0,du].indexOf(A)===-1&&c===uy||[yf,Jc,T6,Qd,Td].indexOf(c)!==-1||vy(s,e)===Zc||Lv(Qv,Zc,s,e)||Lv([yf,Jc],J0,s,e)||Lv(hy,hy,s,e))return Zr;if(A===YA)return xf;if(A===Qv||c===Qv)return Zr;if(c===Y0||A===Y0)return xf;if([X0,du,J0].indexOf(c)!==-1||A===Q6||d===tm&&N6.indexOf(A)!==-1||A===Td&&c===tm||c===fy||Ya.indexOf(c)!==-1&&A===Js||Ya.indexOf(A)!==-1&&c===Js||A===uu&&[Gu,bf,_f].indexOf(c)!==-1||[Gu,bf,_f].indexOf(A)!==-1&&c===cu||Ya.indexOf(A)!==-1&&py.indexOf(c)!==-1||py.indexOf(A)!==-1&&Ya.indexOf(c)!==-1||[uu,cu].indexOf(A)!==-1&&(c===Js||[Zc,du].indexOf(c)!==-1&&e[a+1]===Js)||[Zc,du].indexOf(A)!==-1&&c===Js||A===Js&&[Js,Td,Qd].indexOf(c)!==-1)return Zr;if([Js,Td,Qd,yf,Jc].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===Js)return Zr;if([Td,Qd].indexOf(h)!==-1)u--;else break}if([uu,cu].indexOf(c)!==-1)for(var u=[yf,Jc].indexOf(A)!==-1?i:s;u>=0;){var h=e[u];if(h===Js)return Zr;if([Td,Qd].indexOf(h)!==-1)u--;else break}if(rm===A&&[rm,Jf,Z0,em].indexOf(c)!==-1||[Jf,Z0].indexOf(A)!==-1&&[Jf,Zf].indexOf(c)!==-1||[Zf,em].indexOf(A)!==-1&&c===Zf||gy.indexOf(A)!==-1&&[fy,cu].indexOf(c)!==-1||gy.indexOf(c)!==-1&&A===uu||Ya.indexOf(A)!==-1&&Ya.indexOf(c)!==-1||A===Qd&&Ya.indexOf(c)!==-1||Ya.concat(Js).indexOf(A)!==-1&&c===Zc&&O6.indexOf(n[a])===-1||Ya.concat(Js).indexOf(c)!==-1&&A===Jc)return Zr;if(A===Tv&&c===Tv){for(var f=t[s],g=1;f>0&&(f--,e[f]===Tv);)g++;if(g%2!==0)return Zr}return A===bf&&c===_f?Zr:xf},j6=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=M6(n,e.lineBreak),r=t[0],o=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[Js,Tl,Hx].indexOf(a)!==-1?Gu:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&n[A]>=19968&&n[A]<=40959}):void 0;return[r,o,i]},R6=function(){function n(e,t,r,o){this.codePoints=e,this.required=t===jx,this.start=r,this.end=o}return n.prototype.slice=function(){return uo.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),$6=function(n,e){var t=_g(n),r=j6(t,e),o=r[0],s=r[1],i=r[2],a=t.length,A=0,d=0;return{next:function(){if(d>=a)return{done:!0,value:null};for(var c=Zr;d<a&&(c=H6(t,s,o,++d,i))===Zr;);if(c!==Zr||d===a){var u=new R6(t,c,A,d);return A=d,{value:u,done:!1}}return{done:!0,value:null}}}},q6=1,K6=2,dh=4,my=8,Tp=10,wy=47,Bu=92,V6=9,G6=32,Bf=34,eu=61,W6=35,X6=36,Y6=37,zf=39,Cf=40,tu=41,J6=95,Ps=45,Z6=33,eL=60,tL=62,rL=64,nL=91,oL=93,sL=61,iL=123,Sf=63,aL=125,yy=124,AL=126,lL=128,by=65533,Pv=42,Hl=43,dL=44,cL=58,uL=59,Wu=46,hL=0,fL=8,pL=11,gL=14,vL=31,mL=127,aa=-1,$x=48,qx=97,Kx=101,wL=102,yL=117,bL=122,Vx=65,Gx=69,Wx=70,_L=85,xL=90,as=function(n){return n>=$x&&n<=57},BL=function(n){return n>=55296&&n<=57343},Ld=function(n){return as(n)||n>=Vx&&n<=Wx||n>=qx&&n<=wL},zL=function(n){return n>=qx&&n<=bL},CL=function(n){return n>=Vx&&n<=xL},SL=function(n){return zL(n)||CL(n)},EL=function(n){return n>=lL},Ef=function(n){return n===Tp||n===V6||n===G6},Lp=function(n){return SL(n)||EL(n)||n===J6},_y=function(n){return Lp(n)||as(n)||n===Ps},FL=function(n){return n>=hL&&n<=fL||n===pL||n>=gL&&n<=vL||n===mL},VA=function(n,e){return n!==Bu?!1:e!==Tp},Ff=function(n,e,t){return n===Ps?Lp(e)||VA(e,t):Lp(n)?!0:!!(n===Bu&&VA(n,e))},kv=function(n,e,t){return n===Hl||n===Ps?as(e)?!0:e===Wu&&as(t):as(n===Wu?e:n)},IL=function(n){var e=0,t=1;(n[e]===Hl||n[e]===Ps)&&(n[e]===Ps&&(t=-1),e++);for(var r=[];as(n[e]);)r.push(n[e++]);var o=r.length?parseInt(uo.apply(void 0,r),10):0;n[e]===Wu&&e++;for(var s=[];as(n[e]);)s.push(n[e++]);var i=s.length,a=i?parseInt(uo.apply(void 0,s),10):0;(n[e]===Gx||n[e]===Kx)&&e++;var A=1;(n[e]===Hl||n[e]===Ps)&&(n[e]===Ps&&(A=-1),e++);for(var d=[];as(n[e]);)d.push(n[e++]);var c=d.length?parseInt(uo.apply(void 0,d),10):0;return t*(o+a*Math.pow(10,-i))*Math.pow(10,A*c)},UL={type:2},QL={type:3},TL={type:4},LL={type:13},PL={type:8},kL={type:21},OL={type:9},DL={type:10},NL={type:11},ML={type:12},HL={type:14},If={type:23},jL={type:1},RL={type:25},$L={type:24},qL={type:26},KL={type:27},VL={type:28},GL={type:29},WL={type:31},sm={type:32},Xx=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(_g(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==sm;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Bf:return this.consumeStringToken(Bf);case W6:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(_y(t)||VA(r,o)){var s=Ff(t,r,o)?K6:q6,i=this.consumeName();return{type:5,value:i,flags:s}}break;case X6:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),LL;break;case zf:return this.consumeStringToken(zf);case Cf:return UL;case tu:return QL;case Pv:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),HL;break;case Hl:if(kv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case dL:return TL;case Ps:var a=e,A=this.peekCodePoint(0),d=this.peekCodePoint(1);if(kv(a,A,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Ff(a,A,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Ps&&d===tL)return this.consumeCodePoint(),this.consumeCodePoint(),$L;break;case Wu:if(kv(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case wy:if(this.peekCodePoint(0)===Pv)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Pv&&(c=this.consumeCodePoint(),c===wy))return this.consumeToken();if(c===aa)return this.consumeToken()}break;case cL:return qL;case uL:return KL;case eL:if(this.peekCodePoint(0)===Z6&&this.peekCodePoint(1)===Ps&&this.peekCodePoint(2)===Ps)return this.consumeCodePoint(),this.consumeCodePoint(),RL;break;case rL:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Ff(u,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case nL:return VL;case Bu:if(VA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case oL:return GL;case sL:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),PL;break;case iL:return NL;case aL:return ML;case yL:case _L:var g=this.peekCodePoint(0),w=this.peekCodePoint(1);return g===Hl&&(Ld(w)||w===Sf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case yy:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),OL;if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),kL;break;case AL:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),DL;break;case aa:return sm}return Ef(e)?(this.consumeWhiteSpace(),WL):as(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Lp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:uo(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Ld(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Sf&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(uo.apply(void 0,e.map(function(A){return A===Sf?$x:A})),16),s=parseInt(uo.apply(void 0,e.map(function(A){return A===Sf?Wx:A})),16);return{type:30,start:o,end:s}}var i=parseInt(uo.apply(void 0,e),16);if(this.peekCodePoint(0)===Ps&&Ld(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];Ld(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(uo.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Cf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Cf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===aa)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===zf||t===Bf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===aa||this.peekCodePoint(0)===tu)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),If)}for(;;){var o=this.consumeCodePoint();if(o===aa||o===tu)return{type:22,value:uo.apply(void 0,e)};if(Ef(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===aa||this.peekCodePoint(0)===tu?(this.consumeCodePoint(),{type:22,value:uo.apply(void 0,e)}):(this.consumeBadUrlRemnants(),If);if(o===Bf||o===zf||o===Cf||FL(o))return this.consumeBadUrlRemnants(),If;if(o===Bu)if(VA(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),If;else e.push(o)}},n.prototype.consumeWhiteSpace=function(){for(;Ef(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===tu||e===aa)return;VA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var o=Math.min(t,e);r+=uo.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var o=this._value[r];if(o===aa||o===void 0||o===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(o===Tp)return this._value.splice(0,r),jL;if(o===Bu){var s=this._value[r+1];s!==aa&&s!==void 0&&(s===Tp?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):VA(o,s)&&(t+=this.consumeStringSlice(r),t+=uo(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=dh,r=this.peekCodePoint(0);for((r===Hl||r===Ps)&&e.push(this.consumeCodePoint());as(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===Wu&&as(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=my;as(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===Gx||r===Kx)&&((o===Hl||o===Ps)&&as(s)||as(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=my;as(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[IL(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],o=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Ff(o,s,i)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return o===Y6?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Ld(e)){for(var t=uo(e);Ld(this.peekCodePoint(0))&&t.length<6;)t+=uo(this.consumeCodePoint());Ef(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||BL(r)||r>1114111?by:r}return e===aa?by:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(_y(t))e+=uo(t);else if(VA(t,this.peekCodePoint(0)))e+=uo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),Yx=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new Xx;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||YL(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),fl=function(n){return n.type===15},Bo=function(n){return n.type===17},nn=function(n){return n.type===20},XL=function(n){return n.type===0},im=function(n,e){return nn(n)&&n.value===e},Jx=function(n){return n.type!==31},Wo=function(n){return n.type!==31&&n.type!==4},Ca=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},YL=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},ll=function(n){return n.type===17||n.type===15},Gn=function(n){return n.type===16||ll(n)},Zx=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Vo={type:17,number:0,flags:dh},M1={type:16,number:50,flags:dh},JA={type:16,number:100,flags:dh},hu=function(n,e,t){var r=n[0],o=n[1];return[Tn(r,e),Tn(typeof o<"u"?o:r,t)]},Tn=function(n,e){if(n.type===16)return n.number/100*e;if(fl(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},eB="deg",tB="grad",rB="rad",nB="turn",xg={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case eB:return Math.PI*e.number/180;case tB:return Math.PI/200*e.number;case rB:return e.number;case nB:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},oB=function(n){return n.type===15&&(n.unit===eB||n.unit===tB||n.unit===rB||n.unit===nB)},sB=function(n){var e=n.filter(nn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Vo,Vo];case"to top":case"bottom":return bi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Vo,JA];case"to right":case"left":return bi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[JA,JA];case"to bottom":case"top":return bi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[JA,Vo];case"to left":case"right":return bi(270)}return 0},bi=function(n){return Math.PI*n/180},rl=function(n){return(255&n)===0},Oo=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,o=255&n>>24;return e<255?"rgba(".concat(o,",").concat(r,",").concat(t,",").concat(e/255,")"):"rgb(".concat(o,",").concat(r,",").concat(t,")")},Ba=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},Pp=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},ad=function(n){return(n[0].type===20?n[0].value:"unknown")==="from"},io=function(n,e,t){return Math.min(Math.max(n,e),t)},Rs=function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2],n[3]*e[0]+n[4]*e[1]+n[5]*e[2],n[6]*e[0]+n[7]*e[1]+n[8]*e[2]]},JL=function(n){return Ba(io(Math.round(n[0]*255),0,255),io(Math.round(n[1]*255),0,255),io(Math.round(n[2]*255),0,255),io(n[3],0,1))},H1=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],s=Ad([e,t,r]);return Ba(io(Math.round(s[0]*255),0,255),io(Math.round(s[1]*255),0,255),io(Math.round(s[2]*255),0,255),o)},ch=function(n){var e=pl([n[0],n[1],n[2]]);return H1([e[0],e[1],e[2],n[3]])},ZL=function(n,e){if(ad(e.filter(Wo)))throw new Error("Relative color not supported for lab()");var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ad(pl(Sg([r,o,s])));return Ba(io(Math.round(a[0]*255),0,255),io(Math.round(a[1]*255),0,255),io(Math.round(a[2]*255),0,255),i)},eP=function(n,e){if(ad(e.filter(Wo)))throw new Error("Relative color not supported for oklab()");var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ad(pl(Cg([r,o,s])));return Ba(io(Math.round(a[0]*255),0,255),io(Math.round(a[1]*255),0,255),io(Math.round(a[2]*255),0,255),i)},tP=function(n,e){if(ad(e.filter(Wo)))throw new Error("Relative color not supported for oklch()");var t=AB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ad(pl(Cg(zg([r,o,s]))));return Ba(io(Math.round(a[0]*255),0,255),io(Math.round(a[1]*255),0,255),io(Math.round(a[2]*255),0,255),i)},rP=function(n,e){if(ad(e.filter(Wo)))throw new Error("Relative color not supported for lch()");var t=aB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Ad(pl(Sg(zg([r,o,s]))));return Ba(io(Math.round(a[0]*255),0,255),io(Math.round(a[1]*255),0,255),io(Math.round(a[2]*255),0,255),i)},iB=function(n,e){var t=e.filter(Wo),r=t[0],o=t[1],s=t[2],i=t[3],a=(r.type===17?bi(r.number):xg.parse(n,r))/(Math.PI*2),A=Gn(o)?o.number/100:0,d=Gn(s)?s.number/100:0,c=typeof i<"u"&&Gn(i)?Tn(i,1):1;return[a,A,d,c]},xy=function(n,e){if(ad(e))throw new Error("Relative color not supported for hsl()");var t=iB(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=dB([r,o,s]);return Ba(a[0]*255,a[1]*255,a[2]*255,o===0?1:i)},aB=function(n){var e=n.filter(Wo),t=Gn(e[0])?e[0].number:0,r=Gn(e[1])?e[1].number:0,o=Bo(e[2])||fl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Gn(e[4])?Tn(e[4],1):1;return[t,r,o,s]},Bg=function(n){var e=n.filter(Wo),t=e[0].type===16?e[0].number/100:Bo(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:Bo(e[1])?e[1].number:0,o=Bo(e[2])||fl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Gn(e[4])?Tn(e[4],1):1;return[t,r,o,s]},AB=function(n){var e=n.filter(Wo),t=e[0].type===16?e[0].number/100:Bo(e[0])?e[0].number:0,r=e[1].type===16?e[1].number/100:Bo(e[1])?e[1].number:0,o=Bo(e[2])||fl(e[2])?e[2].number:0,s=typeof e[4]<"u"&&Gn(e[4])?Tn(e[4],1):1;return[t,r,o,s]},lB=function(n){return Rs([1.0479297925449969,.022946870601609652,-.05019226628920524,.02962780877005599,.9904344267538799,-.017073799063418826,-.009243040646204504,.015055191490298152,.7518742814281371],n)},j1=function(n){return Rs([.955473421488075,-.02309845494876471,.06325924320057072,-.0283697093338637,1.0099953980813041,.021041441191917323,.012314014864481998,-.020507649298898964,1.330365926242124],n)},Ov=function(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n},dB=function(n){var e=n[0],t=n[1],r=n[2];if(t===0)return[r*255,r*255,r*255];var o=r<=.5?r*(t+1):r+t-r*t,s=r*2-o,i=Ov(s,o,e+1/3),a=Ov(s,o,e),A=Ov(s,o,e-1/3);return[i,a,A]},zg=function(n){var e=n[0],t=n[1],r=n[2];return t<0&&(t=0),isNaN(r)&&(r=0),[e,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},Cg=function(n){var e=Rs([1,.3963377773761749,.2158037573099136,1,-.1055613458156586,-.0638541728258133,1,-.0894841775298119,-1.2914855480194092],n),t=e.map(function(r){return Math.pow(r,3)});return Rs([1.2268798758459243,-.5578149944602171,.2813910456659647,-.0405757452148008,1.112286803280317,-.0717110580655164,-.0763729366746601,-.4214933324022432,1.5869240198367816],t)},Sg=function(n){var e=(n[0]+16)/116,t=n[1]/500+e,r=e-n[2]/200,o=24389/27,s=24/116,i=[(t>s?Math.pow(t,3):(116*t-16)/o)*.3457/.3585,n[0]>8?Math.pow(e,3):n[0]/o,(r>s?Math.pow(r,3):(116*r-16)/o)*(1-.3457-.3585)/.3585];return j1([i[0],i[1],i[2]])},nP=function(n,e){var t=e.filter(Wo);if(t.length===3){var r=t.map(Pp),o=r[0],s=r[1],i=r[2],a=Am([o/255,s/255,i/255]),A=am([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,1]}if(t.length===4){var h=t.map(Pp),o=h[0],s=h[1],i=h[2],f=h[3],a=Am([o/255,s/255,i/255]),g=am([a[0],a[1],a[2]]),d=g[0],c=g[1],u=g[2];return[d,c,u,f]}return[0,0,0,1]},oP=function(n,e){var t=iB(n,e),r=t[0],o=t[1],s=t[2],i=t[3],a=Am(dB([r,o,s])),A=am([a[0],a[1],a[2]]),d=A[0],c=A[1],u=A[2];return[d,c,u,i]},sP=function(n,e){var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Sg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},iP=function(n,e){var t=aB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Sg(zg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},aP=function(n,e){var t=AB(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Cg(zg([r,o,s])),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},AP=function(n,e){var t=Bg(e),r=t[0],o=t[1],s=t[2],i=t[3],a=Cg([r,o,s]),A=a[0],d=a[1],c=a[2];return[A,d,c,i]},lP=function(n){return j1([n[0],n[1],n[2]])},By=function(n){return n},dP=function(n){var e=lB([n[0],n[2],n[3]]),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},zy=function(n){return ch([n[0],n[1],n[2],n[3]])},cP=function(n){var e=lP([n[0],n[1],n[2]]);return ch([e[0],e[1],e[2],n[3]])},pl=function(n){return Rs([3.2409699419045226,-1.537383177570094,-.4986107602930034,-.9692436362808796,1.8759675015077202,.04155505740717559,.05563007969699366,-.20397695888897652,1.0569715142428786],n)},am=function(n){return Rs([.41239079926595934,.357584339383878,.1804807884018343,.21263900587151027,.715168678767756,.07219231536073371,.01933081871559182,.11919477979462598,.9505321522496607],n)},Ad=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r>.0031308?t*(1.055*Math.pow(r,1/2.4)-.055):12.92*e})},Am=function(n){return n.map(function(e){var t=e<0?-1:1,r=Math.abs(e);return r<=.04045?e/12.92:t*Math.pow((r+.055)/1.055,2.4)})},uP=function(n){var e=Ad(pl([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},hP=function(n){var e=pl([n[0],n[1],n[2]]),t=e[0],r=e[1],o=e[2];return[io(Math.round(t*255),0,255),io(Math.round(r*255),0,255),io(Math.round(o*255),0,255),n[3]]},fP=function(n){return Rs([.4865709486482162,.26566769316909306,.1982172852343625,.2289745640697488,.6917385218365064,.079286914093745,0,.04511338185890264,1.043944368900976],n)},pP=function(n){return Rs([2.493496911941425,-.9313836179191239,-.40271078445071684,-.8294889695615747,1.7626640603183463,.023624685841943577,.03584583024378447,-.07617238926804182,.9568845240076872],n)},gP=function(n){return n.map(function(e){var t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*Math.pow((e+.055)/1.055,2.4)||0})},vP=function(n){return Ad(n)},mP=function(n){var e=gP([n[0],n[1],n[2]]);return fP([e[0],e[1],e[2]])},wP=function(n){var e=vP(pP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},yP=function(n){var e=mP([n[0],n[1],n[2]]);return ch([e[0],e[1],e[2],n[3]])},bP=function(n){return Rs([2.0415879038107465,-.5650069742788596,-.34473135077832956,-.9692436362808795,1.8759675015077202,.04155505740717557,.013444280632031142,-.11836239223101838,1.0151749943912054],n)},_P=function(n){return Rs([.5766690429101305,.1855582379065463,.1882286462349947,.29734497525053605,.6273635662554661,.0752914584939978,.02703136138641234,.07068885253582723,.9913375368376388],n)},xP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,2.19921875)});return[e[0],e[1],e[2]]},BP=function(n){var e=n.map(function(t){var r=t<0?-1:1,o=Math.abs(t);return r*Math.pow(o,.4547069271758437)});return[e[0],e[1],e[2]]},zP=function(n){var e=BP(bP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},CP=function(n){var e=pl(_P(xP([n[0],n[1],n[2]])));return H1([e[0],e[1],e[2],n[3]])},SP=function(n){return Rs([.7977666449006423,.13518129740053308,.0313477341283922,.2880748288194013,.711835234241873,8993693872564e-17,0,0,.8251046025104602],n)},EP=function(n){return Rs([1.3457868816471583,-.25557208737979464,-.05110186497554526,-.5446307051249019,1.5082477428451468,.02052744743642139,0,0,1.2119675456389452],n)},FP=function(n){return n.map(function(e){return e<16/512?e/16:Math.pow(e,1.8)})},IP=function(n){return n.map(function(e){return e>1/512?Math.pow(e,1/1.8):e*16})},UP=function(n){var e=FP([n[0],n[1],n[2]]);return j1(SP([e[0],e[1],e[2]]))},QP=function(n){var e=IP(EP(lB([n[0],n[1],n[2]]))),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},TP=function(n){var e=UP([n[0],n[1],n[2]]);return ch([e[0],e[1],e[2],n[3]])},kp=1.09929682680944,cB=.018053968510807,LP=function(n){return n.map(function(e){return e<cB*4.5?e/4.5:Math.pow((e+kp-1)/kp,1/.45)})},PP=function(n){return n.map(function(e){return e>=cB?kp*Math.pow(e,.45)-(kp-1):4.5*e})},kP=function(n){return Rs([.6369580483012914,.14461690358620832,.1688809751641721,.2627002120112671,.6779980715188708,.05930171646986196,0,.028072693049087428,1.060985057710791],n)},OP=function(n){return Rs([1.716651187971268,-.355670783776392,-.25336628137366,-.666684351832489,1.616481236634939,.0157685458139111,.017639857445311,-.042770613257809,.942103121235474],n)},DP=function(n){var e=LP([n[0],n[1],n[2]]);return kP([e[0],e[1],e[2]])},NP=function(n){var e=PP(OP([n[0],n[1],n[2]])),t=e[0],r=e[1],o=e[2];return[t,r,o,n[3]]},MP=function(n){var e=DP([n[0],n[1],n[2]]);return ch([e[0],e[1],e[2],n[3]])},nl={name:"color",parse:function(n,e){if(e.type===18){var t=$P[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'.concat(e.name,'"'));return t(n,e.values)}if(e.type===5){var r=uB(e),o=r[0],s=r[1],i=r[2],a=r[3];return Ba(o,s,i,a)}if(e.type===20){var A=va[e.value.toUpperCase()];if(typeof A<"u")return A}return va.TRANSPARENT}},uB=function(n){if(n.value.length===3){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),1]}if(n.value.length===4){var e=n.value.substring(0,1),t=n.value.substring(1,2),r=n.value.substring(2,3),o=n.value.substring(3,4);return[parseInt(e+e,16),parseInt(t+t,16),parseInt(r+r,16),parseInt(o+o,16)/255]}if(n.value.length===6){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),1]}if(n.value.length===8){var e=n.value.substring(0,2),t=n.value.substring(2,4),r=n.value.substring(4,6),o=n.value.substring(6,8);return[parseInt(e,16),parseInt(t,16),parseInt(r,16),parseInt(o,16)/255]}return[0,0,0,1]},Cy=function(n,e){var t=e.filter(Wo);if(ad(t))throw new Error("Relative color not supported for rgb()");if(t.length===3){var r=t.map(Pp),o=r[0],s=r[1],i=r[2];return Ba(o,s,i,1)}if(t.length===4){var a=t.map(Pp),o=a[0],s=a[1],i=a[2],A=a[3];return Ba(o,s,i,A)}return 0},HP=function(n,e){var t=e.filter(Wo),r=t[0].type===20?t[0].value:"unknown",o=!ad(t);if(o){var s=r,i=Sy[s];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(s,'" for color() function'));var a=Bo(t[1])?t[1].number:0,A=Bo(t[2])?t[2].number:0,d=Bo(t[3])?t[3].number:0,c=t.length>4&&t[4].type===6&&t[4].value==="/"&&Bo(t[5])?t[5].number:1;return i([a,A,d,c])}else{var u=function(he,ie){if(Bo(ie))return ie.number;var be=function(z){return z==="r"||z==="x"?0:z==="g"||z==="y"?1:2};if(nn(ie)){var te=be(ie.value);return he[te]}var Z=function(z){for(var F=z.filter(Wo),E="(",U=0,P=F;U<P.length;U++){var T=P[U];E+=T.type===18&&T.name==="calc"?Z(T.values):Bo(T)?T.number:T.type===6||nn(T)?T.value:""}return E+=")",E};if(ie.type===18){var Ae=ie.values.filter(Wo);if(ie.name==="calc"){var we=Z(Ae).replace(/r|x/,he[0].toString()).replace(/g|y/,he[1].toString()).replace(/b|z/,he[2].toString());return new Function("return "+we)()}}return null},h=t[1].type===18?t[1].name:nn(t[1])||t[1].type===5?"rgb":"unknown",f=nn(t[2])?t[2].value:"unknown",g=t[1].type===18?t[1].values:nn(t[1])?[t[1]]:[];if(nn(t[1])){var w=va[t[1].value.toUpperCase()];if(typeof w>"u")throw new Error("Attempting to use unknown color in relative color 'from'");var y=ac(n,t[1].value),x=255&y,C=255&y>>8,I=255&y>>16,N=255&y>>24;g=[{type:17,number:N,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}else if(t[1].type===5){var k=uB(t[1]),N=k[0],I=k[1],C=k[2],x=k[3];g=[{type:17,number:N,flags:1},{type:17,number:I,flags:1},{type:17,number:C,flags:1},{type:17,number:x>1?x/255:x,flags:1}]}if(g.length===0)throw new Error("Attempting to use unknown color in relative color 'from'");if(f==="unknown")throw new Error("Attempting to use unknown colorspace in relative color 'to'");var ee=jP[h],G=RP[f],H=Sy[f];if(typeof ee>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(h,'" for color() function'));if(typeof G>"u")throw new Error('Attempting to parse an unsupported color space "'.concat(f,'" for color() function'));var Y=ee(n,g),Be=G(Y),a=u(Be,t[3]),A=u(Be,t[4]),d=u(Be,t[5]),c=t.length>6&&t[6].type===6&&t[6].value==="/"&&Bo(t[7])?t[7].number:1;if(a===null||A===null||d===null)throw new Error("Invalid relative color in color() function");return H([a,A,d,c])}},Sy={srgb:JL,"srgb-linear":H1,"display-p3":yP,"a98-rgb":CP,"prophoto-rgb":TP,xyz:zy,"xyz-d50":cP,"xyz-d65":zy,rec2020:MP},jP={rgb:nP,hsl:oP,lab:sP,lch:iP,oklab:AP,oklch:aP},RP={srgb:uP,"srgb-linear":hP,"display-p3":wP,"a98-rgb":zP,"prophoto-rgb":QP,xyz:By,"xyz-d50":dP,"xyz-d65":By,rec2020:NP},$P={hsl:xy,hsla:xy,rgb:Cy,rgba:Cy,lch:rP,oklch:tP,oklab:eP,lab:ZL,color:HP},ac=function(n,e){return nl.parse(n,Yx.create(e).parseComponentValue())},va={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qP={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(nn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},KP={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Eg=function(n,e){var t=nl.parse(n,e[0]),r=e[1];return r&&Gn(r)?{color:t,stop:r}:{color:t,stop:null}},Ey=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Vo),r.stop===null&&(r.stop=JA);for(var o=[],s=0,i=0;i<n.length;i++){var a=n[i].stop;if(a!==null){var A=Tn(a,e);A>s?o.push(A):o.push(s),s=A}else o.push(null)}for(var d=null,i=0;i<o.length;i++){var c=o[i];if(c===null)d===null&&(d=i);else if(d!==null){for(var u=i-d,h=o[d-1],f=(c-h)/(u+1),g=1;g<=u;g++)o[d+g-1]=f*g;d=null}}return n.map(function(w,y){var x=w.color;return{color:x,stop:Math.max(Math.min(1,o[y]/e),0)}})},VP=function(n,e,t){var r=e/2,o=t/2,s=Tn(n[0],e)-r,i=o-Tn(n[1],t);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},GP=function(n,e,t){var r=typeof n=="number"?n:VP(n,e,t),o=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,i=t/2,a=o/2,A=Math.sin(r-Math.PI/2)*a,d=Math.cos(r-Math.PI/2)*a;return[o,s-d,s+d,i-A,i+A]},Pi=function(n,e){return Math.sqrt(n*n+e*e)},Fy=function(n,e,t,r,o){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(i,a){var A=a[0],d=a[1],c=Pi(t-A,r-d);return(o?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:a,optimumDistance:c}:i},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},WP=function(n,e,t,r,o){var s=0,i=0;switch(n.size){case 0:n.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(t),Math.abs(t-o)));break;case 2:if(n.shape===0)s=i=Math.min(Pi(e,t),Pi(e,t-o),Pi(e-r,t),Pi(e-r,t-o));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-o))/Math.min(Math.abs(e),Math.abs(e-r)),A=Fy(r,o,e,t,!0),d=A[0],c=A[1];s=Pi(d-e,(c-t)/a),i=a*s}break;case 1:n.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-o)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(t),Math.abs(t-o)));break;case 3:if(n.shape===0)s=i=Math.max(Pi(e,t),Pi(e,t-o),Pi(e-r,t),Pi(e-r,t-o));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-o))/Math.max(Math.abs(e),Math.abs(e-r)),u=Fy(r,o,e,t,!1),d=u[0],c=u[1];s=Pi(d-e,(c-t)/a),i=a*s}break}return Array.isArray(n.size)&&(s=Tn(n.size[0],r),i=n.size.length===2?Tn(n.size[1],o):s),[s,i]},XP=function(n,e){var t=bi(180),r=[];return Ca(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&i.value==="to"){t=sB(o);return}else if(oB(i)){t=xg.parse(n,i);return}}var a=Eg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},Uf=function(n,e){var t=bi(180),r=[];return Ca(e).forEach(function(o,s){if(s===0){var i=o[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=sB(o);return}else if(oB(i)){t=(xg.parse(n,i)+bi(270))%bi(360);return}}var a=Eg(n,o);r.push(a)}),{angle:t,stops:r,type:1}},YP=function(n,e){var t=bi(180),r=[],o=1,s=0,i=3,a=[];return Ca(e).forEach(function(A,d){var c=A[0];if(d===0){if(nn(c)&&c.value==="linear"){o=1;return}else if(nn(c)&&c.value==="radial"){o=2;return}}if(c.type===18){if(c.name==="from"){var u=nl.parse(n,c.values[0]);r.push({stop:Vo,color:u})}else if(c.name==="to"){var u=nl.parse(n,c.values[0]);r.push({stop:JA,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Wo);if(h.length===2){var u=nl.parse(n,h[1]),f=h[0];Bo(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:u})}}}}),o===1?{angle:(t+bi(180))%bi(360),stops:r,type:o}:{size:i,shape:s,stops:r,position:a,type:o}},hB="closest-side",fB="farthest-side",pB="closest-corner",gB="farthest-corner",vB="circle",mB="ellipse",wB="cover",yB="contain",JP=function(n,e){var t=0,r=3,o=[],s=[];return Ca(e).forEach(function(i,a){var A=!0;if(a===0){var d=!1;A=i.reduce(function(u,h){if(d)if(nn(h))switch(h.value){case"center":return s.push(M1),u;case"top":case"left":return s.push(Vo),u;case"right":case"bottom":return s.push(JA),u}else(Gn(h)||ll(h))&&s.push(h);else if(nn(h))switch(h.value){case vB:return t=0,!1;case mB:return t=1,!1;case"at":return d=!0,!1;case hB:return r=0,!1;case wB:case fB:return r=1,!1;case yB:case pB:return r=2,!1;case gB:return r=3,!1}else if(ll(h)||Gn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},A)}if(A){var c=Eg(n,i);o.push(c)}}),{size:r,shape:t,stops:o,position:s,type:2}},Qf=function(n,e){var t=0,r=3,o=[],s=[];return Ca(e).forEach(function(i,a){var A=!0;if(a===0?A=i.reduce(function(c,u){if(nn(u))switch(u.value){case"center":return s.push(M1),!1;case"top":case"left":return s.push(Vo),!1;case"right":case"bottom":return s.push(JA),!1}else if(Gn(u)||ll(u))return s.push(u),!1;return c},A):a===1&&(A=i.reduce(function(c,u){if(nn(u))switch(u.value){case vB:return t=0,!1;case mB:return t=1,!1;case yB:case hB:return r=0,!1;case fB:return r=1,!1;case pB:return r=2,!1;case wB:case gB:return r=3,!1}else if(ll(u)||Gn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},A)),A){var d=Eg(n,i);o.push(d)}}),{size:r,shape:t,stops:o,position:s,type:2}},ZP=function(n){return n.type===1},ek=function(n){return n.type===2},R1={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=bB[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'.concat(e.name,'"'));return r(n,e.values)}throw new Error("Unsupported image type ".concat(e.type))}};function tk(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!bB[n.name])}var bB={"linear-gradient":XP,"-moz-linear-gradient":Uf,"-ms-linear-gradient":Uf,"-o-linear-gradient":Uf,"-webkit-linear-gradient":Uf,"radial-gradient":JP,"-moz-radial-gradient":Qf,"-ms-radial-gradient":Qf,"-o-radial-gradient":Qf,"-webkit-radial-gradient":Qf,"-webkit-gradient":YP},rk={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return Wo(r)&&tk(r)}).map(function(r){return R1.parse(n,r)})}},nk={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(nn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ok={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Ca(e).map(function(t){return t.filter(Gn)}).map(Zx)}},sk={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Ca(e).map(function(t){return t.filter(nn).map(function(r){return r.value}).join(" ")}).map(ik)}},ik=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ac;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Ac||(Ac={}));var ak={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Ca(e).map(function(t){return t.filter(Ak)})}},Ak=function(n){return nn(n)||Gn(n)},Fg=function(n){return{name:"border-".concat(n,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},lk=Fg("top"),dk=Fg("right"),ck=Fg("bottom"),uk=Fg("left"),Ig=function(n){return{name:"border-radius-".concat(n),initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Zx(t.filter(Gn))}}},hk=Ig("top-left"),fk=Ig("top-right"),pk=Ig("bottom-right"),gk=Ig("bottom-left"),Ug=function(n){return{name:"border-".concat(n,"-style"),initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},vk=Ug("top"),mk=Ug("right"),wk=Ug("bottom"),yk=Ug("left"),Qg=function(n){return{name:"border-".concat(n,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e,t){return fl(t)?t.number:0}}},bk=Qg("top"),_k=Qg("right"),xk=Qg("bottom"),Bk=Qg("left"),zk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ck={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Sk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).reduce(function(t,r){return t|Ek(r.value)},0)}},Ek=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Fk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ik={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Op;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Op||(Op={}));var Uk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Op.STRICT;case"normal":default:return Op.NORMAL}}},Qk={name:"line-height",initialValue:"normal",prefix:!1,type:4},Iy=function(n,e){return nn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Gn(n)?Tn(n,e):e},Tk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:R1.parse(n,e)}},Lk={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},lm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Tg=function(n){return{name:"margin-".concat(n),initialValue:"0",prefix:!1,type:4}},Pk=Tg("top"),kk=Tg("right"),Ok=Tg("bottom"),Dk=Tg("left"),Nk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Mk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Lg=function(n){return{name:"padding-".concat(n),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Hk=Lg("top"),jk=Lg("right"),Rk=Lg("bottom"),$k=Lg("left"),qk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Kk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Vk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&im(e[0],"none")?[]:Ca(e).map(function(t){for(var r={color:va.TRANSPARENT,offsetX:Vo,offsetY:Vo,blur:Vo},o=0,s=0;s<t.length;s++){var i=t[s];ll(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:r.blur=i,o++):r.color=nl.parse(n,i)}return r})}},Gk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Wk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=Jk[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return t(e.values)}return null}},Xk=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Yk=function(n){var e=n.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var o=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,o,s,i,a]:null},Jk={matrix:Xk,matrix3d:Yk},Uy={type:16,number:50,flags:dh},Zk=[Uy,Uy],eO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Gn);return t.length!==2?Zk:[t[0],t[1]]}},tO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},zu;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(zu||(zu={}));var rO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return zu.BREAK_ALL;case"keep-all":return zu.KEEP_ALL;case"normal":default:return zu.NORMAL}}},nO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(Bo(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},_B={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},oO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return Bo(e)?e.number:1}},sO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},iO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},aO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:t.push(o.value);break;case 17:t.push(o.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'".concat(o,"'")})}},AO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},lO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(Bo(e))return e.number;if(nn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},dO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(nn).map(function(t){return t.value})}},cO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Fo=function(n,e){return(n&e)!==0},uO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},hO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],o=e.filter(Jx),s=0;s<o.length;s++){var i=o[s],a=o[s+1];if(i.type===20){var A=a&&Bo(a)?a.number:1;r.push({counter:i.value,increment:A})}}return r}},fO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(Jx),o=0;o<r.length;o++){var s=r[o],i=r[o+1];if(nn(s)&&s.value!=="none"){var a=i&&Bo(i)?i.number:0;t.push({counter:s.value,reset:a})}}return t}},pO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(fl).map(function(t){return _B.parse(n,t)})}},gO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],o=e.filter(XL);if(o.length%2!==0)return null;for(var s=0;s<o.length;s+=2){var i=o[s].value,a=o[s+1].value;r.push({open:i,close:a})}return r}},Qy=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},vO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&im(e[0],"none")?[]:Ca(e).map(function(t){for(var r={color:255,offsetX:Vo,offsetY:Vo,blur:Vo,spread:Vo,inset:!1},o=0,s=0;s<t.length;s++){var i=t[s];im(i,"inset")?r.inset=!0:ll(i)?(o===0?r.offsetX=i:o===1?r.offsetY=i:o===2?r.blur=i:r.spread=i,o++):r.color=nl.parse(n,i)}return r})}},mO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(nn).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},wO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},yO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return fl(e)?e.number:0}},bO={name:"objectFit",initialValue:"fill",prefix:!1,type:1,parse:function(n,e){return e.filter(nn).reduce(function(t,r){return t|_O(r.value)},0)}},_O=function(n){switch(n){case"contain":return 2;case"cover":return 4;case"none":return 8;case"scale-down":return 16}return 0},xO=function(){function n(e,t){var r,o;this.animationDuration=rr(e,pO,t.animationDuration),this.backgroundClip=rr(e,qP,t.backgroundClip),this.backgroundColor=rr(e,KP,t.backgroundColor),this.backgroundImage=rr(e,rk,t.backgroundImage),this.backgroundOrigin=rr(e,nk,t.backgroundOrigin),this.backgroundPosition=rr(e,ok,t.backgroundPosition),this.backgroundRepeat=rr(e,sk,t.backgroundRepeat),this.backgroundSize=rr(e,ak,t.backgroundSize),this.borderTopColor=rr(e,lk,t.borderTopColor),this.borderRightColor=rr(e,dk,t.borderRightColor),this.borderBottomColor=rr(e,ck,t.borderBottomColor),this.borderLeftColor=rr(e,uk,t.borderLeftColor),this.borderTopLeftRadius=rr(e,hk,t.borderTopLeftRadius),this.borderTopRightRadius=rr(e,fk,t.borderTopRightRadius),this.borderBottomRightRadius=rr(e,pk,t.borderBottomRightRadius),this.borderBottomLeftRadius=rr(e,gk,t.borderBottomLeftRadius),this.borderTopStyle=rr(e,vk,t.borderTopStyle),this.borderRightStyle=rr(e,mk,t.borderRightStyle),this.borderBottomStyle=rr(e,wk,t.borderBottomStyle),this.borderLeftStyle=rr(e,yk,t.borderLeftStyle),this.borderTopWidth=rr(e,bk,t.borderTopWidth),this.borderRightWidth=rr(e,_k,t.borderRightWidth),this.borderBottomWidth=rr(e,xk,t.borderBottomWidth),this.borderLeftWidth=rr(e,Bk,t.borderLeftWidth),this.boxShadow=rr(e,vO,t.boxShadow),this.color=rr(e,zk,t.color),this.direction=rr(e,Ck,t.direction),this.display=rr(e,Sk,t.display),this.float=rr(e,Fk,t.cssFloat),this.fontFamily=rr(e,aO,t.fontFamily),this.fontSize=rr(e,AO,t.fontSize),this.fontStyle=rr(e,cO,t.fontStyle),this.fontVariant=rr(e,dO,t.fontVariant),this.fontWeight=rr(e,lO,t.fontWeight),this.letterSpacing=rr(e,Ik,t.letterSpacing),this.lineBreak=rr(e,Uk,t.lineBreak),this.lineHeight=rr(e,Qk,t.lineHeight),this.listStyleImage=rr(e,Tk,t.listStyleImage),this.listStylePosition=rr(e,Lk,t.listStylePosition),this.listStyleType=rr(e,lm,t.listStyleType),this.marginTop=rr(e,Pk,t.marginTop),this.marginRight=rr(e,kk,t.marginRight),this.marginBottom=rr(e,Ok,t.marginBottom),this.marginLeft=rr(e,Dk,t.marginLeft),this.opacity=rr(e,oO,t.opacity);var s=rr(e,Nk,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=rr(e,Mk,t.overflowWrap),this.paddingTop=rr(e,Hk,t.paddingTop),this.paddingRight=rr(e,jk,t.paddingRight),this.paddingBottom=rr(e,Rk,t.paddingBottom),this.paddingLeft=rr(e,$k,t.paddingLeft),this.paintOrder=rr(e,mO,t.paintOrder),this.position=rr(e,Kk,t.position),this.textAlign=rr(e,qk,t.textAlign),this.textDecorationColor=rr(e,sO,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=rr(e,iO,(o=t.textDecorationLine)!==null&&o!==void 0?o:t.textDecoration),this.textShadow=rr(e,Vk,t.textShadow),this.textTransform=rr(e,Gk,t.textTransform),this.transform=rr(e,Wk,t.transform),this.transformOrigin=rr(e,eO,t.transformOrigin),this.visibility=rr(e,tO,t.visibility),this.webkitTextStrokeColor=rr(e,wO,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=rr(e,yO,t.webkitTextStrokeWidth),this.wordBreak=rr(e,rO,t.wordBreak),this.zIndex=rr(e,nO,t.zIndex),this.objectFit=rr(e,bO,t.objectFit)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return rl(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return Fo(this.display,4)||Fo(this.display,33554432)||Fo(this.display,268435456)||Fo(this.display,536870912)||Fo(this.display,67108864)||Fo(this.display,134217728)},n}(),BO=function(){function n(e,t){this.content=rr(e,uO,t.content),this.quotes=rr(e,gO,t.quotes)}return n}(),Ty=function(){function n(e,t){this.counterIncrement=rr(e,hO,t.counterIncrement),this.counterReset=rr(e,fO,t.counterReset)}return n}(),rr=function(n,e,t){var r=new Xx,o=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(o);var s=new Yx(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(n,nn(i)?i.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return xg.parse(n,s.parseComponentValue());case"color":return nl.parse(n,s.parseComponentValue());case"image":return R1.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return ll(a)?a:Vo;case"length-percentage":var A=s.parseComponentValue();return Gn(A)?A:Vo;case"time":return _B.parse(n,s.parseComponentValue())}break}},zO="data-html2canvas-debug",CO=function(n){var e=n.getAttribute(zO);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},dm=function(n,e){var t=CO(n);return t===1||e===t},Sa=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,dm(t,3))debugger;this.styles=new xO(e,window.getComputedStyle(t,null)),hm(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=bg(this.context,t),dm(t,4)&&(this.flags|=16)}return n}(),SO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ly="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Tf=0;Tf<Ly.length;Tf++)fu[Ly.charCodeAt(Tf)]=Tf;var EO=function(n){var e=n.length*.75,t=n.length,r,o=0,s,i,a,A;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<t;r+=4)s=fu[n.charCodeAt(r)],i=fu[n.charCodeAt(r+1)],a=fu[n.charCodeAt(r+2)],A=fu[n.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|A&63;return d},FO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},IO=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Vl=5,$1=11,Dv=2,UO=$1-Vl,xB=65536>>Vl,QO=1<<Vl,Nv=QO-1,TO=1024>>Vl,LO=xB+TO,PO=LO,kO=32,OO=PO+kO,DO=65536>>$1,NO=1<<UO,MO=NO-1,Py=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},HO=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},jO=function(n,e){var t=EO(n),r=Array.isArray(t)?IO(t):new Uint32Array(t),o=Array.isArray(t)?FO(t):new Uint16Array(t),s=24,i=Py(o,s/2,r[4]/2),a=r[5]===2?Py(o,(s+r[4])/2):HO(r,Math.ceil((s+r[4])/4));return new RO(r[0],r[1],r[2],r[3],i,a)},RO=function(){function n(e,t,r,o,s,i){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=o,this.index=s,this.data=i}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Vl],t=(t<<Dv)+(e&Nv),this.data[t];if(e<=65535)return t=this.index[xB+(e-55296>>Vl)],t=(t<<Dv)+(e&Nv),this.data[t];if(e<this.highStart)return t=OO-DO+(e>>$1),t=this.index[t],t+=e>>Vl&MO,t=this.index[t],t=(t<<Dv)+(e&Nv),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),ky="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$O=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lf=0;Lf<ky.length;Lf++)$O[ky.charCodeAt(Lf)]=Lf;var qO=1,Mv=2,Hv=3,Oy=4,Dy=5,KO=7,Ny=8,jv=9,Rv=10,My=11,Hy=12,jy=13,Ry=14,$v=15,VO=function(n){for(var e=[],t=0,r=n.length;t<r;){var o=n.charCodeAt(t++);if(o>=55296&&o<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),t--)}else e.push(o)}return e},GO=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],o=-1,s="";++o<t;){var i=n[o];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(o+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},WO=jO(SO),mi="",qv="",XO=function(n){return WO.get(n)},YO=function(n,e,t){var r=t-2,o=e[r],s=e[t-1],i=e[t];if(s===Mv&&i===Hv)return mi;if(s===Mv||s===Hv||s===Oy||i===Mv||i===Hv||i===Oy)return qv;if(s===Ny&&[Ny,jv,My,Hy].indexOf(i)!==-1||(s===My||s===jv)&&(i===jv||i===Rv)||(s===Hy||s===Rv)&&i===Rv||i===jy||i===Dy||i===KO||s===qO)return mi;if(s===jy&&i===Ry){for(;o===Dy;)o=e[--r];if(o===Ry)return mi}if(s===$v&&i===$v){for(var a=0;o===$v;)a++,o=e[--r];if(a%2===0)return mi}return qv},JO=function(n){var e=VO(n),t=e.length,r=0,o=0,s=e.map(XO);return{next:function(){if(r>=t)return{done:!0,value:null};for(var i=mi;r<t&&(i=YO(e,s,++r))===mi;);if(i!==mi||r===t){var a=GO.apply(null,e.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},ZO=function(n){for(var e=JO(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},e8=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height="".concat(e,"px"),r.style.display="block",n.body.appendChild(r),t.selectNode(r);var o=t.getBoundingClientRect(),s=Math.round(o.height);if(n.body.removeChild(r),s===e)return!0}}return!1},t8=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=_g(r.data).map(function(A){return uo(A)}),s=0,i={},a=o.every(function(A,d){t.setStart(r,s),t.setEnd(r,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>i.x||c.y>i.y;return i=c,d===0?!0:u});return n.body.removeChild(e),a},r8=function(){return typeof new Image().crossOrigin<"u"},n8=function(){return typeof new XMLHttpRequest().responseType=="string"},o8=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},$y=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},s8=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var o=new Image,s=e.toDataURL();o.src=s;var i=cm(t,t,0,0,o);return r.fillStyle="red",r.fillRect(0,0,t,t),qy(i).then(function(a){r.drawImage(a,0,0);var A=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=n.createElement("div");return d.style.backgroundImage="url(".concat(s,")"),d.style.height="".concat(t,"px"),$y(A)?qy(cm(t,t,0,0,d)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),$y(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},cm=function(n,e,t,r,o){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),i},qy=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},qo={get SUPPORT_RANGE_BOUNDS(){var n=e8(document);return Object.defineProperty(qo,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=qo.SUPPORT_RANGE_BOUNDS&&t8(document);return Object.defineProperty(qo,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=o8(document);return Object.defineProperty(qo,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?s8(document):Promise.resolve(!1);return Object.defineProperty(qo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=r8();return Object.defineProperty(qo,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=n8();return Object.defineProperty(qo,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(qo,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(qo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Cu=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),i8=function(n,e,t,r){var o=l8(e,t),s=[],i=0;return o.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(qo.SUPPORT_RANGE_BOUNDS){var A=Ky(r,i,a.length).getClientRects();if(A.length>1){var d=q1(a),c=0;d.forEach(function(h){s.push(new Cu(h,vA.fromDOMRectList(n,Ky(r,c+i,h.length).getClientRects()))),c+=h.length})}else s.push(new Cu(a,vA.fromDOMRectList(n,A)))}else{var u=r.splitText(a.length);s.push(new Cu(a,a8(n,r))),r=u}else qo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),s},a8=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var s=bg(n,r);return r.firstChild&&o.replaceChild(r.firstChild,r),s}}return vA.EMPTY},Ky=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(n,e),o.setEnd(n,e+t),o},q1=function(n){if(qo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return ZO(n)},A8=function(n,e){if(qo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return c8(n,e)},l8=function(n,e){return e.letterSpacing!==0?q1(n):A8(n,e)},d8=[32,160,4961,65792,65793,4153,4241],c8=function(n,e){for(var t=$6(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,s=function(){if(o.value){var i=o.value.slice(),a=_g(i),A="";a.forEach(function(d){d8.indexOf(d)===-1?A+=uo(d):(A.length&&r.push(A),r.push(uo(d)),A="")}),A.length&&r.push(A)}};!(o=t.next()).done;)s();return r},u8=function(){function n(e,t,r){this.text=h8(t.data,r.textTransform),this.textBounds=i8(e,this.text,r,t)}return n}(),h8=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(f8,p8);case 2:return n.toUpperCase();default:return n}},f8=/(^|\s|:|-|\(|\))([a-z])/g,p8=function(n,e,t){return n.length>0?e+t.toUpperCase():n},BB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}(Sa),zB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}(Sa),CB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=new XMLSerializer,i=bg(t,r);return r.setAttribute("width","".concat(i.width,"px")),r.setAttribute("height","".concat(i.height,"px")),o.svg="data:image/svg+xml,".concat(encodeURIComponent(s.serializeToString(r))),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(Sa),SB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Sa),um=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}(Sa),g8=[{type:15,flags:0,unit:"px",number:3}],v8=[{type:16,flags:0,number:50}],m8=function(n){return n.width>n.height?new vA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new vA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},w8=function(n){var e=n.type===y8?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Dp="checkbox",Np="radio",y8="password",Vy=707406591,K1=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=w8(r),(o.type===Dp||o.type===Np)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=m8(o.bounds)),o.type){case Dp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=g8;break;case Np:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=v8;break}return o}return e}(Sa),EB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return o.value=s&&s.text||"",o}return e}(Sa),FB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.value=r.value,o}return e}(Sa),IB=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=QB(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?ac(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):va.TRANSPARENT,i=r.contentWindow.document.body?ac(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):va.TRANSPARENT;o.backgroundColor=rl(s)?rl(i)?o.styles.backgroundColor:i:s}}catch{}return o}return e}(Sa),b8=["OL","UL","MENU"],ep=function(n,e,t,r){for(var o=e.firstChild,s=void 0;o;o=s)if(s=o.nextSibling,TB(o)&&o.data.length>0)t.textNodes.push(new u8(n,o,t.styles));else if(Xd(o))if(OB(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return ep(n,a,t,r)});else{var i=UB(n,o);i.styles.isVisible()&&(_8(o,i,r)?i.flags|=4:x8(i.styles)&&(i.flags|=2),b8.indexOf(o.tagName)!==-1&&(i.flags|=8),t.elements.push(i),o.slot,o.shadowRoot?ep(n,o.shadowRoot,i,r):!Mp(o)&&!LB(o)&&!Hp(o)&&ep(n,o,i,r))}},UB=function(n,e){return fm(e)?new BB(n,e):PB(e)?new zB(n,e):LB(e)?new CB(n,e):B8(e)?new SB(n,e):z8(e)?new um(n,e):C8(e)?new K1(n,e):Hp(e)?new EB(n,e):Mp(e)?new FB(n,e):kB(e)?new IB(n,e):new Sa(n,e)},QB=function(n,e){var t=UB(n,e);return t.flags|=4,ep(n,e,t,t),t},_8=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||V1(n)&&t.styles.isTransparent()},x8=function(n){return n.isPositioned()||n.isFloating()},TB=function(n){return n.nodeType===Node.TEXT_NODE},Xd=function(n){return n.nodeType===Node.ELEMENT_NODE},hm=function(n){return Xd(n)&&typeof n.style<"u"&&!tp(n)},tp=function(n){return typeof n.className=="object"},B8=function(n){return n.tagName==="LI"},z8=function(n){return n.tagName==="OL"},C8=function(n){return n.tagName==="INPUT"},S8=function(n){return n.tagName==="HTML"},LB=function(n){return n.tagName==="svg"},V1=function(n){return n.tagName==="BODY"},PB=function(n){return n.tagName==="CANVAS"},Gy=function(n){return n.tagName==="VIDEO"},fm=function(n){return n.tagName==="IMG"},kB=function(n){return n.tagName==="IFRAME"},Wy=function(n){return n.tagName==="STYLE"},E8=function(n){return n.tagName==="SCRIPT"},Mp=function(n){return n.tagName==="TEXTAREA"},Hp=function(n){return n.tagName==="SELECT"},OB=function(n){return n.tagName==="SLOT"},Xy=function(n){return n.tagName.indexOf("-")>0},F8=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,o=e.counterReset,s=!0;r!==null&&r.forEach(function(a){var A=t.counters[a.counter];A&&a.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=a.increment)});var i=[];return s&&o.forEach(function(a){var A=t.counters[a.counter];i.push(a.counter),A||(A=t.counters[a.counter]=[]),A.push(a.reset)}),i},n}(),Yy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Jy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},I8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},U8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Pd=function(n,e,t,r,o,s){return n<e||n>t?Xu(n,o,s.length>0):r.integers.reduce(function(i,a,A){for(;n>=a;)n-=a,i+=r.values[A];return i},"")+s},DB=function(n,e,t,r){var o="";do t||n--,o=r(n)+o,n/=e;while(n*e>=e);return o},lo=function(n,e,t,r,o){var s=t-e+1;return(n<0?"-":"")+(DB(Math.abs(n),s,r,function(i){return uo(Math.floor(i%s)+e)})+o)},Cl=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return DB(Math.abs(n),r,!1,function(o){return e[Math.floor(o%r)]})+t},jd=1,RA=2,$A=4,pu=8,Ja=function(n,e,t,r,o,s){if(n<-9999||n>9999)return Xu(n,4,o.length>0);var i=Math.abs(n),a=o;if(i===0)return e[0]+a;for(var A=0;i>0&&A<=4;A++){var d=i%10;d===0&&Fo(s,jd)&&a!==""?a=e[d]+a:d>1||d===1&&A===0||d===1&&A===1&&Fo(s,RA)||d===1&&A===1&&Fo(s,$A)&&n>100||d===1&&A>1&&Fo(s,pu)?a=e[d]+(A>0?t[A-1]:"")+a:d===1&&A>0&&(a=t[A-1]+a),i=Math.floor(i/10)}return(n<0?r:"")+a},Zy="",eb="",tb="",Kv="",Xu=function(n,e,t){var r=t?". ":"",o=t?"":"",s=t?", ":"",i=t?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=lo(n,48,57,!0,r);return a.length<4?"0".concat(a):a;case 4:return Cl(n,"",o);case 6:return Pd(n,1,3999,Yy,3,r).toLowerCase();case 7:return Pd(n,1,3999,Yy,3,r);case 8:return lo(n,945,969,!1,r);case 9:return lo(n,97,122,!1,r);case 10:return lo(n,65,90,!1,r);case 11:return lo(n,1632,1641,!0,r);case 12:case 49:return Pd(n,1,9999,Jy,3,r);case 35:return Pd(n,1,9999,Jy,3,r).toLowerCase();case 13:return lo(n,2534,2543,!0,r);case 14:case 30:return lo(n,6112,6121,!0,r);case 15:return Cl(n,"",o);case 16:return Cl(n,"",o);case 17:case 48:return Ja(n,"",Zy,"",o,RA|$A|pu);case 47:return Ja(n,"",eb,"",o,jd|RA|$A|pu);case 42:return Ja(n,"",Zy,"",o,RA|$A|pu);case 41:return Ja(n,"",eb,"",o,jd|RA|$A|pu);case 26:return Ja(n,"","",tb,o,0);case 25:return Ja(n,"","",tb,o,jd|RA|$A);case 31:return Ja(n,"","",Kv,s,jd|RA|$A);case 33:return Ja(n,"","",Kv,s,0);case 32:return Ja(n,"","",Kv,s,jd|RA|$A);case 18:return lo(n,2406,2415,!0,r);case 20:return Pd(n,1,19999,U8,3,r);case 21:return lo(n,2790,2799,!0,r);case 22:return lo(n,2662,2671,!0,r);case 22:return Pd(n,1,10999,I8,3,r);case 23:return Cl(n,"");case 24:return Cl(n,"");case 27:return lo(n,3302,3311,!0,r);case 28:return Cl(n,"",o);case 29:return Cl(n,"",o);case 34:return lo(n,3792,3801,!0,r);case 37:return lo(n,6160,6169,!0,r);case 38:return lo(n,4160,4169,!0,r);case 39:return lo(n,2918,2927,!0,r);case 40:return lo(n,1776,1785,!0,r);case 43:return lo(n,3046,3055,!0,r);case 44:return lo(n,3174,3183,!0,r);case 45:return lo(n,3664,3673,!0,r);case 46:return lo(n,3872,3881,!0,r);case 3:default:return lo(n,48,57,!0,r)}},NB="data-html2canvas-ignore",rb=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new F8,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,o=Q8(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=o.contentWindow,A=a.document,d=P8(o).then(function(){return ys(r,void 0,void 0,function(){var u,h;return is(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(N8),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the ".concat(this.referenceElement.nodeName," in the cloned document"))]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,L8(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(A,h)}).then(function(){return o})]:[2,o]}})})}),c=A.adoptNode(this.documentElement);return $8(c,A),A.open(),A.write("".concat(O8(document.doctype),"<html></html>")),D8(this.referenceElement.ownerDocument,s,i),A.replaceChild(c,A.documentElement),A.close(),d},n.prototype.createElementClone=function(e){if(dm(e,2))debugger;if(PB(e))return this.createCanvasClone(e);if(Gy(e))return this.createVideoClone(e);if(Wy(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return fm(t)&&(fm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Xy(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Vv(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var s=e.getContext("2d"),i=o.getContext("2d",{willReadFrequently:!0});if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var A=a.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},n.prototype.appendChildNode=function(e,t,r){(!Xd(t)||!E8(t)&&!t.hasAttribute(NB)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Xd(t)||!Wy(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var o=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Xd(s)&&OB(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return o.appendChildNode(t,a,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(TB(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Xd(e)&&(hm(e)||tp(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&hm(o)&&(this.clonedReferenceElement=o),V1(o)&&j8(o);var A=this.counters.parse(new Ty(this.context,s)),d=this.resolvePseudoContent(e,o,i,Su.BEFORE);Xy(e)&&(t=!0),Gy(e)||this.cloneChildNodes(e,o,t),d&&o.insertBefore(d,o.firstChild);var c=this.resolvePseudoContent(e,o,a,Su.AFTER);return c&&o.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||tp(e))&&!kB(e)||t)&&Vv(s,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(Mp(e)||Hp(e))&&(Mp(o)||Hp(o))&&(o.value=e.value),o}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,o){var s=this;if(r){var i=r.content,a=t.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Ty(this.context,r));var A=new BO(this.context,r),d=a.createElement("html2canvaspseudoelement");Vv(r,d),A.content.forEach(function(u){if(u.type===0)d.appendChild(a.createTextNode(u.value));else if(u.type===22){var h=a.createElement("img");h.src=u.value,h.style.opacity="1",d.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var f=u.values.filter(nn);f.length&&d.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(u.name==="counter"){var g=u.values.filter(Wo),w=g[0],y=g[1];if(w&&nn(w)){var x=s.counters.getCounterValue(w.value),C=y&&nn(y)?lm.parse(s.context,y.value):3;d.appendChild(a.createTextNode(Xu(x,C,!1)))}}else if(u.name==="counters"){var I=u.values.filter(Wo),w=I[0],N=I[1],y=I[2];if(w&&nn(w)){var k=s.counters.getCounterValues(w.value),ee=y&&nn(y)?lm.parse(s.context,y.value):3,G=N&&N.type===0?N.value:"",H=k.map(function(M){return Xu(M,ee,!1)}).join(G);d.appendChild(a.createTextNode(H))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(a.createTextNode(Qy(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(a.createTextNode(Qy(A.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(a.createTextNode(u.value))}}),d.className="".concat(pm," ").concat(gm);var c=o===Su.BEFORE?" ".concat(pm):" ".concat(gm);return tp(t)?t.className.baseValue+=c:t.className+=c,d}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Su;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Su||(Su={}));var Q8=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(NB,"true"),n.body.appendChild(t),t},T8=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},L8=function(n){return Promise.all([].slice.call(n.images,0).map(T8))},P8=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var o=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},k8=["all","d","content"],Vv=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);k8.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},O8=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'.concat(n.publicId,'"')),n.systemId&&(e+='"'.concat(n.systemId,'"')),e+=">"),e},D8=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},N8=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},M8=":before",H8=":after",pm="___html2canvas___pseudoelement_before",gm="___html2canvas___pseudoelement_after",nb=`{
    content: "" !important;
    display: none !important;
}`,j8=function(n){R8(n,".".concat(pm).concat(M8).concat(nb,`
         .`).concat(gm).concat(H8).concat(nb))},R8=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},$8=function(n,e){var t,r=e.createElement("base");r.href=e.baseURI;var o=n.getElementsByTagName("head").item(0);o==null||o.insertBefore(r,(t=o==null?void 0:o.firstChild)!==null&&t!==void 0?t:null)},MB=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),q8=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Wv(e)||W8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return ys(this,void 0,void 0,function(){var t,r,o,s,i=this;return is(this,function(a){switch(a.label){case 0:return t=MB.isSameOrigin(e),r=!Gv(e)&&this._options.useCORS===!0&&qo.SUPPORT_CORS_IMAGES&&!t,o=!Gv(e)&&!t&&!Wv(e)&&typeof this._options.proxy=="string"&&qo.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!Gv(e)&&!Wv(e)&&!o&&!r?[2]:(s=e,o?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image ".concat(e.substring(0,256))),[4,new Promise(function(A,d){var c=new Image;c.onload=function(){return A(c)},c.onerror=d,(X8(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return d("Timed out (".concat(i._options.imageTimeout,"ms) loading image"))},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(s,i){var a=qo.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(a==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return i(h)},!1),u.readAsDataURL(A.response)}else i("Failed to proxy resource ".concat(o," with status code ").concat(A.status))},A.onerror=i;var d=r.indexOf("?")>-1?"&":"?";if(A.open("GET","".concat(r).concat(d,"url=").concat(encodeURIComponent(e),"&responseType=").concat(a)),a!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return i("Timed out (".concat(c,"ms) proxying ").concat(o))}}A.send()})},n}(),K8=/^data:image\/svg\+xml/i,V8=/^data:image\/.*;base64,/i,G8=/^data:image\/.*/i,W8=function(n){return qo.SUPPORT_SVG_DRAWING||!Y8(n)},Gv=function(n){return G8.test(n)},X8=function(n){return V8.test(n)},Wv=function(n){return n.substr(0,4)==="blob"},Y8=function(n){return n.substr(-3).toLowerCase()==="svg"||K8.test(n)},Zt=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),kd=function(n,e,t){return new Zt(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Pf=function(){function n(e,t,r,o){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=o}return n.prototype.subdivide=function(e,t){var r=kd(this.start,this.startControl,e),o=kd(this.startControl,this.endControl,e),s=kd(this.endControl,this.end,e),i=kd(r,o,e),a=kd(o,s,e),A=kd(i,a,e);return t?new n(this.start,r,i,A):new n(A,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),wi=function(n){return n.type===1},J8=function(){function n(e){var t=e.styles,r=e.bounds,o=hu(t.borderTopLeftRadius,r.width,r.height),s=o[0],i=o[1],a=hu(t.borderTopRightRadius,r.width,r.height),A=a[0],d=a[1],c=hu(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],f=hu(t.borderBottomLeftRadius,r.width,r.height),g=f[0],w=f[1],y=[];y.push((s+A)/r.width),y.push((g+u)/r.width),y.push((i+w)/r.height),y.push((d+h)/r.height);var x=Math.max.apply(Math,y);x>1&&(s/=x,i/=x,A/=x,d/=x,u/=x,h/=x,g/=x,w/=x);var C=r.width-A,I=r.height-h,N=r.width-u,k=r.height-w,ee=t.borderTopWidth,G=t.borderRightWidth,H=t.borderBottomWidth,Y=t.borderLeftWidth,Be=Tn(t.paddingTop,e.bounds.width),M=Tn(t.paddingRight,e.bounds.width),O=Tn(t.paddingBottom,e.bounds.width),J=Tn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Jn(r.left+Y/3,r.top+ee/3,s-Y/3,i-ee/3,Bn.TOP_LEFT):new Zt(r.left+Y/3,r.top+ee/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Jn(r.left+C,r.top+ee/3,A-G/3,d-ee/3,Bn.TOP_RIGHT):new Zt(r.left+r.width-G/3,r.top+ee/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Jn(r.left+N,r.top+I,u-G/3,h-H/3,Bn.BOTTOM_RIGHT):new Zt(r.left+r.width-G/3,r.top+r.height-H/3),this.bottomLeftBorderDoubleOuterBox=g>0||w>0?Jn(r.left+Y/3,r.top+k,g-Y/3,w-H/3,Bn.BOTTOM_LEFT):new Zt(r.left+Y/3,r.top+r.height-H/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Jn(r.left+Y*2/3,r.top+ee*2/3,s-Y*2/3,i-ee*2/3,Bn.TOP_LEFT):new Zt(r.left+Y*2/3,r.top+ee*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Jn(r.left+C,r.top+ee*2/3,A-G*2/3,d-ee*2/3,Bn.TOP_RIGHT):new Zt(r.left+r.width-G*2/3,r.top+ee*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Jn(r.left+N,r.top+I,u-G*2/3,h-H*2/3,Bn.BOTTOM_RIGHT):new Zt(r.left+r.width-G*2/3,r.top+r.height-H*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||w>0?Jn(r.left+Y*2/3,r.top+k,g-Y*2/3,w-H*2/3,Bn.BOTTOM_LEFT):new Zt(r.left+Y*2/3,r.top+r.height-H*2/3),this.topLeftBorderStroke=s>0||i>0?Jn(r.left+Y/2,r.top+ee/2,s-Y/2,i-ee/2,Bn.TOP_LEFT):new Zt(r.left+Y/2,r.top+ee/2),this.topRightBorderStroke=s>0||i>0?Jn(r.left+C,r.top+ee/2,A-G/2,d-ee/2,Bn.TOP_RIGHT):new Zt(r.left+r.width-G/2,r.top+ee/2),this.bottomRightBorderStroke=u>0||h>0?Jn(r.left+N,r.top+I,u-G/2,h-H/2,Bn.BOTTOM_RIGHT):new Zt(r.left+r.width-G/2,r.top+r.height-H/2),this.bottomLeftBorderStroke=g>0||w>0?Jn(r.left+Y/2,r.top+k,g-Y/2,w-H/2,Bn.BOTTOM_LEFT):new Zt(r.left+Y/2,r.top+r.height-H/2),this.topLeftBorderBox=s>0||i>0?Jn(r.left,r.top,s,i,Bn.TOP_LEFT):new Zt(r.left,r.top),this.topRightBorderBox=A>0||d>0?Jn(r.left+C,r.top,A,d,Bn.TOP_RIGHT):new Zt(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?Jn(r.left+N,r.top+I,u,h,Bn.BOTTOM_RIGHT):new Zt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=g>0||w>0?Jn(r.left,r.top+k,g,w,Bn.BOTTOM_LEFT):new Zt(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?Jn(r.left+Y,r.top+ee,Math.max(0,s-Y),Math.max(0,i-ee),Bn.TOP_LEFT):new Zt(r.left+Y,r.top+ee),this.topRightPaddingBox=A>0||d>0?Jn(r.left+Math.min(C,r.width-G),r.top+ee,C>r.width+G?0:Math.max(0,A-G),Math.max(0,d-ee),Bn.TOP_RIGHT):new Zt(r.left+r.width-G,r.top+ee),this.bottomRightPaddingBox=u>0||h>0?Jn(r.left+Math.min(N,r.width-Y),r.top+Math.min(I,r.height-H),Math.max(0,u-G),Math.max(0,h-H),Bn.BOTTOM_RIGHT):new Zt(r.left+r.width-G,r.top+r.height-H),this.bottomLeftPaddingBox=g>0||w>0?Jn(r.left+Y,r.top+Math.min(k,r.height-H),Math.max(0,g-Y),Math.max(0,w-H),Bn.BOTTOM_LEFT):new Zt(r.left+Y,r.top+r.height-H),this.topLeftContentBox=s>0||i>0?Jn(r.left+Y+J,r.top+ee+Be,Math.max(0,s-(Y+J)),Math.max(0,i-(ee+Be)),Bn.TOP_LEFT):new Zt(r.left+Y+J,r.top+ee+Be),this.topRightContentBox=A>0||d>0?Jn(r.left+Math.min(C,r.width+Y+J),r.top+ee+Be,C>r.width+Y+J?0:A-Y+J,d-(ee+Be),Bn.TOP_RIGHT):new Zt(r.left+r.width-(G+M),r.top+ee+Be),this.bottomRightContentBox=u>0||h>0?Jn(r.left+Math.min(N,r.width-(Y+J)),r.top+Math.min(I,r.height+ee+Be),Math.max(0,u-(G+M)),h-(H+O),Bn.BOTTOM_RIGHT):new Zt(r.left+r.width-(G+M),r.top+r.height-(H+O)),this.bottomLeftContentBox=g>0||w>0?Jn(r.left+Y+J,r.top+k,Math.max(0,g-(Y+J)),w-(H+O),Bn.BOTTOM_LEFT):new Zt(r.left+Y+J,r.top+r.height-(H+O))}return n}(),Bn;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Bn||(Bn={}));var Jn=function(n,e,t,r,o){var s=4*((Math.sqrt(2)-1)/3),i=t*s,a=r*s,A=n+t,d=e+r;switch(o){case Bn.TOP_LEFT:return new Pf(new Zt(n,d),new Zt(n,d-a),new Zt(A-i,e),new Zt(A,e));case Bn.TOP_RIGHT:return new Pf(new Zt(n,e),new Zt(n+i,e),new Zt(A,d-a),new Zt(A,d));case Bn.BOTTOM_RIGHT:return new Pf(new Zt(A,e),new Zt(A,e+a),new Zt(n+i,d),new Zt(n,d));case Bn.BOTTOM_LEFT:default:return new Pf(new Zt(A,d),new Zt(A-i,d),new Zt(n,e+a),new Zt(n,e))}},jp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},Z8=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Rp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},eD=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),kf=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),tD=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),rD=function(n){return n.type===0},HB=function(n){return n.type===1},nD=function(n){return n.type===2},ob=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},oD=function(n,e,t,r,o){return n.map(function(s,i){switch(i){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+o);case 3:return s.add(e,t+o)}return s})},jB=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),RB=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new J8(this.container),this.container.styles.opacity<1&&this.effects.push(new tD(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new eD(r,o,s))}if(this.container.styles.overflowX!==0){var i=jp(this.curves),a=Rp(this.curves);ob(i,a)?this.effects.push(new kf(i,6)):(this.effects.push(new kf(i,2)),this.effects.push(new kf(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var s=r.effects.filter(function(A){return!HB(A)});if(t||r.container.styles.position!==0||!r.parent){if(t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=jp(r.curves),a=Rp(r.curves);ob(i,a)||o.unshift(new kf(a,6))}o.unshift.apply(o,s)}else o.unshift.apply(o,s);r=r.parent}return o.filter(function(A){return Fo(A.target,e)})},n}(),vm=function(n,e,t,r){n.container.elements.forEach(function(o){var s=Fo(o.flags,4),i=Fo(o.flags,2),a=new RB(o,n);Fo(o.styles.display,2048)&&r.push(a);var A=Fo(o.flags,8)?[]:r;if(s||i){var d=s||o.styles.isPositioned()?t:e,c=new jB(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var u=o.styles.zIndex.order;if(u<0){var h=0;d.negativeZIndex.some(function(g,w){return u>g.element.container.styles.zIndex.order?(h=w,!1):h>0}),d.negativeZIndex.splice(h,0,c)}else if(u>0){var f=0;d.positiveZIndex.some(function(g,w){return u>=g.element.container.styles.zIndex.order?(f=w+1,!1):f>0}),d.positiveZIndex.splice(f,0,c)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else o.styles.isFloating()?d.nonPositionedFloats.push(c):d.nonPositionedInlineLevel.push(c);vm(a,c,s?c:t,A)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),vm(a,e,t,A);Fo(o.flags,8)&&$B(o,A)})},$B=function(n,e){for(var t=n instanceof um?n.start:1,r=n instanceof um?n.reversed:!1,o=0;o<e.length;o++){var s=e[o];s.container instanceof SB&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Xu(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},sD=function(n){var e=new RB(n,null),t=new jB(e),r=[];return vm(e,t,t,r),$B(e.container,r),t},sb=function(n,e){switch(e){case 0:return _i(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return _i(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return _i(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return _i(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},iD=function(n,e){switch(e){case 0:return _i(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return _i(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return _i(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return _i(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},aD=function(n,e){switch(e){case 0:return _i(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return _i(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return _i(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return _i(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},AD=function(n,e){switch(e){case 0:return Of(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Of(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Of(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Of(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Of=function(n,e){var t=[];return wi(n)?t.push(n.subdivide(.5,!1)):t.push(n),wi(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},_i=function(n,e,t,r){var o=[];return wi(n)?o.push(n.subdivide(.5,!1)):o.push(n),wi(t)?o.push(t.subdivide(.5,!0)):o.push(t),wi(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),wi(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},qB=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},$p=function(n){var e=n.styles,t=n.bounds,r=Tn(e.paddingLeft,t.width),o=Tn(e.paddingRight,t.width),s=Tn(e.paddingTop,t.width),i=Tn(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+s+i))},lD=function(n,e){return n===0?e.bounds:n===2?$p(e):qB(e)},dD=function(n,e){return n===0?e.bounds:n===2?$p(e):qB(e)},Xv=function(n,e,t){var r=lD(Rd(n.styles.backgroundOrigin,e),n),o=dD(Rd(n.styles.backgroundClip,e),n),s=cD(Rd(n.styles.backgroundSize,e),t,r),i=s[0],a=s[1],A=hu(Rd(n.styles.backgroundPosition,e),r.width-i,r.height-a),d=uD(Rd(n.styles.backgroundRepeat,e),A,s,r,o),c=Math.round(r.left+A[0]),u=Math.round(r.top+A[1]);return i=Math.max(1,i),a=Math.max(1,a),[d,c,u,i,a]},Od=function(n){return nn(n)&&n.value===Ac.AUTO},Df=function(n){return typeof n=="number"},cD=function(n,e,t){var r=e[0],o=e[1],s=e[2],i=n[0],a=n[1];if(!i)return[0,0];if(Gn(i)&&a&&Gn(a))return[Tn(i,t.width),Tn(a,t.height)];var A=Df(s);if(nn(i)&&(i.value===Ac.CONTAIN||i.value===Ac.COVER)){if(Df(s)){var d=t.width/t.height;return d<s!=(i.value===Ac.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=Df(r),u=Df(o),h=c||u;if(Od(i)&&(!a||Od(a))){if(c&&u)return[r,o];if(!A&&!h)return[t.width,t.height];if(h&&A){var f=c?r:o*s,g=u?o:r/s;return[f,g]}var w=c?r:t.width,y=u?o:t.height;return[w,y]}if(A){var x=0,C=0;return Gn(i)?x=Tn(i,t.width):Gn(a)&&(C=Tn(a,t.height)),Od(i)?x=C*s:(!a||Od(a))&&(C=x/s),[x,C]}var I=null,N=null;if(Gn(i)?I=Tn(i,t.width):a&&Gn(a)&&(N=Tn(a,t.height)),I!==null&&(!a||Od(a))&&(N=c&&u?I/r*o:t.height),N!==null&&Od(i)&&(I=c&&u?N/o*r:t.width),I!==null&&N!==null)return[I,N];throw new Error("Unable to calculate background-size for element")},Rd=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},uD=function(n,e,t,r,o){var s=e[0],i=e[1],a=t[0],A=t[1];switch(n){case 2:return[new Zt(Math.round(r.left),Math.round(r.top+i)),new Zt(Math.round(r.left+r.width),Math.round(r.top+i)),new Zt(Math.round(r.left+r.width),Math.round(A+r.top+i)),new Zt(Math.round(r.left),Math.round(A+r.top+i))];case 3:return[new Zt(Math.round(r.left+s),Math.round(r.top)),new Zt(Math.round(r.left+s+a),Math.round(r.top)),new Zt(Math.round(r.left+s+a),Math.round(r.height+r.top)),new Zt(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Zt(Math.round(r.left+s),Math.round(r.top+i)),new Zt(Math.round(r.left+s+a),Math.round(r.top+i)),new Zt(Math.round(r.left+s+a),Math.round(r.top+i+A)),new Zt(Math.round(r.left+s),Math.round(r.top+i+A))];default:return[new Zt(Math.round(o.left),Math.round(o.top)),new Zt(Math.round(o.left+o.width),Math.round(o.top)),new Zt(Math.round(o.left+o.width),Math.round(o.height+o.top)),new Zt(Math.round(o.left),Math.round(o.height+o.top))]}},hD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ib="Hidden Text",fD=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),o=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),o.src=hD,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(ib)),r.appendChild(s),r.appendChild(o);var a=o.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(ib)),r.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:A}},n.prototype.getMetrics=function(e,t){var r="".concat(e," ").concat(t);return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),KB=function(){function n(e,t){this.context=e,this.options=t}return n}(),pD=1e4,gD=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px")),o.fontMetrics=new fD(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized (".concat(r.width,"x").concat(r.height,") with scale ").concat(r.scale)),o}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(t){this.ctx.save(),nD(t)&&(this.ctx.globalAlpha=t.opacity),rD(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),HB(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ys(this,void 0,void 0,function(){var r;return is(this,function(o){switch(o.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ys(this,void 0,void 0,function(){return is(this,function(r){switch(r.label){case 0:if(Fo(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,o){var s=this;if(r===0)navigator.userAgent.indexOf("Firefox")===-1?(this.ctx.textBaseline="ideographic",this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)):this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+o);else{var i=q1(t.text);i.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+o),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),o=bD(t.fontFamily).join(", "),s=fl(t.fontSize)?"".concat(t.fontSize.number).concat(t.fontSize.unit):"".concat(t.fontSize.number,"px");return[[t.fontStyle,r,t.fontWeight,s,o].join(" "),o,s]},e.prototype.renderTextNode=function(t,r){return ys(this,void 0,void 0,function(){var o,s,i=this;return is(this,function(a){return o=this.createFontStyle(r)[0],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=r.paintOrder,t.textBounds.forEach(function(A){s.forEach(function(d){switch(d){case 0:i.ctx.fillStyle=Oo(r.color),i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number);var c=r.textShadow;if(c.length&&A.text.trim().length&&(c.slice(0).reverse().forEach(function(h){i.ctx.shadowColor=Oo(h.color),i.ctx.shadowOffsetX=h.offsetX.number*i.options.scale,i.ctx.shadowOffsetY=h.offsetY.number*i.options.scale,i.ctx.shadowBlur=h.blur.number,i.renderTextWithLetterSpacing(A,r.letterSpacing,r.fontSize.number)}),i.ctx.shadowColor="",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0),r.textDecorationLine.length){i.ctx.fillStyle=Oo(r.textDecorationColor||r.color);var u=1;r.textDecorationLine.forEach(function(h){switch(h){case 1:i.ctx.fillRect(A.bounds.left,A.bounds.top+A.bounds.height-u,A.bounds.width,u);break;case 2:i.ctx.fillRect(A.bounds.left,A.bounds.top,A.bounds.width,u);break;case 3:i.ctx.fillRect(A.bounds.left,A.bounds.top+(A.bounds.height/2-u/2),A.bounds.width,u);break}})}break;case 1:r.webkitTextStrokeWidth&&A.text.trim().length&&(i.ctx.strokeStyle=Oo(r.webkitTextStrokeColor),i.ctx.lineWidth=r.webkitTextStrokeWidth,i.ctx.lineJoin=window.chrome?"miter":"round",i.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)),i.ctx.strokeStyle="",i.ctx.lineWidth=0,i.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,o){var s=o.naturalWidth||t.intrinsicWidth,i=o.naturalHeight||t.intrinsicHeight;if(o&&s>0&&i>0){var a=$p(t),A=Rp(r);this.path(A),this.ctx.save(),this.ctx.clip();var d=0,c=0,u=s,h=i,f=a.left,g=a.top,w=a.width,y=a.height,x=t.styles.objectFit,C=w/y,I=u/h;if(x===2)I>C?(y=w/I,g+=(a.height-y)/2):(w=y*I,f+=(a.width-w)/2);else if(x===4)I>C?(u=h*C,d+=(s-u)/2):(h=u/C,c+=(i-h)/2);else if(x===8)u>w?(d+=(u-w)/2,u=w):(f+=(w-u)/2,w=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h);else if(x===16){var N=I>C?w:y*I,k=u>w?u:w;N<k?I>C?(y=w/I,g+=(a.height-y)/2):(w=y*I,f+=(a.width-w)/2):(u>w?(d+=(u-w)/2,u=w):(f+=(w-u)/2,w=u),h>y?(c+=(h-y)/2,h=y):(g+=(y-h)/2,y=h))}this.ctx.drawImage(o,d,c,u,h,f,g,w,y),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ys(this,void 0,void 0,function(){var r,o,s,i,a,A,C,C,d,c,u,h,N,f,g,k,w,y,x,C,I,N,k;return is(this,function(ee){switch(ee.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,o=t.curves,s=r.styles,i=0,a=r.textNodes,ee.label=1;case 1:return i<a.length?(A=a[i],[4,this.renderTextNode(A,s)]):[3,4];case 2:ee.sent(),ee.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof BB))return[3,8];ee.label=5;case 5:return ee.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return C=ee.sent(),this.renderReplacedElement(r,o,C),[3,8];case 7:return ee.sent(),this.context.logger.error("Error loading image ".concat(r.src)),[3,8];case 8:if(r instanceof zB&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof CB))return[3,12];ee.label=9;case 9:return ee.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return C=ee.sent(),this.renderReplacedElement(r,o,C),[3,12];case 11:return ee.sent(),this.context.logger.error("Error loading svg ".concat(r.svg.substring(0,255))),[3,12];case 12:return r instanceof IB&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:c=ee.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),ee.label=14;case 14:if(r instanceof K1&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Dp?r.checked&&(this.ctx.save(),this.path([new Zt(r.bounds.left+u*.39363,r.bounds.top+u*.79),new Zt(r.bounds.left+u*.16,r.bounds.top+u*.5549),new Zt(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new Zt(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new Zt(r.bounds.left+u*.72983,r.bounds.top+u*.23),new Zt(r.bounds.left+u*.84,r.bounds.top+u*.34085),new Zt(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=Oo(Vy),this.ctx.fill(),this.ctx.restore()):r.type===Np&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Oo(Vy),this.ctx.fill(),this.ctx.restore())),vD(r)&&r.value.length){switch(h=this.createFontStyle(s),N=h[0],f=h[1],g=this.fontMetrics.getMetrics(N,f).baseline,this.ctx.font=N,this.ctx.fillStyle=Oo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=wD(r.styles.textAlign),k=$p(r),w=0,r.styles.textAlign){case 1:w+=k.width/2;break;case 2:w+=k.width;break}y=k.add(w,0,0,-k.height/2+1),this.ctx.save(),this.path([new Zt(k.left,k.top),new Zt(k.left+k.width,k.top),new Zt(k.left+k.width,k.top+k.height),new Zt(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cu(r.value,y),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Fo(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(x=r.styles.listStyleImage,x.type!==0)return[3,18];C=void 0,I=x.url,ee.label=15;case 15:return ee.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return C=ee.sent(),this.ctx.drawImage(C,r.bounds.left-(C.width+10),r.bounds.top),[3,18];case 17:return ee.sent(),this.context.logger.error("Error loading list-style-image ".concat(I)),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(N=this.createFontStyle(s)[0],this.ctx.font=N,this.ctx.fillStyle=Oo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new vA(r.bounds.left,r.bounds.top+Tn(r.styles.paddingTop,r.bounds.width),r.bounds.width,Iy(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cu(t.listValue,k),s.letterSpacing,Iy(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ee.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ys(this,void 0,void 0,function(){var r,o,x,s,i,x,a,A,x,d,c,x,u,h,x,f,g,x,w,y,x;return is(this,function(C){switch(C.label){case 0:if(Fo(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:C.sent(),r=0,o=t.negativeZIndex,C.label=2;case 2:return r<o.length?(x=o[r],[4,this.renderStack(x)]):[3,5];case 3:C.sent(),C.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:C.sent(),s=0,i=t.nonInlineLevel,C.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:C.sent(),C.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,C.label=11;case 11:return a<A.length?(x=A[a],[4,this.renderStack(x)]):[3,14];case 12:C.sent(),C.label=13;case 13:return a++,[3,11];case 14:d=0,c=t.nonPositionedInlineLevel,C.label=15;case 15:return d<c.length?(x=c[d],[4,this.renderStack(x)]):[3,18];case 16:C.sent(),C.label=17;case 17:return d++,[3,15];case 18:u=0,h=t.inlineLevel,C.label=19;case 19:return u<h.length?(x=h[u],[4,this.renderNode(x)]):[3,22];case 20:C.sent(),C.label=21;case 21:return u++,[3,19];case 22:f=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return f<g.length?(x=g[f],[4,this.renderStack(x)]):[3,26];case 24:C.sent(),C.label=25;case 25:return f++,[3,23];case 26:w=0,y=t.positiveZIndex,C.label=27;case 27:return w<y.length?(x=y[w],[4,this.renderStack(x)]):[3,30];case 28:C.sent(),C.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(o,s){var i=wi(o)?o.start:o;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),wi(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(t,r,o,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(o,s),this.ctx.fill(),this.ctx.translate(-o,-s)},e.prototype.resizeImage=function(t,r,o){var s,i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,o);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,r,o),a},e.prototype.renderBackgroundImage=function(t){return ys(this,void 0,void 0,function(){var r,o,s,i,a,A;return is(this,function(d){switch(d.label){case 0:r=t.styles.backgroundImage.length-1,o=function(c){var u,h,f,g,w,O,te,Z,he,ie,Be,y,O,te,Z,he,ie,x,C,I,N,k,ee,G,H,Y,Be,M,O,J,re,he,ie,be,te,Z,Ae,we,z,F,E,U,P,T;return is(this,function(R){switch(R.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,R.label=1;case 1:return R.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=R.sent(),[3,4];case 3:return R.sent(),s.context.logger.error("Error loading background-image ".concat(h)),[3,4];case 4:return u&&(f=isNaN(u.width)||u.width===0?1:u.width,g=isNaN(u.height)||u.height===0?1:u.height,w=Xv(t,r,[f,g,f/g]),O=w[0],te=w[1],Z=w[2],he=w[3],ie=w[4],Be=s.ctx.createPattern(s.resizeImage(u,he,ie),"repeat"),s.renderRepeat(O,Be,te,Z)),[3,6];case 5:ZP(c)?(y=Xv(t,r,[null,null,null]),O=y[0],te=y[1],Z=y[2],he=y[3],ie=y[4],x=GP(c.angle,he,ie),C=x[0],I=x[1],N=x[2],k=x[3],ee=x[4],G=document.createElement("canvas"),G.width=he,G.height=ie,H=G.getContext("2d"),Y=H.createLinearGradient(I,k,N,ee),Ey(c.stops,C).forEach(function($){return Y.addColorStop($.stop,Oo($.color))}),H.fillStyle=Y,H.fillRect(0,0,he,ie),he>0&&ie>0&&(Be=s.ctx.createPattern(G,"repeat"),s.renderRepeat(O,Be,te,Z))):ek(c)&&(M=Xv(t,r,[null,null,null]),O=M[0],J=M[1],re=M[2],he=M[3],ie=M[4],be=c.position.length===0?[M1]:c.position,te=Tn(be[0],he),Z=Tn(be[be.length-1],ie),Ae=WP(c,te,Z,he,ie),we=Ae[0],z=Ae[1],we>0&&z>0&&(F=s.ctx.createRadialGradient(J+te,re+Z,0,J+te,re+Z,we),Ey(c.stops,we*2).forEach(function($){return F.addColorStop($.stop,Oo($.color))}),s.path(O),s.ctx.fillStyle=F,we!==z?(E=t.bounds.left+.5*t.bounds.width,U=t.bounds.top+.5*t.bounds.height,P=z/we,T=1/P,s.ctx.save(),s.ctx.translate(E,U),s.ctx.transform(1,0,0,P,0,0),s.ctx.translate(-E,-U),s.ctx.fillRect(J,T*(re-U)+U,he,ie*T),s.ctx.restore()):s.ctx.fill())),R.label=6;case 6:return r--,[2]}})},s=this,i=0,a=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return i<a.length?(A=a[i],[5,o(A)]):[3,4];case 2:d.sent(),d.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,o){return ys(this,void 0,void 0,function(){return is(this,function(s){return this.path(sb(o,r)),this.ctx.fillStyle=Oo(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,o,s){return ys(this,void 0,void 0,function(){var i,a;return is(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,o,s)]:[3,2];case 1:return A.sent(),[2];case 2:return i=iD(s,o),this.path(i),this.ctx.fillStyle=Oo(t),this.ctx.fill(),a=aD(s,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ys(this,void 0,void 0,function(){var r,o,s,i,a,A,d,c,u=this;return is(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,o=!rl(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=mD(Rd(r.backgroundClip,0),t.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rl(r.backgroundColor)||(this.ctx.fillStyle=Oo(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){u.ctx.save();var g=jp(t.curves),w=f.inset?0:pD,y=oD(g,-w+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(u.path(g),u.ctx.clip(),u.mask(y)):(u.mask(g),u.ctx.clip(),u.path(y)),u.ctx.shadowOffsetX=f.offsetX.number+w,u.ctx.shadowOffsetY=f.offsetY.number,u.ctx.shadowColor=Oo(f.color),u.ctx.shadowBlur=f.blur.number,u.ctx.fillStyle=f.inset?Oo(f.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:a=0,A=0,d=s,h.label=3;case 3:return A<d.length?(c=d[A],c.style!==0&&!rl(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:h.sent(),h.label=11;case 11:a++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,o,s,i){return ys(this,void 0,void 0,function(){var a,A,d,c,u,h,f,g,w,y,x,C,I,N,k,ee,k,ee;return is(this,function(G){return this.ctx.save(),a=AD(s,o),A=sb(s,o),i===2&&(this.path(A),this.ctx.clip()),wi(A[0])?(d=A[0].start.x,c=A[0].start.y):(d=A[0].x,c=A[0].y),wi(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),o===0||o===2?f=Math.abs(d-u):f=Math.abs(c-h),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(A.slice(0,2)),g=r<3?r*3:r*2,w=r<3?r*2:r,i===3&&(g=r,w=r),y=!0,f<=g*2?y=!1:f<=g*2+w?(x=f/(2*g+w),g*=x,w*=x):(C=Math.floor((f+w)/(g+w)),I=(f-C*g)/(C-1),N=(f-(C+1)*g)/C,w=N<=0||Math.abs(w-I)<Math.abs(w-N)?I:N),y&&(i===3?this.ctx.setLineDash([0,g+w]):this.ctx.setLineDash([g,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Oo(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(wi(A[0])&&(k=A[3],ee=A[0],this.ctx.beginPath(),this.formatPath([new Zt(k.end.x,k.end.y),new Zt(ee.start.x,ee.start.y)]),this.ctx.stroke()),wi(A[1])&&(k=A[1],ee=A[2],this.ctx.beginPath(),this.formatPath([new Zt(k.end.x,k.end.y),new Zt(ee.start.x,ee.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ys(this,void 0,void 0,function(){var r;return is(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Oo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=sD(t),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(KB),vD=function(n){return n instanceof FB||n instanceof EB?!0:n instanceof K1&&n.type!==Np&&n.type!==Dp},mD=function(n,e){switch(n){case 0:return jp(e);case 2:return Z8(e);case 1:default:return Rp(e)}},wD=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},yD=["-apple-system","system-ui"],bD=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return yD.indexOf(e)===-1}):n},_D=function(n){Gi(e,n);function e(t,r){var o=n.call(this,t,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width="".concat(r.width,"px"),o.canvas.style.height="".concat(r.height,"px"),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (".concat(r.width,"x").concat(r.height," at ").concat(r.x,",").concat(r.y,") with scale ").concat(r.scale)),o}return e.prototype.render=function(t){return ys(this,void 0,void 0,function(){var r,o;return is(this,function(s){switch(s.label){case 0:return r=cm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,xD(r)];case 1:return o=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Oo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(KB),xD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(n)))})},BD=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,gf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,gf([this.id,"".concat(this.getTime(),"ms")],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,gf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,gf([this.id,"".concat(this.getTime(),"ms")],e,!1)):this.info.apply(this,e))},n.instances={},n}(),zD=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#".concat(n.instanceCount++),this.logger=new BD({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new q8(this,e)}return n.instanceCount=1,n}(),CD=function(n,e){return e===void 0&&(e={}),SD(n,e)};typeof window<"u"&&MB.setContext(window);var SD=function(n,e){return ys(void 0,void 0,void 0,function(){var t,r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I,N,k,G,ee,G,H,Y,Be,M,O,J,re,he,ie,be,te,Z,Ae,we,z,F,E;return is(this,function(U){switch(U.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(H=e.allowTaint)!==null&&H!==void 0?H:!1,imageTimeout:(Y=e.imageTimeout)!==null&&Y!==void 0?Y:15e3,proxy:e.proxy,useCORS:(Be=e.useCORS)!==null&&Be!==void 0?Be:!1},s=G0({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},o),i={windowWidth:(O=e.windowWidth)!==null&&O!==void 0?O:r.innerWidth,windowHeight:(J=e.windowHeight)!==null&&J!==void 0?J:r.innerHeight,scrollX:(re=e.scrollX)!==null&&re!==void 0?re:r.pageXOffset,scrollY:(he=e.scrollY)!==null&&he!==void 0?he:r.pageYOffset},a=new vA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),A=new zD(s,a),d=(ie=e.foreignObjectRendering)!==null&&ie!==void 0?ie:!1,c={allowTaint:(be=e.allowTaint)!==null&&be!==void 0?be:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},A.logger.debug("Starting document clone with size ".concat(a.width,"x").concat(a.height," scrolled to ").concat(-a.left,",").concat(-a.top)),u=new rb(A,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=U.sent(),g=V1(h)||S8(h)?l6(h.ownerDocument):bg(A,h),w=g.width,y=g.height,x=g.left,C=g.top,I=ED(A,h,e.backgroundColor),N={canvas:e.canvas,backgroundColor:I,scale:(Z=(te=e.scale)!==null&&te!==void 0?te:r.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((Ae=e.x)!==null&&Ae!==void 0?Ae:0)+x,y:((we=e.y)!==null&&we!==void 0?we:0)+C,width:(z=e.width)!==null&&z!==void 0?z:Math.ceil(w),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(y)},d?(A.logger.debug("Document cloned, using foreign object rendering"),G=new _D(A,N),[4,G.render(h)]):[3,3];case 2:return k=U.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at ".concat(x,",").concat(C," with size ").concat(w,"x").concat(y," using computed rendering")),A.logger.debug("Starting DOM parsing"),ee=QB(A,h),I===ee.styles.backgroundColor&&(ee.styles.backgroundColor=va.TRANSPARENT),A.logger.debug("Starting renderer for element at ".concat(N.x,",").concat(N.y," with size ").concat(N.width,"x").concat(N.height)),G=new gD(A,N),[4,G.render(ee)];case 4:k=U.sent(),U.label=5;case 5:return(!((E=e.removeContainer)!==null&&E!==void 0)||E)&&(rb.destroy(f)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,k]}})})},ED=function(n,e,t){var r=e.ownerDocument,o=r.documentElement?ac(n,getComputedStyle(r.documentElement).backgroundColor):va.TRANSPARENT,s=r.body?ac(n,getComputedStyle(r.body).backgroundColor):va.TRANSPARENT,i=typeof t=="string"?ac(n,t):t===null?va.TRANSPARENT:4294967295;return e===r.documentElement?rl(o)?rl(s)?i:s:o:i};function Ln(n){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(n)}var As=Uint8Array,ni=Uint16Array,G1=Int32Array,Pg=new As([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kg=new As([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mm=new As([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VB=function(n,e){for(var t=new ni(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new G1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)o[s]=s-t[r]<<5|r;return{b:t,r:o}},GB=VB(Pg,2),WB=GB.b,wm=GB.r;WB[28]=258,wm[258]=28;var XB=VB(kg,0),FD=XB.b,ab=XB.r,ym=new ni(32768);for(var Wn=0;Wn<32768;++Wn){var NA=(Wn&43690)>>1|(Wn&21845)<<1;NA=(NA&52428)>>2|(NA&13107)<<2,NA=(NA&61680)>>4|(NA&3855)<<4,ym[Wn]=((NA&65280)>>8|(NA&255)<<8)>>1}var ma=function(n,e,t){for(var r=n.length,o=0,s=new ni(e);o<r;++o)n[o]&&++s[n[o]-1];var i=new ni(e);for(o=1;o<e;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(t){a=new ni(1<<e);var A=15-e;for(o=0;o<r;++o)if(n[o])for(var d=o<<4|n[o],c=e-n[o],u=i[n[o]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)a[ym[u]>>A]=d}else for(a=new ni(r),o=0;o<r;++o)n[o]&&(a[o]=ym[i[n[o]-1]++]>>15-n[o]);return a},dl=new As(288);for(var Wn=0;Wn<144;++Wn)dl[Wn]=8;for(var Wn=144;Wn<256;++Wn)dl[Wn]=9;for(var Wn=256;Wn<280;++Wn)dl[Wn]=7;for(var Wn=280;Wn<288;++Wn)dl[Wn]=8;var Yu=new As(32);for(var Wn=0;Wn<32;++Wn)Yu[Wn]=5;var ID=ma(dl,9,0),UD=ma(dl,9,1),QD=ma(Yu,5,0),TD=ma(Yu,5,1),Yv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ti=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Jv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},W1=function(n){return(n+7)/8|0},YB=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new As(n.subarray(e,t))},LD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Di=function(n,e,t){var r=new Error(e||LD[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Di),!t)throw r;return r},PD=function(n,e,t,r){var o=n.length,s=0;if(!o||e.f&&!e.l)return t||new As(0);var i=!t,a=i||e.i!=2,A=e.i;i&&(t=new As(o*3));var d=function(ae){var Ee=t.length;if(ae>Ee){var _e=new As(Math.max(Ee*2,ae));_e.set(t),t=_e}},c=e.f||0,u=e.p||0,h=e.b||0,f=e.l,g=e.d,w=e.m,y=e.n,x=o*8;do{if(!f){c=Ti(n,u,1);var C=Ti(n,u+1,3);if(u+=3,C)if(C==1)f=UD,g=TD,w=9,y=5;else if(C==2){var ee=Ti(n,u,31)+257,G=Ti(n,u+10,15)+4,H=ee+Ti(n,u+5,31)+1;u+=14;for(var Y=new As(H),Be=new As(19),M=0;M<G;++M)Be[mm[M]]=Ti(n,u+M*3,7);u+=G*3;for(var O=Yv(Be),J=(1<<O)-1,re=ma(Be,O,1),M=0;M<H;){var he=re[Ti(n,u,J)];u+=he&15;var I=he>>4;if(I<16)Y[M++]=I;else{var ie=0,be=0;for(I==16?(be=3+Ti(n,u,3),u+=2,ie=Y[M-1]):I==17?(be=3+Ti(n,u,7),u+=3):I==18&&(be=11+Ti(n,u,127),u+=7);be--;)Y[M++]=ie}}var te=Y.subarray(0,ee),Z=Y.subarray(ee);w=Yv(te),y=Yv(Z),f=ma(te,w,1),g=ma(Z,y,1)}else Di(1);else{var I=W1(u)+4,N=n[I-4]|n[I-3]<<8,k=I+N;if(k>o){A&&Di(0);break}a&&d(h+N),t.set(n.subarray(I,k),h),e.b=h+=N,e.p=u=k*8,e.f=c;continue}if(u>x){A&&Di(0);break}}a&&d(h+131072);for(var Ae=(1<<w)-1,we=(1<<y)-1,z=u;;z=u){var ie=f[Jv(n,u)&Ae],F=ie>>4;if(u+=ie&15,u>x){A&&Di(0);break}if(ie||Di(2),F<256)t[h++]=F;else if(F==256){z=u,f=null;break}else{var E=F-254;if(F>264){var M=F-257,U=Pg[M];E=Ti(n,u,(1<<U)-1)+WB[M],u+=U}var P=g[Jv(n,u)&we],T=P>>4;P||Di(3),u+=P&15;var Z=FD[T];if(T>3){var U=kg[T];Z+=Jv(n,u)&(1<<U)-1,u+=U}if(u>x){A&&Di(0);break}a&&d(h+131072);var R=h+E;if(h<Z){var $=s-Z,j=Math.min(Z,R);for($+h<0&&Di(3);h<j;++h)t[h]=r[$+h]}for(;h<R;++h)t[h]=t[h-Z]}}e.l=f,e.p=z,e.b=h,e.f=c,f&&(c=1,e.m=w,e.d=g,e.n=y)}while(!c);return h!=t.length&&i?YB(t,0,h):t.subarray(0,h)},Za=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},ru=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Zv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,s=t.slice();if(!o)return{t:ZB,l:0};if(o==1){var i=new As(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(k,ee){return k.f-ee.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],d=0,c=1,u=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};c!=o-1;)a=t[t[d].f<t[u].f?d++:u++],A=t[d!=c&&t[d].f<t[u].f?d++:u++],t[c++]={s:-1,f:a.f+A.f,l:a,r:A};for(var h=s[0].s,r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var f=new ni(h+1),g=bm(t[c-1],f,0);if(g>e){var r=0,w=0,y=g-e,x=1<<y;for(s.sort(function(ee,G){return f[G.s]-f[ee.s]||ee.f-G.f});r<o;++r){var C=s[r].s;if(f[C]>e)w+=x-(1<<g-f[C]),f[C]=e;else break}for(w>>=y;w>0;){var I=s[r].s;f[I]<e?w-=1<<e-f[I]++-1:++r}for(;r>=0&&w;--r){var N=s[r].s;f[N]==e&&(--f[N],++w)}g=e}return{t:new As(f),l:g}},bm=function(n,e,t){return n.s==-1?Math.max(bm(n.l,e,t+1),bm(n.r,e,t+1)):e[n.s]=t},Ab=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ni(++e),r=0,o=n[0],s=1,i=function(A){t[r++]=A},a=1;a<=e;++a)if(n[a]==o&&a!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=n[a]}return{c:t.subarray(0,r),n:e}},nu=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},JB=function(n,e,t){var r=t.length,o=W1(e+2);n[o]=r&255,n[o+1]=r>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var s=0;s<r;++s)n[o+s+4]=t[s];return(o+4+r)*8},lb=function(n,e,t,r,o,s,i,a,A,d,c){Za(e,c++,t),++o[256];for(var u=Zv(o,15),h=u.t,f=u.l,g=Zv(s,15),w=g.t,y=g.l,x=Ab(h),C=x.c,I=x.n,N=Ab(w),k=N.c,ee=N.n,G=new ni(19),H=0;H<C.length;++H)++G[C[H]&31];for(var H=0;H<k.length;++H)++G[k[H]&31];for(var Y=Zv(G,7),Be=Y.t,M=Y.l,O=19;O>4&&!Be[mm[O-1]];--O);var J=d+5<<3,re=nu(o,dl)+nu(s,Yu)+i,he=nu(o,h)+nu(s,w)+i+14+3*O+nu(G,Be)+2*G[16]+3*G[17]+7*G[18];if(A>=0&&J<=re&&J<=he)return JB(e,c,n.subarray(A,A+d));var ie,be,te,Z;if(Za(e,c,1+(he<re)),c+=2,he<re){ie=ma(h,f,0),be=h,te=ma(w,y,0),Z=w;var Ae=ma(Be,M,0);Za(e,c,I-257),Za(e,c+5,ee-1),Za(e,c+10,O-4),c+=14;for(var H=0;H<O;++H)Za(e,c+3*H,Be[mm[H]]);c+=3*O;for(var we=[C,k],z=0;z<2;++z)for(var F=we[z],H=0;H<F.length;++H){var E=F[H]&31;Za(e,c,Ae[E]),c+=Be[E],E>15&&(Za(e,c,F[H]>>5&127),c+=F[H]>>12)}}else ie=ID,be=dl,te=QD,Z=Yu;for(var H=0;H<a;++H){var U=r[H];if(U>255){var E=U>>18&31;ru(e,c,ie[E+257]),c+=be[E+257],E>7&&(Za(e,c,U>>23&31),c+=Pg[E]);var P=U&31;ru(e,c,te[P]),c+=Z[P],P>3&&(ru(e,c,U>>5&8191),c+=kg[P])}else ru(e,c,ie[U]),c+=be[U]}return ru(e,c,ie[256]),c+be[256]},kD=new G1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ZB=new As(0),OD=function(n,e,t,r,o,s){var i=s.z||n.length,a=new As(r+i+5*(1+Math.ceil(i/7e3))+o),A=a.subarray(r,a.length-o),d=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=kD[e-1],h=u>>13,f=u&8191,g=(1<<t)-1,w=s.p||new ni(32768),y=s.h||new ni(g+1),x=Math.ceil(t/3),C=2*x,I=function(Le){return(n[Le]^n[Le+1]<<x^n[Le+2]<<C)&g},N=new G1(25e3),k=new ni(288),ee=new ni(32),G=0,H=0,Y=s.i||0,Be=0,M=s.w||0,O=0;Y+2<i;++Y){var J=I(Y),re=Y&32767,he=y[J];if(w[re]=he,y[J]=re,M<=Y){var ie=i-Y;if((G>7e3||Be>24576)&&(ie>423||!d)){c=lb(n,A,0,N,k,ee,H,Be,O,Y-O,c),Be=G=H=0,O=Y;for(var be=0;be<286;++be)k[be]=0;for(var be=0;be<30;++be)ee[be]=0}var te=2,Z=0,Ae=f,we=re-he&32767;if(ie>2&&J==I(Y-we))for(var z=Math.min(h,ie)-1,F=Math.min(32767,Y),E=Math.min(258,ie);we<=F&&--Ae&&re!=he;){if(n[Y+te]==n[Y+te-we]){for(var U=0;U<E&&n[Y+U]==n[Y+U-we];++U);if(U>te){if(te=U,Z=we,U>z)break;for(var P=Math.min(we,U-2),T=0,be=0;be<P;++be){var R=Y-we+be&32767,$=w[R],j=R-$&32767;j>T&&(T=j,he=R)}}}re=he,he=w[re],we+=re-he&32767}if(Z){N[Be++]=268435456|wm[te]<<18|ab[Z];var ae=wm[te]&31,Ee=ab[Z]&31;H+=Pg[ae]+kg[Ee],++k[257+ae],++ee[Ee],M=Y+te,++G}else N[Be++]=n[Y],++k[n[Y]]}}for(Y=Math.max(Y,M);Y<i;++Y)N[Be++]=n[Y],++k[n[Y]];c=lb(n,A,d,N,k,ee,H,Be,O,Y-O,c),d||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=y,s.p=w,s.i=Y,s.w=M)}else{for(var Y=s.w||0;Y<i+d;Y+=65535){var _e=Y+65535;_e>=i&&(A[c/8|0]=d,_e=i),c=JB(A,c+1,n.subarray(Y,_e))}s.i=i}return YB(a,0,r+W1(c)+o)},ez=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,s=t.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=t[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}n=r,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},DD=function(n,e,t,r,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new As(s.length+n.length);i.set(s),i.set(n,s.length),n=i,o.w=s.length}return OD(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,o)},tz=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},ND=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=ez();o.p(e.dictionary),tz(n,2,o.d())}},MD=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Di(6,"invalid zlib data"),(n[1]>>5&1)==1&&Di(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function _m(n,e){e||(e={});var t=ez();t.p(n);var r=DD(n,e,e.dictionary?6:2,4);return ND(r,e),tz(r,r.length-4,t.d()),r}function HD(n,e){return PD(n.subarray(MD(n),-4),{i:2},e,e)}var jD=typeof TextDecoder<"u"&&new TextDecoder,RD=0;try{jD.decode(ZB,{stream:!0}),RD=1}catch{}var Ir=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function e0(){Ir.console&&typeof Ir.console.log=="function"&&Ir.console.log.apply(Ir.console,arguments)}var Mn={log:e0,warn:function(n){Ir.console&&(typeof Ir.console.warn=="function"?Ir.console.warn.apply(Ir.console,arguments):e0.call(null,arguments))},error:function(n){Ir.console&&(typeof Ir.console.error=="function"?Ir.console.error.apply(Ir.console,arguments):e0(n))}};function t0(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){El(r.response,e,t)},r.onerror=function(){Mn.error("could not download file")},r.send()}function db(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Nf(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Eu,xm,El=Ir.saveAs||((typeof window>"u"?"undefined":Ln(window))!=="object"||window!==Ir?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ir.URL||Ir.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?db(o.href)?t0(n,e,t):Nf(o,o.target="_blank"):Nf(o)):(o.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Nf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(db(n))t0(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Nf(r)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:Ln(s)!=="object"&&(Mn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return t0(n,e,t);var o=n.type==="application/octet-stream",s=/constructor/i.test(Ir.HTMLElement)||Ir.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&s)&&(typeof FileReader>"u"?"undefined":Ln(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=i?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var A=Ir.URL||Ir.webkitURL,d=A.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){A.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rz(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var o=t[r].re,s=t[r].process,i=o.exec(n);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),A=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),"#"+a+A+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function r0(n,e){var t=n[0],r=n[1],o=n[2],s=n[3];t=ts(t,r,o,s,e[0],7,-680876936),s=ts(s,t,r,o,e[1],12,-389564586),o=ts(o,s,t,r,e[2],17,606105819),r=ts(r,o,s,t,e[3],22,-1044525330),t=ts(t,r,o,s,e[4],7,-176418897),s=ts(s,t,r,o,e[5],12,1200080426),o=ts(o,s,t,r,e[6],17,-1473231341),r=ts(r,o,s,t,e[7],22,-45705983),t=ts(t,r,o,s,e[8],7,1770035416),s=ts(s,t,r,o,e[9],12,-1958414417),o=ts(o,s,t,r,e[10],17,-42063),r=ts(r,o,s,t,e[11],22,-1990404162),t=ts(t,r,o,s,e[12],7,1804603682),s=ts(s,t,r,o,e[13],12,-40341101),o=ts(o,s,t,r,e[14],17,-1502002290),t=rs(t,r=ts(r,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=rs(s,t,r,o,e[6],9,-1069501632),o=rs(o,s,t,r,e[11],14,643717713),r=rs(r,o,s,t,e[0],20,-373897302),t=rs(t,r,o,s,e[5],5,-701558691),s=rs(s,t,r,o,e[10],9,38016083),o=rs(o,s,t,r,e[15],14,-660478335),r=rs(r,o,s,t,e[4],20,-405537848),t=rs(t,r,o,s,e[9],5,568446438),s=rs(s,t,r,o,e[14],9,-1019803690),o=rs(o,s,t,r,e[3],14,-187363961),r=rs(r,o,s,t,e[8],20,1163531501),t=rs(t,r,o,s,e[13],5,-1444681467),s=rs(s,t,r,o,e[2],9,-51403784),o=rs(o,s,t,r,e[7],14,1735328473),t=ns(t,r=rs(r,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=ns(s,t,r,o,e[8],11,-2022574463),o=ns(o,s,t,r,e[11],16,1839030562),r=ns(r,o,s,t,e[14],23,-35309556),t=ns(t,r,o,s,e[1],4,-1530992060),s=ns(s,t,r,o,e[4],11,1272893353),o=ns(o,s,t,r,e[7],16,-155497632),r=ns(r,o,s,t,e[10],23,-1094730640),t=ns(t,r,o,s,e[13],4,681279174),s=ns(s,t,r,o,e[0],11,-358537222),o=ns(o,s,t,r,e[3],16,-722521979),r=ns(r,o,s,t,e[6],23,76029189),t=ns(t,r,o,s,e[9],4,-640364487),s=ns(s,t,r,o,e[12],11,-421815835),o=ns(o,s,t,r,e[15],16,530742520),t=os(t,r=ns(r,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=os(s,t,r,o,e[7],10,1126891415),o=os(o,s,t,r,e[14],15,-1416354905),r=os(r,o,s,t,e[5],21,-57434055),t=os(t,r,o,s,e[12],6,1700485571),s=os(s,t,r,o,e[3],10,-1894986606),o=os(o,s,t,r,e[10],15,-1051523),r=os(r,o,s,t,e[1],21,-2054922799),t=os(t,r,o,s,e[8],6,1873313359),s=os(s,t,r,o,e[15],10,-30611744),o=os(o,s,t,r,e[6],15,-1560198380),r=os(r,o,s,t,e[13],21,1309151649),t=os(t,r,o,s,e[4],6,-145523070),s=os(s,t,r,o,e[11],10,-1120210379),o=os(o,s,t,r,e[2],15,718787259),r=os(r,o,s,t,e[9],21,-343485551),n[0]=ZA(t,n[0]),n[1]=ZA(r,n[1]),n[2]=ZA(o,n[2]),n[3]=ZA(s,n[3])}function Og(n,e,t,r,o,s){return e=ZA(ZA(e,n),ZA(r,s)),ZA(e<<o|e>>>32-o,t)}function ts(n,e,t,r,o,s,i){return Og(e&t|~e&r,n,e,o,s,i)}function rs(n,e,t,r,o,s,i){return Og(e&r|t&~r,n,e,o,s,i)}function ns(n,e,t,r,o,s,i){return Og(e^t^r,n,e,o,s,i)}function os(n,e,t,r,o,s,i){return Og(t^(e|~r),n,e,o,s,i)}function nz(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)r0(r,$D(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(r0(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,r0(r,o),r}function $D(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Eu=Ir.atob.bind(Ir),xm=Ir.btoa.bind(Ir);var cb="0123456789abcdef".split("");function qD(n){for(var e="",t=0;t<4;t++)e+=cb[n>>8*t+4&15]+cb[n>>8*t&15];return e}function KD(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Bm(n){return nz(n).map(KD).join("")}var VD=function(n){for(var e=0;e<n.length;e++)n[e]=qD(n[e]);return n.join("")}(nz("hello"))!="5d41402abc4b2a76b9719d911017c592";function ZA(n,e){if(VD){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function zm(n,e){var t,r,o,s;if(n!==t){for(var i=(o=n,s=1+(256/n.length>>0),new Array(s+1).join(o)),a=[],A=0;A<256;A++)a[A]=A;var d=0;for(A=0;A<256;A++){var c=a[A];d=(d+c+i.charCodeAt(A))%256,a[A]=a[d],a[d]=c}t=n,r=a}else a=r;var u=e.length,h=0,f=0,g="";for(A=0;A<u;A++)f=(f+(c=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=c,i=a[(a[h]+a[f])%256],g+=String.fromCharCode(e.charCodeAt(A)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ub={print:4,modify:8,copy:16,"annot-forms":32};function $d(n,e,t,r){this.v=1,this.r=2;var o=192;n.forEach(function(a){if(ub.perm!==void 0)throw new Error("Invalid permission: "+a);o+=ub[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^o)),this.encryptionKey=Bm(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=zm(this.encryptionKey,this.padding)}function qd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var o=n.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[r]}return e}function hb(n){if(Ln(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,o){if(o=o||!1,typeof t!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!o],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var i=e[t][s];try{i[0].apply(n,r)}catch(a){Ir.console&&Mn.error("jsPDF PubSub Error",a.message,a)}i[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function qp(n){if(!(this instanceof qp))return new qp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function oz(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ll(n,e,t,r,o){if(!(this instanceof Ll))return new Ll(n,e,t,r,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,oz.call(this,r,o)}function Yd(n,e,t,r,o){if(!(this instanceof Yd))return new Yd(n,e,t,r,o);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,oz.call(this,r,o)}function Sr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],i=[],a=1,A=16,d="S",c=null;Ln(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,o=n.format||o,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(A=n.floatPrecision),d=n.defaultPathOperation||"S"),i=n.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",t=(""+(t||"P")).toLowerCase();var u=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=hb;var g="1.3",w=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(_){g=_};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var x=f.__private__.getPageFormat=function(_){return y[_]};o=o||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},I=C.COMPAT;function N(){this.saveGraphicsState(),D(new rt(ye,0,0,-ye,0,Ks()*ye).toString()+" cm"),this.setFontSize(this.getFontSize()/ye),d="n",I=C.ADVANCED}function k(){this.restoreGraphicsState(),d="S",I=C.COMPAT}var ee=f.__private__.combineFontStyleAndFontWeight=function(_,K){if(_=="bold"&&K=="normal"||_=="bold"&&K==400||_=="normal"&&K=="italic"||_=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(_=K==400||K==="normal"?_==="italic"?"italic":"normal":K!=700&&K!=="bold"||_!=="normal"?(K==700?"bold":K)+""+_:"bold"),_};f.advancedAPI=function(_){var K=I===C.COMPAT;return K&&N.call(this),typeof _!="function"||(_(this),K&&k.call(this)),this},f.compatAPI=function(_){var K=I===C.ADVANCED;return K&&k.call(this),typeof _!="function"||(_(this),K&&N.call(this)),this},f.isAdvancedAPI=function(){return I===C.ADVANCED};var G,H=function(_){if(I!==C.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=f.roundToPrecision=f.__private__.roundToPrecision=function(_,K){var Te=e||K;if(isNaN(_)||isNaN(Te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(Te).replace(/0+$/,"")};G=f.hpf=f.__private__.hpf=typeof A=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(_,A)}:A==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(_,16)};var Be=f.f2=f.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return Y(_,2)},M=f.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return Y(_,3)},O=f.scale=f.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return I===C.COMPAT?_*ye:I===C.ADVANCED?_:void 0},J=function(_){return I===C.COMPAT?Ks()-_:I===C.ADVANCED?_:void 0},re=function(_){return O(J(_))};f.__private__.setPrecision=f.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var he,ie="00000000000000000000000000000000",be=f.__private__.getFileId=function(){return ie},te=f.__private__.setFileId=function(_){return ie=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(jr=new $d(c.userPermissions,c.userPassword,c.ownerPassword,ie)),ie};f.setFileId=function(_){return te(_),this},f.getFileId=function(){return be()};var Z=f.__private__.convertDateToPDFDate=function(_){var K=_.getTimezoneOffset(),Te=K<0?"+":"-",He=Math.floor(Math.abs(K/60)),st=Math.abs(K%60),_t=[Te,E(He),"'",E(st),"'"].join("");return["D:",_.getFullYear(),E(_.getMonth()+1),E(_.getDate()),E(_.getHours()),E(_.getMinutes()),E(_.getSeconds()),_t].join("")},Ae=f.__private__.convertPDFDateToDate=function(_){var K=parseInt(_.substr(2,4),10),Te=parseInt(_.substr(6,2),10)-1,He=parseInt(_.substr(8,2),10),st=parseInt(_.substr(10,2),10),_t=parseInt(_.substr(12,2),10),kt=parseInt(_.substr(14,2),10);return new Date(K,Te,He,st,_t,kt,0)},we=f.__private__.setCreationDate=function(_){var K;if(_===void 0&&(_=new Date),_ instanceof Date)K=Z(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=_}return he=K},z=f.__private__.getCreationDate=function(_){var K=he;return _==="jsDate"&&(K=Ae(he)),K};f.setCreationDate=function(_){return we(_),this},f.getCreationDate=function(_){return z(_)};var F,E=f.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},U=f.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},P=0,T=[],R=[],$=0,j=[],ae=[],Ee=!1,_e=R,Le=function(){P=0,$=0,R=[],T=[],j=[],nr=mt(),Ht=mt()};f.__private__.setCustomOutputDestination=function(_){Ee=!0,_e=_};var X=function(_){Ee||(_e=_)};f.__private__.resetCustomOutputDestination=function(){Ee=!1,_e=R};var D=f.__private__.out=function(_){return _=_.toString(),$+=_.length+1,_e.push(_),_e},oe=f.__private__.write=function(_){return D(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},ve=f.__private__.getArrayBuffer=function(_){for(var K=_.length,Te=new ArrayBuffer(K),He=new Uint8Array(Te);K--;)He[K]=_.charCodeAt(K);return Te},le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return le};var ue=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(_){return ue=I===C.ADVANCED?_/ye:_,this};var Ie,Ne=f.__private__.getFontSize=f.getFontSize=function(){return I===C.COMPAT?ue:ue*ye},ze=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(_){return ze=_,this},f.__private__.getR2L=f.getR2L=function(){return ze};var Ce,pe=f.__private__.setZoomMode=function(_){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Ie=_;else if(isNaN(_)){if(K.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Ie=_}else Ie=parseInt(_,10)};f.__private__.getZoomMode=function(){return Ie};var Oe,ke=f.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Ce=_};f.__private__.getPageMode=function(){return Ce};var me=f.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Oe=_};f.__private__.getLayoutMode=function(){return Oe},f.__private__.setDisplayMode=f.setDisplayMode=function(_,K,Te){return pe(_),me(K),ke(Te),this};var q={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(_){if(Object.keys(q).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return q[_]},f.__private__.getDocumentProperties=function(){return q},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(_){for(var K in q)q.hasOwnProperty(K)&&_[K]&&(q[K]=_[K]);return this},f.__private__.setDocumentProperty=function(_,K){if(Object.keys(q).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return q[_]=K};var de,ye,Fe,Pe,nt,qe={},je={},fe=[],Me={},At={},Ve={},Ye={},ot=null,ht=0,Ge=[],it=new hb(f),zt=n.hotfixes||[],xt={},Tt={},yt=[],rt=function _(K,Te,He,st,_t,kt){if(!(this instanceof _))return new _(K,Te,He,st,_t,kt);isNaN(K)&&(K=1),isNaN(Te)&&(Te=0),isNaN(He)&&(He=0),isNaN(st)&&(st=1),isNaN(_t)&&(_t=0),isNaN(kt)&&(kt=0),this._matrix=[K,Te,He,st,_t,kt]};Object.defineProperty(rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(_)},rt.prototype.multiply=function(_){var K=_.sx*this.sx+_.shy*this.shx,Te=_.sx*this.shy+_.shy*this.sy,He=_.shx*this.sx+_.sy*this.shx,st=_.shx*this.shy+_.sy*this.sy,_t=_.tx*this.sx+_.ty*this.shx+this.tx,kt=_.tx*this.shy+_.ty*this.sy+this.ty;return new rt(K,Te,He,st,_t,kt)},rt.prototype.decompose=function(){var _=this.sx,K=this.shy,Te=this.shx,He=this.sy,st=this.tx,_t=this.ty,kt=Math.sqrt(_*_+K*K),Gt=(_/=kt)*Te+(K/=kt)*He;Te-=_*Gt,He-=K*Gt;var gr=Math.sqrt(Te*Te+He*He);return Gt/=gr,_*(He/=gr)<K*(Te/=gr)&&(_=-_,K=-K,Gt=-Gt,kt=-kt),{scale:new rt(kt,0,0,gr,0,0),translate:new rt(1,0,0,1,st,_t),rotate:new rt(_,K,-K,_,0,0),skew:new rt(1,0,Gt,1,0,0)}},rt.prototype.toString=function(_){return this.join(" ")},rt.prototype.inversed=function(){var _=this.sx,K=this.shy,Te=this.shx,He=this.sy,st=this.tx,_t=this.ty,kt=1/(_*He-K*Te),Gt=He*kt,gr=-K*kt,Qr=-Te*kt,Ur=_*kt;return new rt(Gt,gr,Qr,Ur,-Gt*st-Qr*_t,-gr*st-Ur*_t)},rt.prototype.applyToPoint=function(_){var K=_.x*this.sx+_.y*this.shx+this.tx,Te=_.x*this.shy+_.y*this.sy+this.ty;return new ta(K,Te)},rt.prototype.applyToRectangle=function(_){var K=this.applyToPoint(_),Te=this.applyToPoint(new ta(_.x+_.w,_.y+_.h));return new Ma(K.x,K.y,Te.x-K.x,Te.y-K.y)},rt.prototype.clone=function(){var _=this.sx,K=this.shy,Te=this.shx,He=this.sy,st=this.tx,_t=this.ty;return new rt(_,K,Te,He,st,_t)},f.Matrix=rt;var Dt=f.matrixMult=function(_,K){return K.multiply(_)},St=new rt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=St;var Nt=function(_,K){if(!At[_]){var Te=(K instanceof Ll?"Sh":"P")+(Object.keys(Me).length+1).toString(10);K.id=Te,At[_]=Te,Me[Te]=K,it.publish("addPattern",K)}};f.ShadingPattern=Ll,f.TilingPattern=Yd,f.addShadingPattern=function(_,K){return H("addShadingPattern()"),Nt(_,K),this},f.beginTilingPattern=function(_){H("beginTilingPattern()"),xA(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},f.endTilingPattern=function(_,K){H("endTilingPattern()"),K.stream=ae[F].join(`
`),Nt(_,K),it.publish("endTilingPattern",K),yt.pop().restore()};var Je=f.__private__.newObject=function(){var _=mt();return vt(_,!0),_},mt=f.__private__.newObjectDeferred=function(){return P++,T[P]=function(){return $},P},vt=function(_,K){return K=typeof K=="boolean"&&K,T[_]=$,K&&D(_+" 0 obj"),_},$t=f.__private__.newAdditionalObject=function(){var _={objId:mt(),content:""};return j.push(_),_},nr=mt(),Ht=mt(),Kt=f.__private__.decodeColorString=function(_){var K=_.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var Te=parseFloat(K[0]);K=[Te,Te,Te,"r"]}for(var He="#",st=0;st<3;st++)He+=("0"+Math.floor(255*parseFloat(K[st])).toString(16)).slice(-2);return He},sr=f.__private__.encodeColorString=function(_){var K;typeof _=="string"&&(_={ch1:_});var Te=_.ch1,He=_.ch2,st=_.ch3,_t=_.ch4,kt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Te=="string"&&Te.charAt(0)!=="#"){var Gt=new rz(Te);if(Gt.ok)Te=Gt.toHex();else if(!/^\d*\.?\d*$/.test(Te))throw new Error('Invalid color "'+Te+'" passed to jsPDF.encodeColorString.')}if(typeof Te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Te)&&(Te="#"+Te[1]+Te[1]+Te[2]+Te[2]+Te[3]+Te[3]),typeof Te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Te)){var gr=parseInt(Te.substr(1),16);Te=gr>>16&255,He=gr>>8&255,st=255&gr}if(He===void 0||_t===void 0&&Te===He&&He===st)if(typeof Te=="string")K=Te+" "+kt[0];else switch(_.precision){case 2:K=Be(Te/255)+" "+kt[0];break;case 3:default:K=M(Te/255)+" "+kt[0]}else if(_t===void 0||Ln(_t)==="object"){if(_t&&!isNaN(_t.a)&&_t.a===0)return K=["1.","1.","1.",kt[1]].join(" ");if(typeof Te=="string")K=[Te,He,st,kt[1]].join(" ");else switch(_.precision){case 2:K=[Be(Te/255),Be(He/255),Be(st/255),kt[1]].join(" ");break;default:case 3:K=[M(Te/255),M(He/255),M(st/255),kt[1]].join(" ")}}else if(typeof Te=="string")K=[Te,He,st,_t,kt[2]].join(" ");else switch(_.precision){case 2:K=[Be(Te),Be(He),Be(st),Be(_t),kt[2]].join(" ");break;case 3:default:K=[M(Te),M(He),M(st),M(_t),kt[2]].join(" ")}return K},Ct=f.__private__.getFilters=function(){return i},ft=f.__private__.putStream=function(_){var K=(_=_||{}).data||"",Te=_.filters||Ct(),He=_.alreadyAppliedFilters||[],st=_.addLength1||!1,_t=K.length,kt=_.objectId,Gt=function(In){return In};if(c!==null&&kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Gt=jr.encryptor(kt,0));var gr={};Te===!0&&(Te=["FlateEncode"]);var Qr=_.additionalKeyValues||[],Ur=(gr=Sr.API.processDataByFilters!==void 0?Sr.API.processDataByFilters(K,Te):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(He)?He.join(" "):He.toString());if(gr.data.length!==0&&(Qr.push({key:"Length",value:gr.data.length}),st===!0&&Qr.push({key:"Length1",value:_t})),Ur.length!=0)if(Ur.split("/").length-1==1)Qr.push({key:"Filter",value:Ur});else{Qr.push({key:"Filter",value:"["+Ur+"]"});for(var qr=0;qr<Qr.length;qr+=1)if(Qr[qr].key==="DecodeParms"){for(var _n=[],Gr=0;Gr<gr.reverseChain.split("/").length-1;Gr+=1)_n.push("null");_n.push(Qr[qr].value),Qr[qr].value="["+_n.join(" ")+"]"}}D("<<");for(var dn=0;dn<Qr.length;dn++)D("/"+Qr[dn].key+" "+Qr[dn].value);D(">>"),gr.data.length!==0&&(D("stream"),D(Gt(gr.data)),D("endstream"))},Ot=f.__private__.putPage=function(_){var K=_.number,Te=_.data,He=_.objId,st=_.contentsObjId;vt(He,!0),D("<</Type /Page"),D("/Parent "+_.rootDictionaryObjId+" 0 R"),D("/Resources "+_.resourceDictionaryObjId+" 0 R"),D("/MediaBox ["+parseFloat(G(_.mediaBox.bottomLeftX))+" "+parseFloat(G(_.mediaBox.bottomLeftY))+" "+G(_.mediaBox.topRightX)+" "+G(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&D("/CropBox ["+G(_.cropBox.bottomLeftX)+" "+G(_.cropBox.bottomLeftY)+" "+G(_.cropBox.topRightX)+" "+G(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&D("/BleedBox ["+G(_.bleedBox.bottomLeftX)+" "+G(_.bleedBox.bottomLeftY)+" "+G(_.bleedBox.topRightX)+" "+G(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&D("/TrimBox ["+G(_.trimBox.bottomLeftX)+" "+G(_.trimBox.bottomLeftY)+" "+G(_.trimBox.topRightX)+" "+G(_.trimBox.topRightY)+"]"),_.artBox!==null&&D("/ArtBox ["+G(_.artBox.bottomLeftX)+" "+G(_.artBox.bottomLeftY)+" "+G(_.artBox.topRightX)+" "+G(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&D("/UserUnit "+_.userUnit),it.publish("putPage",{objId:He,pageContext:Ge[K],pageNumber:K,page:Te}),D("/Contents "+st+" 0 R"),D(">>"),D("endobj");var _t=Te.join(`
`);return I===C.ADVANCED&&(_t+=`
Q`),vt(st,!0),ft({data:_t,filters:Ct(),objectId:st}),D("endobj"),He},Vt=f.__private__.putPages=function(){var _,K,Te=[];for(_=1;_<=ht;_++)Ge[_].objId=mt(),Ge[_].contentsObjId=mt();for(_=1;_<=ht;_++)Te.push(Ot({number:_,data:ae[_],objId:Ge[_].objId,contentsObjId:Ge[_].contentsObjId,mediaBox:Ge[_].mediaBox,cropBox:Ge[_].cropBox,bleedBox:Ge[_].bleedBox,trimBox:Ge[_].trimBox,artBox:Ge[_].artBox,userUnit:Ge[_].userUnit,rootDictionaryObjId:nr,resourceDictionaryObjId:Ht}));vt(nr,!0),D("<</Type /Pages");var He="/Kids [";for(K=0;K<ht;K++)He+=Te[K]+" 0 R ";D(He+"]"),D("/Count "+ht),D(">>"),D("endobj"),it.publish("postPutPages")},ir=function(_){it.publish("putFont",{font:_,out:D,newObject:Je,putStream:ft}),_.isAlreadyPutted!==!0&&(_.objectNumber=Je(),D("<<"),D("/Type /Font"),D("/BaseFont /"+qd(_.postScriptName)),D("/Subtype /Type1"),typeof _.encoding=="string"&&D("/Encoding /"+_.encoding),D("/FirstChar 32"),D("/LastChar 255"),D(">>"),D("endobj"))},cr=function(){for(var _ in qe)qe.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&ir(qe[_])},dr=function(_){_.objectNumber=Je();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[G(_.x),G(_.y),G(_.x+_.width),G(_.y+_.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var Te=_.pages[1].join(`
`);ft({data:Te,additionalKeyValues:K,objectId:_.objectNumber}),D("endobj")},br=function(){for(var _ in xt)xt.hasOwnProperty(_)&&dr(xt[_])},yn=function(_,K){var Te,He=[],st=1/(K-1);for(Te=0;Te<1;Te+=st)He.push(Te);if(He.push(1),_[0].offset!=0){var _t={offset:0,color:_[0].color};_.unshift(_t)}if(_[_.length-1].offset!=1){var kt={offset:1,color:_[_.length-1].color};_.push(kt)}for(var Gt="",gr=0,Qr=0;Qr<He.length;Qr++){for(Te=He[Qr];Te>_[gr+1].offset;)gr++;var Ur=_[gr].offset,qr=(Te-Ur)/(_[gr+1].offset-Ur),_n=_[gr].color,Gr=_[gr+1].color;Gt+=U(Math.round((1-qr)*_n[0]+qr*Gr[0]).toString(16))+U(Math.round((1-qr)*_n[1]+qr*Gr[1]).toString(16))+U(Math.round((1-qr)*_n[2]+qr*Gr[2]).toString(16))}return Gt.trim()},Fn=function(_,K){K||(K=21);var Te=Je(),He=yn(_.colors,K),st=[];st.push({key:"FunctionType",value:"0"}),st.push({key:"Domain",value:"[0.0 1.0]"}),st.push({key:"Size",value:"["+K+"]"}),st.push({key:"BitsPerSample",value:"8"}),st.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:He,additionalKeyValues:st,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Te}),D("endobj"),_.objectNumber=Je(),D("<< /ShadingType "+_.type),D("/ColorSpace /DeviceRGB");var _t="/Coords ["+G(parseFloat(_.coords[0]))+" "+G(parseFloat(_.coords[1]))+" ";_.type===2?_t+=G(parseFloat(_.coords[2]))+" "+G(parseFloat(_.coords[3])):_t+=G(parseFloat(_.coords[2]))+" "+G(parseFloat(_.coords[3]))+" "+G(parseFloat(_.coords[4]))+" "+G(parseFloat(_.coords[5])),D(_t+="]"),_.matrix&&D("/Matrix ["+_.matrix.toString()+"]"),D("/Function "+Te+" 0 R"),D("/Extend [true true]"),D(">>"),D("endobj")},Dr=function(_,K){var Te=mt(),He=Je();K.push({resourcesOid:Te,objectOid:He}),_.objectNumber=He;var st=[];st.push({key:"Type",value:"/Pattern"}),st.push({key:"PatternType",value:"1"}),st.push({key:"PaintType",value:"1"}),st.push({key:"TilingType",value:"1"}),st.push({key:"BBox",value:"["+_.boundingBox.map(G).join(" ")+"]"}),st.push({key:"XStep",value:G(_.xStep)}),st.push({key:"YStep",value:G(_.yStep)}),st.push({key:"Resources",value:Te+" 0 R"}),_.matrix&&st.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),ft({data:_.stream,additionalKeyValues:st,objectId:_.objectNumber}),D("endobj")},Br=function(_){var K;for(K in Me)Me.hasOwnProperty(K)&&(Me[K]instanceof Ll?Fn(Me[K]):Me[K]instanceof Yd&&Dr(Me[K],_))},Wr=function(_){for(var K in _.objectNumber=Je(),D("<<"),_)switch(K){case"opacity":D("/ca "+Be(_[K]));break;case"stroke-opacity":D("/CA "+Be(_[K]))}D(">>"),D("endobj")},Vr=function(){var _;for(_ in Ve)Ve.hasOwnProperty(_)&&Wr(Ve[_])},fr=function(){for(var _ in D("/XObject <<"),xt)xt.hasOwnProperty(_)&&xt[_].objectNumber>=0&&D("/"+_+" "+xt[_].objectNumber+" 0 R");it.publish("putXobjectDict"),D(">>")},yr=function(){jr.oid=Je(),D("<<"),D("/Filter /Standard"),D("/V "+jr.v),D("/R "+jr.r),D("/U <"+jr.toHexString(jr.U)+">"),D("/O <"+jr.toHexString(jr.O)+">"),D("/P "+jr.P),D(">>"),D("endobj")},en=function(){for(var _ in D("/Font <<"),qe)qe.hasOwnProperty(_)&&(u===!1||u===!0&&h.hasOwnProperty(_))&&D("/"+_+" "+qe[_].objectNumber+" 0 R");D(">>")},gn=function(){if(Object.keys(Me).length>0){for(var _ in D("/Shading <<"),Me)Me.hasOwnProperty(_)&&Me[_]instanceof Ll&&Me[_].objectNumber>=0&&D("/"+_+" "+Me[_].objectNumber+" 0 R");it.publish("putShadingPatternDict"),D(">>")}},On=function(_){if(Object.keys(Me).length>0){for(var K in D("/Pattern <<"),Me)Me.hasOwnProperty(K)&&Me[K]instanceof f.TilingPattern&&Me[K].objectNumber>=0&&Me[K].objectNumber<_&&D("/"+K+" "+Me[K].objectNumber+" 0 R");it.publish("putTilingPatternDict"),D(">>")}},tn=function(){if(Object.keys(Ve).length>0){var _;for(_ in D("/ExtGState <<"),Ve)Ve.hasOwnProperty(_)&&Ve[_].objectNumber>=0&&D("/"+_+" "+Ve[_].objectNumber+" 0 R");it.publish("putGStateDict"),D(">>")}},Cr=function(_){vt(_.resourcesOid,!0),D("<<"),D("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),en(),gn(),On(_.objectOid),tn(),fr(),D(">>"),D("endobj")},Yn=function(){var _=[];cr(),Vr(),br(),Br(_),it.publish("putResources"),_.forEach(Cr),Cr({resourcesOid:Ht,objectOid:Number.MAX_SAFE_INTEGER}),it.publish("postPutResources")},Yo=function(){it.publish("putAdditionalObjects");for(var _=0;_<j.length;_++){var K=j[_];vt(K.objId,!0),D(K.content),D("endobj")}it.publish("postPutAdditionalObjects")},Co=function(_){je[_.fontName]=je[_.fontName]||{},je[_.fontName][_.fontStyle]=_.id},Ze=function(_,K,Te,He,st){var _t={id:"F"+(Object.keys(qe).length+1).toString(10),postScriptName:_,fontName:K,fontStyle:Te,encoding:He,isStandardFont:st||!1,metadata:{}};return it.publish("addFont",{font:_t,instance:this}),qe[_t.id]=_t,Co(_t),_t.id},Qt=function(_){for(var K=0,Te=le.length;K<Te;K++){var He=Ze.call(this,_[K][0],_[K][1],_[K][2],le[K][3],!0);u===!1&&(h[He]=!0);var st=_[K][0].split("-");Co({id:He,fontName:st[0],fontStyle:st[1]||""})}it.publish("addFonts",{fonts:qe,dictionary:je})},Mt=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(He){var K=He.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var Te="Error in function "+K.split(`
`)[0].split("<")[0]+": "+He.message;if(!Ir.console)throw new Error(Te);Ir.console.error(Te,He),Ir.alert&&alert(Te)}},_.foo.bar=_,_.foo},jt=function(_,K){var Te,He,st,_t,kt,Gt,gr,Qr,Ur;if(st=(K=K||{}).sourceEncoding||"Unicode",kt=K.outputEncoding,(K.autoencode||kt)&&qe[de].metadata&&qe[de].metadata[st]&&qe[de].metadata[st].encoding&&(_t=qe[de].metadata[st].encoding,!kt&&qe[de].encoding&&(kt=qe[de].encoding),!kt&&_t.codePages&&(kt=_t.codePages[0]),typeof kt=="string"&&(kt=_t[kt]),kt)){for(gr=!1,Gt=[],Te=0,He=_.length;Te<He;Te++)(Qr=kt[_.charCodeAt(Te)])?Gt.push(String.fromCharCode(Qr)):Gt.push(_[Te]),Gt[Te].charCodeAt(0)>>8&&(gr=!0);_=Gt.join("")}for(Te=_.length;gr===void 0&&Te!==0;)_.charCodeAt(Te-1)>>8&&(gr=!0),Te--;if(!gr)return _;for(Gt=K.noBOM?[]:[254,255],Te=0,He=_.length;Te<He;Te++){if((Ur=(Qr=_.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(Ur),Gt.push(Qr-(Ur<<8))}return String.fromCharCode.apply(void 0,Gt)},mr=f.__private__.pdfEscape=f.pdfEscape=function(_,K){return jt(_,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ur=f.__private__.beginPage=function(_){ae[++ht]=[],Ge[ht]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Rr(ht),X(ae[F])},ar=function(_,K){var Te,He,st;switch(t=K||t,typeof _=="string"&&(Te=x(_.toLowerCase()),Array.isArray(Te)&&(He=Te[0],st=Te[1])),Array.isArray(_)&&(He=_[0]*ye,st=_[1]*ye),isNaN(He)&&(He=o[0],st=o[1]),(He>14400||st>14400)&&(Mn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),He=Math.min(14400,He),st=Math.min(14400,st)),o=[He,st],t.substr(0,1)){case"l":st>He&&(o=[st,He]);break;case"p":He>st&&(o=[st,He])}ur(o),La(Ci),D(Zo),Zi!==0&&D(Zi+" J"),ea!==0&&D(ea+" j"),it.publish("addPage",{pageNumber:ht})},Hr=function(_){_>0&&_<=ht&&(ae.splice(_,1),Ge.splice(_,1),ht--,F>ht&&(F=ht),this.setPage(F))},Rr=function(_){_>0&&_<=ht&&(F=_)},Xt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return ae.length-1},pr=function(_,K,Te){var He,st=void 0;return Te=Te||{},_=_!==void 0?_:qe[de].fontName,K=K!==void 0?K:qe[de].fontStyle,He=_.toLowerCase(),je[He]!==void 0&&je[He][K]!==void 0?st=je[He][K]:je[_]!==void 0&&je[_][K]!==void 0?st=je[_][K]:Te.disableWarning===!1&&Mn.warn("Unable to look up font label for font '"+_+"', '"+K+"'. Refer to getFontList() for available fonts."),st||Te.noFallback||(st=je.times[K])==null&&(st=je.times.normal),st},Pr=f.__private__.putInfo=function(){var _=Je(),K=function(He){return He};for(var Te in c!==null&&(K=jr.encryptor(_,0)),D("<<"),D("/Producer ("+mr(K("jsPDF "+Sr.version))+")"),q)q.hasOwnProperty(Te)&&q[Te]&&D("/"+Te.substr(0,1).toUpperCase()+Te.substr(1)+" ("+mr(K(q[Te]))+")");D("/CreationDate ("+mr(K(he))+")"),D(">>"),D("endobj")},bn=f.__private__.putCatalog=function(_){var K=(_=_||{}).rootDictionaryObjId||nr;switch(Je(),D("<<"),D("/Type /Catalog"),D("/Pages "+K+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":D("/OpenAction [3 0 R /FitH null]");break;case"fullheight":D("/OpenAction [3 0 R /FitV null]");break;case"fullpage":D("/OpenAction [3 0 R /Fit]");break;case"original":D("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Te=""+Ie;Te.substr(Te.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&D("/OpenAction [3 0 R /XYZ null null "+Be(Ie)+"]")}switch(Oe||(Oe="continuous"),Oe){case"continuous":D("/PageLayout /OneColumn");break;case"single":D("/PageLayout /SinglePage");break;case"two":case"twoleft":D("/PageLayout /TwoColumnLeft");break;case"tworight":D("/PageLayout /TwoColumnRight")}Ce&&D("/PageMode /"+Ce),it.publish("putCatalog"),D(">>"),D("endobj")},qn=f.__private__.putTrailer=function(){D("trailer"),D("<<"),D("/Size "+(P+1)),D("/Root "+P+" 0 R"),D("/Info "+(P-1)+" 0 R"),c!==null&&D("/Encrypt "+jr.oid+" 0 R"),D("/ID [ <"+ie+"> <"+ie+"> ]"),D(">>")},wo=f.__private__.putHeader=function(){D("%PDF-"+g),D("%")},Rt=f.__private__.putXRef=function(){var _="0000000000";D("xref"),D("0 "+(P+1)),D("0000000000 65535 f ");for(var K=1;K<=P;K++)typeof T[K]=="function"?D((_+T[K]()).slice(-10)+" 00000 n "):T[K]!==void 0?D((_+T[K]).slice(-10)+" 00000 n "):D("0000000000 00000 n ")},Tr=f.__private__.buildDocument=function(){Le(),X(R),it.publish("buildDocument"),wo(),Vt(),Yo(),Yn(),c!==null&&yr(),Pr(),bn();var _=$;return Rt(),qn(),D("startxref"),D(""+_),D("%%EOF"),X(ae[F]),R.join(`
`)},Xr=f.__private__.getBlob=function(_){return new Blob([ve(_)],{type:"application/pdf"})},hr=f.output=f.__private__.output=Mt(function(_,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",_){case void 0:return Tr();case"save":f.save(K.filename);break;case"arraybuffer":return ve(Tr());case"blob":return Xr(Tr());case"bloburi":case"bloburl":if(Ir.URL!==void 0&&typeof Ir.URL.createObjectURL=="function")return Ir.URL&&Ir.URL.createObjectURL(Xr(Tr()))||void 0;Mn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Te="",He=Tr();try{Te=xm(He)}catch{Te=xm(unescape(encodeURIComponent(He)))}return"data:application/pdf;filename="+K.filename+";base64,"+Te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var st="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(st=K.pdfObjectUrl,_t="");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+st+'"'+_t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Gt=Ir.open();return Gt!==null&&Gt.document.write(kt),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Qr=Ir.open();if(Qr!==null){Qr.document.write(gr);var Ur=this;Qr.document.documentElement.querySelector("#pdfViewer").onload=function(){Qr.document.title=K.filename,Qr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ur.output("bloburl"))}}return Qr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ir)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',_n=Ir.open();if(_n!==null&&(_n.document.write(qr),_n.document.title=K.filename),_n||typeof safari>"u")return _n;break;case"datauri":case"dataurl":return Ir.document.location.href=this.output("datauristring",K);default:return null}}),So=function(_){return Array.isArray(zt)===!0&&zt.indexOf(_)>-1};switch(r){case"pt":ye=1;break;case"mm":ye=72/25.4;break;case"cm":ye=72/2.54;break;case"in":ye=72;break;case"px":ye=So("px_scaling")==1?.75:96/72;break;case"pc":case"em":ye=12;break;case"ex":ye=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ye=r}var jr=null;we(),te();var An=function(_){return c!==null?jr.encryptor(_,0):function(K){return K}},yo=f.__private__.getPageInfo=f.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ge[_].objId,pageNumber:_,pageContext:Ge[_]}},wr=f.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in Ge)if(Ge[K].objId===_)break;return yo(K)},Fa=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ge[F].objId,pageNumber:F,pageContext:Ge[F]}};f.addPage=function(){return ar.apply(this,arguments),this},f.setPage=function(){return Rr.apply(this,arguments),X.call(this,ae[F]),this},f.insertPage=function(_){return this.addPage(),this.movePage(F,_),this},f.movePage=function(_,K){var Te,He;if(_>K){Te=ae[_],He=Ge[_];for(var st=_;st>K;st--)ae[st]=ae[st-1],Ge[st]=Ge[st-1];ae[K]=Te,Ge[K]=He,this.setPage(K)}else if(_<K){Te=ae[_],He=Ge[_];for(var _t=_;_t<K;_t++)ae[_t]=ae[_t+1],Ge[_t]=Ge[_t+1];ae[K]=Te,Ge[K]=He,this.setPage(K)}return this},f.deletePage=function(){return Hr.apply(this,arguments),this},f.__private__.text=f.text=function(_,K,Te,He,st){var _t,kt,Gt,gr,Qr,Ur,qr,_n,Gr,dn=(He=He||{}).scope||this;if(typeof _=="number"&&typeof K=="number"&&(typeof Te=="string"||Array.isArray(Te))){var In=Te;Te=K,K=_,_=In}if(arguments[3]instanceof rt?(H("The transform parameter of text() with a Matrix value"),Gr=st):(Gt=arguments[4],gr=arguments[5],Ln(qr=arguments[3])==="object"&&qr!==null||(typeof Gt=="string"&&(gr=Gt,Gt=null),typeof qr=="string"&&(gr=qr,qr=null),typeof qr=="number"&&(Gt=qr,qr=null),He={flags:qr,angle:Gt,align:gr})),isNaN(K)||isNaN(Te)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return dn;var xn="",us=!1,Ho=typeof He.lineHeightFactor=="number"?He.lineHeightFactor:ii,Fs=dn.internal.scaleFactor;function Ai(jn){return jn=jn.split("	").join(Array(He.TabLen||9).join(" ")),mr(jn,qr)}function na(jn){for(var Rn,Ao=jn.concat(),Eo=[],Va=Ao.length;Va--;)typeof(Rn=Ao.shift())=="string"?Eo.push(Rn):Array.isArray(jn)&&(Rn.length===1||Rn[1]===void 0&&Rn[2]===void 0)?Eo.push(Rn[0]):Eo.push([Rn[0],Rn[1],Rn[2]]);return Eo}function oa(jn,Rn){var Ao;if(typeof jn=="string")Ao=Rn(jn)[0];else if(Array.isArray(jn)){for(var Eo,Va,Mc=jn.concat(),fd=[],vh=Mc.length;vh--;)typeof(Eo=Mc.shift())=="string"?fd.push(Rn(Eo)[0]):Array.isArray(Eo)&&typeof Eo[0]=="string"&&(Va=Rn(Eo[0],Eo[1],Eo[2]),fd.push([Va[0],Va[1],Va[2]]));Ao=fd}return Ao}var kr=!1,Yr=!0;if(typeof _=="string")kr=!0;else if(Array.isArray(_)){var Kn=_.concat();kt=[];for(var jo,Dn=Kn.length;Dn--;)(typeof(jo=Kn.shift())!="string"||Array.isArray(jo)&&typeof jo[0]!="string")&&(Yr=!1);kr=Yr}if(kr===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var hs=ue/dn.internal.scaleFactor,Vs=hs*(Ho-1);switch(He.baseline){case"bottom":Te-=Vs;break;case"top":Te+=hs-Vs;break;case"hanging":Te+=hs-2*Vs;break;case"middle":Te+=hs/2-Vs}if((Ur=He.maxWidth||0)>0&&(typeof _=="string"?_=dn.splitTextToSize(_,Ur):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(jn,Rn){return jn.concat(dn.splitTextToSize(Rn,Ur))},[]))),_t={text:_,x:K,y:Te,options:He,mutex:{pdfEscape:mr,activeFontKey:de,fonts:qe,activeFontSize:ue}},it.publish("preProcessText",_t),_=_t.text,Gt=(He=_t.options).angle,!(Gr instanceof rt)&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,He.rotationDirection===0&&(Gt=-Gt),I===C.ADVANCED&&(Gt=-Gt);var sa=Math.cos(Gt),Ra=Math.sin(Gt);Gr=new rt(sa,Ra,-Ra,sa,0,0)}else Gt&&Gt instanceof rt&&(Gr=Gt);I!==C.ADVANCED||Gr||(Gr=St),(Qr=He.charSpace||ai)!==void 0&&(xn+=G(O(Qr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_n=He.horizontalScale)!==void 0&&(xn+=G(100*_n)+` Tz
`),He.lang;var Ro=-1,kc=He.renderingMode!==void 0?He.renderingMode:He.stroke,li=dn.internal.getCurrentPageInfo().pageContext;switch(kc){case 0:case!1:case"fill":Ro=0;break;case 1:case!0:case"stroke":Ro=1;break;case 2:case"fillThenStroke":Ro=2;break;case 3:case"invisible":Ro=3;break;case 4:case"fillAndAddForClipping":Ro=4;break;case 5:case"strokeAndAddPathForClipping":Ro=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ro=6;break;case 7:case"addToPathForClipping":Ro=7}var di=li.usedRenderingMode!==void 0?li.usedRenderingMode:-1;Ro!==-1?xn+=Ro+` Tr
`:di!==-1&&(xn+=`0 Tr
`),Ro!==-1&&(li.usedRenderingMode=Ro),gr=He.align||"left";var es,dd=ue*Ho,fh=dn.internal.pageSize.getWidth(),ph=qe[de];Qr=He.charSpace||ai,Ur=He.maxWidth||0,qr=Object.assign({autoencode:!0,noBOM:!0},He.flags);var zA=[],wl=function(jn){return dn.getStringUnitWidth(jn,{font:ph,charSpace:Qr,fontSize:ue,doKerning:!1})*ue/Fs};if(Object.prototype.toString.call(_)==="[object Array]"){var Is;kt=na(_),gr!=="left"&&(es=kt.map(wl));var fs,CA=0;if(gr==="right"){K-=es[0],_=[],Dn=kt.length;for(var $a=0;$a<Dn;$a++)$a===0?(fs=Es(K),Is=cs(Te)):(fs=O(CA-es[$a]),Is=-dd),_.push([kt[$a],fs,Is]),CA=es[$a]}else if(gr==="center"){K-=es[0]/2,_=[],Dn=kt.length;for(var qa=0;qa<Dn;qa++)qa===0?(fs=Es(K),Is=cs(Te)):(fs=O((CA-es[qa])/2),Is=-dd),_.push([kt[qa],fs,Is]),CA=es[qa]}else if(gr==="left"){_=[],Dn=kt.length;for(var cd=0;cd<Dn;cd++)_.push(kt[cd])}else if(gr==="justify"&&ph.encoding==="Identity-H"){_=[],Dn=kt.length,Ur=Ur!==0?Ur:fh;for(var Ka=0,ao=0;ao<Dn;ao++)if(Is=ao===0?cs(Te):-dd,fs=ao===0?Es(K):Ka,ao<Dn-1){var Oc=O((Ur-es[ao])/(kt[ao].split(" ").length-1)),ps=kt[ao].split(" ");_.push([ps[0]+" ",fs,Is]),Ka=0;for(var ci=1;ci<ps.length;ci++){var ud=(wl(ps[ci-1]+" "+ps[ci])-wl(ps[ci]))*Fs+Oc;ci==ps.length-1?_.push([ps[ci],ud,0]):_.push([ps[ci]+" ",ud,0]),Ka-=ud}}else _.push([kt[ao],fs,Is]);_.push(["",Ka,0])}else{if(gr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Dn=kt.length,Ur=Ur!==0?Ur:fh,ao=0;ao<Dn;ao++)Is=ao===0?cs(Te):-dd,fs=ao===0?Es(K):0,ao<Dn-1?zA.push(G(O((Ur-es[ao])/(kt[ao].split(" ").length-1)))):zA.push(0),_.push([kt[ao],fs,Is])}}var gh=typeof He.R2L=="boolean"?He.R2L:ze;gh===!0&&(_=oa(_,function(jn,Rn,Ao){return[jn.split("").reverse().join(""),Rn,Ao]})),_t={text:_,x:K,y:Te,options:He,mutex:{pdfEscape:mr,activeFontKey:de,fonts:qe,activeFontSize:ue}},it.publish("postProcessText",_t),_=_t.text,us=_t.mutex.isHex||!1;var Dc=qe[de].encoding;Dc!=="WinAnsiEncoding"&&Dc!=="StandardEncoding"||(_=oa(_,function(jn,Rn,Ao){return[Ai(jn),Rn,Ao]})),kt=na(_),_=[];for(var yl,bl,SA,_l=0,hd=1,xl=Array.isArray(kt[0])?hd:_l,EA="",Nc=function(jn,Rn,Ao){var Eo="";return Ao instanceof rt?(Ao=typeof He.angle=="number"?Dt(Ao,new rt(1,0,0,1,jn,Rn)):Dt(new rt(1,0,0,1,jn,Rn),Ao),I===C.ADVANCED&&(Ao=Dt(new rt(1,0,0,-1,0,0),Ao)),Eo=Ao.join(" ")+` Tm
`):Eo=G(jn)+" "+G(Rn)+` Td
`,Eo},ui=0;ui<kt.length;ui++){switch(EA="",xl){case hd:SA=(us?"<":"(")+kt[ui][0]+(us?">":")"),yl=parseFloat(kt[ui][1]),bl=parseFloat(kt[ui][2]);break;case _l:SA=(us?"<":"(")+kt[ui]+(us?">":")"),yl=Es(K),bl=cs(Te)}zA!==void 0&&zA[ui]!==void 0&&(EA=zA[ui]+` Tw
`),ui===0?_.push(EA+Nc(yl,bl,Gr)+SA):xl===_l?_.push(EA+SA):xl===hd&&_.push(EA+Nc(yl,bl,Gr)+SA)}_=xl===_l?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var hi=`BT
/`;return hi+=de+" "+ue+` Tf
`,hi+=G(ue*Ho)+` TL
`,hi+=Si+`
`,hi+=xn,hi+=_,D(hi+="ET"),h[de]=!0,dn};var Cs=f.__private__.clip=f.clip=function(_){return D(_==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Cs("evenodd")},f.__private__.discardPath=f.discardPath=function(){return D("n"),this};var bo=f.__private__.isValidStyle=function(_){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(K=!0),K};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(_){return bo(_)&&(d=_),this};var Ia=f.__private__.getStyle=f.getStyle=function(_){var K=d;switch(_){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=_}return K},Ua=f.close=function(){return D("h"),this};f.stroke=function(){return D("S"),this},f.fill=function(_){return zi("f",_),this},f.fillEvenOdd=function(_){return zi("f*",_),this},f.fillStroke=function(_){return zi("B",_),this},f.fillStrokeEvenOdd=function(_){return zi("B*",_),this};var zi=function(_,K){Ln(K)==="object"?vl(K,_):D(_)},Qa=function(_){_===null||I===C.ADVANCED&&_===void 0||(_=Ia(_),D(_))};function gl(_,K,Te,He,st){var _t=new Yd(K||this.boundingBox,Te||this.xStep,He||this.yStep,this.gState,st||this.matrix);_t.stream=this.stream;var kt=_+"$$"+this.cloneIndex+++"$$";return Nt(kt,_t),_t}var vl=function(_,K){var Te=At[_.key],He=Me[Te];if(He instanceof Ll)D("q"),D(To(K)),He.gState&&f.setGState(He.gState),D(_.matrix.toString()+" cm"),D("/"+Te+" sh"),D("Q");else if(He instanceof Yd){var st=new rt(1,0,0,-1,0,Ks());_.matrix&&(st=st.multiply(_.matrix||St),Te=gl.call(He,_.key,_.boundingBox,_.xStep,_.yStep,st).id),D("q"),D("/Pattern cs"),D("/"+Te+" scn"),He.gState&&f.setGState(He.gState),D(K),D("Q")}},To=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Jo=f.moveTo=function(_,K){return D(G(O(_))+" "+G(re(K))+" m"),this},Ss=f.lineTo=function(_,K){return D(G(O(_))+" "+G(re(K))+" l"),this},ln=f.curveTo=function(_,K,Te,He,st,_t){return D([G(O(_)),G(re(K)),G(O(Te)),G(re(He)),G(O(st)),G(re(_t)),"c"].join(" ")),this};f.__private__.line=f.line=function(_,K,Te,He,st){if(isNaN(_)||isNaN(K)||isNaN(Te)||isNaN(He)||!bo(st))throw new Error("Invalid arguments passed to jsPDF.line");return I===C.COMPAT?this.lines([[Te-_,He-K]],_,K,[1,1],st||"S"):this.lines([[Te-_,He-K]],_,K,[1,1]).stroke()},f.__private__.lines=f.lines=function(_,K,Te,He,st,_t){var kt,Gt,gr,Qr,Ur,qr,_n,Gr,dn,In,xn,us;if(typeof _=="number"&&(us=Te,Te=K,K=_,_=us),He=He||[1,1],_t=_t||!1,isNaN(K)||isNaN(Te)||!Array.isArray(_)||!Array.isArray(He)||!bo(st)||typeof _t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Jo(K,Te),kt=He[0],Gt=He[1],Qr=_.length,In=K,xn=Te,gr=0;gr<Qr;gr++)(Ur=_[gr]).length===2?(In=Ur[0]*kt+In,xn=Ur[1]*Gt+xn,Ss(In,xn)):(qr=Ur[0]*kt+In,_n=Ur[1]*Gt+xn,Gr=Ur[2]*kt+In,dn=Ur[3]*Gt+xn,In=Ur[4]*kt+In,xn=Ur[5]*Gt+xn,ln(qr,_n,Gr,dn,In,xn));return _t&&Ua(),Qa(st),this},f.path=function(_){for(var K=0;K<_.length;K++){var Te=_[K],He=Te.c;switch(Te.op){case"m":Jo(He[0],He[1]);break;case"l":Ss(He[0],He[1]);break;case"c":ln.apply(this,He);break;case"h":Ua()}}return this},f.__private__.rect=f.rect=function(_,K,Te,He,st){if(isNaN(_)||isNaN(K)||isNaN(Te)||isNaN(He)||!bo(st))throw new Error("Invalid arguments passed to jsPDF.rect");return I===C.COMPAT&&(He=-He),D([G(O(_)),G(re(K)),G(O(Te)),G(O(He)),"re"].join(" ")),Qa(st),this},f.__private__.triangle=f.triangle=function(_,K,Te,He,st,_t,kt){if(isNaN(_)||isNaN(K)||isNaN(Te)||isNaN(He)||isNaN(st)||isNaN(_t)||!bo(kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Te-_,He-K],[st-Te,_t-He],[_-st,K-_t]],_,K,[1,1],kt,!0),this},f.__private__.roundedRect=f.roundedRect=function(_,K,Te,He,st,_t,kt){if(isNaN(_)||isNaN(K)||isNaN(Te)||isNaN(He)||isNaN(st)||isNaN(_t)||!bo(kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return st=Math.min(st,.5*Te),_t=Math.min(_t,.5*He),this.lines([[Te-2*st,0],[st*Gt,0,st,_t-_t*Gt,st,_t],[0,He-2*_t],[0,_t*Gt,-st*Gt,_t,-st,_t],[2*st-Te,0],[-st*Gt,0,-st,-_t*Gt,-st,-_t],[0,2*_t-He],[0,-_t*Gt,st*Gt,-_t,st,-_t]],_+st,K,[1,1],kt,!0),this},f.__private__.ellipse=f.ellipse=function(_,K,Te,He,st){if(isNaN(_)||isNaN(K)||isNaN(Te)||isNaN(He)||!bo(st))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _t=4/3*(Math.SQRT2-1)*Te,kt=4/3*(Math.SQRT2-1)*He;return Jo(_+Te,K),ln(_+Te,K-kt,_+_t,K-He,_,K-He),ln(_-_t,K-He,_-Te,K-kt,_-Te,K),ln(_-Te,K+kt,_-_t,K+He,_,K+He),ln(_+_t,K+He,_+Te,K+kt,_+Te,K),Qa(st),this},f.__private__.circle=f.circle=function(_,K,Te,He){if(isNaN(_)||isNaN(K)||isNaN(Te)||!bo(He))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,K,Te,Te,He)},f.setFont=function(_,K,Te){return Te&&(K=ee(K,Te)),de=pr(_,K,{disableWarning:!1}),this};var Ta=f.__private__.getFont=f.getFont=function(){return qe[pr.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var _,K,Te={};for(_ in je)if(je.hasOwnProperty(_))for(K in Te[_]=[],je[_])je[_].hasOwnProperty(K)&&Te[_].push(K);return Te},f.addFont=function(_,K,Te,He,st){var _t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_t.indexOf(arguments[3])!==-1?st=arguments[3]:arguments[3]&&_t.indexOf(arguments[3])==-1&&(Te=ee(Te,He)),st=st||"Identity-H",Ze.call(this,_,K,Te,st)};var ii,Ci=n.lineWidth||.200025,Ji=f.__private__.getLineWidth=f.getLineWidth=function(){return Ci},La=f.__private__.setLineWidth=f.setLineWidth=function(_){return Ci=_,D(G(O(_))+" w"),this};f.__private__.setLineDash=Sr.API.setLineDash=Sr.API.setLineDashPattern=function(_,K){if(_=_||[],K=K||0,isNaN(K)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(Te){return G(O(Te))}).join(" "),K=G(O(K)),D("["+_+"] "+K+" d"),this};var Pa=f.__private__.getLineHeight=f.getLineHeight=function(){return ue*ii};f.__private__.getLineHeight=f.getLineHeight=function(){return ue*ii};var ka=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(ii=_),this},Oa=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ii};ka(n.lineHeight);var Es=f.__private__.getHorizontalCoordinate=function(_){return O(_)},cs=f.__private__.getVerticalCoordinate=function(_){return I===C.ADVANCED?_:Ge[F].mediaBox.topRightY-Ge[F].mediaBox.bottomLeftY-O(_)},bA=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(_){return G(Es(_))},qs=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(_){return G(cs(_))},Zo=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Kt(Zo)},f.__private__.setStrokeColor=f.setDrawColor=function(_,K,Te,He){return Zo=sr({ch1:_,ch2:K,ch3:Te,ch4:He,pdfColorType:"draw",precision:2}),D(Zo),this};var Da=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Kt(Da)},f.__private__.setFillColor=f.setFillColor=function(_,K,Te,He){return Da=sr({ch1:_,ch2:K,ch3:Te,ch4:He,pdfColorType:"fill",precision:2}),D(Da),this};var Si=n.textColor||"0 g",ml=f.__private__.getTextColor=f.getTextColor=function(){return Kt(Si)};f.__private__.setTextColor=f.setTextColor=function(_,K,Te,He){return Si=sr({ch1:_,ch2:K,ch3:Te,ch4:He,pdfColorType:"text",precision:3}),this};var ai=n.charSpace,_A=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(ai||0)};f.__private__.setCharSpace=f.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ai=_,this};var Zi=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(_){var K=f.CapJoinStyles[_];if(K===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zi=K,D(K+" J"),this};var ea=0;f.__private__.setLineJoin=f.setLineJoin=function(_){var K=f.CapJoinStyles[_];if(K===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ea=K,D(K+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return D(G(O(_))+" M"),this},f.GState=qp,f.setGState=function(_){(_=typeof _=="string"?Ve[Ye[_]]:Na(null,_)).equals(ot)||(D("/"+_.id+" gs"),ot=_)};var Na=function(_,K){if(!_||!Ye[_]){var Te=!1;for(var He in Ve)if(Ve.hasOwnProperty(He)&&Ve[He].equals(K)){Te=!0;break}if(Te)K=Ve[He];else{var st="GS"+(Object.keys(Ve).length+1).toString(10);Ve[st]=K,K.id=st}return _&&(Ye[_]=K.id),it.publish("addGState",K),K}};f.addGState=function(_,K){return Na(_,K),this},f.saveGraphicsState=function(){return D("q"),fe.push({key:de,size:ue,color:Si}),this},f.restoreGraphicsState=function(){D("Q");var _=fe.pop();return de=_.key,ue=_.size,Si=_.color,ot=null,this},f.setCurrentTransformationMatrix=function(_){return D(_.toString()+" cm"),this},f.comment=function(_){return D("#"+_),this};var ta=function(_,K){var Te=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Te},set:function(_t){isNaN(_t)||(Te=parseFloat(_t))}});var He=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return He},set:function(_t){isNaN(_t)||(He=parseFloat(_t))}});var st="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return st},set:function(_t){st=_t.toString()}}),this},Ma=function(_,K,Te,He){ta.call(this,_,K),this.type="rect";var st=Te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return st},set:function(kt){isNaN(kt)||(st=parseFloat(kt))}});var _t=He||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _t},set:function(kt){isNaN(kt)||(_t=parseFloat(kt))}}),this},ra=function(){this.page=ht,this.currentPage=F,this.pages=ae.slice(0),this.pagesContext=Ge.slice(0),this.x=Fe,this.y=Pe,this.matrix=nt,this.width=Fi(F),this.height=Ks(F),this.outputDestination=_e,this.id="",this.objectNumber=-1};ra.prototype.restore=function(){ht=this.page,F=this.currentPage,Ge=this.pagesContext,ae=this.pages,Fe=this.x,Pe=this.y,nt=this.matrix,Ha(F,this.width),ja(F,this.height),_e=this.outputDestination};var xA=function(_,K,Te,He,st){yt.push(new ra),ht=F=0,ae=[],Fe=_,Pe=K,nt=st,ur([Te,He])},BA=function(_){if(Tt[_])yt.pop().restore();else{var K=new ra,Te="Xo"+(Object.keys(xt).length+1).toString(10);K.id=Te,Tt[_]=Te,xt[Te]=K,it.publish("addFormObject",K),yt.pop().restore()}};for(var Ei in f.beginFormObject=function(_,K,Te,He,st){return xA(_,K,Te,He,st),this},f.endFormObject=function(_){return BA(_),this},f.doFormObject=function(_,K){var Te=xt[Tt[_]];return D("q"),D(K.toString()+" cm"),D("/"+Te.id+" Do"),D("Q"),this},f.getFormObject=function(_){var K=xt[Tt[_]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},f.save=function(_,K){return _=_||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(El(Xr(Tr()),_),typeof El.unload=="function"&&Ir.setTimeout&&setTimeout(El.unload,911),this):new Promise(function(Te,He){try{var st=El(Xr(Tr()),_);typeof El.unload=="function"&&Ir.setTimeout&&setTimeout(El.unload,911),Te(st)}catch(_t){He(_t.message)}})},Sr.API)Sr.API.hasOwnProperty(Ei)&&(Ei==="events"&&Sr.API.events.length?function(_,K){var Te,He,st;for(st=K.length-1;st!==-1;st--)Te=K[st][0],He=K[st][1],_.subscribe.apply(_,[Te].concat(typeof He=="function"?[He]:He))}(it,Sr.API.events):f[Ei]=Sr.API[Ei]);var Fi=f.getPageWidth=function(_){return(Ge[_=_||F].mediaBox.topRightX-Ge[_].mediaBox.bottomLeftX)/ye},Ha=f.setPageWidth=function(_,K){Ge[_].mediaBox.topRightX=K*ye+Ge[_].mediaBox.bottomLeftX},Ks=f.getPageHeight=function(_){return(Ge[_=_||F].mediaBox.topRightY-Ge[_].mediaBox.bottomLeftY)/ye},ja=f.setPageHeight=function(_,K){Ge[_].mediaBox.topRightY=K*ye+Ge[_].mediaBox.bottomLeftY};return f.internal={pdfEscape:mr,getStyle:Ia,getFont:Ta,getFontSize:Ne,getCharSpace:_A,getTextColor:ml,getLineHeight:Pa,getLineHeightFactor:Oa,getLineWidth:Ji,write:oe,getHorizontalCoordinate:Es,getVerticalCoordinate:cs,getCoordinateString:bA,getVerticalCoordinateString:qs,collections:{},newObject:Je,newAdditionalObject:$t,newObjectDeferred:mt,newObjectDeferredBegin:vt,getFilters:Ct,putStream:ft,events:it,scaleFactor:ye,pageSize:{getWidth:function(){return Fi(F)},setWidth:function(_){Ha(F,_)},getHeight:function(){return Ks(F)},setHeight:function(_){ja(F,_)}},encryptionOptions:c,encryption:jr,getEncryptor:An,output:hr,getNumberOfPages:Xt,pages:ae,out:D,f2:Be,f3:M,getPageInfo:yo,getPageInfoByObjId:wr,getCurrentPageInfo:Fa,getPDFVersion:w,Point:ta,Rectangle:Ma,Matrix:rt,hasHotfix:So},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Fi(F)},set:function(_){Ha(F,_)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ks(F)},set:function(_){ja(F,_)},enumerable:!0,configurable:!0}),Qt.call(f,le),de="F1",ar(o,t),it.publish("initialized"),f}$d.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},$d.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$d.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},$d.prototype.processOwnerPassword=function(n,e){return zm(Bm(e).substr(0,5),n)},$d.prototype.encryptor=function(n,e){var t=Bm(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return zm(t,r)}},qp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Ln(n)!==Ln(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Sr.API={events:[]},Sr.version="3.0.0";var oo=Sr.API,X1=1,ld=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Or=function(n){return n.toFixed(2)},MA=function(n){return n.toFixed(5)};oo.__acroform__={};var $s=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},fb=function(n){return n*X1},da=function(n){var e=new iz,t=Ar.internal.getHeight(n)||0,r=Ar.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Or(r)),Number(Or(t))],e},GD=oo.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},WD=oo.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},XD=oo.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},fo=oo.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XD(n,e-1)},po=oo.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return GD(n,e-1)},go=oo.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WD(n,e-1)},YD=oo.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=n[0],s=n[1],i=n[2],a=n[3],A={};return A.lowerLeft_X=t(o)||0,A.lowerLeft_Y=r(s+a)||0,A.upperRight_X=t(o+i)||0,A.upperRight_Y=r(s)||0,[Number(Or(A.lowerLeft_X)),Number(Or(A.lowerLeft_Y)),Number(Or(A.upperRight_X)),Number(Or(A.upperRight_Y))]},JD=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Cm(n,t),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Or(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=da(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Cm=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map(function(M){return M.split(`
`)}):o.map(function(M){return[M]});var s=t,i=Ar.internal.getHeight(n)||0;i=i<0?-i:i;var a=Ar.internal.getWidth(n)||0;a=a<0?-a:a;var A=function(M,O,J){if(M+1<o.length){var re=O+" "+o[M+1][0];return Mf(re,n,J).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var d,c,u=Mf("3",n,s).height,h=n.multiline?i-s:(i-u)/2,f=h+=2,g=0,w=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Mf(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",C=0,I=0;I<o.length;I++)if(o.hasOwnProperty(I)){var N=!1;if(o[I].length!==1&&y!==o[I].length-1){if((u+2)*(C+2)+2>i)continue e;x+=o[I][y],N=!0,w=I,I--}else{x=(x+=o[I][y]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var k=parseInt(I),ee=A(k,x,s),G=I>=o.length-1;if(ee&&!G){x+=" ",y=0;continue}if(ee||G){if(G)w=k;else if(n.multiline&&(u+2)*(C+2)+2>i)continue e}else{if(!n.multiline||(u+2)*(C+2)+2>i)continue e;w=k}}for(var H="",Y=g;Y<=w;Y++){var Be=o[Y];if(n.multiline){if(Y===w){H+=Be[y]+" ",y=(y+1)%Be.length;continue}if(Y===g){H+=Be[Be.length-1]+" ";continue}}H+=Be[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,c=Mf(H,n,s).width,n.textAlign){case"right":d=a-c-2;break;case"center":d=(a-c)/2;break;case"left":default:d=2}e+=Or(d)+" "+Or(f)+` Td
`,e+="("+ld(H)+`) Tj
`,e+=-Or(d)+` 0 Td
`,f=-(s+2),c=0,g=N?w:w+1,C++,x=""}break}return r.text=e,r.fontSize=s,r},Mf=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},ZD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eN=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},tN=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,o=n[t];e.internal.newObjectDeferredBegin(o.objId,!0),Ln(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[r]}},rN=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Wi.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(ZD)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new az,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s.objId=void 0,s.hasAnnotation&&eN(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,o){var s=!r;for(var i in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var a=r[i],A=[],d=a.Rect;if(a.Rect&&(a.Rect=YD(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ar.createDefaultAppearanceStream(a),Ln(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(A=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=JD(a);A.push({key:"AP",value:"<</N "+c+">>"}),o.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var g=f[i];typeof g=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g+" ",o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(o,a)),u+="/"+i+" "+g,o.internal.acroformPlugin.xForms.indexOf(g)>=0||o.internal.acroformPlugin.xForms.push(g);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:a.objId}),o.internal.out("endobj")}s&&tN(o.internal.acroformPlugin.xForms,o)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},sz=oo.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(i){return i};if(Array.isArray(n)){for(var o="[",s=0;s<n.length;s++)switch(s!==0&&(o+=" "),Ln(n[s])){case"boolean":case"number":case"object":o+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),o+="("+ld(r(n[s].toString()))+")"):o+=n[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},n0=function(n,e,t){var r=function(o){return o};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+ld(r(n))+")"},fa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fa.prototype.toString=function(){return this.objId+" 0 R"},fa.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},fa.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],o=this[r];o&&(Array.isArray(o)?n.push({key:r,value:sz(o,this.objId,this.scope)}):o instanceof fa?(o.scope=this.scope,n.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:r,value:o}))}return n};var iz=function(){fa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};$s(iz,fa);var az=function(){fa.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ld(t(n))+")"}},set:function(t){n=t}})};$s(az,fa);var Wi=function n(){fa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fo(e,3)},set:function(x){x?this.F=po(e,3):this.F=go(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Kp)return;s="FieldObject"+n.FieldNum++}var x=function(C){return C};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ld(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/X1:d},set:function(x){d=x}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Kp||this instanceof Gl))return n0(u,this.objId,this.scope)},set:function(x){x=x.toString(),u=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof No?h:n0(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof No?x:x.substr(0,1)==="("?Dd(x.substr(1,x.length-2)):Dd(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof No?Dd(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof No?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof No?f:n0(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof No?x:x.substr(0,1)==="("?Dd(x.substr(1,x.length-2)):Dd(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof No?Dd(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof No?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(x){g=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,1)},set:function(x){x?this.Ff=po(this.Ff,1):this.Ff=go(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,2)},set:function(x){x?this.Ff=po(this.Ff,2):this.Ff=go(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,3)},set:function(x){x?this.Ff=po(this.Ff,3):this.Ff=go(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');y=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(y){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};$s(Wi,fa);var lc=function(){Wi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return sz(e,this.objId,this.scope)},set:function(t){var r,o;o=[],typeof(r=t)=="string"&&(o=function(s,i,a){a||(a=1);for(var A,d=[];A=i.exec(s);)d.push(A[a]);return d}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,18)},set:function(t){t?this.Ff=po(this.Ff,18):this.Ff=go(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=po(this.Ff,19):this.Ff=go(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,20)},set:function(t){t?(this.Ff=po(this.Ff,20),e.sort()):this.Ff=go(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,22)},set:function(t){t?this.Ff=po(this.Ff,22):this.Ff=go(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,23)},set:function(t){t?this.Ff=po(this.Ff,23):this.Ff=go(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,27)},set:function(t){t?this.Ff=po(this.Ff,27):this.Ff=go(this.Ff,27)}}),this.hasAppearanceStream=!1};$s(lc,Wi);var dc=function(){lc.call(this),this.fontName="helvetica",this.combo=!1};$s(dc,lc);var cc=function(){dc.call(this),this.combo=!0};$s(cc,dc);var rp=function(){cc.call(this),this.edit=!0};$s(rp,cc);var No=function(){Wi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,15)},set:function(t){t?this.Ff=po(this.Ff,15):this.Ff=go(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,16)},set:function(t){t?this.Ff=po(this.Ff,16):this.Ff=go(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,17)},set:function(t){t?this.Ff=po(this.Ff,17):this.Ff=go(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,26)},set:function(t){t?this.Ff=po(this.Ff,26):this.Ff=go(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+ld(t(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){Ln(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};$s(No,Wi);var np=function(){No.call(this),this.pushButton=!0};$s(np,No);var uc=function(){No.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};$s(uc,No);var Kp=function(){var n,e;Wi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+ld(o(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(o){Ln(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$s(Kp,Wi),uc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},uc.prototype.createOption=function(n){var e=new Kp;return e.Parent=this,e.optionName=n,this.Kids.push(e),nN.call(this.scope,e),e};var op=function(){No.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};$s(op,No);var Gl=function(){Wi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,13)},set:function(e){e?this.Ff=po(this.Ff,13):this.Ff=go(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,21)},set:function(e){e?this.Ff=po(this.Ff,21):this.Ff=go(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,23)},set:function(e){e?this.Ff=po(this.Ff,23):this.Ff=go(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,24)},set:function(e){e?this.Ff=po(this.Ff,24):this.Ff=go(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,25)},set:function(e){e?this.Ff=po(this.Ff,25):this.Ff=go(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,26)},set:function(e){e?this.Ff=po(this.Ff,26):this.Ff=go(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$s(Gl,Wi);var sp=function(){Gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,14)},set:function(n){n?this.Ff=po(this.Ff,14):this.Ff=go(this.Ff,14)}}),this.password=!0};$s(sp,Gl);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=da(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),s=Cm(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Or(Ar.internal.getWidth(n))+" "+Or(Ar.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Or(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=da(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=[],s=Ar.internal.getHeight(n),i=Ar.internal.getWidth(n),a=Cm(n,n.caption);return o.push("1 g"),o.push("0 0 "+Or(i)+" "+Or(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Or(i-1)+" "+Or(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+Or(a.fontSize)+" Tf "+r),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=da(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Or(Ar.internal.getWidth(n))+" "+Or(Ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ar.RadioButton.Circle.YesNormal,e.D[n]=Ar.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=da(n);e.scope=n.scope;var t=[],r=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Ar.internal.Bezier_C,s=Number((r*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+MA(Ar.internal.getWidth(n)/2)+" "+MA(Ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=da(n);e.scope=n.scope;var t=[],r=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*Ar.internal.Bezier_C).toFixed(5)),i=Number((r*Ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+MA(Ar.internal.getWidth(n)/2)+" "+MA(Ar.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+MA(Ar.internal.getWidth(n)/2)+" "+MA(Ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=da(n);e.scope=n.scope;var t=[],r=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),s=Number((o*Ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+MA(Ar.internal.getWidth(n)/2)+" "+MA(Ar.internal.getHeight(n)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ar.RadioButton.Cross.YesNormal,e.D[n]=Ar.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=da(n);e.scope=n.scope;var t=[],r=Ar.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Or(Ar.internal.getWidth(n)-2)+" "+Or(Ar.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Or(r.x1.x)+" "+Or(r.x1.y)+" m"),t.push(Or(r.x2.x)+" "+Or(r.x2.y)+" l"),t.push(Or(r.x4.x)+" "+Or(r.x4.y)+" m"),t.push(Or(r.x3.x)+" "+Or(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=da(n);e.scope=n.scope;var t=Ar.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Or(Ar.internal.getWidth(n))+" "+Or(Ar.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Or(Ar.internal.getWidth(n)-2)+" "+Or(Ar.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Or(t.x1.x)+" "+Or(t.x1.y)+" m"),r.push(Or(t.x2.x)+" "+Or(t.x2.y)+" l"),r.push(Or(t.x4.x)+" "+Or(t.x4.y)+" m"),r.push(Or(t.x3.x)+" "+Or(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=da(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Or(Ar.internal.getWidth(n))+" "+Or(Ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ar.internal.getWidth(n),t=Ar.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ar.internal.getWidth=function(n){var e=0;return Ln(n)==="object"&&(e=fb(n.Rect[2])),e},Ar.internal.getHeight=function(n){var e=0;return Ln(n)==="object"&&(e=fb(n.Rect[3])),e};var nN=oo.addField=function(n){if(rN(this,n),!(n instanceof Wi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};oo.AcroFormChoiceField=lc,oo.AcroFormListBox=dc,oo.AcroFormComboBox=cc,oo.AcroFormEditBox=rp,oo.AcroFormButton=No,oo.AcroFormPushButton=np,oo.AcroFormRadioButton=uc,oo.AcroFormCheckBox=op,oo.AcroFormTextField=Gl,oo.AcroFormPasswordField=sp,oo.AcroFormAppearance=Ar,oo.AcroForm={ChoiceField:lc,ListBox:dc,ComboBox:cc,EditBox:rp,Button:No,PushButton:np,RadioButton:uc,CheckBox:op,TextField:Gl,PasswordField:sp,Appearance:Ar},Sr.AcroForm={ChoiceField:lc,ListBox:dc,ComboBox:cc,EditBox:rp,Button:No,PushButton:np,RadioButton:uc,CheckBox:op,TextField:Gl,PasswordField:sp,Appearance:Ar};Sr.AcroForm;function Az(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(M,O){var J,re,he,ie,be,te=e;if((O=O||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(ee(M))for(be in t)for(he=t[be],J=0;J<he.length;J+=1){for(ie=!0,re=0;re<he[J].length;re+=1)if(he[J][re]!==void 0&&he[J][re]!==M[re]){ie=!1;break}if(ie===!0){te=be;break}}else for(be in t)for(he=t[be],J=0;J<he.length;J+=1){for(ie=!0,re=0;re<he[J].length;re+=1)if(he[J][re]!==void 0&&he[J][re]!==M.charCodeAt(re)){ie=!1;break}if(ie===!0){te=be;break}}return te===e&&O!==e&&(te=O),te},o=function M(O){for(var J=this.internal.write,re=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:O.width}),ie.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var be="",te=0,Z=O.transparency.length;te<Z;te++)be+=O.transparency[te]+" "+O.transparency[te]+" ";ie.push({key:"Mask",value:"["+be+"]"})}O.sMask!==void 0&&ie.push({key:"SMask",value:O.objectId+1+" 0 R"});var Ae=O.filter!==void 0?["/"+O.filter]:void 0;if(re({data:O.data,additionalKeyValues:ie,alreadyAppliedFilters:Ae,objectId:O.objectId}),J("endobj"),"sMask"in O&&O.sMask!==void 0){var we="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,z={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:we,data:O.sMask};"filter"in O&&(z.filter=O.filter),M.call(this,z)}if(O.colorSpace===y.INDEXED){var F=this.internal.newObject();re({data:H(new Uint8Array(O.palette)),objectId:F}),J("endobj")}},s=function(){var M=this.internal.collections.addImage_images;for(var O in M)o.call(this,M[O])},i=function(){var M,O=this.internal.collections.addImage_images,J=this.internal.write;for(var re in O)J("/I"+(M=O[re]).index,M.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},A=function(){var M=this.internal.collections.addImage_images;return a.call(this),M},d=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(M){return typeof n["process"+M.toUpperCase()]=="function"},u=function(M){return Ln(M)==="object"&&M.nodeType===1},h=function(M,O){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var J=""+M.getAttribute("src");if(J.indexOf("data:image/")===0)return Eu(unescape(J).split("base64,").pop());var re=n.loadFile(J,!0);if(re!==void 0)return re}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var he;switch(O){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;case"JPEG":case"JPG":default:he="image/jpeg"}return Eu(M.toDataURL(he,1).split("base64,").pop())}},f=function(M){var O=this.internal.collections.addImage_images;if(O){for(var J in O)if(M===O[J].alias)return O[J]}},g=function(M,O,J){return M||O||(M=-96,O=-96),M<0&&(M=-1*J.width*72/M/this.internal.scaleFactor),O<0&&(O=-1*J.height*72/O/this.internal.scaleFactor),M===0&&(M=O*J.width/J.height),O===0&&(O=M*J.height/J.width),[M,O]},w=function(M,O,J,re,he,ie){var be=g.call(this,J,re,he),te=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,Ae=A.call(this);if(J=be[0],re=be[1],Ae[he.index]=he,ie){ie*=Math.PI/180;var we=Math.cos(ie),z=Math.sin(ie),F=function(U){return U.toFixed(4)},E=[F(we),F(z),F(-1*z),F(we),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,te(M),Z(O+re),"cm"].join(" ")),this.internal.write(E.join(" ")),this.internal.write([te(J),"0","0",te(re),"0","0","cm"].join(" "))):this.internal.write([te(J),"0","0",te(re),te(M),Z(O+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(M){var O,J,re=0;if(typeof M=="string")for(J=M.length,O=0;O<J;O++)re=(re<<5)-re+M.charCodeAt(O),re|=0;else if(ee(M))for(J=M.byteLength/2,O=0;O<J;O++)re=(re<<5)-re+M[O],re|=0;return re},I=n.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var O=!0;return M.length===0&&(O=!1),M.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(O=!1),O},N=n.__addimage__.extractImageFromDataUrl=function(M){var O=(M=M||"").split("base64,"),J=null;if(O.length===2){var re=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(re)&&(J={mimeType:re[1],charset:re[2],data:O[1]})}return J},k=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(M){return k()&&M instanceof ArrayBuffer};var ee=n.__addimage__.isArrayBufferView=function(M){return k()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},G=n.__addimage__.binaryStringToUint8Array=function(M){for(var O=M.length,J=new Uint8Array(O),re=0;re<O;re++)J[re]=M.charCodeAt(re);return J},H=n.__addimage__.arrayBufferToBinaryString=function(M){for(var O="",J=ee(M)?M:new Uint8Array(M),re=0;re<J.length;re+=8192)O+=String.fromCharCode.apply(null,J.subarray(re,re+8192));return O};n.addImage=function(){var M,O,J,re,he,ie,be,te,Z;if(typeof arguments[1]=="number"?(O=e,J=arguments[1],re=arguments[2],he=arguments[3],ie=arguments[4],be=arguments[5],te=arguments[6],Z=arguments[7]):(O=arguments[1],J=arguments[2],re=arguments[3],he=arguments[4],ie=arguments[5],be=arguments[6],te=arguments[7],Z=arguments[8]),Ln(M=arguments[0])==="object"&&!u(M)&&"imageData"in M){var Ae=M;M=Ae.imageData,O=Ae.format||O||e,J=Ae.x||J||0,re=Ae.y||re||0,he=Ae.w||Ae.width||he,ie=Ae.h||Ae.height||ie,be=Ae.alias||be,te=Ae.compression||te,Z=Ae.rotation||Ae.angle||Z}var we=this.internal.getFilters();if(te===void 0&&we.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(J)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var z=Y.call(this,M,O,be,te);return w.call(this,J,re,he,ie,z,Z),this};var Y=function(M,O,J,re){var he,ie,be;if(typeof M=="string"&&r(M)===e){M=unescape(M);var te=Be(M,!1);(te!==""||(te=n.loadFile(M,!0))!==void 0)&&(M=te)}if(u(M)&&(M=h(M,O)),O=r(M,O),!c(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((be=J)==null||be.length===0)&&(J=function(Z){return typeof Z=="string"||ee(Z)?C(Z):ee(Z.data)?C(Z.data):null}(M)),(he=f.call(this,J))||(k()&&(M instanceof Uint8Array||O==="RGBA"||(ie=M,M=G(M))),he=this["process"+O.toUpperCase()](M,d.call(this),J,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in n.image_compression?Z:x.NONE}(re),ie)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},Be=n.__addimage__.convertBase64ToBinaryString=function(M,O){var J;O=typeof O!="boolean"||O;var re,he="";if(typeof M=="string"){re=(J=N(M))!==null?J.data:M;try{he=Eu(re)}catch(ie){if(O)throw I(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return he};n.getImageProperties=function(M){var O,J,re="";if(u(M)&&(M=h(M)),typeof M=="string"&&r(M)===e&&((re=Be(M,!1))===""&&(re=n.loadFile(M)||""),M=re),J=r(M),!c(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!k()||M instanceof Uint8Array||(M=G(M)),!(O=this["process"+J.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=J,O}})(Sr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Sr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,o,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,c=!1,u=0;u<d.length&&!c;u++)switch((r=d[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){r=d[h];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),C=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(x(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+f(x(C))+") >>",w.content=s;var I=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+i(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(w.objId,"0 R",y.objId,"0 R");break;case"freetext":o="/Rect ["+i(r.bounds.x)+" "+a(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+f(g(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ee=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,o,s,i){var a=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:A(t),y:d(r),w:A(t+o),h:d(r+s)},options:i,type:"link"})},n.textWithLink=function(t,r,o,s){var i,a,A=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;i=Math.ceil(d*c)}else a=A,i=d;return this.text(t,r,o,s),o+=.2*d,s.align==="center"&&(r-=A/2),s.align==="right"&&(r-=A),this.link(r,o-d,a,i,s),A},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Sr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},A=n.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&o.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length==4},u=n.__arabicParser__.resolveLigatures=function(w){var y=0,x=t,C="",I=0;for(y=0;y<w.length;y+=1)x[w.charCodeAt(y)]!==void 0?(I++,typeof(x=x[w.charCodeAt(y)])=="number"&&(C+=String.fromCharCode(x),x=t,I=0),y===w.length-1&&(x=t,C+=w.charAt(y-(I-1)),y-=I-1,I=0)):(x=t,C+=w.charAt(y-I),y-=I,I=0);return C};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(w,y,x){return i(w)?s(w)===!1?-1:!d(w)||!i(y)&&!i(x)||!i(x)&&a(y)||a(w)&&!i(y)||a(w)&&A(y)||a(w)&&a(y)?0:c(w)&&i(y)&&!a(y)&&i(x)&&d(x)?3:a(w)||!i(x)?1:2:-1},f=function(w){var y=0,x=0,C=0,I="",N="",k="",ee=(w=w||"").split("\\s+"),G=[];for(y=0;y<ee.length;y+=1){for(G.push(""),x=0;x<ee[y].length;x+=1)I=ee[y][x],N=ee[y][x-1],k=ee[y][x+1],i(I)?(C=h(I,N,k),G[y]+=C!==-1?String.fromCharCode(e[I.charCodeAt(0)][C]):I):G[y]+=I;G[y]=u(G[y])}return G.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var w,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(y)){var C=0;for(x=[],C=0;C<y.length;C+=1)Array.isArray(y[C])?x.push([f(y[C][0]),y[C][1],y[C][2]]):x.push([f(y[C])]);w=x}else w=f(y);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",g])}(Sr.API),Sr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var o;if((t=t||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Sr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(w){A=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(w){g=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},n.getTextDimensions=function(A,d){r.call(this);var c=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,f=0,g=0,w=0,y=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var x=d.maxWidth;x>0?typeof A=="string"?A=this.splitTextToSize(A,x):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(I,N){return I.concat(y.splitTextToSize(N,x))},[])):A=Array.isArray(A)?A:[A];for(var C=0;C<A.length;C++)f<(w=this.getStringUnitWidth(A[C],{font:u})*c)&&(f=w);return f!==0&&(g=A.length),{w:f/=h,h:Math.max((g*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=n.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===A.lineNumber?(A.x=(d.x||0)+(d.width||0),A.y=d.y||0):d.y+d.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,f&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=d.y+d.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};n.table=function(A,d,c,u,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var f,g,w,y,x=[],C=[],I=[],N={},k={},ee=[],G=[],H=(h=h||{}).autoSize||!1,Y=h.printHeaders!==!1,Be=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,M=h.margins||Object.assign({width:this.getPageWidth()},e),O=typeof h.padding=="number"?h.padding:3,J=h.headerBackgroundColor||"#c8c8c8",re=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=Be,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=re,this.setFontSize(Be),u==null)C=x=Object.keys(c[0]),I=x.map(function(){return"left"});else if(Array.isArray(u)&&Ln(u[0])==="object")for(x=u.map(function(Ae){return Ae.name}),C=u.map(function(Ae){return Ae.prompt||Ae.name||""}),I=u.map(function(Ae){return Ae.align||"left"}),f=0;f<u.length;f+=1)k[u[f].name]=u[f].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(C=x=u,I=x.map(function(){return"left"}));if(H||Array.isArray(u)&&typeof u[0]=="string")for(f=0;f<x.length;f+=1){for(N[y=x[f]]=c.map(function(Ae){return Ae[y]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(C[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=N[y],this.setFont(void 0,"normal"),w=0;w<g.length;w+=1)ee.push(this.getTextDimensions(g[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[y]=Math.max.apply(null,ee)+O+O,ee=[]}if(Y){var he={};for(f=0;f<x.length;f+=1)he[x[f]]={},he[x[f]].text=C[f],he[x[f]].align=I[f];var ie=a.call(this,he,k);G=x.map(function(Ae){return new s(A,d,k[Ae],ie,he[Ae].text,void 0,he[Ae].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var be=u.reduce(function(Ae,we){return Ae[we.name]=we.align,Ae},{});for(f=0;f<c.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:c[f]},this);var te=a.call(this,c[f],k);for(w=0;w<x.length;w+=1){var Z=c[f][x[w]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:w,data:Z},this),i.call(this,new s(A,d,k[x[w]],te,Z,f+2,be[x[w]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=d,this};var a=function(A,d){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(f){var g=A[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[f]-c-c)},this).map(function(f){return this.getLineHeightFactor()*f.length*u/h+c+c},this).reduce(function(f,g){return Math.max(f,g)},0)};n.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},n.printHeaderRow=function(A,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){c=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,c),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Sr.API);var lz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Sm=Az(dz),cz=[100,200,300,400,500,600,700,800,900],oN=Az(cz);function Em(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return lz[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),o=function(s){return typeof Sm[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,t,r].join(" ")}}}function pb(n,e,t,r){var o;for(o=t;o>=0&&o<e.length;o+=r)if(n[e[o]])return n[e[o]];for(o=t;o>=0&&o<e.length;o-=r)if(n[e[o]])return n[e[o]]}var sN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},gb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vb(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function iN(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",o=Object.assign({},sN,t.genericFontFamilies||{}),s=null,i=null,a=0;a<e.length;++a)if(o[(s=Em(e[a])).family]&&(s.family=o[s.family]),n.hasOwnProperty(s.family)){i=n[s.family];break}if(!(i=i||n[r]))throw new Error("Could not find a font-family for the rule '"+vb(s)+"' and default family '"+r+"'.");if(i=function(A,d){if(d[A])return d[A];var c=Sm[A],u=c<=Sm.normal?-1:1,h=pb(d,dz,c,u);if(!h)throw new Error("Could not find a matching font-stretch value for "+A);return h}(s.stretch,i),i=function(A,d){if(d[A])return d[A];for(var c=lz[A],u=0;u<c.length;++u)if(d[c[u]])return d[c[u]];throw new Error("Could not find a matching font-style for "+A)}(s.style,i),!(i=function(A,d){if(d[A])return d[A];if(A===400&&d[500])return d[500];if(A===500&&d[400])return d[400];var c=oN[A],u=pb(d,cz,c,A<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+A);return u}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+vb(s)+"'.");return i}function mb(n){return n.trimLeft()}function aN(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function AN(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Hf,wb,yb,o0=["times"];(function(n){var e,t,r,o,s,i,a,A,d,c=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new A,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new i,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new i,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,a=this.internal.Rectangle,A=this.internal.Matrix,d=new c}]);var u=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=z;Object.defineProperty(this,"pdf",{get:function(){return F}});var E=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return E},set:function(X){E=!!X}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(X){U=!!X}});var P=0;Object.defineProperty(this,"posX",{get:function(){return P},set:function(X){isNaN(X)||(P=X)}});var T=0;Object.defineProperty(this,"posY",{get:function(){return T},set:function(X){isNaN(X)||(T=X)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(X){var D;typeof X=="number"?D=[X,X,X,X]:((D=new Array(4))[0]=X[0],D[1]=X.length>=2?X[1]:D[0],D[2]=X.length>=3?X[2]:D[0],D[3]=X.length>=4?X[3]:D[1]),d.margin=D}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(X){R=X}});var $=0;Object.defineProperty(this,"lastBreak",{get:function(){return $},set:function(X){$=X}});var j=[];Object.defineProperty(this,"pageBreaks",{get:function(){return j},set:function(X){j=X}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(X){X instanceof c&&(d=X)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(X){d.path=X}});var ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return ae},set:function(X){ae=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var D;D=h(X),this.ctx.fillStyle=D.style,this.ctx.isFillTransparent=D.a===0,this.ctx.fillOpacity=D.a,this.pdf.setFillColor(D.r,D.g,D.b,{a:D.a}),this.pdf.setTextColor(D.r,D.g,D.b,{a:D.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var D=h(X);this.ctx.strokeStyle=D.style,this.ctx.isStrokeTransparent=D.a===0,this.ctx.strokeOpacity=D.a,D.a===0?this.pdf.setDrawColor(255,255,255):(D.a,this.pdf.setDrawColor(D.r,D.g,D.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var Ee=null;function _e(X,D){if(Ee===null){var oe=function(ve){var le=[];return Object.keys(ve).forEach(function(ue){ve[ue].forEach(function(Ie){var Ne=null;switch(Ie){case"bold":Ne={family:ue,weight:"bold"};break;case"italic":Ne={family:ue,style:"italic"};break;case"bolditalic":Ne={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":Ne={family:ue}}Ne!==null&&(Ne.ref={name:ue,style:Ie},le.push(Ne))})}),le}(X.getFontList());Ee=function(ve){for(var le={},ue=0;ue<ve.length;++ue){var Ie=Em(ve[ue]),Ne=Ie.family,ze=Ie.stretch,Ce=Ie.style,pe=Ie.weight;le[Ne]=le[Ne]||{},le[Ne][ze]=le[Ne][ze]||{},le[Ne][ze][Ce]=le[Ne][ze][Ce]||{},le[Ne][ze][Ce][pe]=Ie}return le}(oe.concat(D))}return Ee}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(X){Ee=null,Le=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var D;if(this.ctx.font=X,(D=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(X))!==null){var oe=D[1],ve=(D[2],D[3]),le=D[4],ue=(D[5],D[6]),Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(le)[2];le=Math.floor(Ie==="px"?parseFloat(le)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(le)*this.pdf.getFontSize():parseFloat(le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(le);var Ne=function(q){var de,ye,Fe=[],Pe=q.trim();if(Pe==="")return o0;if(Pe in gb)return[gb[Pe]];for(;Pe!=="";){switch(ye=null,de=(Pe=mb(Pe)).charAt(0)){case'"':case"'":ye=aN(Pe.substring(1),de);break;default:ye=AN(Pe)}if(ye===null||(Fe.push(ye[0]),(Pe=mb(ye[1]))!==""&&Pe.charAt(0)!==","))return o0;Pe=Pe.replace(/^,/,"")}return Fe}(ue);if(this.fontFaces){var ze=iN(_e(this.pdf,this.fontFaces),Ne.map(function(q){return{family:q,stretch:"normal",weight:ve,style:oe}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Ce="";(ve==="bold"||parseInt(ve,10)>=700||oe==="bold")&&(Ce="bold"),oe==="italic"&&(Ce+="italic"),Ce.length===0&&(Ce="normal");for(var pe="",Oe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ke=0;ke<Ne.length;ke++){if(this.pdf.internal.getFont(Ne[ke],Ce,{noFallback:!0,disableWarning:!0})!==void 0){pe=Ne[ke];break}if(Ce==="bolditalic"&&this.pdf.internal.getFont(Ne[ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pe=Ne[ke],Ce="bold";else if(this.pdf.internal.getFont(Ne[ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pe=Ne[ke],Ce="normal";break}}if(pe===""){for(var me=0;me<Ne.length;me++)if(Oe[Ne[me]]){pe=Oe[Ne[me]];break}}pe=pe===""?"Times":pe,this.pdf.setFont(pe,Ce)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};u.prototype.setLineDash=function(z){this.lineDash=z},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){N.call(this,"fill",!1)},u.prototype.stroke=function(){N.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(z,F){if(isNaN(z)||isNaN(F))throw Mn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var E=this.ctx.transform.applyToPoint(new i(z,F));this.path.push({type:"mt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(z,F)},u.prototype.closePath=function(){var z=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Ln(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){z=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(z.x,z.y)},u.prototype.lineTo=function(z,F){if(isNaN(z)||isNaN(F))throw Mn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var E=this.ctx.transform.applyToPoint(new i(z,F));this.path.push({type:"lt",x:E.x,y:E.y}),this.ctx.lastPoint=new i(E.x,E.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},u.prototype.quadraticCurveTo=function(z,F,E,U){if(isNaN(E)||isNaN(U)||isNaN(z)||isNaN(F))throw Mn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var P=this.ctx.transform.applyToPoint(new i(E,U)),T=this.ctx.transform.applyToPoint(new i(z,F));this.path.push({type:"qct",x1:T.x,y1:T.y,x:P.x,y:P.y}),this.ctx.lastPoint=new i(P.x,P.y)},u.prototype.bezierCurveTo=function(z,F,E,U,P,T){if(isNaN(P)||isNaN(T)||isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U))throw Mn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new i(P,T)),$=this.ctx.transform.applyToPoint(new i(z,F)),j=this.ctx.transform.applyToPoint(new i(E,U));this.path.push({type:"bct",x1:$.x,y1:$.y,x2:j.x,y2:j.y,x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},u.prototype.arc=function(z,F,E,U,P,T){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U)||isNaN(P))throw Mn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(T=!!T,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new i(z,F));z=R.x,F=R.y;var $=this.ctx.transform.applyToPoint(new i(0,E)),j=this.ctx.transform.applyToPoint(new i(0,0));E=Math.sqrt(Math.pow($.x-j.x,2)+Math.pow($.y-j.y,2))}Math.abs(P-U)>=2*Math.PI&&(U=0,P=2*Math.PI),this.path.push({type:"arc",x:z,y:F,radius:E,startAngle:U,endAngle:P,counterclockwise:T})},u.prototype.arcTo=function(z,F,E,U,P){throw new Error("arcTo not implemented.")},u.prototype.rect=function(z,F,E,U){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U))throw Mn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,F),this.lineTo(z+E,F),this.lineTo(z+E,F+U),this.lineTo(z,F+U),this.lineTo(z,F),this.lineTo(z+E,F),this.lineTo(z,F)},u.prototype.fillRect=function(z,F,E,U){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U))throw Mn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var P={};this.lineCap!=="butt"&&(P.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(P.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,F,E,U),this.fill(),P.hasOwnProperty("lineCap")&&(this.lineCap=P.lineCap),P.hasOwnProperty("lineJoin")&&(this.lineJoin=P.lineJoin)}},u.prototype.strokeRect=function(z,F,E,U){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U))throw Mn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(z,F,E,U),this.stroke())},u.prototype.clearRect=function(z,F,E,U){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U))throw Mn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,F,E,U))},u.prototype.save=function(z){z=typeof z!="boolean"||z;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},u.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("Q");this.pdf.setPage(F),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(z){var F,E,U,P;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))F=0,E=0,U=0,P=0;else{var T=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(T!==null)F=parseInt(T[1]),E=parseInt(T[2]),U=parseInt(T[3]),P=1;else if((T=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)F=parseInt(T[1]),E=parseInt(T[2]),U=parseInt(T[3]),P=parseFloat(T[4]);else{if(P=1,typeof z=="string"&&z.charAt(0)!=="#"){var R=new rz(z);z=R.ok?R.toHex():"#000000"}z.length===4?(F=z.substring(1,2),F+=F,E=z.substring(2,3),E+=E,U=z.substring(3,4),U+=U):(F=z.substring(1,3),E=z.substring(3,5),U=z.substring(5,7)),F=parseInt(F,16),E=parseInt(E,16),U=parseInt(U,16)}}return{r:F,g:E,b:U,a:P,style:z}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(z,F,E,U){if(isNaN(F)||isNaN(E)||typeof z!="string")throw Mn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!f.call(this)){var P=te(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;O.call(this,{text:z,x:F,y:E,scale:T,angle:P,align:this.textAlign,maxWidth:U})}},u.prototype.strokeText=function(z,F,E,U){if(isNaN(F)||isNaN(E)||typeof z!="string")throw Mn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){U=isNaN(U)?void 0:U;var P=te(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;O.call(this,{text:z,x:F,y:E,scale:T,renderingMode:"stroke",angle:P,align:this.textAlign,maxWidth:U})}},u.prototype.measureText=function(z){if(typeof z!="string")throw Mn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,E=this.pdf.internal.scaleFactor,U=F.internal.getFontSize(),P=F.getStringUnitWidth(z)*U/F.internal.scaleFactor,T=function(R){var $=(R=R||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return $}}),this};return new T({width:P*=Math.round(96*E/72*1e4)/1e4})},u.prototype.scale=function(z,F){if(isNaN(z)||isNaN(F))throw Mn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var E=new A(z,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.rotate=function(z){if(isNaN(z))throw Mn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new A(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.translate=function(z,F){if(isNaN(z)||isNaN(F))throw Mn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var E=new A(1,0,0,1,z,F);this.ctx.transform=this.ctx.transform.multiply(E)},u.prototype.transform=function(z,F,E,U,P,T){if(isNaN(z)||isNaN(F)||isNaN(E)||isNaN(U)||isNaN(P)||isNaN(T))throw Mn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new A(z,F,E,U,P,T);this.ctx.transform=this.ctx.transform.multiply(R)},u.prototype.setTransform=function(z,F,E,U,P,T){z=isNaN(z)?1:z,F=isNaN(F)?0:F,E=isNaN(E)?0:E,U=isNaN(U)?1:U,P=isNaN(P)?0:P,T=isNaN(T)?0:T,this.ctx.transform=new A(z,F,E,U,P,T)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(z,F,E,U,P,T,R,$,j){var ae=this.pdf.getImageProperties(z),Ee=1,_e=1,Le=1,X=1;U!==void 0&&$!==void 0&&(Le=$/U,X=j/P,Ee=ae.width/U*$/U,_e=ae.height/P*j/P),T===void 0&&(T=F,R=E,F=0,E=0),U!==void 0&&$===void 0&&($=U,j=P),U===void 0&&$===void 0&&($=ae.width,j=ae.height);for(var D,oe=this.ctx.transform.decompose(),ve=te(oe.rotate.shx),le=new A,ue=(le=(le=(le=le.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale)).applyToRectangle(new a(T-F*Le,R-E*X,U*Ee,P*_e)),Ie=y.call(this,ue),Ne=[],ze=0;ze<Ie.length;ze+=1)Ne.indexOf(Ie[ze])===-1&&Ne.push(Ie[ze]);if(I(Ne),this.autoPaging)for(var Ce=Ne[0],pe=Ne[Ne.length-1],Oe=Ce;Oe<pe+1;Oe++){this.pdf.setPage(Oe);var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],me=Oe===1?this.posY+this.margin[0]:this.margin[0],q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ye=Oe===1?0:q+(Oe-2)*de;if(this.ctx.clip_path.length!==0){var Fe=this.path;D=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(D,this.posX+this.margin[3],-ye+me+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Fe}var Pe=JSON.parse(JSON.stringify(ue));Pe=C([Pe],this.posX+this.margin[3],-ye+me+this.ctx.prevPageLastElemOffset)[0];var nt=(Oe>Ce||Oe<pe)&&w.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,de,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,ve),nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,ve)};var y=function(z,F,E){var U=[];F=F||this.pdf.internal.pageSize.width,E=E||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var P=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":U.push(Math.floor((z.y+P)/E)+1);break;case"arc":U.push(Math.floor((z.y+P-z.radius)/E)+1),U.push(Math.floor((z.y+P+z.radius)/E)+1);break;case"qct":var T=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);U.push(Math.floor((T.y+P)/E)+1),U.push(Math.floor((T.y+T.h+P)/E)+1);break;case"bct":var R=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);U.push(Math.floor((R.y+P)/E)+1),U.push(Math.floor((R.y+R.h+P)/E)+1);break;case"rect":U.push(Math.floor((z.y+P)/E)+1),U.push(Math.floor((z.y+z.h+P)/E)+1)}for(var $=0;$<U.length;$+=1)for(;this.pdf.internal.getNumberOfPages()<U[$];)x.call(this);return U},x=function(){var z=this.fillStyle,F=this.strokeStyle,E=this.font,U=this.lineCap,P=this.lineWidth,T=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=F,this.font=E,this.lineCap=U,this.lineWidth=P,this.lineJoin=T},C=function(z,F,E){for(var U=0;U<z.length;U++)switch(z[U].type){case"bct":z[U].x2+=F,z[U].y2+=E;case"qct":z[U].x1+=F,z[U].y1+=E;case"mt":case"lt":case"arc":default:z[U].x+=F,z[U].y+=E}return z},I=function(z){return z.sort(function(F,E){return F-E})},N=function(z,F){for(var E,U,P=this.fillStyle,T=this.strokeStyle,R=this.lineCap,$=this.lineWidth,j=Math.abs($*this.ctx.transform.scaleX),ae=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),Le=[],X=0;X<_e.length;X++)if(_e[X].x!==void 0)for(var D=y.call(this,_e[X]),oe=0;oe<D.length;oe+=1)Le.indexOf(D[oe])===-1&&Le.push(D[oe]);for(var ve=0;ve<Le.length;ve++)for(;this.pdf.internal.getNumberOfPages()<Le[ve];)x.call(this);if(I(Le),this.autoPaging)for(var le=Le[0],ue=Le[Le.length-1],Ie=le;Ie<ue+1;Ie++){this.pdf.setPage(Ie),this.fillStyle=P,this.strokeStyle=T,this.lineCap=R,this.lineWidth=j,this.lineJoin=ae;var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=Ie===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=Ie===1?0:Ce+(Ie-2)*pe;if(this.ctx.clip_path.length!==0){var ke=this.path;E=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(E,this.posX+this.margin[3],-Oe+ze+this.ctx.prevPageLastElemOffset),k.call(this,z,!0),this.path=ke}if(U=JSON.parse(JSON.stringify(Ee)),this.path=C(U,this.posX+this.margin[3],-Oe+ze+this.ctx.prevPageLastElemOffset),F===!1||Ie===0){var me=(Ie>le||Ie<ue)&&w.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,pe,null).clip().discardPath()),k.call(this,z,F),me&&this.pdf.restoreGraphicsState()}this.lineWidth=$}else this.lineWidth=j,k.call(this,z,F),this.lineWidth=$;this.path=Ee},k=function(z,F){if((z!=="stroke"||F||!g.call(this))&&(z==="stroke"||F||!f.call(this))){for(var E,U,P=[],T=this.path,R=0;R<T.length;R++){var $=T[R];switch($.type){case"begin":P.push({begin:!0});break;case"close":P.push({close:!0});break;case"mt":P.push({start:$,deltas:[],abs:[]});break;case"lt":var j=P.length;if(T[R-1]&&!isNaN(T[R-1].x)&&(E=[$.x-T[R-1].x,$.y-T[R-1].y],j>0)){for(;j>=0;j--)if(P[j-1].close!==!0&&P[j-1].begin!==!0){P[j-1].deltas.push(E),P[j-1].abs.push($);break}}break;case"bct":E=[$.x1-T[R-1].x,$.y1-T[R-1].y,$.x2-T[R-1].x,$.y2-T[R-1].y,$.x-T[R-1].x,$.y-T[R-1].y],P[P.length-1].deltas.push(E);break;case"qct":var ae=T[R-1].x+2/3*($.x1-T[R-1].x),Ee=T[R-1].y+2/3*($.y1-T[R-1].y),_e=$.x+2/3*($.x1-$.x),Le=$.y+2/3*($.y1-$.y),X=$.x,D=$.y;E=[ae-T[R-1].x,Ee-T[R-1].y,_e-T[R-1].x,Le-T[R-1].y,X-T[R-1].x,D-T[R-1].y],P[P.length-1].deltas.push(E);break;case"arc":P.push({deltas:[],abs:[],arc:!0}),Array.isArray(P[P.length-1].abs)&&P[P.length-1].abs.push($)}}U=F?null:z==="stroke"?"stroke":"fill";for(var oe=!1,ve=0;ve<P.length;ve++)if(P[ve].arc)for(var le=P[ve].abs,ue=0;ue<le.length;ue++){var Ie=le[ue];Ie.type==="arc"?H.call(this,Ie.x,Ie.y,Ie.radius,Ie.startAngle,Ie.endAngle,Ie.counterclockwise,void 0,F,!oe):J.call(this,Ie.x,Ie.y),oe=!0}else if(P[ve].close===!0)this.pdf.internal.out("h"),oe=!1;else if(P[ve].begin!==!0){var Ne=P[ve].start.x,ze=P[ve].start.y;re.call(this,P[ve].deltas,Ne,ze),oe=!0}U&&Y.call(this,U),F&&Be.call(this)}},ee=function(z){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,E=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-E;case"top":return z+F-E;case"hanging":return z+F-2*E;case"middle":return z+F/2-E;case"ideographic":return z;case"alphabetic":default:return z}},G=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(F,E){this.colorStops.push([F,E])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(z,F,E,U,P,T,R,$,j){for(var ae=ie.call(this,E,U,P,T),Ee=0;Ee<ae.length;Ee++){var _e=ae[Ee];Ee===0&&(j?M.call(this,_e.x1+z,_e.y1+F):J.call(this,_e.x1+z,_e.y1+F)),he.call(this,z,F,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}$?Be.call(this):Y.call(this,R)},Y=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Be=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(z,F){this.pdf.internal.out(t(z)+" "+r(F)+" m")},O=function(z){var F;switch(z.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var E=this.pdf.getTextDimensions(z.text),U=ee.call(this,z.y),P=G.call(this,U)-E.h,T=this.ctx.transform.applyToPoint(new i(z.x,U)),R=this.ctx.transform.decompose(),$=new A;$=($=($=$.multiply(R.translate)).multiply(R.skew)).multiply(R.scale);for(var j,ae,Ee,_e=this.ctx.transform.applyToRectangle(new a(z.x,U,E.w,E.h)),Le=$.applyToRectangle(new a(z.x,P,E.w,E.h)),X=y.call(this,Le),D=[],oe=0;oe<X.length;oe+=1)D.indexOf(X[oe])===-1&&D.push(X[oe]);if(I(D),this.autoPaging)for(var ve=D[0],le=D[D.length-1],ue=ve;ue<le+1;ue++){this.pdf.setPage(ue);var Ie=ue===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Ce=ze-this.margin[0],pe=this.pdf.internal.pageSize.width-this.margin[1],Oe=pe-this.margin[3],ke=ue===1?0:Ne+(ue-2)*Ce;if(this.ctx.clip_path.length!==0){var me=this.path;j=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(j,this.posX+this.margin[3],-1*ke+Ie),k.call(this,"fill",!0),this.path=me}var q=C([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-ke+Ie+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*z.scale),Ee=this.lineWidth,this.lineWidth=Ee*z.scale);var de=this.autoPaging!=="text";if(de||q.y+q.h<=ze){if(de||q.y>=Ie&&q.x<=pe){var ye=de?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||pe-q.x)[0],Fe=C([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-ke+Ie+this.ctx.prevPageLastElemOffset)[0],Pe=de&&(ue>ve||ue<le)&&w.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,Ce,null).clip().discardPath()),this.pdf.text(ye,Fe.x,Fe.y,{angle:z.angle,align:F,renderingMode:z.renderingMode}),Pe&&this.pdf.restoreGraphicsState()}}else q.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-q.y);z.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=Ee)}else z.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*z.scale),Ee=this.lineWidth,this.lineWidth=Ee*z.scale),this.pdf.text(z.text,T.x+this.posX,T.y+this.posY,{angle:z.angle,align:F,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=Ee)},J=function(z,F,E,U){E=E||0,U=U||0,this.pdf.internal.out(t(z+E)+" "+r(F+U)+" l")},re=function(z,F,E){return this.pdf.lines(z,F,E,null,null)},he=function(z,F,E,U,P,T,R,$){this.pdf.internal.out([e(o(E+z)),e(s(U+F)),e(o(P+z)),e(s(T+F)),e(o(R+z)),e(s($+F)),"c"].join(" "))},ie=function(z,F,E,U){for(var P=2*Math.PI,T=Math.PI/2;F>E;)F-=P;var R=Math.abs(E-F);R<P&&U&&(R=P-R);for(var $=[],j=U?-1:1,ae=F;R>1e-5;){var Ee=ae+j*Math.min(R,T);$.push(be.call(this,z,ae,Ee)),R-=Math.abs(Ee-ae),ae=Ee}return $},be=function(z,F,E){var U=(E-F)/2,P=z*Math.cos(U),T=z*Math.sin(U),R=P,$=-T,j=R*R+$*$,ae=j+R*P+$*T,Ee=4/3*(Math.sqrt(2*j*ae)-ae)/(R*T-$*P),_e=R-Ee*$,Le=$+Ee*R,X=_e,D=-Le,oe=U+F,ve=Math.cos(oe),le=Math.sin(oe);return{x1:z*Math.cos(F),y1:z*Math.sin(F),x2:_e*ve-Le*le,y2:_e*le+Le*ve,x3:X*ve-D*le,y3:X*le+D*ve,x4:z*Math.cos(E),y4:z*Math.sin(E)}},te=function(z){return 180*z/Math.PI},Z=function(z,F,E,U,P,T){var R=z+.5*(E-z),$=F+.5*(U-F),j=P+.5*(E-P),ae=T+.5*(U-T),Ee=Math.min(z,P,R,j),_e=Math.max(z,P,R,j),Le=Math.min(F,T,$,ae),X=Math.max(F,T,$,ae);return new a(Ee,Le,_e-Ee,X-Le)},Ae=function(z,F,E,U,P,T,R,$){var j,ae,Ee,_e,Le,X,D,oe,ve,le,ue,Ie,Ne,ze,Ce=E-z,pe=U-F,Oe=P-E,ke=T-U,me=R-P,q=$-T;for(ae=0;ae<41;ae++)ve=(D=(Ee=z+(j=ae/40)*Ce)+j*((Le=E+j*Oe)-Ee))+j*(Le+j*(P+j*me-Le)-D),le=(oe=(_e=F+j*pe)+j*((X=U+j*ke)-_e))+j*(X+j*(T+j*q-X)-oe),ae==0?(ue=ve,Ie=le,Ne=ve,ze=le):(ue=Math.min(ue,ve),Ie=Math.min(Ie,le),Ne=Math.max(Ne,ve),ze=Math.max(ze,le));return new a(Math.round(ue),Math.round(Ie),Math.round(Ne-ue),Math.round(ze-Ie))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,F,E=(z=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:F}));this.prevLineDash!==E&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=E)}}})(Sr.API),function(n){var e=function(s){var i,a,A,d,c,u,h,f,g,w;for(a=[],A=0,d=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;d>A;A+=4)(c=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(u=(c=((c=((c=((c=(c-(w=c%85))/85)-(g=c%85))/85)-(f=c%85))/85)-(h=c%85))/85)%85,a.push(u+33,h+33,f+33,g+33,w+33)):a.push(122);return function(y,x){for(var C=x;C>0;C--)y.pop()}(a,i.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var i,a,A,d,c,u=String,h="length",f=255,g="charCodeAt",w="slice",y="replace";for(s[w](-2),s=s[w](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),A=[],d=0,c=(s+=i="uuuuu"[w](s[h]%5||5))[h];c>d;d+=5)a=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),A.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(x,C){for(var I=C;I>0;I--)x.pop()}(A,i[h]),u.fromCharCode.apply(u,A)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var a="",A=0;A<s.length;A+=2)a+=String.fromCharCode("0x"+(s[A]+s[A+1]));return a},o=function(s){for(var i=new Uint8Array(s.length),a=s.length;a--;)i[a]=s.charCodeAt(a);return s=(i=_m(i)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,i){var a=0,A=s||"",d=[];for(typeof(i=i||[])=="string"&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":A=t(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=o(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(Sr.API),function(n){n.loadFile=function(e,t,r){return function(o,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var a=void 0;try{a=function(A,d,c){var u=new XMLHttpRequest,h=0,f=function(g){var w=g.length,y=[],x=String.fromCharCode;for(h=0;h<w;h+=1)y.push(x(255&g.charCodeAt(h)));return y.join("")};if(u.open("GET",A,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?c(f(this.responseText)):c(void 0)}),u.send(null),d&&u.status===200)return f(u.responseText)}(o,s,i)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Sr.API),function(n){function e(){return(Ir.html2canvas?Promise.resolve(Ir.html2canvas):ks(()=>import("./html2canvas.esm.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function t(){return(Ir.DOMPurify?Promise.resolve(Ir.DOMPurify):ks(()=>import("./purify.es.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var a=Ln(i);return a==="undefined"?"undefined":a==="string"||i instanceof String?"string":a==="number"||i instanceof Number?"number":a==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(i,a){var A=document.createElement(i);for(var d in a.className&&(A.className=a.className),a.innerHTML&&a.dompurify&&(A.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)A.style[d]=a.style[d];return A},s=function i(a){var A=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),d=i.convert(Promise.resolve(),A);return d=(d=d.setProgress(1,i,1,[i])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,a){return i.__proto__=a||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,a){return this.then(function(){switch(a=a||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(t).then(function(A){return this.set({src:o("div",{innerHTML:i,dompurify:A})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function A(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(A(h,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,a(this.prop.container,A)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(a){var A=this.opt.jsPDF,d=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var f=d[h],g=f.src.find(function(w){return w.format==="truetype"});g&&A.addFont(g.url,f.ref.name,f.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,A.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,a,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(i,a):this.outputPdf(i,a)},s.prototype.outputPdf=function(i,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,a)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var a=Object.keys(i||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=i[A]};switch(A){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[A]=i[A]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(i,a){return this.then(function(){var A=i in s.template.prop?this.prop[i]:this.opt[i];return a?a(A):A})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function a(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(i=i||Sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:a(i.inner.width,i.k),height:a(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,a,A,d){return i!=null&&(this.progress.val=i),a!=null&&(this.progress.state=a),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,a,A,d){return this.setProgress(i?this.progress.val+i:null,a||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(i,a){var A=this;return this.thenCore(i,a,function(d,c){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return A.updateProgress(null,d),u}).then(d,c).then(function(u){return A.updateProgress(1),u})})},s.prototype.thenCore=function(i,a,A){A=A||Promise.prototype.then,i&&(i=i.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=A.call(d,i,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(i,a){return Promise.prototype.then.call(this,i,a)},s.prototype.thenList=function(i){var a=this;return i.forEach(function(A){a=a.thenCore(A)}),a},s.prototype.catch=function(i){i&&(i=i.bind(this));var a=Promise.prototype.catch.call(this,i);return s.convert(a,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Sr.getPageSize=function(i,a,A){if(Ln(i)==="object"){var d=i;i=d.orientation,a=d.unit||a,A=d.format||A}a=a||"mm",A=A||"a4",i=(""+(i||"P")).toLowerCase();var c,u=(""+A).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var f,g=0,w=0;if(h.hasOwnProperty(u))g=h[u][1]/c,w=h[u][0]/c;else try{g=A[1],w=A[0]}catch{throw new Error("Invalid format: "+A)}if(i==="p"||i==="portrait")i="p",w>g&&(f=w,w=g,g=f);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>w&&(f=w,w=g,g=f)}return{width:w,height:g,unit:a,k:c,orientation:i}},n.html=function(i,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Em):null;var A=new s(a);return a.worker?A:A.from(i).doCallback()}}(Sr.API),Sr.API.addJS=function(n){return yb=n,this.internal.events.subscribe("postPutResources",function(){Hf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Hf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+yb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Hf!==void 0&&wb!==void 0&&this.internal.out("/Names <</JavaScript "+Hf+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var i=o[s],a=r.exec(i);if(a!=null){var A=a[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(i)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,c=[];for(s=0;s<d;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,o,s){var i={title:o,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var A=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,o){for(var s=0;s<o.children.length;s++)r.count++,this.count_r(r,o.children[s]);return r.count}}])}(Sr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,o,s,i,a){var A,d=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=i||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(A=function(u){for(var h,f=256*u.charCodeAt(4)+u.charCodeAt(5),g=u.length,w={width:0,height:0,numcomponents:1},y=4;y<g;y+=2){if(y+=f,e.indexOf(u.charCodeAt(y+1))!==-1){h=256*u.charCodeAt(y+5)+u.charCodeAt(y+6),w={width:256*u.charCodeAt(y+7)+u.charCodeAt(y+8),height:h,numcomponents:u.charCodeAt(y+9)};break}f=256*u.charCodeAt(y+2)+u.charCodeAt(y+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:a,bitsPerComponent:8,filter:d,index:r,alias:o}}return c}}(Sr.API);var Nd,jf,bb,_b,xb,lN=function(){var n,e,t;function r(s){var i,a,A,d,c,u,h,f,g,w,y,x,C,I;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(i=this.readUInt32(),g=(function(){var N,k;for(k=[],N=0;N<4;++N)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*c/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(u!=null?u.data:void 0)||this.imgData,x=0;0<=i?x<i:x>i;0<=i?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((w=A-this.transparency.indexed.length)>0)for(C=0;0<=w?C<w:C>w;0<=w?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(y=this.read(i)).indexOf(0),f=String.fromCharCode.apply(String,y.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,a;for(a=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*i),A=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(u,h,f,g){var w,y,x,C,I,N,k,ee,G,H,Y,Be,M,O,J,re,he,ie,be,te,Z,Ae=Math.ceil((d.width-u)/f),we=Math.ceil((d.height-h)/g),z=d.width==Ae&&d.height==we;for(O=i*Ae,Be=z?a:new Uint8Array(O*we),N=s.length,M=0,y=0;M<we&&A<N;){switch(s[A++]){case 0:for(C=he=0;he<O;C=he+=1)Be[y++]=s[A++];break;case 1:for(C=ie=0;ie<O;C=ie+=1)w=s[A++],I=C<i?0:Be[y-i],Be[y++]=(w+I)%256;break;case 2:for(C=be=0;be<O;C=be+=1)w=s[A++],x=(C-C%i)/i,J=M&&Be[(M-1)*O+x*i+C%i],Be[y++]=(J+w)%256;break;case 3:for(C=te=0;te<O;C=te+=1)w=s[A++],x=(C-C%i)/i,I=C<i?0:Be[y-i],J=M&&Be[(M-1)*O+x*i+C%i],Be[y++]=(w+Math.floor((I+J)/2))%256;break;case 4:for(C=Z=0;Z<O;C=Z+=1)w=s[A++],x=(C-C%i)/i,I=C<i?0:Be[y-i],M===0?J=re=0:(J=Be[(M-1)*O+x*i+C%i],re=x&&Be[(M-1)*O+(x-1)*i+C%i]),k=I+J-re,ee=Math.abs(k-I),H=Math.abs(k-J),Y=Math.abs(k-re),G=ee<=H&&ee<=Y?I:H<=Y?J:re,Be[y++]=(w+G)%256;break;default:throw new Error("Invalid filter algorithm: "+s[A-1])}if(!z){var F=((h+M*g)*d.width+u)*i,E=M*O;for(C=0;C<Ae;C+=1){for(var U=0;U<i;U+=1)a[F++]=Be[E++];F+=(f-1)*i}}M++}}return s=HD(s),d.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,i,a,A,d,c,u,h,f;for(a=this.palette,c=this.transparency.indexed||[],d=new Uint8Array((c.length||0)+a.length),A=0,s=0,i=u=0,h=a.length;u<h;i=u+=3)d[A++]=a[i],d[A++]=a[i+1],d[A++]=a[i+2],d[A++]=(f=c[s++])!=null?f:255;return d},r.prototype.copyToImageData=function(s,i){var a,A,d,c,u,h,f,g,w,y,x;if(A=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),A=4,a=!0),g=(d=s.data||s).length,u=w||i,c=h=0,A===1)for(;c<g;)f=w?4*i[c/4]:h,y=u[f++],d[c++]=y,d[c++]=y,d[c++]=y,d[c++]=a?u[f++]:255,h=f;else for(;c<g;)f=w?4*i[c/4]:h,d[c++]=u[f++],d[c++]=u[f++],d[c++]=u[f++],d[c++]=a?u[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(Ir)==="[object Window]"){try{e=Ir.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(s){var i;if(o()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,a,A,d,c,u,h,f;if(this.animation){for(f=[],a=c=0,u=(h=this.animation.frames).length;c<u;a=++c)i=h[a],A=s.createImageData(i.width,i.height),d=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(A,d),i.imageData=A,f.push(i.image=n(A));return f}},r.prototype.renderFrame=function(s,i){var a,A,d;return a=(A=this.animation.frames)[i],d=A[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var i,a,A,d,c,u,h=this;return a=0,u=this.animation,d=u.numFrames,A=u.frames,c=u.numPlays,(i=function(){var f,g;if(f=a++%d,g=A[f],h.renderFrame(s,f),d>1&&a/d<c)return h.animation._timeout=setTimeout(i,g.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(a=i.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),i.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function dN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,o=n[e++],s=o>>7,i=1<<(7&o)+1;n[e++],n[e++];var a=null,A=null;s&&(a=e,A=i,e+=3*i);var d=!0,c=[],u=0,h=null,f=0,g=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,g=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];u=n[e++]|n[e++]<<8,h=n[e++],!(1&w)&&(h=null),f=w>>2&7,e++;break;case 254:for(;;){if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,N=n[e++],k=N>>6&1,ee=1<<(7&N)+1,G=a,H=A,Y=!1;N>>7&&(Y=!0,G=e,H=ee,e+=3*ee);var Be=e;for(e++;;){var M;if(!((M=n[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}c.push({x:y,y:x,width:C,height:I,has_local_palette:Y,palette_offset:G,palette_size:H,data_offset:Be,data_length:e-Be,transparent_index:h,interlaced:!!k,delay:u,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return g},this.frameInfo=function(O){if(O<0||O>=c.length)throw new Error("Frame index out of range.");return c[O]},this.decodeAndBlitFrameBGRA=function(O,J){var re=this.frameInfo(O),he=re.width*re.height,ie=new Uint8Array(he);Bb(n,re.data_offset,ie,he);var be=re.palette_offset,te=re.transparent_index;te===null&&(te=256);var Z=re.width,Ae=t-Z,we=Z,z=4*(re.y*t+re.x),F=4*((re.y+re.height)*t+re.x),E=z,U=4*Ae;re.interlaced===!0&&(U+=4*t*7);for(var P=8,T=0,R=ie.length;T<R;++T){var $=ie[T];if(we===0&&(we=Z,(E+=U)>=F&&(U=4*Ae+4*t*(P-1),E=z+(Z+Ae)*(P<<1),P>>=1)),$===te)E+=4;else{var j=n[be+3*$],ae=n[be+3*$+1],Ee=n[be+3*$+2];J[E++]=Ee,J[E++]=ae,J[E++]=j,J[E++]=255}--we}},this.decodeAndBlitFrameRGBA=function(O,J){var re=this.frameInfo(O),he=re.width*re.height,ie=new Uint8Array(he);Bb(n,re.data_offset,ie,he);var be=re.palette_offset,te=re.transparent_index;te===null&&(te=256);var Z=re.width,Ae=t-Z,we=Z,z=4*(re.y*t+re.x),F=4*((re.y+re.height)*t+re.x),E=z,U=4*Ae;re.interlaced===!0&&(U+=4*t*7);for(var P=8,T=0,R=ie.length;T<R;++T){var $=ie[T];if(we===0&&(we=Z,(E+=U)>=F&&(U=4*Ae+4*t*(P-1),E=z+(Z+Ae)*(P<<1),P>>=1)),$===te)E+=4;else{var j=n[be+3*$],ae=n[be+3*$+1],Ee=n[be+3*$+2];J[E++]=j,J[E++]=ae,J[E++]=Ee,J[E++]=255}--we}}}function Bb(n,e,t,r){for(var o=n[e++],s=1<<o,i=s+1,a=i+1,A=o+1,d=(1<<A)-1,c=0,u=0,h=0,f=n[e++],g=new Int32Array(4096),w=null;;){for(;c<16&&f!==0;)u|=n[e++]<<c,c+=8,f===1?f=n[e++]:--f;if(c<A)break;var y=u&d;if(u>>=A,c-=A,y!==s){if(y===i)break;for(var x=y<a?y:w,C=0,I=x;I>s;)I=g[I]>>8,++C;var N=I;if(h+C+(x!==y?1:0)>r)return void Mn.log("Warning, gif stream longer than expected.");t[h++]=N;var k=h+=C;for(x!==y&&(t[h++]=N),I=x;C--;)I=g[I],t[--k]=255&I,I>>=8;w!==null&&a<4096&&(g[a++]=w<<8|N,a>=d+1&&A<12&&(++A,d=d<<1|1)),w=y}else a=i+1,d=(1<<(A=o+1))-1,w=null}return h!==r&&Mn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function s0(n){var e,t,r,o,s,i=Math.floor,a=new Array(64),A=new Array(64),d=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),g=new Array(64),w=[],y=0,x=7,C=new Array(64),I=new Array(64),N=new Array(64),k=new Array(256),ee=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],Be=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(z,F){for(var E=0,U=0,P=new Array,T=1;T<=16;T++){for(var R=1;R<=z[T];R++)P[F[U]]=[],P[F[U]][0]=E,P[F[U]][1]=T,U++,E++;E*=2}return P}function be(z){for(var F=z[0],E=z[1]-1;E>=0;)F&1<<E&&(y|=1<<x),E--,--x<0&&(y==255?(te(255),te(0)):te(y),x=7,y=0)}function te(z){w.push(z)}function Z(z){te(z>>8&255),te(255&z)}function Ae(z,F,E,U,P){for(var T,R=P[0],$=P[240],j=function(le,ue){var Ie,Ne,ze,Ce,pe,Oe,ke,me,q,de,ye=0;for(q=0;q<8;++q){Ie=le[ye],Ne=le[ye+1],ze=le[ye+2],Ce=le[ye+3],pe=le[ye+4],Oe=le[ye+5],ke=le[ye+6];var Fe=Ie+(me=le[ye+7]),Pe=Ie-me,nt=Ne+ke,qe=Ne-ke,je=ze+Oe,fe=ze-Oe,Me=Ce+pe,At=Ce-pe,Ve=Fe+Me,Ye=Fe-Me,ot=nt+je,ht=nt-je;le[ye]=Ve+ot,le[ye+4]=Ve-ot;var Ge=.707106781*(ht+Ye);le[ye+2]=Ye+Ge,le[ye+6]=Ye-Ge;var it=.382683433*((Ve=At+fe)-(ht=qe+Pe)),zt=.5411961*Ve+it,xt=1.306562965*ht+it,Tt=.707106781*(ot=fe+qe),yt=Pe+Tt,rt=Pe-Tt;le[ye+5]=rt+zt,le[ye+3]=rt-zt,le[ye+1]=yt+xt,le[ye+7]=yt-xt,ye+=8}for(ye=0,q=0;q<8;++q){Ie=le[ye],Ne=le[ye+8],ze=le[ye+16],Ce=le[ye+24],pe=le[ye+32],Oe=le[ye+40],ke=le[ye+48];var Dt=Ie+(me=le[ye+56]),St=Ie-me,Nt=Ne+ke,Je=Ne-ke,mt=ze+Oe,vt=ze-Oe,$t=Ce+pe,nr=Ce-pe,Ht=Dt+$t,Kt=Dt-$t,sr=Nt+mt,Ct=Nt-mt;le[ye]=Ht+sr,le[ye+32]=Ht-sr;var ft=.707106781*(Ct+Kt);le[ye+16]=Kt+ft,le[ye+48]=Kt-ft;var Ot=.382683433*((Ht=nr+vt)-(Ct=Je+St)),Vt=.5411961*Ht+Ot,ir=1.306562965*Ct+Ot,cr=.707106781*(sr=vt+Je),dr=St+cr,br=St-cr;le[ye+40]=br+Vt,le[ye+24]=br-Vt,le[ye+8]=dr+ir,le[ye+56]=dr-ir,ye++}for(q=0;q<64;++q)de=le[q]*ue[q],f[q]=de>0?de+.5|0:de-.5|0;return f}(z,F),ae=0;ae<64;++ae)g[G[ae]]=j[ae];var Ee=g[0]-E;E=g[0],Ee==0?be(U[0]):(be(U[h[T=32767+Ee]]),be(u[T]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return be(R),E;for(var Le,X=1;X<=_e;){for(var D=X;g[X]==0&&X<=_e;)++X;var oe=X-D;if(oe>=16){Le=oe>>4;for(var ve=1;ve<=Le;++ve)be($);oe&=15}T=32767+g[X],be(P[(oe<<4)+h[T]]),be(u[T]),X++}return _e!=63&&be(R),E}function we(z){z=Math.min(Math.max(z,1),100),s!=z&&(function(F){for(var E=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var P=i((E[U]*F+50)/100);P=Math.min(Math.max(P,1),255),a[G[U]]=P}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var $=i((T[R]*F+50)/100);$=Math.min(Math.max($,1),255),A[G[R]]=$}for(var j=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ae=0,Ee=0;Ee<8;Ee++)for(var _e=0;_e<8;_e++)d[ae]=1/(a[G[ae]]*j[Ee]*j[_e]*8),c[ae]=1/(A[G[ae]]*j[Ee]*j[_e]*8),ae++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),s=z)}this.encode=function(z,F){F&&we(F),w=new Array,y=0,x=7,Z(65496),Z(65504),Z(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),Z(1),Z(1),te(0),te(0),function(){Z(65499),Z(132),te(0);for(var Ne=0;Ne<64;Ne++)te(a[Ne]);te(1);for(var ze=0;ze<64;ze++)te(A[ze])}(),function(Ne,ze){Z(65472),Z(17),te(8),Z(ze),Z(Ne),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(z.width,z.height),function(){Z(65476),Z(418),te(0);for(var Ne=0;Ne<16;Ne++)te(H[Ne+1]);for(var ze=0;ze<=11;ze++)te(Y[ze]);te(16);for(var Ce=0;Ce<16;Ce++)te(Be[Ce+1]);for(var pe=0;pe<=161;pe++)te(M[pe]);te(1);for(var Oe=0;Oe<16;Oe++)te(O[Oe+1]);for(var ke=0;ke<=11;ke++)te(J[ke]);te(17);for(var me=0;me<16;me++)te(re[me+1]);for(var q=0;q<=161;q++)te(he[q])}(),Z(65498),Z(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var E=0,U=0,P=0;y=0,x=7,this.encode.displayName="_encode_";for(var T,R,$,j,ae,Ee,_e,Le,X,D=z.data,oe=z.width,ve=z.height,le=4*oe,ue=0;ue<ve;){for(T=0;T<le;){for(ae=le*ue+T,_e=-1,Le=0,X=0;X<64;X++)Ee=ae+(Le=X>>3)*le+(_e=4*(7&X)),ue+Le>=ve&&(Ee-=le*(ue+1+Le-ve)),T+_e>=le&&(Ee-=T+_e-le+4),R=D[Ee++],$=D[Ee++],j=D[Ee++],C[X]=(ee[R]+ee[$+256>>0]+ee[j+512>>0]>>16)-128,I[X]=(ee[R+768>>0]+ee[$+1024>>0]+ee[j+1280>>0]>>16)-128,N[X]=(ee[R+1280>>0]+ee[$+1536>>0]+ee[j+1792>>0]>>16)-128;E=Ae(C,d,E,e,r),U=Ae(I,c,U,t,o),P=Ae(N,c,P,t,o),T+=32}ue+=8}if(x>=0){var Ie=[];Ie[1]=x+1,Ie[0]=(1<<x+1)-1,be(Ie)}return Z(65497),new Uint8Array(w)},n=n||50,function(){for(var z=String.fromCharCode,F=0;F<256;F++)k[F]=z(F)}(),e=ie(H,Y),t=ie(O,J),r=ie(Be,M),o=ie(re,he),function(){for(var z=1,F=2,E=1;E<=15;E++){for(var U=z;U<F;U++)h[32767+U]=E,u[32767+U]=[],u[32767+U][1]=E,u[32767+U][0]=U;for(var P=-(F-1);P<=-z;P++)h[32767+P]=E,u[32767+P]=[],u[32767+P][1]=E,u[32767+P][0]=F-1+P;z<<=1,F<<=1}}(),function(){for(var z=0;z<256;z++)ee[z]=19595*z,ee[z+256>>0]=38470*z,ee[z+512>>0]=7471*z+32768,ee[z+768>>0]=-11059*z,ee[z+1024>>0]=-21709*z,ee[z+1280>>0]=32768*z+8421375,ee[z+1536>>0]=-27439*z,ee[z+1792>>0]=-5329*z}(),we(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Li(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zb(n){function e(H){if(!H)throw Error("assert :P")}function t(H,Y,Be){for(var M=0;4>M;M++)if(H[Y+M]!=Be.charCodeAt(M))return!0;return!1}function r(H,Y,Be,M,O){for(var J=0;J<O;J++)H[Y+J]=Be[M+J]}function o(H,Y,Be,M){for(var O=0;O<M;O++)H[Y+O]=Be}function s(H){return new Int32Array(H)}function i(H,Y){for(var Be=[],M=0;M<H;M++)Be.push(new Y);return Be}function a(H,Y){var Be=[];return function M(O,J,re){for(var he=re[J],ie=0;ie<he&&(O.push(re.length>J+1?[]:new Y),!(re.length<J+1));ie++)M(O[ie],J+1,re)}(Be,0,H),Be}var A=function(){var H=this;function Y(p,v){for(var S=1<<v-1>>>0;p&S;)S>>>=1;return S?(p&S-1)+S:p}function Be(p,v,S,L,V){e(!(L%S));do p[v+(L-=S)]=V;while(0<L)}function M(p,v,S,L,V){if(e(2328>=V),512>=V)var ne=s(512);else if((ne=s(V))==null)return 0;return function(se,ce,ge,Ue,Re,dt){var ct,et,Ut=ce,bt=1<<ge,$e=s(16),Xe=s(16);for(e(Re!=0),e(Ue!=null),e(se!=null),e(0<ge),et=0;et<Re;++et){if(15<Ue[et])return 0;++$e[Ue[et]]}if($e[0]==Re)return 0;for(Xe[1]=0,ct=1;15>ct;++ct){if($e[ct]>1<<ct)return 0;Xe[ct+1]=Xe[ct]+$e[ct]}for(et=0;et<Re;++et)ct=Ue[et],0<Ue[et]&&(dt[Xe[ct]++]=et);if(Xe[15]==1)return(Ue=new O).g=0,Ue.value=dt[0],Be(se,Ut,1,bt,Ue),bt;var Ft,Pt=-1,It=bt-1,tr=0,qt=1,_r=1,Wt=1<<ge;for(et=0,ct=1,Re=2;ct<=ge;++ct,Re<<=1){if(qt+=_r<<=1,0>(_r-=$e[ct]))return 0;for(;0<$e[ct];--$e[ct])(Ue=new O).g=ct,Ue.value=dt[et++],Be(se,Ut+tr,Re,Wt,Ue),tr=Y(tr,ct)}for(ct=ge+1,Re=2;15>=ct;++ct,Re<<=1){if(qt+=_r<<=1,0>(_r-=$e[ct]))return 0;for(;0<$e[ct];--$e[ct]){if(Ue=new O,(tr&It)!=Pt){for(Ut+=Wt,Ft=1<<(Pt=ct)-ge;15>Pt&&!(0>=(Ft-=$e[Pt]));)++Pt,Ft<<=1;bt+=Wt=1<<(Ft=Pt-ge),se[ce+(Pt=tr&It)].g=Ft+ge,se[ce+Pt].value=Ut-ce-Pt}Ue.g=ct-ge,Ue.value=dt[et++],Be(se,Ut+(tr>>ge),Re,Wt,Ue),tr=Y(tr,ct)}}return qt!=2*Xe[15]-1?0:bt}(p,v,S,L,V,ne)}function O(){this.value=this.g=0}function J(){this.value=this.g=0}function re(){this.G=i(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Dn,J)}function he(p,v,S,L){e(p!=null),e(v!=null),e(2147483648>L),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=S,p.Jd=v,p.Yc=S+L,p.Zc=4<=L?S+L-4+1:S,T(p)}function ie(p,v){for(var S=0;0<v--;)S|=$(p,128)<<v;return S}function be(p,v){var S=ie(p,v);return R(p)?-S:S}function te(p,v,S,L){var V,ne=0;for(e(p!=null),e(v!=null),e(4294967288>L),p.Sb=L,p.Ra=0,p.u=0,p.h=0,4<L&&(L=4),V=0;V<L;++V)ne+=v[S+V]<<8*V;p.Ra=ne,p.bb=L,p.oa=v,p.pa=S}function Z(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<sa-8>>>0,++p.bb,p.u-=8;E(p)&&(p.h=1,p.u=0)}function Ae(p,v){if(e(0<=v),!p.h&&v<=Vs){var S=F(p)&hs[v];return p.u+=v,Z(p),S}return p.h=1,p.u=0}function we(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(p){return p.Ra>>>(p.u&sa-1)>>>0}function E(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>sa}function U(p,v){p.u=v,p.h=E(p)}function P(p){p.u>=Ra&&(e(p.u>=Ra),Z(p))}function T(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function R(p){return ie(p,1)}function $(p,v){var S=p.Ca;0>p.b&&T(p);var L=p.b,V=S*v>>>8,ne=(p.I>>>L>V)+0;for(ne?(S-=V,p.I-=V+1<<L>>>0):S=V+1,L=S,V=0;256<=L;)V+=8,L>>=8;return L=7^V+Ro[L],p.b-=L,p.Ca=(S<<L)-1,ne}function j(p,v,S){p[v+0]=S>>24&255,p[v+1]=S>>16&255,p[v+2]=S>>8&255,p[v+3]=S>>0&255}function ae(p,v){return p[v+0]<<0|p[v+1]<<8}function Ee(p,v){return ae(p,v)|p[v+2]<<16}function _e(p,v){return ae(p,v)|ae(p,v+2)<<16}function Le(p,v){var S=1<<v;return e(p!=null),e(0<v),p.X=s(S),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function X(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),r(v.X,0,p.X,0,1<<v.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function oe(p,v,S,L){e(S!=null),e(L!=null);var V=S[0],ne=L[0];return V==0&&(V=(p*ne+v/2)/v),ne==0&&(ne=(v*V+p/2)/p),0>=V||0>=ne?0:(S[0]=V,L[0]=ne,1)}function ve(p,v){return p+(1<<v)-1>>>v}function le(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function ue(p,v){H[v]=function(S,L,V,ne,se,ce,ge){var Ue;for(Ue=0;Ue<se;++Ue){var Re=H[p](ce[ge+Ue-1],V,ne+Ue);ce[ge+Ue]=le(S[L+Ue],Re)}}}function Ie(){this.ud=this.hd=this.jd=0}function Ne(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function ze(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ce(p,v){return ze(p+(p-v+.5>>1))}function pe(p,v,S){return Math.abs(v-S)-Math.abs(p-S)}function Oe(p,v,S,L,V,ne,se){for(L=ne[se-1],S=0;S<V;++S)ne[se+S]=L=le(p[v+S],L)}function ke(p,v,S,L,V){var ne;for(ne=0;ne<S;++ne){var se=p[v+ne],ce=se>>8&255,ge=16711935&(ge=(ge=16711935&se)+((ce<<16)+ce));L[V+ne]=(4278255360&se)+ge>>>0}}function me(p,v){v.jd=p>>0&255,v.hd=p>>8&255,v.ud=p>>16&255}function q(p,v,S,L,V,ne){var se;for(se=0;se<L;++se){var ce=v[S+se],ge=ce>>>8,Ue=ce,Re=255&(Re=(Re=ce>>>16)+((p.jd<<24>>24)*(ge<<24>>24)>>>5));Ue=255&(Ue=(Ue=Ue+((p.hd<<24>>24)*(ge<<24>>24)>>>5))+((p.ud<<24>>24)*(Re<<24>>24)>>>5)),V[ne+se]=(4278255360&ce)+(Re<<16)+Ue}}function de(p,v,S,L,V){H[v]=function(ne,se,ce,ge,Ue,Re,dt,ct,et){for(ge=dt;ge<ct;++ge)for(dt=0;dt<et;++dt)Ue[Re++]=V(ce[L(ne[se++])])},H[p]=function(ne,se,ce,ge,Ue,Re,dt){var ct=8>>ne.b,et=ne.Ea,Ut=ne.K[0],bt=ne.w;if(8>ct)for(ne=(1<<ne.b)-1,bt=(1<<ct)-1;se<ce;++se){var $e,Xe=0;for($e=0;$e<et;++$e)$e&ne||(Xe=L(ge[Ue++])),Re[dt++]=V(Ut[Xe&bt]),Xe>>=ct}else H["VP8LMapColor"+S](ge,Ue,Ut,bt,Re,dt,se,ce,et)}}function ye(p,v,S,L,V){for(S=v+S;v<S;){var ne=p[v++];L[V++]=ne>>16&255,L[V++]=ne>>8&255,L[V++]=ne>>0&255}}function Fe(p,v,S,L,V){for(S=v+S;v<S;){var ne=p[v++];L[V++]=ne>>16&255,L[V++]=ne>>8&255,L[V++]=ne>>0&255,L[V++]=ne>>24&255}}function Pe(p,v,S,L,V){for(S=v+S;v<S;){var ne=(se=p[v++])>>16&240|se>>12&15,se=se>>0&240|se>>28&15;L[V++]=ne,L[V++]=se}}function nt(p,v,S,L,V){for(S=v+S;v<S;){var ne=(se=p[v++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;L[V++]=ne,L[V++]=se}}function qe(p,v,S,L,V){for(S=v+S;v<S;){var ne=p[v++];L[V++]=ne>>0&255,L[V++]=ne>>8&255,L[V++]=ne>>16&255}}function je(p,v,S,L,V,ne){if(ne==0)for(S=v+S;v<S;)j(L,((ne=p[v++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),V+=32;else r(L,V,p,v,S)}function fe(p,v){H[v][0]=H[p+"0"],H[v][1]=H[p+"1"],H[v][2]=H[p+"2"],H[v][3]=H[p+"3"],H[v][4]=H[p+"4"],H[v][5]=H[p+"5"],H[v][6]=H[p+"6"],H[v][7]=H[p+"7"],H[v][8]=H[p+"8"],H[v][9]=H[p+"9"],H[v][10]=H[p+"10"],H[v][11]=H[p+"11"],H[v][12]=H[p+"12"],H[v][13]=H[p+"13"],H[v][14]=H[p+"0"],H[v][15]=H[p+"0"]}function Me(p){return p==Gg||p==Wg||p==xh||p==Xg}function At(){this.eb=[],this.size=this.A=this.fb=0}function Ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ye(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new At,this.f.kb=new Ve,this.sd=null}function ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ge(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function it(p,v){var S=p.T,L=v.ba.f.RGBA,V=L.eb,ne=L.fb+p.ka*L.A,se=pi[v.ba.S],ce=p.y,ge=p.O,Ue=p.f,Re=p.N,dt=p.ea,ct=p.W,et=v.cc,Ut=v.dc,bt=v.Mc,$e=v.Nc,Xe=p.ka,Ft=p.ka+p.T,Pt=p.U,It=Pt+1>>1;for(Xe==0?se(ce,ge,null,null,Ue,Re,dt,ct,Ue,Re,dt,ct,V,ne,null,null,Pt):(se(v.ec,v.fc,ce,ge,et,Ut,bt,$e,Ue,Re,dt,ct,V,ne-L.A,V,ne,Pt),++S);Xe+2<Ft;Xe+=2)et=Ue,Ut=Re,bt=dt,$e=ct,Re+=p.Rc,ct+=p.Rc,ne+=2*L.A,se(ce,(ge+=2*p.fa)-p.fa,ce,ge,et,Ut,bt,$e,Ue,Re,dt,ct,V,ne-L.A,V,ne,Pt);return ge+=p.fa,p.j+Ft<p.o?(r(v.ec,v.fc,ce,ge,Pt),r(v.cc,v.dc,Ue,Re,It),r(v.Mc,v.Nc,dt,ct,It),S--):1&Ft||se(ce,ge,null,null,Ue,Re,dt,ct,Ue,Re,dt,ct,V,ne+L.A,null,null,Pt),S}function zt(p,v,S){var L=p.F,V=[p.J];if(L!=null){var ne=p.U,se=v.ba.S,ce=se==_h||se==xh;v=v.ba.f.RGBA;var ge=[0],Ue=p.ka;ge[0]=p.T,p.Kb&&(Ue==0?--ge[0]:(--Ue,V[0]-=p.width),p.j+p.ka+p.T==p.o&&(ge[0]=p.o-p.j-Ue));var Re=v.eb;Ue=v.fb+Ue*v.A,p=Rn(L,V[0],p.width,ne,ge,Re,Ue+(ce?0:3),v.A),e(S==ge),p&&Me(se)&&hi(Re,Ue,ce,ne,ge,v.A)}return 0}function xt(p){var v=p.ma,S=v.ba.S,L=11>S,V=S==yh||S==bh||S==_h||S==Vg||S==12||Me(S);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Yr(v.Oa,p,V?11:12))return 0;if(V&&Me(S)&&kt(),p.da)alert("todo:use_scaling");else{if(L){if(v.Ib=Ge,p.Kb){if(S=p.U+1>>1,v.memory=s(p.U+2*S),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+S,v.Ib=it,kt()}}else alert("todo:EmitYUV");V&&(v.Jb=zt,L&&st())}if(L&&!m2){for(p=0;256>p;++p)uC[p]=89858*(p-128)+zh>>Bh,pC[p]=-22014*(p-128)+zh,fC[p]=-45773*(p-128),hC[p]=113618*(p-128)+zh>>Bh;for(p=jc;p<Zg;++p)v=76283*(p-16)+zh>>Bh,gC[p-jc]=Ho(v,255),vC[p-jc]=Ho(v+8>>4,15);m2=1}return 1}function Tt(p){var v=p.ma,S=p.U,L=p.T;return e(!(1&p.ka)),0>=S||0>=L?0:(S=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,S),v.Dc+=S,1)}function yt(p){p.ma.memory=null}function rt(p,v,S,L){return Ae(p,8)!=47?0:(v[0]=Ae(p,14)+1,S[0]=Ae(p,14)+1,L[0]=Ae(p,1),Ae(p,3)!=0?0:!p.h)}function Dt(p,v){if(4>p)return p+1;var S=p-2>>1;return(2+(1&p)<<S)+Ae(v,S)+1}function St(p,v){return 120<v?v-120:1<=(S=((S=Jz[v-1])>>4)*p+(8-(15&S)))?S:1;var S}function Nt(p,v,S){var L=F(S),V=p[v+=255&L].g-8;return 0<V&&(U(S,S.u+8),L=F(S),v+=p[v].value,v+=L&(1<<V)-1),U(S,S.u+p[v].g),p[v].value}function Je(p,v,S){return S.g+=p.g,S.value+=p.value<<v>>>0,e(8>=S.g),p.g}function mt(p,v,S){var L=p.xc;return e((v=L==0?0:p.vc[p.md*(S>>L)+(v>>L)])<p.Wb),p.Ya[v]}function vt(p,v,S,L){var V=p.ab,ne=p.c*v,se=p.C;v=se+v;var ce=S,ge=L;for(L=p.Ta,S=p.Ua;0<V--;){var Ue=p.gc[V],Re=se,dt=v,ct=ce,et=ge,Ut=(ge=L,ce=S,Ue.Ea);switch(e(Re<dt),e(dt<=Ue.nc),Ue.hc){case 2:di(ct,et,(dt-Re)*Ut,ge,ce);break;case 0:var bt=Re,$e=dt,Xe=ge,Ft=ce,Pt=(Wt=Ue).Ea;bt==0&&(kc(ct,et,null,null,1,Xe,Ft),Oe(ct,et+1,0,0,Pt-1,Xe,Ft+1),et+=Pt,Ft+=Pt,++bt);for(var It=1<<Wt.b,tr=It-1,qt=ve(Pt,Wt.b),_r=Wt.K,Wt=Wt.w+(bt>>Wt.b)*qt;bt<$e;){var vn=_r,Un=Wt,cn=1;for(li(ct,et,Xe,Ft-Pt,1,Xe,Ft);cn<Pt;){var Jr=(cn&~tr)+It;Jr>Pt&&(Jr=Pt),(0,zA[vn[Un++]>>8&15])(ct,et+ +cn,Xe,Ft+cn-Pt,Jr-cn,Xe,Ft+cn),cn=Jr}et+=Pt,Ft+=Pt,++bt&tr||(Wt+=qt)}dt!=Ue.nc&&r(ge,ce-Ut,ge,ce+(dt-Re-1)*Ut,Ut);break;case 1:for(Ut=ct,$e=et,Pt=(ct=Ue.Ea)-(Ft=ct&~(Xe=(et=1<<Ue.b)-1)),bt=ve(ct,Ue.b),It=Ue.K,Ue=Ue.w+(Re>>Ue.b)*bt;Re<dt;){for(tr=It,qt=Ue,_r=new Ie,Wt=$e+Ft,vn=$e+ct;$e<Wt;)me(tr[qt++],_r),wl(_r,Ut,$e,et,ge,ce),$e+=et,ce+=et;$e<vn&&(me(tr[qt++],_r),wl(_r,Ut,$e,Pt,ge,ce),$e+=Pt,ce+=Pt),++Re&Xe||(Ue+=bt)}break;case 3:if(ct==ge&&et==ce&&0<Ue.b){for($e=ge,ct=Ut=ce+(dt-Re)*Ut-(Ft=(dt-Re)*ve(Ue.Ea,Ue.b)),et=ge,Xe=ce,bt=[],Ft=(Pt=Ft)-1;0<=Ft;--Ft)bt[Ft]=et[Xe+Ft];for(Ft=Pt-1;0<=Ft;--Ft)$e[ct+Ft]=bt[Ft];es(Ue,Re,dt,ge,Ut,ge,ce)}else es(Ue,Re,dt,ct,et,ge,ce)}ce=L,ge=S}ge!=S&&r(L,S,ce,ge,ne)}function $t(p,v){var S=p.V,L=p.Ba+p.c*p.C,V=v-p.C;if(e(v<=p.l.o),e(16>=V),0<V){var ne=p.l,se=p.Ta,ce=p.Ua,ge=ne.width;if(vt(p,V,S,L),V=ce=[ce],e((S=p.C)<(L=v)),e(ne.v<ne.va),L>ne.o&&(L=ne.o),S<ne.j){var Ue=ne.j-S;S=ne.j,V[0]+=Ue*ge}if(S>=L?S=0:(V[0]+=4*ne.v,ne.ka=S-ne.j,ne.U=ne.va-ne.v,ne.T=L-S,S=1),S){if(ce=ce[0],11>(S=p.ca).S){var Re=S.f.RGBA,dt=(L=S.S,V=ne.U,ne=ne.T,Ue=Re.eb,Re.A),ct=ne;for(Re=Re.fb+p.Ma*Re.A;0<ct--;){var et=se,Ut=ce,bt=V,$e=Ue,Xe=Re;switch(L){case wh:Is(et,Ut,bt,$e,Xe);break;case yh:fs(et,Ut,bt,$e,Xe);break;case Gg:fs(et,Ut,bt,$e,Xe),hi($e,Xe,0,bt,1,0);break;case l2:qa(et,Ut,bt,$e,Xe);break;case bh:je(et,Ut,bt,$e,Xe,1);break;case Wg:je(et,Ut,bt,$e,Xe,1),hi($e,Xe,0,bt,1,0);break;case _h:je(et,Ut,bt,$e,Xe,0);break;case xh:je(et,Ut,bt,$e,Xe,0),hi($e,Xe,1,bt,1,0);break;case Vg:CA(et,Ut,bt,$e,Xe);break;case Xg:CA(et,Ut,bt,$e,Xe),jn($e,Xe,bt,1,0);break;case d2:$a(et,Ut,bt,$e,Xe);break;default:e(0)}ce+=ge,Re+=dt}p.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=S.height)}}p.C=v,e(p.C<=p.i)}function nr(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var S=p.Ya[v].G,L=p.Ya[v].H;if(0<S[1][L[1]+0].g||0<S[2][L[2]+0].g||0<S[3][L[3]+0].g)return 0}return 1}function Ht(p,v,S,L,V,ne){if(p.Z!=0){var se=p.qd,ce=p.rd;for(e(IA[p.Z]!=null);v<S;++v)IA[p.Z](se,ce,L,V,L,V,ne),se=L,ce=V,V+=ne;p.qd=se,p.rd=ce}}function Kt(p,v){var S=p.l.ma,L=S.Z==0||S.Z==1?p.l.j:p.C;if(L=p.C<L?L:p.C,e(v<=p.l.o),v>L){var V=p.l.width,ne=S.ca,se=S.tb+V*L,ce=p.V,ge=p.Ba+p.c*L,Ue=p.gc;e(p.ab==1),e(Ue[0].hc==3),fh(Ue[0],L,v,ce,ge,ne,se),Ht(S,L,v,ne,se,V)}p.C=p.Ma=v}function sr(p,v,S,L,V,ne,se){var ce=p.$/L,ge=p.$%L,Ue=p.m,Re=p.s,dt=S+p.$,ct=dt;V=S+L*V;var et=S+L*ne,Ut=280+Re.ua,bt=p.Pb?ce:16777216,$e=0<Re.ua?Re.Wa:null,Xe=Re.wc,Ft=dt<et?mt(Re,ge,ce):null;e(p.C<ne),e(et<=V);var Pt=!1;e:for(;;){for(;Pt||dt<et;){var It=0;if(ce>=bt){var tr=dt-S;e((bt=p).Pb),bt.wd=bt.m,bt.xd=tr,0<bt.s.ua&&X(bt.s.Wa,bt.s.vb),bt=ce+eC}if(ge&Xe||(Ft=mt(Re,ge,ce)),e(Ft!=null),Ft.Qb&&(v[dt]=Ft.qb,Pt=!0),!Pt)if(P(Ue),Ft.jc){It=Ue,tr=v;var qt=dt,_r=Ft.pd[F(It)&Dn-1];e(Ft.jc),256>_r.g?(U(It,It.u+_r.g),tr[qt]=_r.value,It=0):(U(It,It.u+_r.g-256),e(256<=_r.value),It=_r.value),It==0&&(Pt=!0)}else It=Nt(Ft.G[0],Ft.H[0],Ue);if(Ue.h)break;if(Pt||256>It){if(!Pt)if(Ft.nd)v[dt]=(Ft.qb|It<<8)>>>0;else{if(P(Ue),Pt=Nt(Ft.G[1],Ft.H[1],Ue),P(Ue),tr=Nt(Ft.G[2],Ft.H[2],Ue),qt=Nt(Ft.G[3],Ft.H[3],Ue),Ue.h)break;v[dt]=(qt<<24|Pt<<16|It<<8|tr)>>>0}if(Pt=!1,++dt,++ge>=L&&(ge=0,++ce,se!=null&&ce<=ne&&!(ce%16)&&se(p,ce),$e!=null))for(;ct<dt;)It=v[ct++],$e.X[(506832829*It&4294967295)>>>$e.Mb]=It}else if(280>It){if(It=Dt(It-256,Ue),tr=Nt(Ft.G[4],Ft.H[4],Ue),P(Ue),tr=St(L,tr=Dt(tr,Ue)),Ue.h)break;if(dt-S<tr||V-dt<It)break e;for(qt=0;qt<It;++qt)v[dt+qt]=v[dt+qt-tr];for(dt+=It,ge+=It;ge>=L;)ge-=L,++ce,se!=null&&ce<=ne&&!(ce%16)&&se(p,ce);if(e(dt<=V),ge&Xe&&(Ft=mt(Re,ge,ce)),$e!=null)for(;ct<dt;)It=v[ct++],$e.X[(506832829*It&4294967295)>>>$e.Mb]=It}else{if(!(It<Ut))break e;for(Pt=It-280,e($e!=null);ct<dt;)It=v[ct++],$e.X[(506832829*It&4294967295)>>>$e.Mb]=It;It=dt,e(!(Pt>>>(tr=$e).Xa)),v[It]=tr.X[Pt],Pt=!0}Pt||e(Ue.h==E(Ue))}if(p.Pb&&Ue.h&&dt<V)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&X(p.s.vb,p.s.Wa);else{if(Ue.h)break e;se!=null&&se(p,ce>ne?ne:ce),p.a=0,p.$=dt-S}return 1}return p.a=3,0}function Ct(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function ft(){var p=new BA;return p==null?null:(p.a=0,p.xb=h2,fe("Predictor","VP8LPredictors"),fe("Predictor","VP8LPredictors_C"),fe("PredictorAdd","VP8LPredictorsAdd"),fe("PredictorAdd","VP8LPredictorsAdd_C"),di=ke,wl=q,Is=ye,fs=Fe,CA=Pe,$a=nt,qa=qe,H.VP8LMapColor32b=dd,H.VP8LMapColor8b=ph,p)}function Ot(p,v,S,L,V){var ne=1,se=[p],ce=[v],ge=L.m,Ue=L.s,Re=null,dt=0;e:for(;;){if(S)for(;ne&&Ae(ge,1);){var ct=se,et=ce,Ut=L,bt=1,$e=Ut.m,Xe=Ut.gc[Ut.ab],Ft=Ae($e,2);if(Ut.Oc&1<<Ft)ne=0;else{switch(Ut.Oc|=1<<Ft,Xe.hc=Ft,Xe.Ea=ct[0],Xe.nc=et[0],Xe.K=[null],++Ut.ab,e(4>=Ut.ab),Ft){case 0:case 1:Xe.b=Ae($e,3)+2,bt=Ot(ve(Xe.Ea,Xe.b),ve(Xe.nc,Xe.b),0,Ut,Xe.K),Xe.K=Xe.K[0];break;case 3:var Pt,It=Ae($e,8)+1,tr=16<It?0:4<It?1:2<It?2:3;if(ct[0]=ve(Xe.Ea,tr),Xe.b=tr,Pt=bt=Ot(It,1,0,Ut,Xe.K)){var qt,_r=It,Wt=Xe,vn=1<<(8>>Wt.b),Un=s(vn);if(Un==null)Pt=0;else{var cn=Wt.K[0],Jr=Wt.w;for(Un[0]=Wt.K[0][0],qt=1;qt<1*_r;++qt)Un[qt]=le(cn[Jr+qt],Un[qt-1]);for(;qt<4*vn;++qt)Un[qt]=0;Wt.K[0]=null,Wt.K[0]=Un,Pt=1}}bt=Pt;break;case 2:break;default:e(0)}ne=bt}}if(se=se[0],ce=ce[0],ne&&Ae(ge,1)&&!(ne=1<=(dt=Ae(ge,4))&&11>=dt)){L.a=3;break e}var Nn;if(Nn=ne)t:{var Pn,Nr,_o,Us=L,xo=se,Qs=ce,Qn=dt,Ws=S,Xs=Us.m,Lo=Us.s,$o=[null],gs=1,gi=0,ia=Zz[Qn];r:for(;;){if(Ws&&Ae(Xs,1)){var Po=Ae(Xs,3)+2,Wa=ve(xo,Po),Bl=ve(Qs,Po),pd=Wa*Bl;if(!Ot(Wa,Bl,0,Us,$o))break r;for($o=$o[0],Lo.xc=Po,Pn=0;Pn<pd;++Pn){var UA=$o[Pn]>>8&65535;$o[Pn]=UA,UA>=gs&&(gs=UA+1)}}if(Xs.h)break r;for(Nr=0;5>Nr;++Nr){var no=c2[Nr];!Nr&&0<Qn&&(no+=1<<Qn),gi<no&&(gi=no)}var ev=i(gs*ia,O),b2=gs,_2=i(b2,re);if(_2==null)var Sh=null;else e(65536>=b2),Sh=_2;var Rc=s(gi);if(Sh==null||Rc==null||ev==null){Us.a=1;break r}var Eh=ev;for(Pn=_o=0;Pn<gs;++Pn){var Ui=Sh[Pn],gd=Ui.G,vd=Ui.H,x2=0,Fh=1,B2=0;for(Nr=0;5>Nr;++Nr){no=c2[Nr],gd[Nr]=Eh,vd[Nr]=_o,!Nr&&0<Qn&&(no+=1<<Qn);o:{var Ih,tv=no,Uh=Us,$c=Rc,yC=Eh,bC=_o,rv=0,QA=Uh.m,_C=Ae(QA,1);if(o($c,0,0,tv),_C){var xC=Ae(QA,1)+1,BC=Ae(QA,1),z2=Ae(QA,BC==0?1:8);$c[z2]=1,xC==2&&($c[z2=Ae(QA,8)]=1);var Qh=1}else{var C2=s(19),S2=Ae(QA,4)+4;if(19<S2){Uh.a=3;var Th=0;break o}for(Ih=0;Ih<S2;++Ih)C2[Yz[Ih]]=Ae(QA,3);var nv=void 0,qc=void 0,E2=Uh,zC=C2,Lh=tv,F2=$c,ov=0,TA=E2.m,I2=8,U2=i(128,O);n:for(;M(U2,0,7,zC,19);){if(Ae(TA,1)){var CC=2+2*Ae(TA,3);if((nv=2+Ae(TA,CC))>Lh)break n}else nv=Lh;for(qc=0;qc<Lh&&nv--;){P(TA);var Q2=U2[0+(127&F(TA))];U(TA,TA.u+Q2.g);var md=Q2.value;if(16>md)F2[qc++]=md,md!=0&&(I2=md);else{var SC=md==16,T2=md-16,EC=Wz[T2],L2=Ae(TA,Gz[T2])+EC;if(qc+L2>Lh)break n;for(var FC=SC?I2:0;0<L2--;)F2[qc++]=FC}}ov=1;break n}ov||(E2.a=3),Qh=ov}(Qh=Qh&&!QA.h)&&(rv=M(yC,bC,8,$c,tv)),Qh&&rv!=0?Th=rv:(Uh.a=3,Th=0)}if(Th==0)break r;if(Fh&&Xz[Nr]==1&&(Fh=Eh[_o].g==0),x2+=Eh[_o].g,_o+=Th,3>=Nr){var Kc,sv=Rc[0];for(Kc=1;Kc<no;++Kc)Rc[Kc]>sv&&(sv=Rc[Kc]);B2+=sv}}if(Ui.nd=Fh,Ui.Qb=0,Fh&&(Ui.qb=(gd[3][vd[3]+0].value<<24|gd[1][vd[1]+0].value<<16|gd[2][vd[2]+0].value)>>>0,x2==0&&256>gd[0][vd[0]+0].value&&(Ui.Qb=1,Ui.qb+=gd[0][vd[0]+0].value<<8)),Ui.jc=!Ui.Qb&&6>B2,Ui.jc){var Ph,Xa=Ui;for(Ph=0;Ph<Dn;++Ph){var LA=Ph,PA=Xa.pd[LA],kh=Xa.G[0][Xa.H[0]+LA];256<=kh.value?(PA.g=kh.g+256,PA.value=kh.value):(PA.g=0,PA.value=0,LA>>=Je(kh,8,PA),LA>>=Je(Xa.G[1][Xa.H[1]+LA],16,PA),LA>>=Je(Xa.G[2][Xa.H[2]+LA],0,PA),Je(Xa.G[3][Xa.H[3]+LA],24,PA))}}}Lo.vc=$o,Lo.Wb=gs,Lo.Ya=Sh,Lo.yc=ev,Nn=1;break t}Nn=0}if(!(ne=Nn)){L.a=3;break e}if(0<dt){if(Ue.ua=1<<dt,!Le(Ue.Wa,dt)){L.a=1,ne=0;break e}}else Ue.ua=0;var iv=L,P2=se,IC=ce,av=iv.s,Av=av.xc;if(iv.c=P2,iv.i=IC,av.md=ve(P2,Av),av.wc=Av==0?-1:(1<<Av)-1,S){L.xb=aC;break e}if((Re=s(se*ce))==null){L.a=1,ne=0;break e}ne=(ne=sr(L,Re,0,se,ce,ce,null))&&!ge.h;break e}return ne?(V!=null?V[0]=Re:(e(Re==null),e(S)),L.$=0,S||Ct(Ue)):Ct(Ue),ne}function Vt(p,v){var S=p.c*p.i,L=S+v+16*v;return e(p.c<=v),p.V=s(L),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+S+v,1)}function ir(p,v){var S=p.C,L=v-S,V=p.V,ne=p.Ba+p.c*S;for(e(v<=p.l.o);0<L;){var se=16<L?16:L,ce=p.l.ma,ge=p.l.width,Ue=ge*se,Re=ce.ca,dt=ce.tb+ge*S,ct=p.Ta,et=p.Ua;vt(p,se,V,ne),Ao(ct,et,Re,dt,Ue),Ht(ce,S,S+se,Re,dt,ge),L-=se,V+=se*p.c,S+=se}e(S==v),p.C=p.Ma=v}function cr(){this.ub=this.yd=this.td=this.Rb=0}function dr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function br(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function yn(){this.Yb=function(){var p=[];return function v(S,L,V){for(var ne=V[L],se=0;se<ne&&(S.push(V.length>L+1?[]:0),!(V.length<L+1));se++)v(S[se],L+1,V)}(p,0,[3,11]),p}()}function Fn(){this.jb=s(3),this.Wc=a([4,8],yn),this.Xc=a([4,17],yn)}function Dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Br(){this.ld=this.La=this.dd=this.tc=0}function Wr(){this.Na=this.la=0}function Vr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function yr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Br),this.Y=0,this.ya=Array(new fr),this.aa=0,this.l=new On}function en(){this.y=s(16),this.f=s(8),this.ea=s(8)}function gn(){this.cb=this.a=0,this.sc="",this.m=new we,this.Od=new cr,this.Kc=new dr,this.ed=new Dr,this.Qa=new br,this.Ic=this.$c=this.Aa=0,this.D=new yr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,we),this.ia=0,this.pb=i(4,Vr),this.Pa=new Fn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new en),this.Hd=0,this.rb=Array(new Wr),this.sb=0,this.wa=Array(new Br),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fr),this.L=this.aa=0,this.gd=a([4,2],Br),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function On(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tn(){var p=new gn;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Hc||(Hc=Co)),p}function Cr(p,v,S){return p.a==0&&(p.a=v,p.sc=S,p.cb=0),0}function Yn(p,v,S){return 3<=S&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function Yo(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return Cr(p,2,"null VP8Io passed to VP8GetHeaders()");var S=v.data,L=v.w,V=v.ha;if(4>V)return Cr(p,7,"Truncated header.");var ne=S[L+0]|S[L+1]<<8|S[L+2]<<16,se=p.Od;if(se.Rb=!(1&ne),se.td=ne>>1&7,se.yd=ne>>4&1,se.ub=ne>>5,3<se.td)return Cr(p,3,"Incorrect keyframe parameters.");if(!se.yd)return Cr(p,4,"Frame not displayable.");L+=3,V-=3;var ce=p.Kc;if(se.Rb){if(7>V)return Cr(p,7,"cannot parse picture header");if(!Yn(S,L,V))return Cr(p,3,"Bad code word");ce.c=16383&(S[L+4]<<8|S[L+3]),ce.Td=S[L+4]>>6,ce.i=16383&(S[L+6]<<8|S[L+5]),ce.Ud=S[L+6]>>6,L+=7,V-=7,p.za=ce.c+15>>4,p.Ub=ce.i+15>>4,v.width=ce.c,v.height=ce.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((ne=p.Pa).jb,0,255,ne.jb.length),e((ne=p.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,o(ne.Zb,0,0,ne.Zb.length),o(ne.Lb,0,0,ne.Lb)}if(se.ub>V)return Cr(p,7,"bad partition length");he(ne=p.m,S,L,se.ub),L+=se.ub,V-=se.ub,se.Rb&&(ce.Ld=R(ne),ce.Kd=R(ne)),ce=p.Qa;var ge,Ue=p.Pa;if(e(ne!=null),e(ce!=null),ce.Cb=R(ne),ce.Cb){if(ce.Bb=R(ne),R(ne)){for(ce.Fb=R(ne),ge=0;4>ge;++ge)ce.Zb[ge]=R(ne)?be(ne,7):0;for(ge=0;4>ge;++ge)ce.Lb[ge]=R(ne)?be(ne,6):0}if(ce.Bb)for(ge=0;3>ge;++ge)Ue.jb[ge]=R(ne)?ie(ne,8):255}else ce.Bb=0;if(ne.Ka)return Cr(p,3,"cannot parse segment header");if((ce=p.ed).zd=R(ne),ce.Tb=ie(ne,6),ce.wb=ie(ne,3),ce.Pc=R(ne),ce.Pc&&R(ne)){for(Ue=0;4>Ue;++Ue)R(ne)&&(ce.vd[Ue]=be(ne,6));for(Ue=0;4>Ue;++Ue)R(ne)&&(ce.od[Ue]=be(ne,6))}if(p.L=ce.Tb==0?0:ce.zd?1:2,ne.Ka)return Cr(p,3,"cannot parse filter header");var Re=V;if(V=ge=L,L=ge+Re,ce=Re,p.Xb=(1<<ie(p.m,2))-1,Re<3*(Ue=p.Xb))S=7;else{for(ge+=3*Ue,ce-=3*Ue,Re=0;Re<Ue;++Re){var dt=S[V+0]|S[V+1]<<8|S[V+2]<<16;dt>ce&&(dt=ce),he(p.Jc[+Re],S,ge,dt),ge+=dt,ce-=dt,V+=3}he(p.Jc[+Ue],S,ge,ce),S=ge<L?0:5}if(S!=0)return Cr(p,S,"cannot parse partitions");for(S=ie(ge=p.m,7),V=R(ge)?be(ge,4):0,L=R(ge)?be(ge,4):0,ce=R(ge)?be(ge,4):0,Ue=R(ge)?be(ge,4):0,ge=R(ge)?be(ge,4):0,Re=p.Qa,dt=0;4>dt;++dt){if(Re.Cb){var ct=Re.Zb[dt];Re.Fb||(ct+=S)}else{if(0<dt){p.pb[dt]=p.pb[0];continue}ct=S}var et=p.pb[dt];et.Sc[0]=Yg[Ho(ct+V,127)],et.Sc[1]=Jg[Ho(ct+0,127)],et.Eb[0]=2*Yg[Ho(ct+L,127)],et.Eb[1]=101581*Jg[Ho(ct+ce,127)]>>16,8>et.Eb[1]&&(et.Eb[1]=8),et.Qc[0]=Yg[Ho(ct+Ue,117)],et.Qc[1]=Jg[Ho(ct+ge,127)],et.lc=ct+ge}if(!se.Rb)return Cr(p,4,"Not a key frame.");for(R(ne),se=p.Pa,S=0;4>S;++S){for(V=0;8>V;++V)for(L=0;3>L;++L)for(ce=0;11>ce;++ce)Ue=$(ne,sC[S][V][L][ce])?ie(ne,8):nC[S][V][L][ce],se.Wc[S][V].Yb[L][ce]=Ue;for(V=0;17>V;++V)se.Xc[S][V]=se.Wc[S][iC[V]]}return p.kc=R(ne),p.kc&&(p.Bd=ie(ne,8)),p.cb=1}function Co(p,v,S,L,V,ne,se){var ce=v[V].Yb[S];for(S=0;16>V;++V){if(!$(p,ce[S+0]))return V;for(;!$(p,ce[S+1]);)if(ce=v[++V].Yb[0],S=0,V==16)return 16;var ge=v[V+1].Yb;if($(p,ce[S+2])){var Ue=p,Re=0;if($(Ue,(ct=ce)[(dt=S)+3]))if($(Ue,ct[dt+6])){for(ce=0,dt=2*(Re=$(Ue,ct[dt+8]))+(ct=$(Ue,ct[dt+9+Re])),Re=0,ct=tC[dt];ct[ce];++ce)Re+=Re+$(Ue,ct[ce]);Re+=3+(8<<dt)}else $(Ue,ct[dt+7])?(Re=7+2*$(Ue,165),Re+=$(Ue,145)):Re=5+$(Ue,159);else Re=$(Ue,ct[dt+4])?3+$(Ue,ct[dt+5]):2;ce=ge[2]}else Re=1,ce=ge[1];ge=se+rC[V],0>(Ue=p).b&&T(Ue);var dt,ct=Ue.b,et=(dt=Ue.Ca>>1)-(Ue.I>>ct)>>31;--Ue.b,Ue.Ca+=et,Ue.Ca|=1,Ue.I-=(dt+1&et)<<ct,ne[ge]=((Re^et)-et)*L[(0<V)+0]}return 16}function Ze(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Qt(p,v){if(p==null)return 0;if(v==null)return Cr(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!Yo(p,v))return 0;if(e(p.cb),v.ac==null||v.ac(v)){v.ob&&(p.L=0);var S=Ch[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=v.v-S>>4,p.zb=v.j-S>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=v.o+15+S>>4,p.Hb=v.va+15+S>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var L=p.ed;for(S=0;4>S;++S){var V;if(p.Qa.Cb){var ne=p.Qa.Lb[S];p.Qa.Fb||(ne+=L.Tb)}else ne=L.Tb;for(V=0;1>=V;++V){var se=p.gd[S][V],ce=ne;if(L.Pc&&(ce+=L.vd[0],V&&(ce+=L.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var ge=ce;0<L.wb&&(ge=4<L.wb?ge>>2:ge>>1)>9-L.wb&&(ge=9-L.wb),1>ge&&(ge=1),se.dd=ge,se.tc=2*ce+ge,se.ld=40<=ce?2:15<=ce?1:0}else se.tc=0;se.La=V}}}S=0}else Cr(p,6,"Frame setup failed"),S=p.a;if(S=S==0){if(S){p.$c=0,0<p.Aa||(p.Ic=wC);e:{S=p.Ic,L=4*(ge=p.za);var Ue=32*ge,Re=ge+1,dt=0<p.L?ge*(0<p.Aa?2:1):0,ct=(p.Aa==2?2:1)*ge;if((se=L+832+(V=3*(16*S+Ch[p.L])/2*Ue)+(ne=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=se)S=0;else{if(se>p.Vb){if(p.Vb=0,p.Ec=s(se),p.Fc=0,p.Ec==null){S=Cr(p,1,"no memory during frame initialization.");break e}p.Vb=se}se=p.Ec,ce=p.Fc,p.Ac=se,p.Bc=ce,ce+=L,p.Gd=i(Ue,en),p.Hd=0,p.rb=i(Re+1,Wr),p.sb=1,p.wa=dt?i(dt,Br):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=ge),e(!0),p.oc=se,p.pc=ce,ce+=832,p.ya=i(ct,fr),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=ge),p.R=16*ge,p.B=8*ge,ge=(Ue=Ch[p.L])*p.R,Ue=Ue/2*p.B,p.sa=se,p.ta=ce+ge,p.qa=p.sa,p.ra=p.ta+16*S*p.R+Ue,p.Ha=p.qa,p.Ia=p.ra+8*S*p.B+Ue,p.$c=0,ce+=V,p.mb=ne?se:null,p.nb=ne?ce:null,e(ce+ne<=p.Fc+p.Vb),Ze(p),o(p.Ac,p.Bc,0,L),S=1}}if(S){if(v.ka=0,v.y=p.sa,v.O=p.ta,v.f=p.qa,v.N=p.ra,v.ea=p.Ha,v.Vd=p.Ia,v.fa=p.R,v.Rc=p.B,v.F=null,v.J=0,!vh){for(S=-255;255>=S;++S)Eo[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Va[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)Mc[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)fd[255+S]=0>S?0:255<S?255:S;vh=1}cd=Pr,Ka=Hr,Oc=Rr,ps=Xt,ci=pr,ao=ar,ud=Da,gh=Si,Dc=_A,yl=Zi,bl=ml,SA=ai,_l=ea,hd=Na,xl=Oa,EA=Es,Nc=cs,ui=bA,Ii[0]=bo,Ii[1]=qn,Ii[2]=Fa,Ii[3]=Cs,Ii[4]=Ia,Ii[5]=zi,Ii[6]=Ua,Ii[7]=Qa,Ii[8]=vl,Ii[9]=gl,FA[0]=So,FA[1]=Rt,FA[2]=Tr,FA[3]=Xr,FA[4]=jr,FA[5]=An,FA[6]=yo,Ga[0]=ln,Ga[1]=wo,Ga[2]=To,Ga[3]=Jo,Ga[4]=ii,Ga[5]=Ta,Ga[6]=Ci,S=1}else S=0}S&&(S=function(et,Ut){for(et.M=0;et.M<et.Va;++et.M){var bt,$e=et.Jc[et.M&et.Xb],Xe=et.m,Ft=et;for(bt=0;bt<Ft.za;++bt){var Pt=Xe,It=Ft,tr=It.Ac,qt=It.Bc+4*bt,_r=It.zc,Wt=It.ya[It.aa+bt];if(It.Qa.Bb?Wt.$b=$(Pt,It.Pa.jb[0])?2+$(Pt,It.Pa.jb[2]):$(Pt,It.Pa.jb[1]):Wt.$b=0,It.kc&&(Wt.Ad=$(Pt,It.Bd)),Wt.Za=!$(Pt,145)+0,Wt.Za){var vn=Wt.Ob,Un=0;for(It=0;4>It;++It){var cn,Jr=_r[0+It];for(cn=0;4>cn;++cn){Jr=oC[tr[qt+cn]][Jr];for(var Nn=u2[$(Pt,Jr[0])];0<Nn;)Nn=u2[2*Nn+$(Pt,Jr[Nn])];Jr=-Nn,tr[qt+cn]=Jr}r(vn,Un,tr,qt,4),Un+=4,_r[0+It]=Jr}}else Jr=$(Pt,156)?$(Pt,128)?1:3:$(Pt,163)?2:0,Wt.Ob[0]=Jr,o(tr,qt,Jr,4),o(_r,0,Jr,4);Wt.Dd=$(Pt,142)?$(Pt,114)?$(Pt,183)?1:3:2:0}if(Ft.m.Ka)return Cr(et,7,"Premature end-of-partition0 encountered.");for(;et.ja<et.za;++et.ja){if(Ft=$e,Pt=(Xe=et).rb[Xe.sb-1],tr=Xe.rb[Xe.sb+Xe.ja],bt=Xe.ya[Xe.aa+Xe.ja],qt=Xe.kc?bt.Ad:0)Pt.la=tr.la=0,bt.Za||(Pt.Na=tr.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var Pn,Nr;if(Pt=tr,tr=Ft,qt=Xe.Pa.Xc,_r=Xe.ya[Xe.aa+Xe.ja],Wt=Xe.pb[_r.$b],It=_r.ad,vn=0,Un=Xe.rb[Xe.sb-1],Jr=cn=0,o(It,vn,0,384),_r.Za)var _o=0,Us=qt[3];else{Nn=s(16);var xo=Pt.Na+Un.Na;if(xo=Hc(tr,qt[1],xo,Wt.Eb,0,Nn,0),Pt.Na=Un.Na=(0<xo)+0,1<xo)cd(Nn,0,It,vn);else{var Qs=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)It[vn+Nn]=Qs}_o=1,Us=qt[0]}var Qn=15&Pt.la,Ws=15&Un.la;for(Nn=0;4>Nn;++Nn){var Xs=1&Ws;for(Qs=Nr=0;4>Qs;++Qs)Qn=Qn>>1|(Xs=(xo=Hc(tr,Us,xo=Xs+(1&Qn),Wt.Sc,_o,It,vn))>_o)<<7,Nr=Nr<<2|(3<xo?3:1<xo?2:It[vn+0]!=0),vn+=16;Qn>>=4,Ws=Ws>>1|Xs<<7,cn=(cn<<8|Nr)>>>0}for(Us=Qn,_o=Ws>>4,Pn=0;4>Pn;Pn+=2){for(Nr=0,Qn=Pt.la>>4+Pn,Ws=Un.la>>4+Pn,Nn=0;2>Nn;++Nn){for(Xs=1&Ws,Qs=0;2>Qs;++Qs)xo=Xs+(1&Qn),Qn=Qn>>1|(Xs=0<(xo=Hc(tr,qt[2],xo,Wt.Qc,0,It,vn)))<<3,Nr=Nr<<2|(3<xo?3:1<xo?2:It[vn+0]!=0),vn+=16;Qn>>=2,Ws=Ws>>1|Xs<<5}Jr|=Nr<<4*Pn,Us|=Qn<<4<<Pn,_o|=(240&Ws)<<Pn}Pt.la=Us,Un.la=_o,_r.Hc=cn,_r.Gc=Jr,_r.ia=43690&Jr?0:Wt.ia,qt=!(cn|Jr)}if(0<Xe.L&&(Xe.wa[Xe.Y+Xe.ja]=Xe.gd[bt.$b][bt.Za],Xe.wa[Xe.Y+Xe.ja].La|=!qt),Ft.Ka)return Cr(et,7,"Premature end-of-file encountered.")}if(Ze(et),Xe=Ut,Ft=1,bt=($e=et).D,Pt=0<$e.L&&$e.M>=$e.zb&&$e.M<=$e.Va,$e.Aa==0)e:{if(bt.M=$e.M,bt.uc=Pt,oa($e,bt),Ft=1,bt=(Nr=$e.D).Nb,Pt=(Jr=Ch[$e.L])*$e.R,tr=Jr/2*$e.B,Nn=16*bt*$e.R,Qs=8*bt*$e.B,qt=$e.sa,_r=$e.ta-Pt+Nn,Wt=$e.qa,It=$e.ra-tr+Qs,vn=$e.Ha,Un=$e.Ia-tr+Qs,Ws=(Qn=Nr.M)==0,cn=Qn>=$e.Va-1,$e.Aa==2&&oa($e,Nr),Nr.uc)for(Xs=(xo=$e).D.M,e(xo.D.uc),Nr=xo.yb;Nr<xo.Hb;++Nr){_o=Nr,Us=Xs;var Lo=($o=(no=xo).D).Nb;Pn=no.R;var $o=$o.wa[$o.Y+_o],gs=no.sa,gi=no.ta+16*Lo*Pn+16*_o,ia=$o.dd,Po=$o.tc;if(Po!=0)if(e(3<=Po),no.L==1)0<_o&&EA(gs,gi,Pn,Po+4),$o.La&&ui(gs,gi,Pn,Po),0<Us&&xl(gs,gi,Pn,Po+4),$o.La&&Nc(gs,gi,Pn,Po);else{var Wa=no.B,Bl=no.qa,pd=no.ra+8*Lo*Wa+8*_o,UA=no.Ha,no=no.Ia+8*Lo*Wa+8*_o;Lo=$o.ld,0<_o&&(gh(gs,gi,Pn,Po+4,ia,Lo),yl(Bl,pd,UA,no,Wa,Po+4,ia,Lo)),$o.La&&(SA(gs,gi,Pn,Po,ia,Lo),hd(Bl,pd,UA,no,Wa,Po,ia,Lo)),0<Us&&(ud(gs,gi,Pn,Po+4,ia,Lo),Dc(Bl,pd,UA,no,Wa,Po+4,ia,Lo)),$o.La&&(bl(gs,gi,Pn,Po,ia,Lo),_l(Bl,pd,UA,no,Wa,Po,ia,Lo))}}if($e.ia&&alert("todo:DitherRow"),Xe.put!=null){if(Nr=16*Qn,Qn=16*(Qn+1),Ws?(Xe.y=$e.sa,Xe.O=$e.ta+Nn,Xe.f=$e.qa,Xe.N=$e.ra+Qs,Xe.ea=$e.Ha,Xe.W=$e.Ia+Qs):(Nr-=Jr,Xe.y=qt,Xe.O=_r,Xe.f=Wt,Xe.N=It,Xe.ea=vn,Xe.W=Un),cn||(Qn-=Jr),Qn>Xe.o&&(Qn=Xe.o),Xe.F=null,Xe.J=null,$e.Fa!=null&&0<$e.Fa.length&&Nr<Qn&&(Xe.J=ja($e,Xe,Nr,Qn-Nr),Xe.F=$e.mb,Xe.F==null&&Xe.F.length==0)){Ft=Cr($e,3,"Could not decode alpha data.");break e}Nr<Xe.j&&(Jr=Xe.j-Nr,Nr=Xe.j,e(!(1&Jr)),Xe.O+=$e.R*Jr,Xe.N+=$e.B*(Jr>>1),Xe.W+=$e.B*(Jr>>1),Xe.F!=null&&(Xe.J+=Xe.width*Jr)),Nr<Qn&&(Xe.O+=Xe.v,Xe.N+=Xe.v>>1,Xe.W+=Xe.v>>1,Xe.F!=null&&(Xe.J+=Xe.v),Xe.ka=Nr-Xe.j,Xe.U=Xe.va-Xe.v,Xe.T=Qn-Nr,Ft=Xe.put(Xe))}bt+1!=$e.Ic||cn||(r($e.sa,$e.ta-Pt,qt,_r+16*$e.R,Pt),r($e.qa,$e.ra-tr,Wt,It+8*$e.B,tr),r($e.Ha,$e.Ia-tr,vn,Un+8*$e.B,tr))}if(!Ft)return Cr(et,6,"Output aborted.")}return 1}(p,v)),v.bc!=null&&v.bc(v),S&=1}return S?(p.cb=0,S):0}function Mt(p,v,S,L,V){V=p[v+S+32*L]+(V>>3),p[v+S+32*L]=-256&V?0>V?0:255:V}function jt(p,v,S,L,V,ne){Mt(p,v,0,S,L+V),Mt(p,v,1,S,L+ne),Mt(p,v,2,S,L-ne),Mt(p,v,3,S,L-V)}function mr(p){return(20091*p>>16)+p}function ur(p,v,S,L){var V,ne=0,se=s(16);for(V=0;4>V;++V){var ce=p[v+0]+p[v+8],ge=p[v+0]-p[v+8],Ue=(35468*p[v+4]>>16)-mr(p[v+12]),Re=mr(p[v+4])+(35468*p[v+12]>>16);se[ne+0]=ce+Re,se[ne+1]=ge+Ue,se[ne+2]=ge-Ue,se[ne+3]=ce-Re,ne+=4,v++}for(V=ne=0;4>V;++V)ce=(p=se[ne+0]+4)+se[ne+8],ge=p-se[ne+8],Ue=(35468*se[ne+4]>>16)-mr(se[ne+12]),Mt(S,L,0,0,ce+(Re=mr(se[ne+4])+(35468*se[ne+12]>>16))),Mt(S,L,1,0,ge+Ue),Mt(S,L,2,0,ge-Ue),Mt(S,L,3,0,ce-Re),ne++,L+=32}function ar(p,v,S,L){var V=p[v+0]+4,ne=35468*p[v+4]>>16,se=mr(p[v+4]),ce=35468*p[v+1]>>16;jt(S,L,0,V+se,p=mr(p[v+1]),ce),jt(S,L,1,V+ne,p,ce),jt(S,L,2,V-ne,p,ce),jt(S,L,3,V-se,p,ce)}function Hr(p,v,S,L,V){ur(p,v,S,L),V&&ur(p,v+16,S,L+4)}function Rr(p,v,S,L){Ka(p,v+0,S,L,1),Ka(p,v+32,S,L+128,1)}function Xt(p,v,S,L){var V;for(p=p[v+0]+4,V=0;4>V;++V)for(v=0;4>v;++v)Mt(S,L,v,V,p)}function pr(p,v,S,L){p[v+0]&&ps(p,v+0,S,L),p[v+16]&&ps(p,v+16,S,L+4),p[v+32]&&ps(p,v+32,S,L+128),p[v+48]&&ps(p,v+48,S,L+128+4)}function Pr(p,v,S,L){var V,ne=s(16);for(V=0;4>V;++V){var se=p[v+0+V]+p[v+12+V],ce=p[v+4+V]+p[v+8+V],ge=p[v+4+V]-p[v+8+V],Ue=p[v+0+V]-p[v+12+V];ne[0+V]=se+ce,ne[8+V]=se-ce,ne[4+V]=Ue+ge,ne[12+V]=Ue-ge}for(V=0;4>V;++V)se=(p=ne[0+4*V]+3)+ne[3+4*V],ce=ne[1+4*V]+ne[2+4*V],ge=ne[1+4*V]-ne[2+4*V],Ue=p-ne[3+4*V],S[L+0]=se+ce>>3,S[L+16]=Ue+ge>>3,S[L+32]=se-ce>>3,S[L+48]=Ue-ge>>3,L+=64}function bn(p,v,S){var L,V=v-32,ne=Gs,se=255-p[V-1];for(L=0;L<S;++L){var ce,ge=ne,Ue=se+p[v-1];for(ce=0;ce<S;++ce)p[v+ce]=ge[Ue+p[V+ce]];v+=32}}function qn(p,v){bn(p,v,4)}function wo(p,v){bn(p,v,8)}function Rt(p,v){bn(p,v,16)}function Tr(p,v){var S;for(S=0;16>S;++S)r(p,v+32*S,p,v-32,16)}function Xr(p,v){var S;for(S=16;0<S;--S)o(p,v,p[v-1],16),v+=32}function hr(p,v,S){var L;for(L=0;16>L;++L)o(v,S+32*L,p,16)}function So(p,v){var S,L=16;for(S=0;16>S;++S)L+=p[v-1+32*S]+p[v+S-32];hr(L>>5,p,v)}function jr(p,v){var S,L=8;for(S=0;16>S;++S)L+=p[v-1+32*S];hr(L>>4,p,v)}function An(p,v){var S,L=8;for(S=0;16>S;++S)L+=p[v+S-32];hr(L>>4,p,v)}function yo(p,v){hr(128,p,v)}function wr(p,v,S){return p+2*v+S+2>>2}function Fa(p,v){var S,L=v-32;for(L=new Uint8Array([wr(p[L-1],p[L+0],p[L+1]),wr(p[L+0],p[L+1],p[L+2]),wr(p[L+1],p[L+2],p[L+3]),wr(p[L+2],p[L+3],p[L+4])]),S=0;4>S;++S)r(p,v+32*S,L,0,L.length)}function Cs(p,v){var S=p[v-1],L=p[v-1+32],V=p[v-1+64],ne=p[v-1+96];j(p,v+0,16843009*wr(p[v-1-32],S,L)),j(p,v+32,16843009*wr(S,L,V)),j(p,v+64,16843009*wr(L,V,ne)),j(p,v+96,16843009*wr(V,ne,ne))}function bo(p,v){var S,L=4;for(S=0;4>S;++S)L+=p[v+S-32]+p[v-1+32*S];for(L>>=3,S=0;4>S;++S)o(p,v+32*S,L,4)}function Ia(p,v){var S=p[v-1+0],L=p[v-1+32],V=p[v-1+64],ne=p[v-1-32],se=p[v+0-32],ce=p[v+1-32],ge=p[v+2-32],Ue=p[v+3-32];p[v+0+96]=wr(L,V,p[v-1+96]),p[v+1+96]=p[v+0+64]=wr(S,L,V),p[v+2+96]=p[v+1+64]=p[v+0+32]=wr(ne,S,L),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=wr(se,ne,S),p[v+3+64]=p[v+2+32]=p[v+1+0]=wr(ce,se,ne),p[v+3+32]=p[v+2+0]=wr(ge,ce,se),p[v+3+0]=wr(Ue,ge,ce)}function Ua(p,v){var S=p[v+1-32],L=p[v+2-32],V=p[v+3-32],ne=p[v+4-32],se=p[v+5-32],ce=p[v+6-32],ge=p[v+7-32];p[v+0+0]=wr(p[v+0-32],S,L),p[v+1+0]=p[v+0+32]=wr(S,L,V),p[v+2+0]=p[v+1+32]=p[v+0+64]=wr(L,V,ne),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=wr(V,ne,se),p[v+3+32]=p[v+2+64]=p[v+1+96]=wr(ne,se,ce),p[v+3+64]=p[v+2+96]=wr(se,ce,ge),p[v+3+96]=wr(ce,ge,ge)}function zi(p,v){var S=p[v-1+0],L=p[v-1+32],V=p[v-1+64],ne=p[v-1-32],se=p[v+0-32],ce=p[v+1-32],ge=p[v+2-32],Ue=p[v+3-32];p[v+0+0]=p[v+1+64]=ne+se+1>>1,p[v+1+0]=p[v+2+64]=se+ce+1>>1,p[v+2+0]=p[v+3+64]=ce+ge+1>>1,p[v+3+0]=ge+Ue+1>>1,p[v+0+96]=wr(V,L,S),p[v+0+64]=wr(L,S,ne),p[v+0+32]=p[v+1+96]=wr(S,ne,se),p[v+1+32]=p[v+2+96]=wr(ne,se,ce),p[v+2+32]=p[v+3+96]=wr(se,ce,ge),p[v+3+32]=wr(ce,ge,Ue)}function Qa(p,v){var S=p[v+0-32],L=p[v+1-32],V=p[v+2-32],ne=p[v+3-32],se=p[v+4-32],ce=p[v+5-32],ge=p[v+6-32],Ue=p[v+7-32];p[v+0+0]=S+L+1>>1,p[v+1+0]=p[v+0+64]=L+V+1>>1,p[v+2+0]=p[v+1+64]=V+ne+1>>1,p[v+3+0]=p[v+2+64]=ne+se+1>>1,p[v+0+32]=wr(S,L,V),p[v+1+32]=p[v+0+96]=wr(L,V,ne),p[v+2+32]=p[v+1+96]=wr(V,ne,se),p[v+3+32]=p[v+2+96]=wr(ne,se,ce),p[v+3+64]=wr(se,ce,ge),p[v+3+96]=wr(ce,ge,Ue)}function gl(p,v){var S=p[v-1+0],L=p[v-1+32],V=p[v-1+64],ne=p[v-1+96];p[v+0+0]=S+L+1>>1,p[v+2+0]=p[v+0+32]=L+V+1>>1,p[v+2+32]=p[v+0+64]=V+ne+1>>1,p[v+1+0]=wr(S,L,V),p[v+3+0]=p[v+1+32]=wr(L,V,ne),p[v+3+32]=p[v+1+64]=wr(V,ne,ne),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=ne}function vl(p,v){var S=p[v-1+0],L=p[v-1+32],V=p[v-1+64],ne=p[v-1+96],se=p[v-1-32],ce=p[v+0-32],ge=p[v+1-32],Ue=p[v+2-32];p[v+0+0]=p[v+2+32]=S+se+1>>1,p[v+0+32]=p[v+2+64]=L+S+1>>1,p[v+0+64]=p[v+2+96]=V+L+1>>1,p[v+0+96]=ne+V+1>>1,p[v+3+0]=wr(ce,ge,Ue),p[v+2+0]=wr(se,ce,ge),p[v+1+0]=p[v+3+32]=wr(S,se,ce),p[v+1+32]=p[v+3+64]=wr(L,S,se),p[v+1+64]=p[v+3+96]=wr(V,L,S),p[v+1+96]=wr(ne,V,L)}function To(p,v){var S;for(S=0;8>S;++S)r(p,v+32*S,p,v-32,8)}function Jo(p,v){var S;for(S=0;8>S;++S)o(p,v,p[v-1],8),v+=32}function Ss(p,v,S){var L;for(L=0;8>L;++L)o(v,S+32*L,p,8)}function ln(p,v){var S,L=8;for(S=0;8>S;++S)L+=p[v+S-32]+p[v-1+32*S];Ss(L>>4,p,v)}function Ta(p,v){var S,L=4;for(S=0;8>S;++S)L+=p[v+S-32];Ss(L>>3,p,v)}function ii(p,v){var S,L=4;for(S=0;8>S;++S)L+=p[v-1+32*S];Ss(L>>3,p,v)}function Ci(p,v){Ss(128,p,v)}function Ji(p,v,S){var L=p[v-S],V=p[v+0],ne=3*(V-L)+Kg[1020+p[v-2*S]-p[v+S]],se=mh[112+(ne+4>>3)];p[v-S]=Gs[255+L+mh[112+(ne+3>>3)]],p[v+0]=Gs[255+V-se]}function La(p,v,S,L){var V=p[v+0],ne=p[v+S];return fi[255+p[v-2*S]-p[v-S]]>L||fi[255+ne-V]>L}function Pa(p,v,S,L){return 4*fi[255+p[v-S]-p[v+0]]+fi[255+p[v-2*S]-p[v+S]]<=L}function ka(p,v,S,L,V){var ne=p[v-3*S],se=p[v-2*S],ce=p[v-S],ge=p[v+0],Ue=p[v+S],Re=p[v+2*S],dt=p[v+3*S];return 4*fi[255+ce-ge]+fi[255+se-Ue]>L?0:fi[255+p[v-4*S]-ne]<=V&&fi[255+ne-se]<=V&&fi[255+se-ce]<=V&&fi[255+dt-Re]<=V&&fi[255+Re-Ue]<=V&&fi[255+Ue-ge]<=V}function Oa(p,v,S,L){var V=2*L+1;for(L=0;16>L;++L)Pa(p,v+L,S,V)&&Ji(p,v+L,S)}function Es(p,v,S,L){var V=2*L+1;for(L=0;16>L;++L)Pa(p,v+L*S,1,V)&&Ji(p,v+L*S,1)}function cs(p,v,S,L){var V;for(V=3;0<V;--V)Oa(p,v+=4*S,S,L)}function bA(p,v,S,L){var V;for(V=3;0<V;--V)Es(p,v+=4,S,L)}function qs(p,v,S,L,V,ne,se,ce){for(ne=2*ne+1;0<V--;){if(ka(p,v,S,ne,se))if(La(p,v,S,ce))Ji(p,v,S);else{var ge=p,Ue=v,Re=S,dt=ge[Ue-2*Re],ct=ge[Ue-Re],et=ge[Ue+0],Ut=ge[Ue+Re],bt=ge[Ue+2*Re],$e=27*(Ft=Kg[1020+3*(et-ct)+Kg[1020+dt-Ut]])+63>>7,Xe=18*Ft+63>>7,Ft=9*Ft+63>>7;ge[Ue-3*Re]=Gs[255+ge[Ue-3*Re]+Ft],ge[Ue-2*Re]=Gs[255+dt+Xe],ge[Ue-Re]=Gs[255+ct+$e],ge[Ue+0]=Gs[255+et-$e],ge[Ue+Re]=Gs[255+Ut-Xe],ge[Ue+2*Re]=Gs[255+bt-Ft]}v+=L}}function Zo(p,v,S,L,V,ne,se,ce){for(ne=2*ne+1;0<V--;){if(ka(p,v,S,ne,se))if(La(p,v,S,ce))Ji(p,v,S);else{var ge=p,Ue=v,Re=S,dt=ge[Ue-Re],ct=ge[Ue+0],et=ge[Ue+Re],Ut=mh[112+((bt=3*(ct-dt))+4>>3)],bt=mh[112+(bt+3>>3)],$e=Ut+1>>1;ge[Ue-2*Re]=Gs[255+ge[Ue-2*Re]+$e],ge[Ue-Re]=Gs[255+dt+bt],ge[Ue+0]=Gs[255+ct-Ut],ge[Ue+Re]=Gs[255+et-$e]}v+=L}}function Da(p,v,S,L,V,ne){qs(p,v,S,1,16,L,V,ne)}function Si(p,v,S,L,V,ne){qs(p,v,1,S,16,L,V,ne)}function ml(p,v,S,L,V,ne){var se;for(se=3;0<se;--se)Zo(p,v+=4*S,S,1,16,L,V,ne)}function ai(p,v,S,L,V,ne){var se;for(se=3;0<se;--se)Zo(p,v+=4,1,S,16,L,V,ne)}function _A(p,v,S,L,V,ne,se,ce){qs(p,v,V,1,8,ne,se,ce),qs(S,L,V,1,8,ne,se,ce)}function Zi(p,v,S,L,V,ne,se,ce){qs(p,v,1,V,8,ne,se,ce),qs(S,L,1,V,8,ne,se,ce)}function ea(p,v,S,L,V,ne,se,ce){Zo(p,v+4*V,V,1,8,ne,se,ce),Zo(S,L+4*V,V,1,8,ne,se,ce)}function Na(p,v,S,L,V,ne,se,ce){Zo(p,v+4,1,V,8,ne,se,ce),Zo(S,L+4,1,V,8,ne,se,ce)}function ta(){this.ba=new Ye,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ma(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ra(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xA(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new O}function BA(){this.xb=this.a=0,this.l=new On,this.ca=new Ye,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xA,this.ab=0,this.gc=i(4,ra),this.Oc=0}function Ei(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new On,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fi(p,v,S,L,V,ne,se){for(p=p==null?0:p[v+0],v=0;v<se;++v)V[ne+v]=p+S[L+v]&255,p=V[ne+v]}function Ha(p,v,S,L,V,ne,se){var ce;if(p==null)Fi(null,null,S,L,V,ne,se);else for(ce=0;ce<se;++ce)V[ne+ce]=p[v+ce]+S[L+ce]&255}function Ks(p,v,S,L,V,ne,se){if(p==null)Fi(null,null,S,L,V,ne,se);else{var ce,ge=p[v+0],Ue=ge,Re=ge;for(ce=0;ce<se;++ce)Ue=Re+(ge=p[v+ce])-Ue,Re=S[L+ce]+(-256&Ue?0>Ue?0:255:Ue)&255,Ue=ge,V[ne+ce]=Re}}function ja(p,v,S,L){var V=v.width,ne=v.o;if(e(p!=null&&v!=null),0>S||0>=L||S+L>ne)return null;if(!p.Cc){if(p.ga==null){var se;if(p.ga=new Ei,(se=p.ga==null)||(se=v.width*v.o,e(p.Gb.length==0),p.Gb=s(se),p.Uc=0,p.Gb==null?se=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,se=1),se=!se),!se){se=p.ga;var ce=p.Fa,ge=p.P,Ue=p.qc,Re=p.mb,dt=p.nb,ct=ge+1,et=Ue-1,Ut=se.l;if(e(ce!=null&&Re!=null&&v!=null),IA[0]=null,IA[1]=Fi,IA[2]=Ha,IA[3]=Ks,se.ca=Re,se.tb=dt,se.c=v.width,se.i=v.height,e(0<se.c&&0<se.i),1>=Ue)v=0;else if(se.$a=ce[ge+0]>>0&3,se.Z=ce[ge+0]>>2&3,se.Lc=ce[ge+0]>>4&3,ge=ce[ge+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||ge)v=0;else if(Ut.put=Tt,Ut.ac=xt,Ut.bc=yt,Ut.ma=se,Ut.width=v.width,Ut.height=v.height,Ut.Da=v.Da,Ut.v=v.v,Ut.va=v.va,Ut.j=v.j,Ut.o=v.o,se.$a)e:{e(se.$a==1),v=ft();t:for(;;){if(v==null){v=0;break e}if(e(se!=null),se.mc=v,v.c=se.c,v.i=se.i,v.l=se.l,v.l.ma=se,v.l.width=se.c,v.l.height=se.i,v.a=0,te(v.m,ce,ct,et),!Ot(se.c,se.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&nr(v.s)?(se.ic=1,ce=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(ce),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(se.ic=0,v=Vt(v,se.c)),!v))break t;v=1;break e}se.mc=null,v=0}else v=et>=se.c*se.i;se=!v}if(se)return null;p.ga.Lc!=1?p.Ga=0:L=ne-S}e(p.ga!=null),e(S+L<=ne);e:{if(v=(ce=p.ga).c,ne=ce.l.o,ce.$a==0){if(ct=p.rc,et=p.Vc,Ut=p.Fa,ge=p.P+1+S*v,Ue=p.mb,Re=p.nb+S*v,e(ge<=p.P+p.qc),ce.Z!=0)for(e(IA[ce.Z]!=null),se=0;se<L;++se)IA[ce.Z](ct,et,Ut,ge,Ue,Re,v),ct=Ue,et=Re,Re+=v,ge+=v;else for(se=0;se<L;++se)r(Ue,Re,Ut,ge,v),ct=Ue,et=Re,Re+=v,ge+=v;p.rc=ct,p.Vc=et}else{if(e(ce.mc!=null),v=S+L,e((se=ce.mc)!=null),e(v<=se.i),se.C>=v)v=1;else if(ce.ic||st(),ce.ic){ce=se.V,ct=se.Ba,et=se.c;var bt=se.i,$e=(Ut=1,ge=se.$/et,Ue=se.$%et,Re=se.m,dt=se.s,se.$),Xe=et*bt,Ft=et*v,Pt=dt.wc,It=$e<Ft?mt(dt,Ue,ge):null;e($e<=Xe),e(v<=bt),e(nr(dt));t:for(;;){for(;!Re.h&&$e<Ft;){if(Ue&Pt||(It=mt(dt,Ue,ge)),e(It!=null),P(Re),256>(bt=Nt(It.G[0],It.H[0],Re)))ce[ct+$e]=bt,++$e,++Ue>=et&&(Ue=0,++ge<=v&&!(ge%16)&&Kt(se,ge));else{if(!(280>bt)){Ut=0;break t}bt=Dt(bt-256,Re);var tr,qt=Nt(It.G[4],It.H[4],Re);if(P(Re),!($e>=(qt=St(et,qt=Dt(qt,Re)))&&Xe-$e>=bt)){Ut=0;break t}for(tr=0;tr<bt;++tr)ce[ct+$e+tr]=ce[ct+$e+tr-qt];for($e+=bt,Ue+=bt;Ue>=et;)Ue-=et,++ge<=v&&!(ge%16)&&Kt(se,ge);$e<Ft&&Ue&Pt&&(It=mt(dt,Ue,ge))}e(Re.h==E(Re))}Kt(se,ge>v?v:ge);break t}!Ut||Re.h&&$e<Xe?(Ut=0,se.a=Re.h?5:3):se.$=$e,v=Ut}else v=sr(se,se.V,se.Ba,se.c,se.i,v,ir);if(!v){L=0;break e}}S+L>=ne&&(p.Cc=1),L=1}if(!L)return null;if(p.Cc&&((L=p.ga)!=null&&(L.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+S*V}function _(p,v,S,L,V,ne){for(;0<V--;){var se,ce=p,ge=v+(S?1:0),Ue=p,Re=v+(S?0:3);for(se=0;se<L;++se){var dt=Ue[Re+4*se];dt!=255&&(dt*=32897,ce[ge+4*se+0]=ce[ge+4*se+0]*dt>>23,ce[ge+4*se+1]=ce[ge+4*se+1]*dt>>23,ce[ge+4*se+2]=ce[ge+4*se+2]*dt>>23)}v+=ne}}function K(p,v,S,L,V){for(;0<L--;){var ne;for(ne=0;ne<S;++ne){var se=p[v+2*ne+0],ce=15&(Ue=p[v+2*ne+1]),ge=4369*ce,Ue=(240&Ue|Ue>>4)*ge>>16;p[v+2*ne+0]=(240&se|se>>4)*ge>>16&240|(15&se|se<<4)*ge>>16>>4&15,p[v+2*ne+1]=240&Ue|ce}v+=V}}function Te(p,v,S,L,V,ne,se,ce){var ge,Ue,Re=255;for(Ue=0;Ue<V;++Ue){for(ge=0;ge<L;++ge){var dt=p[v+ge];ne[se+4*ge]=dt,Re&=dt}v+=S,se+=ce}return Re!=255}function He(p,v,S,L,V){var ne;for(ne=0;ne<V;++ne)S[L+ne]=p[v+ne]>>8}function st(){hi=_,jn=K,Rn=Te,Ao=He}function _t(p,v,S){H[p]=function(L,V,ne,se,ce,ge,Ue,Re,dt,ct,et,Ut,bt,$e,Xe,Ft,Pt){var It,tr=Pt-1>>1,qt=ce[ge+0]|Ue[Re+0]<<16,_r=dt[ct+0]|et[Ut+0]<<16;e(L!=null);var Wt=3*qt+_r+131074>>2;for(v(L[V+0],255&Wt,Wt>>16,bt,$e),ne!=null&&(Wt=3*_r+qt+131074>>2,v(ne[se+0],255&Wt,Wt>>16,Xe,Ft)),It=1;It<=tr;++It){var vn=ce[ge+It]|Ue[Re+It]<<16,Un=dt[ct+It]|et[Ut+It]<<16,cn=qt+vn+_r+Un+524296,Jr=cn+2*(vn+_r)>>3;Wt=Jr+qt>>1,qt=(cn=cn+2*(qt+Un)>>3)+vn>>1,v(L[V+2*It-1],255&Wt,Wt>>16,bt,$e+(2*It-1)*S),v(L[V+2*It-0],255&qt,qt>>16,bt,$e+(2*It-0)*S),ne!=null&&(Wt=cn+_r>>1,qt=Jr+Un>>1,v(ne[se+2*It-1],255&Wt,Wt>>16,Xe,Ft+(2*It-1)*S),v(ne[se+2*It+0],255&qt,qt>>16,Xe,Ft+(2*It+0)*S)),qt=vn,_r=Un}1&Pt||(Wt=3*qt+_r+131074>>2,v(L[V+Pt-1],255&Wt,Wt>>16,bt,$e+(Pt-1)*S),ne!=null&&(Wt=3*_r+qt+131074>>2,v(ne[se+Pt-1],255&Wt,Wt>>16,Xe,Ft+(Pt-1)*S)))}}function kt(){pi[wh]=AC,pi[yh]=f2,pi[l2]=lC,pi[bh]=p2,pi[_h]=g2,pi[Vg]=v2,pi[d2]=dC,pi[Gg]=f2,pi[Wg]=p2,pi[xh]=g2,pi[Xg]=v2}function Gt(p){return p&-16384?0>p?0:255:p>>cC}function gr(p,v){return Gt((19077*p>>8)+(26149*v>>8)-14234)}function Qr(p,v,S){return Gt((19077*p>>8)-(6419*v>>8)-(13320*S>>8)+8708)}function Ur(p,v){return Gt((19077*p>>8)+(33050*v>>8)-17685)}function qr(p,v,S,L,V){L[V+0]=gr(p,S),L[V+1]=Qr(p,v,S),L[V+2]=Ur(p,v)}function _n(p,v,S,L,V){L[V+0]=Ur(p,v),L[V+1]=Qr(p,v,S),L[V+2]=gr(p,S)}function Gr(p,v,S,L,V){var ne=Qr(p,v,S);v=ne<<3&224|Ur(p,v)>>3,L[V+0]=248&gr(p,S)|ne>>5,L[V+1]=v}function dn(p,v,S,L,V){var ne=240&Ur(p,v)|15;L[V+0]=240&gr(p,S)|Qr(p,v,S)>>4,L[V+1]=ne}function In(p,v,S,L,V){L[V+0]=255,qr(p,v,S,L,V+1)}function xn(p,v,S,L,V){_n(p,v,S,L,V),L[V+3]=255}function us(p,v,S,L,V){qr(p,v,S,L,V),L[V+3]=255}function Ho(p,v){return 0>p?0:p>v?v:p}function Fs(p,v,S){H[p]=function(L,V,ne,se,ce,ge,Ue,Re,dt){for(var ct=Re+(-2&dt)*S;Re!=ct;)v(L[V+0],ne[se+0],ce[ge+0],Ue,Re),v(L[V+1],ne[se+0],ce[ge+0],Ue,Re+S),V+=2,++se,++ge,Re+=2*S;1&dt&&v(L[V+0],ne[se+0],ce[ge+0],Ue,Re)}}function Ai(p,v,S){return S==0?p==0?v==0?6:5:v==0?4:0:S}function na(p,v,S,L,V){switch(p>>>30){case 3:Ka(v,S,L,V,0);break;case 2:ao(v,S,L,V);break;case 1:ps(v,S,L,V)}}function oa(p,v){var S,L,V=v.M,ne=v.Nb,se=p.oc,ce=p.pc+40,ge=p.oc,Ue=p.pc+584,Re=p.oc,dt=p.pc+600;for(S=0;16>S;++S)se[ce+32*S-1]=129;for(S=0;8>S;++S)ge[Ue+32*S-1]=129,Re[dt+32*S-1]=129;for(0<V?se[ce-1-32]=ge[Ue-1-32]=Re[dt-1-32]=129:(o(se,ce-32-1,127,21),o(ge,Ue-32-1,127,9),o(Re,dt-32-1,127,9)),L=0;L<p.za;++L){var ct=v.ya[v.aa+L];if(0<L){for(S=-1;16>S;++S)r(se,ce+32*S-4,se,ce+32*S+12,4);for(S=-1;8>S;++S)r(ge,Ue+32*S-4,ge,Ue+32*S+4,4),r(Re,dt+32*S-4,Re,dt+32*S+4,4)}var et=p.Gd,Ut=p.Hd+L,bt=ct.ad,$e=ct.Hc;if(0<V&&(r(se,ce-32,et[Ut].y,0,16),r(ge,Ue-32,et[Ut].f,0,8),r(Re,dt-32,et[Ut].ea,0,8)),ct.Za){var Xe=se,Ft=ce-32+16;for(0<V&&(L>=p.za-1?o(Xe,Ft,et[Ut].y[15],4):r(Xe,Ft,et[Ut+1].y,0,4)),S=0;4>S;S++)Xe[Ft+128+S]=Xe[Ft+256+S]=Xe[Ft+384+S]=Xe[Ft+0+S];for(S=0;16>S;++S,$e<<=2)Xe=se,Ft=ce+w2[S],Ii[ct.Ob[S]](Xe,Ft),na($e,bt,16*+S,Xe,Ft)}else if(Xe=Ai(L,V,ct.Ob[0]),FA[Xe](se,ce),$e!=0)for(S=0;16>S;++S,$e<<=2)na($e,bt,16*+S,se,ce+w2[S]);for(S=ct.Gc,Xe=Ai(L,V,ct.Dd),Ga[Xe](ge,Ue),Ga[Xe](Re,dt),$e=bt,Xe=ge,Ft=Ue,255&(ct=S>>0)&&(170&ct?Oc($e,256,Xe,Ft):ci($e,256,Xe,Ft)),ct=Re,$e=dt,255&(S>>=8)&&(170&S?Oc(bt,320,ct,$e):ci(bt,320,ct,$e)),V<p.Ub-1&&(r(et[Ut].y,0,se,ce+480,16),r(et[Ut].f,0,ge,Ue+224,8),r(et[Ut].ea,0,Re,dt+224,8)),S=8*ne*p.B,et=p.sa,Ut=p.ta+16*L+16*ne*p.R,bt=p.qa,ct=p.ra+8*L+S,$e=p.Ha,Xe=p.Ia+8*L+S,S=0;16>S;++S)r(et,Ut+S*p.R,se,ce+32*S,16);for(S=0;8>S;++S)r(bt,ct+S*p.B,ge,Ue+32*S,8),r($e,Xe+S*p.B,Re,dt+32*S,8)}}function kr(p,v,S,L,V,ne,se,ce,ge){var Ue=[0],Re=[0],dt=0,ct=ge!=null?ge.kd:0,et=ge??new Ma;if(p==null||12>S)return 7;et.data=p,et.w=v,et.ha=S,v=[v],S=[S],et.gb=[et.gb];e:{var Ut=v,bt=S,$e=et.gb;if(e(p!=null),e(bt!=null),e($e!=null),$e[0]=0,12<=bt[0]&&!t(p,Ut[0],"RIFF")){if(t(p,Ut[0]+8,"WEBP")){$e=3;break e}var Xe=_e(p,Ut[0]+4);if(12>Xe||4294967286<Xe){$e=3;break e}if(ct&&Xe>bt[0]-8){$e=7;break e}$e[0]=Xe,Ut[0]+=12,bt[0]-=12}$e=0}if($e!=0)return $e;for(Xe=0<et.gb[0],S=S[0];;){e:{var Ft=p;bt=v,$e=S;var Pt=Ue,It=Re,tr=Ut=[0];if((Wt=dt=[dt])[0]=0,8>$e[0])$e=7;else{if(!t(Ft,bt[0],"VP8X")){if(_e(Ft,bt[0]+4)!=10){$e=3;break e}if(18>$e[0]){$e=7;break e}var qt=_e(Ft,bt[0]+8),_r=1+Ee(Ft,bt[0]+12);if(2147483648<=_r*(Ft=1+Ee(Ft,bt[0]+15))){$e=3;break e}tr!=null&&(tr[0]=qt),Pt!=null&&(Pt[0]=_r),It!=null&&(It[0]=Ft),bt[0]+=18,$e[0]-=18,Wt[0]=1}$e=0}}if(dt=dt[0],Ut=Ut[0],$e!=0)return $e;if(bt=!!(2&Ut),!Xe&&dt)return 3;if(ne!=null&&(ne[0]=!!(16&Ut)),se!=null&&(se[0]=bt),ce!=null&&(ce[0]=0),se=Ue[0],Ut=Re[0],dt&&bt&&ge==null){$e=0;break}if(4>S){$e=7;break}if(Xe&&dt||!Xe&&!dt&&!t(p,v[0],"ALPH")){S=[S],et.na=[et.na],et.P=[et.P],et.Sa=[et.Sa];e:{qt=p,$e=v,Xe=S;var Wt=et.gb;Pt=et.na,It=et.P,tr=et.Sa,_r=22,e(qt!=null),e(Xe!=null),Ft=$e[0];var vn=Xe[0];for(e(Pt!=null),e(tr!=null),Pt[0]=null,It[0]=null,tr[0]=0;;){if($e[0]=Ft,Xe[0]=vn,8>vn){$e=7;break e}var Un=_e(qt,Ft+4);if(4294967286<Un){$e=3;break e}var cn=8+Un+1&-2;if(_r+=cn,0<Wt&&_r>Wt){$e=3;break e}if(!t(qt,Ft,"VP8 ")||!t(qt,Ft,"VP8L")){$e=0;break e}if(vn[0]<cn){$e=7;break e}t(qt,Ft,"ALPH")||(Pt[0]=qt,It[0]=Ft+8,tr[0]=Un),Ft+=cn,vn-=cn}}if(S=S[0],et.na=et.na[0],et.P=et.P[0],et.Sa=et.Sa[0],$e!=0)break}S=[S],et.Ja=[et.Ja],et.xa=[et.xa];e:if(Wt=p,$e=v,Xe=S,Pt=et.gb[0],It=et.Ja,tr=et.xa,qt=$e[0],Ft=!t(Wt,qt,"VP8 "),_r=!t(Wt,qt,"VP8L"),e(Wt!=null),e(Xe!=null),e(It!=null),e(tr!=null),8>Xe[0])$e=7;else{if(Ft||_r){if(Wt=_e(Wt,qt+4),12<=Pt&&Wt>Pt-12){$e=3;break e}if(ct&&Wt>Xe[0]-8){$e=7;break e}It[0]=Wt,$e[0]+=8,Xe[0]-=8,tr[0]=_r}else tr[0]=5<=Xe[0]&&Wt[qt+0]==47&&!(Wt[qt+4]>>5),It[0]=Xe[0];$e=0}if(S=S[0],et.Ja=et.Ja[0],et.xa=et.xa[0],v=v[0],$e!=0)break;if(4294967286<et.Ja)return 3;if(ce==null||bt||(ce[0]=et.xa?2:1),se=[se],Ut=[Ut],et.xa){if(5>S){$e=7;break}ce=se,ct=Ut,bt=ne,p==null||5>S?p=0:5<=S&&p[v+0]==47&&!(p[v+4]>>5)?(Xe=[0],Wt=[0],Pt=[0],te(It=new z,p,v,S),rt(It,Xe,Wt,Pt)?(ce!=null&&(ce[0]=Xe[0]),ct!=null&&(ct[0]=Wt[0]),bt!=null&&(bt[0]=Pt[0]),p=1):p=0):p=0}else{if(10>S){$e=7;break}ce=Ut,p==null||10>S||!Yn(p,v+3,S-3)?p=0:(ct=p[v+0]|p[v+1]<<8|p[v+2]<<16,bt=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&ct||3<(ct>>1&7)||!(ct>>4&1)||ct>>5>=et.Ja||!bt||!p?p=0:(se&&(se[0]=bt),ce&&(ce[0]=p),p=1))}if(!p||(se=se[0],Ut=Ut[0],dt&&(Ue[0]!=se||Re[0]!=Ut)))return 3;ge!=null&&(ge[0]=et,ge.offset=v-ge.w,e(4294967286>v-ge.w),e(ge.offset==ge.ha-S));break}return $e==0||$e==7&&dt&&ge==null?(ne!=null&&(ne[0]|=et.na!=null&&0<et.na.length),L!=null&&(L[0]=se),V!=null&&(V[0]=Ut),0):$e}function Yr(p,v,S){var L=v.width,V=v.height,ne=0,se=0,ce=L,ge=V;if(v.Da=p!=null&&0<p.Da,v.Da&&(ce=p.cd,ge=p.bd,ne=p.v,se=p.j,11>S||(ne&=-2,se&=-2),0>ne||0>se||0>=ce||0>=ge||ne+ce>L||se+ge>V))return 0;if(v.v=ne,v.j=se,v.va=ne+ce,v.o=se+ge,v.U=ce,v.T=ge,v.da=p!=null&&0<p.da,v.da){if(!oe(ce,ge,S=[p.ib],ne=[p.hb]))return 0;v.ib=S[0],v.hb=ne[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*L/4&&v.hb<3*V/4,v.Kb=0),1}function Kn(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function jo(p,v,S,L){if(L==null||0>=p||0>=v)return 2;if(S!=null){if(S.Da){var V=S.cd,ne=S.bd,se=-2&S.v,ce=-2&S.j;if(0>se||0>ce||0>=V||0>=ne||se+V>p||ce+ne>v)return 2;p=V,v=ne}if(S.da){if(!oe(p,v,V=[S.ib],ne=[S.hb]))return 2;p=V[0],v=ne[0]}}L.width=p,L.height=v;e:{var ge=L.width,Ue=L.height;if(p=L.S,0>=ge||0>=Ue||!(p>=wh&&13>p))p=2;else{if(0>=L.Rd&&L.sd==null){se=ne=V=v=0;var Re=(ce=ge*y2[p])*Ue;if(11>p||(ne=(Ue+1)/2*(v=(ge+1)/2),p==12&&(se=(V=ge)*Ue)),(Ue=s(Re+2*ne+se))==null){p=1;break e}L.sd=Ue,11>p?((ge=L.f.RGBA).eb=Ue,ge.fb=0,ge.A=ce,ge.size=Re):((ge=L.f.kb).y=Ue,ge.O=0,ge.fa=ce,ge.Fd=Re,ge.f=Ue,ge.N=0+Re,ge.Ab=v,ge.Cd=ne,ge.ea=Ue,ge.W=0+Re+ne,ge.Db=v,ge.Ed=ne,p==12&&(ge.F=Ue,ge.J=0+Re+2*ne),ge.Tc=se,ge.lb=V)}if(v=1,V=L.S,ne=L.width,se=L.height,V>=wh&&13>V)if(11>V)p=L.f.RGBA,v&=(ce=Math.abs(p.A))*(se-1)+ne<=p.size,v&=ce>=ne*y2[V],v&=p.eb!=null;else{p=L.f.kb,ce=(ne+1)/2,Re=(se+1)/2,ge=Math.abs(p.fa),Ue=Math.abs(p.Ab);var dt=Math.abs(p.Db),ct=Math.abs(p.lb),et=ct*(se-1)+ne;v&=ge*(se-1)+ne<=p.Fd,v&=Ue*(Re-1)+ce<=p.Cd,v=(v&=dt*(Re-1)+ce<=p.Ed)&ge>=ne&Ue>=ce&dt>=ce,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,V==12&&(v&=ct>=ne,v&=et<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||S!=null&&S.fd&&(p=Kn(L)),p}var Dn=64,hs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vs=24,sa=32,Ra=8,Ro=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(p){return p},H.Predictor2=function(p,v,S){return v[S+0]},H.Predictor3=function(p,v,S){return v[S+1]},H.Predictor4=function(p,v,S){return v[S-1]},H.Predictor5=function(p,v,S){return Ne(Ne(p,v[S+1]),v[S+0])},H.Predictor6=function(p,v,S){return Ne(p,v[S-1])},H.Predictor7=function(p,v,S){return Ne(p,v[S+0])},H.Predictor8=function(p,v,S){return Ne(v[S-1],v[S+0])},H.Predictor9=function(p,v,S){return Ne(v[S+0],v[S+1])},H.Predictor10=function(p,v,S){return Ne(Ne(p,v[S-1]),Ne(v[S+0],v[S+1]))},H.Predictor11=function(p,v,S){var L=v[S+0];return 0>=pe(L>>24&255,p>>24&255,(v=v[S-1])>>24&255)+pe(L>>16&255,p>>16&255,v>>16&255)+pe(L>>8&255,p>>8&255,v>>8&255)+pe(255&L,255&p,255&v)?L:p},H.Predictor12=function(p,v,S){var L=v[S+0];return(ze((p>>24&255)+(L>>24&255)-((v=v[S-1])>>24&255))<<24|ze((p>>16&255)+(L>>16&255)-(v>>16&255))<<16|ze((p>>8&255)+(L>>8&255)-(v>>8&255))<<8|ze((255&p)+(255&L)-(255&v)))>>>0},H.Predictor13=function(p,v,S){var L=v[S-1];return(Ce((p=Ne(p,v[S+0]))>>24&255,L>>24&255)<<24|Ce(p>>16&255,L>>16&255)<<16|Ce(p>>8&255,L>>8&255)<<8|Ce(p>>0&255,L>>0&255))>>>0};var kc=H.PredictorAdd0;H.PredictorAdd1=Oe,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var li=H.PredictorAdd2;de("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),de("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var di,es=H.ColorIndexInverseTransform,dd=H.MapARGB,fh=H.VP8LColorIndexInverseTransformAlpha,ph=H.MapAlpha,zA=H.VP8LPredictorsAdd=[];zA.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var wl,Is,fs,CA,$a,qa,cd,Ka,ao,Oc,ps,ci,ud,gh,Dc,yl,bl,SA,_l,hd,xl,EA,Nc,ui,hi,jn,Rn,Ao,Eo=s(511),Va=s(2041),Mc=s(225),fd=s(767),vh=0,Kg=Va,mh=Mc,Gs=fd,fi=Eo,wh=0,yh=1,l2=2,bh=3,_h=4,Vg=5,d2=6,Gg=7,Wg=8,xh=9,Xg=10,Gz=[2,3,7],Wz=[3,3,11],c2=[280,256,256,256,40],Xz=[0,1,1,1,0],Yz=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zz=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eC=8,Yg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Hc=null,tC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],u2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],iC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],FA=[],Ii=[],Ga=[],aC=1,h2=2,IA=[],pi=[];_t("UpsampleRgbLinePair",qr,3),_t("UpsampleBgrLinePair",_n,3),_t("UpsampleRgbaLinePair",us,4),_t("UpsampleBgraLinePair",xn,4),_t("UpsampleArgbLinePair",In,4),_t("UpsampleRgba4444LinePair",dn,2),_t("UpsampleRgb565LinePair",Gr,2);var AC=H.UpsampleRgbLinePair,lC=H.UpsampleBgrLinePair,f2=H.UpsampleRgbaLinePair,p2=H.UpsampleBgraLinePair,g2=H.UpsampleArgbLinePair,v2=H.UpsampleRgba4444LinePair,dC=H.UpsampleRgb565LinePair,Bh=16,zh=1<<Bh-1,jc=-227,Zg=482,cC=6,m2=0,uC=s(256),hC=s(256),fC=s(256),pC=s(256),gC=s(Zg-jc),vC=s(Zg-jc);Fs("YuvToRgbRow",qr,3),Fs("YuvToBgrRow",_n,3),Fs("YuvToRgbaRow",us,4),Fs("YuvToBgraRow",xn,4),Fs("YuvToArgbRow",In,4),Fs("YuvToRgba4444Row",dn,2),Fs("YuvToRgb565Row",Gr,2);var w2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ch=[0,2,8],mC=[8,7,6,4,4,2,2,2,1,1,1,1],wC=1;this.WebPDecodeRGBA=function(p,v,S,L,V){var ne=yh,se=new ta,ce=new Ye;se.ba=ce,ce.S=ne,ce.width=[ce.width],ce.height=[ce.height];var ge=ce.width,Ue=ce.height,Re=new ot;if(Re==null||p==null)var dt=2;else e(Re!=null),dt=kr(p,v,S,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(dt!=0?ge=0:(ge!=null&&(ge[0]=Re.width[0]),Ue!=null&&(Ue[0]=Re.height[0]),ge=1),ge){ce.width=ce.width[0],ce.height=ce.height[0],L!=null&&(L[0]=ce.width),V!=null&&(V[0]=ce.height);e:{if(L=new On,(V=new Ma).data=p,V.w=v,V.ha=S,V.kd=1,v=[0],e(V!=null),((p=kr(V.data,V.w,V.ha,null,null,null,v,null,V))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(se!=null),L.data=V.data,L.w=V.w+V.offset,L.ha=V.ha-V.offset,L.put=Tt,L.ac=xt,L.bc=yt,L.ma=se,V.xa){if((p=ft())==null){se=1;break e}if(function(ct,et){var Ut=[0],bt=[0],$e=[0];t:for(;;){if(ct==null)return 0;if(et==null)return ct.a=2,0;if(ct.l=et,ct.a=0,te(ct.m,et.data,et.w,et.ha),!rt(ct.m,Ut,bt,$e)){ct.a=3;break t}if(ct.xb=h2,et.width=Ut[0],et.height=bt[0],!Ot(Ut[0],bt[0],1,ct,null))break t;return 1}return e(ct.a!=0),0}(p,L)){if(L=(v=jo(L.width,L.height,se.Oa,se.ba))==0){t:{L=p;r:for(;;){if(L==null){L=0;break t}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((S=L.l)!=null),e((V=S.ma)!=null),L.xb!=0){if(L.ca=V.ba,L.tb=V.tb,e(L.ca!=null),!Yr(V.Oa,S,bh)){L.a=2;break r}if(!Vt(L,S.width)||S.da)break r;if((S.da||Me(L.ca.S))&&st(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&st()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Le(L.s.vb,L.s.Wa.Xa)){L.a=1;break r}L.xb=0}if(!sr(L,L.V,L.Ba,L.c,L.i,S.o,$t))break r;V.Dc=L.Ma,L=1;break t}e(L.a!=0),L=0}L=!L}L&&(v=p.a)}else v=p.a}else{if((p=new tn)==null){se=1;break e}if(p.Fa=V.na,p.P=V.P,p.qc=V.Sa,Yo(p,L)){if((v=jo(L.width,L.height,se.Oa,se.ba))==0){if(p.Aa=0,S=se.Oa,e((V=p)!=null),S!=null){if(0<(ge=0>(ge=S.Md)?0:100<ge?255:255*ge/100)){for(Ue=Re=0;4>Ue;++Ue)12>(dt=V.pb[Ue]).lc&&(dt.ia=ge*mC[0>dt.lc?0:dt.lc]>>3),Re|=dt.ia;Re&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=S.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}Qt(p,L)||(v=p.a)}}else v=p.a}v==0&&se.Oa!=null&&se.Oa.fd&&(v=Kn(se.ba))}se=v}ne=se!=0?null:11>ne?ce.f.RGBA.eb:ce.f.kb.y}else ne=null;return ne};var y2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(H,Y){for(var Be="",M=0;M<4;M++)Be+=String.fromCharCode(H[Y++]);return Be}function c(H,Y){return(H[Y+0]<<0|H[Y+1]<<8|H[Y+2]<<16)>>>0}function u(H,Y){return(H[Y+0]<<0|H[Y+1]<<8|H[Y+2]<<16|H[Y+3]<<24)>>>0}new A;var h=[0],f=[0],g=[],w=new A,y=n,x=function(H,Y){var Be={},M=0,O=!1,J=0,re=0;if(Be.frames=[],!function(F,E,U,P){for(var T=0;T<P;T++)if(F[E+T]!=U.charCodeAt(T))return!0;return!1}(H,Y,"RIFF",4)){var he,ie;for(u(H,Y+=4),Y+=8;Y<H.length;){var be=d(H,Y),te=u(H,Y+=4);Y+=4;var Z=te+(1&te);switch(be){case"VP8 ":case"VP8L":Be.frames[M]===void 0&&(Be.frames[M]={}),(z=Be.frames[M]).src_off=O?re:Y-8,z.src_size=J+te+8,M++,O&&(O=!1,J=0,re=0);break;case"VP8X":(z=Be.header={}).feature_flags=H[Y];var Ae=Y+4;z.canvas_width=1+c(H,Ae),Ae+=3,z.canvas_height=1+c(H,Ae),Ae+=3;break;case"ALPH":O=!0,J=Z+8,re=Y-8;break;case"ANIM":(z=Be.header).bgcolor=u(H,Y),Ae=Y+4,z.loop_count=(he=H)[(ie=Ae)+0]<<0|he[ie+1]<<8,Ae+=2;break;case"ANMF":var we,z;(z=Be.frames[M]={}).offset_x=2*c(H,Y),Y+=3,z.offset_y=2*c(H,Y),Y+=3,z.width=1+c(H,Y),Y+=3,z.height=1+c(H,Y),Y+=3,z.duration=c(H,Y),Y+=3,we=H[Y++],z.dispose=1&we,z.blend=we>>1&1}be!="ANMF"&&(Y+=Z)}return Be}}(y,0);x.response=y,x.rgbaoutput=!0,x.dataurl=!1;var C=x.header?x.header:null,I=x.frames?x.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],f=[C.canvas_width];for(var N=0;N<I.length&&I[N].blend!=0;N++);}var k=I[0],ee=w.WebPDecodeRGBA(y,k.src_off,k.src_size,f,h);k.rgba=ee,k.imgwidth=f[0],k.imgheight=h[0];for(var G=0;G<f[0]*h[0]*4;G++)g[G]=ee[G];return this.width=f,this.height=h,this.data=g,this}(function(n){var e=function(){return typeof _m=="function"},t=function(h,f,g,w){var y=4,x=i;switch(w){case n.image_compression.FAST:y=1,x=s;break;case n.image_compression.MEDIUM:y=6,x=a;break;case n.image_compression.SLOW:y=9,x=A}h=r(h,f,g,x);var C=_m(h,{level:y});return n.__addimage__.arrayBufferToBinaryString(C)},r=function(h,f,g,w){for(var y,x,C,I=h.length/f,N=new Uint8Array(h.length+I),k=c(),ee=0;ee<I;ee+=1){if(C=ee*f,y=h.subarray(C,C+f),w)N.set(w(y,g,x),C+ee);else{for(var G,H=k.length,Y=[];G<H;G+=1)Y[G]=k[G](y,g,x);var Be=u(Y.concat());N.set(Y[Be],C+ee)}x=y}return N},o=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var g,w=[],y=h.length;w[0]=1;for(var x=0;x<y;x+=1)g=h[x-f]||0,w[x+1]=h[x]-g+256&255;return w},i=function(h,f,g){var w,y=[],x=h.length;y[0]=2;for(var C=0;C<x;C+=1)w=g&&g[C]||0,y[C+1]=h[C]-w+256&255;return y},a=function(h,f,g){var w,y,x=[],C=h.length;x[0]=3;for(var I=0;I<C;I+=1)w=h[I-f]||0,y=g&&g[I]||0,x[I+1]=h[I]+256-(w+y>>>1)&255;return x},A=function(h,f,g){var w,y,x,C,I=[],N=h.length;I[0]=4;for(var k=0;k<N;k+=1)w=h[k-f]||0,y=g&&g[k]||0,x=g&&g[k-f]||0,C=d(w,y,x),I[k+1]=h[k]-C+256&255;return I},d=function(h,f,g){if(h===f&&f===g)return h;var w=Math.abs(f-g),y=Math.abs(h-g),x=Math.abs(h+f-g-g);return w<=y&&w<=x?h:y<=x?f:g},c=function(){return[o,s,i,a,A]},u=function(h){var f=h.map(function(g){return g.reduce(function(w,y){return w+Math.abs(y)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(h,f,g,w){var y,x,C,I,N,k,ee,G,H,Y,Be,M,O,J,re,he=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(C=new lN(h)).imgData,x=C.bits,y=C.colorSpace,N=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){H=(G=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,Be=new Uint8Array(H*C.colors),Y=new Uint8Array(H);var be,te=C.pixelBitlength-C.bits;for(J=0,re=0;J<H;J++){for(O=G[J],be=0;be<te;)Be[re++]=O>>>be&255,be+=C.bits;Y[J]=O>>>be&255}}if(C.bits===16){H=(G=new Uint32Array(C.decodePixels().buffer)).length,Be=new Uint8Array(H*(32/C.pixelBitlength)*C.colors),Y=new Uint8Array(H*(32/C.pixelBitlength)),M=C.colors>1,J=0,re=0;for(var Z=0;J<H;)O=G[J++],Be[re++]=O>>>0&255,M&&(Be[re++]=O>>>16&255,O=G[J++],Be[re++]=O>>>0&255),Y[Z++]=O>>>16&255;x=8}w!==n.image_compression.NONE&&e()?(h=t(Be,C.width*C.colors,C.colors,w),ee=t(Y,C.width,1,w)):(h=Be,ee=Y,he=void 0)}if(C.colorType===3&&(y=this.color_spaces.INDEXED,k=C.palette,C.transparency.indexed)){var Ae=C.transparency.indexed,we=0;for(J=0,H=Ae.length;J<H;++J)we+=Ae[J];if((we/=255)===H-1&&Ae.indexOf(0)!==-1)I=[Ae.indexOf(0)];else if(we!==H){for(G=C.decodePixels(),Y=new Uint8Array(G.length),J=0,H=G.length;J<H;J++)Y[J]=Ae[G[J]];ee=t(Y,C.width,1)}}var z=function(F){var E;switch(F){case n.image_compression.FAST:E=11;break;case n.image_compression.MEDIUM:E=13;break;case n.image_compression.SLOW:E=14;break;default:E=12}return E}(w);return he===this.decode.FLATE_DECODE&&(ie="/Predictor "+z+" "),ie+="/Colors "+N+" /BitsPerComponent "+x+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:g,data:h,index:f,filter:he,decodeParameters:ie,transparency:I,palette:k,sMask:ee,predictor:z,width:C.width,height:C.height,bitsPerComponent:x,colorSpace:y}}}})(Sr.API),function(n){n.processGIF89A=function(e,t,r,o){var s=new dN(e),i=s.width,a=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var d={data:A,width:i,height:a},c=new s0(100).encode(d,100);return n.processJPEG.call(this,c,t,r,o)},n.processGIF87A=n.processGIF89A}(Sr.API),Li.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Li.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Mn.log("bit decode error:"+t)}},Li.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var A=this.palette[s>>7-a&1];this.data[i+4*a]=A.blue,this.data[i+4*a+1]=A.green,this.data[i+4*a+2]=A.red,this.data[i+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Li.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<n;o++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,a=s>>4,A=15&s,d=this.palette[a];if(this.data[i]=d.blue,this.data[i+1]=d.green,this.data[i+2]=d.red,this.data[i+3]=255,2*o+1>=this.width)break;d=this.palette[A],this.data[i+4]=d.blue,this.data[i+4+1]=d.green,this.data[i+4+2]=d.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Li.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Li.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,d=s>>15?255:0,c=r*this.width*4+4*o;this.data[c]=A,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=d}this.pos+=n}},Li.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&t)/t*255|0,d=(i>>11)/e*255|0,c=o*this.width*4+4*s;this.data[c]=d,this.data[c+1]=A,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},Li.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*t;this.data[i]=s,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},Li.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=i}},Li.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,o){var s=new Li(e,!1),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new s0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),zb.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,o){var s=new zb(e),i=s.width,a=s.height,A={data:s.getData(),width:i,height:a},d=new s0(100).encode(A,100);return n.processJPEG.call(this,d,t,r,o)}}(Sr.API),Sr.API.processRGBA=function(n,e,t){for(var r=n.data,o=r.length,s=new Uint8Array(o/4*3),i=new Uint8Array(o/4),a=0,A=0,d=0;d<o;d+=4){var c=r[d],u=r[d+1],h=r[d+2],f=r[d+3];s[a++]=c,s[a++]=u,s[a++]=h,i[A++]=f}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Sr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nd=Sr.API,jf=Nd.getCharWidthsArray=function(n,e){var t,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,A=a.fof?a.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,c=d.fof?d.fof:1,u=e.doKerning!==!1,h=0,f=n.length,g=0,w=a[0]||A,y=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof o.metadata.widthOfString=="function"?y.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=u&&Ln(d[r])==="object"&&!isNaN(parseInt(d[r][g],10))?d[r][g]/c:0,y.push((a[r]||w)/A+h)),g=r;return y},bb=Nd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Nd.processArabic&&(n=Nd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,o)/t:jf.apply(this,arguments).reduce(function(s,i){return s+i},0)},_b=function(n,e,t,r){for(var o=[],s=0,i=n.length,a=0;s!==i&&a+e[s]<t;)a+=e[s],s++;o.push(n.slice(0,s));var A=s;for(a=0;s!==i;)a+e[s]>r&&(o.push(n.slice(A,s)),a=0,A=s),a+=e[s],s++;return A!==s&&o.push(n.slice(A,s)),o},xb=function(n,e,t){t||(t={});var r,o,s,i,a,A,d,c=[],u=[c],h=t.textIndent||0,f=0,g=0,w=n.split(" "),y=jf.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var x=Array(A).join(" "),C=[];w.map(function(N){(N=N.split(/\s*\n/)).length>1?C=C.concat(N.map(function(k,ee){return(ee&&k.length?`
`:"")+k})):C.push(N[0])}),w=C,A=bb.apply(this,[x,t])}for(s=0,i=w.length;s<i;s++){var I=0;if(r=w[s],A&&r[0]==`
`&&(r=r.substr(1),I=1),h+f+(g=(o=jf.apply(this,[r,t])).reduce(function(N,k){return N+k},0))>e||I){if(g>e){for(a=_b.apply(this,[r,o,e-(h+f),e]),c.push(a.shift()),c=[a.pop()];a.length;)u.push([a.shift()]);g=o.slice(r.length-(c[0]?c[0].length:0)).reduce(function(N,k){return N+k},0)}else c=[r];u.push(c),h=g+A,f=y}else c.push(r),h+=f+g,f=y}return d=A?function(N,k){return(k?x:"")+N.join(" ")}:function(N){return N.join(" ")},u.map(d)},Nd.splitTextToSize=function(n,e,t){var r,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var a,A,d=[];for(a=0,A=r.length;a<A;a++)d=d.concat(xb.apply(this,[r[a],i,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},o=0;o<e.length;o++)t[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(u){return"0x"+parseInt(u,10).toString(16)},i=n.__fontmetrics__.compress=function(u){var h,f,g,w,y=["{"];for(var x in u){if(h=u[x],isNaN(parseInt(x,10))?f="'"+x+"'":(x=parseInt(x,10),f=(f=s(x).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),w="-"):(g=s(h).slice(2),w=""),g=w+g.slice(0,-1)+r[g.slice(-1)];else{if(Ln(h)!=="object")throw new Error("Don't know what to do with value type "+Ln(h)+".");g=i(h)}y.push(f+g)}return y.push("}"),y.join("")},a=n.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,g,w,y={},x=1,C=y,I=[],N="",k="",ee=u.length-1,G=1;G<ee;G+=1)(w=u[G])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(w):w=="{"?(I.push([C,g]),C={},g=void 0):w=="}"?((f=I.pop())[0][f[1]]=C,g=void 0,C=f[0]):w=="-"?x=-1:g===void 0?t.hasOwnProperty(w)?(N+=t[w],g=parseInt(N,16)*x,x=1,N=""):N+=w:t.hasOwnProperty(w)?(k+=t[w],C[g]=parseInt(k,16)*x,x=1,g=void 0,k=""):k+=w;return y},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(u){var h=u.font,f=c.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(Sr.API),function(n){var e=function(t){for(var r=t.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=t.charCodeAt(s);return o};n.API.events.push(["addFont",function(t){var r=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(i,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Eu(a)),i.metadata=n.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(o,r)}}])}(Sr),function(n){function e(){return(Ir.canvg?Promise.resolve(Ir.canvg):ks(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Sr.API.addSvgAsImage=function(t,r,o,s,i,a,A,d){if(isNaN(r)||isNaN(o))throw Mn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Mn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(g){return g.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),r,o,s,i,A,d)})}}(),Sr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,t);return this},Sr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,o,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(i),A=[],d=0,c=0,u=0;function h(g,w){var y,x=!1;for(y=0;y<g.length;y+=1)g[y]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=a.length;for(u=0;u<f;u+=1)t[a[u]].value=t[a[u]].defaultValue,t[a[u]].explicitSet=!1}if(Ln(n)==="object"){for(o in n)if(s=n[o],h(a,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&h(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")A.push(String(s[d]-1));else if(s[d].length>1){for(c=0;c<s[d].length;c+=1)typeof s[d][c]!="number"&&(r=!1);r===!0&&A.push([s[d][0]-1,s[d][1]-1].join(" "))}t[o].value="["+A.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,w=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?w.push("/"+g+" /"+t[g].value):w.push("/"+g+" "+t[g].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+i.length+a.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+s+i+a+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Sr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,i){for(var a,A=i.metadata.Unicode.widths,d=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(a=i.metadata.characterToGlyph(s.charCodeAt(u)),i.metadata.glyIdsUsed.push(a),i.metadata.toUnicode[a]=s.charCodeAt(u),A.indexOf(a)==-1&&(A.push(a),A.push([parseInt(i.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(d[4-a.length],a)}return c.join("")},r=function(s){var i,a,A,d,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(a=Object.keys(s).sort(function(f,g){return f-g})).length;u<h;u++)i=a[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(d=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),A.push("<"+i+"><"+d+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",g=0;g<h.length;g++)f+=String.fromCharCode(h[g]);var w=d();c({data:f,addLength1:!0,objectId:w}),A("endobj");var y=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var x=d();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+qd(a.fontName)),A("/FontFile2 "+w+" 0 R"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/Flags "+a.metadata.flags),A("/StemV "+a.metadata.stemV),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A(">>"),A("endobj");var C=d();A("<<"),A("/Type /Font"),A("/BaseFont /"+qd(a.fontName)),A("/FontDescriptor "+x+" 0 R"),A("/W "+n.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+a.encoding+")"),A(">>"),A(">>"),A("endobj"),a.objectNumber=d(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+y+" 0 R"),A("/BaseFont /"+qd(a.fontName)),A("/Encoding /"+a.encoding),A("/DescendantFonts ["+C+" 0 R]"),A(">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var a=i.font,A=i.out,d=i.newObject,c=i.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",f=0;f<u.length;f++)h+=String.fromCharCode(u[f]);var g=d();c({data:h,addLength1:!0,objectId:g}),A("endobj");var w=d();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),A("endobj");var y=d();A("<<"),A("/Descent "+a.metadata.decender),A("/CapHeight "+a.metadata.capHeight),A("/StemV "+a.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+g+" 0 R"),A("/Flags 96"),A("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),A("/FontName /"+qd(a.fontName)),A("/ItalicAngle "+a.metadata.italicAngle),A("/Ascent "+a.metadata.ascender),A(">>"),A("endobj"),a.objectNumber=d();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+qd(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),A("endobj"),a.isAlreadyPutted=!0}})(s)}]);var o=function(s){var i,a=s.text||"",A=s.x,d=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,f=u.activeFontKey,g=u.fonts,w=f,y="",x=0,C="",I=g[w].encoding;if(g[w].encoding!=="Identity-H")return{text:a,x:A,y:d,options:c,mutex:u};for(C=a,w=f,Array.isArray(a)&&(C=a[0]),x=0;x<C.length;x+=1)g[w].metadata.hasOwnProperty("cmap")&&(i=g[w].metadata.cmap.unicode.codeMap[C[x].charCodeAt(0)]),i||C[x].charCodeAt(0)<256&&g[w].metadata.hasOwnProperty("Unicode")?y+=C[x]:y+="";var N="";return parseInt(w.slice(1))<14||I==="WinAnsiEncoding"?N=h(y,w).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(N=t(y,g[w])),u.isHex=!0,{text:N,x:A,y:d,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var i=s.text||"",a=[],A={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var d=0;for(d=0;d<i.length;d+=1)Array.isArray(i[d])&&i[d].length===3?a.push([o(Object.assign({},A,{text:i[d][0]})).text,i[d][1],i[d][2]]):a.push(o(Object.assign({},A,{text:i[d]})).text);s.text=a}else s.text=o(Object.assign({},A,{text:i})).text}])}(Sr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Sr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var o,s,i,a,A,d,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,I=0;this.__bidiEngine__={};var N=function(M){var O=M.charCodeAt(),J=O>>8,re=w[J];return re!==void 0?u[256*re+(255&O)]:J===252||J===253?"AL":x.test(J)?"L":J===8?"R":"N"},k=function(M){for(var O,J=0;J<M.length;J++){if((O=N(M.charAt(J)))==="L")return!1;if(O==="R")return!0}return!1},ee=function(M,O,J,re){var he,ie,be,te,Z=O[re];switch(Z){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(Z="AN");break;case"AL":C=!0,Z="R";break;case"WS":Z="N";break;case"CS":re<1||re+1>=O.length||(he=J[re-1])!=="EN"&&he!=="AN"||(ie=O[re+1])!=="EN"&&ie!=="AN"?Z="N":C&&(ie="AN"),Z=ie===he?ie:"N";break;case"ES":Z=(he=re>0?J[re-1]:"B")==="EN"&&re+1<O.length&&O[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&J[re-1]==="EN"){Z="EN";break}if(C){Z="N";break}for(be=re+1,te=O.length;be<te&&O[be]==="ET";)be++;Z=be<te&&O[be]==="EN"?"EN":"N";break;case"NSM":if(i&&!a){for(te=O.length,be=re+1;be<te&&O[be]==="NSM";)be++;if(be<te){var Ae=M[re],we=Ae>=1425&&Ae<=2303||Ae===64286;if(he=O[be],we&&(he==="R"||he==="AL")){Z="R";break}}}Z=re<1||(he=O[re-1])==="B"?"N":J[re-1];break;case"B":C=!1,o=!0,Z=I;break;case"S":s=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":Z="N"}return Z},G=function(M,O,J){var re=M.split("");return J&&H(re,J,{hiLevel:I}),re.reverse(),O&&O.reverse(),re.join("")},H=function(M,O,J){var re,he,ie,be,te,Z=-1,Ae=M.length,we=0,z=[],F=I?f:h,E=[];for(C=!1,o=!1,s=!1,he=0;he<Ae;he++)E[he]=N(M[he]);for(ie=0;ie<Ae;ie++){if(te=we,z[ie]=ee(M,E,z,ie),re=240&(we=F[te][g[z[ie]]]),we&=15,O[ie]=be=F[we][5],re>0)if(re===16){for(he=Z;he<ie;he++)O[he]=1;Z=-1}else Z=-1;if(F[we][6])Z===-1&&(Z=ie);else if(Z>-1){for(he=Z;he<ie;he++)O[he]=be;Z=-1}E[ie]==="B"&&(O[ie]=0),J.hiLevel|=be}s&&function(U,P,T){for(var R=0;R<T;R++)if(U[R]==="S"){P[R]=I;for(var $=R-1;$>=0&&U[$]==="WS";$--)P[$]=I}}(E,O,Ae)},Y=function(M,O,J,re,he){if(!(he.hiLevel<M)){if(M===1&&I===1&&!o)return O.reverse(),void(J&&J.reverse());for(var ie,be,te,Z,Ae=O.length,we=0;we<Ae;){if(re[we]>=M){for(te=we+1;te<Ae&&re[te]>=M;)te++;for(Z=we,be=te-1;Z<be;Z++,be--)ie=O[Z],O[Z]=O[be],O[be]=ie,J&&(ie=J[Z],J[Z]=J[be],J[be]=ie);we=te}we++}}},Be=function(M,O,J){var re=M.split(""),he={hiLevel:I};return J||(J=[]),H(re,J,he),function(ie,be,te){if(te.hiLevel!==0&&c)for(var Z,Ae=0;Ae<ie.length;Ae++)be[Ae]===1&&(Z=y.indexOf(ie[Ae]))>=0&&(ie[Ae]=y[Z+1])}(re,J,he),Y(2,re,O,J,he),Y(1,re,O,J,he),re.join("")};return this.__bidiEngine__.doBidiReorder=function(M,O,J){if(function(he,ie){if(ie)for(var be=0;be<he.length;be++)ie[be]=be;a===void 0&&(a=k(he)),d===void 0&&(d=k(he))}(M,O),i||!A||d)if(i&&A&&a^d)I=a?1:0,M=G(M,O,J);else if(!i&&A&&d)I=a?1:0,M=Be(M,O,J),M=G(M,O);else if(!i||a||A||d){if(i&&!A&&a^d)M=G(M,O),a?(I=0,M=Be(M,O,J)):(I=1,M=Be(M,O,J),M=G(M,O));else if(i&&a&&!A&&d)I=1,M=Be(M,O,J),M=G(M,O);else if(!i&&!A&&a^d){var re=c;a?(I=1,M=Be(M,O,J),I=0,c=!1,M=Be(M,O,J),c=re):(I=0,M=Be(M,O,J),M=G(M,O),I=1,c=!1,M=Be(M,O,J),c=re,M=G(M,O))}}else I=0,M=Be(M,O,J);else I=a?1:0,M=Be(M,O,J);return M},this.__bidiEngine__.setOptions=function(M){M&&(i=M.isInputVisual,A=M.isOutputVisual,a=M.isInputRtl,d=M.isOutputRtl,c=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var o=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(i=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?i.push([t.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):i.push([t.doBidiReorder(o[a])]);r.text=i}else r.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])}(Sr),Sr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new cl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new zN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new cN(this.contents),this.head=new hN(this),this.name=new mN(this),this.cmap=new uz(this),this.toUnicode={},this.hhea=new fN(this),this.maxp=new wN(this),this.hmtx=new yN(this),this.post=new gN(this),this.os2=new pN(this),this.loca=new BN(this),this.glyf=new bN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,a,A,d;for(d=[],i=0,a=(A=this.bbox).length;i<a;i++)e=A[i],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var o,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)o=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/t)||0;return i*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Xi,cl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,o;for(o=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,o,s,i,a,A;return e=this.readByte(),t=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*o+16777216*s+65536*i+256*a+A},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),cN=function(){var n;function e(t){var r,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,o,s,i,a,A,d,c,u,h,f,g,w;for(w in f=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(f)/A),i=Math.floor(u/A),c=16*f-u,(o=new cl).writeInt(this.scalarType),o.writeShort(f),o.writeShort(u),o.writeShort(i),o.writeShort(c),s=16*f,d=o.pos+s,a=null,g=[],t)for(h=t[w],o.writeString(w),o.writeInt(n(h)),o.writeInt(d),o.writeInt(h.length),g=g.concat(h),w==="head"&&(a=d),d+=h.length;d%4;)g.push(0),d++;return o.write(g),r=2981146554-n(o.data),o.pos=a+8,o.writeUInt32(r),o.data},n=function(t){var r,o,s,i;for(t=hz.call(t);t.length%4;)t.push(0);for(s=new cl(t),o=0,r=0,i=t.length;r<i;r=r+=4)o+=s.readUInt32();return 4294967295&o},e}(),uN={}.hasOwnProperty,Ea=function(n,e){for(var t in e)uN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Xi=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var hN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new cl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Cb=function(){function n(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),e.pos+=2,w=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),d=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),c=function(){var N,k;for(k=[],A=N=0;0<=h?N<h:N>h;A=0<=h?++N:--N)k.push(e.readUInt16());return k}(),o=(this.length-e.pos+this.offset)/2,a=function(){var N,k;for(k=[],A=N=0;0<=o?N<o:N>o;A=0<=o?++N:--N)k.push(e.readUInt16());return k}(),A=x=0,I=s.length;x<I;A=++x)for(y=s[A],r=C=g=w[A];g<=y?C<=y:C>=y;r=g<=y?++C:--C)c[A]===0?i=r+d[A]:(i=a[c[A]/2+(r-g)-(h-A)]||0)!==0&&(i+=d[A]),this.codeMap[r]=65535&i}e.pos=u}return n.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x,C,I,N,k,ee,G,H,Y,Be,M,O,J,re,he,ie,be,te,Z,Ae,we,z,F,E,U,P,T,R,$,j,ae,Ee;switch(re=new cl,i=Object.keys(e).sort(function(_e,Le){return _e-Le}),t){case"macroman":for(w=0,y=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),C={0:0},s={},he=0,Z=i.length;he<Z;he++)C[$=e[o=i[he]]]==null&&(C[$]=++w),s[o]={old:e[o],new:C[e[o]]},y[o]=C[e[o]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(y),{charMap:s,subtable:re.data,maxGlyphID:w+1};case"unicode":for(O=[],u=[],I=0,C={},r={},x=d=null,ie=0,Ae=i.length;ie<Ae;ie++)C[k=e[o=i[ie]]]==null&&(C[k]=++I),r[o]={old:k,new:C[k]},a=C[k]-o,x!=null&&a===d||(x&&u.push(x),O.push(o),d=a),x=o;for(x&&u.push(x),u.push(65535),O.push(65535),Be=2*(Y=O.length),H=2*Math.pow(Math.log(Y)/Math.LN2,2),h=Math.log(H/2)/Math.LN2,G=2*Y-H,A=[],ee=[],f=[],g=be=0,we=O.length;be<we;g=++be){if(M=O[g],c=u[g],M===65535){A.push(0),ee.push(0);break}if(M-(J=r[M].new)>=32768)for(A.push(0),ee.push(2*(f.length+Y-g)),o=te=M;M<=c?te<=c:te>=c;o=M<=c?++te:--te)f.push(r[o].new);else A.push(J-M),ee.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*Y+2*f.length),re.writeUInt16(0),re.writeUInt16(Be),re.writeUInt16(H),re.writeUInt16(h),re.writeUInt16(G),T=0,z=u.length;T<z;T++)o=u[T],re.writeUInt16(o);for(re.writeUInt16(0),R=0,F=O.length;R<F;R++)o=O[R],re.writeUInt16(o);for(j=0,E=A.length;j<E;j++)a=A[j],re.writeUInt16(a);for(ae=0,U=ee.length;ae<U;ae++)N=ee[ae],re.writeUInt16(N);for(Ee=0,P=f.length;Ee<P;Ee++)w=f[Ee],re.writeUInt16(w);return{charMap:r,subtable:re.data,maxGlyphID:I+1}}},n}(),uz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,o,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r=new Cb(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var o,s;return r==null&&(r="macroman"),o=Cb.encode(t,r),(s=new cl).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),fN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),pN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(t.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(t.readInt());return o}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(t.readInt());return o}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),gN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="post",e.prototype.parse=function(t){var r,o,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(o=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return o=t.readUInt16(),this.offsets=t.read(o);case 196608:break;case 262144:return this.map=(function(){var a,A,d;for(d=[],i=a=0,A=this.file.maxp.numGlyphs;0<=A?a<A:a>A;i=0<=A?++a:--a)d.push(t.readUInt32());return d}).call(this)}},e}(),vN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},mN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="name",e.prototype.parse=function(t){var r,o,s,i,a,A,d,c,u,h,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),A=t.readShort(),o=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)o.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=u=0,h=o.length;u<h;i=++u)s=o[i],t.pos=s.offset,c=t.readString(s.length),a=new vN(c,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),wN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),yN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,o,s,i,a,A,d;for(t.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.metrics).length;c<u;c++)i=h[c],f.push(i.advance);return f}).call(this),o=this.widths[this.widths.length-1],d=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)d.push(this.widths.push(o));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),hz=[].slice,bN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,o,s,i,a,A,d,c,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,o=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+o,a=(A=new cl(r.read(s))).readShort(),c=A.readShort(),h=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[t]=a===-1?new xN(A,c,h,d,u):new _N(A,a,c,h,d,u),this.cache[t]))},e.prototype.encode=function(t,r,o){var s,i,a,A,d;for(a=[],i=[],A=0,d=r.length;A<d;A++)s=t[r[A]],i.push(a.length),s&&(a=a.concat(s.encode(o)));return i.push(a.length),{table:a,offsets:i}},e}(),_N=function(){function n(e,t,r,o,s,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=o,this.xMax=s,this.yMax=i,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),xN=function(){function n(e,t,r,o,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new cl(hz.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),BN=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Ea(e,Xi),e.prototype.tag="loca",e.prototype.parse=function(t){var r,o;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],o=0,s=this.length;o<s;o+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var o=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<o.length;++a)if(o[a]=s,i<r.length&&r[i]==a){++i,o[a]=s;var A=this.offsets[a],d=this.offsets[a+1]-A;d>0&&(s+=d)}for(var c=new Array(4*o.length),u=0;u<o.length;++u)c[4*u+3]=255&o[u],c[4*u+2]=(65280&o[u])>>8,c[4*u+1]=(16711680&o[u])>>16,c[4*u]=(4278190080&o[u])>>24;return c},e}(),zN=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=o[r];return e},n.prototype.glyphsFor=function(e){var t,r,o,s,i,a,A;for(o={},i=0,a=e.length;i<a;i++)o[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(r=o[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))r=A[s],o[s]=r;return o},n.prototype.encode=function(e,t){var r,o,s,i,a,A,d,c,u,h,f,g,w,y,x;for(o in r=uz.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},x=r.charMap)f[(A=x[o]).old]=A.new;for(g in h=r.maxGlyphID,i)g in f||(f[g]=h++);return c=function(C){var I,N;for(I in N={},C)N[C[I]]=I;return N}(f),u=Object.keys(c).sort(function(C,I){return C-I}),w=function(){var C,I,N;for(N=[],C=0,I=u.length;C<I;C++)a=u[C],N.push(c[a]);return N}(),s=this.font.glyf.encode(i,w,f),d=this.font.loca.encode(s.offsets,w),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n}();Sr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,o,s,i;if(Array.isArray(t))return"["+function(){var a,A,d;for(d=[],a=0,A=t.length;a<A;a++)r=t[a],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)i=t[o],s.push("/"+o+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+t},e}();var CN=W('<tr><td class="odz-text-xs"></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),SN=W('<tr><td></td><td colspan="5" class="odz-text-xs"> <!> <!></td><td> </td></tr>'),EN=W('<tr><td></td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td class="odz-text-xs"> </td><td> </td></tr>'),FN=W("<!> <!> <!>",1),IN=W('<tr><td></td><td class="odz-text-xs">[]  </td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td class="odz-text-xs">-</td><td> </td></tr>'),UN=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-p-8 odz-print-area"><h1 class="odz-text-center odz-text-3xl odz-font-bold odz-mb-8"></h1> <table class="odz-table odz-w-full odz-border odz-border-gray-400"><tbody><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200 odz-w-32"> </td><td>101-86-83287</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td>()</td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"> </td><td colspan="3">  22 19-15</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td></td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td></td><td class="odz-font-bold odz-bg-base-200"></td><td>02-6499-2267</td></tr><tr class="odz-border-gray-400"><td class="odz-font-bold odz-bg-base-200"></td><td colspan="3"><div class="odz-flex odz-justify-between"><span></span> <span></span></div></td></tr></tbody></table> <div class="odz-my-4"><div class="odz-font-bold">  (+)</div> <div class="odz-text-right"> </div></div> <table class="odz-table odz-table-bordered odz-w-full"><thead><tr class="odz-bg-base-200"><th></th><th>/</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><!><!><tr><td colspan="3" class="odz-text-center odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"></td><td class="odz-font-bold"> </td><td class="odz-font-bold"> </td></tr></tbody></table> <div class="odz-mt-4 odz-p-4 odz-bg-base-200 odz-rounded"><div class="odz-font-bold odz-mb-2"></div> <ul class="odz-list-disc odz-list-inside odz-text-sm"><li>   20 (   )</li> <li>      .</li> <li>   .</li> <li>   .</li> <li>       ,  .</li></ul></div> <div class="odz-flex odz-justify-end odz-gap-2 odz-mt-6 print:odz-hidden"><button class="odz-btn odz-btn-primary"></button> <button class="odz-btn odz-btn-secondary">PDF </button> <button class="odz-btn"></button></div></div></dialog>');function QN(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t);let s=gt(e,"isOpen",12);function i(){s(!1)}function a(){window.print()}console.log("paper estimateStore",o());const A=new Date,d=`${A.getFullYear()} ${String(A.getMonth()+1).padStart(2,"0")} ${String(A.getDate()).padStart(2,"0")}`;async function c(){const Ae=document.querySelector(".odz-print-area");if(Ae)try{const we=Ae.querySelector(".print\\:odz-hidden");let z="";we&&(z=we.style.display,we.style.display="none");const F=Ae.scrollHeight,E=Ae.scrollWidth,U=Ae.scrollTop;Ae.scrollTop=0;const P=await CD(Ae,{useCORS:!0,scale:2,x:0,y:0,width:E,height:F,backgroundColor:"#ffffff",logging:!1,allowTaint:!0,windowHeight:F});Ae.scrollTop=U,we&&(we.style.display=z);const T=P.toDataURL("image/png",1),R=new Sr({orientation:"portrait",unit:"mm",format:"a4"}),$=R.internal.pageSize.getWidth(),j=R.internal.pageSize.getHeight(),ae=10,Ee=$-ae*2,_e=j-ae*2,Le=P.height/P.width;let D=Ee*Le;if(D>_e){const oe=Math.ceil(D/_e),ve=P.height/D,le=_e*ve;for(let ue=0;ue<oe;ue++){ue>0&&R.addPage();const Ie=-ue*le/ve;R.addImage(T,"PNG",ae,Ie+ae,Ee,P.height*(Ee/P.width))}}else R.addImage(T,"PNG",ae,ae,Ee,D);R.save(".pdf")}catch(we){console.error("PDF    :",we)}}an();var u=UN(),h=m(u),f=B(m(h),2),g=m(f),w=m(g),y=B(m(w),3);y.textContent=d;var x=B(f,2),C=B(m(x),2),I=m(C),N=B(x,2),k=B(m(N)),ee=m(k);er(ee,1,()=>o().products,vr,(Ae,we,z)=>{var F=FN(),E=ut(F);er(E,1,()=>l(we).variants,vr,($,j,ae)=>{var Ee=CN();const _e=at(()=>l(j).prices[0].amount),Le=at(()=>l(we).variants.reduce((de,ye)=>de+(ye.quantity||0),0)),X=at(()=>{var de;return(de=l(we).discountInfo)!=null&&de.hasDiscount?(l(we).discountInfo.originalAmount-l(we).discountInfo.discountAmount)/l(Le):l(_e)}),D=at(()=>l(X)*l(j).quantity);var oe=m(Ee);oe.textContent=`${z+1}-${ae+1}`;var ve=B(oe),le=m(ve),ue=B(ve),Ie=m(ue),Ne=B(ue),ze=m(Ne),Ce=B(Ne),pe=m(Ce),Oe=B(Ce),ke=m(Oe),me=B(Oe),q=m(me);De((de,ye)=>{Qe(le,l(we).product.title),Qe(Ie,l(j).title||""),Qe(ze,l(j).quantity),Qe(pe,de),Qe(ke,ye),Qe(q,ye)},[()=>Er(l(X)),()=>Er(l(D))],at),Q($,Ee)});var U=B(E,2);{var P=$=>{var j=Lt(),ae=ut(j);er(ae,1,()=>l(we).prints,vr,(Ee,_e)=>{var Le=SN(),X=B(m(Le)),D=m(X),oe=B(D);{var ve=ze=>{var Ce=zn();De(pe=>Qe(Ce,`- ${pe??""}`),[()=>l(_e).parentTemplates.map(pe=>pe.name).join(" > ")],at),Q(ze,Ce)};xe(oe,ze=>{l(_e).parentTemplates&&ze(ve)})}var le=B(oe,2);{var ue=ze=>{var Ce=zn();De(()=>Qe(Ce,`- ${l(_e).colors.length??""}`)),Q(ze,Ce)};xe(le,ze=>{l(_e).colors&&ze(ue)})}var Ie=B(X),Ne=m(Ie);De(ze=>{Qe(D,`: ${l(_e).title??""} `),Qe(Ne,ze)},[()=>Er(l(_e).price||0)],at),Q(Ee,Le)}),Q($,j)};xe(U,$=>{l(we).prints&&l(we).prints.length>0&&$(P)})}var T=B(U,2);{var R=$=>{var j=Lt(),ae=ut(j);er(ae,1,()=>Object.entries(l(we).addons),vr,(Ee,_e)=>{let Le=()=>l(_e)[1];var X=Lt();const D=at(()=>l(we).addonProductsMap[Le().productId]),oe=at(()=>{var ue,Ie;return(Ie=(ue=l(D))==null?void 0:ue.variants)==null?void 0:Ie.find(Ne=>Ne.id===Le().variantId)});var ve=ut(X);{var le=ue=>{var Ie=EN(),Ne=B(m(Ie)),ze=m(Ne),Ce=B(Ne),pe=m(Ce),Oe=B(Ce),ke=m(Oe),me=B(Oe),q=m(me),de=B(me),ye=m(de),Fe=B(de),Pe=m(Fe);De((nt,qe)=>{Qe(ze,`[] ${l(D).title??""}`),Qe(pe,l(oe).title||""),Qe(ke,l(we).quantity),Qe(q,nt),Qe(ye,qe),Qe(Pe,qe)},[()=>Er(l(oe).prices[0].amount),()=>Er(l(oe).prices[0].amount*l(we).quantity)],at),Q(ue,Ie)};xe(ve,ue=>{l(D)&&l(oe)&&ue(le)})}Q(Ee,X)}),Q($,j)};xe(T,$=>{l(we).addons&&l(we).addonProductsMap&&Object.keys(l(we).addons).length>0&&$(R)})}Q(Ae,F)});var G=B(ee);{var H=Ae=>{var we=IN(),z=B(m(we),6),F=m(z);De(E=>Qe(F,E),[()=>Er(o().totalAdditionalAmount)],at),Q(Ae,we)};xe(G,Ae=>{o().totalAdditionalAmount>0&&Ae(H)})}var Y=B(G),Be=B(m(Y)),M=m(Be),O=B(Be,2),J=m(O),re=B(O),he=m(re),ie=B(N,4),be=m(ie),te=B(be,2),Z=B(te,2);De((Ae,we)=>{Qe(I,` (  ${Ae??""} )`),Qe(M,`${o().totalQuantity??""}`),Qe(J,we),Qe(he,Ae)},[()=>Er(o().totalAmount),()=>Er(o().totalProductAmount+o().totalPrintAmount+o().totalAddonAmount+o().totalAdditionalAmount)],at),tt("click",be,a),tt("click",te,c),tt("click",Z,i),Q(n,u),sn(),r()}var TN=W("<!> <button> </button>",1),LN=W("<button> </button>"),PN=W('<div class="odz-flex odz-flex-wrap odz-gap-1.5"></div>'),kN=W('<div class="odz-flex odz-justify-center odz-items-center odz-h-32"><div class="odz-loading odz-loading-spinner odz-loading-md"></div></div>'),ON=W('<div class="odz-text-error odz-text-center odz-py-4"> </div>'),DN=W('<div class="odz-text-center odz-py-4 odz-text-gray-500">  .</div>'),NN=W('<img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0">'),MN=W('<div class="odz-w-12 odz-h-12 odz-bg-gray-100 odz-rounded odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><span class="odz-text-gray-400 odz-text-xs"></span></div>'),HN=W('<div class="odz-flex odz-items-center odz-gap-3 odz-p-2 odz-bg-base-100 odz-rounded-lg odz-border odz-border-gray-100 hover:odz-bg-gray-50"><!> <div class="odz-flex-1 odz-min-w-0"><h3 class="odz-text-sm odz-font-medium odz-truncate"> </h3> <div class="odz-text-xs odz-text-gray-500"><!></div></div> <button class="odz-btn odz-btn-primary odz-btn-xs odz-flex-shrink-0"></button></div>'),jN=W('<div class="odz-flex odz-justify-center odz-items-center odz-py-3"><div class="odz-loading odz-loading-spinner odz-loading-sm"></div></div>'),RN=W('<div class="odz-flex odz-flex-col odz-gap-2"></div> <!>',1),$N=W('<div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-50 odz-flex odz-items-center odz-justify-center odz-z-50"><div class="odz-bg-white odz-rounded-lg odz-w-full odz-max-w-2xl odz-mx-4 odz-max-h-[80vh] odz-overflow-hidden odz-flex odz-flex-col"><div class="odz-p-4 odz-border-b odz-flex odz-justify-between odz-items-center"><h2 class="odz-text-lg odz-font-bold"> </h2> <button class="odz-btn odz-btn-ghost odz-btn-sm"><!></button></div> <div class="odz-p-3 odz-border-b odz-space-y-3"><div class="odz-relative"><input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-input-sm"> <!></div> <div class="odz-flex odz-items-center odz-gap-1.5 odz-text-xs odz-text-gray-500"><button></button> <!></div> <!></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-3"><!></div></div></div>');function Y1(n,e){on(e,!1);const t=Se();let r=gt(e,"addProduct",8),o=gt(e,"isProductSearchOpen",12),s=gt(e,"productType",8,""),i=gt(e,"excludeNoProcess",8,!1),a=Se(""),A=Se([]),d=Se([]),c=Se(""),u=Se([]),h=Se(!1),f=Se(null),g,w=!0,y=1;const x=20;let C=Se();Xn(async()=>{document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(ae=>{ae instanceof HTMLElement&&(ae.scrollTop=0)});try{b(d,await e5()),await I()}catch(ae){console.error("     :",ae)}}),Xo(()=>{document.body.style.overflow=""});async function I(){b(h,!0),b(f,null);try{const{products:j,total:ae}=await qf("",void 0,1,x,s(),i());b(A,j),w=l(A).length<ae}catch(j){console.error("    :",j),b(f,"    .")}finally{b(h,!1)}}async function N(){if(!(l(h)||!w)){b(h,!0),y++;try{const{products:j,total:ae}=await qf(l(a),l(c),y,x,s(),i());j.length>0?(b(A,[...l(A),...j]),w=l(A).length<ae):w=!1}catch(j){console.error("     :",j),b(f,"    .")}finally{b(h,!1)}}}async function k(){if(!l(a).trim()&&!l(c)){await I();return}b(h,!0),b(f,null),y=1,b(A,[]);try{const{products:j,total:ae}=await qf(l(a),l(c),1,x,s(),i());b(A,j),w=l(A).length<ae}catch(j){console.error("    :",j),b(f,"    .")}finally{b(h,!1)}}function ee(){clearTimeout(g),g=setTimeout(k,300)}function G(j){b(c,j.id),b(u,[...l(u),j]),k()}function H(j){b(u,l(u).slice(0,j+1)),b(c,l(u)[j].id),k()}function Y(j){r()(j.id)}function Be(){o(!1),b(a,""),b(c,""),b(u,[]),b(A,[]),b(f,null),y=1,w=!0}function M(){if(!l(C))return;const{scrollTop:j,scrollHeight:ae,clientHeight:Ee}=l(C);ae-j<=Ee*1.5&&N()}Jt(()=>(l(u),l(d)),()=>{var j;b(t,l(u).length===0?l(d):((j=l(u)[l(u).length-1])==null?void 0:j.children)||[])}),mo(),an();var O=$N(),J=m(O),re=m(J),he=B(m(re),2),ie=m(he);Yl(ie,{class:"odz-w-5 odz-h-5"});var be=B(re,2),te=m(be),Z=m(te),Ae=B(Z,2);vp(Ae,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var we=B(te,2),z=m(we),F=B(z,2);er(F,1,()=>l(u),vr,(j,ae,Ee)=>{var _e=TN(),Le=ut(_e);sE(Le,{class:"odz-w-3 odz-h-3"});var X=B(Le,2),D=m(X);De(()=>{Lr(X,`hover:odz-text-primary odz-transition-colors ${(Ee===l(u).length-1?"odz-text-gray-900 odz-font-medium":"")??""}`),Qe(D,l(ae).name)}),tt("click",X,()=>H(Ee)),Q(j,_e)});var E=B(we,2);{var U=j=>{var ae=PN();er(ae,5,()=>l(t),vr,(Ee,_e)=>{var Le=LN(),X=m(Le);De(()=>{Lr(Le,`odz-px-3 odz-py-1 odz-text-xs odz-rounded-full odz-transition-all odz-duration-200
                ${(l(c)===l(_e).id?"odz-bg-primary odz-text-primary-content odz-shadow-sm":"odz-bg-gray-100 odz-text-gray-600 hover:odz-bg-gray-200 hover:odz-text-gray-800")??""}`),Qe(X,l(_e).name)}),tt("click",Le,()=>G(l(_e))),Q(Ee,Le)}),Q(j,ae)};xe(E,j=>{l(t).length>0&&j(U)})}var P=B(be,2),T=m(P);{var R=j=>{var ae=kN();Q(j,ae)},$=j=>{var ae=Lt(),Ee=ut(ae);{var _e=X=>{var D=ON(),oe=m(D);De(()=>Qe(oe,l(f))),Q(X,D)},Le=X=>{var D=Lt(),oe=ut(D);{var ve=ue=>{var Ie=DN();Q(ue,Ie)},le=ue=>{var Ie=RN(),Ne=ut(Ie);er(Ne,5,()=>l(A),vr,(pe,Oe)=>{var ke=HN(),me=m(ke);{var q=At=>{var Ve=NN();De(()=>{lr(Ve,"src",l(Oe).thumbnail),lr(Ve,"alt",l(Oe).title)}),Q(At,Ve)},de=At=>{var Ve=MN();Q(At,Ve)};xe(me,At=>{l(Oe).thumbnail?At(q):At(de,!1)})}var ye=B(me,2),Fe=m(ye),Pe=m(Fe),nt=B(Fe,2),qe=m(nt);{var je=At=>{var Ve=Lt(),Ye=ut(Ve);{var ot=Ge=>{var it=zn();De(zt=>Qe(it,`${zt??""}`),[()=>Er(l(Oe).variants[0].prices[0].amount)],at),Q(Ge,it)},ht=Ge=>{var it=zn();De(zt=>Qe(it,`${zt??""} ~`),[()=>Er(Math.min(...l(Oe).variants.map(zt=>zt.prices[0].amount)))],at),Q(Ge,it)};xe(Ye,Ge=>{l(Oe).variants.length===1?Ge(ot):Ge(ht,!1)})}Q(At,Ve)},fe=At=>{var Ve=zn("  ");Q(At,Ve)};xe(qe,At=>{l(Oe).variants&&l(Oe).variants.length>0?At(je):At(fe,!1)})}var Me=B(ye,2);De(()=>Qe(Pe,l(Oe).title)),tt("click",Me,()=>Y(l(Oe))),Q(pe,ke)});var ze=B(Ne,2);{var Ce=pe=>{var Oe=jN();Q(pe,Oe)};xe(ze,pe=>{l(h)&&l(A).length>0&&pe(Ce)})}Q(ue,Ie)};xe(oe,ue=>{l(A).length===0&&(l(a)||l(c))?ue(ve):ue(le,!1)},!0)}Q(X,D)};xe(Ee,X=>{l(f)?X(_e):X(Le,!1)},!0)}Q(j,ae)};xe(T,j=>{l(h)&&l(A).length===0?j(R):j($,!1)})}Go(P,j=>b(C,j),()=>l(C)),De(()=>Lr(z,`hover:odz-text-primary odz-transition-colors ${(l(u).length===0?"odz-text-gray-900 odz-font-medium":"")??""}`)),tt("click",he,Be),Fr(Z,()=>l(a),j=>b(a,j)),tt("input",Z,ee),tt("click",z,()=>{b(u,[]),b(c,""),k()}),tt("scroll",P,M),Q(n,O),sn()}var qN=W('<div class="odz-text-sm odz-text-gray-600 odz-mt-1"> </div>'),KN=W('<div class="odz-flex odz-items-center odz-justify-between odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><div class="odz-flex-1"><div class="odz-font-semibold odz-text-gray-800"> </div> <!></div> <div class="odz-text-right"><div class="odz-font-bold odz-text-lg odz-text-gray-800"> </div></div></div>'),VN=W('<div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><h2 class="odz-text-lg odz-font-bold odz-mb-4 odz-flex odz-items-center odz-gap-2"></h2> <div class="odz-space-y-3"></div> <div class="odz-divider odz-my-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-p-3 odz-bg-white odz-rounded-lg odz-border odz-border-gray-200"><span class="odz-font-bold odz-text-lg odz-text-gray-800"> </span> <span class="odz-font-bold odz-text-xl odz-text-gray-800"> </span></div></div></div>');function GN(n,e){on(e,!1);const t=Se();let r=gt(e,"additionalCosts",24,()=>[]);gt(e,"isEditable",8,!0),Jt(()=>Vn(r()),()=>{b(t,r().reduce((a,A)=>a+Number(A.amount),0))}),mo(),an();var o=Lt(),s=ut(o);{var i=a=>{var A=VN(),d=m(A),c=B(m(d),2);er(c,5,r,g=>g.id,(g,w)=>{var y=KN(),x=m(y),C=m(x),I=m(C),N=B(C,2);{var k=Y=>{var Be=qN(),M=m(Be);De(()=>Qe(M,l(w).description)),Q(Y,Be)};xe(N,Y=>{l(w).description&&Y(k)})}var ee=B(x,2),G=m(ee),H=m(G);De(Y=>{Qe(I,l(w).name),Qe(H,`+${Y??""}`)},[()=>Er(Number(l(w).amount))],at),Q(g,y)});var u=B(c,4),h=B(m(u),2),f=m(h);De(g=>Qe(f,`+${g??""}`),[()=>Er(l(t))],at),Q(a,A)};xe(s,a=>{r().length>0&&a(i)})}Q(n,o),sn()}var WN=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-bg-gray-50 odz-rounded-lg"><div class="odz-text-6xl odz-mb-4"></div> <h3 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-6">      </p> <button class="odz-btn odz-btn-primary odz-gap-2"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </button></div>'),XN=W("<div><!></div>"),YN=W("<div><!></div>"),JN=W("<div></div>"),ZN=W('<div class="odz-mt-5"><div role="tablist" class="odz-tabs odz-tabs-boxed"><button role="tab"></button> <button role="tab"></button></div></div> <!>',1),eM=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-text-lg odz-font-medium odz-mt-4">   ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2"> ,  ,    .</p></div>'),tM=W('<button class="odz-btn odz-btn-primary"><!>  </button>'),rM=W('<div><h2 class="odz-text-2xl odz-font-bold odz-mb-4"> </h2> <!> <div class="odz-flex odz-justify-end odz-mt-4"><!></div> <!></div>'),nM=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-md odz-text-primary"></div> <p class="odz-text-base odz-font-medium odz-mt-3">   ...</p></div>'),oM=W('<span class="odz-badge odz-badge-warning"> </span>'),sM=W('<div class="odz-flex odz-items-center odz-gap-2"><span> </span> <!></div>'),iM=W('<div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="password-input"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input id="password-input" type="password" class="odz-input odz-input-bordered odz-w-full" placeholder="     "> <label class="odz-label" for="password-input"><span class="odz-label-text-alt">     .  !</span></label></div>'),aM=W(`<div class="odz-flex odz-justify-between odz-items-center odz-mb-4"><h2 class="odz-text-lg odz-font-bold odz-flex odz-items-center odz-gap-1">  <div class="odz-flex odz-items-center odz-gap-1"><!> <span class="odz-text-xs odz-text-gray-500 odz-ml-1">  </span></div></h2> <!></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4"><div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="   . ) ' 000  '" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <input type="text" placeholder="  " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="010" class="odz-input odz-input-bordered odz-w-1/4" maxlength="3"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <input type="text" placeholder="0000" class="odz-input odz-input-bordered odz-w-1/4" maxlength="4"> <span class="odz-text-xs odz-self-center">   ,     .</span></div></div></div> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="address-section"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!>  </span></label> <div class="odz-flex odz-gap-2 odz-mb-2"><input type="text" id="postcode" placeholder="" readonly="" class="odz-input odz-input-bordered odz-w-1/4"> <button class="odz-btn odz-btn-secondary"></button> <button class="odz-btn odz-btn-outline"> </button></div> <input type="text" id="address1" placeholder=" " class="odz-input odz-input-bordered odz-w-full odz-mb-2"> <input type="text" id="address2" placeholder=" " class="odz-input odz-input-bordered odz-w-full"> <p class="odz-text-xs odz-mt-1">       .</p></div> <div class="odz-form-control odz-w-full odz-mt-4"><div class="odz-flex odz-gap-4 odz-items-center"><button class="odz-btn odz-btn-outline odz-flex-1"></button> <p class="odz-text-xs">      .</p></div></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-4 odz-mt-4"><div class="odz-form-control odz-w-full"><label class="odz-label" for="shipping-method"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"><!> </span></label> <select id="shipping-method" class="odz-select odz-select-bordered odz-w-full"><option disabled selected>==   ==</option><option></option><option></option><option></option></select></div> <div class="odz-form-control odz-w-full"><label class="odz-label" for="pref-delivery-date"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"></span></label> <input id="pref-delivery-date" type="date" class="odz-input odz-input-bordered odz-w-full"> <label class="odz-label" for="pref-delivery-date-note"><span class="odz-label-text-alt">        .</span></label></div></div> <!> <div class="odz-form-control odz-w-full odz-mt-4"><label class="odz-label" for="request-notes"><span class="odz-label-text odz-font-medium odz-flex odz-items-center odz-gap-1"> </span></label> <textarea id="request-notes" class="odz-textarea odz-textarea-bordered odz-h-24 odz-w-full" placeholder="   ."></textarea></div> <div class="odz-flex odz-justify-end odz-gap-3 odz-mt-6"><button type="button" class="odz-btn odz-btn-outline odz-btn-secondary"><!>  </button> <button class="odz-btn odz-w-full odz-btn-primary md:odz-w-auto disabled:bg-primary/50 disabled:odz-bg-secondary/20"><!> <!></button></div>`,1),AM=W('<!> <!> <div class="odz-card odz-bg-base-100 odz-shadow odz-p-4 odz-rounded-lg odz-border odz-mt-6"><div class="odz-card-body odz-p-3"><!></div></div>',1),lM=W('<div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-ml-3 odz-text-lg odz-font-medium">  ...</span></div>'),dM=W('<div class="odz-text-xs odz-text-gray-400 odz-line-through"> </div> <div class="odz-text-xs odz-text-green-600 odz-font-medium"> </div>',1),cM=W('<div class="odz-text-xs odz-text-gray-400"> </div>'),uM=W('<span class="odz-text-gray-400"></span>'),hM=W('<div class="odz-text-xs odz-text-green-600">   </div>'),fM=W('<div class="odz-text-xs odz-text-blue-600">   -  </div>'),pM=W('<div class="odz-text-xs odz-text-gray-400"> </div>'),gM=W('<div class="odz-text-xs odz-text-gray-500">    </div>'),vM=W('<div class="odz-grid odz-grid-cols-2 md:odz-grid-cols-5 odz-gap-3 md:odz-gap-4 odz-p-4 md:odz-p-6 odz-bg-white"><div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">1  </div></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"><!></div> <!></div> <div class="odz-text-center"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"></div> <div class="odz-text-2xl odz-font-bold odz-text-gray-900 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400">    </div></div> <div class="odz-text-center md:odz-col-span-1 odz-col-span-2"><div class="odz-text-sm odz-text-gray-500 odz-mb-1"> </div> <div class="odz-text-3xl md:odz-text-2xl odz-font-bold odz-text-red-600 odz-mb-1"> </div> <div class="odz-text-xs odz-text-gray-400"> <!> <!></div></div></div>'),mM=W(`<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-text-lg odz-font-bold"> </h3> <div class="odz-space-y-4 odz-py-4"><div><ul class="odz-list-disc odz-ml-5 odz-space-y-2"><li>        
                     
                  </li> <li>   .     
               .</li> <li>( :   22 19-15 3)</li></ul></div> <div><table class="odz-table odz-table-zebra odz-w-full"><tbody><tr><td>*Name:</td><td></td></tr><tr><td>*Country:</td><td></td></tr><tr><td>*ZipCode:</td><td></td></tr><tr><td>*Address:</td><td></td></tr><tr><td>*Tel.No.():</td><td></td></tr><tr><td>*E-mail:</td><td></td></tr></tbody></table></div></div> <div class="odz-modal-action"><button class="odz-btn"></button></div></div></dialog>`),wM=W('<!> <div class="odz-sticky odz-bottom-0 odz-left-0 odz-right-0 odz-mt-6 odz-bg-white odz-border-t odz-shadow-lg"><!></div> <!> <!> <!> <!>',1);function yM(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=()=>fn(oi,"$shopStore",t),i=()=>fn($l,"$customerStore",t);let a=gt(e,"productId",12),A=gt(e,"isEstimateModal",12),d=gt(e,"estimate",12),c=Se(null),u=Se(!1),h=Se(""),f=Se(""),g=Se(0),w=Se(!1),y=Se(""),x=Se(""),C=Se(""),I=!1,N=Se(!1),k=Se(""),ee=Se(""),G=Se(""),H=Se(),Y=Se(),Be=Se(),M=Se(""),O=Se(!1),J=Se(!0),re=Se([]),he=Se(!1);function ie(){var ze;if(b(g,0),(ze=d())!=null&&ze.id&&(console.log(" Edit mode - clearing sessionStorage before DB load"),zE()),Yt(Et,lt(o).estimateName=d().name||"",lt(o)),Yt(Et,lt(o).organizationName=d().organization_name||"",lt(o)),Yt(Et,lt(o).orderName=d().order_name||"",lt(o)),Yt(Et,lt(o).orderPhone=d().order_phone||"",lt(o)),Yt(Et,lt(o).postcode=d().postcode||"",lt(o)),Yt(Et,lt(o).address1=d().address1||"",lt(o)),Yt(Et,lt(o).address2=d().address2||"",lt(o)),Yt(Et,lt(o).comment=d().comment||"",lt(o)),Yt(Et,lt(o).shippingMethod=d().shipping_method||"",lt(o)),Yt(Et,lt(o).prefDeliveryDate=d().pref_delivery_date||"",lt(o)),Yt(Et,lt(o).estDeliveryDate=d().est_delivery_date||"",lt(o)),Yt(Et,lt(o).uploadMemo=d().upload_memo||"",lt(o)),Yt(Et,lt(o).designUploads=d().design_uploads&&typeof d().design_uploads=="object"&&Array.isArray(d().design_uploads.files)?d().design_uploads.files.map(Ce=>Ce.url):[],lt(o)),Yt(Et,lt(o).designConfirm=d().design_confirm||"",lt(o)),o().prefDeliveryDate&&b(M,new Date(o().prefDeliveryDate).toISOString().split("T")[0]),b(y,d().postcode||""),b(x,d().address1||""),b(C,d().address2||""),b(J,nc(d().status)),d().order_phone){const Ce=d().order_phone;Ce.length>=3&&b(k,Ce.slice(0,3)),Ce.length>=7&&b(ee,Ce.slice(3,7)),Ce.length>=11&&b(G,Ce.slice(7,11))}T(d().id)}function be(ze){a(o().products[ze].product.id),Yt(Et,lt(o).index=ze,lt(o)),b(g,1)}function te(){var ze,Ce;if(b(g,1),(!a()||a().trim()==="")&&(o().products.length>0&&o().index>=0&&((Ce=(ze=o().products[o().index])==null?void 0:ze.product)!=null&&Ce.id)?(a(o().products[o().index].product.id),console.log("   productId :",a())):console.log(" productId     ")),typeof window<"u"&&a()){const pe=`extended-product-data-cache-${a()}`;try{const Oe=window.sessionStorage.getItem(pe);if(Oe){const ke=JSON.parse(Oe);ke.printSelection&&!ke.printSelection.isCompleted&&(ke.printSelection.currentMethod="selection",window.sessionStorage.setItem(pe,JSON.stringify(ke)),console.log("     "))}}catch(Oe){console.warn("     :",Oe)}}}function Z(){if(!o().products||o().products.length===0||o().index<0||!o().products[o().index]){b(u,!0),b(h," "),b(f,"  .");return}if(o().products[o().index].variants.length<1){b(u,!0),b(h," "),b(f,"1   .");return}if(o().products[o().index].variants.some(Ce=>Ce.quantity===0)){b(u,!0),b(h," "),b(f," 1  ");return}b(g,2)}function Ae(){b(w,!0)}function we(){return I?Promise.resolve():new Promise(ze=>{const Ce=document.createElement("script");Ce.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",Ce.onload=()=>{I=!0,ze()},document.head.appendChild(Ce)})}async function z(){await we(),new window.daum.Postcode({oncomplete(ze){if(b(y,ze.zonecode),b(x,ze.roadAddress||ze.jibunAddress),ze.userSelectedType==="R"){let Ce="";ze.bname!==""&&/[||]$/g.test(ze.bname)&&(Ce+=ze.bname),ze.buildingName!==""&&ze.apartment==="Y"&&(Ce+=Ce!==""?", "+ze.buildingName:ze.buildingName),Ce!==""&&b(x,l(x)+(" ("+Ce+")"))}}}).open()}function F(){b(N,!0)}function E(ze,Ce){const pe=ze.target;pe.value.length>=parseInt(pe.getAttribute("maxlength")||"0")&&Ce&&Ce.focus()}function U(ze){return ze?ze.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}async function P(){var ze,Ce,pe,Oe,ke,me,q,de,ye,Fe,Pe,nt,qe,je,fe,Me,At,Ve,Ye,ot;try{if(!o().estimateName||!o().organizationName||!o().orderName||!o().orderPhone||!o().shippingMethod){b(u,!0),b(h,"  "),b(f,", ,    .");return}if(!s().customer_id){const it=U(o().password);if(!it.valid){b(u,!0),b(h," "),b(f,it.message);return}}const ht={name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:l(y),address1:l(x),address2:l(C),comment:o().comment,password:s().customer_id?null:o().password,shipping_method:o().shippingMethod,pref_delivery_date:o().prefDeliveryDate,upload_memo:o().uploadMemo,sess:s().sess,customer_id:s().customer_id,mall_type:i().mallType,shop_id:s().id};let Ge;if((ze=d())!=null&&ze.id){Ge=await pc(d().id,ht);const it=await ju(d().id);for(const xt of it)xt.id&&await n5(xt.id);const zt=await gc(d().id);for(const xt of zt)xt.id&&await o5(xt.id);for(let xt=0;xt<o().products.length;xt++)await g5(d().id,xt)}else Ge=await a1(ht);if(!Ge.id)throw new Error("  .");for(let it=0;it<o().products.length;it++){const zt=o().products[it],xt=zt.discountInfo,Tt=xt==null?void 0:xt.discountDetails;for(const yt of zt.variants)if(yt.quantity>0){const rt=yt.prices[0].amount;let Dt=rt,St=0;const Nt=zt.variants.reduce(($t,nr)=>$t+(nr.quantity||0),0),Je=$i(Nt,rt,zt.product.quantity_discounts);Je.hasDiscount&&(Dt=Je.discountedPrice,St=Je.discountAmount);const mt=zt.prints&&zt.prints.length>0?"detailed":zt.simplePrints&&zt.simplePrints.length>0?"simple":"none",vt={estimate_id:Ge.id,product_id:zt.product.id,variant_id:yt.id,quantity:yt.quantity,idx:it,price:Dt,original_price:rt,discount_amount:St,discount_type:((Ce=Je==null?void 0:Je.discountInfo)==null?void 0:Ce.type)||null,discount_value:((pe=Je==null?void 0:Je.discountInfo)==null?void 0:pe.value)||null,discount_direction:((Oe=Je==null?void 0:Je.discountInfo)==null?void 0:Oe.direction)||null,discount_min_quantity:((ke=Je==null?void 0:Je.discountInfo)==null?void 0:ke.min_quantity)||null,discount_max_quantity:((me=Je==null?void 0:Je.discountInfo)==null?void 0:me.max_quantity)||null,print_type:mt};await A1(vt)}if(zt.prints&&zt.prints.length>0)for(const yt of zt.prints){const rt={estimate_id:Ge.id,idx:it,template_id:yt.template.id,variant_id:yt.variant_id,price:yt.price||0,colors:yt.colors||null,uploads:yt.uploads||null,name_sheet:yt.nameSheet||null,object_id:yt.objectId||null,original_price:((q=yt.discountInfo)==null?void 0:q.originalPrice)||null,discount_amount:((de=yt.discountInfo)==null?void 0:de.discountAmount)||null,discount_type:((Fe=(ye=yt.discountInfo)==null?void 0:ye.discountDetails)==null?void 0:Fe.type)||null,discount_value:((nt=(Pe=yt.discountInfo)==null?void 0:Pe.discountDetails)==null?void 0:nt.value)||null,discount_direction:((je=(qe=yt.discountInfo)==null?void 0:qe.discountDetails)==null?void 0:je.direction)||null,discount_min_quantity:((Me=(fe=yt.discountInfo)==null?void 0:fe.discountDetails)==null?void 0:Me.min_quantity)||null,discount_max_quantity:((Ve=(At=yt.discountInfo)==null?void 0:At.discountDetails)==null?void 0:Ve.max_quantity)||null};await d1(rt)}if(zt.addons)for(const[yt,rt]of Object.entries(zt.addons)){if(!rt.variantId||rt.variantId.trim()===""){console.warn("  variantId    :",rt);continue}let Dt=0;if(zt.addonProductsMap&&zt.addonProductsMap[rt.productId]){const Je=zt.addonProductsMap[rt.productId].variants.find(mt=>mt.id===rt.variantId);Je&&Je.prices&&Je.prices.length>0&&(Dt=Je.prices[0].amount)}const St={estimate_id:Ge.id,idx:it,addon_id:yt,selected_product_id:rt.productId,selected_variant_id:rt.variantId,price:Dt,quantity:zt.quantity||0};await f1(St)}}console.log(" Estimate    ..."),await g1(Ge.id),console.log(" Estimate    "),b(u,!0),b(h,(Ye=d())!=null&&Ye.id?"  ":"  "),b(f,(ot=d())!=null&&ot.id?"  .":s().customer_id?"  .":"  .      ."),A(!1),i().mallType==="godo5"&&(window.location.href="/odiz/list.php")}catch(ht){console.error("    :",ht),b(u,!0),b(h," "),b(f,"    .  .")}}Xn(()=>{var ze,Ce;if(Yt(Et,lt(o).index=o().products.length,lt(o)),(ze=d())!=null&&ze.id){ie();const pe=lg(d().id,Oe=>{d(Oe),b(J,nc(Oe.status))});return()=>{pe.unsubscribe()}}else a()&&R(a());if(!((Ce=d())!=null&&Ce.id)&&i())if(Yt(Et,lt(o).orderName=i().name,lt(o)),Yt(Et,lt(o).orderPhone=i().phone.replace(/-/g,""),lt(o)),b(x,i().address1),b(C,i().address2),b(y,i().postcode),i().phone){const pe=i().phone.replace(/-/g,"");Yt(Et,lt(o).orderPhone=pe,lt(o)),pe.length>=3&&b(k,pe.slice(0,3)),pe.length>=7&&b(ee,pe.slice(3,7)),pe.length>=11&&b(G,pe.slice(7,11))}else Yt(Et,lt(o).orderPhone="",lt(o));we()});async function T(ze){var Ce;b(he,!0);try{const pe=await ju(ze),Oe=await gc(ze),ke=await dg(ze);b(re,await p1(ze));const me=[],q={};for(const fe of pe)if(fe.product_id&&fe.product){const Me=fe.idx||0;if(q[Me]||(q[Me]={product:fe.product,variants:[],quantity:0,prints:[],addons:{}}),fe.variant_id&&fe.quantity){const At={id:fe.variant_id,quantity:fe.quantity,prices:[{amount:fe.original_price||fe.price||0}],thumbnail:((Ce=fe.variant)==null?void 0:Ce.thumbnail)||null,title:fe.variant_title||` ${fe.variant_id.substring(0,4)}`};q[Me].variants.push(At),q[Me].quantity+=fe.quantity}}const de=[];for(const fe of Oe)if(fe.template_id&&fe.estimate_id){const Me=fe.idx||0;if(q[Me]){const At=(async()=>{try{const Ve=await ih(fe.template_id);let Ye=null;try{Ye=await zc(fe.template_id)}catch(Ge){console.warn("templateProduct  :",Ge)}const ht={template:{id:fe.template_id,name:Ve.length>0&&Ve[Ve.length-1].name||"",templateProduct:Ye},parentTemplates:Ve,price:fe.price||0,colors:fe.colors?typeof fe.colors=="string"?JSON.parse(fe.colors):fe.colors:[],uploads:fe.uploads?typeof fe.uploads=="string"?JSON.parse(fe.uploads):fe.uploads:null,nameSheet:fe.name_sheet?typeof fe.name_sheet=="string"?JSON.parse(fe.name_sheet):fe.name_sheet:null,title:Ve.length>0?Ve[0].name:"",objectId:fe.object_id||null,variant_id:fe.variant_id||null,discountInfo:fe.original_price?{originalPrice:fe.original_price,discountAmount:fe.discount_amount||0,discountDetails:fe.discount_type?{type:fe.discount_type,value:fe.discount_value||0,direction:fe.discount_direction||null,min_quantity:fe.discount_min_quantity||null,max_quantity:fe.discount_max_quantity||null}:void 0,hasDiscount:(fe.discount_amount||0)>0}:void 0};q[Me].prints.push(ht)}catch(Ve){console.error("    :",Ve);const ot={template:{id:fe.template_id,name:"",templateProduct:null},parentTemplates:[],price:fe.price||0,colors:fe.colors?typeof fe.colors=="string"?JSON.parse(fe.colors):fe.colors:[],uploads:fe.uploads?typeof fe.uploads=="string"?JSON.parse(fe.uploads):fe.uploads:null,title:"",objectId:fe.object_id||null,variant_id:fe.variant_id||null,nameSheet:fe.name_sheet?typeof fe.name_sheet=="string"?JSON.parse(fe.name_sheet):fe.name_sheet:null,discountInfo:fe.original_price?{originalPrice:fe.original_price,discountAmount:fe.discount_amount||0,discountDetails:fe.discount_type?{type:fe.discount_type,value:fe.discount_value||0,direction:fe.discount_direction||null,min_quantity:fe.discount_min_quantity||null,max_quantity:fe.discount_max_quantity||null}:void 0,hasDiscount:(fe.discount_amount||0)>0}:void 0};q[Me].prints.push(ot)}})();de.push(At)}}await Promise.all(de),ke.forEach(fe=>{const Me=fe.idx||0;q[Me]?(q[Me].addons||(q[Me].addons={}),q[Me].addons[fe.addon_id]={productId:fe.selected_product_id,variantId:fe.selected_variant_id||""}):console.log(`productGroups[${Me}]  `)});const ye=[];for(const fe in q){const Me=q[fe];if(Me.product&&Object.keys(Me.addons||{}).length>0){const At=(async()=>{try{const Ve=await sh(Me.product.id);Me.addonProductsMap={},Ve.forEach(Ye=>{Ye.items.forEach(ot=>{var ht,Ge,it;ot.addon_product&&((it=(Ge=(ht=ot.addon_product.variants)==null?void 0:ht[0])==null?void 0:Ge.prices)!=null&&it[0])&&(Me.addonProductsMap[ot.addon_product.id]={price:ot.addon_product.variants[0].prices[0].amount,title:ot.addon_product.title,variants:ot.addon_product.variants})})})}catch(Ve){console.error(`idx ${fe}    :`,Ve),Me.addonProductsMap={}}})();ye.push(At)}me.push(Me)}await Promise.all(ye),L_(Et,{...o(),products:me,index:(me.length>0,0)});const Fe=me.reduce((fe,Me)=>fe+Me.quantity,0),Pe=me.reduce((fe,Me)=>fe+(Me.variants||[]).reduce((At,Ve)=>{const Ye=Ve.quantity||0;return At+Ve.prices[0].amount*Ye},0),0),nt=me.reduce((fe,Me)=>fe+(Me.prints||[]).reduce((At,Ve)=>At+(Ve.price||0),0),0),qe=me.reduce((fe,Me)=>{if(!Me.addons||Object.keys(Me.addons).length===0||!Me.addonProductsMap)return fe;const At=Me.quantity||0,Ve=Object.values(Me.addons).reduce((Ye,ot)=>{const ht=Me.addonProductsMap[ot.productId];if(ht&&ot.variantId){const Ge=ht.variants.find(it=>it.id===ot.variantId);if(Ge&&Ge.prices&&Ge.prices.length>0){const it=Ge.prices[0].amount*At;return Ye+it}}return Ye},0);return fe+Ve},0),je=l(re).reduce((fe,Me)=>fe+Number(Me.amount),0);Yt(Et,lt(o).totalQuantity=Fe,lt(o)),Yt(Et,lt(o).totalProductAmount=Pe,lt(o)),Yt(Et,lt(o).totalPrintAmount=nt,lt(o)),Yt(Et,lt(o).totalAddonAmount=qe,lt(o)),Yt(Et,lt(o).totalAdditionalAmount=je,lt(o)),Yt(Et,lt(o).totalAmount=Pe+nt+qe+je,lt(o)),setTimeout(()=>{Et.updateTotalAmounts()},200)}catch(pe){console.error("     :",pe),Yt(Et,lt(o).products=[],lt(o))}finally{b(he,!1)}}function R(ze){b(O,!1),a(ze),Yt(Et,lt(o).index=o().products.length,lt(o)),b(g,1)}Jt(()=>(l(N),l(w),l(c)),()=>{var ze;(l(N)||l(w))&&(b(c,(ze=document.getElementById("estimate-modal"))==null?void 0:ze.querySelector(".odz-modal-box")),l(c)&&zr(c,l(c).scrollTop=0))}),Jt(()=>(o(),l(k),l(ee),l(G)),()=>{if(o().orderPhone&&!l(k)&&!l(ee)&&!l(G)){const ze=o().orderPhone;ze.length>=3&&b(k,ze.slice(0,3)),ze.length>=7&&b(ee,ze.slice(3,7)),ze.length>=11&&b(G,ze.slice(7,11))}}),Jt(()=>(l(k),l(ee),l(G)),()=>{Yt(Et,lt(o).orderPhone=`${l(k)}${l(ee)}${l(G)}`,lt(o))}),Jt(()=>(l(u),l(c)),()=>{var ze;l(u)&&(b(c,(ze=document.getElementById("estimate-modal"))==null?void 0:ze.querySelector(".odz-modal-box")),l(c)&&zr(c,l(c).scrollTop=0))}),Jt(()=>l(M),()=>{l(M)&&Yt(Et,lt(o).prefDeliveryDate=new Date(l(M)).toISOString(),lt(o))}),mo(),an();var $=wM(),j=ut($);{var ae=ze=>{var Ce=ZN(),pe=ut(Ce),Oe=m(pe),ke=m(Oe),me=B(ke,2),q=B(pe,2);{var de=Fe=>{var Pe=XN(),nt=m(Pe);{var qe=fe=>{gF(fe,{get productId(){return a()},get step(){return l(g)},set step(Me){b(g,Me)},$$legacy:!0})},je=fe=>{var Me=WN(),At=B(m(Me),6);tt("click",At,()=>b(O,!0)),Q(fe,Me)};xe(nt,fe=>{a()&&a().trim()!==""?fe(qe):fe(je,!1)})}Q(Fe,Pe)},ye=Fe=>{var Pe=Lt(),nt=ut(Pe);{var qe=fe=>{var Me=YN(),At=m(Me);const Ve=at(()=>{var Ye;return(Ye=d())==null?void 0:Ye.id});kx(At,{get productId(){return a()},get estimateId(){return l(Ve)},get idx(){return o().index},get step(){return l(g)},set step(Ye){b(g,Ye)},$$legacy:!0}),Q(fe,Me)},je=fe=>{var Me=Lt(),At=ut(Me);{var Ve=Ye=>{var ot=JN();Q(Ye,ot)};xe(At,Ye=>{l(g)===3&&Ye(Ve)},!0)}Q(fe,Me)};xe(nt,fe=>{l(g)===2?fe(qe):fe(je,!1)},!0)}Q(Fe,Pe)};xe(q,Fe=>{l(g)===1?Fe(de):Fe(ye,!1)})}De(()=>{Lr(ke,`odz-tab ${(l(g)===1?"odz-tab-active":"")??""}`),Lr(me,`odz-tab ${(l(g)===2?"odz-tab-active":"")??""}`)}),tt("click",ke,te),tt("click",me,Z),Q(ze,Ce)},Ee=ze=>{var Ce=AM(),pe=ut(Ce);{var Oe=qe=>{var je=eM();Q(qe,je)},ke=qe=>{var je=rM(),fe=B(m(je),2);E5(fe,{onSelectProduct:be,get isEditable(){return l(J)},set isEditable(ot){b(J,ot)},$$legacy:!0});var Me=B(fe,2),At=m(Me);{var Ve=ot=>{var ht=tM(),Ge=m(ht);Nu(Ge,{class:"odz-w-5 odz-h-5 odz-mr-2"}),tt("click",ht,()=>b(O,!0)),Q(ot,ht)};xe(At,ot=>{l(J)&&ot(Ve)})}var Ye=B(Me,2);GN(Ye,{get additionalCosts(){return l(re)},get isEditable(){return l(J)}}),Q(qe,je)};xe(pe,qe=>{l(he)?qe(Oe):qe(ke,!1)})}var me=B(pe,2);{var q=qe=>{Y1(qe,{addProduct:R,productType:"godo",get isProductSearchOpen(){return l(O)},set isProductSearchOpen(je){b(O,je)},$$legacy:!0})};xe(me,qe=>{l(O)&&qe(q)})}var de=B(me,2),ye=m(de),Fe=m(ye);{var Pe=qe=>{var je=nM();Q(qe,je)},nt=qe=>{var je=aM(),fe=ut(je),Me=m(fe),At=B(m(Me)),Ve=m(At);kA(Ve,{class:"odz-text-error",size:10});var Ye=B(Me,2);{var ot=Rt=>{var Tr=sM(),Xr=m(Tr),hr=m(Xr),So=B(Xr,2);{var jr=An=>{var yo=oM();Q(An,yo)};xe(So,An=>{l(J)||An(jr)})}De(()=>{Lr(Xr,`odz-badge odz-badge-${(d().status==="pending"?"warning":d().status==="progress"?"info":d().status==="completed"?"success":"error")??""}`),Qe(hr,d().status==="pending"?"":d().status==="progress"?"":d().status==="completed"?"":"")}),Q(Rt,Tr)};xe(Ye,Rt=>{var Tr;(Tr=d())!=null&&Tr.id&&Rt(ot)})}var ht=B(fe,2),Ge=m(ht),it=m(Ge),zt=m(it),xt=m(zt);kA(xt,{class:"odz-text-error",size:12});var Tt=B(it,2),yt=B(Ge,2),rt=m(yt),Dt=m(rt),St=m(Dt);kA(St,{class:"odz-text-error",size:12});var Nt=B(rt,2),Je=B(yt,2),mt=m(Je),vt=m(mt),$t=m(vt);kA($t,{class:"odz-text-error",size:12});var nr=B(mt,2),Ht=B(Je,2),Kt=m(Ht),sr=m(Kt),Ct=m(sr);kA(Ct,{class:"odz-text-error",size:12});var ft=B(Kt,2),Ot=m(ft);Go(Ot,Rt=>b(H,Rt),()=>l(H));var Vt=B(Ot,2);Go(Vt,Rt=>b(Y,Rt),()=>l(Y));var ir=B(Vt,2);Go(ir,Rt=>b(Be,Rt),()=>l(Be));var cr=B(ht,2),dr=m(cr),br=m(dr),yn=m(br);kA(yn,{class:"odz-text-error",size:12});var Fn=B(dr,2),Dr=m(Fn),Br=B(Dr,2),Wr=B(Br,2),Vr=B(Fn,2),fr=B(Vr,2),yr=B(cr,4),en=m(yr),gn=m(en),On=m(gn),tn=m(On);kA(tn,{class:"odz-text-error",size:12});var Cr=B(gn,2);De(()=>{o(),Tu(()=>{l(J)})});var Yn=m(Cr);Yn.value=((Yn.__value="")==null,"");var Yo=B(Yn);Yo.value=(Yo.__value="delivery")==null?"":"delivery";var Co=B(Yo);Co.value=(Co.__value="pickup")==null?"":"pickup";var Ze=B(Co);Ze.value=(Ze.__value="quick")==null?"":"quick";var Qt=B(en,2),Mt=B(m(Qt),2),jt=B(yr,2);{var mr=Rt=>{var Tr=iM(),Xr=m(Tr),hr=m(Xr),So=m(hr);kA(So,{class:"odz-text-error",size:12});var jr=B(Xr,2);De(()=>jr.readOnly=!l(J)),Fr(jr,()=>o().password,An=>Yt(Et,lt(o).password=An,lt(o))),Q(Rt,Tr)};xe(jt,Rt=>{s().customer_id||Rt(mr)})}var ur=B(jt,2),ar=B(m(ur),2),Hr=B(ur,2),Rr=m(Hr),Xt=m(Rr);yw(Xt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var pr=B(Rr,2),Pr=m(pr);yw(Pr,{class:"odz-w-5 odz-h-5 odz-mr-2"});var bn=B(Pr,2);{var qn=Rt=>{var Tr=zn(" ");Q(Rt,Tr)},wo=Rt=>{var Tr=zn(" ");Q(Rt,Tr)};xe(bn,Rt=>{var Tr;(Tr=d())!=null&&Tr.id?Rt(qn):Rt(wo,!1)})}De(Rt=>{Tt.readOnly=!l(J),Nt.readOnly=!l(J),nr.readOnly=!l(J),Ot.readOnly=!l(J),Vt.readOnly=!l(J),ir.readOnly=!l(J),Vr.readOnly=!l(J),fr.readOnly=!l(J),Cr.disabled=!l(J),Mt.disabled=!l(J),lr(Mt,"min",Rt),ar.readOnly=!l(J),pr.disabled=!l(J)},[()=>new Date().toISOString().split("T")[0]],at),Fr(Tt,()=>o().estimateName,Rt=>Yt(Et,lt(o).estimateName=Rt,lt(o))),Fr(Nt,()=>o().organizationName,Rt=>Yt(Et,lt(o).organizationName=Rt,lt(o))),Fr(nr,()=>o().orderName,Rt=>Yt(Et,lt(o).orderName=Rt,lt(o))),Fr(Ot,()=>l(k),Rt=>b(k,Rt)),tt("input",Ot,Rt=>E(Rt,l(Y))),Fr(Vt,()=>l(ee),Rt=>b(ee,Rt)),tt("input",Vt,Rt=>E(Rt,l(Be))),Fr(ir,()=>l(G),Rt=>b(G,Rt)),tt("input",ir,Rt=>E(Rt)),Fr(Dr,()=>l(y),Rt=>b(y,Rt)),tt("click",Br,z),tt("click",Wr,F),Fr(Vr,()=>l(x),Rt=>b(x,Rt)),Fr(fr,()=>l(C),Rt=>b(C,Rt)),Pu(Cr,()=>o().shippingMethod,Rt=>Yt(Et,lt(o).shippingMethod=Rt,lt(o))),Fr(Mt,()=>l(M),Rt=>b(M,Rt)),Fr(ar,()=>o().comment,Rt=>Yt(Et,lt(o).comment=Rt,lt(o))),tt("click",Rr,Ae),tt("click",pr,P),Q(qe,je)};xe(Fe,qe=>{l(he)?qe(Pe):qe(nt,!1)})}Q(ze,Ce)};xe(j,ze=>{l(g)>0?ze(ae):ze(Ee,!1)})}var _e=B(j,2),Le=m(_e);{var X=ze=>{var Ce=lM();Q(ze,Ce)},D=ze=>{var Ce=vM(),pe=m(Ce),Oe=B(m(pe),2),ke=m(Oe),me=B(pe,2),q=B(m(me),2),de=m(q),ye=B(q,2);{var Fe=Je=>{var mt=dM();const vt=at(()=>o().products.reduce((Ct,ft)=>{var Ot;return Ct+(((Ot=ft.discountInfo)==null?void 0:Ot.originalAmount)||0)},0)),$t=at(()=>o().products.reduce((Ct,ft)=>{var Ot;return Ct+(((Ot=ft.discountInfo)==null?void 0:Ot.discountAmount)||0)},0));var nr=ut(mt),Ht=m(nr),Kt=B(nr,2),sr=m(Kt);De((Ct,ft)=>{Qe(Ht,`${Ct??""}`),Qe(sr,`-${ft??""} `)},[()=>Er(l(vt)),()=>Er(l($t))],at),Q(Je,mt)},Pe=Je=>{var mt=cM();Q(Je,mt)};xe(ye,Je=>{o().products.some(mt=>{var vt;return(vt=mt.discountInfo)==null?void 0:vt.hasDiscount})?Je(Fe):Je(Pe,!1)})}var nt=B(me,2),qe=B(m(nt),2),je=m(qe);{var fe=Je=>{var mt=uM();Q(Je,mt)},Me=Je=>{var mt=zn();De(vt=>Qe(mt,`${vt??""}`),[()=>Er(o().totalPrintAmount)],at),Q(Je,mt)};xe(je,Je=>{o().totalPrintAmount===0?Je(fe):Je(Me,!1)})}var At=B(qe,2);{var Ve=Je=>{var mt=hM();Q(Je,mt)},Ye=Je=>{var mt=Lt(),vt=ut(mt);{var $t=Ht=>{var Kt=fM();Q(Ht,Kt)},nr=Ht=>{var Kt=Lt(),sr=ut(Kt);{var Ct=Ot=>{var Vt=pM();Q(Ot,Vt)},ft=Ot=>{var Vt=gM();Q(Ot,Vt)};xe(sr,Ot=>{o().products.some(Vt=>Vt.print_type==="none")?Ot(Ct):Ot(ft,!1)},!0)}Q(Ht,Kt)};xe(vt,Ht=>{o().products.some(Kt=>Kt.print_type==="simple")?Ht($t):Ht(nr,!1)},!0)}Q(Je,mt)};xe(At,Je=>{o().totalPrintAmount>0?Je(Ve):Je(Ye,!1)})}var ot=B(nt,2),ht=B(m(ot),2),Ge=m(ht),it=B(ot,2),zt=B(m(it),2),xt=m(zt),Tt=B(zt,2),yt=m(Tt),rt=B(yt);{var Dt=Je=>{var mt=zn("+ ( )");Q(Je,mt)};xe(rt,Je=>{o().totalPrintAmount>0&&Je(Dt)})}var St=B(rt,2);{var Nt=Je=>{var mt=zn();De(vt=>Qe(mt,`+ ${vt??""}`),[()=>Er(o().totalAdditionalAmount)],at),Q(Je,mt)};xe(St,Je=>{o().totalAdditionalAmount>0&&Je(Nt)})}De((Je,mt,vt)=>{Qe(ke,`${o().totalQuantity||0}`),Qe(de,`${Je??""}`),Qe(Ge,`${mt??""}`),Qe(xt,`${vt??""}`),Qe(yt,` ${Je??""} + 
          ${mt??""} `)},[()=>Er(o().totalProductAmount),()=>Er(o().totalAddonAmount),()=>Er(o().totalAmount)],at),Q(ze,Ce)};xe(Le,ze=>{l(he)?ze(X):ze(D,!1)})}var oe=B(_e,2);{var ve=ze=>{var Ce=mM(),pe=m(Ce),Oe=B(m(pe),4),ke=m(Oe);tt("click",ke,()=>b(N,!1)),Q(ze,Ce)};xe(oe,ze=>{l(N)&&ze(ve)})}var le=B(oe,2);{var ue=ze=>{QN(ze,{get isOpen(){return l(w)},set isOpen(Ce){b(w,Ce)},$$legacy:!0})};xe(le,ze=>{l(w)&&ze(ue)})}var Ie=B(le,2);Cc(Ie,{get isOpen(){return l(u)},set isOpen(ze){b(u,ze)},get title(){return l(h)},set title(ze){b(h,ze)},get message(){return l(f)},set message(ze){b(f,ze)},$$legacy:!0});var Ne=B(Ie,2);Sc(Ne,{get isLoading(){return l(he)},set isLoading(ze){b(he,ze)},$$legacy:!0}),Q(n,$),sn(),r()}var bM=W('<div class="odz-alert odz-alert-error"> </div>'),_M=W('<div class="odz-mb-4"><!></div>'),xM=W('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),BM=W('<div><h4 class="odz-font-semibold odz-mb-2"> </h4> <div class="odz-flex odz-flex-col odz-justify-center"></div></div>'),zM=W('<p class="odz-text-base odz-font-semibold odz-mb-3"> </p>'),CM=W('<div class="odz-border odz-rounded-lg odz-p-2 odz-w-full sm:odz-w-48 md:odz-w-56 odz-flex odz-items-center odz-gap-3"><img class="odz-w-12 odz-h-12 odz-object-cover odz-rounded odz-flex-shrink-0"> <div class="odz-flex-grow odz-min-w-0"><p class="odz-text-xs odz-font-medium odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500"> </p></div></div>'),SM=W('<div class="odz-mb-4"><!> <div class="odz-flex odz-flex-wrap odz-gap-3"></div></div>'),EM=W('<div class="odz-border odz-rounded odz-p-2 odz-text-center"><img class="odz-max-w-full odz-mx-auto odz-mb-2 odz-object-contain"></div>'),FM=W('<div class="odz-flex odz-flex-col odz-justify-center"></div>'),IM=W('<p class="odz-text-xs odz-text-gray-500">     .</p>'),UM=W('<div class="odz-mb-2"><h6 class="odz-font-medium odz-text-sm odz-mb-2"> </h6> <!></div>'),QM=W('<div class="odz-mb-6 odz-p-4 odz-border odz-rounded-lg"><h5 class="odz-font-medium odz-text-base odz-mb-3"> </h5> <!> <!></div>'),TM=W("<div></div>"),LM=W('<p class="odz-text-center odz-text-gray-500 odz-py-4">   .</p>'),PM=W('<div class="odz-mt-4"><!></div>'),kM=W('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1">[]</div> <div class="odz-chat-bubble odz-text-sm odz-chat-bubble-success odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),OM=W('<div class="odz-chat odz-chat-end"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"></div> <div class="odz-chat-bubble odz-chat-bubble-secondary odz-chat-bubble-outline"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),DM=W('<div class="odz-chat odz-chat-start"><div class="odz-chat-header odz-text-xs odz-opacity-50 odz-mb-1"> </div> <div class="odz-chat-bubble odz-chat-bubble-gray"> <div class="odz-chat-footer odz-opacity-50 odz-text-xs"> </div></div></div>'),NM=W('<p class="odz-text-center odz-text-sm odz-text-gray-500">  .</p>'),MM=W('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),HM=W('<div role="alert" class="odz-alert odz-alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> :    .</span></div>'),jM=W('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),RM=W('<div role="alert" class="odz-alert odz-alert-info"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),$M=W('<div role="alert" class="odz-alert odz-alert-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> :     .</span></div>'),qM=W('<div role="alert" class="odz-alert odz-alert-success odz-alert-outline"><span> :   .</span></div>'),KM=W('<button class="odz-btn odz-btn-success"> </button> <button class="odz-btn odz-btn-error"> </button>',1),VM=W('<div class="odz-space-y-6"><!> <!> <!> <!></div> <div class="odz-divider odz-my-6"></div> <div class="odz-space-y-4"><div class="odz-max-h-60 odz-overflow-y-auto odz-p-2 odz-bg-base-200 odz-rounded-lg odz-space-y-3"></div> <div class="odz-flex odz-gap-2 odz-items-center"><input type="text" placeholder=" ..." class="odz-input odz-input-bordered odz-flex-grow"> <button class="odz-btn odz-btn-primary"><!> </button></div></div> <div class="odz-mt-6"><!></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <!></div>',1),GM=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4"> </h3> <!></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),WM=W('<div class="odz-flex odz-gap-4"><label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label> <label class="odz-label odz-cursor-pointer odz-gap-1"><span class="odz-label-text odz-text-xs odz-whitespace-nowrap"></span> <input type="radio" class="odz-radio odz-radio-sm"></label></div>'),XM=W('<input type="checkbox" class="odz-checkbox odz-checkbox-sm">'),YM=W('<div class="odz-form-control"><label class="odz-label odz-cursor-pointer odz-gap-4"><span class="odz-label-text odz-text-xs"> </span> <!></label></div>'),JM=W('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>   ...',1),ZM=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-2xl"><h3 class="odz-font-bold odz-text-lg">    </h3> <p class="odz-py-4 odz-text-sm">       .</p> <div class="odz-form-control odz-mb-4"><label class="odz-label odz-cursor-pointer"><span class="odz-label-text odz-font-semibold"> .</span> <input type="checkbox" class="odz-checkbox odz-checkbox-primary"></label></div> <div class="odz-space-y-2 odz-border-t odz-border-b odz-py-4 odz-max-h-60 odz-overflow-y-auto"></div> <div class="odz-modal-action odz-mt-6"><button class="odz-btn"></button> <button class="odz-btn odz-btn-primary"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),e7=W('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>  ...',1),t7=W('<dialog class="odz-modal odz-modal-open"><div class="odz-modal-box"><h3 class="odz-font-bold odz-text-lg odz-mb-4">   </h3> <textarea class="odz-textarea odz-textarea-bordered odz-w-full odz-h-32" placeholder="   ..."></textarea> <div class="odz-modal-action odz-mt-4"><button class="odz-btn"></button> <button class="odz-btn odz-btn-error"><!></button></div></div> <form method="dialog" class="odz-modal-backdrop"><button>close</button></form></dialog>'),r7=W("<!> <!> <!> <!>",1);function n7(n,e){on(e,!1);let t=gt(e,"estimateId",8),r=gt(e,"isOpen",12),o=Se(null),s=Se(!0),i=Se(null),a=Se({}),A=Se([]),d=Se(""),c=Se(""),u=null,h=null,f=null,g=Se(!1),w=Se(""),y=Se(""),x=Se([]),C=Se(""),I=Se(!1),N=Se(),k=Se(!1),ee=Se(""),G=Se(!1),H=Se(!1),Y=Se([!1,!1,!1,!1,!1,!1,!1]),Be=Se(!1),M=Se(!1);const O=["     .","          .","    .","    ,    ?","           .","   , ,       .","    ? ( ,  3 )"];function J(X){if(!X)return null;try{return typeof X=="object"&&X!==null?X:JSON.parse(X)}catch(D){return console.error("Failed to parse JSON:",D,"Input:",X),null}}async function re(){await ca(),l(N)&&zr(N,l(N).scrollTop=l(N).scrollHeight)}function he(){var D;if(!l(o))return;if((D=l(o).estimate)!=null&&D.design_uploads){const oe=typeof l(o).estimate.design_uploads=="string"?J(l(o).estimate.design_uploads):l(o).estimate.design_uploads;oe&&Array.isArray(oe.files)?b(A,oe.files.map(ve=>({url:ve.url,name:ve.name}))):b(A,[]),b(d,(oe==null?void 0:oe.topHTML)||""),b(c,(oe==null?void 0:oe.bottomHTML)||"")}else b(A,[]),b(d,""),b(c,"");const X={};l(o).items.length>0&&(l(o).items.forEach(oe=>{const ve=oe.idx??0;X[ve]||(X[ve]={items:[],prints:[]}),X[ve].items.push(oe)}),l(o).prints.forEach(oe=>{const ve=oe.idx??0;X[ve]||(console.warn(`Print found for idx ${ve} but no corresponding item group exists.`),X[ve]={items:[],prints:[]});const le=typeof oe.design_uploads=="string"?J(oe.design_uploads):oe.design_uploads;oe.parsed_uploads=(le==null?void 0:le.files)||[],X[ve].prints.find(Ie=>Ie.id===oe.id)||X[ve].prints.push(oe)})),b(a,X),console.log("Processed and grouped data:",l(a)),Object.entries(l(a)).forEach(([oe,ve])=>{console.log(`idx ${oe}: ${ve.prints.length} print(s)`,ve.prints.map(le=>{var ue;return{id:le.id,parsed_uploads_count:(ue=le.parsed_uploads)==null?void 0:ue.length}}))})}Xn(async()=>{if(!t()){b(i," ID  ."),b(s,!1);return}b(s,!0),b(i,null);try{const[X,D]=await Promise.all([c1(t()),a5(t())]);b(o,X),b(x,D),console.log("Fetched initial details in component:",l(o)),console.log("Fetched initial comments in component:",l(x)),he(),u=lg(t(),oe=>{console.log("Received estimate update:",oe),l(o)&&(zr(o,l(o).estimate={...l(o).estimate,...oe}),he())}),console.log("Subscribed to estimate changes:",u),h=u1(t(),oe=>{console.log("Received comment update payload:",oe),oe.eventType==="INSERT"&&oe.new?b(x,[...l(x),oe.new]):oe.eventType==="DELETE"&&oe.old?b(x,l(x).filter(ve=>ve.id!==oe.old.id)):oe.eventType==="UPDATE"&&oe.new&&b(x,l(x).map(ve=>{var le;return ve.id===((le=oe.new)==null?void 0:le.id)?{...ve,...oe.new}:ve})),re()}),console.log("Subscribed to comment changes:",h),f=h1(t(),oe=>{if(console.log("Received print update payload:",oe),l(o)){let ve=!1;if(oe.eventType==="INSERT"&&oe.new)zr(o,l(o).prints=[...l(o).prints,oe.new]),ve=!0;else if(oe.eventType==="DELETE"&&oe.old){const le=l(o).prints.length;zr(o,l(o).prints=l(o).prints.filter(ue=>ue.id!==oe.old.id)),l(o).prints.length<le&&(ve=!0)}else if(oe.eventType==="UPDATE"&&oe.new){const le=l(o).prints.findIndex(ue=>{var Ie;return ue.id===((Ie=oe.new)==null?void 0:Ie.id)});le!==-1&&(zr(o,l(o).prints[le]={...l(o).prints[le],...oe.new}),ve=!0)}ve&&(he(),console.log("Prints array updated, re-processed data"))}}),console.log("Subscribed to print changes:",f),re()}catch(X){console.error("Error loading initial data or subscribing:",X),b(i,"        .")}finally{b(s,!1)}}),Xo(()=>{u&&(console.log("Unsubscribing from estimate changes"),u.unsubscribe()),h&&(console.log("Unsubscribing from comment changes"),h.unsubscribe()),f&&(console.log("Unsubscribing from print changes"),f.unsubscribe())});function ie(){r(!1)}function be(){b(Y,Array(O.length).fill(!1)),b(Be,!1),b(H,!0)}function te(){b(H,!1)}function Z(){for(let X=0;X<O.length-1;X++)zr(Y,l(Y)[X]=l(Be));b(Y,[...l(Y)]),console.log({confirmationChecks:l(Y)})}function Ae(X,D){zr(Y,l(Y)[X]=D),X<O.length-1&&b(Be,l(Y).slice(0,-1).every(oe=>oe===!0)),b(Y,[...l(Y)])}function we(){b(ee,""),b(k,!0)}function z(){b(k,!1)}async function F(){var ve,le;if(!l(ee).trim()){b(w," "),b(y,"   ."),b(g,!0);return}if(!((le=(ve=l(o))==null?void 0:ve.estimate)!=null&&le.id))return;const X=l(o).estimate.id;b(G,!0);let D=null,oe=null;try{try{await Kf({estimate_id:X,comment:`[] ${l(ee)}`,system:!1,writer:"customer"}),console.log("Rejection comment added successfully.")}catch(ue){throw D=ue,console.error("Error adding rejection comment:",D),new Error("     .")}try{await pc(X,{design_confirm:"processing"}),console.log("Estimate status updated to processing.")}catch(ue){throw oe=ue,console.error("Error updating estimate status after rejection:",oe),new Error("    .")}z(),ie()}catch(ue){console.error("Error during rejection process:",ue),b(w,""),b(y,ue.message||"     ."),b(g,!0)}finally{b(G,!1)}}async function E(){var le,ue;if(!((ue=(le=l(o))==null?void 0:le.estimate)!=null&&ue.id))return;const X=l(o).estimate.id,D=l(Y)[O.length-1];b(M,!0);let oe=null,ve=null;try{await pc(X,{design_confirm:"completed",use_reorder:D,...l(o).estimate.auto_complete_on_approval?{status:"completed"}:{}}),console.log(`Estimate status updated to completed with use_reorder: ${D}.`);try{await Kf({estimate_id:X,comment:"",system:!0,writer:"customer"}),console.log("System comment added successfully with writer as customer.")}catch(Ie){ve=Ie,console.error("Error adding system comment after approval:",ve)}}catch(Ie){oe=Ie,console.error("Error approving design:",oe)}finally{b(M,!1),oe?(b(w,""),b(y,"      ."),b(g,!0)):ve?(b(w,""),b(y," ,      ."),b(g,!0)):(te(),ie())}}async function U(){var X,D;if(!(!l(C).trim()||!((D=(X=l(o))==null?void 0:X.estimate)!=null&&D.id))){b(I,!0);try{await Kf({estimate_id:l(o).estimate.id,comment:l(C),system:!1,writer:"customer"}),b(C,"")}catch(oe){console.error("Error sending comment:",oe),b(w,""),b(y,"    ."),b(g,!0)}finally{b(I,!1)}}}function P(X){if(!X)return"";try{return new Date(X).toLocaleString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return X}}an();var T=r7(),R=ut(T);{var $=X=>{var D=GM(),oe=m(D),ve=m(oe),le=B(ve,2),ue=m(le),Ie=B(le,2);{var Ne=Oe=>{Sc(Oe,{get isLoading(){return l(s)},set isLoading(ke){b(s,ke)},$$legacy:!0})},ze=Oe=>{var ke=Lt(),me=ut(ke);{var q=ye=>{var Fe=bM(),Pe=m(Fe);De(()=>Qe(Pe,l(i))),Q(ye,Fe)},de=ye=>{var Fe=Lt(),Pe=ut(Fe);{var nt=qe=>{var je=VM(),fe=ut(je),Me=m(fe);{var At=Ct=>{var ft=_M(),Ot=m(ft);w0(Ot,()=>l(d),!1,!1),Q(Ct,ft)};xe(Me,Ct=>{l(d)&&Ct(At)})}var Ve=B(Me,2);{var Ye=Ct=>{var ft=BM(),Ot=B(m(ft),2);er(Ot,5,()=>l(A),vr,(Vt,ir)=>{var cr=xM(),dr=m(cr);De(()=>{lr(dr,"src",l(ir).url),lr(dr,"alt",l(ir).name)}),Q(Vt,cr)}),Q(Ct,ft)};xe(Ve,Ct=>{l(A).length>0&&Ct(Ye)})}var ot=B(Ve,2);{var ht=Ct=>{var ft=TM();er(ft,5,()=>Object.entries(l(a)),vr,(Ot,Vt)=>{let ir=()=>l(Vt)[0],cr=()=>l(Vt)[1];var dr=QM(),br=m(dr),yn=m(br),Fn=B(br,2);{var Dr=Vr=>{var fr=SM(),yr=m(fr);{var en=On=>{var tn=zM(),Cr=m(tn);De(()=>Qe(Cr,cr().items[0].product.title)),Q(On,tn)};xe(yr,On=>{var tn;(tn=cr().items[0].product)!=null&&tn.title&&On(en)})}var gn=B(yr,2);er(gn,5,()=>cr().items,vr,(On,tn)=>{var Cr=CM(),Yn=m(Cr),Yo=B(Yn,2),Co=m(Yo),Ze=m(Co),Qt=B(Co,2),Mt=m(Qt);De(()=>{var jt,mr,ur;lr(Yn,"src",((jt=l(tn).variant)==null?void 0:jt.thumbnail)||l(tn).thumbnail||"/placeholder.png"),lr(Yn,"alt",l(tn).variant_title||((mr=l(tn).variant)==null?void 0:mr.title)),Qe(Ze,l(tn).variant_title||((ur=l(tn).variant)==null?void 0:ur.title)||"  "),Qe(Mt,`${l(tn).quantity??""}`)}),Q(On,Cr)}),Q(Vr,fr)};xe(Fn,Vr=>{cr().items.length>0&&Vr(Dr)})}var Br=B(Fn,2);{var Wr=Vr=>{var fr=UM();const yr=at(()=>cr().prints[0]),en=at(()=>{var Cr;return((Cr=l(yr))==null?void 0:Cr.parsed_uploads)||[]});var gn=B(m(fr),2);{var On=Cr=>{var Yn=FM();er(Yn,5,()=>l(en),vr,(Yo,Co)=>{var Ze=EM(),Qt=m(Ze);De(()=>{lr(Qt,"src",l(Co).url),lr(Qt,"alt",l(Co).name)}),Q(Yo,Ze)}),Q(Cr,Yn)},tn=Cr=>{var Yn=IM();Q(Cr,Yn)};xe(gn,Cr=>{l(en).length>0?Cr(On):Cr(tn,!1)})}Q(Vr,fr)};xe(Br,Vr=>{cr().prints.length>0&&Vr(Wr)})}De(Vr=>{lr(dr,"data-idx",ir()),Qe(yn,` ${Vr??""}`)},[()=>Number(ir())+1],at),Q(Ot,dr)}),Q(Ct,ft)},Ge=Ct=>{var ft=Lt(),Ot=ut(ft);{var Vt=ir=>{var cr=LM();Q(ir,cr)};xe(Ot,ir=>{l(A).length===0&&ir(Vt)},!0)}Q(Ct,ft)};xe(ot,Ct=>{Object.keys(l(a)).length>0?Ct(ht):Ct(Ge,!1)})}var it=B(ot,2);{var zt=Ct=>{var ft=PM(),Ot=m(ft);w0(Ot,()=>l(c),!1,!1),Q(Ct,ft)};xe(it,Ct=>{l(c)&&Ct(zt)})}var xt=B(fe,4),Tt=m(xt);er(Tt,5,()=>l(x),Ct=>Ct.id,(Ct,ft)=>{var Ot=Lt(),Vt=ut(Ot);{var ir=dr=>{var br=kM(),yn=B(m(br),2),Fn=m(yn),Dr=B(Fn),Br=m(Dr);De(Wr=>{Qe(Fn,`${l(ft).comment??""} `),Qe(Br,Wr)},[()=>P(l(ft).created_at)],at),Q(dr,br)},cr=dr=>{var br=Lt(),yn=ut(br);{var Fn=Br=>{var Wr=OM(),Vr=B(m(Wr),2),fr=m(Vr),yr=B(fr),en=m(yr);De(gn=>{Qe(fr,`${l(ft).comment??""} `),Qe(en,gn)},[()=>P(l(ft).created_at)],at),Q(Br,Wr)},Dr=Br=>{var Wr=DM(),Vr=m(Wr),fr=m(Vr),yr=B(Vr,2),en=m(yr),gn=B(en),On=m(gn);De(tn=>{Qe(fr,l(ft).writer||""),Qe(en,`${l(ft).comment??""} `),Qe(On,tn)},[()=>P(l(ft).created_at)],at),Q(Br,Wr)};xe(yn,Br=>{l(ft).writer==="customer"?Br(Fn):Br(Dr,!1)},!0)}Q(dr,br)};xe(Vt,dr=>{l(ft).system?dr(ir):dr(cr,!1)})}Q(Ct,Ot)},Ct=>{var ft=NM();Q(Ct,ft)}),Go(Tt,Ct=>b(N,Ct),()=>l(N));var yt=B(Tt,2),rt=m(yt),Dt=B(rt,2),St=m(Dt);{var Nt=Ct=>{var ft=MM();Q(Ct,ft)};xe(St,Ct=>{l(I)&&Ct(Nt)})}var Je=B(xt,2),mt=m(Je);{var vt=Ct=>{var ft=HM();Q(Ct,ft)},$t=Ct=>{var ft=Lt(),Ot=ut(ft);{var Vt=cr=>{var dr=jM();Q(cr,dr)},ir=cr=>{var dr=Lt(),br=ut(dr);{var yn=Dr=>{var Br=RM();Q(Dr,Br)},Fn=Dr=>{var Br=Lt(),Wr=ut(Br);{var Vr=yr=>{var en=$M();Q(yr,en)},fr=yr=>{var en=Lt(),gn=ut(en);{var On=tn=>{var Cr=qM();Q(tn,Cr)};xe(gn,tn=>{var Cr,Yn;((Yn=(Cr=l(o))==null?void 0:Cr.estimate)==null?void 0:Yn.design_confirm)==="completed"&&tn(On)},!0)}Q(yr,en)};xe(Wr,yr=>{var en,gn;((gn=(en=l(o))==null?void 0:en.estimate)==null?void 0:gn.design_confirm)==="confirming"?yr(Vr):yr(fr,!1)},!0)}Q(Dr,Br)};xe(br,Dr=>{var Br,Wr;((Wr=(Br=l(o))==null?void 0:Br.estimate)==null?void 0:Wr.design_confirm)==="processing"?Dr(yn):Dr(Fn,!1)},!0)}Q(cr,dr)};xe(Ot,cr=>{var dr,br;((br=(dr=l(o))==null?void 0:dr.estimate)==null?void 0:br.design_confirm)==="waiting"?cr(Vt):cr(ir,!1)},!0)}Q(Ct,ft)};xe(mt,Ct=>{var ft,Ot;((Ot=(ft=l(o))==null?void 0:ft.estimate)==null?void 0:Ot.design_confirm)==="none"?Ct(vt):Ct($t,!1)})}var nr=B(Je,2),Ht=m(nr),Kt=B(Ht,2);{var sr=Ct=>{var ft=KM(),Ot=ut(ft),Vt=B(Ot,2);De(()=>{Ot.disabled=l(M),Vt.disabled=l(M)}),tt("click",Ot,be),tt("click",Vt,we),Q(Ct,ft)};xe(Kt,Ct=>{var ft,Ot;((Ot=(ft=l(o))==null?void 0:ft.estimate)==null?void 0:Ot.design_confirm)==="confirming"&&Ct(sr)})}De(Ct=>{rt.disabled=l(I),Dt.disabled=Ct,Ht.disabled=l(M)},[()=>l(I)||!l(C).trim()],at),Fr(rt,()=>l(C),Ct=>b(C,Ct)),tt("keydown",rt,Ct=>Ct.key==="Enter"&&!Ct.isComposing&&U()),tt("click",Dt,U),tt("click",Ht,ie),Q(qe,je)};xe(Pe,qe=>{l(o)&&qe(nt)},!0)}Q(ye,Fe)};xe(me,ye=>{l(i)?ye(q):ye(de,!1)},!0)}Q(Oe,ke)};xe(Ie,Oe=>{l(s)?Oe(Ne):Oe(ze,!1)})}var Ce=B(oe,2),pe=m(Ce);De(()=>{var Oe,ke;return Qe(ue,`  - ${((ke=(Oe=l(o))==null?void 0:Oe.estimate)==null?void 0:ke.name)||""}`)}),tt("click",ve,ie),tt("click",pe,ie),Q(X,D)};xe(R,X=>{r()&&X($)})}var j=B(R,2);{var ae=X=>{var D=ZM(),oe=m(D),ve=B(m(oe),4),le=m(ve),ue=B(m(le),2),Ie=B(ve,2);er(Ie,5,()=>O,vr,(de,ye,Fe)=>{var Pe=YM(),nt=m(Pe),qe=m(nt),je=m(qe),fe=B(qe,2);{var Me=Ve=>{var Ye=WM(),ot=m(Ye),ht=B(m(ot),2);lr(ht,"name",`reorder-${Fe??""}`);var Ge=B(ot,2),it=B(m(Ge),2);lr(it,"name",`reorder-${Fe??""}`),De(()=>{Lu(ht,l(Y)[Fe]),Lu(it,!l(Y)[Fe])}),tt("change",ht,zt=>Ae(Fe,zt.target.checked)),tt("change",it,zt=>Ae(Fe,!zt.target.checked)),Q(Ve,Ye)},At=Ve=>{var Ye=XM();b0(Ye,()=>l(Y)[Fe],ot=>zr(Y,l(Y)[Fe]=ot)),tt("change",Ye,ot=>Ae(Fe,ot.target.checked)),Q(Ve,Ye)};xe(fe,Ve=>{Fe===6?Ve(Me):Ve(At,!1)})}De(()=>Qe(je,l(ye))),Q(de,Pe)});var Ne=B(Ie,2),ze=m(Ne),Ce=B(ze,2),pe=m(Ce);{var Oe=de=>{var ye=JM();Q(de,ye)},ke=de=>{var ye=zn("");Q(de,ye)};xe(pe,de=>{l(M)?de(Oe):de(ke,!1)})}var me=B(oe,2),q=m(me);De(()=>{ze.disabled=l(M),Ce.disabled=!l(Be)||l(M)}),b0(ue,()=>l(Be),de=>b(Be,de)),tt("change",ue,Z),tt("click",ze,te),tt("click",Ce,E),tt("click",q,te),Q(X,D)};xe(j,X=>{l(H)&&X(ae)})}var Ee=B(j,2);{var _e=X=>{var D=t7(),oe=m(D),ve=B(m(oe),2),le=B(ve,2),ue=m(le),Ie=B(ue,2),Ne=m(Ie);{var ze=ke=>{var me=e7();Q(ke,me)},Ce=ke=>{var me=zn(" ");Q(ke,me)};xe(Ne,ke=>{l(G)?ke(ze):ke(Ce,!1)})}var pe=B(oe,2),Oe=m(pe);De(ke=>{ve.disabled=l(G),ue.disabled=l(G),Ie.disabled=ke},[()=>l(G)||!l(ee).trim()],at),Fr(ve,()=>l(ee),ke=>b(ee,ke)),tt("click",ue,z),tt("click",Ie,F),tt("click",Oe,z),Q(X,D)};xe(Ee,X=>{l(k)&&X(_e)})}var Le=B(Ee,2);Cc(Le,{get isOpen(){return l(g)},set isOpen(X){b(g,X)},get title(){return l(w)},set title(X){b(w,X)},get message(){return l(y)},set message(X){b(y,X)},$$legacy:!0}),Q(n,T),sn()}function fz(n,e){return function(){return n.apply(e,arguments)}}const{toString:o7}=Object.prototype,{getPrototypeOf:J1}=Object,{iterator:Dg,toStringTag:pz}=Symbol,Ng=(n=>e=>{const t=o7.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Yi=n=>(n=n.toLowerCase(),e=>Ng(e)===n),Mg=n=>e=>typeof e===n,{isArray:Lc}=Array,Ju=Mg("undefined");function s7(n){return n!==null&&!Ju(n)&&n.constructor!==null&&!Ju(n.constructor)&&Ms(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gz=Yi("ArrayBuffer");function i7(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gz(n.buffer),e}const a7=Mg("string"),Ms=Mg("function"),vz=Mg("number"),Hg=n=>n!==null&&typeof n=="object",A7=n=>n===!0||n===!1,ip=n=>{if(Ng(n)!=="object")return!1;const e=J1(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(pz in n)&&!(Dg in n)},l7=Yi("Date"),d7=Yi("File"),c7=Yi("Blob"),u7=Yi("FileList"),h7=n=>Hg(n)&&Ms(n.pipe),f7=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ms(n.append)&&((e=Ng(n))==="formdata"||e==="object"&&Ms(n.toString)&&n.toString()==="[object FormData]"))},p7=Yi("URLSearchParams"),[g7,v7,m7,w7]=["ReadableStream","Request","Response","Headers"].map(Yi),y7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),Lc(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,n[a],a,n)}}function mz(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wz=n=>!Ju(n)&&n!==jl;function Fm(){const{caseless:n}=wz(this)&&this||{},e={},t=(r,o)=>{const s=n&&mz(e,o)||o;ip(e[s])&&ip(r)?e[s]=Fm(e[s],r):ip(r)?e[s]=Fm({},r):Lc(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&uh(arguments[r],t);return e}const b7=(n,e,t,{allOwnKeys:r}={})=>(uh(e,(o,s)=>{t&&Ms(o)?n[s]=fz(o,t):n[s]=o},{allOwnKeys:r}),n),_7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),x7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},B7=(n,e,t,r)=>{let o,s,i;const a={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)i=o[s],(!r||r(i,n,e))&&!a[i]&&(e[i]=n[i],a[i]=!0);n=t!==!1&&J1(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},z7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},C7=n=>{if(!n)return null;if(Lc(n))return n;let e=n.length;if(!vz(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},S7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&J1(Uint8Array)),E7=(n,e)=>{const r=(n&&n[Dg]).call(n);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(n,s[0],s[1])}},F7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},I7=Yi("HTMLFormElement"),U7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),Sb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Q7=Yi("RegExp"),yz=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};uh(t,(o,s)=>{let i;(i=e(o,s,n))!==!1&&(r[s]=i||o)}),Object.defineProperties(n,r)},T7=n=>{yz(n,(e,t)=>{if(Ms(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Ms(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},L7=(n,e)=>{const t={},r=o=>{o.forEach(s=>{t[s]=!0})};return Lc(n)?r(n):r(String(n).split(e)),t},P7=()=>{},k7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function O7(n){return!!(n&&Ms(n.append)&&n[pz]==="FormData"&&n[Dg])}const D7=n=>{const e=new Array(10),t=(r,o)=>{if(Hg(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=Lc(r)?[]:{};return uh(r,(i,a)=>{const A=t(i,o+1);!Ju(A)&&(s[a]=A)}),e[o]=void 0,s}}return r};return t(n,0)},N7=Yi("AsyncFunction"),M7=n=>n&&(Hg(n)||Ms(n))&&Ms(n.then)&&Ms(n.catch),bz=((n,e)=>n?setImmediate:e?((t,r)=>(jl.addEventListener("message",({source:o,data:s})=>{o===jl&&s===t&&r.length&&r.shift()()},!1),o=>{r.push(o),jl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ms(jl.postMessage)),H7=typeof queueMicrotask<"u"?queueMicrotask.bind(jl):typeof process<"u"&&process.nextTick||bz,j7=n=>n!=null&&Ms(n[Dg]),wt={isArray:Lc,isArrayBuffer:gz,isBuffer:s7,isFormData:f7,isArrayBufferView:i7,isString:a7,isNumber:vz,isBoolean:A7,isObject:Hg,isPlainObject:ip,isReadableStream:g7,isRequest:v7,isResponse:m7,isHeaders:w7,isUndefined:Ju,isDate:l7,isFile:d7,isBlob:c7,isRegExp:Q7,isFunction:Ms,isStream:h7,isURLSearchParams:p7,isTypedArray:S7,isFileList:u7,forEach:uh,merge:Fm,extend:b7,trim:y7,stripBOM:_7,inherits:x7,toFlatObject:B7,kindOf:Ng,kindOfTest:Yi,endsWith:z7,toArray:C7,forEachEntry:E7,matchAll:F7,isHTMLForm:I7,hasOwnProperty:Sb,hasOwnProp:Sb,reduceDescriptors:yz,freezeMethods:T7,toObjectSet:L7,toCamelCase:U7,noop:P7,toFiniteNumber:k7,findKey:mz,global:jl,isContextDefined:wz,isSpecCompliantForm:O7,toJSONObject:D7,isAsyncFn:N7,isThenable:M7,setImmediate:bz,asap:H7,isIterable:j7};function Mr(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wt.inherits(Mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const _z=Mr.prototype,xz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{xz[n]={value:n}});Object.defineProperties(Mr,xz);Object.defineProperty(_z,"isAxiosError",{value:!0});Mr.from=(n,e,t,r,o,s)=>{const i=Object.create(_z);return wt.toFlatObject(n,i,function(A){return A!==Error.prototype},a=>a!=="isAxiosError"),Mr.call(i,n.message,e,t,r,o),i.cause=n,i.name=n.name,s&&Object.assign(i,s),i};const R7=null;function Im(n){return wt.isPlainObject(n)||wt.isArray(n)}function Bz(n){return wt.endsWith(n,"[]")?n.slice(0,-2):n}function Eb(n,e,t){return n?n.concat(e).map(function(o,s){return o=Bz(o),!t&&s?"["+o+"]":o}).join(t?".":""):e}function $7(n){return wt.isArray(n)&&!n.some(Im)}const q7=wt.toFlatObject(wt,{},null,function(e){return/^is[A-Z]/.test(e)});function jg(n,e,t){if(!wt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=wt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,y){return!wt.isUndefined(y[w])});const r=t.metaTokens,o=t.visitor||c,s=t.dots,i=t.indexes,A=(t.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(e);if(!wt.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(wt.isDate(g))return g.toISOString();if(!A&&wt.isBlob(g))throw new Mr("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(g)||wt.isTypedArray(g)?A&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,w,y){let x=g;if(g&&!y&&typeof g=="object"){if(wt.endsWith(w,"{}"))w=r?w:w.slice(0,-2),g=JSON.stringify(g);else if(wt.isArray(g)&&$7(g)||(wt.isFileList(g)||wt.endsWith(w,"[]"))&&(x=wt.toArray(g)))return w=Bz(w),x.forEach(function(I,N){!(wt.isUndefined(I)||I===null)&&e.append(i===!0?Eb([w],N,s):i===null?w:w+"[]",d(I))}),!1}return Im(g)?!0:(e.append(Eb(y,w,s),d(g)),!1)}const u=[],h=Object.assign(q7,{defaultVisitor:c,convertValue:d,isVisitable:Im});function f(g,w){if(!wt.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));u.push(g),wt.forEach(g,function(x,C){(!(wt.isUndefined(x)||x===null)&&o.call(e,x,wt.isString(C)?C.trim():C,w,h))===!0&&f(x,w?w.concat(C):[C])}),u.pop()}}if(!wt.isObject(n))throw new TypeError("data must be an object");return f(n),e}function Fb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Z1(n,e){this._pairs=[],n&&jg(n,this,e)}const zz=Z1.prototype;zz.append=function(e,t){this._pairs.push([e,t])};zz.toString=function(e){const t=e?function(r){return e.call(this,r,Fb)}:Fb;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function K7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cz(n,e,t){if(!e)return n;const r=t&&t.encode||K7;wt.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let s;if(o?s=o(e,t):s=wt.isURLSearchParams(e)?e.toString():new Z1(e,t).toString(r),s){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Ib{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V7=typeof URLSearchParams<"u"?URLSearchParams:Z1,G7=typeof FormData<"u"?FormData:null,W7=typeof Blob<"u"?Blob:null,X7={isBrowser:!0,classes:{URLSearchParams:V7,FormData:G7,Blob:W7},protocols:["http","https","file","blob","url","data"]},e2=typeof window<"u"&&typeof document<"u",Um=typeof navigator=="object"&&navigator||void 0,Y7=e2&&(!Um||["ReactNative","NativeScript","NS"].indexOf(Um.product)<0),J7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Z7=e2&&window.location.href||"http://localhost",eH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:e2,hasStandardBrowserEnv:Y7,hasStandardBrowserWebWorkerEnv:J7,navigator:Um,origin:Z7},Symbol.toStringTag,{value:"Module"})),ls={...eH,...X7};function tH(n,e){return jg(n,new ls.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,s){return ls.isNode&&wt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function rH(n){return wt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function nH(n){const e={},t=Object.keys(n);let r;const o=t.length;let s;for(r=0;r<o;r++)s=t[r],e[s]=n[s];return e}function Ez(n){function e(t,r,o,s){let i=t[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),A=s>=t.length;return i=!i&&wt.isArray(o)?o.length:i,A?(wt.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!wt.isObject(o[i]))&&(o[i]=[]),e(t,r,o[i],s)&&wt.isArray(o[i])&&(o[i]=nH(o[i])),!a)}if(wt.isFormData(n)&&wt.isFunction(n.entries)){const t={};return wt.forEachEntry(n,(r,o)=>{e(rH(r),o,t,0)}),t}return null}function oH(n,e,t){if(wt.isString(n))try{return(e||JSON.parse)(n),wt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const hh={transitional:Sz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,s=wt.isObject(e);if(s&&wt.isHTMLForm(e)&&(e=new FormData(e)),wt.isFormData(e))return o?JSON.stringify(Ez(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tH(e,this.formSerializer).toString();if((a=wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return jg(a?{"files[]":e}:e,A&&new A,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),oH(e)):e}],transformResponse:[function(e){const t=this.transitional||hh.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Mr.from(a,Mr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ls.classes.FormData,Blob:ls.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],n=>{hh.headers[n]={}});const sH=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iH=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||e[t]&&sH[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Ub=Symbol("internals");function ou(n){return n&&String(n).trim().toLowerCase()}function ap(n){return n===!1||n==null?n:wt.isArray(n)?n.map(ap):String(n)}function aH(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const AH=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function i0(n,e,t,r,o){if(wt.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!wt.isString(e)){if(wt.isString(r))return e.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(e)}}function lH(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function dH(n,e){const t=wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}let Hs=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function s(a,A,d){const c=ou(A);if(!c)throw new Error("header name must be a non-empty string");const u=wt.findKey(o,c);(!u||o[u]===void 0||d===!0||d===void 0&&o[u]!==!1)&&(o[u||A]=ap(a))}const i=(a,A)=>wt.forEach(a,(d,c)=>s(d,c,A));if(wt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wt.isString(e)&&(e=e.trim())&&!AH(e))i(iH(e),t);else if(wt.isObject(e)&&wt.isIterable(e)){let a={},A,d;for(const c of e){if(!wt.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(A=a[d])?wt.isArray(A)?[...A,c[1]]:[A,c[1]]:c[1]}i(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=ou(e),e){const r=wt.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return aH(o);if(wt.isFunction(t))return t.call(this,o,r);if(wt.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ou(e),e){const r=wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||i0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function s(i){if(i=ou(i),i){const a=wt.findKey(r,i);a&&(!t||i0(r,r[a],a,t))&&(delete r[a],o=!0)}}return wt.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const s=t[r];(!e||i0(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const t=this,r={};return wt.forEach(this,(o,s)=>{const i=wt.findKey(r,s);if(i){t[i]=ap(o),delete t[s];return}const a=e?lH(s):String(s).trim();a!==s&&delete t[s],t[a]=ap(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return wt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&wt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[Ub]=this[Ub]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=ou(i);r[a]||(dH(o,i),r[a]=!0)}return wt.isArray(e)?e.forEach(s):s(e),this}};Hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Hs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});wt.freezeMethods(Hs);function a0(n,e){const t=this||hh,r=e||t,o=Hs.from(r.headers);let s=r.data;return wt.forEach(n,function(a){s=a.call(t,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function Fz(n){return!!(n&&n.__CANCEL__)}function Pc(n,e,t){Mr.call(this,n??"canceled",Mr.ERR_CANCELED,e,t),this.name="CanceledError"}wt.inherits(Pc,Mr,{__CANCEL__:!0});function Iz(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Mr("Request failed with status code "+t.status,[Mr.ERR_BAD_REQUEST,Mr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function cH(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function uH(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(A){const d=Date.now(),c=r[s];i||(i=d),t[o]=A,r[o]=d;let u=s,h=0;for(;u!==o;)h+=t[u++],u=u%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-i<e)return;const f=c&&d-c;return f?Math.round(h*1e3/f):void 0}}function hH(n,e){let t=0,r=1e3/e,o,s;const i=(d,c=Date.now())=>{t=c,o=null,s&&(clearTimeout(s),s=null),n.apply(null,d)};return[(...d)=>{const c=Date.now(),u=c-t;u>=r?i(d,c):(o=d,s||(s=setTimeout(()=>{s=null,i(o)},r-u)))},()=>o&&i(o)]}const Vp=(n,e,t=3)=>{let r=0;const o=uH(50,250);return hH(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,A=i-r,d=o(A),c=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:A,rate:d||void 0,estimated:d&&a&&c?(a-i)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},Qb=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Tb=n=>(...e)=>wt.asap(()=>n(...e)),fH=ls.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ls.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ls.origin),ls.navigator&&/(msie|trident)/i.test(ls.navigator.userAgent)):()=>!0,pH=ls.hasStandardBrowserEnv?{write(n,e,t,r,o,s){const i=[n+"="+encodeURIComponent(e)];wt.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),wt.isString(r)&&i.push("path="+r),wt.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gH(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function vH(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Uz(n,e,t){let r=!gH(e);return n&&(r||t==!1)?vH(n,e):e}const Lb=n=>n instanceof Hs?{...n}:n;function ed(n,e){e=e||{};const t={};function r(d,c,u,h){return wt.isPlainObject(d)&&wt.isPlainObject(c)?wt.merge.call({caseless:h},d,c):wt.isPlainObject(c)?wt.merge({},c):wt.isArray(c)?c.slice():c}function o(d,c,u,h){if(wt.isUndefined(c)){if(!wt.isUndefined(d))return r(void 0,d,u,h)}else return r(d,c,u,h)}function s(d,c){if(!wt.isUndefined(c))return r(void 0,c)}function i(d,c){if(wt.isUndefined(c)){if(!wt.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,u){if(u in e)return r(d,c);if(u in n)return r(void 0,d)}const A={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,c,u)=>o(Lb(d),Lb(c),u,!0)};return wt.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=A[c]||o,h=u(n[c],e[c],c);wt.isUndefined(h)&&u!==a||(t[c]=h)}),t}const Qz=n=>{const e=ed({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=Hs.from(i),e.url=Cz(Uz(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let A;if(wt.isFormData(t)){if(ls.hasStandardBrowserEnv||ls.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((A=i.getContentType())!==!1){const[d,...c]=A?A.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...c].join("; "))}}if(ls.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(e)),r||r!==!1&&fH(e.url))){const d=o&&s&&pH.read(s);d&&i.set(o,d)}return e},mH=typeof XMLHttpRequest<"u",wH=mH&&function(n){return new Promise(function(t,r){const o=Qz(n);let s=o.data;const i=Hs.from(o.headers).normalize();let{responseType:a,onUploadProgress:A,onDownloadProgress:d}=o,c,u,h,f,g;function w(){f&&f(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(o.method.toUpperCase(),o.url,!0),y.timeout=o.timeout;function x(){if(!y)return;const I=Hs.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:I,config:n,request:y};Iz(function(G){t(G),w()},function(G){r(G),w()},k),y=null}"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(x)},y.onabort=function(){y&&(r(new Mr("Request aborted",Mr.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new Mr("Network Error",Mr.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let N=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const k=o.transitional||Sz;o.timeoutErrorMessage&&(N=o.timeoutErrorMessage),r(new Mr(N,k.clarifyTimeoutError?Mr.ETIMEDOUT:Mr.ECONNABORTED,n,y)),y=null},s===void 0&&i.setContentType(null),"setRequestHeader"in y&&wt.forEach(i.toJSON(),function(N,k){y.setRequestHeader(k,N)}),wt.isUndefined(o.withCredentials)||(y.withCredentials=!!o.withCredentials),a&&a!=="json"&&(y.responseType=o.responseType),d&&([h,g]=Vp(d,!0),y.addEventListener("progress",h)),A&&y.upload&&([u,f]=Vp(A),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(c=I=>{y&&(r(!I||I.type?new Pc(null,n,y):I),y.abort(),y=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const C=cH(o.url);if(C&&ls.protocols.indexOf(C)===-1){r(new Mr("Unsupported protocol "+C+":",Mr.ERR_BAD_REQUEST,n));return}y.send(s||null)})},yH=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const s=function(d){if(!o){o=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof Mr?c:new Pc(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,s(new Mr(`timeout ${e} of ms exceeded`,Mr.ETIMEDOUT))},e);const a=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:A}=r;return A.unsubscribe=()=>wt.asap(a),A}},bH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},_H=async function*(n,e){for await(const t of xH(n))yield*bH(t,e)},xH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Pb=(n,e,t,r)=>{const o=_H(n,e);let s=0,i,a=A=>{i||(i=!0,r&&r(A))};return new ReadableStream({async pull(A){try{const{done:d,value:c}=await o.next();if(d){a(),A.close();return}let u=c.byteLength;if(t){let h=s+=u;t(h)}A.enqueue(new Uint8Array(c))}catch(d){throw a(d),d}},cancel(A){return a(A),o.return()}},{highWaterMark:2})},Rg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Tz=Rg&&typeof ReadableStream=="function",BH=Rg&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Lz=(n,...e)=>{try{return!!n(...e)}catch{return!1}},zH=Tz&&Lz(()=>{let n=!1;const e=new Request(ls.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),kb=64*1024,Qm=Tz&&Lz(()=>wt.isReadableStream(new Response("").body)),Gp={stream:Qm&&(n=>n.body)};Rg&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Gp[e]&&(Gp[e]=wt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Mr(`Response type '${e}' is not supported`,Mr.ERR_NOT_SUPPORT,r)})})})(new Response);const CH=async n=>{if(n==null)return 0;if(wt.isBlob(n))return n.size;if(wt.isSpecCompliantForm(n))return(await new Request(ls.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(n)||wt.isArrayBuffer(n))return n.byteLength;if(wt.isURLSearchParams(n)&&(n=n+""),wt.isString(n))return(await BH(n)).byteLength},SH=async(n,e)=>{const t=wt.toFiniteNumber(n.getContentLength());return t??CH(e)},EH=Rg&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:A,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=Qz(n);d=d?(d+"").toLowerCase():"text";let f=yH([o,s&&s.toAbortSignal()],i),g;const w=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(A&&zH&&t!=="get"&&t!=="head"&&(y=await SH(c,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),ee;if(wt.isFormData(r)&&(ee=k.headers.get("content-type"))&&c.setContentType(ee),k.body){const[G,H]=Qb(y,Vp(Tb(A)));r=Pb(k.body,kb,G,H)}}wt.isString(u)||(u=u?"include":"omit");const x="credentials"in Request.prototype;g=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:x?u:void 0});let C=await fetch(g);const I=Qm&&(d==="stream"||d==="response");if(Qm&&(a||I&&w)){const k={};["status","statusText","headers"].forEach(Y=>{k[Y]=C[Y]});const ee=wt.toFiniteNumber(C.headers.get("content-length")),[G,H]=a&&Qb(ee,Vp(Tb(a),!0))||[];C=new Response(Pb(C.body,kb,G,()=>{H&&H(),w&&w()}),k)}d=d||"text";let N=await Gp[wt.findKey(Gp,d)||"text"](C,n);return!I&&w&&w(),await new Promise((k,ee)=>{Iz(k,ee,{data:N,headers:Hs.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:g})})}catch(x){throw w&&w(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Mr("Network Error",Mr.ERR_NETWORK,n,g),{cause:x.cause||x}):Mr.from(x,x&&x.code,n,g)}}),Tm={http:R7,xhr:wH,fetch:EH};wt.forEach(Tm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ob=n=>`- ${n}`,FH=n=>wt.isFunction(n)||n===null||n===!1,Pz={getAdapter:n=>{n=wt.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let s=0;s<e;s++){t=n[s];let i;if(r=t,!FH(t)&&(r=Tm[(i=String(t)).toLowerCase()],r===void 0))throw new Mr(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,A])=>`adapter ${a} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(Ob).join(`
`):" "+Ob(s[0]):"as no adapter specified";throw new Mr("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Tm};function A0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Pc(null,n)}function Db(n){return A0(n),n.headers=Hs.from(n.headers),n.data=a0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Pz.getAdapter(n.adapter||hh.adapter)(n).then(function(r){return A0(n),r.data=a0.call(n,n.transformResponse,r),r.headers=Hs.from(r.headers),r},function(r){return Fz(r)||(A0(n),r&&r.response&&(r.response.data=a0.call(n,n.transformResponse,r.response),r.response.headers=Hs.from(r.response.headers))),Promise.reject(r)})}const kz="1.9.0",$g={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{$g[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Nb={};$g.transitional=function(e,t,r){function o(s,i){return"[Axios v"+kz+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new Mr(o(i," has been removed"+(t?" in "+t:"")),Mr.ERR_DEPRECATED);return t&&!Nb[i]&&(Nb[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,a):!0}};$g.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function IH(n,e,t){if(typeof n!="object")throw new Mr("options must be an object",Mr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=n[s],A=a===void 0||i(a,s,n);if(A!==!0)throw new Mr("option "+s+" must be "+A,Mr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Mr("Unknown option "+s,Mr.ERR_BAD_OPTION)}}const Ap={assertOptions:IH,validators:$g},Aa=Ap.validators;let Wl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ib,response:new Ib}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ed(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:s}=t;r!==void 0&&Ap.assertOptions(r,{silentJSONParsing:Aa.transitional(Aa.boolean),forcedJSONParsing:Aa.transitional(Aa.boolean),clarifyTimeoutError:Aa.transitional(Aa.boolean)},!1),o!=null&&(wt.isFunction(o)?t.paramsSerializer={serialize:o}:Ap.assertOptions(o,{encode:Aa.function,serialize:Aa.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ap.assertOptions(t,{baseUrl:Aa.spelling("baseURL"),withXsrfToken:Aa.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&wt.merge(s.common,s[t.method]);s&&wt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Hs.concat(i,s);const a=[];let A=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(A=A&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let c,u=0,h;if(!A){const g=[Db.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,c=Promise.resolve(t);u<h;)c=c.then(g[u++],g[u++]);return c}h=a.length;let f=t;for(u=0;u<h;){const g=a[u++],w=a[u++];try{f=g(f)}catch(y){w.call(this,y);break}}try{c=Db.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=ed(this.defaults,e);const t=Uz(e.baseURL,e.url,e.allowAbsoluteUrls);return Cz(t,e.params,e.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(e){Wl.prototype[e]=function(t,r){return this.request(ed(r||{},{method:e,url:t,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(e){function t(r){return function(s,i,a){return this.request(ed(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Wl.prototype[e]=t(),Wl.prototype[e+"Form"]=t(!0)});let UH=class Oz{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new Pc(s,i,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Oz(function(o){e=o}),cancel:e}}};function QH(n){return function(t){return n.apply(null,t)}}function TH(n){return wt.isObject(n)&&n.isAxiosError===!0}const Lm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lm).forEach(([n,e])=>{Lm[e]=n});function Dz(n){const e=new Wl(n),t=fz(Wl.prototype.request,e);return wt.extend(t,Wl.prototype,e,{allOwnKeys:!0}),wt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Dz(ed(n,o))},t}const ro=Dz(hh);ro.Axios=Wl;ro.CanceledError=Pc;ro.CancelToken=UH;ro.isCancel=Fz;ro.VERSION=kz;ro.toFormData=jg;ro.AxiosError=Mr;ro.Cancel=ro.CanceledError;ro.all=function(e){return Promise.all(e)};ro.spread=QH;ro.isAxiosError=TH;ro.mergeConfig=ed;ro.AxiosHeaders=Hs;ro.formToJSON=n=>Ez(wt.isHTMLForm(n)?new FormData(n):n);ro.getAdapter=Pz.getAdapter;ro.HttpStatusCode=Lm;ro.default=ro;const{Axios:gK,AxiosError:vK,CanceledError:mK,isCancel:wK,CancelToken:yK,VERSION:bK,all:_K,Cancel:xK,isAxiosError:BK,spread:zK,toFormData:CK,AxiosHeaders:SK,HttpStatusCode:EK,formToJSON:FK,getAdapter:IK,mergeConfig:UK}=ro,Nz=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",LH=Nz+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",PH="["+Nz+"]["+LH+"]*",kH=new RegExp("^"+PH+"$");function Mz(n,e){const t=[];let r=e.exec(n);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let i=0;i<s;i++)o.push(r[i]);t.push(o),r=e.exec(n)}return t}const t2=function(n){const e=kH.exec(n);return!(e===null||typeof e>"u")};function OH(n){return typeof n<"u"}const DH={allowBooleanAttributes:!1,unpairedTags:[]};function NH(n,e){e=Object.assign({},DH,e);const t=[];let r=!1,o=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=Hb(n,s),s.err)return s}else if(n[s]==="<"){let i=s;if(s++,n[s]==="!"){s=jb(n,s);continue}else{let a=!1;n[s]==="/"&&(a=!0,s++);let A="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)A+=n[s];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),s--),!VH(A)){let u;return A.trim().length===0?u="Invalid space after '<'.":u="Tag '"+A+"' is an invalid name.",co("InvalidTag",u,ms(n,s))}const d=jH(n,s);if(d===!1)return co("InvalidAttr","Attributes for '"+A+"' have open quote.",ms(n,s));let c=d.value;if(s=d.index,c[c.length-1]==="/"){const u=s-c.length;c=c.substring(0,c.length-1);const h=Rb(c,e);if(h===!0)r=!0;else return co(h.err.code,h.err.msg,ms(n,u+h.err.line))}else if(a)if(d.tagClosed){if(c.trim().length>0)return co("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",ms(n,i));if(t.length===0)return co("InvalidTag","Closing tag '"+A+"' has not been opened.",ms(n,i));{const u=t.pop();if(A!==u.tagName){let h=ms(n,u.tagStartPos);return co("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+A+"'.",ms(n,i))}t.length==0&&(o=!0)}}else return co("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",ms(n,s));else{const u=Rb(c,e);if(u!==!0)return co(u.err.code,u.err.msg,ms(n,s-c.length+u.err.line));if(o===!0)return co("InvalidXml","Multiple possible root nodes found.",ms(n,s));e.unpairedTags.indexOf(A)!==-1||t.push({tagName:A,tagStartPos:i}),r=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=jb(n,s);continue}else if(n[s+1]==="?"){if(s=Hb(n,++s),s.err)return s}else break;else if(n[s]==="&"){const u=qH(n,s);if(u==-1)return co("InvalidChar","char '&' is not expected.",ms(n,s));s=u}else if(o===!0&&!Mb(n[s]))return co("InvalidXml","Extra text at the end",ms(n,s));n[s]==="<"&&s--}}else{if(Mb(n[s]))continue;return co("InvalidChar","char '"+n[s]+"' is not expected.",ms(n,s))}if(r){if(t.length==1)return co("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",ms(n,t[0].tagStartPos));if(t.length>0)return co("InvalidXml","Invalid '"+JSON.stringify(t.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return co("InvalidXml","Start tag expected.",1);return!0}function Mb(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Hb(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return co("InvalidXml","XML declaration allowed only at the start of the document.",ms(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function jb(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const MH='"',HH="'";function jH(n,e){let t="",r="",o=!1;for(;e<n.length;e++){if(n[e]===MH||n[e]===HH)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){o=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:o}}const RH=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Rb(n,e){const t=Mz(n,RH),r={};for(let o=0;o<t.length;o++){if(t[o][1].length===0)return co("InvalidAttr","Attribute '"+t[o][2]+"' has no space in starting.",su(t[o]));if(t[o][3]!==void 0&&t[o][4]===void 0)return co("InvalidAttr","Attribute '"+t[o][2]+"' is without value.",su(t[o]));if(t[o][3]===void 0&&!e.allowBooleanAttributes)return co("InvalidAttr","boolean attribute '"+t[o][2]+"' is not allowed.",su(t[o]));const s=t[o][2];if(!KH(s))return co("InvalidAttr","Attribute '"+s+"' is an invalid name.",su(t[o]));if(!r.hasOwnProperty(s))r[s]=1;else return co("InvalidAttr","Attribute '"+s+"' is repeated.",su(t[o]))}return!0}function $H(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function qH(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,$H(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function co(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function KH(n){return t2(n)}function VH(n){return t2(n)}function ms(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function su(n){return n.startIndex+n[1].length}const GH={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},WH=function(n){return Object.assign({},GH,n)};let Wp;typeof Symbol!="function"?Wp="@@xmlMetadata":Wp=Symbol("XML Node Metadata");class Pl{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][Wp]={startIndex:t})}static getMetaDataSymbol(){return Wp}}function XH(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,o=!1,s=!1,i="";for(;e<n.length;e++)if(n[e]==="<"&&!s){if(o&&kl(n,"!ENTITY",e)){e+=7;let a,A;[a,A,e]=YH(n,e+1),A.indexOf("&")===-1&&(t[a]={regx:RegExp(`&${a};`,"g"),val:A})}else if(o&&kl(n,"!ELEMENT",e)){e+=8;const{index:a}=ZH(n,e+1);e=a}else if(o&&kl(n,"!ATTLIST",e))e+=8;else if(o&&kl(n,"!NOTATION",e)){e+=9;const{index:a}=JH(n,e+1);e=a}else if(kl(n,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,i=""}else if(n[e]===">"){if(s?n[e-1]==="-"&&n[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else n[e]==="["?o=!0:i+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const el=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function YH(n,e){e=el(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(r2(t),e=el(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=lp(n,e,"entity"),e--,[t,r,e]}function JH(n,e){e=el(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;r2(t),e=el(n,e);const r=n.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=el(n,e);let o=null,s=null;if(r==="PUBLIC")[e,o]=lp(n,e,"publicIdentifier"),e=el(n,e),(n[e]==='"'||n[e]==="'")&&([e,s]=lp(n,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=lp(n,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:o,systemIdentifier:s,index:--e}}function lp(n,e,t){let r="";const o=n[e];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(e++;e<n.length&&n[e]!==o;)r+=n[e],e++;if(n[e]!==o)throw new Error(`Unterminated ${t} value`);return e++,[e,r]}function ZH(n,e){e=el(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!r2(t))throw new Error(`Invalid element name: "${t}"`);e=el(n,e);let r="";if(n[e]==="E"&&kl(n,"MPTY",e))e+=6;else if(n[e]==="A"&&kl(n,"NY",e))e+=4;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)r+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:r.trim(),index:e}}function kl(n,e,t){for(let r=0;r<e.length;r++)if(e[r]!==n[t+r+1])return!1;return!0}function r2(n){if(t2(n))return n;throw new Error(`Invalid entity name ${n}`)}const ej=/^[-+]?0x[a-fA-F0-9]+$/,tj=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,rj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function nj(n,e={}){if(e=Object.assign({},rj,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&ej.test(t))return aj(t,16);if(t.search(/.+[eE].+/)!==-1)return sj(n,t,e);{const r=tj.exec(t);if(r){const o=r[1]||"",s=r[2];let i=ij(r[3]);const a=o?n[s.length+1]===".":n[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!a))return n;{const A=Number(t),d=String(A);if(A===0||A===-0)return A;if(d.search(/[eE]/)!==-1)return e.eNotation?A:n;if(t.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?A:n;let c=s?i:t;return s?c===d||o+c===d?A:n:c===d||c===o+d?A:n}}else return n}}const oj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function sj(n,e,t){if(!t.eNotation)return n;const r=e.match(oj);if(r){let o=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",i=r[2],a=o?n[i.length+1]===s:n[i.length]===s;return i.length>1&&a?n:i.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):t.leadingZeros&&!a?(e=(r[1]||"")+r[3],Number(e)):n}else return n}function ij(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function aj(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Aj(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class lj{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=dj,this.parseXml=pj,this.parseTextData=cj,this.resolveNameSpace=uj,this.buildAttributesMap=fj,this.isItStopNode=wj,this.replaceEntitiesValue=vj,this.readStopNodeData=bj,this.saveTextToParentTag=mj,this.addChild=gj,this.ignoreAttributesFn=Aj(this.options.ignoreAttributes)}}function dj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function cj(n,e,t,r,o,s,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const a=this.options.tagValueProcessor(e,n,t,o,s);return a==null?n:typeof a!=typeof n||a!==n?a:this.options.trimValues?km(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?km(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function uj(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const hj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function fj(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Mz(n,hj),o=r.length,s={};for(let i=0;i<o;i++){const a=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(a,e))continue;let A=r[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);const c=this.options.attributeValueProcessor(a,A,e);c==null?s[d]=A:typeof c!=typeof A||c!==A?s[d]=c:s[d]=km(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=s,i}return s}}const pj=function(n){n=n.replace(/\r\n?/g,`
`);const e=new Pl("!xml");let t=e,r="",o="";for(let s=0;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const a=Rl(n,">",s,"Closing Tag is not closed.");let A=n.substring(s+2,a).trim();if(this.options.removeNSPrefix){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&(r=this.saveTextToParentTag(r,t,o));const d=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let c=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),t=this.tagsNodeStack.pop(),r="",s=a}else if(n[s+1]==="?"){let a=Pm(n,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const A=new Pl(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(t,A,o,s)}s=a.closeIndex+1}else if(n.substr(s+1,3)==="!--"){const a=Rl(n,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const A=n.substring(s+4,a-2);r=this.saveTextToParentTag(r,t,o),t.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}s=a}else if(n.substr(s+1,2)==="!D"){const a=XH(n,s);this.docTypeEntities=a.entities,s=a.i}else if(n.substr(s+1,2)==="!["){const a=Rl(n,"]]>",s,"CDATA is not closed.")-2,A=n.substring(s+9,a);r=this.saveTextToParentTag(r,t,o);let d=this.parseTextData(A,t.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):t.add(this.options.textNodeName,d),s=a+2}else{let a=Pm(n,s,this.options.removeNSPrefix),A=a.tagName;const d=a.rawTagName;let c=a.tagExp,u=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,o,!1));const f=t;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(t=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==e.tagname&&(o+=o?"."+A:A);const g=s;if(this.isItStopNode(this.options.stopNodes,o,A)){let w="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)s=a.closeIndex;else{const x=this.readStopNodeData(n,d,h+1);if(!x)throw new Error(`Unexpected end of ${d}`);s=x.i,w=x.tagContent}const y=new Pl(A);A!==c&&u&&(y[":@"]=this.buildAttributesMap(c,o,A)),w&&(w=this.parseTextData(w,A,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),y.add(this.options.textNodeName,w),this.addChild(t,y,o,g)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),c=A):c=c.substr(0,c.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));const w=new Pl(A);A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,g),o=o.substr(0,o.lastIndexOf("."))}else{const w=new Pl(A);this.tagsNodeStack.push(t),A!==c&&u&&(w[":@"]=this.buildAttributesMap(c,o,A)),this.addChild(t,w,o,g),t=w}r="",s=h}}else r+=n[s];return e.child};function gj(n,e,t,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(e.tagname,t,e[":@"]);o===!1||(typeof o=="string"&&(e.tagname=o),n.addChild(e,r))}const vj=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function mj(n,e,t,r){return n&&(r===void 0&&(r=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function wj(n,e,t){const r="*."+t;for(const o in n){const s=n[o];if(r===s||e===s)return!0}return!1}function yj(n,e,t=">"){let r,o="";for(let s=e;s<n.length;s++){let i=n[s];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===t[0])if(t[1]){if(n[s+1]===t[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Rl(n,e,t,r){const o=n.indexOf(e,t);if(o===-1)throw new Error(r);return o+e.length-1}function Pm(n,e,t,r=">"){const o=yj(n,e+1,r);if(!o)return;let s=o.data;const i=o.index,a=s.search(/\s/);let A=s,d=!0;a!==-1&&(A=s.substring(0,a),s=s.substring(a+1).trimStart());const c=A;if(t){const u=A.indexOf(":");u!==-1&&(A=A.substr(u+1),d=A!==o.data.substr(u+1))}return{tagName:A,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:c}}function bj(n,e,t){const r=t;let o=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const s=Rl(n,">",t,`${e} is not closed`);if(n.substring(t+2,s).trim()===e&&(o--,o===0))return{tagContent:n.substring(r,t),i:s};t=s}else if(n[t+1]==="?")t=Rl(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Rl(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Rl(n,"]]>",t,"StopNode is not closed.")-2;else{const s=Pm(n,t,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,t=s.closeIndex)}}function km(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:nj(n,t)}else return OH(n)?n:""}const l0=Pl.getMetaDataSymbol();function _j(n,e){return Hz(n,e)}function Hz(n,e,t){let r;const o={};for(let s=0;s<n.length;s++){const i=n[s],a=xj(i);let A="";if(t===void 0?A=a:A=t+"."+a,a===e.textNodeName)r===void 0?r=i[a]:r+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Hz(i[a],e,A);const c=zj(d,e);i[l0]!==void 0&&(d[l0]=i[l0]),i[":@"]?Bj(d,i[":@"],A,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,A,c)?o[a]=[d]:o[a]=d}}}return typeof r=="string"?r.length>0&&(o[e.textNodeName]=r):r!==void 0&&(o[e.textNodeName]=r),o}function xj(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function Bj(n,e,t,r){if(e){const o=Object.keys(e),s=o.length;for(let i=0;i<s;i++){const a=o[i];r.isArray(a,t+"."+a,!0,!0)?n[a]=[e[a]]:n[a]=e[a]}}}function zj(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class Cj{constructor(e){this.externalEntities={},this.options=WH(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=NH(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new lj(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(e);return this.options.preserveOrder||o===void 0?o:_j(o,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return Pl.getMetaDataSymbol()}}class jz{constructor(){this.partner_key="JUZFJThGJUQ0JUQ0JUNCUVBD",this.key="JUI5JTgyR3QlMTMtUSVBRiUxMyVEQUslQzclN0ZHJTBCVzQlOUUyLSUxMiUwRmMlODQlNUMlRTglQTYlRjUlMTVMJThBVTclRTIlOTElM0E=",this.parser=new Cj({ignoreAttributes:!1,trimValues:!0})}async getProduct(e){var t,r;try{const o=await ro.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Search.php",{params:{partner_key:this.partner_key,key:this.key,goodsNo:e}});if(typeof o.data!="string")throw new Error("XML    .");const i=this.parser.parse(o.data).data.return.goods_data,a=((t=i.optionName)==null?void 0:t.split("^|^").map(d=>d))||[];console.log({godoProduct:i});const A=a.map((d,c)=>{var g;const u=((g=i.optionData)==null?void 0:g.map(w=>w[`optionValue${c+1}`]).filter(w=>w))||[],h=[...new Set(u)],f=h.map(w=>{var y,x;if(c===0){const I=(((x=(y=i.optionData)==null?void 0:y.find(k=>k[`optionValue${c+1}`]===w))==null?void 0:x.optionImage)||"").split("http").pop();return I?"http"+I:""}return""});return{title:d,values:h,images:f}});return{title:i.goodsNm,description:i.goodsDescription,handle:i.goodsNo,thumbnail:i.listImageData?i.listImageData["#text"]:"",goodsNo:i.goodsNo,goodsNm:i.goodsNm,goodsDescription:i.goodsDescription.replace(/\\r\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\/g,"")||"",status:"draft",productOptionValues:A,variants:((r=i.optionData)==null?void 0:r.map(d=>{const c=Array.from({length:5},(g,w)=>d[`optionValue${w+1}`]).filter(g=>g!==void 0&&g!==""),h=(d.optionImage||"").split("http").pop(),f=h?"http"+h:"";return{title:c.join(" / "),sku:d.optionCode||`${i.goodsNo}-${c.join("-")}`,thumbnail:f,barcode:"",inventory_quantity:parseInt(d.stockCnt||"0"),price:parseInt(i.goodsPrice+d.optionPrice||"0")}}))||[],mallType:"godo5",mallProductId:e,textOptionData:i.textOptionData}}catch(o){throw console.error("Godo5 API Error:",o),new Error("5    .")}}async getAddProduct(e){try{const t=await ro.get("https://openhub.godo.co.kr/godomall5/goods/Goods_Add_Search.php",{params:{partner_key:this.partner_key,key:this.key,addGoodsNo:e}});if(typeof t.data!="string")throw new Error("XML    .");console.log({response:t});const r=this.parser.parse(t.data);console.log({result:r});const o=r.data.return.goods_data;return console.log({addGoodsData:o}),{addGoodsNo:o.addGoodsNo,goodsNm:o.goodsNm,goodsPrice:parseInt(o.goodsPrice||"0"),stockCnt:parseInt(o.stockCnt||"0"),listImageData:o.listImageData,soldOutFl:o.soldOutFl==="y"}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}parseOptionInfo(e){try{return JSON.parse(e).map(r=>({name:r[0]||"",value:r[1]||"",code:r[2]||"",stock:r[3]||"",price:parseInt(r[3]||"0")})).filter(r=>r.name&&r.value)}catch(t){return console.error("   :",t),[]}}getOptionCode(e){try{return JSON.parse(e)[0][2]||""}catch(t){return console.error("   :",t),""}}async getOrder(e){try{const t=await ro.get("https://openhub.godo.co.kr/godomall5/order/Order_Search.php",{params:{partner_key:this.partner_key,key:this.key,orderNo:e}});if(typeof t.data!="string")throw new Error("XML    .");const o=this.parser.parse(t.data).data.return.order_data;return console.log({orderData:o}),{orderNo:o.orderNo,orderDate:o.orderDate,orderStatus:o.orderStatus,orderName:o.orderInfoData.orderName,orderEmail:o.orderInfoData.orderEmail,orderPhone:o.orderInfoData.orderPhone,receiverName:o.orderInfoData.receiverName,receiverPhone:o.orderInfoData.receiverPhone,receiverAddress:`${o.orderInfoData.receiverZonecode} ${o.orderInfoData.receiverAddress} ${o.orderInfoData.receiverAddressSub}`,totalPrice:parseInt(o.settlePrice),orderGoodsData:Array.isArray(o.orderGoodsData)?o.orderGoodsData.map(s=>({goodsNo:s.goodsNo||"",goodsNm:s.goodsNm||"",goodsType:"orderGoods",goodsCnt:s.goodsCnt||0,goodsPrice:s.goodsPrice||0,listImageData:s.listImageData||"",exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[],addGoodsData:Array.isArray(o.addGoodsData)?o.addGoodsData.map(s=>({goodsNm:s.goodsNm,addGoodsNo:s.addGoodsNo,goodsType:"addGoods",goodsCnt:parseInt(String(s.goodsCnt)),goodsPrice:parseInt(String(s.goodsPrice)),listImageData:s.listImageData,exist:!1,options:this.parseOptionInfo(s.optionInfo||"[]"),orderCd:s.orderCd||"",optionCode:this.getOptionCode(s.optionInfo||"")})):[]}}catch(t){throw console.error("Godo5 API Error:",t),new Error("5    .")}}}new jz;async function Sj(n,e){const t=[],r=n.filter(o=>o.product&&o.product.mall_type==="godo5"&&o.product.mall_product_id);if(r.length===0)return console.log("5  ."),t;console.log(`${r.length} 5  .`);try{const o=document.createElement("form");o.method="POST",o.action="/order/cart_ps.php",o.style.display="none";const s=(i,a)=>{const A=document.createElement("input");A.type="hidden",A.name=i,A.value=a,o.appendChild(A)};s("mode","cartIn"),s("cartMode","d"),s("useBundleGoods","1"),s("scmNo","1");for(const i of r)try{const A=i.product.mall_product_id,d=i.idx;let c=1;i.isAdditionalCost?c=1:c=Array.isArray(i.items)?i.items.reduce((f,g)=>f+(g.quantity||0),0):1;let u="";e&&d!==void 0&&(i.isAdditionalCost?u=`${e}-add-${i.id}`:u=`${e}-${d}`);const h=await Fj(i.product.mall_product_id);console.log(`   (${i.isAdditionalCost?"":""}):`,h),s("goodsNo[]",A),s("goodsCnt[]",c.toString()),s("optionFl[]","n"),s("displayOptionkey[]",""),s("goodsPriceSum[]","0"),s("addGoodsPriceSum[]","0"),u&&h.textOptionData.optionName==="odiz"&&s(`optionText[${d}][${h.textOptionData.sno}]`,u),t.push(A)}catch(a){console.error("    :",a)}return document.body.appendChild(o),console.log(o),o.submit(),console.log(`${r.length} 5     `),t}catch(o){return console.error("    :",o),t}}async function Ej(n){var t,r,o,s;const e={success:!1,submittedOrders:[]};try{const i=((t=n[0])==null?void 0:t.estimate_id)||((s=(o=(r=n[0])==null?void 0:r.items)==null?void 0:o[0])==null?void 0:s.estimate_id),a=await Sj(n,i);a.length>0&&(e.submittedOrders.push({mallType:"godo5",productIds:a}),e.success=!0)}catch(i){console.error("    :",i)}return e}async function Fj(n){return await new jz().getProduct(n)}var Ij=W('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600 odz-transition-colors"><!></button>'),Uj=W('<button type="button" class="odz-btn odz-btn-outline odz-btn-sm sm:odz-btn-md"></button>'),Qj=W('<div class="odz-mt-3 odz-text-sm odz-text-gray-600"><span class="odz-font-medium odz-text-indigo-600"> </span>  .</div>'),Tj=W('<button class="odz-btn odz-btn-outline odz-ml-2"></button>'),Lj=W('<div class="odz-text-xs odz-text-gray-500 odz-mt-2"> </div>'),Pj=W('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm"> </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"></span></label> <input type="date" class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button> <!></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mt-3"><button class="odz-btn odz-btn-xs odz-btn-outline">1</button> <button class="odz-btn odz-btn-xs odz-btn-outline"></button> <button class="odz-btn odz-btn-xs odz-btn-outline">6</button> <button class="odz-btn odz-btn-xs odz-btn-outline">1</button></div> <!></div></fieldset></div></div>'),kj=W('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-6"><div class="odz-card-body odz-p-4"><fieldset class="odz-border odz-border-solid odz-border-base-300 odz-rounded-md odz-p-4"><legend class="odz-px-2 odz-font-medium odz-text-sm">  </legend> <div class="odz-form-control odz-w-full"><div class="odz-flex odz-flex-row odz-flex-wrap odz-gap-3 odz-items-end"><div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-flex-1 odz-min-w-200"><label class="odz-label odz-pb-1"><span class="odz-label-text"> *</span></label> <input type="text" placeholder=" " class="odz-input odz-input-bordered odz-w-full"></div> <div class="odz-mt-6"><button class="odz-btn odz-btn-primary"><svg xmlns="http://www.w3.org/2000/svg" class="odz-h-5 odz-w-5 odz-mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> </button></div></div> <div class="odz-text-xs odz-text-gray-500 odz-mt-2">* /      .</div></div></fieldset></div></div>'),Oj=W('<div class="odz-flex odz-gap-2 odz-mb-4 odz-border-b odz-border-gray-200"><button type="button"> </button> <button type="button">  (2026 )</button></div>'),Dj=W('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),Nj=W('<div class="odz-alert odz-alert-error"><span> </span></div>'),Mj=W('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8"><!></div>'),Hj=W('<img loading="lazy" class="odz-w-24 odz-h-24 odz-rounded-xl odz-object-cover odz-ring-2 odz-ring-gray-100 odz-transition-transform odz-duration-300 group-hover:odz-scale-105"> <div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100" style="display: none;"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>',1),jj=W('<div class="odz-w-24 odz-h-24 odz-rounded-xl odz-bg-gradient-to-br odz-from-indigo-50 odz-via-purple-50 odz-to-pink-50 odz-flex odz-items-center odz-justify-center odz-ring-2 odz-ring-gray-100"><svg class="odz-w-10 odz-h-10 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Rj=W('<div class="odz-absolute -odz-bottom-2 -odz-right-2 odz-bg-indigo-600 odz-text-white odz-text-xs odz-font-bold odz-px-2.5 odz-py-1 odz-rounded-full odz-shadow-lg odz-ring-2 odz-ring-white"> </div>'),$j=W('<p class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-truncate"> <!></p>'),qj=W('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-medium odz-border odz-border-indigo-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> </span>'),Kj=W('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3 odz-py-1.5 odz-rounded-lg odz-bg-amber-50 odz-text-amber-700 odz-text-xs odz-font-medium odz-border odz-border-amber-100"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </span>'),Vj=ig('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>'),Gj=ig('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>',1),Wj=W('<button class="odz-btn odz-btn-outline odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg> </button>'),Xj=W('<article class="odz-group odz-relative odz-flex odz-flex-col odz-overflow-hidden odz-bg-white odz-border odz-border-gray-200 odz-rounded-2xl odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all odz-duration-300 hover:odz-shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:odz-border-indigo-200"><div class="odz-absolute odz-top-4 odz-right-4 odz-z-10"><span><svg class="odz-w-2 odz-h-2 odz-fill-current svelte-w5j70w" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" class="svelte-w5j70w"></circle></svg> </span></div> <div class="odz-flex odz-flex-col lg:odz-flex-row"><div class="odz-flex odz-flex-1 odz-flex-col odz-p-6"><div class="odz-flex odz-items-start odz-gap-5 odz-mb-5"><div class="odz-relative odz-flex-shrink-0"><!> <!></div> <div class="odz-flex-1 odz-min-w-0 odz-pt-1"><h3 class="odz-text-xl odz-font-bold odz-text-slate-900 odz-mb-2 odz-line-clamp-2 odz-leading-tight"> </h3> <!> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><svg class="odz-w-3.5 odz-h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div></div></div> <div class="odz-flex odz-flex-wrap odz-gap-2 odz-mb-5"><!> <!></div> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-amber-100 odz-text-amber-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-3 odz-p-5 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-xl odz-border odz-border-slate-200"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"></span> <span class="odz-text-base odz-font-bold odz-text-gray-900"> </span></div> <div class="odz-flex odz-flex-col odz-gap-1.5 odz-col-span-2 sm:odz-col-span-1"><span class="odz-text-xs odz-text-gray-600 odz-font-medium"> </span> <span class="odz-text-lg odz-font-bold odz-text-indigo-600"> </span></div></div></div> <div class="odz-flex odz-flex-col odz-gap-4 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-gray-50 odz-border-t lg:odz-border-t-0 lg:odz-border-l odz-border-gray-200 lg:odz-w-56 odz-justify-between"><div class="odz-flex odz-flex-col odz-gap-2"><span class="odz-text-xs odz-font-medium odz-text-gray-500 odz-uppercase odz-tracking-wide"> </span> <button type="button"><svg class="odz-w-4 odz-h-4 svelte-w5j70w" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" class="svelte-w5j70w"></path></svg> </button></div> <div class="odz-flex odz-flex-col odz-gap-2.5"><button class="odz-btn odz-btn-primary odz-w-full odz-shadow-sm hover:odz-shadow-md odz-transition-all"><svg class="odz-w-4 odz-h-4 odz-mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button> <!></div></div></div></article>'),Yj=W('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),Jj=W('<div class="odz-flex odz-justify-center odz-my-8"><span class="odz-loading odz-loading-spinner odz-loading-lg"></span></div>'),Zj=W('<div class="odz-alert odz-alert-error"><span> </span></div>'),eR=W('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),tR=W('<button type="button" class="odz-absolute odz-right-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400 hover:odz-text-gray-600"><!></button>'),rR=W('<div class="odz-text-center odz-text-sm odz-text-gray-500 odz-my-8">  .</div>'),nR=W('<span class="odz-text-gray-300">|</span> <span> </span>',1),oR=W('<img class="odz-w-12 odz-h-12 odz-rounded odz-object-cover odz-flex-shrink-0">'),sR=W('<div class="odz-w-12 odz-h-12 odz-rounded odz-bg-gray-200 odz-flex odz-items-center odz-justify-center odz-flex-shrink-0"><!></div>'),iR=W('<div class="odz-flex odz-items-center odz-gap-3 odz-p-3 odz-bg-gray-50 odz-rounded-lg odz-border odz-border-gray-100"><!> <div class="odz-flex-1 odz-min-w-0"><p class="odz-text-sm odz-font-medium odz-text-slate-900 odz-truncate"> </p> <p class="odz-text-xs odz-text-gray-500 odz-truncate"> </p></div> <button type="button" class="odz-btn odz-btn-xs odz-btn-outline odz-flex-shrink-0"><!> </button></div>'),aR=W('<div class="odz-px-5 odz-mb-4"><div class="odz-text-xs odz-font-medium odz-text-gray-500 odz-mb-2 odz-flex odz-items-center odz-gap-1"><!> </div> <div class="odz-flex odz-flex-col odz-gap-2"></div></div>'),AR=W("<span> </span>"),lR=W('<div class="odz-card odz-bg-white odz-border odz-border-gray-200 odz-shadow-sm odz-rounded-2xl odz-overflow-hidden"><div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-pt-5"><span> </span> <span class="odz-text-sm odz-text-gray-500"> </span></div> <div class="odz-p-5"><h3 class="odz-font-bold odz-text-lg odz-text-slate-900 odz-mb-1"> </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-3"> </p> <div class="odz-flex odz-items-center odz-gap-2 odz-text-xs odz-text-gray-500"><span> </span> <!></div></div> <!> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-3 odz-gap-3 odz-mx-5 odz-mb-5 odz-p-4 odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-50/50 odz-rounded-xl odz-border odz-border-gray-100"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-indigo-100 odz-text-indigo-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-emerald-100 odz-text-emerald-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-items-center odz-justify-center odz-w-9 odz-h-9 odz-rounded-lg odz-bg-sky-100 odz-text-sky-600"><!></div> <div class="odz-flex odz-flex-col odz-min-w-0"><span class="odz-text-xs odz-text-gray-500"></span> <span class="odz-text-sm odz-font-semibold odz-text-slate-900 odz-truncate"> </span></div></div></div> <div class="odz-flex odz-justify-between odz-items-center odz-px-5 odz-py-4 odz-border-t odz-border-gray-100 odz-bg-gray-50/50"><div class="odz-text-sm odz-text-gray-500"><!></div> <div class="odz-text-right"><span class="odz-text-xs odz-text-gray-500"></span> <p class="odz-text-lg odz-font-bold odz-text-primary"> </p></div></div></div>'),dR=W('<div class="odz-flex odz-flex-col odz-gap-4"></div>'),cR=W('<div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="text" placeholder=", , , , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10"> <!></div></div></div></div> <div class="odz-bg-emerald-50 odz-border odz-border-emerald-200 odz-rounded-lg odz-p-4 odz-mb-4"><p class="odz-text-sm odz-text-emerald-800"><strong></strong>    <strong> </strong> .</p></div> <!>',1),uR=W('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),hR=W('<div class="odz-fixed odz-inset-0 odz-flex odz-items-center odz-justify-center odz-bg-black odz-bg-opacity-50 odz-z-50"><div class="odz-bg-white odz-p-6 odz-rounded-lg odz-shadow-xl"><div class="odz-flex odz-flex-col odz-items-center"><span class="odz-loading odz-loading-spinner odz-loading-lg odz-mb-4"></span> <p class="odz-text-lg odz-font-medium">  ...</p> <p class="odz-text-sm odz-text-gray-500 odz-mt-2">  </p></div></div></div>'),fR=W('<div class="odz-w-full"><h2 class="odz-text-xl odz-font-bold odz-mb-4"> </h2> <div class="odz-card odz-bg-base-100 odz-shadow-sm odz-mb-4"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-3"><div class="odz-relative odz-flex-1"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <input type="text" placeholder=", , ,  ..." class="odz-input odz-input-bordered odz-w-full odz-pl-10 odz-pr-10"> <!></div> <div class="odz-relative odz-min-w-[140px]"><div class="odz-absolute odz-left-3 odz-top-1/2 odz-transform -odz-translate-y-1/2 odz-text-gray-400"><!></div> <select class="odz-select odz-select-bordered odz-w-full odz-pl-9"><option> </option><option></option><option></option><option></option><option></option><option></option></select></div> <!></div> <!></div></div> <!> <!> <!> <!> <!></div> <!> <dialog id="password_confirm_modal"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg odz-mb-4">  </h3> <p class="odz-text-sm odz-mb-4">     .</p> <div class="odz-form-control odz-w-full"><label class="odz-label"><span class="odz-label-text"></span></label> <input type="password" placeholder=" "> <!></div> <div class="odz-modal-action"><button class="odz-btn odz-btn-outline"></button> <button class="odz-btn odz-btn-primary"></button></div></div> <div class="odz-modal-backdrop"></div></dialog> <!>',1);function pR(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(oi,"$shopStore",t),s=()=>fn($l,"$customerStore",t),i=Se(),a=Se();let A=gt(e,"openEstimateModal",8,()=>{}),d=Se([]),c=Se(!0),u=Se(null),h,f=Se(!1),g=Se(null),w=Se(""),y=Se(""),x=Se(null),C=Se(""),I=Se(""),N=Se(""),k=Se(!1),ee=Se(!1),G=Se(""),H=Se(""),Y=Se(!1);function Be(){b(w,""),b(y,""),b(C,"")}let M=Se(!1),O=Se(""),J=null,re=Se(""),he=Se(!1),ie=null,be=Se(null),te=Se("current"),Z=Se([]),Ae=Se(!1),we=Se(null),z=!1,F=Se(""),E=Se(""),U=Se(null);const P={thumbnail:null,productNames:[],itemCount:0,totalQuantity:0};let T={};Xn(async()=>{try{if(l(k)){b(c,!0);try{console.log("[ODIZ Debug]   "),console.log("[ODIZ Debug] shop_id:",o().id),console.log("[ODIZ Debug] sess:",o().sess),console.log("[ODIZ Debug] mallType:",s().mallType);const Ze=await pt.from("estimates").select("*").eq("shop_id",o().id).is("customer_id",null).eq("sess",o().sess).neq("status","temp").order("created_at",{ascending:!1});if(Ze.error)throw Ze.error;b(d,Ze.data||[]),s().mallType&&s().mallType.trim()!==""&&b(d,l(d).filter(Qt=>Qt.mall_type===s().mallType)),await le(l(d))}catch(Ze){console.error("    :",Ze),b(d,[])}b(c,!1)}else{const Ze=new Date,Qt=new Date(Ze);Qt.setMonth(Qt.getMonth()-1),b(G,$(Qt)),b(H,$(Ze)),b(Y,!0);const{getEstimatesWithDateFilter:Mt}=await ks(async()=>{const{getEstimatesWithDateFilter:jt}=await Promise.resolve().then(()=>gv);return{getEstimatesWithDateFilter:jt}},void 0);b(d,await Mt(o().sess,o().customer_id,o().id,l(G),l(H))),await le(l(d)),h=i5(o().sess,o().id,async jt=>{var mr,ur,ar,Hr,Rr,Xt;jt.eventType==="UPDATE"?((mr=jt.new)==null?void 0:mr.status)!=="temp"?(b(d,l(d).map(pr=>pr.id===jt.new.id?{...pr,...jt.new}:pr)),await ue((ur=jt.new)==null?void 0:ur.id)):(b(d,l(d).filter(pr=>pr.id!==jt.new.id)),Ie((ar=jt.new)==null?void 0:ar.id)):jt.eventType==="INSERT"?((Hr=jt.new)==null?void 0:Hr.status)!=="temp"&&(b(d,[jt.new,...l(d)]),await ue((Rr=jt.new)==null?void 0:Rr.id)):jt.eventType==="DELETE"&&(b(d,l(d).filter(pr=>pr.id!==jt.old.id)),Ie((Xt=jt.old)==null?void 0:Xt.id))},o().customer_id)}}catch(Ze){b(u,Ze.message||"     ."),T={}}finally{b(c,!1)}}),Xo(()=>{h&&h.unsubscribe()});function R(Ze){if(!Ze)return"";const Qt=new Date(Ze);return`${Qt.getFullYear()}-${String(Qt.getMonth()+1).padStart(2,"0")}-${String(Qt.getDate()).padStart(2,"0")}`}function $(Ze){const Qt=Ze.getFullYear(),Mt=String(Ze.getMonth()+1).padStart(2,"0"),jt=String(Ze.getDate()).padStart(2,"0");return`${Qt}-${Mt}-${jt}`}function j(Ze){const Qt=new Date,Mt=$(Qt);let jt=new Date(Qt);switch(Ze){case"1week":jt.setDate(jt.getDate()-7);break;case"1month":jt.setMonth(jt.getMonth()-1);break;case"6months":jt.setMonth(jt.getMonth()-6);break;case"1year":jt.setFullYear(jt.getFullYear()-1);break}b(G,$(jt)),b(H,Mt)}function ae(Ze){return{1:"",2:"",3:"",4:"",5:"",6:""}[Ze]||`${Ze}`}function Ee(Ze){return{1:"odz-badge-warning",2:"odz-badge-info",3:"odz-badge-success",4:"odz-badge-primary",5:"odz-badge-neutral",6:"odz-badge-error"}[Ze]||"odz-badge-ghost"}function _e(Ze){return!Ze||Ze==="0000-00-00 00:00:00"?"-":new Date(Ze).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})}function Le(Ze){const Qt=typeof Ze=="string"?parseFloat(Ze):Ze;return isNaN(Qt)?"0":Qt.toLocaleString("ko-KR")+""}function X(Ze){return!Ze.imageStorage||!Ze.imagePath||!Ze.imageName?"":`${Ze.imageStorage}/${Ze.imagePath}${Ze.imageName}`}function D(Ze){try{if(!Ze)return{summary:"-",totalQty:0};const Qt=Ze.replace(/\\"/g,'"'),Mt=JSON.parse(Qt);if(!Array.isArray(Mt)||Mt.length===0)return{summary:"-",totalQty:0};const jt=Mt.reduce((Hr,Rr)=>Hr+(Rr.ea||0),0),mr=Mt[0],ur=[mr.optionValue1,mr.optionValue2].filter(Boolean).join(" / ");return{summary:Mt.length>1?`${ur}  ${Mt.length-1} `:ur,totalQty:jt}}catch{return{summary:"-",totalQty:0}}}function oe(Ze){const Qt=`http://dantee771.godomall.com/estimate/estimate_goods_design.php?estimateGoodsSno=${Ze}`;window.open(Qt,`design_${Ze}`,"width=900,height=700,scrollbars=yes,resizable=yes")}function ve(Ze){const Qt=new Set;let Mt=null,jt=0,mr=0;return(Ze||[]).forEach((ar,Hr)=>{var pr,Pr;if(!ar)return;mr+=1,jt+=ar.quantity||0;const Rr=(pr=ar.product)==null?void 0:pr.title;Rr&&Qt.add(Rr);const Xt=(Pr=ar.product)==null?void 0:Pr.thumbnail;!Mt&&Xt&&(Mt=Xt)}),{thumbnail:Mt,productNames:Array.from(Qt),itemCount:mr,totalQuantity:jt}}async function le(Ze){const Qt=Ze.map(Mt=>Mt.id).filter(Mt=>!!Mt);if(Qt.length===0){T={};return}try{const{data:Mt,error:jt}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).in("estimate_id",Qt);if(jt){console.error("    :",jt);return}const mr={};(Mt||[]).forEach(ar=>{ar!=null&&ar.estimate_id&&(mr[ar.estimate_id]||(mr[ar.estimate_id]=[]),mr[ar.estimate_id].push(ar))});const ur={};Qt.forEach(ar=>{ur[ar]=ve(mr[ar])}),T=ur}catch(Mt){console.error("     :",Mt)}}async function ue(Ze){if(Ze)try{const{data:Qt,error:Mt}=await pt.from("estimate_items").select(`
          estimate_id,
          idx,
          quantity,
          product:products(
            title,
            thumbnail
          )
        `).eq("estimate_id",Ze);if(Mt){console.error("[ERROR]      :",Mt),console.error("[ERROR] estimateId:",Ze);return}const jt=ve(Qt);T={...T,[Ze]:jt}}catch(Qt){console.error("[ERROR]       :",Qt),console.error("[ERROR] estimateId:",Ze)}}function Ie(Ze){if(!Ze)return;const{[Ze]:Qt,...Mt}=T;T=Mt}function Ne(Ze){return Ze&&T[Ze]||P}function ze(Ze){switch(Ze){case"pending":return"";case"progress":return"";case"completed":return"";case"temp":return"";case"canceled":return"";case"hold":return"";default:return""}}function Ce(Ze){switch(Ze){case"pending":return"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200";case"progress":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"canceled":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";case"hold":case"temp":return"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function pe(Ze){switch(Ze){case"none":return" ";case"waiting":return" ";case"processing":return" ";case"confirming":return" ";case"completed":return" ";case"rejected":return" ";default:return"-"}}function Oe(Ze){switch(Ze){case"none":return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200";case"waiting":return"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200";case"processing":return"odz-bg-indigo-100 odz-text-indigo-700 odz-border-indigo-200";case"confirming":return"odz-bg-purple-100 odz-text-purple-700 odz-border-purple-200";case"completed":return"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200";case"rejected":return"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200";default:return"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}function ke(Ze){b(g,Ze),b(f,!0)}async function me(){b(c,!0),b(u,null),b(ee,!0);try{b(d,await h5(o().id,l(I),l(N),o().sess,s().mallType)),await le(l(d)),l(d).length===0&&(!l(I)&&!l(N)?b(u,"   ."):b(u,"    ."))}catch(Ze){b(u,Ze.message||"    ."),b(d,[]),T={}}finally{b(c,!1)}}async function q(){if(!l(G)&&!l(H)){b(u,"   .");return}b(c,!0),b(u,null),b(Y,!0);try{const{getEstimatesWithDateFilter:Ze}=await ks(async()=>{const{getEstimatesWithDateFilter:Qt}=await Promise.resolve().then(()=>gv);return{getEstimatesWithDateFilter:Qt}},void 0);b(d,await Ze(o().sess,o().customer_id,o().id,l(G),l(H))),await le(l(d)),l(d).length===0&&b(u,"   .")}catch(Ze){b(u,Ze.message||"    ."),b(d,[]),T={}}finally{b(c,!1)}}async function de(){b(u,null);const Ze=new Date,Qt=new Date(Ze);Qt.setMonth(Qt.getMonth()-1),b(G,$(Qt)),b(H,$(Ze)),b(Y,!0),b(c,!0);try{const{getEstimatesWithDateFilter:Mt}=await ks(async()=>{const{getEstimatesWithDateFilter:jt}=await Promise.resolve().then(()=>gv);return{getEstimatesWithDateFilter:jt}},void 0);b(d,await Mt(o().sess,o().customer_id,o().id,l(G),l(H))),await le(l(d))}catch(Mt){b(u,Mt.message||"     ."),T={}}finally{b(c,!1)}}function ye(Ze){l(k)&&Ze.status==="pending"?(J=Ze,b(O,""),b(re,""),b(M,!0)):window.location.href=`?mode=register&estimateId=${Ze.id}`}async function Fe(){if(!J||!l(O).trim()){b(re," .");return}try{const{data:Ze,error:Qt}=await pt.from("estimates").select("id").eq("id",J.id).eq("password",l(O)).single();if(Qt||!Ze){b(re,"  .");return}b(M,!1),A()(!0,J)}catch(Ze){b(re,"    ."),console.error("  :",Ze)}}function Pe(){b(M,!1),b(O,""),b(re,""),J=null}async function nt(Ze){if(!(!Ze||!Ze.id))try{b(he,!0),b(be,Ze.id);const Qt=await f5(Ze.id);let Mt=[...Qt];const jt=await v5(Ze.id);if((jt==null?void 0:jt.length)>0){const ur=Qt.length>0?Math.max(...Qt.map(Hr=>Hr.idx||0)):0,ar=jt.map((Hr,Rr)=>({...Hr,idx:ur+Rr+1,items:Hr.items.map(Xt=>({...Xt,idx:ur+Rr+1}))}));Mt=[...Mt,...ar]}if(!Mt.some(ur=>ur.product&&ur.product.mall_type==="godo5"&&ur.product.mall_product_id)){alert("5    .");return}if(ie=await Ej(Mt),ie.success){const ur=ie.submittedOrders.reduce((ar,Hr)=>ar+Hr.productIds.length,0);alert(` .  ${ur}  .`)}else alert("  .   .")}catch(Qt){console.error("    :",Qt),alert("    : "+Qt.message)}finally{b(he,!1)}}async function qe(){var jt,mr,ur;const Ze=(jt=document.getElementById("odiz-customer-id"))==null?void 0:jt.value,Qt=(mr=document.getElementById("odiz-customer-name"))==null?void 0:mr.value,Mt=(ur=document.getElementById("odiz-customer-phone"))==null?void 0:ur.value;if(console.log("[ODIZ Debug]    "),console.log("[ODIZ Debug] customerId:",Ze),console.log("[ODIZ Debug] customerName:",Qt),console.log("[ODIZ Debug] customerPhone:",Mt),!Ze||!Qt||!Mt){b(we,"    .");return}b(Ae,!0),b(we,null);try{const ar=`https://dantee7728.godomall.com/proxy/api_proxy.php?endpoint=estimate/get_data&memId=${encodeURIComponent(Ze)}&orderName=${encodeURIComponent(Qt)}&orderPhone=${encodeURIComponent(Mt)}`;console.log("[ODIZ Debug] API URL:",ar);const Hr=await fetch(ar);if(!Hr.ok)throw new Error(`API  : ${Hr.status}`);const Rr=await Hr.json();console.log("[ODIZ Debug] API :",Rr),b(Z,Array.isArray(Rr)?Rr:Rr.data||Rr.estimates||[Rr]),z=!0}catch(ar){console.error("Previous estimates API error:",ar),b(we,"     .")}finally{b(Ae,!1)}}async function je(Ze){b(te,Ze),Ze==="previous"&&!z&&await qe()}Jt(()=>(l(x),l(w)),()=>{l(x)&&clearTimeout(l(x)),b(x,setTimeout(()=>{b(y,l(w))},300))}),Jt(()=>(l(d),l(C),l(y)),()=>{b(i,l(d).filter(Ze=>{var Qt,Mt,jt,mr,ur;if(l(C)&&Ze.status!==l(C))return!1;if(l(y)){const ar=l(y).toLowerCase().trim(),Rr=Ne(Ze.id).productNames.join(" ").toLowerCase();return((Qt=Ze.estimate_no)==null?void 0:Qt.toLowerCase().includes(ar))||((Mt=Ze.name)==null?void 0:Mt.toLowerCase().includes(ar))||((jt=Ze.organization_name)==null?void 0:jt.toLowerCase().includes(ar))||((mr=Ze.order_name)==null?void 0:mr.toLowerCase().includes(ar))||((ur=Ze.order_phone)==null?void 0:ur.includes(ar))||Rr.includes(ar)}return!0}))}),Jt(()=>(l(U),l(F)),()=>{l(U)&&clearTimeout(l(U)),b(U,setTimeout(()=>{b(E,l(F))},300))}),Jt(()=>(l(Z),l(E)),()=>{b(a,l(Z).filter(Ze=>{var Qt,Mt,jt,mr,ur,ar;if(Ze.state!==3)return!1;if(l(E)){const Hr=l(E).toLowerCase().trim();return String(Ze.estimateNo).includes(Hr)||((Qt=Ze.estimateNm)==null?void 0:Qt.toLowerCase().includes(Hr))||((Mt=Ze.ex1)==null?void 0:Mt.toLowerCase().includes(Hr))||((jt=Ze.receiverName)==null?void 0:jt.toLowerCase().includes(Hr))||((mr=Ze.memNm)==null?void 0:mr.toLowerCase().includes(Hr))||((ur=Ze.receiverCellPhone)==null?void 0:ur.includes(Hr))||((ar=Ze.orderGoodsNm)==null?void 0:ar.toLowerCase().includes(Hr))}return!0}))}),Jt(()=>o(),()=>{b(k,!o().customer_id)}),mo(),an();var fe=fR(),Me=ut(fe),At=B(m(Me),2),Ve=m(At),Ye=m(Ve),ot=m(Ye),ht=m(ot),Ge=m(ht);vp(Ge,{size:18});var it=B(ht,2),zt=B(it,2);{var xt=Ze=>{var Qt=Ij(),Mt=m(Qt);Yl(Mt,{size:16}),tt("click",Qt,()=>{b(w,""),b(y,"")}),Q(Ze,Qt)};xe(zt,Ze=>{l(w)&&Ze(xt)})}var Tt=B(ot,2),yt=m(Tt),rt=m(yt);iE(rt,{size:16});var Dt=B(yt,2);De(()=>{l(C),Tu(()=>{})});var St=m(Dt);St.value=((St.__value="")==null,"");var Nt=B(St);Nt.value=(Nt.__value="pending")==null?"":"pending";var Je=B(Nt);Je.value=(Je.__value="progress")==null?"":"progress";var mt=B(Je);mt.value=(mt.__value="completed")==null?"":"completed";var vt=B(mt);vt.value=(vt.__value="hold")==null?"":"hold";var $t=B(vt);$t.value=($t.__value="canceled")==null?"":"canceled";var nr=B(Tt,2);{var Ht=Ze=>{var Qt=Uj();tt("click",Qt,Be),Q(Ze,Qt)};xe(nr,Ze=>{(l(w)||l(C))&&Ze(Ht)})}var Kt=B(Ye,2);{var sr=Ze=>{var Qt=Qj(),Mt=m(Qt),jt=m(Mt);De(()=>Qe(jt,l(i).length)),Q(Ze,Qt)};xe(Kt,Ze=>{!l(c)&&(l(w)||l(C))&&Ze(sr)})}var Ct=B(At,2);{var ft=Ze=>{var Qt=Pj(),Mt=m(Qt),jt=m(Mt),mr=B(m(jt),2),ur=m(mr),ar=m(ur),Hr=B(m(ar),2),Rr=B(ar,2),Xt=B(m(Rr),2),pr=B(Rr,2),Pr=m(pr),bn=B(Pr,2);{var qn=An=>{var yo=Tj();De(()=>yo.disabled=l(c)),tt("click",yo,de),Q(An,yo)};xe(bn,An=>{l(Y)&&An(qn)})}var wo=B(ur,2),Rt=m(wo),Tr=B(Rt,2),Xr=B(Tr,2),hr=B(Xr,2),So=B(wo,2);{var jr=An=>{var yo=Lj(),wr=m(yo);De(()=>Qe(wr,`*  ${l(G)||""} ~ ${l(H)||""} 
                 `)),Q(An,yo)};xe(So,An=>{l(Y)&&An(jr)})}De(()=>{Pr.disabled=l(c),Rt.disabled=l(c),Tr.disabled=l(c),Xr.disabled=l(c),hr.disabled=l(c)}),Fr(Hr,()=>l(G),An=>b(G,An)),Fr(Xt,()=>l(H),An=>b(H,An)),tt("click",Pr,q),tt("click",Rt,()=>j("1week")),tt("click",Tr,()=>j("1month")),tt("click",Xr,()=>j("6months")),tt("click",hr,()=>j("1year")),Q(Ze,Qt)};xe(Ct,Ze=>{l(k)||Ze(ft)})}var Ot=B(Ct,2);{var Vt=Ze=>{var Qt=kj(),Mt=m(Qt),jt=m(Mt),mr=B(m(jt),2),ur=m(mr),ar=m(ur),Hr=B(m(ar),2),Rr=B(ar,2),Xt=B(m(Rr),2),pr=B(Rr,2),Pr=m(pr);Fr(Hr,()=>l(I),bn=>b(I,bn)),Fr(Xt,()=>l(N),bn=>b(N,bn)),tt("click",Pr,me),Q(Ze,Qt)};xe(Ot,Ze=>{l(k)&&Ze(Vt)})}var ir=B(Ot,2);{var cr=Ze=>{var Qt=Oj(),Mt=m(Qt),jt=B(Mt,2);De(()=>{Lr(Mt,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(te)==="current"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`),Lr(jt,`odz-px-4 odz-py-2 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2 ${(l(te)==="previous"?"odz-border-indigo-600 odz-text-indigo-600":"odz-border-transparent odz-text-gray-500 hover:odz-text-gray-700 hover:odz-border-gray-300")??""}`)}),tt("click",Mt,()=>je("current")),tt("click",jt,()=>je("previous")),Q(Ze,Qt)};xe(ir,Ze=>{l(k)||Ze(cr)})}var dr=B(ir,2);{var br=Ze=>{var Qt=Lt(),Mt=ut(Qt);{var jt=ur=>{var ar=Dj();Q(ur,ar)},mr=ur=>{var ar=Lt(),Hr=ut(ar);{var Rr=pr=>{var Pr=Nj(),bn=m(Pr),qn=m(bn);De(()=>Qe(qn,l(u))),Q(pr,Pr)},Xt=pr=>{var Pr=Lt(),bn=ut(Pr);{var qn=Rt=>{var Tr=Mj(),Xr=m(Tr);{var hr=jr=>{var An=zn("    .");Q(jr,An)},So=jr=>{var An=Lt(),yo=ut(An);{var wr=Cs=>{var bo=zn("   .    .");Q(Cs,bo)},Fa=Cs=>{var bo=zn("  .");Q(Cs,bo)};xe(yo,Cs=>{l(k)?Cs(wr):Cs(Fa,!1)},!0)}Q(jr,An)};xe(Xr,jr=>{l(k)&&l(ee)?jr(hr):jr(So,!1)})}Q(Rt,Tr)},wo=Rt=>{var Tr=Yj();er(Tr,5,()=>l(i),Xr=>Xr.id??Xr.created_at,(Xr,hr)=>{var So=Xj();const jr=at(()=>Ne(l(hr).id)),An=at(()=>l(hr).design_confirm==="confirming"||l(hr).design_confirm==="completed");var yo=m(So),wr=m(yo),Fa=B(m(wr)),Cs=B(yo,2),bo=m(Cs),Ia=m(bo),Ua=m(Ia),zi=m(Ua);{var Qa=kr=>{var Yr=Hj(),Kn=ut(Yr);De(()=>{lr(Kn,"src",l(jr).thumbnail),lr(Kn,"alt",(l(hr).name||"")+"  ")}),E_(Kn),tt("error",Kn,jo=>{jo.currentTarget.style.display="none";const Dn=jo.currentTarget.nextElementSibling;Dn&&(Dn.style.display="flex")}),Q(kr,Yr)},gl=kr=>{var Yr=jj();Q(kr,Yr)};xe(zi,kr=>{l(jr).thumbnail?kr(Qa):kr(gl,!1)})}var vl=B(zi,2);{var To=kr=>{var Yr=Rj(),Kn=m(Yr);De(()=>Qe(Kn,`${l(jr).totalQuantity??""}`)),Q(kr,Yr)};xe(vl,kr=>{l(jr).totalQuantity>0&&kr(To)})}var Jo=B(Ua,2),Ss=m(Jo),ln=m(Ss),Ta=B(Ss,2);{var ii=kr=>{var Yr=$j(),Kn=m(Yr),jo=B(Kn);{var Dn=hs=>{var Vs=zn();De(()=>Qe(Vs,` ${l(jr).productNames.length-1}`)),Q(hs,Vs)};xe(jo,hs=>{l(jr).productNames.length>1&&hs(Dn)})}De(()=>Qe(Kn,l(jr).productNames[0])),Q(kr,Yr)};xe(Ta,kr=>{l(jr).productNames.length>0&&kr(ii)})}var Ci=B(Ta,2),Ji=B(m(Ci)),La=B(Ia,2),Pa=m(La);{var ka=kr=>{var Yr=qj(),Kn=B(m(Yr));De(()=>Qe(Kn,` ${l(hr).estimate_no??""}`)),Q(kr,Yr)};xe(Pa,kr=>{l(hr).estimate_no&&kr(ka)})}var Oa=B(Pa,2);{var Es=kr=>{var Yr=Kj(),Kn=B(m(Yr));De(jo=>Qe(Kn,`  ${jo??""}`),[()=>R(l(hr).pref_delivery_date)],at),Q(kr,Yr)};xe(Oa,kr=>{l(hr).pref_delivery_date&&kr(Es)})}var cs=B(La,2),bA=m(cs),qs=m(bA),Zo=m(qs);bw(Zo,{size:18});var Da=B(qs,2),Si=B(m(Da),2),ml=m(Si),ai=B(bA,2),_A=m(ai),Zi=m(_A);mp(Zi,{size:18});var ea=B(_A,2),Na=B(m(ea),2),ta=m(Na),Ma=B(ai,2),ra=m(Ma),xA=m(ra);_w(xA,{size:18});var BA=B(ra,2),Ei=B(m(BA),2),Fi=m(Ei),Ha=B(cs,2),Ks=m(Ha),ja=B(m(Ks),2),_=m(ja),K=B(Ks,2),Te=B(m(K),2),He=m(Te),st=B(K,2),_t=B(m(st),2),kt=m(_t),Gt=B(st,2),gr=B(m(Gt),2),Qr=m(gr),Ur=B(bo,2),qr=m(Ur),_n=B(m(qr),2),Gr=B(m(_n)),dn=B(qr,2),In=m(dn),xn=m(In),us=m(xn);{var Ho=kr=>{var Yr=Vj();Q(kr,Yr)},Fs=kr=>{var Yr=Gj();Q(kr,Yr)};xe(us,kr=>{l(hr).status==="pending"?kr(Ho):kr(Fs,!1)})}var Ai=B(xn),na=B(In,2);{var oa=kr=>{var Yr=Wj(),Kn=B(m(Yr));De(()=>{Yr.disabled=l(he)||l(be)===l(hr).id,Qe(Kn,` ${(l(he)&&l(be)===l(hr).id?"...":"")??""}`)}),tt("click",Yr,()=>nt(l(hr))),Q(kr,Yr)};xe(na,kr=>{l(hr).status==="completed"&&kr(oa)})}De((kr,Yr,Kn,jo,Dn,hs,Vs,sa,Ra)=>{Lr(wr,`${kr??""} svelte-w5j70w`),Qe(Fa,` ${Yr??""}`),Qe(ln,l(hr).name||"  "),Qe(Ji,` ${Kn??""}`),Qe(ml,l(hr).organization_name||"-"),Qe(ta,l(hr).order_name||"-"),Qe(Fi,l(hr).order_phone||"-"),Qe(_,jo),Qe(He,Dn),Qe(kt,hs),Qe(Qr,Vs),Lr(_n,`${sa??""} svelte-w5j70w`),_n.disabled=!l(An),Qe(Gr,` ${Ra??""}`),Qe(Ai,` ${(l(hr).status==="pending"?"":"")??""}`)},[()=>`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-backdrop-blur-sm ${Ce(l(hr).status)}`,()=>ze(l(hr).status),()=>R(l(hr).created_at),()=>l(hr).product_amount!==null&&l(hr).product_amount!==void 0?`${Er(l(hr).product_amount)}`:"-",()=>l(hr).print_amount!==null&&l(hr).print_amount!==void 0?`${Er(l(hr).print_amount)}`:"-",()=>l(hr).addon_amount!==null&&l(hr).addon_amount!==void 0?`${Er(l(hr).addon_amount)}`:"-",()=>l(hr).total_amount!==null&&l(hr).total_amount!==void 0?`${Er(l(hr).total_amount)}`:"-",()=>`odz-inline-flex odz-items-center odz-justify-center odz-gap-2 odz-px-4 odz-py-2.5 odz-rounded-lg odz-text-sm odz-font-semibold odz-transition-all odz-duration-200 ${Oe(l(hr).design_confirm)} ${l(An)?"hover:odz-shadow-md hover:odz-scale-105":"odz-opacity-60 odz-cursor-not-allowed"}`,()=>pe(l(hr).design_confirm)],at),tt("click",_n,()=>{l(An)&&ke(l(hr).id)}),tt("click",In,()=>ye(l(hr))),Q(Xr,So)}),Q(Rt,Tr)};xe(bn,Rt=>{l(d).length===0?Rt(qn):Rt(wo,!1)},!0)}Q(pr,Pr)};xe(Hr,pr=>{l(u)?pr(Rr):pr(Xt,!1)},!0)}Q(ur,ar)};xe(Mt,ur=>{l(c)?ur(jt):ur(mr,!1)})}Q(Ze,Qt)};xe(dr,Ze=>{(l(te)==="current"||l(k))&&Ze(br)})}var yn=B(dr,2);{var Fn=Ze=>{var Qt=Lt(),Mt=ut(Qt);{var jt=ur=>{var ar=Jj();Q(ur,ar)},mr=ur=>{var ar=Lt(),Hr=ut(ar);{var Rr=pr=>{var Pr=Zj(),bn=m(Pr),qn=m(bn);De(()=>Qe(qn,l(we))),Q(pr,Pr)},Xt=pr=>{var Pr=Lt(),bn=ut(Pr);{var qn=Rt=>{var Tr=eR();Q(Rt,Tr)},wo=Rt=>{var Tr=cR(),Xr=ut(Tr),hr=m(Xr),So=m(hr),jr=m(So),An=m(jr),yo=m(An);vp(yo,{size:18});var wr=B(An,2),Fa=B(wr,2);{var Cs=To=>{var Jo=tR(),Ss=m(Jo);Yl(Ss,{size:16}),tt("click",Jo,()=>{b(F,""),b(E,"")}),Q(To,Jo)};xe(Fa,To=>{l(F)&&To(Cs)})}var bo=B(Xr,2),Ia=m(bo),Ua=B(m(Ia),2),zi=m(Ua),Qa=B(bo,2);{var gl=To=>{var Jo=rR();Q(To,Jo)},vl=To=>{var Jo=dR();er(Jo,5,()=>l(a),vr,(Ss,ln)=>{var Ta=lR(),ii=m(Ta),Ci=m(ii),Ji=m(Ci),La=B(Ci,2),Pa=m(La),ka=B(ii,2),Oa=m(ka),Es=m(Oa),cs=B(Oa,2),bA=m(cs),qs=B(cs,2),Zo=m(qs),Da=m(Zo),Si=B(Zo,2);{var ml=Gr=>{var dn=nR(),In=B(ut(dn),2),xn=m(In);De(()=>Qe(xn,`: ${l(ln).goodsCnt??""}`)),Q(Gr,dn)};xe(Si,Gr=>{l(ln).goodsCnt&&l(ln).goodsCnt!=="0"&&Gr(ml)})}var ai=B(ka,2);{var _A=Gr=>{var dn=aR(),In=m(dn),xn=m(In);Du(xn,{size:14});var us=B(xn),Ho=B(In,2);er(Ho,5,()=>l(ln).estimateGoods,vr,(Fs,Ai)=>{var na=iR();const oa=at(()=>D(l(Ai).selectOptions)),kr=at(()=>X(l(Ai)));var Yr=m(na);{var Kn=li=>{var di=oR();De(()=>{lr(di,"src",l(kr)),lr(di,"alt",l(Ai).goodsNm)}),tt("error",di,es=>es.currentTarget.style.display="none"),Q(li,di)},jo=li=>{var di=sR(),es=m(di);Du(es,{size:20,class:"odz-text-gray-400"}),Q(li,di)};xe(Yr,li=>{l(kr)?li(Kn):li(jo,!1)})}var Dn=B(Yr,2),hs=m(Dn),Vs=m(hs),sa=B(hs,2),Ra=m(sa),Ro=B(Dn,2),kc=m(Ro);t5(kc,{size:14,class:"odz-mr-1"}),De(()=>{Qe(Vs,l(Ai).goodsNm),Qe(Ra,`${l(oa).summary??""}  ${l(oa).totalQty??""}`)}),tt("click",Ro,()=>oe(l(Ai).sno)),Q(Fs,na)}),De(()=>Qe(us,`  (${l(ln).estimateGoods.length??""})`)),Q(Gr,dn)};xe(ai,Gr=>{l(ln).estimateGoods&&l(ln).estimateGoods.length>0&&Gr(_A)})}var Zi=B(ai,2),ea=m(Zi),Na=m(ea),ta=m(Na);bw(ta,{size:18});var Ma=B(Na,2),ra=B(m(Ma),2),xA=m(ra),BA=B(ea,2),Ei=m(BA),Fi=m(Ei);mp(Fi,{size:18});var Ha=B(Ei,2),Ks=B(m(Ha),2),ja=m(Ks),_=B(BA,2),K=m(_),Te=m(K);_w(Te,{size:18});var He=B(K,2),st=B(m(He),2),_t=m(st),kt=B(Zi,2),Gt=m(kt),gr=m(Gt);{var Qr=Gr=>{var dn=AR(),In=m(dn);De(xn=>Qe(In,`: ${xn??""}`),[()=>_e(l(ln).eventDate)],at),Q(Gr,dn)};xe(gr,Gr=>{l(ln).eventDate&&l(ln).eventDate!=="0000-00-00 00:00:00"&&Gr(Qr)})}var Ur=B(Gt,2),qr=B(m(Ur),2),_n=m(qr);De((Gr,dn,In,xn)=>{Lr(Ci,Gr),Qe(Ji,dn),Qe(Pa,In),Qe(Es,l(ln).estimateNm||` #${l(ln).estimateNo}`),Qe(bA,l(ln).orderGoodsNm||"-"),Qe(Da,`: ${l(ln).estimateNo??""}`),Qe(xA,l(ln).ex1||"-"),Qe(ja,l(ln).receiverName||l(ln).memNm||"-"),Qe(_t,l(ln).receiverCellPhone||"-"),Qe(_n,xn)},[()=>`odz-badge ${Ee(l(ln).state)}`,()=>ae(l(ln).state),()=>_e(l(ln).regDt),()=>Le(l(ln).totalPrice)],at),Q(Ss,Ta)}),Q(To,Jo)};xe(Qa,To=>{l(a).length===0?To(gl):To(vl,!1)})}De(()=>Qe(zi,`${l(a).length??""}`)),Fr(wr,()=>l(F),To=>b(F,To)),Q(Rt,Tr)};xe(bn,Rt=>{l(Z).length===0?Rt(qn):Rt(wo,!1)},!0)}Q(pr,Pr)};xe(Hr,pr=>{l(we)?pr(Rr):pr(Xt,!1)},!0)}Q(ur,ar)};xe(Mt,ur=>{l(Ae)?ur(jt):ur(mr,!1)})}Q(Ze,Qt)};xe(yn,Ze=>{!l(k)&&l(te)==="previous"&&Ze(Fn)})}var Dr=B(Me,2);{var Br=Ze=>{var Qt=Lt(),Mt=ut(Qt);P4(Mt,()=>l(g),jt=>{n7(jt,{get estimateId(){return l(g)},get isOpen(){return l(f)},set isOpen(mr){b(f,mr)},$$legacy:!0})}),Q(Ze,Qt)};xe(Dr,Ze=>{l(g)&&Ze(Br)})}var Wr=B(Dr,2),Vr=m(Wr),fr=B(m(Vr),4),yr=B(m(fr),2),en=B(yr,2);{var gn=Ze=>{var Qt=uR(),Mt=m(Qt),jt=m(Mt);De(()=>Qe(jt,l(re))),Q(Ze,Qt)};xe(en,Ze=>{l(re)&&Ze(gn)})}var On=B(fr,2),tn=m(On),Cr=B(tn,2),Yn=B(Vr,2),Yo=B(Wr,2);{var Co=Ze=>{var Qt=hR();Q(Ze,Qt)};xe(Yo,Ze=>{l(he)&&Ze(Co)})}De(()=>{Lr(Wr,`odz-modal ${(l(M)?"odz-modal-open":"")??""}`),Lr(yr,`odz-input odz-input-bordered odz-w-full ${(l(re)?"odz-input-error":"")??""}`)}),Fr(it,()=>l(w),Ze=>b(w,Ze)),Pu(Dt,()=>l(C),Ze=>b(C,Ze)),Fr(yr,()=>l(O),Ze=>b(O,Ze)),tt("keydown",yr,Ze=>{Ze.key==="Enter"&&Fe()}),tt("click",tn,Pe),tt("click",Cr,Fe),tt("click",Yn,Pe),Q(n,fe),sn(),r()}var gR=W('<div class="odz-text-sm odz-text-gray-600 odz-leading-relaxed"> </div>'),vR=W('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-justify-between odz-items-start odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-text-base odz-font-semibold odz-text-gray-800 odz-mb-1"> </div> <!></div> <div class="odz-text-lg odz-font-bold odz-text-gray-900 odz-ml-4"> </div></div></div>'),mR=W('<div class="odz-bg-white odz-border odz-border-gray-300 odz-rounded odz-px-2 odz-py-1 odz-text-xs odz-text-gray-700"> </div>'),wR=W('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-px-4 odz-py-3 odz-flex-shrink-0"><div class="odz-text-sm odz-font-semibold odz-text-gray-800 odz-mb-2"> </div> <div class="odz-flex odz-flex-wrap odz-gap-1"></div></div>'),yR=W('<div class="odz-text-xs odz-text-blue-600 odz-mt-1"><!></div>'),bR=W('<div class="odz-bg-blue-50 odz-border odz-border-blue-200 odz-rounded-md odz-p-3 odz-mb-3"><div class="odz-flex odz-justify-between odz-items-center odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="odz-font-medium odz-text-blue-700">  </span></div> <div class="odz-text-right"><div class="odz-text-xs odz-text-gray-500 odz-line-through"> </div> <div class="odz-text-sm odz-font-semibold odz-text-red-600"> </div></div></div> <!></div>'),_R=W('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-wrap odz-gap-3 odz-mb-4"></div> <div class="odz-text-sm odz-text-gray-600 odz-mb-2 odz-text-right"> </div> <!> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),xR=W('<span class="odz-w-6 odz-h-6 odz-rounded-full odz-border-2 odz-border-white odz-shadow-sm"></span>'),BR=W('<div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-flex odz-items-center odz-gap-3"><div class="odz-flex odz-gap-1"></div> <div class="odz-text-sm odz-text-gray-800"> </div></div></div>'),zR=W('<div class="odz-bg-white odz-border odz-border-gray-100 odz-rounded-xl odz-p-5 odz-shadow-sm odz-hover:shadow-md odz-transition-all odz-duration-200"><div class="odz-flex odz-items-center odz-justify-between odz-mb-4"><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-w-8 odz-h-8 odz-bg-blue-100 odz-text-blue-600 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-text-sm odz-font-semibold"></div> <span class="odz-font-medium odz-text-gray-900"> </span></div> <div class="odz-text-right"><div class="odz-text-lg odz-font-bold odz-text-gray-900"> </div></div></div> <div class="odz-grid odz-grid-cols-1 odz-gap-4"><!> <div class="odz-bg-gray-50 odz-rounded-lg odz-p-4"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><svg class="odz-w-4 odz-h-4 odz-text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="odz-text-sm odz-font-medium odz-text-gray-700"> </span></div> <div class="odz-text-sm odz-text-gray-800 odz-leading-relaxed"> </div></div></div></div>'),CR=W('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-6"> </h3> <div class="odz-space-y-4"></div></div>'),SR=W('<span class="odz-text-gray-600"> </span>'),ER=W('<div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-lg odz-p-4"><div class="odz-flex-1"><div class="odz-font-medium odz-text-gray-800 odz-mb-1"> <!></div> <div class="odz-text-sm odz-text-gray-600"> </div></div> <div class="odz-font-semibold odz-text-gray-900"> </div></div>'),FR=W('<div class="odz-mb-8"><h3 class="odz-text-xl odz-font-semibold odz-text-gray-800 odz-mb-4 odz-pb-2 odz-border-b-2 odz-border-gray-200"> </h3> <div class="odz-flex odz-flex-col odz-gap-3 odz-mb-4"></div> <div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-100 odz-border odz-border-gray-200 odz-rounded-md odz-p-3"><span class="odz-font-medium odz-text-gray-700"> </span> <span class="odz-font-semibold odz-text-gray-900"> </span></div></div>'),IR=W("<!> <!> <!>",1),UR=W('<div class="odz-fixed odz-inset-0 odz-z-50 odz-flex odz-items-center odz-justify-center odz-p-4 odz-animate-in odz-fade-in odz-duration-300"><div class="odz-fixed odz-inset-0 odz-bg-black odz-bg-opacity-60 odz-backdrop-blur-sm odz-cursor-pointer"></div> <div class="odz-relative odz-bg-white odz-rounded-xl odz-shadow-2xl odz-max-w-2xl odz-max-h-[90vh] odz-w-full odz-overflow-hidden odz-flex odz-flex-col odz-animate-in odz-zoom-in-95 odz-slide-in-from-bottom-4 odz-duration-300 odz-cursor-default"><div class="odz-flex odz-justify-between odz-items-center odz-p-6 odz-border-b odz-border-gray-200 odz-bg-gradient-to-r odz-from-slate-50 odz-to-slate-100 odz-sticky odz-top-0 odz-z-10"><h2 class="odz-text-2xl odz-font-bold odz-text-gray-900">  </h2> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-hover:odz-bg-gray-100 odz-transition-all odz-duration-200"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="odz-flex-1 odz-overflow-y-auto odz-p-6"><!> <div class="odz-border-t-2 odz-border-gray-200 odz-pt-6 odz-mt-6"><div class="odz-flex odz-justify-between odz-items-center odz-bg-gray-900 odz-rounded-lg odz-p-4"><span class="odz-text-lg odz-font-semibold odz-text-white"> </span> <span class="odz-text-2xl odz-font-bold odz-text-white"> </span></div></div></div></div></div>');function QR(n,e){on(e,!1);let t=gt(e,"estimateDetails",8),r=gt(e,"productAmount",8);gt(e,"printAmount",8);let o=gt(e,"addonAmount",8),s=gt(e,"totalAmount",8),i=gt(e,"printInfoList",8),a=gt(e,"addonItems",8),A=gt(e,"addCostItems",8,null),d=gt(e,"isAddCost",8,!1),c=gt(e,"addonProductsMap",24,()=>({}));const u=ag();let h=Se([]);function f(){if(!t()||!t().items||t().items.length===0)return;const be=new Map;t().items.forEach(Z=>{const we=(Z.variant||{}).title||Z.variant_title||" ",z=we.match(/(.+)\s*-\s*(.+)/),F=z?z[1]:we,E=z?z[2]:"";be.has(F)||be.set(F,{name:F,sizes:new Map});const U=be.get(F);U.sizes.has(E)||U.sizes.set(E,{size:E,quantity:0});const P=U.sizes.get(E);P.quantity+=Z.quantity||1}),b(h,Array.from(be.values()).map(Z=>({name:Z.name,sizes:Array.from(Z.sizes.values())}))),b(h,l(h).filter(Z=>Z.name!==""));const te=new Set;l(h).forEach(Z=>{Z.sizes.forEach(Ae=>{te.add(Ae.size)})}),Array.from(te)}function g(be){return`background-color: ${be.hex};`}function w(be,te){const Z=[];if(be&&Z.push(`: ${be}`),te&&te.length>0){const Ae=te.map(we=>we.name).join(" > ");Z.push(`: ${Ae}`)}return Z.length>0?Z.join(" | "):" "}function y(){return A()&&A().amount||0}function x(){u("close")}Jt(()=>Vn(t()),()=>{t()&&f()}),mo(),an();var C=UR(),I=m(C),N=B(I,2),k=m(N),ee=B(m(k),2),G=B(k,2),H=m(G);{var Y=be=>{var te=vR(),Z=B(m(te),2),Ae=m(Z),we=m(Ae),z=m(we),F=B(we,2);{var E=T=>{var R=gR(),$=m(R);De(()=>Qe($,A().description)),Q(T,R)};xe(F,T=>{A().description&&T(E)})}var U=B(Ae,2),P=m(U);De(T=>{Qe(z,A().name),Qe(P,`${T??""}`)},[()=>A().amount.toLocaleString()],at),Q(be,te)},Be=be=>{var te=Lt(),Z=ut(te);{var Ae=we=>{var z=IR(),F=ut(z);{var E=$=>{var j=_R(),ae=B(m(j),2);er(ae,5,()=>l(h),vr,(le,ue)=>{var Ie=wR(),Ne=m(Ie),ze=m(Ne),Ce=B(Ne,2);er(Ce,5,()=>l(ue).sizes,vr,(pe,Oe)=>{var ke=mR(),me=m(ke);De(()=>Qe(me,`${l(Oe).size??""}: ${l(Oe).quantity??""}`)),Q(pe,ke)}),De(()=>Qe(ze,l(ue).name)),Q(le,Ie)});var Ee=B(ae,2),_e=m(Ee),Le=B(Ee,2);{var X=le=>{var ue=bR();const Ie=at(()=>t().items.reduce((ye,Fe)=>ye+(Fe.discount_amount||0)*(Fe.quantity||0),0)),Ne=at(()=>t().items.find(ye=>ye.discount_amount&&ye.discount_amount>0));var ze=m(ue),Ce=B(m(ze),2),pe=m(Ce),Oe=m(pe),ke=B(pe,2),me=m(ke),q=B(ze,2);{var de=ye=>{var Fe=yR(),Pe=m(Fe);{var nt=je=>{var fe=zn();De(Me=>Qe(fe,`${l(Ne).discount_value??""}%  ( ${Me??""})`),[()=>(l(Ne).discount_amount||0).toLocaleString()],at),Q(je,fe)},qe=je=>{var fe=zn();De(Me=>Qe(fe,` ${Me??""} `),[()=>l(Ne).discount_value.toLocaleString()],at),Q(je,fe)};xe(Pe,je=>{l(Ne).discount_type==="percentage"?je(nt):je(qe,!1)})}Q(ye,Fe)};xe(q,ye=>{l(Ne)&&l(Ne).discount_type&&l(Ne).discount_value&&ye(de)})}De((ye,Fe)=>{Qe(Oe,`${ye??""}`),Qe(me,`-${Fe??""}`)},[()=>t().items.reduce((ye,Fe)=>ye+(Fe.original_price||Fe.price||0)*(Fe.quantity||0),0).toLocaleString(),()=>l(Ie).toLocaleString()],at),Q(le,ue)};xe(Le,le=>{t().items&&t().items.some(ue=>ue.discount_amount&&ue.discount_amount>0)&&le(X)})}var D=B(Le,2),oe=B(m(D),2),ve=m(oe);De((le,ue)=>{Qe(_e,` : ${le??""}`),Qe(ve,`${ue??""}`)},[()=>l(h).reduce((le,ue)=>le+ue.sizes.reduce((Ie,Ne)=>Ie+Ne.quantity,0),0),()=>r().toLocaleString()],at),Q($,j)};xe(F,$=>{l(h).length>0&&$(E)})}var U=B(F,2);{var P=$=>{var j=CR(),ae=B(m(j),2);er(ae,5,i,vr,(Ee,_e,Le)=>{var X=zR(),D=m(X),oe=m(D),ve=m(oe);ve.textContent=Le+1;var le=B(oe,2),ue=m(le),Ie=m(ue),Ne=B(D,2),ze=m(Ne);{var Ce=me=>{var q=BR(),de=B(m(q),2),ye=m(de);er(ye,5,()=>l(_e).colorInfo,vr,(nt,qe)=>{var je=xR();De(fe=>{lr(je,"style",fe),lr(je,"title",l(qe).name)},[()=>g(l(qe))],at),Q(nt,je)});var Fe=B(ye,2),Pe=m(Fe);De(nt=>Qe(Pe,nt),[()=>l(_e).colorInfo.map(nt=>nt.name).join(", ")],at),Q(me,q)};xe(ze,me=>{l(_e).colorInfo&&l(_e).colorInfo.length>0&&me(Ce)})}var pe=B(ze,2),Oe=B(m(pe),2),ke=m(Oe);De((me,q)=>{Qe(Ie,`${me??""}`),Qe(ke,q)},[()=>l(_e).price.toLocaleString(),()=>w(l(_e).printAreaTitle,l(_e).parentTemplates)],at),Q(Ee,X)}),Q($,j)};xe(U,$=>{i().length>0&&$(P)})}var T=B(U,2);{var R=$=>{var j=FR(),ae=B(m(j),2);er(ae,5,a,vr,(X,D)=>{var oe=ER();const ve=at(()=>`${l(D).selected_product_id}_${l(D).selected_variant_id}`),le=at(()=>c()[l(ve)]);var ue=m(oe),Ie=m(ue),Ne=m(Ie),ze=B(Ne);{var Ce=q=>{var de=SR(),ye=m(de);De(()=>Qe(ye,`- ${l(le).variantTitle??""}`)),Q(q,de)};xe(ze,q=>{var de;(de=l(le))!=null&&de.variantTitle&&q(Ce)})}var pe=B(Ie,2),Oe=m(pe),ke=B(ue,2),me=m(ke);De(q=>{var de;Qe(Ne,`${((de=l(le))==null?void 0:de.productTitle)||""} `),Qe(Oe,`${l(D).quantity??""}`),Qe(me,`${q??""}`)},[()=>(l(D).price*l(D).quantity).toLocaleString()],at),Q(X,oe)});var Ee=B(ae,2),_e=B(m(Ee),2),Le=m(_e);De(X=>Qe(Le,`${X??""}`),[()=>o().toLocaleString()],at),Q($,j)};xe(T,$=>{a().length>0&&$(R)})}Q(we,z)};xe(Z,we=>{t()&&t().estimate&&we(Ae)},!0)}Q(be,te)};xe(H,be=>{d()&&A()?be(Y):be(Be,!1)})}var M=B(H,2),O=m(M),J=m(O),re=m(J),he=B(J,2),ie=m(he);De(be=>{Qe(re,d()?" ":" "),Qe(ie,`${be??""}`)},[()=>d()?y().toLocaleString():s().toLocaleString()],at),tt("click",I,x),tt("click",ee,x),Q(n,C),sn()}var TR=W('<p class="odiz-loading"> ...</p>'),LR=W('<p class="odiz-error"> </p>'),PR=W('<div class="odiz-addcost-description"> </div>'),kR=W('<div class="odiz-addcost-detailed"><div class="odiz-addcost-header"><h3 class="odiz-addcost-title"> </h3></div> <div class="odiz-addcost-items"><div class="odiz-addcost-item"><div class="odiz-addcost-info"><div class="odiz-addcost-name"> </div> <!></div> <div class="odiz-addcost-amount"> </div></div></div> <div class="odiz-divider"></div> <div class="odiz-total-price"><div class="odiz-price-label"> </div> <div class="odiz-price-value odiz-total-value"> </div></div></div>'),OR=W('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"><!></span></div>'),DR=W('<span class="odz-color-dot-compact"></span>'),NR=W('<span class="odz-color-count"> </span>'),MR=W('<span class="odz-color-dots-compact"><!> <!></span>'),HR=W('<span class="odz-print-area-compact"> </span>'),jR=W("<!> <!>",1),RR=W('<span class="odz-print-count"> </span>'),$R=W('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value odz-print-inline"><!> <!></span></div>'),qR=W('<div class="odz-info-row"><span class="odz-label"></span> <span class="odz-value"> </span></div>'),KR=W('<div class="odiz-estimate-detailed"><div class="odz-estimate-summary"><div class="odz-summary-content"><!> <!> <!></div> <div class="odz-summary-actions"><button class="odz-detail-btn" type="button">  </button></div></div> <div class="odz-price-summary"><div class="odz-price-label"></div> <div class="odz-price-value"><span class="odz-text-lg odz-font-bold"> </span></div></div></div>'),VR=W('<p class="odiz-empty">  .</p>'),GR=W('<div class="odiz-estimate-preview"><!></div> <!>',1);function WR(n,e){on(e,!1);let t=gt(e,"uuid",8),r=gt(e,"idx",8);gt(e,"appType",8);let o=gt(e,"isAddCost",8),s=Se(!0),i=Se(null),a=Se(null),A=Se(0),d=Se(0),c=Se(0),u=Se(0),h=Se([]),f=Se([]),g=Se(null),w=Se({}),y=Se([]),x=Se(!1);async function C(){var ie,be;b(w,{});for(const te of l(f)){const Z=`${te.selected_product_id}_${te.selected_variant_id}`;if(!l(w)[Z])try{if(te.selected_variant_id){const Ae=await il(te.selected_variant_id);if(Ae){const{data:we}=await pt.from("products").select("id, title").eq("id",te.selected_product_id).single();zr(w,l(w)[Z]={productTitle:(we==null?void 0:we.title)||"",variantTitle:Ae.title||"",price:((be=(ie=Ae.prices)==null?void 0:ie[0])==null?void 0:be.amount)||0})}}else{const{data:Ae}=await pt.from("products").select("id, title").eq("id",te.selected_product_id).single();zr(w,l(w)[Z]={productTitle:(Ae==null?void 0:Ae.title)||"",variantTitle:null,price:te.price||0})}}catch{zr(w,l(w)[Z]={productTitle:"",variantTitle:null,price:te.price||0})}}}async function I(){try{b(s,!0),b(i,null),b(a,await c1(t()));const ie=await dg(t());if(o()&&(b(g,await p5(r())),console.log("addCostItems",l(g))),l(a)){zr(a,l(a).items=l(a).items.filter(te=>{var Z;return((Z=te.idx)==null?void 0:Z.toString())===r()}));const be=l(a).prints.filter(te=>{var Z;return((Z=te.idx)==null?void 0:Z.toString())===r()});zr(a,l(a).prints=l(a).prints.filter(te=>{var Z;return((Z=te.idx)==null?void 0:Z.toString())===r()})),b(f,ie.filter(te=>{var Z;return((Z=te.idx)==null?void 0:Z.toString())===r()})),await C(),k(),N(),b(h,[]);for(const te of be){const Z={id:te.id||0,price:te.price||0,templateId:te.template_id,objectId:te.object_id,colorInfo:[]};try{if(te.template_id&&(console.log("template_id:",te.template_id),Z.parentTemplates=await ih(te.template_id),console.log("template_id   :",Z.parentTemplates)),te.object_id){console.log("object_id:",te.object_id);const Ae=await v1(te.object_id);Ae&&(Z.printAreaTitle=Ae.title,console.log(" :",Ae.title))}}catch(Ae){console.error("    :",Ae)}if(te.colors)try{let Ae=null;if(typeof te.colors=="string"?Ae=JSON.parse(te.colors):Ae=te.colors,Array.isArray(Ae)){let we=[];if(Ae.length>0&&Array.isArray(Ae[0]))for(const z of Ae)Array.isArray(z)&&(we=we.concat(z));else we=Ae;we.length>0&&(typeof we[0]=="object"&&we[0]!==null?Z.colorInfo=we:Z.colorInfo=we.map(z=>({hex:z,name:z})))}console.log("  :",Z.colorInfo)}catch(Ae){console.error("    :",Ae)}l(h).push(Z)}console.log("   :",l(h))}}catch(ie){console.error("    :",ie),b(i,"     .")}finally{b(s,!1)}}function N(){if(!l(a)||!l(a).items||l(a).items.length===0)return;const ie=new Map;l(a).items.forEach(te=>{const Ae=(te.variant||{}).title||te.variant_title||" ",we=Ae.match(/(.+)\s*-\s*(.+)/),z=we?we[1]:Ae,F=we?we[2]:"";ie.has(z)||ie.set(z,{name:z,sizes:new Map});const E=ie.get(z);E.sizes.has(F)||E.sizes.set(F,{size:F,quantity:0});const U=E.sizes.get(F);U.quantity+=te.quantity||1}),b(y,Array.from(ie.values()).map(te=>({name:te.name,sizes:Array.from(te.sizes.values())}))),b(y,l(y).filter(te=>te.name!==""));const be=new Set;l(y).forEach(te=>{te.sizes.forEach(Z=>{be.add(Z.size)})}),Array.from(be)}function k(){if(l(a)){b(A,0),b(d,0),b(c,0);for(const ie of l(a).items)ie.quantity&&ie.price&&b(A,l(A)+ie.quantity*ie.price);for(const ie of l(a).prints)ie.price&&b(d,l(d)+ie.price);for(const ie of l(f))ie.price&&ie.quantity&&b(c,l(c)+ie.price*ie.quantity);b(u,l(A)+l(d)+l(c))}}function ee(){return l(g)&&l(g).amount||0}Xn(()=>{I()});function G(){b(x,!0)}function H(){b(x,!1)}an();var Y=GR(),Be=ut(Y),M=m(Be);{var O=ie=>{var be=TR();Q(ie,be)},J=ie=>{var be=Lt(),te=ut(be);{var Z=we=>{var z=LR(),F=m(z);De(()=>Qe(F,l(i))),Q(we,z)},Ae=we=>{var z=Lt(),F=ut(z);{var E=P=>{var T=kR(),R=B(m(T),2),$=m(R),j=m($),ae=m(j),Ee=m(ae),_e=B(ae,2);{var Le=ue=>{var Ie=PR(),Ne=m(Ie);De(()=>Qe(Ne,l(g).description)),Q(ue,Ie)};xe(_e,ue=>{l(g).description&&ue(Le)})}var X=B(j,2),D=m(X),oe=B(R,4),ve=B(m(oe),2),le=m(ve);De((ue,Ie)=>{Qe(Ee,l(g).name),Qe(D,`${ue??""}`),Qe(le,`${Ie??""}`)},[()=>l(g).amount.toLocaleString(),()=>ee().toLocaleString()],at),Q(P,T)},U=P=>{var T=Lt(),R=ut(T);{var $=ae=>{var Ee=KR(),_e=m(Ee),Le=m(_e),X=m(Le);{var D=ke=>{var me=OR(),q=B(m(me),2),de=m(q);{var ye=Pe=>{var nt=zn();De(qe=>Qe(nt,`${l(y)[0].name??""} (${qe??""})`),[()=>l(y).reduce((qe,je)=>qe+je.sizes.reduce((fe,Me)=>fe+Me.quantity,0),0)],at),Q(Pe,nt)},Fe=Pe=>{var nt=zn();De(qe=>Qe(nt,`${l(y)[0].name??""}  ${l(y).length-1} (${qe??""})`),[()=>l(y).reduce((qe,je)=>qe+je.sizes.reduce((fe,Me)=>fe+Me.quantity,0),0)],at),Q(Pe,nt)};xe(de,Pe=>{l(y).length===1?Pe(ye):Pe(Fe,!1)})}Q(ke,me)};xe(X,ke=>{l(y).length>0&&ke(D)})}var oe=B(X,2);{var ve=ke=>{var me=$R(),q=B(m(me),2),de=m(q);er(de,1,()=>l(h).slice(0,1),vr,(Pe,nt)=>{var qe=jR(),je=ut(qe);{var fe=Ve=>{var Ye=MR(),ot=m(Ye);er(ot,1,()=>l(nt).colorInfo.slice(0,3),vr,(it,zt)=>{var xt=DR();De(()=>{lr(xt,"style",`background-color: ${l(zt).hex??""};`),lr(xt,"title",l(zt).name)}),Q(it,xt)});var ht=B(ot,2);{var Ge=it=>{var zt=NR(),xt=m(zt);De(()=>Qe(xt,`+${l(nt).colorInfo.length-3}`)),Q(it,zt)};xe(ht,it=>{l(nt).colorInfo.length>3&&it(Ge)})}Q(Ve,Ye)};xe(je,Ve=>{l(nt).colorInfo&&l(nt).colorInfo.length>0&&Ve(fe)})}var Me=B(je,2);{var At=Ve=>{var Ye=HR(),ot=m(Ye);De(()=>Qe(ot,l(nt).printAreaTitle)),Q(Ve,Ye)};xe(Me,Ve=>{l(nt).printAreaTitle&&Ve(At)})}Q(Pe,qe)});var ye=B(de,2);{var Fe=Pe=>{var nt=RR(),qe=m(nt);De(()=>Qe(qe,` ${l(h).length-1}`)),Q(Pe,nt)};xe(ye,Pe=>{l(h).length>1&&Pe(Fe)})}Q(ke,me)};xe(oe,ke=>{l(h).length>0&&ke(ve)})}var le=B(oe,2);{var ue=ke=>{var me=qR(),q=B(m(me),2),de=m(q);De(()=>Qe(de,`${l(f).length??""}`)),Q(ke,me)};xe(le,ke=>{l(f).length>0&&ke(ue)})}var Ie=B(Le,2),Ne=m(Ie),ze=B(_e,2),Ce=B(m(ze),2),pe=m(Ce),Oe=m(pe);De(ke=>Qe(Oe,`${ke??""}`),[()=>l(u).toLocaleString()],at),tt("click",Ne,G),Q(ae,Ee)},j=ae=>{var Ee=VR();Q(ae,Ee)};xe(R,ae=>{l(a)&&l(a).estimate?ae($):ae(j,!1)},!0)}Q(P,T)};xe(F,P=>{o()&&l(g)?P(E):P(U,!1)},!0)}Q(we,z)};xe(te,we=>{l(i)?we(Z):we(Ae,!1)},!0)}Q(ie,be)};xe(M,ie=>{l(s)?ie(O):ie(J,!1)})}var re=B(Be,2);{var he=ie=>{QR(ie,{get estimateDetails(){return l(a)},get productAmount(){return l(A)},get printAmount(){return l(d)},get addonAmount(){return l(c)},get totalAmount(){return l(u)},get printInfoList(){return l(h)},get addonItems(){return l(f)},get addCostItems(){return l(g)},get isAddCost(){return o()},get addonProductsMap(){return l(w)},$$events:{close:H}})};xe(re,ie=>{l(x)&&l(a)&&ie(he)})}Q(n,Y),sn()}var XR=W('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),YR=W('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div> <button class="odz-mt-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-px-4 odz-py-2 odz-rounded-lg odz-text-sm"> </button></div>'),JR=W('<span class="odz-text-red-500 odz-ml-2"> </span>'),ZR=W('<div class="odz-text-sm odz-text-gray-600"> <!></div>'),e9=W('<div class="odz-absolute -odz-top-1 -odz-right-1 odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),t9=W("<img> <!>",1),r9=W('<div class="odz-flex odz-items-center odz-gap-1 odz-bg-red-100 odz-px-2 odz-py-1 odz-rounded-full"><span class="odz-text-xs odz-font-medium odz-text-red-600"> </span></div>'),n9=W('<button><div class="odz-flex odz-items-center odz-gap-3"><div class="odz-relative odz-flex-shrink-0"><!></div> <span> </span> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-shrink-0"><!> <div><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path></svg></div></div></div></button>'),o9=W('<div><h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-text-gray-800"> </h3> <div class="odz-grid odz-grid-cols-1 sm:odz-grid-cols-2 lg:odz-grid-cols-4 xl:odz-grid-cols-5 odz-gap-3"></div></div>'),s9=W('<div class="odz-relative"><img class="odz-w-12 odz-h-12 odz-rounded-lg odz-object-cover odz-shadow-md odz-ring-2 odz-ring-white"></div>'),i9=W('<div class="odz-absolute -odz-top-2 -odz-right-2"><div class="odz-w-5 odz-h-5 odz-bg-red-500 odz-rounded-full odz-flex odz-items-center odz-justify-center odz-shadow-lg"><svg class="odz-w-3 odz-h-3 odz-text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>'),a9=W('<span class="odz-text-sm odz-font-semibold odz-text-gray-700"> </span>'),A9=W(`<div class="odz-group odz-relative"><div><!> <div class="odz-text-center odz-mb-3"><div> </div> <div class="odz-mt-2 odz-min-h-[2rem] odz-flex odz-flex-col odz-items-center odz-justify-center"><!></div></div> <div class="odz-flex odz-items-center odz-bg-gray-50 odz-rounded-lg odz-p-1 odz-gap-1"><button aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <input type="number" class="odz-flex-1 odz-text-center odz-bg-transparent odz-border-0 odz-text-xs sm:odz-text-sm odz-font-bold odz-text-gray-800
                                                           focus:odz-outline-none focus:odz-ring-0 odz-min-w-0" min="0" placeholder="0"> <button class="odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150 hover:odz-scale-110" aria-label=" "><svg class="odz-w-3 odz-h-3 sm:odz-w-4 sm:odz-h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path></svg></button></div></div></div>`),l9=W('<div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-3 md:odz-grid-cols-4 lg:odz-grid-cols-5 odz-gap-3"></div>'),d9=W('<div class="odz-text-center odz-py-8"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="odz-text-sm odz-text-gray-500">     .</p></div>'),c9=W('<div class="odz-bg-gradient-to-br odz-from-gray-50 odz-to-gray-100 odz-border-2 odz-border-gray-200 odz-rounded-2xl odz-p-6 odz-shadow-sm"><div class="odz-flex odz-items-center odz-gap-4 odz-mb-6"><!> <div><h4 class="odz-text-xl odz-font-bold odz-text-gray-800"> </h4> <p class="odz-text-sm odz-text-gray-600">  </p></div></div> <!></div>'),u9=W('<div class="odz-space-y-6 odz-mt-6"></div>'),h9=W('<div class="odz-card odz-card-side odz-bg-base-100 odz-border odz-rounded odz-p-3"><figure><img class="odz-max-h-24 odz-border"></figure> <div class="odz-card-body"><h2 class="odz-card-title odz-text-base"> </h2> <!></div></div> <!> <!> <!>',1),f9=W('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><!></div> <!>',1);function p9(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(xr,"$fixedEstimateStore",t),s=()=>fn(Et,"$estimateStore",t),i=()=>fn(oi,"$shopStore",t),a=Se();let A=gt(e,"productId",8),d=gt(e,"estimateId",8,void 0),c=gt(e,"idx",8,void 0),u=gt(e,"onNext",8,void 0),h=Se(null),f=Se(!1),g=Se(null),w=Se(!1),y=Se(""),x=Se(""),C=Se([]),I=Se({}),N=Se({}),k=Se({}),ee=Se(0),G=Se(0),H=null;function Y(j){var oe,ve,le,ue,Ie,Ne;if(!l(a)||!l(a).variants||!l(a).options||l(a).options.length===0)return;const ae=o();if((ve=(oe=ae==null?void 0:ae.productSelection)==null?void 0:oe.quantityByVariant)!=null&&ve[j]&&Object.keys(ae.productSelection.quantityByVariant[j]).length>0,(((ue=(le=ae==null?void 0:ae.productSelection)==null?void 0:le.quantityByVariant)==null?void 0:ue[j])!==void 0||l(C).includes(j))&&d()&&d()!=="temp"){if(l(C).includes(j)){b(C,l(C).filter(pe=>pe!==j));const ze={...l(N)};delete ze[j],b(N,ze);const Ce={...l(I)};Ce[j]&&Object.keys(Ce[j]).forEach(pe=>{Ce[j][pe]=0}),b(I,Ce),xr.update(pe=>{if(!pe||!pe.productSelection)return pe;const Oe={...pe.productSelection.quantityByVariant};Oe[j]&&Object.keys(Oe[j]).forEach(me=>{Oe[j][me]=0});const ke=Object.values(Oe).reduce((me,q)=>me+Object.values(q).reduce((de,ye)=>de+ye,0),0);return{...pe,productSelection:{...pe.productSelection,selectedColors:l(C),variantsByColor:ze,quantityByVariant:Oe,totalQuantity:ke}}}),be(),rA(G);return}if(!l(C).includes(j)){const ze=l(a).options[0].id,Ce=l(a).variants.filter(pe=>{var Oe;return!pe.option_values||!Array.isArray(pe.option_values)?!1:(Oe=pe.option_values)==null?void 0:Oe.some(ke=>ke.option_value&&ke.option_value.option?ke.option_value.option.id===ze&&ke.option_value.value===j:ke.option_id?ke.option_id===ze&&ke.value===j:!1)});Ce.length>0&&(b(N,{...l(N),[j]:Ce}),b(C,[...l(C),j]),xr.update(pe=>!pe||!pe.productSelection?pe:{...pe,productSelection:{...pe.productSelection,selectedColors:[...pe.productSelection.selectedColors,j],variantsByColor:{...pe.productSelection.variantsByColor,[j]:Ce},quantityByVariant:{...pe.productSelection.quantityByVariant,[j]:pe.productSelection.quantityByVariant[j]||{}}}}),rA(G))}return}const _e=l(a).options[0].id,Le=l(a).variants.filter(ze=>{var Ce;return!ze.option_values||!Array.isArray(ze.option_values)?!1:(Ce=ze.option_values)==null?void 0:Ce.some(pe=>pe.option_value&&pe.option_value.option?pe.option_value.option.id===_e&&pe.option_value.value===j:pe.option_id?pe.option_id===_e&&pe.value===j:!1)}),X={...l(N)};if(Le.length>0&&(X[j]=Le),d()&&d()!=="temp"){const ze=o();((Ne=(Ie=ze==null?void 0:ze.productSelection)==null?void 0:Ie.selectedColors)==null?void 0:Ne.includes(j))?(b(N,{...l(N),...X}),xr.update(pe=>!pe||!pe.productSelection?pe:{...pe,productSelection:{...pe.productSelection,variantsByColor:{...pe.productSelection.variantsByColor,...X}}})):(l(C).includes(j)||b(C,[...l(C),j]),b(N,{...l(N),...X}),xr.update(pe=>{var de,ye,Fe,Pe,nt;if(!pe||!pe.productSelection)return pe;const Oe=Object.keys(pe.productSelection.quantityByVariant||{}),ke=new Set([...Oe,j]),me=Array.from(ke),q={...((de=pe.productSelection)==null?void 0:de.variantsByColor)||{},...X};return console.log(" Edit :   (  ):",{colorValue:j,colorsWithQuantity:Oe,newSelectedColors:me,variantsInColor:((ye=X[j])==null?void 0:ye.length)||0,quantityByVariant:pe.productSelection.quantityByVariant}),{...pe,productSelection:{...pe.productSelection,selectedColors:me,variantsByColor:q,quantityByVariant:{...((Fe=pe.productSelection)==null?void 0:Fe.quantityByVariant)||{},[j]:((nt=(Pe=pe.productSelection)==null?void 0:Pe.quantityByVariant)==null?void 0:nt[j])||{}}}}}))}else xr.toggleColorSelection(j,X)}function Be(j){var _e;if(!l(a)||l(a).options.length<2||!j||!j.option_values||!Array.isArray(j.option_values))return"";const ae=l(a).options[1].id,Ee=j.option_values.find(Le=>Le.option_value&&Le.option_value.option?Le.option_value.option.id===ae:Le.option_id?Le.option_id===ae:!1);return((_e=Ee==null?void 0:Ee.option_value)==null?void 0:_e.value)||(Ee==null?void 0:Ee.value)||""}function M(j,ae){var Le;const Ee=((Le=l(I)[j])==null?void 0:Le[ae])||0,_e=Ee+1;o(),xr.updateQuantity(j,ae,_e),re("increase",j,ae,Ee,_e)}function O(j,ae){var _e;const Ee=((_e=l(I)[j])==null?void 0:_e[ae])||0;if(Ee>0){const Le=Ee-1;xr.updateQuantity(j,ae,Le),re("decrease",j,ae,Ee,Le)}}function J(j,ae,Ee){var D;const _e=parseInt(j.target.value)||0,Le=Math.max(0,_e),X=((D=l(I)[ae])==null?void 0:D[Ee])||0;xr.updateQuantity(ae,Ee,Le),re("input",ae,Ee,X,Le)}function re(j,ae,Ee,_e,Le){var X;if(typeof window<"u"){const D=Object.values(l(I)).reduce((oe,ve)=>oe+Object.values(ve).reduce((le,ue)=>le+ue,0),0)-_e+Le;window.dispatchEvent(new CustomEvent("productQuantityUpdate",{detail:{productId:(X=l(a))==null?void 0:X.id,action:j,color:ae,variantId:Ee,oldQuantity:_e,newQuantity:Le,newTotalQuantity:D,timestamp:Date.now(),source:"product.svelte"}}))}}let he=!1,ie=!1;function be(){const j=Object.values(l(I)).reduce((ae,Ee)=>ae+Object.values(Ee).reduce((_e,Le)=>_e+Le,0),0);l(ee)!==j&&(b(ee,j),te())}function te(){var j,ae;if(!he){he=!0;try{const Ee={};if(!((j=l(a))!=null&&j.quantity_discounts)||l(ee)===0){Object.keys(l(k)).length>0&&(b(k,{}),xr.updateVariantDiscounts({}));return}const _e=Object.keys(l(I)),Le=Object.keys(l(N));_e.filter(le=>!Le.includes(le)).length>0;for(const le in l(I))for(const ue in l(I)[le])if(l(I)[le][ue]>0){const Ne=(ae=l(N)[le])==null?void 0:ae.find(ze=>ze.id===ue);if(Ne&&Ne.prices&&Ne.prices.length>0){const ze=Ne.prices[0].amount,Ce=$i(l(ee),ze,l(a).quantity_discounts);Ce!=null&&Ce.hasDiscount&&(Ee[ue]=Ce)}}const D=Object.keys(l(k)).sort(),oe=Object.keys(Ee).sort();(JSON.stringify(D)!==JSON.stringify(oe)||Object.keys(Ee).some(le=>JSON.stringify(l(k)[le])!==JSON.stringify(Ee[le])))&&(b(k,Ee),xr.updateVariantDiscounts(l(k)))}finally{he=!1}}}function Z(){var _e;let j=0,ae=0,Ee=!1;for(const Le in l(I))for(const X in l(I)[Le]){const D=l(I)[Le][X];if(D>0){const oe=(_e=l(N)[Le])==null?void 0:_e.find(ve=>ve.id===X);if(oe&&oe.prices&&oe.prices.length>0){const ve=oe.prices[0].amount,le=l(k)[X];j+=ve*D,le!=null&&le.hasDiscount?(ae+=le.discountedPrice*D,Ee=!0):ae+=ve*D}}}return{originalTotal:j,discountedTotal:Ee?ae:j,hasDiscount:Ee}}function Ae(){if(l(ee)===0){b(w,!0),b(y," "),b(x," 1   .");return}xr.completeProductSelection();const j=[];for(const Ee in l(I))for(const _e in l(I)[Ee]){const Le=l(I)[Ee][_e];if(Le>0){const X=l(N)[Ee].find(D=>D.id===_e);X&&j.push({...X,quantity:Le})}}const ae=s().products.findIndex(Ee=>{var _e;return((_e=Ee.product)==null?void 0:_e.id)===l(a).id});ae>=0?Yt(Et,lt(s).products[ae]={product:l(a),variants:j,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}},lt(s)):Yt(Et,lt(s).products=[...s().products,{product:l(a),variants:j,quantity:l(ee),prints:[],addons:{},addonProductsMap:{}}],lt(s)),Et.updateTotalAmounts(),b(w,!0),b(y," "),b(x,`${l(ee)}  .`),u()&&u()()}async function we(){var ae,Ee,_e,Le,X,D,oe,ve,le;if(!A())return;const j=o().productSelection;if(j&&j.product&&j.productId===A()){b(f,!0),b(g,null);try{b(h,await Kd.loadIntegratedProductData(A(),i().id)),console.log(" Edit : productDataStore   ( variants ):",{productId:A(),variantsCount:((_e=(Ee=(ae=l(h))==null?void 0:ae.product)==null?void 0:Ee.variants)==null?void 0:_e.length)||0,hasOptionValues:(oe=(D=(X=(Le=l(h))==null?void 0:Le.product)==null?void 0:X.variants)==null?void 0:D[0])!=null&&oe.option_values?"yes":"no"}),(ve=l(h))!=null&&ve.product&&so.updateProduct(A(),{product:l(h).product,addons:l(h).addons||[],addonItems:l(h).addonItems||[]})}catch(ue){b(g,ue instanceof Error?ue.message:"   .")}finally{b(f,!1)}return}b(f,!0),b(g,null);try{if(b(h,await Kd.loadIntegratedProductData(A(),i().id)),(le=l(h))!=null&&le.product){const ue=s().products.find(Ie=>{var Ne;return((Ne=Ie.product)==null?void 0:Ne.id)===l(h).product.id});if(ue&&ue.variants.length>0){const Ie={},Ne=l(h).product.options[0].id;ue.variants.forEach(ze=>{var pe;if(!ze||!ze.option_values||!Array.isArray(ze.option_values))return;const Ce=ze.option_values.find(Oe=>Oe.option_value&&Oe.option_value.option?Oe.option_value.option.id===Ne:Oe.option_id?Oe.option_id===Ne:!1);if(Ce){const Oe=((pe=Ce.option_value)==null?void 0:pe.value)||Ce.value||"";Ie[Oe]||(Ie[Oe]=[]),Ie[Oe].push(ze)}});for(const ze in Ie)Y(ze),Ie[ze].forEach(Ce=>{l(I)[ze]&&zr(I,l(I)[ze][Ce.id]=Ce.quantity||0)});b(I,{...l(I)}),be()}}}catch(ue){b(g,ue instanceof Error?ue.message:"   .")}finally{b(f,!1)}}function z(){const j=o();if(!(j!=null&&j.productSelection)||!l(a))return;const ae=j.productSelection;if(b(C,[...ae.selectedColors]),b(I,{...ae.quantityByVariant}),b(ee,ae.totalQuantity),d()&&d(),l(C).length>0&&l(a)&&l(a).variants){b(N,{});const Ee=l(a).options[0].id;Object.keys(ae.quantityByVariant||{}).forEach(Le=>{const X=l(a).variants.filter(D=>{var oe;return(oe=D.option_values)==null?void 0:oe.some(ve=>ve.option_value&&ve.option_value.option?ve.option_value.option.id===Ee&&ve.option_value.value===Le:ve.option_id?ve.option_id===Ee&&ve.value===Le:!1)});X.length>0&&zr(N,l(N)[Le]=X)})}b(N,{...l(N)}),rA(G),Object.keys(l(N)).length>0&&xr.update(Ee=>!Ee||!Ee.productSelection?Ee:{...Ee,productSelection:{...Ee.productSelection,variantsByColor:l(N)}}),l(ee)>0&&te()}function F(){H=xr.subscribe(j=>{if(j!=null&&j.productSelection&&j.productId===A()){const ae=j.productSelection;if(!l(a)||!l(a).variants)return;if(b(C,[...ae.selectedColors]),b(I,{...ae.quantityByVariant}),b(ee,ae.totalQuantity),l(a)&&l(a).variants&&l(C).length>0){d()&&d();const Ee={},_e=l(a).options[0].id;if(Object.keys(ae.quantityByVariant||{}).forEach(X=>{const D=l(a).variants.filter(oe=>{var ve;return(ve=oe.option_values)==null?void 0:ve.some(le=>le.option_value&&le.option_value.option?le.option_value.option.id===_e&&le.option_value.value===X:le.option_id?le.option_id===_e&&le.value===X:!1)});D.length>0&&(Ee[X]=D)}),b(N,Ee),rA(G),!ie){const X=Object.keys(ae.variantsByColor||{}).sort(),D=Object.keys(Ee).sort();if(JSON.stringify(X)!==JSON.stringify(D)){ie=!0;try{console.log(" Store variantsByColor  ( ):",{before:X.length,after:D.length,beforeKeys:X,afterKeys:D}),xr.update(ve=>!ve||!ve.productSelection?ve:{...ve,productSelection:{...ve.productSelection,variantsByColor:Ee}})}finally{setTimeout(()=>{ie=!1},0)}}}}else l(C).length===0&&(b(N,{}),rA(G));ae.needsDiscountRecalculation&&l(ee)>0&&setTimeout(()=>{te()},0)}})}Xn(async()=>{d()&&d()!=="temp"||xr.initialize(A(),d()),F(),await we(),z()}),Xo(()=>{H&&H()}),Jt(()=>(o(),Vn(A()),l(h)),()=>{var j,ae,Ee;(ae=(j=o())==null?void 0:j.productSelection)!=null&&ae.product&&o().productSelection.productId===A()&&(!l(h)||((Ee=l(h).product)==null?void 0:Ee.id)!==o().productSelection.product.id)&&b(h,{product:o().productSelection.product,addons:o().productSelection.addons||[],addonItems:o().productSelection.addonItems||[]})}),Jt(()=>l(h),()=>{var j;b(a,((j=l(h))==null?void 0:j.product)||null)}),Jt(()=>(l(a),l(C),Vn(d()),l(G)),()=>{var j,ae;if(l(a)&&l(a).variants&&l(C).length>0){const Ee=d()&&d()!=="temp";console.log(` Reactive: product  , variantsByColor  (${Ee?"Edit":"Create"} )`,{productId:l(a).id,variantsCount:l(a).variants.length,selectedColors:l(C),firstVariant:l(a).variants[0],hasOptionValues:!!((j=l(a).variants[0])!=null&&j.option_values)});const _e={},Le=(ae=l(a).options[0])==null?void 0:ae.id;Le&&(l(C).forEach(X=>{const D=l(a).variants.filter(oe=>{var ve;return l(C).indexOf(X)===0&&l(a).variants.indexOf(oe),(ve=oe.option_values)==null?void 0:ve.some(le=>le.option_value&&le.option_value.option?le.option_value.option.id===Le&&le.option_value.value===X:le.option_id?le.option_id===Le&&le.value===X:!1)});D.length>0&&(_e[X]=D)}),b(N,_e),rA(G))}}),Jt(()=>(o(),l(k),l(G)),()=>{var j,ae;if((ae=(j=o())==null?void 0:j.productSelection)!=null&&ae.variantDiscounts){const Ee=o().productSelection.variantDiscounts,_e=Object.keys(l(k)).sort(),Le=Object.keys(Ee).sort();(JSON.stringify(_e)!==JSON.stringify(Le)||Object.keys(Ee).some(D=>JSON.stringify(l(k)[D])!==JSON.stringify(Ee[D])))&&(b(k,{...Ee}),rA(G))}}),mo(),an();var E=f9(),U=ut(E),P=m(U);{var T=j=>{var ae=XR();Q(j,ae)},R=j=>{var ae=Lt(),Ee=ut(ae);{var _e=X=>{var D=YR(),oe=m(D),ve=B(m(oe),2),le=B(m(ve),2),ue=m(le),Ie=B(oe,2);De(()=>Qe(ue,l(g))),tt("click",Ie,we),Q(X,D)},Le=X=>{var D=Lt(),oe=ut(D);{var ve=le=>{var ue=h9(),Ie=ut(ue),Ne=m(Ie),ze=m(Ne),Ce=B(Ne,2),pe=m(Ce),Oe=m(pe),ke=B(pe,2);{var me=fe=>{var Me=ZR();const At=at(Z);var Ve=m(Me),Ye=B(Ve);{var ot=ht=>{var Ge=JR();Q(ht,Ge)};xe(Ye,ht=>{l(At).hasDiscount&&ht(ot)})}De(()=>Qe(Ve,` : ${l(ee)??""} `)),Q(fe,Me)};xe(ke,fe=>{l(ee)>0&&fe(me)})}var q=B(Ie,2);{var de=fe=>{var Me=o9(),At=B(m(Me),2);er(At,5,()=>l(a).options[0].values,vr,(Ve,Ye)=>{var ot=n9();const ht=at(()=>l(C).includes(l(Ye).value));var Ge=m(ot),it=m(Ge),zt=m(it);{var xt=mt=>{var vt=t9(),$t=ut(vt),nr=B($t,2);{var Ht=Kt=>{var sr=e9();Q(Kt,sr)};xe(nr,Kt=>{l(ht)&&Kt(Ht)})}De(()=>{lr($t,"src",l(Ye).image),lr($t,"alt",l(Ye).value),Lr($t,`odz-w-12 odz-h-12 odz-object-cover odz-rounded-lg odz-shadow-sm
                                                   ${(l(ht)?"odz-ring-2 odz-ring-red-400 odz-ring-offset-2":"")??""}`)}),Q(mt,vt)};xe(zt,mt=>{l(Ye).image&&mt(xt)})}var Tt=B(it,2),yt=m(Tt),rt=B(Tt,2),Dt=m(rt);{var St=mt=>{var vt=Lt();const $t=at(()=>Object.values(l(I)[l(Ye).value]||{}).reduce((Kt,sr)=>Kt+sr,0));var nr=ut(vt);{var Ht=Kt=>{var sr=r9(),Ct=m(sr),ft=m(Ct);De(()=>Qe(ft,`${l($t)??""}`)),Q(Kt,sr)};xe(nr,Kt=>{l($t)>0&&Kt(Ht)})}Q(mt,vt)};xe(Dt,mt=>{var vt;l(ht)&&((vt=l(N)[l(Ye).value])==null?void 0:vt.length)>0&&l(G)>=0&&mt(St)})}var Nt=B(Dt,2),Je=m(Nt);De(()=>{Lr(ot,`odz-w-full odz-transition-all odz-duration-200 odz-ease-in-out
                                   ${(l(ht)?"odz-bg-gradient-to-r odz-from-red-50 odz-to-rose-50 odz-border-2 odz-border-red-400 odz-shadow-md":"odz-bg-white odz-border-2 odz-border-gray-200 hover:odz-border-gray-300 hover:odz-shadow-sm")??""}
                                   odz-rounded-xl odz-p-3`),Lr(Tt,`odz-flex-1 odz-text-sm odz-font-semibold odz-text-gray-700 odz-text-left
                                            ${(l(ht)?"odz-text-red-700":"")??""}`),Qe(yt,l(Ye).value),Lr(Nt,`odz-transition-transform odz-duration-300
                                               ${(l(ht)?"odz-rotate-90":"")??""}`),R4(Je,`odz-w-4 odz-h-4 odz-text-gray-400
                                                   ${(l(ht)?"odz-text-red-500":"")??""}`)}),tt("click",ot,()=>Y(l(Ye).value)),Q(Ve,ot)}),Q(fe,Me)};xe(q,fe=>{l(a).options.length>0&&fe(de)})}var ye=B(q,2);{var Fe=fe=>{var Me=u9();er(Me,5,()=>l(C),vr,(At,Ve)=>{var Ye=c9();const ot=at(()=>l(N)[l(Ve)]||[]),ht=at(()=>l(a).options[0].values.find(Nt=>Nt.value===l(Ve)));var Ge=m(Ye),it=m(Ge);{var zt=Nt=>{var Je=s9(),mt=m(Je);De(()=>{lr(mt,"src",l(ht).image),lr(mt,"alt",l(Ve))}),Q(Nt,Je)};xe(it,Nt=>{var Je;(Je=l(ht))!=null&&Je.image&&Nt(zt)})}var xt=B(it,2),Tt=m(xt),yt=m(Tt),rt=B(Ge,2);{var Dt=Nt=>{var Je=l9();er(Je,5,()=>l(ot),vr,(mt,vt)=>{var $t=A9();const nr=at(()=>Be(l(vt))),Ht=at(()=>{var fr;return((fr=l(I)[l(Ve)])==null?void 0:fr[l(vt).id])||0}),Kt=at(()=>l(k)[l(vt).id]),sr=at(()=>l(Ht)>0);var Ct=m($t),ft=m(Ct);{var Ot=fr=>{var yr=i9();Q(fr,yr)};xe(ft,fr=>{var yr;l(sr)&&((yr=l(Kt))!=null&&yr.hasDiscount)&&fr(Ot)})}var Vt=B(ft,2),ir=m(Vt),cr=m(ir),dr=B(ir,2),br=m(dr);{var yn=fr=>{F5(fr,{get originalPrice(){return l(vt).prices[0].amount},get finalPrice(){return l(Kt).discountedPrice},hasDiscount:!0,size:"sm"})},Fn=fr=>{var yr=a9(),en=m(yr);De(gn=>Qe(en,`${gn??""}`),[()=>Er(l(vt).prices[0].amount)],at),Q(fr,yr)};xe(br,fr=>{var yr;(yr=l(Kt))!=null&&yr.hasDiscount&&l(Ht)>0?fr(yn):fr(Fn,!1)})}var Dr=B(Vt,2),Br=m(Dr),Wr=B(Br,2),Vr=B(Wr,2);De(()=>{Lr(Ct,`odz-bg-white odz-border-2 odz-rounded-xl odz-p-2 odz-transition-all odz-duration-200
                                                    ${(l(sr)?"odz-border-red-300 odz-shadow-lg odz-scale-105":"odz-border-gray-200 hover:odz-border-red-200 hover:odz-shadow-md")??""}`),Lr(ir,`odz-bg-gradient-to-r odz-from-slate-600 odz-to-slate-800 odz-text-white
                                                           odz-px-3 odz-py-1 odz-rounded-lg odz-text-sm odz-font-bold odz-shadow-sm
                                                           ${(l(sr)?"odz-from-red-500 odz-to-red-700":"")??""}`),Qe(cr,l(nr)),Lr(Br,`odz-flex odz-items-center odz-justify-center odz-w-7 odz-h-7 sm:odz-w-8 sm:odz-h-8 odz-bg-white odz-rounded-md odz-shadow-sm
                                                           odz-text-gray-600 hover:odz-text-red-500 hover:odz-bg-red-50 odz-transition-colors odz-duration-150
                                                           ${(l(Ht)<=0?"odz-opacity-50 odz-cursor-not-allowed":"hover:odz-scale-110")??""}`),Br.disabled=l(Ht)<=0,Ym(Wr,l(Ht))}),tt("click",Br,()=>O(l(Ve),l(vt).id)),tt("input",Wr,fr=>J(fr,l(Ve),l(vt).id)),tt("click",Vr,()=>M(l(Ve),l(vt).id)),Q(mt,$t)}),Q(Nt,Je)},St=Nt=>{var Je=d9();Q(Nt,Je)};xe(rt,Nt=>{l(ot).length>0&&l(G)>=0?Nt(Dt):Nt(St,!1)})}De(()=>Qe(yt,l(Ve))),Q(At,Ye)}),Q(fe,Me)};xe(ye,fe=>{l(C).length>0&&fe(Fe)})}var Pe=B(ye,2);const nt=at(()=>d()||null),qe=at(()=>c()!==void 0?c():null),je=at(()=>l(ee)>0);Qp(Pe,{get productId(){return A()},get estimateId(){return l(nt)},get idx(){return l(qe)},debugSource:"product-tab",get showNextButton(){return l(je)},nextButtonText:"  ",onNext:Ae}),De(()=>{lr(ze,"src",l(a).thumbnail),lr(ze,"alt",l(a).title),Qe(Oe,l(a).title)}),Q(le,ue)};xe(oe,le=>{l(a)&&le(ve)},!0)}Q(X,D)};xe(Ee,X=>{l(g)?X(_e):X(Le,!1)},!0)}Q(j,ae)};xe(P,j=>{l(f)?j(T):j(R,!1)})}var $=B(U,2);Cc($,{get isOpen(){return l(w)},set isOpen(j){b(w,j)},get title(){return l(y)},set title(j){b(y,j)},get message(){return l(x)},set message(j){b(x,j)},$$legacy:!0}),Q(n,E),sn(),r()}var g9=W('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-justify-center odz-py-8"><div class="odz-text-center"><div class="odz-animate-spin odz-w-8 odz-h-8 odz-border-4 odz-border-blue-500 odz-border-t-transparent odz-rounded-full odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">   ...</p></div></div></div>'),v9=W('<div class="odz-bg-red-50 odz-border odz-border-red-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-red-800">  </h3> <p class="odz-text-sm odz-text-red-600"> </p></div></div></div>'),m9=W('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-overflow-hidden odz-rounded-lg odz-border odz-border-gray-200"><img class="odz-w-full odz-h-full odz-object-cover" loading="lazy"></div>'),w9=W('<div class="odz-w-12 odz-h-12 odz-flex-shrink-0 odz-bg-gray-100 odz-rounded-lg odz-border odz-border-gray-200 odz-flex odz-items-center odz-justify-center"><svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div>'),y9=W('<label><input type="radio" class="odz-w-4 odz-h-4 odz-text-red-600 odz-border-gray-300 odz-focus:ring-red-500"> <div class="odz-flex-1"><span class="odz-font-medium odz-text-gray-900"> </span> <div class="odz-text-sm odz-text-red-600 odz-font-semibold"> </div></div></label>'),b9=W('<div class="odz-mt-4 odz-p-3 odz-bg-green-50 odz-border odz-border-green-200 odz-rounded-lg"><div class="odz-flex odz-items-center odz-gap-2 odz-text-sm"><svg class="odz-w-4 odz-h-4 odz-text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="odz-text-green-800">: <strong> </strong> </span></div></div>'),_9=W('<div class="odz-border odz-border-gray-200 odz-rounded-lg odz-p-6"><div class="odz-flex odz-items-center odz-gap-3 odz-mb-4"><!> <h4 class="odz-text-md odz-font-semibold odz-text-gray-800"> </h4></div> <fieldset class="odz-space-y-3"><legend class="odz-sr-only"> </legend> <!></fieldset> <!></div>'),x9=W('<div class="odz-bg-white odz-border odz-border-gray-200 odz-rounded-xl odz-p-6"><h3 class="odz-text-lg odz-font-semibold odz-text-gray-800 odz-mb-6 odz-flex odz-items-center odz-gap-2"><svg class="odz-w-5 odz-h-5 odz-text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>  </h3> <div class="odz-space-y-8"></div></div>'),B9=W('<div class="odz-bg-gray-50 odz-border odz-border-gray-200 odz-rounded-xl odz-p-8 odz-text-center"><svg class="odz-w-12 odz-h-12 odz-text-gray-400 odz-mx-auto odz-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <h3 class="odz-text-lg odz-font-semibold odz-text-gray-700 odz-mb-2"> </h3> <p class="odz-text-gray-500">     .</p></div>'),z9=W("<!> <!>",1),C9=W('<div class="odz-bg-yellow-50 odz-border odz-border-yellow-200 odz-rounded-xl odz-p-6"><div class="odz-flex odz-items-center odz-gap-3"><svg class="odz-w-6 odz-h-6 odz-text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div><h3 class="odz-font-semibold odz-text-yellow-800">    </h3> <p class="odz-text-sm odz-text-yellow-600"> ID   .</p></div></div></div>'),S9=W('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-md odz-p-8"><div class="odz-text-center odz-mb-8"><h3 class="odz-text-lg odz-font-medium odz-text-gray-800">   .</h3></div> <div class="odz-space-y-3"><button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-gray-900 hover:odz-bg-gray-800 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors odz-flex odz-items-center odz-justify-center odz-gap-3"><div class="odz-w-6 odz-h-6 odz-bg-green-500 odz-rounded-full odz-flex odz-items-center odz-justify-center"><svg class="odz-w-4 odz-h-4 odz-text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>   </button> <button type="button" class="odz-w-full odz-px-6 odz-py-4 odz-bg-red-600 hover:odz-bg-red-700 odz-text-white odz-font-medium odz-rounded-lg odz-transition-colors">  </button></div></div></div>'),E9=W('<div class="odz-addon-tab"><div class="odz-mb-6"><h2 class="odz-text-xl odz-font-bold odz-text-gray-800 odz-mb-2"> </h2> <p class="odz-text-sm odz-text-gray-600">  </p></div> <div class="odz-space-y-6"><!></div></div> <!>',1);function F9(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=()=>fn(xr,"$fixedEstimateStore",t),i=()=>fn(oi,"$shopStore",t);let a=gt(e,"productId",8),A=gt(e,"estimateId",8,void 0),d=gt(e,"idx",8,void 0),c=gt(e,"onSave",8,void 0);gt(e,"onNext",8,void 0);let u=gt(e,"onPrev",8,void 0),h=null,f=Se(null),g=Se(!1),w=Se(null),y=Se({}),x=Se(!1),C="";function I(z,F,E){var U,P;xr.toggleAddonSelection(z,F,E),((U=l(y)[z])==null?void 0:U.productId)===F&&((P=l(y)[z])==null?void 0:P.variantId)===E?delete l(y)[z]:zr(y,l(y)[z]={productId:F,variantId:E}),b(y,{...l(y)}),N(),typeof window<"u"&&(window.dispatchEvent(new CustomEvent("addonSelectionUpdate",{detail:{productId:F,addonId:z,variantId:E,selectedAddons:{...l(y)},timestamp:Date.now(),source:"addon.svelte"}})),console.log(" addonSelectionUpdate   (variantId ):",{productId:F,addonId:z,variantId:E,selectedAddonsCount:Object.keys(l(y)).length}))}function N(){const z=o().index;z>=0&&o().products[z]&&(Yt(Et,lt(o).products[z].addons={...l(y)},lt(o)),L_(Et,{...o()}))}async function k(){if(!a())return;const z=s().productSelection;if(z&&z.product&&z.productId===a()){b(f,{product:z.product,addons:z.addons||[],addonItems:z.addonItems||[]}),b(g,!1);return}b(g,!0),b(w,null);try{b(f,await so.loadIntegratedProductData(a(),i().id))}catch(F){b(w,F instanceof Error?F.message:"   .")}finally{b(g,!1)}}function ee(){const z=s();if(z&&z.productId===a()&&z.addonSelection&&z.addonSelection.selectedAddons){const F={...z.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,b(y,F),b(y,{...l(y)})}}function G(){h=xr.subscribe(z=>{if(z&&z.productId===a())if(z.addonSelection&&z.addonSelection.selectedAddons){const F={...z.addonSelection.selectedAddons};Object.keys(l(y)).length,Object.keys(F).length,JSON.stringify(l(y))!==JSON.stringify(F)&&(b(y,F),typeof window<"u"&&window.dispatchEvent(new CustomEvent("addonSelectionChanged",{detail:{selectedAddons:F}})))}else Object.keys(l(y)).length>0&&b(y,{})})}async function H(z){const F={printMethod:null,simplePrintState:null,detailedPrintState:null,simplePrintKeys:[],detailedPrintKeys:[],allProductKeys:[],otherData:{}},E=Object.keys(sessionStorage).filter(U=>U.includes(z));return F.allProductKeys=E,E.forEach(U=>{var T;const P=sessionStorage.getItem(U);if(U.startsWith(`simplePrint_${z}`)){if(F.simplePrintKeys.push(U),P)try{F.simplePrintState=JSON.parse(P)}catch{F.simplePrintState=null}return}if(U.startsWith(`detailedPrint_${z}`)){if(F.detailedPrintKeys.push(U),P)try{F.detailedPrintState=JSON.parse(P)}catch{F.detailedPrintState=null}return}if(U.startsWith(`fixedEstimate_${z}`)&&P)try{const R=JSON.parse(P);(T=R.printSelection)!=null&&T.currentMethod&&(F.printMethod=R.printSelection.currentMethod)}catch{}try{F.otherData[U]=P&&JSON.parse(P)}catch{F.otherData[U]=P}}),F}async function Y(z,F,E,U){var ze,Ce,pe,Oe,ke,me;const{shopData:P,customerData:T,fixedEstimateData:R,estimateStoreData:$}=z,j=new Date().toISOString(),ae={shop_id:(P==null?void 0:P.id)||null,sess:(P==null?void 0:P.sess)||null,customer_id:(P==null?void 0:P.customer_id)||null,name:(T==null?void 0:T.name)||(F==null?void 0:F.name)||null,order_name:(T==null?void 0:T.name)||(F==null?void 0:F.name)||null,order_phone:(T==null?void 0:T.phone)||(F==null?void 0:F.phone)||null,address1:(T==null?void 0:T.address1)||(F==null?void 0:F.address1)||null,address2:(T==null?void 0:T.address2)||(F==null?void 0:F.address2)||null,postcode:(T==null?void 0:T.postcode)||(F==null?void 0:F.postcode)||null,mall_type:(T==null?void 0:T.mallType)||(F==null?void 0:F.mallType)||null,upload_memo:($==null?void 0:$.uploadMemo)||null,status:"temp",created_at:j,updated_at:j},Ee=[];let _e=((ze=R==null?void 0:R.printSelection)==null?void 0:ze.currentMethod)||(E==null?void 0:E.printMethod)||"none";if(_e==="selection"&&(console.warn(' [prepareDataForDatabase] print_type "selection" . "none" .'),_e="none"),["simple","detailed","self-design","none"].includes(_e)||(console.warn(` [prepareDataForDatabase]   print_type: "${_e}". "none" .`),_e="none"),(Ce=R==null?void 0:R.productSelection)!=null&&Ce.quantityByVariant&&((pe=R==null?void 0:R.productSelection)!=null&&pe.variantsByColor)){const q=R.productSelection.quantityByVariant,de=R.productSelection.variantsByColor,ye=R.productSelection.variantDiscounts||{};for(const Fe in q){const Pe=q[Fe],nt=de[Fe]||[];for(const qe in Pe){const je=Pe[qe];if(je>0){const fe=nt.find(Me=>Me.id===qe);if(fe){const Me=fe.prices&&fe.prices.length>0?fe.prices[0].amount:0,At=ye[qe];let Ve=Me,Ye=0,ot="amount",ht=0,Ge="minus",it=null,zt=null;if(At&&At.hasDiscount){Ve=At.discountedPrice,Ye=At.discountAmount;const xt=At.discountInfo;xt&&(ot=xt.type||"amount",ht=xt.value||0,Ge=xt.direction||"minus",it=xt.min_quantity||null,zt=xt.max_quantity||null)}Ee.push({idx:0,variant_id:qe,quantity:je,price:Ve,print_type:_e,original_price:Me,discount_amount:Ye,discount_type:ot,discount_value:ht,discount_direction:Ge,discount_min_quantity:it,discount_max_quantity:zt,product_id:U,created_at:j,updated_at:j})}}}}}if(Ee.length===0&&($!=null&&$.products)){const q=$.products.find(de=>{var ye;return((ye=de.product)==null?void 0:ye.id)===U});q&&q.variants&&q.variants.length>0&&q.variants.forEach((de,ye)=>{var Fe;if(de.quantity>0){const Pe=de.prices&&de.prices.length>0?de.prices[0].amount:0,nt=(Fe=de.product)==null?void 0:Fe.quantity_discounts,qe=$i(de.quantity,Pe,nt),je=qe.discountInfo;Ee.push({idx:ye,variant_id:de.id,quantity:de.quantity,price:qe.discountedPrice,original_price:Pe,discount_amount:qe.discountAmount,discount_type:(je==null?void 0:je.type)||"amount",discount_value:(je==null?void 0:je.value)||0,discount_direction:(je==null?void 0:je.direction)||"minus",discount_min_quantity:(je==null?void 0:je.min_quantity)||null,discount_max_quantity:(je==null?void 0:je.max_quantity)||null,product_id:U,created_at:j,updated_at:j})}})}const X=[];E.simplePrintState&&Array.isArray(E.simplePrintState)&&E.simplePrintState.forEach((q,de)=>{X.push({idx:0,object_id:q.objectId||`area-${de}`,title:q.title||`  ${de+1}`,print_method:q.printMethod||null,uploaded_files:q.uploadedFiles||null,file_metadata:q.savedFileInfo||null,price:q.price||0,created_at:j,updated_at:j})});const D=[],oe=new Set,ve=((Oe=R==null?void 0:R.printSelection)==null?void 0:Oe.currentMethod)==="detailed"||Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0;async function le(q,de){var At,Ve,Ye,ot;if(!q)return;const ye=((At=q.template)==null?void 0:At.id)??q.template_id??null,Fe=q.objectId??q.object_id??null;if(!ye&&!Fe||Fe&&oe.has(Fe))return;let Pe=0;const nt=q.price??0,qe=Number(nt);if(Number.isFinite(qe)&&qe>0)Pe=qe;else try{const ht=((Ve=R==null?void 0:R.productSelection)==null?void 0:Ve.totalQuantity)||0;let Ge=0,it=0;if(q.colors&&((Ye=q.template)!=null&&Ye.templateProduct)){const zt=q.colors.length,xt=q.template.templateProduct.template_product_variants.find(Tt=>Tt.color_count===zt);if(xt){const Tt=await il(xt.variant_id);if(Tt)if(Ge=Tt.prices[0].amount,xt.min_quantity<=ht)if(it=Ge*ht,q.template.templateProduct.product.quantity_discounts&&q.template.templateProduct.product.quantity_discounts.length>0){const yt=$i(ht,Ge,q.template.templateProduct.product.quantity_discounts);Pe=yt.hasDiscount?yt.discountedPrice*ht:it}else Pe=it;else Pe=xt.plate_price}}else if((ot=q.template)!=null&&ot.templateProduct){const zt=q.template.templateProduct.template_product_variants[0];if(zt){const xt=await il(zt.variant_id);if(xt)if(Ge=xt.prices[0].amount,zt.min_quantity<=ht)if(it=Ge*ht,q.template.templateProduct.product.quantity_discounts&&q.template.templateProduct.product.quantity_discounts.length>0){const Tt=$i(ht,Ge,q.template.templateProduct.product.quantity_discounts);Pe=Tt.hasDiscount?Tt.discountedPrice*ht:it}else Pe=it;else Pe=zt.plate_price}}}catch{Pe=0}const je=q.discountInfo||{},fe=je.discountDetails||je.discountInfo||{};D.push({idx:0,template_id:ye,variant_id:q.variant_id??null,price:Pe,colors:q.colors||null,uploads:q.uploads||null,name_sheet:q.nameSheet??q.name_sheet??null,object_id:Fe,original_price:je.originalPrice??q.original_price??null,discount_amount:je.discountAmount??q.discount_amount??null,discount_type:fe.type??q.discount_type??null,discount_value:fe.value??q.discount_value??null,discount_direction:fe.direction??q.discount_direction??null,discount_min_quantity:fe.min_quantity??q.discount_min_quantity??null,discount_max_quantity:fe.max_quantity??q.discount_max_quantity??null,created_at:j,updated_at:j}),Fe&&oe.add(Fe)}if(ve){if(Array.isArray(E.detailedPrintState)&&E.detailedPrintState.length>0)for(let q=0;q<E.detailedPrintState.length;q++){const de=E.detailedPrintState[q];await le(de)}if(D.length===0&&($!=null&&$.products)){const q=$.products.find(de=>{var ye;return((ye=de.product)==null?void 0:ye.id)===U});if(q!=null&&q.prints&&q.prints.length>0)for(let de=0;de<q.prints.length;de++)await le(q.prints[de])}}const ue=[],Ie=(ke=R==null?void 0:R.addonSelection)==null?void 0:ke.selectedAddons,Ne=((me=R==null?void 0:R.productSelection)==null?void 0:me.totalQuantity)||0;return Ie&&Object.keys(Ie).length>0&&Object.entries(Ie).forEach(([q,de])=>{var Pe,nt,qe;let ye=0,Fe=0;if((nt=(Pe=l(f))==null?void 0:Pe.addonProductsMap)!=null&&nt[de.productId]){const fe=(qe=l(f).addonProductsMap[de.productId].variants)==null?void 0:qe.find(Me=>Me.id===de.variantId);fe&&fe.prices&&fe.prices.length>0&&(Fe=fe.prices[0].amount||0,ye=Fe)}ue.push({idx:0,addon_id:q,selected_product_id:de.productId,selected_variant_id:de.variantId,quantity:Ne,price:ye,created_at:j,updated_at:j})}),{estimate:ae,estimate_items:Ee,estimate_simple_prints:X,estimate_prints:D,estimate_addon_items:ue}}function Be(z){const F=[];return z.estimate.shop_id||F.push(" ID "),z.estimate_items.length===0&&F.push("  "),z.estimate_items.forEach((E,U)=>{E.variant_id||F.push(` ${U+1}:  ID `),(!E.quantity||E.quantity<=0)&&F.push(` ${U+1}:  `)}),z.estimate_simple_prints.forEach((E,U)=>{E.object_id||F.push(`  ${U+1}:  ID `)}),z.estimate_prints&&z.estimate_prints.length>0&&z.estimate_prints.forEach((E,U)=>{!E.template_id&&!E.object_id&&F.push(`  ${U+1}: template_id  object_id `)}),{isValid:F.length===0,errors:F}}async function M(){var z;try{let F=null,E=null,U=null,P=null,T=null;xr.subscribe(ue=>{F=ue})(),so.subscribe(ue=>{E=ue})(),Et.subscribe(ue=>{U=ue})(),$l.subscribe(ue=>{P=ue})(),oi.subscribe(ue=>{T=ue})();const _e=await H(a()),Le={shopData:T,customerData:P,fixedEstimateData:F,extendedProductData:E,estimateStoreData:U},X={name:P==null?void 0:P.name,phone:P==null?void 0:P.phone,address1:P==null?void 0:P.address1,address2:P==null?void 0:P.address2,postcode:P==null?void 0:P.postcode,mallType:P==null?void 0:P.mallType},D=await Y(Le,X,_e,a()),oe=Be(D);if(!oe.isValid){alert(`   :

${oe.errors.join(`
`)}

   .`);return}const ve=await w5(D,(P==null?void 0:P.mallType)||(X==null?void 0:X.mallType),T==null?void 0:T.customer_id,T==null?void 0:T.sess);if(ve.success){const ue=`
   !

  : ${((z=ve.details)==null?void 0:z.estimateNumber)||"N/A"}
  ID: ${ve.estimateId}
  ID: ${a()}
   : ${D.estimate_items.length}
   : ${D.estimate_simple_prints.length}
   : ${D.estimate_prints.length}
  : ${D.estimate_addon_items.length}

   : ${new Date().toLocaleString()}

   !
                `.trim();b(x,!0),C=ve.estimateId}else{const ue=`
   !

  ID: ${a()}
  : ${ve.error}

  : ${new Date().toLocaleString()}

    .
                `.trim();alert(ue)}const le={version:"1.0.0",timestamp:new Date().toISOString(),productId:a(),databaseData:D,validationResult:oe,saveResult:ve,stores:{shopStore:T,customerStore:P,fixedEstimateStore:F,extendedProductDataStore:E,estimateStore:U},sessionStorageBackup:_e,integratedProductData:l(f),selectedAddons:l(y),formData:X};window.lastEstimateDataPackage=le}catch(F){const E=`
     !

  : ${F instanceof Error?F.message:"   "}
  ID: ${a()}
  : ${new Date().toLocaleString()}

   .
            `.trim();alert(E)}}function O(){b(x,!1),xr.reset(),so.reset(),Et.reset(),b(y,{}),b(f,null),Object.keys(sessionStorage).filter(F=>F.includes(a())).forEach(F=>sessionStorage.removeItem(F)),xr.setCurrentStep("product"),setTimeout(()=>{window.location.href="/"},100)}function J(){b(x,!1);const z=Object.keys(sessionStorage).filter(F=>F.includes(a()));z.forEach(F=>sessionStorage.removeItem(F)),console.log(" SessionStorage   (  ):",z),window.location.href="/odiz/estimate.php"}Xn(async()=>{var E;const z=s();(!z||z.productId!==a())&&xr.initialize(a(),A()),G(),await k(),ee();const F=o().index;if(F>=0&&((E=o().products[F])!=null&&E.addons)){const U=o().products[F].addons;Object.keys(U).length>0&&b(y,{...U})}}),Xo(()=>{h&&h()}),an();var re=E9(),he=ut(re),ie=B(m(he),2),be=m(ie);{var te=z=>{var F=g9();Q(z,F)},Z=z=>{var F=Lt(),E=ut(F);{var U=T=>{var R=v9(),$=m(R),j=B(m($),2),ae=B(m(j),2),Ee=m(ae);De(()=>Qe(Ee,l(w))),Q(T,R)},P=T=>{var R=Lt(),$=ut(R);{var j=Ee=>{var _e=z9(),Le=ut(_e);{var X=Ie=>{var Ne=x9(),ze=B(m(Ne),2);er(ze,5,()=>l(f).addons,Ce=>Ce.id,(Ce,pe)=>{var Oe=_9(),ke=m(Oe),me=m(ke);{var q=At=>{var Ve=m9(),Ye=m(Ve);De(()=>{lr(Ye,"src",l(pe).items[0].addon_product.thumbnail),lr(Ye,"alt",l(pe).name)}),E_(Ye),tt("error",Ye,ot=>{const ht=ot.target;ht.style.display="none",ht.parentElement&&(ht.parentElement.innerHTML=`
                                                        <div class="odz-w-full odz-h-full odz-bg-gray-100 odz-flex odz-items-center odz-justify-center">
                                                            <svg class="odz-w-6 odz-h-6 odz-text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                                            </svg>
                                                        </div>
                                                    `)}),Q(At,Ve)},de=At=>{var Ve=w9();Q(At,Ve)};xe(me,At=>{l(pe).items&&l(pe).items.length>0&&l(pe).items[0].addon_product.thumbnail?At(q):At(de,!1)})}var ye=B(me,2),Fe=m(ye),Pe=B(ke,2),nt=m(Pe),qe=m(nt),je=B(nt,2);er(je,1,()=>l(pe).items,At=>At.id,(At,Ve)=>{var Ye=Lt(),ot=ut(Ye);{var ht=Ge=>{var it=Lt(),zt=ut(it);er(zt,1,()=>l(Ve).addon_product.variants,xt=>xt.id,(xt,Tt)=>{var yt=y9();const rt=at(()=>{var Ht,Kt;return((Ht=l(y)[l(pe).id])==null?void 0:Ht.productId)===l(Ve).addon_product.id&&((Kt=l(y)[l(pe).id])==null?void 0:Kt.variantId)===l(Tt).id}),Dt=at(()=>l(Tt).prices&&l(Tt).prices.length>0?l(Tt).prices[0].amount:0);var St=m(yt),Nt=hc(()=>(()=>{var ir,cr;const Ht=l(pe).id,Kt=l(pe).name,sr=l(Ve).addon_product.id,Ct=l(Ve).addon_product.title,ft=l(Tt).id,Ot=l(Tt).title,Vt=(cr=(ir=l(Tt).prices)==null?void 0:ir[0])==null?void 0:cr.amount;return dr=>{console.log(" Radio button clicked ( ):",{addonId:Ht,addonName:Kt,productId:sr,productTitle:Ct,variantId:ft,variantTitle:Ot,variantPrice:Vt,radioId:dr.target.id,timestamp:Date.now()}),I(Ht,sr,ft)}})()),Je=B(St,2),mt=m(Je),vt=m(mt),$t=B(mt,2),nr=m($t);De(Ht=>{lr(yt,"for",`addon-${l(pe).id??""}-${l(Ve).id??""}-${l(Tt).id??""}`),Lr(yt,`odz-flex odz-items-center odz-gap-4 odz-p-4 odz-border-2 odz-rounded-lg odz-cursor-pointer odz-transition-all
                                                           ${(l(rt)?"odz-border-red-500 odz-bg-red-50":"odz-border-gray-200 odz-bg-white hover:odz-border-gray-300")??""}`),lr(St,"id",`addon-${l(pe).id??""}-${l(Ve).id??""}-${l(Tt).id??""}`),lr(St,"name",`addon-${l(pe).id??""}`),Lu(St,l(rt)),Qe(vt,l(Tt).title||l(Ve).addon_product.title),Qe(nr,` ${Ht??""}`)},[()=>Er(l(Dt))],at),tt("change",St,function(...Ht){var Kt;(Kt=l(Nt))==null||Kt.apply(this,Ht)}),Q(xt,yt)}),Q(Ge,it)};xe(ot,Ge=>{l(Ve).addon_product.variants&&l(Ve).addon_product.variants.length>0&&Ge(ht)})}Q(At,Ye)});var fe=B(Pe,2);{var Me=At=>{var Ve=Lt();const Ye=at(()=>l(pe).items.find(it=>it.addon_product.id===l(y)[l(pe).id].productId)),ot=at(()=>{var it,zt;return(zt=(it=l(Ye))==null?void 0:it.addon_product.variants)==null?void 0:zt.find(xt=>xt.id===l(y)[l(pe).id].variantId)});var ht=ut(Ve);{var Ge=it=>{var zt=b9(),xt=m(zt),Tt=B(m(xt),2),yt=B(m(Tt)),rt=m(yt),Dt=B(yt);De(St=>{Qe(rt,l(ot).title||l(Ye).addon_product.title),Qe(Dt,` ( ${St??""})`)},[()=>{var St,Nt;return Er(((Nt=(St=l(ot).prices)==null?void 0:St[0])==null?void 0:Nt.amount)||0)}],at),Q(it,zt)};xe(ht,it=>{l(Ye)&&l(ot)&&it(Ge)})}Q(At,Ve)};xe(fe,At=>{l(y)[l(pe).id]&&At(Me)})}De(()=>{Qe(Fe,l(pe).name),Qe(qe,`${l(pe).name??""} `)}),Q(Ce,Oe)}),Q(Ie,Ne)},D=Ie=>{var Ne=B9();Q(Ie,Ne)};xe(Le,Ie=>{l(f).addons.length>0?Ie(X):Ie(D,!1)})}var oe=B(Le,2);const ve=at(()=>A()||null),le=at(()=>d()!==void 0?d():null),ue=at(()=>({type:"double",buttons:[{text:" ",action:u()||(()=>{}),style:"secondary",icon:"arrow-left"},{text:" ",action:A()&&typeof d()=="number"&&c()?c():M,style:"primary",icon:"save",size:"large"}]}));Qp(oe,{get productId(){return a()},get estimateId(){return l(ve)},get idx(){return l(le)},debugSource:"addon-tab",get buttonConfig(){return l(ue)}}),Q(Ee,_e)},ae=Ee=>{var _e=C9();Q(Ee,_e)};xe($,Ee=>{l(f)?Ee(j):Ee(ae,!1)},!0)}Q(T,R)};xe(E,T=>{l(w)?T(U):T(P,!1)},!0)}Q(z,F)};xe(be,z=>{l(g)?z(te):z(Z,!1)})}var Ae=B(he,2);{var we=z=>{var F=S9(),E=m(F),U=B(m(E),2),P=m(U),T=B(P,2);tt("click",P,O),tt("click",T,J),Q(z,F)};xe(Ae,z=>{l(x)&&z(we)})}Q(n,re),sn(),r()}var I9=W('<button><div class="odz-flex odz-items-center odz-justify-center odz-gap-2"><span class="odz-hidden sm:odz-inline"> </span></div></button>'),U9=W('<div class="odz-flex odz-flex-col odz-gap-4 odz-p-4"><div class="odz-w-full"><div class="odz-flex odz-w-full odz-border-b odz-border-gray-200"></div></div>  <div><div><!></div> <div><!></div> <div><!></div></div></div>');function Xp(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(oi,"$shopStore",t);let s=gt(e,"productId",8),i=gt(e,"estimateId",8,void 0),a=gt(e,"idx",8,void 0),A=gt(e,"onSave",8,void 0),d=Se("product"),c=null,u=null,h=!1,f=null;const g=[{id:"product",label:"",description:"   "},{id:"print",label:"",description:"   "},{id:"addon",label:"",description:"  "}];function w(J){var be,te;const re=l(d),he=J;if(b(d,he),xr.setCurrentStep(he),so.getProductData(s())&&(so.saveToSession(s()),typeof window<"u"))try{const Z=`tab-state-${s()}`,Ae={currentTab:he,previousTab:re,timestamp:Date.now(),productId:s()};window.sessionStorage.setItem(Z,JSON.stringify(Ae))}catch{}if(typeof window<"u")try{let Z;const Ae=[i()&&a()!==void 0?`fixedEstimate_${s()}_${i()}_${a()}`:null,i()?`fixedEstimate_${s()}_${i()}`:null,a()!==void 0?`fixedEstimate_${s()}_${a()}`:null,`fixedEstimate_${s()}`].filter(Boolean);console.log("   - sessionStorage  :",{estimateId:i(),idx:a(),productId:s(),storageKeys:Ae});for(const z of Ae)try{const F=window.sessionStorage.getItem(z);if(F){const E=JSON.parse(F);if(console.log(" sessionStorage  :",{key:z,currentMethod:(be=E==null?void 0:E.printSelection)==null?void 0:be.currentMethod}),(te=E==null?void 0:E.printSelection)!=null&&te.currentMethod&&E.printSelection.currentMethod!=="selection"){Z=E.printSelection.currentMethod,console.log(" toMethod :",Z);break}}}catch{}const we=new CustomEvent("printAmountRecalc",{detail:{productId:s(),fromTab:re,toTab:he,toMethod:Z,estimateId:i(),idx:a(),timestamp:Date.now(),source:"tab-change"}});window.dispatchEvent(we)}catch{}console.log("   ( ):",{from:re,to:he,productId:s(),sessionSaved:!0})}function y(){l(d)==="product"?w("print"):l(d)==="print"&&w("addon")}function x(){if(typeof window>"u")return!1;try{const J=`tab-state-${s()}`,re=window.sessionStorage.getItem(J);if(re){const he=JSON.parse(re);if(he.productId===s()&&he.currentTab)return b(d,he.currentTab),!0}}catch{}return!1}async function C(){try{await so.loadIntegratedProductData(s(),o().id)}catch{}}Xn(async()=>{const J=i()&&i()!=="temp";await C();const re=x();h=re,J||xr.initialize(s()),re&&!J&&xr.setCurrentStep(l(d)),c=xr.subscribe(he=>{he&&he.productId===s()&&!h&&(he.currentStep,l(d))}),u=so.subscribe(he=>{}),f=he=>{const ie=he.detail;ie&&["product","print","addon"].includes(ie)&&w(ie)},typeof window<"u"&&window.addEventListener("changeTab",f)}),Xo(()=>{c&&c(),u&&u(),typeof window<"u"&&f&&window.removeEventListener("changeTab",f)}),an();var I=U9(),N=m(I),k=m(N);er(k,5,()=>g,vr,(J,re)=>{var he=I9(),ie=m(he),be=m(ie),te=m(be);De(()=>{Lr(he,`odz-flex-1 odz-px-4 odz-py-3 odz-text-sm odz-font-medium odz-transition-all odz-duration-200 odz-border-b-2
                           ${(l(d)===l(re).id?"odz-text-red-600 odz-border-red-400 odz-bg-red-50":"odz-text-gray-600 odz-border-transparent hover:odz-text-gray-800 hover:odz-border-gray-300")??""}`),Qe(te,l(re).label)}),tt("click",he,()=>w(l(re).id)),Q(J,he)});var ee=B(N,2),G=m(ee),H=m(G);p9(H,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:()=>w("print")});var Y=B(G,2),Be=m(Y);kx(Be,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y});var M=B(Y,2),O=m(M);F9(O,{get productId(){return s()},get estimateId(){return i()},get idx(){return a()},onNext:y,get onSave(){return A()}}),De(()=>{tl(G,"odz-hidden",l(d)!=="product"),tl(Y,"odz-hidden",l(d)!=="print"),tl(M,"odz-hidden",l(d)!=="addon")}),Q(n,I),sn(),r()}var Q9=W('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),T9=W('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),L9=W('<dialog class="odz-modal odz-modal-open odz-backdrop:odz-bg-black odz-backdrop:odz-bg-opacity-50"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900">  </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"></button></div></div></dialog>');function P9(n,e){on(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"estimateId",8),o=gt(e,"idx",8),s=gt(e,"productId",8),i=gt(e,"onClose",8),a=gt(e,"onSave",8),A=Se(!0),d=Se(""),c=Se();async function u(){var O,J,re,he,ie;try{b(A,!0),b(d,"");const be=await y5(r(),o());if(!be.items||be.items.length===0)throw new Error(`     . (estimateId: ${r()}, idx: ${o()})`);if(!((O=be.items[0])!=null&&O.product_id))throw new Error(" ID   .");if(!be.items.some(F=>F.variant&&F.variant.id)){const F=be.items.map(E=>E.variant_id).filter(Boolean);throw F.length===0?new Error("    .  ."):new Error(`     . ( ID: ${F[0]})
     .  .`)}const Z=_5(be);if(typeof window<"u"){const F=r()||"temp";[`fixedEstimate_${s()}_${F}_${o()}`,`simplePrint_${s()}_${F}`,`detailedPrint_${s()}_${F}`,`fixedEstimate_${s()}`,`simplePrint_${s()}`,`detailedPrint_${s()}`].forEach(U=>{window.sessionStorage.removeItem(U)})}const Ae=r()||"temp",we=Date.now().toString(36)+Math.random().toString(36).substr(2),z={productId:s(),productSelection:Z.fixedEstimateData.productSelection,printSelection:Z.fixedEstimateData.printSelection||null,addonSelection:Z.fixedEstimateData.addonSelection||null,additionalInfo:Z.fixedEstimateData.additionalInfo||null,currentStep:"product",isDebugMode:!0,sessionId:we,estimateId:Ae};if(typeof window<"u"){const{sessionStorageData:F}=Z,E=`fixedEstimate_${s()}_${Ae}_${o()}`;if(window.sessionStorage.setItem(E,JSON.stringify(z)),console.log(" sessionStorage   ( FixedEstimateState ):",{key:E,idx:o(),sessionId:z.sessionId,hasProductId:!!z.productId,quantityByVariant:Z.fixedEstimateData.productSelection.quantityByVariant}),F.simplePrintState){const U=`simplePrint_${s()}_${Ae}`;window.sessionStorage.setItem(U,JSON.stringify(F.simplePrintState))}if(F.detailedPrintState.length>0&&((J=z.printSelection)==null?void 0:J.currentMethod)==="detailed"){const U=`detailedPrint_${s()}_${Ae}`;window.sessionStorage.setItem(U,JSON.stringify(F.detailedPrintState))}}xr.set(z),console.log(" fixedEstimateStore   ( ),    ...",{sessionId:z.sessionId,hasProductId:!!z.productId,hasProductSelection:!!z.productSelection,selectedColorsCount:((he=(re=z.productSelection)==null?void 0:re.selectedColors)==null?void 0:he.length)||0,totalQuantity:((ie=z.productSelection)==null?void 0:ie.totalQuantity)||0}),await new Promise(F=>setTimeout(F,50)),b(A,!1)}catch(be){be instanceof Error?b(d,be.message):b(d,"    ."),b(A,!1)}}function h(){if(typeof window<"u"){const O=r()||"temp";[`fixedEstimate_${s()}_${O}_${o()}`,`simplePrint_${s()}_${O}`,`detailedPrint_${s()}_${O}`,`tab-state-${s()}`].forEach(re=>{window.sessionStorage.removeItem(re)})}xr.reset(),i()()}function f(){a()()}function g(O){O.key==="Escape"&&h()}function w(O){O.target===l(c)&&h()}Xo(()=>{if(typeof window<"u"){const O=r()||"temp";[`fixedEstimate_${s()}_${O}_${o()}`,`simplePrint_${s()}_${O}`,`detailedPrint_${s()}_${O}`,`tab-state-${s()}`].forEach(re=>{window.sessionStorage.removeItem(re)})}xr.reset()}),Jt(()=>(l(c),Vn(t())),()=>{l(c)&&(t()?(l(c).showModal(),u()):l(c).close())}),mo(),an();var y=L9(),x=m(y),C=m(x),I=B(m(C),2),N=m(I);Yl(N,{class:"odz-w-5 odz-h-5"});var k=B(C,2),ee=m(k);{var G=O=>{var J=Q9();Q(O,J)},H=O=>{var J=Lt(),re=ut(J);{var he=be=>{var te=T9(),Z=B(m(te),2),Ae=m(Z);De(()=>Qe(Ae,l(d))),Q(be,te)},ie=be=>{Xp(be,{get productId(){return s()},get estimateId(){return r()},get idx(){return o()},onSave:f})};xe(re,be=>{l(d)?be(he):be(ie,!1)},!0)}Q(O,J)};xe(ee,O=>{l(A)?O(G):O(H,!1)})}var Y=B(k,2),Be=m(Y),M=B(Be,2);Go(y,O=>b(c,O),()=>l(c)),De(()=>M.disabled=l(A)),tt("click",I,h),tt("click",Be,h),tt("click",M,f),tt("keydown",y,g),tt("click",y,w),Q(n,y),sn()}var k9=W('<div class="odz-flex odz-items-center odz-justify-center odz-min-h-screen"><div class="odz-text-center"><div class="odz-w-12 odz-h-12 odz-border-4 odz-border-red-500 odz-border-t-transparent odz-rounded-full odz-animate-spin odz-mx-auto odz-mb-4"></div> <p class="odz-text-sm odz-text-gray-600">  ...</p></div></div>'),O9=W('<div class="odz-mb-4"><button class="odz-flex odz-items-center odz-gap-2 odz-text-gray-600 hover:odz-text-gray-900 odz-transition-colors"><svg class="odz-w-5 odz-h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="odz-text-sm odz-font-medium"> </span></button></div>'),D9=W('<div class="odz-fixed odz-top-4 odz-right-4 odz-z-50 odz-bg-green-500 odz-text-white odz-px-4 odz-py-3 odz-rounded-lg odz-shadow-lg odz-flex odz-items-center odz-gap-2"><!> <span class="odz-text-sm"></span></div>'),N9=W('<button class="odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-px-6 odz-py-3 odz-rounded-lg odz-font-medium odz-text-sm odz-transition-colors"> </button>'),M9=W('<div class="odz-text-center odz-py-12"><!> <p class="odz-text-sm odz-text-gray-500 odz-mb-4">  </p> <!></div>'),H9=W('<p class="odz-mt-1 odz-text-xs odz-text-red-500"> </p>'),j9=W('<p class="odz-mt-1 odz-text-xs odz-text-gray-500">  4  </p>'),R9=W('<div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-relative"><!> <input type="password" placeholder="     "></div> <!></div>'),$9=W('<div class="odz-flex odz-justify-between odz-text-sm odz-text-red-600"><span></span> <span class="odz-font-medium"> </span></div>'),q9=W('<span class="odz-flex odz-items-center odz-justify-center odz-gap-2"><div class="odz-w-5 odz-h-5 odz-border-2 odz-border-white odz-border-t-transparent odz-rounded-full odz-animate-spin"></div>  ...</span>'),K9=W('<div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-4 odz-border odz-border-gray-200 odz-sticky odz-bottom-0"><button class="odz-w-full odz-bg-red-500 hover:odz-bg-red-600 odz-text-white odz-py-4 odz-rounded-lg odz-font-medium odz-text-base odz-transition-colors disabled:odz-opacity-50 disabled:odz-cursor-not-allowed"><!></button></div>'),V9=W('<div class="odz-max-w-5xl odz-mx-auto odz-px-4 odz-py-6"><!> <!> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><!></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-4"><div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder="  ()" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><select class="odz-w-20 odz-px-3 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"><option>010</option><option>011</option><option>016</option><option>017</option><option>018</option><option>019</option></select> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"> <input type="tel" placeholder="0000" maxlength="4" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500"></div></div> <div class="odz-col-span-full odz-border-t odz-border-gray-200 odz-my-2"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <div class="odz-flex odz-gap-2"><input type="text" placeholder="" readonly="" class="odz-flex-1 odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"> <button type="button" class="odz-px-6 odz-py-2.5 odz-bg-gray-700 hover:odz-bg-gray-800 odz-text-white odz-rounded-lg odz-text-sm odz-font-medium odz-transition-colors odz-whitespace-nowrap disabled:odz-opacity-50"> </button></div></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> <span class="odz-text-red-500">*</span></label> <input type="text" placeholder="    " readonly="" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm odz-bg-gray-50"></div> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="text" placeholder=" " class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <select class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"><option></option><option></option><option></option><option></option></select></div> <div><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"></label> <input type="date" class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50"></div> <!> <div class="odz-col-span-full"><label class="odz-block odz-text-sm odz-font-medium odz-text-gray-700 odz-mb-2"> </label> <textarea class="odz-w-full odz-px-4 odz-py-2.5 odz-border odz-border-gray-300 odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 odz-resize-none disabled:odz-bg-gray-50" rows="3" placeholder="  "></textarea></div></div></div> <div class="odz-bg-white odz-rounded-lg odz-shadow-sm odz-p-6 odz-mb-4 odz-border odz-border-gray-200"><div class="odz-space-y-3"><div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"> </span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <div class="odz-flex odz-justify-between odz-text-sm"><span class="odz-text-gray-600"></span> <span class="odz-font-medium"> </span></div> <!> <div class="odz-border-t odz-border-gray-200 odz-pt-3 odz-flex odz-justify-between"><span class="odz-font-semibold odz-text-gray-900"> </span> <span class="odz-text-xl odz-font-bold odz-text-red-600"> </span></div></div></div> <!></div>'),G9=W('<div class="odz-min-h-screen odz-bg-gray-50"><!></div> <!> <!> <!> <!>',1);function W9(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(Et,"$estimateStore",t),s=Se();let i=gt(e,"mallType",8,""),a=gt(e,"customerId",8,""),A=gt(e,"sess",8,""),d=gt(e,"shopId",8,""),c=gt(e,"estimateId",12,void 0),u=gt(e,"returnTo",8,"list"),h=Se(null),f=Se(!1),g=Se(!1),w=Se(!1),y=Se(!1),x=Se(""),C=Se(""),I=Se(void 0),N=Se(!1),k=Se(!1),ee=!1,G=Se(""),H=Se("");function Y(me){return me?me.length<4?{valid:!1,message:"  4  ."}:{valid:!0,message:""}:{valid:!1,message:" ."}}let Be=Se(!1),M=-1,O=Se(""),J=Se(-1),re=[],he=null,ie=!1;async function be(){var me;if(ie){console.log(" [Realtime]     ");return}if(!((me=l(h))!=null&&me.id)){console.log(" [Realtime]  ID ,  ");return}he&&clearTimeout(he),he=setTimeout(async()=>{try{console.log(" [Realtime]    :",l(h).id),await $(l(h).id),console.log(" [Realtime]    ")}catch(q){console.error(" [Realtime]   :",q)}},300)}function te(me){console.log(" [Realtime]    :",me);const q=lg(me,je=>{console.log(" [Realtime] Estimate  :",je),b(h,je),b(w,nc(je.status))});re.push(()=>q.unsubscribe());const de=l5(me,je=>{console.log(" [Realtime] EstimateItems  :",je.eventType),be()});re.push(()=>de.unsubscribe());const ye=h1(me,je=>{console.log(" [Realtime] EstimatePrints  :",je.eventType),be()});re.push(()=>ye.unsubscribe());const Fe=d5(me,je=>{console.log(" [Realtime] EstimateSimplePrints  :",je.eventType),be()});re.push(()=>Fe.unsubscribe());const Pe=c5(me,je=>{console.log(" [Realtime] EstimateAddonItems  :",je.eventType),be()});re.push(()=>Pe.unsubscribe());const nt=u5(me,je=>{console.log(" [Realtime] EstimateAdditionalCosts  :",je.eventType),be()});re.push(()=>nt.unsubscribe());const qe=u1(me,je=>{console.log(" [Realtime] EstimateComments  :",je.eventType)});re.push(()=>qe.unsubscribe()),console.log(" [Realtime]     (7 )")}function Z(){const{phone1:me,phone2:q,phone3:de}=o();me&&q&&de&&Et.update(ye=>({...ye,orderPhone:`${me}-${q}-${de}`}))}function Ae(me){if(me&&me.includes("-")){const q=me.split("-");q.length===3&&Et.update(de=>({...de,phone1:q[0]||"010",phone2:q[1]||"",phone3:q[2]||""}))}}function we(){return ee?Promise.resolve():new Promise(me=>{const q=document.createElement("script");q.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",q.onload=()=>{ee=!0,me()},document.head.appendChild(q)})}async function z(){try{await we(),new window.daum.Postcode({oncomplete(me){Et.update(q=>({...q,postcode:me.zonecode,address1:me.roadAddress||me.jibunAddress}))},onresize(me){}}).open()}catch{b(y,!0),b(x,"  "),b(C,"     .    .")}}Xn(async()=>{oi.set({id:d(),name:"",sess:A(),customer_id:a()}),$l.set({name:"",phone:"",address1:"",address2:"",postcode:"",mallType:i()}),c()?await E(c()):await F()}),Xo(()=>{re.forEach(me=>{try{me()}catch(q){console.error("   :",q)}}),re=[]});async function F(){b(f,!0);try{const me=await i1(i(),a(),A());me?(b(h,me),b(w,nc(me.status)),await T(me),te(me.id)):(Et.reset(),b(w,!0))}catch{b(y,!0),b(x," "),b(C,"     .")}finally{b(f,!1)}}async function E(me){b(f,!0);try{let q=await Mu(me);if(q){const de=!!(A()||a());if(z5(q)&&de){console.log("[loadEstimateById]    ,   ...");const Fe=await B5(me,d(),A()||null,a()||null,i()||null);if(Fe.success&&Fe.newEstimateId){if(console.log(`[loadEstimateById]   : ${me}  ${Fe.newEstimateId}`),U(Fe.newEstimateId),q=await Mu(Fe.newEstimateId),!q)throw new Error("    .");c(Fe.newEstimateId)}else{console.error("[loadEstimateById]   :",Fe.error),b(y,!0),b(x," "),b(C,`    : ${Fe.error}`);return}}b(h,q),b(w,nc(q.status)),await T(q),te(q.id)}else b(y,!0),b(x," "),b(C,"   .")}catch(q){console.error("[loadEstimateById] :",q),b(y,!0),b(x," "),b(C,"    .")}finally{b(f,!1)}}function U(me){try{const q=new URL(window.location.href);q.searchParams.set("estimateId",me),window.history.replaceState({},"",q.toString()),console.log(`[updateUrlWithNewEstimateId] URL  : ${q.toString()}`)}catch(q){console.error("[updateUrlWithNewEstimateId] URL  :",q)}}function P(me){const q={delivery:"",pickup:"",quick:""};return me&&q[me]||""}async function T(me){try{Yt(Et,lt(o).estimateName=me.name||"",lt(o)),Yt(Et,lt(o).organizationName=me.organization_name||"",lt(o)),Yt(Et,lt(o).orderName=me.order_name||"",lt(o)),Yt(Et,lt(o).orderPhone=me.order_phone||"",lt(o)),Yt(Et,lt(o).postcode=me.postcode||"",lt(o)),Yt(Et,lt(o).address1=me.address1||"",lt(o)),Yt(Et,lt(o).address2=me.address2||"",lt(o)),Yt(Et,lt(o).comment=me.comment||"",lt(o)),Yt(Et,lt(o).shippingMethod=P(me.shipping_method),lt(o)),Yt(Et,lt(o).prefDeliveryDate=me.pref_delivery_date||"",lt(o)),Yt(Et,lt(o).uploadMemo=me.upload_memo||"",lt(o)),Yt(Et,lt(o).designConfirm=me.design_confirm||"",lt(o)),me.order_phone&&Ae(me.order_phone),await $(me.id)}catch(q){q instanceof SyntaxError&&q.message.includes("JSON")?(b(y,!0),b(x," "),b(C,"    .  .")):(b(y,!0),b(x," "),b(C,"    ."))}}function R(me){if(me==null)return null;if(typeof me=="object")return me;if(typeof me=="string")try{return JSON.parse(me)}catch{return null}return me}async function $(me){var q;try{const de=await ju(me),ye=await gc(me),Fe=await l1(me),Pe=await dg(me),nt=await p1(me),qe=[],je={};for(const fe of de)if(fe.product_id&&fe.product){const Me=fe.idx||0;if(je[Me]||(je[Me]={product:fe.product,variants:[],quantity:0,prints:[],addons:{},print_type:fe.print_type||"none",simplePrints:[]}),fe.variant_id&&fe.quantity){const At=fe.original_price?parseFloat(fe.original_price.toString()):0,Ve=fe.price?parseFloat(fe.price.toString()):0,Ye=At>0,ot=Ye?At:Ve,ht={id:fe.variant_id,quantity:fe.quantity,prices:[{amount:ot}],thumbnail:((q=fe.variant)==null?void 0:q.thumbnail)||null,title:fe.variant_title||` ${fe.variant_id.substring(0,4)}`,discountInfo:Ye&&fe.discount_amount?{discountAmount:fe.discount_amount,discountType:fe.discount_type,discountValue:fe.discount_value,discountDirection:fe.discount_direction}:void 0,isDiscountedPrice:!Ye};je[Me].variants.push(ht),je[Me].quantity+=fe.quantity}}for(const fe of ye)if(fe.template_id&&fe.estimate_id){const Me=fe.idx||0;if(je[Me]){const At={template:{id:fe.template_id,name:""},price:fe.price||0,colors:R(fe.colors)||[],uploads:R(fe.uploads)||null,title:"",objectId:fe.object_id||null,variant_id:fe.variant_id||null};je[Me].prints.push(At)}}for(const fe of Fe){const Me=fe.idx||0;je[Me]&&(je[Me].simplePrints||(je[Me].simplePrints=[]),je[Me].simplePrints.push({object_id:fe.object_id||null,title:fe.title||" ",print_method:fe.print_method||"none",uploaded_files:R(fe.uploaded_files)||null,file_metadata:R(fe.file_metadata)||null,price:fe.price||0}))}Pe.forEach(fe=>{const Me=fe.idx||0;je[Me]&&(je[Me].addons||(je[Me].addons={}),je[Me].addons[fe.addon_id]={productId:fe.selected_product_id,variantId:fe.selected_variant_id||"",price:fe.price||0,quantity:fe.quantity||1})});for(const fe in je)qe.push({...je[fe],idx:parseInt(fe)});Yt(Et,lt(o).products=qe,lt(o)),Yt(Et,lt(o).index=(qe.length>0,0),lt(o)),Et.updateTotalAmounts()}catch(de){throw de instanceof SyntaxError&&de.message.includes("JSON")?(b(y,!0),b(x," "),b(C,"     .  .")):(b(y,!0),b(x," "),b(C,"     .")),de}}function j(me){b(g,!1)}function ae(me){var q,de;try{const ye=o().products[me];if(!ye||ye.idx===void 0){b(y,!0),b(x," "),b(C,"    .");return}if(!((q=ye.product)!=null&&q.id)){b(y,!0),b(x," "),b(C," ID   .");return}if(!((de=l(h))!=null&&de.id)){b(y,!0),b(x," "),b(C,"    .");return}M=me,b(O,ye.product.id),b(J,ye.idx),ie=!0,console.log(" [Edit]    - Realtime   "),b(Be,!0)}catch{b(y,!0),b(x,""),b(C,"    .")}}function Ee(){b(Be,!1),M=-1,b(O,""),b(J,-1),ie=!1,console.log(" [Edit]    - Realtime   ")}async function _e(){var me,q,de,ye,Fe,Pe,nt,qe,je,fe,Me,At,Ve;b(N,!0);try{if(!((me=l(h))!=null&&me.id))throw new Error(" ID .");if(l(J)===-1)throw new Error(" idx  .");const Ye=kn(xr);if(!Ye||!Ye.productSelection)throw new Error("  .");if(!Ye.productSelection.quantityByVariant||Object.keys(Ye.productSelection.quantityByVariant).length===0)throw new Error("   .");await Q0(l(h).id,l(J));const ot=[],{quantityByVariant:ht,variantDiscounts:Ge,variantsByColor:it}=Ye.productSelection;let zt="none";if(typeof window<"u"){const xt=l(h).id||"temp",Tt=`detailedPrint_${l(O)}_${xt}`,yt=`simplePrint_${l(O)}_${xt}`,rt=window.sessionStorage.getItem(Tt),Dt=window.sessionStorage.getItem(yt);if(rt)try{const St=JSON.parse(rt);Array.isArray(St)&&St.length>0&&(zt="detailed")}catch{}if(zt==="none"&&Dt)try{const St=JSON.parse(Dt);Array.isArray(St)&&St.length>0&&(zt="simple")}catch{}if(zt==="none"&&((q=Ye.printSelection)!=null&&q.currentMethod)){const St=Ye.printSelection.currentMethod;(St==="detailed"||St==="simple"||St==="self-design")&&(zt=St)}}console.log(" [Edit ]  print_type:",zt),console.log(" [Edit ] currentStore.printSelection:",Ye.printSelection);for(const xt in ht)for(const Tt in ht[xt]){const yt=ht[xt][Tt];if(yt>0){const rt=Ge==null?void 0:Ge[Tt],Dt=(de=it[xt])==null?void 0:de.find(Je=>Je.id===Tt),St=((Fe=(ye=Dt==null?void 0:Dt.prices)==null?void 0:ye[0])==null?void 0:Fe.amount)||0,Nt=(rt==null?void 0:rt.discountedPrice)||St;ot.push({estimate_id:l(h).id,product_id:Ye.productId,variant_id:Tt,quantity:yt,price:Nt,original_price:St,discount_amount:(rt==null?void 0:rt.discountAmount)||0,discount_type:((Pe=rt==null?void 0:rt.discountInfo)==null?void 0:Pe.type)||null,discount_value:((nt=rt==null?void 0:rt.discountInfo)==null?void 0:nt.value)||null,discount_direction:((qe=rt==null?void 0:rt.discountInfo)==null?void 0:qe.direction)||null,discount_min_quantity:((je=rt==null?void 0:rt.discountInfo)==null?void 0:je.min_quantity)||null,discount_max_quantity:((fe=rt==null?void 0:rt.discountInfo)==null?void 0:fe.max_quantity)||null,idx:l(J),print_type:zt})}}if(ot.length>0){const{error:xt}=await pt.from("estimate_items").insert(ot);if(xt)throw new Error(`  : ${xt.message}`)}if(typeof window<"u"){const xt=l(h).id||"temp",Tt=`detailedPrint_${l(O)}_${xt}`,yt=window.sessionStorage.getItem(Tt);if(yt){const St=JSON.parse(yt),Nt=((Me=Ye.productSelection)==null?void 0:Me.totalQuantity)||0;async function Je(vt,$t){var nr,Ht,Kt,sr;try{const Ct=((nr=vt.template)==null?void 0:nr.id)||vt.template_id;if(!Ct)return vt.price||0;const ft=await zc(Ct);if(!(ft!=null&&ft.template_product_variants)||ft.template_product_variants.length===0)return vt.price||0;let Ot=null;vt.variant_id&&(Ot=ft.template_product_variants.find(br=>br.variant_id===vt.variant_id)),!Ot&&Array.isArray(vt.colors)&&vt.colors.length>0&&(Ot=ft.template_product_variants.find(br=>br.color_count===vt.colors.length)),Ot||(Ot=ft.template_product_variants[0]);const Vt=await il(Ot.variant_id),ir=((Kt=(Ht=Vt==null?void 0:Vt.prices)==null?void 0:Ht[0])==null?void 0:Kt.amount)||0;if(Ot.min_quantity&&$t<Ot.min_quantity)return Ot.plate_price||0;let cr=ir;const dr=((sr=ft.product)==null?void 0:sr.quantity_discounts)||[];if(dr.length>0){const br=$i($t,ir,dr);br!=null&&br.hasDiscount&&(cr=br.discountedPrice)}return cr*$t}catch{return vt.price||0}}const mt=await Promise.all(St.map(async vt=>{var nr,Ht,Kt,sr,Ct,ft,Ot,Vt,ir,cr,dr,br,yn;const $t=await Je(vt,Nt);return{estimate_id:l(h).id,template_id:((nr=vt.template)==null?void 0:nr.id)||vt.template_id||null,colors:vt.colors||[],price:$t,object_id:vt.objectId||vt.object_id||null,variant_id:vt.variant_id||null,name_sheet:vt.nameSheet||vt.name_sheet||null,uploads:vt.uploads||null,original_price:vt.original_price||((Ht=vt.discountInfo)==null?void 0:Ht.originalPrice)||$t||0,discount_amount:vt.discount_amount||((Kt=vt.discountInfo)==null?void 0:Kt.discountAmount)||0,discount_type:vt.discount_type||((Ct=(sr=vt.discountInfo)==null?void 0:sr.discountDetails)==null?void 0:Ct.type)||null,discount_value:vt.discount_value||((Ot=(ft=vt.discountInfo)==null?void 0:ft.discountDetails)==null?void 0:Ot.value)||null,discount_direction:vt.discount_direction||((ir=(Vt=vt.discountInfo)==null?void 0:Vt.discountDetails)==null?void 0:ir.direction)||null,discount_min_quantity:vt.discount_min_quantity||((dr=(cr=vt.discountInfo)==null?void 0:cr.discountDetails)==null?void 0:dr.min_quantity)||null,discount_max_quantity:vt.discount_max_quantity||((yn=(br=vt.discountInfo)==null?void 0:br.discountDetails)==null?void 0:yn.max_quantity)||null,idx:l(J)}}));if(mt.length>0){const{error:vt}=await pt.from("estimate_prints").insert(mt);if(vt)throw new Error(`   : ${vt.message}`)}}const rt=`simplePrint_${l(O)}_${xt}`,Dt=window.sessionStorage.getItem(rt);if(Dt){const Nt=JSON.parse(Dt).map(Je=>({estimate_id:l(h).id,object_id:Je.objectId||Je.object_id||null,title:Je.title||null,print_method:Je.printMethod||Je.print_method||null,uploaded_files:Je.uploadedFiles||Je.uploaded_files||null,file_metadata:Je.savedFileInfo||Je.file_metadata||null,price:Je.price||0,idx:l(J)}));if(Nt.length>0){const{error:Je}=await pt.from("estimate_simple_prints").insert(Nt);if(Je)throw new Error(`   : ${Je.message}`)}}}if((At=Ye.addonSelection)!=null&&At.selectedAddons){const xt=[],Tt=((Ve=Ye.productSelection)==null?void 0:Ve.totalQuantity)||0;for(const[yt,rt]of Object.entries(Ye.addonSelection.selectedAddons)){const Dt=rt;let St=0;if(Dt.variantId)try{const{data:Nt,error:Je}=await pt.from("prices").select("amount").eq("variant_id",Dt.variantId).single();!Je&&Nt&&(St=Nt.amount)}catch{}xt.push({estimate_id:l(h).id,addon_id:yt,selected_product_id:Dt.productId,selected_variant_id:Dt.variantId||null,price:St,quantity:Tt,idx:l(J)})}if(xt.length>0){const{error:yt}=await pt.from("estimate_addon_items").insert(xt);if(yt)throw new Error(`  : ${yt.message}`)}}b(k,!0),setTimeout(()=>{b(k,!1)},3e3),Ee(),await $(l(h).id)}catch(Ye){let ot="     .";Ye instanceof Error&&(ot=Ye.message,Ye.message.includes("duplicate key")?ot="  .  .":Ye.message.includes("foreign key")?ot="   .     .":Ye.message.includes("not null")?ot="  .    .":Ye.message.includes("permission")&&(ot="   .  .")),b(y,!0),b(x," "),b(C,ot)}finally{b(N,!1)}}async function Le(me){var q;try{const de=o().products[me];if(!de||de.idx===void 0){b(y,!0),b(x," "),b(C,"    .");return}if(!((q=l(h))!=null&&q.id)){b(y,!0),b(x," "),b(C,"    .");return}await Q0(l(h).id,de.idx),Yt(Et,lt(o).products=o().products.filter((ye,Fe)=>Fe!==me),lt(o)),Et.updateTotalAmounts()}catch{b(y,!0),b(x," "),b(C,"    .")}}function X(me){const q={:"delivery",:"pickup",:"quick"};return me&&q[me]||null}async function D(){var me;if(!l(s)){b(y,!0),b(x," "),b(C,"    .");return}if(!a()){const q=Y(l(G));if(!q.valid){b(H,q.message),b(y,!0),b(x," "),b(C,q.message);return}b(H,"")}Z(),b(N,!0);try{if(!((me=l(h))!=null&&me.id))throw new Error("  .");const q=X(o().shippingMethod);await pc(l(h).id,{name:o().estimateName,organization_name:o().organizationName,order_name:o().orderName,order_phone:o().orderPhone,postcode:o().postcode,address1:o().address1,address2:o().address2,comment:o().comment||null,shipping_method:q,pref_delivery_date:o().prefDeliveryDate||null,upload_memo:o().uploadMemo||null,design_confirm:o().designConfirm||"none",password:a()?null:l(G)}),await s5(l(h).id,"pending"),b(k,!0),setTimeout(()=>{b(k,!1)},3e3),b(y,!0),b(x," "),b(C,"  ."),b(I,()=>{window.location.href="/odiz/list.php"})}catch(q){b(y,!0),b(x," "),b(C,q instanceof Error?q.message:"    ."),b(I,void 0)}finally{b(N,!1)}}Jt(()=>o(),()=>{b(s,o().estimateName&&o().orderName&&o().phone1&&o().phone2&&o().phone3&&o().postcode&&o().address1)}),mo(),an();var oe=G9(),ve=ut(oe),le=m(ve);{var ue=me=>{var q=k9();Q(me,q)},Ie=me=>{var q=V9(),de=m(q);{var ye=Xt=>{var pr=O9(),Pr=m(pr);tt("click",Pr,()=>window.location.href=`?mode=${u()}`),Q(Xt,pr)};xe(de,Xt=>{c()&&Xt(ye)})}var Fe=B(de,2);{var Pe=Xt=>{var pr=D9(),Pr=m(pr);n1(Pr,{class:"odz-w-4 odz-h-4"}),Q(Xt,pr)};xe(Fe,Xt=>{l(k)&&Xt(Pe)})}var nt=B(Fe,2),qe=m(nt);{var je=Xt=>{E5(Xt,{onSelectProduct:ae,onDeleteProduct:Le,get isEditable(){return l(w)},set isEditable(pr){b(w,pr)},$$legacy:!0})},fe=Xt=>{var pr=M9(),Pr=m(pr);pE(Pr,{class:"odz-w-16 odz-h-16 odz-text-gray-300 odz-mx-auto odz-mb-4"});var bn=B(Pr,4);{var qn=wo=>{var Rt=N9();tt("click",Rt,()=>b(g,!0)),Q(wo,Rt)};xe(bn,wo=>{l(w)&&wo(qn)})}Q(Xt,pr)};xe(qe,Xt=>{o().products&&o().products.length>0?Xt(je):Xt(fe,!1)})}var Me=B(nt,2),At=m(Me),Ve=m(At),Ye=B(m(Ve),2),ot=B(Ve,2),ht=B(m(ot),2),Ge=B(ot,2),it=B(m(Ge),2),zt=B(Ge,2),xt=B(m(zt),2),Tt=m(xt);De(()=>{o(),Tu(()=>{l(w)})});var yt=m(Tt);yt.value=(yt.__value="010")==null?"":"010";var rt=B(yt);rt.value=(rt.__value="011")==null?"":"011";var Dt=B(rt);Dt.value=(Dt.__value="016")==null?"":"016";var St=B(Dt);St.value=(St.__value="017")==null?"":"017";var Nt=B(St);Nt.value=(Nt.__value="018")==null?"":"018";var Je=B(Nt);Je.value=(Je.__value="019")==null?"":"019";var mt=B(Tt,2),vt=B(mt,2),$t=B(zt,4),nr=B(m($t),2),Ht=m(nr),Kt=B(Ht,2),sr=B($t,2),Ct=B(m(sr),2),ft=B(sr,2),Ot=B(m(ft),2),Vt=B(ft,2),ir=B(m(Vt),2);De(()=>{o(),Tu(()=>{l(w)})});var cr=m(ir);cr.value=((cr.__value="")==null,"");var dr=B(cr);dr.value=(dr.__value="")==null?"":"";var br=B(dr);br.value=(br.__value="")==null?"":"";var yn=B(br);yn.value=(yn.__value="")==null?"":"";var Fn=B(Vt,2),Dr=B(m(Fn),2),Br=B(Fn,2);{var Wr=Xt=>{var pr=R9(),Pr=B(m(pr),2),bn=m(Pr);o1(bn,{class:"odz-absolute odz-left-3 odz-top-1/2 odz-transform odz--translate-y-1/2 odz-w-5 odz-h-5 odz-text-gray-400"});var qn=B(bn,2),wo=B(Pr,2);{var Rt=Xr=>{var hr=H9(),So=m(hr);De(()=>Qe(So,l(H))),Q(Xr,hr)},Tr=Xr=>{var hr=j9();Q(Xr,hr)};xe(wo,Xr=>{l(H)?Xr(Rt):Xr(Tr,!1)})}De(()=>{Lr(qn,`odz-w-full odz-pl-10 odz-pr-4 odz-py-2.5 odz-border ${(l(H)?"odz-border-red-500":"odz-border-gray-300")??""} odz-rounded-lg odz-text-sm focus:odz-outline-none focus:odz-border-red-500 focus:odz-ring-1 focus:odz-ring-red-500 disabled:odz-bg-gray-50`),qn.disabled=!l(w)}),Fr(qn,()=>l(G),Xr=>b(G,Xr)),Q(Xt,pr)};xe(Br,Xt=>{a()||Xt(Wr)})}var Vr=B(Br,2),fr=B(m(Vr),2),yr=B(Me,2),en=m(yr),gn=m(en),On=B(m(gn),2),tn=m(On),Cr=B(gn,2),Yn=B(m(Cr),2),Yo=m(Yn),Co=B(Cr,2),Ze=B(m(Co),2),Qt=m(Ze),Mt=B(Co,2);{var jt=Xt=>{var pr=$9(),Pr=B(m(pr),2),bn=m(Pr);De(qn=>Qe(bn,`-${qn??""}`),[()=>Er(o().totalDiscountAmount)],at),Q(Xt,pr)};xe(Mt,Xt=>{o().totalDiscountAmount>0&&Xt(jt)})}var mr=B(Mt,2),ur=B(m(mr),2),ar=m(ur),Hr=B(yr,2);{var Rr=Xt=>{var pr=K9(),Pr=m(pr),bn=m(Pr);{var qn=Rt=>{var Tr=q9();Q(Rt,Tr)},wo=Rt=>{var Tr=zn(" ");Q(Rt,Tr)};xe(bn,Rt=>{l(N)?Rt(qn):Rt(wo,!1)})}De(()=>Pr.disabled=l(N)||!l(s)),tt("click",Pr,D),Q(Xt,pr)};xe(Hr,Xt=>{l(w)&&Xt(Rr)})}De((Xt,pr,Pr)=>{Ye.disabled=!l(w),ht.disabled=!l(w),it.disabled=!l(w),Tt.disabled=!l(w),mt.disabled=!l(w),vt.disabled=!l(w),Kt.disabled=!l(w),Ot.disabled=!l(w),ir.disabled=!l(w),Dr.disabled=!l(w),fr.disabled=!l(w),Qe(tn,`${o().totalQuantity||0}`),Qe(Yo,Xt),Qe(Qt,pr),Qe(ar,Pr)},[()=>Er(o().totalProductAmount),()=>Er(o().totalPrintAmount),()=>Er(o().totalAmount)],at),Fr(Ye,()=>o().estimateName,Xt=>Yt(Et,lt(o).estimateName=Xt,lt(o))),Fr(ht,()=>o().organizationName,Xt=>Yt(Et,lt(o).organizationName=Xt,lt(o))),Fr(it,()=>o().orderName,Xt=>Yt(Et,lt(o).orderName=Xt,lt(o))),Pu(Tt,()=>o().phone1,Xt=>Yt(Et,lt(o).phone1=Xt,lt(o))),tt("change",Tt,Z),Fr(mt,()=>o().phone2,Xt=>Yt(Et,lt(o).phone2=Xt,lt(o))),tt("input",mt,Z),Fr(vt,()=>o().phone3,Xt=>Yt(Et,lt(o).phone3=Xt,lt(o))),tt("input",vt,Z),Fr(Ht,()=>o().postcode,Xt=>Yt(Et,lt(o).postcode=Xt,lt(o))),tt("click",Kt,z),Fr(Ct,()=>o().address1,Xt=>Yt(Et,lt(o).address1=Xt,lt(o))),Fr(Ot,()=>o().address2,Xt=>Yt(Et,lt(o).address2=Xt,lt(o))),Pu(ir,()=>o().shippingMethod,Xt=>Yt(Et,lt(o).shippingMethod=Xt,lt(o))),Fr(Dr,()=>o().prefDeliveryDate,Xt=>Yt(Et,lt(o).prefDeliveryDate=Xt,lt(o))),Fr(fr,()=>o().comment,Xt=>Yt(Et,lt(o).comment=Xt,lt(o))),Q(me,q)};xe(le,me=>{l(f)?me(ue):me(Ie,!1)})}var Ne=B(ve,2);{var ze=me=>{Y1(me,{addProduct:j,productType:"godo",get isProductSearchOpen(){return l(g)},set isProductSearchOpen(q){b(g,q)},$$legacy:!0})};xe(Ne,me=>{l(g)&&me(ze)})}var Ce=B(Ne,2);{var pe=me=>{P9(me,{get isOpen(){return l(Be)},get estimateId(){return l(h).id},get idx(){return l(J)},get productId(){return l(O)},onClose:Ee,onSave:_e})};xe(Ce,me=>{l(Be)&&l(h)&&me(pe)})}var Oe=B(Ce,2);Cc(Oe,{get onClose(){return l(I)},get isOpen(){return l(y)},set isOpen(me){b(y,me)},get title(){return l(x)},set title(me){b(x,me)},get message(){return l(C)},set message(me){b(C,me)},$$legacy:!0});var ke=B(Oe,2);Sc(ke,{get isLoading(){return l(f)},set isLoading(me){b(f,me)},$$legacy:!0}),Q(n,oe),sn(),r()}const $b={qnaId:null,title:"",content:"",customerName:"",customerPhone:"",customerEmail:"",products:[],nextIdx:0,editingIdx:null,editingProductId:null,isLoading:!1,isSaving:!1};function X9(){const{subscribe:n,set:e,update:t}=nd({...$b});return{subscribe:n,reset:()=>{e({...$b})},setQnaId:r=>{t(o=>({...o,qnaId:r}))},setTitle:r=>{t(o=>({...o,title:r}))},setContent:r=>{t(o=>({...o,content:r}))},setCustomerInfo:(r,o,s)=>{t(i=>({...i,customerName:r,customerPhone:o,customerEmail:s}))},addProduct:r=>{t(o=>{const s={...r,idx:o.nextIdx};return{...o,products:[...o.products,s],nextIdx:o.nextIdx+1}})},updateProduct:(r,o)=>{t(s=>({...s,products:s.products.map(i=>i.idx===r?{...i,...o}:i)}))},removeProduct:r=>{t(o=>({...o,products:o.products.filter(s=>s.idx!==r)}))},setEditing:(r,o)=>{t(s=>({...s,editingIdx:r,editingProductId:o}))},clearEditing:()=>{t(r=>({...r,editingIdx:null,editingProductId:null}))},setLoading:r=>{t(o=>({...o,isLoading:r}))},setSaving:r=>{t(o=>({...o,isSaving:r}))},setState:r=>{t(o=>({...o,...r}))},getState:()=>kn({subscribe:n})}}const ki=X9();function Rz(n,e,t){return`qna_product_${e}_${n||"new"}_${t}`}function $z(n,e,t,r){const o=Rz(n,e,t);try{sessionStorage.setItem(o,JSON.stringify(r))}catch(s){console.error("[QnaStore] Failed to save to session:",s)}}function Y9(n,e,t){const r=Rz(n,e,t);try{const o=sessionStorage.getItem(r);return o?JSON.parse(o):null}catch(o){return console.error("[QnaStore] Failed to load from session:",o),null}}function d0(n){try{const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&r.startsWith("qna_product_")&&r.includes(`_${n||"new"}_`)&&e.push(r)}e.forEach(t=>sessionStorage.removeItem(t))}catch(e){console.error("[QnaStore] Failed to clear all session:",e)}}async function J9(n){const{data:e,error:t}=await pt.rpc("hash_inquiry_password",{plain_password:n});if(t)throw console.error("[QnaService] hashPassword error:",t),t;return e}async function Z9(n,e){const{data:t,error:r}=await pt.rpc("verify_inquiry_password",{inquiry_id_param:n,plain_password:e});if(r)throw console.error("[QnaService] verifyPassword error:",r),r;return t===!0}async function e$(n,e){try{const t=await qg(n);return t?t.customer_id?e&&t.customer_id===e?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!1,message:"     ."}:{canAccess:!1,requiresPassword:!0,message:" ."}:{canAccess:!1,requiresPassword:!1,message:"   ."}}catch(t){return console.error("[QnaService] checkQnaAccess error:",t),{canAccess:!1,requiresPassword:!1,message:"     ."}}}async function t$(n,e){try{return await Z9(n,e)?{canAccess:!0,requiresPassword:!1}:{canAccess:!1,requiresPassword:!0,message:"  ."}}catch(t){return console.error("[QnaService] accessQnaWithPassword error:",t),{canAccess:!1,requiresPassword:!0,message:"    ."}}}function r$(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),i=String(Math.floor(Math.random()*1e3)).padStart(3,"0");return`Q${e}${t}${r}${o}${s}${i}`}async function n$(n){const e=r$();let t;!n.customer_id&&n.password&&(t=await J9(n.password));const{password:r,...o}=n,s={...o,inquiry_no:e,status:n.status||"pending"};t&&(s.password=t);const{data:i,error:a}=await pt.from("inquiries").insert(s).select().single();if(a)throw console.error("[QnaService] createQna error:",a),a;return i}async function qg(n){const{data:e,error:t}=await pt.from("inquiries").select("*").eq("id",n).single();if(t){if(t.code==="PGRST116")return null;throw console.error("[QnaService] getQnaById error:",t),t}return e}async function o$(n,e,t){let r=pt.from("inquiries").select("*").eq("shop_id",n).order("created_at",{ascending:!1});const{data:o,error:s}=await r;if(s)throw console.error("[QnaService] getQnaList error:",s),s;return o||[]}async function n2(n,e){const{data:t,error:r}=await pt.from("inquiries").update({...e,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(r)throw console.error("[QnaService] updateQna error:",r),r;return t}async function qz(n,e){return n2(n,{status:e})}async function s$(n){const{error:e}=await pt.from("inquiries").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQna error:",e),e}async function i$(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaItems error:",o),o;return r||[]}async function o2(n){const{data:e,error:t}=await pt.from("inquiry_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaItems error:",t),t;return e||[]}async function a$(n){const{error:e}=await pt.from("inquiry_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaItems error:",e),e}async function A$(n,e){const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaPrints error:",o),o;return r||[]}async function s2(n){const{data:e,error:t}=await pt.from("inquiry_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaPrints error:",t),t;return e||[]}async function l$(n){const{error:e}=await pt.from("inquiry_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaPrints error:",e),e}async function Kz(n,e){const{data:t,error:r}=await pt.from("inquiry_comments").insert({...e,inquiry_id:n}).select().single();if(r)throw console.error("[QnaService] addQnaComment error:",r),r;return e.writer==="manager"&&await qz(n,"answered"),t}async function d$(n){const{data:e,error:t}=await pt.from("inquiry_comments").select("*").eq("inquiry_id",n).order("created_at",{ascending:!0});if(t)throw console.error("[QnaService] getQnaComments error:",t),t;return e||[]}async function c$(n){const{error:e}=await pt.from("inquiry_comments").delete().eq("id",n);if(e)throw console.error("[QnaService] deleteQnaComment error:",e),e}async function u$(n){const e=await qg(n);if(!e)throw new Error("   .");const t=await o2(n),r=await s2(n),o=await a2(n),s=await A2(n),i=await a1({shop_id:e.shop_id,customer_id:e.customer_id,name:e.title,order_name:e.customer_name,phone:e.customer_phone,email:e.customer_email,status:"temp",memo:`: ${e.inquiry_no}

${e.content}`});if(!i.id)throw new Error("  .");for(const a of t)await A1({estimate_id:i.id,idx:a.idx,product_id:a.product_id,variant_id:a.variant_id,quantity:a.quantity});for(const a of r)a.print_type==="simple"?await U0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,title:a.title,print_method:a.print_method,uploaded_files:a.uploaded_files,file_metadata:a.file_metadata}):a.print_type==="detailed"&&await d1({estimate_id:i.id,idx:a.idx,object_id:a.object_id,template_id:a.template_id,colors:a.colors,uploads:a.uploaded_files});for(const a of o)await U0({estimate_id:i.id,idx:a.idx,object_id:a.object_id,print_method:a.print_method,template_id:a.template_id,selected_colors:a.selected_colors,print_config:a.print_config,uploads:a.uploads,name_sheet:a.name_sheet,memo:a.memo});for(const a of s)await f1({estimate_id:i.id,idx:a.idx,addon_id:a.addon_id,selected_product_id:a.selected_product_id,selected_variant_id:a.selected_variant_id});return await n2(n,{converted_estimate_id:i.id,status:"closed"}),await Kz(n,{writer:"system",writer_name:"",content:` . (: ${i.estimate_no})`}),i.id}function h$(n,e){return pt.channel(`qna-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`id=eq.${n}`},e).subscribe()}function f$(n,e){return pt.channel(`qna-list-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiries",filter:`shop_id=eq.${n}`},e).subscribe()}function p$(n,e){return pt.channel(`qna-comments-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"inquiry_comments",filter:`inquiry_id=eq.${n}`},e).subscribe()}function i2(n){n&&pt.removeChannel(n)}async function g$(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_simple_prints").insert(t).select();if(o)throw console.error("[QnaService] addQnaSimplePrints error:",o),o;return r||[]}async function a2(n){const{data:e,error:t}=await pt.from("inquiry_simple_prints").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaSimplePrints error:",t),t;return e||[]}async function v$(n){const{error:e}=await pt.from("inquiry_simple_prints").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaSimplePrints error:",e),e}async function m$(n,e){if(e.length===0)return[];const t=e.map(s=>({...s,inquiry_id:n})),{data:r,error:o}=await pt.from("inquiry_addon_items").insert(t).select();if(o)throw console.error("[QnaService] addQnaAddonItems error:",o),o;return r||[]}async function A2(n){const{data:e,error:t}=await pt.from("inquiry_addon_items").select("*").eq("inquiry_id",n).order("idx",{ascending:!0});if(t)throw console.error("[QnaService] getQnaAddonItems error:",t),t;if(!e||e.length===0)return[];const r=[...new Set(e.map(h=>h.addon_id).filter(Boolean))],o=[...new Set(e.map(h=>h.selected_product_id).filter(Boolean))],s=[...new Set(e.map(h=>h.selected_variant_id).filter(Boolean))],[i,a,A]=await Promise.all([r.length>0?pt.from("product_addons").select("id, name").in("id",r):{data:[]},o.length>0?pt.from("products").select("id, title").in("id",o):{data:[]},s.length>0?pt.from("product_variants").select("id, title").in("id",s):{data:[]}]),d=new Map((i.data||[]).map(h=>[h.id,h.name])),c=new Map((a.data||[]).map(h=>[h.id,h.title])),u=new Map((A.data||[]).map(h=>[h.id,h.title]));return e.map(h=>({...h,addon_name:d.get(h.addon_id)||null,selected_product_name:c.get(h.selected_product_id)||null,selected_variant_name:u.get(h.selected_variant_id)||null}))}async function w$(n){const{error:e}=await pt.from("inquiry_addon_items").delete().eq("inquiry_id",n);if(e)throw console.error("[QnaService] deleteAllQnaAddonItems error:",e),e}async function y$(n){const{data:e}=await pt.from("inquiry_items").select("quantity, price").eq("inquiry_id",n);let t=0,r=0;if(e)for(const h of e){const f=h.quantity||0,g=h.price||0;t+=f*g,r+=f}const{data:o}=await pt.from("inquiry_prints").select("price").eq("inquiry_id",n);let s=0;if(o)for(const h of o)s+=h.price||0;const{data:i}=await pt.from("inquiry_simple_prints").select("price").eq("inquiry_id",n);if(i)for(const h of i)s+=h.price||0;const{data:a}=await pt.from("inquiry_addon_items").select("price, quantity").eq("inquiry_id",n);let A=0;if(a)for(const h of a){const f=h.quantity||1,g=h.price||0;A+=f*g}const{data:d}=await pt.from("inquiry_additional_costs").select("amount").eq("inquiry_id",n);let c=0;if(d)for(const h of d)c+=h.amount||0;const u=t+s+A+c;return{product_amount:t,print_amount:s,addon_amount:A,additional_amount:c,total_quantity:r,total_amount:u}}async function b$(n){const e=await y$(n),{error:t}=await pt.from("inquiries").update({product_amount:e.product_amount,print_amount:e.print_amount,addon_amount:e.addon_amount,additional_amount:e.additional_amount,total_quantity:e.total_quantity,total_amount:e.total_amount,updated_at:new Date().toISOString()}).eq("id",n);if(t)throw console.error("[QnaService] updateInquirySummary error:",t),t}async function _$(n){const{data:e,error:t}=await pt.from("inquiry_estimates").select(`
      id,
      inquiry_id,
      estimate_id,
      created_at,
      created_by,
      memo,
      estimates:estimate_id (
        estimate_no,
        status,
        total_amount,
        created_at,
        name
      )
    `).eq("inquiry_id",n).order("created_at",{ascending:!1});if(t)throw console.error("[QnaService] getLinkedEstimates error:",t),t;return(e||[]).map(r=>({id:r.id,inquiry_id:r.inquiry_id,estimate_id:r.estimate_id,created_at:r.created_at,created_by:r.created_by,memo:r.memo,estimate:r.estimates}))}var x$=W(`<div class="odz-text-center odz-py-12 odz-bg-slate-50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><!> <p class="odz-text-slate-500 odz-font-bold">  .</p> <p class="odz-text-sm odz-text-slate-400 odz-mt-1">   ' '  .</p></div>`),B$=W('<div class="odz-flex odz-gap-1"><button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square" title=""><!></button> <button type="button" class="odz-btn odz-btn-ghost odz-btn-sm odz-btn-square odz-text-error" title=""><!></button></div>'),z$=W('<li class="odz-flex odz-justify-between"><span> </span> <span class="odz-font-bold odz-text-slate-800"> </span></li>'),C$=W('<div class="odz-mt-4 odz-bg-slate-50 odz-rounded-xl odz-p-3 odz-border odz-border-slate-100"><ul class="odz-text-sm odz-text-gray-600 odz-space-y-1.5"></ul></div>'),S$=W('<span class="odz-text-gray-400"></span>'),E$=W('<span class="odz-text-blue-800"> </span> <!>',1),F$=W('<span class="odz-flex odz-items-center odz-gap-1"></span>'),I$=W("<span> </span>"),U$=W('<span class="odz-text-blue-500"> </span>'),Q$=W('<span class="odz-text-gray-500"> </span>'),T$=W('<li class="odz-flex odz-flex-wrap odz-items-center odz-gap-1"><!> <!> <!></li>'),L$=W('<div class="odz-mt-3 odz-bg-indigo-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-indigo-100"><p class="odz-text-xs odz-font-medium odz-text-blue-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-blue-700 odz-space-y-1"></ul></div>'),P$=W('<span class="odz-text-green-600"> </span>'),k$=W('<span class="odz-text-green-500"> </span>'),O$=W('<span class="odz-text-gray-500"> </span>'),D$=W('<li class="odz-flex odz-items-center odz-gap-1"><span> </span> <!> <!> <!></li>'),N$=W('<div class="odz-mt-3 odz-bg-emerald-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-emerald-100"><p class="odz-text-xs odz-font-medium odz-text-green-800 odz-mb-1"> </p> <ul class="odz-text-xs odz-text-green-700 odz-space-y-1"></ul></div>'),M$=W('<span class="odz-text-purple-500"> </span>'),H$=W('<span class="odz-text-purple-600"> </span>'),j$=W('<span class="odz-text-purple-600 odz-font-medium odz-whitespace-nowrap"> </span>'),R$=W('<li class="odz-flex odz-items-center odz-justify-between"><span class="odz-flex odz-items-center odz-gap-1 odz-flex-wrap"><span class="odz-font-medium"> </span> <!> <!></span> <!></li>'),$$=W('<div class="odz-mt-3 odz-bg-purple-50/50 odz-rounded-xl odz-p-3 odz-border odz-border-purple-100"><p class="odz-text-xs odz-font-medium odz-text-purple-800 odz-mb-1"></p> <ul class="odz-text-xs odz-text-purple-700 odz-space-y-1"></ul></div>'),q$=W('<div class="odz-group odz-relative odz-bg-white odz-rounded-2xl odz-border odz-border-slate-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)] odz-transition-all hover:odz-shadow-[0_8px_30px_rgba(0,0,0,0.1)] hover:odz-border-indigo-100"><div class="odz-card-body odz-p-4"><div class="odz-flex odz-items-start odz-justify-between"><div class="odz-flex-1"><h4 class="odz-font-bold odz-text-slate-900 odz-text-xl odz-tracking-tight"> </h4> <p class="odz-text-base odz-text-slate-500 odz-mt-1.5 odz-flex odz-items-center odz-gap-1"> : <span class="odz-font-bold odz-text-indigo-600"> </span></p></div> <!></div> <div class="odz-mt-4 odz-pt-4 odz-border-t odz-border-gray-100 odz-space-y-3"><div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <div class="odz-flex odz-items-start odz-gap-2.5 odz-text-base"><!> <div class="odz-flex-1"><span class="odz-text-gray-500">:</span> <span class="odz-text-gray-700 odz-ml-1"> </span></div></div> <!> <!> <!> <!></div></div></div>'),K$=W('<div class="odz-modal odz-modal-open" style="z-index: 9999;"><div class="odz-modal-box odz-max-w-sm"><h3 class="odz-font-bold odz-text-lg"> </h3> <p class="odz-py-4"> </p> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error"></button></div></div> <button type="button" class="odz-modal-backdrop" aria-label=""></button></div>'),V$=W('<div class="odz-space-y-3"><!></div> <!>',1);function Vz(n,e){on(e,!1);const t=ag();let r=gt(e,"products",24,()=>[]),o=gt(e,"disabled",8,!1),s=Se(!1),i=Se(null);function a(k,ee){k.stopPropagation(),k.preventDefault(),!o()&&t("edit",{idx:ee.idx,productId:ee.productId})}function A(k,ee){k.stopPropagation(),k.preventDefault(),!o()&&(b(i,ee),b(s,!0))}function d(){l(i)&&t("delete",{idx:l(i).idx}),b(s,!1),b(i,null)}function c(){b(s,!1),b(i,null)}function u(k){return!k.variants||k.variants.length===0?" ":k.variants.map(ee=>`${ee.variantName||ee.variantId}: ${ee.quantity}`).join(", ")}function h(k){const ee=k.prints&&k.prints.length>0,G=k.simplePrints&&k.simplePrints.length>0;if(!ee&&!G)return" ";const H=[];return ee&&H.push(`  ${k.prints.length}`),G&&H.push(`  ${k.simplePrints.length}`),H.join(", ")}function f(k){return!k.addons||k.addons.length===0?" ":` ${k.addons.length}`}an();var g=V$(),w=ut(g),y=m(w);{var x=k=>{var ee=x$(),G=m(ee);Du(G,{class:"odz-w-16 odz-h-16 odz-mx-auto odz-text-slate-300 odz-mb-4"}),Q(k,ee)},C=k=>{var ee=Lt(),G=ut(ee);er(G,1,r,H=>H.idx,(H,Y)=>{var Be=q$(),M=m(Be),O=m(M),J=m(O),re=m(J),he=m(re),ie=B(re,2),be=B(m(ie)),te=m(be),Z=B(J,2);{var Ae=pe=>{var Oe=B$(),ke=m(Oe),me=m(ke);r5(me,{class:"odz-w-4 odz-h-4"});var q=B(ke,2),de=m(q);s1(de,{class:"odz-w-4 odz-h-4"}),tt("click",ke,ye=>a(ye,l(Y))),tt("click",q,ye=>A(ye,l(Y))),Q(pe,Oe)};xe(Z,pe=>{o()||pe(Ae)})}var we=B(O,2),z=m(we),F=m(z);Du(F,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var E=B(F,2),U=B(m(E),2),P=m(U),T=B(z,2),R=m(T);dE(R,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var $=B(R,2),j=B(m($),2),ae=m(j),Ee=B(T,2),_e=m(Ee);fE(_e,{class:"odz-w-5 odz-h-5 odz-text-gray-400 odz-mt-0.5 odz-flex-shrink-0"});var Le=B(_e,2),X=B(m(Le),2),D=m(X),oe=B(Ee,2);{var ve=pe=>{var Oe=C$(),ke=m(Oe);er(ke,5,()=>l(Y).variants,vr,(me,q)=>{var de=z$(),ye=m(de),Fe=m(ye),Pe=B(ye,2),nt=m(Pe);De(()=>{Qe(Fe,l(q).variantName||l(q).variantId),Qe(nt,`${l(q).quantity??""}`)}),Q(me,de)}),Q(pe,Oe)};xe(oe,pe=>{l(Y).variants&&l(Y).variants.length>0&&pe(ve)})}var le=B(oe,2);{var ue=pe=>{var Oe=L$(),ke=B(m(Oe),2);er(ke,5,()=>l(Y).prints,vr,(me,q)=>{var de=T$(),ye=m(de);{var Fe=Me=>{var At=F$();er(At,5,()=>l(q).parentTemplates,vr,(Ve,Ye,ot)=>{var ht=E$(),Ge=ut(ht),it=m(Ge),zt=B(Ge,2);{var xt=Tt=>{var yt=S$();Q(Tt,yt)};xe(zt,Tt=>{ot<l(q).parentTemplates.length-1&&Tt(xt)})}De(()=>Qe(it,l(Ye).name)),Q(Ve,ht)}),Q(Me,At)},Pe=Me=>{var At=Lt(),Ve=ut(At);{var Ye=ot=>{var ht=I$(),Ge=m(ht);De(()=>Qe(Ge,`: ${(l(q).templateName||l(q).templateId)??""}`)),Q(ot,ht)};xe(Ve,ot=>{l(q).templateId&&ot(Ye)},!0)}Q(Me,At)};xe(ye,Me=>{l(q).parentTemplates&&l(q).parentTemplates.length>0?Me(Fe):Me(Pe,!1)})}var nt=B(ye,2);{var qe=Me=>{var At=U$(),Ve=m(At);De(()=>Qe(Ve,`(${l(q).colors.length??""})`)),Q(Me,At)};xe(nt,Me=>{l(q).colors&&Array.isArray(l(q).colors)&&l(q).colors.length>0&&Me(qe)})}var je=B(nt,2);{var fe=Me=>{var At=Q$(),Ve=m(At);De(()=>Qe(Ve,`- ${l(q).memo??""}`)),Q(Me,At)};xe(je,Me=>{l(q).memo&&Me(fe)})}Q(me,de)}),Q(pe,Oe)};xe(le,pe=>{l(Y).prints&&l(Y).prints.length>0&&pe(ue)})}var Ie=B(le,2);{var Ne=pe=>{var Oe=N$(),ke=B(m(Oe),2);er(ke,5,()=>l(Y).simplePrints,vr,(me,q)=>{var de=D$(),ye=m(de),Fe=m(ye),Pe=B(ye,2);{var nt=At=>{var Ve=P$(),Ye=m(Ve);De(()=>Qe(Ye,`(${l(q).printMethod??""})`)),Q(At,Ve)};xe(Pe,At=>{l(q).printMethod&&At(nt)})}var qe=B(Pe,2);{var je=At=>{var Ve=k$(),Ye=m(Ve);De(()=>Qe(Ye,`(${l(q).selectedColors.length??""})`)),Q(At,Ve)};xe(qe,At=>{l(q).selectedColors&&Array.isArray(l(q).selectedColors)&&l(q).selectedColors.length>0&&At(je)})}var fe=B(qe,2);{var Me=At=>{var Ve=O$(),Ye=m(Ve);De(()=>Qe(Ye,`- ${l(q).memo??""}`)),Q(At,Ve)};xe(fe,At=>{l(q).memo&&At(Me)})}De(()=>Qe(Fe,l(q).objectId||" ")),Q(me,de)}),Q(pe,Oe)};xe(Ie,pe=>{l(Y).simplePrints&&l(Y).simplePrints.length>0&&pe(Ne)})}var ze=B(Ie,2);{var Ce=pe=>{var Oe=$$(),ke=B(m(Oe),2);er(ke,5,()=>l(Y).addons,vr,(me,q)=>{var de=R$(),ye=m(de),Fe=m(ye),Pe=m(Fe),nt=B(Fe,2);{var qe=Ve=>{var Ye=M$(),ot=m(Ye);De(()=>Qe(ot,`(${l(q).selectedProductName||""}${(l(q).selectedVariantName?` - ${l(q).selectedVariantName}`:"")??""})`)),Q(Ve,Ye)};xe(nt,Ve=>{(l(q).selectedProductName||l(q).selectedVariantName)&&Ve(qe)})}var je=B(nt,2);{var fe=Ve=>{var Ye=H$(),ot=m(Ye);De(()=>Qe(ot,`x${l(q).quantity??""}`)),Q(Ve,Ye)};xe(je,Ve=>{l(q).quantity&&l(q).quantity>1&&Ve(fe)})}var Me=B(ye,2);{var At=Ve=>{var Ye=j$(),ot=m(Ye);De(ht=>Qe(ot,`${ht??""}`),[()=>l(q).price.toLocaleString()],at),Q(Ve,Ye)};xe(Me,Ve=>{l(q).price&&Ve(At)})}De(()=>Qe(Pe,l(q).addonName||l(q).addonId)),Q(me,de)}),Q(pe,Oe)};xe(ze,pe=>{l(Y).addons&&l(Y).addons.length>0&&pe(Ce)})}De((pe,Oe,ke)=>{Qe(he,l(Y).productName||l(Y).productId),Qe(te,l(Y).totalQuantity),Qe(P,pe),Qe(ae,Oe),Qe(D,ke)},[()=>u(l(Y)),()=>h(l(Y)),()=>f(l(Y))],at),Q(H,Be)}),Q(k,ee)};xe(y,k=>{r().length===0?k(x):k(C,!1)})}var I=B(w,2);{var N=k=>{var ee=K$(),G=m(ee),H=B(m(G),2),Y=m(H),Be=B(H,2),M=m(Be),O=B(M,2),J=B(G,2);De(()=>{var re,he;return Qe(Y,`'${(((re=l(i))==null?void 0:re.productName)||((he=l(i))==null?void 0:he.productId))??""}' 
        ?`)}),tt("click",M,c),tt("click",O,d),tt("click",J,c),Q(k,ee)};xe(I,k=>{l(s)&&k(N)})}Q(n,g),sn()}var G$=W('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <p class="odz-ml-4 odz-text-gray-600">  ...</p></div>'),W$=W('<div class="odz-alert odz-alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="odz-stroke-current odz-shrink-0 odz-h-6 odz-w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),X$=W('<dialog class="odz-modal odz-modal-open odiz-app odz-items-center odz-justify-center"><div class="odz-modal-box odz-max-w-6xl odz-w-full odz-h-[90vh] odz-p-0 odz-relative odz-rounded-xl odz-shadow-2xl odz-bg-white"><div class="odz-sticky odz-top-0 odz-z-10 odz-bg-white odz-border-b odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-between odz-items-center"><h3 class="odz-text-lg odz-font-bold odz-text-gray-900"> </h3> <button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost"><!></button></div> <div class="odz-overflow-y-auto odz-h-[calc(90vh-140px)] odz-px-6 odz-py-4"><!></div> <div class="odz-sticky odz-bottom-0 odz-z-10 odz-bg-white odz-border-t odz-border-gray-200 odz-px-6 odz-py-4 odz-flex odz-justify-end odz-gap-2"><button class="odz-btn odz-btn-ghost"></button> <button class="odz-btn odz-btn-primary"> </button></div></div></dialog>');function Y$(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(ki,"$qnaStore",t),s=Se(),i=Se(),a=ag();let A=gt(e,"isOpen",8,!1),d=gt(e,"productId",8),c=gt(e,"shopId",8);gt(e,"mallType",8,"");let u=gt(e,"qnaId",8,null),h=gt(e,"editingIdx",8,null),f=Se(!0),g=Se(""),w=Se(),y=Se("");async function x(){try{b(f,!0),b(g,"");const E=await oh(d(),c());if(b(y,(E==null?void 0:E.title)||(E==null?void 0:E.name)||d()),h()!==null){const U=Y9(u(),d(),h());U?await I(U):await C()}else await C();b(f,!1)}catch(E){console.error("[QnaProductSelector]  :",E),E instanceof Error?b(g,E.message):b(g,"     ."),b(f,!1)}}async function C(){N();const E=Date.now().toString(36)+Math.random().toString(36).substr(2),U={productId:d(),productSelection:{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:null,addonSelection:null,additionalInfo:null,currentStep:"product",isDebugMode:!1,sessionId:E,estimateId:l(s)};if(xr.set(U),typeof window<"u"){const P=`fixedEstimate_${d()}_${l(s)}_${l(i)}`;window.sessionStorage.setItem(P,JSON.stringify(U))}}async function I(E){const U=Date.now().toString(36)+Math.random().toString(36).substr(2),P={productId:d(),productSelection:E.productSelection||{selectedColors:[],quantityByVariant:{},totalQuantity:0,variantsData:[]},printSelection:E.printSelection||null,addonSelection:E.addonSelection||null,additionalInfo:E.additionalInfo||null,currentStep:"product",isDebugMode:!1,sessionId:U,estimateId:l(s)};if(typeof window<"u"){const T=`fixedEstimate_${d()}_${l(s)}_${l(i)}`,R=`simplePrint_${d()}_${l(s)}`,$=`detailedPrint_${d()}_${l(s)}`;window.sessionStorage.removeItem(R),window.sessionStorage.removeItem($),window.sessionStorage.setItem(T,JSON.stringify(P)),E.simplePrintState&&(window.sessionStorage.setItem(R,JSON.stringify(E.simplePrintState)),console.log("[QnaProductSelector] simplePrint  :",E.simplePrintState)),E.detailedPrintState&&(window.sessionStorage.setItem($,JSON.stringify(E.detailedPrintState)),console.log("[QnaProductSelector] detailedPrint  :",E.detailedPrintState))}xr.set(P),await new Promise(T=>setTimeout(T,50))}function N(){typeof window<"u"&&[`fixedEstimate_${d()}_${l(s)}_${l(i)}`,`simplePrint_${d()}_${l(s)}`,`detailedPrint_${d()}_${l(s)}`,`tab-state-${d()}`].forEach(U=>window.sessionStorage.removeItem(U))}function k(){var E,U,P;try{const T=kn(xr);if(!T.productSelection||T.productSelection.totalQuantity===0){alert("   .");return}const R=[],$=T.productSelection.quantityByVariant||{},j=T.productSelection.variantsByColor||{};for(const[D,oe]of Object.entries($)){if(typeof oe!="object"||oe===null)continue;const ve=j[D]||[];for(const[le,ue]of Object.entries(oe))if(ue&&Number(ue)>0){const Ie=ve.find(ze=>ze.id===le),Ne=((U=(E=Ie==null?void 0:Ie.prices)==null?void 0:E[0])==null?void 0:U.amount)||0;R.push({variantId:le,variantName:(Ie==null?void 0:Ie.name)||(Ie==null?void 0:Ie.title)||`${D} - ${le}`,quantity:Number(ue),price:Ne,optionValues:(Ie==null?void 0:Ie.optionValues)||{color:D}})}}const ae=[],Ee=[],_e=[];if(T.printSelection){const D=T.printSelection.currentMethod;if(D==="simple"){const oe=`simplePrint_${d()}_${l(s)}`,ve=window.sessionStorage.getItem(oe);if(ve)try{const le=JSON.parse(ve);Array.isArray(le)&&le.forEach(ue=>{Ee.push({objectId:ue.objectId,printMethod:ue.printMethod,templateId:ue.templateId,selectedColors:ue.selectedColors,printConfig:ue.printConfig,uploads:ue.uploadedFiles||ue.uploads,nameSheet:ue.nameSheet,memo:ue.memo,price:ue.price||0})})}catch(le){console.error("[QnaProductSelector]     :",le)}}else if(D==="detailed"){const oe=`detailedPrint_${d()}_${l(s)}`,ve=window.sessionStorage.getItem(oe);if(ve)try{const le=JSON.parse(ve);Array.isArray(le)&&le.forEach(ue=>{var Ne,ze,Ce;const Ie=[];ue.parentTemplates&&Array.isArray(ue.parentTemplates)&&ue.parentTemplates.forEach(pe=>{Ie.push({id:pe.id,name:pe.name||pe.id})}),(Ne=ue.template)!=null&&Ne.id&&Ie.push({id:ue.template.id,name:ue.template.name||ue.template.id}),ae.push({objectId:ue.objectId,printType:"detailed",templateId:(ze=ue.template)==null?void 0:ze.id,templateName:(Ce=ue.template)==null?void 0:Ce.name,parentTemplates:Ie.length>0?Ie:void 0,colors:ue.colors,uploadedFiles:ue.uploads,memo:ue.memo,price:ue.price||0})})}catch(le){console.error("[QnaProductSelector]     :",le)}}}if(console.log("[QnaProductSelector] currentState.addonSelection:",T.addonSelection),(P=T.addonSelection)!=null&&P.selectedAddons){const D=T.addonSelection.selectedAddons;console.log("[QnaProductSelector] selectedAddons entries:",Object.entries(D));for(const[oe,ve]of Object.entries(D))if(console.log("[QnaProductSelector] Processing addon:",{addonId:oe,selection:ve}),ve&&typeof ve=="object"){const le=ve;console.log("[QnaProductSelector] sel.productId:",le.productId),le.productId?(_e.push({addonId:oe,selectedProductId:le.productId,selectedVariantId:le.variantId,price:le.price||0,quantity:le.quantity||1}),console.log("[QnaProductSelector] Addon added to array:",_e[_e.length-1])):console.log("[QnaProductSelector] Addon skipped - no productId")}}else console.log("[QnaProductSelector] No selectedAddons in addonSelection");console.log("[QnaProductSelector] Final addons array:",_e);const Le={productId:d(),productName:l(y),variants:R,prints:ae,simplePrints:Ee,addons:_e,totalQuantity:T.productSelection.totalQuantity||0},X={productSelection:T.productSelection,printSelection:T.printSelection,addonSelection:T.addonSelection,additionalInfo:T.additionalInfo,simplePrintState:null,detailedPrintState:null};if(typeof window<"u"){const D=`simplePrint_${d()}_${l(s)}`,oe=window.sessionStorage.getItem(D);oe&&(X.simplePrintState=JSON.parse(oe));const ve=`detailedPrint_${d()}_${l(s)}`,le=window.sessionStorage.getItem(ve);le&&(X.detailedPrintState=JSON.parse(le))}$z(u(),d(),l(i),X),a("save",{idx:l(i),productData:Le,isEdit:h()!==null}),ee()}catch(T){console.error("[QnaProductSelector]  :",T),alert("   .")}}function ee(){N(),xr.reset(),a("close")}function G(E){E.key==="Escape"&&ee()}function H(E){E.target===l(w)&&ee()}Xo(()=>{document.body.style.overflow="",N(),xr.reset()}),Jt(()=>Vn(u()),()=>{b(s,`qna_${u()||"new"}`)}),Jt(()=>(Vn(h()),o()),()=>{b(i,h()??o().nextIdx)}),Jt(()=>(l(w),Vn(A())),()=>{l(w)&&(A()?(document.body.style.overflow="hidden",window.scrollTo(0,0),document.querySelectorAll('.odz-modal-box, .odz-overflow-y-auto, [style*="overflow"]').forEach(U=>{U instanceof HTMLElement&&(U.scrollTop=0)}),l(w).showModal(),x()):(document.body.style.overflow="",l(w).close()))}),mo(),an();var Y=X$(),Be=m(Y),M=m(Be),O=m(M),J=m(O),re=B(O,2),he=m(re);Yl(he,{class:"odz-w-5 odz-h-5"});var ie=B(M,2),be=m(ie);{var te=E=>{var U=G$();Q(E,U)},Z=E=>{var U=Lt(),P=ut(U);{var T=$=>{var j=W$(),ae=B(m(j),2),Ee=m(ae);De(()=>Qe(Ee,l(g))),Q($,j)},R=$=>{Xp($,{get productId(){return d()},get estimateId(){return l(s)},get idx(){return l(i)},onSave:k})};xe(P,$=>{l(g)?$(T):$(R,!1)},!0)}Q(E,U)};xe(be,E=>{l(f)?E(te):E(Z,!1)})}var Ae=B(ie,2),we=m(Ae),z=B(we,2),F=m(z);Go(Y,E=>b(w,E),()=>l(w)),De(()=>{Qe(J,`${(h()!==null?" ":" ")??""} - ${(l(y)||d())??""}`),z.disabled=l(f),Qe(F,h()!==null?"":"")}),tt("click",re,ee),tt("click",we,ee),tt("click",z,k),tt("keydown",Y,G),tt("click",Y,H),Q(n,Y),sn(),r()}var J$=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-12 odz-text-gray-500"><!> <p> ...</p></div>'),Z$=W('<label class="odz-label"><span class="odz-text-xs odz-text-error">4  </span></label>'),eq=W('<label class="odz-label"><span class="odz-text-xs odz-text-error">  </span></label>'),tq=W('<div class="odz-mt-8 odz-p-6 odz-bg-amber-50/50 odz-border odz-border-amber-200 odz-rounded-2xl"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-3"><!> <h4 class="odz-font-bold odz-text-amber-900">   </h4></div> <p class="odz-text-[13px] odz-text-amber-700 odz-mb-5 odz-leading-relaxed">     . (4~16)</p> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="password"><span class="odz-text-sm odz-font-bold odz-text-amber-900"> <span class="odz-text-error">*</span></span></label> <input type="password" id="password" placeholder=" " minlength="4" maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div> <div class="odz-form-control"><label class="odz-label" for="passwordConfirm"><span class="odz-text-sm odz-font-bold odz-text-amber-900">  <span class="odz-text-error">*</span></span></label> <input type="password" id="passwordConfirm" placeholder=" " maxlength="16" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-amber-500 odz-bg-white"> <!></div></div></div>'),rq=W('<div class="odz-mt-4"><!></div>'),nq=W('<div class="odz-text-center odz-py-12 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-dashed odz-border-slate-300"><div class="odz-flex odz-justify-center odz-mb-3"><!></div> <p class="odz-text-slate-500">  .</p> <button class="odz-btn odz-btn-ghost odz-btn-sm odz-mt-3 odz-text-[#d01b22] hover:odz-bg-[#d01b22]/10 odz-rounded-lg"><!>  </button></div>'),oq=W("<!>  ...",1),sq=W("<!> ",1),iq=W('<div class="odz-space-y-6"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><h2 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-tracking-tight"> </h2></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-6"><div class="odz-form-control"><label class="odz-label" for="customerName"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="customerName" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all !odz-h-12"></div> <div class="odz-form-control"><label class="odz-label" for="customerPhone"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-flex odz-items-center odz-gap-2"><input type="text" placeholder="010" maxlength="3" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"> <span class="odz-text-gray-400">-</span> <input type="text" placeholder="0000" maxlength="4" class="odz-input odz-input-bordered odz-input-md odz-w-full odz-text-center odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"></div></div> <div class="odz-form-control md:odz-col-span-2"><label class="odz-label" for="customerEmail"><span class="odz-text-sm odz-font-bold odz-text-slate-600"></span></label> <div class="odz-relative"><!> <input type="email" id="customerEmail" placeholder=" " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-pl-11 odz-rounded-xl focus:odz-border-[#d01b22] !odz-h-12"></div></div></div> <!></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-gap-2 odz-mb-6"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest"> </h3></div> <div class="odz-space-y-6"><div class="odz-form-control"><label class="odz-label" for="title"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <input type="text" id="title" placeholder="  " class="odz-input odz-input-bordered odz-input-md odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all !odz-h-12"></div> <div class="odz-form-control"><label class="odz-label" for="content"><span class="odz-text-sm odz-font-bold odz-text-slate-600"> <span class="odz-text-error">*</span></span></label> <textarea id="content" placeholder="    " rows="8" class="odz-textarea odz-textarea-bordered odz-w-full odz-rounded-xl focus:odz-border-[#d01b22] odz-transition-all odz-p-4"></textarea></div></div></div> <div class="odz-bg-white odz-rounded-2xl odz-p-8 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-6"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-[#d01b22] odz-rounded-full"></div> <h3 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest">  <span class="odz-text-xs odz-font-normal odz-text-slate-400 odz-ml-1">()</span></h3></div> <button type="button" class="odz-btn odz-btn-sm odz-rounded-xl odz-btn-outline odz-border-slate-300 odz-text-slate-600 hover:odz-bg-slate-50 hover:odz-border-slate-400"><!>  </button></div> <!></div> <div class="odz-flex odz-justify-end odz-gap-4 odz-mt-10 odz-mb-10"><button type="button" class="odz-btn odz-btn-ghost odz-rounded-xl odz-px-8 hover:odz-bg-slate-100 odz-transition-all"></button> <button type="button" class="odz-btn odz-rounded-xl odz-px-10 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all odz-bg-[#d01b22] odz-text-white odz-border-[#d01b22] hover:odz-bg-[#b01820] hover:odz-border-[#b01820]"><!></button></div></div>'),aq=W('<div class="odiz-app odz-max-w-4xl odz-mx-auto odz-p-4 odz-pb-20 svelte-fas30z"><!> <!> <!> <dialog class="cancel-confirm-dialog svelte-fas30z"><div class="cancel-confirm-box svelte-fas30z"><h3 class="odz-font-bold odz-text-lg"></h3> <p class="odz-py-4">    . ?</p> <div class="odz-flex odz-justify-end odz-gap-2"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-error">, </button></div></div></dialog></div>');function Aq(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn(ki,"$qnaStore",t),s=Se(),i=Se(),a=Se(),A=Se(),d=Se();let c=gt(e,"mallType",8,""),u=gt(e,"customerId",8,"");gt(e,"sess",8,"");let h=gt(e,"shopId",8,""),f=gt(e,"qnaId",8,""),g=gt(e,"onSubmitSuccess",8,void 0),w=gt(e,"onCancel",8,void 0),y=Se(""),x=Se(""),C=Se(""),I=Se(""),N=Se(""),k=Se(""),ee=Se(""),G=Se(!1),H=Se(!1),Y=Se(!1),Be=Se(!1),M=Se(""),O=Se(),J=Se(),re=Se();function he(){l(I).length>=3&&l(J)&&l(J).focus()}function ie(){l(N).length>=4&&l(re)&&l(re).focus()}let be=null,te=Se([]),Z=Se(""),Ae=Se("");Xn(async()=>{ki.reset(),f()&&await we()}),Xo(()=>{ki.reset(),d0(f()||null)});async function we(){b(G,!0);try{if(be=await qg(f()),be){if(b(y,be.title||""),b(x,be.content||""),b(C,be.customer_name||""),b(ee,be.customer_email||""),be.customer_phone){const q=be.customer_phone.split("-");q.length===3&&(b(I,q[0]),b(N,q[1]),b(k,q[2]))}const Ce=await o2(f()),pe=await s2(f()),Oe=await a2(f()),ke=await A2(f()),me=new Map;for(const q of Ce){const de=q.idx||0;me.has(de)||me.set(de,{idx:de,productId:q.product_id,productName:q.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const ye=me.get(de);ye.variants.push({variantId:q.variant_id,variantName:q.variant_name,quantity:q.quantity||1,optionValues:q.option_values}),ye.totalQuantity+=q.quantity||1}for(const q of pe){const de=q.idx||0;if(me.has(de)){let ye=[];if(q.template_id)try{ye=(await ih(q.template_id)).map(nt=>({id:nt.id,name:nt.name,image_url:nt.image_url})),console.log("[QnaRegister] parentTemplates :",ye)}catch(Pe){console.warn("[QnaRegister] parentTemplates  :",Pe)}let Fe=q.title;if(!Fe&&q.object_id)try{const Pe=await v1(q.object_id);Pe&&(Fe=Pe.title||Pe.name,console.log("[QnaRegister] print area title :",Fe))}catch(Pe){console.warn("[QnaRegister] print area  :",Pe)}me.get(de).prints.push({objectId:q.object_id,printType:q.print_type,title:Fe,printMethod:q.print_method,templateId:q.template_id,colors:q.colors,uploadedFiles:q.uploaded_files,fileMetadata:q.file_metadata,memo:q.memo,parentTemplates:ye})}}for(const q of Oe){const de=q.idx||0;me.has(de)&&me.get(de).simplePrints.push({objectId:q.object_id,printMethod:q.print_method,templateId:q.template_id,selectedColors:q.selected_colors,printConfig:q.print_config,uploads:q.uploads,nameSheet:q.name_sheet,memo:q.memo})}for(const q of ke){const de=q.idx||0;me.has(de)&&me.get(de).addons.push({addonId:q.addon_id,addonName:q.addon_name||void 0,selectedProductId:q.selected_product_id,selectedProductName:q.selected_product_name||void 0,selectedVariantId:q.selected_variant_id,selectedVariantName:q.selected_variant_name||void 0,price:q.price||0,quantity:q.quantity||1})}b(te,Array.from(me.values())),ki.setState({qnaId:f(),title:l(y),content:l(x),customerName:l(C),customerPhone:l(d),customerEmail:l(ee),products:l(te),nextIdx:l(te).length>0?Math.max(...l(te).map(q=>q.idx))+1:0})}}catch(Ce){console.error("[QnaRegister] loadQna error:",Ce),alert("   .")}finally{b(G,!1)}}function z(){b(Y,!0)}function F(Ce){b(Y,!1),b(M,Ce),b(Be,!0)}function E(Ce){const{productData:pe,isEdit:Oe,idx:ke}=Ce.detail;pe&&(Oe&&ke!==void 0?ki.updateProduct(ke,pe):ki.addProduct(pe),b(te,[...o().products])),b(Be,!1),b(M,""),ki.clearEditing()}function U(Ce){var me,q;const{idx:pe,productId:Oe}=Ce.detail,ke=o().products.find(de=>de.idx===pe);if(ke){const de={},ye=[];for(const fe of ke.variants){const Me=((me=fe.optionValues)==null?void 0:me.color)||((q=fe.optionValues)==null?void 0:q.)||"default";de[Me]||(de[Me]={},ye.push(Me)),de[Me][fe.variantId]=fe.quantity}const Fe={};for(const fe of ke.addons||[])Fe[fe.addonId]={productId:fe.selectedProductId,variantId:fe.selectedVariantId,price:fe.price||0,quantity:fe.quantity||1};let Pe=null,nt=null,qe=null;ke.simplePrints&&ke.simplePrints.length>0&&(Pe=ke.simplePrints.map(fe=>({objectId:fe.objectId,printMethod:fe.printMethod,templateId:fe.templateId,selectedColors:fe.selectedColors,printConfig:fe.printConfig,uploadedFiles:fe.uploads,uploads:fe.uploads,nameSheet:fe.nameSheet,memo:fe.memo,price:fe.price||0})),qe={currentMethod:"simple"}),ke.prints&&ke.prints.length>0&&(nt=ke.prints.map(fe=>({objectId:fe.objectId,title:fe.title,template:fe.templateId?{id:fe.templateId,name:fe.templateName||fe.title}:null,parentTemplates:fe.parentTemplates||[],colors:fe.colors,uploads:fe.uploadedFiles,memo:fe.memo,price:fe.price||0})),qe={currentMethod:"detailed"},console.log("[QnaRegister] detailedPrintState :",nt));const je={productSelection:{selectedColors:ye,quantityByVariant:de,totalQuantity:ke.totalQuantity,variantsData:[]},printSelection:qe,addonSelection:{selectedAddons:Fe},additionalInfo:null,simplePrintState:Pe,detailedPrintState:nt};$z(o().qnaId,Oe,pe,je),console.log("[QnaRegister]    sessionStorage :",{idx:pe,productId:Oe,sessionData:je})}ki.setEditing(pe,Oe),b(M,Oe),b(Be,!0)}function P(Ce){const{idx:pe}=Ce.detail;ki.removeProduct(pe),b(te,[...o().products])}async function T(Ce){if(Ce&&(Ce.stopPropagation(),Ce.preventDefault()),!l(A)){l(s)&&!f()?l(Z)?l(Z).length<4?alert(" 4  ."):l(Z)!==l(Ae)?alert("  ."):alert(", ,    ."):alert("   ."):alert(", ,    .");return}b(H,!0);try{let pe;if(f()&&be?(pe=await n2(f(),{title:l(y),content:l(x),customer_name:l(C),customer_phone:l(d),customer_email:l(ee)}),await a$(f()),await l$(f()),await v$(f()),await w$(f())):pe=await n$({shop_id:h(),customer_id:u()||void 0,customer_name:l(C),customer_phone:l(d),customer_email:l(ee),title:l(y),content:l(x),password:l(s)?l(Z):void 0}),!pe.id)throw new Error("  .");const Oe=o().products;if(Oe.length>0){const ke=[];for(const ye of Oe)for(const Fe of ye.variants)ke.push({idx:ye.idx,product_id:ye.productId,variant_id:Fe.variantId,quantity:Fe.quantity,price:Fe.price||0,product_name:ye.productName,variant_name:Fe.variantName,option_values:Fe.optionValues});ke.length>0&&await i$(pe.id,ke);const me=[];for(const ye of Oe)for(const Fe of ye.prints||[])me.push({idx:ye.idx,object_id:Fe.objectId,print_type:Fe.printType,title:Fe.title,print_method:Fe.printMethod,template_id:Fe.templateId,colors:Fe.colors,uploaded_files:Fe.uploadedFiles,file_metadata:Fe.fileMetadata,memo:Fe.memo,price:Fe.price||0});me.length>0&&await A$(pe.id,me);const q=[];for(const ye of Oe)for(const Fe of ye.simplePrints||[])q.push({idx:ye.idx,object_id:Fe.objectId,print_method:Fe.printMethod,template_id:Fe.templateId,selected_colors:Fe.selectedColors,print_config:Fe.printConfig,uploads:Fe.uploads,name_sheet:Fe.nameSheet,memo:Fe.memo,price:Fe.price||0});q.length>0&&await g$(pe.id,q);const de=[];console.log("[QnaRegister] Processing addon save for products:",Oe.map(ye=>{var Fe;return{idx:ye.idx,productId:ye.productId,addonsCount:((Fe=ye.addons)==null?void 0:Fe.length)||0,addons:ye.addons}}));for(const ye of Oe){console.log("[QnaRegister] Product addons:",ye.addons);for(const Fe of ye.addons||[])de.push({idx:ye.idx,addon_id:Fe.addonId,selected_product_id:Fe.selectedProductId,selected_variant_id:Fe.selectedVariantId,price:Fe.price||0,quantity:Fe.quantity||1})}console.log("[QnaRegister] addonsToSave:",de),de.length>0?(console.log("[QnaRegister] Saving addons to database..."),await m$(pe.id,de),console.log("[QnaRegister] Addons saved successfully")):console.log("[QnaRegister] No addons to save"),await b$(pe.id)}if(d0(f()||null),g()&&pe.id)g()(pe.id);else{const ke=f()?`?qnaMode=detail&qnaId=${pe.id}`:"?qnaMode=list";window.location.href=window.location.pathname+ke}}catch(pe){console.error("[QnaRegister] submitQna error:",pe),alert("  .  .")}finally{b(H,!1)}}function R(Ce){Ce.stopPropagation(),Ce.preventDefault(),l(O)&&l(O).showModal()}function $(){l(O)&&l(O).close(),d0(f()||null),w()?w()():window.location.href=window.location.pathname+"?qnaMode=list"}function j(){l(O)&&l(O).close()}Jt(()=>Vn(u()),()=>{b(s,!u())}),Jt(()=>(l(Z),l(Ae)),()=>{b(i,!l(Z)||!l(Ae)||l(Z)===l(Ae))}),Jt(()=>(l(s),Vn(f()),l(Z),l(i)),()=>{b(a,!l(s)||!f()&&l(Z).length>=4&&l(Z).length<=16&&l(i))}),Jt(()=>(l(y),l(x),l(C),Vn(u()),Vn(f()),l(Z),l(Ae)),()=>{b(A,l(y).trim()&&l(x).trim()&&l(C).trim()&&(u()||f()||l(Z).trim()&&l(Z)===l(Ae)&&l(Z).length>=4))}),Jt(()=>(l(I),l(N),l(k)),()=>{b(d,l(I)&&l(N)&&l(k)?`${l(I)}-${l(N)}-${l(k)}`:"")}),mo(),an();var ae=aq(),Ee=m(ae);{var _e=Ce=>{var pe=J$(),Oe=m(pe);rc(Oe,{class:"odz-w-8 odz-h-8 odz-animate-spin odz-mb-2"}),Q(Ce,pe)},Le=Ce=>{var pe=iq(),Oe=m(pe),ke=m(Oe),me=m(ke),q=B(Oe,2),de=B(m(q),2),ye=m(de),Fe=B(m(ye),2),Pe=B(ye,2),nt=B(m(Pe),2),qe=m(nt),je=B(qe,4);Go(je,ft=>b(J,ft),()=>l(J));var fe=B(je,4);Go(fe,ft=>b(re,ft),()=>l(re));var Me=B(Pe,2),At=B(m(Me),2),Ve=m(At);AE(Ve,{class:"odz-w-4 odz-h-4 odz-absolute odz-left-4 odz-top-1/2 -odz-translate-y-1/2 odz-text-slate-400"});var Ye=B(Ve,2),ot=B(de,2);{var ht=ft=>{var Ot=tq(),Vt=m(Ot),ir=m(Vt);aE(ir,{class:"odz-w-5 odz-h-5 odz-text-amber-600"});var cr=B(Vt,4),dr=m(cr),br=B(m(dr),2),yn=B(br,2);{var Fn=fr=>{var yr=Z$();Q(fr,yr)};xe(yn,fr=>{l(Z)&&l(Z).length<4&&fr(Fn)})}var Dr=B(dr,2),Br=B(m(Dr),2),Wr=B(Br,2);{var Vr=fr=>{var yr=eq();Q(fr,yr)};xe(Wr,fr=>{l(Ae)&&!l(i)&&fr(Vr)})}De(()=>{tl(br,"odz-input-error",l(Z)&&l(Z).length<4),tl(Br,"odz-input-error",l(Ae)&&!l(i))}),Fr(br,()=>l(Z),fr=>b(Z,fr)),Fr(Br,()=>l(Ae),fr=>b(Ae,fr)),Q(ft,Ot)};xe(ot,ft=>{l(s)&&!f()&&ft(ht)})}var Ge=B(q,2),it=B(m(Ge),2),zt=m(it),xt=B(m(zt),2),Tt=B(zt,2),yt=B(m(Tt),2),rt=B(Ge,2),Dt=m(rt),St=B(m(Dt),2),Nt=m(St);Nu(Nt,{class:"odz-w-4 odz-h-4 odz-mr-1"});var Je=B(Dt,2);{var mt=ft=>{var Ot=rq(),Vt=m(Ot);Vz(Vt,{get products(){return l(te)},$$events:{edit:U,delete:P}}),Q(ft,Ot)},vt=ft=>{var Ot=nq(),Vt=m(Ot),ir=m(Vt);Du(ir,{class:"odz-w-10 odz-h-10 odz-text-slate-300"});var cr=B(Vt,4),dr=m(cr);Nu(dr,{class:"odz-w-4 odz-h-4 odz-mr-1"}),tt("click",cr,z),Q(ft,Ot)};xe(Je,ft=>{l(te).length>0?ft(mt):ft(vt,!1)})}var $t=B(rt,2),nr=m($t),Ht=B(nr,2),Kt=m(Ht);{var sr=ft=>{var Ot=oq(),Vt=ut(Ot);rc(Vt,{class:"odz-w-5 odz-h-5 odz-animate-spin odz-mr-2"}),Q(ft,Ot)},Ct=ft=>{var Ot=sq(),Vt=ut(Ot);uE(Vt,{class:"odz-w-5 odz-h-5 odz-mr-2"});var ir=B(Vt);De(()=>Qe(ir,` ${(f()?" ":" ")??""}`)),Q(ft,Ot)};xe(Kt,ft=>{l(H)?ft(sr):ft(Ct,!1)})}De(()=>{Qe(me,f()?" ":" "),Ht.disabled=!l(A)||l(H)}),Fr(Fe,()=>l(C),ft=>b(C,ft)),Fr(qe,()=>l(I),ft=>b(I,ft)),tt("input",qe,he),Fr(je,()=>l(N),ft=>b(N,ft)),tt("input",je,ie),Fr(fe,()=>l(k),ft=>b(k,ft)),Fr(Ye,()=>l(ee),ft=>b(ee,ft)),Fr(xt,()=>l(y),ft=>b(y,ft)),Fr(yt,()=>l(x),ft=>b(x,ft)),tt("click",St,z),tt("click",nr,ft=>R(ft)),tt("click",Ht,ft=>T(ft)),Q(Ce,pe)};xe(Ee,Ce=>{l(G)?Ce(_e):Ce(Le,!1)})}var X=B(Ee,2);{var D=Ce=>{Y1(Ce,{addProduct:F,get productType(){return c()},excludeNoProcess:!0,get isProductSearchOpen(){return l(Y)},set isProductSearchOpen(pe){b(Y,pe)},$$legacy:!0})};xe(X,Ce=>{l(Y)&&Ce(D)})}var oe=B(X,2);{var ve=Ce=>{const pe=at(()=>f()||null);Y$(Ce,{get isOpen(){return l(Be)},get productId(){return l(M)},get shopId(){return h()},get mallType(){return c()},get qnaId(){return l(pe)},get editingIdx(){return o().editingIdx},$$events:{save:E,close:()=>{b(Be,!1),b(M,""),ki.clearEditing()}}})};xe(oe,Ce=>{l(Be)&&Ce(ve)})}var le=B(oe,2),ue=m(le),Ie=B(m(ue),4),Ne=m(Ie),ze=B(Ne,2);Go(le,Ce=>b(O,Ce),()=>l(O)),tt("click",Ne,j),tt("click",ze,$),tt("click",le,Q_(j)),Q(n,ae),sn(),r()}var lq=W(' <span class="odz-font-mono odz-font-medium odz-text-primary"> </span>',1),dq=W('<label class="odz-label"><span class="odz-label-text-alt odz-text-error"> </span></label>'),cq=W("<!>  ...",1),uq=W('<div class="odz-modal odz-modal-open"><div class="odz-modal-box odz-max-w-sm"><button type="button" class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"><!></button> <h3 class="odz-font-bold odz-text-lg odz-mb-4 odz-flex odz-items-center odz-gap-2"><!>  </h3> <p class="odz-text-sm odz-text-gray-600 odz-mb-4"><!>  .</p> <div class="odz-form-control odz-mb-4"><input type="password" placeholder=" (4~16)" maxlength="16" class="odz-input odz-input-bordered odz-w-full"> <!></div> <div class="odz-modal-action"><button type="button" class="odz-btn odz-btn-ghost"></button> <button type="button" class="odz-btn odz-btn-primary"><!></button></div></div></div>');function hq(n,e){on(e,!1);let t=gt(e,"isOpen",8,!1),r=gt(e,"qnaId",8,""),o=gt(e,"inquiryNo",8,"");const s=ag();let i=Se(""),a=Se(!1),A=Se("");async function d(){if(!l(i).trim()){b(A," .");return}if(l(i).length<4){b(A," 4  .");return}b(a,!0),b(A,""),s("verify",{qnaId:r(),password:l(i)})}function c(y,x){b(a,!1),!y&&x&&b(A,x)}function u(){b(i,""),b(A,""),b(a,!1),s("cancel")}function h(y){y.key==="Enter"&&!l(a)?d():y.key==="Escape"&&u()}Jt(()=>Vn(t()),()=>{t()&&(b(i,""),b(A,""),b(a,!1))}),mo(),an();var f=Lt(),g=ut(f);{var w=y=>{var x=uq(),C=m(x),I=m(C),N=m(I);Yl(N,{class:"odz-w-4 odz-h-4"});var k=B(I,2),ee=m(k);o1(ee,{class:"odz-w-5 odz-h-5 odz-text-warning"});var G=B(k,2),H=m(G);{var Y=Ae=>{var we=lq(),z=B(ut(we)),F=m(z);De(()=>Qe(F,o())),Q(Ae,we)};xe(H,Ae=>{o()&&Ae(Y)})}var Be=B(G,2),M=m(Be),O=B(M,2);{var J=Ae=>{var we=dq(),z=m(we),F=m(z);De(()=>Qe(F,l(A))),Q(Ae,we)};xe(O,Ae=>{l(A)&&Ae(J)})}var re=B(Be,2),he=m(re),ie=B(he,2),be=m(ie);{var te=Ae=>{var we=cq(),z=ut(we);rc(z,{class:"odz-w-4 odz-h-4 odz-animate-spin odz-mr-2"}),Q(Ae,we)},Z=Ae=>{var we=zn("");Q(Ae,we)};xe(be,Ae=>{l(a)?Ae(te):Ae(Z,!1)})}De(Ae=>{I.disabled=l(a),M.disabled=l(a),tl(M,"odz-input-error",l(A)),he.disabled=l(a),ie.disabled=Ae},[()=>l(a)||!l(i).trim()],at),tt("click",I,u),Fr(M,()=>l(i),Ae=>b(i,Ae)),tt("keydown",M,h),tt("click",he,u),tt("click",ie,d),tt("click",x,Q_(u)),Q(y,x)};xe(g,y=>{t()&&y(w)})}return Q(n,f),I_(e,"setVerifyResult",c),sn({setVerifyResult:c})}var fq=W('<button class="odz-btn odz-btn-primary odz-btn-sm odz-gap-1"><!>  </button>'),pq=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-16 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-primary"></div> <span class="odz-text-gray-500">   ...</span></div>'),gq=W('<div class="odz-alert odz-alert-error odz-shadow-sm"><!> <span> </span> <button class="odz-btn odz-btn-sm odz-btn-ghost"> </button></div>'),vq=W('<button class="odz-btn odz-btn-primary odz-btn-sm odz-mt-4 odz-gap-1"><!>   </button>'),mq=W('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">  </p> <!>',1),wq=W('<p class="odz-text-gray-600 odz-font-medium">  </p> <p class="odz-text-sm odz-text-gray-400 odz-mt-1">   </p>',1),yq=W('<div class="odz-text-center odz-py-16 odz-bg-gray-50 odz-rounded-xl odz-border odz-border-dashed odz-border-gray-300"><!> <!></div>'),bq=W('<span class="odz-badge odz-badge-xs odz-badge-info"></span>'),_q=W('<tr class="odz-cursor-pointer hover:odz-bg-gray-50 odz-transition-colors"><td class="odz-text-center"><span class="odz-inline-flex odz-items-center odz-gap-1 odz-font-mono odz-text-xs odz-text-gray-500"> <!></span></td><td class="odz-text-center"><span><!> </span></td><td><div class="odz-flex odz-items-center odz-gap-2"><span class="odz-font-medium odz-text-gray-900 odz-truncate odz-max-w-xs hover:odz-text-primary odz-transition-colors"> </span> <!></div></td><td class="odz-text-center odz-text-sm odz-text-gray-600 odz-hidden sm:odz-table-cell"> </td><td class="odz-text-center odz-text-xs odz-text-gray-400 odz-hidden md:odz-table-cell"> </td></tr>'),xq=W('<span class="odz-text-gray-300"> </span>'),Bq=W('<div class="odz-bg-white odz-rounded-xl odz-border odz-border-gray-200 odz-overflow-hidden"><table class="odz-table odz-table-sm odz-w-full"><thead><tr class="odz-bg-gray-50 odz-border-b odz-border-gray-200"><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-20 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-left odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase"></th><th class="odz-text-center odz-w-24 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden sm:odz-table-cell"></th><th class="odz-text-center odz-w-28 odz-text-xs odz-font-semibold odz-text-gray-500 odz-uppercase odz-hidden md:odz-table-cell"></th></tr></thead><tbody class="odz-divide-y odz-divide-gray-100"></tbody></table></div> <div class="odz-text-center odz-text-xs odz-text-gray-400 odz-pt-2"> <!></div>',1),zq=W('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><h2 class="odz-text-xl odz-font-bold odz-text-gray-900"> </h2> <!></div> <div class="odz-flex odz-flex-col sm:odz-flex-row odz-gap-2"><div class="odz-relative odz-flex-1"><!> <input type="text" placeholder=", ,  ..." class="odz-input odz-input-bordered odz-input-sm odz-w-full odz-pl-9"></div> <select class="odz-select odz-select-bordered odz-select-sm odz-w-full sm:odz-w-32"><option></option><option></option><option></option><option></option></select></div> <!></div> <!>',1);function Cq(n,e){on(e,!1);let t=gt(e,"shopId",8),r=gt(e,"customerId",8,void 0),o=gt(e,"onSelectQna",8,void 0),s=gt(e,"onCreateNew",8,void 0),i=Se([]),a=Se([]),A=Se(!0),d=Se(""),c=Se(""),u=Se("all"),h=null,f=Se(!1),g=Se(null),w=Se();Xn(async()=>{await y(),x()}),Xo(()=>{h&&i2(h)});async function y(){try{b(A,!0),b(d,""),b(i,await o$(t(),r()))}catch(R){console.error("[QnaList]   :",R),b(d,"     .")}finally{b(A,!1)}}function x(){h=f$(t(),async R=>{console.log("[QnaList]  :",R),await y()})}function C(R){switch(R){case"pending":return{label:"",class:"odz-badge-warning",icon:gp};case"answered":return{label:"",class:"odz-badge-success",icon:n1};case"closed":return{label:"",class:"odz-badge-neutral",icon:Ou};default:return{label:"",class:"odz-badge-ghost",icon:gp}}}function I(R){return R?new Date(R).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}async function N(R){if(R.id)try{const $=await e$(R.id,r());$.canAccess?o()&&o()(R.id):$.requiresPassword?(b(g,R),b(f,!0)):alert($.message||"  .")}catch($){console.error("[QnaList]    :",$),alert("     .")}}async function k(R){const{qnaId:$,password:j}=R.detail;try{const ae=await t$($,j);ae.canAccess?(b(f,!1),b(g,null),o()&&o()($)):l(w)&&l(w).setVerifyResult(!1,ae.message||"  .")}catch(ae){console.error("[QnaList]   :",ae),l(w)&&l(w).setVerifyResult(!1,"    .")}}function ee(){b(f,!1),b(g,null)}function G(){s()&&s()()}Jt(()=>(l(i),l(c),l(u)),()=>{let R=l(i);if(l(c).trim()){const $=l(c).toLowerCase();R=R.filter(j=>{var ae,Ee,_e;return((ae=j.title)==null?void 0:ae.toLowerCase().includes($))||((Ee=j.customer_name)==null?void 0:Ee.toLowerCase().includes($))||((_e=j.inquiry_no)==null?void 0:_e.toLowerCase().includes($))})}l(u)!=="all"&&(R=R.filter($=>$.status===l(u))),b(a,R)}),mo(),an();var H=zq(),Y=ut(H),Be=m(Y),M=B(m(Be),2);{var O=R=>{var $=fq(),j=m($);Nu(j,{class:"odz-w-4 odz-h-4"}),tt("click",$,G),Q(R,$)};xe(M,R=>{s()&&R(O)})}var J=B(Be,2),re=m(J),he=m(re);vp(he,{class:"odz-absolute odz-left-3 odz-top-1/2 odz--translate-y-1/2 odz-w-4 odz-h-4 odz-text-gray-400"});var ie=B(he,2),be=B(re,2);De(()=>{l(u),Tu(()=>{})});var te=m(be);te.value=(te.__value="all")==null?"":"all";var Z=B(te);Z.value=(Z.__value="pending")==null?"":"pending";var Ae=B(Z);Ae.value=(Ae.__value="answered")==null?"":"answered";var we=B(Ae);we.value=(we.__value="closed")==null?"":"closed";var z=B(J,2);{var F=R=>{var $=pq();Q(R,$)},E=R=>{var $=Lt(),j=ut($);{var ae=_e=>{var Le=gq(),X=m(Le);Ou(X,{class:"odz-w-5 odz-h-5"});var D=B(X,2),oe=m(D),ve=B(D,2);De(()=>Qe(oe,l(d))),tt("click",ve,y),Q(_e,Le)},Ee=_e=>{var Le=Lt(),X=ut(Le);{var D=ve=>{var le=yq(),ue=m(le);lE(ue,{class:"odz-w-12 odz-h-12 odz-mx-auto odz-text-gray-400 odz-mb-4"});var Ie=B(ue,2);{var Ne=Ce=>{var pe=mq(),Oe=B(ut(pe),4);{var ke=me=>{var q=vq(),de=m(q);Nu(de,{class:"odz-w-4 odz-h-4"}),tt("click",q,G),Q(me,q)};xe(Oe,me=>{s()&&me(ke)})}Q(Ce,pe)},ze=Ce=>{var pe=wq();Q(Ce,pe)};xe(Ie,Ce=>{l(i).length===0?Ce(Ne):Ce(ze,!1)})}Q(ve,le)},oe=ve=>{var le=Bq(),ue=ut(le),Ie=m(ue),Ne=B(m(Ie));er(Ne,5,()=>l(a),ke=>ke.id,(ke,me)=>{var q=_q();const de=at(()=>C(l(me).status));var ye=m(q),Fe=m(ye),Pe=m(Fe),nt=B(Pe);{var qe=rt=>{o1(rt,{class:"odz-w-3 odz-h-3 odz-text-amber-500",title:" "})};xe(nt,rt=>{l(me).customer_id||rt(qe)})}var je=B(ye),fe=m(je),Me=m(fe);Xm(Me,()=>l(de).icon,(rt,Dt)=>{Dt(rt,{class:"odz-w-3 odz-h-3"})});var At=B(Me),Ve=B(je),Ye=m(Ve),ot=m(Ye),ht=m(ot),Ge=B(ot,2);{var it=rt=>{var Dt=bq();Q(rt,Dt)};xe(Ge,rt=>{l(me).converted_estimate_id&&rt(it)})}var zt=B(Ve),xt=m(zt),Tt=B(zt),yt=m(Tt);De(rt=>{Qe(Pe,`${l(me).inquiry_no??""} `),Lr(fe,`odz-badge odz-badge-sm odz-gap-0.5 odz-whitespace-nowrap ${l(de).class??""}`),Qe(At,` ${l(de).label??""}`),Qe(ht,l(me).title||"( )"),Qe(xt,l(me).customer_name),Qe(yt,rt)},[()=>I(l(me).created_at)],at),tt("click",q,()=>N(l(me))),Q(ke,q)});var ze=B(ue,2),Ce=m(ze),pe=B(Ce);{var Oe=ke=>{var me=xq(),q=m(me);De(()=>Qe(q,`/  ${l(i).length??""}`)),Q(ke,me)};xe(pe,ke=>{l(a).length!==l(i).length&&ke(Oe)})}De(()=>Qe(Ce,` ${l(a).length??""} `)),Q(ve,le)};xe(X,ve=>{l(a).length===0?ve(D):ve(oe,!1)},!0)}Q(_e,Le)};xe(j,_e=>{l(d)?_e(ae):_e(Ee,!1)},!0)}Q(R,$)};xe(z,R=>{l(A)?R(F):R(E,!1)})}var U=B(Y,2);const P=at(()=>{var R;return((R=l(g))==null?void 0:R.id)||""}),T=at(()=>{var R;return((R=l(g))==null?void 0:R.inquiry_no)||""});Go(hq(U,{get qnaId(){return l(P)},get inquiryNo(){return l(T)},get isOpen(){return l(f)},set isOpen(R){b(f,R)},$$events:{verify:k,cancel:ee},$$legacy:!0}),R=>b(w,R),()=>l(w)),Fr(ie,()=>l(c),R=>b(c,R)),Pu(be,()=>l(u),R=>b(u,R)),Q(n,H),sn()}var Sq=W('<div class="odz-flex odz-items-center odz-justify-center odz-h-full"><div class="odz-loading odz-loading-dots odz-loading-md odz-text-gray-400"></div></div>'),Eq=W('<div class="odz-text-center odz-text-red-500 odz-py-4"> </div>'),Fq=W('<div class="odz-text-center odz-text-gray-500 odz-py-8"><p>  .</p> <p class="odz-text-sm odz-mt-1">   .</p></div>'),Iq=W('<div class="odz-flex odz-justify-center"><div class="odz-px-3.5 odz-py-2 odz-bg-gray-200 odz-text-gray-600 odz-text-sm odz-rounded-full"> </div></div>'),Uq=W("<button><!></button>"),Qq=W('<div><div class="odz-flex-shrink-0"><div><!></div></div> <div><span class="odz-text-sm odz-text-gray-500 odz-mb-1"> </span> <div class="odz-group odz-relative"><div> </div> <!></div> <span class="odz-text-xs odz-text-gray-400 odz-mt-1"> </span></div></div>'),Tq=W('<span class="odz-loading odz-loading-spinner odz-loading-sm"></span>'),Lq=W('<div class="odz-flex odz-flex-col odz-h-full odz-min-h-[300px]"><div class="odz-flex-1 odz-overflow-y-auto odz-space-y-4 odz-p-5 odz-bg-slate-50/50 odz-rounded-2xl odz-border odz-border-slate-100 odz-max-h-[500px] odz-shadow-inner"><!></div> <div class="odz-mt-4 odz-flex odz-gap-2"><textarea placeholder=" ..." class="odz-textarea odz-textarea-bordered odz-flex-1 odz-resize-none odz-h-14 odz-rounded-2xl odz-bg-white odz-border-slate-200 focus:odz-border-indigo-500 odz-shadow-sm odz-p-4"></textarea> <button class="odz-btn odz-btn-primary odz-rounded-2xl odz-h-14 odz-w-14 odz-p-0 odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!></button></div></div>');function Pq(n,e){on(e,!1);let t=gt(e,"qnaId",8),r=gt(e,"isManager",8,!1),o=gt(e,"customerName",8,""),s=Se([]),i=Se(""),a=Se(!0),A=Se(!1),d=Se(""),c=null,u=Se();Xn(async()=>{await h(),f()}),Xo(()=>{c&&i2(c)}),X4(()=>{g()});async function h(){try{b(a,!0),b(d,""),b(s,await d$(t()))}catch(he){console.error("[QnaComments]  :",he),b(d,"    .")}finally{b(a,!1)}}function f(){c=p$(t(),async he=>{console.log("[QnaComments]  :",he),await h()})}function g(){l(u)&&zr(u,l(u).scrollTop=l(u).scrollHeight)}async function w(){if(l(i).trim())try{b(A,!0);const he=r()?"manager":"customer",ie=r()?"":o();await Kz(t(),{writer:he,writer_name:ie,content:l(i).trim()}),b(i,"")}catch(he){console.error("[QnaComments]  :",he),alert("    .")}finally{b(A,!1)}}async function y(he){if(confirm("  ?"))try{await c$(he),b(s,l(s).filter(ie=>ie.id!==he))}catch(ie){console.error("[QnaComments]  :",ie),alert("    .")}}function x(he){he.key==="Enter"&&!he.shiftKey&&(he.preventDefault(),w())}function C(he){switch(r()?he.writer:he.writer,he.writer){case"customer":return{icon:mp,class:"odz-bg-blue-100 odz-text-blue-600",isMe:!r()};case"manager":return{icon:gE,class:"odz-bg-green-100 odz-text-green-600",isMe:r()};case"system":return{icon:oE,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1};default:return{icon:mp,class:"odz-bg-gray-100 odz-text-gray-600",isMe:!1}}}function I(he){if(!he)return"";const ie=new Date(he),be=new Date;return ie.toDateString()===be.toDateString()?ie.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):ie.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}an();var N=Lq(),k=m(N),ee=m(k);{var G=he=>{var ie=Sq();Q(he,ie)},H=he=>{var ie=Lt(),be=ut(ie);{var te=Ae=>{var we=Eq(),z=m(we);De(()=>Qe(z,l(d))),Q(Ae,we)},Z=Ae=>{var we=Lt(),z=ut(we);{var F=U=>{var P=Fq();Q(U,P)},E=U=>{var P=Lt(),T=ut(P);er(T,1,()=>l(s),R=>R.id,(R,$)=>{var j=Lt();const ae=at(()=>C(l($)));var Ee=ut(j);{var _e=X=>{var D=Iq(),oe=m(D),ve=m(oe);De(()=>Qe(ve,l($).content)),Q(X,D)},Le=X=>{var D=Qq(),oe=m(D),ve=m(oe),le=m(ve);Xm(le,()=>l(ae).icon,(de,ye)=>{ye(de,{class:"odz-w-4 odz-h-4"})});var ue=B(oe,2),Ie=m(ue),Ne=m(Ie),ze=B(Ie,2),Ce=m(ze),pe=m(Ce),Oe=B(Ce,2);{var ke=de=>{var ye=Uq(),Fe=m(ye);s1(Fe,{class:"odz-w-3.5 odz-h-3.5 odz-text-gray-400 hover:odz-text-red-500"}),De(()=>Lr(ye,`odz-absolute odz-top-0 ${(l(ae).isMe?"odz-left-0 -odz-translate-x-full odz-pr-1":"odz-right-0 odz-translate-x-full odz-pl-1")??""} odz-opacity-0 group-hover:odz-opacity-100 odz-transition-opacity`)),tt("click",ye,()=>y(l($).id)),Q(de,ye)};xe(Oe,de=>{(l(ae).isMe||r())&&l($).writer!=="system"&&de(ke)})}var me=B(ze,2),q=m(me);De(de=>{Lr(D,`odz-flex odz-gap-2 ${(l(ae).isMe?"odz-flex-row-reverse":"")??""}`),Lr(ve,`odz-w-8 odz-h-8 odz-rounded-full ${l(ae).class??""} odz-flex odz-items-center odz-justify-center`),Lr(ue,`odz-flex odz-flex-col odz-max-w-[70%] ${(l(ae).isMe?"odz-items-end":"odz-items-start")??""}`),Qe(Ne,l($).writer_name||l($).writer),Lr(Ce,`odz-px-4 odz-py-2.5 odz-rounded-2xl odz-text-base odz-whitespace-pre-wrap odz-shadow-sm ${(l(ae).isMe?"odz-bg-indigo-600 odz-text-white":"odz-bg-white odz-text-slate-800 odz-border odz-border-slate-200")??""}`),Qe(pe,l($).content),Qe(q,de)},[()=>I(l($).created_at)],at),Q(X,D)};xe(Ee,X=>{l($).writer==="system"?X(_e):X(Le,!1)})}Q(R,j)}),Q(U,P)};xe(z,U=>{l(s).length===0?U(F):U(E,!1)},!0)}Q(Ae,we)};xe(be,Ae=>{l(d)?Ae(te):Ae(Z,!1)},!0)}Q(he,ie)};xe(ee,he=>{l(a)?he(G):he(H,!1)})}Go(k,he=>b(u,he),()=>l(u));var Y=B(k,2),Be=m(Y),M=B(Be,2),O=m(M);{var J=he=>{var ie=Tq();Q(he,ie)},re=he=>{hE(he,{class:"odz-w-5 odz-h-5"})};xe(O,he=>{l(A)?he(J):he(re,!1)})}De(he=>{Be.disabled=l(A),M.disabled=he},[()=>l(A)||!l(i).trim()],at),Fr(Be,()=>l(i),he=>b(i,he)),tt("keydown",Be,x),tt("click",M,w),Q(n,N),sn()}var kq=W('<button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-transition-transform hover:odz-rotate-90" title=""><!></button>'),Oq=W('<div class="odz-flex odz-flex-col odz-items-center odz-justify-center odz-py-20 odz-gap-4"><div class="odz-loading odz-loading-spinner odz-loading-lg odz-text-indigo-600"></div> <span class="odz-text-gray-500 odz-animate-pulse">   ...</span></div>'),Dq=W('<div class="odz-alert odz-alert-error odz-shadow-sm odz-rounded-2xl"><!> <span> </span></div>'),Nq=W('<span class="odz-inline-flex odz-items-center odz-gap-1.5 odz-px-3.5 odz-py-1.5 odz-rounded-full odz-bg-indigo-50 odz-text-indigo-700 odz-text-xs odz-font-semibold odz-border odz-border-indigo-100 odz-shadow-sm"><!> </span>'),Mq=W('<button class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button>'),Hq=W('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),jq=W('<button class="odz-btn odz-btn-sm odz-btn-primary odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md hover:odz-scale-105 odz-transition-all"><!> </button>'),Rq=W('<span class="odz-loading odz-loading-spinner odz-loading-xs"></span>'),$q=W('<div class="odz-dropdown odz-dropdown-end"><button tabindex="0" role="button" class="odz-btn odz-btn-sm odz-btn-outline odz-gap-1.5 odz-rounded-xl odz-shadow-sm hover:odz-shadow-md odz-transition-all"><!> </button> <ul tabindex="0" class="odz-dropdown-content odz-z-[1] odz-menu odz-p-2 odz-shadow-xl odz-bg-base-100 odz-rounded-2xl odz-w-32 odz-mt-2 odz-border odz-border-gray-100 odz-backdrop-blur-sm"><li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li> <li><button class="odz-rounded-lg"></button></li></ul></div> <!> <button class="odz-btn odz-btn-sm odz-btn-ghost odz-text-error odz-btn-square odz-rounded-xl hover:odz-bg-error/10 odz-transition-colors" title=""><!></button>',1),qq=W('<button type="button" class="odz-w-full odz-text-left odz-bg-slate-50 odz-rounded-2xl odz-p-4 odz-border odz-border-slate-100 hover:odz-bg-white hover:odz-shadow-xl hover:odz-border-indigo-200 odz-transition-all odz-cursor-pointer odz-group"><div class="odz-flex odz-items-center odz-justify-between odz-mb-2"><div class="odz-flex odz-items-center odz-gap-2"><div class="odz-p-1.5 odz-rounded-lg odz-bg-white odz-border odz-border-slate-200 group-hover:odz-border-indigo-100 group-hover:odz-bg-indigo-50 odz-transition-colors"><!></div> <span class="odz-font-mono odz-text-sm odz-font-bold odz-text-slate-900"> </span></div> <span> </span></div> <div class="odz-flex odz-items-end odz-justify-between odz-gap-4"><p class="odz-text-sm odz-font-semibold odz-text-slate-700 odz-line-clamp-1 odz-flex-1"> </p> <span class="odz-text-[11px] odz-text-slate-400 odz-whitespace-nowrap"> </span></div></button>'),Kq=W('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-indigo-600 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><!>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-indigo-100 odz-text-indigo-800 odz-text-sm odz-font-bold"> </span></div> <div class="odz-grid odz-grid-cols-1 md:odz-grid-cols-2 odz-gap-3"></div></div>'),Vq=W('<div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-flex odz-items-center odz-justify-between odz-mb-5"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <span class="odz-inline-flex odz-items-center odz-px-3 odz-py-1 odz-rounded-full odz-bg-slate-100 odz-text-slate-600 odz-text-sm odz-font-bold"> </span></div> <!></div>'),Gq=W('<div class="odz-relative odz-overflow-hidden odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><div class="odz-absolute odz-top-0 odz-right-0 odz-w-64 odz-h-64 odz-bg-gradient-to-bl odz-from-indigo-50/50 odz-to-transparent -odz-z-10 odz-rounded-full -odz-mr-20 -odz-mt-20"></div> <div class="odz-flex odz-flex-wrap odz-items-start odz-justify-between odz-gap-6"><div class="odz-flex odz-flex-col odz-gap-3"><div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><span class="odz-px-2.5 odz-py-1 odz-bg-slate-50 odz-rounded-lg odz-text-xs odz-font-mono odz-font-semibold odz-text-slate-600 odz-border odz-border-slate-200 odz-shadow-sm"> </span> <span><!> </span> <!></div> <h3 class="odz-text-2xl odz-font-extrabold odz-text-slate-900 odz-leading-tight"> </h3></div> <div class="odz-flex odz-items-center odz-gap-2 odz-flex-wrap"><!> <!></div></div> <div class="odz-divider odz-my-5"></div> <div class="odz-grid odz-grid-cols-2 sm:odz-grid-cols-4 odz-gap-6 odz-p-6 odz-bg-gradient-to-br odz-from-slate-50 odz-to-indigo-50/30 odz-rounded-2xl odz-border odz-border-slate-100"><div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-base odz-text-slate-900"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900 odz-break-all"> </p></div> <div class="odz-flex odz-flex-col odz-gap-1.5"><span class="odz-text-[13px] odz-font-bold odz-text-slate-500 odz-uppercase odz-tracking-wider"></span> <p class="odz-text-sm odz-text-slate-900"> </p></div></div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-4 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div>  </h4> <div class="odz-prose odz-prose-lg odz-max-w-none odz-text-slate-900 odz-whitespace-pre-wrap odz-leading-relaxed odz-bg-slate-50/50 odz-p-8 odz-rounded-2xl odz-border odz-text-base odz-border-slate-100"> </div></div> <!> <div class="odz-bg-white odz-rounded-2xl odz-p-6 odz-border odz-border-gray-200 odz-shadow-[0_4px_20px_rgba(0,0,0,0.06)]"><h4 class="odz-text-base odz-font-bold odz-text-slate-900 odz-uppercase odz-tracking-widest odz-mb-5 odz-flex odz-items-center odz-gap-2"><div class="odz-w-1.5 odz-h-5 odz-bg-indigo-600 odz-rounded-full"></div> </h4> <!></div>',1),Wq=W('<div class="odz-space-y-4"><div class="odz-flex odz-items-center odz-justify-between odz-pb-4 odz-border-b odz-border-gray-200"><div class="odz-flex odz-items-center odz-gap-3"><h2 class="odz-text-2xl odz-font-bold odz-text-slate-900 odz-tracking-tight"> </h2></div> <!></div> <!></div>');function Xq(n,e){on(e,!1);const t=Se();let r=gt(e,"qnaId",8);gt(e,"shopId",8);let o=gt(e,"isManager",8,!1),s=gt(e,"onBack",8,void 0),i=gt(e,"onEdit",8,void 0),a=gt(e,"onConvertToEstimate",8,void 0),A=gt(e,"onViewEstimate",8,void 0),d=Se(null),c=[],u=[],h=Se([]),f=Se([]),g=Se(!0),w=Se(""),y=Se(!1),x=Se(!1),C=null;Xn(async()=>{await I(),N()}),Xo(()=>{C&&i2(C)});async function I(){try{if(b(g,!0),b(w,""),b(d,await qg(r())),!l(d)){b(w,"   .");return}const[z,F,E,U]=await Promise.all([o2(r()),s2(r()),a2(r()),A2(r())]);c=z,u=F,b(h,k(c,u,E,U));try{b(f,await _$(r()))}catch(P){console.warn("[QnaDetail]    :",P),b(f,[])}}catch(z){console.error("[QnaDetail]  :",z),b(w,"     .")}finally{b(g,!1)}}function N(){C=h$(r(),async z=>{console.log("[QnaDetail]  :",z),await I()})}function k(z,F,E,U){const P=new Map;return z.forEach(T=>{const R=T.idx??0;P.has(R)||P.set(R,{idx:R,productId:T.product_id,productName:T.product_name,variants:[],prints:[],simplePrints:[],addons:[],totalQuantity:0});const $=P.get(R);$.variants.push({variantId:T.variant_id||"",variantName:T.variant_name,quantity:T.quantity||0,optionValues:T.option_values}),$.totalQuantity+=T.quantity||0}),F.forEach(T=>{const R=T.idx??0,$=P.get(R);$&&$.prints.push({objectId:T.object_id||"",printType:T.print_type||"none",title:T.title,printMethod:T.print_method,templateId:T.template_id,colors:T.colors,uploadedFiles:T.uploaded_files,fileMetadata:T.file_metadata,memo:T.memo})}),E.forEach(T=>{const R=T.idx??0,$=P.get(R);$&&$.simplePrints&&$.simplePrints.push({objectId:T.object_id||"",printMethod:T.print_method,templateId:T.template_id,selectedColors:T.selected_colors,printConfig:T.print_config,uploads:T.uploads,nameSheet:T.name_sheet,memo:T.memo,price:T.price})}),U.forEach(T=>{const R=T.idx??0,$=P.get(R);$&&$.addons&&$.addons.push({addonId:T.addon_id,addonName:T.addon_name||"",selectedProductId:T.selected_product_id,selectedProductName:T.selected_product_name||"",selectedVariantId:T.selected_variant_id,selectedVariantName:T.selected_variant_name||"",quantity:T.quantity||0})}),Array.from(P.values())}function ee(z){switch(z){case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200",icon:gp};case"answered":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200",icon:n1};case"closed":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300",icon:Ou};default:return{label:"",class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200",icon:gp}}}function G(z){return z?new Date(z).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function H(z){switch(z){case"temp":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};case"pending":return{label:"",class:"odz-bg-amber-100 odz-text-amber-700 odz-border-amber-200"};case"progress":return{label:"",class:"odz-bg-sky-100 odz-text-sky-700 odz-border-sky-200"};case"completed":return{label:"",class:"odz-bg-emerald-100 odz-text-emerald-700 odz-border-emerald-200"};case"canceled":return{label:"",class:"odz-bg-rose-100 odz-text-rose-700 odz-border-rose-200"};case"hold":return{label:"",class:"odz-bg-slate-200 odz-text-slate-600 odz-border-slate-300"};default:return{label:z,class:"odz-bg-slate-100 odz-text-slate-600 odz-border-slate-200"}}}function Y(){s()&&s()()}function Be(z){A()?A()(z):window.location.href=`/?mode=register&estimateId=${z}&returnTo=qna`}function M(){var z;i()&&((z=l(d))!=null&&z.id)&&i()(l(d).id)}async function O(){var z;if((z=l(d))!=null&&z.id&&confirm("  ?     ."))try{b(x,!0),await s$(l(d).id),alert(" ."),s()&&s()()}catch(F){console.error("[QnaDetail]  :",F),alert("   .")}finally{b(x,!1)}}async function J(){var z;if((z=l(d))!=null&&z.id&&confirm("   ?"))try{b(y,!0);const F=await u$(l(d).id);alert(" ."),a()&&a()(F)}catch(F){console.error("[QnaDetail]   :",F),alert("    .")}finally{b(y,!1)}}async function re(z){var F;if((F=l(d))!=null&&F.id)try{await qz(l(d).id,z),b(d,{...l(d),status:z})}catch(E){console.error("[QnaDetail]   :",E),alert("    .")}}Jt(()=>l(d),()=>{b(t,l(d)&&((l(d).product_amount??0)>0||(l(d).print_amount??0)>0||(l(d).addon_amount??0)>0||(l(d).additional_amount??0)>0))}),mo(),an();var he=Wq(),ie=m(he),be=B(m(ie),2);{var te=z=>{var F=kq(),E=m(F);Yl(E,{class:"odz-w-5 odz-h-5"}),tt("click",F,Y),Q(z,F)};xe(be,z=>{s()&&z(te)})}var Z=B(ie,2);{var Ae=z=>{var F=Oq();Q(z,F)},we=z=>{var F=Lt(),E=ut(F);{var U=T=>{var R=Dq(),$=m(R);Ou($,{class:"odz-w-6 odz-h-6"});var j=B($,2),ae=m(j);De(()=>Qe(ae,l(w))),Q(T,R)},P=T=>{var R=Lt(),$=ut(R);{var j=ae=>{var Ee=Gq();const _e=at(()=>ee(l(d).status));var Le=ut(Ee),X=B(m(Le),2),D=m(X),oe=m(D),ve=m(oe),le=m(ve),ue=B(ve,2),Ie=m(ue);Xm(Ie,()=>l(_e).icon,(Je,mt)=>{mt(Je,{class:"odz-w-3 odz-h-3"})});var Ne=B(Ie),ze=B(ue,2);{var Ce=Je=>{var mt=Nq(),vt=m(mt);Rh(vt,{class:"odz-w-3 odz-h-3"}),Q(Je,mt)};xe(ze,Je=>{l(d).converted_estimate_id&&Je(Ce)})}var pe=B(oe,2),Oe=m(pe),ke=B(D,2),me=m(ke);{var q=Je=>{var mt=Mq(),vt=m(mt);r5(vt,{class:"odz-w-4 odz-h-4"}),tt("click",mt,M),Q(Je,mt)};xe(me,Je=>{i()&&l(d).status==="pending"&&Je(q)})}var de=B(me,2);{var ye=Je=>{var mt=$q(),vt=ut(mt),$t=m(vt),nr=m($t);cE(nr,{class:"odz-w-4 odz-h-4"});var Ht=B($t,2),Kt=m(Ht),sr=m(Kt),Ct=B(Kt,2),ft=m(Ct),Ot=B(Ct,2),Vt=m(Ot),ir=B(vt,2);{var cr=Dr=>{var Br=jq(),Wr=m(Br);{var Vr=yr=>{var en=Hq();Q(yr,en)},fr=yr=>{Rh(yr,{class:"odz-w-4 odz-h-4"})};xe(Wr,yr=>{l(y)?yr(Vr):yr(fr,!1)})}De(()=>Br.disabled=l(y)),tt("click",Br,J),Q(Dr,Br)};xe(ir,Dr=>{!l(d).converted_estimate_id&&l(h).length>0&&Dr(cr)})}var dr=B(ir,2),br=m(dr);{var yn=Dr=>{var Br=Rq();Q(Dr,Br)},Fn=Dr=>{s1(Dr,{class:"odz-w-4 odz-h-4"})};xe(br,Dr=>{l(x)?Dr(yn):Dr(Fn,!1)})}De(()=>{tl(sr,"odz-font-bold",l(d).status==="pending"),tl(ft,"odz-font-bold",l(d).status==="answered"),dr.disabled=l(x)}),tt("click",sr,()=>re("pending")),tt("click",ft,()=>re("answered")),tt("click",Vt,()=>re("closed")),tt("click",dr,O),Q(Je,mt)};xe(de,Je=>{o()&&l(d).status!=="closed"&&Je(ye)})}var Fe=B(X,4),Pe=m(Fe),nt=B(m(Pe),2),qe=m(nt),je=B(Pe,2),fe=B(m(je),2),Me=m(fe),At=B(je,2),Ve=B(m(At),2),Ye=m(Ve),ot=B(At,2),ht=B(m(ot),2),Ge=m(ht),it=B(Le,2);{var zt=Je=>{var mt=Kq(),vt=m(mt),$t=m(vt),nr=m($t);Rh(nr,{class:"odz-w-5 odz-h-5"});var Ht=B($t,2),Kt=m(Ht),sr=B(vt,2);er(sr,5,()=>l(f),vr,(Ct,ft)=>{var Ot=qq();const Vt=at(()=>{var gn;return H(((gn=l(ft).estimate)==null?void 0:gn.status)||"")});var ir=m(Ot),cr=m(ir),dr=m(cr),br=m(dr);Rh(br,{class:"odz-w-4 odz-h-4 odz-text-slate-400 group-hover:odz-text-indigo-600"});var yn=B(dr,2),Fn=m(yn),Dr=B(cr,2),Br=m(Dr),Wr=B(ir,2),Vr=m(Wr),fr=m(Vr),yr=B(Vr,2),en=m(yr);De(gn=>{var On,tn;Qe(Fn,((On=l(ft).estimate)==null?void 0:On.estimate_no)||"-"),Lr(Dr,`odz-inline-flex odz-items-center odz-px-2 odz-py-1 odz-rounded-md odz-text-[10px] odz-font-bold odz-border ${l(Vt).class??""}`),Qe(Br,l(Vt).label),Qe(fr,((tn=l(ft).estimate)==null?void 0:tn.name)||"  "),Qe(en,gn)},[()=>G(l(ft).created_at)],at),tt("click",Ot,()=>Be(l(ft).estimate_id)),Q(Ct,Ot)}),De(()=>Qe(Kt,l(f).length)),Q(Je,mt)};xe(it,Je=>{l(f).length>0&&Je(zt)})}var xt=B(it,2),Tt=B(m(xt),2),yt=m(Tt),rt=B(xt,2);{var Dt=Je=>{var mt=Vq(),vt=m(mt),$t=B(m(vt),2),nr=m($t),Ht=B(vt,2);Vz(Ht,{get products(){return l(h)},disabled:!0}),De(()=>Qe(nr,`${l(h).length??""}`)),Q(Je,mt)};xe(rt,Je=>{l(h).length>0&&Je(Dt)})}var St=B(rt,2),Nt=B(m(St),2);Pq(Nt,{get qnaId(){return r()},get isManager(){return o()}}),De(Je=>{Qe(le,`#${l(d).inquiry_no??""}`),Lr(ue,`odz-inline-flex odz-items-center odz-gap-1.5 odz-rounded-full odz-px-3.5 odz-py-1.5 odz-text-xs odz-font-semibold odz-shadow-sm odz-border ${l(_e).class??""}`),Qe(Ne,` ${l(_e).label??""}`),Qe(Oe,l(d).title||"( )"),Qe(qe,l(d).customer_name),Qe(Me,l(d).customer_phone||"-"),Qe(Ye,l(d).customer_email||"-"),Qe(Ge,Je),Qe(yt,l(d).content||"( )")},[()=>G(l(d).created_at)],at),Q(ae,Ee)};xe($,ae=>{l(d)&&ae(j)},!0)}Q(T,R)};xe(E,T=>{l(w)?T(U):T(P,!1)},!0)}Q(z,F)};xe(Z,z=>{l(g)?z(Ae):z(we,!1)})}Q(n,he),sn()}var Yq=W('<dialog id="estimate-modal" class="odz-modal odz-py-10 odz-modal-open"><div class="odz-modal-box odz-w-11/12 odz-max-w-5xl odz-h-full main-estimate-modal-box"><form method="dialog"><button class="odz-btn odz-btn-sm odz-btn-circle odz-btn-ghost odz-absolute odz-right-2 odz-top-2"></button></form> <!></div></dialog>'),Jq=W("<main><!></main>");function Zq(n,e){on(e,!1);const[t,r]=Qo(),o=()=>fn($l,"$customerStore",t);let s=Se(""),i="",a="",A="",d="",c="",u="",h="",f="",g="",w="",y=Se(!1),x=null,C=Se(null),I=null,N=null,k="list",ee=!1,G=null,H=null,Y=null,Be=null;function M(){var U,P,T,R,$,j,ae,Ee,_e,Le;i=((U=document.getElementById("odiz-product-id"))==null?void 0:U.value)||"",A=((P=document.getElementById("odiz-shop-id"))==null?void 0:P.value)||"",d=((T=document.getElementById("odiz-sess"))==null?void 0:T.value)||"",c=((R=document.getElementById("odiz-customer-id"))==null?void 0:R.value)||"",a=(($=document.getElementById("odiz-mall_type"))==null?void 0:$.value)||"",u=((j=document.getElementById("odiz-customer-name"))==null?void 0:j.value)||"",h=((ae=document.getElementById("odiz-customer-phone"))==null?void 0:ae.value)||"",f=((Ee=document.getElementById("odiz-customer-address1"))==null?void 0:Ee.value)||"",g=((_e=document.getElementById("odiz-customer-address2"))==null?void 0:_e.value)||"",w=((Le=document.getElementById("odiz-customer-postcode"))==null?void 0:Le.value)||""}function O(){document.querySelectorAll("input.odiz-hidden-class").forEach(P=>{const T=P.value;if(T){const R=document.getElementsByClassName(T);for(let $=0;$<R.length;$++)R[$].style.display="none"}})}function J(U,P,T,R,$){const j=document.createElement("div");j.className="odiz-estimate-preview-container odiz-app";const ae=T.closest("div");ae&&(ae.insertAdjacentElement("afterend",j),eA(WR,{target:j,props:{uuid:U,idx:P,appType:R,isAddCost:$}}))}function re(U,P=5e3){return new Promise(T=>{const R=document.getElementById(U);if(R)return T(R);const $=new MutationObserver(()=>{const j=document.getElementById(U);j&&($.disconnect(),T(j))});$.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{$.disconnect(),T(null)},P)})}function he(U){let T=new URLSearchParams(window.location.search).get(U);if(T)return T;try{if(T=new URL(window.location.href).searchParams.get(U),T)return T}catch{}const R=document.getElementById(`odiz-${U}`);return R!=null&&R.value?R.value:null}Xn(async()=>{var _e,Le,X;try{const D=await A5();D>0&&console.log(`[ODIZ]   : ${D}    .`)}catch(D){console.error("[ODIZ]    :",D)}const U=he("mode"),P=he("estimateId"),T=he("returnTo");console.log("[ODIZ] URL parameters:",{urlMode:U,urlEstimateId:P,urlReturnTo:T});let R=((_e=document.getElementById("odiz-app-type"))==null?void 0:_e.value)||"";(U==="register"||U==="list")&&(R=U,console.log("[ODIZ] AppType set from URL:",R)),P&&(I=P,console.log("[ODIZ] EditingEstimateId set:",I));const $=he("qnaId"),j=he("qnaMode"),ae=he("isManager");if($&&(N=$,console.log("[ODIZ] EditingQnaId set:",N)),(j==="register"||j==="list"||j==="detail")&&(k=j,console.log("[ODIZ] QnaMode set from URL:",k)),(ae==="true"||ae==="1")&&(ee=!0,console.log("[ODIZ] IsQnaManager set:",ee)),!R){console.warn("[ODIZ] No appType detected, exiting early");return}const Ee=document.getElementById("odiz-estimate");if(Ee&&Ee.addEventListener("click",be),M(),O(),oi.set({id:A,name:"",sess:d,customer_id:c}),$l.set({name:u,phone:h,address1:f,address2:g,postcode:w,mallType:a}),x=document.getElementById("odiz-estimate-list"),R==="order"||R==="admin"){const D=document.getElementById("select-order-class"),oe=document.getElementById("select-order-class-uuid");if(D&&oe){const ve=D.value,le=oe.value,ue=document.getElementsByClassName(ve);if(ue.length>0){const Ie=ue[0].getElementsByClassName(le);for(let Ne=0;Ne<Ie.length;Ne++){const ze=Ie[Ne],Ce=((Le=ze.textContent)==null?void 0:Le.trim())||"",pe=/odiz\s*:\s*([a-f0-9-]+)-(\d+)/i,Oe=Ce.match(pe);if(Oe){let ke=Oe[1],me=!1;ke.endsWith("-add")&&(ke=ke.slice(0,-4),me=!0);const q=Oe[2];J(ke,q,ze,R,me)}}}}}if(R==="list"&&x&&eA(pR,{target:x,props:{openEstimateModal:(D,oe)=>{Et.reset(),b(y,D),b(C,oe)}}}),R==="run"&&i){const D=document.getElementById("odiz-run-btn"),oe=((X=document.getElementById("odiz-run-btn-name"))==null?void 0:X.value)||" ";if(D){const ve=document.createElement("button");ve.textContent=oe,ve.type="button",ve.className="odz-btn odz-btn-primary",ve.onclick=ie,D.appendChild(ve)}}if(R==="fixed"){const D=document.getElementById("odiz-fixed-area");if(D&&i){const oe=document.createElement("div");if(oe.className="odiz-fixed-product-container odiz-app",D.appendChild(oe),a)try{const ve=await I0(a,i);ve&&(b(s,ve.id),eA(Xp,{target:oe,props:{productId:l(s)}}))}catch{}else i&&(b(s,i),eA(Xp,{target:oe,props:{productId:l(s)}}))}}if(R==="register"){console.log("[ODIZ] Register mode detected, waiting for container...");const D=await re("odiz-estimate-register-area");if(D){console.log("[ODIZ] Container found, mounting EstimateRegister with estimateId:",I);const oe=document.createElement("div");oe.className="odiz-estimate-register-container odiz-app",D.appendChild(oe),eA(W9,{target:oe,props:{mallType:a,customerId:c,sess:d,shopId:A,estimateId:I,returnTo:T||"list"}})}else console.error("[ODIZ] Failed to find #odiz-estimate-register-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-estimate-register-area"></div>')}if(R==="qna"){console.log("[ODIZ] QNA mode detected (dialog-based)");const D=await re("odiz-qna-area");if(D){console.log("[ODIZ] QNA container found, mounting QnaList as main view...");const oe=document.createElement("div");oe.className="odiz-qna-container odiz-app",D.appendChild(oe),eA(Cq,{target:oe,props:{shopId:A,customerId:c||void 0,onSelectQna:ve=>{H=ve,we()},onCreateNew:()=>{G=null,Ae()}}}),N?k==="detail"?(H=N,setTimeout(()=>we(),100)):k==="register"&&(G=N,setTimeout(()=>Ae(),100)):k==="register"&&(G=null,setTimeout(()=>Ae(),100))}else console.error("[ODIZ] Failed to find #odiz-qna-area after 5s timeout"),console.error('[ODIZ] Make sure PHP template includes: <div id="odiz-qna-area"></div>')}});async function ie(){Et.reset(),b(C,null);try{a&&Yt($l,lt(o).mallType=a,lt(o));const U=await I0(a,i);U?(b(s,U.id),b(y,!0)):alert("     .")}catch{alert("     .")}}function be(){b(s,""),Et.reset(),b(C,null),b(y,!0)}function te(U){U.style.cssText=`
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      background: transparent !important;
    `}function Z(U){U.style.cssText="",U.close()}function Ae(){const U=document.getElementById("qna-register-dialog-wrapper"),P=document.getElementById("qna-register-dialog");if(U&&P){if(U.classList.add("odiz-app"),Y){try{R2(Y)}catch(T){console.warn("[ODIZ] Failed to unmount previous QnaRegister instance:",T)}Y=null}P.innerHTML="",U.oncancel=T=>{T.preventDefault()},Y=eA(Aq,{target:P,props:{shopId:A,mallType:a,customerId:c||void 0,customerName:u,customerPhone:h,qnaId:G||"",onSubmitSuccess:T=>{Z(U),H=T,we()},onCancel:()=>{Z(U)}}}),U.showModal(),te(U)}}function we(){const U=document.getElementById("qna-detail-dialog-wrapper"),P=document.getElementById("qna-detail-dialog");if(U&&P&&H){if(U.classList.add("odiz-app"),Be){try{R2(Be)}catch(T){console.warn("[ODIZ] Failed to unmount previous QnaDetail instance:",T)}Be=null}P.innerHTML="",U.oncancel=T=>{T.preventDefault()},Be=eA(Xq,{target:P,props:{qnaId:H,shopId:A,isManager:ee,onBack:()=>{Z(U)},onEdit:T=>{Z(U),G=T,Ae()},onConvertToEstimate:T=>{console.log("[ODIZ] Converted to estimate:",T),alert(` . ( ID: ${T})`)}}}),U.showModal(),te(U)}}an();var z=Jq(),F=m(z);{var E=U=>{var P=Yq(),T=m(P),R=m(T),$=m(R),j=B(R,2);yM(j,{get productId(){return l(s)},get estimate(){return l(C)},get isEstimateModal(){return l(y)},set isEstimateModal(ae){b(y,ae)},$$legacy:!0}),tt("click",$,()=>b(y,!1)),Q(U,P)};xe(F,U=>{l(y)&&U(E)})}Q(n,z),sn(),r()}eA(Zq,{target:document.getElementById("odiz-app")});export{Ln as _,eK as c,iS as g};
